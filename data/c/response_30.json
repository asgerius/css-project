[{"tags": ["c"], "comments": [{"owner": {"reputation": 724, "user_id": 2744342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e46375ea8161701c62f0a0e0cde23f0?s=128&d=identicon&r=PG&f=1", "display_name": "Alok--", "link": "https://stackoverflow.com/users/2744342/alok"}, "edited": false, "score": 0, "creation_date": 1438819005, "post_id": 31844658, "comment_id": 51610785, "body": "Change <code>printf(&quot;chiis added&quot;);</code> to print a newline: <code>printf(&quot;chiis added\\n&quot;);</code>.  Then you will see that the second call is the culprit.  Also you can&#39;t compare strings with <code>&lt;</code> in C.  Use <code>strcmp</code>."}, {"owner": {"reputation": 33, "user_id": 4967355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jKJY-7vp0K4/AAAAAAAAAAI/AAAAAAAAARI/KR3V6C_kCZs/photo.jpg?sz=128", "display_name": "ian", "link": "https://stackoverflow.com/users/4967355/ian"}, "reply_to_user": {"reputation": 724, "user_id": 2744342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e46375ea8161701c62f0a0e0cde23f0?s=128&d=identicon&r=PG&f=1", "display_name": "Alok--", "link": "https://stackoverflow.com/users/2744342/alok"}, "edited": false, "score": 0, "creation_date": 1438819557, "post_id": 31844658, "comment_id": 51610916, "body": "Thank you @Alok, but why did adding the new line escape cause that line to print? Was it printing behind some other output?"}, {"owner": {"reputation": 702, "user_id": 3560192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0TwaN.png?s=128&g=1", "display_name": "Alexguitar", "link": "https://stackoverflow.com/users/3560192/alexguitar"}, "edited": false, "score": 0, "creation_date": 1438819631, "post_id": 31844658, "comment_id": 51610936, "body": "see my answer for that"}, {"owner": {"reputation": 724, "user_id": 2744342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e46375ea8161701c62f0a0e0cde23f0?s=128&d=identicon&r=PG&f=1", "display_name": "Alok--", "link": "https://stackoverflow.com/users/2744342/alok"}, "edited": false, "score": 1, "creation_date": 1438819632, "post_id": 31844658, "comment_id": 51610937, "body": "<code>stdout</code> is line buffered by default, so the output doesn&#39;t appear on stdout unless you output a newline.  Or you can flush <code>stdout</code> manually by calling <code>fflush(stdout)</code>.  In your case, I am assuming you wanted the newline anyway."}, {"owner": {"reputation": 724, "user_id": 2744342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e46375ea8161701c62f0a0e0cde23f0?s=128&d=identicon&r=PG&f=1", "display_name": "Alok--", "link": "https://stackoverflow.com/users/2744342/alok"}, "edited": false, "score": 0, "creation_date": 1438819728, "post_id": 31844658, "comment_id": 51610965, "body": "To further help you, you need to fix <code>while(current-&gt;name.value &lt; this-&gt;name.value)</code> to <code>while(strcmp(current-&gt;name.value, this-&gt;name.value) &lt; 0)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4967355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jKJY-7vp0K4/AAAAAAAAAAI/AAAAAAAAARI/KR3V6C_kCZs/photo.jpg?sz=128", "display_name": "ian", "link": "https://stackoverflow.com/users/4967355/ian"}, "edited": false, "score": 0, "creation_date": 1438819442, "post_id": 31844707, "comment_id": 51610884, "body": "Thank you for guiding a newbie toward a useful article!"}], "tags": [], "owner": {"reputation": 50972, "user_id": 74815, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/498c19952d2aa2c9ea2ccc4d9ea8ec69?s=128&d=identicon&r=PG", "display_name": "i_am_jorf", "link": "https://stackoverflow.com/users/74815/i-am-jorf"}, "is_accepted": true, "score": 1, "last_activity_date": 1438819112, "creation_date": 1438819112, "answer_id": 31844707, "question_id": 31844658, "link": "https://stackoverflow.com/questions/31844658/program-flow-stuck-in-function/31844707#31844707", "title": "Program flow stuck in function", "body": "<p>If the following if statement condition is false:</p>\n\n<pre><code>if(current-&gt;name.next) {\n</code></pre>\n\n<p>Then how will your while loop ever terminate?  That's your problem.</p>\n\n<p>See this on <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow\">debugging small programs</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 4967355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jKJY-7vp0K4/AAAAAAAAAAI/AAAAAAAAARI/KR3V6C_kCZs/photo.jpg?sz=128", "display_name": "ian", "link": "https://stackoverflow.com/users/4967355/ian"}, "edited": false, "score": 0, "creation_date": 1438820023, "post_id": 31844751, "comment_id": 51611049, "body": "I researched how the stdout buffer work and other buffers, very interesting! thanks!"}, {"owner": {"reputation": 702, "user_id": 3560192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0TwaN.png?s=128&g=1", "display_name": "Alexguitar", "link": "https://stackoverflow.com/users/3560192/alexguitar"}, "reply_to_user": {"reputation": 33, "user_id": 4967355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jKJY-7vp0K4/AAAAAAAAAAI/AAAAAAAAARI/KR3V6C_kCZs/photo.jpg?sz=128", "display_name": "ian", "link": "https://stackoverflow.com/users/4967355/ian"}, "edited": false, "score": 0, "creation_date": 1438820102, "post_id": 31844751, "comment_id": 51611074, "body": "btw you should mark @i_am_jorf answer as correct. Make sure to give him a upvote too :)"}], "tags": [], "owner": {"reputation": 702, "user_id": 3560192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0TwaN.png?s=128&g=1", "display_name": "Alexguitar", "link": "https://stackoverflow.com/users/3560192/alexguitar"}, "is_accepted": false, "score": 1, "last_activity_date": 1438819411, "creation_date": 1438819411, "answer_id": 31844751, "question_id": 31844658, "link": "https://stackoverflow.com/questions/31844658/program-flow-stuck-in-function/31844751#31844751", "title": "Program flow stuck in function", "body": "<p>If you add a <code>fflush(stdout);</code> after <code>printf(\"chiis added\");</code> you'll see that printf is indeed executed and your program gets stuck somewhere else (see @i_am_jorf's answer).</p>\n\n<p>Whatever you pass to printf() is buffered by the standard library to improve the performance of writing to the terminal. You can manually flush the buffer with fflush().</p>\n"}], "owner": {"reputation": 33, "user_id": 4967355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jKJY-7vp0K4/AAAAAAAAAAI/AAAAAAAAARI/KR3V6C_kCZs/photo.jpg?sz=128", "display_name": "ian", "link": "https://stackoverflow.com/users/4967355/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 31844707, "answer_count": 2, "score": 0, "last_activity_date": 1438819411, "creation_date": 1438818796, "question_id": 31844658, "link": "https://stackoverflow.com/questions/31844658/program-flow-stuck-in-function", "title": "Program flow stuck in function", "body": "<p>I seem to have created a selfish function which refuses to pass control back to my main function. I've inserted into my code several output statements to ease debugging, and to prove that the program is resting at the end of my 'add_node()' function. I have included the entire program because I am genuinely perplexed as to where the problem may lie.</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n\n/* All-purpose error function */\nvoid kill(char *error)\n{\n  if(errno != 0) {\n    perror(\"Error: \");\n  } else {\n    printf(\"%s\", error);\n  }\n  exit(1);\n}\n\n// A link with string data type\ntypedef struct slink\n{\n    char value[20];\n    struct node* prev;\n    struct node* next;\n}slink;\n\n// A link with double data type\ntypedef struct dlink\n{\n    double value;\n    struct node* prev;\n    struct node* next;\n}dlink;\n\n// Node structure, contains several links\ntypedef struct node\n{\n    slink name;\n    dlink weight;\n    dlink height;\n    dlink spins;  //Place forhead on bat, count spins until fall.\n    dlink chug;   //Open beer, chug. Record time.\n}node;\n\n// Creates a new node and populates it with given data arguments\nvoid add_node(char* n, double w, double h, double s, double c)\n{\n    node* this = malloc(sizeof(node));\n    bzero(this, sizeof(node));\n    if(!this) kill(\"Failed to create node.\\n\");\n\n    strncpy(this-&gt;name.value, n, 20);\n    this-&gt;weight.value = w;\n    this-&gt;height.value = h;\n    this-&gt;spins.value = s;\n    this-&gt;chug.value = c;\n\n    sort_node(this);\n    printf(\"returned flow to add_node\\n\");\n}\n\n/*Compares values of this node to the values of all other nodes\nand assigns appropriate ptr values to the links*/\nint sort_node(node* this)\n{\n    static bool first_sort = true;\n    static node* head;\n\n    if(first_sort){\n        this-&gt;name.prev = NULL;\n        this-&gt;name.next = NULL;\n        this-&gt;weight.prev = NULL;\n        this-&gt;weight.next = NULL;\n        this-&gt;spins.prev = NULL;\n        this-&gt;spins.next = NULL;\n        this-&gt;chug.prev = NULL;\n        this-&gt;chug.prev = NULL;\n        first_sort = false;\n        head = this;\n        printf(\"first node sorted successfully\\n\");\n    } else {\n        node* current = head;\n\n        //Traverse list searching for logical alphabetical neighbors\n        while(current-&gt;name.value &lt; this-&gt;name.value) {\n            if(current-&gt;name.next) {\n                current = current-&gt;name.next;\n            }\n        }\n        this-&gt;name.next = current;\n        this-&gt;name.prev = current-&gt;name.prev;\n        current-&gt;name.prev = this;\n    }\n\n    return 0;\n}\n\nint main(void)\n{\n    add_node(\"Chiis Manly\", 195, 66.5, 39, 23);\n    printf(\"chiis added\");\n\n    add_node(\"Harrie Malaria\", 253, 48, 210, 4);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output of this program is as follows:</p>\n\n<pre><code>first node sorted successfully\nreturned flow to add_node\n</code></pre>\n\n<p>note that 'printf(\"chiis added\");' in my 'main' function is never run. Thank you all greatly for any assistance!</p>\n"}, {"tags": ["c", "3d", "terminal", "ascii", "raycasting"], "comments": [{"owner": {"reputation": 17723, "user_id": 733077, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/db1bf62fae51d5bafb8f1db7fb677176?s=128&d=identicon&r=PG", "display_name": "luser droog", "link": "https://stackoverflow.com/users/733077/luser-droog"}, "edited": false, "score": 0, "creation_date": 1438893711, "post_id": 31844603, "comment_id": 51649964, "body": "Can you add the code to the question? I can&#39;t even view the link."}, {"owner": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "reply_to_user": {"reputation": 17723, "user_id": 733077, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/db1bf62fae51d5bafb8f1db7fb677176?s=128&d=identicon&r=PG", "display_name": "luser droog", "link": "https://stackoverflow.com/users/733077/luser-droog"}, "edited": false, "score": 0, "creation_date": 1438902290, "post_id": 31844603, "comment_id": 51653512, "body": "I added the code to the question."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5194407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601cfb85e77862b04c046f1a2713507?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rose", "link": "https://stackoverflow.com/users/5194407/bill-rose"}, "reply_to_user": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438821328, "post_id": 31844673, "comment_id": 51611342, "body": "Try a single frame. Can you get that to render properly?"}, {"owner": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438822836, "post_id": 31844673, "comment_id": 51611693, "body": "I can&#39;t. It just shows random characters, but the same characters every frame. The frame isn&#39;t even the full size of the terminal."}, {"owner": {"reputation": 101, "user_id": 5194407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601cfb85e77862b04c046f1a2713507?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rose", "link": "https://stackoverflow.com/users/5194407/bill-rose"}, "reply_to_user": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438823224, "post_id": 31844673, "comment_id": 51611773, "body": "There&#39;s an error in your output\t\t<code>for (iy=0; iy&lt;ROWS; iy++) \t\t\tfor (ix=0; ix&lt;COLS; ix++) \t\t\t\tprintf(&quot;%c&quot;, screen[ix][iy]);</code> You should be using <code>screen[iy][ix]</code>"}, {"owner": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438824510, "post_id": 31844673, "comment_id": 51612055, "body": "That definately helps, but I still don&#39;t see anything in the maze. The top half of the screen is filled with the character that is supposed to be the walls, and the bottom half doesn&#39;t have anything."}, {"owner": {"reputation": 101, "user_id": 5194407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601cfb85e77862b04c046f1a2713507?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rose", "link": "https://stackoverflow.com/users/5194407/bill-rose"}, "reply_to_user": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438830709, "post_id": 31844673, "comment_id": 51613583, "body": "What about if you set this to only do one frame, but redirect the program&#39;s output to a text file, e.g. <code>myProg &gt; testout.txt</code>"}, {"owner": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438866162, "post_id": 31844673, "comment_id": 51632373, "body": "When I run &quot;cat testout.txt&quot;, the frame displays the same as before, but when I open it in gedit, it says &quot;There was a problem opening the file&quot; and shows the same character for the top half, but a lot of red backslashes followed by zeros for the bottom half."}, {"owner": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438869300, "post_id": 31844673, "comment_id": 51634811, "body": "I tried moving posX and posY to a different location. Now there are diagonal stripes in each frame."}, {"owner": {"reputation": 101, "user_id": 5194407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601cfb85e77862b04c046f1a2713507?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rose", "link": "https://stackoverflow.com/users/5194407/bill-rose"}, "reply_to_user": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438870811, "post_id": 31844673, "comment_id": 51635887, "body": "I see a line <code>screen[i][ii]=&#39;&#39;;</code>. This probably isn&#39;t what you want. Try &#39; &#39; instead."}, {"owner": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "edited": false, "score": 0, "creation_date": 1438878191, "post_id": 31844673, "comment_id": 51641447, "body": "That line is supposed to add the walls to the screen array. I do have a character there, but it doesn&#39;t show in the paste."}], "tags": [], "owner": {"reputation": 101, "user_id": 5194407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a601cfb85e77862b04c046f1a2713507?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Rose", "link": "https://stackoverflow.com/users/5194407/bill-rose"}, "is_accepted": false, "score": 0, "last_activity_date": 1438818893, "creation_date": 1438818893, "answer_id": 31844673, "question_id": 31844603, "link": "https://stackoverflow.com/questions/31844603/c-raycaster-not-working/31844673#31844673", "title": "C: Raycaster not working", "body": "<p><code>fflush(stdout);</code> after your frame printing nested <code>for</code>s</p>\n"}], "owner": {"reputation": 263, "user_id": 5195656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95bb77910f46ac845b6672ce241e0a97?s=128&d=identicon&r=PG&f=1", "display_name": "Benjily3", "link": "https://stackoverflow.com/users/5195656/benjily3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1438902226, "creation_date": 1438818369, "last_edit_date": 1438902226, "question_id": 31844603, "link": "https://stackoverflow.com/questions/31844603/c-raycaster-not-working", "title": "C: Raycaster not working", "body": "<p>I tried to make an ascii raycaster in C that runs in the terminal. I don't think anything like that has been done before. It doesn't seem to print the frames correctly. Hopefully someone can tell me what the problem is. Here is my code: <a href=\"https://ghostbin.com/paste/9vxmz\" rel=\"nofollow\">https://ghostbin.com/paste/9vxmz</a>\nI was expecting the program to display a maze (stored in the map array) in first person. I didn't implement controls yet. Basically, there is a two dimensional char array that is the size of the terminal screen. This array is supposed to print every second. The screen array gets its values from a raycaster. I don't know exactly where the problem is, but it isn't that big of a program. Plz help I'm totally new to C.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;math.h&gt;\n#include &lt;unistd.h&gt;\nint getrows();\nint getcols();\ndouble diagnalMovementX(double x, double angle);\ndouble diagnalMovementY(double y, double angle);\n#define ROWS getrows()              // the amount of horisontal rows in the terminal\n#define COLS getcols()              // the amount of verticle columns in the terminal\n#define PI 3.14159265358979         // defines pi\n#define TAU 2*PI                // makes things easier because TAU is 360 degrees in radians\n#define DTOR PI/180             // multiply by this to convert degrees to radians\n#define RTOD 180/PI             // multiply by this to convert radians to degrees\nint currentframe=0;             // the current frame\nconst int map[13][12]={             // the actual map\n    {1,1,0,1,1,1,1,1,1,1,1,1},\n    {1,0,0,0,1,0,0,1,0,0,0,1},\n    {1,1,1,0,1,1,0,1,0,1,0,1},\n    {1,0,1,0,0,0,0,1,0,1,0,1},\n    {1,0,1,1,1,1,0,1,1,1,0,1},\n    {1,0,0,0,0,0,0,1,0,0,0,1},\n    {1,0,1,0,1,1,1,1,0,1,1,1},\n    {1,0,1,0,0,0,0,0,0,0,0,1},\n    {1,0,1,1,1,1,1,1,1,1,0,1},\n    {1,0,1,0,0,0,0,0,0,0,0,1},\n    {1,0,1,1,1,1,1,0,1,1,1,1},\n    {1,0,0,0,1,0,0,0,0,0,0,1},\n    {1,1,1,1,1,0,1,1,1,1,1,1}\n};\nint main() {\n    char screen[COLS][ROWS];        // this array is modified and printed every frame\n    double posX=2, posY=0;          // position for the player\n    double direction=0*DTOR;        // direction of the player\n    double fov=0*DTOR;          // the feild of vision\n    double angleBetweenEachRay=fov/COLS;    // the angle between each ray\n    double rayX, rayY;          // the position of the end of the ray\n    double rayAngle;            // the angle that the ray travels\n    double distanceToWall;          // the distance the player is away from a wall\n    int lineHeight;             // how many columns the wall should use on the screen\n    int sizeOfBlankSpaces;          // the size that the ceiling and floor should appear on the screen\n    int thisIntPreventsCrashes=0;       // prevents a ray from traveling endlessly\n\n    // gameloop starts here\n    while (1) {\n        // this allows movement\n        /* NOT IMPLEMENTED YET */\n        // this loop generates the columns of the frame\n        for (int i=0; i&lt;COLS; i++) {\n            // calculate the ray angle\n            rayAngle=direction-fov/2-angleBetweenEachRay+angleBetweenEachRay*(i+1);\n            // fix the ray angle if it is not a proper value\n            if (rayAngle&gt;TAU) {\n                rayAngle-=TAU;\n            }\n            else if (rayAngle&lt;0) {\n                rayAngle+=TAU;\n            }\n            // makes the ray start from the player\n            rayX=posX;\n            rayY=posY;\n            // increases the ray size\n            rayX=diagnalMovementX(rayX, rayAngle);\n            rayY=diagnalMovementY(rayY, rayAngle);\n            // this code prevents the ray from traveling endlessly and the game from freezing if there is no wall for the ray to hit\n            thisIntPreventsCrashes++;\n            if (thisIntPreventsCrashes&gt;10) {\n                lineHeight=0;\n            }\n            // checks if the ray hit a wall\n            if (map[(int) rayY][(int) rayX]==1) {\n                // calculates the distance to the wall using the distance formula\n                distanceToWall=sqrt(pow((rayX-posX), 2)+pow((rayY-posY), 2));\n                // calculates the size the wall should appear onscreen\n                lineHeight=ROWS/(10*distanceToWall);\n            }\n            // shows X when there is no wall\n            if (lineHeight==0) {\n                for (int ii=0; ii&lt;ROWS; ii++) {\n                    screen[i][ii]='X';\n                }\n            }\n            else {\n                // calculates the ceiling and floor size\n                sizeOfBlankSpaces=(ROWS-lineHeight)/2;\n                // ceiling\n                for(int ii=0; ii&lt;sizeOfBlankSpaces; ii++) {\n                    screen[i][ii]=' ';\n                }\n                // walls\n                for(int ii=sizeOfBlankSpaces; ii&lt;sizeOfBlankSpaces+lineHeight; ii++) {\n                    screen[i][ii]='';\n                }\n                // floor\n                for(int ii=sizeOfBlankSpaces+lineHeight; ii&lt;ROWS; ii++) {\n                    screen[i][ii]=' ';\n                }\n            }\n        }\n        // this sets the framerate\n        sleep(1);\n        // this clears the current frame\n        fflush(stdout);\n        //this code prints a new frame\n        for (int iy=0; iy&lt;ROWS; iy++) {\n            for (int ix=0; ix&lt;COLS; ix++) {\n                printf(\"%c\", screen[iy][ix]);\n            }\n            printf(\"\\n\");\n        }\n        currentframe++;\n    }\n    return 0;\n}\nint getrows() {\n    struct winsize w;\n    ioctl(0, TIOCGWINSZ, &amp;w);\n    return w.ws_row;\n}\nint getcols() {\n    struct winsize w;\n    ioctl(0, TIOCGWINSZ, &amp;w);\n    return w.ws_col;\n}\ndouble diagnalMovementX(double x, double angle) {\n    if (angle&lt;TAU &amp;&amp; angle&gt;0.5*TAU) {\n        x-=0.5*cos(angle);\n    }\n    else if (angle&gt;0 &amp;&amp; angle&lt;0.5*TAU) {\n        x+=0.5*cos(angle);\n    }\n    return x;\n}\ndouble diagnalMovementY(double y, double angle) {\n    if (angle&lt;TAU &amp;&amp; angle&gt;0.5*TAU) {\n        if (angle&lt;0.75*TAU) {\n            y-=0.5*sin(angle);\n        }\n        else if (angle&gt;0.75*TAU) {\n            y+=0.5*sin(angle);\n        }\n    }\n    else if (angle&gt;0 &amp;&amp; angle&lt;0.5*TAU) {\n        if (angle&lt;0.25*TAU) {\n            y+=0.5*sin(angle);\n        }\n        else if (angle&gt;0.25*TAU) {\n            y-=0.5*sin(angle);\n        }\n    }\n    else if (angle==0 || angle==TAU) {\n        y+=0.5;\n    }\n    else if (angle==0.5*TAU) {\n        y-=0.5;\n    }\n    return y;\n}\n</code></pre>\n"}, {"tags": ["c", "time-series", "compression"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1438820526, "post_id": 31844491, "comment_id": 51611158, "body": "You should probably be using explicit <code>signed char compressedNums[400];</code> since plain <code>char</code> can be signed or unsigned."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1438821293, "post_id": 31844491, "comment_id": 51611332, "body": "Note that if the difference between successive values is more than &#177;1.27, your compression scheme won&#39;t work well.  Obviously, you can spot that while compressing, and you&#39;d need to know how to handle it.  You could instead use <code>short</code> which would allow &#177;320 between successive values (with a resolution of 0.01 \u2014 or &#177;32 with a resolution of 0.001).  If the deltas between successive values are small enough, you should get close to perfect behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1438822729, "creation_date": 1438822729, "answer_id": 31845161, "question_id": 31844491, "link": "https://stackoverflow.com/questions/31844491/compress-series-of-close-numbers-in-c/31845161#31845161", "title": "Compress series of close numbers in C", "body": "<p>You can avoid the slow drift in precision by working out the delta not from the precise value of the previous element, but rather from the computed approximation of the previous element (i.e. the sum of the deltas). That way, you will always get the closest approximation to the next value.</p>\n\n<p>Personally, I'd use integer arithmetic for this purpose, but it will probably be fine with floating point arithmetic too, since floating point is reproducible even if not precise.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 1, "last_activity_date": 1438823046, "creation_date": 1438823046, "answer_id": 31845194, "question_id": 31844491, "link": "https://stackoverflow.com/questions/31844491/compress-series-of-close-numbers-in-c/31845194#31845194", "title": "Compress series of close numbers in C", "body": "<p>Look at the values as stored in memory:</p>\n\n<pre><code>184.   == 0x4067000000000000ull\n184.56 == 0x406711eb851eb852ull\n</code></pre>\n\n<p>The first two bytes are the same but the last six bytes are different.</p>\n\n<p>For integer deltas, multiply by 128 instead of 100, this will get you 7 bits of the fractional part. If the delta is too large for one byte use a three byte sequence {0x80, hi_delta, lo_delta}, so 0x80 is used a special indicator. If the delta happened to be -128, then that would be {0x80, 0xff, 0x80}.</p>\n"}, {"comments": [{"owner": {"reputation": 1906, "user_id": 994179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3e5674bafaccc1fba08313a3530f8896?s=128&d=identicon&r=PG", "display_name": "PaeneInsula", "link": "https://stackoverflow.com/users/994179/paeneinsula"}, "edited": false, "score": 0, "creation_date": 1438837855, "post_id": 31846853, "comment_id": 51615417, "body": "That works.  Unfortunately I&#39;m still on VS2012, which has no round function.  But I achieved the same thing by: int val1 = (int) (currentValue * 100); int val2 = (int) (lastValue*100); then delta = val1 - val2."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 0, "last_activity_date": 1438838122, "last_edit_date": 1438838122, "creation_date": 1438835229, "answer_id": 31846853, "question_id": 31844491, "link": "https://stackoverflow.com/questions/31844491/compress-series-of-close-numbers-in-c/31846853#31846853", "title": "Compress series of close numbers in C", "body": "<p>You should round the values before converting to an <code>int</code> to avoid the problems, as in this code.</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nenum { TS_SIZE = 400 };\n\ntypedef struct\n{\n    double firstValue;\n    double nums[TS_SIZE];\n    signed char compressedNums[TS_SIZE];\n    int compressionOK;\n} timeSeries;\n\nstatic\nvoid compress(timeSeries *t1)\n{\n    t1-&gt;firstValue = t1-&gt;nums[0];\n    double lastValue = t1-&gt;firstValue;\n    for (int i = 1; i &lt; TS_SIZE; ++i)\n    {\n        int delta = (int) round((t1-&gt;nums[i] - lastValue) * 100.0);\n\n        t1-&gt;compressionOK = 1;\n        if (delta &gt; CHAR_MAX || delta &lt; -CHAR_MAX)\n        {\n            printf(\"Delta too big: %d (%.3f) vs %d (%.3f) = delta %.3f\\n\",\n                    i-1, t1-&gt;nums[i-1], i, t1-&gt;nums[i], t1-&gt;nums[i] - t1-&gt;nums[i-1]);\n            t1-&gt;compressionOK = 0;\n            return;\n        }\n        else\n        {\n            t1-&gt;compressedNums[i] = (char) delta;\n            lastValue = t1-&gt;nums[i];\n        }\n    }\n}\n\nstatic\nvoid decompress(timeSeries *t1)\n{\n    if (t1-&gt;compressionOK)\n    {\n        double lastValue = t1-&gt;firstValue;\n\n        for (int i = 1; i &lt; TS_SIZE; ++i)\n        {\n            t1-&gt;nums[i] = lastValue + t1-&gt;compressedNums[i] / 100.0;\n            lastValue = t1-&gt;nums[i];\n        }\n    }\n}\n\nstatic void compare(const timeSeries *t0, const timeSeries *t1)\n{\n    for (int i = 0; i &lt; TS_SIZE; i++)\n    {\n        char c = (fabs(t0-&gt;nums[i] - t1-&gt;nums[i]) &gt; 0.005) ? '!' : ' ';\n        printf(\"%c %03d: %.3f vs %.3f = %+.3f\\n\", c, i, t0-&gt;nums[i], t1-&gt;nums[i], t0-&gt;nums[i] - t1-&gt;nums[i]);\n    }\n}\n\nint main(void)\n{\n    timeSeries t1;\n    timeSeries t0;\n    int i;\n\n    for (i = 0; i &lt; TS_SIZE; i++)\n    {\n        if (scanf(\"%lf\", &amp;t0.nums[i]) != 1)\n            break;\n    }\n    if (i != TS_SIZE)\n    {\n        printf(\"Reading problems\\n\");\n        return 1;\n    }\n\n    t1 = t0;\n\n    for (i = 0; i &lt; 10; i++)\n    {\n        printf(\"Cycle %d:\\n\", i+1);\n        compress(&amp;t1);\n        decompress(&amp;t1);\n        compare(&amp;t0, &amp;t1);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>With the following data (generated from integers in the range 18456..18855 divided by 100 and randomly perturbed by a small amount (about 0.3%, to keep the values close enough together), I got the same data over, and over again, for the full 10 cycles of compression and decompression.</p>\n\n<pre><code>184.60 184.80 184.25 184.62 184.49 184.94 184.95 184.39 184.50 184.96\n184.54 184.72 184.84 185.02 184.83 185.01 184.43 185.00 184.74 184.88\n185.04 184.79 184.55 184.94 185.07 184.60 184.55 184.57 184.95 185.07\n184.61 184.57 184.57 184.98 185.24 185.11 184.89 184.72 184.77 185.29\n184.98 184.91 184.76 184.89 185.26 184.94 185.09 184.68 184.69 185.04\n185.39 185.05 185.41 185.41 184.74 184.77 185.16 184.84 185.31 184.90\n185.18 185.15 185.03 185.41 185.18 185.25 185.01 185.31 185.36 185.29\n185.62 185.48 185.40 185.15 185.29 185.19 185.32 185.60 185.39 185.22\n185.66 185.48 185.53 185.59 185.27 185.69 185.29 185.70 185.77 185.40\n185.41 185.23 185.84 185.30 185.70 185.18 185.68 185.43 185.45 185.71\n185.60 185.82 185.92 185.40 185.85 185.65 185.92 185.80 185.60 185.57\n185.64 185.39 185.48 185.36 185.69 185.76 185.45 185.72 185.47 186.04\n185.81 185.80 185.94 185.64 186.09 185.95 186.03 185.55 185.65 185.75\n186.03 186.02 186.24 186.19 185.62 186.13 185.98 185.84 185.83 186.19\n186.17 185.80 186.15 186.10 186.32 186.25 186.09 186.20 186.06 185.80\n186.02 186.40 186.26 186.15 186.35 185.90 185.98 186.19 186.15 185.84\n186.34 186.20 186.41 185.93 185.97 186.46 185.92 186.19 186.15 186.32\n186.06 186.25 186.47 186.56 186.47 186.33 186.55 185.98 186.36 186.35\n186.65 186.60 186.52 186.13 186.39 186.55 186.50 186.45 186.29 186.24\n186.81 186.61 186.80 186.60 186.75 186.83 186.86 186.35 186.34 186.53\n186.60 186.69 186.32 186.23 186.39 186.71 186.65 186.37 186.37 186.54\n186.81 186.84 186.78 186.50 186.47 186.44 186.36 186.59 186.87 186.70\n186.90 186.47 186.50 186.74 186.80 186.86 186.72 186.63 186.78 186.52\n187.22 186.71 186.56 186.90 186.95 186.67 186.79 186.99 186.85 187.03\n187.04 186.89 187.19 187.33 187.09 186.92 187.35 187.29 187.04 187.00\n186.79 187.32 186.94 187.07 186.92 187.06 187.39 187.20 187.35 186.78\n187.47 187.54 187.33 187.07 187.39 186.97 187.48 187.10 187.52 187.55\n187.06 187.24 187.28 186.92 187.60 187.05 186.95 187.26 187.08 187.35\n187.24 187.66 187.57 187.75 187.15 187.08 187.55 187.30 187.17 187.17\n187.13 187.14 187.40 187.71 187.64 187.32 187.42 187.19 187.40 187.66\n187.93 187.27 187.44 187.35 187.34 187.54 187.70 187.62 187.99 187.97\n187.51 187.36 187.82 187.75 187.56 187.53 187.38 187.91 187.63 187.51\n187.39 187.54 187.69 187.84 188.16 187.61 188.03 188.06 187.53 187.51\n187.93 188.04 187.77 187.69 188.03 187.81 188.04 187.82 188.14 187.96\n188.05 187.63 188.35 187.65 188.00 188.27 188.20 188.21 187.81 188.04\n187.87 187.96 188.18 187.98 188.46 187.89 187.77 188.18 187.83 188.03\n188.48 188.09 187.82 187.90 188.40 188.32 188.33 188.29 188.58 188.53\n187.88 188.32 188.57 188.14 188.02 188.25 188.62 188.43 188.19 188.54\n188.20 188.06 188.31 188.19 188.48 188.44 188.69 188.63 188.34 188.76\n188.32 188.82 188.45 188.34 188.44 188.25 188.39 188.83 188.49 188.18\n</code></pre>\n\n<p>Until I put the rounding in, the values would rapidly drift apart.</p>\n\n<hr>\n\n<p>If you don't have <code>round()</code> \u2014 which was added to Standard C in the C99 standard \u2014 then you can use these lines in place of <code>round()</code>:</p>\n\n<pre><code>int delta;\nif (t1-&gt;nums[i] &gt; lastValue)\n    delta = (int) (((t1-&gt;nums[i] - lastValue) * 100.0) + 0.5);\nelse\n    delta = (int) (((t1-&gt;nums[i] - lastValue) * 100.0) - 0.5);\n</code></pre>\n\n<p>This rounds correctly for positive and negative values.  You could also factor that into a function; in C99, you could make it an <code>inline</code> function, but if that worked, you would have the <code>round()</code> function in the library, too.  I used this code at first before switching to the <code>round()</code> function.</p>\n"}], "owner": {"reputation": 1906, "user_id": 994179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3e5674bafaccc1fba08313a3530f8896?s=128&d=identicon&r=PG", "display_name": "PaeneInsula", "link": "https://stackoverflow.com/users/994179/paeneinsula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 31846853, "answer_count": 3, "score": 2, "last_activity_date": 1438838122, "creation_date": 1438817499, "last_edit_date": 1438820329, "question_id": 31844491, "link": "https://stackoverflow.com/questions/31844491/compress-series-of-close-numbers-in-c", "title": "Compress series of close numbers in C", "body": "<p>I have a number of time series each containing a sequence of 400 numbers that are close to each other.  I have thousands of time series; each has its own series of close numbers.</p>\n\n<p>TimeSeries1 = 184.56, 184.675, 184.55, 184.77, ...</p>\n\n<p>TimeSeries2 = 145.73, 145.384, 145.96, 145.33, ...</p>\n\n<p>TimeSeries3 = -126.48, -126.78, -126.55, ...</p>\n\n<p>I can store an 8 byte double for each time Series, so for <em>most</em> of the time series, I can compress each double to a single byte by multiplying by 100 and  taking the delta of the current value and the previous value.\nHere is my compress/decompress code:</p>\n\n<pre><code>struct{\n    double firstValue;\n    double nums[400];\n    char compressedNums[400];\n    int compressionOK;\n} timeSeries;\n\nvoid compress(void){\n    timeSeries.firstValue = timeSeries.nums[0];\n    double lastValue = timeSeries.firstValue;\n    for (int i = 1; i &lt; 400; ++i){ \n        int delta = (int) ((timeSeries.nums[i] * 100) - (lastValue* 100));\n\n        timeSeries.compressionOK = 1;\n        if (delta &gt; CHAR_MAX || delta &lt; -CHAR_MAX){\n            timeSeries.compressionOK = 0;\n            return;\n        }\n        else{       \n            timeSeries.compressedNums[i] = (char) delta;\n            lastValue = timeSeries.nums[i];\n        }\n    }\n}   \n\ndouble decompressedNums[400];    \n\nvoid decompress(void){\n    if (timeSeries.compressionOK){\n        double lastValue = timeSeries.firstValue;\n\n        for (int i = 1; i &lt; 400; ++i){\n            decompressedNums[i] = lastValue + timeSeries.compressedNums[i] / 100.0;\n            lastValue = decompressedNums[i];\n        }\n    }\n}\n</code></pre>\n\n<p>I can tolerate <em>some</em> lossiness, on the order of .005 per number.  However, I am getting more loss than I can tolerate, especially since a precision loss in one of the compressed series carries forward and causes an increasing amount of loss.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li>Is there something I can change to reduce the lossiness?</li>\n<li>Is there an altogether different compression method that has a comparable, or better, than this 8 to 1 ratio?</li>\n</ol>\n"}, {"tags": ["c", "random"], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 1342186, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/56fb95f643d7e1bf28b990def3b89a78?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/1342186/alexis"}, "edited": false, "score": 0, "creation_date": 1438873197, "post_id": 31844772, "comment_id": 51637848, "body": "How can I allow the user to specify the seed value using only a long int? in this approach it seems that the user need to define 3 numbers.. but I&#39; would like to ask only 1 number (like a safe prime) in the input file."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1438874376, "last_edit_date": 1438874376, "creation_date": 1438819585, "answer_id": 31844772, "question_id": 31844432, "link": "https://stackoverflow.com/questions/31844432/save-and-restart-random-chain-drand48-from-checkpoint-in-c/31844772#31844772", "title": "Save and restart random chain (drand48) from checkpoint in C", "body": "<p>If you need to be able to resume the random number sequence, you can't let the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/drand48.html\" rel=\"nofollow\"><code>drand48()</code></a> package hide the seed values from you, so you need to use different functions from the package.  Specifically, you should be calling:</p>\n\n<pre><code>double erand48(unsigned short xsubi[3]);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>double drand48(void);\n</code></pre>\n\n<p>and you'll keep an array of 3 <code>unsigned short</code> values around, and at each checkpoint, you'll record their values as part of the state.  If you need to resume where things left off, you'll restore the values from the saved state into your array, and then go on your merry way.</p>\n\n<p>This is also how you write library code that neither interferes with other code using the random number generators nor is interfered with by other code using the random number generators.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    unsigned short seed[3] = { 0, 0, 3 };\n\n    // Print 5 random numbers\n    for (int i = 0; i &lt; 5; i++)\n        printf(\"%d %f\\n\", i, erand48(seed));\n\n    // CHECKPOINT\n    unsigned short saved[3];\n    memmove(saved, seed, sizeof(seed));\n\n    // 5 numbers more\n    for (int i = 5; i &lt; 10; i++)\n        printf(\"%d %f\\n\", i, erand48(seed));\n\n    // Restart from the CHECKPOINT.\n    memmove(seed, saved, sizeof(seed));\n\n    // Last 5 numbers again\n    for (int i = 5; i &lt; 10; i++)\n        printf(\"%d %f\\n\", i, erand48(seed));\n\n    return 0;\n}\n</code></pre>\n\n<p>Example run:</p>\n\n<pre><code>0 0.700302\n1 0.122979\n2 0.346792\n3 0.290702\n4 0.617395\n5 0.059760\n6 0.783933\n7 0.352009\n8 0.734377\n9 0.124767\n5 0.059760\n6 0.783933\n7 0.352009\n8 0.734377\n9 0.124767\n</code></pre>\n\n<p>Clearly, how you set the seed array initially is entirely up to you.  You can easily allow the user to specify the seed value, and report the seed you're using so that they can do so.  You might use some elements from the PID or the time of day and the sub-seconds component as a default seed, for example.  Or you could access a random number device such as <code>/dev/urandom</code> and obtain 6 bytes of random value from that to use as the seed.</p>\n\n<hr>\n\n<blockquote>\n  <p>How can I allow the user to specify the seed value using only a <code>long int</code>? In this approach, it seems that the user need to define 3 numbers but I would like to ask only 1 number (like a safe prime) in the input file.</p>\n</blockquote>\n\n<p>You can take a single number and split it up in any way you choose.  I have a program that takes option <code>-s</code> to print the random seed, <code>-S</code> to set the seed from a <code>long</code>, and that sometimes splits the <code>long</code> into 3 <code>unsigned short</code> values when using a random Gaussian distribution generator.  I mostly work on 64-bit systems, so I simply split the <code>long</code> into three 16-bit components; the code also compiles safely under 32-bit systems but leaves the third number in the seed as 0.  Like this:</p>\n\n<pre><code>        case 'q':\n            qflag = true;\n            break;\n        case 'r':\n            check_range(optarg, &amp;min, &amp;max);\n            perturber = ptb_uniform;\n            break;\n        case 's':\n            sflag = true;\n            break;\n        case 't':\n            delim = optarg;\n            break;\n        case 'S':\n            seed = strtol(optarg, 0, 0);\n            break;\n        case 'V':\n            err_version(\"PERTURB\", &amp;\"@(#)$Revision: 1.6 $ ($Date: 2015/08/06 05:05:21 $)\"[4]);\n            /*NOTREACHED*/\n        default:\n            err_usage(usestr);\n            /*NOTREACHED*/\n        }\n    }\n\n    if (sflag)\n        printf(\"Seed: %ld\\n\", seed);\n\n    if (gflag)\n    {\n        unsigned short g_seed[3] = { 0, 0, 0 };\n        g_seed[0] = (unsigned short)(seed &amp; 0xFFFF);\n        g_seed[2] = (unsigned short)((seed &gt;&gt; 16) &amp; 0xFFFF);\n        if (sizeof(seed) &gt; 4)\n        {\n            /* Avoid 32-bit right shift on 32-bit platform */\n            g_seed[1] = (unsigned short)(((seed &gt;&gt; 31) &gt;&gt; 1) &amp; 0xFFFF);\n        }\n        gaussian_init(&amp;g_control, g_seed);\n    }\n    else\n        srand48(seed);\n\n    filter_anon(argc, argv, optind, perturb);\n    return 0;\n}\n</code></pre>\n\n<p>For my purposes, it is OK (not ideal, but OK) to have the even more restricted seeding values for 32-bit.  Yes, I could use <code>unsigned long long</code> and <code>strtoull()</code> etc instead, to get 64-bit numbers even on a 32-bit platform (though I'd have to convert that to a <code>long</code> to satisfy <code>srand48()</code> anyway.  An alternative that I considered is to accept an argument <code>-S xxxx:yyyy:zzzz</code> with the three seed components set separately.  I'd then have to modify the seed printing code as well as the parsing code.  I use a separate program <code>randseed</code> to read numbers from <code>/dev/urandom</code> and format the result so it can be passed to programs which need a random seed:</p>\n\n<pre><code>$ randseed -b 8\n0xF45820D2895B88CE\n$\n</code></pre>\n"}], "owner": {"reputation": 368, "user_id": 1342186, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/56fb95f643d7e1bf28b990def3b89a78?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/1342186/alexis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 31844772, "answer_count": 1, "score": 2, "last_activity_date": 1438874376, "creation_date": 1438817134, "question_id": 31844432, "link": "https://stackoverflow.com/questions/31844432/save-and-restart-random-chain-drand48-from-checkpoint-in-c", "title": "Save and restart random chain (drand48) from checkpoint in C", "body": "<p>I'm trying to write a program that gives the same result either if is executed entirely or if is stopped and restarted from some checkpoint. To do that I need to be able to repeat exactly the same random number sequence in any scenario. So, here a piece of code where I tried to do that, but of course, I'm not successful. Could you help me to fix this code?</p>\n\n<pre><code>int main(){\n int i;\n long int seed;\n\n // Initial seed\n srand48(3);\n\n // Print 5 random numbers\n for(i=0;i&lt;5;i++)  printf(\"%d %f\\n\",i,drand48());\n\n // CHECKPOINT: HOW TO PROPERLY SET seed?\n seed=mrand48(); // &lt;--- FIXME\n\n // 5 numbers more\n for(i=5;i&lt;10;i++) printf(\"%d %f\\n\",i,drand48());\n\n // Restart from the CHECKPOINT.\n srand48(seed);\n\n // Last 5 numbers again\n for(i=5;i&lt;10;i++) printf(\"%d %f\\n\",i,drand48());\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "gcc", "variable-length-array"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1438815998, "post_id": 31844223, "comment_id": 51609979, "body": "It doesn&#39;t compile (<code>2 : error: variably modified &#39;c&#39; at file scope</code>)."}, {"owner": {"reputation": 2470, "user_id": 1905854, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a1fc2596592b749bdc2a520ab5118c92?s=128&d=identicon&r=PG", "display_name": "B. Nadolson", "link": "https://stackoverflow.com/users/1905854/b-nadolson"}, "edited": false, "score": 0, "creation_date": 1438816079, "post_id": 31844223, "comment_id": 51610003, "body": "n is 0 at compile time and int c[n] will be a zero length array because structures are resolved at compile time."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438816893, "post_id": 31844223, "comment_id": 51610242, "body": "Since kernel structs often have to outlive the calls that raise them, there would seem to be limited usefulness, even if allocated on a kernel stack, (of limited size anyway).  Of couse, a global VLA does not make sense, (or compile), anyway:("}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438820921, "post_id": 31844223, "comment_id": 51611254, "body": "These are no standard compliant function definitions. They will <i>not</i> compiler without warning with gcc 5.1+"}], "answers": [{"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1438817200, "post_id": 31844428, "comment_id": 51610317, "body": "Who is so clever that down voted the answer?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438817265, "post_id": 31844428, "comment_id": 51610340, "body": "@Ali Abbasinasab  Is it you who down voted?"}, {"owner": {"reputation": 354, "user_id": 5199427, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/YdwB1.jpg?s=128&g=1", "display_name": "Alifornia", "link": "https://stackoverflow.com/users/5199427/alifornia"}, "edited": false, "score": 0, "creation_date": 1438886345, "post_id": 31844428, "comment_id": 51645930, "body": "Why did u remove my answer? And why did you deactivate my account? Interesting personality!"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 354, "user_id": 5199427, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/YdwB1.jpg?s=128&g=1", "display_name": "Alifornia", "link": "https://stackoverflow.com/users/5199427/alifornia"}, "edited": false, "score": 0, "creation_date": 1438886460, "post_id": 31844428, "comment_id": 51646001, "body": "@Ali Abbasinasab I hear this the first time. I have nothing common with the removing of your answer and deactivating your account. It is not me."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1438823912, "last_edit_date": 1438823912, "creation_date": 1438817094, "answer_id": 31844428, "question_id": 31844223, "link": "https://stackoverflow.com/questions/31844223/pitfalls-of-a-variable-size-array-in-c/31844428#31844428", "title": "Pitfalls of a variable size array in C", "body": "<p>It is invalid code because variable length arrays may not have sizes equal to 0. In your example, file-scope variable <code>n</code> is initialized by 0.</p>\n\n<p>This array</p>\n\n<pre><code>    int a[n];\n</code></pre>\n\n<p>has zero size because variable <code>n</code> was zero initialized as having static storage duration.</p>\n\n<p>To get a valid program you should write something like the following</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint n;\n\nvoid f( void ){n=2;}\nvoid g( void ){int b[n]; printf( \"sizeof( b ) = %zu\\n\", sizeof( b ) ); }\n\nint main( void )\n{\n        f();\n        int a[n];\n        printf( \"sizeof( a ) = %zu\\n\", sizeof( a ) );\n        g();\n}    \n</code></pre>\n\n<p>Take into account that VLA(s) were introduced in C99 and at the same time the Standard suppressed the default return type <code>int</code> of functions.</p>\n"}], "owner": {"reputation": 354, "user_id": 5199427, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/YdwB1.jpg?s=128&g=1", "display_name": "Alifornia", "link": "https://stackoverflow.com/users/5199427/alifornia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1438821050, "answer_count": 1, "score": -4, "last_activity_date": 1514730749, "creation_date": 1438815688, "last_edit_date": 1438820409, "question_id": 31844223, "link": "https://stackoverflow.com/questions/31844223/pitfalls-of-a-variable-size-array-in-c", "closed_reason": "Needs details or clarity", "title": "Pitfalls of a variable size array in C", "body": "<p>The following snippet compiles properly using standard <code>gcc</code>. What are possible pitfalls here? <em>--especially for kernel level development</em>.</p>\n\n<pre><code>int n;\n\nf(){n=2;}\ng(){int b[n];}\n\nmain(){\n        int a[n];\n        f();\n        g();\n}\n</code></pre>\n"}, {"tags": ["c", "archlinux", "openal"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1438813746, "post_id": 31843864, "comment_id": 51609244, "body": "What version of mingw. Also did you <code>#include &lt;windows.h&gt;</code> before including shlobj?  Can you post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 11, "user_id": 5195873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VjsH4aFHfoA/AAAAAAAAAAI/AAAAAAAAAGk/E7fIZ2YsIr0/photo.jpg?sz=128", "display_name": "HaCk3D", "link": "https://stackoverflow.com/users/5195873/hack3d"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438814076, "post_id": 31843864, "comment_id": 51609366, "body": "@MattMcNabb how to check that? where should i include this header? i was just making <code>yaourt -S mingw-w64-openal</code>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1438814265, "post_id": 31843864, "comment_id": 51609432, "body": "If you&#39;re wondering if it&#39;s the extra comma in the enum definition, that&#39;s actually allowed.. and the <code>}</code> is fine where it is.  <code>SHFOLDERAPI</code> is probably a macro with <code>EXTERN_C</code> in its expansion, which is probably not defined for some reason -- missing header?"}, {"owner": {"reputation": 11, "user_id": 5195873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VjsH4aFHfoA/AAAAAAAAAAI/AAAAAAAAAGk/E7fIZ2YsIr0/photo.jpg?sz=128", "display_name": "HaCk3D", "link": "https://stackoverflow.com/users/5195873/hack3d"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1438814414, "post_id": 31843864, "comment_id": 51609483, "body": "@Dmitri, okay then the syntax is correct, how can i fix this?"}, {"owner": {"reputation": 2758, "user_id": 446006, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zV0uM.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/446006/abhi"}, "edited": false, "score": 0, "creation_date": 1438815246, "post_id": 31843864, "comment_id": 51609768, "body": "check this out - <a href=\"http://sourceforge.net/p/mingw-w64/bugs/476/\" rel=\"nofollow noreferrer\">sourceforge.net/p/mingw-w64/bugs/476</a>"}, {"owner": {"reputation": 11, "user_id": 5195873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VjsH4aFHfoA/AAAAAAAAAAI/AAAAAAAAAGk/E7fIZ2YsIr0/photo.jpg?sz=128", "display_name": "HaCk3D", "link": "https://stackoverflow.com/users/5195873/hack3d"}, "reply_to_user": {"reputation": 2758, "user_id": 446006, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zV0uM.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/446006/abhi"}, "edited": false, "score": 0, "creation_date": 1438815796, "post_id": 31843864, "comment_id": 51609915, "body": "@Abhi, awesome, thnx a lot. Why they havent patched it yet? How to make this solved?"}, {"owner": {"reputation": 2758, "user_id": 446006, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zV0uM.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/446006/abhi"}, "edited": false, "score": 0, "creation_date": 1438848984, "post_id": 31843864, "comment_id": 51620946, "body": "Option #1 check the patch provided at that link - you have to rebuild -  Option #2 Try to pull the version that has the patch included"}, {"owner": {"reputation": 11, "user_id": 5195873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VjsH4aFHfoA/AAAAAAAAAAI/AAAAAAAAAGk/E7fIZ2YsIr0/photo.jpg?sz=128", "display_name": "HaCk3D", "link": "https://stackoverflow.com/users/5195873/hack3d"}, "reply_to_user": {"reputation": 2758, "user_id": 446006, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zV0uM.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/446006/abhi"}, "edited": false, "score": 0, "creation_date": 1438857103, "post_id": 31843864, "comment_id": 51626451, "body": "@Abhi, oh lol, a bit of misunderstanding, ive already fixed this syntax error. I was asking how to mark this question solved, coz im new to stackoverflow."}, {"owner": {"reputation": 2758, "user_id": 446006, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zV0uM.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/446006/abhi"}, "edited": false, "score": 0, "creation_date": 1438879033, "post_id": 31843864, "comment_id": 51641959, "body": "I have posted it in answer form below - please will push the counter up 1 and then click on accept as answer."}], "answers": [{"tags": [], "owner": {"reputation": 2758, "user_id": 446006, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zV0uM.jpg?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/446006/abhi"}, "is_accepted": true, "score": 0, "last_activity_date": 1438878973, "creation_date": 1438878973, "answer_id": 31861218, "question_id": 31843864, "link": "https://stackoverflow.com/questions/31843864/some-weird-code-in-i686-w64-mingw32-include-shlobj-h/31861218#31861218", "title": "Some weird code in i686-w64-mingw32/include/shlobj.h", "body": "<p>check this out - <a href=\"http://sourceforge.net/p/mingw-w64/bugs/476\" rel=\"nofollow\">http://sourceforge.net/p/mingw-w64/bugs/476</a> </p>\n\n<ul>\n<li>Option #1 check the patch provided at that link - you have to rebuild</li>\n<li>Option #2 Try to pull the version that has the patch included</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 5195873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VjsH4aFHfoA/AAAAAAAAAAI/AAAAAAAAAGk/E7fIZ2YsIr0/photo.jpg?sz=128", "display_name": "HaCk3D", "link": "https://stackoverflow.com/users/5195873/hack3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 31861218, "answer_count": 1, "score": 0, "last_activity_date": 1438878973, "creation_date": 1438813617, "last_edit_date": 1438815050, "question_id": 31843864, "link": "https://stackoverflow.com/questions/31843864/some-weird-code-in-i686-w64-mingw32-include-shlobj-h", "title": "Some weird code in i686-w64-mingw32/include/shlobj.h", "body": "<p>I was building openal for mingw-gcc</p>\n\n<p><code>$ yaourt -S mingw-w64-openal</code></p>\n\n<p>and got a syntax error:</p>\n\n<pre><code>[ 38%] Building C object CMakeFiles/OpenAL32.dir/Alc/alcConfig.c.obj\nIn file included from /tmp/yaourt-tmp-hacked/aur-mingw-w64-openal/src/openal-soft-1.16.0/Alc/alcConfig.c:36:0:\n/usr/i686-w64-mingw32/include/shlobj.h:37:3: error: unknown type name \u2018EXTERN_C\u2019\n   SHFOLDERAPI SHGetFolderPathW (HWND hwnd, int csidl, HANDLE hToken, DWORD dwFlags, \n   ^\n/usr/i686-w64-mingw32/include/shlobj.h:37:3: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018HRESULT\u2019\n   SHFOLDERAPI SHGetFolderPathW (HWND hwnd, int csidl, HANDLE hToken, DWORD dwFlags, \n   ^\n/usr/i686-w64-mingw32/include/shlobj.h:37:3: error: unknown type name \u2018HRESULT\u2019\nCMakeFiles/OpenAL32.dir/build.make:463: recipe for target 'CMakeFiles/OpenAL32.dir/Alc/alcConfig.c.obj' failed\nmake[2]: *** [CMakeFiles/OpenAL32.dir/Alc/alcConfig.c.obj] Error 1\nCMakeFiles/Makefile2:60: recipe for target 'CMakeFiles/OpenAL32.dir/all' failed\nmake[1]: *** [CMakeFiles/OpenAL32.dir/all] Error 2\nMakefile:116: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>i've looked into this <code>shlobj.h</code> on line 37 and found this:</p>\n\n<pre><code>typedef enum {\n  SHGFP_TYPE_CURRENT = 0,\n  SHGFP_TYPE_DEFAULT = 1,\n} SHGFP_TYPE;\n\n  SHFOLDERAPI SHGetFolderPathW (HWND hwnd, int csidl, HANDLE hToken, DWORD dwFlags, LPWSTR pszPath);\n</code></pre>\n\n<p>I'm not a pro in C, but seems like <code>}</code> is inside a enum block, so i've tried to fix it all the ways possible, but without success.</p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 2029, "user_id": 19998, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23ceadd62414885e8ccb5ed82d22afb2?s=128&d=identicon&r=PG", "display_name": "KovBal", "link": "https://stackoverflow.com/users/19998/kovbal"}, "edited": false, "score": 0, "creation_date": 1438813231, "post_id": 31843760, "comment_id": 51609069, "body": "Your <code>cadenas</code> is basically is <i>sort-of</i> a matrix already (array of an array). So what is the question?"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 3, "creation_date": 1438813295, "post_id": 31843760, "comment_id": 51609090, "body": "Strings can&#39;t be used? Strings can be used. Question could do with a tidy-up, unclear what you want."}, {"owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "edited": false, "score": 3, "creation_date": 1438813418, "post_id": 31843760, "comment_id": 51609136, "body": "Did you look at <a href=\"http://stackoverflow.com/q/30428615/3466415\">Taking user input and storing it in an array of strings in C</a>? Does it solve your problem? If not, why not?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438814111, "post_id": 31843760, "comment_id": 51609380, "body": "<code>strcpy(cadenas[x],cadena);</code> : Rewriting of the string literal is not allowed. (Also it does not have enough space.)"}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1438814293, "post_id": 31843760, "comment_id": 51609440, "body": "also, you probably want to use <code>strncopy(destination, src, length)</code> to make sure you don&#39;t walk off the location you&#39;re copying to..."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438814770, "post_id": 31843760, "comment_id": 51609604, "body": "Do you want to know how to correctly read a string in C?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1438814844, "post_id": 31843760, "comment_id": 51609630, "body": "Note: I&#39;d expect <code>{&quot;123&quot;, &quot;4567L&quot;, &quot;5a23&quot;, NULL}</code> rather than <code>{&quot;123&quot;, &quot;4567L&quot;, &quot;5a23&quot;, &#39;\\0&#39;}</code>"}, {"owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438815301, "post_id": 31843760, "comment_id": 51609778, "body": "@chux i think he probably is looking for a null terminated empty string as the last entry in his array of strings, which isn&#39;t NULL"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1438815456, "post_id": 31843760, "comment_id": 51609824, "body": "never <b>ever</b> use <code>gets()</code>, it&#39;s <a href=\"http://man7.org/linux/man-pages/man3/gets.3.html#BUGS\" rel=\"nofollow noreferrer\">broken</a>"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "reply_to_user": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "edited": false, "score": 0, "creation_date": 1438815590, "post_id": 31843760, "comment_id": 51609859, "body": "@Neil: it&#39;s an array of pointers, <code>NULL</code> is appropriate, <code>&#39;\\0&#39;</code> is not"}, {"owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "reply_to_user": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438816095, "post_id": 31843760, "comment_id": 51610008, "body": "@Veltas hmm I didn&#39;t say he had it correct - but I would not be passing NULL into strcpy without first checking as this is going to lead to an exception.."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438816531, "post_id": 31843760, "comment_id": 51610146, "body": "Yeah my bad, should be <code>&quot;\\0&quot;</code> rather than <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 3, "creation_date": 1438823135, "post_id": 31843760, "comment_id": 51611759, "body": "@Veltas Or simply <code>&quot;&quot;</code>."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438856435, "post_id": 31843760, "comment_id": 51626019, "body": "Yes <code>&quot;&quot;</code> is exactly what you should use."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438857507, "post_id": 31843760, "comment_id": 51626729, "body": "Is <code>cadenas</code> spanish for &#39;strings&#39;?"}], "answers": [{"comments": [{"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438857374, "post_id": 31844765, "comment_id": 51626641, "body": "You should probably just change your answer to use fgets, given that it&#39;s not hard to use and is about as long as a scanf call anyway."}], "tags": [], "owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "is_accepted": false, "score": 1, "last_activity_date": 1438822518, "last_edit_date": 1438822518, "creation_date": 1438819475, "answer_id": 31844765, "question_id": 31843760, "link": "https://stackoverflow.com/questions/31843760/array-of-strings-in-c/31844765#31844765", "title": "Array of &quot;strings&quot; in C", "body": "<p>If I understand your problem correctly, you would like the user to be able to enter multiple strings, until he/she types <code>z</code></p>\n\n<p>See if this piece of code helps you out. The strings will be stored in the <code>cadenas</code> array, as requested.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n\n#define MAX_CADENAS 100\n#define MAX_CADENA_LEN 255\nint getCadenas(char **cadenas){\n    int x=0;\n    char cad[MAX_CADENA_LEN+1];\n    printf(\"Enter cadenas to be analyzed ('z' to scape) \\n \\n\");\n\n    while(x&lt;MAX_CADENAS) {\n        scanf(\"%s\", cad);\n        if (strcmp(cad,\"z\")==0)\n            break;\n        cadenas[x] = malloc(strlen(cad)+1);\n        strcpy(cadenas[x], cad);\n        x++;\n    }\n    return x;\n}\n\nchar *cadenas[MAX_CADENAS];\nint main() {\n    int num, i;\n\n    num = getCadenas(cadenas);\n    for (i=0;i&lt;num; i++) {\n        printf(\"%s\\n\", cadenas[i]);\n    }\n}\n</code></pre>\n\n<p>Note0: the code assumes you know in advance what the maximum number of input strings can be (100). It also assumes a maximum size for each input string (255 characters)</p>\n\n<p>Note1: <code>gets</code> is deprecated. Also, instead of <code>scanf</code>, you might want to use <code>fgets</code>.</p>\n\n<p>Note2: the present code is for illustrative purpose only. It allocates memory for each input string, but it assumes no error occurs in doing so (i.e. it does not check what <code>malloc</code> returns).</p>\n\n<p>Note3: the allocated memory blocks must be freed when not used anymore (hint: cycle through the <code>cadenas</code> array and use <code>free</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "is_accepted": false, "score": 0, "last_activity_date": 1529152781, "last_edit_date": 1529152781, "creation_date": 1438864218, "answer_id": 31855833, "question_id": 31843760, "link": "https://stackoverflow.com/questions/31843760/array-of-strings-in-c/31855833#31855833", "title": "Array of &quot;strings&quot; in C", "body": "<p>Assuming you don't mind carrying on with fixed-size strings and arrays, here is your original program modified:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define MAX_CADENAS 100\n#define CADENA_LIMIT 1000\n\n// ...\n\nvoid getCadenas(char cadenas[MAX_CADENAS][CADENA_LIMIT]){\n\n    printf(\"Enter cadenas to be analyzed ('z' to scape) \\n \\n\");\n\n    int x;\n    for(x=0; x&lt;MAX_CADENAS-1; x++){\n        char cadena[CADENA_LIMIT];\n        fgets(cadena, CADENA_LIMIT, stdin);\n        // fgets will copy the newline character, we don't want that\n        int cadenaLength=strlen(cadena);\n        if(cadena[cadenaLength-1]=='\\n')\n            cadena[cadenaLength-1]='\\0';\n        if(strcmp(cadena, \"z\")==0) break;\n        strcpy(cadenas[x], cadena);\n    }\n    cadenas[x][0]='\\0';\n}\n\n// ...\n</code></pre>\n\n<p>Prefer <code>fgets</code> as you can prevent overflow of the fixed-size strings. Unfortunately it copies the newline as well, so I have code to handle that. The result is an array in the form you originally specified (except it ends with <code>\"\"</code> which we decided was what you were after in the comments).</p>\n\n<p>You <em>can</em> read arbitrary sized strings in C like in other languages, but you would need to implement it with <a href=\"http://www.cprogramming.com/tutorial/c/lesson6.html\" rel=\"nofollow noreferrer\"><code>malloc()</code> and co</a>. Allocating dynamically sized memory is primarily controlled with the functions <code>malloc</code>, <code>calloc</code>, <code>realloc</code> and <code>free</code>. <strong>This would make the program unavoidably more complicated</strong>. Here is one way of doing this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n// ...\n\nchar *getCadena(){\n    int length=0, capacity=1, character;\n    char *cadena=malloc(1); // sizeof(char) is always 1\n    while((character=getchar())!=EOF){\n        if(character=='\\n') break;\n        // Add character to string\n        length++;\n        if(capacity&lt;length){\n            capacity*=2;\n            cadena=realloc(cadena,capacity);\n        }\n        cadena[length-1]=character;\n    }\n\n    // Add terminator to cadena\n    length++;\n    if(capacity&lt;length){\n        capacity*=2;\n        cadena=realloc(cadena,capacity);\n    }\n    cadena[length-1]='\\0';\n\n    return cadena;\n}\n\nchar **getCadenas(){\n\n    printf(\"Enter cadenas to be analyzed ('z' to scape) \\n \\n\");\n\n    int length=0, capacity=1;\n    char **cadenas=malloc(sizeof(char *));\n    for(;;){\n        char *cadena=getCadena();\n        if(strcmp(cadena,\"z\")==0){\n            free(cadena);\n            break;\n        }\n        // Add pointer to cadenas array\n        length++;\n        if(capacity&lt;length){\n            capacity*=2;\n            cadenas=realloc(cadenas,capacity*sizeof(char *));\n        }\n        cadenas[length-1]=cadena;\n    }\n\n    // Add NULL to end of cadenas\n    length++;\n    if(capacity&lt;length){\n        capacity*=2;\n        cadenas=realloc(cadenas,capacity*sizeof(char *));\n    }\n    cadenas[length-1]=NULL;\n\n    return cadenas;\n}\n\nvoid freeCadenas(char **cadenas){\n    int i=0;\n    while(cadenas[i]!=NULL){\n        free(cadenas[i]);\n        i++;\n    }\n    free(cadenas);\n}\n\n// ...\n</code></pre>\n\n<p>This works mostly the same as the previous function, except you should use <code>freeCadenas</code> eventually, and I end the array with <code>NULL</code> instead of <code>\"\"</code> which is customary.</p>\n\n<p>The code is a lot longer, but it's pretty typical of more sophisticated C code with less arbitrary limits. In fact real C code usually has more robust handling of errors and more generic functions for managing dynamic arrays. If you actually manage to make this \"home-compiler\", however, you will figure all this out for yourself.</p>\n"}], "owner": {"reputation": 33, "user_id": 3294339, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/607e10c61efe8ef8c0fb7f15dbbc699e?s=128&d=identicon&r=PG&f=1", "display_name": "Campa", "link": "https://stackoverflow.com/users/3294339/campa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1529152781, "creation_date": 1438813008, "last_edit_date": 1438821859, "question_id": 31843760, "link": "https://stackoverflow.com/questions/31843760/array-of-strings-in-c", "title": "Array of &quot;strings&quot; in C", "body": "<p>I know that there is a question with the same name, but it didn't work for me.\nI'm making a home-compiler, returns the words that belongs to a language.</p>\n\n<p>The words to analyze are in this vector:</p>\n\n<pre><code>char *cadenas[]= {\"123\", \"4567L\", \"5a23\", '\\0'};\n</code></pre>\n\n<p>Now I want to enter the words by console, but strings can't be used in C, how can I do it? (Without making a matrix possibly)</p>\n\n<pre><code>void getCadenas(char *cadenas[]){\n\n    printf(\"Enter cadenas to be analyzed ('z' to scape) \\n \\n\");\n\n    char cadena[15];\n    gets(cadena);\n    int x=0;\n\n    while(cadena[0]!='z'){\n        strcpy(cadenas[x],cadena);\n        x++;\n        gets(cadena);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 2, "creation_date": 1438812817, "post_id": 31843683, "comment_id": 51608896, "body": "Are you sure auxfile.c is getting built at all? Can you add an error in that file just to be sure?"}, {"owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "reply_to_user": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1438813052, "post_id": 31843683, "comment_id": 51608992, "body": "No, it&#39;s not. I added a random open curly brace { to auxfile.c, and the error message is the same. So my code isn&#39;t even seeing it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1438816956, "post_id": 31843683, "comment_id": 51610255, "body": "You never compiled auxfile.c"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "edited": false, "score": 0, "creation_date": 1438813308, "post_id": 31843781, "comment_id": 51609098, "body": "The above will work better if you put a space character after the -o options."}, {"owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438813529, "post_id": 31843781, "comment_id": 51609166, "body": "Cool, Felix! Your commands totally work without any errors (as you probably knew would happen.) Unfortunately, my code is so minimized that I have no way of making the final executable do anything...but I&#39;ll see about that. Also, it&#39;ll take me some time to digest your instructions and apply them to the big program...but I think you&#39;ve solved my problem. Thanks a whole lot."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438813777, "post_id": 31843781, "comment_id": 51609258, "body": "@Jeff well, can&#39;t say anything about <i>that</i> here .. it&#39;s example code after all. Try this with a <i>real</i> project and you will see it works and you will get crazy and <i>then</i> explore the power of a <code>Makefile</code> ;)"}, {"owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438814063, "post_id": 31843781, "comment_id": 51609360, "body": "@Felix Okay, well it&#39;s a good start. By the way, I&#39;ve now gotten the final mainfile to print &quot;Hey.&quot; so I&#39;m well on my way. :) (I&#39;ll keep the possibility of Makefile in mind.) Thank you again."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "edited": false, "score": 0, "creation_date": 1438814234, "post_id": 31843781, "comment_id": 51609421, "body": "@Jeff see my edit for a basic Makefile automating the build process."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "edited": false, "score": 0, "creation_date": 1438814344, "post_id": 31843781, "comment_id": 51609455, "body": "Sorry, my mistake. The gcc and g++ documentation say nothing about omitting the space between the -o switch and its filename argument, so I didn&#39;t realise this syntax actually worked."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438814585, "post_id": 31843781, "comment_id": 51609538, "body": "@evictorr doesn&#39;t have to be documented because it&#39;s a unix convention: one-letter options may be followed by the argument directly ;) nevermind."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4411382"}, "edited": false, "score": 0, "creation_date": 1438814888, "post_id": 31843781, "comment_id": 51609644, "body": "Yes, I just remembered that, it&#39;s handled by getopt. Thanks for the reminder."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 4, "last_activity_date": 1438814530, "last_edit_date": 1438814530, "creation_date": 1438813152, "answer_id": 31843781, "question_id": 31843683, "link": "https://stackoverflow.com/questions/31843683/undefined-reference-from-c-to-variables-functions-defined-in-c-file/31843781#31843781", "title": "Undefined reference from C++ to variables/functions defined in C file", "body": "<p>At the time of linking, all symbols (except those for dynamic linking, aka shared libraries) have to be defined. To create an object file with possibly unresolved symbols for later linking, there is the <code>-c</code> flag, that means <em>just compile, do not link</em>.</p>\n\n<p>So, the following would work:</p>\n\n<pre><code>g++ -c -omainfile.o mainfile.cpp\ngcc -c -oauxfile.o auxfile.c\ng++ -o mainfile mainfile.o auxfile.o\n</code></pre>\n\n<p>Only the last line actually invokes the linker and as you have both object files, all symbols are found.</p>\n\n<p>Just for completeness, in a real-world scenario you'd handle compiling and linking using <code>make</code>. Create a <code>Makefile</code> with the following contents:</p>\n\n<pre><code>OBJS:= mainfile.o auxfile.o\n\nall: mainfile\n\n# $@ means what to build (in this case \"mainfile\"), $^ is replaced by all\n# dependencies (here the contents of the variable OBJS)\nmainfile: $(OBJS)\n        g++ -o$@ $^\n\n# pattern for *.cpp -&gt; create a *.o file with same name using g++\n%.o: %.cpp\n        g++ -c -o$@ $&lt;\n\n# the same for *.c, but using gcc here\n%.o: %.c\n        gcc -c -o$@ $&lt;\n\nclean:\n        rm -f $(OBJS)\n\n# \"PHONY\" are targets, that are not actually the names of output files\n.PHONY: all clean\n</code></pre>\n\n<p>Then just type <code>make</code> and see the \"magic\" happening. Of course this is just for starters, no dependencies are tracked etc...</p>\n"}], "owner": {"reputation": 21, "user_id": 3555237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecea22a87f042cc5df65165fcdc94265?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3555237/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1438814530, "creation_date": 1438812500, "question_id": 31843683, "link": "https://stackoverflow.com/questions/31843683/undefined-reference-from-c-to-variables-functions-defined-in-c-file", "title": "Undefined reference from C++ to variables/functions defined in C file", "body": "<p>I've been given a package of files (one .cpp, and some .c and .h) and want to make some modifications. But right now I'm just trying to get the original version to compile (in Linux).</p>\n\n<p>Here's a (really) minimal working example:</p>\n\n<p>mainfile.cpp    </p>\n\n<pre><code>extern \"C\"{\n#include \"auxfile.h\"\n}\n\nint main(int argc, char * argv[]){\ngetfoo(temperature);\nreturn 0;}\n</code></pre>\n\n<p>auxfile.h </p>\n\n<pre><code>#define PUBLIC\n#define PRIVATE static\nextern int temperature;\nint   getfoo(  int inputint);\n</code></pre>\n\n<p>auxfile.c</p>\n\n<pre><code>#include \"auxfile.h\"\nint temperature = 37;\nPUBLIC int getfoo(  int inputint){\nreturn 7;\n}\n</code></pre>\n\n<p>When I type</p>\n\n<pre><code>g++ mainfile.cpp\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>mainfile.cpp(.text+0x11): undefined reference to `temperature'\nmainfile.cpp(.text+0x18): undefined reference to `getfoo'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>For what it's worth, I've looked through numerous \"undefined reference\" questions and spent dozens of hours working on my own. The above code presents the essence of the problem. Any help would be massively appreciated. Thanks.</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "circular-buffer"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438812451, "post_id": 31843576, "comment_id": 51608757, "body": "Can you show <code>struct CircularBuffer</code> and the functions used to manipulate it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438812452, "post_id": 31843576, "comment_id": 51608759, "body": "Not trying to reproduce this because it won&#39;t even compile ... no <code>CircularBuffer</code>, no <code>temp</code> ..."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438813004, "post_id": 31843576, "comment_id": 51608965, "body": "Definitely need a smaller piece of code to reproduce, and actually give complete code. Maybe try a smaller example to test something you&#39;re doing here that you&#39;re not completely confident about?"}, {"owner": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "edited": false, "score": 0, "creation_date": 1438813417, "post_id": 31843576, "comment_id": 51609135, "body": "I tried to be as explanatory as possible , putting a lot of code"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 1, "creation_date": 1438814376, "post_id": 31843576, "comment_id": 51609467, "body": "You&#39;re failing in the same way that Olaf identified in the question you just linked, check the docs on <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete and verifiable questions</a>."}, {"owner": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "edited": false, "score": 0, "creation_date": 1438814687, "post_id": 31843576, "comment_id": 51609571, "body": "Sorry, i am a noob :( Now i try to edit the main post with a smaller and complete example."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1438815055, "post_id": 31843576, "comment_id": 51609704, "body": "Your <code>circularBufferAdd</code> does not change <code>E</code> as it should. That means you are always overwriting the first element. If you have already fixed that then don&#39;t just link to old (incorrect) code. Provide the most up to date code and put it all in this question (not as a link)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1438835959, "post_id": 31843576, "comment_id": 51614853, "body": "This is essentially the same problem as in the previous question, and the solution is pretty much the same as in the previous question, so I&#39;ve closed this as a duplicate of the previous question."}], "answers": [{"tags": [], "owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1438821689, "creation_date": 1438821689, "answer_id": 31845030, "question_id": 31843576, "link": "https://stackoverflow.com/questions/31843576/c-switch-two-struct-in-one-array/31845030#31845030", "title": "C: switch two struct in one array", "body": "<p>In the question you linked to, you have this implementation of\n<code>circularBufferAdd</code>:</p>\n\n<pre><code>void circularBufferAdd(struct CircularBuffer *cb, void* obj) {\n    memcpy(cb-&gt;buffer + cb-&gt;E, obj, cb-&gt;sizeOfType);\n}\n</code></pre>\n\n<p>Now as you are aware there are problems with this function; that's\nwhy you posted the other question. But here's the answer you accepted:</p>\n\n<pre><code>    memcpy((char *)cb-&gt;buffer + (cb-&gt;E * cb-&gt;sizeOfType), obj, cb-&gt;sizeOfType);\n</code></pre>\n\n<p>The common theme here is that you are copying the <em>contents</em> of the struct\nthat <code>obj</code> points to (not the pointer <code>obj</code> itself)\nsomewhere into the memory allocated for <code>cb-&gt;buffer</code>.</p>\n\n<p>From the main function, you make this call:</p>\n\n<pre><code>    timerWheelAdd(tw1, td5);\n</code></pre>\n\n<p>So now you have copies of the same data in two places:\none place that <code>td5</code> points to, and one place within the\nmemory block that <code>cb-&gt;buffer</code> points to.\n(Notice that the temporary variable <code>obj</code> within that function call\nalso pointed to the same memory as <code>td5</code>, but that pointer went out of\nscope at the end of the function.)</p>\n\n<p>So now when you set <code>td5-&gt;seq = 67;</code> it modifies the <code>seq</code> field in the\ncopy of the struct that <code>td5</code> points to. But <code>td5</code> doesn't point anywhere\ninside the memory block that <code>cb-&gt;buffer</code> points to,\nso of course the modification of <code>td5-&gt;seq</code> doesn't modify anything\nin <code>cb-&gt;buffer</code>, and when you print out the contents of <code>cb-&gt;buffer</code>\nyou see what you put in there when you called <code>timerWheelAdd(tw1, td5);</code>\nand you do <em>not</em> see the change you made to <code>td5</code> after it was copied.</p>\n\n<p>If you want to still be able to modify the \"contents\" of the\ncircular buffer using the same pointers you passed to <code>circularBufferAdd</code>,\nyou could copy the pointers themselves (not the data they point to)\ninto the circular buffer. But that has the very good chance to cause\na lot more problems for you. You may be better off if you just don't\nexpect that changing one copy of a data structure will automatically\nchange other copies you made earlier.</p>\n"}], "owner": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1438835911, "accepted_answer_id": 31845030, "answer_count": 1, "score": 0, "last_activity_date": 1438835599, "creation_date": 1438812028, "last_edit_date": 1495542118, "question_id": 31843576, "link": "https://stackoverflow.com/questions/31843576/c-switch-two-struct-in-one-array", "closed_reason": "Duplicate", "title": "C: switch two struct in one array", "body": "<p>I have to switch two elements (structures) in a data structure composed by an array. When I create a new element for the data structure, I maintain a pointer to that element, so I can modify it later. When I try to change the value, it seems to be the same as before. Can you tell me where I'm wrong? </p>\n\n<pre><code>struct TimeData {\n    struct timeval time_send;\n    struct timeval time_recv;\n    struct timeval timeout;\n    struct timeval time_stamp;\n    int seq;\n};\n\nstruct TimerWheel {\n    struct CircularBuffer *cb;\n};\n\nstruct TimeData *newTimeData(int seq, time_t sec, suseconds_t usec) {\n    struct TimeData *td;\n\n    td = malloc(sizeof(struct TimeData));\n\n    td-&gt;seq = seq;\n    td-&gt;timeout.tv_sec = sec;\n    td-&gt;timeout.tv_usec = usec;\n\n    gettimeofday(&amp;td-&gt;time_send, NULL);\n\n    return td;\n}\n\nint timerWheelAdd(struct TimerWheel *tw, struct TimeData *td) {\n    if (circularBufferIsFull(tw-&gt;cb) == 1)\n        return 1;\n    else {\n        circularBufferAdd(tw-&gt;cb, td);\n        circularBufferShiftE(tw-&gt;cb);\n        return 0;\n    }\n}\n\nstruct TimeData *timerWheelGetTmr(struct TimerWheel *tw) {\n    if (circularBufferIsEmpty(tw-&gt;cb) == 1)\n        return NULL;\n    else {\n        struct TimeData *td;\n        td = circularBufferRead(tw-&gt;cb);\n        circularBufferShiftS(tw-&gt;cb);\n        return td;\n    }\n}\n\nint main() {\n    struct TimeData *td5;\n    struct TimeData *td6;\n\n    td5 = newTimeData(1, 3, 5000);\n    td6 = newTimeData(2, 5, 6000);\n\n    struct TimerWheel *tw1 = newTimerWheel(10);\n\n    timerWheelAdd(tw1, td5);\n    timerWheelAdd(tw1, td6);\n\n    ///////NOW I TRY TO MODIFY td5\n    td5-&gt;seq = 67;\n\n    struct TimeData *temp;\n    while ((temp = timerWheelGetTmr(tw1)) != NULL)\n        printf(\"%d\\n\", temp-&gt;seq);\n    //////td5-&gt;seq is the same as before\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>The CircularBuffer struct is only a generic circular buffer of (<code>void *</code>) element. This data structure works fine. The problem is this:\nwhy I cannot change an integer in a struct when I have a pointer to that struct? </p>\n\n<p>This is my CircularBuffwer: \n<a href=\"https://stackoverflow.com/questions/31734092/c-insert-get-element-in-from-void-array\">C : Insert/get element in/from void array</a></p>\n"}, {"tags": ["c", "recursion"], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438814905, "post_id": 31843652, "comment_id": 51609649, "body": "Thanks! I wasn&#39;t exactly sure on how to print out the last part but exactly what you did makes perfect sense!"}, {"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438814948, "post_id": 31843652, "comment_id": 51609663, "body": "Is the else or where n= 0 considered the base case? @Amit"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438815359, "post_id": 31843652, "comment_id": 51609793, "body": "Yeah, you could say that. I call it the ending rule in this scenario since this type of recursion doesn&#39;t use the result of inner iterations to calculate current result."}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": false, "score": 1, "last_activity_date": 1438812377, "creation_date": 1438812377, "answer_id": 31843652, "question_id": 31843546, "link": "https://stackoverflow.com/questions/31843546/recursive-function-with-a-pointer-array/31843652#31843652", "title": "Recursive Function with a pointer array", "body": "<p>The problem is that your recursion goes down (<code>n - 1</code>) when <code>n &gt; 0</code>, and when it hits 0 it calls itself again with 1 (<code>n + 1</code>) which again would call with 0 (<code>n - 1</code>) indefinitely.</p>\n\n<p>What you probably wanted to do is:</p>\n\n<pre><code>void story(char **string1, int n)\n{\n    if ( n &gt; 0 )\n    {\n        printf(\"a %s who couldn't sleep,\\n\", *(string1 + n));\n        printf(\"so the %s's mother told her a story about\\n\", *(string1 + n));\n        story(string1, n - 1);\n        printf(\"Then the %s went to sleep.\", *(string1 + n));\n    }\n    else\n    {\n        printf(\"a %s who went to sleep.\", *string1);\n    }\n}\n</code></pre>\n\n<p>So each iteration before the last (<code>n == 0</code>) prints it's part and calls the recursion to fill the \"middle\" till it's time to \"go to sleep\". The ending rule, <code>n == 0</code>, only prints \"... who went to sleep\".</p>\n"}], "owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438812377, "creation_date": 1438811869, "last_edit_date": 1438811952, "question_id": 31843546, "link": "https://stackoverflow.com/questions/31843546/recursive-function-with-a-pointer-array", "title": "Recursive Function with a pointer array", "body": "<p>I am trying to create a recursive function with the output: </p>\n\n<p>Once upon a time, there was a child who couldnt sleep,\nso the child's mother told her a story about\na mouse who couldnt sleep,\nso the mouse's mother told her a story about\na turtle who couldnt sleep,\nso the turtle's mother told her a story about\na frog who couldnt sleep,\nso the frog's mother told her a story about\na bear who went to sleep.</p>\n\n<p>Then the frog went to sleep.\nThen the turtle went to sleep.\nThen the mouse went to sleep.\nThen the child went to sleep.</p>\n\n<p>I have the first paragraph done but when I tried to re loop back around and print out the next paragraph it turns into an infinite loop. Do I need another recursive function to complete this? Any help would be appreciated.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid story(char **string1, int n)\n{\n    if ( n &gt; 0 )\n    {\n        printf(\"a %s who couldn't sleep,\\n\", *(string1 + n));\n        printf(\"so the %s's mother told her a story about\\n\", *(string1 + n));\n        story(string1, n - 1);\n    }\n    else\n    {\n        printf(\"a %s who went to sleep.\", *string1);\n        if ( n &lt; 4)\n        {\n            story(string1, n + 1);\n            printf(\"Then the %s went to sleep.\", *(string1 + n));\n        }\n    }\n}\n\nint main()\n{\n    char* animals[] = {\"bear\", \"frog\", \"turtle\", \"mouse\", \"child\"};\n    int start = 4;\n\n    printf(\"Once upon a time, there was \");\n    story(animals, start);\n\n    printf(\"%s\", *animals);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "quicksort"], "comments": [{"owner": {"reputation": 5873, "user_id": 479805, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a63a402c022abba109718bb97714dd8d?s=128&d=identicon&r=PG", "display_name": "smartnut007", "link": "https://stackoverflow.com/users/479805/smartnut007"}, "edited": false, "score": 1, "creation_date": 1438810778, "post_id": 31843153, "comment_id": 51608110, "body": "There are literally hundreds of tutorials, writeups, sample code for every language out there on quicksort. I am sure you would be better off starting from there rather than ask people on so to debug your code."}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 5873, "user_id": 479805, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a63a402c022abba109718bb97714dd8d?s=128&d=identicon&r=PG", "display_name": "smartnut007", "link": "https://stackoverflow.com/users/479805/smartnut007"}, "edited": false, "score": 1, "creation_date": 1438810892, "post_id": 31843153, "comment_id": 51608156, "body": "@smartnut007 if you had read the question, you would have known that he&#39;s not asking for debug help, but for an explanation of how the function works."}], "answers": [{"comments": [{"owner": {"reputation": 4754, "user_id": 990194, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c9e93998bd1812b3ecca4a9b9d5351eb?s=128&d=identicon&r=PG", "display_name": "Trt Trt", "link": "https://stackoverflow.com/users/990194/trt-trt"}, "edited": false, "score": 0, "creation_date": 1438811124, "post_id": 31843314, "comment_id": 51608267, "body": "no, i==1 because it increases twice. once at 3, and at 7. it does not enter the &quot;if&quot; when it is 8 but it does when it is 3 and 7"}, {"owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "reply_to_user": {"reputation": 4754, "user_id": 990194, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c9e93998bd1812b3ecca4a9b9d5351eb?s=128&d=identicon&r=PG", "display_name": "Trt Trt", "link": "https://stackoverflow.com/users/990194/trt-trt"}, "edited": false, "score": 1, "creation_date": 1438811217, "post_id": 31843314, "comment_id": 51608316, "body": "@TrtTrt - no, it doesn&#39;t. The loop goes while <code>i &lt;= h - 1</code>, so it won&#39;t hit <code>7</code> (which is the pivot, at <code>arr[h]</code>). So <code>i</code> will only be incremented once."}], "tags": [], "owner": {"reputation": 41174, "user_id": 270287, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1GwpB.jpg?s=128&g=1", "display_name": "IVlad", "link": "https://stackoverflow.com/users/270287/ivlad"}, "is_accepted": true, "score": 4, "last_activity_date": 1438811292, "last_edit_date": 1438811292, "creation_date": 1438810812, "answer_id": 31843314, "question_id": 31843153, "link": "https://stackoverflow.com/questions/31843153/quicksort-partition/31843314#31843314", "title": "Quicksort Partition", "body": "<p>Let's see what happens:</p>\n\n<pre><code>x = 7\nj = 0:\n\n  3 &lt;= 7: swap(arr[0], arr[0]) =&gt; nothing happens\n\nj = 1:\n\n  8 &lt;= 7 is false =&gt; nothing happens\n</code></pre>\n\n<p>Now, notice that <code>i == 0</code>, and we have the line:</p>\n\n<pre><code>swap (&amp;arr[i + 1], &amp;arr[h]);\n</code></pre>\n\n<p>Which means that we swap <code>arr[1]</code> with <code>arr[2]</code>, and your array will be <code>3 7 8</code>. You did not take this line into consideration in your analysis.</p>\n\n<p>This is correct, and the returned position of the pivot, <code>i + 1 == 1</code>, is also correct.</p>\n\n<p>You can add print statements after each line of interest or step through with a debugger to better understand what is going on. Doing this on paper can lead to such mistakes, where you accidentally skip steps, especially when learning something (to be honest, it took me a few minutes to realize that you missed that line).</p>\n"}], "owner": {"reputation": 4754, "user_id": 990194, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c9e93998bd1812b3ecca4a9b9d5351eb?s=128&d=identicon&r=PG", "display_name": "Trt Trt", "link": "https://stackoverflow.com/users/990194/trt-trt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1864, "favorite_count": 0, "accepted_answer_id": 31843314, "answer_count": 1, "score": 2, "last_activity_date": 1438811292, "creation_date": 1438810061, "last_edit_date": 1438810726, "question_id": 31843153, "link": "https://stackoverflow.com/questions/31843153/quicksort-partition", "title": "Quicksort Partition", "body": "<p>I am trying to understand and implement quicksort:\nSo I have been reading this:</p>\n\n<p><a href=\"http://www.geeksforgeeks.org/iterative-quick-sort/\" rel=\"nofollow\">http://www.geeksforgeeks.org/iterative-quick-sort/</a></p>\n\n<p>I do not understand the partition code.</p>\n\n<pre><code>/* A typical recursive implementation of quick sort */\n\n/* This function takes last element as pivot, places the pivot element at its\n   correct position in sorted array, and places all smaller (smaller than pivot)\n   to left of pivot and all greater elements to right of pivot */\nint partition (int arr[], int l, int h)\n{\n    int x = arr[h];\n    int i = (l - 1);\n\n    for (int j = l; j &lt;= h- 1; j++)\n    {\n        if (arr[j] &lt;= x)\n        {\n            i++;\n            swap (&amp;arr[i], &amp;arr[j]);\n        }\n    }\n    swap (&amp;arr[i + 1], &amp;arr[h]);\n    return (i + 1);\n}\n\n/* A[] --&gt; Array to be sorted, l  --&gt; Starting index, h  --&gt; Ending index */\nvoid quickSort(int A[], int l, int h)\n{\n    if (l &lt; h)\n    {        \n        int p = partition(A, l, h); /* Partitioning index */\n        quickSort(A, l, p - 1);  \n        quickSort(A, p + 1, h);\n    }\n}\n</code></pre>\n\n<p>so lets say I have this array, [3,8,7]\nso it takes the last element as a pivot. that is 7.</p>\n\n<p>The first step of the partition function will be (for l=0 and h=2):</p>\n\n<pre><code>x = 7\ni = -1\n</code></pre>\n\n<p>then at the loop, <code>arr[j] &lt;= x</code> will be true. Because 3 &lt;= 7.\nSo it will increase <code>i</code> by 1, and then swap 3 with 3? it doesn't make sense. That will just return the same array</p>\n"}, {"tags": ["c", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1438810194, "post_id": 31843147, "comment_id": 51607859, "body": "Have you tried Valgrind?"}, {"owner": {"reputation": 431, "user_id": 5186934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aEulW.jpg?s=128&g=1", "display_name": "HandsomeGorilla", "link": "https://stackoverflow.com/users/5186934/handsomegorilla"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1438810363, "post_id": 31843147, "comment_id": 51607923, "body": "@OliverCharlesworth, I haven&#39;t. Today is the first I&#39;ve ever heard of Valgrind; I&#39;m beginning to suspect that it&#39;s about to become a new and shiny favorite toy of mine."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1438810582, "post_id": 31843147, "comment_id": 51608009, "body": "Note that you&#39;re only NUL-terminating when input ended with a new-line, not for any of the other <code>while</code> condition conjuncts (<code>EOF</code> for example). Also: <code>*(*lineptr + i)</code> == <code>(*lineptr)[i]</code>, but the latter is more readable."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1438810595, "post_id": 31843147, "comment_id": 51608018, "body": "But FWIW, it&#39;s possible that the bug isn&#39;t in this code at all.  Maybe in your &quot;in situ&quot; code you already corrupted the heap, or are passing an invalid pointer as an arg, or something.  Without a <a href=\"http://stackoverflow.com/help/mcve\">minimal test-case</a>, it&#39;s kind of hard to tell."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1438810889, "post_id": 31843147, "comment_id": 51608152, "body": "You should <i>really</i> check the return value of <code>calloc()</code> and <code>realloc()</code> for <code>NULL</code>. Also, if <code>realloc()</code> returns <code>NULL</code>, you leak memory. Furthermore, <code>EOF</code> is an <code>int</code>, not a <code>char</code>, so if you want to check <code>c</code> against <code>EOF</code>, you damn well better define it as <code>int c</code>."}, {"owner": {"reputation": 431, "user_id": 5186934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aEulW.jpg?s=128&g=1", "display_name": "HandsomeGorilla", "link": "https://stackoverflow.com/users/5186934/handsomegorilla"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1438811169, "post_id": 31843147, "comment_id": 51608289, "body": "@OliverCharlesworth, I&#39;m about to add the <code>main</code> from the program that doesn&#39;t work.  I&#39;d be curious to see if I&#39;m corrupting the heap prior to my call to <code>dgets</code>.  @EOF, thanks for the safety advice.  And correct me if I&#39;m wrong, but doesn&#39;t the C spec. define <code>char</code>s as very small <code>int</code>s?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1438811429, "post_id": 31843147, "comment_id": 51608393, "body": "Yes, <code>char</code> is an integer type. However, <code>char</code> generally does not have the range to hold all integer values an <code>int</code> will hold. <code>EOF</code> is an <code>int</code>, <code>getchar()</code> returns an <code>int</code>, do you see where this is going? Also: <code>*lnptr = (char*)realloc(*lnptr, i+1);       *(*lnptr + i+1) = &#39;\\0&#39;;</code> is wrong. You <code>realloc()</code> to a size of <code>i+1</code> and then try to access the <code>i+1</code>th element, which doesn&#39;t exist."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438812633, "post_id": 31843147, "comment_id": 51608824, "body": "Typically <code>EOF</code> is in the range of <code>char</code>, but the result of <code>getchar</code> may not be!   The key point is that there are <code>UCHAR_MAX+2</code> possible results of <code>getchar</code>, therefore <code>char</code> cannot hold them all."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1438812789, "post_id": 31843147, "comment_id": 51608883, "body": "@EOF your last comment could be posted as the answer"}, {"owner": {"reputation": 431, "user_id": 5186934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aEulW.jpg?s=128&g=1", "display_name": "HandsomeGorilla", "link": "https://stackoverflow.com/users/5186934/handsomegorilla"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1438813059, "post_id": 31843147, "comment_id": 51608996, "body": "@EOF <i>lnptr = (char</i>)realloc(*lnptr, i+2); *(*lnptr + i+1) = &#39;\\0&#39;;"}], "answers": [{"tags": [], "owner": {"reputation": 431, "user_id": 5186934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aEulW.jpg?s=128&g=1", "display_name": "HandsomeGorilla", "link": "https://stackoverflow.com/users/5186934/handsomegorilla"}, "is_accepted": true, "score": 1, "last_activity_date": 1438984345, "creation_date": 1438984345, "answer_id": 31887168, "question_id": 31843147, "link": "https://stackoverflow.com/questions/31843147/c-func-dynamically-allocates-mem-for-arbitrarily-long-line-passes-unit-testing/31887168#31887168", "title": "C func dynamically allocates mem for arbitrarily long line; passes unit testing, crashes in situ", "body": "<p>Okay, so this is for all of my fellow newbies who are getting error messages that say something about malloc/realloc/calloc and invalid new/old addresses, in addition to segmentation faults:</p>\n\n<p><strong><a href=\"http://www.valgrind.org\" rel=\"nofollow\">Get and use Valgrind</a>.</strong>  It's a free and open source heap profiler that will show you where in your code heap corruption(s) are manifesting, which will in turn provide some insights into where and how those heap corruptions are occuring.</p>\n\n<p>In this particular case I had multiple heap corruptions occuring throughout my code, largely because of an impropoper argument passed to <code>realloc</code>. What I wanted to do was resize a block of memory that would hold integers, like so:</p>\n\n<p><code>*lnptr = (int*) realloc (*lnptr, newSize * sizeof(int));</code></p>\n\n<p>But what I had originally written was this:</p>\n\n<p><code>*lnptr = (int*) realloc (*lnptr, newSize);</code></p>\n\n<p>See that second parameter in <code>realloc</code>?  The problem this was causing is that <code>*lnptr</code> was ending up being only <code>newSize</code> bytes wide, which is fine if I only needed to store <code>newSize char</code>s and terrible if I want to store <code>newSize int</code>s.</p>\n\n<p>Lesson learned; read the friendly manual closely. And, use Valgrind if you're going to be dynamically allocating memory.</p>\n"}], "owner": {"reputation": 431, "user_id": 5186934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aEulW.jpg?s=128&g=1", "display_name": "HandsomeGorilla", "link": "https://stackoverflow.com/users/5186934/handsomegorilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 31887168, "answer_count": 1, "score": 0, "last_activity_date": 1438984345, "creation_date": 1438810040, "last_edit_date": 1438811424, "question_id": 31843147, "link": "https://stackoverflow.com/questions/31843147/c-func-dynamically-allocates-mem-for-arbitrarily-long-line-passes-unit-testing", "title": "C func dynamically allocates mem for arbitrarily long line; passes unit testing, crashes in situ", "body": "<p>I have a function, <code>dgets</code>, the sole purpose of which is to take in a string of arbitrary length from <code>stdin</code>.  Here's the full text of the file I use for unit testing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint dgets(char** lnptr, int lastIndex)\n/*\n   RETRIEVE A LINE OF ARBITRARY LENGTH FROM STDIN\n*/\n{\n   char c;\n   int i = 0;\n\n   while( (c = getchar()) &amp;&amp; c != EOF &amp;&amp; c != '\\n' ) { \n      if( i &gt;= lastIndex-1 ) { \n         lastIndex *= 2;\n         *lnptr = (char*)realloc(*lnptr, lastIndex);\n      }   \n\n      *(*lnptr + i) = c;\n      ++i;\n   }   \n\n   if( c == '\\n' ) { \n      *(*lnptr + i) = c;\n      *lnptr = (char*)realloc(*lnptr, i+1);\n      *(*lnptr + i+1) = '\\0';\n   }   \n\n   return i;\n}\n\nint main()\n{\n        char* line;\n\n        line = (char*)calloc(10, sizeof(char));\n\n        while( dgets(&amp;line, 10)) {\n                printf(\"****************\\n%s****************\\n\", line);\n                free(line);\n                line = (char*)calloc(10, sizeof(char));\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>This program performs exactly as expected, with exactly zero errors or bugs.  That's nice, because I want to use it in a larger program.  After copying and pasting the code for <code>dgets</code> into the larger program, and after a successful compile with <code>-Wall</code> (1 warning, no errors reported by gcc), running the larger program results in <code>segmentation fault (core dumped)</code>.</p>\n\n<p>Examining the corefile with gdb produces this:</p>\n\n<pre><code>$ coredumpctl gdb 14527\n          PID: 14527 (a.out)\n          UID: 1000 (demiurge)\n          GID: 1000 (demiurge)\n       Signal: 11 (SEGV)\n    Timestamp: Wed 2015-08-05 15:48:28 CDT (1min 58s ago)\n Command Line: ./a.out\n   Executable: /home/demiurge/learning_c/KR_exercises/chapter_1/a.out\nControl Group: /user.slice/user-1000.slice/session-c1.scope\n         Unit: session-c1.scope\n        Slice: user-1000.slice\n      Session: c1\n    Owner UID: 1000 (demiurge)\n      Boot ID: 629b0a58691c4ec488bd0b84276df9d4\n   Machine ID: 4c9566d65e864c6da8e41bfaf8ed2cb4\n     Hostname: exmachina\n     Coredump: /var/lib/systemd/coredump/core.a\\x2eout.1000.629b0a58691c4ec488bd0b84276df9d4.14527.1438807708000000.lz4\n      Message: Process 14527 (a.out) of user 1000 dumped core.\n\nCore was generated by `./a.out'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x00007f253e36cd80 in _int_realloc () from /usr/lib/libc.so.6\n(gdb) bt\n#0  0x00007f253e36cd80 in _int_realloc () from /usr/lib/libc.so.6\n#1  0x00007f253e36e0f0 in realloc () from /usr/lib/libc.so.6\n#2  0x0000000000400753 in dgets (lnptr=0x7ffeaf001050, lastIndex=40) at ./1.13.c:41\n#3  0x00000000004009a2 in main () at ./1.13.c:107\n(gdb) frame 3\n#3  0x00000000004009a2 in main () at ./1.13.c:107\n107     while( dgets(&amp;line, SIZE) ) {\n(gdb) frame 2\n#2  0x0000000000400753 in dgets (lnptr=0x7ffeaf001050, lastIndex=40) at ./1.13.c:41\n41              *lnptr = (char*)realloc(*lnptr, lastIndex);\n</code></pre>\n\n<p>Further examination with gdb confirms that the segfault occurs at the second iteration of the first call to <code>realloc</code> in <code>dgets</code>. So my question is this: <em>Why is <code>realloc</code> triggering a segfault after <code>dgets</code> passes unit testing?</em></p>\n\n<p>Help me to understand, oh merciful and beneficent StackOverlords!</p>\n\n<p><strong>ADDENDUM:</strong></p>\n\n<p>Okay, so here's the code that runs just before <code>dgets</code> is called:</p>\n\n<pre><code>int main()\n{\n        char* line;\n        int* lengths;\n        int longest;\n\n        line = (char*)calloc(SIZE, sizeof(char));\n        lengths = (int*)calloc(SIZE, sizeof(int));\n\n        //get a line from stdin\n        while( dgets(&amp;line, SIZE) ) { \n\n                //count how many words are of length n\n                longest = countWordLengths(line, &amp;lengths);\n\n                //do a little housekeeping\n                free((void*)line);\n                line = (char*)calloc(SIZE, sizeof(char));\n                if( line == NULL ) { return 1; }\n        }\n\n        .\n        .some other stuff happens here, but the code never gets this far.\n        .\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 22495, "user_id": 3510483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qubeh.jpg?s=128&g=1", "display_name": "quantdev", "link": "https://stackoverflow.com/users/3510483/quantdev"}, "edited": false, "score": 3, "creation_date": 1438808865, "post_id": 31842836, "comment_id": 51607207, "body": "ever heard of type safety ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438808983, "post_id": 31842836, "comment_id": 51607277, "body": "You can, if you really want..troubles."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1438809075, "post_id": 31842836, "comment_id": 51607319, "body": "Sure you can. <code>double d; int *p = (int*)&amp;d;</code>. Nothing could possibly go wrong. &lt;/sarcasm&gt;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 22495, "user_id": 3510483, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qubeh.jpg?s=128&g=1", "display_name": "quantdev", "link": "https://stackoverflow.com/users/3510483/quantdev"}, "edited": false, "score": 0, "creation_date": 1438809088, "post_id": 31842836, "comment_id": 51607324, "body": "@quantdev Is it really about type safety? <code>C</code> is not that concerned about it.. It&#39;s more about strict aliasing, that optimizer might mess with it."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1438809269, "post_id": 31842836, "comment_id": 51607403, "body": "@EugeneSh.: But the inability to assign one type to another without an explicit cast <b>is</b> about type safety."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1438809574, "post_id": 31842836, "comment_id": 51607553, "body": "&quot;We know that&quot; followed by complete speculation."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1438810789, "post_id": 31842836, "comment_id": 51608117, "body": "@OliverCharlesworth except for <code>void *</code> in C"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1438815578, "post_id": 31842836, "comment_id": 51609854, "body": "You can, if you write assembly. <i>Not</i> being able to do this is actually a <i>feature</i> of C."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438832357, "post_id": 31842977, "comment_id": 51613930, "body": "&quot;convert a pointer to any other type to a pointer to unsigned char&quot; - I think an exception is a pointer to a function."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 6, "last_activity_date": 1438834309, "last_edit_date": 1438834309, "creation_date": 1438809377, "answer_id": 31842977, "question_id": 31842836, "link": "https://stackoverflow.com/questions/31842836/why-cant-i-assign-the-address-of-a-variable-of-one-typesay-double-to-a-pointe/31842977#31842977", "title": "Why can&#39;t I assign the address of a variable of one type(say double) to a pointer of int type?", "body": "<p>Many computers have alignment requirements, so (for example) to read a 2-byte value, the address at which it's located must be a multiple of 2 (and likewise, a 4-byte value must be located at an address that's a multiple of 4, and so on). In fact, this alignment requirement is common enough that it's frequently referred to as \"natural alignment\".</p>\n\n<p>Likewise, some types (e.g., floating point types) impose requirements on the bit sequence that can be read as that type, so if you try to take some arbitrary data and treat it as a double, you might trigger something like a floating point exception.</p>\n\n<p>If you want to do this badly enough, you can use a cast to turn the pointer into the target type (but the results, if any, aren't usually portable).</p>\n\n<p>You are guaranteed that you can convert a pointer to any other type of object to a pointer to unsigned char, and use that to read the bytes that represent the pointee object.</p>\n\n<p>Also, if you primarily want an opaque pointer, without type information attached, you can assign a pointer to some other type to a <code>void *</code>.</p>\n\n<p>Finally: no, not all pointers are actually the same. Pointers to different types can be different sizes (e.g., on the early Cray compilers, a <code>char *</code> was substantially different from an <code>int *</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438810961, "post_id": 31843306, "comment_id": 51608187, "body": "Disagree with the para &quot;This is why...&quot;  . The requirement for casting has nothing to do with whether representation change might happen. For example <code>float f = 5.0; int i = f;</code> does not require a cast. Nor does <code>int i = -1; unsigned int u = i;</code> which would change representation on non 2&#39;s complement.  The cast requirement is to say &quot;do you really want to do that?&quot; when trying to make a pointer point to memory that contains objects of a different type , which carries high degree of risk of undefined behaviour"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1438811411, "post_id": 31843306, "comment_id": 51608387, "body": "@MattMcNabb John&#39;s para talks about pointers. Neither of your examples has pointers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438811678, "post_id": 31843306, "comment_id": 51608479, "body": "given <a href=\"http://port70.net/~nsz/c/c99/n1256.html#6.3.2.3p1\" rel=\"nofollow noreferrer\">6.3.2.3p1</a>, although your points are valid, it doesn&#39;t really answer the question. With <b>that</b> requirement in mind, it would&#39;ve been quite easy to have all data pointers be implicitly convertible. The reason not to do this is much more a <i>design decision</i> for some <i>type safety</i>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1438812046, "post_id": 31843306, "comment_id": 51608614, "body": "@BlueMoon I&#39;m saying that representation change is not the reason and gave some examples of why representation change is not important in C. C is based on values."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1438810772, "creation_date": 1438810772, "answer_id": 31843306, "question_id": 31842836, "link": "https://stackoverflow.com/questions/31842836/why-cant-i-assign-the-address-of-a-variable-of-one-typesay-double-to-a-pointe/31843306#31843306", "title": "Why can&#39;t I assign the address of a variable of one type(say double) to a pointer of int type?", "body": "<blockquote>\n  <p>In case of <strong>pointers</strong>, we know that their size <strong>is always same</strong> irrespective of <strong>data type of the variable</strong> it is pointing.</p>\n</blockquote>\n\n<p>No, we do <strong>not</strong> know that.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">Chapter and verse for C</a></p>\n\n<blockquote>\n<strong>6.2.5 Types</strong><br>\n...<br>\n28 A pointer to <code>void</code> shall have the same representation and alignment requirements as a\npointer to a character type.<sup>48)</sup> Similarly, pointers to qualified or unqualified versions of\ncompatible types shall have the same representation and alignment requirements. All\npointers to structure types shall have the same representation and alignment requirements\nas each other. All pointers to union types shall have the same representation and\nalignment requirements as each other. <strong><em>Pointers to other types need not have the same\nrepresentation or alignment requirements.</em></strong>\n<hr>\n<sup>48) The same representation and alignment requirements are meant to imply interchangeability as\narguments to functions, return values from functions, and members of unions.</sup>\n</blockquote>\n\n<p>Emphasis added.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow\">Chapter and verse for C++</a></p>\n\n<blockquote>\n<strong>3.9.2 Compound types</strong><br>\n...<br>\n3 The type of a pointer to <code>void</code> or a pointer to an object type is called an <em>object pointer type</em>. [ <em>Note:</em> A pointer\nto void does not have a pointer-to-object type, however, because <code>void</code> is not an object type. <em>\u2014 end note</em> ]\nThe type of a pointer that can designate a function is called a <em>function pointer type</em>. A pointer to objects\nof type <code>T</code> is referred to as a \u201cpointer to <code>T</code>.\u201d [<em>Example:</em> a pointer to an object of type <code>int</code> is referred to as\n\u201cpointer to <code>int</code> \u201d and a pointer to an object of class <code>X</code> is called a \u201cpointer to <code>X</code>.\u201d <em>\u2014 end example</em> ] Except\nfor pointers to static members, text referring to \u201cpointers\u201d does not apply to pointers to members. Pointers\nto incomplete types are allowed although there are restrictions on what can be done with them (3.11).\nA valid value of an object pointer type represents either the address of a byte in memory (1.7) or a null\npointer (4.10). If an object of type <code>T</code> is located at an address <code>A</code>, a pointer of type <em>cv</em> <code>T*</code> whose value is the\naddress <code>A</code> is said to point to that object, regardless of how the value was obtained. [ <em>Note:</em> For instance,\nthe address one past the end of an array (5.7) would be considered to point to an unrelated object of the\narray\u2019s element type that might be located at that address. There are further restrictions on pointers to\nobjects with dynamic storage duration; see 3.7.4.3. <em>\u2014 end note</em> ] The value representation of pointer types\nis implementation-defined. <strong><em>Pointers to layout-compatible types shall have the same value representation and\nalignment requirements</em></strong> (3.11). [ <em>Note:</em> Pointers to over-aligned types (3.11) have no special representation,\nbut their range of valid values is restricted by the extended alignment requirement. This International\nStandard specifies only two ways of obtaining such a pointer: taking the address of a valid object with\nan over-aligned type, and using one of the runtime pointer alignment functions. An implementation may\nprovide other means of obtaining a valid pointer value for an over-aligned type. <em>\u2014 end note</em> ]<br><br>\n4 A pointer to <em>cv</em>-qualified (3.9.3) or <em>cv</em>-unqualified <code>void</code> can be used to point to objects of unknown type.\nSuch a pointer shall be able to hold any object pointer. An object of type <em>cv</em> <code>void*</code> shall have the same\nrepresentation and alignment requirements as <em>cv</em> <code>char*</code>.\n</blockquote>\n\n<p>Emphasis added.  It is <em>entirely</em> possible to have different sizes and representations for different pointer types.  There is no reason to expect a pointer to <code>int</code> to have the same size and representation as a pointer to <code>double</code>, or a pointer to a <code>struct</code> type, or a pointer to a function type.  It's true for commodity platforms like x86, but not all the world runs on x86.  </p>\n\n<p>This is why you can't assign pointer values of one type to pointer values of another type without an explicit cast (except for converting between <code>void *</code> and other pointer types in C), since a representation change <em>may</em> be required.</p>\n\n<p>Secondly, pointer arithmetic depends on the size of the pointed-to type.  Assume you have pointers to a 32-bit <code>int</code> and a 64-bit <code>double</code>:</p>\n\n<pre><code>int *ip;\ndouble *dp;\n</code></pre>\n\n<p>The expression <code>ip + 1</code> will return the address of the next integer object (current address plus 4), while the expression <code>dp + 1</code> will return the address of the next double object (current address plus 8).  </p>\n\n<p>If I assign the address of a <code>double</code> to a pointer to <code>int</code>, incrementing that int pointer won't take me to the next <code>double</code> object.  </p>\n"}], "owner": {"reputation": 1, "user_id": 5173150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe3a205f587a6d75df1ad50531af27e?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Kumar Nalla", "link": "https://stackoverflow.com/users/5173150/manoj-kumar-nalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1438834309, "creation_date": 1438808822, "last_edit_date": 1438809222, "question_id": 31842836, "link": "https://stackoverflow.com/questions/31842836/why-cant-i-assign-the-address-of-a-variable-of-one-typesay-double-to-a-pointe", "title": "Why can&#39;t I assign the address of a variable of one type(say double) to a pointer of int type?", "body": "<p>In case of pointers, we know that their size is always same irrespective of data type of the variable it is pointing.</p>\n\n<p>Data type is needed when dereferencing the pointer so it knows how much data it should read. So why cant i assign address of variable of double type to a pointer of int type?</p>\n\n<p>why cant it happen like dereferencing a int pointer reads next 4 bytes from variable of double type and print its value?</p>\n"}, {"tags": ["c", "string", "char", "type-conversion"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438808091, "post_id": 31842571, "comment_id": 51606823, "body": "<code>m</code> is a single character. You need a char array instead."}, {"owner": {"reputation": 888, "user_id": 5175071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/383b3ea578405046feea7e132714f0e9?s=128&d=identicon&r=PG", "display_name": "The Brofessor", "link": "https://stackoverflow.com/users/5175071/the-brofessor"}, "edited": false, "score": 0, "creation_date": 1438808295, "post_id": 31842571, "comment_id": 51606927, "body": "To concatenate use <code>strcat</code> or <code>strncat</code>"}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 3292735, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ffsp1.jpg?s=128&g=1", "display_name": "Matheus Hernandes", "link": "https://stackoverflow.com/users/3292735/matheus-hernandes"}, "edited": false, "score": 0, "creation_date": 1438808515, "post_id": 31842659, "comment_id": 51607032, "body": "Right.. and for concatenate this variable with my URL  &quot;localhost/wsRest/index.php/novo/&quot; + m How can I do it?"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1438811451, "post_id": 31842659, "comment_id": 51608407, "body": "Prefer <code>fgets(&amp;m[idx], sizeof m - idx - 1, stdin);</code> over the <code>scanf</code> to prevent buffer overflows on evil input."}], "tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 3, "last_activity_date": 1438808664, "last_edit_date": 1438808664, "creation_date": 1438808138, "answer_id": 31842659, "question_id": 31842571, "link": "https://stackoverflow.com/questions/31842571/characters-and-strings-with-c/31842659#31842659", "title": "Characters and Strings with C", "body": "<p>This won't work the way you expect:</p>\n\n<pre><code>scanf(\"%s\", &amp;m);\n</code></pre>\n\n<p><code>m</code> is an <code>unsigned char</code>, the scanf <code>%s</code> modifier will attempt to read a string, write it to the pointer you feed it, and null-terminate it. For any non-empty name, it will write to invalid memory (if you're lucky, this should crash).</p>\n\n<p>Indeed, you passed a pointer to a character, but there's only space for 1 character.</p>\n\n<p>You should use an array instead, for example:</p>\n\n<pre><code>char m[512];\n/* ... */\nscanf(\"%s\", m);\n</code></pre>\n\n<p>Note that this places an upper bound of 511 on the name length. If you expect longer names, increase the buffer size.</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>You can prepend the URL by doing:</p>\n\n<pre><code>char m[512];\nint idx = sprintf(m, \"localhost/wsRest/index.php/novo/\");\n/* ... */\nscanf(\"%s\", &amp;m[idx]);\n</code></pre>\n\n<p>Then pass <code>m</code> as the url.</p>\n\n<p>This works by first storing the URL path in <code>m</code>, and then reading the input string into the rest of the buffer. <code>sprintf(3)</code> returns the number of characters written, so <code>idx</code> is the offset of the first position after the URL path.</p>\n\n<p>If you want to append instead, then <code>scanf(\"%s\", m)</code> and then use <code>strcat(m, \"localhost/wsRest/index.php/novo/\")</code>.</p>\n\n<p>Again, this assumes that the name + the URL size is less than 511.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 1, "last_activity_date": 1438808602, "creation_date": 1438808602, "answer_id": 31842781, "question_id": 31842571, "link": "https://stackoverflow.com/questions/31842571/characters-and-strings-with-c/31842781#31842781", "title": "Characters and Strings with C", "body": "<p>First, you need an array to hold the name entered by the user. Change this</p>\n\n<pre><code>unsigned char m;\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>char m[1000];\n</code></pre>\n\n<p>Next, you need an array to hold the URL</p>\n\n<pre><code>char url[1200];\n</code></pre>\n\n<p>Then you can use <code>sprintf</code> to append the name to the URL</p>\n\n<pre><code>sprintf( url, \"localhost/wsRest/index.php/novo/%s\", m ); \n</code></pre>\n\n<p>And finally pass the <code>url</code> to the <code>setopt</code> function</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_URL, url);\n</code></pre>\n"}], "owner": {"reputation": 567, "user_id": 3292735, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ffsp1.jpg?s=128&g=1", "display_name": "Matheus Hernandes", "link": "https://stackoverflow.com/users/3292735/matheus-hernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 31842659, "answer_count": 2, "score": 1, "last_activity_date": 1438808664, "creation_date": 1438807868, "question_id": 31842571, "link": "https://stackoverflow.com/questions/31842571/characters-and-strings-with-c", "title": "Characters and Strings with C", "body": "<p>I'm working on restful client written in C. It is very simple, I just have to send by post a person name (John, Sam, Muhammad, Whatever...) which I write on terminal. </p>\n\n<p>My whole code is working fine but I have some issues with conversion char or strings, to send by post.   </p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;curl/curl.h&gt;\n\nint main(void) {\n\nCURL *curl;\nCURLcode res;\n\nint x = 1;\nunsigned char m;\n\nwhile (x != 0) {\n    printf(\"Opcao 1 para incluir nova pessoa\\n\");\n    printf(\"Opcao 2 para listar pessoas\\n\");\n    printf(\"Opcao 0 para sair\\n\");\n    printf(\"Selecione a opcao: \");\n    scanf(\"%d\",&amp;x);\n\n    if (x == 1) {\n        printf(\"Nome da pessoa: \");\n        scanf(\"%s\",&amp;m);\n\n        curl = curl_easy_init();\n        if(curl) {\n            curl_easy_setopt(curl, CURLOPT_URL, \"localhost/wsRest/index.php/novo/\" );\n            curl_easy_setopt(curl, CURLOPT_POSTFIELDS, \"\");\n            res = curl_easy_perform(curl);\n            if(res != CURLE_OK)\n                fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\n                  curl_easy_strerror(res));\n            curl_easy_cleanup(curl);\n        }\n    }\n\n    printf(\"\\n\");\n}\n\ncurl_global_cleanup();\nreturn 0;\n\n}\n</code></pre>\n\n<p>I need to find a way to put the name written on variable 'm' in curl_easy_setopt() function, concatenated with my URL, but I have no idea how to do it, and the examples that a I found cant even read the URL to another variable...</p>\n\n<p>How can I do it? </p>\n\n<p>Thanks you everyone!</p>\n"}, {"tags": ["c++", "c", "opengl", "opengl-es", "shader"], "comments": [{"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1438807878, "post_id": 31842366, "comment_id": 51606691, "body": "It also looks as if the project matrix function does not correspond with the output you show. In the function you set element at [row=3, column=2] to -1, but in the output it is 0. The output looks correct to me."}, {"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1438808102, "post_id": 31842366, "comment_id": 51606825, "body": "Other thing: You are looking along negative z-direction. When you move the object to z=20, it is located behind the camera."}], "answers": [{"tags": [], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "is_accepted": false, "score": 0, "last_activity_date": 1438834170, "last_edit_date": 1438834170, "creation_date": 1438814440, "answer_id": 31844013, "question_id": 31842366, "link": "https://stackoverflow.com/questions/31842366/setting-up-opengl-view-and-projection-transformations/31844013#31844013", "title": "setting up opengl view and projection transformations", "body": "<p>thanks to @foobaz on ##opengl freenode irc channel. The issue is that opengl 3.x doesn't support doubles and my matrix as well as vector classes were double types. Switching those over to floats and the code worked just as expected.</p>\n\n<p>double point precision is supported in opengl 4.5 or greater.</p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1438834170, "creation_date": 1438807091, "question_id": 31842366, "link": "https://stackoverflow.com/questions/31842366/setting-up-opengl-view-and-projection-transformations", "title": "setting up opengl view and projection transformations", "body": "<p>I am making some basic steps towards rendering with opengl. I wrote some shaders as well as a some math functions to do the linear algebra.</p>\n\n<p>I can get a quad that's 2d tris to render on screen but when it comes to applying any sort of transformations I see nothing.</p>\n\n<p>Here is the relevant code as to the matrix data that I am sending to the gpu, etc.</p>\n\n<p><strong>setup matricies</strong></p>\n\n<pre><code>mat4identity(&amp;vm);\nvec3f eye    = {0, 0, 0};\nvec3f center = {0, 0, -1};\nvec3f up     = {0, 1, 0};\n\nmat4LookAt(&amp;vm, &amp;eye, &amp;center, &amp;up);\nmat4print(\"lookat\",&amp;vm);\n\nmat4OrthoProjection(&amp;opm, 200, 0, 200, 0, 0.001, 1000.0);\nmat4print(\"2d projection\",&amp;opm);\n</code></pre>\n\n<p><strong>render code</strong>    </p>\n\n<pre><code>glUseProgram(sp);\nglBindVertexArray(vao1);\n\npMat = getUniformLocation(sp, \"proj\");\nvMat = getUniformLocation(sp, \"view\");\ntransMat = getUniformLocation(sp, \"transform\");\n\nglUniformMatrix4dv(pMat, 1, GL_FALSE, opm.m);\nglUniformMatrix4dv(vMat, 1, GL_FALSE, vm.m);\nglUniformMatrix4dv(transMat, 1, GL_FALSE, tm.m);\n\nglDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n\nglBindVertexArray(0);\n</code></pre>\n\n<p>the mat4 is a column major struct in c.</p>\n\n<p><strong>mat4 lookat function</strong></p>\n\n<pre><code>mat4* lookat(vec3f* eye, vec3f* center, vec3f* up) {\nvec3f x = {1, 0, 0};\nvec3f y = {0, 1, 0};\nvec3f z = {0, 0, 1};\n\nz = vec3fsub(eye, center);\nvec3fnorm(z);\nx = vec3fcross(y, z);\ny = vec3fcross(z, x);\nvec3fnorm(x);\nvec3fnorm(y);\n\ndouble x1, y1, z1;\nx1 = vec3fdotr(&amp;x, eye);\ny1 = vec3fdotr(&amp;y, eye);\nz1 = vec3fdotr(&amp;z, eye);\n\ndouble data[] = { (&amp;x)-&gt;p[0], (&amp;y)-&gt;p[0], (&amp;z)-&gt;p[0], 0,\n                  (&amp;x)-&gt;p[1], (&amp;y)-&gt;p[1], (&amp;z)-&gt;p[1], 0,\n                  (&amp;x)-&gt;p[2], (&amp;y)-&gt;p[2], (&amp;z)-&gt;p[2], 0,\n                  x1,        y1,       z1,        1      };\nreturn makeMat4(data);\n\n}\n</code></pre>\n\n<p><strong>orthographic projection code</strong></p>\n\n<pre><code>mat4* mat4Projection(double r, double l, double t, double b, double n, double f)\n{\n    double data[] = { (2*n)/(r-l),  0,           (r+l)/(r-l),        0,\n                       0,          (2*n)/(t-b),  (t+b)/(t-b),        0,\n                       0,           0,           (-(f+n))/(f-n),     (-2*(f*n))/(f-n),\n                       0,           0,           -1,                 1                };\n    return makeMat4(data);\n}\n</code></pre>\n\n<p>I also try to send down just a simple transform matrix that moves the objects 20 units in the +z direction. Running the above code and printing out the matrices along the way I get these results.</p>\n\n<pre><code>    lookat matrix\n[   1.000000    0.000000    0.000000    0.000000    ]\n[   0.000000    1.000000    0.000000    0.000000    ]\n[   0.000000    0.000000    1.000000    0.000000    ]\n[   0.000000    0.000000    0.000000    1.000000    ]\n\n    2d projection matrix\n[   0.010000    0.000000    0.000000    -1.000000   ]\n[   0.000000    0.010000    0.000000    -1.000000   ]\n[   0.000000    0.000000    -0.002000   -1.000002   ]\n[   0.000000    0.000000    0.000000    1.000000    ]\n\n    translation matrix  \n[   1.000000    0.000000    0.000000    0.000000    ]\n[   0.000000    1.000000    0.000000    0.000000    ]\n[   0.000000    0.000000    1.000000    20.000000   ]\n[   0.000000    0.000000    0.000000    1.000000    ]\n</code></pre>\n\n<p>The error could be at this line when I am sending the data to the gpu</p>\n\n<pre><code>glUniformMatrix4dv(pMat, 1, GL_FALSE, opm.m);\n</code></pre>\n\n<p>but again I am not sure. This is the vertex shader:</p>\n\n<pre><code>#version 330 core\n\nuniform mat4 view;\nuniform mat4 proj;\n\nin vec3 position;\n\nvoid main()\n{\n    gl_Position = proj * view * vec4(position.x, position.y, position.z, 1.0);\n}\n</code></pre>\n\n<p>removing the proj and view transformations I get the rectangle in the middle of the screen. Using either projection or view transformations and I can't see anything on screen, just the clear background.</p>\n"}, {"tags": ["c", "pebble-watch", "pebble-sdk", "cloudpebble"], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 275636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040ec00435e0fa97764b552ba00378c7?s=128&d=identicon&r=PG", "display_name": "Dale", "link": "https://stackoverflow.com/users/275636/dale"}, "edited": false, "score": 0, "creation_date": 1444953011, "post_id": 32287482, "comment_id": 54129610, "body": "This might be it... the docs say that you should check existence before reading.  Also writes can fail so you should check the return code when writing."}], "tags": [], "owner": {"reputation": 3366, "user_id": 2113427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e418a6d63ae9d5f27af663bc0e431?s=128&d=identicon&r=PG", "display_name": "nclarkclt", "link": "https://stackoverflow.com/users/2113427/nclarkclt"}, "is_accepted": false, "score": 1, "last_activity_date": 1440860904, "creation_date": 1440860904, "answer_id": 32287482, "question_id": 31842302, "link": "https://stackoverflow.com/questions/31842302/pebble-time-color-configuration/32287482#32287482", "title": "pebble time color configuration", "body": "<p>Depending on the exact order of events, the color value might not have been saved yet. Are you checking for whether the value exists?</p>\n\n<pre><code>if(persist_exists(timeColor)) {\n  time_color = (GColor)colors[persist_read_int(timeColor)];\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5195624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60186ac4868f028a64f4265314921fd9?s=128&d=identicon&r=PG", "display_name": "DonPIZI", "link": "https://stackoverflow.com/users/5195624/donpizi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440860904, "creation_date": 1438806854, "question_id": 31842302, "link": "https://stackoverflow.com/questions/31842302/pebble-time-color-configuration", "title": "pebble time color configuration", "body": "<p>I try to optimize my configuration of my pebble time watchface. To avoid string comparisons I put all GColor values into an array, but it doesn't work at all :(</p>\n\n<p>The array:</p>\n\n<pre><code>static uint8_t colors[] = {\nGColorInchwormARGB8,    //1\nGColorSpringBudARGB8,    //2\nGColorBrightGreenARGB8,    //3\nGColorMintGreenARGB8,    //4\nGColorScreaminGreenARGB8,    //5\nGColorGreenARGB8,    //6\nGColorMalachiteARGB8,    //7\n};\n</code></pre>\n\n<p>read the data from the config:</p>\n\n<pre><code>static void in_recv_handler(DictionaryIterator *iterator, void *context)\n{\n\n  Tuple *t = dict_read_first(iterator);\n\n  while (t != NULL){\n    switch (t -&gt; key){\n      //++++++ background color +++++++\n      case bgColor:\n       persist_write_int(bgColor, t-&gt;value-&gt;int8);\n      break;\n      //++++++ time color ++++++\n      case timeColor:\n        persist_write_int(timeColor, t-&gt;value-&gt;int8);\n      break;\n    } \n     t = dict_read_next(iterator);\n  } \n}\n</code></pre>\n\n<p>I tried uint8, uint16, uint32, int8, int16 and int32. If I use int32 the watch crash.</p>\n\n<p>Set the color to the layer:</p>\n\n<pre><code>time_color = (GColor)colors[persist_read_int(timeColor)];\n</code></pre>\n\n<p>When I use:</p>\n\n<pre><code>time_color = (GColor)colors[4];\n</code></pre>\n\n<p>the right color appears.</p>\n\n<p>the values of the html page:</p>\n\n<pre><code> &lt;select id=\"bg_select\"&gt;\n          &lt;option class=\"inchworm\" value=\"0\"&gt;Inchworm&lt;/option&gt;\n          &lt;option class=\"springBud\" value=\"1\"&gt;Spring Bud&lt;/option&gt;\n          &lt;option class=\"brightGreen\" value=\"2\"&gt;Bright Green&lt;/option&gt;\n          &lt;option class=\"mintGreen\" value=\"3\"&gt;Mint Green&lt;/option&gt;\n    &lt;/select&gt;\n</code></pre>\n\n<p>Does anybody have suggestions to fix it? What do I wrong?</p>\n"}, {"tags": ["c", "multithreading", "pointers", "swap", "race-condition"], "comments": [{"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1438807812, "post_id": 31842230, "comment_id": 51606650, "body": "Using locks can never lead to a deadlock assuming you acquire them in a consistent order."}], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 3455733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/714d3d52b8bc274f23a9f6f4cfba565c?s=128&d=identicon&r=PG&f=1", "display_name": "Crumar", "link": "https://stackoverflow.com/users/3455733/crumar"}, "edited": false, "score": 0, "creation_date": 1438940546, "post_id": 31845677, "comment_id": 51666992, "body": "Is there a source that it certainly is incorrect behaviour? In my program context, i can live with misdirected packages for a brief moment, failure however is not an option"}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 122, "user_id": 3455733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/714d3d52b8bc274f23a9f6f4cfba565c?s=128&d=identicon&r=PG&f=1", "display_name": "Crumar", "link": "https://stackoverflow.com/users/3455733/crumar"}, "edited": false, "score": 0, "creation_date": 1438946345, "post_id": 31845677, "comment_id": 51670519, "body": "The best overall reference I could find was <a href=\"https://en.wikipedia.org/wiki/Memory_ordering\" rel=\"nofollow noreferrer\">this</a> wikipedia page.  It has references for a number of good papers as well, including Paul McKenney&#39;s.  Even with relaxed consistency, an <code>rwlock</code> is still the best way to avoid failure.  You may want to look at C11 atomics though."}, {"owner": {"reputation": 122, "user_id": 3455733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/714d3d52b8bc274f23a9f6f4cfba565c?s=128&d=identicon&r=PG&f=1", "display_name": "Crumar", "link": "https://stackoverflow.com/users/3455733/crumar"}, "edited": false, "score": 0, "creation_date": 1439028497, "post_id": 31845677, "comment_id": 51700643, "body": "Thank you very much. C11 is not an option either, though :)"}], "tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": true, "score": 1, "last_activity_date": 1438826751, "creation_date": 1438826751, "answer_id": 31845677, "question_id": 31842230, "link": "https://stackoverflow.com/questions/31842230/c-swap-pointer-race-conditions/31845677#31845677", "title": "C swap Pointer Race Conditions", "body": "<p>Nobody has answered so far, so hopefully I can help.</p>\n\n<p>To expand on deadlock comment, consider the classic example...</p>\n\n<pre><code>T1: A -&gt; B\nT2: B -&gt; A\n</code></pre>\n\n<p>You can avoid the deadlock (<code>T1</code> and <code>T2</code> can both make progress) just by switching <code>T2</code>'s order to...</p>\n\n<pre><code>T2: A -&gt; B\n</code></pre>\n\n<p>You <em>absolutely</em> should not avoid locks just to avoid deadlocks.  Your instinct is right about using an <code>rwlock</code> though, so it's still best to minimize the scope of critical sections.</p>\n\n<p>Performance for locks shouldn't be a concern.  Most lock implementations will avoid entering the kernel.  If latency really is an issue though, there are a number of good spinlock implementations. </p>\n\n<p>Not using explicit synchronization will almost <strong>certainly</strong> result in incorrect behavior.  Writing a pointer to memory <em>is</em> usually an atomic operation on most architectures (notably x86), but the order in which reads and writes happen across cores/processors is not defined.</p>\n\n<p>For example, in your code...</p>\n\n<pre><code>bool activate_group(char *groupName){\n    ... (get correct group to activate)\n    if(newActive){\n        if(activeGroup)\n            activeGroup-&gt;isActive = false;\n        // the only writing line to activegroup\n        activeGroup = grp;\n        grp-&gt;isActive = true;\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>and...</p>\n\n<pre><code>void forward_sender(...){\n\n    if(activeGroup &amp;&amp; (input = FINDCORRECTINPUTSOUCEIN(activeGroup-&gt;mappingList)){\n\n        snd_params par;\n        par.sockfd = sockfd;\n        par.msg = buffer;\n        par.len = len;\n        sendMultipleByInput(activeGroup-&gt;mappingList, sender, &amp;par);\n    }\n}\n</code></pre>\n\n<p>There are a number of different valid memory orderings.  In particular, nothing protects <code>mappingList</code> from being updated before <code>activeGroup</code>.  The actual order has almost nothing to do with the program order.  What's more, the compiler will always avoid memory reads and writes.  So the values are more than likely to stay in registers and not even touch memory.</p>\n\n<p><strong>!!!DANGER ZONE!!!</strong></p>\n\n<p>If lock-free programming is absolutely necessary C11 added lock-free <a href=\"http://en.cppreference.com/w/c/atomic\" rel=\"nofollow\">atomics</a>.  However, unless you fully understand the various memory ordering permutations, you will almost certainly get behavior you don't expect.</p>\n"}], "owner": {"reputation": 122, "user_id": 3455733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/714d3d52b8bc274f23a9f6f4cfba565c?s=128&d=identicon&r=PG&f=1", "display_name": "Crumar", "link": "https://stackoverflow.com/users/3455733/crumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 31845677, "answer_count": 1, "score": 1, "last_activity_date": 1438826751, "creation_date": 1438806557, "question_id": 31842230, "link": "https://stackoverflow.com/questions/31842230/c-swap-pointer-race-conditions", "title": "C swap Pointer Race Conditions", "body": "<p>Im currently developing a C program which more or less is a unified (de)multiplexer where the user creates a mapping between input and output. While destinations are only held once and are available for all sources, a source can exist once or multiple times in different groups (but not twice in the same group)</p>\n\n<p>Anyhow that is my context. So that groups are useful, I implemented a function that switches the group on user input.</p>\n\n<p>The currently active group is hold by a pointer \"activeGroup\".</p>\n\n<p>There is a thread for each output destination that waits for input and checks the mapping of the active group, therefore using the \"activeGroup\" pointer.</p>\n\n<p>My test environment today used ca. 2kHz input, while end-user input could be way higher (like 1000kHz, considering inactive sources can also send data). There were no visible problems.</p>\n\n<p>My question now:</p>\n\n<p>Should I use an RWLock for the \"activeGroup\" pointer? Is the simple swap of the pointer atomically a problem? Generally I dont mind if one or hundred input packages go to the wrong destination for a brief fraction of a second, but could I somehow have a segmentation fault if the reading threads read in the absolutely wrongest of moments?</p>\n\n<p>the only function that writes to the pointer:</p>\n\n<pre><code>bool activate_group(char *groupName){\n    ... (get correct group to activate)\n    if(newActive){\n        if(activeGroup)\n            activeGroup-&gt;isActive = false;\n        // the only writing line to activegroup\n        activeGroup = grp;\n        grp-&gt;isActive = true;\n        return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>One of the two functions that access it (well pretty similar)</p>\n\n<pre><code>void forward_sender(...){\n\n    if(activeGroup &amp;&amp; (input = FINDCORRECTINPUTSOUCEIN(activeGroup-&gt;mappingList)){\n\n        snd_params par;\n        par.sockfd = sockfd;\n        par.msg = buffer;\n        par.len = len;\n        sendMultipleByInput(activeGroup-&gt;mappingList, sender, &amp;par);\n    }\n}\n</code></pre>\n\n<p>The other function sends directly, this one may send multiple times. </p>\n\n<p>If activeGroup switches in between, sendMultipleByInput would simply not send, as it would not find a mapping between the device in the now new active mapping List.</p>\n\n<p>If it could happen with current implementation, would I avoid it by simply accessing the activeGroup pointer once and copying the value into a local pointer?</p>\n\n<p>That would minimize the chance if there is one, I guess?</p>\n\n<p>As performance is the key factor in my program, Id like as much synchronization methods that could slow down or even lead to a deadlock (unlikely using rwlock prefering writer here, but still)</p>\n\n<p>Thanks for any insight</p>\n"}, {"tags": ["c", "memory-management", "dos", "freestanding"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438807087, "post_id": 31842228, "comment_id": 51606201, "body": "Minor: Recommend <code>(hbreak + size &gt; stack - 0x40)</code> --&gt; <code>(hbreak + size +0x40 &gt; stack)</code> to avoid potential underflow.  Also at <code>(hbreak &gt; stack - 0x40)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438807273, "post_id": 31842228, "comment_id": 51606317, "body": "As the stack starts at <code>0xffff</code> and the code at <code>0x0100</code> for <code>.COM</code>, this would be a very b0rked situation ;) but nevertheless, might be a good idea in general!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438807655, "post_id": 31842228, "comment_id": 51606564, "body": "Could the problem be in reverse?  If stack is <code>0xFFFF</code>, might some computations be overflowing? (wrapping -around) given 16-bit <code>unsigned</code>?  If so, use 32-bit unsigned as in <code>1UL*hbreak + size +0x40 &gt; stack</code> - just an idea."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438808423, "post_id": 31842228, "comment_id": 51606992, "body": "Hmmm ... it doesn&#39;t make sense to have a <code>size_t</code> bigger than 16 bits because addresses greater than <code>0xffff</code> are invalid in <i>real mode</i> (you&#39;d have to use segment registers, of course <code>clang</code> doesn&#39;t support this). But still, pointers <i>are</i> 32bit, so the expression should be calculated in 32bit anyways. With some constructed test code, my <code>malloc()</code> failed as soon as reaching the stack area, as expected ..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438809048, "post_id": 31842228, "comment_id": 51607308, "body": "1) If isn&#39;t that <code>size_t</code> is 16-bits, my concern is that math of <code>hbreak + size +0x40</code> has a 17-bit answer.  2): Rather than use with the heap pointer, create a global <code>mem[N]</code> where N is about as large as reasonable/possible leaving enough stack for the code.  Use <code>mem</code> for your memory pool.  Effectively this is about the same as using the heap but with less <code>asm</code> tricks`.  3) In real mode and .COM, thought all pointers are 16-bit (same code, data,stack segment)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438809722, "post_id": 31842228, "comment_id": 51607624, "body": "@chux thanks for your ideas. To 1) As far as I understand, this shouldn&#39;t matter, because I use the whole (32bit) <code>esp</code> register to compare with. Could there be &quot;junk&quot; in the upper 16 bits? :o 2) I didn&#39;t initially try a statically allocated memory pool because I wanted to stay as generic as possible (so, not pre-determining the size of the heap) ... but I&#39;ll give it a try and see whether it behaves differently."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438839797, "post_id": 31845323, "comment_id": 51616062, "body": "Wait, for <code>.COM</code>, <code>cs</code> == <code>ds</code> == <code>es</code> and using <code>clang</code>, I have no way to access memory in any other segment (except through inline assembly of course), so I&#39;m using <i>just</i> 64KB here. Why allocate memory from DOS that you can&#39;t use in C anyways? The heap starts wherever sections placed by the linker end (right now around <code>[ds]:8300</code>) and the stack starts (in the same segment) from <code>[ds]:ffff</code>."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1438844892, "post_id": 31845323, "comment_id": 51618606, "body": "With Microsoft compiler, you can use __far to access the memory outside the current data segment. For example char __far *fpchar;"}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1439824221, "last_edit_date": 1439824221, "creation_date": 1438824150, "answer_id": 31845323, "question_id": 31842228, "link": "https://stackoverflow.com/questions/31842228/custom-memory-allocator-for-real-mode-dos-com-freestanding-how-to-debug/31845323#31845323", "title": "Custom memory allocator for real-mode DOS .COM (freestanding) -- how to debug?", "body": "<p>If this is real mode DOS, I'm not sure about the upper bits of esp. As for <code>malloc()</code>, use the memory between <code>ss:sp and 0xa000:0000</code>, the memory between the top of the stack and the <code>640k</code> boundary . I don't recall if MS-DOS allocates all of the 640k region for a .COM program or not. There are two DOS calls, <code>INT 21H, ah = 04Ah releases memory, ah = 048H allocates memory</code>, but I don't recall if these are for .COM or .EXE programs.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1439824221, "creation_date": 1438806548, "question_id": 31842228, "link": "https://stackoverflow.com/questions/31842228/custom-memory-allocator-for-real-mode-dos-com-freestanding-how-to-debug", "title": "Custom memory allocator for real-mode DOS .COM (freestanding) -- how to debug?", "body": "<p>A little background first: stumbling upon <a href=\"http://nullprogram.com/blog/2014/12/09/\" rel=\"nofollow\">this blog post</a>, I learned it was possible to create DOS <code>.COM</code> files with the GNU linker and it's not even rocket science. Using <code>clang</code> and the <code>-m16</code> switch (creating <em>real-mode</em> compatible 32bit code by prefixing 32bit instructions accordingly), this worked out quite well. So I had the idea to try implementing just enough runtime to get a <a href=\"https://github.com/Zirias/cursedsnake\" rel=\"nofollow\">little curses game</a> I wrote recently to compile to a <code>.COM</code> and run in <em>real-mode</em> DOS. The game is small enough so that squeezing everything (text, data, bss, heap, stack) in 64KB seemed doable. Of course, it uses <code>malloc()</code>. So I had to come up with my own implementation. This is what it looks like:</p>\n\n<pre><code>typedef unsigned short size_t; /* from stddef.h */\n\ntypedef struct hhdr hhdr;\nstruct hhdr\n{\n    void *next;\n    int free;\n};\n\nextern char _heap;\nstatic char *hbreak = &amp;_heap;\nstatic hhdr hhead = { &amp;_heap, 0 };\n\nstatic void *newchunk(size_t size)\n{\n    char *stack;\n    __asm__(\"mov %%esp, %0\": \"=rm\" (stack));\n    if (hbreak + size &gt; stack - 0x40) return 0;\n    if (size &lt; 1024) size = 1024;\n    hhdr *chunk = (hhdr *)hbreak;\n    hbreak += size;\n    if (hbreak &gt; stack - 0x40) hbreak = stack - 0x40;\n    chunk-&gt;next = hbreak;\n    chunk-&gt;free = 1;\n    return chunk;\n}\n\nvoid *malloc(size_t size)\n{\n    if (!size) return 0;\n    if (size % sizeof(hhdr)) size += sizeof(hhdr) - (size % sizeof(hhdr));\n\n    hhdr *hdr = &amp;hhead;\n    while ((char *)hdr-&gt;next &lt; hbreak)\n    {\n        hdr = hdr-&gt;next;\n        if (hdr-&gt;free &amp;&amp; \n                (char *)hdr-&gt;next - (char *)hdr - sizeof(hhdr) &gt;= size)\n        {\n            if ((char *)hdr-&gt;next - (char *)hdr - 2*sizeof(hhdr) &gt; size)\n            {\n                hhdr *hdr2 = (hhdr *)((char *)hdr + sizeof(hhdr) + size);\n                hdr2-&gt;free = 1;\n                hdr2-&gt;next = hdr-&gt;next;\n                hdr-&gt;next = hdr2;\n            }\n            hdr-&gt;free = 0;\n            return (char *)hdr + sizeof(hhdr);\n        }\n    }\n\n    if (!(hdr-&gt;next = newchunk(size + sizeof(hhdr)))) return 0;\n    return malloc(size);\n}\n\nvoid free(void *ptr)\n{\n    if (!ptr) return;\n    hhdr *hdr = (hhdr *)((char *)ptr - sizeof(hhdr));\n    hdr-&gt;free = 1;\n    if ((void *)hdr != hhead.next)\n    {\n        hhdr *hdr2 = hhead.next;\n        while (hdr2-&gt;next != hdr) hdr2 = hdr2-&gt;next;\n        if (hdr2-&gt;free) hdr = hdr2;\n    }\n    hhdr *next = hdr-&gt;next;\n    while ((char *)next &lt; hbreak)\n    {\n        if (!next-&gt;free) break;\n        hdr-&gt;next = next;\n        next = next-&gt;next;\n    }\n    if ((char *)next == hbreak) hbreak = (char *)hdr;\n}\n</code></pre>\n\n<p>The <code>_heap</code> symbol is defined by the linker. Not showing <code>realloc()</code> here as it isn't used right now anyways (and therefore completely untested).</p>\n\n<p>The problem now is: I created my <a href=\"https://github.com/Zirias/clang-libdos\" rel=\"nofollow\">runtime</a> here (malloc is in src/libdos/stdlib.c), wrote a lot of testing stuff and in the end, everything seemed to work quite well. My game on the other hand is thoroughly tested and checked for invalid memory accesses using <code>valgrind</code>. Still, putting both parts together, it just <strong>crashes</strong>. (Try building the game from git with <code>make -f libdos.mk</code>, you will need to have llvm/clang installed).</p>\n\n<p>As I experienced a strange <em>heisenbug</em> first (I worked around it for now), I guess it COULD be the optimizers fault getting things wrong when compiling for <em>real mode</em>, which is indeed uncommon. But I can't be sure, and the next sensitive candidate would be probably my memory management, see above.</p>\n\n<p>Now the tricky question: How would I debug such a thing? With just my own test code, it works very well. I can't compile my game without optimizations because it will exceed 64KB when doing so. Any suggestions? Or can anyone spot something obviously wrong with the above code?</p>\n"}, {"tags": ["c", "arrays", "integer"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1438806535, "post_id": 31842189, "comment_id": 51605881, "body": "Read in a line at a time, not an int at a time... then read your ints out of that line. <code>fgetln()</code> perhaps."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1438806598, "post_id": 31842189, "comment_id": 51605918, "body": "First of all, <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">in C you should not cast the result of <code>malloc</code></a>. Then a loop like <code>while (!feof(...))</code> seldom works as expected, as the <code>EOF</code> flag isn&#39;t set until after you try to read from beyond the end of the file."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 7, "creation_date": 1438806704, "post_id": 31842189, "comment_id": 51605987, "body": "The signature of <code>main</code> is definitely <b>not</b> C."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1438809149, "post_id": 31842189, "comment_id": 51607348, "body": "<code>using namespace System</code>? <code>System::String ^</code>? When did this become C?"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1438807336, "post_id": 31842394, "comment_id": 51606361, "body": "Using <code>sscanf</code> to read an unknown number of integers will be a problem. Use of <code>strtok</code> and <code>atoi</code> will work better."}, {"owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1438809223, "post_id": 31842394, "comment_id": 51607384, "body": "@RSahu - thanks for the useful comment - answer editted and I can see your method is <b>much</b> better"}], "tags": [], "owner": {"reputation": 1253, "user_id": 3596376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aeldq.jpg?s=128&g=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3596376/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1438809156, "last_edit_date": 1592644375, "creation_date": 1438807161, "answer_id": 31842394, "question_id": 31842189, "link": "https://stackoverflow.com/questions/31842189/the-end-of-an-integer-line-in-c/31842394#31842394", "title": "The end of an integer line in C", "body": "<p>I would read in a lines with fgets...(see e.g. <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">here</a>)</p>\n<pre><code>char *fgets(char *str, int n, FILE *stream) \n</code></pre>\n<p>you can read a line up to $n$ characters line into a string.</p>\n<p>This method gives you a way of loading each line individually to a string.</p>\n<p><strong>Edit after good comment</strong></p>\n<p>It is easier to split up the string with <strong>strtok</strong> and then use <strong>atoi</strong> to convert each bit of the string to an integer (rather than use sscanf as in my original answer).</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1438829593, "last_edit_date": 1438829593, "creation_date": 1438828528, "answer_id": 31845914, "question_id": 31842189, "link": "https://stackoverflow.com/questions/31842189/the-end-of-an-integer-line-in-c/31845914#31845914", "title": "The end of an integer line in C", "body": "<p>Reading a line of integers and saving in a variable sized array is one approach.</p>\n\n<p>The trouble with <code>fscanf(f, \"%d\",...</code> is that it first reads white-space and code loses the occurrence of <code>'\\n'</code>.  Code needs to look for  it by some other means.</p>\n\n<p>But rather than pack all the code in <code>main()</code>, consider helper functions.  Following C function reads one <em>line</em> of numbers and return <code>NULL</code> on 1) out-of-memory, 2) no data or conversion failure with no numbers read.  Otherwise return <code>vector</code>.  It is not limited to any line length.</p>\n\n<pre><code>typedef struct {\n  int *v;\n  size_t n;\n} vector;\n\nvector *Read_vector(vector *v1, FILE *inf) {\n  v1-&gt;v = NULL;\n  v1-&gt;n = 0;\n  size_t size = 0;\n  for (;;) {\n    int number;\n    int ch;\n    // Check leading white-space for \\n\n    while (isspace(ch = fgetc(inf))) {\n      if (ch == '\\n') break;\n    }\n    if (ch == '\\n' || ch == EOF) break;\n    ungetc(ch, inf);\n    if (1 != fscanf(inf, \"%d\", &amp;number)) {\n      break;\n    }\n    //  Is `v1` large enough?\n    if (v1.n &gt;= size) {\n      size = size*2 + 1;\n      vector nu;\n      nu.v = realloc(v1-&gt;v, size * sizeof *nu.v);\n      if (nu.v == NULL) {\n        free(v1-&gt;v);\n        v1-&gt;v = NULL;\n        v1-&gt;n = 0;\n        return NULL;\n      }\n      v1-&gt;v = nu.v;\n    }\n    v1.v[v1.n++] = number;\n  }\n  if (v1-&gt;n == 0) {\n    return NULL;\n  }\n  return v1;\n}\n</code></pre>\n\n<p>With repeated calls, an array of vectors could be had.  Leave that to OP as it is very similar to the above.</p>\n\n<p>Note: avoid use <code>while (!feof(f))</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 5185991, "user_type": "registered", "profile_image": "https://graph.facebook.com/950236668367682/picture?type=large", "display_name": "Mirela Ghiteanu", "link": "https://stackoverflow.com/users/5185991/mirela-ghiteanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438829593, "creation_date": 1438806379, "last_edit_date": 1438808734, "question_id": 31842189, "link": "https://stackoverflow.com/questions/31842189/the-end-of-an-integer-line-in-c", "title": "The end of an integer line in C", "body": "<p>I have to read an undefined matrix from a text file in C language, and i want to read it line by line so that each line will be an integer array.But how do i know where is the end of a line, since i can't use \"\\n\" as in for characters?\nHere is the code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"stdlib.h\"\n#include \"stdio.h\"\n\nusing namespace System;\n\ntypedef struct\n{\n    int *v;\n    int n;\n}vector;\n\n\n\nint main(array&lt;System::String ^&gt; ^args)\n{\n    vector *a;\n    FILE* f;\n    int n = 15;\n    int i = 0;\n    int j,k;\n    if ((f = fopen(\"C:\\\\Users\\\\Mirelaa\\\\Documents\\\\visual studio 2013\\\\Projects\\\\MatriceNedefinita\\\\MatriceNedefinita\\\\Debug\\\\fisier2.in\", \"rt\")) == NULL)\n    {\n        printf(\"Fisierul nu poate fi deschis!\");\n        exit(1);\n\n    };\n\n    a = (vector *)malloc(n * sizeof(vector));\n\n    while (!feof(f))\n    {\n        a[i].v = (int*)malloc(n * sizeof(int));\n        a[i].n = 0;\n        //citeste rand\n        //citesti fiecare element din rand\n        j = 0;\n        while (a[i].v[j] != '\\0')// wrong!!\n\n        {\n            fscanf(f, \"%d\", &amp;a[i].v[j]);\n            j++;\n            a[i].n = a[i].n + 1;\n        }\n        for (k = 0 ; k &lt; a[i].n ; k++)\n        {\n            printf(\"%d\", a[i].v[j]);\n            printf(\"\\n\");\n        }\n        i++;\n        if (i == n)\n        {\n            n = 2 * n;\n            a = (vector *)realloc(a, n * sizeof(vector));\n            a[i].v = (int *)realloc(a[i].v, n * sizeof(int));\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1438805965, "post_id": 31842076, "comment_id": 51605587, "body": "Unless you save the dimensions ahead of time you can&#39;t. Use <code>std::vector</code> or <code>std::array</code>."}, {"owner": {"reputation": 7072, "user_id": 1816262, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IcKpN.png?s=128&g=1", "display_name": "OMGtechy", "link": "https://stackoverflow.com/users/1816262/omgtechy"}, "edited": false, "score": 2, "creation_date": 1438806092, "post_id": 31842076, "comment_id": 51605653, "body": "Store them in constants"}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438806224, "post_id": 31842076, "comment_id": 51605713, "body": "This was what I tried to avoid. Because if I save them I also have to pass them to the class making the code a bit messier. But it seems I will have to do that."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1438806365, "post_id": 31842076, "comment_id": 51605796, "body": "Does the array have to be allocated dynamically?"}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438806435, "post_id": 31842076, "comment_id": 51605827, "body": "No. The array is, once created, not changed anymore."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1438806499, "post_id": 31842076, "comment_id": 51605862, "body": "I mean, do you have to allocate it with <code>new</code>? Or are the dimensions really this small and known at compile time? If you create your array like <code>MyStruct mySt[5][4][3]</code> then you can do what you are asking."}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438806677, "post_id": 31842076, "comment_id": 51605968, "body": "I cant exactly follow you, but I can describe how the arrays are created. There are 3 fix sizes for the dimensions eg. 32, 32, 64. Then in 3 loops the arrays are created like in sample code and filled with data. Those arrays are often created at runtime."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1438807938, "post_id": 31842076, "comment_id": 51606724, "body": "Your &quot;3D array&quot; doesn&#39;t have a size. The problem of making ND array this way is that, not all columns/rows/depths are necessarily the same length. Like the one you have created, all rows except [0,0,:] are of length 0."}, {"owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "edited": false, "score": 0, "creation_date": 1438808028, "post_id": 31842076, "comment_id": 51606785, "body": "In the way the array is created it is given that colums/rows/depths have to have the same size.  The short example is not representative, sorry."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1438808029, "post_id": 31842076, "comment_id": 51606787, "body": "This would be a good place to use <code>std::array</code>, since it knows its own size (in a zero-overhead manner). Also its superior to raw arrays in other ways as well."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1438808244, "post_id": 31842076, "comment_id": 51606892, "body": "@Eskalior You can do that but it&#39;s not enforced by the standard."}], "answers": [{"comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1438807115, "post_id": 31842140, "comment_id": 51606220, "body": "I don&#39;t think it is true that you cannot get sizes from &quot;plain C++ arrays&quot;. That is exactly what <a href=\"http://en.cppreference.com/w/cpp/types/extent\" rel=\"nofollow noreferrer\"><code>std::extent</code></a> is for but you can&#39;t get the size of a plain C++ array if all you have is a pointer."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1438808658, "post_id": 31842140, "comment_id": 51607112, "body": "@ChrisDrew You are right, I should have clarified that I am talking about the situation in OP&#39;s post. Of course you can get the number of elements of an array-typed variable by using either <code>std::extent</code> or the old-way division of <code>sizeof</code>s."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1438808552, "last_edit_date": 1438808552, "creation_date": 1438806180, "answer_id": 31842140, "question_id": 31842076, "link": "https://stackoverflow.com/questions/31842076/how-to-get-the-length-of-multidimensional-struct-arrays/31842140#31842140", "title": "How to get the length of multidimensional struct arrays?", "body": "<p>You cannot get sizes from plain C++ arrays allocated with <code>new</code> and stored as pointers: there is no language construct that would let you retrieve an array size.</p>\n\n<p>There are two options for how to deal with this situation:</p>\n\n<ul>\n<li>In C++ use a container that supports sizing - for example, <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a> of vectors of vectors, or</li>\n<li>In C (or in C++, if you prefer to stay with arrays) construct a separate 3D array of sizes, and pass it along with the <code>mySt</code> array.</li>\n</ul>\n"}], "owner": {"reputation": 234, "user_id": 5065047, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79ec37627e5211eb36fd1827dc509375?s=128&d=identicon&r=PG&f=1", "display_name": "Eskalior", "link": "https://stackoverflow.com/users/5065047/eskalior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 31842140, "answer_count": 1, "score": 3, "last_activity_date": 1438808552, "creation_date": 1438805901, "question_id": 31842076, "link": "https://stackoverflow.com/questions/31842076/how-to-get-the-length-of-multidimensional-struct-arrays", "title": "How to get the length of multidimensional struct arrays?", "body": "<p>I've got a class that gets a 3-dimensional struct array in the constructor. For further calculations it also needs the length of each dimension.</p>\n\n<p>a short example:</p>\n\n<pre><code>MyStruct*** mySt;\nmySt = new MyStruct**[5]\nmySt[0] = new MyStruct*[4]\nmySt[0][0] = new MyStruct[3]\n</code></pre>\n\n<p>How can I get those values (5, 4, 3) back to save them in the new class without explicitely sending them to the constructor?</p>\n"}, {"tags": ["c", "matlab", "dll", "matlab-coder"], "comments": [{"owner": {"reputation": 11146, "user_id": 3460361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O31Mu.png?s=128&g=1", "display_name": "Hoki", "link": "https://stackoverflow.com/users/3460361/hoki"}, "edited": false, "score": 1, "creation_date": 1438805391, "post_id": 31841205, "comment_id": 51605291, "body": "May be you should also post the command you used to generate the code."}, {"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 0, "creation_date": 1438819358, "post_id": 31841205, "comment_id": 51610865, "body": "Posting the entire build log may be helpful as well including the lines where the C files were compiled. Is the file lccstub.obj generated in the <code>codegen</code> directory, <code>codegen\\dll\\lbryTest</code> by default?"}, {"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 0, "creation_date": 1438874815, "post_id": 31841205, "comment_id": 51639081, "body": "Another thing to check, does the full path to the codegen directory contain any &quot;special&quot; characters? Things like $, &amp;, non-English characters have been known to cause issues with gmake. Contacting <a href=\"http://www.mathworks.com/support/contact_us/\" rel=\"nofollow noreferrer\">MathWorks technical support</a> may be helpful in this case."}, {"owner": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "edited": false, "score": 0, "creation_date": 1438878029, "post_id": 31841205, "comment_id": 51641350, "body": "I posted the build log, I don&#39;t have any weird characters in the path."}, {"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 1, "creation_date": 1438892130, "post_id": 31841205, "comment_id": 51649104, "body": "Thanks. It looks like the file <code>lccstub.c</code> is not being compiled to produce <code>lccstub.obj</code> for some reason. For a quick workaround, you might consider installing another <a href=\"http://www.mathworks.com/support/compilers/R2015a/index.html\" rel=\"nofollow noreferrer\">supported compiler</a>. <a href=\"http://trweb.mathworks.com/tr/result?id=3654568978\" rel=\"nofollow noreferrer\">This article</a> describes installing and using the freely available Microsoft Windows SDK 7.1 to use with MATLAB."}, {"owner": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "edited": false, "score": 0, "creation_date": 1438894766, "post_id": 31841205, "comment_id": 51650572, "body": "From what I can see there is no lccstub.c. I don&#39;t know why it wants there to be one. I&#39;ll look into your suggestion."}, {"owner": {"reputation": 1814, "user_id": 3297440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b9a3c27ffed7a206aa03f34cde4bce?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Livingston", "link": "https://stackoverflow.com/users/3297440/ryan-livingston"}, "edited": false, "score": 1, "creation_date": 1438950585, "post_id": 31841205, "comment_id": 51673102, "body": "lccstub.c should ship with MATLAB. But I&#39;d still recommend trying the Windows SDK for building shared libraries."}, {"owner": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "edited": false, "score": 0, "creation_date": 1438980835, "post_id": 31841205, "comment_id": 51690588, "body": "Installing the Windows SDK worked, thanks. Now to fix the next problem in the project..."}], "answers": [{"tags": [], "owner": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "is_accepted": true, "score": 1, "last_activity_date": 1438981036, "creation_date": 1438981036, "answer_id": 31886530, "question_id": 31841205, "link": "https://stackoverflow.com/questions/31841205/cant-create-a-dll-from-matlab-coder/31886530#31886530", "title": "Can&#39;t create a .dll from Matlab Coder", "body": "<p>credit to Ryan Livingston for this suggestion, which I am turning into an official answer</p>\n\n<p>The file lccstub.c (compiled to lccstub.obj) isn't on your machine, when it should be. To fix it, you should install a supported compiler for Matlab.</p>\n\n<p>Windows SDK 7.1 is available for free from <a href=\"http://www.mathworks.com/support/compilers/R2015a/index.html?refresh=true\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 31886530, "answer_count": 1, "score": 0, "last_activity_date": 1438981036, "creation_date": 1438802885, "last_edit_date": 1438877868, "question_id": 31841205, "link": "https://stackoverflow.com/questions/31841205/cant-create-a-dll-from-matlab-coder", "title": "Can&#39;t create a .dll from Matlab Coder", "body": "<p>I am trying to convert some matlab code into a c dynamic library (.dll) using the Matlab Coder tool. I'm trying it on some simple sample code, but I keep getting the same error which I can't find a solution to.</p>\n\n<p>My code is:</p>\n\n<pre><code>function y = lbryTest(x, z) %#codegen\n%QUICKTEST Summary of this function goes here\n%   Detailed explanation goes here\ny = 1.0;\na = x + z;\nb = x * a;\ny = b/3 + y;\nend\n</code></pre>\n\n<p>I've tried using the app version of coder as well as the command:  <code>codegen -config:dll lbryTest -args {2.0, 5.0}</code>\nand the build log, including the error, is:</p>\n\n<pre><code>1   C:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/bin/lcc64 -c -w -noregistrylookup -nodeclspec -IC:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/include64 -DMODEL=lbryTest -DHAVESTDIO -DUSE_RTMODEL -IC:/Users/shutchinson/Documents/MATLAB -IC:/Users/shutchinson/Documents/MATLAB/codegen/dll/lbryTest -IC:/PROGRA~1/MATLAB/R2015a/extern/include -IC:/PROGRA~1/MATLAB/R2015a/simulink/include -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src/ext_mode/common -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/ert -Fo\"lbryTest_initialize.obj\" \"lbryTest_initialize.c\"\n2   C:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/bin/lcc64 -c -w -noregistrylookup -nodeclspec -IC:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/include64 -DMODEL=lbryTest -DHAVESTDIO -DUSE_RTMODEL -IC:/Users/shutchinson/Documents/MATLAB -IC:/Users/shutchinson/Documents/MATLAB/codegen/dll/lbryTest -IC:/PROGRA~1/MATLAB/R2015a/extern/include -IC:/PROGRA~1/MATLAB/R2015a/simulink/include -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src/ext_mode/common -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/ert -Fo\"lbryTest_terminate.obj\" \"lbryTest_terminate.c\"\n3   C:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/bin/lcc64 -c -w -noregistrylookup -nodeclspec -IC:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/include64 -DMODEL=lbryTest -DHAVESTDIO -DUSE_RTMODEL -IC:/Users/shutchinson/Documents/MATLAB -IC:/Users/shutchinson/Documents/MATLAB/codegen/dll/lbryTest -IC:/PROGRA~1/MATLAB/R2015a/extern/include -IC:/PROGRA~1/MATLAB/R2015a/simulink/include -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src/ext_mode/common -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/ert -Fo\"lbryTest.obj\" \"lbryTest.c\"\n4   C:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/bin/lcc64 -c -w -noregistrylookup -nodeclspec -IC:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/include64 -DMODEL=lbryTest -DHAVESTDIO -DUSE_RTMODEL -IC:/Users/shutchinson/Documents/MATLAB -IC:/Users/shutchinson/Documents/MATLAB/codegen/dll/lbryTest -IC:/PROGRA~1/MATLAB/R2015a/extern/include -IC:/PROGRA~1/MATLAB/R2015a/simulink/include -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src/ext_mode/common -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/ert -Fo\"rt_nonfinite.obj\" \"rt_nonfinite.c\"\n5   C:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/bin/lcc64 -c -w -noregistrylookup -nodeclspec -IC:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/include64 -DMODEL=lbryTest -DHAVESTDIO -DUSE_RTMODEL -IC:/Users/shutchinson/Documents/MATLAB -IC:/Users/shutchinson/Documents/MATLAB/codegen/dll/lbryTest -IC:/PROGRA~1/MATLAB/R2015a/extern/include -IC:/PROGRA~1/MATLAB/R2015a/simulink/include -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src/ext_mode/common -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/ert -Fo\"rtGetNaN.obj\" \"rtGetNaN.c\"\n6   C:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/bin/lcc64 -c -w -noregistrylookup -nodeclspec -IC:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/include64 -DMODEL=lbryTest -DHAVESTDIO -DUSE_RTMODEL -IC:/Users/shutchinson/Documents/MATLAB -IC:/Users/shutchinson/Documents/MATLAB/codegen/dll/lbryTest -IC:/PROGRA~1/MATLAB/R2015a/extern/include -IC:/PROGRA~1/MATLAB/R2015a/simulink/include -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/src/ext_mode/common -IC:/PROGRA~1/MATLAB/R2015a/rtw/c/ert -Fo\"rtGetInf.obj\" \"rtGetInf.c\"\n7   C:/PROGRA~1/MATLAB/R2015a/sys/perl/win32/bin/perl.exe C:/PROGRA~1/MATLAB/R2015a/rtw/c/tools/mkvc_lnk.pl lbryTest.lnk lbryTest_initialize.obj lbryTest_terminate.obj lbryTest.obj rt_nonfinite.obj rtGetNaN.obj rtGetInf.obj lccstub.obj\n8   \"### Creating dynamic library \"./lbryTest.dll\" ...\"\n9   C:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/bin/lcclnk64 -dll -entry LibMain -s -LC:/PROGRA~1/MATLAB/R2015a/sys/lcc64/lcc64/lib64  lbryTest.def -o ./lbryTest.dll @lbryTest.lnk  \n10   cannot open lccstub.obj\n11   gmake: *** [lbryTest.dll] Error 1\n12   The make command returned an error of 2\n13   'An_error_occurred_during_the_call_to_make' is not recognized as an internal or external command,\n14   operable program or batch file.\n15   \n16   Error(s) encountered while building model \"lbryTest\":\n17   ### Failed to generate all binary outputs.\n</code></pre>\n\n<p>I can make a .lib from this code, but I need a .dll, which is proving difficult. It looks like I am missing some object file or matlab can't find it, but I don't know what to do about it.</p>\n"}, {"tags": ["sql", "c", "casting"], "comments": [{"owner": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "edited": false, "score": 1, "creation_date": 1438802846, "post_id": 31841125, "comment_id": 51603880, "body": "Look at <a href=\"http://www.cplusplus.com/reference/cstdio/sprintf/\" rel=\"nofollow noreferrer\">sprintf</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438802947, "post_id": 31841125, "comment_id": 51603941, "body": "Why do you need to do in two separate steps?"}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "reply_to_user": {"reputation": 3402, "user_id": 3628863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1lHi.jpg?s=128&g=1", "display_name": "Joe Farrell", "link": "https://stackoverflow.com/users/3628863/joe-farrell"}, "edited": false, "score": 0, "creation_date": 1438803063, "post_id": 31841125, "comment_id": 51603991, "body": "@JoeFarrell thanks, I have edited my post to use sprintf"}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438803095, "post_id": 31841125, "comment_id": 51604006, "body": "@WeatherVane because I need to know how to convert to char from double, as I need one long string of chars to use with the SQL query"}, {"owner": {"reputation": 20094, "user_id": 1832636, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/03182c8b98caa6f9af95e4f4afd7c018?s=128&d=identicon&r=PG", "display_name": "Dan Bracuk", "link": "https://stackoverflow.com/users/1832636/dan-bracuk"}, "edited": false, "score": 1, "creation_date": 1438803132, "post_id": 31841125, "comment_id": 51604028, "body": "Does c not support query parameters?"}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "reply_to_user": {"reputation": 20094, "user_id": 1832636, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/03182c8b98caa6f9af95e4f4afd7c018?s=128&d=identicon&r=PG", "display_name": "Dan Bracuk", "link": "https://stackoverflow.com/users/1832636/dan-bracuk"}, "edited": false, "score": 0, "creation_date": 1438803358, "post_id": 31841125, "comment_id": 51604163, "body": "@DanBracuk good suggestion, however <a href=\"https://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters(v=vs.110).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a> C is not on the list of supported languages there"}, {"owner": {"reputation": 20094, "user_id": 1832636, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/03182c8b98caa6f9af95e4f4afd7c018?s=128&d=identicon&r=PG", "display_name": "Dan Bracuk", "link": "https://stackoverflow.com/users/1832636/dan-bracuk"}, "edited": false, "score": 0, "creation_date": 1438803763, "post_id": 31841125, "comment_id": 51604382, "body": "What about this:  <a href=\"http://www.cprogramming.com/tutorial/intro_to_ado_in_c++.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/intro_to_ado_in_c++.html</a> ?"}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "reply_to_user": {"reputation": 20094, "user_id": 1832636, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/03182c8b98caa6f9af95e4f4afd7c018?s=128&d=identicon&r=PG", "display_name": "Dan Bracuk", "link": "https://stackoverflow.com/users/1832636/dan-bracuk"}, "edited": false, "score": 0, "creation_date": 1438804017, "post_id": 31841125, "comment_id": 51604533, "body": "@DanBracuk that is for C++, whereas I need C"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438803533, "post_id": 31841352, "comment_id": 51604234, "body": "Don&#39;t use <code>%lf</code> for doubles in <code>printf</code> family. Use it for doubles in <code>scanf</code> family. Here <code>%f</code> is sufficient for <code>double</code>."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438803632, "post_id": 31841352, "comment_id": 51604296, "body": "Changed as you said @WeatherVane"}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "edited": false, "score": 0, "creation_date": 1438804068, "post_id": 31841352, "comment_id": 51604565, "body": "@cpp_prog thanks for the suggestion, is this what you mean? <code>mysql_query(conn, snprintf(sql, MAXSQL, &quot;%s %f , %f , %f&quot;, queryOne, lat, longatude, speed))</code> as it is producing a segfault"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438804181, "post_id": 31841352, "comment_id": 51604631, "body": "No, you are passing the return value from <code>snprintf</code> which is its length. Make the string <code>sql</code> as advised, then <code>mysql_query(conn, sql)</code>. I respectfully advise to <i>read the manual</i>."}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438804378, "post_id": 31841352, "comment_id": 51604762, "body": "@WeatherVane ah sorry I didn&#39;t realise <code>sql</code> was to be used as a variable, I thought that was just a buffer size"}], "tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": true, "score": 1, "last_activity_date": 1438803693, "last_edit_date": 1438803693, "creation_date": 1438803340, "answer_id": 31841352, "question_id": 31841125, "link": "https://stackoverflow.com/questions/31841125/concatenating-a-string-to-make-up-an-sql-query-in-c/31841352#31841352", "title": "Concatenating a string to make up an SQL query in C", "body": "<p>In your case, you could use:</p>\n\n<pre><code>#define MAXSQL 256\nchar sql[MAXSQL];\nsnprintf(sql, MAXSQL,  \"%s %f , %f , %f\", queryOne, lat, longatude, speed);\n</code></pre>\n\n<p>The <code>snprintf</code> function writes onto the buffer, that is its first argument. <a href=\"http://www.cplusplus.com/reference/cstdio/snprintf/?kw=snprintf\" rel=\"nofollow\">http://www.cplusplus.com/reference/cstdio/snprintf/?kw=snprintf</a></p>\n\n<p>Now you can use the <code>sql</code> string as you please.</p>\n\n<p>Note that I used snprintf rather than sprintf. This is to avoid potential buffer overflows. </p>\n\n<p>Also, don't use strcat so repeatedly, because that causes a Shlemiel the Painter algorithm, and every next call to strcat gets slower, because strcat has to start from the beginning and find the null terminator. See <a href=\"http://www.joelonsoftware.com/articles/fog0000000319.html\" rel=\"nofollow\">http://www.joelonsoftware.com/articles/fog0000000319.html</a> for more info.</p>\n"}], "owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 31841352, "answer_count": 1, "score": 0, "last_activity_date": 1438803693, "creation_date": 1438802649, "last_edit_date": 1438803041, "question_id": 31841125, "link": "https://stackoverflow.com/questions/31841125/concatenating-a-string-to-make-up-an-sql-query-in-c", "title": "Concatenating a string to make up an SQL query in C", "body": "<p>I need to do this in two separate steps but so far I am not finding a way of doing this.</p>\n\n<p>First, I need to convert a double variable, into a char variable (and to be saved in that variable). I have noticed type casting doesnt work the same in C as Java / other languages. How do I cast a variable to be a string / char?</p>\n\n<p>Second, I need to concatenate the strings, there will be a total of 6 string variables that will need concatenating, I have only found the <code>strcat</code> function which only takes 2 arguments.</p>\n\n<p>These are the strings I am trying to build:</p>\n\n<pre><code>char *queryOne = \"INSERT INTO location (id, carid, ownerid, lat, long, speed) VALUES (,2, 1, \";\nchar *queryTwo = lat; // lat is a double\nchar *queryThree = \",\";\nchar *queryFour = longatude; // longatude is a double\nchar *queryFive = \",\";\nchar *querySix = speed; // speed is a double\n</code></pre>\n\n<p>And then I need the concatenated string to work in: <code>(mysql_query(conn, query))</code> as one long string</p>\n\n<p>Edit: So possibly, this should convert the datatype I think?</p>\n\n<pre><code>char buffer [50];\n\nchar *queryOne = \"INSERT INTO location (id, carid, ownerid, lat, long, speed) VALUES (,2, 1, \";\nchar *queryTwo = sprintf (buffer, \"%d\", lat);\nchar *queryThree = \",\";\nchar *queryFour = sprintf (buffer, \"%d\", longatude);\nchar *queryFive = \",\";\nchar *querySix = sprintf (buffer, \"%d\", speed);\n\nfprintf(stderr, \"Dta: %s\\n\", queryOne);\nfprintf(stderr, \"Dta: %s\\n\", *queryTwo);\nfprintf(stderr, \"Dta: %s\\n\", queryThree);\nfprintf(stderr, \"Dta: %s\\n\", *queryFour);\nfprintf(stderr, \"Dta: %s\\n\", queryFive);\nfprintf(stderr, \"Dta: %s\\n\", *querySix);\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 888, "user_id": 5175071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/383b3ea578405046feea7e132714f0e9?s=128&d=identicon&r=PG", "display_name": "The Brofessor", "link": "https://stackoverflow.com/users/5175071/the-brofessor"}, "edited": false, "score": 1, "creation_date": 1438802304, "post_id": 31840926, "comment_id": 51603557, "body": "Change <code>(rand() % 5)</code> to this <code>(rand() % 6)</code>. So you don&#39;t leave out <code>&quot;feels chilly&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": true, "score": 1, "last_activity_date": 1438802262, "creation_date": 1438802262, "answer_id": 31841016, "question_id": 31840926, "link": "https://stackoverflow.com/questions/31840926/working-with-arrays-in-c-to-procedurally-generate-descriptions-but-its-returni/31841016#31841016", "title": "Working with arrays in C to procedurally generate descriptions, but it&#39;s returning a jumbled mess", "body": "<p><code>RoomDesc1</code> is not a 2D-array, it's an array of <code>const char *</code></p>\n\n<pre><code>const char * RoomDesc1[6] = {\n    \"is a litter filled mess\",\n    \"is strewn with bones\",\n    \"is almost empty\",\n    \"feels like there is a presence\",\n    \"feels quite warm\",\n    \"feels chilly\"\n};\n</code></pre>\n\n<p>likewise for <code>RoomDesc2</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5195379, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002597309763381/picture?type=large", "display_name": "Nirmal Panchal", "link": "https://stackoverflow.com/users/5195379/nirmal-panchal"}, "is_accepted": false, "score": 0, "last_activity_date": 1438803170, "creation_date": 1438803170, "answer_id": 31841298, "question_id": 31840926, "link": "https://stackoverflow.com/questions/31840926/working-with-arrays-in-c-to-procedurally-generate-descriptions-but-its-returni/31841298#31841298", "title": "Working with arrays in C to procedurally generate descriptions, but it&#39;s returning a jumbled mess", "body": "<p>RoomDesc[0]=0; will only clear 0th byte for the array.\nto clear whole array you should use memset function</p>\n"}, {"tags": [], "owner": {"reputation": 2240, "user_id": 3499640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff85dddff0538584dfeb0dfc0946a341?s=128&d=identicon&r=PG&f=1", "display_name": "srdjan.veljkovic", "link": "https://stackoverflow.com/users/3499640/srdjan-veljkovic"}, "is_accepted": false, "score": 1, "last_activity_date": 1438804179, "creation_date": 1438804179, "answer_id": 31841578, "question_id": 31840926, "link": "https://stackoverflow.com/questions/31840926/working-with-arrays-in-c-to-procedurally-generate-descriptions-but-its-returni/31841578#31841578", "title": "Working with arrays in C to procedurally generate descriptions, but it&#39;s returning a jumbled mess", "body": "<p>Short answer, change declarations to this:</p>\n\n<pre><code>char RoomDesc1[6][30] = {\n</code></pre>\n\n<p>...</p>\n\n<pre><code>char RoomDesc2[3][14] = {\n</code></pre>\n\n<p>For a detailed explanation of arrays in C and C++, see: <a href=\"http://www.cplusplus.com/doc/tutorial/arrays\" rel=\"nofollow\">http://www.cplusplus.com/doc/tutorial/arrays</a></p>\n"}, {"tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 0, "last_activity_date": 1438807018, "creation_date": 1438807018, "answer_id": 31842341, "question_id": 31840926, "link": "https://stackoverflow.com/questions/31840926/working-with-arrays-in-c-to-procedurally-generate-descriptions-but-its-returni/31842341#31842341", "title": "Working with arrays in C to procedurally generate descriptions, but it&#39;s returning a jumbled mess", "body": "<p>Avoid using repeated calls to strcat - it keeps having to search for the terminating '\\0' before concatenating, thus getting slower and slower (this is an example of a Shlemiel the Painter algorithm). Instead use snprintf:</p>\n\n<pre><code>int maxSize = 60;\nsnprintf( RoomDesc, maxSize, \"%s on a %s\", RoomDesc1[(rand() % 5], RoomDesc2[(rand() % 3)]);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5195299, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153524953134824/picture?type=large", "display_name": "Steven Reeves", "link": "https://stackoverflow.com/users/5195299/steven-reeves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 31841016, "answer_count": 4, "score": 0, "last_activity_date": 1438807018, "creation_date": 1438801939, "last_edit_date": 1438806968, "question_id": 31840926, "link": "https://stackoverflow.com/questions/31840926/working-with-arrays-in-c-to-procedurally-generate-descriptions-but-its-returni", "title": "Working with arrays in C to procedurally generate descriptions, but it&#39;s returning a jumbled mess", "body": "<p>I'm trying to get a very basic framework in place to procedurally generate room descriptions in a game I want to make. However, my descriptions are all jumbled up. I can't figure out why.</p>\n\n<p>Here's the relevant code:</p>\n\n<p>From main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include \"structs.h\"\n\nchar RoomDesc[60];\n\nint main()\n{\n    RoomGen(RoomDesc);\n    printf(\"This room %s \", RoomDesc);\n\n    return 0;\n}\n\n\nvoid RoomGen(char* RoomDesc) {\nsrand (time(NULL));\nRoomDesc[0]=0; /* Create zero length string,\n                  make sure it's cleared out after any previous uses */\n/* RoomDesc1 describes the overall appearance of a room, and RoomDesc2\n   is if the floor is even, upwards or downwards. \"on a\" is a connector. */\n\n    strcat(RoomDesc, RoomDesc1[(rand() % 5)]);\n    strcat(RoomDesc, \"on a \");\n    strcat(RoomDesc, RoomDesc2[(rand() % 3)]);\n}\n</code></pre>\n\n<p>And this is structs.h:</p>\n\n<pre><code>void RoomGen(char *RoomDesc);\n\nchar RoomDesc1[30][6] = {\n    \"is a litter filled mess\",\n    \"is strewn with bones\",\n    \"is almost empty\",\n    \"feels like there is a presence\",\n    \"feels quite warm\",\n    \"feels chilly\"\n};\n\nchar RoomDesc2[14][3] = {\n    \"upward slope\",\n    \"downward slope\",\n    \"even keel\"\n};\n</code></pre>\n\n<p>The output should look like: \"This room is almost empty on a downward slope.\"</p>\n\n<p>Instead, it looks like: \"This room feels feels on a eve,\" (Or can vary a bit, since the random part seems to be working, but that's what a test run just now got me.)</p>\n\n<p>I'm getting a ton of warnings on the structs.h portion also. I also tried changing the structs.h definitions to look like:</p>\n\n<pre><code>char RoomDesc1[][6] = {\n</code></pre>\n\n<p>But I still get a jumbled description and lots of warnings. \nThe warning I'm specifically getting is \"warning: initializer-string for array of chars is too long [enabled by default]\" which is odd as I counted out the longest string and set it to be that length. Taking the number away and just leaving [] still produces the same warning.</p>\n\n<p>At this point, I'm kinda stuck. I've spent a half hour looking up how arrays should be formatted, and I can't find anything wrong. Can anyone help?</p>\n"}, {"tags": ["c", "linux", "filetree", "nftw"], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1438806753, "creation_date": 1438806753, "answer_id": 31842272, "question_id": 31840886, "link": "https://stackoverflow.com/questions/31840886/skip-subdirectories-when-using-ntfw-in-c/31842272#31842272", "title": "Skip subdirectories when using ntfw in c", "body": "<p>The manual page for <code>nftw()</code> on Linux says (in part):</p>\n\n<blockquote>\n  <p><code>nftw()</code></p>\n  \n  <p>The function <code>nftw()</code> is the same as <code>ftw()</code>, except that it has one additional argument, <code>flags</code>,\n         and calls <code>fn()</code> with one more argument, <code>ftwbuf</code>.</p>\n  \n  <p>This flags argument is formed by ORing zero or more of the following flags:</p>\n  \n  <ul>\n  <li><p><code>FTW_ACTIONRETVAL</code> (since glibc 2.3.3)<br>\n  If  this  glibc-specific  <code>flag</code> is set, then <code>nftw()</code> handles the return value from <code>fn()</code>\n            differently.  <code>fn()</code> should return one of the following values:</p>\n  \n  <ul>\n  <li><p><code>FTW_CONTINUE</code>\n               Instructs <code>nftw()</code> to continue normally.</p></li>\n  <li><p><code>FTW_SKIP_SIBLINGS</code><br>\n               If <code>fn()</code> returns this value,  then  siblings  of  the  current  entry  will  be\n               skipped, and processing continues in the parent.</p></li>\n  <li><p><code>FTW_SKIP_SUBTREE</code><br>\n               If  <code>fn()</code> is called with an entry that is a directory (<code>typeflag</code> is <code>FTW_D</code>), this\n               return value will prevent objects within that directory from being  passed  as\n               arguments  to  <code>fn()</code>.  <code>nftw()</code> continues processing with the next sibling of the\n               directory.</p></li>\n  <li><p><code>FTW_STOP</code><br>\n               Causes <code>nftw()</code> to return immediately with the return value FTW_STOP.</p></li>\n  <li><p>Other return values could be associated with new actions in the future;  <code>fn()</code>  should\n        not return values other than those listed above.</p></li>\n  </ul>\n  \n  <p>The  feature test macro <code>_GNU_SOURCE</code> must be defined in order to obtain the definition\n            of <code>FTW_ACTIONRETVAL</code> from <code>&lt;ftw.h&gt;</code>.</p></li>\n  </ul>\n</blockquote>\n\n<p>The last paragraph is the crucial one for you to note.</p>\n"}], "owner": {"reputation": 1191, "user_id": 2713198, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zOKTu.png?s=128&g=1", "display_name": "bytestorm", "link": "https://stackoverflow.com/users/2713198/bytestorm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 0, "accepted_answer_id": 31842272, "answer_count": 1, "score": 3, "last_activity_date": 1438806753, "creation_date": 1438801741, "question_id": 31840886, "link": "https://stackoverflow.com/questions/31840886/skip-subdirectories-when-using-ntfw-in-c", "title": "Skip subdirectories when using ntfw in c", "body": "<p>I am trying to get all the files and directories in the current or mentioned folder using <a href=\"http://linux.die.net/man/3/nftw\" rel=\"nofollow\">nftw</a>. But how do I instruct the function not to go further in any subdirectory? What is the purpose of the flag <code>FTW_SKIP_SUBTREE</code>? Also what is the header file for this constant. </p>\n\n<pre><code>#include &lt;ftw.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdint.h&gt;\n\nstatic int\ndisplay_info(const char *fpath, const struct stat *sb,\n             int tflag, struct FTW *ftwbuf)\n{\n\n    printf(\"%-3s %2d %7jd   %-40s %d %s\\n\",\n        (tflag == FTW_D) ?   \"d\"   : (tflag == FTW_DNR) ? \"dnr\" :\n        (tflag == FTW_DP) ?  \"dp\"  : (tflag == FTW_F) ?   \"f\" :\n        (tflag == FTW_NS) ?  \"ns\"  : (tflag == FTW_SL) ?  \"sl\" :\n        (tflag == FTW_SLN) ? \"sln\" : \"???\",\n        ftwbuf-&gt;level, (intmax_t) sb-&gt;st_size,\n        fpath, ftwbuf-&gt;base, fpath + ftwbuf-&gt;base);\n    return 0;           /* To tell nftw() to continue */\n}\n\nint\nmain(int argc, char *argv[])\n{\n    int flags = 0;\n\n    if (argc &gt; 2 &amp;&amp; strchr(argv[2], 'd') != NULL)\n      flags |= FTW_DEPTH;\n    if (argc &gt; 2 &amp;&amp; strchr(argv[2], 'p') != NULL)\n      flags |= FTW_PHYS;\n    if (argc &gt; 2 &amp;&amp; strchr(argv[2], 's') != NULL)\n      flags |= FTW_SKIP_SUBTREE;\n\n    if (nftw((argc &lt; 2) ? \".\" : argv[1], display_info, 20, flags)\n            == -1) {\n        perror(\"nftw\");\n        exit(EXIT_FAILURE);\n    }\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>When I try to compile I get this message </p>\n\n<pre><code>test.c:33:16: error: \u2018FTW_SKIP_SUBTREE\u2019 undeclared (first use in this function)\n       flags |= FTW_SKIP_SUBTREE;\n</code></pre>\n"}, {"tags": ["java", "c", "sockets", "connection", "ip"], "comments": [{"owner": {"reputation": 28630, "user_id": 1291492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f914cd02166793195d9d950503f8f739?s=128&d=identicon&r=PG", "display_name": "ControlAltDel", "link": "https://stackoverflow.com/users/1291492/controlaltdel"}, "edited": false, "score": 0, "creation_date": 1438801386, "post_id": 31840589, "comment_id": 51603025, "body": "Seems like somehow your Socket is closing, and my guess that this might be that socket is a method declared variable (as opposed to class/object variable) and that when you leave your method, the socket is garbage collected and closed"}, {"owner": {"reputation": 796, "user_id": 1900629, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fLlpy.jpg?s=128&g=1", "display_name": "Daniel Jipa", "link": "https://stackoverflow.com/users/1900629/daniel-jipa"}, "edited": false, "score": 0, "creation_date": 1438801953, "post_id": 31840589, "comment_id": 51603373, "body": "maybe flushing will help"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 796, "user_id": 1900629, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fLlpy.jpg?s=128&g=1", "display_name": "Daniel Jipa", "link": "https://stackoverflow.com/users/1900629/daniel-jipa"}, "edited": false, "score": 0, "creation_date": 1438814582, "post_id": 31840589, "comment_id": 51609537, "body": "There is nothing in this Java code that would cause the connection to end. However possibly you are closing the output stream, which does close the socket and termate the connection. @DanielJipa Flushing this stream will do precisely nothing."}, {"owner": {"reputation": 7332, "user_id": 204143, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8170ad848a91c4cc534755d37befb6cc?s=128&d=identicon&r=PG", "display_name": "Steve Emmerson", "link": "https://stackoverflow.com/users/204143/steve-emmerson"}, "edited": false, "score": 0, "creation_date": 1438814952, "post_id": 31840589, "comment_id": 51609665, "body": "More code and exposition must be posted. Where is it determined that the socket is closed? What is <code>toSocket</code> and where did it come from? Does the <code>out.write(buf)</code> throw an exception? Etc."}], "owner": {"reputation": 29, "user_id": 5195337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b894af1a22cac40f479760bf0c82c6be?s=128&d=identicon&r=PG&f=1", "display_name": "LRose", "link": "https://stackoverflow.com/users/5195337/lrose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1438802668, "creation_date": 1438800804, "question_id": 31840589, "link": "https://stackoverflow.com/questions/31840589/socket-connection-in-java", "title": "Socket connection in Java", "body": "<p>I'm migrating a program, from C to Java. This program have a socket connection, that says something like this:</p>\n\n<pre><code>socket( AF_INET, SOCK_STREAM, 0 );\n\nstruct sockaddr_in  sa ;\nsa.sin_addr.s_addr = hostAddr ;\nsa.sin_family      = AF_INET ;\nsa.sin_port        = htons( ( unsigned short ) atol(obj-&gt;Port) ) ;\n\nconnect( obj-&gt;Socket, ( struct sockaddr * ) &amp;sa, sizeof( sa ) ) ;\n</code></pre>\n\n<p>However, when I try to connect to the server in Java, the connection doesn't work: the connection end in the moment that I send my string with data.\nI've searching and asking, and the only difference that I can see, it's that in Java, I don't use a family (AF_INET), I only use the ip and port.</p>\n\n<p>This is my Java code:</p>\n\n<pre><code>String ip = \"X.X.X.X\"; \nInteger port = \"yyy\";\nSocket socket = new Socket(ip, port);\n\n...\n\nOutputStream out = socket.getOutputStream();\nbyte buf[] = toSocket.getBytes();\nout.write(buf);\n</code></pre>\n\n<p>Can somebody help me?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1438800450, "post_id": 31840356, "comment_id": 51602446, "body": "If you don&#39;t have to print the numbers in the original order, you can just sort the array before doing your check."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1438800751, "post_id": 31840356, "comment_id": 51602656, "body": "doesn&#39;t this code cause you a segmentation fault. If not, you are a lucky one."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1438800819, "post_id": 31840356, "comment_id": 51602700, "body": "and your question is not specified properly. Can you give some cases of I/O, and can a number (that you are calling duplicate) can be repeated more than twice in your array, can they be in any order etc"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1438800966, "post_id": 31840356, "comment_id": 51602775, "body": "If the numbers are all between 10 and 100 (not a lot of possible values) you could  use another array to indicate which values have been found already (eg. <code>found[18]</code> could be 0 if 18 hasn&#39;t been found or 1 if it has)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 1, "creation_date": 1438801129, "post_id": 31840356, "comment_id": 51602871, "body": "@vish4071: Why <i>would</i> this segfault?"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1438801325, "post_id": 31840356, "comment_id": 51602993, "body": "I don&#39;t understand the question. You should give an example."}, {"owner": {"reputation": 1, "user_id": 4461876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v_CNbUJn5rc/AAAAAAAAAAI/AAAAAAAADUs/1hasb2XnYqE/photo.jpg?sz=128", "display_name": "megaloopy", "link": "https://stackoverflow.com/users/4461876/megaloopy"}, "edited": false, "score": 0, "creation_date": 1438801464, "post_id": 31840356, "comment_id": 51603071, "body": "Here&#39;s the problem:  Use a single-subscripted array to solve the following problem. Read in 20 numbers, each of which is between 10 and 100, inclusive.  As each number is read, print it only if it&#39;s not a duplicate of a number already read. Provide for the worst case in which all 20 numbers are different. Use the smallest possible array to solve this problem."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 1, "creation_date": 1438801524, "post_id": 31840356, "comment_id": 51603121, "body": "actually your line of code : if (af[c] != af[c+1]) , goes out of bounds at c=AS-1, as c+1 = AS and af[AS] is not defined. Anyway, you should give sample I/O atleast, or solution given by Dmitri should work too.  See &quot;HASHING&quot;"}, {"owner": {"reputation": 1, "user_id": 4461876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v_CNbUJn5rc/AAAAAAAAAAI/AAAAAAAADUs/1hasb2XnYqE/photo.jpg?sz=128", "display_name": "megaloopy", "link": "https://stackoverflow.com/users/4461876/megaloopy"}, "reply_to_user": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1438804244, "post_id": 31840356, "comment_id": 51604673, "body": "@vish4071 tnx but I don&#39;t see what you mean by not defined, would you mind sharing how you&#39;d write this or how you would do it differently please? Tnx"}, {"owner": {"reputation": 1, "user_id": 4461876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v_CNbUJn5rc/AAAAAAAAAAI/AAAAAAAADUs/1hasb2XnYqE/photo.jpg?sz=128", "display_name": "megaloopy", "link": "https://stackoverflow.com/users/4461876/megaloopy"}, "edited": false, "score": 0, "creation_date": 1438804527, "post_id": 31840356, "comment_id": 51604832, "body": "Tnx y&#39;all very much for your responses back to the drawing board and figure it out."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1438845604, "post_id": 31840356, "comment_id": 51618995, "body": "By not defined, I meant: &quot;When you define an array of size (say)20, like int a[20], then it has index values ranging 0-19, and you can NOT access a[20] which goes out of bounds.&quot; If you ever do programming on online judges, corner code handling such as this is important or it definitely gives segfault."}, {"owner": {"reputation": 1, "user_id": 4461876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v_CNbUJn5rc/AAAAAAAAAAI/AAAAAAAADUs/1hasb2XnYqE/photo.jpg?sz=128", "display_name": "megaloopy", "link": "https://stackoverflow.com/users/4461876/megaloopy"}, "reply_to_user": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1438865766, "post_id": 31840356, "comment_id": 51632059, "body": "@vish4071 Aaaahhhh  tnx a lot, so my AS constant should be 19 correct? cause 20 numbers would be stored in subsets 0 -19, tnx again Vish."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 0, "creation_date": 1438926260, "post_id": 31840356, "comment_id": 51659344, "body": "nope...you are not getting the point. Change AS to 19, then read my above comment replacing all &#39;20&#39; with &#39;19&#39;. You can rectify this using (c &lt; fAS - 1) inside for loop and handling case for af[19]"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4461876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v_CNbUJn5rc/AAAAAAAAAAI/AAAAAAAADUs/1hasb2XnYqE/photo.jpg?sz=128", "display_name": "megaloopy", "link": "https://stackoverflow.com/users/4461876/megaloopy"}, "edited": false, "score": 0, "creation_date": 1438804561, "post_id": 31840766, "comment_id": 51604855, "body": "duh, can&#39;t believe I didn&#39;t think of this, now back to the drawing board to figure out, lol Tnx a lot Nirmal"}], "tags": [], "owner": {"reputation": 11, "user_id": 5195379, "user_type": "registered", "profile_image": "https://graph.facebook.com/1002597309763381/picture?type=large", "display_name": "Nirmal Panchal", "link": "https://stackoverflow.com/users/5195379/nirmal-panchal"}, "is_accepted": false, "score": 0, "last_activity_date": 1438802058, "last_edit_date": 1438802058, "creation_date": 1438801345, "answer_id": 31840766, "question_id": 31840356, "link": "https://stackoverflow.com/questions/31840356/printing-non-duplicate-in-c-array/31840766#31840766", "title": "Printing non duplicate in C array", "body": "<p>You should first define an Array which can save as many variables as you want ..\nLets say you are comparing for 10-100 which means 91 possible different digits.</p>\n\n<p>so , define array with the size of 91. and then do the scanning in for loop for 91 times to find out if you have that variable entered previously. If not then save it and display it ,else discard it.</p>\n"}], "owner": {"reputation": 1, "user_id": 4461876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-v_CNbUJn5rc/AAAAAAAAAAI/AAAAAAAADUs/1hasb2XnYqE/photo.jpg?sz=128", "display_name": "megaloopy", "link": "https://stackoverflow.com/users/4461876/megaloopy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1998, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438802058, "creation_date": 1438800061, "last_edit_date": 1438801790, "question_id": 31840356, "link": "https://stackoverflow.com/questions/31840356/printing-non-duplicate-in-c-array", "title": "Printing non duplicate in C array", "body": "<p>I was working on a program for my intro to C class (xtra credit assignment) and can't figure out how to discard duplicates numbers on an array. The problem asks to only print non duplicates; so I able to print the first number, compare the following and print if different, I discard the next if a duplicate, but the thing is I've only figured out how to compare the one number it following one, I figured I could do another for loop inside the for loop, but I'm getting super confused and just can't figure it out. I've already submitted my code last week, I've just been working on this trying to figure it out for myself so any help/guidance would be greatly appreciated.</p>\n\n<p><em>\"EDIT: Here's the problem: Use a single-subscripted array to solve the following problem. Read in 20 numbers, each of which is between 10 and 100, inclusive. As each number is read, print it only if it's not a duplicate of a number already read. Provide for the worst case in which all 20 numbers are different. Use the smallest possible array to solve this problem\"</em></p>\n\n<p>Thanks in advance, and any advice on how I'm writing my program would also be appreciated as I'm a total noob, and trying to be a good programmer with as little bad habits as possible.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define AS 20\n\nvoid findDuplicate (int af[], int fAS);\n\nint main(){\n\n    int a[AS], i , j, k;\n    int last = 0;\n\n    printf(\"Enter %d numbers between 10 and 100:\\n\", AS);\n\n    for (i = 0; i &lt; AS; i++){\n        scanf(\"%d\",&amp;a[i] );\n        if (a[i] &gt;= 10 &amp;&amp; a[i] &lt;= 100 ){\n            continue;\n        } else {\n            printf(\"You must enter values between 10 - 100\\n\");\n            i = i -1;\n        }   \n    }\n\n    findDuplicate(a, AS);\n\n    system (\"pause\");\n    return 0;\n}\n\n\n\nvoid findDuplicate (int af[], int fAS){\n    int c;\n\n    printf(\"You entered \");\n\n    for (c=0; c &lt; fAS; c++){\n            if (af[c] != af[c+1]){\n                printf(\"%d \", af[c]);\n            }\n            continue;\n        }\n\n    printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "structure", "padding", "greenhills"], "comments": [{"owner": {"reputation": 9932, "user_id": 1839777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a382084bb1495af216e9a847c727d92e?s=128&d=identicon&r=PG", "display_name": "vonbrand", "link": "https://stackoverflow.com/users/1839777/vonbrand"}, "edited": false, "score": 0, "creation_date": 1438800077, "post_id": 31840261, "comment_id": 51602197, "body": "What the compiler does with padding is strictly its own bussiness, relying on it one way ot the oher is calling for undefined behaviour. Some compilers (e.g. GCC) have switches or extensions to &quot;pack&quot; structures, or you have to fall back on packing/unpacking from an array of characters by hand (and again rely on (mildly) undefined behaviour)."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1438800735, "post_id": 31840261, "comment_id": 51602647, "body": "You have a copy-paste-error: You assign to <code>data_to_send.a[2].x&#47;y&#47;z</code> twice, and never to <code>data_to_send.a[3].x&#47;y&#47;z</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1438800855, "post_id": 31840261, "comment_id": 51602723, "body": "Have you used any compiler directives to futz with the padding on the structures? When setting test data, you should set different values in different fields so you can spot where the trouble occurs, too."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1438801013, "post_id": 31840261, "comment_id": 51602803, "body": "It isn&#39;t really clear to me what you&#39;re asking.  Are you trying to find out why functions like <code>fread()</code> and <code>fwrite()</code> include the padding bytes in the data read from or written to the file stream?"}, {"owner": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1438801032, "post_id": 31840261, "comment_id": 51602814, "body": "@ Jonathan: Thanks for your question. No, as my eager is to study that strange behavior of the compiler more than solving a problem by a workaround !   @EOF: Yes, you are right ... I will edit it"}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438801327, "post_id": 31840648, "comment_id": 51602995, "body": "Thanks for your answer, but I want to know what is the root cause of that behavior ?!"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438801479, "post_id": 31840648, "comment_id": 51603077, "body": "Root cause is included in my answer, but maybe obscured...  The root cause is: <b><i>Even if you do not use explicit padding, the data is stored such that these boundaries are observed</i></b>.  See added link for more information."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1438801569, "post_id": 31840648, "comment_id": 51603154, "body": "I would put it that way: <code>getter</code> and <code>setter</code> have two <b>different</b> <code>pragma pack()</code> values in effect"}, {"owner": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438802605, "post_id": 31840648, "comment_id": 51603732, "body": "I don&#39;t use #pragma pack (n)"}, {"owner": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438803002, "post_id": 31840648, "comment_id": 51603965, "body": "@ryyker: Thanks for your valuable edits. But I am still wondering why the compiler didn&#39;t manage to get the right data ? Should I pack every structure ?!!!!"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438803522, "post_id": 31840648, "comment_id": 51604231, "body": "@ArmiaWagdy -  It is important, when using a struct such as you are, to pay close attention to the design of your struct and how its data is aligned.  I would suggest explicit alignment of boundaries (<code>pragma pack(n)</code>) would help you.  I would not think of using this approach as work around, rather as design constraint..  As long as data is stored in digital chunks, there will be alignment issues to consider when using collections of data types in a complex data type, such as a struct."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438804703, "post_id": 31840648, "comment_id": 51604923, "body": "@ArmiaWagdy - in your diagram, what do each of the blocks represent - a word (4 bytes)?, or just two bytes?  It appears that each contain 2 bytes.  How are you displaying that memory?"}, {"owner": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438808761, "post_id": 31840648, "comment_id": 51607151, "body": "@Each contain one byte -&gt; Hex representation"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 2, "last_activity_date": 1438803117, "last_edit_date": 1438803117, "creation_date": 1438800974, "answer_id": 31840648, "question_id": 31840261, "link": "https://stackoverflow.com/questions/31840261/the-compiler-takes-the-padding-bytes-of-a-structure-into-consideration-while-rea/31840648#31840648", "title": "The compiler takes the padding bytes of a structure into consideration while reading it", "body": "<p><em>How could I inform the compiler that you should skip the padding byte while reading the elements of structure ?</em></p>\n\n<p>Short answer: <em>You cannot</em>.<br>\nThe compiler will <strong><em>not dis-regard contents</em></strong> contained in your struct.  However you <em>can control</em> how it will treat the contents in your struct.</p>\n\n<p><em>I am curious to know why the compiler behaves like that ?</em>  </p>\n\n<p>Short answer:  <em>data alignment</em>.<br>\nTwo issues to consider: <em>data alignment</em> boundaries and <em>data structure</em> padding. You have some control over each:\n<strong><em>Data alignment</em></strong> Is the reason your compiler sees what it sees.  Data alignment means putting the data at a memory address equal to some multiple of the word size (4 bytes for a 32 bit environment) Even if you do not use explicit padding, the data is stored such that these boundaries are observed, and the size of the struct will indicate padding in the total byte space used.  </p>\n\n<p><strong><em>Structure padding</em></strong> - meaningless bytes placed into a structure to help align the size to be a multiple of word size.  You have this in your example code.</p>\n\n<p>You can use <strong><em><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Structure-Packing-Pragmas.html\" rel=\"nofollow\">pragma macros</a></em></strong> that cause compiler to pre-process (resolve before compile) packing of a struct a certain way:  example #pragma pack(n) simply sets the new alignment.  Or, #pragma pack() sets the alignment to the one that was in effect when compilation started.   </p>\n\n<p><strong><em><a href=\"https://www.google.com/#q=plural+of+matrix\" rel=\"nofollow\">Example</a></em></strong>:  </p>\n\n<pre><code>#pragma pack(push)  /* push current alignment to stack */\n#pragma pack(1)     /* set alignment to 1 byte boundary */\n\nstruct MyPackedData\n{\n    char Data1;\n    long Data2;\n    char Data3;\n};\n\n#pragma pack(pop)   /* restore original alignment from stack */   \n</code></pre>\n\n<p><strong><em>Note:</em></strong> \nThe unit of n for <strong><em>pack(n)</em></strong> is <em>byte</em>.  Values for n are compiler specific, for MSVC for example are typically 1, 2, 4, 8, and 16. </p>\n\n<p><strong><em>Question:</em></strong>  If you are using prama pack macros, do they use consistent pack values between the getter()/setter() functions?  (credit to @alain)  </p>\n\n<p>But again, this will not cause the compiler to disregard the contents of your struct, only process it a different way.</p>\n\n<p>See information <strong><em><a href=\"http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/\" rel=\"nofollow\">here</a></em></strong> and <strong><em><a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow\">here</a></em></strong> for more information on root cause of your observations.</p>\n"}, {"comments": [{"owner": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438808898, "post_id": 31841863, "comment_id": 51607232, "body": "Thanks for clarifying your comment ... But how could the casting make a problem ?"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "edited": false, "score": 0, "creation_date": 1438809682, "post_id": 31841863, "comment_id": 51607607, "body": "It&#39;s just that casting is dangerous. Casts like <code>short</code> to <code>int</code> are ok, but casting structs often results in undefined behaviour."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 2, "last_activity_date": 1438805661, "last_edit_date": 1438805661, "creation_date": 1438805117, "answer_id": 31841863, "question_id": 31840261, "link": "https://stackoverflow.com/questions/31840261/the-compiler-takes-the-padding-bytes-of-a-structure-into-consideration-while-rea/31841863#31841863", "title": "The compiler takes the padding bytes of a structure into consideration while reading it", "body": "<p>The longer version of my comment to @ryykers good answer:</p>\n\n<p>The code you have shown in your question is perfectly valid, there is absolutely no reason why you would get the wrong values when reading the struct members in <code>getter</code>, provided</p>\n\n<ul>\n<li>there is no casting</li>\n<li>the same packing rules are in effect</li>\n</ul>\n\n<p>Otherwise the compiler you are using would be <strong><em>severly</em></strong> broken.</p>\n\n<p>The way to set the packing rules differ from compiler to compiler, they are not standardized, so maybe it's not named <code>#pragma pack</code>.</p>\n\n<p>\"Normally\", there is no reason to interfere with structure packing, but one reason is sending data over a network or to a file. When the structs are packed with no padding at all, you can cast them to a <code>void *</code> or <code>char *</code> and pass the structs directly to a \"send\" function, for example:</p>\n\n<pre><code>send((void *)&amp;data_to_send, sizeof(data_to_send));\n</code></pre>\n\n<p>The variable name <code>data_to_send</code> in your question is a hint that this could be what happens in this code. I'm not saying this is good practice, but it's quite common, because you don't have to write serializing code.</p>\n"}], "owner": {"reputation": 537, "user_id": 2670466, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/539212518/picture?type=large", "display_name": "Armia Wagdy", "link": "https://stackoverflow.com/users/2670466/armia-wagdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438805661, "creation_date": 1438799760, "last_edit_date": 1438801169, "question_id": 31840261, "link": "https://stackoverflow.com/questions/31840261/the-compiler-takes-the-padding-bytes-of-a-structure-into-consideration-while-rea", "title": "The compiler takes the padding bytes of a structure into consideration while reading it", "body": "<p>My code has a structure type-defined as follows:</p>\n\n<pre><code>typedef struct\n{\n   Structure_2 a[4];\n    UCHAR b;\n    UCHAR c;\n}Structure_1;\n</code></pre>\n\n<p>where the definition of Structure_2 is as follows:</p>\n\n<pre><code>typedef struct\n{\n    ULONG  x;\n    USHORT y;\n    UCHAR  z;\n}Structure_2;\n</code></pre>\n\n<p>There are also two functions in the code. The first one (named setter) declares a structure of type \u201cStructure_1\u201d and fills it with the data:</p>\n\n<pre><code>void setter (void)\n{\n    Structure_1        data_to_send ;\n    data_to_send.a[0].x = 0x12345678;\n    data_to_send.a[0].y = 0x1234;\n    data_to_send.a[0].z = 0x12; \n    data_to_send.a[1].x = 0x12345678;\n    data_to_send.a[1].y = 0x1234;\n    data_to_send.a[1].z = 0x12; \n    data_to_send.a[2].x = 0x12345678;\n    data_to_send.a[2].y = 0x1234;\n    data_to_send.a[2].z = 0x12; \n    data_to_send.a[3].x = 0x12345678;\n    data_to_send.a[3].y = 0xAABB;\n    data_to_send.a[3].z = 0x12; \n    data_to_send.b =0;\n    data_to_send.c = 0;\n    getter(&amp;data_to_send);\n}\n</code></pre>\n\n<p>The compiler saves data_to_send in memory like that:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fpWkv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fpWkv.png\" alt=\"enter image description here\"></a>     </p>\n\n<p>The second one named getter:</p>\n\n<pre><code>void getter (Structure_1 * ptr_to_data)\n{\n    UCHAR R_1 = ptr_to_data -&gt; b;\n    UCHAR R_2 = ptr_to_data -&gt; c;\n    /* The remaining bytes are received */\n}\n</code></pre>\n\n<p>I expect that R_1 will have the value \u201c00\u201d, and R_2 will have the value \u201c00\u201d.</p>\n\n<p>But what happen is the compiler translates the following two lines like that:</p>\n\n<pre><code> /* Get the data at the address  ptr_to_data -&gt; b,\n    which equals the start address of structure + 28 which contains the        \n    value \u201cAA\u201d, and hence R_1 will have \u201cAA\u201d */\n\nUCHAR R_1 = ptr_to_data -&gt; b;  \n\n/* Get the data at the address  ptr_to_data -&gt; c, \n   which equals the start *address of structure + 29 which contains the   \n   value \u201cBB\u201d, and hence R_2 will *have \u201cBB\u201d */\nUCHAR R_2 = ptr_to_data -&gt; c;  \n</code></pre>\n\n<p>The compiler adds padding b/yte while saving the structure in stack, However when it starts reading it, it forget what it did (and includes the padding bytes in reading).</p>\n\n<p>How could I inform the compiler that you should skip the padding byte while reading the elements of structure ?</p>\n\n<p>I don't want a work around to solve this problem, I am curious to know why the compiler behaves like that ?</p>\n\n<p>My compiler is GreenHills and My target is 32-bit</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2854, "user_id": 2392087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cYjK.jpg?s=128&g=1", "display_name": "Leland Barton", "link": "https://stackoverflow.com/users/2392087/leland-barton"}, "edited": false, "score": 2, "creation_date": 1438798339, "post_id": 31839750, "comment_id": 51601175, "body": "You should edit your question to add the code. That comment is unreadable"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 2349270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb395fad789c94049fb5c433d4b3b26e?s=128&d=identicon&r=PG", "display_name": "user2349270", "link": "https://stackoverflow.com/users/2349270/user2349270"}, "is_accepted": false, "score": 0, "last_activity_date": 1438848332, "last_edit_date": 1438848332, "creation_date": 1438799123, "answer_id": 31840079, "question_id": 31839750, "link": "https://stackoverflow.com/questions/31839750/c-languages-word-weight-distinct/31840079#31840079", "title": "C languages word weight distinct", "body": "<p>ASCII characters are simply sequential 8 bit values i.e. 'a'=97, 'b'=98, 'A'=65, 'B'=66.</p>\n\n<p>Therefore, to get the 'weight' of a letter, you simply compute your lowercase char minus 'a'+1 or your uppercase char minus 'A' + 1.</p>\n\n<p>So in pseudocode (because I'm not going to write your homework for you:</p>\n\n<pre><code>function char_weight(c):\n    weight = c - 'A'\n    if c greater than or equal to 'a':\n        weight = weight + 'a' - 'A'\n    return weight\n\nfunction word_weight(word):\n   add char_weight(each_char) to total\n   return total \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 5178967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/H3q2X.jpg?s=128&g=1", "display_name": "scummy", "link": "https://stackoverflow.com/users/5178967/scummy"}, "is_accepted": false, "score": 0, "last_activity_date": 1438799803, "last_edit_date": 1438799803, "creation_date": 1438799133, "answer_id": 31840080, "question_id": 31839750, "link": "https://stackoverflow.com/questions/31839750/c-languages-word-weight-distinct/31840080#31840080", "title": "C languages word weight distinct", "body": "<p>Assuming that the words are separated by one space, the code would look something like this :</p>\n\n<pre><code>c=fgetc(stdin);\nwhile(c!=EOF) {\n    s=0;\n    while(c!=' ') { //while we are in a word\n           if(c&gt;='a' &amp;&amp; c&lt;='z')\n               s+=(c-'a'+1);\n           else\n               s+=(c-'A'+1);\n           c=fgetc(stdin);\n    }\n    printf(\"%d\\n\", s);\n}\n</code></pre>\n\n<p>This <code>s+=(c-'a'+1);</code> is possible due to ASCII code. In ASCII  (American Standard Code for Information Interchange), every character has a value : <em>'a' = 97</em>. This means that you don't have to write <code>s+=(c-97+1)</code> (which works too), but you just don't have to remember the ASCII code of any character.</p>\n\n<p>To convince yourself, write something like :</p>\n\n<pre><code>if('b' == 98)\n    printf(\"They are equal);\nelse\n    printf(\"They aren't equal\");\n</code></pre>\n\n<p>To proof that you can add a number to a character :</p>\n\n<pre><code>char ch;\nch='a';\nch=ch+1;\nif(c == 'b')\n  printf( \"you can add a number to a character\" );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4904994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0607f2fba3aafa78bbf98bf987425cfc?s=128&d=identicon&r=PG&f=1", "display_name": "software", "link": "https://stackoverflow.com/users/4904994/software"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1438863340, "creation_date": 1438797997, "last_edit_date": 1438863340, "question_id": 31839750, "link": "https://stackoverflow.com/questions/31839750/c-languages-word-weight-distinct", "title": "C languages word weight distinct", "body": "<p>In this problem you should read a set of words. Each word is composed only by letters in the range a-z and A-Z. Each letter has a specific value, the letter a is worth 1, letter b is worth 2 and so on until letter z that is worth 26.</p>\n\n<p>Write a program to compute the weight of the word for each test case.\nThe weight of the word is computed by adding the values of the words distinct letters.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \nint wordDist(char letter){ \n    int count; \n    char str [200]; \n    int i; \n    char letters [26] = {'a','b','c','d','e','f','g','h','i',\n                    'j','k','l','m','n','o','p','q','r','s','t'\u200c\u200b,\n                    'u','v', 'w','x','y','z'}; \n    for(i=0; i&lt;26; i++){ \n        if(letter = letters[i]) \n            return i+1; \n    }\n} \nint main() {\n    int T, n, t; \n    scanf(\"%d\", &amp;T); \n    for(t = 1; t &lt;= T; t++){ //count = 0;   \n        //printf(\"%d\\n\",wordDist(str));\n    } return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "bison", "flex-lexer"], "answers": [{"comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1534170150, "post_id": 31841036, "comment_id": 90603208, "body": "According to a comment by another user, <i>yy_create_buffer function requires three arguments, but two arguments are given</i> ... so it seems your answer is wrong, or incomplete?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1534171410, "post_id": 31841036, "comment_id": 90604055, "body": "@ghostcat: the <code>yy_create_buffer</code> function is documented in the link in the answer, so it is easy to verify that the call is correct. If you request a reentrant scanner, then all APIs (including <code>yypush_buffer_state</code> and <code>yypop_buffer_state</code>) take an extra argument. However, nothing in this question indicates that a non-standard scanner is being requested."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1510942478, "last_edit_date": 1510942478, "creation_date": 1438802330, "answer_id": 31841036, "question_id": 31839746, "link": "https://stackoverflow.com/questions/31839746/loading-external-files-flex-bison-yyin/31841036#31841036", "title": "loading external files flex bison - yyin?", "body": "<p>Input handling is done by flex, so you need to read the <a href=\"http://westes.github.io/flex/manual/Multiple-Input-Buffers.html\" rel=\"nofollow noreferrer\">flex manual</a> for details.</p>\n\n<p>The section on multiple input buffers (linked above) has example code for handling \"include\"-like constructs. In fact, there are two sample implementations; one using the built-in buffer stack (recommended) and the other with an explicit buffer stack.</p>\n\n<p>Really, it is not very complicated. To start reading a new file, all you need to do is this:</p>\n\n<pre><code>yyin = fopen(filename, \"r\");\nif ( !yyin ) /* Handle the error */\nyypush_buffer_state(yy_create_buffer( yyin, YY_BUF_SIZE ));\n</code></pre>\n\n<p>You pop the buffer state in your EOF rule:</p>\n\n<pre><code>&lt;&lt;EOF&gt;&gt; { yypop_buffer_state();\n          /* Make sure we stop if the EOF is the original input. */\n          if (!YY_CURRENT_BUFFER) { yyterminate(); }\n        }\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3352800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff4b03151faedcdf2252c822a4ac2d4?s=128&d=identicon&r=PG&f=1", "display_name": "two2fly", "link": "https://stackoverflow.com/users/3352800/two2fly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3176, "favorite_count": 1, "accepted_answer_id": 31841036, "answer_count": 1, "score": 0, "last_activity_date": 1534167168, "creation_date": 1438797964, "last_edit_date": 1438811053, "question_id": 31839746, "link": "https://stackoverflow.com/questions/31839746/loading-external-files-flex-bison-yyin", "title": "loading external files flex bison - yyin?", "body": "<p>I am writing a basic language in flex + bison for my own personal research / to run simple scripts for fun. </p>\n\n<p>It takes user input via the command line, parses it, and executes the desired result. I would like to add functionality load files.</p>\n\n<p>for example, when the \"load file 'somefile.src'\" the file is loaded and automatically parsed, then the parser switches back to waiting for command line inputs.  </p>\n\n<p>I haven't been able to make sense of the documentation and am pretty lost. It doesn't help that I am new to flex, bison, and C as a whole. </p>\n\n<p>I am following this pdf: <a href=\"http://epaperpress.com/lexandyacc/\" rel=\"nofollow\">http://epaperpress.com/lexandyacc/</a> (using the complex calculator as a skeleton and adding functionality on top of it) as well as looking through bison documentation <a href=\"http://www.gnu.org/software/bison/manual/bison.html\" rel=\"nofollow\">http://www.gnu.org/software/bison/manual/bison.html</a>.</p>\n\n<p>Any advice would be appreciated.</p>\n"}, {"tags": ["mysql", "sql", "c", "netbeans", "compiler-errors"], "comments": [{"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1438797676, "post_id": 31839504, "comment_id": 51600783, "body": "Do you have function prototypes of <code>connUploadDataToServerFromMain</code> and <code>uploadToServer</code> in both your <code>main.c</code> file and somewhere else (a header file)? That could cause this error."}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "reply_to_user": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1438797911, "post_id": 31839504, "comment_id": 51600935, "body": "@tonysdg, nope, just in the main.c file. I think I have actually figured this one out. looking at the command <code>-o</code> will open the file, so it looks to be opening <code>main.c</code> twice, so I removed everything except <code>lmysqlclient</code> and it builds. I think this is an error on my part with the <code>-o</code> switch."}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "is_accepted": false, "score": 0, "last_activity_date": 1438798021, "creation_date": 1438798021, "answer_id": 31839757, "question_id": 31839504, "link": "https://stackoverflow.com/questions/31839504/multiple-definition-error/31839757#31839757", "title": "Multiple definition error", "body": "<p>This is an error on my part. </p>\n\n<p>Looking at the compilation line, the switch <code>-o</code> will open the file, which I specify is <code>main.c</code>, which is already to be opened, thus calling each function twice.</p>\n\n<p>Removing this line and changing it for <code>-lmysqlclient</code> alone fixes this issue should anyone else use the full command as recommended elsewhere.</p>\n"}], "owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438798021, "creation_date": 1438797172, "question_id": 31839504, "link": "https://stackoverflow.com/questions/31839504/multiple-definition-error", "title": "Multiple definition error", "body": "<p>I am currently having issues with the SQL Library for C and the linking process.</p>\n\n<p>I am not <code>#include</code>ing any .c files, and I do not have more than one function definition for the function names throwing the error. I am only including:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;gps.h&gt;\n#include &lt;mysql/mysql.h&gt;\n</code></pre>\n\n<p>According to the internet, I need to add this line to compile the SQL Librarys to the <code>Compilation Line</code>:</p>\n\n<pre><code>-o gpsComplete main.c -L/usr/include/mysql/ -lmysqlclient -lz\n</code></pre>\n\n<p>This is what shows in the output after I build it:</p>\n\n<pre><code>/tmp/ccLqcQ6E.o: In function `main':\nmain.c:(.text+0x0): multiple definition of `main'\nbuild/Debug/GNU-Linux-x86/main.o:/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/main.c:17: first defined here\n/tmp/ccLqcQ6E.o: In function `connUploadDataToServerFromMain':\n\nmain.c:(.text+0x164): multiple definition of `connUploadDataToServerFromMain'\nbuild/Debug/GNU-Linux-x86/main.o:/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/main.c:65: first defined here\n\n/tmp/ccLqcQ6E.o: In function `uploadToServer':\nmain.c:(.text+0x194): multiple definition of `uploadToServer'\nbuild/Debug/GNU-Linux-x86/main.o:/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/main.c:76: first defined here\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>However, when I dont have the line <code>-o gpsComplete main.c -L/usr/include/mysql/ -lmysqlclient -lz</code> in, it will fail its build saying the sql commands are undefined:</p>\n\n<pre><code>/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/main.c:91: undefined reference to `mysql_init'\n/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/main.c:94: undefined reference to `mysql_real_connect'\n/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/main.c:96: undefined reference to `mysql_error'\n</code></pre>\n\n<p>So I would say I need the compilation line in there, its just a case of figuring out why it is giving me  the multiple definition error</p>\n"}, {"tags": ["c", "algorithm", "matrix", "2d", "longest-path"], "comments": [{"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1438797420, "post_id": 31839429, "comment_id": 51600630, "body": "Please show code demonstrating what you have attempted so far"}, {"owner": {"reputation": 85, "user_id": 5195126, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-bFU5mAz8kXY/AAAAAAAAAAI/AAAAAAAAABs/1J58FM1O2Ko/photo.jpg?sz=128", "display_name": "0726", "link": "https://stackoverflow.com/users/5195126/0726"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1588502807, "post_id": 31839429, "comment_id": 108915924, "body": "Edited the question and added the code."}, {"owner": {"reputation": 85, "user_id": 5195126, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-bFU5mAz8kXY/AAAAAAAAAAI/AAAAAAAAABs/1J58FM1O2Ko/photo.jpg?sz=128", "display_name": "0726", "link": "https://stackoverflow.com/users/5195126/0726"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1588783751, "post_id": 31839429, "comment_id": 109034494, "body": "Not sure if I can ask this... but can moderators please increase rating of this question? I have added the code as expected by community. And improved the overall content."}, {"owner": {"reputation": 85, "user_id": 5195126, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-bFU5mAz8kXY/AAAAAAAAAAI/AAAAAAAAABs/1J58FM1O2Ko/photo.jpg?sz=128", "display_name": "0726", "link": "https://stackoverflow.com/users/5195126/0726"}, "reply_to_user": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1588954612, "post_id": 31839429, "comment_id": 109108168, "body": "@AlexanderStaroselsky: Please review the rating of this question. I have edited and added code as needed."}, {"owner": {"reputation": 28420, "user_id": 5059657, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh4.googleusercontent.com/-0V0P2SXS07Y/AAAAAAAAAAI/AAAAAAAAC5k/cTht2gcsEbk/photo.jpg?sz=128", "display_name": "Alexander Staroselsky", "link": "https://stackoverflow.com/users/5059657/alexander-staroselsky"}, "edited": false, "score": 0, "creation_date": 1588954894, "post_id": 31839429, "comment_id": 109108327, "body": "I&#39;m not currently affecting the rating."}], "answers": [{"comments": [{"owner": {"reputation": 813, "user_id": 1645490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a33a935424e51018b67431cffc5e47?s=128&d=identicon&r=PG", "display_name": "Bert te Velde", "link": "https://stackoverflow.com/users/1645490/bert-te-velde"}, "edited": false, "score": 0, "creation_date": 1438875284, "post_id": 31839933, "comment_id": 51639469, "body": "Approach seems ok, but needs two corrections: (a) final result requires +1 (or intialize countingmatrix to 1, not 0); (b) when scanning neighbouring values, only consider cells where the basevalue (original matrix) is larger, otherwise you&#39;ll get wrong results when neighbouring cells in the input-matrix have identical values."}, {"owner": {"reputation": 85, "user_id": 5195126, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-bFU5mAz8kXY/AAAAAAAAAAI/AAAAAAAAABs/1J58FM1O2Ko/photo.jpg?sz=128", "display_name": "0726", "link": "https://stackoverflow.com/users/5195126/0726"}, "edited": false, "score": 0, "creation_date": 1588954459, "post_id": 31839933, "comment_id": 109108077, "body": "Not sure if I can ask this... but can moderators please increase rating of this question? I have added the code as expected by community. And improved the overall content."}], "tags": [], "owner": {"reputation": 30866, "user_id": 1139393, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4f7f66aa636f33c3e5784d3581213ba8?s=128&d=identicon&r=PG", "display_name": "Peter de Rivaz", "link": "https://stackoverflow.com/users/1139393/peter-de-rivaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1438798568, "creation_date": 1438798568, "answer_id": 31839933, "question_id": 31839429, "link": "https://stackoverflow.com/questions/31839429/find-longest-sequence-of-decreasing-numbers-given-a-2d-matrix/31839933#31839933", "title": "Find longest sequence of decreasing numbers given a 2D matrix", "body": "<p>I would suggest you visit the numbers in decreasing order.</p>\n\n<p>Initialize a matrix to all zeros.  This matrix will represent the longest sequence that ends in this spot.</p>\n\n<p>Now go through all the positions in the matrix (in order of decreasing value in the original matrix).  For each position set the value in the matrix to 1 + the largest value in any neighbouring location.</p>\n\n<p>After you have visited all positions, the largest value in the matrix will be the solution to your problem.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 5195126, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-bFU5mAz8kXY/AAAAAAAAAAI/AAAAAAAAABs/1J58FM1O2Ko/photo.jpg?sz=128", "display_name": "0726", "link": "https://stackoverflow.com/users/5195126/0726"}, "edited": false, "score": 0, "creation_date": 1588509810, "post_id": 31852522, "comment_id": 108918584, "body": "Starting at 25 in the <code>2nd matrix</code>, it should have given <code>25</code> as the res but I am getting <code>10</code>."}], "tags": [], "owner": {"reputation": 2837, "user_id": 5131287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b075fe47cb28e2f62deabe058769ea9?s=128&d=identicon&r=PG&f=1", "display_name": "xashru", "link": "https://stackoverflow.com/users/5131287/xashru"}, "is_accepted": true, "score": 1, "last_activity_date": 1438935154, "last_edit_date": 1438935154, "creation_date": 1438854733, "answer_id": 31852522, "question_id": 31839429, "link": "https://stackoverflow.com/questions/31839429/find-longest-sequence-of-decreasing-numbers-given-a-2d-matrix/31852522#31852522", "title": "Find longest sequence of decreasing numbers given a 2D matrix", "body": "<p>You can use recursion. Suppose we want to get maximum sequence starting from indices <code>(i,j)</code>. Then we can move in any of the 4th direction <code>(i1,j1)</code> if <code>A[i][j] &gt; A[i1][j1]</code> where A is the 2D array.</p>\n\n<pre><code>const int N=50;\nint A[N][N];\nint res=0; // maximum result\n\nint calc(int i, int j) {\n    int r=1;   // only this element forms a single element sequence\n    if(A[i][j]&gt;A[i][j+1]) r=max(r, 1+ calc(i, j+1));\n    if(A[i][j]&gt;A[i][j-1]) r=max(r, 1+ calc(i, j-1));\n    if(A[i][j]&gt;A[i+1][j]) r=max(r, 1+ calc(i+1, j));\n    if(A[i][j]&gt;A[i-1][j]) r=max(r, 1+ calc(i-1, j));\n    res=max(res,r);\n    return r;\n}\n</code></pre>\n\n<p>Complexity: O(mn) if result is memoized in a 2D array where m is number of rows and n number of columns.</p>\n"}], "owner": {"reputation": 85, "user_id": 5195126, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-bFU5mAz8kXY/AAAAAAAAAAI/AAAAAAAAABs/1J58FM1O2Ko/photo.jpg?sz=128", "display_name": "0726", "link": "https://stackoverflow.com/users/5195126/0726"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 1, "accepted_answer_id": 31852522, "answer_count": 2, "score": -2, "last_activity_date": 1588502541, "creation_date": 1438796909, "last_edit_date": 1588502541, "question_id": 31839429, "link": "https://stackoverflow.com/questions/31839429/find-longest-sequence-of-decreasing-numbers-given-a-2d-matrix", "title": "Find longest sequence of decreasing numbers given a 2D matrix", "body": "<p>Given a 2D array, find the longest sequence of decreasing numbers. Constraints are:\n1. you cannot compare elements diagonally.</p>\n\n<p>For Eg: </p>\n\n<pre><code>56 14 51 58 88\n26 94 24 39 41\n24 16 8 51 51\n76 72 77 43 10\n38 50 59 84 81\n5 23 37 71 77\n96 10 93 53 82\n94 15 96 69 9\n74 0 62 38 96\n37 54 55 82 38\n</code></pre>\n\n<p>Here the ans is: 7</p>\n\n<p>And for below matrix</p>\n\n<pre><code>1 2 3 4 5\n16 17 18 19 6\n15 24 25 20 7\n14 23 22 21 8\n13 12 11 10 9\n</code></pre>\n\n<p>Answer is 25 since I can move in fashion 25 -> 24 -> 23 -> 22 -> ....and so on..till i reach 1.</p>\n\n<p>Could somebody help me with the algorithm.</p>\n\n<p>This was my initial code : </p>\n\n<pre><code>int dx[4] = {0, 1, -1, 0};\nint dy[4] = {1, 0, 0, -1};\n\nint findSequence(int x, int y)\n{\n    for(int i = 0; i &lt; 4; ++i)\n    {\n        int new_x = x + dx[i];\n        int new_y = y + dy[i];\n        if(isValid(new_x, new_y) &amp;&amp; data[x][y] &gt; data[new_x][new_y])\n        {\n            std::cout &lt;&lt; \"\" &lt;&lt; data[x][y] &lt;&lt; \" -&gt; \" &lt;&lt; data[new_x][new_y] &lt;&lt; \" \";\n            int tmp =  1 + findSequence(new_x, new_y, isVisited);\n            //std::cout &lt;&lt; \" \"&lt;&lt; tmp &lt;&lt; \" \";\n            return tmp;\n        }\n    }\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 6823, "user_id": 2382728, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILv9S.jpg?s=128&g=1", "display_name": "Philip Stuyck", "link": "https://stackoverflow.com/users/2382728/philip-stuyck"}, "edited": false, "score": 0, "creation_date": 1438799966, "post_id": 31839382, "comment_id": 51602120, "body": "does it have to be in C? There are libraries to do a webrequest. Libwww comes to mind but there are most likely others as well. The point being that if you use the sockets yourself, you have to create a valid http request yourself and parse the results as well. This is all text but still, quite cumbersome and error prone and implemented by others already."}], "answers": [{"tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 2, "last_activity_date": 1438797899, "creation_date": 1438797899, "answer_id": 31839727, "question_id": 31839382, "link": "https://stackoverflow.com/questions/31839382/send-message-to-socket-c/31839727#31839727", "title": "Send message to socket C", "body": "<p>Looks like you are doing it rght:</p>\n\n<pre><code>telnet www.google.com 80\nTrying 173.194.123.19...\nConnected to www.google.com.\nEscape character is '^]'.\nmessage abc\nHTTP/1.0 400 Bad Request\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38, "user_id": 4939519, "user_type": "registered", "profile_image": "https://graph.facebook.com/939495339427986/picture?type=large", "display_name": "Pawe\u0142 Mazurkiewicz", "link": "https://stackoverflow.com/users/4939519/pawe%c5%82-mazurkiewicz"}, "is_accepted": true, "score": 1, "last_activity_date": 1438813618, "last_edit_date": 1438813618, "creation_date": 1438813174, "answer_id": 31843784, "question_id": 31839382, "link": "https://stackoverflow.com/questions/31839382/send-message-to-socket-c/31843784#31843784", "title": "Send message to socket C", "body": "<p>If I understand your code and your intent with command correctly, then your code is fine as it is...but not for google.com server. You see, google.com server is a HTTP server and thus responds to HTTP requests like the one you placed in your second question. Sending that request would yield you response - index.html contents and response header.</p>\n\n<p>If you were to, say, code a simple server app with the library you're using, that echoes to client whatever it sends, then you would see the output you wanted.</p>\n\n<p>Here is full code of simple server that forks on accept and echoes what you send to it (courtesy of Beej's guide to network programming, slightly modified by me)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;signal.h&gt;\n\n#define PORT \"3490\"  // the port users will be connecting to\n\n#define BACKLOG 10     // how many pending connections queue will hold\n\nvoid sigchld_handler(int s)\n{\n    while(waitpid(-1, NULL, WNOHANG) &gt; 0);\n}\n\n// get sockaddr, IPv4 or IPv6:\nvoid *get_in_addr(struct sockaddr *sa)\n{\n    if (sa-&gt;sa_family == AF_INET) {\n        return &amp;(((struct sockaddr_in*)sa)-&gt;sin_addr);\n    }\n\n    return &amp;(((struct sockaddr_in6*)sa)-&gt;sin6_addr);\n}\n\nint main(void)\n{\n    int sockfd, new_fd;  // listen on sock_fd, new connection on new_fd\n    struct addrinfo hints, *servinfo, *p;\n    struct sockaddr_storage their_addr; // connector's address information\n    socklen_t sin_size;\n    struct sigaction sa;\n    int yes=1;\n    char s[INET6_ADDRSTRLEN];\n    char buf[1024];\n    int rv;\n\n    memset(&amp;buf, 0, sizeof(buf));\n    memset(&amp;hints, 0, sizeof hints);\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_flags = AI_PASSIVE; // use my IP\n\n    if ((rv = getaddrinfo(NULL, PORT, &amp;hints, &amp;servinfo)) != 0) {\n        fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n        return 1;\n    }\n\n    // loop through all the results and bind to the first we can\n    for(p = servinfo; p != NULL; p = p-&gt;ai_next) {\n        if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,\n                p-&gt;ai_protocol)) == -1) {\n            perror(\"server: socket\");\n            continue;\n        }\n\n        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;yes,\n                sizeof(int)) == -1) {\n            perror(\"setsockopt\");\n            exit(1);\n        }\n\n        if (bind(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {\n            close(sockfd);\n            perror(\"server: bind\");\n            continue;\n        }\n\n        break;\n    }\n\n    if (p == NULL)  {\n        fprintf(stderr, \"server: failed to bind\\n\");\n        return 2;\n    }\n\n    freeaddrinfo(servinfo); // all done with this structure\n\n    if (listen(sockfd, BACKLOG) == -1) {\n        perror(\"listen\");\n        exit(1);\n    }\n\n    sa.sa_handler = sigchld_handler; // reap all dead processes\n    sigemptyset(&amp;sa.sa_mask);\n    sa.sa_flags = SA_RESTART;\n    if (sigaction(SIGCHLD, &amp;sa, NULL) == -1) {\n        perror(\"sigaction\");\n        exit(1);\n    }\n\n    printf(\"server: waiting for connections...\\n\");\n\n    while(1) {  // main accept() loop\n        sin_size = sizeof their_addr;\n        new_fd = accept(sockfd, (struct sockaddr *)&amp;their_addr, &amp;sin_size);\n        if (new_fd == -1) {\n            perror(\"accept\");\n            continue;\n        }\n\n        inet_ntop(their_addr.ss_family,\n            get_in_addr((struct sockaddr *)&amp;their_addr),\n            s, sizeof s);\n        printf(\"server: got connection from %s\\n\", s);\n\n        if (!fork()) { // this is the child process\n            close(sockfd); // child doesn't need the listener\n            if (recv(new_fd, buf, sizeof(buf), 0) == -1){\n                perror(\"recv\");\n            }\n\n            if (send(new_fd, buf, sizeof(buf), 0) == -1)\n                perror(\"send\");\n            close(new_fd);\n            exit(0);\n        }\n        close(new_fd);  // parent doesn't need this\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>That should get it done. Hope I helped. Btw, look at this link: [Beej's Guide to Network Programming<a href=\"http://beej.us/guide/bgnet/output/html/multipage/index.html\" rel=\"nofollow\">1</a>. It's very nice for beginning.</p>\n\n<p>Edit:\nAs for second question, you may create:</p>\n\n<pre><code>char* index_get_request=\n\"GET /index.html HTTP/1.1\\r\\n\"\n\"Host: www.google.com\\r\\n\"\n\"\\r\\n\";\n</code></pre>\n\n<p>And then use:</p>\n\n<pre><code>send(sock_fd, index_get_request, strlen(index_get_request), 0);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1438814138, "last_edit_date": 1438814138, "creation_date": 1438813427, "answer_id": 31843824, "question_id": 31839382, "link": "https://stackoverflow.com/questions/31839382/send-message-to-socket-c/31843824#31843824", "title": "Send message to socket C", "body": "<p>The <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" rel=\"nofollow\">HTTP</a> protocol is quite complex in practice (the core protocol is simple, but there are  lots of corner cases). I would suggest to use some HTTP client library (e.g. <a href=\"http://curl.haxx.se/libcurl/\" rel=\"nofollow\">libcurl</a> ...) or some HTTP server library (like <a href=\"https://www.coralbits.com/libonion/\" rel=\"nofollow\">libonion</a>)</p>\n\n<p>If you don't want to use HTTP or some well defined protocol but e.g. some simpler protocol (you might find server &amp; client libraries for many other protocols like SMTP, JSON-RPC, etc etc....) that you have to design and define unambiguously you need to code both server and client side (and test on your machine(s), either two different one, or the same if using <code>localhost</code> i.e. 127.0.0.1 in IPV4)</p>\n\n<p>BTW, sockets are not in standard C99 (or C11). You need them to be supplied, often by your operating system. POSIX has sockets inspired by the <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\" rel=\"nofollow\">BSD socket</a> API. </p>\n\n<p>Beware than <a href=\"http://man7.org/linux/man-pages/man7/tcp.7.html\" rel=\"nofollow\">tcp(7)</a> sockets are just a stream of bytes. You need to buffer on both sending &amp; receiving side. There is no guarantee that a single <a href=\"http://man7.org/linux/man-pages/man2/send.2.html\" rel=\"nofollow\">send(2)</a> (or <code>write</code>) on the emitter side corresponds to a single <a href=\"http://man7.org/linux/man-pages/man2/send.2.html\" rel=\"nofollow\">recv(2)</a> (or <code>read</code>) of the same data size.  Very often, you need to <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow\">poll(2)</a> and buffer (for partial application \"messages\").</p>\n"}, {"tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1438817286, "creation_date": 1438817286, "answer_id": 31844457, "question_id": 31839382, "link": "https://stackoverflow.com/questions/31839382/send-message-to-socket-c/31844457#31844457", "title": "Send message to socket C", "body": "<p>The results look correct, it just looks like you aren't speaking proper HTTP to the port...</p>\n\n<pre><code>jason@io ~ $ nc -v www.google.com 80\nnc: sea09s15-in-f20.1e100.net (173.194.33.84) 80 [http] open\nnc: using stream socket\nmessage:abc\nHTTP/1.0 400 Bad Request\nContent-Type: text/html; charset=UTF-8\nContent-Length: 1419\nDate: Wed, 05 Aug 2015 23:00:52 GMT\nServer: GFE/2.0\n\n&lt;!DOCTYPE html&gt;\n&lt;html lang=en&gt;\n  &lt;meta charset=utf-8&gt;\n  &lt;meta name=viewport content=\"initial-scale=1, minimum-scale=1, width=device-width\"&gt;\n  &lt;title&gt;Error 400 (Bad Request)!!1&lt;/title&gt;\n  &lt;style&gt;\n    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* &gt; body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/errors/logo_sm_2.png) no-repeat}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/errors/logo_sm_2_hr.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/errors/logo_sm_2_hr.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/errors/logo_sm_2_hr.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:55px;width:150px}\n  &lt;/style&gt;\n  &lt;a href=//www.google.com/&gt;&lt;span id=logo aria-label=Google&gt;&lt;/span&gt;&lt;/a&gt;\n  &lt;p&gt;&lt;b&gt;400.&lt;/b&gt; &lt;ins&gt;That\u2019s an error.&lt;/ins&gt;\n  &lt;p&gt;Your client has issued a malformed or illegal request.  &lt;ins&gt;That\u2019s all we know.&lt;/ins&gt;\n</code></pre>\n\n<p>If you want to know more about the HTTP text protocol, it's described in the <a href=\"http://www.ietf.org/rfc/rfc2616.txt\" rel=\"nofollow\">RFC</a>.  The <a href=\"http://www.ietf.org/rfc/rfc959.txt\" rel=\"nofollow\">FTP</a> protocol might be a bit more interesting though since it's a mix of text and binary.  One of the first pieces of network software I wrote was an FTP server.</p>\n\n<p>If I remember correctly, RIO is Microsoft's API for low latency I/O.  You probably want to avoid that unless you have a genuine need for it.  If you're tied to using Windows, you might want to use something like <a href=\"http://www.boost.org/doc/libs/1_58_0/doc/html/boost_asio.html\" rel=\"nofollow\"><code>boost::asio</code></a> instead since it's a bit higher level.  Another option might be <a href=\"https://github.com/libuv/libuv/blob/master/README.md\" rel=\"nofollow\">libuv</a>.  The performance using the libraries is generally comparable to using raw sockets, depending on your software design.  Otherwise, if you can use OSX/Linux/FreeBSD/NetBSD/Solaris/etc... I'd recommend using the standard POSIX <a href=\"https://en.wikipedia.org/wiki/Berkeley_sockets\" rel=\"nofollow\">API</a>.</p>\n"}], "owner": {"reputation": 1540, "user_id": 4807625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/825e21cf278fa7a7f40ff21e6cc218ab?s=128&d=identicon&r=PG&f=1", "display_name": "PTN", "link": "https://stackoverflow.com/users/4807625/ptn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3881, "favorite_count": 0, "accepted_answer_id": 31843784, "answer_count": 4, "score": 1, "last_activity_date": 1438817286, "creation_date": 1438796750, "question_id": 31839382, "link": "https://stackoverflow.com/questions/31839382/send-message-to-socket-c", "title": "Send message to socket C", "body": "<p>I am totally new to socket programming. Right now I'm just trying out random stuff I found. So I have this program (code below) that uses <code>csapp.h</code> and <code>csapp.c</code>, in particular the <code>open_clientfd(hostname, port)</code> function, and RIO IO to print out whatever you enter.</p>\n\n<p><a href=\"https://github.com/tlozoot/cs-262-bank-protocol/blob/master/csapp.c\" rel=\"nofollow\">https://github.com/tlozoot/cs-262-bank-protocol/blob/master/csapp.c</a></p>\n\n<p>Well, when I tried running the program ./prog www.google.com 80 (I'm not even sure about the hostname and port), it is printing out weird stuff and then stop.</p>\n\n<p>Expected output:</p>\n\n<pre><code>Enter message:abc\nEcho:abc\n</code></pre>\n\n<p>Actual output:</p>\n\n<pre><code>Enter message:abc\nEcho:HTTP/1.0 400 Bad Request\n</code></pre>\n\n<p>Below is my code:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n   int clientfd, port;\n   char *host, buf[MAXLINE];\n   rio_t rio;\n   host = argv[1];  port = atoi(argv[2]);\n\n   clientfd = Open_clientfd(host, port);\n\n   Rio_readinitb(&amp;rio, clientfd);\n   printf(\"Enter message:\"); fflush(stdout);\n\n   while (Fgets(buf, MAXLINE, stdin) != NULL) {\n      Rio_writen(clientfd, buf, strlen(buf));\n      Rio_readlineb(&amp;rio, buf, MAXLINE);\n\n      printf(\"Echo:\");\n\n      Fputs(buf, stdout);\n      printf(\"Enter message:\");\n\n      fflush(stdout);\n   }\n\n   Close(clientfd);\n   exit(0);\n}\n</code></pre>\n\n<p>And I have another question. How do I send something like this to a socket?</p>\n\n<pre><code>GET /index.html HTTP/1.1\\r\\n\nHost: www.google.com\\r\\n\n\\r\\n\n</code></pre>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1438796912, "post_id": 31839372, "comment_id": 51600323, "body": "what did the debugger say?"}, {"owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1438796981, "post_id": 31839372, "comment_id": 51600361, "body": "First, initialize <code>c</code> and then increment it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438798092, "post_id": 31839372, "comment_id": 51601037, "body": "Please do not edit your question in response to comments. It makes comments and answers hard to follow."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438798339, "post_id": 31839372, "comment_id": 51601174, "body": "Rolled back to remove the mods suggested."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1319185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b8a945babb55ea244248fdfe66f2de?s=128&d=identicon&r=PG", "display_name": "user1319185", "link": "https://stackoverflow.com/users/1319185/user1319185"}, "is_accepted": false, "score": 0, "last_activity_date": 1438798106, "last_edit_date": 1438798106, "creation_date": 1438797794, "answer_id": 31839699, "question_id": 31839372, "link": "https://stackoverflow.com/questions/31839372/c-program-to-convert-the-row-and-column-containing-a-0-value-to-zero/31839699#31839699", "title": "C program to convert the row and column containing a 0 value to zero", "body": "<ol>\n<li>You need to initialize c to 0</li>\n</ol>\n\n<blockquote>\n<pre><code>int i,j,c=0;\n</code></pre>\n</blockquote>\n\n<ol start=\"2\">\n<li>Increment x only when a 0 is found</li>\n</ol>\n\n<blockquote>\n<pre><code>for(j=0;j&lt;3;j++)\n{\nif(mat[i][j]==0)\n{\n    col[x]=j;\n    row[x]=i;\n    x++;\n}\n}\n</code></pre>\n</blockquote>\n\n<ol start=\"3\">\n<li>int main() is missing</li>\n</ol>\n\n<p>While this is not the most efficient solution, the above changes shall perform the required task.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1438797841, "creation_date": 1438797841, "answer_id": 31839708, "question_id": 31839372, "link": "https://stackoverflow.com/questions/31839372/c-program-to-convert-the-row-and-column-containing-a-0-value-to-zero/31839708#31839708", "title": "C program to convert the row and column containing a 0 value to zero", "body": "<p>Besides the uninitilialised <code>c</code> used to define array sizes, you need to increment <code>x</code> after each pair of indices is stored. Take <code>,x++</code> out of the <code>for</code> loop statement, it's wrong just there (since you might not find a <code>0</code> value).</p>\n\n<p>Because of this, <code>x</code> is incremented whether or not you write index values to the arrays. In the case where you don't, these array elements of <code>col[]</code> and <code>row[]</code> are uninitiliased. So when you use them later to index, you get Undefined Behaviour from using uninitialised values which very likely fall outside of the array they are indexing.</p>\n\n<p>Remember: you have to specifically initialise all local variables.</p>\n"}], "owner": {"reputation": 47, "user_id": 4917693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59dc3a6d17ad0c9bfbb6af5b6acfd12?s=128&d=identicon&r=PG&f=1", "display_name": "Vardaan", "link": "https://stackoverflow.com/users/4917693/vardaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1438798298, "creation_date": 1438796725, "last_edit_date": 1438798298, "question_id": 31839372, "link": "https://stackoverflow.com/questions/31839372/c-program-to-convert-the-row-and-column-containing-a-0-value-to-zero", "title": "C program to convert the row and column containing a 0 value to zero", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n{\nint mat[3][3]={{0,2,3},{4,9,5},{0,1,8}};\nint i,j,c;\nint x=0;\n\n\nfor(i=0;i&lt;3;i++)\nfor(j=0;j&lt;3;j++)\nif(mat[i][j]==0)\nc++;\nint col[c],row[c];\nx=0;\nfor(i=0;i&lt;3;i++)\n{for(j=0;j&lt;3;j++,x++)\n{\n    if(mat[i][j]==0)\n    {\n        col[x]=j;\n        row[x]=i;\n    }\n}}\nfor(x=0;x&lt;c;x++)\n{\n    for(j=0;j&lt;3;j++)\n    {\n        mat[row[x]][j]=0;mat[j][col[x]]=0;\n    }\n}\nfor(i=0;i&lt;3;i++)\n{\n    for(j=0;j&lt;3;j++)\n    {\n        printf(\"%d\\t\",mat[i][j]);\n    }\n    printf(\"\\n\");\n}\ngetch();\nreturn 0;\n}\n</code></pre>\n\n<p>What i am doing inthe above code is that i am storing the positions where a zero is present and storing it in an array.\nNow i am using these positions to change the row and column of the zero value to zero. \nWhile executing i am getting an segmentation fault.Can someone pin-point my mistake.</p>\n"}, {"tags": ["c", "lpc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438797150, "post_id": 31839233, "comment_id": 51600474, "body": "<code>static int (*putcharfunc)(int c);</code> is a pointer to a function. <code>rprintf_devopen()</code> sets its value, i.e. the function it points to, from the argument it is passed. After that when <code>putcharfunc()</code> is called, the user-supplied function is called. It&#39;s a bit like a patch box. However, your code posted doesn&#39;t show where you are attempting to recognise the incoming message <code>&quot;ID?&quot;</code> and respond to it."}, {"owner": {"reputation": 11, "user_id": 5195036, "user_type": "registered", "profile_image": "https://graph.facebook.com/727237640735176/picture?type=large", "display_name": "Frank", "link": "https://stackoverflow.com/users/5195036/frank"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438797926, "post_id": 31839233, "comment_id": 51600946, "body": "I updated and edited the question and put in the function that tries to recognize &quot;ID?&quot;. Thank you for answering"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438798718, "post_id": 31839233, "comment_id": 51601408, "body": "I can&#39;t see <code>&quot;ID?&quot;</code> anywhere but in comment. Have you read MCVE? <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 11, "user_id": 5195036, "user_type": "registered", "profile_image": "https://graph.facebook.com/727237640735176/picture?type=large", "display_name": "Frank", "link": "https://stackoverflow.com/users/5195036/frank"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438798806, "post_id": 31839233, "comment_id": 51601458, "body": "You are completely right, I am stupid. &quot;ID?&quot; is declared at the top of the code                                                                                                          <code>char query1 [3] = &quot;ID?&quot;;</code> <code>char query2 [7] = &quot;protov?&quot;;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438801217, "post_id": 31839233, "comment_id": 51602931, "body": "Change <code>char query1 [3] = &quot;ID?&quot;;</code> to <code>char query1 [4] = &quot;ID?&quot;;</code> and change <code>char query2 [7] = &quot;protov?&quot;;</code> to <code>char query2 [8] = &quot;protov?&quot;;</code>. Better still, omit the array size and let the compiler figure it out.  You forgot to allow room for the <code>nul</code> terminator."}], "owner": {"reputation": 11, "user_id": 5195036, "user_type": "registered", "profile_image": "https://graph.facebook.com/727237640735176/picture?type=large", "display_name": "Frank", "link": "https://stackoverflow.com/users/5195036/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438798186, "creation_date": 1438796259, "last_edit_date": 1438798186, "question_id": 31839233, "link": "https://stackoverflow.com/questions/31839233/receive-transmit-over-rs232-with-arm-lpc2148-on-sparkfun-logomatic", "title": "receive/transmit over rs232 with arm lpc2148 on sparkfun logomatic", "body": "<p>I am trying to program the logomatic by sparkfun, and yes I have used their forum with no responses, and having some issues. I am trying to send characters to the UART0 and I want the logomatic to respond with specific characters and not just an echo. For example, I send 'ID?' over the terminal (using RealTerm), and the logomatic sends back '1'. All it will so now is echo. </p>\n\n<p>I am using c with programmers notepad with the WinARM toolchain. The following snippet is from the main.c file. I only included this, because I am fairly certain that this is where my problem lies</p>\n\n<pre><code>void Initialize(void)\n{\n    rprintf_devopen(putc_serial0);   \n\n    PINSEL0 = 0xCF351505;\n    PINSEL1 = 0x15441801;\n    IODIR0 |= 0x00000884;\n    IOSET0 = 0x00000080;\n\n    S0SPCR = 0x08;  // SPI clk to be pclk/8\n    S0SPCR = 0x30;  // master, msb, first clk edge, active high, no ints\n}\n</code></pre>\n\n<p>Notice the rprintf_devopen function, below is from the rprintf.c file, and due to my mediocre skills, I do not understand this bit of code. If I comment out the rprintf_devopen in main, the chip never initializes correctly.</p>\n\n<pre><code>static int (*putcharfunc)(int c);\n\nvoid rprintf_devopen( int(*put)(int) )\n{\n    putcharfunc = put;\n}\n\nstatic void myputchar(unsigned char c)\n{\n    if(c == '\\n') putcharfunc('\\r');\n    putcharfunc(c);\n}\n</code></pre>\n\n<p>Now, below is from the serial.c file. So my thought was that I should be able to just call one of these putchar functions in main.c and that it would work, but it still just echoes.</p>\n\n<pre><code>int putchar_serial0 (int ch)\n{\n    if (ch == '\\n')\n    {\n        while (!(U0LSR &amp; 0x20));\n        U0THR = CR;                  // output CR \n    }\n    while (!(U0LSR &amp; 0x20));\n    return (U0THR = ch);\n}\n\n// Write character to Serial Port 0 without \\n -&gt; \\r\\n  \nint putc_serial0 (int ch)\n{\n    while (!(U0LSR &amp; 0x20));\n    return (U0THR = ch);\n}\n\n// Write character to Serial Port 1 without \\n -&gt; \\r\\n  \nint putc_serial1 (int ch)\n{\n    while (!(U1LSR &amp; 0x20));\n    return (U1THR = ch);\n}\n\nvoid putstring_serial0 (const char *string)\n{\n    char ch;\n\n    while ((ch = *string))\n    {\n        putchar_serial0(ch);\n        string++;\n    }\n}\n</code></pre>\n\n<p>I have tried calling the different putchar functions in main, also with the rprintf_devopen. Still just echoes. I have altered the putchar functions and still just echoes. I have tried just writing to the U0THR register in main.c and no luck. Keep in mind that I am still a student and my major is electrical engineering, so the only programming classes that I have taken are intro to c, and an intro to vhdl. I am more of a math and physics guy. I was working on this for an internship I was doing. The internship ended, but it just bugs me that I cannot figure this out. Honestly, working on this program taught me more that the c class that I took. Anyways, I appreciate any help that can be offered, and let me know if you want to see the entire code.</p>\n\n<p>Below is an update to the question. This function is in main.c</p>\n\n<pre><code>static void UART0ISR(void)\n{\nchar temp;\ntrig = 13; //This is where you set the trigger character in decimal, in this case a carriage return.\ntemp = U0RBR; //U0RBR is the receive buffer on the chip, refer to datasheet.\n\nif(temp == query1[counter1]) //This segment looks for the characters \"ID?\" from the U0RBR\n{                             //query1 is defined at the top of the program\n    counter1++;\n    if(counter1 &gt;= 3)\n    {\n        flag1 = 1;           //This keeps track of whether or not query1 was found\n        counter1 = 0;\n\n        stat(1,ON);\n        delay_ms(50);\n        stat(1,OFF);\n\n        RX_in = 0;\n        temp = 0;\n        //rprintf(\"\\n\\rtransmission works\\n\");\n        putc_serial1(49);    \n    }                        \n}\n\nif(temp == query2[counter2] &amp;&amp; flag1 == 1) //This segment looks for \"protov?\" from the U0RBR, but only after query1 has been found\n{\n    counter2++;\n    if(counter2 &gt;= 7)\n    {\n        flag2 = 1;             //This keeps track of whether or not query2 was found\n        counter2 = 0;\n\n        stat(1,ON);\n        delay_ms(50);\n        stat(1,OFF);\n\n        RX_in = 0;\n        temp = 0;\n        putc_serial1(49);    \n    }                        \n}\n\nif(temp == stop[counter3]) //This if segment looks for certain characters in the receive buffer to stop logging\n{\n    counter3++;\n    if(counter3 &gt;= 2)\n    {\n        flagstop = 1;       //This flagstop keeps track of whether or not stop was found. When the stop characters are found,\n        flag1 = 0;          //the query1 and query2 flags will be reset. So, in order to log again these queries must be sent again\n        flag2 = 0;          //this may seem obvious, but deserves mention.\n        counter3 = 0;\n\n        stat(1,ON);\n        delay_ms(500);\n        stat(1,OFF);\n\n        RX_in = 0;\n        temp = 0;\n    }\n    flagstop = 0;           //Reset the stop flag in order to wait once again for the query 1&amp;2\n}\n\nif(RX_in == 0)\n{\n    memset (RX_array1, 0, 512); // This clears the RX_array to make way for new data\n    memset (RX_array2, 0, 512);\n}   \n\nif(RX_in &lt; 512 &amp;&amp; flag1 == 1 &amp;&amp; flag2 == 1) //We cannot log data until we see both flags 1 &amp; 2 and after we see these flags,\n{                                             //we must then see the trigger character \"carriage return\"\n    RX_array1[RX_in] = temp;\n    RX_in++;\n\n    if(temp == trig)\n    {\n        RX_array1[RX_in] = 10; // delimiters\n        log_array1 = 1;\n        RX_in = 0;\n    }\n}   \nelse if(RX_in &gt;= 512 &amp;&amp; flag1 == 1 &amp;&amp; flag2 == 1) //This else if is here in case the RX_in is greater than 512 because the RX_arrays are defined to\n{                                                   //be of size 512. If this happens we don't want to lose data, so we must put the overflow into another register. \n    RX_array2[RX_in - 512] = temp;\n    RX_in++;\n    RX_array1[512] = 10; // delimiters\n    RX_array1[512 + 1] = 13;\n    log_array1 = 1;\n\n    if(RX_in == 1024 || temp == trig)\n    {\n        RX_array2[RX_in - 512] = 10; // delimiters\n        log_array2 = 1;\n        RX_in = 0;\n    }\n}\n\ntemp = U0IIR; // have to read this to clear the interrupt\n\nVICVectAddr = 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opengl", "matrix"], "comments": [{"owner": {"reputation": 167, "user_id": 5032146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a49c71710697f57160060e3e203bb29?s=128&d=identicon&r=PG&f=1", "display_name": "Satish Chalasani", "link": "https://stackoverflow.com/users/5032146/satish-chalasani"}, "edited": false, "score": 5, "creation_date": 1438795904, "post_id": 31839119, "comment_id": 51599787, "body": "Strange results? Could you care to elaborate please?"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1438796616, "post_id": 31839119, "comment_id": 51600147, "body": "Out of the blue, I would guess the issue is the memory layout. Classic GL uses the expects matrices in column major layout, while your provide them as row major."}], "answers": [{"tags": [], "owner": {"reputation": 936, "user_id": 1306355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/970ed70c0bdb1e1241262c8ead344db1?s=128&d=identicon&r=PG", "display_name": "Sung", "link": "https://stackoverflow.com/users/1306355/sung"}, "is_accepted": true, "score": 1, "last_activity_date": 1438796460, "creation_date": 1438796460, "answer_id": 31839296, "question_id": 31839119, "link": "https://stackoverflow.com/questions/31839119/projection-and-orthographic-matrices-for-opengl/31839296#31839296", "title": "projection and orthographic matrices for opengl", "body": "<p>Compare with mine. It is a standard code and works well but one thing you should know is this is based on Row Vector.</p>\n\n<pre><code>void Matrix_OrthoProjection( Matrix&amp; out_M, const __VERTEX__TYPE__ width, const __VERTEX__TYPE__ height, const __VERTEX__TYPE__ nZ, const __VERTEX__TYPE__ fZ)\n{\n    // asumed r-l = width , t-b = height\n    out_M.s[_0x0_] = 2./width; out_M.s[_0x1_] = 0;              out_M.s[_0x2_] = 0;                    out_M.s[_0x3_] = 0;\n    out_M.s[_1x0_] = 0;        out_M.s[_1x1_] = 2./height;      out_M.s[_1x2_] = 0;                    out_M.s[_1x3_] = 0;\n    out_M.s[_2x0_] = 0;        out_M.s[_2x1_] = 0;              out_M.s[_2x2_] = -2./(fZ-nZ);          out_M.s[_2x3_] = 0;\n    out_M.s[_3x0_] = 0;        out_M.s[_3x1_] = 0;              out_M.s[_3x2_] = -(fZ+nZ)/(fZ-nZ);     out_M.s[_3x3_] = 1.;\n}\n\nvoid Matrix_PerspectiveProjection\n(Matrix&amp; out_M,\n const __VERTEX__TYPE__ FOV,\n const __VERTEX__TYPE__ ASPECT,\n const __VERTEX__TYPE__ NEAR,\n const __VERTEX__TYPE__ FAR)\n{\n\n    float fov = 1.0f / (float)tan(FOV * 0.5f); \n    float nf = 1.0f / (NEAR - FAR);\n\n    out_M.s[_0x0_] = fov/ASPECT;\n    out_M.s[_1x0_] = 0;\n    out_M.s[_2x0_] = 0;\n    out_M.s[_3x0_] = 0;\n\n    out_M.s[_0x1_] = 0.0;\n    out_M.s[_1x1_] = fov;\n    out_M.s[_2x1_] = 0.0;\n    out_M.s[_3x1_] = 0.0;\n\n    out_M.s[_0x2_] = 0.0;\n    out_M.s[_1x2_] = 0.0;\n    out_M.s[_2x2_] = (NEAR+FAR) * nf;\n    out_M.s[_3x2_] = (2.f*NEAR*FAR) * nf;\n\n    out_M.s[_0x3_] = 0.0;\n    out_M.s[_1x3_] = 0.0;\n    out_M.s[_2x3_] = -1.0;\n    out_M.s[_3x3_] = 0.0;\n\n}\n</code></pre>\n\n<p>Refer this image too. </p>\n\n<p><strong>Orthogonal</strong>\n<a href=\"https://i.stack.imgur.com/LK7dt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LK7dt.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Perspective</strong>\n<a href=\"https://i.stack.imgur.com/1lXkq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1lXkq.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2070, "favorite_count": 0, "accepted_answer_id": 31839296, "answer_count": 1, "score": -1, "last_activity_date": 1438796460, "creation_date": 1438795796, "question_id": 31839119, "link": "https://stackoverflow.com/questions/31839119/projection-and-orthographic-matrices-for-opengl", "title": "projection and orthographic matrices for opengl", "body": "<p>I am writing this code to setup opengl projection matrices but I am getting strange results and wanted to get some help.</p>\n\n<pre><code>void mat4Projection(mat4* out, double r, double l, double t, double b, double n, double f);\nvoid mat4OrthoProjection(mat4* out, double r, double l, double t, double b, double n, double f);\n\nvoid mat4Projection(mat4* out, double r, double l, double t, double b, double n, double f)\n{\n    double data[] = { (2*n)/(r-l),  0,           (r+l)/(r-l),        0,\n                       0,          (2*n)/(t-b),  (t+b)/(t-b),        0,\n                       0,           0,           (-(f+n))/(f-n),     (-2*(f*n))/(f-n),\n                       0,           0,           -1,                 1                };\n    copyMatrix(out, data);\n}\n\nvoid mat4OrthoProjection(mat4* out, double r, double l, double t, double b, double n, double f)\n{\n    double data[] = { (2)/(r-l),  0,          0,           -((r+l)/(r-l)),\n                       0,         (2)/(t-b),  0,           -((t+b)/(t-b)),\n                       0,         0,          (-2)/(f-n),  -((f+n)/(f-n)),\n                       0,         0,          0,           1              };\n    copyMatrix(out, data);\n}\n</code></pre>\n\n<p>I got this code from this link <a href=\"http://www.songho.ca/opengl/gl_projectionmatrix.html\" rel=\"nofollow\">http://www.songho.ca/opengl/gl_projectionmatrix.html</a></p>\n"}, {"tags": ["c", "language-design"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 20, "creation_date": 1438794879, "post_id": 31838836, "comment_id": 51599247, "body": "Because the language&#39;s grammar says so."}, {"owner": {"reputation": 4690, "user_id": 2019549, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/900a3735d55a0473c975ba9266bf0c68?s=128&d=identicon&r=PG", "display_name": "cambunctious", "link": "https://stackoverflow.com/users/2019549/cambunctious"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 4, "creation_date": 1438795021, "post_id": 31838836, "comment_id": 51599329, "body": "I already knew that. I just wondered if there is a logical reason."}, {"owner": {"reputation": 546, "user_id": 3220336, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b887b0bc1bdaf4870846deee6c5ded08?s=128&d=identicon&r=PG&f=1", "display_name": "unique_ptr", "link": "https://stackoverflow.com/users/3220336/unique-ptr"}, "edited": false, "score": 3, "creation_date": 1438795050, "post_id": 31838836, "comment_id": 51599337, "body": "the last one is a method definition and not a conditional/iterative instruction"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1438795137, "post_id": 31838836, "comment_id": 51599394, "body": "And BTW you shouldn&#39;t use the other mentioned forms either, they just make your code less readable, maintainable and error prone!"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 5, "creation_date": 1438795382, "post_id": 31838836, "comment_id": 51599519, "body": "Frankly I&#39;d prefer to disallow the first two forms than to allow the third."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1438795612, "post_id": 31838836, "comment_id": 51599648, "body": "It&#39;s more a C thing because it affects all the languages that inherit its syntax like Java, C#, C++ and so on."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1438795612, "post_id": 31838836, "comment_id": 51599652, "body": "I&#39;m voting to close this question as off-topic because it is nonsensical."}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 3, "creation_date": 1438795837, "post_id": 31838836, "comment_id": 51599755, "body": "OT: In C++ you can avoid them <a href=\"http://coliru.stacked-crooked.com/a/df6aed03d14e6729\" rel=\"nofollow noreferrer\">under some circumstances</a>"}, {"owner": {"reputation": 4690, "user_id": 2019549, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/900a3735d55a0473c975ba9266bf0c68?s=128&d=identicon&r=PG", "display_name": "cambunctious", "link": "https://stackoverflow.com/users/2019549/cambunctious"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1438796006, "post_id": 31838836, "comment_id": 51599831, "body": "@TheParamagneticCroissant the question only seems nonsensical until an insightful answer is given. Then it becomes a question we can all learn from."}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1438796252, "post_id": 31838836, "comment_id": 51599960, "body": "@TheParamagneticCroissant It might be off-topic for some other reason (subjective, possibly). But it <i>clearly isn&#39;t</i> nonsensical, since quite a lot of users (including some high-rep people) apparently understood it very well and gave perfectly coherent answers."}, {"owner": {"reputation": 4690, "user_id": 2019549, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/900a3735d55a0473c975ba9266bf0c68?s=128&d=identicon&r=PG", "display_name": "cambunctious", "link": "https://stackoverflow.com/users/2019549/cambunctious"}, "edited": false, "score": 0, "creation_date": 1438796507, "post_id": 31838836, "comment_id": 51600089, "body": "I now see that this question probably belongs on programmers.stackexchange.com but I can&#39;t move it."}, {"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1438796570, "post_id": 31838836, "comment_id": 51600120, "body": "Which part of the question doesn&#39;t make sense to you, @ThePara? You understand the concept of conditional expressions followed by statements rather than blocks, right? This question asks why function prototypes can&#39;t <i>also</i> be followed by statements rather than blocks. Do you not see the apparent pattern in the three blocks of code? The asker has identified something that seems inconsistent in the language and wants to understand it better."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1438796804, "post_id": 31838836, "comment_id": 51600269, "body": "@RobKennedy before claiming that I don&#39;t understand something about the problem, you might as well reconsider reading the question. What you stated is all nice and pink and fluffy, but OP outright asked &quot;why we can&#39;t do thing X&quot;, to which the answer is Borgleader&#39;s first comment: &quot;because the grammar says so&quot;. If OP really wanted to &quot;understand [this] better&quot;, he should have elaborated as to why he thinks this is an issue. But dumping &quot;why X&quot; to SO is not a meaningful question at all."}, {"owner": {"reputation": 4690, "user_id": 2019549, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/900a3735d55a0473c975ba9266bf0c68?s=128&d=identicon&r=PG", "display_name": "cambunctious", "link": "https://stackoverflow.com/users/2019549/cambunctious"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1438797073, "post_id": 31838836, "comment_id": 51600419, "body": "@TheParamagneticCroissant Rob concluded that some part of the question doesn&#39;t make sense to you because you said the question is nonsensical"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1438797132, "post_id": 31838836, "comment_id": 51600459, "body": "@cambunctious I didn&#39;t write &quot;meaningless&quot; or &quot;incomprehensible&quot;, I wrote &quot;nonsensical&quot;. Perhaps I should have written &quot;rhetorical&quot;, &quot;pointless&quot; or &quot;overly general&quot; instead?"}, {"owner": {"reputation": 8382, "user_id": 398461, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ixu8F.jpg?s=128&g=1", "display_name": "wcochran", "link": "https://stackoverflow.com/users/398461/wcochran"}, "edited": false, "score": 2, "creation_date": 1438797777, "post_id": 31838836, "comment_id": 51600857, "body": "I just spent 30 minutes writing an historical answer and then its marked as off topic before I can post.  This is a good design question. Don&#39;t be so hasty! @/\u03c0\u03ac\u03bd\u03c4\u03b1-\u1fe5\u03b5\u1fd6"}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "edited": false, "score": 0, "creation_date": 1438797983, "post_id": 31838836, "comment_id": 51600972, "body": "@cambunctious at Programmers, it would likely be quickly closed as a duplicate of <a href=\"http://programmers.stackexchange.com/q/16528/31260\">this one</a>, and possibly heavily downvoted for <a href=\"http://meta.programmers.stackexchange.com/questions/6559/why-is-research-important\">thorough lack of research effort</a>"}, {"owner": {"reputation": 213217, "user_id": 41071, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0ec0f5be7749c8cc8ccda4a809103f36?s=128&d=identicon&r=PG", "display_name": "svick", "link": "https://stackoverflow.com/users/41071/svick"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1438803691, "post_id": 31838836, "comment_id": 51604337, "body": "@black C# just recently added a different syntax to do this: <code>int giveMeFive() =&gt; 5;</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1438813606, "post_id": 31838836, "comment_id": 51609200, "body": "I&#39;ve edited your question to make it clearer what you&#39;re asking about, based on your comments."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "edited": false, "score": 2, "creation_date": 1438813696, "post_id": 31838836, "comment_id": 51609225, "body": "@gnat: It&#39;s not a duplicate of <a href=\"http://programmers.stackexchange.com/q/16528/31260\">this question</a>, which doesn&#39;t mention function definitions. Nor does it show a lack of research; the historical reasons are not particularly easy to track down."}, {"owner": {"reputation": 6198, "user_id": 839601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6db99aa846a8217f7e2aba6fa198e7c?s=128&d=identicon&r=PG", "display_name": "gnat", "link": "https://stackoverflow.com/users/839601/gnat"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1438813943, "post_id": 31838836, "comment_id": 51609319, "body": "@KeithThompson you&#39;re right, I missed that part about function definition"}], "answers": [{"comments": [{"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 12, "creation_date": 1438795269, "post_id": 31838891, "comment_id": 51599464, "body": "Is that any different from putting a semicolon at the end of the <code>if</code> or <code>while</code> expressions mentioned in the question?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1438795718, "post_id": 31838891, "comment_id": 51599700, "body": "@Rob Kennedy Yes there is a difference. When a while statement for example is used it may have an empty statement. However as I understand the function may not have the empty body. It has to have the return statement."}, {"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1438796016, "post_id": 31838891, "comment_id": 51599837, "body": "So, your explanation is essentially <a href=\"http://stackoverflow.com/a/31839040/33732\">Martin&#39;s answer</a>? That&#39;s fine, but it&#39;s not the reason you gave in your answer. Your answer says it&#39;s to avoid typos, even though the very same typos are already possible with existing constructs."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1438796166, "post_id": 31838891, "comment_id": 51599922, "body": "@Rob Kennedy  I already explained the difference in my preceding comment. It seems you simply do not know C."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": -2, "last_activity_date": 1438796969, "last_edit_date": 1438796969, "creation_date": 1438795042, "answer_id": 31838891, "question_id": 31838836, "link": "https://stackoverflow.com/questions/31838836/why-do-one-liner-functions-require-braces/31838891#31838891", "title": "Why do one liner functions require braces?", "body": "<p>I think that the problem is that it is difficult to distinguish this construction</p>\n\n<pre><code>int giveMeFive()\nreturn 5;\n</code></pre>\n\n<p>and this construction</p>\n\n<pre><code>int giveMeFive() //;\n                 ^^^\nreturn 5;\n</code></pre>\n\n<p>That is whether the programmer made a typo.</p>\n\n<p>At present the compiler issues an error. But what to do if such a function definition will be allowed? This will make the program much less clear.</p>\n\n<p>In fact it could be used like a simplified inline function</p>\n\n<pre><code>T function( parameter-list ) return expression;\n</code></pre>\n\n<p>However placing a semicolon between the function header and its body</p>\n\n<pre><code>T function( parameter-list ) ; return expression;\n</code></pre>\n\n<p>changes the symantic and makes the code unclear.</p>\n\n<p>The difference for example with a while statement is that a semicolon after while statement like this </p>\n\n<pre><code>while( condition );\n</code></pre>\n\n<p>does not change the definition of the construction. In any case it is the while statement.</p>\n\n<p>However relative to the function definition the situation is different.</p>\n"}, {"tags": [], "owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "is_accepted": false, "score": 10, "last_activity_date": 1438795553, "creation_date": 1438795553, "answer_id": 31839040, "question_id": 31838836, "link": "https://stackoverflow.com/questions/31838836/why-do-one-liner-functions-require-braces/31839040#31839040", "title": "Why do one liner functions require braces?", "body": "<p>If it was allowed, there would be no difference between a function declaration:</p>\n\n<pre><code>void a();\n</code></pre>\n\n<p>and a function definition for a function doing nothing:</p>\n\n<pre><code>void a()\n  ;\n</code></pre>\n\n<p>It would add more problems than gain for sure.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1438803164, "post_id": 31839086, "comment_id": 51604047, "body": "@VladfromMoscow: No, this actually answers the question by explaining the rationale for requiring a compound statement rather than a more general statement in a function definition. Both the function in the question and the function in my answer have a return statement, so I don&#39;t understand your point. Perhaps you could explain?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438805041, "post_id": 31839086, "comment_id": 51605110, "body": "@VladfromMoscow: So apparently you wouldn&#39;t care to explain."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438806590, "post_id": 31839086, "comment_id": 51605912, "body": "@VladfromMoscow: Oh, I see; I didn&#39;t notice that you had posted an answer. I still stand by what I wrote. I&#39;ve also added some more historical background that you may or may not find interesting."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 12, "last_activity_date": 1438806547, "last_edit_date": 1438806547, "creation_date": 1438795708, "answer_id": 31839086, "question_id": 31838836, "link": "https://stackoverflow.com/questions/31838836/why-do-one-liner-functions-require-braces/31839086#31839086", "title": "Why do one liner functions require braces?", "body": "<p>The reason seems to be mostly historical.</p>\n\n<p>Prior to the 1989 ANSI C standard, C did not have prototypes. Parameters of type <code>int</code> could be defined implicitly; parameters of types other than <code>int</code> had to be defined explicitly, before the opening <code>{</code>.</p>\n\n<p>For example, where in modern C we might write:</p>\n\n<pre><code>double sum(double x, double y) {\n    return x + y;\n}\n</code></pre>\n\n<p>in pre-ANSI (K&amp;R) C we had to write:</p>\n\n<pre><code>double sum(x, y)\ndouble x;\ndouble y;\n{\n    return x + y;\n}\n</code></pre>\n\n<p>The body of the function might begin with a declaration of a local variable:</p>\n\n<pre><code>double sum(x, y)\ndouble x;\ndouble y;\n{\n    double z;\n    /* ... */\n}\n</code></pre>\n\n<p>The opening <code>{</code> was needed to separate the parameter definitions from the body of the function, and the closing <code>}</code> was needed to match the opening <code>{</code>.</p>\n\n<p>(This syntax is still allowed, but obsolescent, in modern C; it's not allowed in C++.)</p>\n\n<p>When prototypes were added to the language, there was no particular reason to permit omitting the <code>{</code> and <code>}</code> in function definitions.</p>\n\n<p>The trivial answer is that that's what the language grammar requires.  The syntax for a <em>function-definition</em> is:</p>\n\n<blockquote>\n  <p><em>declaration-speci\ufb01ers declarator declaration-list<sub>opt</sub> compound-statement</em></p>\n</blockquote>\n\n<p>where a <em>compound-statement</em> consists of <code>{</code>, followed by 0 or more declarations and statements, followed by <code>}</code>. This is the <em>only</em> syntax production that requires a <em>compound-statement</em>; there are plenty of others that merely require a <em>statement</em>.</p>\n\n<p>Interestingly, in C's predecessor language, called B (<a href=\"https://www.bell-labs.com/usr/dmr/www/kbman.html\" rel=\"nofollow\">documented here</a>), the syntax of a function definition was:</p>\n\n<pre><code>name ( arguments ) statement\n</code></pre>\n\n<p>The statement was <em>usually</em> a compound statement (a block delimited by <code>{</code> and <code>}</code>), but it wasn't required to be. B did not require, or even allow, arguments and variables to have their types specified, so there was no need to have a particular syntax to separate the parenthesized argument list from the body of the function. In the earliest C reference I can find (<a href=\"https://www.bell-labs.com/usr/dmr/www/cman74.pdf\" rel=\"nofollow\">this one, from 1974</a>), the syntax of a function definition had been changed to require a compound statement, probably to accommodate the addition of parameter declarations.</p>\n"}], "owner": {"reputation": 4690, "user_id": 2019549, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/900a3735d55a0473c975ba9266bf0c68?s=128&d=identicon&r=PG", "display_name": "cambunctious", "link": "https://stackoverflow.com/users/2019549/cambunctious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 1, "accepted_answer_id": 31839086, "answer_count": 3, "score": 5, "last_activity_date": 1438813585, "creation_date": 1438794844, "last_edit_date": 1438813585, "question_id": 31838836, "link": "https://stackoverflow.com/questions/31838836/why-do-one-liner-functions-require-braces", "title": "Why do one liner functions require braces?", "body": "<p>We can do this</p>\n\n<pre><code>if(condition)\n    doThis();\n</code></pre>\n\n<p>and this</p>\n\n<pre><code>while(condition)\n    doThat();\n</code></pre>\n\n<p>but not this</p>\n\n<pre><code>int giveMeFive()\n    return 5; // Error: expected a '{'\n</code></pre>\n\n<p>Why not?</p>\n\n<p>I'm aware that the language grammar requires <code>{</code> and <code>}</code> on function definitions. I'm asking about the rationale for the difference between conditional statements (which don't require braces) and function definitions (which do).</p>\n"}, {"tags": ["c", "misra"], "comments": [{"owner": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 2, "creation_date": 1438795190, "post_id": 31838795, "comment_id": 51599431, "body": "Honestly, this question is way too cryptic..."}, {"owner": {"reputation": 61, "user_id": 5158094, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/128627395339a3879a45143e33670638?s=128&d=identicon&r=PG&f=1", "display_name": "ram surada", "link": "https://stackoverflow.com/users/5158094/ram-surada"}, "reply_to_user": {"reputation": 8790, "user_id": 1261432, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd64a8b152ef096abdd8d03925bf34?s=128&d=identicon&r=PG&f=1", "display_name": "Synxis", "link": "https://stackoverflow.com/users/1261432/synxis"}, "edited": false, "score": 0, "creation_date": 1438795839, "post_id": 31838795, "comment_id": 51599757, "body": "sorry the question should be U32a+u16b+u16c being compliant on MISRA-C vs U16a+u16b+u32c being non compliant."}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1438797606, "post_id": 31838795, "comment_id": 51600746, "body": "@ramsurada What is &quot;MISRA C&quot;?  What are &quot;u32a&quot;, &quot;u16c&quot;, &quot;u16c&quot;?  (I know the answers, but it&#39;s not obvious to most members of this site I&#39;d bet.)"}, {"owner": {"reputation": 407, "user_id": 4759597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EogPb.png?s=128&g=1", "display_name": "Veriloud", "link": "https://stackoverflow.com/users/4759597/veriloud"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1438882321, "post_id": 31838795, "comment_id": 51643704, "body": "@Tavian MISRA-C is a coding standard framework for developers to provide evidence of awareness and/or avoidance of C language constructs that lead to behavior which is <i>not</i> guaranteed by the standard(s) (i.e. undefined, unspecified, and implementation specific behavior). This also applies to well-defined C language constructs  shown (over many years of practice) to lead to (or strongly hint of) unintended behavior. See misra-c.com"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438888846, "post_id": 31838795, "comment_id": 51647307, "body": "Quote the rule number."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1438797850, "creation_date": 1438797850, "answer_id": 31839713, "question_id": 31838795, "link": "https://stackoverflow.com/questions/31838795/misra-c-compliance-for-arithmetic-addition/31839713#31839713", "title": "MISRA C compliance for arithmetic addition", "body": "<p>With <code>u16a+u16b+u32c</code>, <code>u16a+u16b</code> is <code>unsigned</code> (think 16-bit) addition with potential overflow being lost prior to  subsequent addition to <code>u32c</code>.</p>\n\n<p><code>u32a+u16b+u16c</code> adds <code>u32a+u16b</code> and then uses this 32-bit result when adding <code>16c</code> preventing this loss.</p>\n\n<p>Example</p>\n\n<pre><code>0x8000 + 0x8000 + 0x10000 \n(0x8000 + 0x8000) + 0x10000 \n0 + 0x10000 \n0x10000 \n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>0x10000 + 0x8000 + 0x8000\n(0x10000 + 0x8000) + 0x8000\n0x18000 + 0x8000\n0x20000 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5158094, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/128627395339a3879a45143e33670638?s=128&d=identicon&r=PG&f=1", "display_name": "ram surada", "link": "https://stackoverflow.com/users/5158094/ram-surada"}, "edited": false, "score": 0, "creation_date": 1439033585, "post_id": 31863648, "comment_id": 51701872, "body": "Thanks a lot Chux,rici and Veriloud. I understood now."}], "tags": [], "owner": {"reputation": 407, "user_id": 4759597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EogPb.png?s=128&g=1", "display_name": "Veriloud", "link": "https://stackoverflow.com/users/4759597/veriloud"}, "is_accepted": false, "score": 3, "last_activity_date": 1438923663, "last_edit_date": 1438923663, "creation_date": 1438887065, "answer_id": 31863648, "question_id": 31838795, "link": "https://stackoverflow.com/questions/31838795/misra-c-compliance-for-arithmetic-addition/31863648#31863648", "title": "MISRA C compliance for arithmetic addition", "body": "<p>Since C permits assignments between different arithmetic types to be performed automatically, the use of these implicit conversions can lead to unintended results, with the potential for loss of value, sign or precision. MISRA_C:2012 enforces strong typing via its \"essential type\" model to help warn when this might occur - known as the 10.x rules.</p>\n\n<p>In this case there is a potential for overflow loss with <code>u16a+u16b+u32c</code></p>\n\n<p>Specifically this is a violation MISRA C:2012 Rule-10.7:  \"If a composite expression is used as one operand of an operator in which the usual arithmetic conversions are performed then the other operand shall not have wider essential type\u201d.</p>\n\n<p>Its a common mistake to assume evaluation is influenced by the wider type. The type of the expression is actually determined by the type of its operands after any integral promotion.  You can remedy this by casting to the wider type, or rearrange the operands at the beginning of the expression as you\u2019ve shown in your first example: <code>u32a+u16b+u16c</code></p>\n\n<p>Note: this does not imply that all operands in an expression are of the same essential type. The expression u32a + u16b + u16c is compliant as both additions will notionally be performed in type uint32_t. </p>\n"}], "owner": {"reputation": 61, "user_id": 5158094, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/128627395339a3879a45143e33670638?s=128&d=identicon&r=PG&f=1", "display_name": "ram surada", "link": "https://stackoverflow.com/users/5158094/ram-surada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1122, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438923663, "creation_date": 1438794704, "last_edit_date": 1438887688, "question_id": 31838795, "link": "https://stackoverflow.com/questions/31838795/misra-c-compliance-for-arithmetic-addition", "title": "MISRA C compliance for arithmetic addition", "body": "<p>Given the variables <code>a</code>, <code>b</code>, and <code>c</code>:</p>\n\n<pre><code>uint32_t a;\nuint16_t b, c;\n</code></pre>\n\n<p>According to MISRA-C 2012 standard, the expression <code>a+b+c</code> is compliant whereas <code>b+c+a</code> is not compliant.</p>\n\n<p>Why?</p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "createprocess"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1438799641, "post_id": 31838469, "comment_id": 51601930, "body": "What aspect of this problem are you finding hard?"}, {"owner": {"reputation": 968, "user_id": 990666, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8d529bafee19e75a60b00f035a7a58ae?s=128&d=identicon&r=PG", "display_name": "Molossus Spondee", "link": "https://stackoverflow.com/users/990666/molossus-spondee"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438803332, "post_id": 31838469, "comment_id": 51604146, "body": "I want to be certain my solution is correct and not missing some corner case.  I am hoping in the best case that someone knows of a function in a Windows standard library to do this."}, {"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1438803496, "post_id": 31838469, "comment_id": 51604219, "body": "@DavidHeffernan I hope you&#39;re joking. Code Review does not tolerate this."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "edited": false, "score": 0, "creation_date": 1438803600, "post_id": 31838469, "comment_id": 51604279, "body": "@Mast Not this question as is. A question with the working code that asker has."}, {"owner": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 2, "creation_date": 1438803694, "post_id": 31838469, "comment_id": 51604338, "body": "@DavidHeffernan: Then first ask the OP to post working code, also to make sure some actually exists.  Don&#39;t recommend alternate sites until the question is ready to go."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "edited": false, "score": 1, "creation_date": 1438803770, "post_id": 31838469, "comment_id": 51604386, "body": "@Jamal It would clearly be a different question on a different site. I didn&#39;t say, &quot;ask this question there&quot;, I said &quot;ask there&quot;."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 746, "user_id": 1950231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0910fa12013d5192756e65e68452fb?s=128&d=identicon&r=PG", "display_name": "Jamal", "link": "https://stackoverflow.com/users/1950231/jamal"}, "edited": false, "score": 0, "creation_date": 1438806028, "post_id": 31838469, "comment_id": 51605617, "body": "@Jamal It would be inappropriate to ask the poster to post his working code here, as code review questions are off-topic here. You shouldn&#39;t be recommending that people make their posts off-topic."}, {"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1438806178, "post_id": 31838469, "comment_id": 51605693, "body": "@RossRidge Working code with the question &quot;now I need the inverse, what&#39;s that?&quot; would most probably be on-topic here and off-topic there (feature requests are off-topic on Code Review). Not all working code on SO is off-topic by default."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "edited": false, "score": 0, "creation_date": 1438806637, "post_id": 31838469, "comment_id": 51605941, "body": "@Mast  He doesn&#39;t have any working code that he needs the inverse of. He has a solution to question he asked, but is unsure if it&#39;s correct."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "edited": false, "score": 0, "creation_date": 1511513768, "post_id": 31838469, "comment_id": 81893447, "body": "@ivaigult : I don&#39;t understand the reluctance to use <code>GetCommandLine</code>.  If you are using <code>CreateProcess</code>, you are already in non-portable land.  (Or is this about &quot;I have an array of character pointers that my linux-based code is expecting to pass to <code>exec</code>, and I want to call <code>CreateProcess</code>)"}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1511516039, "post_id": 31838469, "comment_id": 81894844, "body": "@MartinBonner I have some code that manipulates with <code>argv</code> e.g. adds/removes some arguments depending on some condition. Then, I have a function <code>void spawn_process(int argc, char** argv)</code>, which should be cross platform. All the OS aware code works with the function."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511555278, "post_id": 31838469, "comment_id": 81914053, "body": "&quot;<code>argv[i]</code> might contain spaces&quot; - it can only contain spaces if the argument supplied is quoted: <code>my_app.exe &quot;another_app.exe arg1 arg2 arg3&quot;</code>"}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1511858278, "post_id": 31838469, "comment_id": 82010317, "body": "People who down-vote this, please, consider adding a comment, what&#39;s wrong with this post. As for me, it was useful to know that I should perform quotation on my own and there are pitfalls like @MartinBonner noted."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1511861853, "post_id": 31838469, "comment_id": 82012634, "body": "@WeatherVane: It is true that to supply an argument that contains spaces you have to quote it, but so what?  The value of <code>argv[i]</code> won&#39;t contain those quotes - you need to put them back."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 5, "last_activity_date": 1438807108, "creation_date": 1438807108, "answer_id": 31842377, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/31842377#31842377", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>There is no Win32 API that does the reverse of <code>CommandLineToArgvW()</code>.  You have to format the command line string yourself.  This is nothing more than basic string concatenation.</p>\n\n<p>Microsoft documents the format for command-line arguments (or at least the format expected by VC++-written apps, anyway):</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/17w5ykft.aspx\" rel=\"noreferrer\">Parsing C++ Command-Line Arguments</a></p>\n\n<blockquote>\n  <p>Microsoft C/C++ startup code uses the following rules when\n  interpreting arguments given on the operating system command line: </p>\n  \n  <ul>\n  <li><p>Arguments are delimited by white space, which is either a space or a\n  tab.</p></li>\n  <li><p>The caret character (^) is not recognized as an escape character or\n  delimiter. The character is handled completely by the command-line\n  parser in the operating system before being passed to the argv array\n  in the program.</p></li>\n  <li><p>A string surrounded by double quotation marks (\"string\") is\n  interpreted as a single argument, regardless of white space contained\n  within. A quoted string can be embedded in an argument.</p></li>\n  <li><p>A double quotation mark preceded by a backslash (\\\") is interpreted\n  as a literal double quotation mark character (\").</p></li>\n  <li><p>Backslashes are interpreted literally, unless they immediately\n  precede a double quotation mark.</p></li>\n  <li><p>If an even number of backslashes is followed by a double quotation\n  mark, one backslash is placed in the argv array for every pair of\n  backslashes, and the double quotation mark is interpreted as a string\n  delimiter.</p></li>\n  <li><p>If an odd number of backslashes is followed by a double quotation\n  mark, one backslash is placed in the argv array for every pair of\n  backslashes, and the double quotation mark is \"escaped\" by the\n  remaining backslash, causing a literal double quotation mark (\") to be\n  placed in argv.</p></li>\n  </ul>\n</blockquote>\n\n<p>It should not be hard for you to write a function that takes an array of strings and concatenates them together, applying the reverse of the above rules to each string in the array.</p>\n"}, {"comments": [{"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511410164, "post_id": 47428026, "comment_id": 81850031, "body": "Well, you&#39;ll also have to escape any <code>&quot;</code>,<code>\\ </code>, and <code>^</code> characters present.  Could also make the quoting optional, if <code>strchr(argv[i], &#39; &#39;)</code> or <code>strchr(argv[i], &#39;\\t&#39;)</code>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511516162, "post_id": 47428026, "comment_id": 81894911, "body": "@lockcmpxchg8b : The question asks about &quot;CreateProcess&quot;.  You don&#39;t need to quote &#39;^&#39; unless you are going via Cmd.exe."}, {"owner": {"reputation": 1955, "user_id": 8967928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0acd9a5526f9cfc04266e4e2b83f60?s=128&d=identicon&r=PG&f=1", "display_name": "lockcmpxchg8b", "link": "https://stackoverflow.com/users/8967928/lockcmpxchg8b"}, "edited": false, "score": 0, "creation_date": 1511518984, "post_id": 47428026, "comment_id": 81896679, "body": "You are correct. I figured that out doing my implementation."}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 2, "last_activity_date": 1511331520, "creation_date": 1511331520, "answer_id": 47428026, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/47428026#47428026", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>You need to recreate the command line, taking care of having all program name and arguments enclosed in <code>\"</code>. This is done by concatenating a <code>\\\"</code> to these strings, one at the beginning, one at the end.</p>\n\n<p>Assuming the program name to be created is <code>argv[1]</code>, the first argument <code>argv[2]</code> etc...</p>\n\n<pre><code>char command[1024]; // size to be adjusted\nint i;\nfor (*command=0, i=1 ; i&lt;argc ; i++) {\n   if (i &gt; 1) strcat(command, \" \");\n   strcat(command, \"\\\"\");\n   strcat(command, argv[i]);\n   strcat(command, \"\\\"\");\n}\n</code></pre>\n\n<p>Use the 2<sup>nd</sup> argument of CreateProcess</p>\n\n<pre><code>CreateProcess(NULL, command, ...);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 6, "last_activity_date": 1540897158, "last_edit_date": 1540897158, "creation_date": 1511514564, "answer_id": 47469792, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/47469792#47469792", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>The definitive answer on how to quote arguments is on Daniel Colascione's blog: </p>\n\n<p><a href=\"https://blogs.msdn.microsoft.com/twistylittlepassagesallalike/2011/04/23/everyone-quotes-command-line-arguments-the-wrong-way/\" rel=\"nofollow noreferrer\">https://blogs.msdn.microsoft.com/twistylittlepassagesallalike/2011/04/23/everyone-quotes-command-line-arguments-the-wrong-way/</a></p>\n\n<p>I am reluctant to quote the code here because I don't know the license.  The basic idea is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>for each single argument:\n    if it does not contain  \\t\\n\\v\\\", \n        just use as is\n    else\n        output \"\n        for each character\n            backslashes = 0\n            if character is backslash\n                count how many successive backslashes there are\n            fi\n            if eow\n                output the backslashs doubled\n                break\n            else if char is \"\n                output the backslashs doubled\n                output \\\"\n            else\n                output the backslashes (*not* doubled)\n                output character\n            fi\n        rof\n        output \"\n    fi // needs quoting\nrof // each argument\n</code></pre>\n\n<p>If you need to pass the command line to cmd.exe, see the article (it's different).</p>\n\n<p>I think it is crazy that the Microsoft C runtime library doesn't have a function to do this.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8584714"}, "is_accepted": false, "score": 0, "last_activity_date": 1511869124, "creation_date": 1511869124, "answer_id": 47530646, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess/47530646#47530646", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>You can check out the below code if it suits your need, the txt array sz can be used as a string pointer. I have added code support for both Unicode and MBCS, </p>\n\n<pre><code>            #include &lt;string&gt;\n            #include &lt;vector&gt;\n\n            #ifdef _UNICODE\n                #define String std::wstring\n            #else\n                #define String std::string\n            #endif \n\n            int _tmain(int argc, _TCHAR* argv[])\n            {\n                TCHAR sz[1024] = {0};\n                std::vector&lt;String&gt; allArgs(argv, argv + argc);\n\n                for(unsigned i=1; i &lt; allArgs.size(); i++)\n                {\n                    TCHAR* ptr = (TCHAR*)allArgs[i].c_str();\n                    _stprintf_s(sz, sizeof(sz), _T(\"%s %s\"), sz, ptr);\n                }\n\n                return 0;\n            }\n</code></pre>\n"}], "owner": {"reputation": 968, "user_id": 990666, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8d529bafee19e75a60b00f035a7a58ae?s=128&d=identicon&r=PG", "display_name": "Molossus Spondee", "link": "https://stackoverflow.com/users/990666/molossus-spondee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1540897158, "creation_date": 1438793541, "last_edit_date": 1511280639, "question_id": 31838469, "link": "https://stackoverflow.com/questions/31838469/how-do-i-convert-argv-to-lpcommandline-parameter-of-createprocess", "title": "How do I convert argv to lpCommandLine parameter of CreateProcess?", "body": "<p>Let I want to write an application, that launches another application. Like this:</p>\n\n<pre><code># This will launch another_app.exe\nmy_app.exe another_app.exe \n# This will launch another_app.exe with arg1, arg and arg3 arguments\nmy_app.exe another_app.exe arg1 arg2 arg3\n</code></pre>\n\n<p>The problem here is that I'm getting <code>char* argv[]</code> in my <code>main</code> function, but I need to merge it to <code>LPTSTR</code> in order to pass it to <code>CreateProcess</code>.</p>\n\n<p>There is a <code>GetCommandLine</code> function, but I cannot use it because I'm porting code from Linux and tied to <code>argc/argv</code> (otherwise, it's a very ugly hack for me).</p>\n\n<p>I cannot easily merge arguments by hand, because <code>argv[i]</code> might contain spaces.</p>\n\n<p>Basically, I want the reverse of <code>CommandLineToArgvW</code>. Is there a <em>standard</em> way to do this?</p>\n"}, {"tags": ["mysql", "sql", "c", "linker-errors"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438792959, "post_id": 31837816, "comment_id": 51598090, "body": "&quot;I run the code ...&quot; Please get the phrases right: you <b>build</b> the code. <b>Running</b> the code means you start the <b>built</b> program after successful build. Note: that is a linker error. You should check the library paths."}, {"owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438793354, "post_id": 31837816, "comment_id": 51598346, "body": "@Olaf sorry, thanks for pointing that out to me! I have edited my post. The library path <code>&#47;usr&#47;include&#47;mysql</code> is correct, I have checked on the filesystem on the Rasp Pi"}], "owner": {"reputation": 47, "user_id": 5185919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e455264af9b67f2bc4fa5de1a217e6a2?s=128&d=identicon&r=PG&f=1", "display_name": "I Garratt", "link": "https://stackoverflow.com/users/5185919/i-garratt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438793068, "creation_date": 1438791501, "last_edit_date": 1438793068, "question_id": 31837816, "link": "https://stackoverflow.com/questions/31837816/remote-host-not-finding-functions-in-an-included-file-for-sql-mysql", "title": "Remote host not finding functions in an included file for SQL (MySQL)", "body": "<p>I am developing on my Rasp Pi, and I am doing it via LAN from my PC. So far no issues, however I have included the SQL library as <code>#include &lt;mysql.h&gt;</code> in C.</p>\n\n<p>I have the <code>mysql</code> folder installed in <code>/usr/include/mysql</code> inside of which is <code>mysql.h</code>. I also have this as a local copy on my system, and I have added the path to <code>/usr/include/mysql</code> in the additional library directories in the <code>Linker</code> part of the C compiler.</p>\n\n<p>When I attempt a connection (as per the direction on their website) via:</p>\n\n<pre><code> /* Connect to database */\n    if (!mysql_real_connect(conn, server,\n        user, password, database, 0, NULL, 0)) {\n        fprintf(stderr, \"%s\\n\", mysql_error(conn));\n        exit(1);\n    }else{\n       printf(\"Connected\");\n    }\n</code></pre>\n\n<p>I build the code and this error comes up in the error console:</p>\n\n<pre><code>/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/gpsd-3.15/dbConnect.c:21: undefined reference to `mysql_init'\n/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/gpsd-3.15/dbConnect.c:24: undefined reference to `mysql_real_connect'\n/root/.netbeans/remote/192.168.1.132/ian-pc-Windows-x86_64/C/Users/Ian/Documents/NetBeansProjects/gpsComplete/gpsd-3.15/dbConnect.c:26: undefined reference to `mysql_error'\n</code></pre>\n\n<p>I have tried linking the library multipul times, removing the files etc and nothing will change this. Am I missing something when developing remotely? I am struggling with libraries in remote development so far</p>\n"}, {"tags": ["c", "input", "while-loop"], "comments": [{"owner": {"reputation": 5614, "user_id": 4923889, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d19da124fb19e7dba8c5db752a17ec06?s=128&d=identicon&r=PG", "display_name": "Uma Kanth", "link": "https://stackoverflow.com/users/4923889/uma-kanth"}, "edited": false, "score": 3, "creation_date": 1438791695, "post_id": 31837805, "comment_id": 51597261, "body": "How is <code>1 2 3 5 3</code> equal to <code>1 2 3 5 6</code>?"}, {"owner": {"reputation": 5614, "user_id": 4923889, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d19da124fb19e7dba8c5db752a17ec06?s=128&d=identicon&r=PG", "display_name": "Uma Kanth", "link": "https://stackoverflow.com/users/4923889/uma-kanth"}, "edited": false, "score": 0, "creation_date": 1438791818, "post_id": 31837805, "comment_id": 51597341, "body": "Such testcases are only used for testing the output to match the expected output. So you need not worry about the ordering. Try using a command prompt and check. It works fine."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1438791838, "post_id": 31837805, "comment_id": 51597353, "body": "You are <i>unlucky</i> if that code worked. <code>printf(&quot;%d&quot;,&amp;num);</code> should be <code>printf(&quot;%d&quot;,num);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438792246, "post_id": 31837805, "comment_id": 51597614, "body": "use linked list instead of array."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438792528, "post_id": 31837805, "comment_id": 51597783, "body": "use file instead of array."}, {"owner": {"reputation": 37, "user_id": 3550981, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fb1b96c15112932bbf6b50e9649ede6?s=128&d=identicon&r=PG&f=1", "display_name": "user3550981", "link": "https://stackoverflow.com/users/3550981/user3550981"}, "edited": false, "score": 0, "creation_date": 1438800770, "post_id": 31837805, "comment_id": 51602670, "body": "I am not a beginner..know every DS very well.. it was just about finding an easier and better way ."}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 1, "last_activity_date": 1438791821, "creation_date": 1438791821, "answer_id": 31837933, "question_id": 31837805, "link": "https://stackoverflow.com/questions/31837805/how-to-display-output-after-entering-some-integers-separated-by-a-newline-withou/31837933#31837933", "title": "How to display output after entering some integers separated by a newline without the use of arrays?", "body": "<p>If you want to this without using array, then the best way i could think of is recursion. But note, that internally, your values will be stored in the stack frames, and your values will be printed in reverse(because stack is LIFO). Here is how you can do,</p>\n\n<pre><code>void foo(i, t)\n{\n    if(t==i)\n        return;\n    int num;\n    scanf(\"%d\",&amp;num);\n\n    foo(++i, t);\n\n    printf(\"%d\\n\",num);\n}\n</code></pre>\n\n<p>Note, however, that the values will be printed in reverse, as <code>stack</code> is LIFO</p>\n"}, {"tags": [], "owner": {"reputation": 5614, "user_id": 4923889, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d19da124fb19e7dba8c5db752a17ec06?s=128&d=identicon&r=PG", "display_name": "Uma Kanth", "link": "https://stackoverflow.com/users/4923889/uma-kanth"}, "is_accepted": true, "score": 1, "last_activity_date": 1438792247, "creation_date": 1438792247, "answer_id": 31838079, "question_id": 31837805, "link": "https://stackoverflow.com/questions/31837805/how-to-display-output-after-entering-some-integers-separated-by-a-newline-withou/31838079#31838079", "title": "How to display output after entering some integers separated by a newline without the use of arrays?", "body": "<p>Generally such type of input output are used in coding competition where a user is expected to match the expected output to the actual output.</p>\n\n<p>Try pasting the input using a command prompt or online <a href=\"http://ideone.com/vpBFzo\" rel=\"nofollow\">compilers</a> and check it. It is totally fine as the output is as expected.</p>\n\n<p>How does it take if the total input is given at once.</p>\n\n<p>First it reads the <code>t</code> and then it reads the <code>num</code> and prints the number but your printing is actually after the input. This is how the output is checked in a coding competition.</p>\n\n<p>PS: If you want everything after input, use arrays.</p>\n"}], "owner": {"reputation": 37, "user_id": 3550981, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fb1b96c15112932bbf6b50e9649ede6?s=128&d=identicon&r=PG&f=1", "display_name": "user3550981", "link": "https://stackoverflow.com/users/3550981/user3550981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 31838079, "answer_count": 2, "score": 3, "last_activity_date": 1485100040, "creation_date": 1438791468, "last_edit_date": 1485100040, "question_id": 31837805, "link": "https://stackoverflow.com/questions/31837805/how-to-display-output-after-entering-some-integers-separated-by-a-newline-withou", "title": "How to display output after entering some integers separated by a newline without the use of arrays?", "body": "<p>Task:</p>\n\n<blockquote>\n  <p><code>t</code> denotes the number of inputs, followed by <code>t</code> lines, each containing a single integer <code>n</code>.\n  For each integer <code>n</code> given at input, display a line with the value of <code>n</code>.</p>\n  \n  <p><strong>Sample input:</strong></p>\n\n<pre>4\n1\n2\n5\n3</pre>\n  \n  <p><strong>Sample output:</strong></p>\n\n<pre>1\n2\n5\n6</pre>\n</blockquote>\n\n<p>The output should appear after all lines of integer <code>n</code> are taken as input, i.e, it should not display output after each line of input.</p>\n\n<p>How can this be done using a <code>while</code> loop without the use of array to store the input numbers?</p>\n\n<pre><code>while(i&lt;t)\n{\n    scanf(\"%d\",&amp;num);\n    printf(\"%d\",&amp;num);\n    i++;\n}\n</code></pre>\n\n<p>This code is working fine if the input numbers <code>n</code> are separated by a space and appears on the same line. But when the input numbers are provided after a newline, it displays the corresponding output after each input value.</p>\n"}, {"tags": ["c", "arrays", "pointers", "matrix"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1438791693, "post_id": 31837778, "comment_id": 51597259, "body": "do you know what <code>static int (*array)[LIMIT_X][LIMIT_Y];</code> means?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1438791718, "post_id": 31837778, "comment_id": 51597278, "body": "...and what is the difference with <code>static int array[LIMIT_X][LIMIT_Y];</code>?"}, {"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438792595, "post_id": 31837778, "comment_id": 51597826, "body": "I just followed the instruction here <a href=\"http://www.tutorialspoint.com/cprogramming/c_return_arrays_from_function.htm\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438792695, "post_id": 31837778, "comment_id": 51597903, "body": "Then I believe you mis-read it. Am I correct?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1438792891, "post_id": 31837778, "comment_id": 51598045, "body": "@PokeDev The link you provided does not implement anything like this."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438793343, "post_id": 31837778, "comment_id": 51598337, "body": "<code>m1</code> with size of rows and columns pass to <code>matrix_in</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438794525, "post_id": 31837778, "comment_id": 51599059, "body": "This &quot;tutorials&quot; site is pretty bad..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438797592, "post_id": 31837778, "comment_id": 51600736, "body": "The first two questions in your list, verbatim, would be <i>outstanding</i> to search for on this site Ex: <a href=\"https://stackoverflow.com/search?q=%5Bc%5D%5Barray%5D+How+to+return+an+array+from+a+function\"><code>[c][array] How to return an array from a function</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438792754, "post_id": 31838167, "comment_id": 51597949, "body": "So I should try something like: int matrix_1[n][n]; matrix_1 = matrix_in();"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438792790, "post_id": 31838167, "comment_id": 51597973, "body": "Well dealing with a 2-d array would be simple."}, {"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438793181, "post_id": 31838167, "comment_id": 51598223, "body": "tried with: <code>int p1[n][n]; p1 = matrix_in();</code> but getting this error <code>matrix.c:9:5: error: assignment to expression with array type</code>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438793348, "post_id": 31838167, "comment_id": 51598341, "body": "@PokeDev  No you need a double pointer .I was exactly editing my answer for this . Give me a sec."}, {"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438794661, "post_id": 31838167, "comment_id": 51599130, "body": "I&#39;m confused! can you give me a short example code?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1438794665, "post_id": 31838167, "comment_id": 51599133, "body": "&quot;you need a double pointer&quot; - no, you don&#39;t. You need <code>int (*p1)[5]</code>. There is no requirement, nor need, for <i>any</i> double-indirection pointers in this code <i>whatsoever</i>."}, {"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438795374, "post_id": 31838167, "comment_id": 51599515, "body": "that was a mistake. but I fixed it. still I&#39;m getting <code>matrix_in.c:17:9: warning: return from incompatible pointer type [-Wincompatible-pointer-types]</code> error? also I can&#39;t print the values from pointer p1? It prints 1st value n then prints 0 for all other turns."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438832351, "post_id": 31838167, "comment_id": 51613928, "body": "@WhozCraig  Why do you think Sir that there is no need of double pointer ? If the function returns a 2-d array then how exactly can you store it into a <code>int (*p)[5]</code> ?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438834371, "post_id": 31838167, "comment_id": 51614465, "body": "@ameyCU Because <a href=\"https://ideone.com/6Rw8dP\" rel=\"nofollow noreferrer\">you don&#39;t need one</a>. C is flexible enough to allow significant lenience in how you craft your functions."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1438831916, "last_edit_date": 1438831916, "creation_date": 1438792565, "answer_id": 31838167, "question_id": 31837778, "link": "https://stackoverflow.com/questions/31837778/2d-array-and-pointer-manipulation-for-matrix-in-c-language/31838167#31838167", "title": "2D array and pointer manipulation for matrix in C language", "body": "<p>If you want to take input in matrix you probably just need a 2-D array. Declaration would be this -</p>\n\n<pre><code>int array[n][n];  // 2-d array of integers\n</code></pre>\n\n<p>And this  -</p>\n\n<pre><code>int (*p1)[5][5];  // p1 is a pointer to a 5 X 5-element array of int\n</code></pre>\n\n<p>Both the things are different.\nTo return just declare a pointer , allocate memory and then return the pointer. \nAnd intead of this -</p>\n\n<pre><code>static int (*array)[LIMIT_X][LIMIT_Y];\n</code></pre>\n\n<p>you can declare like this -</p>\n\n<pre><code>static int array[LIMIT_X][LIMIT_Y];\n</code></pre>\n\n<p>And return <code>array</code> -\n     <code>return array;</code></p>\n\n<p>This statement -</p>\n\n<pre><code>         `scanf(\"%d\",array[i][j]);`\n                     ^ &amp; required here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438793574, "post_id": 31838355, "comment_id": 51598498, "body": "Yes exactly that&#39;s what I want. can you write the code a little elaborately? Thanks"}, {"owner": {"reputation": 1440, "user_id": 5087118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5200e7aba1ebe3fb6b30b766719b1d3?s=128&d=identicon&r=PG&f=1", "display_name": "bpgeck", "link": "https://stackoverflow.com/users/5087118/bpgeck"}, "reply_to_user": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438796807, "post_id": 31838355, "comment_id": 51600271, "body": "Also @PokeDev I would recommend having your matrix_in() function take in two values that are used for the size of the matrix, like my example code. This would allow your matrix to be any size (excluding very very large values)."}, {"owner": {"reputation": 1440, "user_id": 5087118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5200e7aba1ebe3fb6b30b766719b1d3?s=128&d=identicon&r=PG&f=1", "display_name": "bpgeck", "link": "https://stackoverflow.com/users/5087118/bpgeck"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438798394, "post_id": 31838355, "comment_id": 51601216, "body": "Thanks @WhozCraig for pointing that out. I belive I have fixed the code now"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438798829, "post_id": 31838355, "comment_id": 51601475, "body": "@bpgeck Or you could <a href=\"https://ideone.com/6Rw8dP\" rel=\"nofollow noreferrer\">just do <b>this</b></a> and avoid the pointer to pointer approach. This is, after all, C."}, {"owner": {"reputation": 1440, "user_id": 5087118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5200e7aba1ebe3fb6b30b766719b1d3?s=128&d=identicon&r=PG&f=1", "display_name": "bpgeck", "link": "https://stackoverflow.com/users/5087118/bpgeck"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438798934, "post_id": 31838355, "comment_id": 51601535, "body": "@WhozCraig I didn&#39;t even know that was possible. Nifty"}, {"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 1, "creation_date": 1438801513, "post_id": 31838355, "comment_id": 51603106, "body": "malloc() n calloc() seems new concept to me. I&#39;ll need to read the documentation! Thanks for all the help!"}, {"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 1, "creation_date": 1438852341, "post_id": 31838355, "comment_id": 51623153, "body": "This exactly solved my problem. Thanks for all the answers n helps :)"}], "tags": [], "owner": {"reputation": 1440, "user_id": 5087118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5200e7aba1ebe3fb6b30b766719b1d3?s=128&d=identicon&r=PG&f=1", "display_name": "bpgeck", "link": "https://stackoverflow.com/users/5087118/bpgeck"}, "is_accepted": true, "score": 1, "last_activity_date": 1438799060, "last_edit_date": 1438799060, "creation_date": 1438793144, "answer_id": 31838355, "question_id": 31837778, "link": "https://stackoverflow.com/questions/31837778/2d-array-and-pointer-manipulation-for-matrix-in-c-language/31838355#31838355", "title": "2D array and pointer manipulation for matrix in C language", "body": "<p>If I'm correct is sounds as though you want to call a function that loads a matrix and then return this matrix to be stored in an array elsewhere.</p>\n\n<p>The simple solution to your problem is that you write <code>int (*p1)[5][5]</code> which is actually a <strong>3-dimensional array</strong>. It needs to be changed to a 2-D array like <code>int** p1;</code> which could then be filled using the code block below.</p>\n\n<p>You have to change the return type in <code>matrix_in()</code>. Currently, you are attempting to return and <code>int*</code>, which is an 1-D array of ints. This needs to be changed to <code>int**</code>.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>So say for example I want a function that loads a 2-D array with a bunch of values and then return this array. I could write it as such:</p>\n\n<p><strong>Edit 2:</strong>\nDue to WhozCraig's comment I realized I needed to make some changes</p>\n\n<p><strong>Edit 3:</strong>\nChanged the code from c++ syntax to c syntax (got confused about the question sorry)</p>\n\n<pre><code>int** loadArray(int rows, int cols)\n{\n    int** array_to_return = (int**)malloc(rows * sizeof(int*)); // define one of two dimensions\n    int value_to_increment = 0;\n\n    for (int i = 0; i &lt; rows; i++)\n    {\n        array_to_return[i] = (int*)malloc(cols * sizeof(int)); //define other dimension\n    }\n\n    for (int i = 0; i &lt; rows; i++)\n    {\n        for (int j = 0; j &lt; cols; j++)\n        {\n            array_to_return[i][j] = value_to_increment; // fill each index with value\n            value_to_increment++;\n        }\n    }\n\n    return array_to_return;\n}\n</code></pre>\n\n<p>This function loads an array with sequential values and then return the array. Now, since we malloc, you will need to <code>free()</code> the array at some point so as to avoid memory leaks.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438795703, "post_id": 31838496, "comment_id": 51599688, "body": "Thanks for the explanation. but incrementing the pointer should then print the full array? which is not happening? It prints only row 0 n for row 1 it prints just 0 for each element."}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438797425, "post_id": 31838496, "comment_id": 51600632, "body": "I may have (probably did) oversimplify this - my apologies.  I&#39;m not 100% familiar with the inner workings of gcc (assuming that&#39;s the compiler you&#39;re using), but it may or may not put the rows of the array next to each other when you declare an array as <code>int a[x][y]</code>.  So there might be a gap in the memory locations of the various rows (especially if you declare this array on the stack).  In this case, you&#39;ll need a nested for loop to access the entire array.  You can always manually create a 1-d array that emulates a 2-d array as above."}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "edited": false, "score": 0, "creation_date": 1438797512, "post_id": 31838496, "comment_id": 51600687, "body": "Regardless, the point about passing the pointer to the 0th element of the array (so for <code>int a[x][y]</code>, passing <code>a</code> as a pointer to the entire array or passing <code>a[x]</code> as a pointer to a particular row) should still stand."}], "tags": [], "owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "is_accepted": false, "score": 1, "last_activity_date": 1438793626, "creation_date": 1438793626, "answer_id": 31838496, "question_id": 31837778, "link": "https://stackoverflow.com/questions/31837778/2d-array-and-pointer-manipulation-for-matrix-in-c-language/31838496#31838496", "title": "2D array and pointer manipulation for matrix in C language", "body": "<p>Arrays in C are represented as a contiguous chunk of memory with a pointer pointing to the 0th element.  Thus, an array generally looks like this:</p>\n\n<pre><code>---------------------\n| 0 | 1 | 2 | 3 | 4 | //A five element array\n---------------------\n  ^\n  |\npointer\nto 0th\nelement\n</code></pre>\n\n<p>Notice that by pointing to the first element in the array, you can access the rest of the elements in the array by simply incrementing the pointer (known as pointer arithmetic).  Thus, if <code>int *a</code> points to element 0, we know that we have to increment <code>a</code> four times to get to element 4.</p>\n\n<p>2-dimensional arrays are a bit trickier; humans think of a 2-d array like this:</p>\n\n<pre><code>---------------------\n| 0 | 1 | 2 | 3 | 4 |  //row 0\n---------------------\n| 0 | 1 | 2 | 3 | 4 |  //row 1\n---------------------\n</code></pre>\n\n<p>However, computers have no notion of 2 dimensions in memory; a computer just sees (theoretically) one infinitely long row of memory.  Thus, the computer arranges a 2-d array like this:</p>\n\n<pre><code>-----------------------------------------\n| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | \n-----------------------------------------\n  ^                   ^\n  |                   |\nrow 0               row 1\nbegins              begins\nhere                here\n</code></pre>\n\n<p>This means the computer does some simple arithmetic with the modulus operator to access row 1:</p>\n\n<pre><code>a[x][y] = a[ (y * array_width) + x ]\n</code></pre>\n\n<p>So <code>a[1][2]</code> becomes <code>a[1 * 5 + 2] = a[7]</code>.</p>\n\n<p>This means that to pass a pointer to a 2-d array into a function, <strong>you still only need to pass the pointer to the 0th element in the array</strong>.  You can then access the entire array as usual.</p>\n\n<p>Other answers do a better job of explaining what exactly is wrong with your code - I just want to make sure you understand how arrays work in C :)</p>\n"}], "owner": {"reputation": 49, "user_id": 4915488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a344f00f8b8d4beda0923a0ad2a7c9d?s=128&d=identicon&r=PG", "display_name": "Dipanjan Patra", "link": "https://stackoverflow.com/users/4915488/dipanjan-patra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2387, "favorite_count": 1, "accepted_answer_id": 31838355, "answer_count": 3, "score": 2, "last_activity_date": 1438831916, "creation_date": 1438791409, "question_id": 31837778, "link": "https://stackoverflow.com/questions/31837778/2d-array-and-pointer-manipulation-for-matrix-in-c-language", "title": "2D array and pointer manipulation for matrix in C language", "body": "<p>I'm doing a project to create a full matrix suit in C. Which could do most things related to matrix. I've already done it in Python successfully. But I'm trying to do it in C which is actually needed. The way I want to do it is create separate file for separate modules. But I'm really confused about arrays and pointers. I know pointers represent the address of that value.</p>\n\n<p>What I want to do:</p>\n\n<ol>\n<li>Make a function module which asks for row n column number n then takes input of the matrix n then returns the array containing the matrix to another empty array so I could just call the function everytime I need a matrix input.</li>\n</ol>\n\n<p>Things I don't understand:</p>\n\n<ol>\n<li><p>How to return an array from a function?</p></li>\n<li><p>or How to return a 2D pointer value from a function? or access it?</p></li>\n<li><p>Anything else wrong with my code?</p></li>\n</ol>\n\n<p>Errors I'm getting:</p>\n\n<ol>\n<li><p>matrix_in.c:17:9: warning: return from incompatible pointer type [-Wincompatible-pointer-types]</p></li>\n<li><p>matrix.c:9:5: warning: assignment from incompatible pointer type [-Wincompatible-pointer-types]</p></li>\n<li><p>matrix.c:16:11: warning: format '%d' expects argument of type 'int', but argument 2 has type 'int (*)[5]' [-Wformat=]</p></li>\n</ol>\n\n<p>So far my code is as follows:</p>\n\n<p>header /* header.h */</p>\n\n<pre><code>#ifndef HEADER_H_INCLUDED\n#define HEADER_H_INCLUDED\n\n#define LIMIT_X 100\n#define LIMIT_Y 100\nint* matrix_in();\n\n#endif\n</code></pre>\n\n<p>matrix_in\n    /* matrix_in.c */</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"header.h\"\n\nint* matrix_in()\n{\n    int i,j;\n    //int* point;\n    static int (*array)[LIMIT_X][LIMIT_Y];\n    printf(\"please enter the elements:\\n\");\n    for (i=0;i&lt;2;i++)\n    {\n        for (j=0;j&lt;2;j++)\n        {\n            scanf(\"%d\",array[i][j]);\n        }\n    }\n    return array;\n}\n</code></pre>\n\n<p>matrix\n    /* matrix.c */</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"header.h\"\n\nint main()\n{\n    int m1[2][2],m2,i,j;\n    int (*p1)[5][5];\n\n    p1 = matrix_in();\n    //p2 = matrix_in();\n\n    for (i=0;i&lt;2;i++)\n    {\n        for (j=0;j&lt;2;j++)\n        {\n            printf(\"%d\\t\", *p1);\n            p1++;\n        }\n    }   \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file-handling", "dev-c++"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438791064, "post_id": 31837609, "comment_id": 51596876, "body": "at the <code>gets</code> part, for instance..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1438791211, "post_id": 31837609, "comment_id": 51596981, "body": "And you are never assigning <code>c</code> inside the loop, but checking it for <code>EOF</code>."}, {"owner": {"reputation": 983, "user_id": 2146515, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/syFVS.jpg?s=128&g=1", "display_name": "user1", "link": "https://stackoverflow.com/users/2146515/user1"}, "edited": false, "score": 0, "creation_date": 1438791217, "post_id": 31837609, "comment_id": 51596984, "body": "haven&#39;t used c in a while but isn&#39;t &quot;scanf&quot; used to get input??"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1438791493, "post_id": 31837609, "comment_id": 51597145, "body": "<code>fscanf(p,&quot;%s&quot;,word);</code> should be <code>c = fscanf(p,&quot;%s&quot;,word);</code>. Also, <code>if(pos=0)</code> --&gt; <code>if(pos==0)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1438800852, "creation_date": 1438800852, "answer_id": 31840604, "question_id": 31837609, "link": "https://stackoverflow.com/questions/31837609/program-not-giving-any-output-after-taking-input-from-user/31840604#31840604", "title": "Program not giving any output after taking input from user", "body": "<p>Looking at the comments, your code should be something like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include &lt;ctype.h&gt;\nint main()\n{\n    char user[20];\n    char word[20];\n    int n, pos=0, sum=0;\n    unsigned int i, l;\n    FILE *p;\n\n    do {\n        printf(\"Enter the word you want to look for\\n\");\n    } while (gets(user)==0);\n    user[strlen(user)-1]= '\\0'; // remove trailing \\n\n\n    if ((p=fopen(\"D:\\\\trees.txt\",\"r+\"))==0) {printf(\"Error opening file\\n\"); exit(0);}\n    do\n    {\n        pos=0;\n        n= fscanf(p,\"%s\",word);\n        if (n==1)\n        {\n            if(strlen(word)==(l=strlen(user)))\n            {\n                for(i=0; i&lt;l; i++)\n                {\n                    if(!(word[i]==user[i]||word[i]==tolower(user[i])||word[i]==toupper(user[i])))\n                    {\n                        pos=1;\n                        break;\n                    }\n                }\n            }\n            else pos=1;\n\n            if(pos==0) sum++;\n        }\n    }\n    while(n==1);\n\n    printf(\"\\nNumber of times %s appears is %d\",user,sum);\n\n    fclose(p);\n    return(1);\n}\n</code></pre>\n\n<p>(with some optimizations and additions)</p>\n"}], "owner": {"reputation": 31, "user_id": 5189903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ccd6645003012f7d8676b05cbbfaa47?s=128&d=identicon&r=PG&f=1", "display_name": "Popeye", "link": "https://stackoverflow.com/users/5189903/popeye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438800852, "creation_date": 1438790960, "last_edit_date": 1438796484, "question_id": 31837609, "link": "https://stackoverflow.com/questions/31837609/program-not-giving-any-output-after-taking-input-from-user", "title": "Program not giving any output after taking input from user", "body": "<p>I was creating on a very basic program in C which takes a word from user as input and searches for how many times it appears in a text file and gives output.\nThe code is:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main()\n{\nchar user[20];\nchar word[20];\nint i,pos=0,sum=0;\nchar c;\nc='a';\nprintf(\"Enter the word you want to look for\\n\");\ngets(user);\nFILE *p;\np=fopen(\"D:\\\\trees.txt\",\"r+\");\ndo\n{\n    pos=0;\n    fscanf(p,\"%s\",word);\n    if(c!=EOF)\n    {\n        if(strlen(word)==strlen(user))\n        {\n            for(i=0;i&lt;strlen(user);i++)\n            {\n                if(word[i]==user[i]||word[i]==user[i]+32||word[i]==user[i]-32)\n                {\n                }\n                else\n                {\n                    pos=1;\n                    break;\n                }\n            }\n        }\n        else\n        {\n            pos=1;\n        }\n        if(pos=0)\n        {\n            sum++;\n        }\n    }\n}\nwhile(c!=EOF)\n\n;printf(\"\\nNumber of times %s appears is %d\",user,sum);\n\nfclose(p);\n}\n</code></pre>\n\n<p>Now the program takes the input fine, but doesn't give any output.\nLooks like this:\n<a href=\"https://i.stack.imgur.com/paF5V.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/paF5V.jpg\" alt=\"this is the output window, which seems to be loading\"></a></p>\n\n<p>What have I done wrong?</p>\n"}, {"tags": ["c++", "c", "signed", "unsigned-integer", "size-t"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1438791169, "post_id": 31837603, "comment_id": 51596947, "body": "POSIX has <code>ssize_t</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438791850, "post_id": 31837603, "comment_id": 51597362, "body": "Note: C does <i>not</i> define &quot;size_t is always typedef-ed to the largest unsigned integer type in the system&quot;.  <code>uintmax_t</code> is a better candidate &quot;an unsigned integer type capable of representing any value of any unsigned integer type&quot;"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1438792177, "post_id": 31837603, "comment_id": 51597563, "body": "<code>std::make_signed_t&lt;std::size_t&gt;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438792469, "post_id": 31837603, "comment_id": 51597759, "body": "Scott Meyer article, concerning array sizes, conveniently incorrectly fails valid huge array sizes.  Although this is certainly less  a common issue than incorrect negative sizes, it simply trades one error detection for another.  If the parameter is whole numbers in [INTMAX_MIN...INTMAX_MAX], use <code>intmax_t</code>, else if in range [0...UINTMAX_MAX], use <code>uintmax_t</code>, if FP, use <code>long double</code>, if boolean, use <code>bool</code>, etc."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1438841342, "post_id": 31837603, "comment_id": 51616756, "body": "the signed counterpart of <code>size_t</code> is probably <a href=\"http://en.cppreference.com/w/cpp/types/ptrdiff_t\" rel=\"nofollow noreferrer\"><code>ptrdiff_t</code></a>, but it&#39;s still not the largest integer type"}], "answers": [{"comments": [{"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1438791506, "post_id": 31837693, "comment_id": 51597150, "body": "std::numeric_limits&lt;ssize_t&gt;::max(), std::numeric_limits&lt;ssize_t&gt;::is_signed, etc"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1616233766, "post_id": 31837693, "comment_id": 117941733, "body": "<code>size_t</code> is not even the largest integer type. It may have only 16 bits in 16-bit systems or 32 bits in 32-bit systems"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 5, "last_activity_date": 1438791155, "creation_date": 1438791155, "answer_id": 31837693, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31837693#31837693", "title": "Get the largest signed integer type in C++", "body": "<p>The signed equivalent of <code>size_t</code> is simply <code>ssize_t</code> but this type is not defined in C99 standard even if it is known to many compilers.</p>\n\n<p>For the C99 standard  the largest signed integer type is defined as <code>intmax_t</code>.</p>\n\n<p>Reference : 7. Library / 7.18 Integer types  / 7.18.1.5 Greatest-width integer types</p>\n"}, {"tags": [], "owner": {"reputation": 1974, "user_id": 581903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88553655e36a2f15070d3e2a61f56390?s=128&d=identicon&r=PG", "display_name": "TAS", "link": "https://stackoverflow.com/users/581903/tas"}, "is_accepted": false, "score": 4, "last_activity_date": 1438792258, "creation_date": 1438792258, "answer_id": 31838083, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31838083#31838083", "title": "Get the largest signed integer type in C++", "body": "<p>The standard type to use is <code>std::intmax_t</code> which is defined in <code>&lt;cstdint&gt;</code>. To get the maximum value you can use <code>std::numeric_limits&lt;intmax_t&gt;::max()</code>.</p>\n\n<p>Sample code:</p>\n\n<pre><code>#include &lt;cstdint&gt;\n#include &lt;iostream&gt;\n#include &lt;limits&gt;\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; \"max size = \" &lt;&lt; std::numeric_limits&lt;intmax_t&gt;::max() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": false, "score": 2, "last_activity_date": 1616233688, "last_edit_date": 1616233688, "creation_date": 1438794093, "answer_id": 31838646, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31838646#31838646", "title": "Get the largest signed integer type in C++", "body": "<p>The largest signed integer type in recent C and C++ standards is <code>long long</code>. Until there is a type wider than <code>long long</code> you can always use it. If you want to be more future proof, use <code>intmax_t</code>.</p>\n<hr />\n<blockquote>\n<p><code>size_t</code> is always typedef-ed to the largest unsigned integer type in the system</p>\n</blockquote>\n<h1>That's completely incorrect!!! \u274c</h1>\n<p><code>size_t</code> in 32-bit systems is typically also a 32-bit type, which obviously <strong>not</strong> the widest type possible. It's only guaranteed to be big enough to represent the size of the biggest object on the system. <code>long long</code> is obviously much wider in that cases. In many 16-bit systems it has only 16 bits, not even the same range as `long.</p>\n<hr />\n<p>In case <code>size_t</code> is needed, <code>ptrdiff_t</code> can be used as a signed counterpart. But it's not the biggest type either.</p>\n<blockquote>\n<p>For <code>char</code> arrays shorter than <code>PTRDIFF_MAX</code>, <code>std::ptrdiff_t</code> acts as the signed counterpart of <code>std::size_t</code>: it can store the size of the array of any type and is, on most platforms, synonymous with <code>std::intptr_t</code></p>\n<p><a href=\"http://en.cppreference.com/w/cpp/types/ptrdiff_t\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/types/ptrdiff_t</a></p>\n</blockquote>\n<p>In C++20 <a href=\"https://en.cppreference.com/w/cpp/iterator/size\" rel=\"nofollow noreferrer\"><code>std::ssize</code></a> was introduced and guess what, <strong>it also uses <code>ptrdiff_t</code> as the signed counterpart of <code>size_t</code></strong></p>\n"}, {"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1530687555, "post_id": 31856601, "comment_id": 89318201, "body": "<code>ssize_t</code> is not the largest signed integer type in 32-bit Linux or 64-bit x32 ABI Linux either"}], "tags": [], "owner": {"reputation": 315, "user_id": 3941935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c538ac627f3e153ee89f59122a644728?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Sodzawiczny", "link": "https://stackoverflow.com/users/3941935/tomasz-sodzawiczny"}, "is_accepted": true, "score": 1, "last_activity_date": 1438866264, "creation_date": 1438866264, "answer_id": 31856601, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c/31856601#31856601", "title": "Get the largest signed integer type in C++", "body": "<blockquote>\n  <p>But how can I get the largest signed integer type in the system? </p>\n</blockquote>\n\n<p>In C++11's <code>&lt;cstdint&gt;</code> you can find type <code>intmax_t</code>, which is defined after the C standard (7.20.1.5):</p>\n\n<blockquote>\n  <p>The following type designates a signed integer type capable of\n  representing any value of any signed integer type</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Is there any typedef similar to size_t which is signed? </p>\n</blockquote>\n\n<p>No, not in the C++ standard. POSIX defines <code>ssize_t</code>, <strong>but</strong>:</p>\n\n<ul>\n<li>it is not meant to replace <code>size_t</code> (which itself is also more restricted by POSIX)</li>\n<li>is not meant to store/pass negative values, but to indicate error:\n\n<blockquote>\n  <p><code>ssize_t</code> shall be capable of storing values at least in the range [-1, {SSIZE_MAX}].</p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<blockquote>\n  <p>So, I should pass in signed integer type to the API. (...) Or should I\n  just use size_t instead?</p>\n</blockquote>\n\n<p>If your interface is meant to deal with C++ arrays, <code>size_t</code> is the only type that is assured by the standard to be able to hold any of the possible array indexes. Using any other type you might (in theory) loose ability to address all of the array (which is even noted in the article you linked).</p>\n\n<p>Using <code>size_t</code> for indexing purposes is therefore common and customary - and used by many libraries (including STL).</p>\n"}], "owner": {"reputation": 2858, "user_id": 439888, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da051abac41879aed4060d544d37fd6f?s=128&d=identicon&r=PG", "display_name": "SkypeMeSM", "link": "https://stackoverflow.com/users/439888/skypemesm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 0, "accepted_answer_id": 31856601, "answer_count": 4, "score": 1, "last_activity_date": 1616233688, "creation_date": 1438790949, "last_edit_date": 1561947168, "question_id": 31837603, "link": "https://stackoverflow.com/questions/31837603/get-the-largest-signed-integer-type-in-c", "title": "Get the largest signed integer type in C++", "body": "<p>Let's say I have to accept a size as an argument to an interface which deals with arrays. For e.x.</p>\n\n<pre><code>void doSomethingRelatedToArrays(const size_t length)\n</code></pre>\n\n<p>Here, I used <code>size_t</code> with the following in mind:</p>\n\n<ul>\n<li>length must always be positive</li>\n<li><code>size_t</code> is always typedef-ed to the largest unsigned integer type in the system. <code>std::size_t</code> can store the maximum size of a theoretically possible object of any type.</li>\n</ul>\n\n<p>However, I should not use unsigned types in my interfaces because the client can pass in a negative number, which is implicitly converted to an unsigned number and I do not have any way of validating it in my method. Refer to Scott Meyer's article on this subject <a href=\"http://www.aristeia.com/Papers/C++ReportColumns/sep95.pdf\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>So, I should pass in signed integer type to the API. But how can I get the largest signed integer type in the system? Is there any typedef similar to <code>size_t</code> which is signed? Or should I just use <code>size_t</code> instead?</p>\n"}, {"tags": ["c", "pointers", "misra"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438790617, "post_id": 31837410, "comment_id": 51596592, "body": "As stated, arrays are not pointers. Does the following work: <code>&amp;TaskParams[0]</code>? @Olaf, not sure if you mean TaskParams is not writable, or its contents are not writable."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1438790844, "post_id": 31837410, "comment_id": 51596736, "body": "@Kupiakos: Sorry, I was not clear about that. The name/address of the array is not writeable, of course the array contents <i>is</i>."}, {"owner": {"reputation": 1415, "user_id": 1502121, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/0Lsxb.jpg?s=128&g=1", "display_name": "m4l490n", "link": "https://stackoverflow.com/users/1502121/m4l490n"}, "edited": false, "score": 0, "creation_date": 1438791087, "post_id": 31837410, "comment_id": 51596894, "body": "&amp;TaskParams[0] does not work either."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438791604, "post_id": 31837410, "comment_id": 51597202, "body": "Please quote the exact error message you are getting."}, {"owner": {"reputation": 1415, "user_id": 1502121, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/0Lsxb.jpg?s=128&g=1", "display_name": "m4l490n", "link": "https://stackoverflow.com/users/1502121/m4l490n"}, "edited": false, "score": 0, "creation_date": 1438791685, "post_id": 31837410, "comment_id": 51597256, "body": "This is the exact quote: MISRA-C rule 11.3 violation: [R] A cast shall not be performed between a pointer to object type and a pointer to a different object type"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438792273, "post_id": 31837410, "comment_id": 51597626, "body": "Your compliance checker might be buggy. Its quality-of-implementation is nonexistent. What the... You are saying I cannot convert between different pointer types, and you are not naming these types? Well, you must be working for the automotive industry!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438792279, "post_id": 31837410, "comment_id": 51597632, "body": "Try designated initializers. And check for updates/erratas of your checker tool (would not be the first tool reporting false positives)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1438793849, "post_id": 31837410, "comment_id": 51598644, "body": "I don&#39;t know, Wikipedia lists a bunch, try those that have free evaluation. I have no idea if any of them is good, I don&#39;t believe in MISRA-C and fortunately I&#39;m not forced to use it."}, {"owner": {"reputation": 1415, "user_id": 1502121, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/0Lsxb.jpg?s=128&g=1", "display_name": "m4l490n", "link": "https://stackoverflow.com/users/1502121/m4l490n"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438793978, "post_id": 31837410, "comment_id": 51598732, "body": "@n.m.: Yes it&#39;s for the automotive industry and yes it&#39;s being enforced here. Also the checker is for a tool made by Altium so I think has tons of errors. Is the TriCore Eclipse IDE v5.0r2"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438794493, "post_id": 31837410, "comment_id": 51599039, "body": "There is no cast being performed anywhere in the posted code. I believe 11.3 cannot possibly apply to a situation without a type conversion operator (commonly known as &quot;cast&quot;) being explicitly present."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1438795442, "post_id": 31837410, "comment_id": 51599554, "body": "Does the precise snippet above generate the error, or did you provide a simplified view of code that has not actually been run through the tool? Can you actually provide a minimal compilable example that also generates the error?"}, {"owner": {"reputation": 1415, "user_id": 1502121, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/0Lsxb.jpg?s=128&g=1", "display_name": "m4l490n", "link": "https://stackoverflow.com/users/1502121/m4l490n"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1438797718, "post_id": 31837410, "comment_id": 51600810, "body": "@jxh: That is the exact same code snippet, I didn&#39;t even changed the names."}, {"owner": {"reputation": 407, "user_id": 4759597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EogPb.png?s=128&g=1", "display_name": "Veriloud", "link": "https://stackoverflow.com/users/4759597/veriloud"}, "edited": false, "score": 0, "creation_date": 1438799949, "post_id": 31837410, "comment_id": 51602106, "body": "can you show us the typedefs for TaskParam_t and TaskConfig_t? Though it doesn&#39;t matter, this is not a violation."}, {"owner": {"reputation": 1415, "user_id": 1502121, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/0Lsxb.jpg?s=128&g=1", "display_name": "m4l490n", "link": "https://stackoverflow.com/users/1502121/m4l490n"}, "reply_to_user": {"reputation": 407, "user_id": 4759597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EogPb.png?s=128&g=1", "display_name": "Veriloud", "link": "https://stackoverflow.com/users/4759597/veriloud"}, "edited": false, "score": 0, "creation_date": 1438803298, "post_id": 31837410, "comment_id": 51604124, "body": "@Veriloud: I&#39;ve included all the data types related. Maybe MISRA rule checking is like error checking with klockwork, I don&#39;t know."}, {"owner": {"reputation": 407, "user_id": 4759597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EogPb.png?s=128&g=1", "display_name": "Veriloud", "link": "https://stackoverflow.com/users/4759597/veriloud"}, "edited": false, "score": 1, "creation_date": 1438804336, "post_id": 31837410, "comment_id": 51604737, "body": "@m4l490n, yep, nothing strange on the updated example, this is not a violation, n.m. is correct (though wrong for not believing in MISRA ;-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438867581, "post_id": 31837410, "comment_id": 51633527, "body": "@m4l490n: As you had a similar problem some days ago, I&#39;d strongly recommend to trust moreyour wits than the tool. On the next error, kick the vendor in the bu** first. No harm if <b>that</b> proves wrong lateron."}, {"owner": {"reputation": 2441, "user_id": 2313921, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0d70275bb0c90980f4149cb664bb768e?s=128&d=identicon&r=PG", "display_name": "thunderbird", "link": "https://stackoverflow.com/users/2313921/thunderbird"}, "edited": false, "score": 0, "creation_date": 1455736546, "post_id": 31837410, "comment_id": 58626985, "body": "one cast that i do see is from int32_t(NUM_TASKS is not unsigned) to uint8_t(uint8_t NumTasks). dunno how your misra tool didnt catch that."}], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 4759597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EogPb.png?s=128&g=1", "display_name": "Veriloud", "link": "https://stackoverflow.com/users/4759597/veriloud"}, "edited": false, "score": 0, "creation_date": 1438799866, "post_id": 31838875, "comment_id": 51602059, "body": "n.m. is correct, there is no reason for a 11.3 violation here at all that I, nor my tool, can find."}, {"owner": {"reputation": 407, "user_id": 4759597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EogPb.png?s=128&g=1", "display_name": "Veriloud", "link": "https://stackoverflow.com/users/4759597/veriloud"}, "edited": false, "score": 0, "creation_date": 1438800489, "post_id": 31838875, "comment_id": 51602473, "body": "Also, yes, cast is defined in &quot;MISRA-C:2012 C.1.2 Explicit Conversions&quot; as with convention."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 4, "last_activity_date": 1438794995, "creation_date": 1438794995, "answer_id": 31838875, "question_id": 31837410, "link": "https://stackoverflow.com/questions/31837410/why-is-this-code-not-compliant-with-misra-c-2012-rule-11-3/31838875#31838875", "title": "Why is this code not compliant with MISRA-C 2012 Rule 11.3", "body": "<p>MISRA-C 2004 6.10.7 implies that a cast is an <strong>explicit</strong> type conversion, and gives a bunch of examples in the form of <code>(type)value</code>. This is consistent with the common definition of the term. I believe we can use this definition for the purpose of discussing MISRA-C compliance.</p>\n\n<p>There is no cast being performed anywhere in the posted code. 11.3 says something about casting between different types. I believe 11.3 cannot possibly apply to a situation without a cast, as defined above, being present, no matter what the types involved are.</p>\n\n<p>I conclude that the checker is at fault, and a gross one at that.</p>\n"}], "owner": {"reputation": 1415, "user_id": 1502121, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/0Lsxb.jpg?s=128&g=1", "display_name": "m4l490n", "link": "https://stackoverflow.com/users/1502121/m4l490n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438803205, "creation_date": 1438790383, "last_edit_date": 1438803205, "question_id": 31837410, "link": "https://stackoverflow.com/questions/31837410/why-is-this-code-not-compliant-with-misra-c-2012-rule-11-3", "title": "Why is this code not compliant with MISRA-C 2012 Rule 11.3", "body": "<p>I'm having a very hard time understanding why the following code gives me two errors regarding rule 11.3</p>\n\n<pre><code>#define NUM_TASKS 3\n\ntypedef struct\n{\n    void (*TaskFunc)(void);\n    uint32_t     Periodicity;\n    uint32_t     StartOffset;\n} TaskConfig_t;\n\ntypedef enum\n{\n    IDLE,\n    RUNNING\n} TaskStatus_t;\n\ntypedef struct\n{\n    uint32_t ExecTime;\n    uint32_t MinExecTime;\n    uint32_t MaxExecTime;\n} TaskMetrics_t;\n\ntypedef struct\n{\n    uint32_t TimeToRun;\n    uint8_t OverrunCnt;\n    TaskStatus_t Status;  \n    TaskMetrics_t Metrics;      \n} TaskParam_t;\n\ntypedef struct\n{\n  uint32_t *CpuUtilizationPercent;\n  uint32_t *Counter;\n  TaskParam_t *Params;\n  TaskConfig_t *Tasks;\n  uint8_t NumTasks;\n} PPTS_Config_t;\n\nstatic uint32_t PPTS_CpuUtilizationPercent;\nstatic uint32_t PPTS_Counter;\n\nstatic TaskParam_t TaskParams[NUM_TASKS];\n\nstatic TaskConfig_t TaskConfig[NUM_TASKS];\n\nconst PPTS_Config_t CnfPPTS =\n{\n  &amp;PPTS_CpuUtilizationPercent,\n  &amp;PPTS_Counter,\n  TaskParams,  /* MISRA-C rule 11.3 violation */\n  TaskConfig,   /* MISRA-C rule 11.3 violation */\n  NUM_TASKS\n};\n</code></pre>\n\n<p>And in both cases the error is: A cast shall not be performed between a pointer to object type and a pointer to a different object type</p>\n\n<p>The thing here is that both <strong>TaskParams</strong> and <strong>TaskConfig</strong> are pointers of the same type that are the struct elements <strong>Params</strong> and <strong>Tasks</strong> respectively. I don't understand why I can't assign <strong><em>TaskParams</em></strong> to <strong><em>*Params</em></strong> if they have the exact same type. Am I missign something?</p>\n\n<p>Thank you very much for helping and I hope this could be explained because I'm really frustrated.</p>\n\n<p><strong>EDIT:</strong> I've included all the related data types if that helps somehow.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["c++", "c", "cmake", "clion"], "answers": [{"comments": [{"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1438795793, "post_id": 31838850, "comment_id": 51599733, "body": "one ore question, since I know which files I am accessing in my source code. Is there a way to make a list of files and pass those out to cmake which can then be used? for example in my c code I make reference to filea.txt, can I have this be passed back to cmake? Then instead of globbing the files I just have the build automatically read a list of files and update accordingly?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "reply_to_user": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1438803313, "post_id": 31838850, "comment_id": 51604134, "body": "You may create file which looks like <code>set(files_list ...)</code> and <code>include</code> it from CMakeLists.txt. Whenever this file will be changed (e.g. while building project), next <code>make</code> call will trigger reconfigure step. If you need more detailed info, please, ask new question."}, {"owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "edited": false, "score": 0, "creation_date": 1438803520, "post_id": 31838850, "comment_id": 51604229, "body": "thanks, i&#39;ll ask a new question if I cannot get it sorted out."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1438794900, "creation_date": 1438794900, "answer_id": 31838850, "question_id": 31836935, "link": "https://stackoverflow.com/questions/31836935/clion-run-cmake-on-each-build/31838850#31838850", "title": "clion run cmake on each build", "body": "<p>If you want CMake to make some action whenever some file is changed, you should create a rule using <code>add_custom_command</code> and pass file via <code>DEPENDS</code> argument. Note, that only file-level dependencies are supported by CMake, for make dependency on directory you need to list all files in it.</p>\n\n<pre><code># Collect list of files within directory.\nFILES(GLOB files_list RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}/resources/\n    \"${CMAKE_CURRENT_SOURCE_DIR}/resources/*\") \n# This will contain full paths to files in binary directory. \nset(binary_files_list)\nforeach(file ${files_list})\n    set(source_file ${CMAKE_CURRENT_SOURCE_DIR}/resources/${file})\n    set(binary_file ${CMAKE_CURRENT_BINARY_DIR}/bin/resources/${file})\n    add_custom_command(OUTPUT ${binary_file}\n        COMMAND cmake -E ${source_file} ${binary_file}\n        DEPENDS ${source_file})\n    list(APPEND binary_files_list ${binary_file})\nendforeach()\nadd_custom_target(resources DEPENDS ${binary_files_list})\n</code></pre>\n\n<p>Note, that in case of adding/removing files you should to run <code>cmake</code> explicitely. That's why hardcoded files list is preferred to <code>GLOB</code>ing.</p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1387, "favorite_count": 0, "accepted_answer_id": 31838850, "answer_count": 1, "score": 0, "last_activity_date": 1438794900, "creation_date": 1438789121, "question_id": 31836935, "link": "https://stackoverflow.com/questions/31836935/clion-run-cmake-on-each-build", "title": "clion run cmake on each build", "body": "<p>I am not sure if its possible to do this with clion, I was testing out the program and enjoy using it to write c code because the ctags and etags support is really nice.</p>\n\n<p>I am copying some files over from the cmake source tree to the bin location on each build. While using clion if I update some of the files that I am copying the results aren't updated within clion.</p>\n\n<p>If I instead go back to the terminal and just run the typical cmake steps</p>\n\n<pre><code>cmake ../ &amp;&amp; make &amp;&amp; bin/./program\n</code></pre>\n\n<p>that copies the updated files and I am able to see my results.</p>\n\n<p>This is the CMake command that I am using in my build.</p>\n\n<pre><code>FILE(COPY ${CMAKE_CURRENT_SOURCE_DIR}/resources/ DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/bin/resources/)\n</code></pre>\n\n<p>I might be able to restructure the cmake command to make it copy every time or it might just be a clion issue. I am unsure and would like to be able to take care of this all from within clion, instead of going back to the terminal to run the cmake command for updates to take effect.</p>\n"}, {"tags": ["c", "strtok", "strcpy"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438788240, "post_id": 31836575, "comment_id": 51595014, "body": "If you have <code>n</code> numbers, you should not assign <code>n+1</code> array elements.."}, {"owner": {"reputation": 414, "user_id": 4880090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9731995440b63d4cbf69257df481c87?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kolokowsky", "link": "https://stackoverflow.com/users/4880090/steve-kolokowsky"}, "edited": false, "score": 1, "creation_date": 1438788268, "post_id": 31836575, "comment_id": 51595032, "body": "Please add a complete (small) snippet of code that demonstrates the problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user447688"}, "edited": false, "score": 1, "creation_date": 1438788436, "post_id": 31836575, "comment_id": 51595135, "body": "Need full code-- in particular your declaration of line, tmp_line, vec.arr"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438789571, "post_id": 31836575, "comment_id": 51595878, "body": "Your title is not helpful. Consider changing it to something descriprive, like &quot;error 0Xc0000005 in a program that reds a kist of numbers&quot;."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438799974, "post_id": 31836575, "comment_id": 51602125, "body": "@n.m. I borrowed your words :)"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1438788872, "last_edit_date": 1438788872, "creation_date": 1438788243, "answer_id": 31836608, "question_id": 31836575, "link": "https://stackoverflow.com/questions/31836575/error-0xc0000005-in-a-program-that-tokenizes-a-list-of-numbers-using-strtok/31836608#31836608", "title": "Error 0Xc0000005 in a program that tokenizes a list of numbers using strtok", "body": "<p>As I see your code, the problem appears to be in</p>\n\n<pre><code> strcpy(tmp_line,strtok (NULL, \",\"));\n</code></pre>\n\n<p>inside the <code>for</code> loop. Once finished tokenizing, <code>strtok()</code> will return <code>NULL</code> which is considered invalid parameter for <code>strcpy()</code>. </p>\n\n<p>You should break down the statement, collect the return value of <code>strtok()</code> into a temporary pointer variable, check against NULL and if not NULL, perform the <code>strcpy()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1438790037, "post_id": 31836847, "comment_id": 51596181, "body": "Passing a string literal to <code>strtok()</code> is <i>undefined behaviour</i>."}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1438798747, "post_id": 31836847, "comment_id": 51601427, "body": "Nonsense.  In fact the example in the canonical POSIX man page uses a string constant. <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strtok.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/009695399/functions/strtok.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1438799193, "post_id": 31836847, "comment_id": 51601702, "body": "Just because the manual you happen to find on the internet contains a wrong example, it doesn&#39;t make it right. Perhaps, you should read either C standard or search on the internet before emphatically calling it <i>nonsense</i>."}, {"owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1438799443, "post_id": 31836847, "comment_id": 51601841, "body": "Look again. POSIX standard."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1438799519, "post_id": 31836847, "comment_id": 51601869, "body": "So what? POSIX documentation writers never make a mistake? What&#39;s your point?"}], "tags": [], "owner": {"reputation": 102935, "user_id": 35092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/a0QNl.jpg?s=128&g=1", "display_name": "Charlie Martin", "link": "https://stackoverflow.com/users/35092/charlie-martin"}, "is_accepted": false, "score": 0, "last_activity_date": 1438798769, "last_edit_date": 1438798769, "creation_date": 1438788902, "answer_id": 31836847, "question_id": 31836575, "link": "https://stackoverflow.com/questions/31836575/error-0xc0000005-in-a-program-that-tokenizes-a-list-of-numbers-using-strtok/31836847#31836847", "title": "Error 0Xc0000005 in a program that tokenizes a list of numbers using strtok", "body": "<p>Okay, you need to look at the documentation for <code>strtok</code>, first of all. What <code>strtok</code> returns is a <code>char *</code> to the next token. On the first call, it stashes the string, then on each call after that with NULL as the argument it gets the next string.</p>\n\n<p>so, the canonical code would be</p>\n\n<pre><code>char * my_string = \"this is a blank delimited string\";\nchar * tok;\ntok = strtok(my_string, \" \");\nwhile(tok != NULL){\n  /* do something with the string */\n  printf(\"Token: %s\\n\", tok);\n  tok = strtok(NULL, \" \");\n}\n</code></pre>\n\n<p>It's hard to tell where your code is going wrong, but at the very least that <code>strcpy</code> is unnecessary.  It's also, from what you're saying, a problem that you're doing a <code>strcpy</code> on top of the string that contains the current line, which means you are mashing the string that <code>strtok</code> is trying to tokenize; this is probably the source of the memory error.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1438789593, "creation_date": 1438789593, "answer_id": 31837125, "question_id": 31836575, "link": "https://stackoverflow.com/questions/31836575/error-0xc0000005-in-a-program-that-tokenizes-a-list-of-numbers-using-strtok/31837125#31837125", "title": "Error 0Xc0000005 in a program that tokenizes a list of numbers using strtok", "body": "<p>Your loop counter is probably wrong. You say you only have <code>n</code> floats but it loops for <code>n+1</code> times. You don't need to count the number of floats either. \nYou don't need <code>tmp_line</code> either. As you tokenize, you can count the number of floats. So it boils down to this:</p>\n\n<pre><code>j = 0;\nfor(char *tmp = strtok (line,\",\"); tmp ; tmp = strtok (NULL, \",\"))\n{\n   vec.arr[j] = atof(tmp);\n   j++;\n}\n// 'j' number of tokens found in this line\n</code></pre>\n\n<p>This would also save you from worrying about whether you pass valid strings to <code>strcpy()</code> (as you don't need at all :)</p>\n\n<p>There are other things you need to consider:</p>\n\n<p>1) How to handle if the <code>line</code> contains uneven number of floats.<br>\n2) Whether <code>arr</code> has enough storage for as many floats in each line.<br>\n3) <code>atof()</code> doesn't report errors on conversion. You would be advised to use <code>strtof()</code> or <code>strtod()</code> for detecting conversion failures.  </p>\n"}], "owner": {"reputation": 47, "user_id": 4461775, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7c125674296e8dd8334d997e717fb2f0?s=128&d=identicon&r=PG&f=1", "display_name": "One_Curious_User", "link": "https://stackoverflow.com/users/4461775/one-curious-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4795, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1438799953, "creation_date": 1438788137, "last_edit_date": 1438799953, "question_id": 31836575, "link": "https://stackoverflow.com/questions/31836575/error-0xc0000005-in-a-program-that-tokenizes-a-list-of-numbers-using-strtok", "title": "Error 0Xc0000005 in a program that tokenizes a list of numbers using strtok", "body": "<p>I am currently programming a c program which gets text files as input.\nin every line I am getting a known ahead n float numbers, separated with comma.\nexample line:</p>\n\n<pre><code>0.92,0.21,0.98,1\n0.23,0.37,0.29,-1\n0.22,0.35,0.63,1\n0.14,0.89,0.78,-1\n0.26,0.42,0.67,1\n0.01,0.77,0.92,-1\n0.67,0.12,0.59,-1\n</code></pre>\n\n<p>I need to put the numbers in an array.\nhere is part of my code:</p>\n\n<pre><code>strcpy(tmp_line,strtok (line,\",\"));\nfor(int j = 0;j &lt; n + 1; j++)\n{\n            vec.arr[j] = atof(tmp_line);\n            strcpy(tmp_line,strtok (NULL, \",\"));\n}\n</code></pre>\n\n<p>I don't know why, when I use clion, in the end of the loop the program just stops running.\nwhen I use codeblocks, it give this message</p>\n\n<blockquote>\n  <p>PROCCES RETURNED  (0Xc0000005)</p>\n</blockquote>\n\n<p>which means we are using memory that we cannot access.</p>\n\n<p>help? anybody?</p>\n\n<hr>\n\n<p>a few notes:\n<code>vec</code> is a Vector struct. a Vector struct contains a 75 long array and a (int) tag. we use the first n cells of the array and put the tag (+ or - 1) in the n+1 cell (and the tag part).</p>\n\n<p><code>tmp_line</code> is a char array contains the current line.</p>\n"}, {"tags": ["c", "initialization", "sizeof"], "comments": [{"owner": {"reputation": 1090, "user_id": 2843157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qorh2.jpg?s=128&g=1", "display_name": "John Odom", "link": "https://stackoverflow.com/users/2843157/john-odom"}, "edited": false, "score": 0, "creation_date": 1438787375, "post_id": 31836267, "comment_id": 51594365, "body": "<code>d</code> is already declared :P. you can see that if you rewrite the declaration to <code>dict* d</code> which means the same."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1438787384, "post_id": 31836267, "comment_id": 51594370, "body": "It is using its type, not the value. The type is known in the compile time, so no problem here."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1438787510, "post_id": 31836267, "comment_id": 51594461, "body": "Very close to  <a href=\"http://stackoverflow.com/q/19785518/1708801\">Is dereferencing null pointer valid in sizeof operation</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438787546, "post_id": 31836267, "comment_id": 51594488, "body": "BTW, since it is probably does not deserve a question by itself.. What would be preferable way here, <code>sizeof(*d)</code> or <code>sizeof(dict)</code> and why?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1438787612, "post_id": 31836267, "comment_id": 51594548, "body": "@EugeneSh. I don&#39;t see any problem with <code>sizeof(*d)</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438787644, "post_id": 31836267, "comment_id": 51594573, "body": "@SouravGhosh No problem at all. I am asking what is better :)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1438787673, "post_id": 31836267, "comment_id": 51594596, "body": "@EugeneSh.; Its matter of choice. Use either."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1438787899, "post_id": 31836267, "comment_id": 51594770, "body": "@EugeneSh. [Note-to-self : not to get fancy with non-native language :-)] I tried to mean, here also, <code>sizeof(*d)</code> is valid, so I&#39;ll go with it. Anyway, it is the preferred way by <i>most</i> (note, I did not say <i>all</i>). :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1438788980, "post_id": 31836267, "comment_id": 51595493, "body": "@EugeneSh.: I agree with Sourav. <code>*d</code> will use the type of the pointer&#39;s target, regardless of later change. Not very relevant here, but if you have some lines between the pointer definition and the <code>malloc</code>, it might save time thinking which type it has (just put <code>*</code> before the name) and avoids errors if you change its type for some reason."}, {"owner": {"reputation": 13757, "user_id": 2126755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/8QFus.jpg?s=128&g=1", "display_name": "robbmj", "link": "https://stackoverflow.com/users/2126755/robbmj"}, "edited": false, "score": 0, "creation_date": 1438795890, "post_id": 31836267, "comment_id": 51599779, "body": "When I read the question I was wondering <i>Why not use <code>sizeof(dict)</code></i> thanks for answering."}], "answers": [{"comments": [{"owner": {"reputation": 1607, "user_id": 2346716, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8607364b5988ba58f741b229bb8dee82?s=128&d=identicon&r=PG", "display_name": "ssj", "link": "https://stackoverflow.com/users/2346716/ssj"}, "edited": false, "score": 0, "creation_date": 1438787669, "post_id": 31836310, "comment_id": 51594590, "body": "so I know that <code>sizeof</code> will execute at compile time, and I want to know something more about the <code>operator</code> that will be executed in compile time. thx!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1607, "user_id": 2346716, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8607364b5988ba58f741b229bb8dee82?s=128&d=identicon&r=PG", "display_name": "ssj", "link": "https://stackoverflow.com/users/2346716/ssj"}, "edited": false, "score": 0, "creation_date": 1438789419, "post_id": 31836310, "comment_id": 51595779, "body": "@whatout: Could you elaborate? &quot;I know that sizeof will execute at compile time ...&quot; contradicts &quot;I want to know something more about the operator ...&quot; actually. Either you know the <i>operator</i> <code>sizeof</code>, or you need to know more about it. I presume you know what <code>sizeof</code> actually does, as you use it already."}, {"owner": {"reputation": 1607, "user_id": 2346716, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8607364b5988ba58f741b229bb8dee82?s=128&d=identicon&r=PG", "display_name": "ssj", "link": "https://stackoverflow.com/users/2346716/ssj"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438823483, "post_id": 31836310, "comment_id": 51611829, "body": "@Olaf I want to know if that are other operator that will execute at compile time?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1607, "user_id": 2346716, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8607364b5988ba58f741b229bb8dee82?s=128&d=identicon&r=PG", "display_name": "ssj", "link": "https://stackoverflow.com/users/2346716/ssj"}, "edited": false, "score": 0, "creation_date": 1438826301, "post_id": 31836310, "comment_id": 51612482, "body": "@whatout: Almost any if its operands can be evaluated at compile-time. However, you should read a good C book. Please understand SO is no tutorial or discussion site."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1438787377, "creation_date": 1438787377, "answer_id": 31836310, "question_id": 31836267, "link": "https://stackoverflow.com/questions/31836267/how-does-it-happened-that-a-variable-used-before-its-declared/31836310#31836310", "title": "how does it happened that a variable used before it&#39;s declared?", "body": "<p><code>sizeof</code> is not a function, it is an operator. It is <em>executed</em> (evaluated, to be exact) at compile time, so the <em>scope</em>  or <em>lifetime</em> you're thinking about <code>d</code>, does not apply here. All it needs to know is the <strong>type</strong> of <code>*d</code> and that is known at compile time. Sufficient.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1438787501, "creation_date": 1438787501, "answer_id": 31836362, "question_id": 31836267, "link": "https://stackoverflow.com/questions/31836267/how-does-it-happened-that-a-variable-used-before-its-declared/31836362#31836362", "title": "how does it happened that a variable used before it&#39;s declared?", "body": "<p>The statement   </p>\n\n<pre><code>dict *d = zmalloc(sizeof(*d));  \n</code></pre>\n\n<p>is equivalent to  </p>\n\n<pre><code>dict *d;\nd = zmalloc(sizeof(*d));  \n</code></pre>\n\n<p>So, <code>dict *d</code> declares <code>d</code> as a pointer to <code>dict</code> type and <code>= zmalloc(sizeof(*d));</code> used for initialization. <code>dict *d = zmalloc(sizeof(*d));</code> declares <code>d</code> as <code>dict *</code> and then initializes it in single line.</p>\n"}, {"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 1, "last_activity_date": 1438788683, "creation_date": 1438788683, "answer_id": 31836774, "question_id": 31836267, "link": "https://stackoverflow.com/questions/31836267/how-does-it-happened-that-a-variable-used-before-its-declared/31836774#31836774", "title": "how does it happened that a variable used before it&#39;s declared?", "body": "<p>Your assumption is wrong, the object exists starting from the <code>=</code> sign that starts the initialization. E.g in a initializer you are well allowed to use the address of the object that you are initializing.</p>\n\n<p>Here, in addition, no access to the object itself is needed, <code>sizeof</code> only uses the type in this case.</p>\n"}], "owner": {"reputation": 1607, "user_id": 2346716, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8607364b5988ba58f741b229bb8dee82?s=128&d=identicon&r=PG", "display_name": "ssj", "link": "https://stackoverflow.com/users/2346716/ssj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 31836310, "answer_count": 3, "score": 6, "last_activity_date": 1438788683, "creation_date": 1438787257, "last_edit_date": 1438788082, "question_id": 31836267, "link": "https://stackoverflow.com/questions/31836267/how-does-it-happened-that-a-variable-used-before-its-declared", "title": "how does it happened that a variable used before it&#39;s declared?", "body": "<p>I am confused about a function <code>dictCreate()</code> in file dict.c of <code>redis</code> implementation. I am going to paste the code here:</p>\n\n<pre><code>/* Create a new hash table \n * T = O(1)\n */\ndict *dictCreate(dictType *type, void *privDataPtr) {\n    dict *d = zmalloc(sizeof(*d));\n    _dictInit(d, type, privDataPtr);\n    return d;\n}\n</code></pre>\n\n<p>variable <code>d</code> is used in <code>zmalloc(sizeof(*d))</code>, but theoretically it will exist when this line was executed. So my question is how it is possible to use variable <code>d</code> before it is declared?</p>\n"}, {"tags": ["c", "arrays", "json", "json-c"], "comments": [{"owner": {"reputation": 191, "user_id": 1073420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1448ba3a401411d37e2f4680e1230150?s=128&d=identicon&r=PG", "display_name": "wiseveri", "link": "https://stackoverflow.com/users/1073420/wiseveri"}, "edited": false, "score": 0, "creation_date": 1438787196, "post_id": 31836167, "comment_id": 51594240, "body": "Any pointers to where the segmentation fault occurs? Have you tried <code>valgrind</code> to see where you might access non initialized memory (one possible reason for the seg fault)"}, {"owner": {"reputation": 3537, "user_id": 4047472, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff35f5eec781a627435222fa094575dc?s=128&d=identicon&r=PG&f=1", "display_name": "Rekovni", "link": "https://stackoverflow.com/users/4047472/rekovni"}, "reply_to_user": {"reputation": 191, "user_id": 1073420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1448ba3a401411d37e2f4680e1230150?s=128&d=identicon&r=PG", "display_name": "wiseveri", "link": "https://stackoverflow.com/users/1073420/wiseveri"}, "edited": false, "score": 0, "creation_date": 1438787441, "post_id": 31836167, "comment_id": 51594403, "body": "@wiseveri From what I&#39;ve found - the fault occurs here: <code>int arraylen = json_object_array_length(jarray); &#47;*Getting the length of the array*&#47;</code> in in <code>json_parse_array</code> function, when it reaches the <code>values</code> section."}, {"owner": {"reputation": 191, "user_id": 1073420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1448ba3a401411d37e2f4680e1230150?s=128&d=identicon&r=PG", "display_name": "wiseveri", "link": "https://stackoverflow.com/users/1073420/wiseveri"}, "edited": false, "score": 0, "creation_date": 1438843107, "post_id": 31836167, "comment_id": 51617649, "body": "Well are you sure that the key you specified exists? That the object you&#39;re passing isn&#39;t NULL?"}, {"owner": {"reputation": 3537, "user_id": 4047472, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff35f5eec781a627435222fa094575dc?s=128&d=identicon&r=PG&f=1", "display_name": "Rekovni", "link": "https://stackoverflow.com/users/4047472/rekovni"}, "reply_to_user": {"reputation": 191, "user_id": 1073420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1448ba3a401411d37e2f4680e1230150?s=128&d=identicon&r=PG", "display_name": "wiseveri", "link": "https://stackoverflow.com/users/1073420/wiseveri"}, "edited": false, "score": 0, "creation_date": 1438846581, "post_id": 31836167, "comment_id": 51619565, "body": "@wiseveri Well, isn&#39;t the key-value pair: <code>values</code> : <code>[1438775895302, 143]</code> ? As that&#39;s all I&#39;m attempting to get access to, those two values."}, {"owner": {"reputation": 191, "user_id": 1073420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1448ba3a401411d37e2f4680e1230150?s=128&d=identicon&r=PG", "display_name": "wiseveri", "link": "https://stackoverflow.com/users/1073420/wiseveri"}, "edited": false, "score": 1, "creation_date": 1438847295, "post_id": 31836167, "comment_id": 51619935, "body": "No, the structure you posted has just one key: &quot;queries&quot;. The object is an array containing one JSON-object, containing two keys... You&#39;ll have to unwrap your JSON-structure"}], "answers": [{"tags": [], "owner": {"reputation": 3537, "user_id": 4047472, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff35f5eec781a627435222fa094575dc?s=128&d=identicon&r=PG&f=1", "display_name": "Rekovni", "link": "https://stackoverflow.com/users/4047472/rekovni"}, "is_accepted": true, "score": 0, "last_activity_date": 1438860540, "creation_date": 1438860540, "answer_id": 31854593, "question_id": 31836167, "link": "https://stackoverflow.com/questions/31836167/parsing-json-array-in-c/31854593#31854593", "title": "Parsing JSON array in C", "body": "<p>Thanks @wiseveri for the tip, managed to access the <code>values</code> section with the following:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// gcc json_c_test.c -ljson-c -o json_c_test &amp;&amp; clear &amp;&amp; ./json_c_test\n\n#include &lt;json/json.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid json_parse_input( json_object *jobj )\n{\n    int exists, i, j, k, l;\n    char *results;\n    json_object *queriesObj, *resultsObj, *valuesObj, *tmpQueries, *tmpResults, *tmpValues, *tmpSeparateVals;\n\n    /* Get query key */\n    exists = json_object_object_get_ex( jobj, \"queries\", &amp;queriesObj );\n    if ( FALSE == exists )\n    {\n        printf( \"\\\"queries\\\" not found in JSON\\n\" );\n        return;\n    }\n\n    /* Loop through array of queries */\n    for ( i = 0; i &lt; json_object_array_length( queriesObj ); i++ )\n    {\n        tmpQueries = json_object_array_get_idx( queriesObj, i );\n\n        /* Get results info */\n        exists = json_object_object_get_ex( tmpQueries, \"results\", &amp;resultsObj );\n        if ( FALSE == exists )\n        {\n            printf( \"\\\"results\\\" not found in JSON\\n\" );\n            return;\n        }\n\n        /* Loop through array of results */\n        for ( j = 0; j &lt; json_object_array_length( resultsObj ); j++ )\n        {\n            tmpResults = json_object_array_get_idx ( resultsObj, j );\n\n            /* Get values */\n            exists = json_object_object_get_ex( tmpResults, \"values\", &amp;valuesObj );\n            if ( FALSE == exists )\n            {\n                printf( \"\\\"values\\\" not found in JSON\\n\" );\n                return;\n            }\n\n            /* Loop through array of array of values */\n            for ( k = 0; k &lt; json_object_array_length( valuesObj ); k++ )\n            {\n                tmpValues = json_object_array_get_idx ( valuesObj, k );\n\n                /* Loop through array of values */\n                for ( l = 0; l &lt; json_object_array_length( tmpValues ); l++ )\n                {\n                    tmpSeparateVals = json_object_array_get_idx ( tmpValues, l );\n                    printf( \"Values:[%d] = %s \\n\", l, json_object_to_json_string( tmpSeparateVals ) );\n                }\n            }\n        }\n    }\n}\n\nint main()\n{\n    json_object *jobj;\n\n    char * string = \" { \\\"queries\\\" : [ { \\\"sample_size\\\" : 1, \\\"results\\\" : [ { \\\"name\\\" : \\\"data\\\", \\\"group_by\\\" : [{ \\\"name\\\" : \\\"type\\\", \\\"type\\\" : \\\"number\\\" }], \\\"tags\\\" : { \\\"hostname\\\" : [ \\\"host\\\" ]}, \\\"values\\\": [[1438775895302, 143]] } ], } ] } \";\n    printf ( \"JSON string: %s\\n\\n\", string );\n\n    jobj = json_tokener_parse( string );\n    json_parse_input( jobj );\n}\n</code></pre>\n"}], "owner": {"reputation": 3537, "user_id": 4047472, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff35f5eec781a627435222fa094575dc?s=128&d=identicon&r=PG&f=1", "display_name": "Rekovni", "link": "https://stackoverflow.com/users/4047472/rekovni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5141, "favorite_count": 0, "accepted_answer_id": 31854593, "answer_count": 1, "score": 1, "last_activity_date": 1438860540, "creation_date": 1438786998, "question_id": 31836167, "link": "https://stackoverflow.com/questions/31836167/parsing-json-array-in-c", "title": "Parsing JSON array in C", "body": "<p>I have the following JSON returned from the server, and I'm trying to access to the <code>Values</code> (timestamp/data):</p>\n\n<pre><code>{\n   \"queries\": [\n     {\n       \"sample_size\": 1,\n       \"results\": [\n         {\n           \"name\": \"data\",\n           \"group_by\": [\n             {\n               \"name\": \"type\",\n               \"type\": \"number\"\n             }\n           ],\n           \"tags\": {\n             \"hostname\": [\n               \"host\"\n             ]\n           },\n           \"values\": [\n             [\n               1438775895302,\n               143\n             ]\n           ]\n         }\n       ]\n     }\n   ]\n }\n</code></pre>\n\n<p>I am using <a href=\"https://github.com/json-c/json-c\" rel=\"nofollow\" title=\"json-c\">json-c</a>, and am using slightly modified version of the <a href=\"https://linuxprograms.wordpress.com/2010/08/19/json_parser_json-c/\" rel=\"nofollow\" title=\"complete json parser\">complete json parser</a>. However I keep getting a <code>segmentation fault (core dumped)</code> when attempting to access the <code>values</code> section using <code>json_parse_array</code>.</p>\n\n<p>How would I go about accessing the <code>values</code> section?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438786524, "post_id": 31835910, "comment_id": 51593770, "body": "Largest element is determined one by one loop."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1438786528, "post_id": 31835910, "comment_id": 51593774, "body": "Take a paper and a pen and go through the code keeping track of the data held by all those variables. <a href=\"http://www.cs.armstrong.edu/liang/animation/web/BubbleSort.html\" rel=\"nofollow noreferrer\">Here</a> is a good animation to help you understand better."}, {"owner": {"reputation": 21, "user_id": 3934570, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99ba8883c592da0197b079930dd99019?s=128&d=identicon&r=PG&f=1", "display_name": "RAP", "link": "https://stackoverflow.com/users/3934570/rap"}, "edited": false, "score": 0, "creation_date": 1438787420, "post_id": 31835910, "comment_id": 51594391, "body": "I have done that but even cant get the clear idea...."}], "answers": [{"tags": [], "owner": {"reputation": 1440, "user_id": 5087118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5200e7aba1ebe3fb6b30b766719b1d3?s=128&d=identicon&r=PG&f=1", "display_name": "bpgeck", "link": "https://stackoverflow.com/users/5087118/bpgeck"}, "is_accepted": true, "score": 2, "last_activity_date": 1438792067, "creation_date": 1438792067, "answer_id": 31838027, "question_id": 31835910, "link": "https://stackoverflow.com/questions/31835910/bubble-sort-concept/31838027#31838027", "title": "Bubble sort concept", "body": "<p>Bubble sort is a commonly used algorithm for sorting an array of integers. It's called \"bubble sort\" since it causes the largest values to \"bubble\" up to the end of the array.</p>\n\n<p>Bubble sort moves one index at a time up the array essentially pulling the largest value along. For example, If the array is <code>[1,3,2]</code> bubble sort will check the <code>1</code> and see if it is greater than the value ahead of it: <code>3</code>. It isn't so the one will stay in its place. Now the <code>3</code> is the largest value the program has seen so it will compare it to the next value, the <code>2</code>. Is <code>3</code> bigger? Yes! So it will switch the <code>3</code> and the <code>2</code>. Now the largest value is at the end of the array so the algorithm starts at the beginning of the array again. This repeats until the entire array is sorted.</p>\n\n<p><strong>On to the specifics</strong>:</p>\n\n<p>The first for-loop <code>for(i=0;i&lt;n;i++)</code> loops for the same amount of times as the size of the array, i.e. if the size is 7, this loops will execute 7 times. It does this because, in the worst case scenario, every value in the array will need to change location.</p>\n\n<p>The inner-most for-loop <code>for(j=0;j&lt;(n-i)-1;j++)</code> first of all has <code>j</code> never reaching the very last array spot, even when i = 0. This is because the code inside the loop, <code>if(a[j]&gt;a[j+1])</code>, is always checking one value AHEAD of the current index. So, <code>j</code> must never equal the last value of the index because there will be an out of bounds error.</p>\n\n<p>You will also notice that the inner-more for-loop goes from <code>0</code> to <code>n-i-1</code>. The reason this <code>-i</code> is included is because every time the outer loop, if(a[j]>a[j+1])`, is executed, one value will have moved all the way up to the end of the array. So you don't need to check the very last spot in the array because it's already correct!</p>\n\n<p><strong>Summary</strong>:</p>\n\n<p>Bubble sort continually moves the largest value to the end of the list. It does this by constantly checking values as it moves up the list and moving the largest value up one step at a time.</p>\n\n<p><strong>Edit:</strong> See Cool Guy's comment for a link to a great visual representation of bubble sort.</p>\n"}], "owner": {"reputation": 21, "user_id": 3934570, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99ba8883c592da0197b079930dd99019?s=128&d=identicon&r=PG&f=1", "display_name": "RAP", "link": "https://stackoverflow.com/users/3934570/rap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 31838027, "answer_count": 1, "score": -4, "last_activity_date": 1438792067, "creation_date": 1438786288, "question_id": 31835910, "link": "https://stackoverflow.com/questions/31835910/bubble-sort-concept", "title": "Bubble sort concept", "body": "<p>I just want the explanation about the condition in nested for loop.\nHow its processing, i am bit confused. I want the logic behind the conditions of two for loops.</p>\n\n<pre><code> #include&lt;stdio.h&gt;\nvoid bubblesort(int a[25],int n);\n\nint main()\n{\n    int a[25],size,i;\n    printf(\"Enter the size of an array\");\n    scanf(\"%d\",&amp;size);\n    for(i=0;i&lt;size;i++)\n    {\n        scanf(\"%d\",&amp;a[i]);\n    }\n    bubblesort(a,size);\n    for(i=0;i&lt;size;i++)\n    {\n        printf(\"%d\\t\",a[i]);\n    }\n\n    return 0;\n}\n\nvoid bubblesort(int a[], int n)\n{\n\n    int temp,i,j;\n    for(i=0;i&lt;n;i++)\n    {\n        for(j=0;j&lt;(n-i)-1;j++)\n        {\n            if(a[j]&gt;a[j+1])\n            {\n                temp=a[j];\n                a[j]=a[j+1];\n                a[j+1]= temp;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "double", "typeconverter", "atmelstudio", "uint8t"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438786237, "post_id": 31835833, "comment_id": 51593583, "body": "are you looking for <a href=\"http://linux.die.net/man/3/sprintf\" rel=\"nofollow noreferrer\"><code>sprintf()</code></a>?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1438786392, "post_id": 31835833, "comment_id": 51593689, "body": "Why are you using an array of <code>uint8_t</code> rather than an array of <code>char</code>? And what do you mean by &quot;does not recognize&quot;? Please include the error message in your question."}, {"owner": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "edited": false, "score": 0, "creation_date": 1438787252, "post_id": 31835833, "comment_id": 51594284, "body": "The <code>usart_write_buffer_job</code> is only accepting const *uint8_t as argument and the error says uint8_t is not declared."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "edited": false, "score": 0, "creation_date": 1438786441, "post_id": 31835889, "comment_id": 51593726, "body": "snprintf is not proparly working in this case, as I need a uint8_t string[]  as input argument. At the end the idea is to print the value as a human readable ascii one in terminal window."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "edited": false, "score": 0, "creation_date": 1438786513, "post_id": 31835889, "comment_id": 51593767, "body": "A <code>char []</code> should be castable to a <code>uint8_t []</code> without issue, particularly if it&#39;s a printable ASCII string."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "edited": false, "score": 0, "creation_date": 1438787111, "post_id": 31835889, "comment_id": 51594198, "body": "@MRM Forget snprintf and use a simple for loop to copy the values to the char array which you then nul terminate."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1438788556, "post_id": 31835889, "comment_id": 51595216, "body": "@this The initial value is a <code>double</code>, so you can&#39;t copy values from that to a char array.  <code>snprintf</code> is needed to create a decimal representation of it.  Either the array is <code>char []</code> and you cast it when calling <code>usart_write_buffer_job</code>, or it&#39;s <code>uint8_t []</code> and you cast it when caling <code>snprintf</code>."}, {"owner": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "edited": false, "score": 0, "creation_date": 1438789720, "post_id": 31835889, "comment_id": 51595969, "body": "I could cast it to <code>char []</code> now, but still the following casting from <code>char []</code> to <code>uint8_t []</code> does not work properly in Atmel.   <code>uint8_t arrString[10];</code>  <code>for(int i=0; i&lt;10; i++){arrString[i] =(uint8_t)(string[i]); }</code> and then   <code>printf(&quot;%d\\n&quot;,arrString[1]); </code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "edited": false, "score": 0, "creation_date": 1438792769, "post_id": 31835889, "comment_id": 51597960, "body": "@MRM I don&#39;t think that <code>printf</code> is doing what you expect.  The <code>%d</code> specifier expects an <code>int</code> argument and prints it in decimal format.  You&#39;re passing it a <code>uint8_t</code> i.e. an <code>unsigned char</code>, which happens to contain one of the characters in the decimal representation of the number in question.  To print it properly, you should do <code>printf(&quot;%s\\n&quot;,arrString);</code>"}, {"owner": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "edited": false, "score": 0, "creation_date": 1438865097, "post_id": 31835889, "comment_id": 51631591, "body": "Thanks :) now it works in mingw32. But still not appearing on Terminal Window of Atmel Studio when I use <code>usart_write_buffer_job(&amp;usart_instance, arrString, sizeof(arrString));</code>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1438786225, "creation_date": 1438786225, "answer_id": 31835889, "question_id": 31835833, "link": "https://stackoverflow.com/questions/31835833/how-to-convert-double-value-to-uint8-t-string-to-print-on-terminal-window-in-a/31835889#31835889", "title": "How to convert double value to uint8_t string[] to print on terminal window in atmel studio", "body": "<p>This looks like a job for <code>snprintf</code>:</p>\n\n<pre><code>double d;\nchar string[50];\nsnprintf(string, 50, \"%f\", d);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2283882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2850b0d94d24216c38f41b7ef3dda0?s=128&d=identicon&r=PG", "display_name": "MRM", "link": "https://stackoverflow.com/users/2283882/mrm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438786225, "creation_date": 1438786060, "question_id": 31835833, "link": "https://stackoverflow.com/questions/31835833/how-to-convert-double-value-to-uint8-t-string-to-print-on-terminal-window-in-a", "title": "How to convert double value to uint8_t string[] to print on terminal window in atmel studio", "body": "<p>I am trying to convert some double values to uint8_t String[] (in C) when programming in Atmel Studio 6.2 in order to use it further in function: <code>usart_write_buffer_job</code>.</p>\n\n<p>And this is the whole command I am going to use further, but instead of characters, I would like to print the given double values on the screen:</p>\n\n<pre><code>   uint8_t string[] = \"Hello World!\\n\";\n   usart_write_buffer_job(&amp;usart_instance, string, sizeof(string));\n</code></pre>\n\n<p>I have tried casting, but it does not work properly in Atmel, as it does not recognize the <code>(uint8_t*)(&amp;MyDoubleValue)</code></p>\n"}, {"tags": ["c", "gmp"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1438785899, "post_id": 31835704, "comment_id": 51593337, "body": "What does the GMP documentation say about this?"}], "answers": [{"comments": [{"owner": {"reputation": 3023, "user_id": 1691145, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b6744a17b41f3b0e5c7554a43a04094?s=128&d=identicon&r=PG", "display_name": "Justin Raymond", "link": "https://stackoverflow.com/users/1691145/justin-raymond"}, "edited": false, "score": 0, "creation_date": 1469811093, "post_id": 31835805, "comment_id": 64708574, "body": "The signature for multiplicaton is <code>void mpz_mul (mpz_t rop, const mpz_t op1, const mpz_t op2)</code>. I am confused as to how <code>op1</code> and <code>op2</code> can be <code>const</code> if doing <code>mpz_mul(x, x, x)</code> can change <code>x</code>."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 3023, "user_id": 1691145, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b6744a17b41f3b0e5c7554a43a04094?s=128&d=identicon&r=PG", "display_name": "Justin Raymond", "link": "https://stackoverflow.com/users/1691145/justin-raymond"}, "edited": false, "score": 0, "creation_date": 1469826398, "post_id": 31835805, "comment_id": 64715780, "body": "@JustinRaymond: <code>mpz_t</code> is defined internally as one-element array, hence these parameters are passed effectively as pointers. The actual object is refenced by three different pointers. The first one has no <code>const</code> qualifier, thus it can be changed via <i>that</i> pointer. This is analogous to situation such <code>int x = 100; const int* ptr1 = &amp;x; int* ptr2 = &amp;x; *ptr2 = 200;</code>. The <code>int</code> object can be modified <i>despite</i> that <code>ptr1</code> pointer has <code>const</code> qualifier."}], "tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 7, "last_activity_date": 1438785985, "creation_date": 1438785985, "answer_id": 31835805, "question_id": 31835704, "link": "https://stackoverflow.com/questions/31835704/gmp-are-self-assignments-forbidden/31835805#31835805", "title": "GMP: Are self-assignments forbidden?", "body": "<p>There is nothing wrong with self-assignment as such. In fact, the <a href=\"https://gmplib.org/manual/Variable-Conventions.html#Variable-Conventions\">documentation</a> states exactly opposite. According to 3.4 <em>Variable Conventions</em>:</p>\n\n<blockquote>\n  <p>GMP lets you use the same variable for both input and output in one\n  call. For example, the main function for integer multiplication,\n  mpz_mul, can be used to square x and put the result back in x with</p>\n\n<pre><code> mpz_mul (x, x, x);\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 149, "user_id": 1858072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLaIX.png?s=128&g=1", "display_name": "cjgriscom", "link": "https://stackoverflow.com/users/1858072/cjgriscom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 31835805, "answer_count": 1, "score": 3, "last_activity_date": 1438785985, "creation_date": 1438785715, "question_id": 31835704, "link": "https://stackoverflow.com/questions/31835704/gmp-are-self-assignments-forbidden", "title": "GMP: Are self-assignments forbidden?", "body": "<p>I'm using the GMP library for arbitrary precision in C.  All usage examples that I've seen seem to avoid self assignments such as:</p>\n\n<pre><code>Syntax : void mpz_add (mpz_t rop, const mpz_t op1, const mpz_t op2)\n\nmpz_add(a, a, b); // Assign a+b to a\n</code></pre>\n\n<p>Is this usage allowed or should I only resort to assigning to a third variable?</p>\n"}, {"tags": ["c", "networking", "protocols", "vpn", "ipsec"], "answers": [{"tags": [], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "is_accepted": true, "score": 0, "last_activity_date": 1439367282, "last_edit_date": 1439367282, "creation_date": 1439366593, "answer_id": 31959430, "question_id": 31835699, "link": "https://stackoverflow.com/questions/31835699/packets-incapsulation-for-own-simple-vpn/31959430#31959430", "title": "Packets incapsulation for own simple VPN", "body": "<p>Well, I found that there actually 2 ways to handle that problem:</p>\n\n<p>1) We can send big packets by settings DF flag to tell we want fragment out packets. But in this case packet can be lost, because not all the devices/etc support packet fragmentation</p>\n\n<p>2) We can automatically calculate our maximum MTU between hosts, split them and send. On another side we put all this packets together and restore them. This can be done by implementing our own \"system\" for this purpose.</p>\n\n<p>More about IP packets fragmentation and reassembly you can read <a href=\"http://www.cisco.com/c/en/us/support/docs/ip/generic-routing-encapsulation-gre/25885-pmtud-ipfrag.html\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 31959430, "answer_count": 1, "score": 0, "last_activity_date": 1439367282, "creation_date": 1438785711, "question_id": 31835699, "link": "https://stackoverflow.com/questions/31835699/packets-incapsulation-for-own-simple-vpn", "title": "Packets incapsulation for own simple VPN", "body": "<p>I want to do my own very simple implementation of VPN in C on Linux. For that purpose I'm going to capture IP packets, modify them and send forward. The modification consists of encryption, authentication and other stuff like in IPSec. My question is should I process somehow the size of packets or this will be handled automatically? I know it's maximum size is 65535 - 20 (for header) but accoring to MTU it is lesser. I think its because encrypted payload \"incapsulated into UDP\" for NAT-T is much bigger then just \"normal payload\" of the IP packet.</p>\n"}, {"tags": ["c++", "c", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "is_accepted": true, "score": 1, "last_activity_date": 1438789526, "last_edit_date": 1438789526, "creation_date": 1438787314, "answer_id": 31836285, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries/31836285#31836285", "title": "cmake and 2 libraries", "body": "<p>Essentially the answer depends on the toolchain available. For example the older SJLJ MinGW gcc versions are multi-target and compiling 32-bit with them can be done by adding a command line option <code>-m32</code> - this can easily be done by CMake.</p>\n\n<p>However, in a single target gcc toolchain (which the majority are these days) you can only target one architecture. That means you have to get CMake to use two toolchains, one for each target architecture you're trying to support.</p>\n\n<p>You're best off configuring and building for both 32-bit and 64-bit targets.</p>\n\n<h2>Example</h2>\n\n<p>A quick example if you do want to use a multi-target toolchain with CMake. This example uses the <a href=\"http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/4.8.2/threads-win32/sjlj/\" rel=\"nofollow\">MinGW SJLJ toolchain</a></p>\n\n<h3>CMakeLists.txt</h3>\n\n<pre><code>cmake_minimum_required( VERSION 2.8 )\n\nproject( mylib )\n\nadd_library( mylib_32 mylib.c mylib.h )\nset_target_properties( mylib_32 PROPERTIES COMPILE_FLAGS \"${CMAKE_C_FLAGS} -m32\" )\nset_target_properties( mylib_32 PROPERTIES LINK_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -m32\" )\n\nadd_executable( test_32 test.c )\ntarget_link_libraries( test_32 mylib_32 )\nset_target_properties( test_32 PROPERTIES COMPILE_FLAGS \"${CMAKE_C_FLAGS} -m32\" )\nset_target_properties( test_32 PROPERTIES LINK_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -m32\" )\n\nadd_library( mylib_64 mylib.c mylib.h )\nadd_executable( test_64 test.c )\ntarget_link_libraries( test_64 mylib_64 )\n</code></pre>\n\n<h3>mylib.c</h3>\n\n<pre><code>int PointerSize( void )\n{\n    return sizeof( void* );\n}\n</code></pre>\n\n<h3>mylib.h</h3>\n\n<pre><code>#ifndef MYLIB_H\n#define MYLIB_H\n\nextern int PointerSize( void );\n\n#endif\n</code></pre>\n\n<h3>test.c</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include \"mylib.h\"\n\nint main( int argc, char* argv[] )\n{\n    printf( \"Pointer Size: %d\\n\", PointerSize() );\n    return 0;\n}\n</code></pre>\n\n<h3>Output</h3>\n\n<p>Running the two resulting programs gives a 32-bit and 64-bit result for the library function <code>PointerSize()</code></p>\n\n<pre><code>C:\\&gt;test_32.exe\nPointer Size: 4\n\nC:\\&gt;test_64.exe\nPointer Size: 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1438790277, "creation_date": 1438790277, "answer_id": 31837377, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries/31837377#31837377", "title": "cmake and 2 libraries", "body": "<p>My simple answer is <strong>NO</strong>. 64 and 32-bit builds should be considered separate platforms; nothing about the generated artifacts are compatible. (This is not a commentary on cmake but rather how the operating systems, at least linux and windows, are implemented.) From a single cmake build, you cannot build for multiple platforms. There are generators that support multiple configurations (i.e., Debug and Release), but none that support multiple platforms.</p>\n\n<p>With that being said, using out-of-source cmake builds you can generate builds for multiple platforms using something like:</p>\n\n<pre><code>mkdir build-x64\nmkdir build-x86\n\ncd build-x64\ncmake -G\"Visual Studio 10 2010 Win64\" ..\ncmake --build .\n\ncd ../build-x86\ncmake -G\"Visual Studio 10 2010\" ..\ncmake --build .\n</code></pre>\n\n<p>This may not be quite as simple as you were hoping, but I do not think it is that bad. It is certainly a way I have been able to use cmake and support both 32-bit and 64-bit builds.</p>\n"}, {"comments": [{"owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "edited": false, "score": 0, "creation_date": 1438898511, "post_id": 31851519, "comment_id": 51652296, "body": "Yes, Brian&#39;s example is a good one, but I think goes against what I have seen to be conventional cmake practice. I am, however, glad it works for you."}], "tags": [], "owner": {"reputation": 41, "user_id": 5061860, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/163d7ea7128615d773d962d551e487d1?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/5061860/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1438852242, "creation_date": 1438852242, "answer_id": 31851519, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries/31851519#31851519", "title": "cmake and 2 libraries", "body": "<p>thank you for your attention.\nAs Brian said, it depends on the toolchain. His example is a good one! I had the same idea and it seems to work.\nI used add_library() and for each library I defined a target properties. Implementing it in this way, my cmake + make generates my library in 32 and 64 bits and I do not need to run to times the cmake + make. \nIn the context of my project I need to create only one executable file in 32 bits but some libraries are required in 64 bit for other usage (common libraries between projects:) ).</p>\n\n<p>Anton</p>\n"}], "owner": {"reputation": 41, "user_id": 5061860, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/163d7ea7128615d773d962d551e487d1?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/5061860/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 31836285, "answer_count": 3, "score": 1, "last_activity_date": 1438852242, "creation_date": 1438785624, "last_edit_date": 1438785687, "question_id": 31835668, "link": "https://stackoverflow.com/questions/31835668/cmake-and-2-libraries", "title": "cmake and 2 libraries", "body": "<p>I have a library in my project that I would like to compile once in 32 bits and than on 64 bits (at the same time, e.g. at the end of my compilation I would like to have the 2 versions).\nIs that possible or I have to call 2 times cmake + make but with different parameters?</p>\n"}, {"tags": ["python", "c", "gcc", "dll", "linker"], "comments": [{"owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1438850087, "post_id": 31835213, "comment_id": 51621657, "body": "What happen if you add <code>C:\\sundials\\instdir\\lib</code> to your PATH?"}, {"owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "reply_to_user": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1438878956, "post_id": 31835213, "comment_id": 51641907, "body": "This seems to work like a charm! Great Anto, thanks for the answer. If you post it as a seperate answer I will accept it for you."}], "answers": [{"tags": [], "owner": {"reputation": 10822, "user_id": 2452708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dxg4I.jpg?s=128&g=1", "display_name": "Anto Jurkovi\u0107", "link": "https://stackoverflow.com/users/2452708/anto-jurkovi%c4%87"}, "is_accepted": true, "score": 0, "last_activity_date": 1438892971, "creation_date": 1438892971, "answer_id": 31865207, "question_id": 31835213, "link": "https://stackoverflow.com/questions/31835213/loading-dll-with-ctypes/31865207#31865207", "title": "Loading .dll with ctypes", "body": "<p>See Wikipedia <a href=\"https://en.wikipedia.org/wiki/Dynamic-link_library\" rel=\"nofollow\">Dynamic-link library</a>:</p>\n\n<p><em>\"...Unless your DLL is a Component Object Model (COM) server, the DLL file must be placed in one of the directories listed in the PATH environment variable, in the default system directory, or in the same directory as the program using it...\"</em></p>\n\n<p>So, add <code>C:\\sundials\\instdir\\lib</code> to your PATH env. variable.</p>\n"}], "owner": {"reputation": 1516, "user_id": 2768172, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c0aa1896ab14d2afa69d0e13d1bcad2b?s=128&d=identicon&r=PG&f=1", "display_name": "pathoren", "link": "https://stackoverflow.com/users/2768172/pathoren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 31865207, "answer_count": 1, "score": 0, "last_activity_date": 1438892971, "creation_date": 1438784484, "question_id": 31835213, "link": "https://stackoverflow.com/questions/31835213/loading-dll-with-ctypes", "title": "Loading .dll with ctypes", "body": "<p>I have a .dll with dependencies to some other (Sundials ODE solver) .dlls. I use windows 8.1 with mingw to compile and link the c-code I use for my .dll. When trying to load them with Python and ctypes I get a pop-up with a <code>System error: cannot find libsundials_cvode.dll since it does not exist on the computer</code> and when you close the popup Python spits out <code>WindowsError: [Error 126] Cannot find the module</code> Cannot understand why this is, because gcc compiles and links the files fine without errors (and yes, they do exist)... I have even tried to copy the dependent dlls into the directory where my python script is, without success.</p>\n\n<p>I run the following compile and linker commands without any warnings or errors</p>\n\n<pre><code>gcc -c -I c:\\sundials\\include cfile.c\ngcc -shared -o clib.dll cfile.o -L. C:\\sundials\\instdir\\lib\\libsundials_cvode.dll -L. C:\\sundials\\instdir\\lib\\libsundials_nserial.dll\n</code></pre>\n\n<p>My python test script giving the abovementioned error is</p>\n\n<pre><code>import ctypes\nlib = ctypes.cdll.LoadLibrary('clib.dll')\n</code></pre>\n\n<p>I'm a beginner with gcc and c, but quite experienced with Python. Any suggestions what might be the reason?</p>\n"}, {"tags": ["c", "string", "dynamic-arrays"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1438783406, "post_id": 31834623, "comment_id": 51591418, "body": "<code>getstr(char *)</code> change to <code>getstr(char **)</code>, and <code>strcpy(allstrs[totstrs],one_str);</code> to <code>allstrs[totstrs] = one_str;</code>, <code>char c;</code> to <code>int c;</code>, <code>totchars == current_size</code> to <code>totchars == current_size-1</code> at <code>getstr</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1438784301, "post_id": 31834623, "comment_id": 51592070, "body": "Standard warning: Do not cast <code>void *</code> as returned by <code>malloc</code> &amp; friends! C is not C++."}, {"owner": {"reputation": 13306, "user_id": 162698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HnjBG.png?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/162698/rob"}, "edited": false, "score": 1, "creation_date": 1438784313, "post_id": 31834623, "comment_id": 51592079, "body": "As you said, you have two questions. One for malloc and one for getc. You should study both of those and ask questions on their use. As your question stands, it&#39;s almost as if you are asking us to rewrite your code for you."}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1438783927, "last_edit_date": 1495542590, "creation_date": 1438783272, "answer_id": 31834720, "question_id": 31834623, "link": "https://stackoverflow.com/questions/31834623/how-to-create-a-dynamic-array-of-strings-with-the-space-just-necessary-for-each/31834720#31834720", "title": "How to create a dynamic array of strings with the space just necessary for each string in C", "body": "<p>You're not allocating any memory for the destination string here:</p>\n\n<pre><code>strcpy(allstrs[totstrs],one_str);\n</code></pre>\n\n<p>At this point <code>allstrs[totstrs]</code> is just a wild pointer.</p>\n\n<p>Allocate some memory for the destination string first:</p>\n\n<pre><code>allstrs[totstrs] = malloc(strlen(one_str) + 1);\nstrcpy(allstrs[totstrs],one_str);\n</code></pre>\n\n<p>And don't forget to <code>free</code> all these strings later when you're done, of course (prior to <code>free(allstrs)</code>).</p>\n\n<p>(Alternatively take @BLUEPIXY's advice and just assign the pointer you allocated in <code>getstr</code> instead of using <code>strcpy</code> - this is probably a better solution, depending on what else you might be trying to do).</p>\n\n<p><hr>\nNote also that you have a few bugs in your <code>getstr</code> function:</p>\n\n<p>(1)</p>\n\n<pre><code>char c;\n</code></pre>\n\n<p>should be initialised, e.g.:</p>\n\n<pre><code>char c = '\\0'; \n</code></pre>\n\n<p>(or some other suitable character).</p>\n\n<p>(2)</p>\n\n<pre><code>str = (char*)malloc(sizeof(char));\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>str = malloc(current_size);\n</code></pre>\n\n<p>(3) It looks like you're not allocating the addition char necessary for storing the terminating <code>'\\0'</code>.</p>\n\n<p><hr>\nGeneral note: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">never cast the result of <code>malloc</code> in C.</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5194260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b21632f222821cf76f15a76d67022b1b?s=128&d=identicon&r=PG&f=1", "display_name": "keyboardcat", "link": "https://stackoverflow.com/users/5194260/keyboardcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1438783927, "creation_date": 1438783018, "question_id": 31834623, "link": "https://stackoverflow.com/questions/31834623/how-to-create-a-dynamic-array-of-strings-with-the-space-just-necessary-for-each", "title": "How to create a dynamic array of strings with the space just necessary for each string in C", "body": "<p>I want to have an array of pointers to strings,and just get the space necessary for each string.\nI know <strong>malloc</strong> and <strong>getc</strong> are required but not familiar with the use of them.</p>\n\n<p>Here is part of my code. It gives the error message  \"<strong>Segmentation fault</strong>\" .... </p>\n\n<pre><code>char **allstrs;\nchar *one_str;\nint totstrs=0,current_size= INITIALSIZE;\n\nallstrs = (char **)malloc(current_size*sizeof(char*)); //dynamic array of strings\nwhile(getstr(one_str)!=EOF){\n    if(totstrs == current_size){\n        current_size *=2;\n        allstrs = realloc(allstrs, current_size*sizeof(char*));\n    }\n    strcpy(allstrs[totstrs],one_str);\n    printf(\"String[%d] is : %s\\n\",totstrs,allstrs[totstrs]);\n    totstrs ++;\n\n}\nfree(allstrs);   //deallocate the segment of memory\n\nreturn 0;\n</code></pre>\n\n<p>and the function <strong>getstr</strong> called</p>\n\n<pre><code>char c; \nint totchars=0, current_size=INITIALCHARS;\n\nstr = (char*)malloc(sizeof(char));\nwhile(c!='\\n'){\n    c = getc(stdin);     \n    if(c==EOF){\n        return EOF;\n    }\n\n    if(totchars == current_size){\n        current_size *=2;\n            str = (char*)realloc(str,current_size*sizeof(char));\n    }\n        str[totchars] = c;  //store the newly-read character    \n    totchars++;\n}\nstr[totchars]='\\0';   //at the end append null character to mark end of string\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "c", "cmake"], "comments": [{"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438783994, "post_id": 31834554, "comment_id": 51591830, "body": "<a href=\"http://www.cmake.org/cmake/help/v3.2/command/include_directories.html\" rel=\"nofollow noreferrer\">RTFM</a> and <a href=\"http://www.cmake.org/cmake/help/v3.2/command/target_include_directories.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438784238, "post_id": 31834554, "comment_id": 51592023, "body": "@JanHudec I dont know why but target_include_directories is not available for me: CMake Error at CMakeLists.txt:6 (target_include_directories):   Unknown CMake command &quot;target_include_directories&quot;"}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438786900, "post_id": 31834554, "comment_id": 51594058, "body": "<code>target_include_directories</code> is relatively new command. Upgrade your CMake or resort to the simple <code>include_directories</code>."}, {"owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1438840682, "post_id": 31834554, "comment_id": 51616444, "body": "@JanHudec I had tried include_directories before and it hadn&#39;t work. But now, I don&#39;t know what mistake I did before, but yes it worked. Don&#39;t you think to write this so that I can accept? Thanks."}], "owner": {"reputation": 1484, "user_id": 1887691, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1972bbd27f06a96f8c46e9184d7231ac?s=128&d=identicon&r=PG", "display_name": "Mert Mertce", "link": "https://stackoverflow.com/users/1887691/mert-mertce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438782833, "creation_date": 1438782833, "last_edit_date": 1592644375, "question_id": 31834554, "link": "https://stackoverflow.com/questions/31834554/how-can-source-files-see-other-files-without-path-in-a-cmake-project", "title": "how can source files see other files without path in a cmake project?", "body": "<p>In a CMAKE project I have created 2 folders, a and b, each of which has <code>include</code> and src directories:</p>\n<blockquote>\n<p>-- MyProject</p>\n<p>CMakeLists.txt</p>\n<p>---- a</p>\n<p>------ include</p>\n<p>-------- a.h</p>\n<p>---- b</p>\n<p>------ include</p>\n<p>-------- b.h</p>\n</blockquote>\n<p>...</p>\n<p><code>a.h</code> includes <code>b.h</code>. But only if the path is specified, ie, <code>#include &quot;../../b/include/b.h&quot;</code>.</p>\n<p>How can I configure <strong>cmake</strong> so that all project files can see each other without specifying the path? eg: <code>#include &quot;b.h&quot;</code></p>\n"}, {"tags": ["c++", "ios", "c", "sockets", "raw-sockets"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 1, "creation_date": 1438782068, "post_id": 31834030, "comment_id": 51590352, "body": "And <code>res == 0</code> after every call?"}, {"owner": {"reputation": 47, "user_id": 2048488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0676517c8162396fec54fde4f9f50e42?s=128&d=identicon&r=PG", "display_name": "Mash", "link": "https://stackoverflow.com/users/2048488/mash"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1438786917, "post_id": 31834030, "comment_id": 51594073, "body": "Yep, res is always 0"}], "answers": [{"comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1438784945, "post_id": 31835137, "comment_id": 51592594, "body": "The Mach source is on github, so you could provide a link?"}, {"owner": {"reputation": 47, "user_id": 2048488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0676517c8162396fec54fde4f9f50e42?s=128&d=identicon&r=PG", "display_name": "Mash", "link": "https://stackoverflow.com/users/2048488/mash"}, "edited": false, "score": 0, "creation_date": 1438786973, "post_id": 31835137, "comment_id": 51594122, "body": "Interesting!  Great thanks for your comment. I can sleep now :)"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 3, "last_activity_date": 1438784274, "creation_date": 1438784274, "answer_id": 31835137, "question_id": 31834030, "link": "https://stackoverflow.com/questions/31834030/reading-tcp-nodelay-using-getsockopt-returning-a-weird-value/31835137#31835137", "title": "Reading TCP_NODELAY using getsockopt returning a weird value", "body": "<p>This is ok. The only thing relevant is that the flag is zero or non-zero. I'm pretty sure <code>ios</code> (that you tagged the question with) will behave more or less like the old Darwin code and from reading that I can see that when setting the option, the kernel only cares if it's zero or not, but when reading it the actual internal flag value is used.</p>\n\n<p>If you have kernel include files you can find the relevant flag in netinet/tcp_var.h (this is kernel include file, so don't include it yourself) and it's called <code>TF_NODELAY</code> and happens to have the value 4.</p>\n"}], "owner": {"reputation": 47, "user_id": 2048488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0676517c8162396fec54fde4f9f50e42?s=128&d=identicon&r=PG", "display_name": "Mash", "link": "https://stackoverflow.com/users/2048488/mash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 961, "favorite_count": 1, "accepted_answer_id": 31835137, "answer_count": 1, "score": 2, "last_activity_date": 1438784436, "creation_date": 1438781481, "question_id": 31834030, "link": "https://stackoverflow.com/questions/31834030/reading-tcp-nodelay-using-getsockopt-returning-a-weird-value", "title": "Reading TCP_NODELAY using getsockopt returning a weird value", "body": "<p>I am trying to verifying that my setting of TCP_NODELAY is working by reading it back after I set it.</p>\n\n<p>Im setting the value to '1', but when I read it back, its set to '4'. Im afraid im doing something wrong.</p>\n\n<p>Heres my code:</p>\n\n<pre><code>    int tcpBefore;\n    socklen_t tcpBeforeLen = sizeof(tcpBefore);\n    int res = getsockopt(socket, IPPROTO_TCP, TCP_NODELAY, &amp;tcpBefore, &amp;tcpBeforeLen);\n\n    // Turn on TCP no delay\n    int tcpNoDelay = 1;\n    res = setsockopt(socket, IPPROTO_TCP, TCP_NODELAY, (void *)&amp;tcpNoDelay, sizeof(tcpNoDelay));\n\n    int tcpAfter;\n    socklen_t tcpAfterLen = sizeof(tcpAfter);\n    res = getsockopt(socket, IPPROTO_TCP, TCP_NODELAY, &amp;tcpAfter, &amp;tcpAfterLen);\n</code></pre>\n\n<p>The value I get for 'tcpBefore' is '0'. The value I get after I set it is '4'. This seems odd. </p>\n\n<p>Is there something I am doing wrong?</p>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "edited": false, "score": 1, "creation_date": 1438968250, "post_id": 31833843, "comment_id": 51684263, "body": "what do you mean by native methods?"}], "owner": {"reputation": 1707, "user_id": 4627565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-mGteM1QT0Zk/AAAAAAAAAAI/AAAAAAAAASs/fK5voIJW1VU/photo.jpg?sz=128", "display_name": "Bionix1441", "link": "https://stackoverflow.com/users/4627565/bionix1441"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1438782481, "creation_date": 1438781018, "last_edit_date": 1438782481, "question_id": 31833843, "link": "https://stackoverflow.com/questions/31833843/how-to-get-all-the-native-methods-that-have-been-called-with-gdb", "title": "How to get all the native methods that have been called with gdb?", "body": "<p>I have a program I want to debug. I would like to get all native methods that are called without setting any breakpoints, since the program I run exhibit a weird behavior and skip compiling the methods it is supposed to do. </p>\n\n<p>Is there a way to have all native methods that have been called by a java program with <code>gdb</code> (without setting breakpoints) ?</p>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1438781454, "post_id": 31833788, "comment_id": 51589862, "body": "What version of gcc?  It runs fine for me with gcc 4.1.2."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1438782840, "post_id": 31833788, "comment_id": 51590947, "body": "As you mention &quot;<i>if I run just make then in a manner that I don&#39;t understand</i>&quot; you perhaps might think about training you C skills by some less complicated thing than a <code>malloc()</code> implementation?"}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438847404, "post_id": 31833788, "comment_id": 51619996, "body": "@dbush I use gcc 4.8.4 but it seems I got a different version of the file malloc. c for some reason."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438863344, "post_id": 31833788, "comment_id": 51630288, "body": "@dbush Can you tell me how you ran it? Now I can run <code>RUN_TESTS</code> but it hangs and does nothing."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1438864336, "post_id": 31833788, "comment_id": 51631043, "body": "When you call <code>RUN_TESTS</code>, it&#39;s waiting for you to hit Enter before going on to the next test."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438867676, "post_id": 31833788, "comment_id": 51633604, "body": "@dbush Cool! Now all tests passed. Thanks! :-)"}], "answers": [{"comments": [{"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1438847473, "post_id": 31834260, "comment_id": 51620034, "body": "That is strange. If I run <code>git pull</code> then it says everything is up to date but it is not the same file. Where did my file come from? I posted the contents of my <code>malloc.c</code> in the original question now and it is not the same as the latest version from the repo. What is the reason for this?"}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1438858702, "post_id": 31834260, "comment_id": 51627456, "body": "I checked out the entire project again and now I got the same <code>malloc.c</code> as in the project. But I still can&#39;t compile / run it."}, {"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "reply_to_user": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 1, "creation_date": 1438936314, "post_id": 31834260, "comment_id": 51664229, "body": "@NiklasinStockholm best start another question for the new problems then. Glad you&#39;ve at least got the latest code now."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1438943407, "post_id": 31834260, "comment_id": 51668741, "body": "2 hours later it worked for me. I can now run the tests. Thank you for the answer."}], "tags": [], "owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "is_accepted": true, "score": 2, "last_activity_date": 1438782045, "creation_date": 1438782045, "answer_id": 31834260, "question_id": 31833788, "link": "https://stackoverflow.com/questions/31833788/how-can-i-compile-and-run-this-project/31834260#31834260", "title": "How can I compile and run this project?", "body": "<pre><code>66 static Header *morecore(\n67     unsigned nu) /* the amount of memory to ask for (in Header-sized units) */\n68 {\n69     char *cp;\n70     Header *up;\n71     if (nu &lt; NALLOC)\n72         nu = NALLOC;\n73     cp = sbrk(nu * sizeof(Header));\n74     if (cp == (char *) -1) /* no space at all */\n75         return NULL;\n76     up = (Header *) cp;\n77     up-&gt;s.size = nu;\n78     free((void *)(up+1));\n79     return freep;\n80 }\n</code></pre>\n\n<p>Your error refers to line 77 of <code>malloc.c</code> being <code>no_pages = ...</code> but the current code on <a href=\"https://github.com/joelpet/malloc/blob/master/malloc.c#L77\" rel=\"nofollow\">GitHub</a> is not that. So post up what you have in your malloc.c or else get the latest code from GitHub.</p>\n"}], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 31834260, "answer_count": 1, "score": 0, "last_activity_date": 1438847345, "creation_date": 1438780886, "last_edit_date": 1438847345, "question_id": 31833788, "link": "https://stackoverflow.com/questions/31833788/how-can-i-compile-and-run-this-project", "title": "How can I compile and run this project?", "body": "<p><a href=\"https://github.com/joelpet/malloc\" rel=\"nofollow\">https://github.com/joelpet/malloc</a></p>\n\n<p>i want to learn how to create a more efficient malloc and I found this project. I can run make to compile it:</p>\n\n<pre><code>$ make tstmalloc\nmake: `tstmalloc' is up to date.\n</code></pre>\n\n<p>But how can I run and test it? I read the readme file but it is not detailed enough. I want to compile all the programs, test all the programs and understand what the programs do. But if I run just make then it complains in a manner that I don't understand:</p>\n\n<pre><code>$ make\ngcc  -g -Wall -ansi -DSTRATEGY=2   -c -o malloc.o malloc.c\nmalloc.c: In function \u2018morecore\u2019:\nmalloc.c:77:3: warning: implicit declaration of function \u2018getpagesize\u2019 [-Wimplicit-function-declaration]\n   noPages = ((nu*sizeof(Header))-1)/getpagesize() + 1;\n   ^\nmalloc.c:78:84: error: \u2018MAP_ANONYMOUS\u2019 undeclared (first use in this function)\n   cp = mmap(__endHeap, noPages*getpagesize(), PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);\n                                                                                    ^\nmalloc.c:78:84: note: each undeclared identifier is reported only once for each function it appears in\nmalloc.c:85:5: warning: implicit declaration of function \u2018perror\u2019 [-Wimplicit-function-declaration]\n     perror(\"failed to get more memory\");\n     ^\nmake: *** [malloc.o] Error 1\n</code></pre>\n\n<p>And if I try to compile the programs individually I get another error msg that I don't understand:</p>\n\n<pre><code>$ gcc malloc.c \n/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 0 has invalid symbol index 11\n</code></pre>\n\n<p>The contents of my <code>malloc.c</code> is:</p>\n\n<pre><code>#include \"brk.h\"\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt; \n#include &lt;errno.h&gt; \n#include &lt;sys/mman.h&gt;\n\n#define NALLOC 1024                                     /* minimum #units to request */\n\ntypedef long Align;                                     /* for alignment to long boundary */\n\nunion header {                                          /* block header */\n  struct {\n    union header *ptr;                                  /* next block if on free list */\n    unsigned size;                                      /* size of this block  - what unit? */ \n  } s;\n  Align x;                                              /* force alignment of blocks */\n};\n\ntypedef union header Header;\n\nstatic Header base;                                     /* empty list to get started */\nstatic Header *freep = NULL;                            /* start of free list */\n\n/* free: put block ap in the free list */\n\nvoid free(void * ap)\n{\n  Header *bp, *p;\n\n  if(ap == NULL) return;                                /* Nothing to do */\n\n  bp = (Header *) ap - 1;                               /* point to block header */\n  for(p = freep; !(bp &gt; p &amp;&amp; bp &lt; p-&gt;s.ptr); p = p-&gt;s.ptr)\n    if(p &gt;= p-&gt;s.ptr &amp;&amp; (bp &gt; p || bp &lt; p-&gt;s.ptr))\n      break;                                            /* freed block at atrt or end of arena */\n\n  if(bp + bp-&gt;s.size == p-&gt;s.ptr) {                     /* join to upper nb */\n    bp-&gt;s.size += p-&gt;s.ptr-&gt;s.size;\n    bp-&gt;s.ptr = p-&gt;s.ptr-&gt;s.ptr;\n  }\n  else\n    bp-&gt;s.ptr = p-&gt;s.ptr;\n  if(p + p-&gt;s.size == bp) {                             /* join to lower nbr */\n    p-&gt;s.size += bp-&gt;s.size;\n    p-&gt;s.ptr = bp-&gt;s.ptr;\n  } else\n    p-&gt;s.ptr = bp;\n  freep = p;\n}\n\n/* morecore: ask system for more memory */\n\n#ifdef MMAP\n\nstatic void * __endHeap = 0;\n\nvoid * endHeap(void)\n{\n  if(__endHeap == 0) __endHeap = sbrk(0);\n  return __endHeap;\n}\n#endif\n\n\nstatic Header *morecore(unsigned nu)\n{\n  void *cp;\n  Header *up;\n#ifdef MMAP\n  unsigned noPages;\n  if(__endHeap == 0) __endHeap = sbrk(0);\n#endif\n\n  if(nu &lt; NALLOC)\n    nu = NALLOC;\n#ifdef MMAP\n  noPages = ((nu*sizeof(Header))-1)/getpagesize() + 1;\n  cp = mmap(__endHeap, noPages*getpagesize(), PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);\n  nu = (noPages*getpagesize())/sizeof(Header);\n  __endHeap += noPages*getpagesize();\n#else\n  cp = sbrk(nu*sizeof(Header));\n#endif\n  if(cp == (void *) -1){                                 /* no space at all */\n    perror(\"failed to get more memory\");\n    return NULL;\n  }\n  up = (Header *) cp;\n  up-&gt;s.size = nu;\n  free((void *)(up+1));\n  return freep;\n}\n\nvoid * malloc(size_t nbytes)\n{\n  Header *p, *prevp;\n  Header * morecore(unsigned);\n  unsigned nunits;\n\n  if(nbytes == 0) return NULL;\n\n  nunits = (nbytes+sizeof(Header)-1)/sizeof(Header) +1;\n\n  if((prevp = freep) == NULL) {\n    base.s.ptr = freep = prevp = &amp;base;\n    base.s.size = 0;\n  }\n  for(p= prevp-&gt;s.ptr;  ; prevp = p, p = p-&gt;s.ptr) {\n    if(p-&gt;s.size &gt;= nunits) {                           /* big enough */\n      if (p-&gt;s.size == nunits)                          /* exactly */\n    prevp-&gt;s.ptr = p-&gt;s.ptr;\n      else {                                            /* allocate tail end */\n    p-&gt;s.size -= nunits;\n    p += p-&gt;s.size;\n    p-&gt;s.size = nunits;\n      }\n      freep = prevp;\n      return (void *)(p+1);\n    }\n    if(p == freep)                                      /* wrapped around free list */\n      if((p = morecore(nunits)) == NULL)\n    return NULL;                                    /* none left */\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "mpi", "cluster-computing", "distributed-computing", "mpich"], "comments": [{"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "edited": false, "score": 4, "creation_date": 1438780764, "post_id": 31833664, "comment_id": 51589275, "body": "<i>Thread</i>, not process.  Every process/rank must call <code>MPI_Init()</code>.  The issue is that if you&#39;re using hybrid threading+MPI, only one thread (in <i>each</i> rank/process) can call MPI_Init; e.g., it would be in an <code>#pragma omp single</code> construct or similar."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "edited": false, "score": 0, "creation_date": 1438784251, "post_id": 31833664, "comment_id": 51592030, "body": "I see @JonathanDursi, thanks, now I am going to struggle for another day in my other question.."}], "answers": [{"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1438784323, "post_id": 31833781, "comment_id": 51592088, "body": "Thanks mort, now I can focus again on my other question, which bothers me for so many days!"}], "tags": [], "owner": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "is_accepted": true, "score": 5, "last_activity_date": 1438781371, "last_edit_date": 1438781371, "creation_date": 1438780860, "answer_id": 31833781, "question_id": 31833664, "link": "https://stackoverflow.com/questions/31833664/mpi-init-must-be-called-by-one-thread-only/31833781#31833781", "title": "MPI_Init must be called by one thread only", "body": "<p><code>MPI_Init</code> must be the first MPI function called by your MPI program. It must be called by each process. Note that a process is not the same as a thread! If you go on to spawn threads from a process, those threads must not call <code>MPI_Init</code> again. </p>\n\n<p>So your program should be something like this:</p>\n\n<pre><code> int main(int argc, char **argv) \n {\n     MPI_Init(&amp;argc, &amp;argv);\n     int mpirank;\n     MPI_Comm_rank(MPI_COMM_WORLD, &amp;mpirank);\n     // No more calls to MPI_Init in here\n     ...\n     MPI_Finalize();\n }\n</code></pre>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "accepted_answer_id": 31833781, "answer_count": 1, "score": 3, "last_activity_date": 1438781371, "creation_date": 1438780565, "last_edit_date": 1495539828, "question_id": 31833664, "link": "https://stackoverflow.com/questions/31833664/mpi-init-must-be-called-by-one-thread-only", "title": "MPI_Init must be called by one thread only", "body": "<p>The <a href=\"http://www.mpich.org/static/docs/v3.1/www3/MPI_Init.html\" rel=\"nofollow noreferrer\">ref</a> of MPI_Init, states:</p>\n\n<blockquote>\n  <p>This routine must be called by one thread only. That thread is called the main thread and must be the thread that calls MPI_Finalize.</p>\n</blockquote>\n\n<p>How to do this? I mean every example I have seen looks like <a href=\"https://www.dartmouth.edu/~rc/classes/intro_mpi/hello_world_ex.html\" rel=\"nofollow noreferrer\">this</a> and in my code, I tried:</p>\n\n<pre><code>MPI_Comm_rank(MPI_COMM_WORLD, &amp;mpirank);\nbool mpiroot = (mpirank == 0);\nif(mpiroot)\n  MPI_Init(&amp;argc, &amp;argv);\n</code></pre>\n\n<p>but I got:</p>\n\n<pre><code>Attempting to use an MPI routine before initializing MPICH\n</code></pre>\n\n<p>However, notice that this will work fine, if I leave it as in the example, I just had to re-check, because of my code's failure <a href=\"https://stackoverflow.com/questions/31833360/mpi-code-does-not-work-with-2-nodes-but-with-1\">here</a>.</p>\n\n<hr>\n\n<p>I am thinking that because we call <code>mpiexec -n 4 ./test</code>, 4 processes will be spawned, thus all of them will call <code>MPI_Init</code>. I just printed stuff at the very first line of <code>main()</code> and they will be printed as many times as the number of processes. </p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1438781217, "post_id": 31833646, "comment_id": 51589642, "body": "Surprise surprise, you&#39;re using a preprocessor MACRO... :-)"}], "answers": [{"tags": [], "owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "is_accepted": true, "score": 3, "last_activity_date": 1438781597, "last_edit_date": 1438781597, "creation_date": 1438781236, "answer_id": 31833921, "question_id": 31833646, "link": "https://stackoverflow.com/questions/31833646/undefine-macro-defined-twice/31833921#31833921", "title": "Undefine macro defined twice", "body": "<p>If I understand correctly, something like this is happening:</p>\n\n<pre><code>#include \"h1.h\" // defines PRINT: printf(\" hi , macro 1\\n\"); \n\ninline void print1(){\n    PRINT();\n}\n\n#undef PRINT\n\n#include \"h2.h\" // defines PRINT: printf(\" hi , macro 2\\n\");\n</code></pre>\n\n<p>Nothing weird happens though. The pre-processor substitues <code>PRINT</code> inside the inline function before it is un-defined. So in the resulting code (you can see this when you compile with the <code>-E</code> flag for GCC), it becomes this:</p>\n\n<pre><code>// contents of h1.h...\n\ninline void print1(){\n    printf(\" hi , macro 1\\n\");\n}\n\n// contents of h2.h...\n</code></pre>\n\n<p><code>#define</code>d macros are only kept for the duration of the pre-processing, and are substituted as the pre-processor goes along. Similar to variables in normal programming, if you re-assign it the pre-processor will just use the new value for following occurrences.</p>\n"}, {"tags": [], "owner": {"reputation": 28330, "user_id": 298054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7dffcc86140441472cfb6119375a9d7?s=128&d=identicon&r=PG", "display_name": "jweyrich", "link": "https://stackoverflow.com/users/298054/jweyrich"}, "is_accepted": false, "score": 1, "last_activity_date": 1438781825, "last_edit_date": 1438781825, "creation_date": 1438781375, "answer_id": 31833982, "question_id": 31833646, "link": "https://stackoverflow.com/questions/31833646/undefine-macro-defined-twice/31833982#31833982", "title": "Undefine macro defined twice", "body": "<p>It works because during compilation the pre-processor reaches the <code>PRINT()</code> call in <code>print1</code>, evaluates the macro, and replace it with its current value. Then, if I understand correctly, later (in the next lines) you redefine or undefine PRINT (be it by including another header), then any further reference to it will make the pre-processor replace it with its current value again (which is now different), therefore you get 2 distinct behaviours calling the \"same\" macro.</p>\n"}], "owner": {"reputation": 45, "user_id": 3290819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R174g.jpg?s=128&g=1", "display_name": "Mohammad_mhh", "link": "https://stackoverflow.com/users/3290819/mohammad-mhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 31833921, "answer_count": 2, "score": 1, "last_activity_date": 1438781825, "creation_date": 1438780502, "last_edit_date": 1438780857, "question_id": 31833646, "link": "https://stackoverflow.com/questions/31833646/undefine-macro-defined-twice", "title": "Undefine macro defined twice", "body": "<p>I want to use a macro defined in different header files with the same name and different implementations.\nI have two header files <code>h1.h</code> and <code>h2.h</code>. In the first header file I defined:</p>\n\n<pre><code>#define PRINT  printf(\" hi , macro 1\\n\"); \n</code></pre>\n\n<p>and in the second header file </p>\n\n<pre><code>#define PRINT  printf(\" hi , macro 2\\n\");\n</code></pre>\n\n<p>in <code>main()</code> when I try to use PRINT it is printed depending on the order of inclusion. \nI found some similar problems and they used a wrapper, by  including the first header file then defining an inline method:</p>\n\n<pre><code>inline void print1() {\n      PRINT();\n}\n</code></pre>\n\n<p>and then undefining  PRINT and including the second header file. In <code>main()</code> when I call print1() and PRINT I got the output from them both. \nMy missing point is how after we have undefined the PRINT from the first header file we are still able to have it - in other words what happens when we call it inside the inline function?  Did the compiler copy the value of PRINT and assign it to the function and save the function in some way? </p>\n"}, {"tags": ["c", "multithreading", "gdb", "raspberry-pi", "qemu"], "owner": {"reputation": 81, "user_id": 5066973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672bd0226ae283df603561c5b963285e?s=128&d=identicon&r=PG&f=1", "display_name": "Sorin Papuc", "link": "https://stackoverflow.com/users/5066973/sorin-papuc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1438802928, "creation_date": 1438777480, "last_edit_date": 1438802928, "question_id": 31832454, "link": "https://stackoverflow.com/questions/31832454/how-to-debug-multi-threaded-raspberry-pi-code-executed-in-qemu", "title": "How to debug multi-threaded Raspberry Pi code executed in qemu", "body": "<p>I am trying to debug code written for Raspberry Pi on my Ubuntu laptop. I am using:</p>\n\n<ul>\n<li>the Raspberry Pi Toolchain and (partial ?) root fs obtained with <code>git clone git://github.com/raspberrypi/tools.git</code> executed in ~/rpi</li>\n<li>qemu virtualizer installed from Ubuntu repositiories - qemu-arm reports\nversion 2.0.0</li>\n<li><p>the following test case:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic void *thread(void *arg)\n{\n   static char szReturn[] = \"Me too\";\n\n   puts((char *)arg);\n   puts(\"Hello, I'm Thread\");\n   return szReturn;\n}\n\nint main(int argc, char *argv[])\n{\n   pthread_t tid;\n   char szGreeting[] = \"Hello, I'm Main\", *reply;\n\n   if (pthread_create(&amp;tid, NULL, &amp;thread, szGreeting) != 0)\n   {\n        perror(\"pthread_create says: \");\n        return 1;\n   }\n   puts(\"Nice to meet you\");\n   if (pthread_join(tid, (void **)&amp;reply) == 0)\n        puts(reply);\n\n   return 0;\n}\n</code></pre></li>\n</ul>\n\n<p>After adding <code>~/rpi/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/bin</code> to the <code>PATH</code> (I am using 64 bit Ubuntu), I do (from the directory in which the test code resides):</p>\n\n<ul>\n<li><code>arm-linux-gnueabihf-gcc -g -O0 test.c -o test -lpthread</code></li>\n<li><code>qemu-arm -L ~/rpi/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/arm-linux-gnueabihf/libc ./test</code></li>\n</ul>\n\n<p>I get the expected output, so the thread creation and execution works.</p>\n\n<p>However, if I do:</p>\n\n<ul>\n<li><code>qemu-arm -g 1234 -L ~/rpi/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/arm-linux-gnueabihf/libc ./test</code> in one terminal, to launch qemu and have it waiting for the debugger to connect to it</li>\n<li><code>arm-linux-gnueabihf-gdb -ex=\"target remote localhost:1234\" -x=\"set breakpoint pending on\" -ex=\"break main\" ./test</code> in another terminal, to start debugging the program with gdb</li>\n</ul>\n\n<p>I get in gdb, after 'continue' I reach main, I set breakpoints to thread, 21 and 24, I next OK to the ptread_create call, so debugging the main thread works, but:</p>\n\n<ul>\n<li>when it executes pthread_create, instead of hitting one of the 3 breakpoints (the thread, the create failure or the create success cases), gdb reports \"inferior terminated' and the session ends</li>\n<li>back in the qemu terminal though, the program has generated the normal output, so the thread was created and executed, and the whole program worked as expected</li>\n</ul>\n\n<p>So gdb can not debug multithreaded programs in this configuration/setup?! What am I missing?</p>\n\n<p>Could the fact that I am running Ubuntu in a Parallels virtual machine on an OSX machine have something to do with it? I don't have a dedicated Ubuntu machine to test, but I doubt it.</p>\n\n<p>Update: On a native Fedora system the behavior is even worse: the breakpoints are also not taken, but it also crashes in <code>puts</code> and <code>pthread_join</code>.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 11342, "user_id": 4616087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kEud.png?s=128&g=1", "display_name": "Marvin", "link": "https://stackoverflow.com/users/4616087/marvin"}, "edited": false, "score": 0, "creation_date": 1438776224, "post_id": 31831934, "comment_id": 51585899, "body": "Please define &quot;not working as expected&quot;."}, {"owner": {"reputation": 701, "user_id": 4778150, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e5f2f74e3b4e6c357009ce7a08998097?s=128&d=identicon&r=PG&f=1", "display_name": "saltandwater", "link": "https://stackoverflow.com/users/4778150/saltandwater"}, "reply_to_user": {"reputation": 11342, "user_id": 4616087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kEud.png?s=128&g=1", "display_name": "Marvin", "link": "https://stackoverflow.com/users/4616087/marvin"}, "edited": false, "score": 0, "creation_date": 1438776273, "post_id": 31831934, "comment_id": 51585942, "body": "@Marvin, this is the output I get [\ufffd\ufffd] [def] [ghi] [fromfun]"}, {"owner": {"reputation": 11342, "user_id": 4616087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kEud.png?s=128&g=1", "display_name": "Marvin", "link": "https://stackoverflow.com/users/4616087/marvin"}, "edited": false, "score": 0, "creation_date": 1438776301, "post_id": 31831934, "comment_id": 51585959, "body": "And what output would you expect?"}, {"owner": {"reputation": 701, "user_id": 4778150, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e5f2f74e3b4e6c357009ce7a08998097?s=128&d=identicon&r=PG&f=1", "display_name": "saltandwater", "link": "https://stackoverflow.com/users/4778150/saltandwater"}, "reply_to_user": {"reputation": 11342, "user_id": 4616087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kEud.png?s=128&g=1", "display_name": "Marvin", "link": "https://stackoverflow.com/users/4616087/marvin"}, "edited": false, "score": 0, "creation_date": 1438776477, "post_id": 31831934, "comment_id": 51586102, "body": "@Marvin, I was expecting  [abc] [def] [ghi] [fromfun]"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1438776691, "post_id": 31831934, "comment_id": 51586242, "body": "&#39;it just has to hold an address&#39;...... &#39;ret[i] =&#39;"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438776736, "post_id": 31831934, "comment_id": 51586267, "body": "@MartinJames yay beat you by 45 sec... :-)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438776737, "post_id": 31831934, "comment_id": 51586270, "body": "AKA &#39;arrays are not pointers&#39;"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438776774, "post_id": 31831934, "comment_id": 51586293, "body": "@SouravGhosh - meh, my net is slow today:)"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438776978, "post_id": 31831934, "comment_id": 51586436, "body": "Should have used a more minimal example"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1438777653, "post_id": 31831934, "comment_id": 51586907, "body": "lol - @SouravGhosh didn&#39;t get the accept anyway, even though first to the correct answer:("}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438777734, "post_id": 31831934, "comment_id": 51586958, "body": "@MartinJames What to do.. :&#39;( Today&#39;s not really my day. Did you notice the serial DV on me earlier today? (weep)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1438778104, "post_id": 31831934, "comment_id": 51587246, "body": "Note: Do not use <code>void *</code> without actual need. The correct  way is <code>ret = malloc(sizeof(*ret))</code>. This will infer the type from the variable, thus always have the correct size. The second best <code>ret = malloc(sizeof(char *))</code>. Note: I intentionally omitted the required multiplier. Also note: <code>sizeof(char)</code> is <i>defined</i> to yield  <code>1</code>. I.e., it will never yield anything different, so it is nonsense to use."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438781490, "post_id": 31831934, "comment_id": 51589898, "body": "@SouravGhosh: Fine, thanks, hope you&#39;re fine, too. Ok, got it. Yes, sorry, I did not hav a closer look at it. Anyway, it might help, if as many people comment on that as possible."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438781597, "post_id": 31831934, "comment_id": 51589973, "body": "@SouravGhosh: Read the post now. See above"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438781794, "post_id": 31831934, "comment_id": 51590124, "body": "@Olaf Yes, sure sir. Absolutely perfect, no issues. Take my comment in this way, I was trying to get a <i>free</i> review of my answer from you by pointing you to it. Anyways, I ^-ed your comment already. :-)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438788283, "post_id": 31831934, "comment_id": 51595043, "body": "@SouravGhosh - no  I didn&#39;t notice but, anyway, it was your turn to suffer:)"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438783735, "post_id": 31832139, "comment_id": 51591637, "body": "+1. I like it as you actually explain, not just provide code. Two small additions, if I may suggest: Why the change from <code>void *</code> to <code>char *</code>, and I&#39;d put more emphasis on <code>*ret</code>. A personal note: I prefer to use function-style of <code>sizeof</code> actually; that is more consistent - but that is really just my personal preference, your code is ok as-is!)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438784862, "post_id": 31832139, "comment_id": 51592524, "body": "@Olaf Thank you for your valuable input. I tried to clarify, please review once more. :-)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438785501, "post_id": 31832139, "comment_id": 51592998, "body": "Perfectly. If I had asked I had accepted your answer. (how polite we are today:-). I just took the freedom to add two spaces."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438785613, "post_id": 31832139, "comment_id": 51593081, "body": "@Olaf Fine, fine. Good to hear that. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 6, "last_activity_date": 1438785350, "last_edit_date": 1438785350, "creation_date": 1438776619, "answer_id": 31832139, "question_id": 31831934, "link": "https://stackoverflow.com/questions/31831934/returning-array-of-string-from-function-not-working-as-expected/31832139#31832139", "title": "returning array of string from function not working as expected", "body": "<p>The major issue, as I can see is the memory overrun.</p>\n\n<p>You allocate memory to hold one element</p>\n\n<pre><code> ret = malloc(sizeof(void*));\n</code></pre>\n\n<p>but, you're putting 5 elements.</p>\n\n<pre><code>for(i=0;i&lt;5;i++)\n{\n    ret[i] = malloc(20 * sizeof(char));....\n</code></pre>\n\n<p>It is  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.\nto access beyond the allocated memory.</p>\n\n<p>The memory allocation to <code>ret</code> should look like</p>\n\n<pre><code> ret = malloc(5 * sizeof(char *));\n</code></pre>\n\n<p>or</p>\n\n<pre><code> ret = malloc(5 * sizeof*ret); //portable\n</code></pre>\n\n<p>To elaborate the changes made</p>\n\n<ul>\n<li>Allocate 5 times the size of a single element, as we're going to store 5 elements.</li>\n<li>Strictly speaking, as the <code>ret</code> is of type <code>char **</code>, we need to use <code>char *</code> while calculating the size to be allocated for <code>ret</code>, not a <code>void *</code>.</li>\n<li>The change towards using <code>sizeof *ret</code> makes the code more robust, as in future, if the type of <code>ret</code> get changed to some other type, you don't need to repeat the type changes in this allocation, as the allocation would depend on the type of <code>*ret</code>, anyway. </li>\n</ul>\n\n<p>Note: FWIW, the parenthesis around the argument to <code>sizeof</code> is required only in case of the argument being a data type, like <code>sizeof(int)</code>. In case of using a variable name as argument, the parenthesis is optional, i.e., both <code>sizeof(*ptr)</code> and <code>sizeof *ptr</code> are both perfectly valid and legal.</p>\n\n<p>That said,</p>\n\n<ol>\n<li>Always check for the success of <code>malloc()</code> before using the returned pointer</li>\n<li>In <code>C</code>, <code>sizeof(char)</code> is guaranteed to be <code>1</code>. Using the same as a multiplier is redundant.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": true, "score": 5, "last_activity_date": 1438776834, "creation_date": 1438776834, "answer_id": 31832218, "question_id": 31831934, "link": "https://stackoverflow.com/questions/31831934/returning-array-of-string-from-function-not-working-as-expected/31832218#31832218", "title": "returning array of string from function not working as expected", "body": "<p>You need to make sure that you allocate the full array of pointers for <strong>ret</strong> array.</p>\n\n<pre><code>//don't forget function has to return char** and not int. (Remember char**, not char*)\nchar** fun(char strar[][20])\n{\n int i = 0;\n char** ret;\n ret = malloc(sizeof(void*) * 5); //sizeof(void*) is enough, it just has to hold an address \n\n for(i=0;i&lt;5;i++)\n {\n  ret[i] = malloc(20 * sizeof(char));\n  strcpy(ret[i],strar[i]);\n }\n\n strcpy(ret[3],\"fromfun\");\n\n return ret;\n}\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 4778150, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e5f2f74e3b4e6c357009ce7a08998097?s=128&d=identicon&r=PG&f=1", "display_name": "saltandwater", "link": "https://stackoverflow.com/users/4778150/saltandwater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "closed_date": 1438785964, "accepted_answer_id": 31832218, "answer_count": 2, "score": 0, "last_activity_date": 1459588267, "creation_date": 1438776078, "last_edit_date": 1459588267, "question_id": 31831934, "link": "https://stackoverflow.com/questions/31831934/returning-array-of-string-from-function-not-working-as-expected", "closed_reason": "Not suitable for this site", "title": "returning array of string from function not working as expected", "body": "<p>I am trying to pass an array of strings to a function, make some changes to it inside this function, and pass it back to <code>main()</code> and print it to see the changes. It is not working as expected. Please tell me where I'm going wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n\n//don't forget to declare this function\nchar** fun(char [][20]);\n\nint main(void)\n{\n    char strar[10][20] = { {\"abc\"}, {\"def\"}, {\"ghi\"}, {\"\"},{\"\"} }; //make sure 10 is added\n    char** ret; //no need to allocate anything for ret, ret is just a placeholder, allocation everything done in fun\n    int i = 0;\n\n    ret = fun(strar);\n    for(i=0;i&lt;4;i++)\n        printf(\"[%s] \",ret[i]);\n\n    printf(\"\\n\");\n    return 0;\n}\n\n//don't forget function has to return char** and not int. (Remember char**, not char*)\nchar** fun(char strar[][20])\n{\n    int i = 0;\n    char** ret;\n    ret = malloc(sizeof(void*)); //sizeof(void*) is enough, it just has to hold an address \n\n    for(i=0;i&lt;5;i++)\n    {\n        ret[i] = malloc(20 * sizeof(char));\n        strcpy(ret[i],strar[i]);\n    }\n\n    strcpy(ret[3],\"fromfun\");\n\n    return ret;\n}\n</code></pre>\n"}, {"tags": ["c", "ffmpeg", "decode", "aac"], "comments": [{"owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "edited": false, "score": 0, "creation_date": 1438779114, "post_id": 31831725, "comment_id": 51588018, "body": "Your audio input file uses a feature that the decoder does not yet support. I&#39;d recommend to open a bug report and upload a sample of your file so it can be implemented (<a href=\"https://www.ffmpeg.org/bugreports.html\" rel=\"nofollow noreferrer\">ffmpeg.org/bugreports.html</a>). Where did you get this file/data/stream from?"}, {"owner": {"reputation": 97, "user_id": 5173858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a6cb62378188d0224c7ed35ed90d540?s=128&d=identicon&r=PG&f=1", "display_name": "Tran Toan", "link": "https://stackoverflow.com/users/5173858/tran-toan"}, "reply_to_user": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "edited": false, "score": 0, "creation_date": 1438781921, "post_id": 31831725, "comment_id": 51590235, "body": "Does SSR here mean AAC SSR profile? I used a file encode with AAC LC profile. I can&#39;t upload the file right now because it&#39;s in other computer. I also try with the mp2 (got return -1163346256) from here: <a href=\"http://www.squee.eclipse.co.uk/samples/\" rel=\"nofollow noreferrer\">squee.eclipse.co.uk/samples</a> and some mp3 in my computer (got error header missing). Is there something wrong with the source code?"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5173858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a6cb62378188d0224c7ed35ed90d540?s=128&d=identicon&r=PG&f=1", "display_name": "Tran Toan", "link": "https://stackoverflow.com/users/5173858/tran-toan"}, "edited": false, "score": 0, "creation_date": 1438817043, "post_id": 31839093, "comment_id": 51610279, "body": "Thank you. I&#39;ll try again."}, {"owner": {"reputation": 97, "user_id": 5173858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a6cb62378188d0224c7ed35ed90d540?s=128&d=identicon&r=PG&f=1", "display_name": "Tran Toan", "link": "https://stackoverflow.com/users/5173858/tran-toan"}, "edited": false, "score": 0, "creation_date": 1438829910, "post_id": 31839093, "comment_id": 51613384, "body": "Thank you, I replace the fread function with av_read_frame() and It&#39;s work now. I have some more questions, I would be grateful if you could give me some advices. The input of av_read_frame() is AVFormatContext so what if I have more than one stream?  How can I set pcm type (s16le, f32be etc) for the output file .pcm. I try set AVCodecContext-&gt;sample_fmt but it got error."}, {"owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "reply_to_user": {"reputation": 97, "user_id": 5173858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a6cb62378188d0224c7ed35ed90d540?s=128&d=identicon&r=PG&f=1", "display_name": "Tran Toan", "link": "https://stackoverflow.com/users/5173858/tran-toan"}, "edited": false, "score": 0, "creation_date": 1438855897, "post_id": 31839093, "comment_id": 51625650, "body": "Each stream (AVStream) in the same file (AVFormatContext) will set AVPacket.stream_index to the index of that AVStream inside the AVFormatContext-&gt;streams[] array. You can&#39;t set pcm_type, each native decoder has one output type and that&#39;s what you get. If you want to convert from native output type to something else, use libswresample to do format (and samplerate, and channel) conversion."}], "tags": [], "owner": {"reputation": 9546, "user_id": 4726410, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01-VKaG7APo/AAAAAAAAAAI/AAAAAAAAE9w/c0cx5Eqf08s/photo.jpg?sz=128", "display_name": "Ronald S. Bultje", "link": "https://stackoverflow.com/users/4726410/ronald-s-bultje"}, "is_accepted": true, "score": 2, "last_activity_date": 1438795728, "creation_date": 1438795728, "answer_id": 31839093, "question_id": 31831725, "link": "https://stackoverflow.com/questions/31831725/error-when-decode-aac-with-avcodec-decode-audio4/31839093#31839093", "title": "Error when decode AAC with avcodec_decode_audio4()", "body": "<blockquote>\n<pre><code>f = fopen(filename, \"rb\");\nif (!f) {\n    fprintf(stderr, \"Could not open %s\\n\", filename);\n    return;\n}\noutfile = fopen(outfilename, \"wb\");\nif (!outfile) {\n    av_free(pCodecCtx);\n    return;\n}\n\n/* decode until eof */\navpkt.data = inbuf;\navpkt.size = fread(inbuf, 1, AUDIO_INBUF_SIZE, f);\n\nwhile (avpkt.size &gt; 0) {\n    int i, ch;\n    int got_frame = 0;\n</code></pre>\n</blockquote>\n\n<p>Yeah, that's not going to work. You can't dump raw bytes from some random muxing format (potentially mp4) into a decoder and expect it to work. Use <a href=\"http://ffmpeg.org/doxygen/trunk/group__lavf__decoding.html#ga4fdb3084415a82e3810de6ee60e46a61\" rel=\"nofollow\">av_read_frame</a>() to read individual audio packets from the muxing format, and feed the resulting AVPacket into the decoder using avcodec_decode_audio4(). See e.g. the <a href=\"http://dranger.com/ffmpeg/tutorial01.html\" rel=\"nofollow\">dranger api tutorial</a>. I know api-example.c uses the above code, but that unfortunately only works for a very limited subset of cases. Also see the detailed description in the <a href=\"https://www.ffmpeg.org/doxygen/trunk/group__lavf__decoding.html#details\" rel=\"nofollow\">API docs</a>.</p>\n"}], "owner": {"reputation": 97, "user_id": 5173858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a6cb62378188d0224c7ed35ed90d540?s=128&d=identicon&r=PG&f=1", "display_name": "Tran Toan", "link": "https://stackoverflow.com/users/5173858/tran-toan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2707, "favorite_count": 0, "accepted_answer_id": 31839093, "answer_count": 1, "score": 4, "last_activity_date": 1438795728, "creation_date": 1438775479, "last_edit_date": 1495541640, "question_id": 31831725, "link": "https://stackoverflow.com/questions/31831725/error-when-decode-aac-with-avcodec-decode-audio4", "title": "Error when decode AAC with avcodec_decode_audio4()", "body": "<p>I'm trying to decode AAC with FFmpeg native decoder and encountered an error</p>\n\n<pre><code>SSR is not implemeted. Update your FFmpeg version to newest from Git. If the      problem still occurs, it mean that your file has a feature which has not implemented.\n</code></pre>\n\n<p>Function <em>avcodec_decode_audio4()</em> return -1163346256. Is this because of FFmpeg version? I downloaded shared and dev version from <a href=\"http://ffmpeg.zeranoe.com/builds/\" rel=\"nofollow noreferrer\">here</a>. Is this up to date?</p>\n\n<p>Here is the source code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"stdio.h\"\n#include \"conio.h\"\n\nextern \"C\" \n{\n#ifndef __STDC_CONSTANT_MACROS\n#define __STDC_CONSTANT_MACROS\n#endif\n#include &lt;libavcodec\\avcodec.h&gt;\n#include &lt;libavformat/avformat.h&gt;\n}\n\n// compatibility with newer API\n#if LIBAVCODEC_VERSION_INT &lt; AV_VERSION_INT(55,28,1)\n#define av_frame_alloc avcodec_alloc_frame\n#define av_frame_free avcodec_free_frame\n#endif\n\n#define AUDIO_INBUF_SIZE 20480\n#define AUDIO_REFILL_THRESH 4096\n\n\nstatic void audio_decode_example(const char *outfilename, const char *filename);\n\n\nint main(int argc, char *argv[]) {\n    audio_decode_example(\"D:\\\\sample.pcm\",\"D:\\\\sample.m4a\");\n    getch();\n    return 0;\n}\n\n\n/*\n * Audio decoding.\n */\nstatic void audio_decode_example(const char *outfilename, const char *filename)\n{\n    AVCodec *codec;\n    AVFormatContext   *pFormatCtx = NULL;\n    AVCodecContext    *pCodecCtxOrig = NULL;\n    AVCodecContext * pCodecCtx= NULL;\n    int len;\n    FILE *f, *outfile;\n    uint8_t inbuf[AUDIO_INBUF_SIZE + FF_INPUT_BUFFER_PADDING_SIZE];\n    AVPacket avpkt;\n    AVFrame *decoded_frame = NULL;\n\n\n    av_register_all();\n\n    av_init_packet(&amp;avpkt);\n\n    printf(\"Decode audio file %s to %s\\n\", filename, outfilename);\n\n    // Open file to get format context\n    if(avformat_open_input(&amp;pFormatCtx, filename, NULL, NULL)!=0){\n        printf(\"Couldn't open file\");\n        return; // Couldn't open file\n    }\n\n    // Retrieve stream information\n    if(avformat_find_stream_info(pFormatCtx, NULL)&lt;0){\n        printf(\"Couldn't find stream information\");\n        return; // Couldn't find stream information\n    }\n\n    // Dump information about file onto standard error\n    av_dump_format(pFormatCtx, 0, filename, 0);\n\n    // Find the first audio stream\n    int audioStream = -1;\n    int i =0;\n    for(i=0; i&lt;pFormatCtx-&gt;nb_streams; i++) {\n        if(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_AUDIO) {\n            audioStream=i;\n            break;\n        }\n    }\n\n    if(audioStream==-1) {\n        printf(\"Didn't find a audio stream\");\n        return; // Didn't find a audio stream\n    }\n\n    // Get a pointer to the codec context for the audio stream\n    pCodecCtxOrig=pFormatCtx-&gt;streams[audioStream]-&gt;codec;\n\n    // Find the decoder for the audio stream\n    codec=avcodec_find_decoder(pCodecCtxOrig-&gt;codec_id);\n    if(codec==NULL) {\n        fprintf(stderr, \"Codec not found\\n\");\n        return; // Codec not found\n    }\n\n    pCodecCtx = avcodec_alloc_context3(codec);\n    if (!pCodecCtx) {\n        fprintf(stderr, \"Could not allocate audio codec context\\n\");\n        return;\n    }\n\n    if(avcodec_copy_context(pCodecCtx, pCodecCtxOrig) != 0) {\n        fprintf(stderr, \"Couldn't copy codec context\");\n        return; // Error copying codec context\n    }\n\n\n    /* open it */\n    if (avcodec_open2(pCodecCtx, codec, NULL) &lt; 0) {\n        fprintf(stderr, \"Could not open codec\\n\");\n        return;\n    }\n\n    f = fopen(filename, \"rb\");\n    if (!f) {\n        fprintf(stderr, \"Could not open %s\\n\", filename);\n        return;\n    }\n    outfile = fopen(outfilename, \"wb\");\n    if (!outfile) {\n        av_free(pCodecCtx);\n        return;\n    }\n\n    /* decode until eof */\n    avpkt.data = inbuf;\n    avpkt.size = fread(inbuf, 1, AUDIO_INBUF_SIZE, f);\n\n    while (avpkt.size &gt; 0) {\n        int i, ch;\n        int got_frame = 0;\n\n        if (!decoded_frame) {\n            if (!(decoded_frame = av_frame_alloc())) {\n                fprintf(stderr, \"Could not allocate audio frame\\n\");\n                return;\n            }\n        }\n\n        len = avcodec_decode_audio4(pCodecCtx, decoded_frame, &amp;got_frame, &amp;avpkt);\n        if (len &lt; 0) {\n            fprintf(stderr, \"Error while decoding. len = %d \\n\",len);\n            return;\n        }\n        if (got_frame) {\n            /* if a frame has been decoded, output it */\n            int data_size = av_get_bytes_per_sample(pCodecCtx-&gt;sample_fmt);\n            if (data_size &lt; 0) {\n                /* This should not occur, checking just for paranoia */\n                fprintf(stderr, \"Failed to calculate data size\\n\");\n                return;\n            }\n            for (i=0; i &lt; decoded_frame-&gt;nb_samples; i++)\n                for (ch=0; ch &lt; pCodecCtx-&gt;channels; ch++)\n                    fwrite(decoded_frame-&gt;data[ch] + data_size*i, 1, data_size, outfile);\n        }\n        avpkt.size -= len;\n        avpkt.data += len;\n        avpkt.dts =\n        avpkt.pts = AV_NOPTS_VALUE;\n        if (avpkt.size &lt; AUDIO_REFILL_THRESH) {\n            /* Refill the input buffer, to avoid trying to decode\n             * incomplete frames. Instead of this, one could also use\n             * a parser, or use a proper container format through\n             * libavformat. */\n            memmove(inbuf, avpkt.data, avpkt.size);\n            avpkt.data = inbuf;\n            len = fread(avpkt.data + avpkt.size, 1,\n                        AUDIO_INBUF_SIZE - avpkt.size, f);\n            if (len &gt; 0)\n                avpkt.size += len;\n        }\n    }\n\n    fclose(outfile);\n    fclose(f);\n\n    avcodec_close(pCodecCtx);\n    av_free(pCodecCtx);\n    av_frame_free(&amp;decoded_frame);\n}\n</code></pre>\n\n<p>I have also read this question: <a href=\"https://stackoverflow.com/questions/25033100/how-to-decode-aac-using-avcodec-decode-audio4\">How to decode AAC using avcodec_decode_audio4?</a> but no solution is provided.</p>\n"}, {"tags": ["c", "string", "macos", "unix", "segmentation-fault"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1438780511, "post_id": 31831723, "comment_id": 51589085, "body": "Can you please remove the line numbers? It&#39;s hard to run your code through a compiler if each line begins with a number."}], "answers": [{"tags": [], "owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "is_accepted": false, "score": 0, "last_activity_date": 1438775722, "creation_date": 1438775722, "answer_id": 31831817, "question_id": 31831723, "link": "https://stackoverflow.com/questions/31831723/how-to-assign-a-value-to-a-string-outside-the-declaration-in-c-bus-error-segfa/31831817#31831817", "title": "How to assign a value to a string outside the declaration in C ? Bus error/segfault", "body": "<p>You did not allocate memory for <code>tmp</code> so with <code>tmp[j]</code> you're writing to some random memory location which was not assigned to you.  And this location may then be overwritten again by the things you do.</p>\n\n<p>The longer the strings the more memory locations you're messing up.</p>\n\n<p>You're just lucky that you got some results with shorter strings.</p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438776214, "post_id": 31831825, "comment_id": 51585894, "body": "Ah yeah I malloc it and that works, thx for the quick answer I should&#39;ve know, I was confused by the fact that it worked the 1st time. I didnt know  the ineterministic value your talking about existed at all."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438776283, "post_id": 31831825, "comment_id": 51585950, "body": "@Zoubro You&#39;re welcome. and regarding the indeterministic value, every automatic local variable value is indeterministic, unless initialized explicitly. :-)"}, {"owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438776594, "post_id": 31831825, "comment_id": 51586177, "body": "Ok thats good to know, and does that value depend on the type of the variable, is it always the same or maybe random?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438776699, "post_id": 31831825, "comment_id": 51586246, "body": "@Zoubro always nondeterministic unless initialized, regardless of the type."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438777653, "post_id": 31831825, "comment_id": 51586906, "body": "@Sourav Ghosh No, he need not to allocate memory to tmp. He simply should not use tmp. But in any case his function is wrong."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438777743, "post_id": 31831825, "comment_id": 51586964, "body": "@Zoubro Even if you will use malloc for temp nevertheless your function is wrong."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438777833, "post_id": 31831825, "comment_id": 51587035, "body": "@VladfromMoscow Sorry sir, why? If I allocate memory to <code>tmp</code>, returning <code>tmp</code> should be valid, no? <code>return &amp;tmp;</code> is invalid, agree."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438778058, "post_id": 31831825, "comment_id": 51587209, "body": "@Sourav Ghosh He is changing j within the loop and does not reinitialize it. His function does not make sense."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438778175, "post_id": 31831825, "comment_id": 51587301, "body": "@Sourav Ghosh That is his function has nothing common with strstr. It always returns a non-zero pointer."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438778413, "post_id": 31831825, "comment_id": 51587454, "body": "@VladfromMoscow Thank you sir, I ignored (should not have, sorry) that part of logical aspect. Please don&#39;t remove your comment, I&#39;ll refer to it in my answer. Please wait for the edit."}, {"owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438782369, "post_id": 31831825, "comment_id": 51590593, "body": "@VladfromMoscow I know I shouldn&#39;t use tmp I&#39;ve also done it in recursive and it works fine and it take 4/5 lines, as I said I did it this way for the sake of training. I see you point tho"}, {"owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438782938, "post_id": 31831825, "comment_id": 51591027, "body": "@Sourav Ghosh I read your edit, why should I rest &#39;j&#39; to 0? All I want is the first occurence between the two strings if they stop matching I return the occurence it found and thats it, or is there something I&#39;m not seeing yet?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438783169, "post_id": 31831825, "comment_id": 51591209, "body": "@Zoubro how about a source like &quot;helloworld&quot; and a search string of &quot;held&quot;?"}, {"owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438783482, "post_id": 31831825, "comment_id": 51591479, "body": "@Sourav Ghosh Oh yeah I see that now, I runned it and expected &quot;hel&quot; as output but I got &quot;held&quot; instead, I working on fixing it"}, {"owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438783756, "post_id": 31831825, "comment_id": 51591654, "body": "Tho I dont get why it does that since my condition is if (s1 =  s2) and, well they are not at some point so in my mind it should stop incrementing by itself and return what I want"}, {"owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "edited": false, "score": 0, "creation_date": 1438784772, "post_id": 31831825, "comment_id": 51592438, "body": "@Sourav Ghosh I fixed it  with what you said, I just added an &#39;else  j=0;&#39; after my condition in the loop, tho I still dont get why it continued to increment &#39;j&#39; since it was not suppose to enter the condition."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1438781420, "last_edit_date": 1495541033, "creation_date": 1438775735, "answer_id": 31831825, "question_id": 31831723, "link": "https://stackoverflow.com/questions/31831723/how-to-assign-a-value-to-a-string-outside-the-declaration-in-c-bus-error-segfa/31831825#31831825", "title": "How to assign a value to a string outside the declaration in C ? Bus error/segfault", "body": "<p>In your code, <code>tmp</code> is an automatic local variable to your function <code>my_strstr()</code>. It is not initialized explicitly, so it contains indeterministic value. </p>\n\n<p>Later in the code, you're directly writing</p>\n\n<pre><code> tmp[j] = s1[i];\n</code></pre>\n\n<p>Using (dereferencing) <code>tmp</code> uninitialized means you're trying to access invalid memory location (<em>remember the \"indeterministic value\"?</em>), which may not be accessible from your application. It  invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p>Solution: You need to allocate memory to <code>tmp</code> before you access (dereference) it.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>However, as per the below <a href=\"https://stackoverflow.com/questions/31831723/how-to-assign-a-value-to-a-string-outside-the-declaration-in-c-bus-error-segfa/31831825?noredirect=1#comment51587209_31831825\">comment</a> from <a href=\"https://stackoverflow.com/users/2877241/vlad-from-moscow\">Mr. Vlad</a>, your logic for <code>my_strstr()</code> is also buggy. Once you're incrementing the <code>j</code> (<em>index for the search string</em>) and finding a mismatch in between, you're not re-setting it to <code>0</code>. Maybe you want to have another look at it and correct  the same.</p>\n"}], "owner": {"reputation": 39, "user_id": 5164428, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c444acc19f74950912b31082b210d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Zoubro", "link": "https://stackoverflow.com/users/5164428/zoubro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31831825, "answer_count": 2, "score": 1, "last_activity_date": 1438785162, "creation_date": 1438775477, "last_edit_date": 1438785162, "question_id": 31831723, "link": "https://stackoverflow.com/questions/31831723/how-to-assign-a-value-to-a-string-outside-the-declaration-in-c-bus-error-segfa", "title": "How to assign a value to a string outside the declaration in C ? Bus error/segfault", "body": "<p>I'm trying to recode the equivalent of an <code>strstr()</code> function, after a few try I got it right, here the code:</p>\n\n<p>(I know there are simpler way to do it which I did, but this time I wanted to try by using a 3rd string to stock the occurrence)</p>\n\n<pre><code> char *my_strstr(char *s1, char *s2)\n {\n   int i, j;\n   char *tmp;\n   i = (j = 0);\n   if (s1 != '\\0' &amp;&amp; s2 != '\\0')\n     {\n       while (s1[i] != '\\0' &amp;&amp; s2[j] != '\\0')\n         {\n           if (s1[i] == s2[j])\n             {\n               tmp[j] = s1[i];\n               j++;\n             }\n           i++;\n         }\n         printf(\"tmp = %s\\n\", tmp);\n     }\n   return (tmp);\n }\n\n\n int main()\n {\n   char a[] = \"test Point123\";\n   char b[] = \"Point123\";\n   char *ret;\n\n   ret = my_strstr(a, b);\n   printf(\"ret = %s\\n\",ret);\n\n   return (0);\n }\n</code></pre>\n\n<p>I get the output I wanted:</p>\n\n<pre><code>tmp = Point123\nret = Point123\n</code></pre>\n\n<p>But then just to be sure I tried with a longer string, and that's where the problems started. \nHere the string I tried,</p>\n\n<pre><code>char a[] = \"test Point123456789\";\nchar b[] = \"Point123456789\";\n</code></pre>\n\n<p>and the output I got with it:</p>\n\n<pre><code>tmp = Point123456?\"1\nret = Point123456?\"1\nAbort trap: 6\n</code></pre>\n\n<p>With longer string I get sometimes segfault, sometimes bus Error 10.\nOn some other post I figured that the Bus error 10 sometimes replace a segfault on mac OS (on which I'm coding for the 1st time, I'm used to code on linux), I didnt find anything about the trap tho.</p>\n\n<p>Anyway I figured its more a code problem that my compiler and I'd like to know why my code function on smaller string but not bigger ones, and I read that it could be how I affected value to the strings I'm using but I dont understand where I'm making an error. </p>\n\n<p>So if anyone could give me a clue on what I'm doing wrong I'd greatly appreciate it :) </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I followed the advices in the comments, here is the function after I fixed it, it runs fine now thx.</p>\n\n<p>(Again, I know I dont need a tmp and there are many other simpler and faster way to do it - it was meant as training (which apparently I needed ^^))</p>\n\n<pre><code>char *my_strstr(char *s1, char *s2)\n{\n  int i, j;\n  char *tmp;\n  i = (j = 0);\n  tmp = malloc(sizeof(strlen(s2)));\n  if (s1 != '\\0' &amp;&amp; s2 != '\\0')\n    {\n      while (s1[i] != '\\0' &amp;&amp; s2[j] != '\\0')\n        {\n          if (s1[i] == s2[j])\n            {\n              tmp[j] = s1[i];\n              j++;\n            }\n          else\n            j = 0;\n          i++;\n        }\n    }\n  return (tmp);\n}\n</code></pre>\n"}, {"tags": ["c", "double"], "comments": [{"owner": {"reputation": 14380, "user_id": 2102532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fe51636ca4d4799fe8600414a3bc891b?s=128&d=identicon&r=PG", "display_name": "meskobalazs", "link": "https://stackoverflow.com/users/2102532/meskobalazs"}, "edited": false, "score": 1, "creation_date": 1438775241, "post_id": 31831626, "comment_id": 51585238, "body": "why do you want to remove it?"}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 0, "creation_date": 1438775391, "post_id": 31831626, "comment_id": 51585332, "body": "what do you expect your output to be ?"}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "edited": false, "score": 1, "creation_date": 1438775464, "post_id": 31831626, "comment_id": 51585376, "body": "I need to compare it with other element. Though the other end double value is 0, they are not treated as equal elements because of the negative sign."}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "reply_to_user": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438775504, "post_id": 31831626, "comment_id": 51585405, "body": "@Veltas: That would be too much computation for just a single case."}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "reply_to_user": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 0, "creation_date": 1438775550, "post_id": 31831626, "comment_id": 51585439, "body": "@SouravKanta: 0.00000. The negative sign in front of zero makes no sense. I wonder what was the intention!"}, {"owner": {"reputation": 1604, "user_id": 4291909, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/56IWS.jpg?s=128&g=1", "display_name": "Itban Saeed", "link": "https://stackoverflow.com/users/4291909/itban-saeed"}, "edited": false, "score": 0, "creation_date": 1438775562, "post_id": 31831626, "comment_id": 51585450, "body": "@re3el So you can make both values to have <code>+ve</code> signs, after that compare the values"}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 1, "creation_date": 1438775622, "post_id": 31831626, "comment_id": 51585494, "body": "@re3el From your comment,  this is probably a <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X-Y problem</a>, describe what exactly you want to achieve in the question."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438775698, "post_id": 31831626, "comment_id": 51585542, "body": "If you need to compare them, the easiest solution would be to write in a special case for +/- 0.00000"}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1438775910, "post_id": 31831626, "comment_id": 51585700, "body": "@YuHao  I have a result matrix in which there are both positive and negative values. I need to compare it with another matrix. The result matrix after precision is matching with every other respective element except the above case."}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "reply_to_user": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438776036, "post_id": 31831626, "comment_id": 51585790, "body": "@Veltas: that would be the last choice."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438776117, "post_id": 31831626, "comment_id": 51585837, "body": "Displaying the negative sign in this case is at the discretion of the implementation, ISO C does not provide a &#39;clean&#39; method to choose what happens here, I recommend you just process the output to replace -0.00000 strings with 0.00000."}, {"owner": {"reputation": 585, "user_id": 5090110, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdffb4ac46aea0059fd76f050ee78146?s=128&d=identicon&r=PG&f=1", "display_name": "ashwani", "link": "https://stackoverflow.com/users/5090110/ashwani"}, "edited": false, "score": 1, "creation_date": 1438776271, "post_id": 31831626, "comment_id": 51585939, "body": "can you show how you rounded x using %.5f ? Edit your post by adding that code"}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 0, "creation_date": 1438776387, "post_id": 31831626, "comment_id": 51586033, "body": "c does not provide a roundiing function(as far as I know).How did you round it ? Or are you just printing it with %.5f ."}, {"owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "edited": false, "score": 0, "creation_date": 1438776444, "post_id": 31831626, "comment_id": 51586079, "body": "The dude appears to be printing it and comparing the printed values somehow. It&#39;s not going to be pretty."}, {"owner": {"reputation": 585, "user_id": 5090110, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdffb4ac46aea0059fd76f050ee78146?s=128&d=identicon&r=PG&f=1", "display_name": "ashwani", "link": "https://stackoverflow.com/users/5090110/ashwani"}, "edited": false, "score": 0, "creation_date": 1438776498, "post_id": 31831626, "comment_id": 51586118, "body": "Yes if you are printing the value with %.5f you are doing it wrong. Printing doesn&#39;t round your floating number. x will still be -0.000000001235"}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "reply_to_user": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 0, "creation_date": 1438776674, "post_id": 31831626, "comment_id": 51586223, "body": "@SouravKanta:Yes, I am printing with %.5f. I want my answer to be 0.00000 without a negative sign."}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "reply_to_user": {"reputation": 585, "user_id": 5090110, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdffb4ac46aea0059fd76f050ee78146?s=128&d=identicon&r=PG&f=1", "display_name": "ashwani", "link": "https://stackoverflow.com/users/5090110/ashwani"}, "edited": false, "score": 0, "creation_date": 1438776774, "post_id": 31831626, "comment_id": 51586294, "body": "@user132458: Yeah, I understood that. An answer to help my question would be appreciated."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438778962, "post_id": 31831626, "comment_id": 51587888, "body": "This looks like a perfect example how <b>not</b> to do it. Convert two doubles to strings, just to compare them? Oh boy!"}], "answers": [{"comments": [{"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438775555, "post_id": 31831684, "comment_id": 51585444, "body": "Will this work with doubles/floats? Remember binary floating-points can&#39;t accurately represent decimal floating-points in general."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438775599, "post_id": 31831684, "comment_id": 51585484, "body": "The &quot;negative zero&quot; is the printing algorithm&#39;s choice, it&#39;s not related to IEEE&#39;s 0."}, {"owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "reply_to_user": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438775624, "post_id": 31831684, "comment_id": 51585498, "body": "Assuming IEEE754, -f can be represented with exactly the same precision as +f. So I don&#39;t see a problem."}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438775852, "post_id": 31831684, "comment_id": 51585657, "body": "Let me clarify: -0.00000 is displayed because it&#39;s rounding a negative number. You&#39;re worrying about IEEE754 when you should be worrying about ASCII because that&#39;s what&#39;s being displayed."}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "edited": false, "score": 0, "creation_date": 1438776207, "post_id": 31831684, "comment_id": 51585888, "body": "@P45Imminent:  I have a result matrix in which there are both positive and negative values. I need to compare it with another matrix. The result matrix after precision is matching with every other respective element except the above case. I can&#39;t use round function as I would be inserting possibilities for many erroneous comparisons."}, {"owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "edited": false, "score": 0, "creation_date": 1438776351, "post_id": 31831684, "comment_id": 51586002, "body": "Sorry, got the wrong end of the stick. Edited to the correct answer, and invalidated all the comments ;-)"}, {"owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "edited": false, "score": 0, "creation_date": 1438776583, "post_id": 31831684, "comment_id": 51586170, "body": "@P45Imminent: This looks good. But there would be a lot of unnecessary comparisons. Isn&#39;t there a better approach?"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438776772, "post_id": 31831684, "comment_id": 51586290, "body": "+1 might want to show code e.g.       <code>printf(&quot;%.5f\\n&quot;, x &lt; 0.0 &amp;&amp; x &gt; -0.000005 ? 0.0 : x);</code>"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 1, "creation_date": 1438777191, "post_id": 31831684, "comment_id": 51586597, "body": "re3el printing this result is probably 10000 times slower than doing a floating point comparison."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438778853, "post_id": 31831684, "comment_id": 51587805, "body": "@Veltas: &quot;The &quot;negative zero&quot; is the printing algorithm&#39;s choice, it&#39;s not related to IEEE&#39;s 0&quot;: You are right for the example, but IEEE actually <b>has</b> <code>-0.0</code>. A rounding algorithm might very well produce this result. However, the standard requires both zeroes to compare equal."}], "tags": [], "owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "is_accepted": false, "score": 2, "last_activity_date": 1438777042, "last_edit_date": 1438777042, "creation_date": 1438775379, "answer_id": 31831684, "question_id": 31831626, "link": "https://stackoverflow.com/questions/31831626/round-of-a-negative-decimal-in-c/31831684#31831684", "title": "Round of a negative decimal in C", "body": "<p>If your number is greater than -0.000005 then round the absolute value. You can knock that one on the head with a simple ternary.</p>\n\n<p>If you want to compare numbers to a tolerance of the 5th decimal place then use <code>fabs(a - b) &lt; 0.00001</code> as your test for equality. I don't understand why you'd ever want to round numbers explicitly, let alone where the <code>%.5f</code> comes in.</p>\n"}, {"tags": [], "owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "is_accepted": false, "score": 1, "last_activity_date": 1438777553, "creation_date": 1438777553, "answer_id": 31832476, "question_id": 31831626, "link": "https://stackoverflow.com/questions/31831626/round-of-a-negative-decimal-in-c/31832476#31832476", "title": "Round of a negative decimal in C", "body": "<p>There are two good methods of dealing with your problem.</p>\n\n<p>You could add some basic comparison code to handle the range that causes the problem:</p>\n\n<pre><code>printf(\"%.5f \", -0.000005 &lt; x &amp;&amp; x &lt; 0.0 ? 0.0 : x);\n</code></pre>\n\n<p>Or you could interpret your output to replace lines containing <code>-0.00000</code> with <code>0.00000</code>.</p>\n\n<p>However you have expressed concerns with performance, which suggests you are going the wrong way about solving your problem.</p>\n\n<p>If printing these values is an intermediate step in an expensive calculation, then this is definitely a bad idea, you should write your own rounding function.</p>\n\n<p>If this is just the end of the calculation, then these extra comparisons or replacements will have an unnoticeable effect on performance.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1476336963, "creation_date": 1476336963, "answer_id": 40013031, "question_id": 31831626, "link": "https://stackoverflow.com/questions/31831626/round-of-a-negative-decimal-in-c/40013031#40013031", "title": "Round of a negative decimal in C", "body": "<p>To round a FP to 5 places and not incur a negative <code>-0.00000</code></p>\n\n<ol>\n<li><p>Accept the most rounded values will not be <em>exact</em>, but will be the closest representable number to the rounded math result.</p></li>\n<li><p><em>Do not</em> use a cast/conversion to an integer type due to loss of range.</p></li>\n<li><p>-0.0 --> +0.0</p></li>\n</ol>\n\n<p>Sample solution:</p>\n\n<pre><code>#include &lt;math.h&gt;\ndouble round_to_5_places(double x) {\n  // Only need to round finite numbers, leave infinity and not-a-numbers alone \n  if (isfinite(x)) {\n    // break x into integral and fractional parts\n    double ipart;\n    double fpart = modf(x, &amp;ipart);\n    // Only need to round if a fractional part exist.\n    // This test prevents the below `100000.0 * fpart` from overflowing.\n    if (fpart) {\n      // Use rint(), round(), nearbyint(), etc. depending on rounding detail needs\n      x = ipart + nearbyint(100000.0 * fpart)/100000.0;\n    }\n    x += 0.0; // Only changes -0.0 to 0.0\n  }\n  return x;\n}\n</code></pre>\n\n<p>Detail: some half way-cases near <code>x == N.000005</code> will round the wrong way due to <code>100000.0 * fpart</code> itself forming a rounded product before the <code>nearbyint()</code> call.  See <a href=\"https://en.wikipedia.org/wiki/Rounding#Double_rounding\" rel=\"nofollow\">Double rounding</a>. The usual solution involves performing higher precision multiplication.</p>\n"}], "owner": {"reputation": 665, "user_id": 2439234, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c3bb9f490f9889d6e84bff869fc3de20?s=128&d=identicon&r=PG", "display_name": "re3el", "link": "https://stackoverflow.com/users/2439234/re3el"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1476336963, "creation_date": 1438775191, "last_edit_date": 1438775269, "question_id": 31831626, "link": "https://stackoverflow.com/questions/31831626/round-of-a-negative-decimal-in-c", "title": "Round of a negative decimal in C", "body": "<p>I need to round of decimal numbers to certain precision in my C program. I am facing difficulties in these type of examples </p>\n\n<pre><code>x = -0.000000001235 \n</code></pre>\n\n<p>which when rounded (using <code>%.5f</code>) to five decimals prints <code>-0.00000</code>.</p>\n\n<p>How should I remove the negative sign?</p>\n"}, {"tags": ["c", "linux", "gcc", "output-buffering"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1438774000, "post_id": 31831163, "comment_id": 51584422, "body": "You should find out where it crashes with a debugger."}, {"owner": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 5, "creation_date": 1438774002, "post_id": 31831163, "comment_id": 51584423, "body": "Try <code>fflush(stdout);</code>. However, you may want to debug with a debugger instead of printing variable values."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1438774015, "post_id": 31831163, "comment_id": 51584436, "body": "a generic suggestion, if in C, try to add a <code>\\n</code> at the end of the format string in printf"}, {"owner": {"reputation": 203344, "user_id": 140719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84a6aa25ee85e948123d97b672135526?s=128&d=identicon&r=PG", "display_name": "sbi", "link": "https://stackoverflow.com/users/140719/sbi"}, "edited": false, "score": 2, "creation_date": 1438774247, "post_id": 31831163, "comment_id": 51584598, "body": "This is what <code>stderr</code> is for."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1438774287, "post_id": 31831163, "comment_id": 51584621, "body": "<code>setvbuf()</code> allows you to set the <code>mode</code> to unbuffered."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 1, "creation_date": 1438774295, "post_id": 31831163, "comment_id": 51584627, "body": "If, despite the previous suggestions, you really want to disable buffering you can do so with <a href=\"http://en.cppreference.com/w/c/io/setvbuf\" rel=\"nofollow noreferrer\"><code>setvbuf</code></a>"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 0, "creation_date": 1438774572, "post_id": 31831163, "comment_id": 51584796, "body": "Realise changing the buffer won&#39;t &quot;avoid performance degradation&quot;, it could only make performance worse, although with human readable output you won&#39;t see a difference, realistically."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1438775945, "post_id": 31831163, "comment_id": 51585733, "body": "Is this C or C++?  they are not the same thing."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1438776517, "post_id": 31831163, "comment_id": 51586130, "body": "I assumed there&#39;s no difference between c and c++... I&#39;d be happy to know how to flush this buffer on both cases. some documentation references would also be appreciated."}, {"owner": {"user_type": "does_not_exist", "display_name": "user447688"}, "edited": false, "score": 0, "creation_date": 1438778128, "post_id": 31831163, "comment_id": 51587267, "body": "Please add a snippet of your code to make clear exactly what you&#39;re doing."}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1438778500, "post_id": 31831163, "comment_id": 51587519, "body": "If you are using cout, use std::ostream::flush to flush the buffer. An small example would help."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1438809211, "post_id": 31831163, "comment_id": 51607378, "body": "If <code>stdout</code> is to a terminal (as opposed to a pipe or file), it should be line-buffered by default. If you want to force line-buffered output, there are &quot;fake TTY&quot; wrapper programs out there, e.g. <code>socat</code> can do it."}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 3156498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uxcBm.jpg?s=128&g=1", "display_name": "Venkatesh Parthasarathy", "link": "https://stackoverflow.com/users/3156498/venkatesh-parthasarathy"}, "is_accepted": true, "score": 2, "last_activity_date": 1438777601, "creation_date": 1438777601, "answer_id": 31832496, "question_id": 31831163, "link": "https://stackoverflow.com/questions/31831163/flushing-stdout-messages-of-c-c-based-executable/31832496#31832496", "title": "Flushing stdout messages of c/c++ based executable", "body": "<p>Try setvbuf to set no buffer</p>\n\n<pre><code>setvbuf(stream, NULL, _IONBF, 0)\n</code></pre>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "closed_date": 1438778995, "accepted_answer_id": 31832496, "answer_count": 1, "score": -1, "last_activity_date": 1438807507, "creation_date": 1438773908, "last_edit_date": 1438807507, "question_id": 31831163, "link": "https://stackoverflow.com/questions/31831163/flushing-stdout-messages-of-c-c-based-executable", "closed_reason": "Not suitable for this site", "title": "Flushing stdout messages of c/c++ based executable", "body": "<p>My question is general and doesn't relate to a specific debugging scenario. </p>\n\n<p>When a program terminate unexpectedly (panic, memory corruption, access violation etc... ) , sometimes the recent stdout messages doesn't appear on the screen, even though they occurred prior to the termination. </p>\n\n<p>That's because stdout messages are first being written to buffer that is also erased upon termination without being written to stdout in advance. </p>\n\n<p>My question is whether there's a generic option to flush all debug messages \nin c/c++ code before program terminate unexpectedly ? (I would prefer using some generic compiler configuration rather that an ad-hoc solution for a specific implementation such as std::cout - if there's such option, I'd be happy to know if it's common to GCC and G++)  </p>\n\n<p>Note : I assume that when flushing this buffer for each new arriving message, will damage performance. however, it's only meant for debug version. </p>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "c", "sockets", "log4cxx", "apr"], "answers": [{"tags": [], "owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "is_accepted": false, "score": 2, "last_activity_date": 1438776372, "creation_date": 1438776372, "answer_id": 31832049, "question_id": 31831089, "link": "https://stackoverflow.com/questions/31831089/socket-is-open-after-process-that-opened-it-finished/31832049#31832049", "title": "Socket is open after process, that opened it finished", "body": "<p>This is not a bug. Time Wait (and Close Wait) is by design for safety purpose. You may however adjust the wait time. In any case, on server's perspective the socket is closed and you are relax by the ulimit counter, it has not much visible impact unless you are doing stress test.</p>\n"}, {"tags": [], "owner": {"reputation": 24752, "user_id": 351984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f3133cf8379692c9b8c52bbcb6438aae?s=128&d=identicon&r=PG", "display_name": "Paul Rubel", "link": "https://stackoverflow.com/users/351984/paul-rubel"}, "is_accepted": false, "score": 2, "last_activity_date": 1438777191, "last_edit_date": 1495540284, "creation_date": 1438777191, "answer_id": 31832350, "question_id": 31831089, "link": "https://stackoverflow.com/questions/31831089/socket-is-open-after-process-that-opened-it-finished/31832350#31832350", "title": "Socket is open after process, that opened it finished", "body": "<p>As noted by Calvin this isn't a bug, it's a feature. Time Wait is a socket state that says, this socket isn't in use any more but nevertheless can't be reused quite yet. </p>\n\n<p>Imagine you have a socket open and some client is sending data. The data may be backed up in the network or be in-flight when the server closes its socket. </p>\n\n<p>Now imagine you start the service again or start some new service. The packets on the  wire aren't aware that its a new service and the service can't know the packets were destined for a service that's gone. The new service may try to parse the packets and fail because they're in some odd format or the client may get an unrelated error back and keep trying to send, maybe because the sequence numbers don't match and the receiving host will get some odd error. With timed wait the client will get notified that the socket is closed and the server won't potentially get odd data. A win-win. The time it waits should be sofficient for all in-transit data to be flused from the system. </p>\n\n<p>Take a look at this post for some additional info: <a href=\"https://stackoverflow.com/questions/14388706/socket-options-so-reuseaddr-and-so-reuseport-how-do-they-differ-do-they-mean-t\">Socket options SO_REUSEADDR and SO_REUSEPORT, how do they differ? Do they mean the same across all major operating systems?</a></p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1438947114, "creation_date": 1438947114, "answer_id": 31876693, "question_id": 31831089, "link": "https://stackoverflow.com/questions/31831089/socket-is-open-after-process-that-opened-it-finished/31876693#31876693", "title": "Socket is open after process, that opened it finished", "body": "<p><code>TIME_WAIT</code> is a socket state to allow all <em>in travel</em> packets that could remain from the connection to arrive or dead before the connection parameters (source address, source port, desintation address, destination port) can be reused again.  The kernel simply sets a timer to wait for this time to elapse, before allowing you to reuse that socket again.  But you cannot shorten it (even if you can, you had better not to do it), because you have no possibility to know if there are still packets travelling or to accelerate or kill them.  The only possibility you have is to wait for a socket bound to that port to timeout and pass from the state <code>TIME_WAIT</code> to the <code>CLOSED</code> state.</p>\n\n<p>If you were allowed to reuse the connection (I think there's an option or something can be done in the linux kernel) and you receive an old connection packet, you can get a connection reset due to the received packet.  This can lead to more problems in the new connection.  These are solved making you wait for all traffic belonging to the old connection to die or reach destination, before you use that socket again.</p>\n"}], "owner": {"reputation": 31, "user_id": 5193646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d31f6fa143601361be4062bd30bbf9a?s=128&d=identicon&r=PG&f=1", "display_name": "AlexKutsan", "link": "https://stackoverflow.com/users/5193646/alexkutsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1238, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1438947114, "creation_date": 1438773710, "question_id": 31831089, "link": "https://stackoverflow.com/questions/31831089/socket-is-open-after-process-that-opened-it-finished", "title": "Socket is open after process, that opened it finished", "body": "<p>After closing client socket on sever side and exit application, socket still open for some time.</p>\n\n<p>I can see it via netstat</p>\n\n<pre><code>Every 0.1s: netstat -tuplna  | grep 6676    \ntcp        0      0 127.0.0.1:6676          127.0.0.1:36065         TIME_WAIT   -\n</code></pre>\n\n<p>I use log4cxx logging and telnet appender. log4cxx use apr sockets.\nSocket::close() method looks like that:</p>\n\n<pre><code>void Socket::close() {\n    if (socket != 0) {\n        apr_status_t status = apr_socket_close(socket);\n        if (status != APR_SUCCESS) {\n            throw SocketException(status);\n        }        \n        socket = 0;\n    }\n}\n</code></pre>\n\n<p>And it's successfully processed. But after program is finished I can see opened socket via netstat, and if it starts again log4cxx unable to open 6676 port, because it is busy.\nI tries to modify log4cxx. \nShutdown socket before close:</p>\n\n<pre><code>void Socket::close() {\n    if (socket != 0) {\n        apr_status_t shutdown_status = apr_socket_shutdown(socket, APR_SHUTDOWN_READWRITE);\n        printf(\"Socket::close shutdown_status %d\\n\", shutdown_status);\n        if (shutdown_status != APR_SUCCESS) {\n            printf(\"Socket::close WTF %d\\n\", shutdown_status != APR_SUCCESS);\n            throw SocketException(shutdown_status);\n        }\n        apr_status_t close_status = apr_socket_close(socket);\n        printf(\"Socket::close close_status %d\\n\", close_status);\n        if (close_status != APR_SUCCESS) {\n            printf(\"Socket::close WTF %d\\n\", close_status != APR_SUCCESS);\n            throw SocketException(close_status);\n        }\n        socket = 0;\n    }\n}\n</code></pre>\n\n<p>But it didn't helped, bug still reproduced.</p>\n"}, {"tags": ["c++", "c", "linux", "static"], "answers": [{"comments": [{"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "edited": false, "score": 0, "creation_date": 1438773622, "post_id": 31830907, "comment_id": 51584167, "body": "If you reread the post after seeing the basic info at the end of the post, it should be clear 4Kb paging is irrelevant and the topic is cache lines.  Of course those are also strictly aligned, so your point about distance vs. alignment is still important, just on a size smaller than 4Kb and using the end of c() not its beginning."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1438774150, "post_id": 31830907, "comment_id": 51584533, "body": "@nemetroid ,@JSF thanks for comment. I have printed the base address in both cases. Base address of T0=0xB7758D40 , base address of C=0xB7758047 when T0[0] is loaded. After adding static const DATA=10 , Base address of T0=0xB775cD80 (just shifted by 64Bytes), base address of C=0xB775C047 ( in this case T0[0] is not loaded) . However in both cases both T0[0] and C() belong to the same page boundary."}], "tags": [], "owner": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "is_accepted": false, "score": 1, "last_activity_date": 1438773220, "creation_date": 1438773220, "answer_id": 31830907, "question_id": 31830095, "link": "https://stackoverflow.com/questions/31830095/how-much-data-section-memory-is-loaded-along-with-code-section-in-c/31830907#31830907", "title": "How much DATA section memory is loaded along with Code section in C", "body": "<p>Pages are aligned to the page size. So, if you have a page size of 4 kB, <code>0xAABBC000 - 0xAABBCFFF</code> belong to the same page, as do <code>0xAABBD000 - 0xAABBDFFF</code>, etc.</p>\n\n<p>So if <code>C</code> has address <code>0xAABBCF00</code> and <code>T0</code> has address <code>0xAABBD000</code> the difference between their addresses is less than 4 kB, but they still belong to different pages. However, <code>T0[0]</code> and <code>T0[1]</code> in extreme likelihood belong to the same page. Try running <code>objdump -h a.out</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1438774747, "post_id": 31830913, "comment_id": 51584910, "body": "in above case beginning of data is not in the same cache line as part of code as the distance is 3221bytes whereas the cache line size is 64bytes. It may be possible they mapped to same cache line, but in that situation while C() is invoked T0[0] will not loaded as it is not present in next consecutive address belongs to same cache line."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1438775529, "post_id": 31830913, "comment_id": 51585426, "body": "can you tell me how to find the highest instructions of C() fetched(not necessarily executed)? by generating assembly code ? I am wondering in that case also how will it be helpful to find out the reason of loading T0[0] along with C() which is far distance away (may be they mapped to same cache line, but definitely not in the same cache line). I hope by same cache you want to say within 64bytes of cache line both code of C() and data of T0[0] is present side by side continuously, so whenever C() is invoked T0[0] is also loaded as it is present in same cache line."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1438775638, "post_id": 31830913, "comment_id": 51585506, "body": "In my case, distance between C() and T0[0] is 3221bytes, so there is no way or any possibility that they belong to same cache line. BTW, I have printed the base address in both cases. Base address of T0=0xB7758D40 , base address of C=0xB7758047 when T0[0] is loaded. After adding static const DATA=10 , Base address of T0=0xB775cD80 (just shifted by 64Bytes), base address of C=0xB775C047 ( in this case T0[0] is not loaded) . Surprisingly, in both cases, they belong to different cache lines."}, {"owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "reply_to_user": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1438790802, "post_id": 31830913, "comment_id": 51596702, "body": "You measured the distance from the entry point of C() to T0[0] as 3221.  But C() is many bytes of code.  You haven&#39;t told us how many.  But the symptoms you describe make it very likely C() is nearly 3221 bytes of code.  Finding the last byte of C() is only easy if you look at and understand the assembly code.  Last fetched byte can be much much harder to deduce, but won&#39;t be much different from last byte.  What CPU? (How do you know the cache line size is 64 bytes).  You showed T0[0] on a 64 byte boundary, so this could be prefetch oddity, or cache size over 64 or my theory is wrong."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1438799561, "post_id": 31830913, "comment_id": 51601891, "body": "I am using  Intel(R) Core(TM) i3-2100 CPU @ 3.10GHz .  cat /sys/devices/system/cpu/cpu0/cache/index0/coherency_line_siz&zwnj;&#8203;e  gives cache line size (64bytes) . Also cat /proc/cpuinfo gives clflush size\t: 64 cache_alignment\t: 64."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1438800046, "post_id": 31830913, "comment_id": 51602175, "body": "The distance between D() and T0[0] is 1743bytes whereas distance between C() and T0[0] is 3221bytes. This means in between T0[0] and C(), there is D() . So I think your explanation with respect to last byte or last address also not correctly pointing WHY T0[0] is prefetching or loading ?"}], "tags": [], "owner": {"reputation": 5146, "user_id": 5089383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d483ecc01086edbc775bd770c66b5e4?s=128&d=identicon&r=PG&f=1", "display_name": "JSF", "link": "https://stackoverflow.com/users/5089383/jsf"}, "is_accepted": false, "score": 0, "last_activity_date": 1438773230, "creation_date": 1438773230, "answer_id": 31830913, "question_id": 31830095, "link": "https://stackoverflow.com/questions/31830095/how-much-data-section-memory-is-loaded-along-with-code-section-in-c/31830913#31830913", "title": "How much DATA section memory is loaded along with Code section in C", "body": "<p>The whole cache line is loaded when any part of it is loaded.  You seem to be describing a situation in which the beginning of the data is in the same cache line as part of the code.  I'm surprised it would be linked/loaded that way, but it should be easy to confirm (or contradict) with a debugger.\nThe cache line size and other details of this behavior will vary by CPU model.</p>\n\n<p>Looking at the base address of C() was easier but less informative.  What matters is the address of the highest instruction of C() fetched (not necessarily executed).  I expect that is in the same cache line as the start of data.</p>\n"}], "owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438778703, "creation_date": 1438770998, "last_edit_date": 1438778703, "question_id": 31830095, "link": "https://stackoverflow.com/questions/31830095/how-much-data-section-memory-is-loaded-along-with-code-section-in-c", "title": "How much DATA section memory is loaded along with Code section in C", "body": "<p>I have created a shared library where I have static const data section and code section of 4 functions.</p>\n\n<p>Here are the details of my static const data section,</p>\n\n<pre><code>static const u32 T0[256] = { 256 NON_ZERO value };\nstatic const u32 T1[256] = {256  NON_ZERO value };\nstatic const u32 T2[256] = {256  NON_ZERO value };\nstatic const u32 T3[256] = {256  NON_ZERO value };\nstatic const u32 T4[256] = {256  NON_ZERO value };\nstatic const u32 T5[256] = {256  NON_ZERO value };\nstatic const u32 T6[256] = {256  NON_ZERO value };\nstatic const u32 T7[256] = {256  NON_ZERO value };\nstatic const u32 T8[256] = {256  NON_ZERO value };\nstatic const u32 T9[10] = {10 NON_ZERO value };\n</code></pre>\n\n<p>Different functions defined just below the static const section</p>\n\n<pre><code>int A();\nint B();\n\n// Access different index of T0 - T3 table \nvoid C();\n\nvoid D();\n</code></pre>\n\n<p>As per my understanding the text/code section will contain the executable\ninstruction whereas data section will contain initialized static data ( for simplicity in my case all are static const)</p>\n\n<p>Inside C() function , different index of T0,T1,T2 and T3 are accessed in random order. </p>\n\n<p>Intentionally, inside C(), I have not accessed T0[0].</p>\n\n<p><strong>However,\nevery time I call C() function, it is loading T0[0] irrespective of whether T0[0] is accessed or not inside C() function.</strong></p>\n\n<p><strong>My question is how much adjacent memory of data section is loaded along with code section?</strong></p>\n\n<p>I was thinking may be whole 4KB page loaded, so everytime C() function called, whole 4KB page loaded , therefore\nT0[0] is also loaded along with it.</p>\n\n<p>but, the experimental result shows THIS CONCEPT IS NOT TRUE/CORRECT.</p>\n\n<p>Let me explain it elaborately as below.</p>\n\n<p>I have calculated the distance between function C() and different static const data as below</p>\n\n<pre><code>Base address of C - Base address of T0[0] = 3221 Bytes\nBase address of C - Base address of T1[0] = 4345 Bytes\nBase address of C - Base address of T2[0] = 5369 Bytes\nBase address of C - Base address of T3[0] = 6393 Bytes\n</code></pre>\n\n<p>So, whenever C() is invoked , ONLY 64Bytes (i.e. T0[0] ) is loaded . T0[1], T0[2],... the part of T0 array which also \nbelong to same 4KB page with C() NOT LOADED(if whole 4KB page is loaded then these must be loaded, but experiment result shows they weren't loaded). Hence my concept whole 4KB page memory is loaded is wrong.</p>\n\n<p><strong>EDIT 1:</strong> based on comments of @nemetroid, C() and T0[0] may belong to different page. That's why I am adding the base address of both C() and T0[0] here.</p>\n\n<pre><code>Base address of T0[0]=0xB7758D40 ,\nBase address of C=0xB7758047 when T0[0] is loaded.\n</code></pre>\n\n<p>In other experiment, when I add another static const of 64Byte ( like static const int DATA=10; ) before\nstatic const u32 T0[256] = {.....}</p>\n\n<p>these distances become</p>\n\n<pre><code>Base address of C - Base address of T0[0] =3385 Bytes [ =64 + Base address of C - Base address of T0[0]]\nBase address of C - Base address of T1[0] = 4345+64 Bytes =4409 Bytes [=64 + Base address of C - Base address of T0[0]+1024]\nBase address of C - Base address of T2[0] = 5369+64 Bytes = 5433 Bytes[=64 + Base address of C - Base address of T0[0]+2*1024]\nBase address of C - Base address of T3[0] = 6393 +64 Bytes = 6457 Bytes[=64 + Base address of C - Base address of T0[0]+3*1024]\n</code></pre>\n\n<p>EDIT1 :</p>\n\n<pre><code>Base address of T0[0]=0xB775cD80 (just shifted by 64Bytes),\nBase address of C=0xB775C047 ( in this case T0[0] is not loaded)\n</code></pre>\n\n<p><strong>Now, although T0[0] still present in same 4KB page with C()(ONLY shifted by 64bytes), it is not loaded whenever C() is invoked.</strong> So here again I can't say along with C(), whole 4KB page was loaded.</p>\n\n<p><strong>Can you help me to explain/understand WHY T0[0] is always accessed/loaded whenever C() is invoked although it is not accessed/used \ninside C() ?</strong></p>\n\n<p>or any link to understand the memory layout of program and size of memory loaded during execution of program.</p>\n\n<p>I am using Debian OS and gcc compiler.</p>\n\n<p><strong>Note :</strong> To calculate whether T0[0] is loaded or not , before invoking C(), I just flushed T0[0] using clflush() instruction and then after\nC() is invoked I have calculated access time using rdtsc(). </p>\n\n<p>EDIT 1:\nI am using Intel Core i3 machine. </p>\n\n<pre><code>Size of L1=32KB, 8 way associative, cache line size=64bytes\nSize of L2=256KB, 8 way associative, cache line size=64bytes\nSize of L3=3MB, 12 way associative, cache line size=64bytes\n</code></pre>\n"}, {"tags": ["javascript", "c", "callback", "emscripten"], "comments": [{"owner": {"reputation": 3823, "user_id": 2182767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7de026e2d1f87814ca9cf59fcec9506b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey", "link": "https://stackoverflow.com/users/2182767/andrey"}, "edited": false, "score": 0, "creation_date": 1438771632, "post_id": 31830024, "comment_id": 51582929, "body": "You can run inline javascript (<a href=\"https://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html#calling-javascript-from-c-c\" rel=\"nofollow noreferrer\">doc</a>). Or you can implement C API in JS (<a href=\"https://kripken.github.io/emscripten-site/docs/porting/connecting_cpp_and_javascript/Interacting-with-code.html#implement-a-c-api-in-javascript\" rel=\"nofollow noreferrer\">doc</a>)."}], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "is_accepted": true, "score": 4, "last_activity_date": 1438789229, "last_edit_date": 1438789229, "creation_date": 1438788556, "answer_id": 31836726, "question_id": 31830024, "link": "https://stackoverflow.com/questions/31830024/javascript-function-callback-in-c-code-using-emscripten/31836726#31836726", "title": "javascript function callback in C code using Emscripten", "body": "<p>The magic you're looking for is pretty simple -- you need to use the EM_ASM_ARGS macro.</p>\n\n<p>Specifically, it can look like</p>\n\n<pre><code>int smth_that_calls_my_fn(int i, int max) {\n  EM_ASM_ARGS({ my_js_fn($0, $1); }, i, max);\n}\n</code></pre>\n\n<p>Make sure that you <code>#include &lt;emscripten.h&gt;</code> in your C file so that this macro exists.</p>\n\n<p>The EM_ASM_ARGS macro takes JavaScript code (in braces) as the first argument, and then any other parameters you want to pass in.  In the JS code, $0 is the first argument to follow, $1 the next and so on.</p>\n\n<p>I just wrote a blog entry going into detail on this topic if you want more information: <a href=\"http://devosoft.org/an-introduction-to-web-development-with-emscripten/\" rel=\"nofollow\">http://devosoft.org/an-introduction-to-web-development-with-emscripten/</a></p>\n"}], "owner": {"reputation": 22954, "user_id": 1979882, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/N9wiX.jpg?s=128&g=1", "display_name": "Vyacheslav", "link": "https://stackoverflow.com/users/1979882/vyacheslav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 31836726, "answer_count": 1, "score": 2, "last_activity_date": 1438789229, "creation_date": 1438770815, "question_id": 31830024, "link": "https://stackoverflow.com/questions/31830024/javascript-function-callback-in-c-code-using-emscripten", "title": "javascript function callback in C code using Emscripten", "body": "<p>The task is to call a javascript function as a callback in order to show a progress of while-loop operation.\nE.g.\nJS:</p>\n\n<pre><code>var my_js_fn = function(curstate, maxstate){//int variables\nconsole.log(curstate.toString() + \" of \" + maxstate.toString());\n}\n</code></pre>\n\n<p>C  pseudocode:</p>\n\n<pre><code>int smth_that_calls_my_fn(int i, int max) {\n/*\nthe_magic to call my_js_fn()\n*/\n}\n    int main(){\n    //....\n        while (i &lt; max){\n        smth_that_calls_my_fn(i,max);\n        }\n    //....\n    return 0;\n    }\n</code></pre>\n\n<p>How can I link <code>smth_that_calls_my_fn</code> and <code>my_js_fn</code> ?</p>\n"}, {"tags": ["c", "image-processing", "jpeg"], "answers": [{"tags": [], "owner": {"reputation": 2470, "user_id": 1905854, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a1fc2596592b749bdc2a520ab5118c92?s=128&d=identicon&r=PG", "display_name": "B. Nadolson", "link": "https://stackoverflow.com/users/1905854/b-nadolson"}, "is_accepted": true, "score": 3, "last_activity_date": 1438771385, "last_edit_date": 1438771385, "creation_date": 1438771012, "answer_id": 31830105, "question_id": 31829701, "link": "https://stackoverflow.com/questions/31829701/how-to-convert-a-jpg-to-yuv-in-c/31830105#31830105", "title": "How to convert a jpg to yuv in C?", "body": "<p>Based on <a href=\"https://en.wikipedia.org/wiki/YUV#Y.27UV444_to_RGB888_conversion\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/YUV#Y.27UV444_to_RGB888_conversion</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/r0S8a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r0S8a.png\" alt=\"yuv conversion\"></a></p>\n\n<p>Decoding a JPEG, well in pure C without libraries ... the following code is somewhat straightforward ...</p>\n\n<p><a href=\"https://bitbucket.org/Halicery/firerainbow-progressive-jpeg-decoder/src\" rel=\"nofollow noreferrer\">https://bitbucket.org/Halicery/firerainbow-progressive-jpeg-decoder/src</a></p>\n\n<p>Assuming you have the jpeg decoded to rgb using the above or a library (using a library is likely easier).</p>\n\n<pre><code>int width = (width of the image);\nint height = (height of the image);\nbyte *mydata = (pointer to rgb pixels);\nbyte *cursor;\nsize_t byte_count = (length of the pixels .... i.e. width x height x 3);\nint n;\nfor (cursor = mydata, n = 0; n &lt; byte_count; cursor += 3, n += 3) \n{\n    int red = cursor[0], green = cursor[1], blue = cursor[2];\n    int y = 0.299 * red + 0.587 * green + 0.114 * blue;\n    int u = -0.147 * red + -0.289 * green + 0.436 * blue;\n    int v = 0.615 * red + -0.515 * green + -0.100 * blue;\n\n    cursor[0] = y, cursor[1] = u, cursor[2] = v;\n}\n\n// At this point, the entire image has been converted to yuv ...\n</code></pre>\n\n<p>And write that to file ...</p>\n\n<pre><code>FILE* fout = fopen (\"myfile.yuv, \"wb\");\n\nif (fout) {\n    fwrite (mydata, 1, byte_count, fout);\n    fclose (fout);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 2, "last_activity_date": 1438771543, "creation_date": 1438771543, "answer_id": 31830296, "question_id": 31829701, "link": "https://stackoverflow.com/questions/31829701/how-to-convert-a-jpg-to-yuv-in-c/31830296#31830296", "title": "How to convert a jpg to yuv in C?", "body": "<p>Not sure what you have against <code>opencv</code>, maybe <code>ImageMagick</code> is acceptable to you? It is installed on most Linux distors and is available for OSX, and Windows. It has C bindings, and also a command-line version that I am showing here. So you can create an image like this:</p>\n\n<pre><code># Create test image\nconvert -size 100x100                          \\\n   \\( xc:red xc:lime xc:blue +append \\)        \\\n   \\( xc:cyan xc:magenta xc:yellow +append \\)  \\\n  -append image.jpg\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2h8Xv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2h8Xv.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Now convert to YUV and write to 3 separate files:</p>\n\n<pre><code>convert image.jpg -colorspace yuv -separate bands.jpg\n</code></pre>\n\n<p>bands-0.jpg (Y)</p>\n\n<p><a href=\"https://i.stack.imgur.com/GAWlT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GAWlT.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>bands-1.jpg (U)</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZSOyY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZSOyY.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>bands-2.jpg(V)</p>\n\n<p><a href=\"https://i.stack.imgur.com/MpMca.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MpMca.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Or, closer to what you ask, write all three bands <code>YUV</code> into a binary file:</p>\n\n<pre><code>convert image.jpg -colorspace yuv rgb:yuv.bin\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2022, "user_id": 281617, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/20d873baa75c66bdcf8d06512ee664cc?s=128&d=identicon&r=PG", "display_name": "mousomer", "link": "https://stackoverflow.com/users/281617/mousomer"}, "is_accepted": false, "score": 3, "last_activity_date": 1438775873, "creation_date": 1438775873, "answer_id": 31831868, "question_id": 31829701, "link": "https://stackoverflow.com/questions/31829701/how-to-convert-a-jpg-to-yuv-in-c/31831868#31831868", "title": "How to convert a jpg to yuv in C?", "body": "<p>Usually the image is already stored in YUV (or, to be more precise: YCbCr).\nWhen reading the file, the jpeg reader usually converts YUV to RGB. Converting back will reduce quality somewhat.</p>\n\n<p>In libTurboJpeg (<a href=\"http://libjpeg-turbo.virtualgl.org/\" rel=\"nofollow\">http://libjpeg-turbo.virtualgl.org/</a>) you can read the jpeg without color conversion. Check <a href=\"https://github.com/libjpeg-turbo/libjpeg-turbo/blob/master/turbojpeg.h\" rel=\"nofollow\">https://github.com/libjpeg-turbo/libjpeg-turbo/blob/master/turbojpeg.h</a> - \nit has the <em>tjDecompressToYUV</em> function which gives you the 3 colorspaces on 3 different output buffers.</p>\n"}], "owner": {"reputation": 726, "user_id": 2709971, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/93408cd1915474f55df097e8f339cbda?s=128&d=identicon&r=PG&f=1", "display_name": "Swaroop", "link": "https://stackoverflow.com/users/2709971/swaroop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4847, "favorite_count": 0, "accepted_answer_id": 31830105, "answer_count": 3, "score": 0, "last_activity_date": 1438775873, "creation_date": 1438770063, "last_edit_date": 1592644375, "question_id": 31829701, "link": "https://stackoverflow.com/questions/31829701/how-to-convert-a-jpg-to-yuv-in-c", "title": "How to convert a jpg to yuv in C?", "body": "<p>Even though a question of this nature sounds very similar, I am having problems in converting a <strong>jpg</strong> image to <strong>yuv</strong> in C (without using opencv).</p>\n<p>This is what I have understood as of now, how to solve this problem :</p>\n<blockquote>\n<ol>\n<li><p>Identify the structure of file formats for jpg and yuv. i.e what each byte in the file actually contains. This is what I think <a href=\"http://www.onicos.com/staff/iz/formats/jpeg.html\" rel=\"nofollow noreferrer\">jpg</a> format looks like.</p>\n</li>\n<li><p>With the above structure I tried to read a jpg file and tried to decipher its 18th and 19th bytes. I did type cast them to both char and int but I don`t get any meaningful values for width and height of the image.</p>\n</li>\n<li><p>Once I have read these values, I should be able to convert them from jpg to yuv. I was looking at this <a href=\"https://msdn.microsoft.com/en-us/library/ms893078.aspx\" rel=\"nofollow noreferrer\">resource</a>.</p>\n</li>\n<li><p>Appropriately, construct yuv image and write it to a (.yuv) file.</p>\n</li>\n</ol>\n</blockquote>\n<p>Kindly help me by pointing me to appropriate resources. I will keep updating my progress on this post. Thanks in advance.</p>\n"}, {"tags": ["c", "linux", "sockets", "tcp", "system-calls"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438769472, "post_id": 31829360, "comment_id": 51581499, "body": "A couple of things stand out to me: The first is that you say you call <code>memset</code> <i>after</i> writing/reading? The second is that doing <code>fflush(stdin)</code> is technically undefined behavior. Also, please try to show us the code you use to send and receive <i>and</i> print, preferably try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> to show us (it&#39;s said that a picture says more than a thousand words, well it&#39;s the same with code)."}, {"owner": {"reputation": 1102, "user_id": 2501622, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2e6a958d1e2cccd68149bafd9418dd47?s=128&d=identicon&r=PG", "display_name": "BowPark", "link": "https://stackoverflow.com/users/2501622/bowpark"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438769850, "post_id": 31829360, "comment_id": 51581725, "body": "@JoachimPileborg yes, I call <code>memset</code> <i>after</i> reading/writing, so (in my intentions) when the contents of the array is no more useful and it needs to be cleared. The whole program, even if minimal, is too long, but I will try to include at least the read and write routines."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438771865, "post_id": 31829360, "comment_id": 51583065, "body": "&#39;printf(remote_message);&#39; called on a buffer that is not guaranteed null-terminated.  Cargo-cult memset instead of correctly utilizing the value returned by send/recv to insert a terminating null.  Probably other bugs centred around misunderstanding of null-terminated char arrays."}, {"owner": {"reputation": 1102, "user_id": 2501622, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2e6a958d1e2cccd68149bafd9418dd47?s=128&d=identicon&r=PG", "display_name": "BowPark", "link": "https://stackoverflow.com/users/2501622/bowpark"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438779081, "post_id": 31829360, "comment_id": 51587995, "body": "@MartinJames maybe due to your experience, you concentrated a lot of informations in few lines. First of all: if <code>write_size</code> was the value returned by <code>write</code>, should I perform <code>memset(&amp;local_message, 0, write_size);</code>? And are you meaning that the array <code>remote_message</code> may not be null-terminated?"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438777948, "post_id": 31830468, "comment_id": 51587129, "body": "&#39;memset(remote_message, 0, sizeof(remote_message); after reading&#39; - why?  The read/recv calls return the number of bytes read.  You only need to insert one nul at that index to ensure that text data received is correctly terminated, (though this does mean oversizing the buffer by 1, compared to the read length, to be sure of leaving enough space)."}, {"owner": {"reputation": 1102, "user_id": 2501622, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2e6a958d1e2cccd68149bafd9418dd47?s=128&d=identicon&r=PG", "display_name": "BowPark", "link": "https://stackoverflow.com/users/2501622/bowpark"}, "edited": false, "score": 0, "creation_date": 1438781013, "post_id": 31830468, "comment_id": 51589475, "body": "@thuovila Yes, I&#39;m using TCP as specified in the beginning of the question. Thank you for the advices about it. No, I don&#39;t call <code>close()</code> on the socket. And yes, in <code>main</code> the parameters are allocated with <code>malloc</code> before the creation of threads."}, {"owner": {"reputation": 1880, "user_id": 2011440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dgcck.png?s=128&g=1", "display_name": "thuovila", "link": "https://stackoverflow.com/users/2011440/thuovila"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438843930, "post_id": 31830468, "comment_id": 51618087, "body": "@MartinJames I realize memsetting the whole buffer is somewhat less efficient, but I also think it is less error prone. The OP was already using memset and I dont think the difference in efficiency matters much at this level of programming."}], "tags": [], "owner": {"reputation": 1880, "user_id": 2011440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dgcck.png?s=128&g=1", "display_name": "thuovila", "link": "https://stackoverflow.com/users/2011440/thuovila"}, "is_accepted": false, "score": 2, "last_activity_date": 1438771997, "creation_date": 1438771997, "answer_id": 31830468, "question_id": 31829360, "link": "https://stackoverflow.com/questions/31829360/residual-characters-printed-on-stdout-with-socket-communication/31830468#31830468", "title": "Residual characters printed on stdout with socket communication", "body": "<ol>\n<li><p>The read side does not zero the buffer used for reading, before reusing it. Do <code>char remote_message[MAX_STRING_LEN] = {0};</code> at declaration time and <code>memset(remote_message, 0, sizeof(remote_message);</code> after reading.</p></li>\n<li><p><code>memset(&amp;local_message, 0, sizeof(local_message));</code> -->  <code>memset(local_message, 0, sizeof(local_message));</code></p></li>\n<li><p>Bear in mind TCP (are you using TCP?) is not a message oriented protocol. The <code>read()</code> can (and eventually will) return any amount of data between 1 byte and the amount sent by the writer so far. If you want a line oriented protocol/output, scan the read data for '\\n' AND do not remove it in your <code>scanf()</code>.</p></li>\n</ol>\n\n<p>Other:</p>\n\n<ul>\n<li>Do you call <code>close()</code> on the socket descriptors somewhere?</li>\n<li>Why do you free the <code>int *</code> parameters? Are they really allocated from the heap with malloc?</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438775856, "post_id": 31830480, "comment_id": 51585663, "body": "Yes, 99.9% of all C network code with strlen() in it uses it incorrectly."}, {"owner": {"reputation": 1102, "user_id": 2501622, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2e6a958d1e2cccd68149bafd9418dd47?s=128&d=identicon&r=PG", "display_name": "BowPark", "link": "https://stackoverflow.com/users/2501622/bowpark"}, "edited": false, "score": 0, "creation_date": 1438780868, "post_id": 31830480, "comment_id": 51589362, "body": "@smbear ok for memset: I need to make it also for <code>connection_handler_read</code>. So, you would advice to make <code>memset(&amp;local_message, 0, strlen(local_message));</code> instead of <code>memset(&amp;local_message, 0, sizeof(local_message));</code>?"}, {"owner": {"reputation": 948, "user_id": 42797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e655f6eebc20c755dd6e58e6c371e86?s=128&d=identicon&r=PG", "display_name": "smbear", "link": "https://stackoverflow.com/users/42797/smbear"}, "edited": false, "score": 0, "creation_date": 1438848478, "post_id": 31830480, "comment_id": 51620645, "body": "<code>memset(&amp;local_message, 0, strlen(local_message));</code> is rather unusual construct."}, {"owner": {"reputation": 948, "user_id": 42797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e655f6eebc20c755dd6e58e6c371e86?s=128&d=identicon&r=PG", "display_name": "smbear", "link": "https://stackoverflow.com/users/42797/smbear"}, "edited": false, "score": 1, "creation_date": 1438848891, "post_id": 31830480, "comment_id": 51620897, "body": "Also, as @thuovila has written, TCP isn&#39;t message oriented protocol, so you should take into consideration number of bytes received. There is another problem: you perform <code>scanf()</code> to buffer without considering buffer size - one can easily write beyond limits of buffer causing stack corruption."}], "tags": [], "owner": {"reputation": 948, "user_id": 42797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e655f6eebc20c755dd6e58e6c371e86?s=128&d=identicon&r=PG", "display_name": "smbear", "link": "https://stackoverflow.com/users/42797/smbear"}, "is_accepted": false, "score": 2, "last_activity_date": 1438772043, "creation_date": 1438772043, "answer_id": 31830480, "question_id": 31829360, "link": "https://stackoverflow.com/questions/31829360/residual-characters-printed-on-stdout-with-socket-communication/31830480#31830480", "title": "Residual characters printed on stdout with socket communication", "body": "<p>In <code>connection_handler_read()</code> you read <code>strlen()</code> characters and you don't <code>memset()</code> buffer to <code>'\\0'</code>. <code>strlen()</code> characters is all you send in <code>connection_handler_write()</code> and it doesn't count trailing <code>'\\0'</code>. On the read side buffer might contain some uninitialized characters.</p>\n"}], "owner": {"reputation": 1102, "user_id": 2501622, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2e6a958d1e2cccd68149bafd9418dd47?s=128&d=identicon&r=PG", "display_name": "BowPark", "link": "https://stackoverflow.com/users/2501622/bowpark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438772043, "creation_date": 1438769155, "last_edit_date": 1438770114, "question_id": 31829360, "link": "https://stackoverflow.com/questions/31829360/residual-characters-printed-on-stdout-with-socket-communication", "title": "Residual characters printed on stdout with socket communication", "body": "<p>In a socket TCP communication, I have a server and a client. Both can read from and write to the socket.</p>\n\n<p>The code is written in C and uses Linux system calls <code>recv</code> and <code>write</code>.</p>\n\n<p><code>recv</code> saves the received string in:</p>\n\n<pre><code>char message_array[2000];\n</code></pre>\n\n<p>Another array with the same dimensions is used as source for the <code>write</code> process.</p>\n\n<p>After both the reading and writing process the following operation is performed, to clear all the array elements:</p>\n\n<pre><code>memset(&amp;message_array, 0, sizeof(message_array));\n</code></pre>\n\n<p>Moreover, a <code>fflush</code> is performed on <code>stdin</code> and <code>stdout</code> at every write and every read process.</p>\n\n<p>The server prints on its <code>stdout</code> what it writes and what it receives. </p>\n\n<p>If I send small messages from both the terminals (\"hello\", \"hi\") even for several times (18-20), all appears to work correctly. But if I try to send longer messages (longer than 5 characters, but shorter than 2000!), the server side has some strange behaviour: it prints the message received from the client, but then it inserts a random number of the trailing characters of the previous messages. For example I have:</p>\n\n<pre><code>CLIENT MESSAGE: hello1\nSERVER MESSAGE: hello2\nCLIENT MESSAGE: hello3\nSERVER MESSAGE: hello4 \nCLIENT MESSAGE: some other characters5\nSERVER MESSAGE: hello6\nCLIENT MESSAGE: a long phrase 7\nters5\n</code></pre>\n\n<p>After several messages, the 5 characters <code>ters5</code> from a <strong>previous</strong> message appear as trailing characters after the actual message, which was just <code>a long phrase 7</code>.\nContinuing the \"conversation\", other unexpected newline and \"old\" characters appears on the <code>stdout</code> of the server.</p>\n\n<p>The code of the read and write routine is the following:</p>\n\n<pre><code>void *connection_handler_read(void *socket_read_desc)\n{\n    int read_sock = *(int*)socket_read_desc;\n    int read_size;\n    char remote_message[MAX_STRING_LEN];\n\n    while( (read_size = recv(read_sock, remote_message, MAX_STRING_LEN, 0)) &gt; 0 )\n    {\n        printf(remote_message);\n        fflush(stdout);\n    }\n\n    free(socket_read_desc);\n    connection_active = 0;\n    return 0;\n}\n\nvoid *connection_handler_write(void *socket_write_desc)\n{\n    int write_sock = *(int*)socket_write_desc;\n    char local_message[MAX_STRING_LEN];\n\n    while( connection_active != 0 )\n    {\n        scanf (\"%[^\\n]%*c\", local_message);\n        write(write_sock, local_message, strlen(local_message));\n        memset(&amp;local_message, 0, sizeof(local_message));\n        fflush(stdin);\n    }\n\n    free(socket_write_desc);\n    return 0;\n}\n</code></pre>\n\n<p>These two functions are invoked in the <code>main</code> as threads with <code>pthread_create</code> after a new socket connection is succesfully created (so, after a successful <code>accept</code>). They obviously operate on the same socket.</p>\n\n<p>My questions are:</p>\n\n<p>1) Is this a software problem or a socket problem?</p>\n\n<p>2) Which trick should I have followed, in addition to <code>memset</code> and <code>fflush</code>?</p>\n"}, {"tags": ["c", "sorting", "runtime-error", "mergesort"], "comments": [{"owner": {"reputation": 1872, "user_id": 3569165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IjLJ.jpg?s=128&g=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3569165/jan"}, "edited": false, "score": 2, "creation_date": 1438767577, "post_id": 31828727, "comment_id": 51580346, "body": "Please include the error message."}, {"owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438767681, "post_id": 31828727, "comment_id": 51580417, "body": "&quot;MergeSort.exe has stopped working&quot;"}, {"owner": {"reputation": 739, "user_id": 2710409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IZ3I.jpg?s=128&g=1", "display_name": "Joshpbarron", "link": "https://stackoverflow.com/users/2710409/joshpbarron"}, "edited": false, "score": 1, "creation_date": 1438767682, "post_id": 31828727, "comment_id": 51580419, "body": "Quick one: Try changing the order of function so they are in the order: Merge, Mergesort, Main"}, {"owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438767826, "post_id": 31828727, "comment_id": 51580528, "body": "Thanks for the correction, but the error&#39;s still showing :/"}, {"owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438768214, "post_id": 31828727, "comment_id": 51580759, "body": "I have corrected sizeof(), and MergeSort(A, n), but still the run error persists! :/"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1438768445, "post_id": 31828727, "comment_id": 51580911, "body": "This is clearly a console executable. Run it under <code>cmd</code> and tell us what this says. It may show a more descriptive error message."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438772047, "post_id": 31828727, "comment_id": 51583182, "body": "What did you find out when you debugged it?  Which line raises the error?"}, {"owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438773829, "post_id": 31828727, "comment_id": 51584301, "body": "No error  now, but it still doesn&#39;t sort the array."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1438774642, "post_id": 31828727, "comment_id": 51584848, "body": "You still do not pass <code>A</code> to the <code>Merge</code> function and did not fix it according to my other indications: change the test to <code>if(j &gt;= nR || (i &lt; nL &amp;&amp; left[i] &lt;= right[j]))</code> and also increment <code>k</code> in the loop."}, {"owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438774756, "post_id": 31828727, "comment_id": 51584916, "body": "Sorry for not editing, I&#39;m kinda new at this. Have edited as you requested again, still doesn&#39;t work!"}, {"owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438774851, "post_id": 31828727, "comment_id": 51584972, "body": "Saw your edited comment just now, it works! Thanks for all your effort! :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1438775607, "post_id": 31828727, "comment_id": 51585491, "body": "For readability and style, you should write <code>int nL = mid;</code> and <code>int nR = n - mid;</code> instead of the <code>sizeof</code> computation."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1438768439, "last_edit_date": 1438768439, "creation_date": 1438767807, "answer_id": 31828850, "question_id": 31828727, "link": "https://stackoverflow.com/questions/31828727/merge-sort-algorithm-in-an-array-in-c-exe-not-running/31828850#31828850", "title": "Merge sort algorithm in an array in C - .exe not running?", "body": "<p>Your code has multiple problems...</p>\n\n<p>Most importantly, you use <code>sizeof</code> to get the number of elements in an array.\nThis only works for type <code>char</code> and similar.  For any larger types, you need to divide the size in bytes by the size of the element:</p>\n\n<pre><code>n = sizeof(A) / sizeof(A[0]);\n</code></pre>\n\n<p>The same fix is needed in the <code>MergeSort</code> function, but it would be simpler to have local variables for the sizes of the left and right halves computed before you instantiate the arrays.</p>\n\n<p>Why do you store the return value of <code>MergeSort</code> in <code>A[n]</code> ?  Not only is <code>A[n]</code> out of bounds, but the assignment serves no purpose and the argument <code>A[n]</code> is bogus too.  The return type for <code>MergeSort</code> should be <code>void</code> anyway.  This line should read:</p>\n\n<pre><code>MergeSort(A, n);\n</code></pre>\n\n<p>In function <code>MergeSort</code> your initialization loop for the right half is incorrect:</p>\n\n<pre><code>for ( i = mid; i &lt; n; i++ )\n    right[i] = A[i];\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>for ( i = mid; i &lt; n; i++ )\n    right[i - mid] = A[i];\n</code></pre>\n\n<p>The merge phase is incorrect too: you should pass <code>A</code> as an argument, not make it a local variable. <code>mid</code> is not a meaningful argument, the <code>left</code> and <code>right</code> arrays are separate, you should not offset the indices in <code>right</code> by <code>mid</code>. You should also test if the <code>left</code> or <code>right</code> halves have been exhausted before comparing the leftmost remaining elements.  You currently get undefined behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438774006, "post_id": 31829494, "comment_id": 51584426, "body": "I have inserted the edited code in my original query."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "edited": false, "score": 0, "creation_date": 1438781921, "post_id": 31829494, "comment_id": 51590234, "body": "@user5123971 Please from next time post your related code as it is  :). Good luck !!"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1438769514, "creation_date": 1438769514, "answer_id": 31829494, "question_id": 31828727, "link": "https://stackoverflow.com/questions/31828727/merge-sort-algorithm-in-an-array-in-c-exe-not-running/31829494#31829494", "title": "Merge sort algorithm in an array in C - .exe not running?", "body": "<pre><code>int n = sizeof(A);\n</code></pre>\n\n<p>This will give <code>n</code> as <code>40</code> , thus <code>A[n]</code> is out of bounds.</p>\n\n<p>In Function <code>int MergeSort</code></p>\n\n<pre><code>for ( i = mid; i &lt; n; i++ )\n    right[i] = A[i];\n</code></pre>\n\n<p>So here array <code>right</code> indexing starts with <code>index=mid</code> (Array indexing starts with <code>0</code> ).</p>\n\n<p>And in function <code>int Merge</code></p>\n\n<pre><code>    int n = nL + nR;\nint i, j, k = 0;    //i and j not initialized .\nint A[n];\n\nfor ( k = 0; k &lt; n; k++ )\n{\n    if( left[i] &lt;= right[mid + j] )  // Used here. What i and j have ?\n    {\n        A[k] = left[i];\n        i = i + 1;\n    }\n    else\n    {\n        A[k] = right[mid + j];\n        j = j + 1;\n    }\n</code></pre>\n\n<p>In this function <code>i</code> <code>j</code> are not initialized and used as array index.Thus one more reason to give error.</p>\n"}], "owner": {"reputation": 3, "user_id": 5123971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39aeea3b06ee728d7fce60342c2cb0?s=128&d=identicon&r=PG", "display_name": "user5123971", "link": "https://stackoverflow.com/users/5123971/user5123971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 31828850, "answer_count": 2, "score": -2, "last_activity_date": 1438775380, "creation_date": 1438767483, "last_edit_date": 1438775380, "question_id": 31828727, "link": "https://stackoverflow.com/questions/31828727/merge-sort-algorithm-in-an-array-in-c-exe-not-running", "title": "Merge sort algorithm in an array in C - .exe not running?", "body": "<p>The following is my 'C' code for MergeSort algorithm. I'm using Dev C++, using TDM:GCC compiler. Doesn't give compilation error but exe doesnt run after compilation. Please do help.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint main()\n{\n    int A[] = {12, 5, 6, 78, 223, 1, 45, 34, 78, 99};\n    int n = sizeof(A);\n    int i = 0;\n\n    A[n] = MergeSort(A[n], n);\n\n    for ( i = 0; i &lt; n; i++ ) printf(\"%d\\n\", A[i]);\n\n    return 0;\n}\n\nint MergeSort(int A[], int n)\n{\n    int mid = n/2;\n    int left[mid], right[n - mid];\n    int i;\n\n    if(n&lt;2) return;\n\n    for ( i = 0; i &lt; mid; i++ )\n        left[i] = A[i];\n    for ( i = mid; i &lt; n; i++ )\n        right[i] = A[i];\n\n    int nL = sizeof(left);\n    int nR = sizeof(right);\n\n    MergeSort(left, nL);\n    MergeSort(right, nR);\n    Merge(left, right, nL, nR, mid);\n}\n\nint Merge(int left[], int right[], int nL, int nR, int mid)\n{\n    int n = nL + nR;\n    int i, j, k = 0;\n    int A[n];\n\n    for ( k = 0; k &lt; n; k++ )\n    {\n        if( left[i] &lt;= right[mid + j] )\n        {\n            A[k] = left[i];\n            i = i + 1;\n        }\n        else\n        {\n            A[k] = right[mid + j];\n            j = j + 1;\n        }\n\n        if ( i + j &gt;= n) break;\n    }\n\n    return;\n}\n</code></pre>\n\n<p>My code doesn't run at all, and shows an error window instantaneously.</p>\n\n<p>------ EDIT ------</p>\n\n<p>My new edited code is as follows. No error now, but still the sorting doesn't take place.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint Merge(int left[], int right[], int nL, int nR, int A[])\n{\n    int n = nL + nR;\n    int i = 0;\n    int j = 0;\n    int k = 0;\n\n    for ( k = 0; k &lt; n; k++ )\n    {\n        if(i &lt; nL &amp;&amp; j &lt; nR &amp;&amp; left[i] &lt;= right[j] )\n        {\n            A[k] = left[i];\n            i = i + 1;\n        }\n        else\n        {\n            A[k] = right[j];\n            j = j + 1;\n        }\n    }\n\n    return;\n}\n\nvoid MergeSort(int A[], int n)\n{\n    int mid = n/2;\n    int left[mid], right[n - mid];\n    int i;\n\n    if(n&lt;=1) return;\n\n    for ( i = 0; i &lt; mid; i++ )\n        left[i] = A[i];\n    for ( i = 0; i &lt; n - mid; i++ )\n        right[i] = A[i + mid];\n\n    int nL = sizeof(left)/sizeof(left[0]);\n    int nR = sizeof(right)/sizeof(right[0]);\n\n    MergeSort(left, nL);\n    MergeSort(right, nR);\n    Merge(left, right, nL, nR, A);\n}\n\nint main()\n{\n    int A[] = {98, 5, 6, 78, 223, 1, 45, 34, 78, 99};\n    int n = sizeof(A)/sizeof(A[0]);\n    int i = 0;\n\n    MergeSort(A, n);\n\n    for ( i = 0; i &lt; n; i++ ) printf( \"%d\\n\", A[i] );\n\n    return 0;\n}\n</code></pre>\n\n<p>--- LATEST EDIT ---</p>\n\n<p>The new code, with modifications in Merge, works as follows:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint Merge(int left[], int right[], int nL, int nR, int A[])\n{\n    int n = nL + nR;\n    int i = 0;\n    int j = 0;\n    int k = 0;\n\n    for ( k = 0; k &lt; n; k++ )\n    {\n        if(j &gt;= nR || (i &lt; nL &amp;&amp; left[i] &lt;= right[j]))\n        {\n            A[k] = left[i];\n            i = i + 1;\n        }\n        else\n        {\n            A[k] = right[j];\n            j = j + 1;\n        }\n    }\n\n    return;\n}\n\nvoid MergeSort(int A[], int n)\n{\n    int mid = n/2;\n    int left[mid], right[n - mid];\n    int i;\n\n    if(n&lt;=1) return;\n\n    for ( i = 0; i &lt; mid; i++ )\n        left[i] = A[i];\n    for ( i = 0; i &lt; n - mid; i++ )\n        right[i] = A[i + mid];\n\n    int nL = sizeof(left)/sizeof(left[0]);\n    int nR = sizeof(right)/sizeof(right[0]);\n\n    MergeSort(left, nL);\n    MergeSort(right, nR);\n    Merge(left, right, nL, nR, A);\n}\n\nint main()\n{\n    int A[] = {98, 5, 6, 78, 223, 1, 45, 34, 78, 99};\n    int n = sizeof(A)/sizeof(A[0]);\n    int i = 0;\n\n    MergeSort(A, n);\n\n    for ( i = 0; i &lt; n; i++ ) printf( \"%d\\n\", A[i] );\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks to chqrlie and others for all the effort! :)</p>\n"}, {"tags": ["android", "c++", "c", "sqlite", "android-ndk"], "owner": {"reputation": 1490, "user_id": 1263272, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bdb0a06ce63cde274bb65d854325fd92?s=128&d=identicon&r=PG", "display_name": "PriestVallon", "link": "https://stackoverflow.com/users/1263272/priestvallon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1439291565, "creation_date": 1438766601, "last_edit_date": 1439291565, "question_id": 31828408, "link": "https://stackoverflow.com/questions/31828408/sqlite-android-ndk-add-custom-functions", "title": "SQLite Android NDK add custom functions", "body": "<p>I have managed to get SQLite setup using the NDK, but I can't manage to get custom functions to work which was the whole reason for implementing SQLite using the NDK.</p>\n\n<p>I used <a href=\"https://github.com/moneymanagerex/SQLite-Android-Bindings\" rel=\"nofollow\">this</a> library to get the same SQLite files. It also contains an extension file called <a href=\"https://github.com/moneymanagerex/SQLite-Android-Bindings/blob/master/jni/sqlite/extensionfunctions.c\" rel=\"nofollow\">extensionfunctions.c</a> which adds in string and mathematical functions for SQLite.</p>\n\n<p>From what I can see, the SQLite implementation appears to be working correctly, but I cannot call any of the custom functions.</p>\n\n<p>I've little to no knowledge of C/C++, so any help would be great. Do I have to compile the extensionfunctions.c file independently, and then add in the SO file with the libsqliteX.so file? Or do I have to make a call in the android_database_SQLiteCommon.cpp to load in the other extension? I've no idea how this works.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The file extensionfunctions.c is included in sqlite3secure.c which is in the Android.mk file under LOCAL_SRC_FILES. I assume that means the file is being used correctly, but none of the custom functions are accessible.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<pre><code>// To enable the extension functions define SQLITE_ENABLE_EXTFUNC on compiling this module\n\n#ifdef SQLITE_ENABLE_EXTFUNC\n#define sqlite3_open    sqlite3_open_internal\n#define sqlite3_open16  sqlite3_open16_internal\n#define sqlite3_open_v2 sqlite3_open_v2_internal\n#endif\n\n#include \"sqlite3.c\"\n\n#ifdef SQLITE_ENABLE_EXTFUNC\n#undef sqlite3_open\n#undef sqlite3_open16\n#undef sqlite3_open_v2\n#endif\n</code></pre>\n\n<p>I found the above code with the comment and I added in the line below but it appears as though nothing has changed.</p>\n\n<pre><code>#define SQLITE_ENABLE_EXTFUNC\n</code></pre>\n\n<p>Do I have to do anything to get the app to refresh it's version of the sqlite3 files or could that be a problem? My C skills are poor so I assume what I did is what the comment has referring to?</p>\n"}, {"tags": ["c++", "c", "libcurl"], "comments": [{"owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "edited": false, "score": 1, "creation_date": 1438779008, "post_id": 31827898, "comment_id": 51587935, "body": "&quot;These files are intended as examples only. In the interest of simplicity and clarity, they might not include proper error handling and might produce compiler warnings on some platforms. Real-world applications should pay more attention to these issues.&quot; quoted from <a href=\"http://curl.haxx.se/libcurl/c/example.html\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/c/example.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "is_accepted": true, "score": 2, "last_activity_date": 1438766126, "creation_date": 1438766126, "answer_id": 31828235, "question_id": 31827898, "link": "https://stackoverflow.com/questions/31827898/is-the-libcurl-example-httpcustomheader-c-buggy-showing-bad-practice-or-am-i-m/31828235#31828235", "title": "Is the libcurl example httpcustomheader.c buggy (showing bad practice) or am I missing something?", "body": "<p>Your suspicions seem entirely correct. The source for <code>curl_slist_append</code> can be viewed <a href=\"https://github.com/bagder/curl/blob/master/lib/slist.c#L87\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 691, "user_id": 3963625, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NLvxE.jpg?s=128&g=1", "display_name": "DrP3pp3r", "link": "https://stackoverflow.com/users/3963625/drp3pp3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 31828235, "answer_count": 1, "score": 1, "last_activity_date": 1438766126, "creation_date": 1438765186, "question_id": 31827898, "link": "https://stackoverflow.com/questions/31827898/is-the-libcurl-example-httpcustomheader-c-buggy-showing-bad-practice-or-am-i-m", "title": "Is the libcurl example httpcustomheader.c buggy (showing bad practice) or am I missing something?", "body": "<p>The libcurl examples contains an <a href=\"http://curl.haxx.se/libcurl/c/httpcustomheader.html\" rel=\"nofollow\">example for custom HTTP headers</a>.</p>\n\n<p>The example makes use of <em>curl_slist_append</em> like this:</p>\n\n<pre><code>struct curl_slist *chunk = NULL;\n\n/* Remove a header curl would otherwise add by itself */ \nchunk = curl_slist_append(chunk, \"Accept:\");\n\n/* Add a custom header */ \nchunk = curl_slist_append(chunk, \"Another: yes\");\n\n/* Modify a header curl otherwise adds differently */ \nchunk = curl_slist_append(chunk, \"Host: example.com\");\n\n/* Add a header with \"blank\" contents to the right of the colon. Note that\n   we're then using a semicolon in the string we pass to curl! */ \nchunk = curl_slist_append(chunk, \"X-silly-header;\");\n</code></pre>\n\n<p>According to the <a href=\"http://curl.haxx.se/libcurl/c/curl_slist_append.html\" rel=\"nofollow\">documentation of curl_slist_append</a> a null pointer will be returned if something goes wrong:</p>\n\n<blockquote>\n  <p>RETURN VALUE</p>\n  \n  <p>A null pointer is returned if anything went wrong, otherwise the new\n  list pointer is returned.</p>\n</blockquote>\n\n<p><strong>Question:</strong></p>\n\n<p>When for example the call</p>\n\n<pre><code>chunk = curl_slist_append(chunk, \"Another: yes\");\n</code></pre>\n\n<p>fails, won't the original list, that chunk previously pointed to, be lost? And as a consequence: won't this leak memory?\nOr is there some magic that I am missing and that is not mentioned in the <em>curl_slist_append</em> documentation?</p>\n\n<p>To make matters worse: won't the next call to <em>curl_slist_append</em> possibly create a new list (unlikely as we are probably out of memory already, but possible)?</p>\n"}, {"tags": ["c", "codeblocks", "libraries", "standard-library"], "comments": [{"owner": {"reputation": 3008, "user_id": 2209329, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e62709eac24c8a174c5f876e1cb63b39?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Szyd\u0142owski", "link": "https://stackoverflow.com/users/2209329/micha%c5%82-szyd%c5%82owski"}, "edited": false, "score": 0, "creation_date": 1438766042, "post_id": 31827708, "comment_id": 51579348, "body": "<code>.dll</code>. and <code>.o</code> are binary files, they are not designed for you to read them. Why would you want that?"}, {"owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "reply_to_user": {"reputation": 3008, "user_id": 2209329, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e62709eac24c8a174c5f876e1cb63b39?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Szyd\u0142owski", "link": "https://stackoverflow.com/users/2209329/micha%c5%82-szyd%c5%82owski"}, "edited": false, "score": 0, "creation_date": 1438766593, "post_id": 31827708, "comment_id": 51579685, "body": "i want to read the implementation of function in libraries to understand better their work"}, {"owner": {"reputation": 3008, "user_id": 2209329, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e62709eac24c8a174c5f876e1cb63b39?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Szyd\u0142owski", "link": "https://stackoverflow.com/users/2209329/micha%c5%82-szyd%c5%82owski"}, "edited": false, "score": 0, "creation_date": 1438766819, "post_id": 31827708, "comment_id": 51579842, "body": "Well then, <code>.o</code> is just a compiled C output, a stream of bytes. So it&#39;s rather impossible to read its contents in any presentable format. You can google most of the implementations of <code>string.h</code> very easily though, if you can&#39;t find them in the header file."}], "answers": [{"comments": [{"owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "edited": false, "score": 0, "creation_date": 1438770114, "post_id": 31829655, "comment_id": 51581878, "body": "what should I search? what kind of file? with whom extension?"}, {"owner": {"reputation": 856, "user_id": 4671077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/knxnh.jpg?s=128&g=1", "display_name": "Anoop Toffy", "link": "https://stackoverflow.com/users/4671077/anoop-toffy"}, "reply_to_user": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "edited": false, "score": 0, "creation_date": 1438825006, "post_id": 31829655, "comment_id": 51612148, "body": "checkout the cvs repo and explore. <a href=\"http://www.mingw.org/wiki/Official_CVS_Repository\" rel=\"nofollow noreferrer\">mingw.org/wiki/Official_CVS_Repository</a>"}], "tags": [], "owner": {"reputation": 856, "user_id": 4671077, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/knxnh.jpg?s=128&g=1", "display_name": "Anoop Toffy", "link": "https://stackoverflow.com/users/4671077/anoop-toffy"}, "is_accepted": false, "score": 1, "last_activity_date": 1438769938, "creation_date": 1438769938, "answer_id": 31829655, "question_id": 31827708, "link": "https://stackoverflow.com/questions/31827708/where-are-standard-libraries-in-code-blocks/31829655#31829655", "title": "where are standard libraries in Code Blocks?", "body": "<p>Code::Blocks is an IDE. Hence you might what to check the source code from the Compiler it is using.</p>\n\n<p>MinGW compilers collection is what I am using along with code blocks.\nSo check for source there.</p>\n"}], "owner": {"reputation": 1264, "user_id": 4019207, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StackUser", "link": "https://stackoverflow.com/users/4019207/stackuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1898, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438769938, "creation_date": 1438764639, "question_id": 31827708, "link": "https://stackoverflow.com/questions/31827708/where-are-standard-libraries-in-code-blocks", "title": "where are standard libraries in Code Blocks?", "body": "<p>I want to read the code of the implementation of the functions of string.h; I found only the header file... what kind of extension have I to search? .dll or .o? and how can i read them, which program should I use?</p>\n"}, {"tags": ["c++", "c", "linux", "bash"], "comments": [{"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 1, "creation_date": 1438763807, "post_id": 31827323, "comment_id": 51577877, "body": "Why not use sockets for IPC. You can even use them in Bash. See here: <a href=\"http://hacktux.com/bash/socket\" rel=\"nofollow noreferrer\">hacktux.com/bash/socket</a>"}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1438765062, "post_id": 31827323, "comment_id": 51578702, "body": "REDIS is nice for this - very fast and scalable. It has a command line  interface for your <code>bash</code> scripts, and a  <code>C</code> interface and <code>Perl</code> etc. Another advantage is that it would save your error messages across reboots for historical analysis. Basically, your clients would do <code>echo LPUSH something | redis-cli</code> and your server would do <code>echo BLPOP something | redis-cli</code> to do a blocking wait for error messages."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1438767325, "creation_date": 1438767325, "answer_id": 31828667, "question_id": 31827323, "link": "https://stackoverflow.com/questions/31827323/ipc-communication-of-c-program-with-a-group-of-bash-scripts-and-c-programs/31828667#31828667", "title": "IPC : Communication of C++-program with a group of bash scripts and C++-programs", "body": "<p>You can either reinvent it using some low level protocol, named pipes or Unix domain sockets, or you can just rely on the standard <code>syslog</code>. It is immediately useable in C/C++ (<code>syslog</code>), in any shell (<code>logger</code>), and the daemon <code>syslogd</code> is configurable enough to send messages corresponding to a dedicated facility to a program.</p>\n\n<p>My advice is to use one the the local facilities not used on your system (say <code>local6</code>) and add this to the file <code>/etc/syslog.conf</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> # Pipe all local6 messages to the supervisor command\n local6.*           | /path/to/supervisor/command\n</code></pre>\n\n<p>You have just to write the supervisor command : it receives lines form its standard input and pass them to your daemon - here you will have to use a low level mechanism</p>\n\n<p>Cons:</p>\n\n<ul>\n<li>you have to  write the intermediary <em>supervisor command</em></li>\n<li>the <em>supervisor command</em> will be run under the user running syslogd (normally root)</li>\n<li>you have to be admin on the machine or ask the admin to configure syslog for you</li>\n</ul>\n\n<p>Pros:</p>\n\n<ul>\n<li>syslog is a well known robust piece of code that will deal with concurrent writes for you</li>\n<li>the writing of messages only uses standard tools and libraries</li>\n<li>you get <em>for free</em> multiple message levels</li>\n<li>you get <em>for free</em> the possibility of storing messages to disk depending on the level</li>\n<li>you get <em>for free</em> the possibility of sending messages by mail depending on the level</li>\n</ul>\n"}], "owner": {"reputation": 118, "user_id": 2427767, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7f8cfe165813ae5cf8244b9f6d98a7be?s=128&d=identicon&r=PG", "display_name": "techbull", "link": "https://stackoverflow.com/users/2427767/techbull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438767325, "creation_date": 1438763547, "last_edit_date": 1438764078, "question_id": 31827323, "link": "https://stackoverflow.com/questions/31827323/ipc-communication-of-c-program-with-a-group-of-bash-scripts-and-c-programs", "title": "IPC : Communication of C++-program with a group of bash scripts and C++-programs", "body": "<p>On my Linux system, I have multiple <strong>C/C++-daemons</strong>(around 5 daemons) doing different-different tasks. At the same time, I have multiple <strong>bash scripts</strong> running in the system doing some system related tasks (around 7 scripts). I have one separate <strong>C/C++-Daemon running as central error handler</strong> which is dedicated for displaying error messages to user in proper GUI form. The error messages can come from any of the C/C++-daemon and scripts. For now, I only need <code>uni-directional communication from all the C/C++-daemons and scripts to central error handling C/C++-daemon</code>. </p>\n\n<p>I am planning to implement this using <strong>named-pipes</strong>. Is there any better way of handling this communication scenario which is more <strong>robust</strong> and handle <strong>concurrency</strong> in a better way?</p>\n"}, {"tags": ["c", "pointers", "assembly"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1438764164, "post_id": 31827185, "comment_id": 51578105, "body": "Just return eax which already points to the memory you just allocated with malloc. BTW why do you allocate 10 bytes ? Usually the size of a double is 8. And why do you need to allocate memory at all ? Just return a double value instead of a pointer to a double."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1438764295, "post_id": 31827185, "comment_id": 51578181, "body": "Another suggestion: write your code in C and look at the compiler&#39;s assembly output."}, {"owner": {"reputation": 177, "user_id": 4956055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e61ab1230d4f149387b489d27eac5a?s=128&d=identicon&r=PG&f=1", "display_name": "Darooks", "link": "https://stackoverflow.com/users/4956055/darooks"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438764640, "post_id": 31827185, "comment_id": 51578403, "body": "I allocate 10 bytes because coprocessor register is 80 bits therefore there is 10 bytes.   I&#39;ll try. Didn&#39;t know that it is possible to write C code and see how it looks like in assembly. :)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438765126, "post_id": 31827185, "comment_id": 51578752, "body": "OK I see, Which compiler/developement environnment do you use ?"}, {"owner": {"reputation": 177, "user_id": 4956055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e61ab1230d4f149387b489d27eac5a?s=128&d=identicon&r=PG&f=1", "display_name": "Darooks", "link": "https://stackoverflow.com/users/4956055/darooks"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438765200, "post_id": 31827185, "comment_id": 51578814, "body": "I&#39;m using Visual Studio 2013"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438765315, "post_id": 31827185, "comment_id": 51578886, "body": "To see the assembly code: debug step by step, then you can open the disassembly window with Debug-&gt;Windows-&gt;Disassembly."}, {"owner": {"reputation": 177, "user_id": 4956055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e61ab1230d4f149387b489d27eac5a?s=128&d=identicon&r=PG&f=1", "display_name": "Darooks", "link": "https://stackoverflow.com/users/4956055/darooks"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438768338, "post_id": 31827185, "comment_id": 51580849, "body": "Alright, it works! I had to change  fstp [eax], st(0) to fstp dword PTR [eax] Does anyone know why dword PTR is needed to do it? Michael Walz- thank you very very much"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 3, "creation_date": 1438779545, "post_id": 31827185, "comment_id": 51588351, "body": "Because <code>fstp</code> comes in 3 operand sizes and you need to tell the assembler which one you want or else it might pick a default that you won&#39;t like ;)"}], "owner": {"reputation": 177, "user_id": 4956055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e61ab1230d4f149387b489d27eac5a?s=128&d=identicon&r=PG&f=1", "display_name": "Darooks", "link": "https://stackoverflow.com/users/4956055/darooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1438764324, "creation_date": 1438763097, "last_edit_date": 1438764324, "question_id": 31827185, "link": "https://stackoverflow.com/questions/31827185/assembly-return-a-pointer-using-malloc", "title": "Assembly return a pointer using malloc", "body": "<p>I'm just practicing assembly with coprocessor. The thing is I don't know how to return pointer to my value.</p>\n\n<p>The code in C:</p>\n\n<pre><code>double * distance(float x, float y, float z);\n</code></pre>\n\n<p>And my Assembly code:</p>\n\n<pre><code>    .code\n\n_distance  PROC\n    push ebp\n    mov ebp, esp\n\n    mov eax, 0\n    finit ; some aritmetic\n    fldz\n    fld dword PTR [ebp + 8]\n    fsubp st(1), st(0)\n    fmul st(0), st(0) ; 0 - x\n\n    fldz\n    fld dword PTR [ebp + 12]\n    fsubp st(1), st(0)\n    fmul st(0), st(0)\n\n    fldz\n    fld dword PTR [ebp + 16]\n    fsubp st(1), st(0)\n    fmul st(0), st(0)\n\n    faddp st(1), st(0)\n    faddp st(1), st(0)\n\n    fsqrt\n\n    push 10 ; first i push 10 bytes for malloc                                       \n    call _malloc \n    add esp, 4 \n    fstp [eax], st(0) ; and then i want to point to the specific value\n\n    pop ebp\n    ret\n_distance  ENDP\n</code></pre>\n\n<p>As far as i know malloc allocates memory and returns the address in eax. So the only thing I want to know how to point to the value of cooprocessor register and return it.</p>\n"}, {"tags": ["c", "udp", "ethernet", "unix-socket"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5173369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0072d5668f57c1214ad0aa72212e9e?s=128&d=identicon&r=PG&f=1", "display_name": "malek", "link": "https://stackoverflow.com/users/5173369/malek"}, "is_accepted": true, "score": 0, "last_activity_date": 1438774883, "creation_date": 1438774883, "answer_id": 31831514, "question_id": 31826857, "link": "https://stackoverflow.com/questions/31826857/sending-udp-packet-to-2-clients-and-only-one-receive/31831514#31831514", "title": "Sending UDP packet to 2 clients and only one receive", "body": "<p>The problem was caused by the Zedboards which used the same MAC address. Then, the switch sent only to the last IP address connected to the MAC address.</p>\n\n<p>Bye</p>\n"}], "owner": {"reputation": 1, "user_id": 5173369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0072d5668f57c1214ad0aa72212e9e?s=128&d=identicon&r=PG&f=1", "display_name": "malek", "link": "https://stackoverflow.com/users/5173369/malek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 31831514, "answer_count": 1, "score": 0, "last_activity_date": 1449130010, "creation_date": 1438762200, "last_edit_date": 1438764165, "question_id": 31826857, "link": "https://stackoverflow.com/questions/31826857/sending-udp-packet-to-2-clients-and-only-one-receive", "title": "Sending UDP packet to 2 clients and only one receive", "body": "<p>(sorry by advance for my English...)\nI am working on a network between a PC and a set of Zedboards connected by Ethernet. I use the UDP protocol, and here's my problem:\n- All my cards and my PC are correctly connected to a switch and have their own IPs (192.168.1.15 for PC , and 11/12 for cards).\n- When I try to send a simple packet with unix sockets with the code below, only the last message is received (but both seem to be send) (plus, no error or warning on compilation)\n- If I switch the two sending, it is always the last which arrive at destination so it is not a card problem...</p>\n\n<p>main.c</p>\n\n<pre><code>#include \"send_tool.h\"\n\nstatic int PORT;\nstatic char LOCAL_ADDRESS[50]; \n\nstatic SOCKADDR_IN client_list[NB_CLIENTS];\nstatic int uc_sock;\n\nint main(int argc, char **argv)\n{\nchar buffer[BUF_SIZE];\n\nint actual;int i;\nmemset(buffer,0, sizeof(buffer));\n\nSOCKADDR_IN csin = { 0 };\n\nif(argc &lt; 3)\n{\n    PORT = 2005;\n    sprintf(LOCAL_ADDRESS, \"192.168.1.15\");\n    printf(\"Valeurs de parametre forcees: %d\\t%s\\n\", PORT, LOCAL_ADDRESS);\n}\nelse\n{\n    PORT = atoi(argv[1]);\n    sprintf(LOCAL_ADDRESS, argv[2]);\n}\nuc_sock = init_UC_connection(LOCAL_ADDRESS, PORT);\n\nwhile(actual &lt; NB_CLIENTS)\n{\n    read_UDP(uc_sock, &amp;csin, buffer);\n    if(!strncmp(buffer, \"free:\",5))\n    {\n        //add_client(client_list, csin);\n        client_list[actual].sin_addr.s_addr = csin.sin_addr.s_addr;\n        client_list[actual].sin_port = csin.sin_port;\n        client_list[actual].sin_family = csin.sin_family;\n        memcpy(client_list[actual].sin_zero, csin.sin_zero, 8);\n        //sprintf(buffer, \"salut\");\n        //write_UDP(uc_sock, &amp;client_list[actual], buffer, strlen(buffer));\n        actual++;\n    }\n}\n\nprintf(\"************************************\\n\");\nprintf(\"0: %s:%d/%d\\n\", inet_ntoa(client_list[0].sin_addr), ntohs(client_list[0].sin_port), client_list[0].sin_family);\nprintf(\"1: %s:%d/%d\\n\", inet_ntoa(client_list[1].sin_addr), ntohs(client_list[1].sin_port), client_list[1].sin_family);\nprintf(\"************************************\\n\");\n\nsprintf(buffer, \"au revoir\");\nwrite_UDP(uc_sock, &amp;client_list[0], buffer, strlen(buffer));\nwrite_UDP(uc_sock, &amp;client_list[1], buffer, strlen(buffer));\n\nmemset(buffer, 0, sizeof(buffer));\n\nwhile(read_UDP(uc_sock, &amp;csin, buffer) &gt; 0){}\n\nclose(uc_sock);\n    return 0;\n}\n</code></pre>\n\n<p>send_tool.h</p>\n\n<pre><code>/* STD LIBS */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n\n//#include &lt;sys/types.h&gt;\n//#include &lt;sys/stat.h&gt;\n\n/* SOCKETS */\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netdb.h&gt;\n\n/* TIME */\n#include &lt;sys/timerfd.h&gt;\n#include &lt;sys/time.h&gt;\n\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;signal.h&gt;\n\n#define BUF_SIZE    60000\n#define MULTICAST_ADDRESS \"224.0.0.1\"\n#define  NB_CLIENTS 2\n\ntypedef struct sockaddr_in SOCKADDR_IN;\ntypedef struct sockaddr SOCKADDR;\ntypedef struct in_addr IN_ADDR;\n\nint init_UC_connection(char LOCAL_ADDRESS[], int port);\n\nvoid write_UDP(int sock, SOCKADDR_IN *sin, const char *buffer, size_t buff_len);\nint read_UDP(int sock, SOCKADDR_IN *sin, char *buffer);\n</code></pre>\n\n<p>send_tool.c</p>\n\n<pre><code>#include \"send_tool.h\"\n\nint init_UC_connection(char LOCAL_ADDRESS[], int port)\n{\n    /* UDP so SOCK_DGRAM */\n    int sock = socket(AF_INET, SOCK_DGRAM, 0);\n    SOCKADDR_IN sin = { 0 };\n    struct timeval tv;\n    tv.tv_sec = 3;\n    tv.tv_usec = 0;\n\n    if(sock == -1)\n    {\n        perror(\"socket()\");\n        exit(errno);\n    }\n\n    sin.sin_addr.s_addr = inet_addr(LOCAL_ADDRESS);\n    sin.sin_port = htons(port);\n    sin.sin_family = AF_INET;\n\n    if(bind(sock,(SOCKADDR *)&amp;sin, sizeof sin) == -1)\n    {\n        perror(\"bind()\");\n        exit(errno);\n    }\n\n    if (setsockopt(sock, SOL_SOCKET, SO_RCVTIMEO,&amp;tv,sizeof(tv)) &lt; 0) {\n        perror(\"Error\");\n    }\n\n    return sock;\n}\n\nvoid write_UDP(int sock, SOCKADDR_IN *sin, const char *buffer, size_t buff_len)\n{\n    socklen_t sinsize = 16;//sizeof *sin;\n    printf(\"sinsize : %d\\n\", sinsize);\n    int n;\n    size_t i;\n\n    if((n=sendto(sock, buffer, buff_len, 0, (SOCKADDR *) sin, sinsize)) &lt; 0)\n    {\n        perror(\"send()\");\n        exit(errno);\n    }\n    printf(\"envoi (sinsize = %d; n = %d)|%s| a %s:%d/%d termine \\n\", sinsize, n, buffer, inet_ntoa(sin-&gt;sin_addr), ntohs(sin-&gt;sin_port), sin-&gt;sin_family);\n}\n\nint read_UDP(int sock, SOCKADDR_IN *sin, char *buffer)\n{\n    int n = 0;\n    socklen_t sinsize = sizeof *sin;\n\n    if((n = recvfrom(sock, buffer, BUF_SIZE - 1, 0, (SOCKADDR *) sin, &amp;sinsize)) &lt; 0)\n    {\n        perror(\"recvfrom()\");\n        exit(errno);\n    }\n    printf(\"recu (sinsize = %d; n = %d)|%s| depuis %s:%d/%d termine \\n\", sinsize, n, buffer, inet_ntoa(sin-&gt;sin_addr), ntohs(sin-&gt;sin_port), sin-&gt;sin_family);\n\n    return n;\n}\n</code></pre>\n\n<p>client.c</p>\n\n<pre><code>#include \"receive_tool.h\"\n\nstatic int PORT;\nstatic char LOCAL_ADDRESS[50];\n\n/* main function, launching the Server application*/\nint main(int argc, char **argv)\n{\n    int uc_sock;\n\n    char free_msg[30];\n    memset(free_msg, 0, sizeof(free_msg));\n\n    char buffer[60000];\n    memset(buffer, 0, sizeof(buffer));\n\n    if(argc &lt; 3)\n    {\n        PORT = 2005;\n        sprintf(LOCAL_ADDRESS, \"192.168.1.12\");\n        //printf(\"Valeurs de parametre forcees: %d\\t%s\\n\", PORT, LOCAL_ADDRESS);\n    }\n    else\n    {\n        PORT = atoi(argv[1]);\n        sprintf(LOCAL_ADDRESS, argv[2]);\n    }\n    sprintf(free_msg, \"free:%s\", LOCAL_ADDRESS);\n\n    SOCKADDR_IN server_sin = { 0 }, receive_sin = { 0 };\n    server_sin.sin_addr.s_addr = inet_addr(SERVER_ADDRESS); // addresse multicast vers les serveurs\n    server_sin.sin_family = AF_INET;\n    server_sin.sin_port = htons(PORT);\n    memset(&amp;server_sin.sin_zero, 0, sizeof(server_sin.sin_zero));\n\n    uc_sock = init_UC_connection(LOCAL_ADDRESS, PORT);\n\n    write_UDP(uc_sock, &amp;server_sin, free_msg);\n\n    time_t chrono_begin;\n    chrono_begin = time(NULL);\n    chrono_begin+= 5;\n    while(time(NULL) &lt;= chrono_begin)\n    {\n        if(read_UDP(uc_sock, &amp;receive_sin, buffer)&lt;0) continue;\n        write_UDP(uc_sock, &amp;server_sin, buffer);\n    }\n\n    close(uc_sock);\n    return 0;\n}\n</code></pre>\n\n<p>Do you have any idea why this happen?\nThank you for your help.</p>\n"}, {"tags": ["c", "random", "unique"], "comments": [{"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 6, "creation_date": 1438761969, "post_id": 31826746, "comment_id": 51576763, "body": "Use arrays....."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1438761984, "post_id": 31826746, "comment_id": 51576772, "body": "When you have a lot of variables named <code>d1</code>, <code>d2</code> and so on, that should be a big hint to turn them into a array."}, {"owner": {"reputation": 1732, "user_id": 3543182, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f84c6d267c754e4fd440e595afc32673?s=128&d=identicon&r=PG&f=1", "display_name": "M. Shaw", "link": "https://stackoverflow.com/users/3543182/m-shaw"}, "edited": false, "score": 2, "creation_date": 1438762010, "post_id": 31826746, "comment_id": 51576788, "body": "I don&#39;t even think your current method is right as the 2nd and 3rd digit can be the same, so can the 2nd and 4th, 2nd and 5th.... 8th and 9th."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438762163, "post_id": 31826746, "comment_id": 51576884, "body": "<a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow noreferrer\">This</a> should be useful."}, {"owner": {"reputation": 3218, "user_id": 1285655, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b3ff3f7a09887e25b9d55a46f998fff?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1285655/matthias"}, "edited": false, "score": 3, "creation_date": 1438762165, "post_id": 31826746, "comment_id": 51576886, "body": "How about making it a permutation of the string &quot;123456789&quot; and then convert the string to a number."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1438762291, "post_id": 31826746, "comment_id": 51576953, "body": "Are you including <code>0</code> or is it just <code>1-9</code> ?"}, {"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1438762732, "post_id": 31826746, "comment_id": 51577226, "body": "@Paul No I&#39;m not including 0. Maroun even if I use an array I would still have to compare each individual digit tho?"}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1439004769, "post_id": 31826746, "comment_id": 51696087, "body": "Easy ways: you can either start at a position and randomize its digit from the remaining numbers or iterate through numbers and randomize their placement in remaining slots ...  Generating a lookup table of all possible values and doing a single randomization for the lookup might be just as good, but an example of premature optimization."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439689922, "post_id": 31826746, "comment_id": 51963549, "body": "Not sure you defined <code>better</code>: least code, fastest, easiest to understand ?"}], "answers": [{"comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "reply_to_user": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438767218, "post_id": 31827025, "comment_id": 51580113, "body": "The assignment to <code>bit</code> maps the value <code>num</code> into values 1, 2, 4, 8, etc., according to the value of <code>digit</code> (0, 1, 2, 3, etc).  Someone might show a more concise example, but this sort of approach is quite common in system programming with C."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439401345, "post_id": 31827025, "comment_id": 51850924, "body": "Mind timing my 2nd solution (after <b>EDIT</b>, the fully unrolled one) Just curious if your timing results match mine, plus it makes sense to have independent validation : <a href=\"http://stackoverflow.com/a/31928246/2963099\">stackoverflow.com/a/31928246/2963099</a>"}, {"owner": {"reputation": 730, "user_id": 448889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577ad7db95776a76fb22c099f8e2e4b4?s=128&d=identicon&r=PG", "display_name": "George Andr&#233;", "link": "https://stackoverflow.com/users/448889/george-andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1439539347, "post_id": 31827025, "comment_id": 51912826, "body": "@ThomasDickey Nice! Which one of my answers did you test? The mask one, check1() or the array one, check2()? Could you please test both? I have a feeling of which one would be faster, but it would be nice to confirm."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1439854084, "post_id": 31827025, "comment_id": 52021113, "body": "@ThomasDickey : could you please add my solution to the hall-of-fame? I think it is rather fast."}], "tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": false, "score": 6, "last_activity_date": 1438815480, "last_edit_date": 1495542806, "creation_date": 1438762679, "answer_id": 31827025, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31827025#31827025", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Rather than 10 variables, I would make a single variable with a bit set (and testable) for each of the 10 digits.  Then you only need a loop setting (and testing) the bit corresponding to each digit.  Something like this:</p>\n\n<pre><code>int ok = 1;\nunsigned bits = 0;\nint digit;\nunsigned powers10 = 1;\nfor (digit = 0; digit &lt; 10; ++digit) {\n    unsigned bit = 1 &lt;&lt; ((num / powers10) % 10);\n    if ((bits &amp; bit) != 0) {\n        ok = 0;\n        break;\n    }\n    bits |= bit;\n    powers10 *= 10;\n}\nif (ok) {\n    printf(\"%d\\n\", num);\n}\n</code></pre>\n\n<p>Complete program (discarding unnecessary <code>#include</code> lines):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int indx;\n    int num;\n\n    for(indx = 123456789; indx &lt;= 987654321; indx++)\n    {\n        num = indx;\n        int ok = 1;\n        unsigned bits = 0;\n        int digit;\n        unsigned powers10 = 1;\n        for (digit = 0; digit &lt; 9; ++digit) {\n            unsigned bit = 1 &lt;&lt; ((num / powers10) % 10);\n            if ((bit == 1) || ((bits &amp; bit) != 0)) {\n                ok = 0;\n                break;\n            }\n            bits |= bit;\n            powers10 *= 10;\n        }\n        if (ok) {\n            printf(\"%d\\n\", num);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>OP clarified his question as I was leaving for work, and I had not focused on the lack of zeroes being requested.  (response is updated now).  This produces the expected 362880 combinations.</p>\n\n<p>However - there was a comment about one answer being fastest, which prompts a followup.  There were (counting this one) three comparable answers.  In a quick check:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/users/1400793/paul-hankin\">@Paul Hankin</a>'s answer (which counts zeros and gives 3265920 combinations):</li>\n</ul>\n\n<pre>\n    real    0m0.951s\n    user    0m0.894s\n    sys     0m0.056s\n</pre>\n\n<ul>\n<li>this one:</li>\n</ul>\n\n<pre>\n    real    0m49.108s\n    user    0m49.041s\n    sys     0m0.031s\n</pre>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/users/448889/george-andr%C3%A9\">@George Andr\u00e9</a>'s answer (which also produced the expected number of combinations):</li>\n</ul>\n\n<pre>\n     real    1m27.597s\n     user    1m27.476s\n     sys     0m0.051s\n</pre>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438765004, "post_id": 31827709, "comment_id": 51578661, "body": "I honestly don&#39;t know how to approach bits as I never learned them. Is there another way to go about this?"}, {"owner": {"reputation": 730, "user_id": 448889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577ad7db95776a76fb22c099f8e2e4b4?s=128&d=identicon&r=PG", "display_name": "George Andr&#233;", "link": "https://stackoverflow.com/users/448889/george-andr%c3%a9"}, "reply_to_user": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438765192, "post_id": 31827709, "comment_id": 51578810, "body": "@RichardFlores I&#39;m sorry, this is the fastest and requires less code. This is a good lesson about and, or and bit manipulation. I would recommend to come back to this example, when you do learn about those fields.  You could in theory replace the mask with an array of integers, having the same result."}, {"owner": {"reputation": 730, "user_id": 448889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577ad7db95776a76fb22c099f8e2e4b4?s=128&d=identicon&r=PG", "display_name": "George Andr&#233;", "link": "https://stackoverflow.com/users/448889/george-andr%c3%a9"}, "reply_to_user": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438765564, "post_id": 31827709, "comment_id": 51579035, "body": "@RichardFlores I&#39;ve updated my answer with an array example instead, as you asked for. :)"}, {"owner": {"reputation": 730, "user_id": 448889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577ad7db95776a76fb22c099f8e2e4b4?s=128&d=identicon&r=PG", "display_name": "George Andr&#233;", "link": "https://stackoverflow.com/users/448889/george-andr%c3%a9"}, "reply_to_user": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438765889, "post_id": 31827709, "comment_id": 51579239, "body": "@RichardFlores turns out the array version is marginally faster... :)"}, {"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438766177, "post_id": 31827709, "comment_id": 51579434, "body": "Thank you. What exactly is the logic behind this?"}, {"owner": {"reputation": 730, "user_id": 448889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577ad7db95776a76fb22c099f8e2e4b4?s=128&d=identicon&r=PG", "display_name": "George Andr&#233;", "link": "https://stackoverflow.com/users/448889/george-andr%c3%a9"}, "reply_to_user": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438766723, "post_id": 31827709, "comment_id": 51579776, "body": "@RichardFlores the array of 10 holds and number of times a certain digit appears in the number. It can either be 0 times or several times. We only care about the case if the digit is seen more than one time. If it is, then the original number is not unique, right? so we abort the loop. By the way, the loop goes through all the digits of the original number (9 positions, since you wanted 9 digit numbers). There&#39;s also a check if the digit we&#39;re looking at right now is 0, since we don&#39;t want the digit zero in our results, we abort early."}], "tags": [], "owner": {"reputation": 730, "user_id": 448889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577ad7db95776a76fb22c099f8e2e4b4?s=128&d=identicon&r=PG", "display_name": "George Andr&#233;", "link": "https://stackoverflow.com/users/448889/george-andr%c3%a9"}, "is_accepted": false, "score": 6, "last_activity_date": 1438765630, "last_edit_date": 1438765630, "creation_date": 1438764642, "answer_id": 31827709, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31827709#31827709", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>You can use a mask to set flags into, the flags being wether a digit has already been seen in the number or not. Like this:</p>\n\n<pre><code>int mask = 0x0, j;\n\nfor(j= 1; j&lt;=9; j++){\n    if(mask &amp; 1&lt;&lt;(input%10))\n        return 0;\n    else\n        mask |= 1&lt;&lt;(input%10);\n    input /= 10;\n}\nreturn !(mask &amp; 1);\n</code></pre>\n\n<p>The complete program:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\nint check(int input)\n{\n    int mask = 0x0, j;\n\n    for(j= 1; j&lt;=9; j++){\n        if(mask &amp; 1&lt;&lt;(input%10))\n            return 0;\n        else\n            mask |= 1&lt;&lt;(input%10);\n        input /= 10;\n    }\n    /* At this point all digits are unique\n     We're not interested in zero, though */\n    return !(mask &amp; 1);\n}\n\nint main()\n{\n    int indx;\n    for( indx = 123456789; indx &lt;=987654321; indx++){\n        if( check(indx) )\n            printf(\"%d\\n\",indx);\n    }\n}\n</code></pre>\n\n<p>Edited...</p>\n\n<p>Or you could do the same with an array:</p>\n\n<pre><code>int check2(int input)\n{\n    int j, arr[10] = {0,0,0,0,0,0,0,0,0,0};\n\n    for(j=1; j&lt;=9; j++) {\n        if( (arr[input%10]++) || (input%10 == 0) )\n            return 0;\n        input /= 10;\n    }\n    return 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439308454, "post_id": 31828305, "comment_id": 51802741, "body": "Note some optimizations <a href=\"http://stackoverflow.com/a/31928246/2963099\">stackoverflow.com/a/31928246/2963099</a> but it does lose some of the terseness of this solution"}], "tags": [], "owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "is_accepted": false, "score": 12, "last_activity_date": 1438766335, "creation_date": 1438766335, "answer_id": 31828305, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31828305#31828305", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Recursion works nicely here.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid uniq_digits(int places, int prefix, int mask) {\n  if (!places) {\n    printf(\"%d\\n\", prefix);\n    return;\n  }\n  for (int i = 0; i &lt; 10; i++) {\n    if (prefix==0 &amp;&amp; i==0) continue;\n    if ((1&lt;&lt;i)&amp;mask) continue;\n    uniq_digits(places-1, prefix*10+i, mask|(1&lt;&lt;i)); \n  }\n}\n\nint main(int argc, char**argv) {\n  uniq_digits(9, 0, 0);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 6, "last_activity_date": 1438768419, "creation_date": 1438768419, "answer_id": 31829089, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31829089#31829089", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Here's one approach - start with an array of unique digits, then randomly shuffle them:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n\nint main( void )\n{\n  char digits[] = \"123456789\";\n\n  srand( time( NULL ) );\n\n  size_t i = sizeof digits - 1;\n  while( i )\n  {\n    size_t j = rand() % i;\n    char tmp = digits[--i];\n    digits[i] = digits[j];\n    digits[j] = tmp;\n  }\n\n  printf( \"number is %s\\n\", digits );\n  return 0;\n}\n</code></pre>\n\n<p>Some sample output:</p>\n\n<pre><code>john@marvin:~/Development/snippets$ ./nine\nnumber is 249316578\njohn@marvin:~/Development/snippets$ ./nine\nnumber is 928751643\njohn@marvin:~/Development/snippets$ ./nine\nnumber is 621754893\njohn@marvin:~/Development/snippets$ ./nine\nnumber is 317529864\n</code></pre>\n\n<p>Note that these are <em>character strings</em> of unique decimal digits, not numeric values; if you want the corresponding integer value, you'd need to do a conversion like</p>\n\n<pre><code>long val = strtol( digits, NULL, 10 );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 8, "last_activity_date": 1438770547, "creation_date": 1438770547, "answer_id": 31829898, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31829898#31829898", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Here is a simple program that will print all permutations of a set of characters.  You can easily convert that to generate all the numbers you need:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic int step(const char *str, int n, const char *set) {\n    char buf[n + 2];\n    int i, j, count;\n\n    if (*set) {\n        /* insert the first character from `set` in all possible\n         * positions in string `str` and recurse for the next\n         * character.\n         */\n        for (count = 0, i = n; i &gt;= 0; i--) {\n            for (j = 0; j &lt; i; j++)\n                buf[j] = str[j];\n            buf[j++] = *set;\n            for (; j &lt;= n; j++)\n                buf[j] = str[j - 1];\n            buf[j] = '\\0';\n            count += step(buf, n + 1, set + 1);\n        }\n    } else {\n        printf(\"%s\\n\", str);\n        count = 1;\n    }\n    return count;\n}\n\nint main(int argc, char **argv) {\n    int total = step(\"\", 0, argc &gt; 1 ? argv[1] : \"123456789\");\n    printf(\"%d combinations\\n\", total);\n    return 0;\n}\n</code></pre>\n\n<p>It uses recursion but not bit masks and can be used for any set of characters.  It also computes the number of permutations, so you can verify that it produces factorial(n) permutations for a set of n characters.</p>\n"}, {"comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1438782646, "post_id": 31830671, "comment_id": 51590806, "body": "Wow, really nice. You could even improve it to take any seed: hash the input, and take the modulo 362880."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 1, "creation_date": 1438783636, "post_id": 31830671, "comment_id": 51591584, "body": "@this: Actually, it already accepts any seed, as it effectively only uses <code>(seed % 362880)</code>. That is, <code>unique9(seed) == unique9(seed % 362880)</code>, and every possible unsigned input <code>seed</code> produces a valid result. (There are only 362880 unique ones, that&#39;s all.)"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1438783727, "post_id": 31830671, "comment_id": 51591633, "body": "Right, I didn&#39;t notice that."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 2, "creation_date": 1438954321, "post_id": 31830671, "comment_id": 51675671, "body": "It seems at least one reader found this answer <i>&quot;not useful&quot;</i>. I&#39;m assuming this was because the reader did not find instant gratification in the answer, and preferred something simpler, albeit much less efficient, approach. This worries and annoys me. I&#39;ve extended the answer to show the entire logic, step by step, and added a second example extending to words using unique letters from the ASCII alphabet."}, {"owner": {"reputation": 371, "user_id": 5030000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfb1d019283d360b169b9df998cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "TeasingDart", "link": "https://stackoverflow.com/users/5030000/teasingdart"}, "edited": false, "score": 1, "creation_date": 1438987909, "post_id": 31830671, "comment_id": 51692979, "body": "A single loop, efficient and deterministic. Very nice."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439412174, "post_id": 31830671, "comment_id": 51856672, "body": "This solution loops <code>362880*9</code> times, my EDIT solution loops <code>362880</code> times,  and yet yours seems more popular: <a href=\"http://stackoverflow.com/a/31928246/2963099\">stackoverflow.com/a/31928246/2963099</a>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439431598, "post_id": 31830671, "comment_id": 51862535, "body": "@GlennTeitelbaum: Why would the loop count matter? I didn&#39;t read the original question to specifically want <i>all possible combinations</i>, but rather a method to generate the values in a controlled fashion. The seed approach has been useful to me in practice before. Anyway, I added some code to show how I&#39;d generate all the permutations; basically the same underlying logic, but a bit different implementation to keep everything as simple as possible."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1439467546, "post_id": 31830671, "comment_id": 51879972, "body": "@paxdiablo: The asker in a comment to the original question that <i>&quot;no, I&#39;m not including zero&quot;</i>. I assumed everybody would actually read the question and the comments to it, but apparently I was wrong. I&#39;ll edit my answer to make it clear to even those who dislike reading."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439917064, "post_id": 31830671, "comment_id": 52052889, "body": "@NominalAnimal the trimmed version is much more concise, and performant"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 47, "last_activity_date": 1440616393, "last_edit_date": 1440616393, "creation_date": 1438772578, "answer_id": 31830671, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31830671#31830671", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>This is a pretty typical example of a problem involving <a href=\"https://en.wikipedia.org/wiki/Combinatorics\" rel=\"nofollow\">combinatorics</a>.</p>\n\n<p>There are exactly 9\u22c58\u22c57\u22c56\u22c55\u22c54\u22c53\u22c52\u22c51 = 9! = 362880 nine-digit decimal numbers, where each digit occurs exactly once, and zero is not used at all. This is because there are nine possibilities for the first digit, eight for the second, and so on, since each digit is used exactly once.</p>\n\n<p>So, you can easily write a function, that takes in the <em>seed</em>, 0 \u2264 <em>seed</em> &lt; 362880, that returns one of the unique combinations, such that each combination corresponds to exactly one seed. For example,</p>\n\n<pre><code>unsigned int unique9(unsigned int seed)\n{\n    unsigned char digit[9] = { 1U, 2U, 3U, 4U, 5U, 6U, 7U, 8U, 9U };\n    unsigned int  result = 0U;\n    unsigned int  n = 9U;\n    while (n) {\n        const unsigned int i = seed % n;\n        seed = seed / n;\n        result = 10U * result + digit[i];\n        digit[i] = digit[--n];\n    }\n    return result;\n}\n</code></pre>\n\n<p>The <code>digit</code> array is initialized to the set of nine thus far unused digits. <code>i</code> indicates the index to that array, so that <code>digit[i]</code> is the actual digit used. Since the digit is used, it is replaced by the last digit in the array, and the size of the array <code>n</code> is reduced by one.</p>\n\n<p>Some example results:</p>\n\n<pre><code>unique9(0U) == 198765432U\nunique9(1U) == 218765439U\nunique9(10U) == 291765438U\nunique9(1000U) == 287915436U\nunique9(362878U) == 897654321U\nunique9(362879U) == 987654321U\n</code></pre>\n\n<p>The odd order for the results is because the digits in the <code>digit</code> array switch places.</p>\n\n<p>Edited 20150826: If you want the <code>index</code>th combination (say, in lexicographic order), you can use the following approach:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\ntypedef unsigned long  permutation_t;\n\nint permutation(char *const        buffer,\n                const char *const  digits,\n                const size_t       length,\n                permutation_t      index)\n{\n    permutation_t  scale = 1;\n    size_t         i, d;\n\n    if (!buffer || !digits || length &lt; 1)\n        return errno = EINVAL;\n\n    for (i = 2; i &lt;= length; i++) {\n        const permutation_t newscale = scale * (permutation_t)i;\n        if ((permutation_t)(newscale / (permutation_t)i) != scale)\n            return errno = EMSGSIZE;\n        scale = newscale;\n    }\n    if (index &gt;= scale)\n        return errno = ENOENT;\n\n    memmove(buffer, digits, length);\n    buffer[length] = '\\0';\n\n    for (i = 0; i &lt; length - 1; i++) {\n        scale /= (permutation_t)(length - i);\n        d = index / scale;\n        index %= scale;\n        if (d &gt; 0) {\n            const char c = buffer[i + d];\n            memmove(buffer + i + 1, buffer + i, d);\n            buffer[i] = c;\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you specify <code>digits</code> in increasing order, and <code>0 &lt;= index &lt; length!</code>, then <code>buffer</code> will be the permutation having <code>index</code>th smallest value. For example, if <code>digits=\"1234\"</code> and <code>length=4</code>, then <code>index=0</code> will yield <code>buffer=\"1234\"</code>, <code>index=1</code> will yield <code>buffer=\"1243\"</code>, and so on, until <code>index=23</code> will yield <code>buffer=\"4321\"</code>.</p>\n\n<p>The above implementation is definitely not optimized in any way. The initial loop is to calculate the factorial, with overflow detection. One way to avoid that to use a temporary <code>size_t [length]</code> array, and fill it in from right to left similar to <code>unique9()</code> further above; then, the performance should be similar to <code>unique9()</code> further above, except for the <code>memmove()</code>s this needs (instead of swaps).</p>\n\n<hr>\n\n<p>This approach is generic. For example, if you wanted to create <em>N</em>-character words where each character is unique, and/or uses only specific characters, the same approach will yield an efficient solution.</p>\n\n<p>First, split the task into steps.</p>\n\n<p>Above, we have <code>n</code> unused digits left in the <code>digit[]</code> array, and we can use <code>seed</code> to pick the next unused digit.</p>\n\n<p><code>i = seed % n;</code> sets <code>i</code> to the remainder (<em>modulus</em>) if <code>seed</code> were to be divided by <code>n</code>. Thus, is an integer <code>i</code> between 0 and <code>n-1</code> inclusive, <code>0 \u2264 i &lt; n</code>.</p>\n\n<p>To remove the part of <code>seed</code> we used to decide this, we do the division: <code>seed = seed / n;</code>.</p>\n\n<p>Next, we add the digit to our result. Because the result is an integer, we can just add a new decimal digit position (by multiplying the result by ten), and add the digit to the least significant place (as the new rightmost digit), using <code>result = result * 10 + digit[i]</code>. In C, the <code>U</code> at the end of the numeric constant just tells the compiler that the constant is unsigned (integer). (The others are <code>L</code> for <code>long</code>, <code>UL</code> for <code>unsigned long</code>, and if the compiler supports them, <code>LL</code> for <code>long long</code>, and <code>ULL</code> for <code>unsigned long long</code>.)</p>\n\n<p>If we were constructing a string, we'd just put <code>digit[i]</code> to the next position in the char array, and increment the position. (To make it into a string, just remember to put an end-of-string nul character, <code>'\\0'</code>, at the very end.)</p>\n\n<p>Next, because the digits are unique, we must remove <code>digit[i]</code> from the <code>digit[]</code> array. I do this by replacing <code>digit[i]</code> by the last digit in the array, <code>digit[n-1]</code>, and decrementing the number of digits left in the array, <code>n--</code>, essentially trimming off the last digit from it. All this is done by using <code>digit[i] = digit[--n];</code> which is exactly equivalent to</p>\n\n<pre><code>digit[i] = digit[n - 1];\nn = n - 1;\n</code></pre>\n\n<p>At this point, if <code>n</code> is still greater than zero, we can add another digit, simply by repeating the procedure.</p>\n\n<p>If we do not want to use all digits, we could just use a separate counter (or compare <code>n</code> to <code>n - digits_to_use</code>).</p>\n\n<p>For example, to construct a word using any of the 26 ASCII lowercase letters using each letter at most once, we could use</p>\n\n<pre><code>char *construct_word(char *const str, size_t len, size_t seed)\n{\n    char letter[26] = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i',\n                        'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r',\n                        's', 't', 'u', 'v', 'w', 'x', 'y', 'z' };\n    size_t n = 26;\n\n    if (str == NULL || len &lt; 1)\n        return NULL;\n\n    while (len &gt; 1 &amp;&amp; n &gt; 0) {\n        const size_t i = seed % n;\n        seed /= n;     /* seed = seed / n; */\n        str[len++] = letter[i];\n        letter[i] = letter[--n];\n    }\n    str[len] = '\\0';\n\n    return str;\n}\n</code></pre>\n\n<p>Call the function with <code>str</code> pointing to a character array of at least <code>len</code> characters, with <code>seed</code> being the number that identifies the combination, and it'll fill <code>str</code> with a string of up to 26 or <code>len-1</code> characters (whichever is less) where each lowercase letter occurs at most once.</p>\n\n<p>If the approach does not seem clear to you, please ask: I'd very much like to try and clarify.</p>\n\n<p>You see, an amazing amount of resources (not just electricity, but also human user time) is lost by using inefficient algorithms, just because it is <em>easier</em> to write slow, inefficient code, rather than actually solve the problem at hand in an efficient manner. We waste money and time that way. When the <em>correct</em> solution is as simple as in this case -- and like I said, this extends to a large set of combinatorial problems as is --, I'd rather see the programmers take the fifteen minutes to learn it, and apply it whenever useful, rather than see the waste propagated and expanded upon.</p>\n\n<hr>\n\n<p>Many answers and comments revolve around generating all those combinations (and counting them). I personally don't see much use in that, because the set is well known already. In practice, you typically want to generate e.g. small subsets -- pairs, triplets, or larger sets -- or sets of subsets that fulfill some criteria; for example, you might wish to generate ten pairs of such numbers, with each nine-digit number used twice, but not in a single pair. My seed approach allows that easily; instead of decimal representation, you work with the consecutive seed values instead (0 to 362879, inclusive).</p>\n\n<p>That said, it is straightforward to generate (and print) all <a href=\"https://en.wikipedia.org/wiki/Permutation\" rel=\"nofollow\">permutations</a> of a given string in C:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nunsigned long permutations(char str[], size_t len)\n{\n    if (len--&gt;1) {\n        const char    o = str[len];\n        unsigned long n = 0U;\n        size_t        i;\n        for (i = 0; i &lt;= len; i++) {\n            const char c = str[i];\n            str[i]   = o;\n            str[len] = c;\n            n += permutations(str, len);\n            str[i]   = c;\n            str[len] = o;\n        }\n        return n;\n    } else {\n        /* Print and count this permutation. */\n        puts(str);\n        return 1U;\n    }\n}\n\nint main(void)\n{\n    char          s[10] = \"123456789\";\n    unsigned long result;\n\n    result = permutations(s, 9);\n    fflush(stdout);\n    fprintf(stderr, \"%lu unique permutations\\n\", result);\n    fflush(stderr);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The permutation function is recursive, but its maximum recursion depth is the string length. The total number of calls to the function is <em>a</em>(<em>N</em>), where <em>N</em> is the length of the string, and <em>a</em>(<em>n</em>)=<em>n</em>\u22c5<em>a</em>(<em>n</em>-1)+1 (sequence <a href=\"http://oeis.org/A002627\" rel=\"nofollow\">A002627</a>), 623530 calls in this particular case. In general, <em>a</em>(<em>n</em>)\u2264(1-<em>e</em>)<em>n</em>!, i.e. <em>a</em>(<i>n</i>)&lt;1.7183<i>n</i>!, so the number of calls is <em>O</em>(<em>N</em>!), factorial with respect to number of items permuted. The loop body is iterated one less time compared to the calls, 623529 times here.</p>\n\n<p>The logic is rather simple, using the same array approach as in the first code snippet, except that this time the \"trimmed off\" part of the array is actually used to store the permuted string. In other words, we swap each character still left with the next character to be trimemd off (or prepended to the final string), do the recursive call, and restore the two characters. Because each modification is undone after each recursive call, the string in the buffer is the same after the call as it was before. Just as if it was never modified in the first place.</p>\n\n<p>The above implementation does assume one-byte characters (and would not work with e.g. multibyte UTF-8 sequences correctly). If Unicode characters, or characters in some other multibyte character set, are to be used, then wide characters should be used instead. Other than the type change, and changing the function to print the string, no other changes are needed.</p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 5200533, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LrL0t.jpg?s=128&g=1", "display_name": "biswasJUCSE", "link": "https://stackoverflow.com/users/5200533/biswasjucse"}, "is_accepted": false, "score": 6, "last_activity_date": 1438968074, "last_edit_date": 1438968074, "creation_date": 1438967685, "answer_id": 31883241, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31883241#31883241", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Check this code.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n\n    //it can be done by recursion\n\n    void func(int *flag, int *num, int n){  //take 'n' to count the number of digits\n        int i;\n        if(n==9){                           //if n=9 then print the number\n            for(i=0;i&lt;n;i++)\n                printf(\"%d\",num[i]);\n            printf(\"\\n\");\n        }\n        for(i=1;i&lt;=9;i++){\n\n            //put the digits into the array one by one and send if for next level\n\n            if(flag[i-1]==0){\n                num[n]=i;\n                flag[i-1]=1;\n                func(flag,num,n+1);\n                flag[i-1]=0;\n            }\n        }\n    }\n\n    //here is the MAIN function\n    main(){\n\n        int i,flag[9],num[9];\n        for(i=0;i&lt;9;i++)        //take a flag to avoid repetition of digits in a number\n            flag[i]=0;          //initialize the flags with 0\n\n        func(flag,num,0);       //call the function\n\n        return 0;\n    }\n</code></pre>\n\n<p>If you have any question feel free to ask. </p>\n"}, {"comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439572065, "post_id": 31885811, "comment_id": 51932904, "body": "Well done. You code/solution is miles ahead of competition."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439577163, "post_id": 31885811, "comment_id": 51935550, "body": "Using simple arrays to get the fastest and most readable answer, now compare that to other solutions. I wonder, did you figure out the procedure yourself?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439582740, "post_id": 31885811, "comment_id": 51938207, "body": "@this Yup, I wanted a way to generate permutations without recursion. So I started by printing the permutations for short arrays (using recursion), and then analyzed the output to find the pattern. Turns out  that the pattern is simple enough that I was able to translate it into code."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439690449, "post_id": 31885811, "comment_id": 51963632, "body": "@this have you timed the different answers?"}, {"owner": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439703051, "post_id": 31885811, "comment_id": 51965482, "body": "There&#39;s a variant of this where only two digits are swapped: 1; 12, 21; 123, 213, 231, 132, 312, 321; 1234, 2134, 2314, 1324, 3124, 3214, 3241, 3142, 1342, 2341, 2143, 1243, 1423, 2413, 2431, 1432, 3412, 3421, 4321, 4312, 4132, 4231, 4213, 4123.  The pattern of swaps is left as an exercise to the reader.  This is probably the single fastest method to generate all permutations, as long as order is irrelevant."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439710806, "post_id": 31885811, "comment_id": 51966943, "body": "@Speed8ump Don&#39;t troll. There isn&#39;t any pattern there."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439712882, "post_id": 31885811, "comment_id": 51967348, "body": "@GlennTeitelbaum Not all of them. Any recursion or unknown modulo compared to simple loops is automatically slower so you don&#39;t even have to measure it."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439727826, "post_id": 31885811, "comment_id": 51970954, "body": "@this mine is not recursive, how did it compare?"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 1, "creation_date": 1439732627, "post_id": 31885811, "comment_id": 51972274, "body": "@GlennTeitelbaum You don&#39;t have a non-recursive solution. I would love to test it though. Please write a version with a public prototype: <code>( int array[], int length )</code>"}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439736883, "post_id": 31885811, "comment_id": 51973716, "body": "@this doesn&#39;t that assume this solution, the problem is all 9 digit numbers, no parameters, my solution depends on avoiding recursion with a known depth"}, {"owner": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439736986, "post_id": 31885811, "comment_id": 51973746, "body": "Of course there&#39;s a pattern.  I generated it following an algorithm.  Look at the 123s and remove all the 3s.  You&#39;ll see three repetitions of the 12s, forward, backwards and forwards again.  The 1234s are the same, remove the fours and you&#39;ll see repetitions of the 123s.  This reminds me of Greycode, but it&#39;s a bit more complex."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439737989, "post_id": 31885811, "comment_id": 51974104, "body": "@GlennTeitelbaum Now this solution makes less assumptions, it works for any amount of digits, even more than 9, negative values, and non-consecutive values."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439738452, "post_id": 31885811, "comment_id": 51974266, "body": "@Speed8ump I don&#39;t buy it. You don&#39;t have the algorithm, you just think you do."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439837046, "post_id": 31885811, "comment_id": 52013879, "body": "@Speed8ump I&#39;ve added some information about swap counts to my answer. I agree that it may be possible to cycle through all of the permutations with only one swap each. However, the challenge is to determine which two numbers need to be swapped, based on the current state of the array. If you are able to solve that problem, I would interesting in seeing your solution."}, {"owner": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439840002, "post_id": 31885811, "comment_id": 52015366, "body": "after thinking about it I figured this must be a well established thing, and, lo and behold it is: <a href=\"http://rosettacode.org/wiki/Permutations_by_swapping\" rel=\"nofollow noreferrer\">Permutations by Swapping</a> and particularly <a href=\"http://www.cs.princeton.edu/~rs/talks/perms.pdf\" rel=\"nofollow noreferrer\">this</a> analysis of Heap&#39;s algorithm."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439913280, "post_id": 31885811, "comment_id": 52050722, "body": "@this the version in EDIT by my testing is much faster than my iterative with the the interface you asked and much faster than this.   Because it is unrolled, the whole function can be analysed unlike true recursion, and that makes it fast at the cost of flexibility"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439917389, "post_id": 31885811, "comment_id": 52053083, "body": "@GlennTeitelbaum I couldn&#39;t find any function your wrote with the prototype: int array[], int length."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439945378, "post_id": 31885811, "comment_id": 52065556, "body": "@GlennTeitelbaum: There is an interesting sequence that begins with 0 1 0 1 0 2 0 1 0 1 0 2 0 1 0 1 0 3 0 1 0 1 0 2 0 1 0 1 0 2 0 1 0 1 0 3 0 1 0 1 0 2 0 1 0 2 0 1 0 1 0 3 0 1 0 1 0 2 0 1 0 2 0 1 0 3 0 1 0 1 0 3 0 2 0 1 0 3 0 1 0 1 0 3 0 2 0 3 0 1 0 1 0 2 0 1 0 2 0 1 0 1 0 2 0 1 0 1 0 2 0 3 0 2 0 1 0 1 0 4. For an N-character string, you get all permutations if you perform the first N!-1 swaps indicated by that sequence. 0=swap first pair, 1=swap second pair, 2=swap third pair, and so on. The pairs are always consecutive, and the first pair is swapped every other time. [continued]"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 1, "creation_date": 1439945481, "post_id": 31885811, "comment_id": 52065585, "body": "@GlennTeitelbaum: The sequence allows constant-time permutation of any string without recursion at all. You only need to perform the pairwise swaps in the order of that sequence. (Thus, exactly one swap per permutation, thus constant time. Generating all permutations is of course O(N!), taking exactly N!-1 swaps.) I do not know if this sequence has a name."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1439952672, "post_id": 31885811, "comment_id": 52067324, "body": "@NominalAnimal Sounds similar to a De Bruijn sequence"}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 14, "last_activity_date": 1520410353, "last_edit_date": 1520410353, "creation_date": 1438977972, "answer_id": 31885811, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31885811#31885811", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Given an array of numbers, it is possible to generate the next permutation of those numbers with a fairly simple function (let's call that function <code>nextPermutation</code>). If the array starts with all the numbers in sorted order, then the <code>nextPermutation</code> function will generate all of the possible permutations in ascending order. For example, this code</p>\n\n<pre><code>int main( void )\n{\n    int array[] = { 1, 2, 3 };\n    int length = sizeof(array) / sizeof(int);\n\n    printf( \"%d\\n\", arrayToInt(array, length) );        // show the initial array\n    while ( nextPermutation(array, length) )\n        printf( \"%d\\n\", arrayToInt(array, length) );    // show the permutations\n}\n</code></pre>\n\n<p>will generate this output</p>\n\n<pre><code>123\n132\n213\n231\n312\n321\n</code></pre>\n\n<p>and if you change the <code>array</code> to </p>\n\n<pre><code>int array[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n</code></pre>\n\n<p>then the code will generate and display all 362880 permutations of those nine numbers in ascending order.</p>\n\n<hr>\n\n<p>The <code>nextPermutation</code> function has three steps</p>\n\n<ol>\n<li>starting from the end of the array, find the first number (call it <code>x</code>) that is followed by a larger number</li>\n<li>starting from the end of the array, find the first number (call it <code>y</code>) that is larger than <code>x</code>, and swap <code>x</code> and <code>y</code></li>\n<li><code>y</code> is now where <code>x</code> was, and all of the numbers to the right of <code>y</code> are in descending order, swap them so that they are in ascending order</li>\n</ol>\n\n<p>Let me illustrate with an example. Suppose the array has the numbers in this order</p>\n\n<pre><code>1 9 5 4 8 7 6 3 2\n</code></pre>\n\n<p>The first step would find the <code>4</code>. Since <code>8 7 6 3 2</code> are in descending order, the <code>4</code> is the first number (starting from the end of the array) that is followed by a larger number.</p>\n\n<p>The second step would find the <code>6</code>, since the <code>6</code> is the first number (starting from the end of the array) that is larger than <code>4</code>. After swapping <code>4</code> and <code>6</code> the array looks like this</p>\n\n<pre><code>1 9 5 6 8 7 4 3 2\n</code></pre>\n\n<p>Notice that all the numbers to the right of the <code>6</code> are in descending order. Swapping the <code>6</code> and the <code>4</code> didn't change the fact that the last five numbers in the array are in descending order.</p>\n\n<p>The last step is to swap the numbers after the <code>6</code> so that they are all in ascending order. Since we know that the numbers are in descending order, all we need to do is swap the <code>8</code> with the <code>2</code>, and the <code>7</code> with the <code>3</code>. The resulting array is</p>\n\n<pre><code>1 9 5 6 2 3 4 7 8\n</code></pre>\n\n<p>So given any permutation of the numbers, the function will find the next permutation just by swapping a few numbers. The only exception is the last permutation which has all the numbers in reverse order, i.e. <code>9 8 7 6 5 4 3 2 1</code>.  In that case, step 1 fails, and the function returns 0 to indicate that there are no more permutations. </p>\n\n<hr>\n\n<p>So here's the <code>nextPermutation</code> function</p>\n\n<pre><code>int nextPermutation( int array[], int length )\n{\n    int i, j, temp;\n\n    // starting from the end of the array, find the first number (call it 'x')\n    // that is followed by a larger number\n    for ( i = length - 2; i &gt;= 0; i-- )\n        if ( array[i] &lt; array[i+1] )\n            break;\n\n    // if no such number was found (all the number are in reverse order)\n    // then there are no more permutations\n    if ( i &lt; 0 )\n        return 0;\n\n    // starting from the end of the array, find the first number (call it 'y')\n    // that is larger than 'x', and swap 'x' and 'y'\n    for ( j = length - 1; j &gt; i; j-- )\n        if ( array[j] &gt; array[i] )\n        {\n            temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n            break;\n        }\n\n    // 'y' is now where 'x' was, and all of the numbers to the right of 'y'\n    // are in descending order, swap them so that they are in ascending order\n    for ( i++, j = length - 1; j &gt; i; i++, j-- )\n    {\n        temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p>Note that the <code>nextPermutation</code> function works for any array of numbers (the numbers don't need to be sequential). So for example, if the starting array is</p>\n\n<pre><code>int array[] = { 2, 3, 7, 9 };\n</code></pre>\n\n<p>then the <code>nextPermutation</code> function will find all of the permutations of 2,3,7 and 9.</p>\n\n<hr>\n\n<p>Just for completeness, here's the <code>arrayToInt</code> function that was used in the <code>main</code> function. This function is only for demonstration purposes. It assumes that the array only contains single digit numbers, and doesn't bother to check for overflows. It'll work for a 9 digit number provided that an <code>int</code> is at least 32-bits.</p>\n\n<pre><code>int arrayToInt( int array[], int length )\n{\n    int result = 0;\n    for ( int i = 0; i &lt; length; i++ )\n        result = result * 10 + array[i];\n    return result;\n}\n</code></pre>\n\n<hr>\n\n<p>Since there seems to be some interest in the performance of this algorithm, here are some numbers:</p>\n\n<pre>\nlength= 2 perms=        2 (swaps=        1 ratio=0.500) time=   0.000msec\nlength= 3 perms=        6 (swaps=        7 ratio=1.167) time=   0.000msec\nlength= 4 perms=       24 (swaps=       34 ratio=1.417) time=   0.000msec\nlength= 5 perms=      120 (swaps=      182 ratio=1.517) time=   0.001msec\nlength= 6 perms=      720 (swaps=     1107 ratio=1.538) time=   0.004msec\nlength= 7 perms=     5040 (swaps=     7773 ratio=1.542) time=   0.025msec\nlength= 8 perms=    40320 (swaps=    62212 ratio=1.543) time=   0.198msec\nlength= 9 perms=   362880 (swaps=   559948 ratio=1.543) time=   1.782msec\nlength=10 perms=  3628800 (swaps=  5599525 ratio=1.543) time=  16.031msec\nlength=11 perms= 39916800 (swaps= 61594835 ratio=1.543) time= 170.862msec\nlength=12 perms=479001600 (swaps=739138086 ratio=1.543) time=2036.578msec\n</pre>\n\n<p>The CPU for the test was a 2.5Ghz Intel i5 processor. The algorithm generates about 200 million permutations per second, and takes less than 2 milliseconds to generate all of the permutations of 9 numbers.</p>\n\n<p>Also of interest is that, on average, the algorithm only requires about 1.5 swaps per permutation. Half the time, the algorithm just swaps the last two numbers in the array. In 11 of 24 cases, the algorithm does two swaps. So it's only in 1 of 24 cases that the algorithm needs more than two swaps.</p>\n\n<p>Finally, I tried the algorithm with the following two arrays</p>\n\n<pre><code>int array[] = { 1, 2, 2, 3 };          // generates 12 permutations\nint array[] = { 1, 2, 2, 3, 3, 3, 4 }; // generates 420 permutations\n</code></pre>\n\n<p>The number of permutations is as expected and the output appeared to be correct, so it seems that the algorithm also works if the numbers are not unique.</p>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 4045048, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/788a12c9a4cb50583611b5fd22edaf7c?s=128&d=identicon&r=PG&f=1", "display_name": "MiJo", "link": "https://stackoverflow.com/users/4045048/mijo"}, "is_accepted": false, "score": 5, "last_activity_date": 1439182755, "last_edit_date": 1439182755, "creation_date": 1439079594, "answer_id": 31899829, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31899829#31899829", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Here is a bit ugly but very fast solution using nested <code>for loops</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\n#define NINE_FACTORIAL  362880\n\nint main(void) {\n\n  //array where numbers would be saved\n  uint32_t* unique_numbers = malloc( NINE_FACTORIAL * sizeof(uint32_t) );\n  if( !unique_numbers ) {\n    printf(\"Could not allocate memory for the Unique Numbers array.\\n\");\n    exit(1);\n  }\n\n  uint32_t n = 0;\n  int a,b,c,d,e,f,g,h,i;\n\n  for(a = 1; a &lt; 10; a++) {\n    for(b = 1; b &lt; 10; b++) {\n    if (b == a) continue;\n\n      for(c = 1; c &lt; 10; c++) {\n      if(c==a || c==b) continue;\n\n        for(d = 1; d &lt; 10; d++) {\n        if(d==a || d==b || d==c) continue;\n\n          for(e = 1; e &lt; 10; e++) {\n          if(e==a || e==b || e==c || e==d) continue;\n\n            for(f = 1; f &lt; 10; f++) {\n            if (f==a || f==b || f==c || f==d || f==e) \n                                continue;\n\n              for(g = 1; g &lt; 10; g++) {\n              if(g==a || g==b || g==c || g==d || g==e \n                      || g==f) continue;\n\n                for(h = 1; h &lt; 10; h++) {\n                if (h==a || h==b || h==c || h==d || \n                 h==e || h==f || h==g) continue;\n\n                  for(i = 1; i &lt; 10; i++) {\n                  if (i==a || i==b || i==c || i==d || \n                  i==e || i==f || i==g || i==h) continue;\n\n                  // print the number or\n                  // store the number in the array\n                  unique_numbers[n++] = a * 100000000\n                        + b * 10000000\n                        + c * 1000000\n                        + d * 100000\n                        + e * 10000\n                        + f * 1000\n                        + g * 100\n                        + h * 10\n                        + i;\n\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n\n  // do stuff with unique_numbers array\n  // n contains the number of elements\n\n  free(unique_numbers);\n\n  return 0;\n}\n</code></pre>\n\n<p>Same thing using some macros.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\n#define l_(b,n,c,p,f) { int i; for(i = 1; i &lt; 10; i++) {            \\\n      int j,r=0; for(j=0;j&lt;p;j++){if(i == c[j]){r=1;break;}}        \\\n      if(r) continue; c[p] = i; f   } }\n\n#define l_8(b,n,c,p) {                                              \\\n    int i; for(i=1; i&lt; 10; i++) {int j, r=0;                        \\\n      for(j=0; j&lt;p; j++) {if(i == c[j]) {r = 1; break;}}            \\\n      if(r)continue; b[n++] = c[0] * 100000000  + c[1] * 10000000   \\\n            + c[2] * 1000000 + c[3] * 100000 + c[4] * 10000         \\\n            + c[5] * 1000 + c[6] * 100 + c[7] * 10 + i; } }\n\n#define l_7(b,n,c,p) l_(b,n,c,p, l_8(b,n,c,8))\n#define l_6(b,n,c,p) l_(b,n,c,p, l_7(b,n,c,7))\n#define l_5(b,n,c,p) l_(b,n,c,p, l_6(b,n,c,6))\n#define l_4(b,n,c,p) l_(b,n,c,p, l_5(b,n,c,5))\n#define l_3(b,n,c,p) l_(b,n,c,p, l_4(b,n,c,4))\n#define l_2(b,n,c,p) l_(b,n,c,p, l_3(b,n,c,3))\n#define l_1(b,n,c,p) l_(b,n,c,p, l_2(b,n,c,2))\n\n#define get_unique_numbers(b,n,c) do {int i; for(i=1; i&lt;10; i++) { \\\n      c[0] = i; l_1(b,n,c,1) } } while(0)\n\n\n#define NINE_FACTORIAL  362880\n\nint main(void) {\n\n  //array where numbers would be saved\n  uint32_t* unique_numbers = malloc( NINE_FACTORIAL * sizeof(uint32_t) );\n  if( !unique_numbers ) {\n    printf(\"Could not allocate memory for the Unique Numbers array.\\n\");\n    exit(1);\n  }\n\n  int n = 0;\n  int current_number[8] = {0};\n\n  get_unique_numbers(unique_numbers, n, current_number);\n\n\n  // do stuff with unique_numbers array\n  // NINE_FACTORIAL is the number of elements\n\n\n  free(unique_numbers);\n\n  return 0;\n}\n</code></pre>\n\n<p>I am sure there are better ways to write those macros, but that is what I could think of.</p>\n"}, {"comments": [{"owner": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439506563, "post_id": 31928246, "comment_id": 51902835, "body": "The comments under the question indicate zero is not a valid digit in the result.  Only 1-9 are desired."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "edited": false, "score": 0, "creation_date": 1439737375, "post_id": 31928246, "comment_id": 51973886, "body": "Added ifdef for including 0s"}], "tags": [], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "is_accepted": false, "score": 5, "last_activity_date": 1439914879, "last_edit_date": 1495535271, "creation_date": 1439237333, "answer_id": 31928246, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31928246#31928246", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p><strong>EDIT:</strong>  After further analysis, more recursion unrolling and only iterating on set bits resulted in significant improvement,  in my testing <strong>roughly FIVE times as fast</strong>.  This was tested with <code>OUTPUT</code> <strong>UNSET</strong> to compare algorithm speed not console output, start point is <code>uniq_digits9</code> :</p>\n\n<pre><code>int counter=0;\nint reps=0;\n\nvoid show(int x)\n{\n#ifdef OUTPUT\n    printf(\"%d\\n\", x);\n#else\n    counter+=x;\n    ++reps;\n#endif\n}\n\nint bit_val(unsigned int v)\n{\n  static const int MultiplyDeBruijnBitPosition2[32] =\n  {\n    0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8,\n    31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9\n  };\n  return MultiplyDeBruijnBitPosition2[(unsigned int)(v * 0x077CB531U) &gt;&gt; 27];\n}\n\nvoid uniq_digits1(int prefix, unsigned int used) {\n  show(prefix*10+bit_val(~used));\n}\n\nvoid uniq_digits2(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits1(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits3(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits2(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits4(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits3(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits5(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits4(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits6(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits5(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits7(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits6(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits8(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits7(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits9() {\n  unsigned int used=~((1&lt;&lt;10)-1); // set all bits except 0-9\n#ifndef INCLUDE_ZEROS\n  used |= 1;\n#endif\n  for (int i = 1; i &lt; 10; i++) {\n    unsigned int bit=1&lt;&lt;i;\n    uniq_digits8(i,used|bit);\n  }\n}\n</code></pre>\n\n<p><strong>Brief explanation</strong>:</p>\n\n<p>There are 9 digits and the first cannot start with zero, so the first digit can be from 1 to 9, the rest can be 0 to 9</p>\n\n<p>If we take a number, X and multiply it by 10, it shifts one place over.  So, 5 becomes 50.  Add a number, say 3 to make 53, and then multiply by 10 to get 520, and then add 2, and so on for all 9 digits.</p>\n\n<p>Now some storage is needed to keep track of what digits were used so they aren't repeated.  10 true/false variables could be used: <code>used_0_p</code>, <code>used_1_P</code> , ....  But, that is inefficient, so they can be placed in an array: <code>used_p[10]</code>.  But then it would need to be copied every time before making a call the next place so it can reset it for the next digit, otherwise once all places are filled the first time the array would be all true and no other combinations could be calculated.</p>\n\n<p>But, there is a better way.  Use bits of an <code>int</code> as the array.  <code>X &amp; 1</code> for the first, <code>X &amp; 2</code>, <code>X &amp; 4</code>, <code>X &amp; 8</code>, etc.   This sequence can be represented as <code>(1&lt;&lt;X)</code> or take the first bit and shift it over X times.</p>\n\n<p><code>&amp;</code> is used to test bits, <code>|</code> is used to set them.  In each loop we test if the bit was used <code>(1&lt;&lt;i)&amp;used</code> and skip if it was.  At the next place we shift the digits for each digit <code>prefix*10+i</code> and set that digit as used <code>used|(1&lt;&lt;i)</code></p>\n\n<p><strong>Explanation of looping in the EDIT</strong></p>\n\n<p>The loop calculates <code>Y &amp; (Y-1)</code> which zeroes the lowest set bit.  By taking the original and subtracting the result the difference is the lowest bit.  This will loop only as many times as there are bits: 3,265,920 times instead of 900,000,000 times.  Switching from used to unused is just the <code>~</code> operator, and since setting is more efficient than unsetting, it made sense to flip</p>\n\n<p>Going from power of two to its log2 was taken from: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#IntegerLog\" rel=\"nofollow noreferrer\">https://graphics.stanford.edu/~seander/bithacks.html#IntegerLog</a> .  This site also details the loop mechanism: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#DetermineIfPowerOf2\" rel=\"nofollow noreferrer\">https://graphics.stanford.edu/~seander/bithacks.html#DetermineIfPowerOf2</a></p>\n\n<p><strong>Moving original to the bottom:</strong></p>\n\n<p>This is too long for a comment, but <a href=\"https://stackoverflow.com/a/31828305/2963099\">This answer</a> can be make somewhat faster by removing the zero handling from the function: ( See edit for fastest answer )</p>\n\n<pre><code>void uniq_digits(int places, int prefix, int used) {\n  if (!places) {\n    printf(\"%d\\n\", prefix);\n    return;\n  }\n  --places;\n  int base=prefix*10;\n  for (int i = 0; i &lt; 10; i++)\n  {\n    if ((1&lt;&lt;i)&amp;used) continue;\n    uniq_digits(places, base+i, used|(1&lt;&lt;i));\n  }\n}\n\nint main(int argc, char**argv) {\n  const int num_digits=9;\n\n  // unroll top level to avoid if for every iteration\n  for (int i = 1; i &lt; 10; i++)\n  {\n    uniq_digits(num_digits-1, i, 1 &lt;&lt; i);\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": false, "score": 7, "last_activity_date": 1439528379, "last_edit_date": 1439528379, "creation_date": 1439441408, "answer_id": 31979728, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31979728#31979728", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>There are many long chunks of code here. Better to think more and code less.</p>\n\n<p>We would like to generate each possibility exactly once with no wasted effort. It turns out this is possible with only a constant amount of effort per digit emitted.</p>\n\n<p>How would you do this without code? Get 10 cards and write the digits 0 to 9 on them.  Draw a row of 9 squares on your tabletop. Pick a card. Put it in the first square, another in the second, etc. When you've picked 9, you have your first number. Now remove the last card and replace it with each possible alternative. (There's only 1 in this case.) Each time all squares are filled, you have another number. When you've done all alternatives for the last square, do it for the last 2. Repeat with the last 3, etc., until you have considered all alternatives for all boxes. </p>\n\n<p>Writing a succinct program to do this is about choosing simple data structures.  Use an array of characters for the row of 9 square.  </p>\n\n<p>Use another array for the set of cards. To remove an element from the set of size N stored in an array A[0 .. N-1], we use an old trick.  Say the element you want to remove is A[I]. Save the value of A[I] off to the side. Then copy the last element A[N-1] \"down,\" overwriting A[I]. The new set is A[0 .. N-2]. This works fine because we don't care about order in a set.</p>\n\n<p>The rest is to use recursive thinking to enumerate all possible alternatives. If I know how to find all selections from a character set of size M into a string of size N, then to get an algorithm, just select each possible character for the first string position, then recur to select the rest of the N-1 characters from the remaining set of size M-1. We get a nice 12-line function: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// Select each element from the given set into buf[pos], then recur\n// to select the rest into pos+1... until the buffer is full, when\n// we print it.\nvoid select(char *buf, int pos, int len, char *set, int n_elts) {\n  if (pos &gt;= len)\n    printf(\"%.*s\\n\", len, buf);  // print the full buffer\n  else\n    for (int i = 0; i &lt; n_elts; i++) {\n      buf[pos] = set[i];         // select set[i] into buf[pos]\n      set[i] = set[n_elts - 1];  // remove set[i] from the set\n      select(buf, pos + 1, len, set, n_elts - 1); // recur to pick the rest\n      set[n_elts - 1] = set[i];  // undo for next iteration\n      set[i] = buf[pos];\n    }\n}\n\nint main(void) {\n  char buf[9], set[] = \"0123456789\";\n  select(buf, 0, 9, set, 10); // select 9 characters from a set of 10\n  return 0;\n}\n</code></pre>\n\n<p>You didn't mention whether it's okay to put a zero in the first position.  Suppose it isn't. Since we understand the algorithm well, it's easy to avoid selecting zero into the first position. Just skip that possibility by observing that <code>!pos</code> in C has the value 1 if pos is 0 and 0. If you don't like this slightly obscure idiom, try <code>(pos == 0 ? 1 : 0)</code> as a more readable replacement:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid select(char *buf, int pos, int len, char *set, int n_elts) {\n  if (pos &gt;= len)\n    printf(\"%.*s\\n\", len, buf);\n  else\n    for (int i = !pos; i &lt; n_elts; i++) {\n      buf[pos] = set[i];\n      set[i] = set[n_elts - 1];\n      select(buf, pos + 1, len, set, n_elts - 1);\n      set[n_elts - 1] = set[i];\n      set[i] = buf[pos];\n    }\n}\n\nint main(void) {\n  char buf[9], set[] = \"0123456789\";\n  select(buf, 0, 9, set, 10);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 5, "last_activity_date": 1439468021, "creation_date": 1439468021, "answer_id": 31987936, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31987936#31987936", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>A simple way is to create an array with nine distinct values, shuffle it, and print the shuffled array.   Repeat as many times as needed.   For example, using the standard <code>rand()</code> function as a basis for shuffling ...</p>\n\n<pre><code>#include &lt;stdlib.h&gt;     /*  for srand() and rand */\n#include &lt;time.h&gt;       /*  for time() */\n#include &lt;stdio.h&gt;      \n\n#define SIZE 10     /*   size of working array.  There are 10 numeric digits, so ....   */\n#define LENGTH 9    /*  number of digits we want to output.  Must not exceed SIZE */\n#define NUMBER 12   /*  number of LENGTH digit values we want to output */\n\nvoid shuffle(char *buffer, int size)\n{\n     int i;\n     char temp;\n     for (i=size-1; i&gt;0; --i)\n     {\n          /*  not best way to get a random value of j in [0, size-1] but\n               sufficient for illustrative purposes\n          */\n          int j = rand()%size;\n          /* swap buffer[i] and buffer[j] */\n          temp = buffer[i];    \n          buffer[i] = buffer[j];\n          buffer[j] = temp;\n     }\n}\n\nvoid printout(char *buffer, int length)\n{\n      /*  this assumes SIZE &lt;= 10 and length &lt;= SIZE */\n\n      int i;\n      for (i = 0; i &lt; length; ++i)\n          printf(\"%d\", (int)buffer[i]);\n      printf(\"\\n\");\n}\n\nint main()\n{\n     char buffer[SIZE];\n     int i;\n     srand((unsigned)time(NULL));   /*  seed for rand(), once and only once */\n\n     for (i = 0; i &lt; SIZE; ++i)  buffer[i] = (char)i;  /*  initialise buffer */\n\n     for (i = 0; i &lt; NUMBER; ++i)\n     {\n         /*  keep shuffling until first value in buffer is non-zero */\n\n         do shuffle(buffer, SIZE); while (buffer[0] == 0);\n         printout(buffer, LENGTH);\n     }\n     return 0;\n}\n</code></pre>\n\n<p>This prints a number of lines to <code>stdout</code>, each with 9 unique digits.   Note that this does not prevent duplicates.</p>\n"}, {"tags": [], "owner": {"reputation": 1217, "user_id": 2544218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d24277226f4c86d39c2b63c3ea590dc?s=128&d=identicon&r=PG", "display_name": "Speed8ump", "link": "https://stackoverflow.com/users/2544218/speed8ump"}, "is_accepted": false, "score": 6, "last_activity_date": 1500684985, "last_edit_date": 1500684985, "creation_date": 1439506128, "answer_id": 31999666, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/31999666#31999666", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>I recommend Nominal Animal's <a href=\"https://stackoverflow.com/a/31830671/2544218\">answer</a>, but <strong>if you are only generating this value so you can print it out</strong> you can eliminate some of the work and at the same time get a more generic routine using the same method:</p>\n\n<pre><code>char *shuffle( char *digit, int digits, int count, unsigned int seed )\n{\n    //optional: do some validation on digit string\n    //  ASSERT(digits == strlen(digit));\n    //optional: validate seed value is reasonable\n    //  for(unsigned int badseed=1, x=digits, y=count; y &gt; 0; x--, y--)\n    //      badseed *= x;\n    //  ASSERT(seed &lt; badseed);\n\n    char *work = digit;\n    while(count--)\n    {\n        int i = seed % digits;\n        seed /= digits--;\n        unsigned char selectedDigit = work[i];\n        work[i] = work[0];\n        work[0] = selectedDigit;\n        work++;\n    }\n    work[0] = 0;\n\n    //seed should be zero here, else the seed contained extra information\n    return digit;\n}\n</code></pre>\n\n<p>This method is destructive on the digits passed in, which don't actually have to be numeric, or unique for that matter.</p>\n\n<p>On the off chance that you want the output values generated in sorted increasing order that's a little more work:</p>\n\n<pre><code>char *shuffle_ordered( char *digit, int digits, int count, unsigned int seed )\n{\n    char *work = digit;\n    int doneDigits = 0; \n    while(doneDigits &lt; count)\n    {\n        int i = seed % digits;\n        seed /= digits--;\n        unsigned char selectedDigit = work[i];\n        //move completed digits plus digits preceeding selectedDigit over one place\n        memmove(digit+1,digit,doneDigits+i);\n        digit[0] = selectedDigit;\n        work++;\n    }\n    work[0] = 0;\n\n    //seed should be zero here, else the seed contained extra information\n    return digit;\n}\n</code></pre>\n\n<p>In either case it's called like this:</p>\n\n<pre><code>for(unsigned int seed = 0; seed &lt; 16*15*14; ++seed)\n{\n    char work[] = \"0123456789ABCDEF\";\n    printf(\"seed=%d -&gt; %s\\n\",shuffle_ordered(work,16,3,seed));\n}\n</code></pre>\n\n<p>This should print out an ordered list of three digit hex values with no duplicated digits:</p>\n\n<pre><code>seed 0 -&gt; 012\nseed 1 -&gt; 013\n...\nseed 3358 -&gt; FEC\nseed 3359 -&gt; FED\n</code></pre>\n\n<p>I don't know what you are actually <em>doing</em> with these carefully crafted sequences of digits.  If some poor sustaining engineer is going to have to come along behind you to fix some bug, I recommend the ordered version, as it is <em>way</em> easier for a human to convert seed from/to sequence value.</p>\n"}, {"comments": [{"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1439845946, "post_id": 32059779, "comment_id": 52018367, "body": "@this here is the generic iterative version, its twice as slow as my other one, but here you go"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439923104, "post_id": 32059779, "comment_id": 52056429, "body": "You are comparing apples to oranges. Your function outputs every possible value in a single call, while every other solution outputs a single value. How did you not notice that. Even ignoring that I seriously doubt your measuring methodology is correct."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439923219, "post_id": 32059779, "comment_id": 52056501, "body": "Write a function that takes an array and its length like the nextPermutation function, and writes the next value into the array and returns. <i>Then</i> try comparing."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439929233, "post_id": 32059779, "comment_id": 52059840, "body": "@this the OP was generate all, the recursive generates all, the swap had code to generate all, the nextPermutation had a main that generated all.  And if you doubt my methods, run it.   There was no requirement to generate the next, clever as that was.  My unrolled recursion is still the fastest at solving the OP&#39;s requirement, using templates and <code>std::bitset</code> in C++ I could go faster, but this is C"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439930053, "post_id": 32059779, "comment_id": 52060290, "body": "Your functions might be the fastest, by your measurements, but you see, if you defined OUTPUT, the function doesn&#39;t return or write any value anywhere. The result is just, lost. Hmm, other functions seem to return a result every time they are called. This and the fact that every other function could be modified so it calculates every value internally instead of being called in a loop incurring extra overhead, make you entry invalid. Bye."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439953555, "post_id": 32059779, "comment_id": 52067561, "body": "@this well, thank you nonetheless,  i enjoyed the challenge of converting the algo to iterative and optimizing it"}], "tags": [], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "is_accepted": false, "score": 0, "last_activity_date": 1440432711, "last_edit_date": 1495542806, "creation_date": 1439845877, "answer_id": 32059779, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/32059779#32059779", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>iterative version that uses bits extensively</p>\n\n<p>note that <code>array</code> can be changed to any type, and set in any order\nthis will \"count\"the digits in given order</p>\n\n<p>For more explaination look at my first answer (which is less flexible but much faster) <a href=\"https://stackoverflow.com/a/31928246/2963099\">https://stackoverflow.com/a/31928246/2963099</a></p>\n\n<p>In order to make it iterative, arrays were needed to keep state at each level</p>\n\n<p>This also went though quite a bit of optimization for places the optimizer couldn't figure out</p>\n\n<pre><code>int bit_val(unsigned int v) {\n  static const int MultiplyDeBruijnBitPosition2[32] = {\n    0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8,\n    31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9\n  };\n  return MultiplyDeBruijnBitPosition2[(unsigned int)(v * 0x077CB531U) &gt;&gt; 27];\n}\n\nvoid uniq_digits(const int array[], const int length) {\n  unsigned int unused[length-1];                    // unused prior\n  unsigned int combos[length-1];                    // digits untried\n  int digit[length];                                // printable digit\n  int mult[length];                                 // faster calcs\n  mult[length-1]=1;                                 // start at 1\n  for (int i = length-2; i &gt;= 0; --i)\n     mult[i]=mult[i+1]*10;                          // store multiplier\n  unused[0]=combos[0]=((1&lt;&lt;(length))-1);            // set all bits 0-length\n  int depth=0;                                      // start at top\n  digit[0]=0;                                       // start at 0\n  while(1) {\n    if (combos[depth]) {                            // if bits left\n      unsigned int avail=combos[depth];             // save old\n      combos[depth]=avail &amp; (avail-1);              // remove lowest bit\n      unsigned int bit=avail-combos[depth];         // get lowest bit\n      digit[depth+1]=digit[depth]+mult[depth]*array[bit_val(bit)]; // get associated digit\n      unsigned int rest=unused[depth]&amp;(~bit);       // all remaining\n      depth++;                                      // go to next digit\n      if (depth!=length-1) {                        // not at bottom\n        unused[depth]=combos[depth]=rest;           // try remaining\n      } else {\n        show(digit[depth]+array[bit_val(rest)]);    // print it\n        depth--;                                    // stay on same level\n      }\n    } else {\n      depth--;                                      // go back up a level\n      if (depth &lt; 0)\n        break;                                      // all done\n    }\n  }\n}\n</code></pre>\n\n<p>Some timings using just 1 to 9 with 1000 reps:</p>\n\n<ul>\n<li>15.00s Recursive (modified to count 1 to 9) from <a href=\"https://stackoverflow.com/a/31828305/2963099\">https://stackoverflow.com/a/31828305/2963099</a></li>\n<li>3.53s swap recursion from <a href=\"https://stackoverflow.com/a/31830671/2963099\">https://stackoverflow.com/a/31830671/2963099</a></li>\n<li>2.74s nextPermutation version (<a href=\"https://stackoverflow.com/a/31885811/2963099\">https://stackoverflow.com/a/31885811/2963099</a>)</li>\n<li>2.34s <strong>This Solution</strong></li>\n<li>1.66s unrolled recursive version in EDIT from <a href=\"https://stackoverflow.com/a/31928246/2963099\">https://stackoverflow.com/a/31928246/2963099</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1439855264, "last_edit_date": 1439855264, "creation_date": 1439853254, "answer_id": 32061192, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/32061192#32061192", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>A bit late to the party, but very fast (30 ms here) ...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define COUNT 9\n\n   /* this buffer is global. intentionally.\n   ** It occupies (part of) one cache slot,\n   ** and any reference to it is a constant\n   */\nchar ten[COUNT+1] ;\n\nunsigned rec(unsigned pos, unsigned mask);\nint main(void)\n{\nunsigned res;\n\nten[COUNT] = 0;\n\nres = rec(0, (1u &lt;&lt; COUNT)-1);\nfprintf(stderr, \"Res=%u\\n\", res);\n\nreturn 0;\n}\n\n/* recursive function: consume the mask of available numbers\n** until none is left.\n** return value is the number of generated permutations.\n*/\nunsigned rec(unsigned pos, unsigned mask)\n{\nunsigned bit, res = 0;\n\nif (!mask) { puts(ten); return 1; }\n\nfor (bit=0; bit &lt; COUNT; bit++) {\n        if (! (mask &amp; (1u &lt;&lt;bit)) ) continue;\n        ten[pos] = '1' + bit;\n        res += rec(pos+1, mask &amp; ~(1u &lt;&lt;bit));\n        }\nreturn res;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1795, "user_id": 168235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10dacc51aadd2f2eef6ad5f3bd377f6e?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/168235/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1570668989, "creation_date": 1570668989, "answer_id": 58314022, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/58314022#58314022", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>Make a list with 10 elements with values 0-9. Pull random elements out by rand() /w current length of list, until you have the number of digits you want.</p>\n"}], "owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9004, "favorite_count": 7, "answer_count": 16, "score": 33, "last_activity_date": 1570668989, "creation_date": 1438761840, "last_edit_date": 1439535047, "question_id": 31826746, "link": "https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits", "title": "Trying to generate 9 digit numbers with each unique digits", "body": "<p>I am trying obtain 9 digit numbers that all have unique digits. My first approach seems a bit too complex and would be tedious to write.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int indx;\n    int num;\n    int d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n    for(indx = 123456789; indx &lt;= 987654321; indx++)\n    {\n        num = indx;\n        d1 = num % 10;\n        d2 = ( num / 10 ) % 10;\n        d3 = ( num / 100 ) % 10;\n        d4 = ( num / 1000 ) % 10;\n        d5 = ( num / 10000 ) % 10;\n        d6 = ( num / 100000 ) % 10;\n        d7 = ( num / 1000000 ) % 10;\n        d8 = ( num / 10000000 ) % 10;\n        d9 = ( num / 100000000 ) % 10;\n        if( d1 != d2 &amp;&amp; d1 != d3 &amp;&amp; d1 != d3 &amp;&amp; d1 != d4 &amp;&amp; d1 != d5\n                &amp;&amp; d1 != d6 &amp;&amp; d1 != d7 &amp;&amp; d1 != d8 &amp;&amp; d1 != d9 )\n        {\n            printf(\"%d\\n\", num);\n        }\n    }\n}\n</code></pre>\n\n<p>That is just comparing the first number to the rest. I would have to do that many more to compare the other numbers. Is there a better way to do this?</p>\n"}, {"tags": ["c", "timer", "bit-manipulation", "integer-overflow"], "answers": [{"comments": [{"owner": {"reputation": 11713, "user_id": 43534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6b36958661c789010d95b27325154828?s=128&d=identicon&r=PG", "display_name": "Miral", "link": "https://stackoverflow.com/users/43534/miral"}, "edited": false, "score": 0, "creation_date": 1438827436, "post_id": 31828331, "comment_id": 51612732, "body": "This does seem like a simpler solution for this particular case.  There&#39;s another case where I&#39;m not sure rescaling makes sense, but I need to think about it some more."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 0, "last_activity_date": 1438766390, "creation_date": 1438766390, "answer_id": 31828331, "question_id": 31826430, "link": "https://stackoverflow.com/questions/31826430/timer-wraparound-with-flexible-bit-sizes/31828331#31828331", "title": "Timer wraparound with flexible bit sizes", "body": "<p>Instead of sign-extending, you could multiply up so that the full range becomes the same size as your arithmetic type.  In other words, use fixed-point arithmetic to fill the integer.  In your case, with <code>uint32_t</code>, that would look like</p>\n\n<pre><code>uint32_t start = GetSomePlatformSpecificTimer();\nRunSomeOtherCode();\nuint32_t end = GetSomePlatformSpecificTimer();\nstart &lt;&lt;= 32-COUNTER_WIDTH;\nend &lt;&lt;= 32-COUNTER_WIDTH;\nuint32_t platformTicksTakenByCode = end - start;\nplatformTicksTakenByCode &gt;&gt;= 32-COUNTER_WIDTH;\n</code></pre>\n\n<p>Obviously you'd want to encapsulate that arithmetic:</p>\n\n<pre><code>const uint32_t start = GetScaledTimer();\nRunSomeOtherCode();\nconst uint32_t end = GetScaledTimer();\nconst uint32_t platformTicksTakenByCode = RescaleDuration(end - start);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>uint32_t GetScaledTimer()\n{\n    return GetSomePlatformSpecificTimer() &lt;&lt; 32-COUNTER_WIDTH;\n}\n</code></pre>\n\n\n\n<pre><code>uint32_t RescaleDuration(uint32_t d)\n{\n    return d &gt;&gt; 32-COUNTER_WIDTH;\n}\n</code></pre>\n\n<p>You then have much the same behaviour as for your full-width timer, and the same option to use signed types if necessary.</p>\n"}], "owner": {"reputation": 11713, "user_id": 43534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6b36958661c789010d95b27325154828?s=128&d=identicon&r=PG", "display_name": "Miral", "link": "https://stackoverflow.com/users/43534/miral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 31828331, "answer_count": 1, "score": 1, "last_activity_date": 1438766390, "creation_date": 1438760870, "question_id": 31826430, "link": "https://stackoverflow.com/questions/31826430/timer-wraparound-with-flexible-bit-sizes", "title": "Timer wraparound with flexible bit sizes", "body": "<p>Given a counter/timer that increases and simply wraps at a given bit width, a well-known solution to the problem of finding the difference between two captured values of the counter (where the counter might have wrapped between the two points) is simply to perform unsigned subtraction on the counter (possibly then interpreting the result as signed if it's not known which one is larger).</p>\n\n<p>For example given a 32-bit timer, code like this can be used to determine the length of time some code takes to run:</p>\n\n<pre><code>uint32_t start = GetSomePlatformSpecificTimer();\nRunSomeOtherCode();\nuint32_t end = GetSomePlatformSpecificTimer();\nuint32_t platformTicksTakenByCode = end - start;\n</code></pre>\n\n<p>Or alternatively to check if some time limit has been reached:</p>\n\n<pre><code>uint32_t limit = GetSomePlatformSpecificTimer() + timeLimitInTicks;\nwhile (true)\n{\n    bool finished = DoSomethingSmall();\n    if (finished)\n        break;\n    if ((int32_t)(GetSomePlatformSpecificTimer() - limit) &gt;= 0)\n        return ERROR_TIMEOUT;\n}\n</code></pre>\n\n<p>This works great if the timer is known to be 32 bits wide.  It also can be adjusted for 16-bit or 8-bit timers by changing the types used.</p>\n\n<p>Is there a similarly simple way to do the same thing where the timer size does not match a type size?  For example, a 24-bit timer, or an 18-bit timer.</p>\n\n<p>Assume that the bit size is &lt;= 32 and is specified by a <code>#define COUNTER_WIDTH</code> in some external header (and might change).</p>\n\n<p>Is the best solution to sign-extend the two counter values from <code>COUNTER_WIDTH</code> to 32-bits and then use the code above?  I can see that possibly working for the FF -> 00 rollover but I think it would break the 7F -> 80 rollover, so presumably there would have to be some sort of check for this (perhaps sign-extending if the values are near zero and zero-extending if the values are near the midpoint).  I think this also means that the difference between two values should be no more than a quarter of the counter range, otherwise it could cause issues.</p>\n\n<p>Or is there a better way to do this?</p>\n"}, {"tags": ["c", "hash"], "comments": [{"owner": {"reputation": 119, "user_id": 4836821, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/652e14091cee473e76a793be4d367e6f?s=128&d=identicon&r=PG&f=1", "display_name": "pri", "link": "https://stackoverflow.com/users/4836821/pri"}, "edited": false, "score": 0, "creation_date": 1438765366, "post_id": 31826188, "comment_id": 51578917, "body": "Why down votes for the same. I was expecting the resolution of this problem. I know what are the pitfalls of  current approach so was just expecting proper solution of this issue not down votes."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4836821, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/652e14091cee473e76a793be4d367e6f?s=128&d=identicon&r=PG&f=1", "display_name": "pri", "link": "https://stackoverflow.com/users/4836821/pri"}, "edited": false, "score": 0, "creation_date": 1438765156, "post_id": 31826317, "comment_id": 51578777, "body": "do you have any algorithm for the same?"}, {"owner": {"reputation": 5625, "user_id": 1280800, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5d0ca17ee5bcb1e20ae1a2188e35a48?s=128&d=identicon&r=PG", "display_name": "dreamzor", "link": "https://stackoverflow.com/users/1280800/dreamzor"}, "reply_to_user": {"reputation": 119, "user_id": 4836821, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/652e14091cee473e76a793be4d367e6f?s=128&d=identicon&r=PG&f=1", "display_name": "pri", "link": "https://stackoverflow.com/users/4836821/pri"}, "edited": false, "score": 0, "creation_date": 1438765953, "post_id": 31826317, "comment_id": 51579284, "body": "@pri yes, as I said, you can use any hashing algorithm, e.g. <a href=\"http://stackoverflow.com/questions/7666509/hash-function-for-string\" title=\"hash function for string\">stackoverflow.com/questions/7666509/hash-function-for-string</a> but sort a string before you calculate the hash"}, {"owner": {"reputation": 119, "user_id": 4836821, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/652e14091cee473e76a793be4d367e6f?s=128&d=identicon&r=PG&f=1", "display_name": "pri", "link": "https://stackoverflow.com/users/4836821/pri"}, "edited": false, "score": 0, "creation_date": 1438766322, "post_id": 31826317, "comment_id": 51579524, "body": "humm. I was aware of this link but didn&#39;t think about the sorting , thanks for your help. +1 from my end as well to you."}], "tags": [], "owner": {"reputation": 5625, "user_id": 1280800, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5d0ca17ee5bcb1e20ae1a2188e35a48?s=128&d=identicon&r=PG", "display_name": "dreamzor", "link": "https://stackoverflow.com/users/1280800/dreamzor"}, "is_accepted": false, "score": 3, "last_activity_date": 1481490529, "last_edit_date": 1481490529, "creation_date": 1438760572, "answer_id": 31826317, "question_id": 31826188, "link": "https://stackoverflow.com/questions/31826188/hash-function-is-not-giving-desire-results/31826317#31826317", "title": "Hash function is not giving desire results", "body": "<p>Yes, it can, because your hash function is very poorly written - it returns your constant 'size' variable modulo sum of all the string characters. </p>\n\n<p>The problem is that the sum of ASCII codes 'c' + 'a' + 't' is equal to the 'j' + 'a' + 'm' (equal to 312) so you are getting the same value for your 'hash'.</p>\n\n<p>You could use a 'normal' (e.g. polynomial) hash function for your anagram table, but with sorted strings - that would be the easiest approach. </p>\n\n<p>For another method, you can calculate a number of appearances of each letter in the string (a histogram) and hash (or just store as is) them instead. </p>\n\n<p>I recommend you to do some research on this topic as it's a very common task. </p>\n\n<p>Also, you could just sort the strings and let <code>unordered_set&lt;string&gt;</code> do the job for you.</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 4836821, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/652e14091cee473e76a793be4d367e6f?s=128&d=identicon&r=PG&f=1", "display_name": "pri", "link": "https://stackoverflow.com/users/4836821/pri"}, "edited": false, "score": 0, "creation_date": 1438762770, "post_id": 31826414, "comment_id": 51577244, "body": "Thanks for your observation.currently there is no use of that hash_val in my implementation. I also had also performed  the sum of ASCII values and found that sum will be same for cat and jam but is there anyway to improve this algorithm as i don&#39;t want to perform additional check for  similar sum values in order to make them different."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1438761388, "last_edit_date": 1438761388, "creation_date": 1438760836, "answer_id": 31826414, "question_id": 31826188, "link": "https://stackoverflow.com/questions/31826188/hash-function-is-not-giving-desire-results/31826414#31826414", "title": "Hash function is not giving desire results", "body": "<blockquote>\n  <p><em>but same can't be expected with jam.</em></p>\n</blockquote>\n\n<p>Well, there you go wrong. Let's see your algo. What you're doing is basically summing up the ASCII value of the elements of the strings, and returning the modulus result of a fixed value taken with respect to the sum.</p>\n\n<p>To elaborate, as per the <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">ASCII table</a>,</p>\n\n<pre><code>j == 106\na == 97\nm == 109\n</code></pre>\n\n<p>and</p>\n\n<pre><code>c == 99\na == 97\nt == 116\n</code></pre>\n\n<p>Both the words end up having a sum result of <code>312</code>. \nNow as per your algo, </p>\n\n<pre><code> 4542 % 312\n</code></pre>\n\n<p>is suppose to give a <em>constant</em> value, right? That is what it is giving.</p>\n\n<p>Now, don't be <code>\"sad\"</code>, as </p>\n\n<pre><code>s == 115\na ==97\nd == 100\n</code></pre>\n\n<p>that also comes up with <code>312</code>.</p>\n\n<p>That said, I see you have a local variable <code>unsigned long hash_val = 5381;</code> defined inside your function, but used nowhere.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1482085298, "last_edit_date": 1482085298, "creation_date": 1481502906, "answer_id": 41092740, "question_id": 31826188, "link": "https://stackoverflow.com/questions/31826188/hash-function-is-not-giving-desire-results/41092740#41092740", "title": "Hash function is not giving desire results", "body": "<p>Your hash function has many problems:</p>\n\n<ul>\n<li>The <code>for (j = 0; j &lt; 9; j++)</code> loop is completely useless.</li>\n<li>It is utterly inadequate to allocate memory for a copy of the string, and to forget to free it! Just use the string directly.</li>\n<li>You summing method has too many easy collisions, as you diagnosed: anagrams produce the same sum, but also many simple words.  You should shuffle the sum between before each character value is added.</li>\n<li><code>return size % sum;</code> should really be <code>return sum % size;</code> so the return value can be used as an index into the hash table of size <code>size</code>. As a matter of fact, <code>size % sum</code> would invoke undefined behavior if <code>sum</code> happened to compute to <code>0</code>, which would require a very long string (>16MB) but is possible.</li>\n</ul>\n\n<p>Here is an improved hash function:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n\n// constraints: str != NULL, size &gt; 0\nsize_t hash(const char *str, size_t size) {\n    size_t sum = 5381;  // initial salt\n    while (*str != '\\0') {\n        // rotate the current sum 2 places to the left\n        sum = (sum &lt;&lt; 2) | (sum &gt;&gt; (CHAR_BIT * sizeof(sum) - 2));\n        // add the next character value\n        sum += (unsigned char)*str++;\n    }\n    return sum % size;\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 4836821, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/652e14091cee473e76a793be4d367e6f?s=128&d=identicon&r=PG&f=1", "display_name": "pri", "link": "https://stackoverflow.com/users/4836821/pri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1482085298, "creation_date": 1438760173, "last_edit_date": 1481502123, "question_id": 31826188, "link": "https://stackoverflow.com/questions/31826188/hash-function-is-not-giving-desire-results", "title": "Hash function is not giving desire results", "body": "<p>I am implementing hash function in order to check the anagrams, but I am not getting desired output. Could you suggest what went wrong?</p>\n\n<p>Output:</p>\n\n<pre><code>key[148]:val[joy]\nkey[174]:val[jam]\nkey[294]:val[paula]\nkey[13]:val[ulrich]\nkey[174]:val[cat]\nkey[174]:val[act]\nkey[148]:val[yoj]\nkey[265]:val[vij]\nkey[265]:val[jiv]\n</code></pre>\n\n<p>Here key value <code>174</code> is fine for strings <code>act</code> and <code>cat</code> (anagrams) but same can't be expected with <code>jam</code>.</p>\n\n<p>Below is the code snippet.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nunsigned long hash(char *str, size_t size) {\n    unsigned long hash_val = 5381;\n    unsigned long sum = 0;\n    char *val;\n    int i, j;\n    for (j = 0; j &lt; 9; j++) {\n        val = malloc(strlen(str) + 1);\n        memset(val, '\\0', strlen(str) + 1);\n        strcpy(val, str);\n\n        for (i = 0; val[i] != '\\0'; i++) {\n            sum = sum + val[i];\n        }\n        return size % sum;\n    }\n}\n\nint main() {\n   int i;\n   char *str[9] = { \"joy\", \"jam\", \"paula\", \"ulrich\",\"cat\", \"act\",\"yoj\", \"vij\", \"jiv\" };\n   unsigned long key;\n   size_t size = 4542; // it may be anything just for test it is being used\n   for (i = 0; i &lt; 9; i++) {\n        key = hash(str[i], size);\n        printf(\"\\nkey[%ld]:val[%s]\", key, str[i]);\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "gtk", "gnome", "gdk", "gnome-shell-extensions"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 2, "creation_date": 1438781087, "post_id": 31826035, "comment_id": 51589543, "body": "You are likely going to need to run the GTK+ event loop for this to work. Try changing your <code>g_usleep()</code> loop to a <code>g_timeout_add()</code>-based <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#G-SOURCE-CONTINUE:CAPS\" rel=\"nofollow noreferrer\">loop</a>, using <code>gtk_init()</code> instead of <code>gdk_init()</code>, and running <code>gtk_main()</code>."}, {"owner": {"reputation": 787, "user_id": 724406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuYFV.png?s=128&g=1", "display_name": "user.dz", "link": "https://stackoverflow.com/users/724406/user-dz"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1438841861, "post_id": 31826035, "comment_id": 51616976, "body": "@andlabs , you method works perfectly. Could you please post an answer. I&#39;ll wait little bit longer to accept it, because I suppose there some <code>gdk</code> level functions called by <code>gtk_main</code> loop to pull/update events from X to gdk event queue. If those functions exist, I can fix my original code and keep it using pure GDK."}, {"owner": {"reputation": 787, "user_id": 724406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuYFV.png?s=128&g=1", "display_name": "user.dz", "link": "https://stackoverflow.com/users/724406/user-dz"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1438985253, "post_id": 31826035, "comment_id": 51692189, "body": "@andlabs , you deserve the credit and reputation of the answer. I&#39;ve wrote one just to document my solution. If you copy that comment as answer I will accept it."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1438992590, "post_id": 31826035, "comment_id": 51694165, "body": "Ah, I was going to investigate how to use GDK standalone, but you figured that out yourself, so I guess that works."}], "answers": [{"tags": [], "owner": {"reputation": 787, "user_id": 724406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuYFV.png?s=128&g=1", "display_name": "user.dz", "link": "https://stackoverflow.com/users/724406/user-dz"}, "is_accepted": false, "score": 2, "last_activity_date": 1438984669, "creation_date": 1438984669, "answer_id": 31887232, "question_id": 31826035, "link": "https://stackoverflow.com/questions/31826035/getting-keyboard-modifiers-state-using-gnome-libs-gdk-fetches-initial-state-on/31887232#31887232", "title": "Getting keyboard modifiers state using Gnome libs (GDK) fetches initial state only", "body": "<ul>\n<li><p>Indeed, I need an event loop as andlabs said in his comment. His suggestion to use GTK <code>gtk_init()</code> &amp; <code>gtk_main()</code> works perfectly.</p>\n\n<pre><code>/*\n * compiling: gcc `pkg-config --cflags gtk+-3.0` -o gtk_xkbmod3 gtk_xkbmod3.c `pkg-config --libs gtk+-3.0`\n */\n\n#include &lt;gtk/gtk.h&gt;\n\nstatic void update(GdkKeymap * kmap) {\n    guint state;\n    state = gdk_keymap_get_modifier_state(kmap);\n    g_printf(\"%i\\n\", state);\n}\n\nint main (int argc, char **argv) {\n\n    gtk_init(&amp;argc, &amp;argv);\n\n    GdkKeymap * kmap;\n    kmap = gdk_keymap_get_default();\n\n    g_timeout_add_seconds(1, (GSourceFunc) update, kmap);\n\n    gtk_main();\n\n}\n</code></pre></li>\n<li><p>I could also use GDK with GLib GMainLoop.</p>\n\n<pre><code>/*\n * compiling: gcc `pkg-config --cflags gdk-3.0` -o gdk_xkbmod4 gdk_xkbmod4.c `pkg-config --libs gdk-3.0`\n */\n\n#include &lt;gdk/gdk.h&gt;\n\nGMainLoop *mainloop;\n\nstatic void update(GdkKeymap * kmap) {\n    guint state;\n    state = gdk_keymap_get_modifier_state(kmap);\n    g_printf(\"%i\\n\", state);\n}\n\nint main (int argc, char **argv) {    \n\n    gdk_init(&amp;argc, &amp;argv);\n\n    GdkKeymap * kmap;\n    kmap = gdk_keymap_get_default();\n\n    g_timeout_add_seconds(1, (GSourceFunc) update, kmap);\n\n    mainloop = g_main_loop_new(g_main_context_default(), FALSE);\n    g_main_loop_run(mainloop);    \n}\n</code></pre></li>\n</ul>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><a href=\"http://xfc.xfce.org/docs/howto/html/mainloop.html#ML10\" rel=\"nofollow\">Xfce Foundation Classes: The Main Event Loop</a></li>\n<li><a href=\"http://www.gtkforums.com/viewtopic.php?t=3998\" rel=\"nofollow\">GTK+ Forums: GDK + GLib main loop</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "is_accepted": true, "score": 2, "last_activity_date": 1438992914, "creation_date": 1438992914, "answer_id": 31888314, "question_id": 31826035, "link": "https://stackoverflow.com/questions/31826035/getting-keyboard-modifiers-state-using-gnome-libs-gdk-fetches-initial-state-on/31888314#31888314", "title": "Getting keyboard modifiers state using Gnome libs (GDK) fetches initial state only", "body": "<p>You are going to need to run the GTK+ event loop for this to work. The event loop is part of GLib's <em>main loop</em>. When you call <code>gtk_main()</code>, this main loop is run. I don't know if it polls for events or has events pushed to it, but it won't ask for the keyboard state on the fly like you were trying to do.</p>\n\n<p>The easiest way to set up GDK is to do it via GTK+ by using <code>gtk_init()</code> and <code>gtk_main()</code>. You can use GDK on its own, but I don't know how. You seemed to have figured it out, which works.</p>\n\n<p>And instead of calling <code>g_usleep()</code>, which just blocks your program, you can hook a periodic timeout into the main loop. This is done with <code>g_timeout_add()</code>. The function that you pass to <code>g_timeout_add()</code> returns a Boolean value that decides whether the timer should be stopped or not, so you don't have to worry about rescheduling your function, as GLib will do that for you.</p>\n"}], "owner": {"reputation": 787, "user_id": 724406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuYFV.png?s=128&g=1", "display_name": "user.dz", "link": "https://stackoverflow.com/users/724406/user-dz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 1, "accepted_answer_id": 31888314, "answer_count": 2, "score": 3, "last_activity_date": 1604595130, "creation_date": 1438759720, "last_edit_date": 1438762027, "question_id": 31826035, "link": "https://stackoverflow.com/questions/31826035/getting-keyboard-modifiers-state-using-gnome-libs-gdk-fetches-initial-state-on", "title": "Getting keyboard modifiers state using Gnome libs (GDK) fetches initial state only", "body": "<p>I'm trying to get the current keyboard modifiers state through gnome GDK or GTK library in aim to implement an accessibility gnome shell extension that  shows that state.</p>\n\n<p>I know how to get thier state using xlib, but there is not full binding for gnome gjs.</p>\n\n<p>The code below get only the initial state. It does not update state.</p>\n\n<pre><code>/*\n * compiling: gcc `pkg-config --cflags gdk-3.0` -o gdk_mod gdk_mod.c `pkg-config --libs gdk-3.0`\n */\n\n#include &lt;gdk/gdk.h&gt;\n\nint main (int argc, char **argv) {\n\n    gdk_init(&amp;argc, &amp;argv);\n\n    GdkDisplay * disp;\n    disp = gdk_display_open(NULL);\n    if (disp!=NULL) g_printf(\"display connected!\\n\");\n\n    GdkKeymap * kmap;\n    kmap = gdk_keymap_get_for_display(disp);\n\n    guint state;\n    state = gdk_keymap_get_modifier_state(kmap);\n    g_printf(\"mod state: %x\\n\", state);\n\n    while (1) {\n        g_usleep(1000000);\n        //kmap = gdk_keymap_get_for_display(disp);\n        state = gdk_keymap_get_modifier_state(kmap);\n        g_printf(\"mod state: %x\\n\", state);\n    }\n\n}\n</code></pre>\n\n<p>Here an example output with CAPS lock active then inactive but no change:</p>\n\n<pre><code>$ ./gdk_mod \ndisplay found!\nmod state: 2\nmod state: 2\nmod state: 2\nmod state: 2\nmod state: 2\n^C\n</code></pre>\n\n<p>Currently using Kubuntu 15.04.</p>\n\n<p>What's wrong with my code?</p>\n"}, {"tags": ["c++", "c", "linux", "sockets", "iptables"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1438772543, "post_id": 31825841, "comment_id": 51583489, "body": "It seems you are trying to reinvent iptables or a firewall. Why don&#39;t you implement your app logic as iptables rules?"}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1438772924, "post_id": 31825841, "comment_id": 51583735, "body": "Yes, I can handle those packets with help of iptables rules, I understand this. But as I said, I need to modify some of the packets and this is impossible with iptables (encrypt payloads, change src/dst IP etc). That&#39;s why I need to do what I want."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1438773077, "post_id": 31825841, "comment_id": 51583824, "body": "That sounds like a rule for the <code>mangle</code> table actually."}, {"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1438773832, "post_id": 31825841, "comment_id": 51584303, "body": "But with mangle table I&#39;m only can change TOS, TTL, MARK, SECMARK and CONNSECMARK, but not the payloads."}], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "edited": false, "score": 0, "creation_date": 1438772060, "post_id": 31828060, "comment_id": 51583194, "body": "Oops, I missed that moment, maybe because I&#39;m very tired. Thanks. I&#39;ve posted additional information about the &quot;problem&quot;"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1438765649, "creation_date": 1438765649, "answer_id": 31828060, "question_id": 31825841, "link": "https://stackoverflow.com/questions/31825841/redirect-ip-packets-to-my-application-and-then-send-them-forward/31828060#31828060", "title": "Redirect IP-packets to my Application and then send them forward", "body": "<p>The IP protocol simply does not have port numbers. TCP and UDP both offer 65536 ports, but these are unrelated. One is a 2 byte field in the TCP header, the other is a 2 byte field in the UDP header. ICMP (ping) does not have ports at all.</p>\n"}], "owner": {"reputation": 594, "user_id": 2123079, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a8a94c20ffd4bd50f6c15628fc975219?s=128&d=identicon&r=PG", "display_name": "user2123079", "link": "https://stackoverflow.com/users/2123079/user2123079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438772041, "creation_date": 1438759102, "last_edit_date": 1492086987, "question_id": 31825841, "link": "https://stackoverflow.com/questions/31825841/redirect-ip-packets-to-my-application-and-then-send-them-forward", "title": "Redirect IP-packets to my Application and then send them forward", "body": "<p>I want to process IP-packets in my app like encrypting them, remove \"bad\" ones etc if they match some rule (say for example destination ip) and then send to destination. I think I can use for that purpose REDIRECT of iptables. I know that after forwarding packets to my app the original destination address will be overwritten but there is a solution:</p>\n\n<blockquote>\n  <p>iptables overrites the original destination address but it remembers\n  the old one. The application code can then fetch it by asking for a\n  special socket option, SO_ORIGINAL_DST</p>\n\n<pre><code>static int getdestaddr_iptables(int fd, const struct sockaddr_in *client, const struct sockaddr_in *bindaddr, struct sockaddr_in *destaddr)\n{\n        socklen_t socklen = sizeof(*destaddr);\n        int error;\n\n        error = getsockopt(fd, SOL_IP, SO_ORIGINAL_DST, destaddr, &amp;socklen);\n        if (error) {\n                log_errno(LOG_WARNING, \"getsockopt\");\n                return -1;\n        }\n        return 0;\n}\n</code></pre>\n  \n  <p>solution taken from <a href=\"https://unix.stackexchange.com/questions/166692/how-does-a-transparent-socks-proxy-know-which-destination-ip-to-use\">here</a></p>\n</blockquote>\n\n<p>For this purpose I also configured IPv4 forwarding by doing this:</p>\n\n<pre><code>sysctl -w net.ipv4.ip_forward=1\n</code></pre>\n\n<p>But then by trying to set iptable's rule, I've got an error </p>\n\n<p>My rule is: <code>iptables -t nat -A OUTPUT -p ip -j REDIRECT --to-port 666</code></p>\n\n<p>Error: <code>iptables v1.4.21: Need TCP, UDP, SCTP or DCCP with port specification1</code></p>\n\n<p>I'm really newbie in iptables and in such theme in general. Can somebody tell me what I doing wrong? Why it can't do redirect with IP? And is my idea correct? I know also about divert-sockets, but they don't support fragmentation.</p>\n\n<p>UPD1 Let me get straight about my problem: I want my device which is connected to internet be kind of gateway for incoming/outgoing connections. And I want to process those packets with help of my app. Some packets I will modify if they match some rule, other - just send forward without any modifications. And the laptop is \"getting the internet\" with help of that device</p>\n"}, {"tags": ["c", "sockets", "system", "system-calls", "tcp-ip"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1438756094, "post_id": 31824862, "comment_id": 51573401, "body": "What does &quot;received in hexadecimal format&quot; mean?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1438756111, "post_id": 31824862, "comment_id": 51573409, "body": "(Also, I know someone is going to complain about <code>gets(a)</code>, so I&#39;ll pre-emptively point out that it&#39;s clearly not production code)"}, {"owner": {"reputation": 1, "user_id": 4070282, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6357d4e1be908e05ae2941552371946?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4070282/venkat"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1438756294, "post_id": 31824862, "comment_id": 51573497, "body": "Actually very few characters are received  and other null characters are shown, that is the what i have meant as hexadecimal characters."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1438760200, "post_id": 31824862, "comment_id": 51575668, "body": "<code>if (!pBuf)</code> cannot be true, because <code>pBuf</code> is an array."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1438760348, "post_id": 31824862, "comment_id": 51575754, "body": "and you should write the number of the received bytes to the file, not the size of the buffer. You cannot write 50 bytes if you received only 20 bytes."}, {"owner": {"reputation": 1, "user_id": 4070282, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6357d4e1be908e05ae2941552371946?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4070282/venkat"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1438762040, "post_id": 31824862, "comment_id": 51576808, "body": "@mch. can you specify this in coding for better understanding"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1438765018, "post_id": 31824862, "comment_id": 51578675, "body": "<code>write_size = fwrite(pBuf,1,sizeof(pBuf),text);</code> ==&gt; <code>write_size = fwrite(pBuf,1,read_size,text);</code>"}, {"owner": {"reputation": 1, "user_id": 4070282, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6357d4e1be908e05ae2941552371946?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4070282/venkat"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1438765228, "post_id": 31824862, "comment_id": 51578833, "body": "@mch: I have tried with what you have said, but still the output is not displayed in the text file."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1438766049, "post_id": 31824862, "comment_id": 51579355, "body": "you should open the file with <code>&quot;wb&quot;</code>(binary mode), if you want to use <code>fwrite</code>. If you only receive text, you can use <code>fprintf</code>. <a href=\"http://www.cprogramming.com/tutorial/cfileio.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/cfileio.html</a>"}, {"owner": {"reputation": 1, "user_id": 4070282, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6357d4e1be908e05ae2941552371946?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4070282/venkat"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1438766330, "post_id": 31824862, "comment_id": 51579528, "body": "@mch: I have tried with &quot;wb&quot; mode as you told, but still i am facing the same error."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438769726, "post_id": 31824862, "comment_id": 51581653, "body": "&#39;printf(&quot;Socket data:%s \\n&quot;, read_buffer);&#39; tries to printf an uninitialized buffer as a a null-terminated string, but since it only does this if the uninitialized &#39;stat&#39; is lss than 0, I guess one UB covers up the other?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438769916, "post_id": 31824862, "comment_id": 51581761, "body": "When you used your debugger to check the contents, and data length, of what is sent and received, and used wireshark to check what is actually sent/received, was the problem at the sender or receiver?"}, {"owner": {"reputation": 1, "user_id": 4070282, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6357d4e1be908e05ae2941552371946?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4070282/venkat"}, "edited": false, "score": 0, "creation_date": 1438769961, "post_id": 31824862, "comment_id": 51581781, "body": "@ Martin james: Can you kindly put your idea in a piece of code, so that i can check it out.."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438770185, "post_id": 31824862, "comment_id": 51581926, "body": "No.  SO contributors cannot effectively do debugging/testing on a distributed system.  Use your debugger and wireshark to narrow down the problem area.  ATM, you don&#39;t even know if the sender, receiver or both is causing the bug/s.  Do some work."}], "owner": {"reputation": 1, "user_id": 4070282, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a6357d4e1be908e05ae2941552371946?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4070282/venkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438758538, "creation_date": 1438755915, "last_edit_date": 1438758538, "question_id": 31824862, "link": "https://stackoverflow.com/questions/31824862/how-to-send-and-receive-a-text-file-from-c-to-java-using-tcp-ip-protocol", "title": "How to send and receive a text file from C to Java using tcp/ip protocol?", "body": "<p>I am able to send  a text file to java, but when i am receiving the file i am getting the text in hexadecimal format. How to receive the a file without data loss and other malfunctions. I am giving the receiving code for further references.</p>\n\n<pre><code>  int receive_text(int socket)\n  { \n      int buffersize=8192,recv_size=0,read_size = 1, write_size,size; \n      char pBuf[80],a[50],MAXDATASIZE; \n      int errnom,i;\n      FILE *text; \n      size_t rec;\n      text = fopen(\"/home/sosdt009/Desktop/receivednew.txt\", \"a\");  \n      if (text == NULL) \n      {     \n         printf(\"Error has occurred, text file could not be opened \\n\");\n         return -1;\n      }\n\n      //Loop while we have not received the entire file yet\n\n      while(read_size &gt; 0)\n      {\n\n            ioctl(socket, FIONREAD, &amp;buffersize);\n            printf(\"The Buffersize is    :%d\\n\",buffersize);\n            gets(a);\n            printf(\"The size of socket is:%d\\n\",socket);\n            gets(a);\n\n         //We check to see if there is data to be read from the socket \n\n        if (buffersize &gt; 0)\n        {\n            printf(\"Buffersize value is  :%d\\n\", buffersize);\n            gets(a);\n            if (!pBuf)\n            {\n                printf(errnom, \"Memory Error Cannot Allocate!\\n\");\n                gets(a);\n                exit(-1);\n            }\n\n            read_size = recv(socket, sizeof(pBuf),MAXDATASIZE,0);\n            printf(\"Read size value is :%d \\n\",read_size);\n            gets(a);\n            printf(\"Buffersize value is:%d \\n\",pBuf);\n            gets(a);\n            if (read_size &lt; 0)\n            {\n                printf(\"%d\\n\",strerror(errno));\n                printf(\"Data not written to the file:\\n\");\n                gets(a);\n            }\n             /Write the currently read data into our text file\n\n             write_size = fwrite(pBuf,1,sizeof(pBuf),text); \n             printf(\"Write size value is   :%d \\n\",write_size);\n             gets(a);\n             printf(\"Buffer size value is  :%d \\n\",buffersize);\n             gets(a);\n\n             //Increment the total number of bytes read\n            recv_size += read_size;\n            printf(\"Received size value is:%d \\n\",recv_size);\n            gets(a);\n            printf(\"Read size value is    :%d \\n\",read_size);       \n            gets(a);    \n        }\n     }\n    free:\n    fclose(text);\n    close(socket);  \n    printf(\"Text Successfully Received:\\n\");\n    gets(a);\n    return 0;\n}\n</code></pre>\n\n<p>This is the sender function in c</p>\n\n<pre><code> int send_text(int socket)\n { \n     FILE *text;\n     char a[50];\n     int size, read_size, stat, packet_index;\n     char send_buffer[8008], read_buffer[8008];\n     int wrt=0,sock_fd,tsize=0;\n     packet_index = 1;\n     int i=0; \n     text = fopen(\"/home/sosdt009/Desktop/character3.txt\", \"r\"); \n     if (text == NULL)\n     {\n         printf(\"Error Opening text File:\");\n         exit(-1);\n     }  \n     printf(\"Getting text Size:\\n\");\n     gets(a);\n     fseek(text, 0, SEEK_END);\n     size = ftell(text);\n     fseek(text, 0, SEEK_SET);\n     printf(\"Total text size: %d \\n\", size);    \n     gets(a);\n\n     //Send text Size\n\n     printf(\"Sending text Size:\\n\",size);\n     gets(a);\n     send(socket, (void *)&amp;size, sizeof(size), 0);\n\n     while(stat &lt; 0)\n     printf(\"Socket data:%s \\n\", read_buffer); \n     gets(a);   \n     while(size&gt;tsize) \n     {\n\n         //Read from the file into our send buffer\n         read_size = fread(send_buffer,1,sizeof(send_buffer),text);\n         printf(\"The size of send buffer:%c \\n\", sizeof(send_buffer));\n         gets(a);\n         printf(\"The read size value is :%d \\n\", read_size);\n         gets(a);\n\n    //Send data through our socket \n\n    do\n    {           \n        stat = send(socket, send_buffer, read_size, 0);\n        printf(\"The send size value is: %d \\n\", size);\n        gets(a);\n        printf(\"The read size value is: %d \\n\", read_size);\n        gets(a);\n\n    } while (stat &lt; 0); \n    printf(\"Packet %d, sent %d bytes.\\n\", packet_index, read_size);\n    gets(a);\n\n    //packet_index++;\n    //Zero out our send buffer\n\n    tsize = tsize+read_size;\n    printf(\"The tsize value is:%d \\n\",tsize);\n    gets(a);\n        memset(send_buffer,0, sizeof(send_buffer));\n\n    if(read_size&lt;=NULL)\n    {\n        printf(\"The connection is transferred to received text: \\n\");\n        gets(a);\n    }\n    }\n    fclose(text);\n    printf(\"Text successfully send:\\n\");\n     gets(a);\n    return 0;   \n}\n</code></pre>\n"}, {"tags": ["c", "function", "sum", "factorial"], "comments": [{"owner": {"reputation": 348, "user_id": 4120265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6c41l.jpg?s=128&g=1", "display_name": "Rohcana", "link": "https://stackoverflow.com/users/4120265/rohcana"}, "edited": false, "score": 1, "creation_date": 1438752936, "post_id": 31824043, "comment_id": 51572152, "body": "You should really consider indenting your code."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1438753135, "post_id": 31824043, "comment_id": 51572224, "body": "Why do you print the accumulated value only if <code>accumulator == indx</code>? What is the rationale behind this condition? Why not just print <code>accumulator</code> unconditionally?"}, {"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438753295, "post_id": 31824043, "comment_id": 51572274, "body": "I do it to see if its actually adding up the values from the factorial."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1438753336, "post_id": 31824043, "comment_id": 51572290, "body": "Also, please choose better names for your loop variables. Looking at <code>index</code>, <code>indx</code> and <code>idex</code>, I feel like in a <a href=\"https://software.intel.com/en-us/blogs/2007/08/22/you-are-in-a-maze-of-twisty-little-passages-all-alike\" rel=\"nofollow noreferrer\">maze of twisty passages, all different</a>."}, {"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438753396, "post_id": 31824043, "comment_id": 51572309, "body": "it is in the for statement."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1438753421, "post_id": 31824043, "comment_id": 51572319, "body": "If that were the case, you could just forgo the summation and print out <code>indx</code>. But the sum of digit factorials isn&#39;t the same as the number itself, obviously."}, {"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1438754009, "post_id": 31824043, "comment_id": 51572529, "body": "@MOehm by  doing the same thing I did with accumulator? Something like this?   <i>accumulator = 0;             total = accumulator;         accumulator+= total;</i>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1438754250, "post_id": 31824043, "comment_id": 51572616, "body": "Look at Serge&#39;s answer. In general, your program suffers from being too complicated. Loop over the digits, accumulate the factorials and then just print the accumulated value. That&#39;s all. No need for an auxilary array or for that many variables, really."}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438757436, "post_id": 31824370, "comment_id": 51574101, "body": "Thanks for the help I cleaned it up a lot and are trying to turn the factorial equation into a function but can&#39;t."}, {"owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438762470, "post_id": 31824370, "comment_id": 51577066, "body": "Thank you. What exactly do you mean by overflow?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "edited": false, "score": 0, "creation_date": 1438763264, "post_id": 31824370, "comment_id": 51577565, "body": "@RichardFlores: On common architectures, and int is represented with 32 bits, the most significant being the sign bit. 12! is 479001600 or 0x1c8cfc00 in hexdecimal, and 13!  is 6227020800 or 0x17328cc00 in hexa. As it uses more than 32 bits, if you do not test anything, you will get 0x7328cc00 or 1932053504 which is incorrect. If you test, 13*12*..*3 gives 3113510400 or 0xb9946600 which represents a negative value : -1181456896. Welcome to the world of processors :-)"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1438761514, "last_edit_date": 1438761514, "creation_date": 1438753947, "answer_id": 31824370, "question_id": 31824043, "link": "https://stackoverflow.com/questions/31824043/trying-to-turn-the-factorial-part-into-another-function/31824370#31824370", "title": "Trying to turn the factorial part into another function", "body": "<p>You program is badly designed. It is not indented, you are using variable names <code>index</code>, <code>indx</code> and <code>idex</code> which is confusing for the reader and would lead to nightmares for long term maintenance. Also the factorial computation would deserve to be in a function for better modularity.</p>\n\n<p>But apart from that, your program does what you ask, correctly computes factorials and adds them in the <code>accumulator</code> variable. The only problem is that you never print that accumulator except for the last 2 cases (2 and 1) where <code>n = n!</code>.</p>\n\n<p>Simply replace :</p>\n\n<pre><code>if (accumulator == indx)\n{\nprintf(\"\\n%d\\n\", indx);\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>printf(\"\\n%d\\n\", accumulator);\n</code></pre>\n\n<p>and you will see your results.</p>\n\n<p>If you want to store the sum of factorials in an array, you just have to declare <code>int sumOfFact[26] = {0};</code> just before <code>int individualDigit[50];</code> to define the array and initialize <code>sumOfFact[0]</code> to 1, and then add <code>sumOfFact[indx] = accumulator;</code> just before printing the accumulator.</p>\n\n<hr>\n\n<p>To put the factorial part in a function, it is quite simple. First declare it above your main:</p>\n\n<pre><code>int ffact(int n);\n</code></pre>\n\n<p>the define it anywhere in your code (eventually in another compilation unit - a .c file - if you want)</p>\n\n<pre><code>inf ffact(int n) {\n    fact = 1;\n    while (n &gt; 1) {\n        fact *= n--;\n        /* if (fact &lt; 0) { fprintf(stderr, \"Overflow in ffact(%d)\\n\", n); return 0; } */\n    }\n    return fact\n}\n</code></pre>\n\n<p>I commented out the test for overflow, because I assume you use at least 32 bits int and fact(9) will not overflow (but fact(13) would ...)</p>\n\n<p>The loop computing the sum of factorials becomes:</p>\n\n<pre><code>accumulator = 0;\nfor (arrayIndx = 0; arrayIndx &lt; length; arrayIndx++)\n{\n    accumulator += ffact(individualDigit[arrayIndx]);\n}\nprintf(\"\\n%d\\n\", accumulator);\n</code></pre>\n\n<p>Advantages for that modularity: it is simpler to separately test the code for ffact. So when things go wrong, you have not to crawl among one simple piece of code of more than 40 lines (not counting the absent but necessaries comments). And the code no longers clutters the <code>individualDigit</code> array.</p>\n"}], "owner": {"reputation": 399, "user_id": 5132972, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f20b607236e9942ef2521d0e25c38039?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Swanson", "link": "https://stackoverflow.com/users/5132972/jack-swanson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438761514, "creation_date": 1438752328, "last_edit_date": 1438757353, "question_id": 31824043, "link": "https://stackoverflow.com/questions/31824043/trying-to-turn-the-factorial-part-into-another-function", "title": "Trying to turn the factorial part into another function", "body": "<p>I have to begin my thanking you guys for the help. I am trying to turn the factorial part of the code into another function and was wondering if I needed to add everything within the     </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main()\n{\n    int num;\n    int indx;\n    int arrayIndx;\n    int accumulator;\n    int fact;\n    int individualDigit[50];\n    int length;\n\nfor(indx = 99999; indx &gt; 0; indx--)\n{\n\n    num = indx;\n    for (length = 0; num &gt; 0; length++)\n    {\n        individualDigit[length] = num % 10;\n        num /= 10;\n        }\n\n        accumulator = 0;\n        for (arrayIndx = 0; arrayIndx &lt; length; arrayIndx++)\n        {\n            fact = 1;\n            while(individualDigit[arrayIndx] &gt; 0)\n            {\n                fact*= individualDigit[arrayIndx];\n                individualDigit[arrayIndx]--;\n            }\n            accumulator += fact;\n        }\n\n        if(accumulator == indx)\n        {\n            printf(\"%d \", accumulator);\n        }\n\n\n    }\n    return 0;\n}   \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1438753385, "post_id": 31823867, "comment_id": 51572303, "body": "K &amp; R is older than the first C standard, don&#39;t use it"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1438754713, "post_id": 31823867, "comment_id": 51572784, "body": "Take note to use isspace function (ctype.h). It can check all word terminators, such as LF or FF that are not checked in your code."}], "answers": [{"tags": [], "owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "is_accepted": true, "score": 4, "last_activity_date": 1438751758, "last_edit_date": 1438751758, "creation_date": 1438751405, "answer_id": 31823887, "question_id": 31823867, "link": "https://stackoverflow.com/questions/31823867/count-lines-words-characters-in-c/31823887#31823887", "title": "Count lines , words, characters in C", "body": "<p>You are assigning the value for <strong>c</strong> instead of comparing.</p>\n\n<pre><code>if (c == ' ' || c == '\\n' || c = '\\t') state = OUT;\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>if (c == ' ' || c == '\\n' || c == '\\t') state = OUT;\n</code></pre>\n\n<p>And your main function should be like <code>int main(void)</code> and put a <code>return 0</code> at the end</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "is_accepted": false, "score": 2, "last_activity_date": 1438759366, "last_edit_date": 1438759366, "creation_date": 1438752286, "answer_id": 31824039, "question_id": 31823867, "link": "https://stackoverflow.com/questions/31823867/count-lines-words-characters-in-c/31824039#31824039", "title": "Count lines , words, characters in C", "body": "<p>you are assigning value rather than comparing it:<code>if (c == ' ' || c == '\\n' || c = '\\t')</code>, <code>==</code> is used for comparison and <code>=</code> is used for assignment. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5192441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b557203ba16b4f3a701519f7e84cf5ab?s=128&d=identicon&r=PG&f=1", "display_name": "M.I.Jarral", "link": "https://stackoverflow.com/users/5192441/m-i-jarral"}, "is_accepted": false, "score": 0, "last_activity_date": 1438756618, "last_edit_date": 1438756618, "creation_date": 1438755911, "answer_id": 31824858, "question_id": 31823867, "link": "https://stackoverflow.com/questions/31823867/count-lines-words-characters-in-c/31824858#31824858", "title": "Count lines , words, characters in C", "body": "<p>first of all change main function to <code>int main()</code>  at line 5.</p>\n\n<p>Also at line 13 try to use <code>==</code>  for making it equal in the way shown below.</p>\n\n<p><code>if (c == ' ' || c == '\\n' || c == '\\t') state = out;</code> \n //you assign a value instead</p>\n\n<p>Also to terminate a program, at the end write  return 0; </p>\n"}], "owner": {"reputation": 11, "user_id": 5186391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b909e8ab97847372b859113ef517d6?s=128&d=identicon&r=PG&f=1", "display_name": "Cat Rock", "link": "https://stackoverflow.com/users/5186391/cat-rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 31823887, "answer_count": 3, "score": -2, "last_activity_date": 1438759366, "creation_date": 1438751297, "question_id": 31823867, "link": "https://stackoverflow.com/questions/31823867/count-lines-words-characters-in-c", "title": "Count lines , words, characters in C", "body": "<p>This code is taken from C Programming by K &amp; R. I am newbie to C programming and i need little help in understanding this code. This code gives me error please help me how to fix it</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define IN 1 /* inside a word */\n#define OUT 0 /* outside a word */\n/* count lines, words, and characters in input */\nmain()\n{\n    int c, nl, nw, nc, state;\n\n    state = OUT;\n    nl = nw = nc = 0;\n    while ((c = getchar()) != EOF) {\n        ++nc;\n        if (c == '\\n') ++nl;\n        if (c == ' ' || c == '\\n' || c = '\\t') state = OUT;\n        else if (state == OUT) {\n        state = IN;\n        ++nw;\n        }\n    }\n    printf(\"%d %d %d\\n\", nl, nw, nc);\n}\n</code></pre>\n\n<p>Error :</p>\n\n<pre><code>E:\\Files\\C\\main.c:5:1: warning: return type defaults to 'int' [-Wreturn-type]\nE:\\Files\\C\\main.c: In function 'main':\nE:\\Files\\C\\main.c:14:40: error: lvalue required as left operand of assignment\nE:\\Files\\C\\main.c:21:1: warning: control reaches end of non-void function [-Wreturn-type]\n</code></pre>\n"}, {"tags": ["android", "c", "algorithm", "accelerometer", "intel-edison"], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 4456198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37717781209f9a089d554ba05ce28ba3?s=128&d=identicon&r=PG&f=1", "display_name": "runner", "link": "https://stackoverflow.com/users/4456198/runner"}, "is_accepted": true, "score": 0, "last_activity_date": 1442380713, "creation_date": 1442380713, "answer_id": 32600305, "question_id": 31823807, "link": "https://stackoverflow.com/questions/31823807/step-counting-algorithm/32600305#32600305", "title": "Step Counting Algorithm", "body": "<p>I found out that the mechanism is just <strong>trial and run algorithm</strong></p>\n\n<p>These constant values may subject to change based on the environment, device, device packing, sensitivity of the accelerometer  etc.</p>\n"}], "owner": {"reputation": 501, "user_id": 4456198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/37717781209f9a089d554ba05ce28ba3?s=128&d=identicon&r=PG&f=1", "display_name": "runner", "link": "https://stackoverflow.com/users/4456198/runner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 32600305, "answer_count": 1, "score": 0, "last_activity_date": 1516392004, "creation_date": 1438751016, "last_edit_date": 1516392004, "question_id": 31823807, "link": "https://stackoverflow.com/questions/31823807/step-counting-algorithm", "title": "Step Counting Algorithm", "body": "<p>I am Currently working on pedometer Application for intel device with LSM9DS0 sensor. My requirement is to develop a pedometer with the application code intel published in the Native Application Guide</p>\n\n<p>This code is available in the section 6.1.4 of below shared pdf</p>\n\n<p><a href=\"http://download.intel.com/support/edison/sb/edison_nag_331192003.pdf\" rel=\"nofollow\">http://download.intel.com/support/edison/sb/edison_nag_331192003.pdf</a></p>\n\n<p>As a matter of fact I found some similar code but android version</p>\n\n<pre><code>public StepDetector() {\n    int h = 480; // TODO: remove this constant\n    mYOffset = h * 0.5f;\n    mScale[0] = - (h * 0.5f * (1.0f / (SensorManager.STANDARD_GRAVITY * 2)));\n    mScale[1] = - (h * 0.5f * (1.0f / (SensorManager.MAGNETIC_FIELD_EARTH_MAX)));\n}\n\npublic void setSensitivity(float sensitivity) {\n    mLimit = sensitivity; // 1.97  2.96  4.44  6.66  10.00  15.00  22.50  33.75  50.62\n}\n\npublic void addStepListener(StepListener sl) {\n    mStepListeners.add(sl);\n}\n\n//public void onSensorChanged(int sensor, float[] values) {\npublic void onSensorChanged(SensorEvent event) {\n    Sensor sensor = event.sensor; \n    synchronized (this) {\n        if (sensor.getType() == Sensor.TYPE_ORIENTATION) {\n        }\n        else {\n            int j = (sensor.getType() == Sensor.TYPE_ACCELEROMETER) ? 1 : 0;\n            if (j == 1) {\n                float vSum = 0;\n                for (int i=0 ; i&lt;3 ; i++) {\n                    final float v = mYOffset + event.values[i] * mScale[j];\n                    vSum += v;\n                }\n                int k = 0;\n                float v = vSum / 3;\n\n                float direction = (v &gt; mLastValues[k] ? 1 : (v &lt; mLastValues[k] ? -1 : 0));\n                if (direction == - mLastDirections[k]) {\n                    // Direction changed\n                    int extType = (direction &gt; 0 ? 0 : 1); // minumum or maximum?\n                    mLastExtremes[extType][k] = mLastValues[k];\n                    float diff = Math.abs(mLastExtremes[extType][k] - mLastExtremes[1 - extType][k]);\n\n                    if (diff &gt; mLimit) {\n\n                        boolean isAlmostAsLargeAsPrevious = diff &gt; (mLastDiff[k]*2/3);\n                        boolean isPreviousLargeEnough = mLastDiff[k] &gt; (diff/3);\n                        boolean isNotContra = (mLastMatch != 1 - extType);\n\n                        if (isAlmostAsLargeAsPrevious &amp;&amp; isPreviousLargeEnough &amp;&amp; isNotContra) {\n                            Log.i(TAG, \"step\");\n                            for (StepListener stepListener : mStepListeners) {\n                                stepListener.onStep();\n                            }\n                            mLastMatch = extType;\n                        }\n                        else {\n                            mLastMatch = -1;\n                        }\n                    }\n                    mLastDiff[k] = diff;\n                }\n                mLastDirections[k] = direction;\n                mLastValues[k] = v;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Complete android source code available in Github</p>\n\n<p><a href=\"https://github.com/bagilevi/android-pedometer\" rel=\"nofollow\">https://github.com/bagilevi/android-pedometer</a></p>\n\n<p>My problem is that I am not able to make perfect design document using these codes. I need clarifications on</p>\n\n<ol>\n<li><p>How does <em>Scale</em> values are calculated?\n its look like a random constant from nowhere is used here</p>\n\n<pre><code>int h = 480; // TODO: remove this constant\nmScale[0] = - (h * 0.5f * (1.0f / (SensorManager.STANDARD_GRAVITY * 2)));\nmScale[1] = - (h * 0.5f * (1.0f / (SensorManager.MAGNETIC_FIELD_EARTH_MAX)));\n</code></pre></li>\n<li><p>How does these <strong>mLimit</strong> value calculated?</p>\n\n<p>if (diff > mLimit)</p></li>\n<li><p>Intel code saying </p>\n\n<p>v = vSum / 2300;</p>\n\n<p>ButAndroid code saying </p>\n\n<p>v = vSum / 3;</p></li>\n<li><p>The Calculation of <strong>vector Sum</strong> is similar in both the codes. Which equation actually followed here?</p></li>\n</ol>\n\n<p>Please some one help me to get these things straight</p>\n"}, {"tags": ["c++", "c", "unicode"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438751522, "post_id": 31823735, "comment_id": 51571700, "body": "Having non-ASCII characters in the source code is not portable and different compilers handle this differently."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438751746, "post_id": 31823735, "comment_id": 51571775, "body": "For Windows compilers, your source file <b>must have BOM</b>. No such requirement in Linux."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1438752100, "post_id": 31823735, "comment_id": 51571891, "body": "What encoding should the target file use?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438752684, "post_id": 31823735, "comment_id": 51572068, "body": "Fo Linux, the default locale normally has UTF-8 encoding. For your program to work on Linux, you only need to add <code>setlocale(LC_ALL, &quot;&quot;)</code> in the beginning. Microsoft compilers are not UTF-8 friendly, you will need to jump through hoops with them. If you compile on Windows with GCC, it will work just as well as on Linux."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1438757378, "post_id": 31823735, "comment_id": 51574081, "body": "In addition to n.m&#39;s comment, you don&#39;t need that to do with wide character strings. <code>%s</code> and <code>&quot;&#214;&#220;&quot;</code> without <code>L</code> should do just fine."}, {"owner": {"reputation": 9597, "user_id": 730194, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb75af7a871d88919d9cc7c0c9e687e9?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/730194/peter"}, "edited": false, "score": 0, "creation_date": 1438803652, "post_id": 31823735, "comment_id": 51604311, "body": "setLocale(LC_ALL, &quot;&quot;) works only on Linux. On Windows, it has no effect."}, {"owner": {"reputation": 9597, "user_id": 730194, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb75af7a871d88919d9cc7c0c9e687e9?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/730194/peter"}, "edited": false, "score": 0, "creation_date": 1438803669, "post_id": 31823735, "comment_id": 51604325, "body": "The example uses hard-coded strings. In reality, the data is coming from some other source."}], "answers": [{"tags": [], "owner": {"reputation": 4161, "user_id": 3404637, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/N9Qo0.jpg?s=128&g=1", "display_name": "Ali786", "link": "https://stackoverflow.com/users/3404637/ali786"}, "is_accepted": false, "score": 0, "last_activity_date": 1438751594, "last_edit_date": 1495542701, "creation_date": 1438751028, "answer_id": 31823812, "question_id": 31823735, "link": "https://stackoverflow.com/questions/31823735/proper-way-to-fprintf-unicode-characters/31823812#31823812", "title": "Proper way to fprintf unicode characters", "body": "<p>I think you need to set locale first to get it work properly..</p>\n\n<p>See this question for more info</p>\n\n<p><a href=\"https://stackoverflow.com/questions/10007261/why-doesnt-printf-format-unicode-parameters\">Why doesn&#39;t printf format unicode parameters?</a> </p>\n\n<p>you can use UTF-8 char set if your characters are there in this...</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15528359/printing-utf-8-strings-with-printf-wide-vs-multibyte-string-literals\">Printing UTF-8 strings with printf - wide vs. multibyte string literals</a></p>\n"}], "owner": {"reputation": 9597, "user_id": 730194, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fb75af7a871d88919d9cc7c0c9e687e9?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/730194/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2226, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1438751594, "creation_date": 1438750632, "question_id": 31823735, "link": "https://stackoverflow.com/questions/31823735/proper-way-to-fprintf-unicode-characters", "title": "Proper way to fprintf unicode characters", "body": "<p>Here is my simple C/C++ program:</p>\n\n<pre><code>int main() {\n  FILE* f = fopen(\"MyTest.log\", \"w\");\n\n  fprintf(f, \"%ls\\n\", L\"abc\");\n  fprintf(f, \"%ls\\n\", L\"\u60a8\u597d\"); // Data from a different locale\n  fprintf(f, \"%ls\\n\", L\"def\");\n  fclose(f);\n\n  return 0;\n}\n</code></pre>\n\n<p>When I run this program, the generated file does not contain the middle line at all. It appears <code>fprintf</code> simply returns back once it detects a different character set in the passed parameter.</p>\n\n<p>I have tested this program on Windows as well as Ubuntu. The same problem at both the places.</p>\n\n<p>Browsing the forum, I found a few hints such as using _setmode() and fwprintf. However, if possible, I would like to stick to fprintf(). Also, my code needs to work on Windows as well as Linux. </p>\n\n<p>Does anyone know to achieve this? Regards.</p>\n"}, {"tags": ["c++", "c", "unicode", "iconv"], "answers": [{"comments": [{"owner": {"reputation": 2566, "user_id": 2940881, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lz0ZZ.png?s=128&g=1", "display_name": "Frank-Rene Sch&#228;fer", "link": "https://stackoverflow.com/users/2940881/frank-rene-sch%c3%a4fer"}, "edited": false, "score": 0, "creation_date": 1442304321, "post_id": 31824187, "comment_id": 53015701, "body": "Thanks, I did not find that in the documentation!"}], "tags": [], "owner": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "is_accepted": false, "score": 2, "last_activity_date": 1438753098, "creation_date": 1438753098, "answer_id": 31824187, "question_id": 31823682, "link": "https://stackoverflow.com/questions/31823682/issue-with-iconv-writing-bom-if-output-is-platform-endian/31824187#31824187", "title": "Issue with ICONV writing BOM if output is platform endian", "body": "<p>If you don't specify a byte order, the default is always big endian. To use the byte order of the current platform, use the special <code>UCS-4-INTERNAL</code> (or <code>UCS-2-INTERNAL</code>) encoding.</p>\n"}, {"tags": [], "owner": {"reputation": 983, "user_id": 7018504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/268a8a29fca7ea8527389dbbaf562587?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Haible", "link": "https://stackoverflow.com/users/7018504/bruno-haible"}, "is_accepted": true, "score": 0, "last_activity_date": 1476956190, "creation_date": 1476956190, "answer_id": 40150716, "question_id": 31823682, "link": "https://stackoverflow.com/questions/31823682/issue-with-iconv-writing-bom-if-output-is-platform-endian/40150716#40150716", "title": "Issue with ICONV writing BOM if output is platform endian", "body": "<p>iconv (both the glibc implementation and the GNU libiconv implementation) support encoding names that specify a fixed endianness:</p>\n\n<ul>\n<li>UTF-32LE = UCS-4LE : UCS-4 in little endian flavour, without BOM</li>\n<li>UTF-32BE = UCS-4BE : UCS-4 in big endian flavour, without BOM</li>\n<li>UTF-16LE : UTF-16 in little endian flavour, without BOM</li>\n<li>UTF-16BE : UTF-16 in big endian flavour, without BOM</li>\n<li>wchar_t (an alias for UCS-4-INTERNAL) : UCS-4 with the platform's endianness and alignment restrictions</li>\n</ul>\n\n<p>Note that strings in these encodings should better not be transported to other machines, otherwise the lack of a BOM would cause problems.</p>\n"}], "owner": {"reputation": 2566, "user_id": 2940881, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/lz0ZZ.png?s=128&g=1", "display_name": "Frank-Rene Sch&#228;fer", "link": "https://stackoverflow.com/users/2940881/frank-rene-sch%c3%a4fer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 1, "accepted_answer_id": 40150716, "answer_count": 2, "score": 1, "last_activity_date": 1476956190, "creation_date": 1438750334, "question_id": 31823682, "link": "https://stackoverflow.com/questions/31823682/issue-with-iconv-writing-bom-if-output-is-platform-endian", "title": "Issue with ICONV writing BOM if output is platform endian", "body": "<p>When choosing UTF-32, for platform dependent endian, libiconv\nconverts correctly but prefixes a 0xfeff BOM to the output\nstream. This causes some trouble.</p>\n\n<p>When choosing UCS-4, no BOM is written but on my system it\nconverts to 'big endian' which happens to be not the \nendianness of my system.</p>\n\n<p>Are there any suggestions how to convert to UTF-32/UCS-4 \nwith the platform-dependent endianess without having the \nremove the BOM manually?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "edited": false, "score": 0, "creation_date": 1438747944, "post_id": 31823245, "comment_id": 51570775, "body": "You are using a double variable to check for equal/not-equal condition in a loop. Although little number are very likely to have exact precision, I think it is bad practice anyway. I would choose &quot;to enter a negative number&quot; as the condition to terminate the loop."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438748613, "post_id": 31823245, "comment_id": 51570954, "body": "second <code>int smallint=n-2;</code> should be <code>smallint=n-2;</code>, but i think <code>smallint</code> processing mistake"}], "answers": [{"tags": [], "owner": {"reputation": 3561, "user_id": 2698605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1a4bdcb1834ce1c98c4b6a7cadc6b04c?s=128&d=identicon&r=PG&f=1", "display_name": "pablo1977", "link": "https://stackoverflow.com/users/2698605/pablo1977"}, "is_accepted": false, "score": 1, "last_activity_date": 1438749906, "creation_date": 1438749906, "answer_id": 31823606, "question_id": 31823245, "link": "https://stackoverflow.com/questions/31823245/finding-largest-twin-prime/31823606#31823606", "title": "Finding Largest Twin Prime", "body": "<p>You are doing a research about prime numbers \"upto\" a given number N.<br>\nIn this class of problems is more efficient (although more expensive in RAM space) to store information in tables of primes and composite numbers, like the <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow\">Sieve of Eratosthenes</a>.  </p>\n\n<p>Once you have filled the table with the information of which numbers are prime and composite, it's just a matter of iterate on the table to look for the twin primes, wherever they are.  </p>\n\n<p><strong>However</strong>, although you inform to the user that <strong>all</strong> the twin primes will be shown, actually what your program does is trying to show only the lastest.  </p>\n\n<p>Please, have clear which is the goal of your program.  </p>\n\n<p>On the other hand, you are redefining the identifier <code>smallint</code> inside the innest loop, which is, for sure, a logical error.  </p>\n\n<hr>\n\n<p><strong>In case you cannot use arrays to store the Sieve of Eratosthenes</strong>, then I show you here a method that is not hard to implement (but it's not, of course, the most efficient; however it will avoid a lot of redundant computations).  </p>\n\n<p>The twin primes (greater than 4) can be of two different forms:  </p>\n\n<ul>\n<li>6k-1, 6k+1</li>\n<li>6k+1, 6k+5  </li>\n</ul>\n\n<p>So, I would jump in the sequence of numbers having the form 6k+1, 6k+5, for k = 0, 1, 2, 3, ..., so that I only would analyze the odd numbers in the sequence:  </p>\n\n<ul>\n<li>5, 7, 11, 13, 17, 19, 23, 25, 29, 31, 35, 37, 41, 43, 47, 49, ...  </li>\n</ul>\n\n<p>This can be obtained by adding 2, then 4, then 2, then 4, then 2, then 4...  </p>\n\n<p>So, one can take the first pair, let's say 5 and 7.<br>\nWe divide both of them by the odd numbers of the form 6k+1 and 6k+5 less than the square root of the greatest of them (sqrt(7)).<br>\nIf the less number (in this case 5) would be divisible by some number, we pick the following number in the list, which is 11, and divide it by all the numbers that were used so far to test if 7 is prime or not.  From this point, we follow by dividing together, 7 and 11, by the remaining numbers up to sqrt(11), and so on.  </p>\n\n<p>Note that, for big numbers, 6k+1 and 6k+5 have very similar square roots.  </p>\n\n<p>If the opposite case happens, that is, that for the pair (5, 7), the biggest element of the couple (in this case: 7) is divisible by some other number, then we discard both of them (5 and 7) and pick the following two elementos of the list (in this example would be 11 and 13).  So, we start the search from scratch (that is, by dividing by small numbers).  </p>\n\n<p>finally, if the loop ends without finding divisors for any element of the couple (which is indeed the case for 6 and 7), then we can inform that this couple is of twin primes.<br>\n(Or well we can keep silent).  </p>\n\n<p>Then, we discard the smallest element (in this case: 5) and retain the biggest element (in this case: 7).<br>\nSince we already know that 7 is prime, we only pick the following element of the list above (in this case, 11), and search for divisors of it, only.  </p>\n\n<p><strong>I think that the method I have explained will avoid to you a lot of redundant computations.</strong>   </p>\n\n<p>Besides, it's necessary to keep the latest updated couple of twin primes found. I assume that is not necessary that I explain to you how to do that.  </p>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": true, "score": 0, "last_activity_date": 1438778098, "last_edit_date": 1438778098, "creation_date": 1438750820, "answer_id": 31823774, "question_id": 31823245, "link": "https://stackoverflow.com/questions/31823245/finding-largest-twin-prime/31823774#31823774", "title": "Finding Largest Twin Prime", "body": "<p>We should procure that both of numbers are prime. Between difference is <code>2</code>. As you know first twin prime is <code>(3,5)</code>.  I haven't found a formula what I expected. So, I've used iteration for solution. If you look through the code, you can understand.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint twinPrime(int m);\nint IsPrime(unsigned int number);\n\n\nint main()\n{\n    double N;\n    int floored;\n    int prime;\n\n    printf(\"This program prints out all the possible twin primes\"\n           \"until a specific number which...\\nyou can choose!\");\n    printf(\"\\nA note of caution: Although this program accepts decimals, \"\n           \"the value entered must be between 5 and 10^9,inclusive of the 2 numbers.\");\n    printf(\"\\nKey in -1 to exit.\");\n    printf(\"\\nEnter N value upto which twin primes ought to be calculated until: \");\n    scanf(\"%lf\",&amp;N);\n\n    while (N != -1)\n    {\n        if (N &lt; 5 || N &gt; pow(10,9))\n        {\n            printf(\"\\nNumber not in the valid range was inputted. \\n\"\n                   \"Please reenter the value: \");\n            scanf(\"%lf\",&amp;N);\n        }\n        else\n        {\n            floored = floor(N);\n            prime = twinPrime(floored);\n            printf(\"The largest twin prime pair not above %d is (%d,%d)\",floored,prime - 2,prime);\n            printf(\"\\nPlease re-enter the value:\");\n            scanf(\"%lf\",&amp;N);\n        }\n    }\n    printf(\"\\nProgram successfully terminated.\");\n    return 0;\n}\n\nint twinPrime(int m)\n{\n    int p = 3;\n    int q = 5;\n\n    for (; q &lt; m - 1; q += 2)\n    {\n        if (IsPrime(q))\n        {\n            if (q - p == 2)\n            {\n                continue;\n            }\n            p = q;\n        }\n    }\n    return q;\n}\n\nint IsPrime(unsigned int number)\n{\n    if (number &lt;= 1) return 0; // zero and one are not prime\n    if ((number &gt; 2) &amp;&amp; ((number % 2) == 0)) return 0; //no even number is prime number (bar 2)\n    unsigned int i;\n    for (i=2; i*i&lt;=number; i++)\n    {\n        if (number % i == 0) return 0;\n    }\n    return 1;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5155482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 31823774, "answer_count": 2, "score": 2, "last_activity_date": 1438778098, "creation_date": 1438747374, "last_edit_date": 1438750425, "question_id": 31823245, "link": "https://stackoverflow.com/questions/31823245/finding-largest-twin-prime", "title": "Finding Largest Twin Prime", "body": "<p>I am trying to create a c program which prompts for user input and then, finds the largest twin prime within that number. This program then loops continuously, prompting the user for an input again and again and finding the largest twin prime until the user enters -1, after which it terminates. I wrote down the basic code, but have yet been able to make it loop continuously when using certain numbers such as 20 and 65. I cannot figure out what is wrong with my code.</p>\n\n<p>I seem to be having another problem as well. For 20, the values show (15,17) instead of (17,19). Obviously the logic is wrong somewhere but I am not sure exactly where either.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include&lt;conio.h&gt;\n\nint prime(int x)\n{\n    int i,numroot;\n    numroot=sqrt(x);\n    for(i=2;i&lt;=numroot;i++)\n    if(x%i==0){\n        return(0);\n    }\n    return(1);\n\n}\n\nint main()\n{\n    double N;\n\n    printf(\"This program prints out all the possible twin primes until a specific number which...\\nyou can choose!\");\n    printf(\"\\nA note of caution: Although this program accepts decimals, the value entered must be between 5 and 10^9,inclusive of the 2 numbers.\");\n    printf(\"\\nKey in -1 to exit.\");\n    printf(\"\\nEnter N value upto which twin primes ought to be calculated until: \");\n    scanf(\"%lf\",&amp;N);\n\n    while (N!=-1) {\n      if (N&lt;5 || N&gt;pow(10,9)) {\n          printf(\"\\nNumber not in the valid range was inputted. \\nPlease reenter the value: \");\n          scanf(\"%lf\",&amp;N);\n      }\n      else {\n          int n;\n          n=floor(N);\n              int prime(int x);\n          int f,originalval;\n\n          originalval=N;\n          f=prime(n);\n          while(f==0){//Calculates for largest prime number below user input\n            n--;\n            f=prime(n);\n          }\n          int smallint=n-2;\n          while(prime(smallint)==1){\n              n--;\n              f=prime(n);\n              while(f==0){\n                  n--;\n                  f=prime(n);\n              }\n              int smallint=n-2;\n    }\n    printf(\"The largest twin prime pair not above %d is (%d,%d)\",originalval,smallint,n);\n          printf(\"\\nPlease re-enter the value:\");\n          scanf(\"%lf\",&amp;N);\n      }\n    }\n    printf(\"\\nProgram successfully terminated.\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1438747586, "post_id": 31823193, "comment_id": 51570683, "body": "Do you understand the right-shift-assign (<code>&gt;&gt;=</code>) operator?"}, {"owner": {"reputation": 14052, "user_id": 183397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e44d2e9eaaa792ed3990b4a4a4d33c38?s=128&d=identicon&r=PG", "display_name": "clstrfsck", "link": "https://stackoverflow.com/users/183397/clstrfsck"}, "edited": false, "score": 0, "creation_date": 1438747844, "post_id": 31823193, "comment_id": 51570753, "body": "This is exponentiation by squaring.  The algorithm here is an implementation of the iterative algorithm shown on the wikipedia page.  It&#39;s pretty hard to know exactly what the time complexity will be, as this will be influenced by the time complexity of the <code>Decimal</code> operations, however the <code>while</code> loop will iterate at most the number of bits in <code>b</code>.  Wikipedia page has more information on complexity. <a href=\"https://en.wikipedia.org/wiki/Exponentiation_by_squaring\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Exponentiation_by_squaring</a>"}, {"owner": {"reputation": 57, "user_id": 4175242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6bc65284dd393d87f6dc55c738c959?s=128&d=identicon&r=PG&f=1", "display_name": "SPradhan", "link": "https://stackoverflow.com/users/4175242/spradhan"}, "edited": false, "score": 0, "creation_date": 1438757021, "post_id": 31823193, "comment_id": 51573890, "body": "Beta, I understand the &gt;&gt;= operator."}, {"owner": {"reputation": 57, "user_id": 4175242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6bc65284dd393d87f6dc55c738c959?s=128&d=identicon&r=PG&f=1", "display_name": "SPradhan", "link": "https://stackoverflow.com/users/4175242/spradhan"}, "edited": false, "score": 0, "creation_date": 1438757081, "post_id": 31823193, "comment_id": 51573923, "body": "Thank you msandiford. Reading wiki page helped a lot."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4175242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6bc65284dd393d87f6dc55c738c959?s=128&d=identicon&r=PG&f=1", "display_name": "SPradhan", "link": "https://stackoverflow.com/users/4175242/spradhan"}, "edited": false, "score": 0, "creation_date": 1438757246, "post_id": 31823284, "comment_id": 51574014, "body": "Thanks David. I got the logic of exponentiation by squaring. Do we have any efficient logics apart from this? And I guess binary exponentiation is efficient than this."}, {"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "reply_to_user": {"reputation": 57, "user_id": 4175242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6bc65284dd393d87f6dc55c738c959?s=128&d=identicon&r=PG&f=1", "display_name": "SPradhan", "link": "https://stackoverflow.com/users/4175242/spradhan"}, "edited": false, "score": 0, "creation_date": 1438779073, "post_id": 31823284, "comment_id": 51587986, "body": "@SPradhan - This <b>is</b> binary exponentiation. I&#39;ll update the answer."}], "tags": [], "owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "is_accepted": false, "score": 0, "last_activity_date": 1438782858, "last_edit_date": 1438782858, "creation_date": 1438747711, "answer_id": 31823284, "question_id": 31823193, "link": "https://stackoverflow.com/questions/31823193/could-anyone-explain-the-below-code-snippet/31823284#31823284", "title": "Could anyone explain the below code snippet?", "body": "<p>That's computing <code>(*a)</code><sup><code>b</code></sup> in the special case that <code>b</code> is a non-negative integer.</p>\n\n<p>The variable <code>result</code> is initialized to one (note that <code>a</code><sup>0</sup> is one for all <code>a</code>) and <code>power</code> is initialized to the contents of <code>a</code>. Each time through the loop, <code>result</code> is multiplied by <code>power</code> if <code>b</code> is odd (the first <code>if</code>). The second <code>if</code> right shifts <code>b</code> by one bit (i.e., divides by two), and if this is still positive, it squares <code>power</code>. In other words, <code>power</code> contains progressively larger values of <code>(*a)</code><sup>2<sup>n</sup></sup>.</p>\n\n<p>This is a fairly efficient and easily implementable (but not optimal) algorithm for computing a<sup>b</sup>. The optimal algorithm is NP-hard and (potentially) requires a lot of memory. This algorithm is easily encoded and requires minimal memory.</p>\n\n<p>Ignoring the superfluous multiplication by one, this algorithm is optimal for <code>b</code>=0 to <code>b</code>=14. It is suboptimal in <code>a</code><sup>15</sup>. This algorithm computes as <code>a</code><sup>15</sup> <code>a</code>*<code>a</code><sup>2</sup>*<code>a</code><sup>4</sup>*<code>a</code><sup>8</sup>, or six multiplications. The optimal calculation (the one with the least number of calls to <code>decimal</code>) is <code>a</code><sup>3</sup>=<code>a</code>*<code>a</code>*<code>a</code>; <code>a</code><sup>15</sup>=<code>a</code><sup>3</sup>*((<code>a</code><sup>3</sup>)<sup>2</sup>)<sup>2</sup>, or five multiplications.</p>\n\n<hr>\n\n<p>Another name for this algorithm is right-to-left binary exponentiation. It's called that because it begins with the rightmost bit (the ones bit) of <code>b</code> and works on progressively more significant bits of <code>b</code>. In other words, it works right to left. Left-to-right binary exponentiation starts at the most significant bit of <code>b</code> and works on progressively less significant bits of <code>b</code>. After eliminating superfluous multiplications by one, both algorithms use exactly the same number of multiplications.</p>\n\n<p>This is not the \"optimal\" algorithm, where optimal means \"least number of multiplications\". For example, the right-to-left and left-to-right binary exponentiation algorithms compute x<sup>15</sup> and x<sup>31</sup> as</p>\n\n<ul>\n<li>x<sup>15</sup> = x*x<sup>2</sup>*x<sup>4</sup>*x<sup>8</sup> = ((x<sup>2</sup>*x)<sup>2</sup>*x)<sup>2</sup>*x (right-to-left and left-to-right, respectively)</li>\n<li>x<sup>31</sup> = x*x<sup>2</sup>*x<sup>4</sup>*x<sup>8</sup>*x<sup>16</sup> = (((x<sup>2</sup>*x)<sup>2</sup>*x)<sup>2</sup>*x)<sup>2</sup>*x</li>\n</ul>\n\n<p>But since 15=(4+1)*3, 31=15*2+1=((4+1)*3)*2+1 and 31=7*4+3=(3*2+1)*4+3 we can also write:</p>\n\n<ul>\n<li>x<sup>15</sup> = (x<sup>4</sup>*x)<sup>3</sup></li>\n<li>x<sup>31</sup> = ((x<sup>4</sup>*x)<sup>3</sup>)<sup>2</sup>*x</li>\n<li>x<sup>31</sup> = (((x<sup>3</sup>)<sup>2</sup>*x)<sup>4</sup>)*x<sup>3</sup></li>\n</ul>\n\n<p>All require one less multiplication than does binary exponentiation. (The final expressions requires caching the intermediate result x<sup>3</sup> so as to avoid computing it twice.) I don't know if my expressions for x<sup>31</sup> are optimal. It's ridiculously hard to find the optimal expression even for smallish numbers. You have to look at all the different ways in which x<sup>n</sup> can be expressed, keeping in mind that common intermediate results only need to be calculated once. As mentioned above, this is NP-hard. In practice, binary exponentiation, although not optimal, is good enough.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 4175242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6bc65284dd393d87f6dc55c738c959?s=128&d=identicon&r=PG&f=1", "display_name": "SPradhan", "link": "https://stackoverflow.com/users/4175242/spradhan"}, "edited": false, "score": 0, "creation_date": 1438757343, "post_id": 31823366, "comment_id": 51574064, "body": "Thanks DrPizza. It helped a lot."}], "tags": [], "owner": {"reputation": 16736, "user_id": 2131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c24f48337a2b94fa2da84c01a7667f9?s=128&d=identicon&r=PG", "display_name": "DrPizza", "link": "https://stackoverflow.com/users/2131/drpizza"}, "is_accepted": false, "score": 0, "last_activity_date": 1438748336, "creation_date": 1438748336, "answer_id": 31823366, "question_id": 31823193, "link": "https://stackoverflow.com/questions/31823193/could-anyone-explain-the-below-code-snippet/31823366#31823366", "title": "Could anyone explain the below code snippet?", "body": "<p><code>b &amp; 1</code> tests if b is odd. If it is, <code>result</code> is set to <code>tmp * power</code>.</p>\n\n<p><code>b &gt;&gt;= 1</code> divides b by 2. If the result is non-zero, <code>tmp</code> is set to <code>power</code>, and <code>power</code> is set to <code>tmp * tmp</code>.</p>\n\n<p>Eventually, <code>b</code> is divided by 2 so much that it reaches zero, which ends the <code>while</code> loop.</p>\n\n<p>The algorithm is a generalization of so-called \"<a href=\"http://mathforum.org/dr.math/faq/faq.peasant.html\" rel=\"nofollow\">Russian Peasant multiplication</a>\" called \"<a href=\"http://www.wikiwand.com/en/Exponentiation_by_squaring\" rel=\"nofollow\">Exponentiation by squaring</a>\". The same basic process can be used for exponentiation instead of multiplication, by squaring the intermediate result (which we see in the second <code>if</code> test) rather than doubling.</p>\n\n<p>Time complexity proportional to the highest set bit in <code>b</code>; if the highest set bit in <code>b</code> is bit <em>K</em> then the loop will iterate <em>K</em> times. That is, time complexity is proportional to the base 2 logarithm of b.</p>\n"}], "owner": {"reputation": 57, "user_id": 4175242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6bc65284dd393d87f6dc55c738c959?s=128&d=identicon&r=PG&f=1", "display_name": "SPradhan", "link": "https://stackoverflow.com/users/4175242/spradhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1438782858, "creation_date": 1438746910, "last_edit_date": 1438749934, "question_id": 31823193, "link": "https://stackoverflow.com/questions/31823193/could-anyone-explain-the-below-code-snippet", "title": "Could anyone explain the below code snippet?", "body": "<pre><code>void dec_exp(Decimal *result, const Decimal *a, unsigned int b)\n    {\n        Decimal tmp, power = *a;\n        dec_parse(result, \"1\");\n        while (b)\n        {\n            if (b &amp; 1)\n            {\n                tmp = *result;\n                dec_mul(result, &amp;tmp, &amp;power);\n            }\n            if (b &gt;&gt;= 1)\n            {\n                tmp = power;\n                dec_mul(&amp;power, &amp;tmp, &amp;tmp);\n            }\n    }\n}\n</code></pre>\n\n<p>Where <code>Decimal</code> is a structure variable containing a decimal value, it's length and the position where the decimal point exists.</p>\n\n<p>Passed arguments in the function: <code>a</code> is the base value and <code>b</code> is power. And <code>result</code> will store the value a^b after computation. </p>\n\n<p><code>dec_parse(Decimal &amp;x,string y)</code> will do a parsing of <code>y</code> into decimal and extract info like the postion of decimal point, trim leading and trailing zeros and converts string into a <code>Decimal</code> structure variable.</p>\n\n<p><code>dec_mul(Decimal result, Decimal &amp;x, Decimal &amp;y)</code> will multiply <code>x</code> and <code>y</code> and store the value after multiplication in result.</p>\n\n<p>I just want to know how two \"if conditions\" work in the while loop and when does the while loop get terminated and the time complexity of the snippet.    </p>\n"}, {"tags": ["c", "arrays", "simd", "unions"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1438744646, "post_id": 31822767, "comment_id": 51570000, "body": "No there is no guarantee from the C specification. This is a union which means the member <code>i</code> and the member <code>v</code> both start at the same memory location.  How large the total size of <code>problem</code> is will depend on the largest size of any of the union members plus any padding done.  <code>memcpy()</code> has its uses but this is not one of them.  best to iterate through the array and assign each one.  also doing a <code>memcpy()</code> is iterating over the memory area as well."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1438745116, "post_id": 31822767, "comment_id": 51570122, "body": "I am curious why you would want to optimize the copying of a particular member of an array of a union when the array is only 10 or so elements and a simple loop would solve the problem and you could move on to something else."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 4, "creation_date": 1438745126, "post_id": 31822767, "comment_id": 51570126, "body": "@RichardChambers: There is a guarantee about <i>where</i> the members are stored within the representation of the union, just not how the bits of the <code>int</code> and pointer correspond in terms of values."}, {"owner": {"reputation": 273, "user_id": 1794469, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ba04c6934be0e98a164f4992fde4a50?s=128&d=identicon&r=PG", "display_name": "user1794469", "link": "https://stackoverflow.com/users/1794469/user1794469"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1438751430, "post_id": 31822767, "comment_id": 51571672, "body": "@RichardChambers The 10 is just an example because it doesn&#39;t really matter for discussion. But in practice it&#39;s a series of 100-20000 arrays between 20 and 200 in length. It may be worth going back and rewriting the structures to avoid unions and add more fields to the other structures. The union choice was an early design decision to cut down on logic or something (it seemed reasonable at the time). It now seems ill advised."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1438874611, "post_id": 31822767, "comment_id": 51638941, "body": "@R.. I do not see the difference between what you write and what I wrote. The general rule is you know where they start and after that all you really can count on is that any area of memory allocated for the union, whether on the stack or on the heap or where ever will be large enough to contain any particular member of the union.   I have seen plenty of errors arising from people assuming that they can count on particular alignments especially with unions involving structs where the member alignment was not specified explicitly."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 1794469, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ba04c6934be0e98a164f4992fde4a50?s=128&d=identicon&r=PG", "display_name": "user1794469", "link": "https://stackoverflow.com/users/1794469/user1794469"}, "edited": false, "score": 0, "creation_date": 1438745181, "post_id": 31822903, "comment_id": 51570139, "body": "so in terms of efficiently copying I&#39;m not likely to do better than a loop over the <code>foo.i</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 273, "user_id": 1794469, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ba04c6934be0e98a164f4992fde4a50?s=128&d=identicon&r=PG", "display_name": "user1794469", "link": "https://stackoverflow.com/users/1794469/user1794469"}, "edited": false, "score": 1, "creation_date": 1438745225, "post_id": 31822903, "comment_id": 51570152, "body": "Correct; you&#39;re unlikely to do better than copying with a loop."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 5, "last_activity_date": 1438745694, "last_edit_date": 1438745694, "creation_date": 1438745005, "answer_id": 31822903, "question_id": 31822767, "link": "https://stackoverflow.com/questions/31822767/is-there-any-standard-for-where-data-is-located-in-a-c-union/31822903#31822903", "title": "Is there any standard for where data is located in a C union?", "body": "<p>Both elements of the union are stored with their first byte at the starting address of the union.  In your example, both the <code>int</code> and the <code>int *</code> are stored starting at the same address.  This is always guaranteed.</p>\n\n<p>What is not defined is whether the <code>int</code> is stored over the less significant or more significant bytes of the <code>int *</code>.  Note that if you have an array of the union, copying the elements wholesale into an array of <code>int</code> will copy indeterminate values into every alternate member of the target array (in practice; it's probably strictly undefined behaviour in theory).</p>\n\n<p>Consequently, to copy the ten <code>int</code> values from your array of ten <code>union problem</code>, you'd need to iterate over the elements of the array, copying the <code>.i</code> members in turn.</p>\n\n<pre><code>union problem p[10] = { \u2026 };\nint copy[10];\n</code></pre>\n\n<p>Either:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++)\n    copy[i] = p[i].i;\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>int *cp = copy;\nunion problem *pp = p;\nint *end = copy + 10;\nwhile (cp &lt; end)\n    *cp++ = (*pp++).i;\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 1794469, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8ba04c6934be0e98a164f4992fde4a50?s=128&d=identicon&r=PG", "display_name": "user1794469", "link": "https://stackoverflow.com/users/1794469/user1794469"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 31822903, "answer_count": 1, "score": 1, "last_activity_date": 1438745694, "creation_date": 1438744073, "question_id": 31822767, "link": "https://stackoverflow.com/questions/31822767/is-there-any-standard-for-where-data-is-located-in-a-c-union", "title": "Is there any standard for where data is located in a C union?", "body": "<p>I have the following union:</p>\n\n<pre><code>union problem {\n    int i;\n    int *v;\n};\n</code></pre>\n\n<p>On my system the <code>int</code> is 4 bytes while the <code>int*</code> is 8. I have an array of say 10 of these structures. In a certain section of code I happen to know that all of the members of the array are using the <code>int</code> of the union. I need to copy these ints into an array of ints. Now if the source array was an int array i could use <code>memcpy</code> to quickly copy the data.</p>\n\n<p>Is there any guarantee that the int is stored in the low or high memory of the union? I'd like to be able to copy the data without iterating so I was thinking of looping through with SIMD and a shuffle. To do that I would have to know where the int actually is within the union and I'm guessing that is implementation specific.</p>\n"}, {"tags": ["python", "c++", "c", "linux"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5192046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G8fQ6uxdcUw/AAAAAAAAAAI/AAAAAAAABCA/CiRsH71gZ6M/photo.jpg?sz=128", "display_name": "Christopher", "link": "https://stackoverflow.com/users/5192046/christopher"}, "edited": false, "score": 0, "creation_date": 1438866239, "post_id": 31830627, "comment_id": 51632441, "body": "Thanks.  Thats pretty much the approach I expected to use, but thats a beautifully simple line!"}], "tags": [], "owner": {"reputation": 240, "user_id": 3934621, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3fd8c6add19dd320821070a9d3d10793?s=128&d=identicon&r=PG&f=1", "display_name": "JM. Benitez", "link": "https://stackoverflow.com/users/3934621/jm-benitez"}, "is_accepted": false, "score": 0, "last_activity_date": 1438772455, "creation_date": 1438772455, "answer_id": 31830627, "question_id": 31822714, "link": "https://stackoverflow.com/questions/31822714/query-total-cpu-usage-of-all-instances-of-a-process-on-linux-os/31830627#31830627", "title": "Query total CPU usage of all instances of a process on Linux OS", "body": "<p>Here is the only way to do that I can think. It is a bit confusing but if you follow the steps it is very simple:</p>\n\n<blockquote>\n  <p>If I want to select total cpu use of Google Chrome process:</p>\n  \n  <p>$ps -e -o pcpu,comm | grep chrome | awk '{ print $1 }' | paste -sd+ |\n  bc -l</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 5192046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G8fQ6uxdcUw/AAAAAAAAAAI/AAAAAAAABCA/CiRsH71gZ6M/photo.jpg?sz=128", "display_name": "Christopher", "link": "https://stackoverflow.com/users/5192046/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438772455, "creation_date": 1438743721, "question_id": 31822714, "link": "https://stackoverflow.com/questions/31822714/query-total-cpu-usage-of-all-instances-of-a-process-on-linux-os", "title": "Query total CPU usage of all instances of a process on Linux OS", "body": "<p>I have a python server that forks itself once it receives a request.  The python service has several C++ .so objects it can call into, as well as the python process itself.  </p>\n\n<p>My question is, in any one of these processes, I would like to be able to see how much CPU all instances of this server are currently using.  So lets say I have foo.py, I want to see how much CPU all instances of foo.py are currently using.  For example, foo.py(1) is using 200% cpu, foo.py(2) is using 300%, and foo.py(3) is using 50%, id like to arrive at 550%.  </p>\n\n<p>The only way I can think of doing this myself is getting the PID of every process and scanning through the /proc filesystem.  Is there a more general way available within C/Python/POSIX for such an operation?  </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "numbers", "ternary-operator"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 2, "creation_date": 1438743292, "post_id": 31822635, "comment_id": 51569676, "body": "You don&#39;t have to make excuses for asking a question. Go straight to the point :-)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1438743570, "post_id": 31822635, "comment_id": 51569744, "body": "Yes; it isn&#39;t particularly easy, but neither is it particularly hard.  What did you try?  How would you describe the manual process?  How are the numbers stored (array, or separate variables)?  Can you modify the variables, or must they stay unchanged?  Do you need 3 or 4?"}], "answers": [{"tags": [], "owner": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "is_accepted": false, "score": 0, "last_activity_date": 1439542277, "last_edit_date": 1439542277, "creation_date": 1438764722, "answer_id": 31827740, "question_id": 31822635, "link": "https://stackoverflow.com/questions/31822635/second-largest-number-of-3-4-numbers-using-ternary-operator-in-c/31827740#31827740", "title": "Second Largest Number (of 3/4 numbers) using Ternary Operator in C?", "body": "<p>I don't think there is an overly clever trick to get the second largest number with ternary operators. But you can make use of the ternary operation for getting the smallest number:</p>\n\n<pre><code>int min(int a, int b) {\n    return (a &lt; b)? a : b;\n}\n\n\nint secondLargest(int a, int b, int c) {\n    return (a &lt; b &amp;&amp; a &lt; c)? min(b, c) : \n           (b &lt; a &amp;&amp; b &lt; c)? min(a, c) :\n                             min(a, b);\n}\n</code></pre>\n\n<p>For 4 numbers we can make use of the previously defined functions:</p>\n\n<pre><code>int secondLargest(int a, int b, int c, int d) {\n    int minVar = (min(a, b), min(c, d))\n    return a == minVar? secondLargest(b, c, d) :\n           b == minVar? secondLargest(a, c, d) :\n           c == minVar? secondLargest(a, b, d) :\n                        secondLargest(a, b, c) :\n}\n</code></pre>\n\n<p>You can keep this up for arbitrarily large numbers of variables but at some point it just makes more sense to sort them in an array and then read out the next-to-last entry.</p>\n"}, {"tags": [], "owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "is_accepted": false, "score": 0, "last_activity_date": 1438769324, "creation_date": 1438769324, "answer_id": 31829422, "question_id": 31822635, "link": "https://stackoverflow.com/questions/31822635/second-largest-number-of-3-4-numbers-using-ternary-operator-in-c/31829422#31829422", "title": "Second Largest Number (of 3/4 numbers) using Ternary Operator in C?", "body": "<p>You can get the second largest of 3 numbers (<code>a</code>,<code>b</code> and <code>c</code>) using the ternary operator as follows:</p>\n\n<pre><code>int x = (a &gt;= b &amp;&amp; a &gt;= c) ? ((b &gt;= c) ? b : c) : \n    ((b &gt;= c) ? ((a &gt;= c) ? a : c) : ((a &gt;= b) ? a : b));\n</code></pre>\n\n<p>The idea is to find which is the largest, then pick the largest of the other two -- the largest value other than the largest of all three.  </p>\n\n<p>In the above, <code>(a &gt;= b &amp;&amp; a &gt;= c)</code> will be <em>true</em> if a is the largest (larger than <code>b</code> and <code>c</code>)... If it is, the result is <code>((b &gt;= c) ? b : c)</code>, which gives the larger of <code>b</code> and <code>c</code>.  </p>\n\n<p>If <code>a</code> was <em>not</em> the largest, we evaluate <code>((b &gt;= c) ? ((a &gt;= c) ? a : c) : ((a &gt;= b) ? a : b))</code>.  In that, <code>(b &gt;= c)</code> checks whether <code>b</code> is the largest of the three (we already know <code>a</code> isn't, so we just compare <code>b</code> and <code>c</code>)... and if <code>b</code> is the largest of the three, we use <code>((a &gt;= c) ? a : c)</code> to get the largest of <code>a</code> and <code>c</code>.</p>\n\n<p>If neither <code>a</code> nor <code>b</code> is the largest, then <code>c</code> must be... so we evaluate <code>((a &gt;= b) ? a : b)</code> to get the largest of <code>a</code> and <code>b</code>.</p>\n\n<p>The same pattern can be extended to four numbers instead of three... but even with three it's getting quite long, and it would probably make more sense to use a (possibly inline) function with a more straightforward method instead.</p>\n"}], "owner": {"reputation": 1035, "user_id": 1248133, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/83596ba5910508ed09b3d7bef8e528d8?s=128&d=identicon&r=PG", "display_name": "Amruth Pillai", "link": "https://stackoverflow.com/users/1248133/amruth-pillai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5213, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1439542277, "creation_date": 1438743114, "last_edit_date": 1438743222, "question_id": 31822635, "link": "https://stackoverflow.com/questions/31822635/second-largest-number-of-3-4-numbers-using-ternary-operator-in-c", "title": "Second Largest Number (of 3/4 numbers) using Ternary Operator in C?", "body": "<p>All the examples online for ternary operators just have the method to find the largest number.</p>\n\n<p>Is it possible to devise a code to find the second largest number of 3 or 4 numbers using ternary operators?</p>\n"}, {"tags": ["c", "operating-system"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 3, "creation_date": 1438742097, "post_id": 31822467, "comment_id": 51569418, "body": "Certainly, why not? If you want the memory cleared,memset() it yourself, or use calloc(). Memory freed by free() isn&#39;t returned to the OS at all, it is pooled."}, {"owner": {"reputation": 13, "user_id": 3333126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3203825ca0c68199ab9c057ce7965f?s=128&d=identicon&r=PG&f=1", "display_name": "j29392", "link": "https://stackoverflow.com/users/3333126/j29392"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1438742464, "post_id": 31822467, "comment_id": 51569499, "body": "Thats exactly what i thought, but just needed some confirmation. Thanks!"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 1, "creation_date": 1438742630, "post_id": 31822467, "comment_id": 51569536, "body": "The fact that you are detecting old data in the <code>malloc</code>ed data structures suggests that you are doing something wrong by reading it before it has been written."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438742775, "post_id": 31822467, "comment_id": 51569569, "body": "Do not add C++ tag for C questions!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1438742891, "post_id": 31822467, "comment_id": 51569594, "body": "@EJP: That depends on the actual implementation. Whether a block is pooled or returned to the OS depends on various factors, one of them being the OS."}, {"owner": {"reputation": 13, "user_id": 3333126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3203825ca0c68199ab9c057ce7965f?s=128&d=identicon&r=PG&f=1", "display_name": "j29392", "link": "https://stackoverflow.com/users/3333126/j29392"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1438742896, "post_id": 31822467, "comment_id": 51569596, "body": "@Arkku Read, write order actually doesn&#39;t matter here. I am not writing the same number of bytes I am reading every time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438743116, "post_id": 31822467, "comment_id": 51569639, "body": "What is the problem? You have to initialize dynamic memory anyway, as it is not guaranteed to be zeroed by <code>malloc</code>."}, {"owner": {"reputation": 13, "user_id": 3333126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3203825ca0c68199ab9c057ce7965f?s=128&d=identicon&r=PG&f=1", "display_name": "j29392", "link": "https://stackoverflow.com/users/3333126/j29392"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438743272, "post_id": 31822467, "comment_id": 51569671, "body": "@Olaf I was under the impression that malloc is used in C++ as well. There is no problem, just curiosity that is it possible for malloc to behave like this or i am doing something wrong while reading/writing?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438743324, "post_id": 31822467, "comment_id": 51569682, "body": "In C++, you would normally use <code>new</code> which can be overloaded. Whether <i>that</i> uses <code>malloc</code> in turn is a different question. However, your code is not valid C++, as C++ requires to cast <code>void *</code> - which you should <b>not</b> do in C. Both for reasons of type-checking actually."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1438743717, "post_id": 31822467, "comment_id": 51569779, "body": "@j29392 If you are reading more bytes than were written, those bytes should include a length to convey this information so that you don&#39;t access the ones that weren&#39;t written."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438743811, "post_id": 31822467, "comment_id": 51569806, "body": "@Olaf It applies to every implementation I have ever used, including my own, over a period of more than thirty years."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438754481, "post_id": 31822467, "comment_id": 51572700, "body": "&quot;<i>I want to clear all the data structures before it starts a new message. So I just free the pointers and mallo them back.</i>&quot; if the size allocated does not change, this approach is inefficient and useless, as you need to initialise the freshly allocated memory anyways (in one way or the other)."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1438768525, "post_id": 31822467, "comment_id": 51580957, "body": "Just to be clear, because no one has explicitly said it: <b>You must not, under any circumstances, rely on malloc() returning the same memory you just free()d</b>. That would be undefined behavior and an invitation to horrific bugs."}, {"owner": {"reputation": 13, "user_id": 3333126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3203825ca0c68199ab9c057ce7965f?s=128&d=identicon&r=PG&f=1", "display_name": "j29392", "link": "https://stackoverflow.com/users/3333126/j29392"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438782769, "post_id": 31822467, "comment_id": 51590888, "body": "@alk Yeah i agree its inefficient. Memset() is much better option!"}, {"owner": {"reputation": 13, "user_id": 3333126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3203825ca0c68199ab9c057ce7965f?s=128&d=identicon&r=PG&f=1", "display_name": "j29392", "link": "https://stackoverflow.com/users/3333126/j29392"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1438782814, "post_id": 31822467, "comment_id": 51590926, "body": "@EOF I am not expecting it to return same pointer, i want to avoid it!"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1438799592, "post_id": 31822467, "comment_id": 51601905, "body": "Why do you want to avoid getting the same memory again? You&#39;re not supposed to care. Also, a C program <i>cannot</i> avoid this, because you can&#39;t even compare the newly <code>malloc()</code>ed pointer to the <code>free()</code>d pointer. You might chose a C-library that goes above and beyond the requirements of C though. AFAIK, <code>openBSD</code>&#39;s <code>malloc()</code> can do something like you ask for."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3333126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3203825ca0c68199ab9c057ce7965f?s=128&d=identicon&r=PG&f=1", "display_name": "j29392", "link": "https://stackoverflow.com/users/3333126/j29392"}, "edited": false, "score": 0, "creation_date": 1438742684, "post_id": 31822531, "comment_id": 51569546, "body": "I think its an open and shut case then!! Thanks!"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "edited": false, "score": 1, "creation_date": 1438775256, "post_id": 31822531, "comment_id": 51585253, "body": "Worth clarifying that this is likely in practice, and that the standard allows for it, but that this is implementation-specific behaviour."}], "tags": [], "owner": {"reputation": 546, "user_id": 5187267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d634c4577edddc8d1a3a1cdd3b514105?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Spencer", "link": "https://stackoverflow.com/users/5187267/charles-spencer"}, "is_accepted": false, "score": 3, "last_activity_date": 1438742404, "creation_date": 1438742404, "answer_id": 31822531, "question_id": 31822467, "link": "https://stackoverflow.com/questions/31822467/is-it-possible-for-malloc-called-just-after-free-to-return-pointer-pointing/31822531#31822531", "title": "Is it possible for malloc(), called just after free() to return pointer pointing to same freed memory?", "body": "<p>Yes, this is entirely possible.  When you call free, the memory manager will mark that section of memory as a fragment, possibly combining it with an adjacent fragment, but it will not set the data to all zeroes.  The <code>malloc()</code> function also does not set all the data to all zeroes.</p>\n\n<p>If, for example, the <code>free()</code> is called for the first time in your program and immediately followed by a <code>malloc()</code> for an equal or lesser amount of memory, it's entirely possible that the memory manager will reuse the old fragment.</p>\n"}], "owner": {"reputation": 13, "user_id": 3333126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3203825ca0c68199ab9c057ce7965f?s=128&d=identicon&r=PG&f=1", "display_name": "j29392", "link": "https://stackoverflow.com/users/3333126/j29392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438742761, "creation_date": 1438741978, "last_edit_date": 1438742761, "question_id": 31822467, "link": "https://stackoverflow.com/questions/31822467/is-it-possible-for-malloc-called-just-after-free-to-return-pointer-pointing", "title": "Is it possible for malloc(), called just after free() to return pointer pointing to same freed memory?", "body": "<p>I am writing an application which is continuously running in while(1) and waits for an interrupt (basically a RING) to decode the message. So when I successfully decode the message, i just need to print it and starts waiting for another interrupt (a new message). </p>\n\n<p>I want to clear all the data structures before it starts a new message. So I just free the pointers and mallo them back. But when I did that, there were still some fields in the data structures containing old data. So I just used calloc() to zeroed out all the memory inorder to clear old data.</p>\n\n<p>I know the memory freed by calling free is not return to OS straight away, it still lies in the pool of free memory but is it possible for malloc to return the same freed memory?</p>\n\n<pre><code>if(res){                               // If decoded successfully\n        display_CID_info(cs, cs_data); // Display CallerID message\n        free(cs);                      // Free the CID data structure\n        free(cs_data);                 // Free message data structure\n\n        /* Allocate Data structures again for next iteration */\n        cs_data = malloc(sizeof(cid_data));\n        cs = calloc(1, sizeof(*cid));\n    }\n</code></pre>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1438743573, "post_id": 31822244, "comment_id": 51569746, "body": "This is a feature of the dialog manager. If you don&#39;t want to use a dialog, you can use <code>IsDialogMessage</code> and manage the default ID with the DEFID messages noted below."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4344762"}, "edited": false, "score": 0, "creation_date": 1438740677, "post_id": 31822287, "comment_id": 51569137, "body": "Sorry, I forget to mention that I am not using Resources."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438741146, "post_id": 31822287, "comment_id": 51569224, "body": "@joseph_m What do you mean? You don&#39;t have a real dialog?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4344762"}, "edited": false, "score": 0, "creation_date": 1438741287, "post_id": 31822287, "comment_id": 51569244, "body": "I am using <code>CreateWindowEx()</code> to create all Windows."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1438741351, "post_id": 31822287, "comment_id": 51569255, "body": "Ok well in that case you have to to do it yourself using <code>BM_SETSTYLE</code>, and you&#39;ll be responsible for handling the return key press and executing the default action. And please mention things like that in future to avoid wasting peoples&#39; time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4344762"}, "edited": false, "score": 3, "creation_date": 1438741534, "post_id": 31822287, "comment_id": 51569302, "body": "Well, in all of my other WinAPI questions I did not mention that I am not using Resources, so I thought that if I am using Resources I should mention it."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 4, "creation_date": 1438741634, "post_id": 31822287, "comment_id": 51569319, "body": "You should mention everything that is relevant to your question to make it easier for the people who are trying to help you to actually help you instead of waste time."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1438749197, "post_id": 31822287, "comment_id": 51571065, "body": "And don&#39;t assume that people have read your previous questions.  Each new questions needs to be self-explanatory. Always include relevant details."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 5, "last_activity_date": 1438740555, "creation_date": 1438740555, "answer_id": 31822287, "question_id": 31822244, "link": "https://stackoverflow.com/questions/31822244/how-to-set-button-as-default-on-click/31822287#31822287", "title": "How to set button as default on click?", "body": "<p>Send <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645413(v=vs.85).aspx\" rel=\"noreferrer\"><code>DM_SETDEFID</code></a> to the Dialog Box to change the default button ID. Take note of the following though:</p>\n\n<blockquote>\n  <p>Using the DM_SETDEFID message can result in more than one button\n  appearing to have the default push button state. When the system\n  brings up a dialog, it draws the first push button in the dialog\n  template with the default state border. Sending a DM_SETDEFID message\n  to change the default button will not always remove the default state\n  border from the first push button. In these cases, the application\n  should send a BM_SETSTYLE message to change the first push button\n  border style</p>\n</blockquote>\n\n<p>So as well as sending <code>DM_SETDEFID</code> to set the new default button, you should send <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb761824(v=vs.85).aspx\" rel=\"noreferrer\"><code>BM_SETSTYLE</code></a> to the <strong>old</strong> default button to clear the <code>BS_DEFPUSHBUTTON</code> style.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4344762"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438740555, "creation_date": 1438740272, "question_id": 31822244, "link": "https://stackoverflow.com/questions/31822244/how-to-set-button-as-default-on-click", "title": "How to set button as default on click?", "body": "<p>This is an example of two buttons from the Font dialog in Windows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/icHFB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/icHFB.png\" alt=\"enter image description here\"></a></p>\n\n<p>The OK button is the default button, if I click on the Cancel button (mouse down), then the Cancel button will become the default.</p>\n\n<p>How can I achieve this in WinAPI, should I handle the mouse down event of each button, and add to the button that was clicked the <code>BS_DEFPUSHBUTTON</code> style and remove this style from the other buttons?</p>\n"}, {"tags": ["c", "arrays", "memory-management"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 2, "creation_date": 1438737196, "post_id": 31821857, "comment_id": 51568361, "body": "Have you run your program through gdb?"}, {"owner": {"reputation": 608, "user_id": 1828193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/22c498903307d42a9cb2b7142f6b73f2?s=128&d=identicon&r=PG", "display_name": "Pepedou", "link": "https://stackoverflow.com/users/1828193/pepedou"}, "edited": false, "score": 0, "creation_date": 1438737206, "post_id": 31821857, "comment_id": 51568363, "body": "You should check if DAP isn&#39;t NULL before calling DAP-&gt;Items or DAP-&gt;maxsize or if DAP-&gt;items is a valid pointer."}, {"owner": {"reputation": 1208, "user_id": 1923959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/52b5f89646c1141e0b6410b9d49d8cc7?s=128&d=identicon&r=PG", "display_name": "twentylemon", "link": "https://stackoverflow.com/users/1923959/twentylemon"}, "edited": false, "score": 2, "creation_date": 1438737413, "post_id": 31821857, "comment_id": 51568410, "body": "dereferencing null pointer in your <code>init</code> call"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1438737524, "post_id": 31821857, "comment_id": 51568449, "body": "If you remove the factor <code>2</code> and resize as <code>DAP-&gt;maxsize * sizeof(int)</code>, then you aren&#39;t really increasing the size.  What else can you resize as?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1438737733, "post_id": 31821857, "comment_id": 51568494, "body": "Standard warning: Do not cast <code>void *</code> as returned by <code>malloc</code> &amp; friends. C is not C++."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438737881, "post_id": 31821857, "comment_id": 51568520, "body": "Note: do not use all-uppercase names for variables. It is one of the  few commonly accepted naming styles in C to use all-uppercase identifiers for macros and enum-constants only."}, {"owner": {"reputation": 505, "user_id": 3311433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8e89a48206e4eb6181cd7a1c18156a73?s=128&d=identicon&r=PG&f=1", "display_name": "Htlcs", "link": "https://stackoverflow.com/users/3311433/htlcs"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1438738213, "post_id": 31821857, "comment_id": 51568583, "body": "@TimBiegeleisen -&gt; Yes your are right and I know that it won&#39;t resize. But when I add the factor of 2 it gives me a segmentation fault error and doesn&#39;t compile further. If I remove the factor 2 or one of the factors, it compiles the entire program without the segmentation fault."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 2, "creation_date": 1438738319, "post_id": 31821857, "comment_id": 51568603, "body": "In your code there are a lot of <code>(DAP-&gt;items + sizeof(int) * i);</code> which will go out of bounds. The increment uses the pointer type so <code>DAP-&gt;items + i;</code> is what you want in these cases."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1438738366, "post_id": 31821857, "comment_id": 51568612, "body": "Memory corruption in <code>addToSize()</code>: <code>int* location = DAP-&gt;items + (sizeof(int) * DAP-&gt;size);</code>. Should be <code>int* location = DAP-&gt;items + DAP-&gt;size;</code>. Likely causing junk values to be passed to <code>realloc</code> later on."}, {"owner": {"reputation": 505, "user_id": 3311433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8e89a48206e4eb6181cd7a1c18156a73?s=128&d=identicon&r=PG&f=1", "display_name": "Htlcs", "link": "https://stackoverflow.com/users/3311433/htlcs"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1438738758, "post_id": 31821857, "comment_id": 51568702, "body": "@AlanAu - PERFECT! Thanks a lot. May I know in such situations how do I know there was a memory corruption on that line? The error &quot;Segmentation Fault&quot; doesn&#39;t really help much in such cases."}, {"owner": {"reputation": 505, "user_id": 3311433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8e89a48206e4eb6181cd7a1c18156a73?s=128&d=identicon&r=PG&f=1", "display_name": "Htlcs", "link": "https://stackoverflow.com/users/3311433/htlcs"}, "edited": false, "score": 0, "creation_date": 1438738852, "post_id": 31821857, "comment_id": 51568731, "body": "I don&#39;t understand why someone would downvote this question. It was a legit question in my opinion and I got the solution from the person who actually understood my problem"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1438739022, "post_id": 31821857, "comment_id": 51568774, "body": "@Htlcs As suggested in the answer by dbush, valgrind is your friend for all memory related issues (it helps for other classes of problems too). valgrind would almost certainly have picked that up straight off the bat."}], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 3311433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8e89a48206e4eb6181cd7a1c18156a73?s=128&d=identicon&r=PG&f=1", "display_name": "Htlcs", "link": "https://stackoverflow.com/users/3311433/htlcs"}, "edited": false, "score": 0, "creation_date": 1438739148, "post_id": 31822038, "comment_id": 51568797, "body": "Thanks a lot!! very very very helpful"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1438739394, "last_edit_date": 1438739394, "creation_date": 1438738561, "answer_id": 31822038, "question_id": 31821857, "link": "https://stackoverflow.com/questions/31821857/weird-segmentation-fault-error-in-c/31822038#31822038", "title": "Weird Segmentation fault error in C", "body": "<p>There are two issues I found.  First in <code>addToSize</code>:</p>\n\n<pre><code>int* location = DAP-&gt;items + (sizeof(int) * DAP-&gt;size);\n</code></pre>\n\n<p>Pointer arithmetic automatically knows to increase the pointer by increments of the pointer size, so multiplying by <code>sizeof(int)</code> causing you to go off the end of the array, resulting in undefined behavior.  You should instead do this:</p>\n\n<pre><code>int* location = DAP-&gt;items + DAP-&gt;size;\n</code></pre>\n\n<p>Similarly in <code>print</code>:</p>\n\n<pre><code>int* itemLocation = (DAP-&gt;items + sizeof(int) * i);\n</code></pre>\n\n<p>Should instead be:</p>\n\n<pre><code>int* itemLocation = DAP-&gt;items + i;\n</code></pre>\n\n<p>For issues like this, Valgrind is very helpful in discovering them.</p>\n\n<p>Edit:</p>\n\n<p>Here's what valgrind showed when I ran your code through it.  The first message stating \"Invalid write of size 4\" points exactly to where the problem is.  </p>\n\n<pre><code>[dbush@db-centos tmp]$ valgrind --leak-check=full ./x1\n==8270== Memcheck, a memory error detector\n==8270== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.\n==8270== Using Valgrind-3.5.0 and LibVEX; rerun with -h for copyright info\n==8270== Command: ./x1\n==8270== \n\n AFTER ADDING TO ITEMS, location, VALUE  0 1 \n\n AFTER ADDING TO ITEMS, location, VALUE  1 2 \n==8270== Invalid write of size 4\n==8270==    at 0x80485F6: addToSize (x1.c:78)\n==8270==    by 0x8048530: add (x1.c:49)\n==8270==    by 0x8048721: main (x1.c:124)\n==8270==  Address 0x401a048 is 12 bytes after a block of size 20 alloc'd\n==8270==    at 0x4005B83: malloc (vg_replace_malloc.c:195)\n==8270==    by 0x8048475: init (x1.c:22)\n==8270==    by 0x8048701: main (x1.c:119)\n==8270== \n==8270== Invalid read of size 4\n==8270==    at 0x80485FB: addToSize (x1.c:79)\n==8270==    by 0x8048530: add (x1.c:49)\n==8270==    by 0x8048721: main (x1.c:124)\n==8270==  Address 0x401a048 is 12 bytes after a block of size 20 alloc'd\n==8270==    at 0x4005B83: malloc (vg_replace_malloc.c:195)\n==8270==    by 0x8048475: init (x1.c:22)\n==8270==    by 0x8048701: main (x1.c:119)\n==8270== \n\n\n AFTER ADDING TO ITEMS, location, VALUE  2 3 \n\n AFTER ADDING TO ITEMS, location, VALUE  3 4 \n\n AFTER ADDING TO ITEMS, location, VALUE  4 5 \n\n ********************* REALLOCATING AS SIZE == MAX SIZE 5 5 ********************* \n--8270-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV) - exiting\n--8270-- si_code=1;  Faulting address: 0x48;  sp: 0x62a01ddc\n\nvalgrind: the 'impossible' happened:\n   Killed by fatal signal\n==8270==    at 0x380348EE: vgPlain_arena_malloc (m_mallocfree.c:244)\n==8270==    by 0x380637F7: vgPlain_cli_malloc (replacemalloc_core.c:86)\n==8270==    by 0x38002AD3: vgMemCheck_realloc (mc_malloc_wrappers.c:423)\n==8270==    by 0x3806420B: do_client_request (scheduler.c:1370)\n==8270==    by 0x380659CE: vgPlain_scheduler (scheduler.c:1061)\n==8270==    by 0x3808E9F8: run_a_thread_NORETURN (syswrap-linux.c:91)\n\nsched status:\n  running_tid=1\n\nThread 1: status = VgTs_Runnable\n==8270==    at 0x4005C82: realloc (vg_replace_malloc.c:476)\n==8270==    by 0x804864B: grow (x1.c:85)\n==8270==    by 0x804855C: add (x1.c:54)\n==8270==    by 0x8048721: main (x1.c:124)\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 3311433, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8e89a48206e4eb6181cd7a1c18156a73?s=128&d=identicon&r=PG&f=1", "display_name": "Htlcs", "link": "https://stackoverflow.com/users/3311433/htlcs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 31822038, "answer_count": 1, "score": -2, "last_activity_date": 1438739394, "creation_date": 1438737023, "last_edit_date": 1438739089, "question_id": 31821857, "link": "https://stackoverflow.com/questions/31821857/weird-segmentation-fault-error-in-c", "title": "Weird Segmentation fault error in C", "body": "<p>I am on mac ox. I am trying to compile this simple program of Dynamic Array but I am getting a segmentation fault on realloc I believe when I try to grow my array</p>\n\n<p>Here is the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nenum { MAX_SIZE = 5 };\n\ntypedef struct dynamic_array{\n    int maxsize;\n    int size;\n        int* items;\n}DArray;\n\nextern int  init(DArray *DAP);\nextern void add(DArray *DAP, int val);\nextern void addToSize(DArray *DAP,int val);\nextern void destroy(DArray *DAP);\nextern void print(DArray *DAP);\nstatic int  full(DArray *DAP);\nstatic int  grow(DArray *DAP);\n\nint init(DArray* DAP)\n{\n    DAP-&gt;items = (int*)malloc(sizeof(int) * MAX_SIZE);\n    if(DAP-&gt;items == NULL)\n        {\n        printf(\" ALLOCATION OF DAP ITEMS NOT SUCCUESSFULL \\n \");\n        return 0;\n    }\n    DAP-&gt;maxsize = MAX_SIZE;\n        DAP-&gt;size = 0; //initial size -&gt; 0\n    return 1;\n}\n\nvoid print(DArray* DAP)\n{\n    int i;\n    for(i = 0; i &lt; DAP-&gt;size; i++)\n    {\n        int* itemLocation = (DAP-&gt;items + sizeof(int) * i);\n        printf(\" \\n ITEM AT LOCATION %d is %d \\n \",i,*itemLocation);\n    }\n}\n\nvoid add(DArray* DAP,int value)\n{\n    //add item at the end of the array, we can get the position by size counter?\n    if(full(DAP) == 0)\n    {\n                addToSize(DAP,value);\n    }\n    else\n    {\n        printf(\" \\n ********************* REALLOCATING AS SIZE == MAX SIZE %d %d ********************* \\n \",DAP-&gt;size, DAP-&gt;maxsize);\n        int result =  grow(DAP) == 1 ? 1 : 0;\n        if(result == 0)\n        {\n            printf(\" \\n ********************* GROW NOT SUCCESSFULL ********************* \\n \" );    \n        }else if(result == 1)\n        {\n            printf(\" \\n ********************* GROW SUCCESSFULL *************************** \\n \");\n            addToSize(DAP,value);\n        }\n        else\n            exit(1);\n    }\n}\n\nint full(DArray* DAP)\n{\n    int result = DAP-&gt;size == DAP-&gt;maxsize ? 1 : 0;\n    return result;\n}\n\nvoid addToSize(DArray* DAP,int value)\n{\n        int* location = DAP-&gt;items + DAP-&gt;size;\n        *location = value+1;\n        printf(\" \\n AFTER ADDING TO ITEMS, location, VALUE  %d %d \\n \", DAP-&gt;size,*location);   \n        DAP-&gt;size++;\n}\n\nint grow(DArray* DAP)\n{\n    int* temp = (int *)realloc(DAP-&gt;items,DAP-&gt;maxsize * sizeof(int) * 2);\n    if(!temp)\n    {\n        printf(\" ********************* REALLOC NOT SUCCESSFULL ********************* \\n \");\n        return 0;\n    }\n    else\n    {\n        DAP-&gt;items = temp;\n        DAP-&gt;maxsize *= 2;\n        //sanity check\n        printf(\" \\n ********************* AFTER REALLOCATION CHECK AGAIN ********************* \\n \");\n        print(DAP);\n        return 1;\n    }\n}\n\nvoid destroy(DArray* DAP)\n{\n    if(DAP != NULL)\n    {\n        if(DAP-&gt;items != NULL)\n        {\n            free(DAP-&gt;items);\n              DAP-&gt;items = 0;\n              DAP-&gt;maxsize = 0;\n                  DAP-&gt;size = 0;\n        }\n    }\n}\n\nint main()\n{\n    DArray darray;\n    if(init(&amp;darray) == 1)\n    {\n        int i;\n        for(i = 0; i &lt; 10; i++)\n        {\n            add(&amp;darray,i);\n        }\n    }\n\n    print(&amp;darray);\n    destroy(&amp;darray);\n\n    return 0;\n}\n</code></pre>\n\n<p>Now the weird part is in my realloc for the 2nd parameter where I declare the size element as -> <code>DAP-&gt;maxsize * sizeof(int) * 2</code>, it throws the segmentation fault when the array grow is called. Weirdly now, if I try to remove one of the constants to multiply something like just <code>DAP-&gt;maxsize * sizeof(int)</code> then it doesn't throw the segmentation fault error. I am not sure if something is wrong in my code or somewhere else. </p>\n\n<p>******** Found the problem *********</p>\n\n<p>The issue was inside the addToSize function. Changing the line of code from int* <code>location = DAP-&gt;items + (sizeof(int) * DAP-&gt;size);</code> to <code>int* location = DAP-&gt;items + DAP-&gt;size;</code> solved it. Apparently the sizeof(int) caused some junk values to be passed in realloc. Thanks to Alan for this!</p>\n"}, {"tags": ["c++", "c", "xml", "xml-parsing"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438736152, "post_id": 31821699, "comment_id": 51568128, "body": "There is no language &quot;C/C++&quot;. Pick one."}, {"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 1, "creation_date": 1438736171, "post_id": 31821699, "comment_id": 51568132, "body": "Do you want a theoretical &quot;best practice&quot; answer? Because this sounds like you&#39;re asking for a library, which would be off-topic."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1438736171, "post_id": 31821699, "comment_id": 51568133, "body": "You start by finding a library that does it for you. Trust me, writing a parser for XML (unless the XML data you want to parse is very small and very basic) is not something one does in a day or two, or even a <i>week</i> or two."}, {"owner": {"reputation": 1781, "user_id": 965748, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/681b20e9216a8a10782674fa400333f6?s=128&d=identicon&r=PG", "display_name": "user965748", "link": "https://stackoverflow.com/users/965748/user965748"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1438736504, "post_id": 31821699, "comment_id": 51568192, "body": "@user657267: It might be a theoretical answer."}, {"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 1, "creation_date": 1438736580, "post_id": 31821699, "comment_id": 51568212, "body": "@user965748 You might want to change the question then, &quot;most convenient&quot; is very subjective."}, {"owner": {"reputation": 1781, "user_id": 965748, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/681b20e9216a8a10782674fa400333f6?s=128&d=identicon&r=PG", "display_name": "user965748", "link": "https://stackoverflow.com/users/965748/user965748"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1438736716, "post_id": 31821699, "comment_id": 51568245, "body": "@user657267: changed to: easiest way to write such a code"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1438736820, "post_id": 31821699, "comment_id": 51568274, "body": "Small, fast and easy to use: <a href=\"http://pugixml.org/\" rel=\"nofollow noreferrer\">pugixml</a>. Its not &#39;feature complete&#39; though."}, {"owner": {"reputation": 1208, "user_id": 1923959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/52b5f89646c1141e0b6410b9d49d8cc7?s=128&d=identicon&r=PG", "display_name": "twentylemon", "link": "https://stackoverflow.com/users/1923959/twentylemon"}, "edited": false, "score": 1, "creation_date": 1438736895, "post_id": 31821699, "comment_id": 51568282, "body": "boost&#39;s property tree can handle xml files. It&#39;s not &quot;complete&quot; - the xml must be structured like a tree, no back-referencing or things like that."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 1, "last_activity_date": 1438736876, "creation_date": 1438736876, "answer_id": 31821835, "question_id": 31821699, "link": "https://stackoverflow.com/questions/31821699/parsing-an-xml-file-forest-of-binary-trees-in-c-c/31821835#31821835", "title": "Parsing an XML file ( forest of binary trees ) in C/ C++", "body": "<p>libxml, the Gnome XML library, provides a fairly simple, but full-featured XML parser.</p>\n\n<p><a href=\"http://www.xmlsoft.org/\" rel=\"nofollow\">http://www.xmlsoft.org/</a></p>\n\n<p>It's mostly a C library, and although there is a C++ facade for it, I often found it easier to write my own, light, wrapper around it's C interface. Since Gnome uses it, libxml is included in all Linux distributions.</p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 3981203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fzSg5.jpg?s=128&g=1", "display_name": "cwfighter", "link": "https://stackoverflow.com/users/3981203/cwfighter"}, "is_accepted": false, "score": 1, "last_activity_date": 1438745004, "creation_date": 1438745004, "answer_id": 31822901, "question_id": 31821699, "link": "https://stackoverflow.com/questions/31821699/parsing-an-xml-file-forest-of-binary-trees-in-c-c/31822901#31822901", "title": "Parsing an XML file ( forest of binary trees ) in C/ C++", "body": "<p>You can use <code>boost library header</code> by <code>#include &lt;boost/property_tree/xml_parser.hpp&gt;</code>. So you should install <code>boost</code>, and then link it. For more details about its usage, you can see <a href=\"http://www.boost.org/doc/libs/1_58_0/doc/html/property_tree/reference.html#header.boost.property_tree.xml_parser_hpp\" rel=\"nofollow\">boost</a>. I hope this can help you.</p>\n"}], "owner": {"reputation": 1781, "user_id": 965748, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/681b20e9216a8a10782674fa400333f6?s=128&d=identicon&r=PG", "display_name": "user965748", "link": "https://stackoverflow.com/users/965748/user965748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1439262492, "accepted_answer_id": 31821835, "answer_count": 2, "score": 0, "last_activity_date": 1438745004, "creation_date": 1438735946, "last_edit_date": 1495541172, "question_id": 31821699, "link": "https://stackoverflow.com/questions/31821699/parsing-an-xml-file-forest-of-binary-trees-in-c-c", "closed_reason": "Needs more focus", "title": "Parsing an XML file ( forest of binary trees ) in C/ C++", "body": "<p>I'd like to parse a medium to large XML file on 64-bit Linux with C/ C++. What is the easiest way to write such a code?\nThe details about the XML are contained in this question <a href=\"https://stackoverflow.com/questions/29223415/working-with-a-forest-of-binary-trees-stored-in-a-large-xml-file-php\">Working with a forest of binary trees stored in a large XML file (PHP)</a></p>\n"}, {"tags": ["c#", "c", "oop"], "comments": [{"owner": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "edited": false, "score": 4, "creation_date": 1438731967, "post_id": 31821167, "comment_id": 51567142, "body": "Pain... lots of pain. Unfortunately, even having done game programming in C, I&#39;m not sure how to answer this as it is awfully broad. Could you narrow down the scope a bit?"}, {"owner": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "edited": false, "score": 1, "creation_date": 1438732116, "post_id": 31821167, "comment_id": 51567184, "body": "Considering the answer is probably &quot;It depends&quot; big time, asking in programmers.stackexchange may bring you more luck. But yes, as BradleyDotNET said, very painfully. How familiar are you with C?"}, {"owner": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 1, "creation_date": 1438732154, "post_id": 31821167, "comment_id": 51567199, "body": "Many <code>if</code> statements.  See for instance <a href=\"http://nethack.org/v343/download-src.html\" rel=\"nofollow noreferrer\">NetHack 3.4.3: Download the Source</a>."}, {"owner": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "reply_to_user": {"reputation": 79534, "user_id": 3744182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab1dca8193d1b5734ba07702e963b6e?s=128&d=identicon&r=PG&f=1", "display_name": "dbc", "link": "https://stackoverflow.com/users/3744182/dbc"}, "edited": false, "score": 3, "creation_date": 1438732204, "post_id": 31821167, "comment_id": 51567209, "body": "@dbc Don&#39;t forget about Giant Switch Statements of Doom"}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 6, "creation_date": 1438732291, "post_id": 31821167, "comment_id": 51567227, "body": "What features of OOP are beneficial in game programming? I can only think of single inheritance and polymorphism, both of which you can very easily implement in C. But you can also read actual source code from C games, like DOOM: <a href=\"https://github.com/id-Software/DOOM\" rel=\"nofollow noreferrer\">github.com/id-Software/DOOM</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438732297, "post_id": 31821167, "comment_id": 51567229, "body": "I cannot tell, when I programmed games, Assembler was the way to go."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "edited": false, "score": 0, "creation_date": 1438732466, "post_id": 31821167, "comment_id": 51567270, "body": "@BradleyDotNET: Pain? Not necessarily. At least the code was not bloat with tons of overloaded - thus unused - methods, etc. But it depends on how you programmed back then. 80ies and 90ies game programmer often did not have the experience and hardly knew how to organize their source code, let alone a whole project."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438732606, "post_id": 31821167, "comment_id": 51567298, "body": "And C is <b>not</b> an &quot;intermediate language&quot;. Actually that applies more to C++, C#, etc., as these do not provide <i>full</i> OOP features. That would include strong dynamic typing, metaclasses (clases being first class objects), etc."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "edited": false, "score": 0, "creation_date": 1438732661, "post_id": 31821167, "comment_id": 51567320, "body": "@cost: Poor design is no domain of a specific language."}, {"owner": {"reputation": 14963, "user_id": 834261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxyWz.png?s=128&g=1", "display_name": "hatchet - done with SOverflow", "link": "https://stackoverflow.com/users/834261/hatchet-done-with-soverflow"}, "edited": false, "score": 5, "creation_date": 1438732827, "post_id": 31821167, "comment_id": 51567368, "body": "It is/was possible to write good, maintainable code without OOP. See &quot;Structured Programming&quot; and &quot;Structured Design&quot;, aimed at reducing coupling and increasing cohesion"}, {"owner": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1438732947, "post_id": 31821167, "comment_id": 51567410, "body": "@Olaf Pain for the same reasons <i>any</i> lower-level language is painful. The lack of all that overhead means you are usually doing a <i>ton</i> more work."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "edited": false, "score": 0, "creation_date": 1438733251, "post_id": 31821167, "comment_id": 51567483, "body": "@BradleyDotNET: Or you can concentrate on the basics and do not have to learn tons of libraries, etc. Or waste time to search them if there is a function available already for what you want to do, instead of just writing on your own. There are so many library functions you could write faster on your own, than find them. But if you do, then some idot just asks why you did rewrite this and that, just because he happens to know that particular library."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438733410, "post_id": 31821167, "comment_id": 51567506, "body": "One result of games in OOP are Tetris-alike games which require a Radeon 280X+, quad core CPU and 8GiB RAM."}, {"owner": {"reputation": 986, "user_id": 4208297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c18d389b9e93f6d63c1a8256654b3dae?s=128&d=identicon&r=PG&f=1", "display_name": "PrimRock", "link": "https://stackoverflow.com/users/4208297/primrock"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438733468, "post_id": 31821167, "comment_id": 51567521, "body": "@Olaf I was taught that C# was a high-level language"}, {"owner": {"reputation": 986, "user_id": 4208297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c18d389b9e93f6d63c1a8256654b3dae?s=128&d=identicon&r=PG&f=1", "display_name": "PrimRock", "link": "https://stackoverflow.com/users/4208297/primrock"}, "edited": false, "score": 0, "creation_date": 1438733516, "post_id": 31821167, "comment_id": 51567532, "body": "I have no experience in C, and I don&#39;t plan on learning it at the moment. So I&#39;m not too familiar with it"}, {"owner": {"reputation": 986, "user_id": 4208297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c18d389b9e93f6d63c1a8256654b3dae?s=128&d=identicon&r=PG&f=1", "display_name": "PrimRock", "link": "https://stackoverflow.com/users/4208297/primrock"}, "edited": false, "score": 0, "creation_date": 1438733697, "post_id": 31821167, "comment_id": 51567576, "body": "Also, I got pretty much a good idea of how things work reading the comments. I really wasn&#39;t looking for a extremely detailed answer. All I really was looking for something generic.   For example, I just want to know how non-OOP code would look in game development, seeing that C# pretty covers up a lot being a high level language and all..."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1438733843, "post_id": 31821167, "comment_id": 51567621, "body": "With astronomically lower budgets, lower runtime resource requirements, and much more entertaining results. :-)"}, {"owner": {"reputation": 986, "user_id": 4208297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c18d389b9e93f6d63c1a8256654b3dae?s=128&d=identicon&r=PG&f=1", "display_name": "PrimRock", "link": "https://stackoverflow.com/users/4208297/primrock"}, "edited": false, "score": 0, "creation_date": 1438734008, "post_id": 31821167, "comment_id": 51567665, "body": "I think its best for me to take a look at source codes of really simple games made in C to get an idea of how non-OOP looks. Thanks guys I appreciate the answers!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438734343, "post_id": 31821167, "comment_id": 51567732, "body": "@izuhu: You cannot judge a language until you have at least some experience in it. And: High level is relative. There is always a higher level. C is a true procedural, modular language. The worst (here) is it is missing user-namespaces - per module/compilation unit would be sufficient. Not that I am happy with all its quirks, but if you know it and use a good coding style, you can work pretty fast and stable. Depending on the project, even faster than in most OOP languages."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438734781, "post_id": 31821167, "comment_id": 51567829, "body": "About your edit: <code>Object objs[10]; ... for ( i = 0 ; i &lt; 10 ; i++ ) draw(&amp;objs[i]);</code>? Not more code (even less?) than for OOP actually."}, {"owner": {"reputation": 986, "user_id": 4208297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c18d389b9e93f6d63c1a8256654b3dae?s=128&d=identicon&r=PG&f=1", "display_name": "PrimRock", "link": "https://stackoverflow.com/users/4208297/primrock"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438734844, "post_id": 31821167, "comment_id": 51567839, "body": "@Olaf Thanks for the info and clarity. I never really was judging the language. I just was stating what I read and was taught about the language. :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438735001, "post_id": 31821167, "comment_id": 51567879, "body": "&quot;If you only know how to use a hammer, every problem looks like a nail.&quot; Perhaps the people who told you that should try to get a wider picture? Even assembler still has its niche."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1438732937, "post_id": 31821218, "comment_id": 51567407, "body": "Game development in assembler on Atari ST was actually much fun."}, {"owner": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438732976, "post_id": 31821218, "comment_id": 51567417, "body": "@Olaf You have a very odd idea of <i>fun</i> ;)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 57478, "user_id": 1783619, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BIvl.png?s=128&g=1", "display_name": "BradleyDotNET", "link": "https://stackoverflow.com/users/1783619/bradleydotnet"}, "edited": false, "score": 0, "creation_date": 1438733527, "post_id": 31821218, "comment_id": 51567539, "body": "@BradleyDotNET: Not necessarily. It was a very different time back then. I did not say I would do it again that way - but not necessarily in C#/C++ either. The first is bloat, the latter is a syntax-nightmare. Too bad Python is too slow for full 3D games. For casual games, I&#39;d definitively test it, however."}, {"owner": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438733590, "post_id": 31821218, "comment_id": 51567557, "body": "@Olaf From what I&#39;ve read about old Atari development, the greatest saving grace was to comment your code well."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "edited": false, "score": 1, "creation_date": 1438733771, "post_id": 31821218, "comment_id": 51567597, "body": "@cost: I did not just Atari, but also C64, CPC. I still have my Atari code; the others are very likely lost :-(. However, the 68000 (well - macro-assembler, that makes a great difference) has one of the best machine languages and a very good assembler syntax. No comparison with that rubbish x86."}, {"owner": {"reputation": 986, "user_id": 4208297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c18d389b9e93f6d63c1a8256654b3dae?s=128&d=identicon&r=PG&f=1", "display_name": "PrimRock", "link": "https://stackoverflow.com/users/4208297/primrock"}, "edited": false, "score": 0, "creation_date": 1438733883, "post_id": 31821218, "comment_id": 51567634, "body": "@TylerReid I find it funny that you posted this. I tune into this guy&#39;s stream from time to time lol"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "edited": false, "score": 0, "creation_date": 1438733916, "post_id": 31821218, "comment_id": 51567642, "body": "@cost: Regarding commenting code: That is a common recommendation and not specific to Atari. And, of course, you should document assembler code very good. But why would that be specific for Atari-ST?"}, {"owner": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438734415, "post_id": 31821218, "comment_id": 51567749, "body": "@Olaf It wasn&#39;t really geared specifically towards the Atari-ST, as poorly commented code can (and does) exist everywhere. Reading the Atari experiences of others (Atari programming was all before my time), I noticed a common theme of &quot;missing comments made for a very bad time&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4210, "user_id": 478319, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0cc0c0b848464b2bdc6a6b03b1c387c8?s=128&d=identicon&r=PG", "display_name": "cost", "link": "https://stackoverflow.com/users/478319/cost"}, "edited": false, "score": 0, "creation_date": 1438734682, "post_id": 31821218, "comment_id": 51567810, "body": "@cost: Well, I&#39;ve got first class experience. And, yes, not commenting assembler is pretty bad. I still have a very interesting labyrinth-generator code for 68000 here (own code) which is actually poorly documented. OTOH, I now could write such code from scratch easier than analyse that code, because of such experiments and may others, I gained the experience I have today."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438736344, "post_id": 31821218, "comment_id": 51568164, "body": "@Olaf: Feeling envy now. From what I remember I was playing with some shitty Atari BASIC on 65XE (I was eight years old). The assembly instructions were too mysterious for me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1438737286, "post_id": 31821218, "comment_id": 51568382, "body": "@GrzegorzSzpetkowski: I actuylly stated with digital logic (TTL: gates, buttons, LEDs) at the age of 12. Then programming (machine language, no actual hardware), Atari came about 1986 (I was busy with CPC until then). The duality - hardware/software - I still try to cultivate. Sadly, many customers want one or the other, so I tend to start in a project as either. But most times, I somehow get into the position to contribute to both fields - funny enough."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438737471, "post_id": 31821218, "comment_id": 51568435, "body": "I still remember how confused (and upset) I was that I could not easily define the loading address of my program code on the ST, as I was used to on the 8 bit machines. Drove me quite crazy until I accepted it - and never cared thereafter. Man, I fell old now:-}"}], "tags": [], "owner": {"reputation": 482, "user_id": 3105368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0rlnZ.jpg?s=128&g=1", "display_name": "TylerReid", "link": "https://stackoverflow.com/users/3105368/tylerreid"}, "is_accepted": true, "score": 2, "last_activity_date": 1438732192, "creation_date": 1438732192, "answer_id": 31821218, "question_id": 31821167, "link": "https://stackoverflow.com/questions/31821167/how-was-game-development-done-in-c-with-no-oop/31821218#31821218", "title": "How was game development done in C with no OOP?", "body": "<p>There too many points in your question to address, but I recommend watching <a href=\"https://www.youtube.com/channel/UCaTznQhurW5AaiYPbhEA-KA\" rel=\"nofollow\">this series</a> In it, an experienced game dev builds a full game in C with no libraries.</p>\n\n<p>In the grand scheme of things OOP is just an abstraction that sometimes makes things easier. In the really old days, developers would not even use C and instead would write in assembly for the specific system.</p>\n"}], "owner": {"reputation": 986, "user_id": 4208297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c18d389b9e93f6d63c1a8256654b3dae?s=128&d=identicon&r=PG&f=1", "display_name": "PrimRock", "link": "https://stackoverflow.com/users/4208297/primrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "closed_date": 1438732185, "accepted_answer_id": 31821218, "answer_count": 1, "score": -1, "last_activity_date": 1438733324, "creation_date": 1438731852, "last_edit_date": 1438733324, "question_id": 31821167, "link": "https://stackoverflow.com/questions/31821167/how-was-game-development-done-in-c-with-no-oop", "closed_reason": "Needs more focus", "title": "How was game development done in C with no OOP?", "body": "<p>Coming from a C# background, I've been wondering for a long time about how game development was done in a intermediate language like C. A lot of the old games developed for systems back then were made in C, and one big difference between C and C# is that C# is OOP but C isn't. </p>\n\n<p>When I found out about this in the past it always kept me thinking what approach was taken for game development in C ? In C# OOP is pretty much the main approach used in game development, so how was it done in C ? Game Libraries with OOP functionality ?</p>\n\n<p>I've been reading that C can have OOP functionality written to it which makes sense seeing that we have C#, and a lot of programming languages at its core is derived from C.</p>\n\n<p>How much different was the approach for game development? Also, disregarding things in C like hardware specific code and the rest of the intermediate language worries, how much harder was it ? </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I'm looking for a general answer. Nothing too deep because I understand that this is too broad of a question. So let me narrow it down to...How does non OOP look in game development ? For example, How would drawing multiple objects of the same functionality look in C code</p>\n"}]