[{"tags": ["c", "arrays", "file", "for-loop", "fgets"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1490225799, "post_id": 42964604, "comment_id": 73023303, "body": "You need to parse the values into individual variables. Using either <code>strtok</code>+<code>strtol</code> or <code>sscanf</code>. Do a search as there are many many questions and examples out there."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490226131, "post_id": 42964604, "comment_id": 73023410, "body": "While you are researching, you should read about <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">why you should not control a loop to read a file with <code>feof()</code></a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490227551, "post_id": 42964604, "comment_id": 73023807, "body": "suggest, to replace the first two lines in the loop: `while( fgets (singleLine, sizeof( singleLine), fPointer);"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490227725, "post_id": 42964604, "comment_id": 73023867, "body": "when calling <code>fopen()</code>, always check (!=NULL) the returned value to assure the operation was successful.  If not successful, use: <code>{ perror( &quot;fopen for hello.xls for read failed&quot; );  exit( EXIT_FAILURE );</code>   where <code>exit()</code> and <code>EXIT_FAILURE</code> are in the <code>stdlib.h</code> header file"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490228071, "post_id": 42964604, "comment_id": 73023979, "body": "after the call to <code>puts()</code>, call a new function, passing it a pointer to the char array <code>singleLine[]</code>. That new function can parse the input line into the individual fields. Then calculate the student average/GPA.  The 12 grades can be easily extracted using a loop that incorporates the functions: <code>strtok()</code> and the function: <code>strtol()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1490233168, "creation_date": 1490233168, "answer_id": 42965726, "question_id": 42964604, "link": "https://stackoverflow.com/questions/42964604/c-programing-reading-integers-from-a-file-and-over-write-them-to-letter/42965726#42965726", "title": "C programing,reading integers from a file and over write them to letter", "body": "<p>A few preliminary matters. The function signature for <code>main()</code> should be <code>int main(void)</code>, <code>int main(int argc, char **argv)</code>, or <code>int main(int argc, char *argv[])</code>.</p>\n\n<p>When you open a file, it is always necessary to check for failure. <code>fopen()</code> returns a null pointer when it fails, so you can check for this, and handle the error appropriately.</p>\n\n<p>When reading the contents of a file in a loop, it is almost always a mistake to use <code>feof()</code> to control the loop. This is because <code>feof()</code> checks the end-of-file pointer, which is itself set only when an IO operation fails. In the case of the posted code, the loop is entered, and if there is nothing to read, the <code>singleLine</code> buffer contents remain unchanged, doubling the final line of the text file.</p>\n\n<p>The simplest way to solve your problem is to take as given that each line contains 12 grades, and use <code>sscanf()</code> to parse each line of input as it is retrieved. This is not an elegant soulution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_STUDENTS  100\n\nint main(void)\n{\n    /* Open a file */\n    FILE *fPointer = fopen(\"hello.xls\", \"r\");\n\n    /* Make sure file opened successfully */\n    if (fPointer == NULL) {\n        fprintf(stderr, \"Unable to open file\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    char singleLine[500];\n    double studentGPA[MAX_STUDENTS];\n    int grade[12];\n    size_t studentIndex = 0;\n\n    /* Loop to fetch data and calculate GPAs */\n    while ((fgets(singleLine, sizeof singleLine, fPointer)) != NULL &amp;&amp;\n           studentIndex &lt; MAX_STUDENTS) {\n        if (sscanf(singleLine, \"%d %d %d %d %d %d %d %d %d %d %d %d\",\n                   &amp;grade[0], &amp;grade[1], &amp;grade[2], &amp;grade[3],\n                   &amp;grade[4], &amp;grade[5], &amp;grade[6], &amp;grade[7],\n                   &amp;grade[8], &amp;grade[9], &amp;grade[10], &amp;grade[11]) != 12) {\n            fprintf(stderr, \"Incorrect number of grades on line %zu\\n\",\n                    studentIndex);\n            exit(EXIT_FAILURE);\n        }\n        int sum = 0;\n        for (size_t i = 0; i &lt; 12; i++) {\n            sum += grade[i];\n        }\n        studentGPA[studentIndex] = sum / 12.0;\n        ++studentIndex;\n    }\n\n    /* Display GPAs */\n    for (size_t i = 0; i &lt; studentIndex; i++) {\n        printf(\"Student %zu GPA: %.2f\\n\", i, studentGPA[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that the return value of <code>fgets()</code> is checked to control the file read loop; when a null pointer is returned, or when the maximum number of students has been reached, the loop terminates. This code allows more than 10 students, but requires 12 grades per student. If a line of student grades does not contain 12 entries, the program prints an error message and exits. This is done by checking the return value from <code>sscanf()</code>, which is the number of successful conversions made. After each student's grades have been read, the average is calculated and stored in an array of <code>studentGPA</code>s.</p>\n\n<p>I have assumed integer grade entries, as suggested in the question post, but the GPAs are calculated with floating point values. Also note that I have assumed that the grades are separated by whitespace. If the grades are separated by commas (or other delimiters) the format string will need to be modified accordingly.</p>\n\n<p>A more elegant approach uses <code>strtok()</code> to break the lines of grades into individual tokens, based on a string of delimiters. These delimiters, <code>delims = \" ,\\r\\n\"</code>, indicate that <code>strtok()</code> should break the line into tokens where spaces, commas, or newlines occur. Other delimiters can simply be added to the string if needed.</p>\n\n<p>Each line of grades is fetched, and <code>strtok()</code> is called a first time. If there is a token, it is converted to an <code>int</code> by <code>atoi()</code>, and added to <code>sum</code>. <code>numGrades</code> is updated, and <code>strtok()</code> is called again for a new token. When all grades have been read from a line, the average is calculated and stored in the <code>studentGPA</code> array. Note that the denominator in the average calculation is multiplied by <code>1.0</code> to force the calculation to be <code>double</code>. Also note that a more robust code would use <code>strtol()</code> instead of <code>atoi()</code>, checking the conversion for errors.</p>\n\n<p>With this version, any number of students up to <code>MAX_STUDENTS</code> can be evaluated, with differing numbers of grades.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_STUDENTS  100\n\nint main(void)\n{\n    /* Open a file */\n    FILE *fPointer = fopen(\"hello.xls\", \"r\");\n\n    /* Make sure file opened successfully */\n    if (fPointer == NULL) {\n        fprintf(stderr, \"Unable to open file\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    char singleLine[500];\n    double studentGPA[MAX_STUDENTS];\n    size_t studentIndex = 0;\n    char *token;\n    char *delims = \" ,\\r\\n\";\n\n    /* Loop to fetch data and calculate GPAs */\n    while ((fgets(singleLine, sizeof singleLine, fPointer)) != NULL &amp;&amp;\n           studentIndex &lt; MAX_STUDENTS) {\n        int sum = 0;\n        int numGrades = 0;\n\n        /* Get grade tokens */\n        token = strtok(singleLine, delims);\n\n        while (token) {\n            sum += atoi(token);\n            ++numGrades;\n            token = strtok(NULL, delims);\n        }\n\n        /* Calculate student GPA */\n        studentGPA[studentIndex] = sum / (1.0 * numGrades);\n        ++studentIndex;\n    }\n\n    /* Display GPAs */\n    for (size_t i = 0; i &lt; studentIndex; i++) {\n        printf(\"Student %zu GPA: %.2f\\n\", i, studentGPA[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Here is a sample <code>hello.xls</code> file, with mixed comma and space delimiters. The first program will not work with this file, unless the commas are removed.</p>\n\n<pre><code>3 4 2 3 3 4 3 2 3 3 4 4\n2 2 3 4 2 3 3 2 3 2 2 3\n1 2 3, 3 2 3 3, 3, 4 2 3 3\n3 2 2 3 3 2 1 2 2 2 1 1\n4 4 3 4 4 4 4 3 4 4 4 4\n4, 3, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4\n2 3 2 2 2 1 2 2 2 3 2 2\n3 4 4 4 4 4 4 4 4 4 4 4\n3 2 3 3 2 3 3 3 2 3 3 3\n4 1 4 3 4 4 4 2 4 4 4 4\n</code></pre>\n\n<p>Here is the output of the second program with this grade file:</p>\n\n<pre><code>Student 0 GPA: 3.17\nStudent 1 GPA: 2.58\nStudent 2 GPA: 2.67\nStudent 3 GPA: 2.00\nStudent 4 GPA: 3.83\nStudent 5 GPA: 3.83\nStudent 6 GPA: 2.08\nStudent 7 GPA: 3.92\nStudent 8 GPA: 2.75\nStudent 9 GPA: 3.50\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7754027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2a97260c9cf77c107e5ba03c3fe8eb?s=128&d=identicon&r=PG&f=1", "display_name": "BARCELONA Zolinho", "link": "https://stackoverflow.com/users/7754027/barcelona-zolinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490233168, "creation_date": 1490225607, "last_edit_date": 1490225736, "question_id": 42964604, "link": "https://stackoverflow.com/questions/42964604/c-programing-reading-integers-from-a-file-and-over-write-them-to-letter", "title": "C programing,reading integers from a file and over write them to letter", "body": "<p>iv got an xls file to open in c. in this file there are 10 rows(each row represents a student), and in each row there are 12 numbers (each number represents the student grade for each subject,12 together).  i need to scan the this data and calculate the GPA and the degree of classificaton for each students.  so what i need to show on the screen is 12 grade (from number converted to letter) for each students(10)  and their GPA and qualification classification. bellow is what i have done so far. im able to get the 10 rows onto a screen with 12 numbers in each row, but i dont know how i can make calculations with those numbers after i read them. thanks for any help or advice.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()  \n{\n    FILE * fPointer;\n    fPointer=fopen(\"hello.xls\", \"r\");\n\n    int singleLine[150];\n\n    while(!feof(fPointer)) {;\n        fgets (singleLine,150,fPointer);\n        puts(singleLine);\n    }\n\n    fclose(fPointer);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sizeof"], "comments": [{"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 1, "creation_date": 1490223639, "post_id": 42964207, "comment_id": 73022522, "body": "int takes 4 bytes.  Array size is 10; so 40."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1490223706, "post_id": 42964207, "comment_id": 73022551, "body": "The compiler has type(<code>int[10]</code>) information and uses it."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1490223725, "post_id": 42964207, "comment_id": 73022558, "body": "I guess you&#39;ve been told arrays are interchangable with pointers. They aren&#39;t. Arrays are real and in contexts such as inside of sizeof it shows."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1490223915, "post_id": 42964207, "comment_id": 73022632, "body": "Aside: <code>printf(&quot;%d&quot;,sizeof(array));</code> ==&gt; <code>printf(&quot;%zu&quot;,sizeof array);</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1490224770, "post_id": 42964207, "comment_id": 73022962, "body": "<code>array</code> is not an address. <code>array</code> is an array. In many circumstances it can be implicitly converted into <code>&amp;array[0]</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 0, "creation_date": 1490225922, "post_id": 42964207, "comment_id": 73023338, "body": "@abhishek_naik <code>int</code> can have any size, starting from 1."}], "answers": [{"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1490224647, "post_id": 42964222, "comment_id": 73022915, "body": "I&#39;m not sure about terms like &quot;length&quot; and &quot;true size&quot;. They suggest legitimacy where there is none; those are not concepts with universally agreed on meaning."}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490224720, "post_id": 42964222, "comment_id": 73022948, "body": "You&#39;re absolutely right. I changed length to size in bytes, and true size to length in number of elements."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1490224768, "post_id": 42964222, "comment_id": 73022959, "body": "Much better, thanks!"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1490225364, "post_id": 42964222, "comment_id": 73023170, "body": "sizeof is <b>not a function</b>. It is a (unary) operator."}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "edited": false, "score": 0, "creation_date": 1490225484, "post_id": 42964222, "comment_id": 73023206, "body": "My mistake - I removed that word from the answer."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 3, "creation_date": 1490225666, "post_id": 42964222, "comment_id": 73023273, "body": "And while we&#39;re being pedantic, sizeof in C gives you the size in <i>chars</i>, not <i>bytes</i>. It just happens that on most systems, chars are one byte.  If chars were two bytes and ints were four bytes, then sizeof int would be 2. (In C# by contrast, sizeof is defined in terms of bytes, and chars are two bytes.)"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "edited": false, "score": 0, "creation_date": 1490225957, "post_id": 42964222, "comment_id": 73023353, "body": "Updated that as well, I was not aware of that. I checked the docs, thank you for pointing that out."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 1, "creation_date": 1490226562, "post_id": 42964222, "comment_id": 73023533, "body": "The vast majority of C implementations use bytes for chars, so it is a really pedantic note. Most compiler docs just say bytes. :-)"}], "tags": [], "owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "is_accepted": false, "score": 1, "last_activity_date": 1490225821, "last_edit_date": 1490225821, "creation_date": 1490223625, "answer_id": 42964222, "question_id": 42964207, "link": "https://stackoverflow.com/questions/42964207/sizeof-of-an-array-how-does-it-work/42964222#42964222", "title": "Sizeof of an array...how does it work?", "body": "<p><code>sizeof</code> gives you the size of the array in chars (which are 1 byte long on most systems).</p>\n\n<p>Each int is 4 chars long on your system, so to get the size in number of elements of the array, try:</p>\n\n<pre><code>sizeof(array) / sizeof(int)\n</code></pre>\n\n<p>Keep in mind that this will only work for arrays that are allocated statically. For arrays that are dynamically allocated (i.e. using malloc), you'll have to keep the length of the array safe elsewhere, or otherwise have some magic value at the end of the array that will let you iteratively find the size of the array (by looping through it until you get to the magic value). A common \"magic value\" is NULL.</p>\n\n<p>Sizeof uses the <code>typename</code> of the symbol provided to it (or the type provided to it) in order to determine size. An <code>int varname[10]</code> takes sizeof(int) * 10 chars. If you were to use </p>\n\n<pre><code>int *varname = (int*)malloc(sizeof(int) * 10));\n</code></pre>\n\n<p>then, <code>sizeof(varname)</code> would give you the same result as <code>sizeof(int *)</code>, which is (in most cases) either 4 or 8, depending on whether you are on a 32 bit or 64 bit system.</p>\n\n<p>Note that when using an initializer for an array:</p>\n\n<pre><code>int array[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 0};\n</code></pre>\n\n<p>Then <code>sizeof(array)</code> will return the same value as it would were it run on:</p>\n\n<pre><code>int array[10];\n</code></pre>\n\n<p>This is because C would know the size of the array at compile time, and infer the type of array to be an array of 10 ints in both cases.</p>\n"}, {"comments": [{"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 1, "creation_date": 1490224738, "post_id": 42964250, "comment_id": 73022950, "body": "Nice quizz, here&#39;s another one: <code>char s1[] = &quot;1234567890&quot;; char* s2 = &quot;1234567890&quot;;</code> --&gt; different sizeof &#39;s"}, {"owner": {"reputation": 523, "user_id": 7180288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbf6165ef585d461f5cb8edd538865f?s=128&d=identicon&r=PG&f=1", "display_name": "AlessandroF", "link": "https://stackoverflow.com/users/7180288/alessandrof"}, "edited": false, "score": 0, "creation_date": 1490375407, "post_id": 42964250, "comment_id": 73100149, "body": "Thank you, but i know that an array is not a pointer, but in THIS case, the word &#39;array&#39; represents a pointer"}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "reply_to_user": {"reputation": 523, "user_id": 7180288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbf6165ef585d461f5cb8edd538865f?s=128&d=identicon&r=PG&f=1", "display_name": "AlessandroF", "link": "https://stackoverflow.com/users/7180288/alessandrof"}, "edited": false, "score": 0, "creation_date": 1490376248, "post_id": 42964250, "comment_id": 73100651, "body": "@AlessandroF: The sooner you stop believing those false things you believe, the sooner you will be able to reason correctly about C programs."}], "tags": [], "owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "is_accepted": false, "score": 4, "last_activity_date": 1490226827, "last_edit_date": 1490226827, "creation_date": 1490223751, "answer_id": 42964250, "question_id": 42964207, "link": "https://stackoverflow.com/questions/42964207/sizeof-of-an-array-how-does-it-work/42964250#42964250", "title": "Sizeof of an array...how does it work?", "body": "<blockquote>\n  <p>'array' is only an address</p>\n</blockquote>\n\n<p>It is not.  You believe some false things about arrays.</p>\n\n<p>An array is not an address. An array <em>may be used</em> in a context that expects the address of an array element. </p>\n\n<p>I can use orange peels in a recipe that calls for lemon peels; that does not mean that oranges are lemons.</p>\n\n<blockquote>\n  <p>how does it determinate the size with only an address?</p>\n</blockquote>\n\n<p>It does not.</p>\n\n<p><code>array</code> is an array of ten four-byte integers. The compiler knows that.  Your program is equivalent to <code>printf(\"%zu\",10 * sizeof int);</code>.</p>\n\n<p>(Pedantic note: <code>sizeof</code> gives the size in <code>char</code>s. It just so happens that the vast majority of the time, a <code>char</code> is one byte.)</p>\n\n<p>In C99 it is legal to say:</p>\n\n<pre><code>int n = whatever();\nint b[n + 10];\nprintf(\"%zu\\n\", sizeof b);\n</code></pre>\n\n<p>and sure enough this will print out <code>(n + 10) * sizeof int</code>.</p>\n\n<p>How on earth does it do this?</p>\n\n<p>Beats the heck out of me. Find the source code for a C99 compiler and see what it does. But first think: if you had to write a compiler that had that property, what would you do?</p>\n\n<p>Finally, pop quiz: what does this program do?</p>\n\n<pre><code>int main(void){\n int array[10];\n int *pi = array;\n printf(\"%zu\\n\", sizeof array);\n printf(\"%zu\\n\", sizeof pi);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1490224282, "creation_date": 1490224282, "answer_id": 42964364, "question_id": 42964207, "link": "https://stackoverflow.com/questions/42964207/sizeof-of-an-array-how-does-it-work/42964364#42964364", "title": "Sizeof of an array...how does it work?", "body": "<p>Arrays are a distinct type.\nThey convert to pointers to their first element inside of arithmetic expressions and in function calls, however a <code>sizeof</code> expression is neither.</p>\n\n<p><code>sizeof</code> is an <em>operator</em> (<code>sizeof array</code> (without the parens) works too) and that operator gets access to the real type of the variable, which is <code>int[10]</code> ( whose size is <code>sizeof(int) * 10</code> ).</p>\n\n<p>By the way, the type of the value of a <code>sizeof</code> is <code>size_t</code> so you need to print it with <code>%zu</code>, not <code>%d</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 682, "user_id": 7062289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PzHMLP5eA6E/AAAAAAAAAAI/AAAAAAAAAwU/32-J3Q86O-E/photo.jpg?sz=128", "display_name": "B. Wolf", "link": "https://stackoverflow.com/users/7062289/b-wolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1490224913, "creation_date": 1490224913, "answer_id": 42964490, "question_id": 42964207, "link": "https://stackoverflow.com/questions/42964207/sizeof-of-an-array-how-does-it-work/42964490#42964490", "title": "Sizeof of an array...how does it work?", "body": "<p>When the compiler produces an executable, it determines the size and puts that directly into the code to be run. Note that sizeof(int) on different platforms can be different).</p>\n\n<p>The run-time executable code ends up working like this:</p>\n\n<pre><code>#define SIZEOF_INT (4)\n#define SIZEOF_ARRAY (4*SIZEOF_INT)\nint main(void){\n int array[10];\n printf(\"%d\",SIZEOF_ARRAY /*compiler replaces sizeof(array) here */);\n}\n</code></pre>\n\n<p>'array' is still an address at run-time (within the executable). But sizeof(array) gets changed to a number equivalent to the size at run-time.</p>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 4781880, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204114750498216/picture?type=large", "display_name": "handiansom", "link": "https://stackoverflow.com/users/4781880/handiansom"}, "is_accepted": false, "score": 0, "last_activity_date": 1490225319, "last_edit_date": 1495539984, "creation_date": 1490225319, "answer_id": 42964559, "question_id": 42964207, "link": "https://stackoverflow.com/questions/42964207/sizeof-of-an-array-how-does-it-work/42964559#42964559", "title": "Sizeof of an array...how does it work?", "body": "<p>Please check this link that contains the explanation you're looking for and this will help you solve your issue. <strong><em>by Mark Harrison.</em></strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c\">How do I determine the size of my array in C?</a></p>\n\n<pre><code>To determine the number of elements in the array, we can divide the total size of the array by the size of the array element. You could do this with the type, like this:\n\nint a[17];\nint n = sizeof(a) / sizeof(int);\nand get the proper answer (68 / 4 = 17), but if the type of a changed you would have a nasty bug if you forgot to change the sizeof(int) as well.\n\nSo the preferred divisor is sizeof(a[0]), the size of the zeroeth element of the array.\n\nint a[17];\nint n = sizeof(a) / sizeof(a[0]);\n</code></pre>\n"}], "owner": {"reputation": 523, "user_id": 7180288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbf6165ef585d461f5cb8edd538865f?s=128&d=identicon&r=PG&f=1", "display_name": "AlessandroF", "link": "https://stackoverflow.com/users/7180288/alessandrof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "closed_date": 1490250977, "answer_count": 5, "score": -2, "last_activity_date": 1490250246, "creation_date": 1490223550, "last_edit_date": 1490250246, "question_id": 42964207, "link": "https://stackoverflow.com/questions/42964207/sizeof-of-an-array-how-does-it-work", "closed_reason": "Duplicate", "title": "Sizeof of an array...how does it work?", "body": "<p>Watch here:<br></p>\n\n<pre><code>int main(void){\n int array[10];\n printf(\"%d\",sizeof(array));\n}\n</code></pre>\n\n<p>In this case, it shows 40, but how does sizeof work? <br>\n'array' is only an address, how does it determinate the size with only an address?</p>\n\n<p>---EDIT--- <br>\nI badly explained myself... I know that an array is not an address, but the word <code>array</code> used in this program equates to an address</p>\n"}, {"tags": ["c", "arrays", "char", "2d"], "comments": [{"owner": {"reputation": 1220, "user_id": 2172854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hm0Q1.png?s=128&g=1", "display_name": "abhishek_naik", "link": "https://stackoverflow.com/users/2172854/abhishek-naik"}, "edited": false, "score": 0, "creation_date": 1490222458, "post_id": 42963983, "comment_id": 73022019, "body": "What is your question?"}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1490222505, "post_id": 42963983, "comment_id": 73022052, "body": "So what actually is your problem then? Be specific about it."}, {"owner": {"reputation": 302, "user_id": 3784518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8niqD.jpg?s=128&g=1", "display_name": "photeesh", "link": "https://stackoverflow.com/users/3784518/photeesh"}, "edited": false, "score": 0, "creation_date": 1490222540, "post_id": 42963983, "comment_id": 73022067, "body": "I want the first value to be permanent"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1490222681, "creation_date": 1490222681, "answer_id": 42964032, "question_id": 42963983, "link": "https://stackoverflow.com/questions/42963983/copy-value-of-char-array-to-2d-array/42964032#42964032", "title": "Copy value of char array to 2D array", "body": "<p>The problem is that <code>strNameList[pos][0]</code> <strong>points</strong> to <code>buffer</code> and it's not an independant storage location, since it's simply a pointer you can modify it using either <code>buffer</code> or <code>strNameList[pos][0]</code> because both point to the same place in memory.</p>\n\n<p>Don't mix pointers to string literals, and pointers to non-const arrays in the same array of strings, instead use</p>\n\n<pre><code>strNameList[pos][0] = strdup(buffer);\n</code></pre>\n\n<p>and you will see the difference, likewise</p>\n\n<pre><code>strNameList[pos][1] = strdup(\"Surname\");\n</code></pre>\n\n<p>you will need a</p>\n\n<pre><code>free(strNameList[pos][0]);\nfree(strNameList[pos][1]);\n</code></pre>\n\n<p>later, when you no longer need the pointers.</p>\n"}], "owner": {"reputation": 302, "user_id": 3784518, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8niqD.jpg?s=128&g=1", "display_name": "photeesh", "link": "https://stackoverflow.com/users/3784518/photeesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 42964032, "answer_count": 1, "score": 0, "last_activity_date": 1490222823, "creation_date": 1490222435, "last_edit_date": 1490222823, "question_id": 42963983, "link": "https://stackoverflow.com/questions/42963983/copy-value-of-char-array-to-2d-array", "title": "Copy value of char array to 2D array", "body": "<p>As you can see below i create a 2D array of strings. Also i use a char array named \"buffer\". I want to copy the value of buffer to the [5][0] position of the 2D array.\nThe problem is that when the value of buffer changes, the value of the cell of the array also changes.\nI want to keep the first value.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar * strNameList[10][2] = { \n    {\"Luca\", \"Daniel\"} ,\n    {\"Vivan\", \"Desmond\"},\n    {\"Abdul\", \"Justin\"}, \n    {\"Nina\", \"Marlene\"},\n    {\"Donny\", \"Kathlene\"} \n};\n\nint main()\n{\n    int j, i;\n    int pos = 5;\n    char buffer[10204];\n\n    strcpy(buffer, \"A Value\");\n\n    strNameList[pos][0] = buffer;\n    strNameList[pos][1] = \"Surname\";\n    for (i = 0; i &lt; 9; i++) {\n        printf(\"\\n\");\n        for (j = 0; j &lt; 2; j++)\n            printf(\" %s\", strNameList[i][j]);\n    }\n\n    strcpy(buffer, \"B Value\");      \n    for (i = 0; i &lt; 9; i++) {\n        printf(\"\\n\");\n        for (j = 0; j &lt; 2; j++)\n            printf(\" %s\", strNameList[i][j]);\n    }\n}\n</code></pre>\n\n<p>Output: \n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Luca Daniel\n Vivan Desmond\n Abdul Justin\n Nina Marlene\n Donny Kathlene\n A Value Surname\n\n\n Luca Daniel\n Vivan Desmond\n Abdul Justin\n Nina Marlene\n Donny Kathlene\n B Value Surname\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 7583224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b18b46f64b19d876820ea7645dfa0c7?s=128&d=identicon&r=PG&f=1", "display_name": "YlmzCmlttn_Old", "link": "https://stackoverflow.com/users/7583224/ylmzcmlttn-old"}, "is_accepted": true, "score": 1, "last_activity_date": 1490227510, "creation_date": 1490227510, "answer_id": 42964898, "question_id": 42963921, "link": "https://stackoverflow.com/questions/42963921/return-value-when-using-function-pointer-also-using-openmp/42964898#42964898", "title": "Return value when using function pointer (also using OpenMP)", "body": "<p>You need extra space for quicksortarr and shellSortarr </p>\n\n<pre><code>double sort(void (*func)(int*, int), int *a, int len,int i) {\n    time_t end, begin;\n    int *b = malloc(len * sizeof *b);\n    if (!b) { perror(\"sort: malloc\"); return 0; }\n    memcpy(b, a, len * sizeof b[0]);    \n    switch( k%2 ) {\n    case 0:\n    begin = clock();    \n    func(b, len);\n    end = clock();  \n    int *quicksortarr = malloc(len * sizeof *quicksortarr);\n    if (!quicksortarr) { perror(\"sort: malloc\"); return 0; }\n    memcpy(quicksortarr, b, len * sizeof quicksortarr[0]);\n    k++;\n    break;\n    case 1:     \n    begin = clock();\n    func(b, len);\n    int *shellSortarr = malloc(len * sizeof *shellSortarr);\n    if (!shellSortarr) { perror(\"sort: malloc\"); return 0; }\n    memcpy(shellSortarr, b, len * sizeof shellSortarr[0]);\n    end = clock();\n    k++;\n    break;\n\n    compare(quicksortarr,shellSortarr,len,i);\n    k=0;    \n    break;  \n    }   \n\n    free(b);\n    return (double)(end - begin) / CLOCKS_PER_SEC;\n}\n</code></pre>\n\n<p>you don't need return anymore so;</p>\n\n<pre><code> void shellSort(int x3[], int n){\n\n    //sorting code\n       }\n</code></pre>\n\n<p>Also <code>#pragma omp parallel for schedule(dynamic)</code> uses only for loop if your sorting code use for you can add with <code>&lt;omp.h&gt;</code> library</p>\n"}], "owner": {"reputation": 73, "user_id": 5974105, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a3aebc48a5bfab0db92dd392acecc98d?s=128&d=identicon&r=PG&f=1", "display_name": "stigmata2", "link": "https://stackoverflow.com/users/5974105/stigmata2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 42964898, "answer_count": 1, "score": 0, "last_activity_date": 1490227510, "creation_date": 1490222130, "question_id": 42963921, "link": "https://stackoverflow.com/questions/42963921/return-value-when-using-function-pointer-also-using-openmp", "title": "Return value when using function pointer (also using OpenMP)", "body": "<p>When I change quick short function code for example output always at 0, Program go in case0 change the quicksortarr 'values become 0 this is okey but when other case (\"case1\") start shellSortarr is changed also quicksortarr is changed and become same as (shellsortarr) therefore I won't compare this array. \nI think my mistake pointers.</p>\n\n<p>My second question(less important) is I want to omp functions for using %100 CPU I found this codes but I guess, This is only work before for loop</p>\n\n<pre><code>#pragma omp parallel for schedule(dynamic)\n\nomp_get_wtime();\n</code></pre>\n\n<p>Do you have suggesiton</p>\n\n<pre><code> double sort(int *(*func)(int*, int), int *a, int len,int i) {\n        time_t end, begin;\n        int *b = malloc(len * sizeof *b);\n        if (!b) { perror(\"sort: malloc\"); return 0; }\n        memcpy(b, a, len * sizeof b[0]);    \n\n//for example b = 10,3,15,6,123\n\n        int *selectionSortarr;\n        int *quicksortarr;\n\n        switch( k%2 ) {\n        case 0:\n        begin = clock();\n\n//b = 10,3,15,6,123 \n\n        quicksortarr = func(b, len);\n//for example func(quicksort) is wrong and quicksortarr become 0,0,0,0,0\n        end = clock();  \n        k++;\n        break;\n        case 1:     \n        begin = clock();\n//b is again b = 10,3,15,6,123  \n        shellSortarr = func(b, len);\n// after that shellsortarr and quicksortarr become 3,6,10,15,123\n//therefore compare function is print \"File's sorted arrays are equal\"\n        end = clock();      \n        compare(quicksortarr,shellSortarr,len,i);\n        k=0;    \n        break;  \n        }   \n        free(b);\n        return (double)(end - begin) / CLOCKS_PER_SEC;\n    }\n</code></pre>\n\n<p>.I call function like this:</p>\n\n<pre><code>while (fscanf(f, \"%d\", &amp;input) == 1) a[len++] = input;\n    quick[i] = sort(quickSort,     a, len,i);\n    shell[i] = sort(shellSort,     a, len,i);\n</code></pre>\n\n<p>.My sorting functions like this:</p>\n\n<pre><code>int *shellSort(int x3[], int n){\n\n    //sorting code\n    return x3;\n}\n</code></pre>\n\n<p>.My compare functions like this:</p>\n\n<pre><code>void compare(int *arr1,int *arr2,int len,int y) {\n    int i=0;\n    int check=0;\n        for (i=0; i&lt;len; i++){\n        if (arr1[i] != arr2[i])     \n                check++;\n                break;\n\n    }\n    if (check !=0) printf(\"%i . File's sorted arrays are not equal difference start at %i . variable in array\\n\",y,i);\n    else printf(\"%i. File's sorted arrays are equal\\n\",y);\n}\n</code></pre>\n"}, {"tags": ["c", "file-copying"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1490221732, "post_id": 42963755, "comment_id": 73021667, "body": "Search this site for <b>[c] copy file</b>."}, {"owner": {"reputation": 682, "user_id": 7062289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PzHMLP5eA6E/AAAAAAAAAAI/AAAAAAAAAwU/32-J3Q86O-E/photo.jpg?sz=128", "display_name": "B. Wolf", "link": "https://stackoverflow.com/users/7062289/b-wolf"}, "edited": false, "score": 0, "creation_date": 1490222795, "post_id": 42963755, "comment_id": 73022180, "body": "Also see <a href=\"http://stackoverflow.com/questions/2180079/how-can-i-copy-a-file-on-unix-using-c\">How can I copy a file on Unix using C?</a>"}, {"owner": {"reputation": 626, "user_id": 5352476, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9qaA3.jpg?s=128&g=1", "display_name": "Cool Javelin", "link": "https://stackoverflow.com/users/5352476/cool-javelin"}, "edited": false, "score": 0, "creation_date": 1490235868, "post_id": 42963755, "comment_id": 73026173, "body": "So, what I am seeing is, removing and renaming files is easy, copying is hard. Geez, that seems like such a basic, necessary function that someone would have defined a standard for it by now. I get it is OS dependent, but come-on."}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 0, "creation_date": 1490243322, "post_id": 42963755, "comment_id": 73028074, "body": "I&#39;m sure that when you implement your very own <code>copy_file()</code> and account for all the possible permutations and bits (how to show a progress, what to do with data streams, how to handle removable storages, offline storages, permissions, going from one type of filesystem to another, etc, etc, etc) you&#39;ll change your tone"}], "owner": {"reputation": 626, "user_id": 5352476, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9qaA3.jpg?s=128&g=1", "display_name": "Cool Javelin", "link": "https://stackoverflow.com/users/5352476/cool-javelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "closed_date": 1490276249, "answer_count": 0, "score": 0, "last_activity_date": 1490221435, "creation_date": 1490221435, "question_id": 42963755, "link": "https://stackoverflow.com/questions/42963755/c-copy-a-file", "closed_reason": "Duplicate", "title": "C - copy a file", "body": "<p>I am learning C, and:</p>\n\n<p>I see a way to delete a file </p>\n\n<pre><code>remove (f_name);\n</code></pre>\n\n<p>a way to rename a file:</p>\n\n<pre><code>rename(old_f_name, new_f_name);\n</code></pre>\n\n<p>but I cannot find a way to copy a file. Can this be true?</p>\n\n<pre><code>copy(old_f_name, new_f_name);  //gives an error.\n</code></pre>\n\n<p>Must I write a routine to open the file, read through it's contents, and write it?</p>\n\n<p>Thanks, Mark.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 8, "creation_date": 1490220391, "post_id": 42963517, "comment_id": 73021114, "body": "You should do <i>something</i> with the return value of the recursive call..."}, {"owner": {"reputation": 3447, "user_id": 5244653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9412ec207649931753eb77f7afca2599?s=128&d=identicon&r=PG&f=1", "display_name": "Brick", "link": "https://stackoverflow.com/users/5244653/brick"}, "edited": false, "score": 4, "creation_date": 1490220395, "post_id": 42963517, "comment_id": 73021116, "body": "You never do any addition..."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1490220702, "post_id": 42963517, "comment_id": 73021215, "body": "You&#39;re code would be more general if you structured it to count down.  That is, start with <code>totalOdd(100)</code> or perhaps completely change stream with <code>totalOdd(1, 100)</code>"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1490221107, "post_id": 42963517, "comment_id": 73021387, "body": "Please learn how to indent your code correctly. By that you will also learn to better understand the structure of your program."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5893511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10203857268870935/picture?type=large", "display_name": "Morgan Ariel Henry", "link": "https://stackoverflow.com/users/5893511/morgan-ariel-henry"}, "edited": false, "score": 0, "creation_date": 1490221781, "post_id": 42963783, "comment_id": 73021701, "body": "This code doesnt seem to work the opposite, for when I want to add even numbers from 1 - 100, I get 2450 instead of 2550."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490221864, "post_id": 42963783, "comment_id": 73021735, "body": "Change <code>&gt;=</code> to <code>&gt;</code>"}], "tags": [], "owner": {"reputation": 39, "user_id": 5893511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10203857268870935/picture?type=large", "display_name": "Morgan Ariel Henry", "link": "https://stackoverflow.com/users/5893511/morgan-ariel-henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1490221535, "creation_date": 1490221535, "answer_id": 42963783, "question_id": 42963517, "link": "https://stackoverflow.com/questions/42963517/sum-of-odd-numbers-from-1-100-using-recursion-in-c/42963783#42963783", "title": "Sum of odd numbers from 1 - 100 using RECURSION in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint totalOdd();\n\nint main(){\n    printf(\"%d\\n\",totalOdd(1));\n}\n\nint totalOdd(int odd){\n    if(odd &gt;= 100)\n    return 0;\n\nreturn (odd + totalOdd(odd + 2));\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 7297701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmiKS.jpg?s=128&g=1", "display_name": "Jain Rishav Amit", "link": "https://stackoverflow.com/users/7297701/jain-rishav-amit"}, "is_accepted": true, "score": 2, "last_activity_date": 1490221700, "creation_date": 1490221700, "answer_id": 42963826, "question_id": 42963517, "link": "https://stackoverflow.com/questions/42963517/sum-of-odd-numbers-from-1-100-using-recursion-in-c/42963826#42963826", "title": "Sum of odd numbers from 1 - 100 using RECURSION in C", "body": "<p>try this one\n    one :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint totalOdd(int);\n\nint main(){\n    printf(\"%d\\n\",totalOdd(1));\n  }\n\n   int totalOdd(int n)\n{\n   int odd = n;\n      if(odd &gt; 100){\n          return 0;\n         }\n       else{\n          return (n+totalOdd(odd+2));\n         }\n}\n</code></pre>\n\n<p>in your code , addition was missing</p>\n"}, {"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": false, "score": 0, "last_activity_date": 1490225388, "last_edit_date": 1490225388, "creation_date": 1490223931, "answer_id": 42964291, "question_id": 42963517, "link": "https://stackoverflow.com/questions/42963517/sum-of-odd-numbers-from-1-100-using-recursion-in-c/42964291#42964291", "title": "Sum of odd numbers from 1 - 100 using RECURSION in C", "body": "<p>Not a complete answer, because this sounds like homework, but here\u2019s an example of how to write a very similar function, first recursively, and then a more efficient tail-recursive solution.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nunsigned long factorial1(const unsigned long n)\n{\n/* The naive implementation. */\n  if ( n &lt;= 1U )\n    return 1; // 0! is the nullary product, 1.\n  else\n    return n*factorial1(n-1);\n /* Notice that there is one more operation after the call to\n  * factorial1() above: a multiplication.  Most compilers need to keep\n  * all the intermediate results on the stack and do all the multiplic-\n  * ations after factorial1(1) returns.\n  */\n}\n\nstatic unsigned long factorial_helper( const unsigned long n,\n                                       const unsigned long accumulator )\n{\n/* Most compilers should be able to optimize this tail-recursive version\n * into faster code.\n */\n  if ( n &lt;= 1U )\n    return accumulator;\n  else\n    return factorial_helper( n-1, n*accumulator );\n /* Notice that the return value is simply another call to the same function.\n  * This pattern is called tail-recursion, and is as efficient as iterative\n  * code (like a for loop).\n  */\n}\n\nunsigned long factorial2(const unsigned long n)\n{\n  return factorial_helper( n, 1U );\n}\n\nint main(void)\n{\n  printf( \"%lu = %lu\\n\", factorial1(10), factorial2(10) );\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Examining the output of both gcc -O -S and clang -O -S on the above code, I see that in practice, clang 3.8.1 can compile both versions to the same optimized loop, and gcc 6.2.0 does not optimize for tail recursion on either, but there are compilers where it would make a difference.</p>\n\n<p>For future reference, you wouldn\u2019t solve this specific problem this way in the real world, but you will use this pattern for other things, especially in functional programming.  There is a closed-form solution to the sum of odd numbers in a range.  You can use that to get the answer in constant time.  You want to look for those whenever possible!  Hint: it is the sum, from <em>i</em> = 0 to 100, of 2 <em>i</em> + 1.  Do you remember a closed-form formula for the sum of <em>i</em> from 0 to <em>N</em>?  0, 1, 3, 6, 10, 15, ...?  The proof is often taught as an example of a proof by induction.  And what happens to a sum from 0 to <em>N</em> when you multiply and add by constants?</p>\n\n<p>As for my example, when I have had to compute a factorial function in a real program, it was for the purpose of computing a probability distribution (specifically, the Poisson distribution) for a simulation, and I needed to calculate the factorial of the same numbers repeatedly.  Therefore, what I did was store a list of all the factorials I\u2019d already calculated, and look up any number I saw again in that list.  That pattern is called memoization.</p>\n"}], "owner": {"reputation": 39, "user_id": 5893511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10203857268870935/picture?type=large", "display_name": "Morgan Ariel Henry", "link": "https://stackoverflow.com/users/5893511/morgan-ariel-henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4897, "favorite_count": 0, "accepted_answer_id": 42963826, "answer_count": 3, "score": -3, "last_activity_date": 1490225388, "creation_date": 1490220279, "question_id": 42963517, "link": "https://stackoverflow.com/questions/42963517/sum-of-odd-numbers-from-1-100-using-recursion-in-c", "title": "Sum of odd numbers from 1 - 100 using RECURSION in C", "body": "<p>Trying to figure out where I am going wrong in this code, I realize I keep getting 1 because that's what am I passing in the function but how else can I do this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint totalOdd();\n\nint main(){\n    printf(\"%d\\n\",totalOdd(1));\n}\n\nint totalOdd(int n){\nint odd = n;\n    if(odd &gt;= 100){\n    return 0;\n}\n    else{\n    totalOdd(odd+2);\n}\nreturn odd;\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "typedef"], "comments": [{"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1490220306, "post_id": 42963515, "comment_id": 73021076, "body": "Can you link me the entire code so i can compile it?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1490220402, "post_id": 42963515, "comment_id": 73021119, "body": "That dup is tagged C++ but the accepted answer applies to C as well. Basically, you have invalid syntax because the right hand side of the last line is an initializer and can only be used when the variable is declared (like in your first example)."}], "owner": {"reputation": 101, "user_id": 7753807, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-8-Xlo7c8x_8/AAAAAAAAAAI/AAAAAAAABP0/pxAwdBZVXu4/photo.jpg?sz=128", "display_name": "CodeModeOn", "link": "https://stackoverflow.com/users/7753807/codemodeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1490220635, "answer_count": 0, "score": 0, "last_activity_date": 1490220371, "creation_date": 1490220251, "last_edit_date": 1490220371, "question_id": 42963515, "link": "https://stackoverflow.com/questions/42963515/typedef-struct-in-c", "closed_reason": "Duplicate", "title": "typedef struct in C", "body": "<pre><code>typedef struct{\nUINT8 startCharacter;\nUINT16 frameCRCC;\nUINT16 ageCount;\nUINT8 senderID[3];\n}INFO_FRAME;\n</code></pre>\n\n<p>when I use as below my code works fine</p>\n\n<pre><code>INFO_FRAME tx_frame={0x02,0x00,0x00,0x82,0x5E,0xE2};\n</code></pre>\n\n<p>when I use this definition:</p>\n\n<pre><code>typedef struct{\nUINT8 startCharacter;\nUINT16 frameCRCC;\nUINT16 ageCount;\nUINT8 senderID[3];\n}INFO_FRAME tx_frame;\n\ntx_frame={0x02,0x00,0x00,0x82,0x5E,0xE2};\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Error: [Error(ccom)] parse error at near '{'  \n</code></pre>\n\n<p>I am using HEW to program a Renesas Microcontroller. This behaviour is quite strange.</p>\n"}, {"tags": ["c", "sdl-2", "conways-game-of-life"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1490219872, "post_id": 42963388, "comment_id": 73020892, "body": "Have you done any debugging at all? Use a debugger for that. At a minimum it will tell you where your program crashes or what it is doing when it is &quot;hanging&quot;. If you have done that already then share what you have found."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490220138, "post_id": 42963388, "comment_id": 73021013, "body": "<code>cells</code> is a locally defined array. It might be just to big to fit in your stack."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490220155, "post_id": 42963388, "comment_id": 73021022, "body": "I noticed from your <a href=\"http://stackoverflow.com/questions/42955950/conways-game-of-life-cell-changes-being-calculated-incorrectly-after-changing\">previous question</a> on this topic, you never check that plus or minus one breaks the array boundary. Without looking again at the neighbour count function, you need to do 8 explicit tests for each neighbour, no loop."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1490220252, "post_id": 42963388, "comment_id": 73021050, "body": "This is <i>way</i> too much code to expect people to go through. You need to debug it to narrow the problem down. Interesting problem, but you haven&#39;t made it easy for people to help you."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1490220608, "post_id": 42963388, "comment_id": 73021189, "body": "Place debugger breakpoints in <code>updateCells</code> and watch each iteration."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490220898, "post_id": 42963388, "comment_id": 73021301, "body": ". . . for example, <code>if(y &gt; 0) { if(a[y-1][x] == ALIVE) count++; }</code> and so on. 8 similar tests, no loops."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 1, "creation_date": 1490228570, "post_id": 42963388, "comment_id": 73024137, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "edited": false, "score": 0, "creation_date": 1490228970, "post_id": 42963388, "comment_id": 73024240, "body": "Consider developing the habit of asking yourself &quot;how can I simplify this program fragment?&quot;  For example in <code>updateCells</code> you have four calls to count the cells. You could be calling it <i>once</i>. When you make that change then ask yourself again, how can I simplify the program fragment?  And then you will see that the entire loop body becomes <code>int c = countLiving...; new[cy][cx] = (c == 3 || c == 2 &amp;&amp; (a[cy][cx] == ALIVE)) ? ALIVE : DEAD;</code>  And now you&#39;ve reduced the number of lines in the loop by 80%; less code, less chances for bugs."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 1762905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fede9c8855bdbacad502f49db91638d6?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/1762905/sato"}, "edited": false, "score": 0, "creation_date": 1490289419, "post_id": 42964492, "comment_id": 73057612, "body": "Thank you, I don&#39;t know how I missed something so minor."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 1, "last_activity_date": 1490224943, "creation_date": 1490224943, "answer_id": 42964492, "question_id": 42963388, "link": "https://stackoverflow.com/questions/42963388/conways-game-of-life-extraneous-cells-being-printed-when-program-run-with-only/42964492#42964492", "title": "Conway&#39;s Game of Life: extraneous cells being printed when program run with only blank/dead cells (C/SDL2)", "body": "<blockquote>\n<pre><code>       // Ensure neighbouring cell is not out of bounds\n       if(!(cy &lt; 0 || cx &lt; 0 || cy &gt; GRID_HEIGHT || cx &gt; GRID_WIDTH)){\n</code></pre>\n</blockquote>\n\n<p>This check is wrong. If cy is equal to GRID_HEIGHT or cx is equal to GRID_WIDTH it is still out of bounds. That's because the bottom-right cell has coordinates GRID_HEIGHT-1 and GRID_WIDTH-1.</p>\n\n<p>Of course, it should be:</p>\n\n<blockquote>\n<pre><code>       if(!(cy &lt; 0 || cx &lt; 0 || cy &gt;= GRID_HEIGHT || cx &gt;= GRID_WIDTH)){\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 115, "user_id": 1762905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fede9c8855bdbacad502f49db91638d6?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/1762905/sato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 42964492, "answer_count": 1, "score": -1, "last_activity_date": 1490224943, "creation_date": 1490219746, "question_id": 42963388, "link": "https://stackoverflow.com/questions/42963388/conways-game-of-life-extraneous-cells-being-printed-when-program-run-with-only", "title": "Conway&#39;s Game of Life: extraneous cells being printed when program run with only blank/dead cells (C/SDL2)", "body": "<p>To put it simply: When running my Game of Life program, it begins with an empty board of dead cells. If I run the simulation for a single cycle, it should stay empty, as there are no living cells for it to deal with. However, when I run my program, a few small dead cells become 'alive' in the bottom right corner. I'm not certain why this is but I believe it is either due to the way I am checking for living cell neighbours, or in how I display the cells. Here is a picture of what I mean:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aD25R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aD25R.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define CELL_SIZE 10\n#define GRID_WIDTH 100\n#define GRID_HEIGHT 100\n#define SCREEN_WIDTH (GRID_WIDTH * CELL_SIZE)\n#define SCREEN_HEIGHT (GRID_HEIGHT * CELL_SIZE)\n\ntypedef enum {ALIVE, DEAD} State;\ntypedef struct{\n    int x;\n    int y;\n    State state;\n} Cell;\n\n// SDL related functions\nSDL_Window *createWindow(char *title);\nSDL_Renderer *createRenderer(SDL_Window *window);\nvoid drawGrid(SDL_Renderer *r);\nvoid drawCells(SDL_Renderer *r, int a[][GRID_WIDTH]);\n\n// Game of Life functions\nvoid updateCells(int a[][GRID_WIDTH]); // takes cells array as input\nint countLivingNeighbours(int a[][GRID_WIDTH], int x, int y);\n\nint main(int argc, char *argv[]){\n    // Initialise SDL\n    SDL_Init(SDL_INIT_VIDEO);\n\n    // Create window and renderer\n    SDL_Window *window = createWindow(\"Game of Life\");\n    SDL_Renderer *renderer = createRenderer(window);\n\n    // Setup event handling + mouse co-ordinate handling\n    SDL_Event event;\n    int mouseX, mouseY;\n    bool mouse_left_down = false;\n    bool mouse_right_down = false;\n\n    // Set all cells to initial state of dead\n    int cells[GRID_HEIGHT][GRID_WIDTH];\n    int cx, cy;\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            cells[cy][cx] = DEAD;\n        }\n    }\n\n    // MAIN LOOP //\n    while(1){\n        // Handle events/input\n        while(SDL_PollEvent(&amp;event) != 0){\n            switch(event.type){\n                case SDL_QUIT: // Check if user has quit\n                    return 1;\n\n                // Check if user is HOLDING left or right mouse button\n                case SDL_MOUSEBUTTONDOWN: case SDL_MOUSEBUTTONUP:\n                    switch(event.button.button){\n                        case SDL_BUTTON_LEFT: mouse_left_down = !mouse_left_down; break;\n                        case SDL_BUTTON_RIGHT: mouse_right_down = !mouse_right_down; break;\n                    }\n\n                // If user presses space, simulate a single change\n                case SDL_KEYDOWN:\n                    if(event.key.keysym.sym == SDLK_SPACE)\n                        updateCells(cells);\n\n            }\n        }\n\n        // Get user mouse button input - left click gives life to cell at current co-ords, right click kills\n        SDL_GetMouseState(&amp;mouseX, &amp;mouseY);\n        if(mouse_left_down == true)\n            cells[mouseY / CELL_SIZE][mouseX / CELL_SIZE] = ALIVE;\n        else if(mouse_right_down == true)\n            cells[mouseY / CELL_SIZE][mouseX / CELL_SIZE] = DEAD;\n\n        // Set screen colour to white\n        SDL_SetRenderDrawColor(renderer, 255, 255, 255, 255);\n\n        // Render white to screen (clear screen)\n        SDL_RenderClear(renderer);\n\n        // Draw the grid and living cells\n        drawGrid(renderer);\n        drawCells(renderer, cells);\n\n        // Update screen\n        SDL_RenderPresent(renderer);\n    }\n\n    // Exit SDL and SDL_image\n    SDL_Quit();\n    return 0;\n}\n\n/*\n1. Any live cell with fewer than two live neighbours dies, as if caused by underpopulation.\n2. Any live cell with two or three live neighbours lives on to the next generation.\n3. Any live cell with more than three live neighbours dies, as if by overpopulation.\n4. Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.\n*/\nvoid updateCells(int a[][GRID_WIDTH]){\n    int new[GRID_HEIGHT][GRID_WIDTH];\n    int cy, cx; // vertical count, horizontal count\n\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            // Any live cell with fewer than two live neighbours dies, as if caused by underpopulation.\n            if(a[cy][cx] == ALIVE &amp;&amp; countLivingNeighbours(a, cx, cy) &lt; 2)\n                new[cy][cx] = DEAD;\n\n            // Any live cell with two or three live neighbours lives on to the next generation.\n            else if(a[cy][cx] == ALIVE &amp;&amp; (countLivingNeighbours(a, cx, cy) == 2 || countLivingNeighbours(a, cx, cy) == 3))\n                new[cy][cx] = ALIVE;\n\n            // Any live cell with more than three live neighbours dies, as if by overpopulation.\n            else if(a[cy][cx] == ALIVE &amp;&amp; countLivingNeighbours(a, cx, cy) &gt; 3)\n                new[cy][cx] = DEAD;\n\n            // Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.\n            else if(a[cy][cx] == DEAD &amp;&amp; countLivingNeighbours(a, cx, cy) == 3)\n                new[cy][cx] = ALIVE;\n\n            else\n                new[cy][cx] = DEAD;\n        }\n    }\n\n    // Update all cells into new states\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            a[cy][cx] = new[cy][cx];\n        }\n    }\n}\n\n// THERE'S NO ERROR CHECKING HERE WHICH IS BAD\n// Should ideally check if a cell even exists before checking its state\nint countLivingNeighbours(int a[][GRID_WIDTH], int x, int y){\n    int count = 0, cx, cy;\n\n    for(cy = y - 1; cy &lt;= y + 1; cy++){\n        for(cx = x - 1; cx &lt;= x + 1; cx++){\n\n            // Ensure neighbouring cell is not out of bounds\n            if(!(cy &lt; 0 || cx &lt; 0 || cy &gt; GRID_HEIGHT || cx &gt; GRID_WIDTH)){\n                // If there is a living neighbouring cell, add to count\n                if(a[cy][cx] == ALIVE)\n                    count++;\n\n                // disregard current cell as it is not a neighbour\n                if(a[cy][cx] == ALIVE &amp;&amp; cx == x &amp;&amp; cy == y)\n                    count--;\n            }\n\n\n        }\n    }\n\n    return count;\n}\n\nvoid drawGrid(SDL_Renderer *r){\n    // Draw vertical grid lines\n    for(int v = CELL_SIZE; v &lt; SCREEN_WIDTH; v += CELL_SIZE){\n        // Set draw colour to grey\n        SDL_SetRenderDrawColor(r, 110, 110, 110, 110);\n\n        // Draw vertical line\n        SDL_RenderDrawLine(r, v, 0, v, SCREEN_HEIGHT);\n    }\n\n    // Draw horizontal grid lines\n    for(int h = CELL_SIZE; h &lt; SCREEN_HEIGHT; h += CELL_SIZE){\n        // Set draw colour to grey\n        SDL_SetRenderDrawColor(r, 110, 110, 110, 110);\n\n        // Draw horizontal line\n        SDL_RenderDrawLine(r, 0, h, SCREEN_WIDTH, h);\n    }\n}\n\nvoid drawCells(SDL_Renderer *r, int a[][GRID_WIDTH]){\n    // Define cell width/height\n    SDL_Rect cellRect;\n    cellRect.w = CELL_SIZE + 1; // Same size as one cell +1 so it covers the grid line fully\n    cellRect.h = CELL_SIZE + 1; // Same size as one cell +1 so it covers the grid line fully\n\n    // Draw living cells\n    int cx, cy;\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            if(a[cy][cx] == ALIVE){\n                // Set cell x/y pos\n                cellRect.x = cx * CELL_SIZE;\n                cellRect.y = cy * CELL_SIZE;\n\n                SDL_SetRenderDrawColor(r, 0, 0, 0, 0);\n                SDL_RenderFillRect(r, &amp;cellRect);\n            }\n        }\n    }\n}\n\nSDL_Window *createWindow(char *title){\n    SDL_Window *window = SDL_CreateWindow(\n        title,                  // Title\n        SDL_WINDOWPOS_CENTERED, // Initial window x position\n        SDL_WINDOWPOS_CENTERED, // Initial window y position\n        SCREEN_WIDTH,           // Window Width\n        SCREEN_HEIGHT,          // Window Height\n        0                       // Flags\n    );\n\n    if(window == NULL){\n        printf(\"Failed to create window. %s\\n\", SDL_GetError());\n        exit(EXIT_FAILURE);\n    }\n\n    return window;\n}\n\nSDL_Renderer *createRenderer(SDL_Window *window){\n    SDL_Renderer *renderer = SDL_CreateRenderer(\n        window,                     // Window\n        -1,                         // Monitor index (-1 for first available)\n        SDL_RENDERER_ACCELERATED    // Flags\n    );\n\n    if(renderer == NULL){\n        printf(\"Failed to create renderer. %s\\n\", SDL_GetError());\n        exit(EXIT_FAILURE);\n    }\n\n    return renderer;\n}\n</code></pre>\n\n<p>Strangely, this only seems to happen when GRID_WIDTH and GRID_HEIGHT are set to higher values. It happens when both are 100, and the program just hangs/crashes if the GRID_WIDTH is set to 150, but setting them both to a lower value (I tested with 30) and everything works smoothly.</p>\n\n<p>Any help much appreciated :)</p>\n"}, {"tags": ["c", "gcc", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1490219626, "post_id": 42963320, "comment_id": 73020781, "body": "That&#39;s RIP-relative addressing, it stores address relative to the instruction pointer. Read any x86-64 reference material for details. Or, you know, the <a href=\"https://sourceware.org/binutils/docs/as/i386_002dMemory.html\" rel=\"nofollow noreferrer\">assembler manual</a>."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1490219643, "post_id": 42963320, "comment_id": 73020786, "body": "RIP relative addressing, loading a quad into RCX."}, {"owner": {"reputation": 143, "user_id": 4984554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f5581a808cc36479310b8d2b8ce510?s=128&d=identicon&r=PG&f=1", "display_name": "wojcienty", "link": "https://stackoverflow.com/users/4984554/wojcienty"}, "edited": false, "score": 0, "creation_date": 1490222276, "post_id": 42963320, "comment_id": 73021936, "body": "I&#39;m very pleased by your comments, but there is one thing i don&#39;t understand yet. We have relative addressing, i understand that, but how its achived? I mean, by adding, subtracting? I have looked in IDA dump, and i what i saw was that this instruction address was 0x12 (Exactly what %rip should have + some memory address after loading) and the printf formatting address was 0x40. Please say more about it."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 1, "creation_date": 1490241926, "post_id": 42963320, "comment_id": 73027706, "body": "<code>cs:rip</code> points to next instruction to execute. At first it points at the first byte of <code>lea rcx,[rip+xyz]</code>, then the CPU will fetch it&#39;s opcode, decode it as <code>lea</code>, fetch correct number of remaining bytes of opcode, and update <code>rip</code> to point to next instruction (<code>call</code>). Then it will execute the <code>lea</code>, so the <code>rip+xyz</code> will evaluate already with the <code>call</code> instruction address, and resulting address is stored into <code>rcx</code>.  (The compiler will calculate &quot;xyz&quot; in such way, that <code>next_instruction_address + xyz</code> == <code>.LC0</code>)"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1490242718, "post_id": 42963320, "comment_id": 73027902, "body": "disassembly of <code>lea rcx,[rip+0]</code> (getting address of next instruction to <code>rcx</code>): <code>48 8d 0d 00 00 00 00    lea    rcx,[rip+0x0]</code> =&gt; so <code>lea</code> in this case is 7B long, and displacement is sign-extended 32b value."}], "owner": {"reputation": 143, "user_id": 4984554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93f5581a808cc36479310b8d2b8ce510?s=128&d=identicon&r=PG&f=1", "display_name": "wojcienty", "link": "https://stackoverflow.com/users/4984554/wojcienty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 981, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490219458, "creation_date": 1490219458, "question_id": 42963320, "link": "https://stackoverflow.com/questions/42963320/unknow-assembly-syntax", "title": "Unknow assembly syntax", "body": "<p>I have been studied assembly language based on gcc -S outputs, and i find some syntax i've not seen before.\nFrom C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main() {\n        printf(\"%d\\n\", sizeof(int));\n}\n</code></pre>\n\n<p>I've got this:</p>\n\n<pre><code>        .file   \"test.c\"\n        .def    __main; .scl    2;      .type   32;     .endef\n        .section .rdata,\"dr\"\n.LC0:\n        .ascii \"%d\\12\\0\"\n        .text\n        .globl  main\n        .def    main;   .scl    2;      .type   32;     .endef\n        .seh_proc       main\nmain:\n        pushq   %rbp\n        .seh_pushreg    %rbp\n        movq    %rsp, %rbp\n        .seh_setframe   %rbp, 0\n        subq    $32, %rsp\n        .seh_stackalloc 32\n        .seh_endprologue\n        call    __main\n        movl    $4, %edx\n        leaq    .LC0(%rip), %rcx\n        call    printf\n        nop\n        addq    $32, %rsp\n        popq    %rbp\n        ret\n        .seh_endproc\n        .ident  \"GCC: (tdm64-1) 5.1.0\"\n        .def    printf; .scl    2;      .type   32;     .endef\n</code></pre>\n\n<p>And even if this code is very clear and understandable, that one line of it is completely strange for me. The line i am talking about is:</p>\n\n<pre><code> leaq    .LC0(%rip), %rcx\n</code></pre>\n\n<p>And even if i know that <code>leaq</code> is instruction for loading effective address, that the operand syntax is unclear for me, i mean label of formatting string with instruction pointer as parameter? What does it do?\nThanks in advance :)</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490218645, "post_id": 42963035, "comment_id": 73020336, "body": "The code does not compile. One reason, what is <code>%team[r].id</code> as an argument for <code>strcpy</code> supposed to do? Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem. And why are you passing <code>strcpy(team[r].name, %team[r].id) != EOF</code> as an argument for <code>fscanf</code>? The code is nonsense."}, {"owner": {"reputation": 3, "user_id": 6860995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2584d0400aa99af037ab1affac16d359?s=128&d=identicon&r=PG&f=1", "display_name": "rik1254", "link": "https://stackoverflow.com/users/6860995/rik1254"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490219135, "post_id": 42963035, "comment_id": 73020549, "body": "So I found that  at this link :- <a href=\"https://www.daniweb.com/programming/software-development/threads/274590/read-file-into-structure\" rel=\"nofollow noreferrer\">daniweb.com/programming/software-development/threads/274590/&zwnj;&#8203;&hellip;</a>  I have no idea what %team[r].id part does, if it was &amp;team[r].id, I would say it assigns the value to that particular variable."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490219701, "post_id": 42963035, "comment_id": 73020809, "body": "There&#39;s nothing like <code>strcpy(team[r].name, %team[r].id)</code> on that page. If you understand basic C syntax, you should realize that what you wrote is nonsense, especially as an argument to <code>fscanf()</code>."}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1490219759, "post_id": 42963035, "comment_id": 73020837, "body": "I get this error when I compile it.  <code>main.c: In function &#39;main&#39;: main.c:25:51: error: expected expression before &#39;%&#39; token  while (fscanf(myfile,&quot;%s %d&quot;,strcpy(team[r].name, %team[r].id) != EOF) {                                                    ^ main.c:25:72: error: expected &#39;)&#39; before &#39;{&#39; token  while (fscanf(myfile,&quot;%s %d&quot;,strcpy(team[r].name, %team[r].id) != EOF) {                                                                         ^ main.c:35:1: error: expected expression before &#39;}&#39; token  }  ^  exit status 1    </code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1490219767, "post_id": 42963035, "comment_id": 73020839, "body": "It seems like you&#39;ve somehow combined several statements from the code on that page into one statement that&#39;s totally meaningless."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490219845, "post_id": 42963035, "comment_id": 73020880, "body": "<code>strcpy</code> does not even return <code>EOF</code>. It returns a pointer to the destination string. You have unmatched parentheses."}, {"owner": {"reputation": 3, "user_id": 6860995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2584d0400aa99af037ab1affac16d359?s=128&d=identicon&r=PG&f=1", "display_name": "rik1254", "link": "https://stackoverflow.com/users/6860995/rik1254"}, "edited": false, "score": 0, "creation_date": 1490220355, "post_id": 42963035, "comment_id": 73021099, "body": "I&#39;ve been coding C (no other language experience) for around 2 weeks, this is the first time I&#39;ve ever used (or seen) a <code>fscanf()</code>.   Why is it nonsense? Point me to where I can learn this properly, all I&#39;ve done so far is use Google, which as you can see, hasn&#39;t worked."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490220829, "post_id": 42963035, "comment_id": 73021272, "body": "Process strings split by a space : <a href=\"http://ideone.com/vJsEvE\" rel=\"nofollow noreferrer\">Read entire line and divide by last space</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490221082, "post_id": 42963035, "comment_id": 73021379, "body": "<code>&quot;%s %d&quot;</code> will not scan <code>New Zealand 13</code> as hoped."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6860995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2584d0400aa99af037ab1affac16d359?s=128&d=identicon&r=PG&f=1", "display_name": "rik1254", "link": "https://stackoverflow.com/users/6860995/rik1254"}, "edited": false, "score": 0, "creation_date": 1490220913, "post_id": 42963449, "comment_id": 73021307, "body": "&quot;Make it point somewhere useful&quot;, is that allocating enough memory to it using malloc? I&#39;ve seen that kicking about in a few tutorials I&#39;ve used/ seen, but the last I found (in the comments of the original post) looked far easier and I somewhat understood.  Thanks for the advice"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 3, "user_id": 6860995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2584d0400aa99af037ab1affac16d359?s=128&d=identicon&r=PG&f=1", "display_name": "rik1254", "link": "https://stackoverflow.com/users/6860995/rik1254"}, "edited": false, "score": 0, "creation_date": 1490221453, "post_id": 42963449, "comment_id": 73021553, "body": "Allocating memory with <code>malloc</code> would be one way. Reading into a fixed buffer and then using something like <code>team[r].name=strdup(buffer);</code> would be another. It&#39;s up to you, but you have to assign it a sensible value before you attempt to use its value. The important thing to understand is that you declared a pointer, not a string, and its value is the where it points."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490221708, "post_id": 42963449, "comment_id": 73021651, "body": "@DavidSchwartz You&#39;re not going to mention that using <code>strcpy()</code> from a number to a string makes no sense?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1490221868, "post_id": 42963449, "comment_id": 73021737, "body": "@Barmar I guess that could be added to the list. ;)"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1490220016, "creation_date": 1490220016, "answer_id": 42963449, "question_id": 42963035, "link": "https://stackoverflow.com/questions/42963035/read-write-from-structs-in-c/42963449#42963449", "title": "Read/ Write from structs in c", "body": "<pre><code>while (fscanf(myfile,\"%s %d\",strcpy(team[r].name, %team[r].id) != EOF) {\n</code></pre>\n\n<p>Two major problems here:</p>\n\n<ol>\n<li><p>There's a <code>%</code> before <code>team[r].id</code>. You probably wanted an <code>&amp;</code>.</p></li>\n<li><p><code>team[r].name</code> has not yet been assigned a value. Before you try to put a string where it points, you have to make it point somewhere useful.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6860995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2584d0400aa99af037ab1affac16d359?s=128&d=identicon&r=PG&f=1", "display_name": "rik1254", "link": "https://stackoverflow.com/users/6860995/rik1254"}, "edited": false, "score": 0, "creation_date": 1490221323, "post_id": 42963452, "comment_id": 73021494, "body": "Is there a reason for the <code>name</code> member to be an array (I understand why)? Previous tutorials I&#39;ve followed (and have worked) use the method I have, which is why it&#39;s remained until now. Does this change when you try to assign values from files rather than hardcoding?  Second point, completely understand, Thanks :)  The only reason I&#39;ve initialised it like this is when I call <code>team[1].name</code>, it will return England without the need of <code>team[x].id</code>. In future cases, I assume starting at 0, but retaining the <code>id</code> member would be best practice?  Thanks for the advice."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3, "user_id": 6860995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2584d0400aa99af037ab1affac16d359?s=128&d=identicon&r=PG&f=1", "display_name": "rik1254", "link": "https://stackoverflow.com/users/6860995/rik1254"}, "edited": false, "score": 0, "creation_date": 1490221620, "post_id": 42963452, "comment_id": 73021621, "body": "If it&#39;s not an array, you need to call <code>malloc()</code> to allocate memory for each name. What&#39;s the point of that, when you can simply put the array directly in the structure?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1490220024, "creation_date": 1490220024, "answer_id": 42963452, "question_id": 42963035, "link": "https://stackoverflow.com/questions/42963035/read-write-from-structs-in-c/42963452#42963452", "title": "Read/ Write from structs in c", "body": "<p>First, the <code>name</code> member of <code>leagueTable</code> should be an array, not a pointer:</p>\n\n<pre><code>struct leagueTable {\n    int id;\n    char name[20];\n    int win;\n    int loss;\n    int draw;\n    int points;\n};\n</code></pre>\n\n<p>Then, you seem to have mixed together several lines in your call to <code>fscanf()</code>. And when you're scanning into an integer variable, you have to pass a pointer using <code>&amp;</code>, not <code>%</code>. It should be:</p>\n\n<pre><code>while (fscanf(myfile,\"%s %d\", team[r].name, &amp;team[r].id) != EOF) {\n    r++;\n}\n</code></pre>\n\n<p>And array indexes start at <code>0</code>, not <code>1</code>, so you should initialize <code>r = 0</code>, not <code>r = 1</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 6860995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2584d0400aa99af037ab1affac16d359?s=128&d=identicon&r=PG&f=1", "display_name": "rik1254", "link": "https://stackoverflow.com/users/6860995/rik1254"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490220024, "creation_date": 1490218358, "last_edit_date": 1490219838, "question_id": 42963035, "link": "https://stackoverflow.com/questions/42963035/read-write-from-structs-in-c", "title": "Read/ Write from structs in c", "body": "<p>I'm creating a rugby league table and the last piece of functionality is to read from a file (I think .txt would be easiest) and writing back to it at the end of the program (or on prompt).</p>\n\n<p>I know there is a lot of help around, but I don't fully understand it. I don't want someone to code it for me, just to explain my error.</p>\n\n<p>Here is what I've got so far. NB, I've commented the code with anything I'm unsure of.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct leagueTable {\nint id;\nchar *name;\nint win;\nint loss;\nint draw;\nint points;\n};\n\nint main(){\n\nint l, n = 1, i = 1, r = 1, a, b, d, e, f;\nchar c;\nstruct leagueTable team[19];\n\nFILE *myfile = fopen(\"leagueTable.txt\", \"r\");\nif (myfile != NULL) {\n    printf(\"Error Reading File!\\nWill Exit Application!\\n\");\n    exit (0);\n}\nwhile (fscanf(myfile,\"%s %d\",strcpy(team[r].name, %team[r].id) != EOF) {\n    r++;\n}\nfor (r = 1; r &lt; 19; r++) {\n    printf(\"%i %s %i %i %i %i\", team[r].id, team[r].name, team[r].win, team[r].loss, team[r].draw, team[r].points);\n}\n\nfclose(myfile);\n\nreturn 0;\n}\n</code></pre>\n\n<p>And here is the content of the file</p>\n\n<pre><code>England 1\nIreland 2\nScotland 3\nWales 4\nFrance 5\nItaly 6\nGermany 7\nUraguay 8\nBelgium 9\nUSA 10\nMexico 11\nAustralia 12\nNew Zealand 13\nDenmark 14\nSweden 15\nBelize 16\nSouth Africa 17\nAlgeria 18\n</code></pre>\n\n<p>And my error</p>\n\n<pre><code>assignment.c: In function \u2018main\u2019:\nassignment.c:29:55: error: expected expression before \u2018%\u2019 token\n while (fscanf(myfile,\"%s %d\",strcpy(team[r].name, %team[r].id) != EOF) {\n                                                   ^\nassignment.c:29:76: error: expected \u2018)\u2019 before \u2018{\u2019 token\n while (fscanf(myfile,\"%s %d\",strcpy(team[r].name, %team[r].id) != EOF) {\n                                                                        ^\nassignment.c:51:1: error: expected expression before \u2018}\u2019 token\n }\n ^\n./cScript.sh: line 4: 24101 Segmentation fault      (core dumped) ./assignment\n</code></pre>\n\n<p>I think the FILE *myfile and the 4 lines following are correct, but its just the assigning the contents of the file to the struct.</p>\n\n<p>Currently the file only has whole strings and a single int, but it will have multiple int values and split strings (i.e \"South Africa\").</p>\n\n<p>How can I get it to just assign the values in the file to the struct?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 0, "creation_date": 1490218558, "post_id": 42963019, "comment_id": 73020306, "body": "Have you tried this <code>sscanf(ipAddr.c_str(), &quot;%*hu.%hu.%hu.%hu&quot;, &amp;octet2, &amp;octet2, &amp;octet3, &amp;octet4);</code> the * is for ignoring it after reading the value"}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 1, "creation_date": 1490218620, "post_id": 42963019, "comment_id": 73020325, "body": "Whats the problem?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490218657, "post_id": 42963019, "comment_id": 73020343, "body": "problem is <code>&amp;</code> instead of <code>%</code>..."}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 0, "creation_date": 1490218697, "post_id": 42963019, "comment_id": 73020366, "body": "Oh typo, fixed it"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490218809, "post_id": 42963019, "comment_id": 73020418, "body": "besides, I&#39;m not sure of behaviour of that <code>sscanf(ipAddr.c_str(), &quot;%hu.%hu.%hu.%hu&quot;, &amp;octet2, &amp;octet2, &amp;octet3, &amp;octet4);</code>. Which argument is evaluated first in <code>scanf</code> since you&#39;re reusing the same variable. Not sure it&#39;s left to right. Well, maybe."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490218864, "post_id": 42963019, "comment_id": 73020442, "body": "@Jean-Fran&#231;oisFabre a byte is not an octet on all systems. IP address always consists of octets on all systems, regardless of byte size."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1490218945, "post_id": 42963019, "comment_id": 73020475, "body": "@user2079303 betrayed by too much (or not enough:)) knowledge: &quot;octet&quot; is french for &quot;bytes&quot;! will revert OP edit."}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 0, "creation_date": 1490219632, "post_id": 42963019, "comment_id": 73020782, "body": "sscanf goes from left to right"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1490219830, "post_id": 42963019, "comment_id": 73020867, "body": "Have you bench-marked this? Memory bandwidth in a new PC is somewhere in the range 10-20 GB/s, and a million writes of <code>short</code> will be 2 MB. Is this a problem to focus on?"}, {"owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "edited": false, "score": 0, "creation_date": 1490270202, "post_id": 42963019, "comment_id": 73042545, "body": "Just being nit picky, and I want to understand millisecond improvements more."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1490218578, "creation_date": 1490218578, "answer_id": 42963094, "question_id": 42963019, "link": "https://stackoverflow.com/questions/42963019/breaking-ip-address-into-octets-but-skip-first-octet-with-sscanf/42963094#42963094", "title": "Breaking IP address into octets but skip first octet with sscanf", "body": "<p>you could scan but not store the first argument by prefixing first format specifier by <code>*</code> to tell <code>sscanf</code> to parse but not store the field (and you only need 3 parameters in that case):</p>\n\n<pre><code>sscanf(ipAddr.c_str(), \"%*hu.%hu.%hu.%hu\", &amp;octet2, &amp;octet3, &amp;octet4);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7405678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/baa46420b586e13972797f46a16b23e7?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Luce", "link": "https://stackoverflow.com/users/7405678/joseph-luce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 42963094, "answer_count": 1, "score": 0, "last_activity_date": 1490218999, "creation_date": 1490218317, "last_edit_date": 1490218999, "question_id": 42963019, "link": "https://stackoverflow.com/questions/42963019/breaking-ip-address-into-octets-but-skip-first-octet-with-sscanf", "title": "Breaking IP address into octets but skip first octet with sscanf", "body": "<pre><code>unsigned short octet2, octet3, octet4;\nsscanf(ipAddr.c_str(), \"%hu.%hu.%hu.%hu\", &amp;octet2, &amp;octet2, &amp;octet3, &amp;octet4);\n</code></pre>\n\n<p>ipAddr is a string.</p>\n\n<p>From the above code, it is successfully breaking the octets up. However, I'd like to just avoid touching the first octet of the IP address. I want to avoid extra operations of writing into octet2 twice. </p>\n\n<p>For example, with the IP address 1.2.3.4, I'll break up the IP address into 2, then 3, then 4 without touching 1.</p>\n\n<p>My operations will be done over a million times, unless there is a better method than sscanf please let me know.</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490218297, "post_id": 42962928, "comment_id": 73020167, "body": "and how do you <i>print</i>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490218298, "post_id": 42962928, "comment_id": 73020169, "body": "Please post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows the problem."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490218327, "post_id": 42962928, "comment_id": 73020180, "body": "Provide code. How exactly do you intend to print only <code>v</code> and <code>S</code>? What values do you expect to see?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1490218329, "post_id": 42962928, "comment_id": 73020182, "body": "Also post the compiler warning you get when you try to print a struct."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1490218525, "post_id": 42962928, "comment_id": 73020293, "body": "@Arash-- Well, a C array <i>decays</i> to a pointer to the first element in most expressions, while a structure does not. I suspect that is the issue here."}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490218747, "post_id": 42962928, "comment_id": 73020391, "body": "@David, yes. I think that&#39;s the issue that OP faces."}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490219035, "post_id": 42963109, "comment_id": 73020511, "body": "While this is clearly UB according to the Standard, i.e., printing the &quot;value&quot; of a structure with <code>%d</code>, it almost seems like it must work, since the address of the <code>struct</code> is guaranteed to be the address of the first member, which is an <code>int</code> in this case."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1490219225, "post_id": 42963109, "comment_id": 73020601, "body": "@DavidBowling: UB does not prevent an implementation to give expected result... It is simply essential on a portability point of view to be aware that it just works <i>by accident</i>. In particular, standard has provision for an implementation to have different representations for pointer to int and pointer to struct. In that case printing the value of a struct with <code>%d</code> could give a completely different output from printing its first (int) member."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490219856, "post_id": 42963109, "comment_id": 73020887, "body": "I wasn&#39;t suggesting that this would in fact be portable; just trying to imagine a circumstance that would cause problems. I had forgotten about the possibility of differing pointer representations. This just highlights why we should take UB seriously, instead of guessing at what we think must be happening behind the scenes! Thanks for the reply :)"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1490218643, "creation_date": 1490218643, "answer_id": 42963109, "question_id": 42962928, "link": "https://stackoverflow.com/questions/42962928/struct-vs-array-printing-the-first-value/42963109#42963109", "title": "Struct vs. Array: printing the first value", "body": "<p>Because struct and arrays are quite different. When used in an expression, an array decays to a pointer to its first element, so if you try to print it as an int, you get with the address of the first element of the array converted to an int.</p>\n\n<p>On the other side a struct is really a type and the address of a struct is the address of its first element. For example a function can return a struct, but returning an array is illegal. When you try to print a struct as as int, you pass the address of the struct to the <code>printf</code> function and end in printing the first element of the struct.</p>\n\n<p>But all the above is only the result of a C implementation (ok all common implementation behave the same here), because according to the standard, passing anything else than an integer as a parameter of <code>printf</code> for the <code>%d</code> of <code>%x</code> format gives an undefined result.</p>\n\n<p>TL/DR: the observed result is not a surprise as soon as you know C language and its common implementations</p>\n"}], "owner": {"reputation": 523, "user_id": 7180288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbf6165ef585d461f5cb8edd538865f?s=128&d=identicon&r=PG&f=1", "display_name": "AlessandroF", "link": "https://stackoverflow.com/users/7180288/alessandrof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1490236176, "answer_count": 1, "score": -2, "last_activity_date": 1490222544, "creation_date": 1490217899, "last_edit_date": 1490222544, "question_id": 42962928, "link": "https://stackoverflow.com/questions/42962928/struct-vs-array-printing-the-first-value", "closed_reason": "Not suitable for this site", "title": "Struct vs. Array: printing the first value", "body": "<p>If I have an array, for example:</p>\n\n<pre><code>int v[10] \n</code></pre>\n\n<p>and I try to print only 'v', I'll see the location in memory of the array.</p>\n\n<p>But if I have a struct</p>\n\n<pre><code>struct mystruct{\n  int x;\n  int y;\n}S;\n</code></pre>\n\n<p>And i try to print only 'S', I'll see the VALUE of x, that is the first member of the struct, but not the address. <br>\nWhy? Thank you.\n<br></p>\n\n<p>---edit---<br>\nI print with a simple printf. <br>\nSorry for my ignorance, but it was a curiosity...<br></p>\n"}, {"tags": ["c", "function", "keyword"], "answers": [{"comments": [{"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 1, "creation_date": 1490218028, "post_id": 42962941, "comment_id": 73020053, "body": "What reference would corroborate what you&#39;re saying? I think I agree with you personally but I would rather be able to point to some part of the C standard or of a reputable style guideline."}], "tags": [], "owner": {"reputation": 40, "user_id": 7748638, "user_type": "registered", "profile_image": "https://graph.facebook.com/285386501894791/picture?type=large", "display_name": "Reece W Griffith", "link": "https://stackoverflow.com/users/7748638/reece-w-griffith"}, "is_accepted": false, "score": 0, "last_activity_date": 1490218040, "last_edit_date": 1490218040, "creation_date": 1490217975, "answer_id": 42962941, "question_id": 42962906, "link": "https://stackoverflow.com/questions/42962906/should-c-declarations-match-definition-including-keywords-and-qualifiers-such-as/42962941#42962941", "title": "Should C declarations match definition including keywords and qualifiers such as &quot;static&quot;, &quot;inline&quot;, etc", "body": "<p>Yes. inline and static should be include. For example, the line of code for the function should be the same in the .h file where you declare, and the .c file where you define (so yes in both cases), but in your main code.c file it should only have the function name when called, so \"foo(parameters passed)\". </p>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1490219190, "post_id": 42963002, "comment_id": 73020580, "body": "Not only that it is not relevant, for C it is just giving the wrong direction. Attaching <code>inline</code> to a declaration but not to a definition is quite senseless."}], "tags": [], "owner": {"reputation": 500, "user_id": 3786026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3052b792b1195e64bdf52bc21438c688?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Frost", "link": "https://stackoverflow.com/users/3786026/nick-frost"}, "is_accepted": false, "score": -1, "last_activity_date": 1490218243, "creation_date": 1490218243, "answer_id": 42963002, "question_id": 42962906, "link": "https://stackoverflow.com/questions/42962906/should-c-declarations-match-definition-including-keywords-and-qualifiers-such-as/42963002#42963002", "title": "Should C declarations match definition including keywords and qualifiers such as &quot;static&quot;, &quot;inline&quot;, etc", "body": "<p>You only need <code>inline static</code> in the declaration. You can leave it out of the function definition.</p>\n\n<p>7.1.1/6:</p>\n\n<blockquote>\n  <p>A name declared in a namespace scope without a storage-class-specifier has external linkage unless it has internal linkage because of a previous declaration and provided it is not declared const. Objects declared const and not explicitly declared extern have internal linkage.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1490218562, "post_id": 42963051, "comment_id": 73020307, "body": "in my example they are in the same translation unit"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1490219321, "post_id": 42963051, "comment_id": 73020644, "body": "@JasonS, if it is just inside one TU, <code>inline</code> makes no sense at all. The compiler can inline every definition that it sees, anyhow."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1490241298, "post_id": 42963051, "comment_id": 73027560, "body": "can != does. For this particular compiler I am using (Microchip XC16) the free version with <code>-O1</code> optimization doesn&#39;t automatically inline small functions (but you can cajole it into doing so with <code>inline</code>) whereas the premium version with <code>-O2</code> or <code>-O3</code> optimization does. But my question is general + I am looking for advice that would cover clang / gcc / XC16."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 1, "creation_date": 1490256212, "post_id": 42963051, "comment_id": 73033073, "body": "@JasonS, I see. My advice would be to avoid to add noise just because you have one compiler that has bad optimization. If you are convinced that these functions <i>should</i> be inlined use the C model, that is put the definitions with <code>inline</code> in a header (or the start of your .c) and place an &quot;instantiation&quot;, a declaration without <code>inline</code>, somewhere later. By that you can be sure that this is portable."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1490218401, "creation_date": 1490218401, "answer_id": 42963051, "question_id": 42962906, "link": "https://stackoverflow.com/questions/42962906/should-c-declarations-match-definition-including-keywords-and-qualifiers-such-as/42963051#42963051", "title": "Should C declarations match definition including keywords and qualifiers such as &quot;static&quot;, &quot;inline&quot;, etc", "body": "<p>No, for <code>inline</code> in particular, these should not be the same.</p>\n\n<p>But the example is wrong from the start. For <code>inline</code> you need a definition (the whole function) with the <code>inline</code> in the .h file. By that, the <code>inline</code>, you avoid that the symbol is defined in several translation unit (.c) where you include the .h header.</p>\n\n<p>Then, in exactly one translation unit you pout just the declaration without <code>inline</code> to indicate that the symbol should be generated in the corresponding .o object file.</p>\n"}, {"tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 1, "last_activity_date": 1490219563, "creation_date": 1490219563, "answer_id": 42963347, "question_id": 42962906, "link": "https://stackoverflow.com/questions/42962906/should-c-declarations-match-definition-including-keywords-and-qualifiers-such-as/42963347#42963347", "title": "Should C declarations match definition including keywords and qualifiers such as &quot;static&quot;, &quot;inline&quot;, etc", "body": "<p><strong>I want to provide detailed information about inline,</strong></p>\n\n<blockquote>\n  <p>you can separate the declaration and definition fine, but that\n  definition must be available in every translation unit that uses the\n  function, i.e in your case <code>inline static int foo(int x);</code></p>\n</blockquote>\n\n<p>Inline functions are included in the ISO C99 standard, but there are currently substantial differences between what GCC implements and what the ISO C99 standard requires.</p>\n\n<p>To declare a function inline, use the inline keyword in its declaration, like this:</p>\n\n<pre><code>static inline int\ninc (int *a)\n{\n  return (*a)++;\n}\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Inline.html\" rel=\"nofollow noreferrer\">An Inline Function is As Fast As a Macro</a></p>\n</blockquote>\n\n<p>Note that certain usages in a function definition can make it unsuitable for inline substitution. </p>\n\n<p><strong>Note that in C, unlike C++, the inline keyword does not affect the linkage of the function.</strong></p>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1490219563, "creation_date": 1490217817, "last_edit_date": 1490218580, "question_id": 42962906, "link": "https://stackoverflow.com/questions/42962906/should-c-declarations-match-definition-including-keywords-and-qualifiers-such-as", "title": "Should C declarations match definition including keywords and qualifiers such as &quot;static&quot;, &quot;inline&quot;, etc", "body": "<p>Consider this example of a function declaration and definition (in the same translation unit):</p>\n\n<pre><code>inline static int foo(int x);\n\n...\n\nint foo(int x)\n{\n  return x+1;\n}\n</code></pre>\n\n<p>I know that the types need to match, but what about other keywords and qualifiers? Should <code>inline static</code> be in both cases? Or just the declaration?</p>\n\n<p>And which part of the C standard or which coding guideline could I use to justify the answer?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1490217773, "post_id": 42962872, "comment_id": 73019933, "body": "Is this your entire code?"}, {"owner": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "reply_to_user": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1490217847, "post_id": 42962872, "comment_id": 73019969, "body": "yes, this whole code"}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1490217911, "post_id": 42962872, "comment_id": 73020002, "body": "And your problem is why it&#39;s able to reverse it without any use of loops? @WallaAhmed"}, {"owner": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "reply_to_user": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1490217982, "post_id": 42962872, "comment_id": 73020032, "body": "i want to know how i can pass ptr to string to the function reverse , and it can print the whole string by knowing only char sPtr[0]"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490218023, "post_id": 42962872, "comment_id": 73020050, "body": "Please do not overlook that <code>fgets</code> might retain any newline at its end. So you could check the line ending with <code>&lt; &#39; &#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "edited": false, "score": 0, "creation_date": 1490218398, "post_id": 42962968, "comment_id": 73020227, "body": "&amp;sPtr[1] is a pointer to the string containing everything except the first character. ,,,,,,, or is point to first char of  string ??"}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "edited": false, "score": 0, "creation_date": 1490218656, "post_id": 42962968, "comment_id": 73020342, "body": "Both, actually.  C defines a string to be a contiguous series of bytes with a null character at the end.  If you point to a character within that string, that pointer also technically points at a string starting with that character.  It&#39;s a pointer to a character because that&#39;s what <code>char*</code>s do (by definition).  It&#39;s a pointer to a string because you and I know, from looking at the code, that that character happens to be part of a null-terminated array of characters."}, {"owner": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "edited": false, "score": 0, "creation_date": 1490219180, "post_id": 42962968, "comment_id": 73020576, "body": "void reverse( char sPtr[])       {   \t    int count=0;          /* if end of the string */          while (sPtr[count]!= &#39;\\0&#39; ) \t\t { \t\t\tprintf(&quot;%c&quot;,sPtr[79-count]);\t             count++;\t\t\t \t\t\t  \t\t }"}, {"owner": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "edited": false, "score": 0, "creation_date": 1490219196, "post_id": 42962968, "comment_id": 73020584, "body": "i used another way ,,    it also didnot work with me,"}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "edited": false, "score": 0, "creation_date": 1490219402, "post_id": 42962968, "comment_id": 73020677, "body": "That code describes a very different issue that arises.  While <code>sentence</code> is an array of 80 characters, we&#39;re not always using all of them.  <code>fgets</code> puts a null terminator right after the end of the sentence, which is often not exactly 80 characters long.  Your code is actually reading the &quot;garbage&quot; at the end of <code>sentence</code> occurring after the null terminator put in place by <code>fgets</code>.  Use a function like <code>strlen</code> to get the length of the string, and use that length minus one instead of <code>79</code> and things should work better!  (also make sure you are checking the same character you are printing)"}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "edited": false, "score": 0, "creation_date": 1490219425, "post_id": 42962968, "comment_id": 73020685, "body": "Your code checks <code>sPtr[count]</code> to see if it is null, but prints <code>sPtr[79-count]</code>.  That&#39;s probably not what you intended."}], "tags": [], "owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "is_accepted": true, "score": 1, "last_activity_date": 1490218070, "creation_date": 1490218070, "answer_id": 42962968, "question_id": 42962872, "link": "https://stackoverflow.com/questions/42962872/why-in-reverse-function-it-work-normal-without-using-for-loop-for-next-character/42962968#42962968", "title": "why in reverse function it work normal without using for loop for next character like ( sPtr[ count]( sPtr[ 2],if ( sPtr[ 3]...... and so on", "body": "<p>The <code>reverse</code> function is what we call a \"recursive\" function.  It calls itself as part of its operation.</p>\n\n<p>The key pieces are:</p>\n\n<ul>\n<li><code>sPtr[1]</code> is the second character in the string, which means <code>&amp;sPtr[1]</code> is a pointer to the string containing everything except the first character.</li>\n<li>Calling <code>reverse(&amp;sPtr[1])</code> has the effect of doing whatever <code>reverse</code> does on a string containing everything except the first character.</li>\n<li>calling <code>reverse</code> on an empty string prints nothing.</li>\n</ul>\n\n<p>Recursive functions can be tricky to understand.  I would consider this to be a bad example to learn from because the iterative approach (with a <code>for</code> loop) is so easy to understand and this version is so cryptic.  There are other algorithms which are much more natural looking in recursive form.</p>\n"}], "owner": {"reputation": 3, "user_id": 7558562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ea908cf96bff63b1f53fd7916627a8?s=128&d=identicon&r=PG&f=1", "display_name": "walaa ahmed", "link": "https://stackoverflow.com/users/7558562/walaa-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 42962968, "answer_count": 1, "score": 0, "last_activity_date": 1490218070, "creation_date": 1490217675, "question_id": 42962872, "link": "https://stackoverflow.com/questions/42962872/why-in-reverse-function-it-work-normal-without-using-for-loop-for-next-character", "title": "why in reverse function it work normal without using for loop for next character like ( sPtr[ count]( sPtr[ 2],if ( sPtr[ 3]...... and so on", "body": "<pre><code>     #include &lt;stdio.h&gt;\n\n     void reverse( char sPtr[] ); /* prototype */\n\n     int main( void )\n      {  \n       char sentence[ 80 ]; /* create char array */\n\n       printf( \"Enter a line of text:\\n\" );\n\n      /* use fgets to read line of text */\n      fgets( sentence, 80, stdin ); \n\n      printf( \"\\nThe line printed backward is:\\n\" );\n      reverse( sentence );\n      // system(\"pause\");\n      return 0; /* indicates successful termination */\n      } /* end main */\n\n       /* recursively outputs characters in string in reverse order */\n        void reverse( char sPtr[])\n      {  \n         /* if end of the string */\n         if ( sPtr[ 0 ] == '\\0' )\n         { /* base case */\n           return; \n         } /* end if */ \n          else \n          {\n              /* if not end of the string */ \n             reverse( &amp;sPtr[ 1 ] ); /* recursion step */\n              putchar( sPtr[ 0 ] ); /* use putchar to display character */\n          } /* end else */\n           }  /* end function reverse */\n</code></pre>\n\n<p>this code to print string and its reverse like\n   james \n   semaj\n   but i cannot figure out why when passing ptr to array it could print whole        string without for loop to make pointer indicate to next char to print it</p>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1490216660, "post_id": 42962608, "comment_id": 73019379, "body": "What is this: <code>seatNumber == 5,2</code> ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1490216668, "post_id": 42962608, "comment_id": 73019383, "body": "<code>seatNumber == 5,2</code> ?? it tests for 2 which is always true..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490216737, "post_id": 42962608, "comment_id": 73019425, "body": "Where is <code>typeOfSeat</code> defined?"}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 0, "creation_date": 1490216773, "post_id": 42962608, "comment_id": 73019446, "body": "Thanks, that helped, i for some reason thought i can append on to one equals statement. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1490216715, "creation_date": 1490216715, "answer_id": 42962644, "question_id": 42962608, "link": "https://stackoverflow.com/questions/42962608/if-else-statement-troubles-in-c/42962644#42962644", "title": "If else statement troubles in C", "body": "<p>This does not do what you think it does:</p>\n\n<pre><code>seatNumber == 5,2\n</code></pre>\n\n<p>If you want to check against both values, you need separate conditionals</p>\n\n<pre><code>else if((seatNumber % 6) == 2 || (seatNumber % 6) == 5|| seatNumber == 5 || seatNumber == 2 ) {\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1490216715, "creation_date": 1490216556, "question_id": 42962608, "link": "https://stackoverflow.com/questions/42962608/if-else-statement-troubles-in-c", "title": "If else statement troubles in C", "body": "<p>I am trying to input a seat number of \"15\"  into this function and get the char value of 'A'. However, for some reason every time I input a number that should be a type 'A'(because its remainder doesn't equal any of the aforementioned values) it gets stuck in the 'M' else if statement. I really do not understand why and would like some help if you have time :)</p>\n\n<pre><code>char whatTypeOfSeat(int seatNumber){\n   if((seatNumber % 6) == 0 || seatNumber % 6 == 1 || seatNumber == 1) {\n    typeOfSeat =  'W';\n    }\n    else if((seatNumber % 6) == 2 || (seatNumber % 6) == 5|| seatNumber == 5,2 ) {\n     typeOfSeat = 'M';\n      }\n    else {\n    typeOfSeat = 'A';\n    }\n    return typeOfSeat;\n\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 6, "creation_date": 1490216181, "post_id": 42962483, "comment_id": 73019097, "body": "<code>buffer+2</code> will do fine... <code>offset=2; write(fdout,buffer+offset,40-offset);</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1490216254, "post_id": 42962483, "comment_id": 73019148, "body": "Or <code>&amp;buffer[2]</code> if that feels more comfortable, though I prefer the explicit pointer arithmetic myself."}], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 7560264, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/yhuvk.jpg?s=128&g=1", "display_name": "WizKiz", "link": "https://stackoverflow.com/users/7560264/wizkiz"}, "edited": false, "score": 0, "creation_date": 1490216325, "post_id": 42962513, "comment_id": 73019190, "body": "Why change from 38 to 40-2?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 152, "user_id": 7560264, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/yhuvk.jpg?s=128&g=1", "display_name": "WizKiz", "link": "https://stackoverflow.com/users/7560264/wizkiz"}, "edited": false, "score": 1, "creation_date": 1490216420, "post_id": 42962513, "comment_id": 73019246, "body": "@WizKiz To be more clear regarding the size of the buffer relating to the offset you&#39;re writing from.  If the value <code>2</code> was a variable, you would plug that variable in both places."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1490216208, "creation_date": 1490216208, "answer_id": 42962513, "question_id": 42962483, "link": "https://stackoverflow.com/questions/42962483/how-to-write-in-c-starting-at-a-certain-point-in-the-buffer/42962513#42962513", "title": "How to write in C starting at a certain point in the buffer?", "body": "<p>You just need a pointer into the proper place in the buffer:</p>\n\n<pre><code>write(fdout, &amp;buffer[2], 40-2);\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 7560264, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/yhuvk.jpg?s=128&g=1", "display_name": "WizKiz", "link": "https://stackoverflow.com/users/7560264/wizkiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 42962513, "answer_count": 1, "score": 0, "last_activity_date": 1490216208, "creation_date": 1490216085, "question_id": 42962483, "link": "https://stackoverflow.com/questions/42962483/how-to-write-in-c-starting-at-a-certain-point-in-the-buffer", "title": "How to write in C starting at a certain point in the buffer?", "body": "<p>Simple question. I've been trying to find the answer before asking but i dont know if im wording the question right.</p>\n\n<p>I want to write in C using <code>write(int fd, char* buffer, size)</code>.</p>\n\n<pre><code>char buffer[40];\n//just assume the buffer has been read into.\nwrite(fdout,buffer,40);\n</code></pre>\n\n<p>I want to write say starting at index 2 of the buffer so from buffer[2] to the end skipping the first 2 characters. To do this would I have to make another char* and concat the buffer excluding the first 2 characters?</p>\n"}, {"tags": ["c", "for-loop", "time", "time-complexity"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490214818, "post_id": 42962098, "comment_id": 73018318, "body": "<code>foo(n^2);</code>, <i>in code</i>,  is <code>n</code> exclusive-or with <code>2</code>.  Did you mean <code>n*n</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490214855, "post_id": 42962098, "comment_id": 73018342, "body": "That depends on the calling, since you hint at <code>n**2</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490214870, "post_id": 42962098, "comment_id": 73018350, "body": "of course it&#39;s <code>O(N)</code>, whatever the value passed to it. If you call it with <code>n*n</code> it will loop <code>n*n</code> times. So <code>O(N)</code>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1490214933, "post_id": 42962098, "comment_id": 73018387, "body": "Complexity depends on <code>n</code> passed as argument. While seeing function it is <code>O(n)</code> but value of <code>n</code> will play a role here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1490214960, "post_id": 42962098, "comment_id": 73018402, "body": "Time complexity of <code>foo(n)</code> is O(n).  Time complexity of <code>main()</code> is O(n*n) or O(1) or ... depending on its contents.  The question is: Is the <i>algorithm</i> the prof is talking about the whole unposted C program or <code>foo()</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490215846, "post_id": 42962098, "comment_id": 73018915, "body": "Obviously the parameter <code>n</code> and <code>n^2</code> passed to the function are different <code>n</code>s."}, {"owner": {"reputation": 1, "user_id": 2156415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e91b888cf3f8306dcdb0c3dda05f51f?s=128&d=identicon&r=PG", "display_name": "user2156415", "link": "https://stackoverflow.com/users/2156415/user2156415"}, "edited": false, "score": 0, "creation_date": 1490280004, "post_id": 42962098, "comment_id": 73050333, "body": "Agree with chux and  Eugene... I should have raised question for which n he is talking about.... inner n or outer. Thank you guys"}], "owner": {"reputation": 1, "user_id": 2156415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e91b888cf3f8306dcdb0c3dda05f51f?s=128&d=identicon&r=PG", "display_name": "user2156415", "link": "https://stackoverflow.com/users/2156415/user2156415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490214745, "creation_date": 1490214745, "question_id": 42962098, "link": "https://stackoverflow.com/questions/42962098/time-complexity-when-high-degree-argument-is-passed-to-function", "title": "Time complexity when high degree argument is passed to function", "body": "<p>Suppose there is function called from main function as foo(n^2);\nand body as </p>\n\n<pre><code>void foo(int n)\n{\n  for(int I=0 ; I&lt;n ; I++)\n    printf(\"\");\n}\n</code></pre>\n\n<p>According to my professor time complexity of above algorithm is O(n^2) whereas I believed as O(n)</p>\n"}, {"tags": ["c", "unix", "fork"], "comments": [{"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 2, "creation_date": 1490215210, "post_id": 42962067, "comment_id": 73018546, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19323483/why-there-are-many-pids-printed-while-using-fork-system-call\">Why there are many PIDs printed while using fork system call?</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1490215746, "post_id": 42962067, "comment_id": 73018861, "body": "Nitpick: the code you show doesn&#39;t produce the output you show; there are newlines in the output that aren&#39;t present in the source.  It&#39;s really frustrating trying to debug the wrong code.  You should probably add a &#39;while&#39; loop to <code>wait()</code> for children to die.  For example, <code>int corpse; int status; while ((corpse = wait(&amp;status)) != -1) { \u2026print information about dead child\u2026 }</code>.  This would give you better information about the tree structure.  The parent process 1 is the system process that waits for orphaned processes to exit."}, {"owner": {"reputation": 928, "user_id": 5644037, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/u24pn.jpg?s=128&g=1", "display_name": "Coursal", "link": "https://stackoverflow.com/users/5644037/coursal"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490218217, "post_id": 42962067, "comment_id": 73020136, "body": "@JonathanLeffler I believe sleep(1)&#39;s have kinda sort out the problem of ppid=1, is that right?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490218362, "post_id": 42962067, "comment_id": 73020205, "body": "I can&#39;t see any <code>sleep(1)</code> calls in your code \u2014 so I can&#39;t tell whether it will work OK or not.  Please remind yourself about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) \u2014 you&#39;ve been around long enough to have an idea what I&#39;m talking about."}, {"owner": {"reputation": 928, "user_id": 5644037, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/u24pn.jpg?s=128&g=1", "display_name": "Coursal", "link": "https://stackoverflow.com/users/5644037/coursal"}, "edited": false, "score": 0, "creation_date": 1490218413, "post_id": 42962067, "comment_id": 73020238, "body": "I&#39;ve updated the code"}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1490279581, "post_id": 42962067, "comment_id": 73049943, "body": "For future reference: there are three distinct groups of results from <code>fork()</code> that you should be looking out for: 0 (success, and this is the child), positive (success, this is the parent, and the return value is the child&#39;s pid), and negative (failure; there is no child)."}, {"owner": {"reputation": 928, "user_id": 5644037, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/u24pn.jpg?s=128&g=1", "display_name": "Coursal", "link": "https://stackoverflow.com/users/5644037/coursal"}, "reply_to_user": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1490296511, "post_id": 42962067, "comment_id": 73061771, "body": "@cHao This is extremely helpful and straight to the point. Thank you so much."}], "answers": [{"comments": [{"owner": {"reputation": 928, "user_id": 5644037, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/u24pn.jpg?s=128&g=1", "display_name": "Coursal", "link": "https://stackoverflow.com/users/5644037/coursal"}, "edited": false, "score": 0, "creation_date": 1490216642, "post_id": 42962283, "comment_id": 73019367, "body": "Based on your answer and the pid&#39;s &amp; ppid&#39;s I got with sleep(1), is this the tree that gets created? <a href=\"http://i65.tinypic.com/15nu8gh.png\" rel=\"nofollow noreferrer\">i65.tinypic.com/15nu8gh.png</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490218701, "post_id": 42962283, "comment_id": 73020369, "body": "No; your diagram seems to have 3 lines coming out of &#39;shell&#39;, which is at best confusing and most likely just wrong."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1490215313, "creation_date": 1490215313, "answer_id": 42962283, "question_id": 42962067, "link": "https://stackoverflow.com/questions/42962067/unix-forks-to-a-tree/42962283#42962283", "title": "Unix: Forks to a tree", "body": "<p>You'll get a total of 5 children:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>                  c2--------------\n                    |             \n                    |             \n     c1---------------------------\n       |           p4             \n       |                          \n       |                          \n       |                          \n       |                c5--------\n       |                  |       \n       |                  |       \n       |       c3-----------------\n       |         |       p3       \n       |         |                \n       |         |      c4--------\n       |         |        |       \n       |         |        |       \np---------------------------------\n      p1        p2       p3\n</code></pre>\n\n<p>The first fork happens at point <code>p1</code>, which create child <code>c1</code>.  This child goes into the <code>else</code> part of the code and runs the fork at point <code>p4</code>, creating child <code>c2</code>.</p>\n\n<p>Back in the parent, it forks at point <code>p2</code> creating child <code>c3</code>.  <em>Both</em> of these processes then fork at point <code>p3</code>, creating children <code>c4</code> and <code>c5</code>.</p>\n\n<p>The reason you're seeing some processes report their parent as 1 is because the parent is finishing before the child.  Try putting <code>sleep(1)</code> at the bottom of this block to give the parent processes time to stay around so the children can see them.</p>\n"}], "owner": {"reputation": 928, "user_id": 5644037, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/u24pn.jpg?s=128&g=1", "display_name": "Coursal", "link": "https://stackoverflow.com/users/5644037/coursal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490218172, "creation_date": 1490214675, "last_edit_date": 1490218172, "question_id": 42962067, "link": "https://stackoverflow.com/questions/42962067/unix-forks-to-a-tree", "title": "Unix: Forks to a tree", "body": "<p>I'm a newbie at unix shell programming and I have a really hard time getting an good explanation about forks and their trees. All I know for now is that a fork kind of copies a process (child) from the main one (parent).</p>\n\n<p>More specifically I can't quite get from a piece of code how a process tree would be like.</p>\n\n<p>For example, at this backbone of code:</p>\n\n<pre><code>pid1=fork();\nif (pid1!=0) \n{   \n    pid2=fork(); \n    pid3=fork(); \n}\nelse \n{ \n    pid4=fork(); \n} \n</code></pre>\n\n<p>It seems to me that there are 3 processes under the original process (pid1, pid2, pid3) and a child of one of these three (pid4), maybe pid2's.</p>\n\n<p>I tried to run it with some more awfully written code:</p>\n\n<pre><code>int pid1, pid2, pid4, pid4;\n\nprintf(\"I'm the original Process %d with parent %d \\n\", getpid(), getppid());\n\npid1=fork();\n\nif(pid1!=0)\n{\n    pid2=fork();\n    printf(\"I'm P2 %d with parent %d \\n\", getpid(), getppid());\n    sleep(1);\n\n    pid3=fork();\n    printf(\"I'm P3 %d with parent %d \\n\", getpid(), getppid());\n    sleep(1);\n}\nelse\n{\n    pid4=fork();\n    printf(\"I'm P4 %d with parent %d \\n\", getpid(), getppid());\n    sleep(1);\n}\n</code></pre>\n\n<p>Edit: I put some sleep(1) at the code above, thanks to dbush, so I can see the ppid's</p>\n\n<p><a href=\"https://i.stack.imgur.com/StAH0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/StAH0.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, how is the tree forming with these types of code?</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1490214880, "post_id": 42962066, "comment_id": 73018356, "body": "&quot;Does not compile&quot; isn&#39;t a clear problem statement. Please post the error messages you&#39;re getting."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490215313, "post_id": 42962066, "comment_id": 73018617, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490215553, "post_id": 42962066, "comment_id": 73018744, "body": "For code that does not compile, you should provide error messages."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490216225, "post_id": 42962066, "comment_id": 73019127, "body": "If your code doesn&#39;t compile, you should be showing the compiler error messages.  What you see is not necessarily what we see.  But you should be asking yourself &quot;why don&#39;t I understand the compiler&#39;s error messages&quot;.  Please make sure that you&#39;re proving an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 3, "user_id": 7753420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53abd582391551ffc4e059b2f33a0129?s=128&d=identicon&r=PG&f=1", "display_name": "Amidaraxar", "link": "https://stackoverflow.com/users/7753420/amidaraxar"}, "edited": false, "score": 0, "creation_date": 1490219235, "post_id": 42962066, "comment_id": 73020610, "body": "gcc -Wall -c &quot;lab2_02.c&quot; (nella cartella:/home/amidaraxar/Scaricati/Lab2.2) lab2_02.c: In function \u2018main\u2019: lab2_02.c:135:1: error: expected declaration or statement at end of input  }  ^ lab2_02.c:135:1: error: expected declaration or statement at end of input At top level: lab2_02.c:99:7: warning: \u2018TFb\u2019 defined but not used [-Wunused-function]  void* TFb()        ^~~ lab2_02.c:60:7: warning: \u2018TFa\u2019 defined but not used [-Wunused-function]  void* TFa()        ^~~ Compilazione fallita."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 0, "last_activity_date": 1490216110, "creation_date": 1490216110, "answer_id": 42962490, "question_id": 42962066, "link": "https://stackoverflow.com/questions/42962066/synchronization-with-semaphores/42962490#42962490", "title": "Synchronization with semaphores", "body": "<pre><code>    for(int i=0; i&lt;n; i++){\n        pthread_create(&amp;t1[i], NULL, TFa, NULL);\n    for(int i=0; i&lt;n; i++){\n        pthread_create(&amp;t2[i], NULL, TFb, NULL);\n</code></pre>\n\n<p>These <code>{</code>'s don't have matching <code>}</code>s.</p>\n\n<pre><code>    phtread_mutex_unlock(&amp;c-&gt;mutex);\n</code></pre>\n\n<p>You wrote p<strong>ht</strong>read instead of <code>pthread</code>.</p>\n\n<p>With those two fixes and the missing <code>#include</code>'s, it compiles.</p>\n"}], "owner": {"reputation": 3, "user_id": 7753420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53abd582391551ffc4e059b2f33a0129?s=128&d=identicon&r=PG&f=1", "display_name": "Amidaraxar", "link": "https://stackoverflow.com/users/7753420/amidaraxar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1490264868, "accepted_answer_id": 42962490, "answer_count": 1, "score": -2, "last_activity_date": 1490216141, "creation_date": 1490214670, "last_edit_date": 1490216141, "question_id": 42962066, "link": "https://stackoverflow.com/questions/42962066/synchronization-with-semaphores", "closed_reason": "Not suitable for this site", "title": "Synchronization with semaphores", "body": "<pre><code>typedef struct \n  {\n  int count;\n  pthread_mutex_t mutex;\n  } Counter;\n\ntypedef struct \n{\n  int countA;\n  int countB;\n  pthread_mutex_t mutex;\n} Counter2;\n\nvoid* TFa();\nvoid* TFb();\n\nCounter *cA;\nCounter *cB;\nCounter2 *c;\n\nsem_t *S1, *S2;\n\n\nint main(int argc, char **argv)\n{\n\n    S1 = (sem_t *) malloc(sizeof(sem_t));\n    S2 = (sem_t *) malloc(sizeof(sem_t));\n    sem_init(S1,0,1);\n    sem_init(S2,0,1);\n    int n = atoi(argv[1]);\n    pthread_t *t1;\n    pthread_t *t2;\n    cA= (Counter *) malloc (sizeof(Counter));\n    cB= (Counter *) malloc (sizeof(Counter));\n    c= (Counter2 *) malloc (sizeof(Counter2));\n    cA-&gt;count =0;\n    cB-&gt;count =0;\n    c-&gt; countA =0;\n    c-&gt; countB =0;\n    pthread_mutex_init(&amp;cA-&gt;mutex, NULL);\n    pthread_mutex_init(&amp;cB-&gt;mutex, NULL);\n    pthread_mutex_init(&amp;c-&gt;mutex, NULL);\n    t1 = malloc(sizeof(pthread_t)*n);\n    t2 = malloc((sizeof(pthread_t)*2*n));\n\n    for(int i=0; i&lt;n; i++){\n        pthread_create(&amp;t1[i], NULL, TFa, NULL);\n    for(int i=0; i&lt;n; i++){\n        pthread_create(&amp;t2[i], NULL, TFb, NULL);\n\n    pthread_exit(NULL);\n    return 0;\n}\n\nvoid* TFa()\n{\n\n    pthread_mutex_lock(&amp;cA -&gt;mutex);\n    int num = cA-&gt;count;\n    cA-&gt;count++;\n    pthread_mutex_unlock(&amp;cA-&gt;mutex);\n    pthread_mutex_lock (&amp;c-&gt;mutex);\n    if(c-&gt;countA ==0 &amp;&amp; c-&gt;countB ==2 )\n    {\n        printf(\"A%d 1n\", num);\n        c-&gt;countA =0;\n        c-&gt;countB=0;\n        sem_post(S1);\n        pthread_mutex_unlock(&amp;c-&gt;mutex);\n\n\n    }\n    else if(c-&gt;countA ==0 &amp;&amp; c-&gt;countB &lt;2)\n    {   \n        printf(\"A%d \\n\",num);\n        c-&gt;countA ++;\n        pthread_mutex_unlock(&amp;c-&gt;mutex);\n    }\n    else\n    {\n        pthread_mutex_unlock(&amp;c-&gt;mutex);\n        sem_wait(S1);\n        pthread_mutex_lock(&amp;c-&gt;mutex);\n        printf(\"A%d \\n\", num);\n        c-&gt;countA++;\n        pthread_mutex_unlock(&amp;c-&gt;mutex);\n\n    }\n    pthread_exit(NULL);\n\n}\n\nvoid* TFb()\n{\n    pthread_mutex_lock(&amp;cB-&gt;mutex);\n    int num = cB-&gt;count;\n    cB-&gt;count++;\n    pthread_mutex_unlock(&amp;cB-&gt;mutex);\n    pthread_mutex_lock(&amp;c-&gt;mutex);\n    if(c-&gt;countA ==1 &amp;&amp; c-&gt;countB ==1)\n    {\n        printf(\"B%d \\n\", num);\n        c-&gt;countA =0;\n        c-&gt;countB=0;\n        sem_post(S2);\n        sem_post(S2);\n        pthread_mutex_unlock(&amp;c-&gt;mutex);\n    }\n    else if(c-&gt;countA &lt;2 &amp;&amp; c-&gt;countB ==0)\n    {\n        printf(\"B%d \\n\", num);\n        c-&gt;countB++;\n        pthread_mutex_unlock(&amp;c-&gt;mutex);\n    }\n    else\n    {\n        phtread_mutex_unlock(&amp;c-&gt;mutex);\n        sem_wait(S2);\n        pthread_mutex_lock(&amp;c-&gt;mutex);\n        printf(\"B%d \\n\", num);\n        c-&gt;countB++;\n        pthread_mutex_unlock(&amp;c-&gt;mutex);\n    }\n    pthread_exit(NULL);\n}\n</code></pre>\n\n<p>I've got a problem with this little program:</p>\n\n<blockquote>\n  <p>Implement a concurrent program in C language, using Pthreads, which generates n\n  threads th_A executing code A, and 2*n threads th_B executing code B.\n  The main thread takes argument n from the command line, and terminates without\n  waiting the termination of the threads it has created.\n  Both threads simply print their corresponding character, followed by their order of\n  creation number (from 0 to n-1 for th_A, from 0 to 2*n-1 for th_B).\n  After two Bs and an A characters have been printed, in whichever order, the last\n  printing thread must print the \u2019\\n\u2019 character.</p>\n</blockquote>\n\n<p>But it does not compile and I'm not understanding way. Do you have some tips?</p>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1490214400, "post_id": 42961866, "comment_id": 73018086, "body": "Code is having I/O troubles yet the 5 I/O related functions do not have their return values checked.  Suggest re-write code to check the return values."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490214434, "post_id": 42961866, "comment_id": 73018105, "body": "You do not test the return values of your <code>fread()</code> and especially your <code>fseek()</code>, so it is unsafe to assume that they were successful."}, {"owner": {"reputation": 83, "user_id": 4999059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cb277361a9b9d766f5f7679ce1afbf?s=128&d=identicon&r=PG&f=1", "display_name": "nmr", "link": "https://stackoverflow.com/users/4999059/nmr"}, "edited": false, "score": 0, "creation_date": 1490216300, "post_id": 42961866, "comment_id": 73019176, "body": "I did check fseek() return values and it&#39;s successful. Additionally, I looked at the file pointer location using ftell() and I know where it is. fread() also return successful. For some reason it keeps staring from the 512 byte sector."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490265935, "post_id": 42961866, "comment_id": 73039662, "body": "you say the disk is not formatted.  the fread(), fseek(), etc only work with a formatted disk as they depend (inside the OS) on the formatting.  If you expect that there are actually files on the hard disk (I.E. the harddisk has corrupted the information that indicates the drive was previously formatted)  then look at the partition table and the boot sector of the main partition as one or both is corrupted.  You might want to read: &lt;<a href=\"http://html5.litten.com/updated-how-to-fix-external-disk-drive-suddenly-became-raw/\" rel=\"nofollow noreferrer\">html5.litten.com/&hellip;</a>&gt;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490266548, "post_id": 42961866, "comment_id": 73040110, "body": "for viable options for accessing the data on a disk that was formatted but now reads as a raw disk, use google to find LOTS of articles on the subject."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1490372313, "post_id": 42974063, "comment_id": 73098160, "body": "I edited my answer to remove the &#39;linux&#39; references."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1490372261, "last_edit_date": 1490372261, "creation_date": 1490266685, "answer_id": 42974063, "question_id": 42961866, "link": "https://stackoverflow.com/questions/42961866/on-unformatted-hard-drive-after-fseek-fread-reads-from-start-of-512-byte-sector/42974063#42974063", "title": "On unformatted hard drive after fseek, fread reads from start of 512 byte sector, not seek location", "body": "<p>EDITED my answer:</p>\n\n<p>you can simply open the block device.</p>\n\n<p>The basic premise of open the whole block device will allow accessing the disk. with ability to fseek() </p>\n\n<p>It is best to I/O a complete disk sector on each I/O operation at sector boundaries </p>\n"}], "owner": {"reputation": 83, "user_id": 4999059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cb277361a9b9d766f5f7679ce1afbf?s=128&d=identicon&r=PG&f=1", "display_name": "nmr", "link": "https://stackoverflow.com/users/4999059/nmr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490372261, "creation_date": 1490213977, "last_edit_date": 1490266794, "question_id": 42961866, "link": "https://stackoverflow.com/questions/42961866/on-unformatted-hard-drive-after-fseek-fread-reads-from-start-of-512-byte-sector", "title": "On unformatted hard drive after fseek, fread reads from start of 512 byte sector, not seek location", "body": "<p>I have a program that opens an unformatted hard drive (in the admin mode) and copy a large amount of data. Since the hard drive is extremely large I have to use fseek() to go through the hard drive fast. </p>\n\n<p>First I iterate using the following function.</p>\n\n<pre><code>//pseudo code\nint fd;\nFILE* f;\nHANDLE hDisk;\nwchar_t dsk[512] = L\"\";\n\nhDisk = CreateFile(dsk, GENERIC_READ, FILE_SHARE_READ, NULL,OPEN_EXISTING, NULL, NULL);\n\nfd = _open_osfhandle((intptr_t)hDisk, _O_RDONLY);  //file descriptor\n\nf= _fdopen(fd, \"rb\"); // converts file descriptor to a file pointer\n\n\n//then I use,\n\nFILE * pFile_A = f;\nchar test_seek_array[779];\n\nfseek(pFile_A, 973, SEEK_CUR); \nfread(test_seek_array, 1, 779, pFile_A);\n\n//end of pseudo code\n</code></pre>\n\n<p>The issue is that fseek() doesn't work properly (may be it's the fread()). when you do a fread() after fseek() it starts reading from the start of the 512 byte sector instead of the the current location of the file pointer (inside the 512 byte sector).</p>\n\n<p>So instead of fread starting from the file pointer's current position, it seems it reads at the start of 512 byte sector. </p>\n\n<p>why is this happening? the other interesting point is that fseek() with negative offsets seems to work fine.</p>\n\n<p>Is my conversion correct? going from a HANDLE to a file pointer? It seems the OS wants to read in 512 byte chunks. could that be the issue? I did do the error checking after every fseek() and fread(). They all seem to be successful.</p>\n\n<p>Any explanation is much appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 4, "creation_date": 1490213870, "post_id": 42961826, "comment_id": 73017808, "body": "use <code>long long</code> as a type. That should work."}, {"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 1, "creation_date": 1490214049, "post_id": 42961826, "comment_id": 73017893, "body": "As Jean-Francois Fabre said you can use long long as a little add on the max value of a long long in C is at least <code>9223372036854775807</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490214105, "post_id": 42961826, "comment_id": 73017919, "body": "Is necessary with most numbers of more than <b>9</b> digits."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490214174, "post_id": 42961898, "comment_id": 73017956, "body": "All 9 digit numbers will work in 32 bit, but only some 10 digits."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490216472, "post_id": 42961898, "comment_id": 73019279, "body": "When is a <code>long long</code> (which is a minimum of 64-bits long) not big enough to hold a value with 15 decimal digits (indeed, 18 digits; all  but about 8% of 19-digit numbers)."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490216601, "post_id": 42961898, "comment_id": 73019347, "body": "@JonathanLeffler Actually you&#39;re right.  The standard say it must be able to hold a value of at least 9223372036854775807.  Updated to reflect."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1490216541, "last_edit_date": 1490216541, "creation_date": 1490214090, "answer_id": 42961898, "question_id": 42961826, "link": "https://stackoverflow.com/questions/42961826/c-programming-how-to-input-and-output-integers-with-more-than-10-digits/42961898#42961898", "title": "C programming: how to input and output integers with more than 10 digits?", "body": "<p>On most platforms, an <code>int</code> is at most 32 bit, which will get you 9 digits and some 10 digit numbers.  For larger numbers you need something that is at least 64 bit.  A <code>long long</code> is large enough for this, as <code>LLONG_MAX</code> must be at least +9223372036854775807.</p>\n\n<p>You can read and write one as follows:</p>\n\n<pre><code>long long num;\nscanf(\"%lld\", &amp;num);\nprintf(\"num=%lld\\n\", num);\n</code></pre>\n\n<p>Or, if you want to explicitly use a 64 bit integer:</p>\n\n<pre><code>int64_t num;\nscanf(\"%\" SCNd64, &amp;num);\nprintf(\"num=%\" PRId64 \"\\n\", num);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "is_accepted": false, "score": 0, "last_activity_date": 1490215653, "creation_date": 1490215653, "answer_id": 42962373, "question_id": 42961826, "link": "https://stackoverflow.com/questions/42961826/c-programming-how-to-input-and-output-integers-with-more-than-10-digits/42962373#42962373", "title": "C programming: how to input and output integers with more than 10 digits?", "body": "<p>On <code>C</code>, you can the <code>double</code> to help with this. It can store about 15-17 digits. That should help with your program. <code>Double</code> is like a <code>float</code> , except it holds more digits. </p>\n"}], "owner": {"reputation": 29, "user_id": 7731974, "user_type": "registered", "profile_image": "https://graph.facebook.com/1867586740147283/picture?type=large", "display_name": "Asif Mohammad", "link": "https://stackoverflow.com/users/7731974/asif-mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2887, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1490216541, "creation_date": 1490213838, "last_edit_date": 1490216290, "question_id": 42961826, "link": "https://stackoverflow.com/questions/42961826/c-programming-how-to-input-and-output-integers-with-more-than-10-digits", "title": "C programming: how to input and output integers with more than 10 digits?", "body": "<p>I want to take a 15 digit integer as input and show that integer as output in C language. Can anyone help me with the code?</p>\n"}, {"tags": ["c", "casting", "char", "type-conversion", "uint8t"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490212599, "post_id": 42961443, "comment_id": 73017163, "body": "C does not support <i>methods</i>. Sure you don&#39;t use C++? And why do you want to convert a pointer?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1490212600, "post_id": 42961443, "comment_id": 73017165, "body": "Converting between types is what casting is for."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490212741, "post_id": 42961443, "comment_id": 73017241, "body": "Perhaps you need to convert those signed and unsigned <code>char</code> types to <code>int</code> to get the full range."}, {"owner": {"reputation": 3054, "user_id": 193848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HWieK.jpg?s=128&g=1", "display_name": "Andrew Cottrell", "link": "https://stackoverflow.com/users/193848/andrew-cottrell"}, "edited": false, "score": 0, "creation_date": 1490213619, "post_id": 42961443, "comment_id": 73017705, "body": "What is in your buffer?  ASCII-characters?  If so, eliminate the uint8_t pointer and just use a char pointer for stackHolder."}, {"owner": {"reputation": 499, "user_id": 6106289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/cb582b3f9d3d0e938ee41600b2cc6088?s=128&d=identicon&r=PG&f=1", "display_name": "skyleguy", "link": "https://stackoverflow.com/users/6106289/skyleguy"}, "edited": false, "score": 0, "creation_date": 1490213895, "post_id": 42961443, "comment_id": 73017820, "body": "to clarify, I am tasked with writing a program that moves the location of the stack Pointer (for context switches I believe). the stack pointer in my microcontroller consists of 2 uint8_t registers. I am simply trying to: a: get the address it is pointing to and printing it, and b: printing what is actually stored at that address. Whenever I cast it does not print anything so I assumed that that was not working correctly. I assume that my buffer is filled with 0&#39;s because I think that is how C initializes them if you dont give a value"}], "answers": [{"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 15, "last_activity_date": 1508241114, "last_edit_date": 1508241114, "creation_date": 1490212702, "answer_id": 42961505, "question_id": 42961443, "link": "https://stackoverflow.com/questions/42961443/convert-from-uint8-t-to-char-in-c/42961505#42961505", "title": "Convert from uint8_t * to char * in C", "body": "<blockquote>\n  <p>How can I convert the <code>uint8_t * stackHolder</code> into a <code>char *</code>?</p>\n</blockquote>\n\n<p>By <a href=\"http://en.cppreference.com/w/c/language/cast\" rel=\"noreferrer\">casting</a>:</p>\n\n<pre><code>print((char*) stackHolder);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1490214001, "creation_date": 1490214001, "answer_id": 42961877, "question_id": 42961443, "link": "https://stackoverflow.com/questions/42961443/convert-from-uint8-t-to-char-in-c/42961877#42961877", "title": "Convert from uint8_t * to char * in C", "body": "<blockquote>\n  <p>I have a method that takes a char *</p>\n</blockquote>\n\n<p>Suggest minimizing casts to one location to accomplish the goal and retain function signature type checking.  Create a wrapper function with a cast.</p>\n\n<pre><code>// OP's original function\nextern void skyleguy_Print(char *);\n\nvoid skyleguy_Print_u8(uint8_t *s) {\n  skyleguy_Print((char *) s);\n}\n</code></pre>\n"}], "owner": {"reputation": 499, "user_id": 6106289, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/cb582b3f9d3d0e938ee41600b2cc6088?s=128&d=identicon&r=PG&f=1", "display_name": "skyleguy", "link": "https://stackoverflow.com/users/6106289/skyleguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41472, "favorite_count": 1, "accepted_answer_id": 42961505, "answer_count": 2, "score": 7, "last_activity_date": 1508241114, "creation_date": 1490212481, "last_edit_date": 1508241040, "question_id": 42961443, "link": "https://stackoverflow.com/questions/42961443/convert-from-uint8-t-to-char-in-c", "title": "Convert from uint8_t * to char * in C", "body": "<p>I am programming in C using Atmel Studio (for those unfamiliar with this it is used to program to micro controllers such as arduino. You can not simply print, you have to send the data Serially to an application such as Terminal.)</p>\n\n<p>I have so far:</p>\n\n<pre><code>uint8_t * stackHolder;\nchar buffer[128];\nstackHolder = &amp;buffer[127];\n</code></pre>\n\n<p>Lets say that the address of <code>buffer[127]</code> happens to be <code>0x207</code>. I can see that the value of <code>stackHolder</code> is <code>0x207</code> using the debugger. I have a function that takes a <code>char *</code> and prints that. So my question is how can I convert the <code>uint8_t * stackHolder</code> into a <code>char *</code> so I can pass it to my print function?</p>\n"}, {"tags": ["c", "control-flow"], "answers": [{"comments": [{"owner": {"reputation": 30, "user_id": 7360321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XMJWs.jpg?s=128&g=1", "display_name": "Togeri", "link": "https://stackoverflow.com/users/7360321/togeri"}, "edited": false, "score": 0, "creation_date": 1490211401, "post_id": 42961053, "comment_id": 73016455, "body": "Oh, I see! So basically that&#39;s the difference between an <code>else if</code> and an <code>if</code> when it comes to control-flow, right?   Thank you very much @lordingtar ! I can see it perfectly right now!   Marking this answer and correct and problem solved."}], "tags": [], "owner": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "is_accepted": true, "score": 1, "last_activity_date": 1490211185, "creation_date": 1490211185, "answer_id": 42961053, "question_id": 42960971, "link": "https://stackoverflow.com/questions/42960971/control-flow-understanding/42961053#42961053", "title": "Control flow understanding", "body": "<p>As soon as something is executed in the <code>if...else</code> block, it moves out of the block. So if it satisfies the first <code>if</code> condition, the <code>else if</code> condition is not even checked. So if index > 0 AND c=\\ or c is an alphabet, it runs the if statement, and if even one of these conditions does not hold true, it will move to the else if portions of the block.</p>\n"}, {"comments": [{"owner": {"reputation": 30, "user_id": 7360321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XMJWs.jpg?s=128&g=1", "display_name": "Togeri", "link": "https://stackoverflow.com/users/7360321/togeri"}, "edited": false, "score": 0, "creation_date": 1490211997, "post_id": 42961144, "comment_id": 73016793, "body": "I see now! Thank you very much @Mike Nakis for your answer!"}], "tags": [], "owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1490211466, "creation_date": 1490211466, "answer_id": 42961144, "question_id": 42960971, "link": "https://stackoverflow.com/questions/42960971/control-flow-understanding/42961144#42961144", "title": "Control flow understanding", "body": "<p>Note the <code>else</code> in the beginning of the <code>else if (index &gt; 0)</code> condition. </p>\n\n<p>This means that it will only execute if none of the previous <code>if()</code> and <code>else if()</code> executed.</p>\n\n<p>The previous <code>if()</code> and <code>else if()</code> statements do keep executing if the character is alphanumeric, or a non-leading slash, so the last <code>else if()</code> only executes once a non-alphanumeric, or leading slash is encountered.</p>\n"}], "owner": {"reputation": 30, "user_id": 7360321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XMJWs.jpg?s=128&g=1", "display_name": "Togeri", "link": "https://stackoverflow.com/users/7360321/togeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 42961053, "answer_count": 2, "score": 0, "last_activity_date": 1490211466, "creation_date": 1490210924, "last_edit_date": 1490211287, "question_id": 42960971, "link": "https://stackoverflow.com/questions/42960971/control-flow-understanding", "title": "Control flow understanding", "body": "<p>I'm having a lot of trouble understanding the following program flow: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main ()\n{\n FILE *fp;\n int index = 0;\n char word[45];\n int words = 0;\n\n fp = fopen(\"names.txt\",\"r\");\n if(fp == NULL) \n {\n   perror(\"Error in opening file\");\n   return(-1);\n }\n\n\n for (int c = fgetc(fp); c != EOF; c = fgetc(fp))\n {\n     // allow only alphabetical characters and apostrophes\n     if (isalpha(c) || (c == '\\'' &amp;&amp; index &gt; 0))\n     {\n         // append character to word\n         word[index] = c;\n         index++;\n\n         // ignore alphabetical strings too long to be words\n         if (index &gt; 45)\n         {\n             // consume remainder of alphabetical string\n             while ((c = fgetc(fp)) != EOF &amp;&amp; isalpha(c));\n\n             // prepare for new word\n             index = 0;\n         }\n     }\n\n     // ignore words with numbers (like MS Word can)\n     else if (isdigit(c))\n     {\n         // consume remainder of alphanumeric string\n         while ((c = fgetc(fp)) != EOF &amp;&amp; isalnum(c));\n\n         // prepare for new word\n         index = 0;\n     }\n\n     // we must have found a whole word\n      else if (index &gt; 0)\n     {\n         // terminate current word\n         word[index] = '\\0';\n\n         // update counter\n         words++;\n\n         //prepare for next word\n         printf(\"%s\\n\", word);\n         index = 0;\n     }\n     //printf(\"%s\\n\", word);\n }\n\n printf(\"%s\\n\", word);\n\n fclose(fp);\n return(0);\n} \n</code></pre>\n\n<p>As you can see, it's just a plain program that stores characters from words into an array, back-to-back, from a file called 'names.txt'.</p>\n\n<p>My problem resides in the <code>else if(index &gt; 0)</code> condition.\nI've run a debugger and, obviously, the program works correctly. </p>\n\n<p>Here's my question: </p>\n\n<p>On the first for-loop iteration, <code>index</code> becomes 1. Otherwise, we wouldn't be able to store a whole word in an array. </p>\n\n<p>If so, how is it possible that, when the program flow reaches the <code>else if (index &gt; 0)</code> condition, it doesn't set <code>word[1]</code> to 0? (Or the subsequent values of <code>index</code>).</p>\n\n<p>It just finishes the whole word and, once it has reached the end of the word, then it proceeds to give <code>word[index]</code> the value of 0 and proceed to the next word. </p>\n\n<p>I've tried reading the documentation, running half of the program and asking with echo, and running a debugger. As it should be, everything runs perfectly, there's no problem with the code (as far as I know).  I'm the problem. I just can't get how it works. </p>\n\n<p>PS: sorry if this might be so trivial for some of you, I'm really starting to learn programming and I find sometimes really hard to understand apparently so simple concepts. </p>\n\n<p>Thank you very much for you time guys. </p>\n"}, {"tags": ["c", "arrays", "pointers", "struct", "segmentation-fault"], "comments": [{"owner": {"reputation": 438, "user_id": 5500955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPhR9.jpg?s=128&g=1", "display_name": "Code4aliving", "link": "https://stackoverflow.com/users/5500955/code4aliving"}, "edited": false, "score": 0, "creation_date": 1490209879, "post_id": 42960600, "comment_id": 73015593, "body": "You&#39;ll have to show how you&#39;re allocating memory to be able to determine what&#39;s going on."}, {"owner": {"reputation": 8196, "user_id": 395851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f7417d04460fbc27bc0ac99204cfce9c?s=128&d=identicon&r=PG", "display_name": "dbrank0", "link": "https://stackoverflow.com/users/395851/dbrank0"}, "edited": false, "score": 1, "creation_date": 1490209939, "post_id": 42960600, "comment_id": 73015635, "body": "You probably don&#39;t have p_spaces array member allocated. Ah, forget this. Need coffee."}, {"owner": {"reputation": 243, "user_id": 7252948, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bcg6i.jpg?s=128&g=1", "display_name": "errfrom", "link": "https://stackoverflow.com/users/7252948/errfrom"}, "reply_to_user": {"reputation": 438, "user_id": 5500955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPhR9.jpg?s=128&g=1", "display_name": "Code4aliving", "link": "https://stackoverflow.com/users/5500955/code4aliving"}, "edited": false, "score": 0, "creation_date": 1490210028, "post_id": 42960600, "comment_id": 73015674, "body": "@BradBales can i do this in gdb? What way?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1490210560, "post_id": 42960600, "comment_id": 73015965, "body": "<code>G_manager</code>, a pointer,  is <code>NULL</code>.  Why expect <code>(*G_manager)</code> to work?"}, {"owner": {"reputation": 438, "user_id": 5500955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lPhR9.jpg?s=128&g=1", "display_name": "Code4aliving", "link": "https://stackoverflow.com/users/5500955/code4aliving"}, "edited": false, "score": 1, "creation_date": 1490210602, "post_id": 42960600, "comment_id": 73015985, "body": "In other words, could you show us the rest of your code?  Specifically, your code where you malloc() or calloc() the memory for everything?"}, {"owner": {"reputation": 243, "user_id": 7252948, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bcg6i.jpg?s=128&g=1", "display_name": "errfrom", "link": "https://stackoverflow.com/users/7252948/errfrom"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490210686, "post_id": 42960600, "comment_id": 73016026, "body": "@chux I am new in c. So I have some not obvious for me problems)"}], "answers": [{"tags": [], "owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "is_accepted": true, "score": 2, "last_activity_date": 1490209993, "creation_date": 1490209993, "answer_id": 42960706, "question_id": 42960600, "link": "https://stackoverflow.com/questions/42960600/array-of-struct-pointers-get-segfault-in-c/42960706#42960706", "title": "Array of Struct pointers, get segfault in c", "body": "<p>At least in the code you're showing, you haven't actually allocated the memory for the structure containing the arrays; you've only created a pointer.  So when you dereference that pointer meaning to write into an instance of the structure, you hit a random memory address and got the relatively tame result of your program crashing.</p>\n\n<p>You could change <code>G_manager</code> from a pointer-to-struct to an instance of the struct itself; or you can malloc a buffer big enough for the structure and assign that buffer to <code>G_manager</code></p>\n"}], "owner": {"reputation": 243, "user_id": 7252948, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bcg6i.jpg?s=128&g=1", "display_name": "errfrom", "link": "https://stackoverflow.com/users/7252948/errfrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "closed_date": 1490258995, "accepted_answer_id": 42960706, "answer_count": 1, "score": 1, "last_activity_date": 1490209993, "creation_date": 1490209612, "question_id": 42960600, "link": "https://stackoverflow.com/questions/42960600/array-of-struct-pointers-get-segfault-in-c", "closed_reason": "Not suitable for this site", "title": "Array of Struct pointers, get segfault in c", "body": "<pre><code>#define MAX_SPACES 10\n#define MAX_SIMPLE_EVENTS 5000\n#define MAX_USER_EVENTS 1000\n\nstruct {\n  EventSpace* p_spaces[MAX_SPACES];\n  SimpleEvent* p_simple_events[MAX_SIMPLE_EVENTS];\n  UserEvent* p_user_events[MAX_USER_EVENTS];\n}* G_manager;\n\nstatic void add_space(EventSpace* space){\n  static uint16_t index = 0;\n  (*G_manager).p_spaces[index] = space;\n}\n</code></pre>\n\n<p>After running in gdb got:\nProgram received signal SIGSEGV, Segmentation fault.\n0x0000000000400559 in add_space (space=0x7fffffffdf30)</p>\n\n<p>How to impove it? </p>\n"}, {"tags": ["mysql", "c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1490209225, "post_id": 42960452, "comment_id": 73015227, "body": "Are you sure that there is a <code>&#47;usr&#47;include&#47;mysql&#47;mysql.h</code>? What does <code>stat &#47;usr&#47;include&#47;mysql&#47;mysql.h</code>."}, {"owner": {"reputation": 45, "user_id": 4774678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50c70207fe68717389af8ab9d6b91e45?s=128&d=identicon&r=PG&f=1", "display_name": "rezon", "link": "https://stackoverflow.com/users/4774678/rezon"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1490209905, "post_id": 42960452, "comment_id": 73015611, "body": "@IharobAlAsimi Yeah, it doesn&#39;t exist. Any idea where homebrew installs libraries? Found it, its in /usr/local/include/mysql/ for me however gcc -I/usr/local/include/mysql/ mydb.c still gives the same error"}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1490215736, "post_id": 42960452, "comment_id": 73018855, "body": "You might check out the documentation for suggestions:  <a href=\"https://dev.mysql.com/doc/refman/5.7/en/c-api-building-clients.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.7/en/c-api-building-clients.html</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1490219490, "post_id": 42960452, "comment_id": 73020713, "body": "You can build <i>mysql</i> yourself, you just need cmake and all the dependencies, which have to be installed anyway if you will develop anything with <i>libmysqlclient</i>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490267449, "post_id": 42960452, "comment_id": 73040778, "body": "are you sure the install of mysql was successful?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490268192, "post_id": 42960452, "comment_id": 73041271, "body": "I suspect what you installed in the mysql server.  What you actually need is the development package. <i>libmysqlclient</i> with the associated header files.     On linux the appropriate command would be: <code>sudo apt-get install libmysqlclient-dev</code>   I would expect something similar on the max os x system"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7967273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xPFvf.png?s=128&g=1", "display_name": "hanxinle", "link": "https://stackoverflow.com/users/7967273/hanxinle"}, "is_accepted": false, "score": 1, "last_activity_date": 1505989195, "creation_date": 1505989195, "answer_id": 46341369, "question_id": 42960452, "link": "https://stackoverflow.com/questions/42960452/fatal-error-mysql-mysql-h-file-not-found/46341369#46341369", "title": "fatal error: &#39;mysql/mysql.h&#39; file not found", "body": "<p>On ubuntu16.04,mysql.h locates in /usr/include/mysql.\nYou can find it after install libmysqlclient20 or libmysqlclient-dev.</p>\n"}, {"tags": [], "owner": {"reputation": 599, "user_id": 3712534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b3zkR.jpg?s=128&g=1", "display_name": "Santos L. Victor", "link": "https://stackoverflow.com/users/3712534/santos-l-victor"}, "is_accepted": false, "score": 0, "last_activity_date": 1506430215, "creation_date": 1506430215, "answer_id": 46427078, "question_id": 42960452, "link": "https://stackoverflow.com/questions/42960452/fatal-error-mysql-mysql-h-file-not-found/46427078#46427078", "title": "fatal error: &#39;mysql/mysql.h&#39; file not found", "body": "<p>Verify at where are install  mysql, for this, using the command for see the file list of directory</p>\n\n<pre><code>ls\n</code></pre>\n\n<p>and using</p>\n\n<pre><code>cd\n</code></pre>\n\n<p>The installation, in my example, are is in directory:</p>\n\n<pre><code>/usr/local/mysql-&lt;version_my_mysql&gt;/include/\n</code></pre>\n\n<p>second step is indicate the directory everytime compiller:</p>\n\n<pre><code>gcc my_program_code_file.c -I /usr/local/mysql-5.7.9-osx10.9-x86_64/include/ -o my_program_executable\n</code></pre>\n\n<p>the includers in code are:</p>\n\n<pre><code>#include &lt;mysql.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4774678, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50c70207fe68717389af8ab9d6b91e45?s=128&d=identicon&r=PG&f=1", "display_name": "rezon", "link": "https://stackoverflow.com/users/4774678/rezon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2590, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1506430215, "creation_date": 1490209106, "last_edit_date": 1490210178, "question_id": 42960452, "link": "https://stackoverflow.com/questions/42960452/fatal-error-mysql-mysql-h-file-not-found", "title": "fatal error: &#39;mysql/mysql.h&#39; file not found", "body": "<p>I have installed mysql using</p>\n\n<pre><code>brew install mysql\n</code></pre>\n\n<p>Then compiled using </p>\n\n<pre><code>gcc -I/usr/include mydb.c\n</code></pre>\n\n<p>However it gives me the error: </p>\n\n<pre><code>fatal error: 'mysql/mysql.h' file not found\n</code></pre>\n\n<p>What am I doing wrong here? Am on macosx 10.12</p>\n\n<p>edit: tried gcc -I/usr/local/include/mysql/ mydb.c still broken</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 3, "creation_date": 1490209098, "post_id": 42960353, "comment_id": 73015141, "body": "Undefined Behavior."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 2, "creation_date": 1490209103, "post_id": 42960353, "comment_id": 73015146, "body": "Because the array contains the first 7 <code>char</code>s, which are &#39;N&#39;, &#39;e&#39;, &#39;t&#39;, &#39;w&#39;, &#39;o&#39;, &#39;r&#39;, &#39;k&#39;.  What&#39;s missing is the terminating null... so printing it like that is actually undefined behaviour and could have crashed or who knows what... but you probably lucked out and had a null byte following the array (by chance).  (It&#39;s only undefined behaviour because <code>printf()</code> will access past the end of the array... if you printed differently and avoided that problem, it&#39;d be fine)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1490209192, "post_id": 42960353, "comment_id": 73015212, "body": "To print only up to 7 characters from a <i>string</i> use <code>printf(&quot;%.7s\\n&quot;, arr);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 7753137, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/357532dc4822398d6ce77fb382f8ef0a?s=128&d=identicon&r=PG&f=1", "display_name": "acidlategamer", "link": "https://stackoverflow.com/users/7753137/acidlategamer"}, "edited": false, "score": 0, "creation_date": 1490209471, "post_id": 42960502, "comment_id": 73015346, "body": "but i have never saw undefined behaviour. I can always print &#39;Network&#39;."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1490209531, "post_id": 42960502, "comment_id": 73015385, "body": "Yes, you did see undefined behavior. One aspect of undefined behavior is that you might accidentally get what you expected to get."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 143, "user_id": 7753137, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/357532dc4822398d6ce77fb382f8ef0a?s=128&d=identicon&r=PG&f=1", "display_name": "acidlategamer", "link": "https://stackoverflow.com/users/7753137/acidlategamer"}, "edited": false, "score": 0, "creation_date": 1490209644, "post_id": 42960502, "comment_id": 73015446, "body": "@acidlategamer Also note that the second snippet is not correct C. GCC rejects it when <code>-pedantic-errors</code> is used."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490209716, "post_id": 42960502, "comment_id": 73015493, "body": "The line you cite does not invoke undefined behaviour. It is well defined."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490209757, "post_id": 42960502, "comment_id": 73015521, "body": "And there is no <code>NULL</code> terminator. <code>NULL</code> is a macro with a <i>null pointer constant</i>, something completely unrelated."}, {"owner": {"reputation": 143, "user_id": 7753137, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/357532dc4822398d6ce77fb382f8ef0a?s=128&d=identicon&r=PG&f=1", "display_name": "acidlategamer", "link": "https://stackoverflow.com/users/7753137/acidlategamer"}, "edited": false, "score": 0, "creation_date": 1490209965, "post_id": 42960502, "comment_id": 73015645, "body": "-pedantic-errors I read about it. It says to use when there are undefined behaviour. In first case there is no error even if I use it. Second case itself gives warnings that may be converted into errors if I want, so -pedantic-errors is of no use in undefined behaviour here in first case."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1490210088, "post_id": 42960502, "comment_id": 73015711, "body": "The declaration <code>char arr[7] = &quot;Network&quot;;</code> is well defined, Treating the contents of <code>arr</code> as a string is not."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490210108, "post_id": 42960502, "comment_id": 73015727, "body": "@ryyker: Please read the standard. You concentrate on the wrong part of the code. The initialiser is completely legal. (whether it <b>should be</b> is disputable, it is a legacy which should have been cut out at least with C11)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490212088, "post_id": 42960502, "comment_id": 73016845, "body": "1) There is no 8th <code>char</code>, neither owned by <code>arr</code> or otherwise (actually there are no objects beyond those defined or dynamically allocated). 2) &quot;In C, freedom to write outside ...&quot; - The code does not write anywhere. 3) &quot;... the specification&quot; - which specification? 4) There still is no <code>NULL</code> terminator."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490220648, "post_id": 42960502, "comment_id": 73021202, "body": "@Olaf -  I appreciate your perspectives.  Although they are mostly very precise, they are not always very accurate.  I think you are missing my intended message by focusing on the imprecision of my word choices.  The message is simply that treating <code>arr</code> as a string, (eg. by using it with any of the string functions, or with <code>printf</code> can lead to undefined behavior."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490224567, "post_id": 42960502, "comment_id": 73022891, "body": "I indeed criticise your choise of words. Not only because they are imprecise, but in fact missleading. While for experts it is clear, such quetstions are asked by beginners. The language should be clear and stick as much to common nomenclature as possible (and reasonable for a beginner). Please remember other beginners will read this, too. They will missintepret this text."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490224651, "post_id": 42960502, "comment_id": 73022917, "body": "Replacing write by assign is still wrong. There is no assignment either, and the initialiser is correct as we figured out by now. The UB stems from <b>reading</b> <i>here</i>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490277658, "post_id": 42960502, "comment_id": 73048406, "body": "@Olaf - I have re-written my answer to address the issues you have pointed out.  I would appreciate your response.  Thank you."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490286550, "post_id": 42960502, "comment_id": 73055702, "body": "@ryyker: I removed the DV, it is acceptable now for me. Thanks for clarifying. Just one last thing: It would be good to point out why the 8-character literal still gets copied to the array. After all the literal itself will not make it&#39;s way intot the program, it is just used to copy it into the array. The cited section is not relevant here. 6.7.9p14 is the parapgraph you need. Oh, and you should use the final draft (n1570) as reference; it is the same as the standard except for two macros not relevant for discussions."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490300779, "post_id": 42960502, "comment_id": 73064269, "body": "@Olaf -  I will address the additional items you suggest in my post once I have a few minutes to look at the reference.  I will text you when I do.  And thank you for your persistence."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1490374437, "post_id": 42960502, "comment_id": 73099581, "body": "@Olaf - I looked up the paragraph you cited, and yes, it is very relevant here.  I updated answer to include it, with credit to you.  Great help.  Thanks."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1490374574, "last_edit_date": 1490374574, "creation_date": 1490209279, "answer_id": 42960502, "question_id": 42960353, "link": "https://stackoverflow.com/questions/42960353/how-can-this-string-can-print/42960502#42960502", "title": "How can this string can print", "body": "<p>In both of your examples, you are using <em>string literals</em> as initializers for your character arrays.  Although it is implicit, a string literal is always appended with a null character.  </p>\n\n<p>C99, n1570 <em><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">(downloadable here)</a></em> section 6.4.5 String literals, para. 6 says:</p>\n\n<blockquote>\n  <p>In translation phase 7, a byte or code of value zero is appended to\n  each multibyte character sequence that results from a string literal\n  or literals.</p>\n</blockquote>\n\n<p>Furthermore, (credit to @Olaf) in section <em>6.7.9 Initialization, para. 14</em> it says:</p>\n\n<blockquote>\n  <p>An array of character type may be initialized by a character string\n  literal or UTF\u22128 string literal, optionally enclosed in braces.\n  Successive bytes of the string literal (including the terminating null\n  character <strong><em>if there is room</em></strong> or if the array is of unknown size)\n  initialize the elements of the array.  [<strong><em>emphasis</em></strong> mine]</p>\n</blockquote>\n\n<p>The take away is, even though it is not apparent, the string literal initializer <code>\"Network\"</code> contains 8 characters, while the variable <code>arr</code> has only space for 7:</p>\n\n<pre><code>\"Network\"   -&gt;  |N|e|t|w|o|r|k|0|  \nchar arr[7] -&gt;  | | | | | | | |\n</code></pre>\n\n<p>Because your statement:</p>\n\n<pre><code> char arr[7] = \"Network\";\n</code></pre>\n\n<p>does not provide enough space in <code>arr</code>, it creates an array of <code>char</code>, it <em>does not create a string</em>.  Using it as a string will result in <em><a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a></em>.  i.e. anything can happen.</p>\n"}, {"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1490376421, "post_id": 42960863, "comment_id": 73100744, "body": "<i>Is a valid program...</i>    Well, yes it is valid, it will compile, but it does contain potential for undefined behavior. What I said above still applies."}], "tags": [], "owner": {"reputation": 143, "user_id": 7753137, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/357532dc4822398d6ce77fb382f8ef0a?s=128&d=identicon&r=PG&f=1", "display_name": "acidlategamer", "link": "https://stackoverflow.com/users/7753137/acidlategamer"}, "is_accepted": false, "score": 0, "last_activity_date": 1490210527, "creation_date": 1490210527, "answer_id": 42960863, "question_id": 42960353, "link": "https://stackoverflow.com/questions/42960353/how-can-this-string-can-print/42960863#42960863", "title": "How can this string can print", "body": "<p>based on my learning from this thread</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char arr[7] = \"Network\";\n    //printf(\"%s\\n\", arr);\n    return 0;\n}\n</code></pre>\n\n<p>Is a valid program. Printing with %s is not. It should be seen as a character array.</p>\n\n<pre><code>int main()\n{\n    char arr[7] = \"Its time to work\";\n    printf(\"%s\\n\", arr);\n    return 0;\n}\n</code></pre>\n\n<p>Is a wrong program as its the programmer's responsibility to check the size of array when assigning any value.</p>\n"}], "owner": {"reputation": 143, "user_id": 7753137, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/357532dc4822398d6ce77fb382f8ef0a?s=128&d=identicon&r=PG&f=1", "display_name": "acidlategamer", "link": "https://stackoverflow.com/users/7753137/acidlategamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 42960502, "answer_count": 2, "score": -1, "last_activity_date": 1490374574, "creation_date": 1490208820, "last_edit_date": 1490249682, "question_id": 42960353, "link": "https://stackoverflow.com/questions/42960353/how-can-this-string-can-print", "title": "How can this string can print", "body": "<p>I am a newbie. I was doing some experiments in arrays. I tried this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char arr[7] = \"Network\";\n    printf(\"%s\\n\", arr);\n    return 0;\n}\n</code></pre>\n\n<p><strong>output :</strong> Network</p>\n\n<p>Also I tried this,</p>\n\n<pre><code>int main()\n{\n    char arr[7] = \"Its time to work\";\n    printf(\"%s\\n\", arr);\n    return 0;\n}\n</code></pre>\n\n<p><strong>warning: initializer-string for array of chars is too long [enabled by default]</strong></p>\n\n<p>output :** Its tim</p>\n\n<p>I have this version of gcc -v\n<strong>gcc version 4.8.4 (Ubuntu 4.8.4-2ubuntu1~14.04.3)</strong></p>\n\n<p>Why in the first place there was no warning? Why it gave me output 'Network' in place of garbage or 'Networ', if '%s' appends '\\0' in the end in second case?</p>\n"}, {"tags": ["c", "stdout", "stdin", "ctrl"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490209038, "post_id": 42960298, "comment_id": 73015098, "body": "<code>man siglongjmp</code>"}, {"owner": {"reputation": 3, "user_id": 7004459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eeeb81d992778b9a424f976831a4329?s=128&d=identicon&r=PG&f=1", "display_name": "Victor D", "link": "https://stackoverflow.com/users/7004459/victor-d"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490209377, "post_id": 42960298, "comment_id": 73015307, "body": "thanks for your reply but is a school projet and this function is not allowed."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1490209988, "post_id": 42960298, "comment_id": 73015657, "body": "It is not clear what your problem is since you&#39;ve not shown any code or discussed whether you manipulate signal handling or terminal settings in your shell.  You might find <a href=\"https://stackoverflow.com/questions/358342/\">Canonical vs non-canonical terminal input</a> helpful, or it might be a red-herring.  You should discuss (better, show) how your shell is handling signals.  Control-C should generate a SIGINT; if your shell is ignoring that, or mishandling it, it might account for your trouble."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490209995, "post_id": 42960298, "comment_id": 73015661, "body": "Well, technically it is not a function, though it appears to be."}, {"owner": {"reputation": 3, "user_id": 7004459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eeeb81d992778b9a424f976831a4329?s=128&d=identicon&r=PG&f=1", "display_name": "Victor D", "link": "https://stackoverflow.com/users/7004459/victor-d"}, "edited": false, "score": 0, "creation_date": 1490214191, "post_id": 42960298, "comment_id": 73017966, "body": "I edited my question. (Ctrl + d work well)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490214451, "post_id": 42960298, "comment_id": 73018120, "body": "If Ctrl+D <i>works well</i>, you must be running on DOS/Windows."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490215791, "post_id": 42960298, "comment_id": 73018886, "body": "Note: <code>read(0, buff, 3)</code> can return {-1,0,1,2, or 3} Handle all cases. Also: <code>command[++j] = buff[0];</code> should <i>al least</i> be <code>command[j++] = buff[0];</code> (plus you may want to loop on &#39;j&#39; upto the return value you got from <code>read()</code> )"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7004459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eeeb81d992778b9a424f976831a4329?s=128&d=identicon&r=PG&f=1", "display_name": "Victor D", "link": "https://stackoverflow.com/users/7004459/victor-d"}, "edited": false, "score": 0, "creation_date": 1490220261, "post_id": 42962207, "comment_id": 73021056, "body": "I confused EOF and EOT sorry. Ctrl + d send a EOT which is read by <code>read</code> function. So I was thinking if i can write an EOT, <code>read</code> would read it and i could treat it properly like <code>^C</code>. &quot;to abandon the current input&quot; how ? That my question."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490221080, "post_id": 42962207, "comment_id": 73021378, "body": "<code>Ctrl + d send a EOT which is read by read function</code> Not on UNIX. Normally, ^D is handled by the terminal driver (and translated into an EOF <i>event</i>) , the 0x04 is never seen by the reading program."}], "tags": [], "owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "is_accepted": true, "score": 0, "last_activity_date": 1490275924, "last_edit_date": 1490275924, "creation_date": 1490215056, "answer_id": 42962207, "question_id": 42960298, "link": "https://stackoverflow.com/questions/42960298/exit-read-listening-when-pressing-ctrl-c-in-c/42962207#42962207", "title": "Exit read listening when pressing &quot;Ctrl + c&quot; in C", "body": "<p>Don't think of <code>EOF</code> as a character that you can '<em>print to <code>stdout</code></em>', it is a state that the file handle can be in, and it implies that there is no more data coming. To put your <code>stdout</code> into the <code>EOF</code> state, you would have to call <code>close()</code> - which is most likely not what you want.</p>\n\n<p>Watch out - <code>0x04</code> is actually <code>EOT</code>, End of Transmission.</p>\n\n<p>In any case, why do you want to send <code>EOT</code> to the <code>stdout</code> of your application? If this behaved the way it would appear you think it does, then the terminal emulator (or whatever is connected to your stdout) would quit - not your shell, and it certainly wouldn't revert your shell from the '<em>waiting for more input</em>' state to the '<em>waiting for input</em>' state.</p>\n\n<p>You need to handle the <code>^C</code> in the signal handler, and adjust your shell's state appropriately, getting it to abandon the current input mode and redraw the basic prompt.</p>\n\n<hr>\n\n<p><strong>Edit:</strong> What you need to remember is that your 'shell' is writing text (output) and control characters to the terminal emulator - the terminal emulator is writing text (input) and control characters to your 'shell'.</p>\n\n<p>If you want to revert the prompt from <code>dquote&gt;</code> to <code>mysh$</code>, then <em>you</em> must update the terminal by writing a new prompt to it.</p>\n\n<p>To keep track of what you are currently doing, it might make most sense to use the <a href=\"https://en.wikipedia.org/wiki/Finite-state_machine\" rel=\"nofollow noreferrer\">State Machine</a> approach. You might have a handful of states, including:</p>\n\n<ol>\n<li><code>INPUT_WAITING</code></li>\n<li><code>INPUT_WAITING_CONT</code></li>\n<li><code>COMMAND_RUN</code></li>\n</ol>\n\n<p>When in the <code>INPUT_WAITING</code> state, you would print the <code>mysh$</code> prompt, and handle input.\nWhen a newline is received, you would then decide '<em>do we have all of the information?</em>' before advancing to the <code>INPUT_WAITING_CONT</code> state if not, or the <code>COMMAND_RUN</code> state if you do.</p>\n\n<p>The  <code>INPUT_WAIT_CONT</code> state would printout the <code>dquote&gt;</code> prompt, and take similar actions... <em>'do we have enough information?</em>' Yes: <code>COMMAND_RUN</code>, No: <code>INPUT_WAIT_CONT</code>.</p>\n\n<p>It's then up to you to revert to the <code>INPUT_WAIT</code> state and redraw the <code>mysh$</code> prompt when the user presses <code>^C</code>, or when the command execution has completed.</p>\n"}], "owner": {"reputation": 3, "user_id": 7004459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1eeeb81d992778b9a424f976831a4329?s=128&d=identicon&r=PG&f=1", "display_name": "Victor D", "link": "https://stackoverflow.com/users/7004459/victor-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 42962207, "answer_count": 1, "score": 0, "last_activity_date": 1490275924, "creation_date": 1490208627, "last_edit_date": 1490219804, "question_id": 42960298, "link": "https://stackoverflow.com/questions/42960298/exit-read-listening-when-pressing-ctrl-c-in-c", "title": "Exit read listening when pressing &quot;Ctrl + c&quot; in C", "body": "<p>I'm rewriting a shell in C and I fell on a problem.</p>\n\n<p>When writing a command \u2014\u00a0for example <code>echo \"this</code> \u2014\u00a0we got a new prompt (\"dquote>\", in zsh) and we can exit it with \"Ctrl + c\" and get back to our last command prompt.</p>\n\n<p>I'm stuck there; I just can't get out of my read function (listen on \"dquote>\"), I tried to write on stdout an EOF when pressing \"ctrl + c\" but it doesn't read it.</p>\n\n<p>I switched to non-canonical mode.\nI catch signal with <code>signal(SIGINT, sig_hand);</code></p>\n\n<p>then i execute this part of code when signal is catched:</p>\n\n<pre><code>static void sig_hand(int sig)\n{\n    if (g_shell.is_listen_bracket) // if is the first prompt or no\n        putchar(4); // EOT\n    else\n    {\n        putstr(\"\\n\");\n        print_prompt();\n    }\n}\n</code></pre>\n\n<p>and my read function:</p>\n\n<pre><code>int     j;\nchar    command[ARG_MAX];\nchar    buff[3];\n\nj = -1;\nwhile (1)\n{\n    bzero(buff, 3);\n    read(0, buff, 3);\n    if (buff[0] == 4 &amp;&amp; !buff[1] &amp;&amp; !buff[2])\n        return (ctrl_d(shell));\n    else if (isprint(buff[0]) &amp;&amp; !buff[1] &amp;&amp; !buff[2]) // if is between 32 and 126 (ascii)\n    {\n        command[++j] = buff[0];\n        putchar(buff[0]);\n    }\n}\ncommand[++j] = '\\0';\nreturn (strdup(command));\n</code></pre>\n\n<p>So my code waiting on \"read(0, buff, 3);\", and i want to quit it when pressing ctrl + c.</p>\n\n<p>Thanks for helping !</p>\n"}, {"tags": ["c", "recursion", "linked-list"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1490208331, "post_id": 42960157, "comment_id": 73014716, "body": "<code>l</code> is uninitialized."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 2, "creation_date": 1490208332, "post_id": 42960157, "comment_id": 73014717, "body": "You never pointed <code>l</code> at anything - you were (un)lucky if it was null, because it&#39;s an uninitialized pointer.  You&#39;ll also have problems with the <code>insert()</code> function that doesn&#39;t protect against trying to re-insert a node that&#39;s already contained in a list."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1490208425, "post_id": 42960157, "comment_id": 73014773, "body": "<code>l = new_node;</code> does not do what you think it does - you&#39;d need to pass in a pointer to a pointer as argument (<code>node** l</code>) and assign <code>*l = new_node;</code>"}, {"owner": {"reputation": 21, "user_id": 5460227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43bd9802fe8d4ae25de2efe795327e10?s=128&d=identicon&r=PG&f=1", "display_name": "Serenity1612", "link": "https://stackoverflow.com/users/5460227/serenity1612"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1490209034, "post_id": 42960157, "comment_id": 73015096, "body": "@UnholySheep Dear god ... thank you man. I wasted 3 hours of my life on this. May I ask what exactly was the problem with the old code .. I still don&#39;t understand why it didn&#39;t work."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1490209288, "post_id": 42960157, "comment_id": 73015265, "body": "Having <code>node* l</code> as a parameter means that your function has a local pointer variable that points to the same address as the pointer you pass in. However changing what it points to (via <code>l = new_node;</code>) only changes what the pointer inside the function points to, it does not affect the one you passed as a parameter. - that&#39;s why you need a pointer to  a pointer"}, {"owner": {"reputation": 21, "user_id": 5460227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43bd9802fe8d4ae25de2efe795327e10?s=128&d=identicon&r=PG&f=1", "display_name": "Serenity1612", "link": "https://stackoverflow.com/users/5460227/serenity1612"}, "edited": false, "score": 0, "creation_date": 1490209571, "post_id": 42960157, "comment_id": 73015406, "body": "Ahhhh ... makes sense. Thanks :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490210227, "post_id": 42960157, "comment_id": 73015791, "body": "This must be a duplicate of hundreds if not thousands of &quot;cannot get a linked list insert function to work properly&quot; questions.  There are two solutions \u2014 the one mentioned in the comments so far, and &#39;return the new head node from the insert function&#39; (<code>list = insert(list, new_value);</code>).  Both work; there isn&#39;t a lot to choose between them."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5460227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43bd9802fe8d4ae25de2efe795327e10?s=128&d=identicon&r=PG&f=1", "display_name": "Serenity1612", "link": "https://stackoverflow.com/users/5460227/serenity1612"}, "edited": false, "score": 1, "creation_date": 1490209116, "post_id": 42960191, "comment_id": 73015150, "body": "Thanks, this solution seems to work as well. I just wanted my insert to be of type void, and not return a pointer as well. In that case a double pointer is required, right?"}], "tags": [], "owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1490208595, "last_edit_date": 1490208595, "creation_date": 1490208284, "answer_id": 42960191, "question_id": 42960157, "link": "https://stackoverflow.com/questions/42960157/recursive-linked-list-in-c/42960191#42960191", "title": "Recursive linked list in C", "body": "<p>First off, you're passing l to your function by value so you won't see any changes made to it. Currently, when you set l to new_node, you only change the local value of l in the method insert. You may want to modify your function to return l and set l in your main to the return value of this function. </p>\n\n<pre><code>node *insert(int x, node *l){\n  //.... your method\n  return l;\n}\n</code></pre>\n\n<p>In main:</p>\n\n<pre><code>node *l = NULL;\nl = insert(1, l);\nl = insert(2, l);\n</code></pre>\n\n<p>Second, your recursive call will not append nodes to your LL for the same reason. Change that call to this:</p>\n\n<pre><code> l-&gt;next = insert(x, l);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "is_accepted": true, "score": 0, "last_activity_date": 1490209464, "creation_date": 1490209464, "answer_id": 42960558, "question_id": 42960157, "link": "https://stackoverflow.com/questions/42960157/recursive-linked-list-in-c/42960558#42960558", "title": "Recursive linked list in C", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct node {\nunsigned v;\nstruct node* next;\n} node;\n\nnode* insert(unsigned x, node** ll) {\n  if (*ll == NULL){\n*ll = (node*)malloc(sizeof(node));\n(*ll)-&gt;v = x;\n(*ll)-&gt;next = NULL;\n\n  }\n  else {\n    insert(x, &amp;(*ll)-&gt;next);\n}\n}\n\nvoid print(node *l) {if (l == NULL) return;\nprintf(\"%d\\n\", l-&gt;v);\nprint(l-&gt;next);\n}\n\nint main(){\n\nnode* l = NULL;\ninsert(1, &amp;l);\ninsert(2, &amp;l);\nprint(l);\n\nreturn 0;\n}\n</code></pre>\n\n<p>compiled with no gcc no switches</p>\n\n<p>output:\n1\n2</p>\n"}], "owner": {"reputation": 21, "user_id": 5460227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43bd9802fe8d4ae25de2efe795327e10?s=128&d=identicon&r=PG&f=1", "display_name": "Serenity1612", "link": "https://stackoverflow.com/users/5460227/serenity1612"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 42960558, "answer_count": 2, "score": 1, "last_activity_date": 1490209464, "creation_date": 1490208165, "last_edit_date": 1490208492, "question_id": 42960157, "link": "https://stackoverflow.com/questions/42960157/recursive-linked-list-in-c", "title": "Recursive linked list in C", "body": "<p>I've just tried to implement a recursive linked list append in C, and for some reason l keeps being NULL no matter what I do, even though I malloc when encountering a NULL value.</p>\n\n<p>The following code prints nothing. Any ideas?</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct node {\n  unsigned v;\n  struct node* next;\n} node;\n\nvoid insert(unsigned x, node* l) {\n  if (l == NULL){\n    node* new_node = (node*)malloc(sizeof(node));\n    new_node-&gt;v = x;\n    new_node-&gt;next = NULL;\n    l = new_node;\n  }\n  else {\n    insert(x, l-&gt;next);\n  }\n}\n\nvoid print(node *l) {\n  if (l == NULL) return;\n  printf(\"%d\\n\", l-&gt;v);\n  print(l-&gt;next);\n}\n\nint main(){\n\n  node* l = NULL;\n  insert(1, l);\n  insert(2, l);\n\n  print(l);\n\n  return 0;\n}\n</code></pre>\n\n<p>Help much appreciated.</p>\n\n<p>EDIT: Even if I initialize it, it's still the same.</p>\n"}, {"tags": ["c", "sorting"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490208002, "post_id": 42960043, "comment_id": 73014524, "body": "First thing I&#39;d suggest is to check whether any of those system calls are failing and why. Something like <code>if( fread(...) != record_size ) { perror(&quot;fread failed to read sufficient data&quot;) }</code>. Same for <code>fseek</code>, and <code>fwrite</code>."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490209320, "post_id": 42960043, "comment_id": 73015277, "body": "Sorry, I can&#39;t reproduce your problem. I made a file with 5 lines each starting with a single number and then 4999 x&#39;s. Both worked fine."}, {"owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490209920, "post_id": 42960043, "comment_id": 73015619, "body": "I&#39;v just made tests and there are no printed errors. lib_sort for record_size = 5000 and num_or_record = 10 still doesn&#39;t work."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490213262, "post_id": 42960043, "comment_id": 73017534, "body": "Edit your code with those tests, please. Can you give some more detail about what &quot;doesn&#39;t work&quot;? Also show how you&#39;re calling those functions."}, {"owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1490215128, "post_id": 42960043, "comment_id": 73018496, "body": "Result file just has less lines and differents lengths of lines(more and less than 5000). I found a bug that fread reads more characters than my record_size parameter and I have smth like this at the end of buffer1: jfuhaypwjgsgjxl\\021\\020"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1490231802, "post_id": 42960043, "comment_id": 73025036, "body": "You are using <code>fread()</code> and <code>fwrite()</code> incorrectly. When you call <code>fread(buffer, size, number of members, file stream pointer)</code> you are telling it that size of your record is <code>sizeof(char)</code> or <code>1</code> and that you are expecting it to read as many records as <code>record_size</code>. To <code>fread()</code> reading a few records, say 5000  out of requested 5010 bytes, is a success and will return 5000 that means it read 5000 records. In reality, what you wanted is to read only 1 record of <code>record_size</code> long. If you change to <code>fread(buffer2, (size_t) record_size, 1, file)</code> and do the same with <code>fwrite()</code>, it will work."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490236383, "post_id": 42965823, "comment_id": 73026318, "body": "Actually I&#39;ve tried this before your answer <a href=\"http://stackoverflow.com/questions/8589425/how-does-fread-really-work\">link</a> and it still works incorrectly. I think that the problem is in fread and fwrite functions. I made a file and then I just called fread and fwrite functions. I compared loaded string with the line in file and it was the same. Then after fwrite function(write first record into second) they were different!(Usually about 4000 first characters are same and the rest is different). fwrite fails and always return record_size(or 1 in ur option of call)."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490236867, "post_id": 42965823, "comment_id": 73026441, "body": "You&#39;re interpreting the return value incorrectly. <code>fwrite()</code> will return the number of bytes written in your code and will return 1 in my suggestion. Both of those meant the write succeeded. but you incorrectly assuming those failed."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490236961, "post_id": 42965823, "comment_id": 73026468, "body": "Ah you are running Windowze after all. Then this is your issue <a href=\"http://stackoverflow.com/questions/3187693/fread-ftell-apparently-broken-under-windows-works-fine-under-linux\" title=\"fread ftell apparently broken under windows works fine under linux\">stackoverflow.com/questions/3187693/&hellip;</a>"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490237024, "post_id": 42965823, "comment_id": 73026482, "body": "@bednius - on windows you need to open the file in <code>binary</code> when using <code>fread()</code> and <code>fwrite()</code>."}, {"owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490237192, "post_id": 42965823, "comment_id": 73026526, "body": "I understood you and as I said I had tried this version before and it wasn&#39;t working. Program doesn&#39;t writes any errors(its means fread and fwrite succed but it didn&#39;t for real because file contect is different than expected)"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490237287, "post_id": 42965823, "comment_id": 73026547, "body": "It didn&#39;t work because you opened your file in text mode. You need to change <code>fopen(filename, &quot;r+&quot;)</code> to <code>fopen(filename, &quot;rb+&quot;)</code>."}, {"owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490237298, "post_id": 42965823, "comment_id": 73026551, "body": "I use ubuntu. Just wanted to try what happens on Windows"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490313045, "post_id": 42965823, "comment_id": 73069604, "body": "It&#39;s quite possible you are running out of stack and heap. Check if this will resolve the issue you are seeing <a href=\"http://stackoverflow.com/questions/13944841/how-to-increase-the-maximum-memory-allocated-on-the-stack-heap\" title=\"how to increase the maximum memory allocated on the stack heap\">stackoverflow.com/questions/13944841/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490381763, "post_id": 42965823, "comment_id": 73103811, "body": "I&#39;v got the solution. I put <code>fseek(file, 0,  SEEK_CUR);</code> after every <code>fread()</code> and <code>fwrite()</code> function. I have no idea why it works."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490382321, "post_id": 42965823, "comment_id": 73104122, "body": "That is indeed odd. You would only need to <code>fseek()</code> between reads and writes if you are operating on a single file to synchronize the file pointers. In your case you are reading from 1 file and writing onto another file."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490382704, "post_id": 42965823, "comment_id": 73104325, "body": "@bednius Your issue would seem to be similar to <a href=\"http://stackoverflow.com/questions/26227564/file-i-o-cant-read-write-simultaneously/26227809#26227809\">this</a>."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490383059, "post_id": 42965823, "comment_id": 73104522, "body": "@bednius - I suggest you post your own answer for future readers to see. And I also realized you are operating on a single <code>file</code>. I automatically assumed you were working on <code>file1</code> and <code>file2</code> as soon as I saw <code>buffer1</code> and <code>buffer2</code>."}, {"owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490392414, "post_id": 42965823, "comment_id": 73109072, "body": "Should I edit my first post or add new answer? And thanks for any help by the way :)"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "reply_to_user": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "edited": false, "score": 0, "creation_date": 1490392500, "post_id": 42965823, "comment_id": 73109108, "body": "@bednius - do not edit your original question. Post the solution that worked, as an answer."}], "tags": [], "owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "is_accepted": false, "score": 0, "last_activity_date": 1490237219, "last_edit_date": 1592644375, "creation_date": 1490233830, "answer_id": 42965823, "question_id": 42960043, "link": "https://stackoverflow.com/questions/42960043/sorting-file-using-system-and-library-functions/42965823#42965823", "title": "Sorting file using system and library functions", "body": "<p>You are using <code>fread()</code> and <code>fwrite()</code> incorrectly.</p>\n<blockquote>\n<p><code>size_t fread(void *ptr, size_t size, size_t nmemb, FILE * stream );</code></p>\n<p><code>size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);</code></p>\n<p><strong>Description</strong></p>\n<p>The function <code>fread()</code> reads <code>nmemb</code> elements of data, each <code>size</code> bytes long, from the stream pointed to by <code>stream</code>, storing them at the location given by <code>ptr</code>.</p>\n<p>The function <code>fwrite()</code> writes <code>nmemb</code> elements of data, each <code>size</code> bytes long, to the stream pointed to by <code>stream</code>, obtaining them from the location given by <code>ptr</code>.</p>\n</blockquote>\n<p>You are telling <code>fread()</code> and <code>fwrite()</code> that the length of your record or item is 1 byte long and you are asking for 5000 records.</p>\n<blockquote>\n<p><strong>Return Value</strong></p>\n<p>On success, <code>fread()</code> and <code>fwrite()</code> <strong><em>return the number of items read or written</em></strong>. This number equals the number of bytes transferred only when size is <code>1</code>. If an error occurs, or the end of the file is reached, the return value is a short item count (or zero).</p>\n</blockquote>\n<p>Thee parameters you pass to <code>fread()</code> and <code>fwrites()</code> are in the wrong order when in your code you clearly meant the record size (length of the item) is <code>record_size</code> or 5000 in your failing scenario.</p>\n<p>You should have written your code to call <code>fread()</code> in this manner instead:</p>\n<pre><code>fread(buffer1, (size_t) record_size, 1, file)\n</code></pre>\n<p>and call <code>fwrite()</code> in this manner:</p>\n<pre><code>fwrite(buffer2, (size_t) record_size, 1, file)\n</code></pre>\n<p>It should also be noted that <code>fread()</code> and <code>fwrite()</code> works on binary streams. This means that strings are not automatically null terminated and reading will read past newlines and past null <code>\\0</code> bytes. On writes, newlines are not automatically converted to OS supported newlines such as <code>LF</code> on Linux and <code>CRLF</code> on Windows.</p>\n<p>For string operations, use <code>fgets()</code> and <code>fputs()</code> instead.</p>\n<p>You have forgotten to mention and I have wrongly assumed that you are running on Linux. Based on your comment, you are running on Windows after all. On Windows, <code>fread()</code> and <code>fwrite()</code> will not work correctly when the file is opened in <code>text</code> mode due to translations with OS dependent encoding. You will need to open the file in <code>binary</code> mode.</p>\n"}, {"comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1490395943, "post_id": 43009854, "comment_id": 73110405, "body": "This is the explanation to what you were seeing <a href=\"http://stackoverflow.com/questions/1713819/why-fseek-or-fflush-is-always-required-between-reading-and-writing-in-the-read-w\" title=\"why fseek or fflush is always required between reading and writing in the read w\">stackoverflow.com/questions/1713819/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "is_accepted": true, "score": 0, "last_activity_date": 1490392889, "creation_date": 1490392889, "answer_id": 43009854, "question_id": 42960043, "link": "https://stackoverflow.com/questions/42960043/sorting-file-using-system-and-library-functions/43009854#43009854", "title": "Sorting file using system and library functions", "body": "<p>I put <code>fseek(file, 0, SEEK_CUR);</code> after every <code>fread()</code> and <code>fwrite()</code> functions and that worked for me. I don't know why.</p>\n"}], "owner": {"reputation": 1, "user_id": 7731876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd1dbc0de6ea9a7aaf553444d6a5dcf?s=128&d=identicon&r=PG&f=1", "display_name": "bednius", "link": "https://stackoverflow.com/users/7731876/bednius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 43009854, "answer_count": 2, "score": 0, "last_activity_date": 1490392889, "creation_date": 1490207716, "last_edit_date": 1490218064, "question_id": 42960043, "link": "https://stackoverflow.com/questions/42960043/sorting-file-using-system-and-library-functions", "title": "Sorting file using system and library functions", "body": "<p>@EDIT\nLooks like fread function reads more characters than record_size parameter ;x</p>\n\n<p><a href=\"https://i.stack.imgur.com/rRtPe.png\" rel=\"nofollow noreferrer\">PICTURE</a></p>\n\n<p>I've got 2 functions which sort file(bubble sort) by records(key is first character). The first one is using system functions(read, write, etc.) and secong is using library functions(fread, fwrite, etc.). For small record_size parameter both works well but e.g for record_size = 5000 only sys_sort works properly. File sorted by lib_sort has less lines and different lengths. Why? I don't know what is the problem.</p>\n\n<pre><code>void lib_sort(const char *filename, long long int record_size, long long int num_of_lines) {\n    record_size++;  // '\\n' char at the end of line\n    FILE *file;\n\n    if (!(file = fopen(filename, \"r+\"))) {\n        printf(\"Cannot open %s file.\\n\", filename);\n        fclose(file);\n        exit(EXIT_FAILURE);\n    }\n\n    char *buffer1 = malloc(sizeof(char) * record_size);\n    char *buffer2 = malloc(sizeof(char) * record_size);\n\n    bool flag = true;\n\n    while (flag) {\n        flag = false;\n        if(fseek(file, 0, SEEK_SET) != 0) {\n            printf(\"fseek failed.\\n\");\n        }\n        if((fread(buffer1, sizeof(char), (size_t) record_size, file)) != record_size) {\n            printf(\"fread failed.\\n\");\n        }\n\n        for (int i = 1; i &lt; num_of_lines; ++i) {\n            if((fread(buffer2, sizeof(char), (size_t) record_size, file)) != record_size) {\n                printf(\"fread failed.\\n\");\n            }\n            if (buffer1[0] &gt; buffer2[0]) {\n                if(fseek(file, record_size * (-2), SEEK_CUR) != 0) {\n                    printf(\"fseek failed.\\n\");\n                }\n                if((fwrite(buffer2, sizeof(char), (size_t) record_size, file)) != record_size) {\n                    printf(\"fwrite failed.\\n\");\n                }\n\n                if((fwrite(buffer1, sizeof(char), (size_t) record_size, file)) != record_size) {\n                    printf(\"write failed.\\n\");\n                }\n                flag = true;\n            } else {\n                char *tmp = buffer2;\n                buffer2 = buffer1;\n                buffer1 = tmp;\n            }\n        }\n        num_of_lines--;\n    }\n    fclose(file);\n    free(buffer1);\n    free(buffer2);\n}\n</code></pre>\n\n<p>And this is the correct one:</p>\n\n<pre><code>void sys_sort(const char *filename, long long int record_size, long long int num_of_records) {\n    record_size++;  // '\\n' char at the end of line\n    int file;\n\n    if ((file = open(filename, O_RDWR)) &lt; 0) {\n        printf(\"Cannot open %s file.\\n\", filename);\n        close(file);\n        exit(EXIT_FAILURE);\n    }\n\n    char *buffer1 = malloc(sizeof(char) * record_size);\n    char *buffer2 = malloc(sizeof(char) * record_size);\n\n    bool flag = true;\n\n    while (flag) {\n        flag = false;\n        lseek(file, 0, SEEK_SET);\n        read(file, buffer1, (size_t) record_size);\n\n        for (int i = 1; i &lt; num_of_records; ++i) {\n            read(file, buffer2, (size_t) record_size);\n            if (buffer1[0] &gt; buffer2[0]) {\n                lseek(file, record_size * (-2), SEEK_CUR);\n                write(file, buffer2, (size_t) record_size);\n                write(file, buffer1, (size_t) record_size);\n                flag = true;\n            } else {\n                char *tmp = buffer2;\n                buffer2 = buffer1;\n                buffer1 = tmp;\n            }\n        }\n        num_of_records--;\n    }\n    close(file);\n    free(buffer1);\n    free(buffer2);\n}\n</code></pre>\n\n<p>I use ubuntu 16.04 and standard C99</p>\n"}, {"tags": ["c", "mpi", "dynamic-memory-allocation"], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1490207974, "post_id": 42959915, "comment_id": 73014508, "body": "I opted to delete, thanks for the option :)  Your answer more accurately addresses the issues."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1490209040, "last_edit_date": 1490209040, "creation_date": 1490207259, "answer_id": 42959915, "question_id": 42959606, "link": "https://stackoverflow.com/questions/42959606/mpi-abort-and-dynamically-allocated-memory/42959915#42959915", "title": "MPI_Abort and dynamically allocated memory", "body": "<p><code>MPI_Abort()</code> is analogous to <code>exit()</code>:</p>\n\n<blockquote>\n  <p>This routine makes a \"best attempt\" to abort all tasks in the group of\n  <code>comm</code>.  This function  does  not  require  that  the  invoking \n  environment  take  any  action  with  the  error code.  However, a\n  Unix or POSIX environment should handle this as a return errorcode\n  from the main program.</p>\n</blockquote>\n\n<p>(<a href=\"http://mpi-forum.org/docs/mpi-3.1/mpi31-report.pdf\" rel=\"nofollow noreferrer\">MPI 3.1 specification</a>)</p>\n\n<p>Where it is effective at aborting processes, any dynamically-allocated memory held by those processes is released back to the OS.  Dynamic allocations do not survive process termination.  So,</p>\n\n<blockquote>\n  <p>Not freeing the dynamically allocated memory can cause malfunctions/unpredictable behaviors?</p>\n</blockquote>\n\n<p>To some extent.</p>\n\n<blockquote>\n  <p>Is this considered as a leak?</p>\n</blockquote>\n\n<p>There is no leak of <code>malloc()</code>ed or <code>calloc()</code>ed memory arising from the operation of <code>MPI_Abort()</code>.  Memory leaking is relevant only in the context of a process that continues to run.</p>\n"}], "owner": {"reputation": 593, "user_id": 4809174, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/O67LH.jpg?s=128&g=1", "display_name": "Lucian Bredean", "link": "https://stackoverflow.com/users/4809174/lucian-bredean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 42959915, "answer_count": 1, "score": 1, "last_activity_date": 1490209058, "creation_date": 1490206282, "last_edit_date": 1490209058, "question_id": 42959606, "link": "https://stackoverflow.com/questions/42959606/mpi-abort-and-dynamically-allocated-memory", "title": "MPI_Abort and dynamically allocated memory", "body": "<p>I am learning to program in MPI in C and I didn't manage to find what happens with the dynamically allocated memory (malloc/calloc) in all processes from a MPI communicator/group when one of the processes calls MPI_Abort.</p>\n\n<p>Not freeing the dynamically allocated memory can cause malfunctions/unpredictable behaviors? Is this considered as a leak?  </p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490207329, "post_id": 42959301, "comment_id": 73014165, "body": "Your <code>filename</code> is too short (null-termination?). Spending multiple hours on it...well, a bit wasteful."}, {"owner": {"reputation": 13, "user_id": 7752896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e14684c6f1bf907c9ac191212ad2f2?s=128&d=identicon&r=PG&f=1", "display_name": "LegalExperience", "link": "https://stackoverflow.com/users/7752896/legalexperience"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490212115, "post_id": 42959301, "comment_id": 73016864, "body": "@Eugene, per the specification file name should be XXX.jpg. Considering the null-termination i would think i need 8 chars to store the filename. Or am I missing something obvious? (i started cs50 with 0 prior experience :) )"}, {"owner": {"reputation": 13, "user_id": 7752896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e14684c6f1bf907c9ac191212ad2f2?s=128&d=identicon&r=PG&f=1", "display_name": "LegalExperience", "link": "https://stackoverflow.com/users/7752896/legalexperience"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1490212444, "post_id": 42959301, "comment_id": 73017063, "body": "@Mark, you can find an example of my output here: <a href=\"http://imgur.com/3Nf1Ui4\" rel=\"nofollow noreferrer\">imgur.com/3Nf1Ui4</a> . I don&#39;t have any idea of what the output should look like but it should be a clear picture."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490214593, "post_id": 42959301, "comment_id": 73018202, "body": "I was wrong about this one, sorry. Miscounted the characters."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7752896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e14684c6f1bf907c9ac191212ad2f2?s=128&d=identicon&r=PG&f=1", "display_name": "LegalExperience", "link": "https://stackoverflow.com/users/7752896/legalexperience"}, "edited": false, "score": 1, "creation_date": 1490218668, "post_id": 42962168, "comment_id": 73020351, "body": "Thanks Togeri! This has been really helpful. I didn&#39;t realize that the fread in my while loop condition also advanced the pointer. Changed my code and passed check50. On to week 5! :D"}], "tags": [], "owner": {"reputation": 30, "user_id": 7360321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XMJWs.jpg?s=128&g=1", "display_name": "Togeri", "link": "https://stackoverflow.com/users/7360321/togeri"}, "is_accepted": true, "score": 0, "last_activity_date": 1490260416, "last_edit_date": 1490260416, "creation_date": 1490214929, "answer_id": 42962168, "question_id": 42959301, "link": "https://stackoverflow.com/questions/42959301/cs5ox-pset4-recover-code-only-recovers-partial-images/42962168#42962168", "title": "CS5Ox Pset4 Recover: code only recovers partial images", "body": "<p>I see several things that could be causing that problem. </p>\n\n<p>First, check the order of your <code>n</code> counter. The counter should be added before you actually start writing on the new file, but that's just a matter of preference, and how clean you want your code to be. </p>\n\n<p>Secondly, try to substitute your <code>else</code> condition with the following code: </p>\n\n<pre><code>if(outfile != NULL)                          \n      {\n        fwrite(buffer, 512, 1, outfile);\n}\n</code></pre>\n\n<p><strong>Note</strong>: Please bear in mind that I've substituted your <code>else</code> condition for an <code>if</code> condition. This is due to the fact that when the first <code>if</code> condition is met, then it executes this condition and 'jumps out of the block'. So the <code>else</code> will be executed only the first <code>if</code> condition won't execute.\nIf you wanted to keep your <code>else</code> condition, then you should have to nest another <code>if</code> , as you've done in your code. </p>\n\n<p>By substituting that <code>else</code> with an <code>if</code> that will always be checked regardless of the value of the first 3 bytes of your jpg (that is, regardless if they're 0x00, 0xff, 0x00), you will obtain a much clear and understandable code. </p>\n\n<p>Lastly, and more important: why are you writing twice to the same file in the same operation? Pay attention to the <code>fwrite()</code> function below your <code>n++</code> counter. Is it really necessary? </p>\n\n<p>In other words: delete this line: </p>\n\n<p><code>// read one block\n        fread(buffer, 512, 1, infile);</code></p>\n\n<p>Other mistake, is that you're reading your file twice, and advance twice in every step, so you will get half information.\nThis is the reason you're getting half of the images (27 or so). </p>\n\n<p>Erase these two lines: </p>\n\n<p><code>// read one block\n    fread(buffer, 512, 1, infile);</code></p>\n\n<p>As I've said, by reading and writing twice within your files, you get half of the information. This leads to that fuzzy way in which you're getting your images all colored in senseless colors (I guess) and half of the image files. </p>\n\n<p>I've run <code>check50 2016.recover recover.c</code> with your code and with the fixed solutions I've just provided you and it passes all the checks from CS50's check50. Take your time and think about everything in your program, including the control-flow, which is an important part of it, as well as the pointers usage. </p>\n\n<p>Starting CS50 without any prior experience can be daunting. Keep it up. You've already made it almost into Week 5.   </p>\n"}], "owner": {"reputation": 13, "user_id": 7752896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36e14684c6f1bf907c9ac191212ad2f2?s=128&d=identicon&r=PG&f=1", "display_name": "LegalExperience", "link": "https://stackoverflow.com/users/7752896/legalexperience"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 42962168, "answer_count": 1, "score": -1, "last_activity_date": 1490260416, "creation_date": 1490205357, "last_edit_date": 1490208947, "question_id": 42959301, "link": "https://stackoverflow.com/questions/42959301/cs5ox-pset4-recover-code-only-recovers-partial-images", "title": "CS5Ox Pset4 Recover: code only recovers partial images", "body": "<p>I have some semi-working code for CS50 Pset4. If you run it you will see that it recovers 27 jpg files but only the first couple of lines are visible.</p>\n\n<p>Can someone point me in the right direction?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef uint8_t BYTE;\n\nint main (int argc, char *argv[])\n{\n    // ensure proper usage\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: ./recover infile\\n\");\n        return 1;\n    }\n\n    // open file to be recovered\n    FILE *infile = fopen(argv[1], \"r\");\n    if (infile == NULL)\n    {\n        fprintf(stderr, \"Could not open infile.\\n\");\n        return 2;\n    }\n\n    // temp storage for blocks\n    BYTE buffer[512];\n\n    // variable to store filename\n    char filename[8];\n\n    //store number of recovered files\n    int n = 0;\n\n    // temp storage for outfiles\n    FILE* outfile = NULL;\n\n    // iterate over all blocks of memory until end of SD card is reached\n    while (fread(buffer, 512, 1, infile) != 0)\n    {\n        // read one block\n        fread(buffer, 512, 1, infile);\n\n        // check if block is start of jpeg\n        if (buffer[0] == 0xff &amp;&amp; buffer[1] == 0xd8 &amp;&amp; buffer[2] == 0xff &amp;&amp; (buffer[3] &amp; 0xf0) == 0xe0)\n        {\n            //close previous file if already open\n            if(outfile != NULL)\n            {\n                fclose(outfile);\n            }\n\n            // creeate new outfile\n            sprintf(filename, \"%03i.jpg\", n);\n            outfile = fopen(filename, \"w\");\n\n            // write block to outfile\n            fwrite(buffer, 512, 1, outfile);\n\n            n++;\n        }\n        else\n        {\n            // write block to current outfile\n            if(outfile != NULL)\n            {\n                fwrite(buffer, 512, 1, outfile);\n            }\n        }\n    }\n\n    //close last outfile\n    fclose(outfile);\n\n    //close infile\n    fclose(infile);\n}\n</code></pre>\n"}, {"tags": ["c", "sorting", "linked-list"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1490206623, "post_id": 42958582, "comment_id": 73013731, "body": "Is this an assignment, or some other learning project, or could you consider using <code>qsort(...)</code>?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1490206772, "post_id": 42958582, "comment_id": 73013821, "body": "<i>...it hits the sort() function. Then it gets caught in some infinite loop...</i>.  It appears both answers offer an explanation.  Have you tried to use the information from either?"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1490256663, "post_id": 42958582, "comment_id": 73033323, "body": "<a href=\"http://stackoverflow.com/questions/7685/merge-sort-a-linked-list\">stackoverflow.com/questions/7685/merge-sort-a-linked-list</a>"}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 0, "last_activity_date": 1490203508, "creation_date": 1490203508, "answer_id": 42958684, "question_id": 42958582, "link": "https://stackoverflow.com/questions/42958582/descending-sort-function-for-linked-list-in-c/42958684#42958684", "title": "Descending Sort function for linked list in C?", "body": "<p>In this loop</p>\n\n<pre><code>while(ptr2 != NULL) {\n   if(ptr1-&gt;val &lt; ptr2-&gt;val){\n       ptr2 = ptr2-&gt;next;\n   }\n}\n</code></pre>\n\n<p>If <code>ptr2-&gt;val &gt;= ptr1-&gt;val</code> <code>ptr2</code> will not be changed for the next iteration of the loop which means that the loop never terminates.</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1490203949, "creation_date": 1490203949, "answer_id": 42958826, "question_id": 42958582, "link": "https://stackoverflow.com/questions/42958582/descending-sort-function-for-linked-list-in-c/42958826#42958826", "title": "Descending Sort function for linked list in C?", "body": "<p>It looks like your sort routine isn't any where near finished.</p>\n\n<p>Both of the loops have the possibility to run for ever. For the outer one, you never change the value of ptr1 so it'll never end - the inner one only changes ptr2 under some circumstances.</p>\n\n<p>Ultimately, nothing inside the function actually changes the order of the list so I'm not sure why you think it's ready to be used.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1490232938, "creation_date": 1490232938, "answer_id": 42965702, "question_id": 42958582, "link": "https://stackoverflow.com/questions/42958582/descending-sort-function-for-linked-list-in-c/42965702#42965702", "title": "Descending Sort function for linked list in C?", "body": "<p>A simple way to do the sort is to remove nodes from the original list and insert them into order into an initially empty list. Since this is probably homework, I can't provide a complete answer, so here is the basic idea:</p>\n\n<pre><code>struct node *sorted = NULL;    // initially empty list\n// ... remove nodes from head, insert nodes in order into sorted\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 6264800, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/edb766dadb41a974a28739c33eb0e497?s=128&d=identicon&r=PG&f=1", "display_name": "Kogden", "link": "https://stackoverflow.com/users/6264800/kogden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1553, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490232938, "creation_date": 1490203219, "question_id": 42958582, "link": "https://stackoverflow.com/questions/42958582/descending-sort-function-for-linked-list-in-c", "title": "Descending Sort function for linked list in C?", "body": "<p>So I have a linked list that contains two elements, a 3 character string that is read in, and an integer value. I need to sort the strings by their respective int values in a descending fashion. I'll link the whole block of code and then point out exactly where I'm getting stuck.</p>\n\n<p>The code runs fine until it hits the sort() function. Then it gets caught in some infinite loop. The program is supposed to end when the user input string is 'end'. </p>\n\n<pre><code>void sort() {\n    struct node *ptr1, *ptr2;\n    ptr1 = ptr2 = head;\n    while(ptr1 != NULL){\n        ptr2 = ptr1;\n        while(ptr2 != NULL) {\n            if(ptr1-&gt;val &lt; ptr2-&gt;val){\n                ptr2 = ptr2-&gt;next;\n            }\n        }\n    }\n}\n\n\nint main(void) {\n    char str[CMDSIZE];\n    head = NULL;\n    struct node *temp;\n    int randomnumber;\n    randomnumber = (rand() % 10) + 1;\n\n\n    while(strcmp(str, \"end\") != 0) {\n        printf(\"Enter your command: \");\n        fflush(stdout);\n        scanf(\"%[^\\n]%*c\", str);\n        insert(str, randomnumber);\n        randomnumber = (rand() % 10) + 1;\n    }\n    sort();\n    print();\n\n}\n</code></pre>\n\n<p>Full code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define CMDSIZE 4\n\nstruct node\n{\n    char cmd[4];\n    int val;\n    struct node *next;\n};\n\nstruct node *head = NULL;\nstruct node *curr = NULL;\n\n\nvoid insert(char command[], int x) {\n    struct node *temp;\n    temp = (struct node*)malloc(sizeof(struct node));\n    strcpy(temp-&gt;cmd, command);\n    temp-&gt;val = x;\n    temp-&gt;next = head;\n    head = temp;\n}\n\nvoid print() {\n    struct node *temp;\n    temp = head;\n    printf(\"\\n Linked List Contents : \\n\");\n    while(temp!=NULL){\n        printf(\" Node contains :\\n %s %d \\n\", temp-&gt;cmd, temp-&gt;val);\n        temp=temp-&gt;next;\n    }\n}\n\nvoid sort() {\n    struct node *ptr1, *ptr2;\n    ptr1 = ptr2 = head;\n    while(ptr1 != NULL){\n        ptr2 = ptr1;\n        while(ptr2 != NULL) {\n            if(ptr1-&gt;val &lt; ptr2-&gt;val){\n                ptr2 = ptr2-&gt;next;\n            }\n        }\n    }\n}\n\n\nint main(void) {\n    char str[CMDSIZE];\n    head = NULL;\n    struct node *temp;\n    int randomnumber;\n    randomnumber = (rand() % 10) + 1;\n\n\n    while(strcmp(str, \"end\") != 0) {\n        printf(\"Enter your command: \");\n        fflush(stdout);\n        scanf(\"%[^\\n]%*c\", str);\n        insert(str, randomnumber);\n        randomnumber = (rand() % 10) + 1;\n\n    }\n    sort();\n    print();\n\n}\n</code></pre>\n\n<p>I use random 3 character strings for the input until I type 'end' and the sort function runs.</p>\n\n<p>Output with sort():</p>\n\n<pre><code>Enter your command: lll\nEnter your command: ooo\nEnter your command: man\nEnter your command: bmi\nEnter your command: end\n</code></pre>\n\n<p>Output without sort():</p>\n\n<pre><code> Linked List Contents : \n Node contains :\n end 9 \n Node contains :\n two 4 \n Node contains :\n one 10 \n Node contains :\n lll 8 \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490203267, "post_id": 42958565, "comment_id": 73011581, "body": "I suppose that&#39;s because your <code>isPrime</code> function has a terrible complexity, so it runs forever. Try limiting to <code>int(sqrt(number)+0.5)</code> you&#39;ll have the same results, much faster. note: you&#39;re calling it twice in your loop,; making it even worse."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1490203280, "post_id": 42958565, "comment_id": 73011592, "body": "If it runs to the point you can enter a value, it&#39;s not a <i>compiling</i> problem, because your code compiled, linked and executed. Now it&#39;s a <i>debugging</i> problem, and for that you use a debugger to step through the code."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490203339, "post_id": 42958565, "comment_id": 73011632, "body": "consider using a sieve algorithm instead of that. (lookup sieve of erathostenes)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1490203386, "post_id": 42958565, "comment_id": 73011654, "body": "which value are you entering? Entering 1 million creates a 10**12 loop."}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 0, "creation_date": 1490203412, "post_id": 42958565, "comment_id": 73011674, "body": "goodness guys thanks so much for responding so quickly! Ill look into your suggestions and update you as soon as I can."}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490203602, "post_id": 42958565, "comment_id": 73011796, "body": "@Jean-Fran&#231;oisFabre I am just trying to enter 9 lol"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 0, "creation_date": 1490203530, "post_id": 42958645, "comment_id": 73011737, "body": "Wow I am dumb! I just started learning how to code so I guess theres some serious learning pains. Thanks so much!"}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 0, "creation_date": 1490203910, "post_id": 42958645, "comment_id": 73011992, "body": "So i fixed that problem and made it &quot;i&lt;=counter&quot; and the problem persists :("}, {"owner": {"reputation": 1523, "user_id": 3791794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378946c1efd33604a905ef2fd60839a1?s=128&d=identicon&r=PG&f=1", "display_name": "Simba", "link": "https://stackoverflow.com/users/3791794/simba"}, "reply_to_user": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 1, "creation_date": 1490204112, "post_id": 42958645, "comment_id": 73012114, "body": "Try inserting the number 11 as input and see if it works, if you&#39;re inputting huge numbers it may just be hanging since it&#39;s taking so long given your algorithm"}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 0, "creation_date": 1490204823, "post_id": 42958645, "comment_id": 73012551, "body": "Probably should have started with this but, I need the prime numbers up until (not including the number) and for them to be printed all on one line.  Also I dont get why none of the values are being stored in my array"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490205010, "post_id": 42958645, "comment_id": 73012661, "body": "<code>printf(&quot;%d&quot;, allDaPrimes[i]);</code> will print them all one line, but without any spaces between them...need to make that <code>&quot;%d &quot;</code> to make the output readable."}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490205090, "post_id": 42958645, "comment_id": 73012711, "body": "@ChrisTurner yea i ended up figuring that one out, unfortunately, my array isnt being populated correctly and its frustrating"}, {"owner": {"reputation": 1523, "user_id": 3791794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378946c1efd33604a905ef2fd60839a1?s=128&d=identicon&r=PG&f=1", "display_name": "Simba", "link": "https://stackoverflow.com/users/3791794/simba"}, "edited": false, "score": 0, "creation_date": 1490205108, "post_id": 42958645, "comment_id": 73012722, "body": "In your first loop i&lt;=n, as you seem to want to include your intput"}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 1, "creation_date": 1490205409, "post_id": 42958645, "comment_id": 73012936, "body": "@Simba thanks so much man for working with me here. I think I am going to try and implement a sieve algorithm to clean up some of complexity"}], "tags": [], "owner": {"reputation": 1523, "user_id": 3791794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/378946c1efd33604a905ef2fd60839a1?s=128&d=identicon&r=PG&f=1", "display_name": "Simba", "link": "https://stackoverflow.com/users/3791794/simba"}, "is_accepted": false, "score": 3, "last_activity_date": 1490204598, "last_edit_date": 1490204598, "creation_date": 1490203389, "answer_id": 42958645, "question_id": 42958565, "link": "https://stackoverflow.com/questions/42958565/compiling-my-simple-c-code/42958645#42958645", "title": "compiling my simple C code", "body": "<p>This is a logic error in your code, which means your code is doing exactly what you told it to, but it's not what you had in mind in your head.</p>\n\n<p>The problem is this statement</p>\n\n<pre><code>for(i= 0; i==counter; i++){\n    printf(\"%d\", allDaPrimes[i]);\n}\n</code></pre>\n\n<p>It starts with i=0 then runs while i==counter, which is probably not what you had in mind. You probably meant: <code>i&lt;counter</code></p>\n"}, {"comments": [{"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490206444, "post_id": 42959582, "comment_id": 73013584, "body": "Good work man! In addition, was also true what stated in the other answer."}, {"owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 0, "creation_date": 1490206583, "post_id": 42959582, "comment_id": 73013695, "body": "just turned all my &quot;i&quot; into &quot;i, j, k ...etc&quot; and it works!!!!! thanks so much Chris!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "edited": false, "score": 0, "creation_date": 1490261026, "post_id": 42959582, "comment_id": 73036015, "body": "@PeterLouis whilst that undoubtedly &quot;works&quot;, the correct way would be to put <code>int i;</code> at the top of the block they&#39;re used in. There&#39;s no problem with you re-using <code>i</code> in the second main loop as you&#39;re initialising it."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1490206227, "creation_date": 1490206227, "answer_id": 42959582, "question_id": 42958565, "link": "https://stackoverflow.com/questions/42958565/compiling-my-simple-c-code/42959582#42959582", "title": "compiling my simple C code", "body": "<p>All your variables are declared globally rather than locally in the functions where they are used. This means that you're getting conflicts between the different functions.</p>\n\n<p>Take <code>i</code> for example. In the loop in <code>main</code>, you start off with it set to 2. But <code>isPrime()</code> changes it to be <code>n+1</code> because that is the last value it'll be after the loop in there finishes. But you call that twice so <code>i</code> ends up being <code>n+2</code>, so the main loop only runs once. And if you end up with any values in the array, it'll be <code>n+2</code> if <code>n+1</code> was a prime.</p>\n"}], "owner": {"reputation": 95, "user_id": 7752748, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155061722446322/picture?type=large", "display_name": "Peter Louis", "link": "https://stackoverflow.com/users/7752748/peter-louis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 42959582, "answer_count": 2, "score": 0, "last_activity_date": 1490206227, "creation_date": 1490203172, "question_id": 42958565, "link": "https://stackoverflow.com/questions/42958565/compiling-my-simple-c-code", "title": "compiling my simple C code", "body": "<p>Whenever I try to compile the following code, I can enter the initial value I ask for but then nothing happens. Also, there is no build error that being picked up so i don't know why this is happening. Please help and thank you in advance. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\nint n;\nint allDaPrimes[1000];\nint counter = 0;\nbool isPrime(int number);\nint i;\n\nint main()\n{\n    printf(\"Please enter a numeric value now: \");\n    scanf(\"%d\", &amp;n);\n    for (i = 2; i &lt;n; i++){\n        isPrime(i);\n        if(isPrime(i)) {\n            allDaPrimes[counter] = i;\n            counter++;\n        }\n        }\n\n\n    for(i= 0; i==counter; i++){\n        printf(\"%d\", allDaPrimes[i]);\n    }\n    return 0;\n\n   }\n\nbool isPrime(int number) {\n    for (i= 2; i &lt;= number; i++){\n        if(number % i == 0 &amp;&amp; number != i){\n            return false;\n        }\n\n    }\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c", "cmake", "gtk", "clion", "glade"], "answers": [{"tags": [], "owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "is_accepted": false, "score": 1, "last_activity_date": 1490209576, "creation_date": 1490209576, "answer_id": 42960591, "question_id": 42958143, "link": "https://stackoverflow.com/questions/42958143/configure-clion-to-handle-gtk-builder-signals/42960591#42960591", "title": "Configure CLion to handle gtk_builder signals", "body": "<pre><code>set(CMAKE_CXX_COMPILER \"pkg-config --cflags --libs gtk+-3.0 gmodule-2.0\")\n</code></pre>\n\n<p>This does not make sense: you've set pkg-config as your c++ compiler.</p>\n\n<p>Use the <a href=\"https://cmake.org/cmake/help/latest/module/FindPkgConfig.html\" rel=\"nofollow noreferrer\">pkg-config support</a> in CMake: </p>\n\n<pre><code>find_package(PkgConfig)\npkg_check_modules(GTK REQUIRED gtk+-3.0 gmodule-2.0)\n...\ntarget_link_libraries(UI ${GTK_LIBRARIES})\ntarget_include_directories(UI ${GTK_INCLUDE_DIRS})\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5254684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I-QoSdkRK2s/AAAAAAAAAAI/AAAAAAAAACQ/87LPZMHS_bw/photo.jpg?sz=128", "display_name": "wassimoo", "link": "https://stackoverflow.com/users/5254684/wassimoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490209576, "creation_date": 1490201990, "last_edit_date": 1490208157, "question_id": 42958143, "link": "https://stackoverflow.com/questions/42958143/configure-clion-to-handle-gtk-builder-signals", "title": "Configure CLion to handle gtk_builder signals", "body": "<p>I'm trying to connect a signal of a GTK widget made using Glade with the <a href=\"https://developer.gnome.org/gtk3/stable/GtkBuilder.html#gtk-builder-connect-signals\" rel=\"nofollow noreferrer\">gtk_builder_connect_signals ()</a>\n, As the the documentation says this function requires the program to be compiled with <code>-Wl,--export-dynamic</code> Cflags and linked against <code>gmodule-export-2.0</code>.<br><br>\ncompiling this code with the following command works successfully. </p>\n\n<pre><code>/*Command : gcc sample.c  -Wall -Wextra -Wl,--export-dynamic `pkg-config --cflags --libs gtk+-3.0 gmodule-export-2.0` -o sample */\n#include &lt;gtk/gtk.h&gt;\n\nvoid add_etdnts(GtkWidget *widget,gpointer data){\n   g_print(\"function succefully called\");\n}\n\nint main(int argc, char *argv[]){\n GtkBuilder *builder;\n\n GtkWidget *window;\n GError *error = NULL;\n\n gtk_init(&amp;argc,&amp;argv);\n\n builder = gtk_builder_new();\n\n if(! gtk_builder_add_from_file(builder,\"style.glade\",&amp;error)){\n    g_warning(\"%s\",error-&gt;message);\n    g_free(error);\n    return  1;\n }\n window = GTK_WIDGET(gtk_builder_get_object(builder,\"window\"));\n gtk_builder_connect_signals(builder,NULL);\n\n g_object_unref( G_OBJECT( builder ) );\n\n gtk_widget_show( window );\n\n //Start main loop\n gtk_main();\n return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>But for some reason i can't compile it under the CLion IDE(LINUX) even after adding the following lines to \"CMakeLists.txt\"</p>\n</blockquote>\n\n<pre><code>cmake_minimum_required(VERSION 3.6)\nproject(UI)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -std=c++11\")\nfind_package(GTK 3 REQUIRED gtk)\n\nif(GTK3_FOUND)\n include_directories(${GTK3_INCLUDE_DIRS})\n set(SOURCE_FILES main.c main.h )\n add_executable(UI ${SOURCE_FILES})\n target_link_libraries(UI ${GTK3_LIBRARIES})\n\n    ############# something is wrong here ##############\n set(CMAKE_CXX_COMPILER \"pkg-config --cflags --libs gtk+-3.0 gmodule-2.0\")\n set(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} pkg-config --libs gtk+-3.0 gmodule-2.0\")\nendif()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xAZI9.png\" rel=\"nofollow noreferrer\">Errors interpreted on building</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490205831, "post_id": 42958026, "comment_id": 73013186, "body": "<code>double r = pow((3&#47;2), 2) * 0,0001)</code> does not compile."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1490201761, "post_id": 42958056, "comment_id": 73010625, "body": "Even if this answer is correct it deserves some explanations."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 5, "last_activity_date": 1490203391, "last_edit_date": 1490203391, "creation_date": 1490201653, "answer_id": 42958056, "question_id": 42958026, "link": "https://stackoverflow.com/questions/42958026/c-dont-get-the-right-result/42958056#42958056", "title": "C don&#39;t get the right result", "body": "<p>The problem is integer division, where the fractional part (remainder) is discarded<br>\nTry:</p>\n\n<pre><code>double r = pow((3.0/2.0), 2) * 0.0001;\n</code></pre>\n\n<p>The first argument of the <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_pow.htm\" rel=\"nofollow noreferrer\">pow()</a></em> expects a double.  Because the ratio: <code>3/2</code> uses integer values, the result passed to the argument is 1.  By changing to float values, the result of the division can retain the fractional part, and the result becomes 1.5, the form expected by the function.</p>\n"}, {"tags": [], "owner": {"reputation": 166606, "user_id": 3333, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/99660662e89949a4b53cd97bc199ead1?s=128&d=identicon&r=PG", "display_name": "Paul Tomblin", "link": "https://stackoverflow.com/users/3333/paul-tomblin"}, "is_accepted": false, "score": 5, "last_activity_date": 1490201754, "creation_date": 1490201754, "answer_id": 42958078, "question_id": 42958026, "link": "https://stackoverflow.com/questions/42958026/c-dont-get-the-right-result/42958078#42958078", "title": "C don&#39;t get the right result", "body": "<p><code>(3/2)</code> involves two integers, so it's integer division, with the result <code>1</code>. What you want is floating point (double) division, so coerce the division to use doubles by writing it as <code>(3.0/2.0)</code></p>\n"}], "owner": {"reputation": 50, "user_id": 7741701, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nU9qGN_PcbQ/AAAAAAAAAAI/AAAAAAAAABg/VG1ZdoMdQvQ/photo.jpg?sz=128", "display_name": "Cornel Josan", "link": "https://stackoverflow.com/users/7741701/cornel-josan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 42958056, "answer_count": 2, "score": 1, "last_activity_date": 1490215064, "creation_date": 1490201575, "last_edit_date": 1490215064, "question_id": 42958026, "link": "https://stackoverflow.com/questions/42958026/c-dont-get-the-right-result", "title": "C don&#39;t get the right result", "body": "<p>I need the result of this variable in a program, but I don't understand why I can't get the right result.</p>\n\n<pre><code>double r = pow((3/2), 2) * 0.0001;\nprintf(\"%f\", r);\n</code></pre>\n"}, {"tags": ["c", "macros", "preprocessor"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1490201724, "post_id": 42957837, "comment_id": 73010607, "body": "That is not valid C. How is the compiler supposed to know it is an address and which type the object has? The rest of your question is not clear. What doy you want to compare and why? It smells like an XY-problem."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490206134, "post_id": 42957837, "comment_id": 73013382, "body": "I fully agree with @Olaf. Additionally, all C compilers I&#39;ve used optimize a normal <code>if</code> statement away, if the expression has only literal constants (as it would if you were to compare the addresses of two memory mapped registers); and, since you are on a microcontroller, you definitely should have optimizations enabled anyway. In other words, there is no need to rely on the <i>preprocessor</i> for optimizing the related code; any half-decent C compiler can and will do it for you (if you use a normal C <code>if</code> statement)."}], "answers": [{"tags": [], "owner": {"reputation": 10963, "user_id": 306257, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/701752cfc3dd805d412884f38a464296?s=128&d=identicon&r=PG", "display_name": "Haldean Brown", "link": "https://stackoverflow.com/users/306257/haldean-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1490203570, "creation_date": 1490203570, "answer_id": 42958708, "question_id": 42957837, "link": "https://stackoverflow.com/questions/42957837/comparing-c-macros/42958708#42958708", "title": "Comparing C macros", "body": "<p>You can't compare strings in an <code>#if</code>, because:</p>\n\n<ul>\n<li>you can only use <code>#if</code> with constant expressions</li>\n<li>strings can only be compared using a loop or a function</li>\n<li>loops aren't constant expressions</li>\n<li>and:\n\n<blockquote>\n  <p>Constant expressions shall not contain assignment, increment, decrement, function-call,\n  or comma operators, except when they are contained within a subexpression that is not\n  evaluated. <em>(C11, 6.6P3)</em></p>\n</blockquote></li>\n</ul>\n\n<p>The best I can think of is to split up the addresses and the dereferencing into two different macros, like:</p>\n\n<pre><code>#define ADDR_A (18)\n#define ADDR_B (30)\n#define ADDR_C (18)\n#define GET_A (*ADDR_A)\n#define GET_B (*ADDR_B)\n#define GET_C (*ADDR_C)\n\n#if ADDR_A == ADDR_B\nreturn 1\n#else\nreturn 0\n#endif\n</code></pre>\n\n<p>Note that checking the equality of constants \"at runtime\" will be elided by pretty much any compiler worth its salt; in <a href=\"https://godbolt.org/g/2URAqH\" rel=\"nofollow noreferrer\">this example</a>, the compiler just generates the equivalent of <code>return 1</code> because it knows at compile-time that the condition will evaluate to false; counting cycles is a red herring here, because these comparisons will be elided.</p>\n\n<p>Also, for what it's worth, I'm not sure how you're using those macros (I can't construct an example in my head where they would be syntactically valid), but I have a feeling your code would be easier to understand if you just made your macros contain the addresses and you dereference those addresses inline in your code. Were I reading your code, I would much prefer:</p>\n\n<pre><code>#define ADDR_A (18)\n#define ADDR_B (30)\n#define ADDR_C (18)\n\nif (ADDR_A == ADDR_B)\n    return 1\nreturn 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 1, "last_activity_date": 1490203654, "creation_date": 1490203654, "answer_id": 42958729, "question_id": 42957837, "link": "https://stackoverflow.com/questions/42957837/comparing-c-macros/42958729#42958729", "title": "Comparing C macros", "body": "<p>How about putting only the addresses in the macros, and the type information separately?</p>\n\n<pre><code>#define ADDR_A (18)\n#define ADDR_B (30)\n#define ADDR_C (18)\n\nunsigned uint16_t *A = (uint16_t*)ADDR_A;\nunsigned uint16_t *B = (uint16_t*)ADDR_B;\nunsigned uint16_t *C = (uint16_t*)ADDR_C;\n</code></pre>\n\n<p>Then you can use your tests.</p>\n\n<p>Alternatively, skip the preprocessor, and just do it in C:</p>\n\n<pre><code>unsigned uint16_t *const A = (uint16_t*)18;\nunsigned uint16_t *const B = (uint16_t*)30;\nunsigned uint16_t *const C = (uint16_t*)18;\n\nint f()\n{\n    if (A == C)\n        return 1;\n    else\n        return 0;\n}\n</code></pre>\n\n<p>Unless you have an <em>extremely</em> low-quality compiler, you can expect it to recognise <code>A==C</code> as a constant expression and simplify the code accordingly.</p>\n"}], "owner": {"reputation": 2077, "user_id": 1071669, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/701fc95be1eaf05adaccd367ba33ec9b?s=128&d=identicon&r=PG", "display_name": "dargaud", "link": "https://stackoverflow.com/users/1071669/dargaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3087, "favorite_count": 0, "accepted_answer_id": 42958708, "answer_count": 2, "score": -3, "last_activity_date": 1490203654, "creation_date": 1490201001, "question_id": 42957837, "link": "https://stackoverflow.com/questions/42957837/comparing-c-macros", "title": "Comparing C macros", "body": "<p>I have addressing macros (it's on a microcontroller, so accessing physical address is OK) that break down to this (after a long sequence of conditional defines, attributes, etc):</p>\n\n<pre><code>#define ADDR_A (*18)\n#define ADDR_B (*30)\n#define ADDR_C (*18)\n</code></pre>\n\n<p>I would like to compare them so I can optimize the compilation:</p>\n\n<pre><code>#if ADDR_A==ADDR_C\n    return 1;\n#else\n    return 0;\n#endif\n</code></pre>\n\n<p>But I get \"error: operator '*' has no left operand\" which makes sense. Is it possible to compare the DEFINITIONS of macros. I have a hunch I could convert them to string somehow to compare, but I haven't found a way (like with the # for a macro argument).</p>\n\n<p>And no, I'm not looking to do this at runtime as I'm counting the cycles.</p>\n"}, {"tags": ["c", "overflow"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490201328, "post_id": 42957736, "comment_id": 73010307, "body": "By making it <code>signed</code> type instead of <code>unsigned</code>. You cannot store the values <code>0x00000000</code> - <code>0xFFFFFFFF</code> <i>and</i> <code>-1</code> without going to 64-bit."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1490203707, "post_id": 42957736, "comment_id": 73011865, "body": "...but beware, an overflow on <code>signed</code> is invoking undefined behavior."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490205695, "post_id": 42957736, "comment_id": 73013103, "body": "Use <code>long long result = var_uint32_bit - 1LL;</code>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1490205776, "post_id": 42957736, "comment_id": 73013153, "body": "@chux-- would it be better to use <code>int64_t result</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1490206005, "post_id": 42957736, "comment_id": 73013305, "body": "@DavidBowling True, either <code>long long</code> or <code>int64_t</code> would work when <code>int64_t</code> exists.  6.0001 vs 1/2 dozen of the other. I found it is less complicated to use <code>long long</code> throughout, else the <code>1LL</code> should be amended too."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1490206285, "post_id": 42957736, "comment_id": 73013480, "body": "@chux-- I did not realize that <code>long long</code> was guaranteed to be at least 64 bits wide; but I just checked the Standard, and there it is! So, at least 6.0001 vs 1/2 dozen...."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1490209551, "post_id": 42957736, "comment_id": 73015392, "body": "Maybe it should be <code>int_least64_t</code> or <code>int_fast64_t</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1490210738, "last_edit_date": 1490210738, "creation_date": 1490209849, "answer_id": 42960672, "question_id": 42957736, "link": "https://stackoverflow.com/questions/42957736/convert-overflow-to-negative/42960672#42960672", "title": "Convert overflow to negative", "body": "<blockquote>\n  <p>Is there an easy way to replace an overflow at counting down with a negative value?</p>\n</blockquote>\n\n<p>Use wider math is a direct approach.</p>\n\n<p>\"example a 32 bit variable. Possible values are 0x00000000 - 0xFFFFFFFF\" implies that the variable is some <em>unsigned type</em> like <code>uint32_t</code>.</p>\n\n<hr>\n\n<p>Subtracting 1 from <code>(uint32_t)0</code> is <code>(uint32_t)0xFFFFFFFF</code> as OP reported.  So instead use a wider <em>signed</em> math like <code>long long</code> (which is at least 64-bit) or <code>int64_t</code></p>\n\n<pre><code>// Insure subtraction is done using `long long` math with 1LL\nlong long result = var_uint32_bit - 1LL;\n</code></pre>\n\n<hr>\n\n<p>Alternatively code could stick with a corresponding same width <em>signed</em> type. </p>\n\n<pre><code>// Only non-implementation defined for values 0...0x7FFFFFFF\nint32_t result = (int32_t)var_uint32_bit - 1;\n</code></pre>\n\n<p>The <code>(int32_t)var_uint32_bit</code> has a limitation concerning conversion of an <em>unsigned</em> type to a <em>signed</em> integer type.</p>\n\n<blockquote>\n  <p>Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised. C11dr \u00a76.3.1.3 3</p>\n</blockquote>\n"}], "owner": {"reputation": 305, "user_id": 7190935, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-TYkp65FCPW4/AAAAAAAAAAI/AAAAAAAASR4/WSDOr7mQyxQ/photo.jpg?sz=128", "display_name": "Gabriel Winkler", "link": "https://stackoverflow.com/users/7190935/gabriel-winkler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490214911, "creation_date": 1490200707, "last_edit_date": 1490214911, "question_id": 42957736, "link": "https://stackoverflow.com/questions/42957736/convert-overflow-to-negative", "title": "Convert overflow to negative", "body": "<p>Is there an easy way to replace an overflow at counting down with a negative value?</p>\n\n<p>For example a 32 bit variable. Possible values are 0x00000000 - 0xFFFFFFFF. When I subtract 1 from the lowest possible value (0x00000000 - 1), the result is 0xFFFFFFFF. How can the operation be changed to give a result of -1?</p>\n"}, {"tags": ["c", "error-handling", "compiler-errors", "syntax-error", "runtime-error"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1490200662, "post_id": 42957661, "comment_id": 73009841, "body": "I think the error comes from the next line as it&#39;s got too many parentheses, and could&#39;ve missed one easily."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1490200816, "post_id": 42957661, "comment_id": 73009939, "body": "There is no problem I can see in this code. Are you sure it was saved before compiled? The other thing is to check whether your compiler is supporting the binary literals (it is not obvious)"}, {"owner": {"reputation": 35869, "user_id": 7512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d064a7aca29011d3246302b27c41f4d9?s=128&d=identicon&r=PG", "display_name": "slim", "link": "https://stackoverflow.com/users/7512/slim"}, "edited": false, "score": 1, "creation_date": 1490200865, "post_id": 42957661, "comment_id": 73009973, "body": "That line is missing a closing semicolon. (Edit - no it&#39;s not but the lack of <code>{}</code> confused me. Don&#39;t omit <code>{}</code>.)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490200923, "post_id": 42957661, "comment_id": 73010014, "body": "@StoryTeller Are you sure? I can&#39;t see it."}, {"owner": {"reputation": 327, "user_id": 2706651, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/11b4f6c57606b38a29131ddbffcdf0fa?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Nobody", "link": "https://stackoverflow.com/users/2706651/mr-nobody"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1490200924, "post_id": 42957661, "comment_id": 73010016, "body": "Thank you @ForceBru. If the error comes from the next line, why the IDE point to line 618?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 35869, "user_id": 7512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d064a7aca29011d3246302b27c41f4d9?s=128&d=identicon&r=PG", "display_name": "slim", "link": "https://stackoverflow.com/users/7512/slim"}, "edited": false, "score": 0, "creation_date": 1490200954, "post_id": 42957661, "comment_id": 73010045, "body": "@slim which line? It&#39;s <code>if</code> condition"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1490201046, "post_id": 42957661, "comment_id": 73010113, "body": "Cannot reproduce."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1490201088, "post_id": 42957661, "comment_id": 73010137, "body": "Again, are you sure your compiler supports binary literals?"}, {"owner": {"reputation": 327, "user_id": 2706651, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/11b4f6c57606b38a29131ddbffcdf0fa?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Nobody", "link": "https://stackoverflow.com/users/2706651/mr-nobody"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490201307, "post_id": 42957661, "comment_id": 73010290, "body": "Thank you @EugeneSh. I examined the code with <code>0x80</code> rather than <code>0b10000000</code> and worked! Why compiler supports hex literals and not binary literals? It&#39;s very strange. \u0650Again thanks for your help."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1490201440, "post_id": 42957661, "comment_id": 73010394, "body": "Nothing strange. C standard is defining hexadecimal constant notation, but the binary is not there and therefore just an extension of some compilers. (just for reference: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.1\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.4.4.1</a>)"}], "owner": {"reputation": 327, "user_id": 2706651, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/11b4f6c57606b38a29131ddbffcdf0fa?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Nobody", "link": "https://stackoverflow.com/users/2706651/mr-nobody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4243, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490216330, "creation_date": 1490200514, "last_edit_date": 1490216330, "question_id": 42957661, "link": "https://stackoverflow.com/questions/42957661/c-error-expected-a", "title": "C - Error: expected a &quot;)&quot;", "body": "<p>I have written code in C, but it gives a particularly strange error message:</p>\n\n<p><code>lcd.c(618): error:  #18: expected a \")\" if(character_segment_data &amp; (0b10000000&gt;&gt;width_counter))</code></p>\n\n<p>Code:</p>\n\n<pre><code>void lcd_putchar(char character,int forground_color,char background_color_activation,int background_color)\n{\nint temporary_color;\nunsigned char width_counter,length_counter;\nchar character_segment_data;\nfor(length_counter=0;length_counter&lt;16;length_counter++)\n{\n    character_segment_data=font8x16[character-0x20][length_counter];\n    for(width_counter=0;width_counter&lt;8;width_counter++)\n    {\n        if(character_segment_data &amp; (0b10000000&gt;&gt;width_counter))//line 618-origion of error\n        lcd_write_pixel(((int)x_text*8)+width_counter,((int)y_text*16)+length_counter,forground_color);\n        else\n        {\n            if(background_color_activation)\n            {\n                temporary_color=lcd_read_rdr();\n                temporary_color=lcd_read_rdr();\n                lcd_write_wdr(temporary_color);\n            }\n            else\n            lcd_write_pixel(((int)x_text*8)+width_counter,((int)y_text*16)+length_counter,background_color);\n        }\n    }\n}\n\nif(++x_text&gt;40)\n{\n    x_text=0;\n    if(++y_text&gt;15) y_text=0;\n}\n}\n</code></pre>\n\n<p>This line <code>if(character_segment_data &amp; (0b10000000&gt;&gt;width_counter))</code> generated the error. What is the origin of the error and how can I resolve it?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1490200482, "post_id": 42957615, "comment_id": 73009697, "body": "Because of the lack of parentheses. The expanded code is <code>i % sizeof(int) * CHAR_BIT</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490200548, "post_id": 42957615, "comment_id": 73009745, "body": "It should be <code>#define BITS_IN_INT (sizeof(int) * CHAR_BIT)</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1490200616, "post_id": 42957615, "comment_id": 73009804, "body": "The preprocessor performs textual replacement of the macros. Remove the  <code>#define BITS_IN_INT</code>, replace <code>BITS_IN_INT</code> by <code>sizeof(int) * CHAR_BIT</code> and read your code again and it should be obvious."}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1490200757, "creation_date": 1490200757, "answer_id": 42957745, "question_id": 42957615, "link": "https://stackoverflow.com/questions/42957615/unexpected-result-of-size-t-modulo-long-unsigned-int/42957745#42957745", "title": "Unexpected result of size_t modulo long unsigned int", "body": "<p>After macro expansion, the last printf looks like:</p>\n\n<pre><code>printf(\"%lu\\n\", i % sizeof(int) * 8);\n</code></pre>\n\n<p>So, the expression (in printf) is evaluated as if:</p>\n\n<pre><code>(i % sizeof(int)) * 8\n</code></pre>\n\n<p>If <code>sizeof(int)</code> is 4 (which seems to the case on your platform) then <code>i % sizeof(int)</code> yields 0; <code>0 * 8</code> is <code>0</code>.</p>\n\n<p>Avoid macros if you can. If not, always use parentheses around your macros:</p>\n\n<pre><code>#define BITS_IN_INT (sizeof(int) * CHAR_BIT)\n</code></pre>\n\n<p>NB: <code>%zu</code> is the correct format specifier for printing <code>size_t</code> values.</p>\n"}], "owner": {"reputation": 15, "user_id": 7314242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59203222e8eb7bb16ac0ea56df2e982f?s=128&d=identicon&r=PG&f=1", "display_name": "Ruben23630", "link": "https://stackoverflow.com/users/7314242/ruben23630"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 42957745, "answer_count": 1, "score": 0, "last_activity_date": 1490200757, "creation_date": 1490200385, "last_edit_date": 1490200511, "question_id": 42957615, "link": "https://stackoverflow.com/questions/42957615/unexpected-result-of-size-t-modulo-long-unsigned-int", "title": "Unexpected result of size_t modulo long unsigned int", "body": "<p>In the following code, <code>BITS_IN_INT</code> is an <code>long unsigned int</code> with value <code>32</code>. Why does the modulo operation return the value <code>0</code> instead of the expected <code>20</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n#define BITS_IN_INT sizeof(int) * CHAR_BIT\n\nint main()\n{\n    size_t i = 20;\n\n    printf(\"%zu\\n\", i);\n    printf(\"%lu\\n\", BITS_IN_INT);\n    printf(\"%lu\\n\", i % BITS_IN_INT);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "header", "include"], "comments": [{"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1490200979, "post_id": 42957487, "comment_id": 73010068, "body": "The file NGSC.h you have pasted here has only 98 lines I cannot see line 169 in file NGSC.h. I compiled a sample code using your header files I didn&#39;t get any error."}, {"owner": {"reputation": 203, "user_id": 5346539, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c540da30dff08bf4f137dc5ce45e5583?s=128&d=identicon&r=PG&f=1", "display_name": "thoraz", "link": "https://stackoverflow.com/users/5346539/thoraz"}, "reply_to_user": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1490202014, "post_id": 42957487, "comment_id": 73010781, "body": "@GauravPathak I have deleted some lines to compact the list. The line 169 is where the function prototype <code>void NGSCSetTestMode(uint8_t, ADSConstant, ADSConstant);</code> is defined."}], "owner": {"reputation": 203, "user_id": 5346539, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c540da30dff08bf4f137dc5ce45e5583?s=128&d=identicon&r=PG&f=1", "display_name": "thoraz", "link": "https://stackoverflow.com/users/5346539/thoraz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490200025, "creation_date": 1490200025, "question_id": 42957487, "link": "https://stackoverflow.com/questions/42957487/c-header-inclusion-issue-in-mplabx", "title": "C Header inclusion issue in MPLABX", "body": "<p>I have a problem with the inclusion of my library in a MPLABX C project. This library uses another library.</p>\n\n<p>When I compile the project, turns up an error:</p>\n\n<pre><code>../src/NGSC.h:169:31: error: unknown type name 'ADSConstant'\n void NGSCSetTestMode(uint8_t, ADSConstant, ADSConstant);\n</code></pre>\n\n<p>Here is my <code>NGSC.h</code></p>\n\n<pre><code>#ifndef NGSC_H    /* Guard against multiple inclusion */\n#define NGSC_H\n\n#include \"ads1299.h\"\n\n/*******************************************************************************\n * TYPES DEFINITION\n ******************************************************************************/\ntypedef enum {\n    NGSCCheckHeadingState,\n    NGSCCheckStartOfPacketState,\n    NGSCDecodeCommandState,\n    NGSCChannelMaskState,\n    NGSCCheckEndOfPacketState\n} NGSCCommandDecoderState;\n\ntypedef struct {\n    uint8_t command;\n    uint8_t channelMask;\n    bool valid;\n} NGSCReceivedCommand;\n\ntypedef struct {\n    uint8_t data[PACKET_MAX_DATA_LENGTH];\n    uint8_t *header;\n    double *rawData;\n    int size;\n    bool valid;\n} NGSCTransmittingDataPacket;\n\n//------- User Commands --------\ntypedef enum { \n    NGSCCommandCheckSPIComunication     = 0x00,\n    NGSCCommandStartConversions         = 0x10,\n    NGSCCommandStopConversions          = 0x20,\n    NGSCCommandSetChannelOff            = 0x30,\n    NGSCCommandSetNormalMode            = 0x40,\n    NGSCCommandSetTestModeA1F1          = 0x51,\n    NGSCCommandSetTestModeA1F2          = 0x52,\n    NGSCCommandSetTestModeA2F1          = 0x53,\n    NGSCCommandSetTestModeA2F2          = 0x54,\n    NGSCCommandSetTestModeA1DC          = 0x55,\n    NGSCCommandSetTestModeA2DC          = 0x56,\n    NGSCCommandSetMVDDMode              = 0x57,\n    NGSCCommandSetShortMode             = 0x60,\n    NGSCCommandSetBiasMode              = 0x70,\n    NGSCCommandSetDataRate250SPS        = 0x81,\n    NGSCCommandSetDataRate500SPS        = 0x82,\n    NGSCCommandSetDataRate1KSPS         = 0x83,\n    NGSCCommandSetDataRate2KSPS         = 0x84,\n    NGSCCommandSetDataRate4KSPS         = 0x85,\n    NGSCCommandSetDataRate8KSPS         = 0x86,\n    NGSCCommandSetDataRate16KSPS        = 0x87,\n    NGSCCommandSetGain1                 = 0x91,\n    NGSCCommandSetGain2                 = 0x92,\n    NGSCCommandSetGain4                 = 0x93,\n    NGSCCommandSetGain6                 = 0x94,\n    NGSCCommandSetGain8                 = 0x95,\n    NGSCCommandSetGain12                = 0x96,\n    NGSCCommandSetGain24                = 0x97,\n    NGSCCommandSetSRB1On                = 0xA0,\n    NGSCCommandSetSRB1Off               = 0xA1,\n    NGSCCommandFilterNotch50On          = 0xB0,\n    NGSCCommandFilterNotch50Off         = 0xB1,\n    NGSCCommandFilterCombNotch50On      = 0xB2,\n    NGSCCommandFilterCombNotch50Off     = 0xB3,\n    NGSCCommandFilterNotch0On           = 0xB4,\n    NGSCCommandFilterNotch0Off          = 0xB5,\n    NGSCCommandPrintSettings            = 0xC0,\n    NGSCCommandReset                    = 0xD0\n} NGSCCommand;\n\n/*******************************************************************************\n * FUNCTIONS PROTOTYPE DECLARATION\n ******************************************************************************/\n\nvoid NGSCInit(void);\nvoid NGSCSetup(void);\nvoid NGSCEnvironmentSetup(void);\nuint8_t NGSCGetId(void);\nvoid NGSCReset(void);\nvoid NGSCReadADSData(void);\nvoid NGSCDeactivateChannel(uint8_t);\nvoid NGSCSetNormalMode(uint8_t);\nvoid NGSCSetTestMode(uint8_t, ADSConstant, ADSConstant);\nvoid NGSCSetMVDDtMode(uint8_t);\nvoid NGSCSetShortMode(uint8_t);\nvoid NGSCSetBiasMode(uint8_t);\nvoid NGSCSetDataRate(ADSConstant);\nvoid NGSCSetGain(uint8_t, ADSConstant);\nvoid NGSCSetSRB1(ADSConstant);\nvoid NGSCPrintSettings(void);\nvoid NGSCCommandDecoder(uint8_t);\nvoid NGSCCommandHandler(void);\nvoid NGSCProcessData(void);\nvoid NGSCGetDataPacket(NGSCTransmittingDataPacket *);\n\n#endif /* NGSC_H */\n</code></pre>\n\n<p>and here the <code>ads1299.h</code></p>\n\n<pre><code>#ifndef __ADS1299_H__\n#define __ADS1299_H__\n\n#include &lt;xc.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"app.h\"\n\n/** SPI Commands  *************************************************************/ \ntypedef enum {\n    //-------------------------- System Commands -------------------------------\n    ADSCommandWAKEUP    = 0x02,\n    ADSCommandSTANDBY   = 0x04,\n    ADSCommandRESET     = 0x06,\n    ADSCommandSTART     = 0x08,\n    ADSCommandSTOP      = 0x0A,\n    //------------------------- Read Mode Commands -----------------------------\n    ADSCommandRDATAC    = 0x10,\n    ADSCommandSDATAC    = 0x11,\n    ADSCommandRDATA     = 0x12,\n    //-------------------- Register Read/Write Commands ------------------------\n    ADSCommandRREG      = 0x20,     // 0b001rrrrr\n    ADSCommandWREG      = 0x40      // 0b010rrrrr\n} ADSCommand;\n\n/** Register Addresses ********************************************************/\ntypedef enum {\n    ADSRegisterID           = 0x00,\n    ADSRegisterCONFIG1      = 0x01,\n    ADSRegisterCONFIG2      = 0x02,\n    ADSRegisterCONFIG3      = 0x03,\n    ADSRegisterLOFF         = 0x04,\n    ADSRegisterCH1SET       = 0x05,\n    ADSRegisterCH2SET       = 0x06,\n    ADSRegisterCH3SET       = 0x07,\n    ADSRegisterCH4SET       = 0x08,\n    ADSRegisterCH5SET       = 0x09,\n    ADSRegisterCH6SET       = 0x0A,\n    ADSRegisterCH7SET       = 0x0B,\n    ADSRegisterCH8SET       = 0x0C,\n    ADSRegisterBIAS_SENSP   = 0x0D,\n    ADSRegisterBIAS_SENSN   = 0x0E,\n    ADSRegisterLOFF_SENSP   = 0x0F,\n    ADSRegisterLOFF_SENSN   = 0x10,\n    ADSRegisterLOFF_FLIP    = 0x11,\n    ADSRegisterLOFF_STATP   = 0x12,\n    ADSRegisterLOFF_STATN   = 0x13,\n    ADSRegisterGPIO         = 0x14,\n    ADSRegisterMISC1        = 0x15,\n    ADSRegisterMISC2        = 0x16,     // Not used\n    ADSRegisterCONFIG4      = 0x17\n} ADSRegister;\n\n/** ADS1299 Register Constants ************************************************/\ntypedef enum {\n    //---------------------------- CONFIG1 -------------------------------------\n    ADSConstantDaisyOn                      = 0x90,     // (default)\n    ADSConstantDaisyOff                     = 0xD0,\n    ADSConstantClockOutOff                  = 0x90,     // (default)\n    ADSConstantClockOutOn                   = 0xB0,\n    ADSConstantDataRate16KSPS               = 0x90,\n    ADSConstantDataRate8KSPS                = 0x91,\n    ADSConstantDataRate4KSPS                = 0x92,\n    ADSConstantDataRate2KSPS                = 0x93,\n    ADSConstantDataRate1KSPS                = 0x94,\n    ADSConstantDataRate500SPS               = 0x95,\n    ADSConstantDataRate250SPS               = 0x96,     // (default)\n    //---------------------------- CONFIG2 -------------------------------------\n    ADSConstantTestSignalExternal           = 0xC0,     // Test signals are driven externally (default)\n    ADSConstantTestSignalInternal           = 0xD0,     // Test signals are generated internally\n    ADSConstantCalibrationAmplitudeSmall    = 0x00,     // Calibration signal amplitude: 1 * (VREFP - VREFN) / 2.4 mV (default)\n    ADSConstantCalibrationAmplitudeLarge    = 0x04,     // Calibration signal amplitude: 2 * (VREFP - VREFN) / 2.4 mV\n    ADSConstantCalibrationFrequencyLow      = 0x00,     // Calibration signal frequency: Pulsed at fCLK / 2^21 (default)\n    ADSConstantCalibrationFrequencyHigh     = 0x01,     // Calibration signal frequency: Pulsed at fCLK / 2^20\n    ADSConstantCalibrationFrequencyDC       = 0x03,     // Calibration signal frequency: DC\n    //---------------------------- CONFIG3 -------------------------------------\n    ADSConstantReferenceBufferOff           = 0x60,     // Power-down internal reference buffer (default)\n    ADSConstantReferenceBufferOn            = 0xE0,     // Internal reference buffer enabled\n    ADSConstantBiasMeasurementDisabled      = 0x60,     // BIASIN signal disconnected (default)\n    ADSConstantBiasMeasurementEnabled       = 0x70,     // BIASIN signal is routed to the channel that has the MUX_Setting 010 (VREF)\n    ADSConstantBiasReferenceExternal        = 0x60,     // BIASREF signal fed externally (default)\n    ADSConstantBiasReferenceInternal        = 0x68,     // BIASREF signal (AVDD - AVSS) / 2 generated internally\n    ADSConstantBiasBufferOff                = 0x60,     // BIAS buffer is powered down (default)\n    ADSConstantBiasBufferOn                 = 0x64,     // BIAS buffer is enabled\n    ADSConstantBiasLeadOffSenseDisabled     = 0x60,     // BIAS sense is disabled (default)\n    ADSConstantBiasLeadOffSenseEnabled      = 0x62,     // BIAS sense is enabled\n    //----------------------------- LOFF ---------------------------------------\n    ADSConstantLeadOffComparatorThreshold95 = 0x00,     // Positive side: 95%, negative side: 5% (default)\n    ADSConstantLeadOffComparatorThreshold92 = 0x20,     // Positive side: 92.5%, negative side: 7.5%\n    ADSConstantLeadOffComparatorThreshold90 = 0x40,     // Positive side: 90%, negative side: 10%\n    ADSConstantLeadOffComparatorThreshold87 = 0x60,     // Positive side: 87.5%, negative side: 12.5%\n    ADSConstantLeadOffComparatorThreshold85 = 0x80,     // Positive side: 85%, negative side: 15%\n    ADSConstantLeadOffComparatorThreshold80 = 0xA0,     // Positive side: 80%, negative side: 20%\n    ADSConstantLeadOffComparatorThreshold75 = 0xC0,     // Positive side: 75%, negative side: 25%\n    ADSConstantLeadOffComparatorThreshold70 = 0xE0,     // Positive side: 70%, negative side: 30%\n    ADSConstantLeadOffCurrent6nA            = 0x00,     // Lead off current: 6 nA (default)\n    ADSConstantLeadOffCurrent24nA           = 0x02,     // Lead off current: 24 nA\n    ADSConstantLeadOffCurrent6uA            = 0x04,     // Lead off current: 6 uA\n    ADSConstantLeadOffCurrent24uA           = 0x06,     // Lead off current: 24 uA\n    ADSConstantLeadOffFrequencyDC           = 0x00,     // DC lead-off detection (default)\n    ADSConstantLeadOffFrequency7Hz8         = 0x01,     // AC lead-off detection at 7.8 Hz (SYS_CLK / 2^18)\n    ADSConstantLeadOffFrequency31Hz2        = 0x02,     // AC lead-off detection at 31.2 Hz (SYS_CLK / 2^16)\n    ADSConstantLeadOffFrequencyDataRate4    = 0x03,     // AC lead-off detection at fDR / 4\n    //------------------------------ CHnSET ------------------------------------\n    ADSConstantChannelOn                    = 0x00,     // Normal operation (default)\n    ADSConstantChannelOff                   = 0x80,     // Channel power-down\n    ADSConstantGain1                        = 0x00, \n    ADSConstantGain2                        = 0x10, \n    ADSConstantGain4                        = 0x20, \n    ADSConstantGain6                        = 0x30, \n    ADSConstantGain8                        = 0x40, \n    ADSConstantGain12                       = 0x50, \n    ADSConstantGain24                       = 0x60,     // (default)\n    ADSConstantSRB2Off                      = 0x00,     // (default)\n    ADSConstantSRB2On                       = 0x08, \n    ADSConstantMuxNormal                    = 0x00,     // Normal electrode input (default)\n    ADSConstantMuxShortedInputs             = 0x01,     // Input shorted (for offset or noise measurements)\n    ADSConstantMuxBiasMeasurement           = 0x02,     // Used in conjunction with BIAS_MEAS bit (BiasMeasurementEnabled) in CONFIG3 for BIAS measurements\n    ADSConstantMuxVDDMeasurement            = 0x03,     // MVDD for supply measurement  // For channels 1,2,5,6,7,8 (MVDDP - MVDDN) = [0.5 * (AVDD + AVSS)]\n                                                                                        // For channels 3,4 (MVDDP - MVDDN) = DVDD / 4\n                                                                                        // Note: set gain = 1 while mesuring supplies to avoid saturation\n    ADSConstantMuxTemperatureMeasurement    = 0x04,     // Temperature sensor\n    ADSConstantMuxTestSignal                = 0x05,     // Test signal\n    ADSConstantMuxBiasOnPostiveElectrode    = 0x06,     // BIAS_DRP (positive electrode is the driver)\n    ADSConstantMuxBiasOnNegativeElectrode   = 0x07,     // BIAS_DRN (negative electrode is the driver)\n    //----------------------- BIAS/LOFF_SENSP/SENSN ----------------------------\n    ADSConstantSenseNone                    = 0x00,\n    ADSConstantSenseAll                     = 0xFF,\n    ADSConstantSense1                       = 0x01,\n    ADSConstantSense2                       = 0x02,\n    ADSConstantSense3                       = 0x04,\n    ADSConstantSense4                       = 0x08,\n    ADSConstantSense5                       = 0x10,\n    ADSConstantSense6                       = 0x20,\n    ADSConstantSense7                       = 0x40,\n    ADSConstantSense8                       = 0x80,\n    //----------------------------- LOFF_FLIP ----------------------------------\n    ADSConstantFlipNone                     = 0x00,\n    ADSConstantFlipAll                      = 0xFF,\n    ADSConstantFlip1                        = 0x01,\n    ADSConstantFlip2                        = 0x02,\n    ADSConstantFlip3                        = 0x04,\n    ADSConstantFlip4                        = 0x08,\n    ADSConstantFlip5                        = 0x10,\n    ADSConstantFlip6                        = 0x20,\n    ADSConstantFlip7                        = 0x40,\n    ADSConstantFlip8                        = 0x80,\n    //------------------------------- MISC1 ------------------------------------\n    ADSConstantSRB1Off                      = 0x00,     // (default)\n    ADSConstantSRB1On                       = 0x20,\n    //------------------------------ CONFIG4 -----------------------------------\n    ADSConstantContinuousConversionMode     = 0x00,     // Continuous conversion mode (default)\n    ADSConstantSingleShotMode               = 0x08,     // Single-shot mode\n    ADSConstantLeadOffComparatorOff         = 0x00,     // Lead-off comparators disabled (default)\n    ADSConstantLeadOffComparatorOn          = 0x02      // Lead-off comparators enabled\n} ADSConstant;\n\ntypedef enum {\n    ADSMaskId   = 0x0F,\n    ADSMaskGain = 0x70\n} ADSMask;\n\n/** Function Prototypes *******************************************************/\nvoid ADS_CHIP_SELECT_Assert(void);\nvoid ADS_CHIP_SELECT_Deassert(void);\nuint8_t TransferByteOverSPI2(uint8_t);\nvoid ADSInit(void);\nvoid ADSWakeup(void);\nvoid ADSStandby(void);\nvoid ADSReset(void);\nvoid ADSStartConversions(void);\nvoid ADSStopConversions(void);\nvoid ADSStartReadDataContinuousMode(void);\nvoid ADSStopReadDataContinuousMode(void);\nvoid ADSReadData(void);\nuint8_t ADSReadRegister(ADSRegister);\nvoid ADSWriteRegister(ADSRegister, uint8_t);\nvoid ADSPrintAllRegisters(void);\n\n#endif  /* __ADS1299_H__ */\n</code></pre>\n\n<p>It seems that the file <code>NGSC.h</code> doesn't see the <code>ADSConstant</code> type definition in the <code>ads1299.h</code> file, even if I include the header.</p>\n\n<p>Is it normal? Why this error?</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490199826, "post_id": 42957370, "comment_id": 73009259, "body": "Freeing a pointer releases the memory to which it points; it does nothing to the pointer value itself."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1490199962, "post_id": 42957370, "comment_id": 73009341, "body": "I suggest maintaining a counter that indicates how many of the leading elements of your array contain valid values.  As this to check entry validity <i>by index</i>, rather than assuming that non-NULL pointer values are valid."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1490199992, "post_id": 42957370, "comment_id": 73009365, "body": "Alternatively, just explicitly set each pointers to NULL after freeing it."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1490200078, "post_id": 42957370, "comment_id": 73009423, "body": "And you should set (and control) a limit to avoid an overflow on <code>symbol_Table</code>."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490200263, "post_id": 42957370, "comment_id": 73009551, "body": "I see what you mean, using a known index seems like a better idea."}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "edited": false, "score": 0, "creation_date": 1490200597, "post_id": 42957370, "comment_id": 73009787, "body": "With an index though, you won&#39;t be clearing space that you&#39;ve already used and you&#39;ll hit your size of 30 quickly. There is no point of even freeing memory in that case. This is because you check if an index is NULL before adding data, so all of your new data appears at the bottom."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490218376, "post_id": 42957370, "comment_id": 73020213, "body": "Your problem is in the fixed size for the symbol table: <code>symbol *symbol_Table[SIZE] ;</code> Normally, you want it varable, enabling you to resize the table, when needed."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490218784, "post_id": 42957370, "comment_id": 73020408, "body": "But I still need to choose an initial size don&#39;t I? otherwise I&#39;m just adding symbols to something that doesn&#39;t exit, no?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490220107, "post_id": 42957370, "comment_id": 73021000, "body": "You need to pick an initial size. Zero is a good choice (realloc() works fine if its first argument happens to be NULL) Please see my answer."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 1, "creation_date": 1490285672, "post_id": 42957370, "comment_id": 73055080, "body": "I still haven&#39;t resolved the problem, so I don&#39;t know if any of the answers is correct.."}], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490200624, "post_id": 42957462, "comment_id": 73009811, "body": "Would you suggest adding a function to &#39;realloc&#39; when the symbols reach its limit? or is that just bad coding and I should try to write everything again as a linked list?"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490200723, "post_id": 42957462, "comment_id": 73009881, "body": "Realloc wouldn&#39;t be bad coding in my opinion. ArrayLists are as widely used as LinkedLists, and realloc would essentially be establishing exactly that (which I had updated my answer to say :p you may be looking at an older version of it). So I wouldn&#39;t consider it &quot;bad coding&quot;. Your space requirement in that case would be O(n) roughly, but make sure you double the capacity with each realloc to keep the number of realloc calls down."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 1, "creation_date": 1490218627, "post_id": 42957462, "comment_id": 73020328, "body": "How can I realloc memory to increase the size of the array?"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490218832, "post_id": 42957462, "comment_id": 73020430, "body": "If you call realloc with a pointer that was previously allocated with malloc, it will copy the data over to a new block and give you a new pointer to wherever the data was moved. But, your block will have more space than it did before, if you provide a larger size than the original block&#39;s size. Refer to <a href=\"https://linux.die.net/man/3/realloc\" rel=\"nofollow noreferrer\">linux.die.net/man/3/realloc</a>"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490219008, "post_id": 42957462, "comment_id": 73020501, "body": "Keep in mind that if you are calling realloc with some pointer p, you should not call free on p. You should free the pointer returned from realloc when you are done with it."}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 1, "creation_date": 1490221423, "post_id": 42957462, "comment_id": 73021537, "body": "I added a small bit of code to demonstrate how you can use realloc."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490246284, "post_id": 42957462, "comment_id": 73028928, "body": "I&#39;m getting an &quot;error: initializer element is not constant&quot; when trying to create the initial array."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490246388, "post_id": 42957462, "comment_id": 73028967, "body": "Also thank you for all your help! I love the idea of doubling the size by shifting the bit :)"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490246843, "post_id": 42957462, "comment_id": 73029129, "body": "How are you creating the initial array now? Would you mind updating your example?"}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490256208, "post_id": 42957462, "comment_id": 73033068, "body": "I tried switching with the code you suggested. I&#39;ll update the code when I&#39;m next to a computer."}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 1, "creation_date": 1490256292, "post_id": 42957462, "comment_id": 73033118, "body": "Oooohhh - malloc calls can only happen in methods. You should declare the variable in its current position, then <i>define</i> it by using malloc in the main method. I&#39;ll update my answer."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 1, "creation_date": 1490290645, "post_id": 42957462, "comment_id": 73058427, "body": "after allocating memory for the whole array, how should I free it at the end of the two loops? somthing like running a loop with free(symbol_Table[i]) gives me the error: incompatible type for argument 1 of \u2018free\u2019"}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490290724, "post_id": 42957462, "comment_id": 73058478, "body": "I am aware of the rule of 1 free command for 1 malloc, but maybe I should just free the whole array instead of free each &#39;symbol&#39;?"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490290760, "post_id": 42957462, "comment_id": 73058502, "body": "Are you sure you aren&#39;t accidentally calling free with NULL at some point? Try an if-statement: <code>if(symbol_Table[i] != NULL) { free(symbol_Table[i]); } symbol_Table[i] = NULL;</code>"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490291153, "post_id": 42957462, "comment_id": 73058723, "body": "I added a bit about freeing at the bottom of my answer."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490298179, "post_id": 42957462, "comment_id": 73062778, "body": "error: invalid operands to binary != (have \u2018symbol\u2019 and \u2018void *\u2019) when trying to implement the clear function.."}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490298388, "post_id": 42957462, "comment_id": 73062891, "body": "Oops, that mistake&#39;s on me. You should be declaring symbol_Table as a double pointer, or pointer to a pointer, since it is a dynamically allocated array of pointers. If you change that, your code should work. If not, I may be able to help more if you provide a pastebin with the rest of your code."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490299365, "post_id": 42957462, "comment_id": 73063472, "body": "Is there a way to still have the adding function in a different file? When I do so, I get &#39;symbol_Table&#39; is undeclared. Do I know have to add the symbol_Table to every function that uses it?"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490299592, "post_id": 42957462, "comment_id": 73063619, "body": "Yeah. You could also use global variables (i.e. declare it in a header file, and include the header file in every c file that uses symbol_Table), but generally, passing around data as arguments to functions is preferable."}, {"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 1, "creation_date": 1490305918, "post_id": 42957462, "comment_id": 73067004, "body": "@ Anish Goyal  after a lot of fiddling with the code, I believe it&#39;s now working correctly! I can&#39;t thank you enough! so THANK YOU, again! :)"}, {"owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "reply_to_user": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490306035, "post_id": 42957462, "comment_id": 73067056, "body": "No problem, glad I could help."}], "tags": [], "owner": {"reputation": 2449, "user_id": 6346483, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154223277015798/picture?type=large", "display_name": "Anish Goyal", "link": "https://stackoverflow.com/users/6346483/anish-goyal"}, "is_accepted": true, "score": 1, "last_activity_date": 1490298285, "last_edit_date": 1490298285, "creation_date": 1490199964, "answer_id": 42957462, "question_id": 42957370, "link": "https://stackoverflow.com/questions/42957370/resetting-clearing-a-global-array-of-pointers-to-structs/42957462#42957462", "title": "Resetting/Clearing a global array of pointers to structs", "body": "<p>Even though you are freeing your structs, your data is not immediately overwritten since the heap allocator isn't required to; it just makes a note that the space you freed is available. You should go one step further, and set each index of your array to NULL after freeing them. That will actually remove them from your array.</p>\n\n<p>Now, I would be cautious when using an array. You have specified a size, but you aren't enforcing it in your add function.</p>\n\n<p>If you swap your array over to use dynamic memory by using malloc, and you reach the size constraint later in the program, you can allocate more space using <code>realloc</code> (which would basically allow you to implement an ArrayList without disturbing the rest of your program's implementation).</p>\n\n<p>To initially allocate space for your array, try:</p>\n\n<pre><code>symbol **symbol_Table = (symbol *) malloc(sizeof(symbol *) * SIZE);\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong> malloc can only be called from <em>inside</em> a method. So, at the top of your file, you can declare your variable:</p>\n\n<pre><code>symbol **symbol_Table;\n</code></pre>\n\n<p>Then, before using it, you should define it in your <code>main()</code> method:</p>\n\n<pre><code>symbol_Table = (symbol **) malloc(sizeof(symbol **) * SIZE);\n</code></pre>\n\n<hr>\n\n<p>Note the notation in the malloc statement - you need to multiply the size of\nthe array with the size of a symbol pointer, because malloc takes the number of bytes that are to be allocated. <code>sizeof(symbol *)</code> gives you the size of a single <code>symbol</code> pointer.</p>\n\n<p>Also: in order to use realloc, the initial allocation of <code>symbol_Table</code> should be something returned by malloc / calloc / realloc, or NULL.</p>\n\n<p>If you're just trying to pop the reallocation into your if-statement, try:</p>\n\n<pre><code>static size_t current_size = SIZE;\n\nif(count == current_size) {\n  current_size = current_size &lt;&lt; 1;\n  symbol_Table = (symbol *)realloc(symbol_table, sizeof(symbol *) * current_size);\n}\n\nif(count &lt; current_size) {\n  // ... the rest of the code continues here\n</code></pre>\n\n<p>The bit about <code>current_size &lt;&lt; 1</code> is a bitshift left - it effectively multiplies <code>current_size</code> by two. </p>\n\n<p>Static variables retain their values between function calls. So, if I change it when I call the function one time, the next time I call the function, the variable will have the value I set in the previous call. The reason for the static variable is that the value of current_size should be saved between calls if you increase the size of your array, and that you have to store the size of the array somewhere. The best place to store it is in the one function where the real size of the array is important - the only place where it will be upscaled. A global variable would work just as well though.</p>\n\n<hr>\n\n<p>To free the symbol table at the end:</p>\n\n<pre><code>int i;\nfor(i = 0; i &lt; count ; i++){\n  if(symbol_Table[i] != NULL) // Important - we cannot free NULL\n  {\n    free(symbol_Table[i]);\n    symbol_Table[i] = NULL;\n  }\n}\ncount = 0; // Important - if we are deleting everything in the array, we\n           // need to make sure we reset the count for our next delete\n           // operation\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "edited": false, "score": 0, "creation_date": 1490246463, "post_id": 42963251, "comment_id": 73028997, "body": "Haven&#39;t tried it yet, but will do when I get back home! thank you! :)"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1490222362, "last_edit_date": 1490222362, "creation_date": 1490219168, "answer_id": 42963251, "question_id": 42957370, "link": "https://stackoverflow.com/questions/42957370/resetting-clearing-a-global-array-of-pointers-to-structs/42963251#42963251", "title": "Resetting/Clearing a global array of pointers to structs", "body": "<p>Your problem is (IMO) that <code>SIZE</code> is a constant. If you make it variable you could resize the symbol table when needed.</p>\n\n<p>The cleanest way is to store the array of pointers <em>together with the size(s)</em> in some envelope-structure, like in:</p>\n\n<hr>\n\n<pre><code>struct symbol{\n        unsigned action :1;\n        unsigned external :1;\n        unsigned data_flag :1;\n        int address;\n        char label[SIZE];\n        } symbol ;\n\n\nstruct symtab{\n        unsigned size;\n        unsigned used;\n        struct symbol **table; /* used as an array of pointers */\n        };\n\n        /* global: for fun */\nstruct symtab thetab = {0,0,NULL};\n\nint resize_the_thing(struct symtab *sp, unsigned new_size)\n{\nstruct symbol **newtable;\n\n        /* Note: realloc takes care of copying, too ...*/\nnewtable = realloc (sp-&gt;table, new_size * sizeof sp-&gt;table[0]);\n\nif (!newtable) { /* handle error */\n        return -1;\n        }\n\nsp-&gt;table = newtable;\n        /* TODO: you need to check the case new_size &lt; size here, too */\nsp-&gt;size = new_size;\nreturn 0; /* no_error */\n}\n\n/* typical usage: */\n\nif (thetab.used &gt;= thetab.size &amp;&amp; resize_the_thing( &amp;thetab, 12345)) {\n        /* report error */\n        }\n\nthetab.table[thetab.used++] = new_symbol(...);\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 6432241, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-MIJZrdsx4z8/AAAAAAAAAAI/AAAAAAAAABo/1xNzv23cHCc/photo.jpg?sz=128", "display_name": "Immanuel", "link": "https://stackoverflow.com/users/6432241/immanuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 42957462, "answer_count": 2, "score": 2, "last_activity_date": 1490298285, "creation_date": 1490199645, "last_edit_date": 1490218241, "question_id": 42957370, "link": "https://stackoverflow.com/questions/42957370/resetting-clearing-a-global-array-of-pointers-to-structs", "title": "Resetting/Clearing a global array of pointers to structs", "body": "<p>I'm new to C and I'm having a bit of a problem resetting or clearing a global array of pointers to structs.\nI need to receive a file (or more) and read it's lines in two cycles.\nwhile reading it I need to create a table of symbols(labels basically), and then use it to create more data (exporting the location of the labels to files writing it in hexadecimal values).</p>\n\n<p>The problem I am having is when I'm reading two files. The first file is read fine and all the values are correct, but when it tries to read the second file the values in the table(array) I created are still there even though I free'd them.</p>\n\n<p>I have this declared in a header file: (SIZE being 30)</p>\n\n<pre><code>typedef struct symbol{\nunsigned action :1;\nunsigned external :1;\nint address;    \nchar label[SIZE];\nunsigned data_flag :1;\n} symbol ; \n\nsymbol *symbol_Table[SIZE] ;\n</code></pre>\n\n<p>An example of adding a new symbol: (this sits in the reading function)</p>\n\n<pre><code>new_symbol =  malloc(sizeof(symbol));\nstrcpy(new_symbol-&gt;label, temp);\nnew_symbol-&gt;external = 0;\nnew_symbol-&gt;address = DC - tok_count; \nnew_symbol-&gt;action = 0;\nnew_symbol-&gt;data_flag = 1;\nadd_symbol(new_symbol);\nfree(new_symbol);\n</code></pre>\n\n<p>The adding function, in a different file: (<strong>UPDATE</strong>)</p>\n\n<pre><code>if(count == SIZE){\n    **/*realloc the array size, increase it*/**\n}\n\nif(count &lt; SIZE){\n    symbol_Table[count] = malloc(sizeof(symbol));\n    symbol_Table[count]-&gt;action = new_symbol-&gt;action;\n    symbol_Table[count]-&gt;external = new_symbol-&gt;external;\n    symbol_Table[count]-&gt;address = new_symbol-&gt;address;\n    strcpy(symbol_Table[count]-&gt;label, new_symbol-&gt;label);\n    symbol_Table[count]-&gt;data_flag = new_symbol-&gt;data_flag;\n\n    /*printf(\"count: %d\\n\", count);*/\n    return ++count;\n}\n\nreturn count;\n</code></pre>\n\n<p>And the freeing of the symbols at the end of the reading loop: (<strong>UPDATE</strong>)</p>\n\n<pre><code>int i;\nfor(i = 0; i &lt; count ; i++){\n    free(symbol_Table[i]);\n    symbol_Table[i] = NULL;\n}\n</code></pre>\n\n<p>this is the correct output after the first loop on the first file:</p>\n\n<pre><code>action: no | extern: yes | address: 0 | label L3 | data: no\naction: no | extern: yes | address: 0 | label W | data: no\naction: yes | extern: no | address: 100 | label MAIN | data: no\naction: yes | extern: no | address: 106 | label LOOP | data: no\naction: yes | extern: no | address: 119 | label END | data: no\naction: no | extern: no | address: 0 | label STR | data: yes\naction: no | extern: no | address: 7 | label LENGTH | data: yes\naction: no | extern: no | address: 10 | label K | data: yes\n</code></pre>\n\n<p>and the faulty output after the first loop of the second file: (<strong>UPDATE</strong>)</p>\n\n<pre><code>action: yes | extern: no | address: 100 | label MAIN | data: yes\naction: no | extern: yes | address: 0 | label W | data: yes\naction: yes | extern: no | address: 108 | label LOOP | data: yes\naction: no | extern: no | address: 0 | label STR | data: yes\naction: no | extern: no | address: 3 | label K | data: yes\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>action: yes | extern: no | address: 100 | label MAIN | data: no\naction: no | extern: yes | address: 0 | label W | data: no\naction: yes | extern: no | address: 108 | label LOOP | data: no\naction: no | extern: no | address: 0 | label STR | data: yes\naction: no | extern: no | address: 3 | label K | data: yes\n</code></pre>\n\n<p>A few questions:</p>\n\n<ol>\n<li>Is there a way to clean the list after I used it? and then reusing the same list for new values? and avoiding the memory leak. </li>\n<li>Is this idea with arrays just a waste of space, should I try using linked lists instead? I fear that I will have to write my whole project again, and time is not on my side..</li>\n</ol>\n\n<p>(<strong>AFTER UPDATE</strong>)</p>\n\n<ol start=\"3\">\n<li>How can I Reallocate more memory to increase the size of the array when I reach its end? </li>\n</ol>\n\n<p>Apologies if I misused a term, I'm studying C in a different language.</p>\n"}, {"tags": ["c", "function", "pointers", "memory-leaks", "malloc"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1490199390, "post_id": 42957164, "comment_id": 73008929, "body": "Even if C wasn&#39;t passing the data by value, there&#39;s no call to <code>free</code> in this code, so it&#39;s gonna leak memory anyway."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1490199680, "post_id": 42957164, "comment_id": 73009136, "body": "@user2933783  I hope you passed the interview successfully. Otherwise it is entirely unclear why they spent their own time inviting you to interview and why they asked such questions.:)"}, {"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 0, "creation_date": 1490199731, "post_id": 42957164, "comment_id": 73009173, "body": "I think your problem is with <code>pass by value</code> and <code>pass by pointer</code>."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1490199833, "post_id": 42957164, "comment_id": 73009263, "body": "@user2933783   By the way their qualification as C programmers is not very high. At least they even do not know how main without parameters shall be declared.:) Also the second parameter should have type size_t instead of the type int.:)"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1490200179, "post_id": 42957164, "comment_id": 73009488, "body": "You can use valgrind to check for any memory leaks in your C program. Please search for appropriate links and documentation on how to use valgrind to detect memory leak."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490208084, "post_id": 42957164, "comment_id": 73014577, "body": "May I inquire which company what that?"}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1490199169, "creation_date": 1490199169, "answer_id": 42957200, "question_id": 42957164, "link": "https://stackoverflow.com/questions/42957164/interview-about-malloc-in-function/42957200#42957200", "title": "Interview about malloc in function", "body": "<p>It cannot work since it changes the value of an argument inside a function, but since C is call by value that has <em>no</em> relation to the value of the variable that was used as that argument outside the function.</p>\n\n<p>In other words, <code>&amp;local</code> inside <code>newArray()</code> is not the same as <code>&amp;ptr</code> in <code>main()</code>; they're <em>different variables</em> so changing one has no effect on the other.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490202090, "post_id": 42957209, "comment_id": 73010834, "body": "That still leaks memory \u2014 it&#39;s just from <code>main()</code> now rather than <code>newArray</code>."}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490202892, "post_id": 42957209, "comment_id": 73011327, "body": "hahaha, good point.  I assume his actual program does something with the newArray(...) and free&#39;s it when finished, but you&#39;re right for this silly example I should add a <code>free(ptr)</code> before exiting main(...)"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 3, "last_activity_date": 1490203657, "last_edit_date": 1490203657, "creation_date": 1490199202, "answer_id": 42957209, "question_id": 42957164, "link": "https://stackoverflow.com/questions/42957164/interview-about-malloc-in-function/42957209#42957209", "title": "Interview about malloc in function", "body": "<p>You lose the reference to the malloced memory.  This should be Ok.</p>\n\n<pre><code>void newArray(int** local, int size) \n{\n     *local = (int*) malloc( size * sizeof(int) );\n}\nint main(c,v) char **v; {\n    int* ptr;\n    newArray(&amp;ptr, 10);\n    /* Do something with ptr? */\n    free(ptr);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1490199256, "creation_date": 1490199256, "answer_id": 42957222, "question_id": 42957164, "link": "https://stackoverflow.com/questions/42957164/interview-about-malloc-in-function/42957222#42957222", "title": "Interview about malloc in function", "body": "<p>The pointer <code>ptr</code> is passed by value (like everything else in C). So, assigning the return value of <code>malloc</code> to <code>local</code> changes only <em>local</em> variable, not <code>ptr</code> in <code>main()</code>.</p>\n\n<p>As a result, there's no way to access the pointer returned by <code>malloc()</code> once the function <code>newArray</code> returns. Hence, it results in a <em>memory leak</em>.</p>\n\n<p>It's similiar to:</p>\n\n<pre><code>void func(int x)\n{\n    x = 42;\n}\n\nint main(void)\n{\n   int y = 0;\n   func(y);\n   /* 'y' remains 0 */\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 750, "user_id": 7054387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-6bDjhl9WjJI/AAAAAAAAAAI/AAAAAAAAAA0/HLJVVOTCc1Q/photo.jpg?sz=128", "display_name": "Fatemeh Karimi", "link": "https://stackoverflow.com/users/7054387/fatemeh-karimi"}, "edited": false, "score": 0, "creation_date": 1490212408, "post_id": 42957237, "comment_id": 73017037, "body": "in IDEs like visual studio, we will face an error if we don&#39;t cast the return value of malloc."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 750, "user_id": 7054387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-6bDjhl9WjJI/AAAAAAAAAAI/AAAAAAAAAA0/HLJVVOTCc1Q/photo.jpg?sz=128", "display_name": "Fatemeh Karimi", "link": "https://stackoverflow.com/users/7054387/fatemeh-karimi"}, "edited": false, "score": 2, "creation_date": 1490212606, "post_id": 42957237, "comment_id": 73017175, "body": "@FatemehKarimi If you&#39;re compiling as C++, then yes you&#39;ll get an error.  But if your source files are .c files, then you should be compiling as C where you should not make such a cast."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 8, "last_activity_date": 1490203070, "last_edit_date": 1495541404, "creation_date": 1490199299, "answer_id": 42957237, "question_id": 42957164, "link": "https://stackoverflow.com/questions/42957164/interview-about-malloc-in-function/42957237#42957237", "title": "Interview about malloc in function", "body": "<p>In C, all function parameters are pass by value.  So when the local variable <code>local</code> is modified inside of <code>newArray</code>, the change is not visible outside of the function.  So the memory pointer is lost and you have a memory leak.</p>\n\n<p>To fix the leak, the function should accept the <em>address</em> of a pointer (i.e. a pointer-to-pointer), then dereference that pointer so that <code>ptr</code> in <code>main</code> is updated.  You would then need to call <code>free</code> to free the memory.</p>\n\n<pre><code>void newArray(int **local, int size) \n{\n     *local = malloc( size * sizeof(int) );\n}\nint main() {\n     int* ptr;\n     newArray(&amp;ptr, 10);\n     free(ptr);\n}\n</code></pre>\n\n<p>Also, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don't cast the return value of <code>malloc</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1490203583, "last_edit_date": 1490203583, "creation_date": 1490200738, "answer_id": 42957742, "question_id": 42957164, "link": "https://stackoverflow.com/questions/42957164/interview-about-malloc-in-function/42957742#42957742", "title": "Interview about malloc in function", "body": "<p>For starters this program </p>\n\n<pre><code>void newArray(int* local, int size) \n{\n     local = (int*) malloc( size * sizeof(int) );\n}\nint main() {\n     int* ptr;\n     newArray(ptr, 10);\n}\n</code></pre>\n\n<p>demonstrates that who asked the question in the interview is not strong himself as a C programmer.</p>\n\n<p>First of all, according to the C Standard, function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Secondly there is not any reason to declare the second parameter of the function <code>newArray</code> as having the type <code>int</code> instead of the type <code>size_t</code> because the standard function <code>malloc</code> used in the function has a single parameter of the type <code>size_t</code>.</p>\n\n<p>Otherwise the function should check that the argument passed to the function is not a negative value.</p>\n\n<p>As for the question then function parameters are its local variables. They are initialized by the supplied arguments. You can imagine the function definition and its call the following way</p>\n\n<pre><code>newArray(ptr, 10);\n\n// ...\n\nvoid newArray( /* int* local, int size */ ) \n{\n    int *local = ptr;\n    int size = 10;\n\n    local = (int*) malloc( size * sizeof(int) );\n}\n</code></pre>\n\n<p>As you can see it is the parameter (that is a local variable) <code>local</code> that is changed inside the function. The argument itself stays unchanged. Only the value of the argument is used to initialize initially the parameter. After exiting the function its local variables (including its parameters) are not alive and destroyed.</p>\n\n<p>So the function indeed has a memory leak.</p>\n\n<p>You should pass the argument by reference if you want that its value was changed in the function. For example</p>\n\n<pre><code>void newArray( int **local, size_t size  ) \n               ^^^^^^^^^^^^^^^^^^^^^^^^\n{\n    *local = (int*) malloc( size * sizeof(int) );\n}\n</code></pre>\n\n<p>And the function should be called like</p>\n\n<pre><code>newArray( &amp;ptr, 10 );\n</code></pre>\n\n<p>However a question arises what to do with the value of the pointer <code>*local</code> before reassigning it. Whether there should be called the function <code>free</code> before the call of malloc or not.</p>\n\n<p>So a more clear function definition can look like</p>\n\n<pre><code>int * newArray( size_t size ) \n{\n    return malloc( size * sizeof( int ) );\n}\n</code></pre>\n\n<p>In this case it is the client of the function who decides what he should do with his own pointer which he is going to reassign.</p>\n"}], "owner": {"reputation": 91, "user_id": 2933783, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/38264f82cd45413c08e8aa4ad7dcff97?s=128&d=identicon&r=PG&f=1", "display_name": "user2933783", "link": "https://stackoverflow.com/users/2933783/user2933783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 2, "answer_count": 5, "score": 2, "last_activity_date": 1490203657, "creation_date": 1490199084, "last_edit_date": 1490201791, "question_id": 42957164, "link": "https://stackoverflow.com/questions/42957164/interview-about-malloc-in-function", "title": "Interview about malloc in function", "body": "<p>I faced a question in an interview of a company, and I cannot figure out the reason about the answer.</p>\n\n<pre><code>void newArray(int* local, int size) \n{\n     local = (int*) malloc( size * sizeof(int) );\n}\nint main() {\n     int* ptr;\n     newArray(ptr, 10);\n}\n</code></pre>\n\n<p>Ans: This would cause memory leak and the program is not correct.</p>\n\n<p>Does anyone know why this code cannot work?</p>\n"}, {"tags": ["c", "while-loop", "return"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1490198940, "post_id": 42957067, "comment_id": 73008600, "body": "Same thing happens, but you return a value. The <code>return</code> statement works the same no matter where you put it. And note that <code>return</code> doesn&#39;t exit from the loop, but from the current <i>function</i>."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "edited": false, "score": 1, "creation_date": 1490198985, "post_id": 42957067, "comment_id": 73008637, "body": "advice: to read up more on basics of C. return returns from function not only from loop"}, {"owner": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 2, "creation_date": 1490198997, "post_id": 42957067, "comment_id": 73008644, "body": "Why ask and not write a sample code to see for yourself?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1490199000, "post_id": 42957067, "comment_id": 73008646, "body": "Also, <code>return</code> is very much <i>not</i> a function, so you do not &quot;call&quot; it. It gets executed, like any other statement, if it&#39;s in the path of execution."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1490199044, "post_id": 42957067, "comment_id": 73008678, "body": "you may be thinking of <code>break;</code>, which exits a loop,, but only the <i>current</i> loop (that is, if you have nested loops, you won&#39;t exit from all of them)"}, {"owner": {"reputation": 3, "user_id": 7752428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e05a0bcd3a1652912e34f849e69cdbe?s=128&d=identicon&r=PG&f=1", "display_name": "Mebu115", "link": "https://stackoverflow.com/users/7752428/mebu115"}, "edited": false, "score": 0, "creation_date": 1490199501, "post_id": 42957067, "comment_id": 73009008, "body": "I tried myself on Visual Studio and I get that the simple &quot;return;&quot; doesn&#39;t return from the calling function but simply exits from the loop. The same appears to do the &quot;return value&quot;: is there a reason why it behaves like that?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490200448, "post_id": 42957067, "comment_id": 73009674, "body": "@Mebu115 I don&#39;t believe this, can you post your code?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7752428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e05a0bcd3a1652912e34f849e69cdbe?s=128&d=identicon&r=PG&f=1", "display_name": "Mebu115", "link": "https://stackoverflow.com/users/7752428/mebu115"}, "edited": false, "score": 0, "creation_date": 1490199981, "post_id": 42957109, "comment_id": 73009354, "body": "I knew that return (whatever it is, with or without a value) should exit the current function, but in my trials it always exits the loop (or the if) in which is placed and not the main or the current function. My question arose from these evidences."}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "reply_to_user": {"reputation": 3, "user_id": 7752428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e05a0bcd3a1652912e34f849e69cdbe?s=128&d=identicon&r=PG&f=1", "display_name": "Mebu115", "link": "https://stackoverflow.com/users/7752428/mebu115"}, "edited": false, "score": 0, "creation_date": 1490200906, "post_id": 42957109, "comment_id": 73009999, "body": "@Mebu115 could you please edit your original question and post some code to support your evidences?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1490198958, "creation_date": 1490198958, "answer_id": 42957109, "question_id": 42957067, "link": "https://stackoverflow.com/questions/42957067/return-an-expression-inside-a-while-loop-c-language/42957109#42957109", "title": "Return an expression inside a while loop - C language", "body": "<p>The <code>return</code> statement will exit the current function, not just the loop it is in.</p>\n\n<p>Whether you call <code>return</code> with or without a value depends on whether or not the function in question has a <code>void</code> return type.</p>\n"}], "owner": {"reputation": 3, "user_id": 7752428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e05a0bcd3a1652912e34f849e69cdbe?s=128&d=identicon&r=PG&f=1", "display_name": "Mebu115", "link": "https://stackoverflow.com/users/7752428/mebu115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10597, "favorite_count": 1, "accepted_answer_id": 42957109, "answer_count": 1, "score": 0, "last_activity_date": 1542061328, "creation_date": 1490198871, "last_edit_date": 1490201156, "question_id": 42957067, "link": "https://stackoverflow.com/questions/42957067/return-an-expression-inside-a-while-loop-c-language", "title": "Return an expression inside a while loop - C language", "body": "<p>I know that calling a <code>return;</code> from a while exits from the loop, but what happens if you call <code>return VALUE</code> inside a loop? And firstly, is it possible?</p>\n\n<p>EDIT: Strangely - but not so much because now I have the expected behaviour - reorganizing the function to show the code now the \"return\" all work as they should do.\nSorry for the silly question; I post the code anyway hoping it will be useful for someone with my same doubt.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint function();\n\nint main(){\nprintf(\"MAIN BEFORE FUNCTION\\n\");\n\n    function();\n    printf(\"MAIN AFTER FUNCTION\\n\");\n\n    getch();\n    return 0;\n}\n\nint function(){\n    printf(\"FUNCTION ENTERED\\n\");\n    int i = 1;\n    if (i &lt; 3){\n        printf(\"IF ENTERED\\n\");\n        return;\n        printf(\"IF AFTER RETURN\\n\");\n\n    }\n    printf(\"FUNCTION AFTER IF\\n\");\n\n    while (i &lt; 3){\n        printf(\"WHILE ENTERED\\n\");\n        return;\n        printf(\"WHILE AFTER RETURN\\n\");\n\n\n    }\n    printf(\"FUNCTION END\\n\");\n\n    //return from function\n    return 0;\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "json", "string"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "edited": false, "score": 0, "creation_date": 1490199152, "post_id": 42956807, "comment_id": 73008768, "body": "It doesn&#39;t produce the desired results.  json_object <i>jobj = json_object_new_object();                                                          json_object</i> root = json_object_new_object ();                                               json_object_object_add(jobj, &quot;author-details&quot;, root);   I added this before the code I provided earlier.  json_object *jobj = json_object_new_object(); json_object *jStr1 = json_object_new_string(&quot;Joys of Programming&quot;); json_object *jstr2 = json_object_new_int(10);  It prints  { &quot;author-details&quot;: { }, &quot;name&quot;: &quot;Joys of Programming&quot;, &quot;Number of Posts&quot;: 10 }"}], "tags": [], "owner": {"reputation": 2265, "user_id": 5379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/582d1ca83c33f9792f5fa014097fc116?s=128&d=identicon&r=PG", "display_name": "Dominic Dos Santos", "link": "https://stackoverflow.com/users/5379/dominic-dos-santos"}, "is_accepted": false, "score": 0, "last_activity_date": 1490198188, "creation_date": 1490198188, "answer_id": 42956807, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib/42956807#42956807", "title": "Creating json string using json lib", "body": "<p>Create a new JSON object and add the one you already created as a child.</p>\n\n<p>Just insert code like this after what you've already written:</p>\n\n<pre><code>json_object* root = json_object_new_object();\njson_object_object_add(root, \"author-details\", jobj); // This is the same \"jobj\" as original code snippet.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "is_accepted": false, "score": 0, "last_activity_date": 1490199681, "creation_date": 1490199681, "answer_id": 42957380, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib/42957380#42957380", "title": "Creating json string using json lib", "body": "<p>Based on the comment from Dominic, I was able to figure out the correct answer. </p>\n\n<pre><code>json_object *jobj = json_object_new_object();\njson_object* root = json_object_new_object();\njson_object_object_add(jobj, \"author-details\", root);\njson_object *jStr1 = json_object_new_string(\"Joys of Programming\");\njson_object *jstr2 = json_object_new_int(10);\njson_object_object_add(root,\"name\", jStr1 );\njson_object_object_add(root,\"Number of Posts\", jstr2 );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 1, "creation_date": 1490200846, "post_id": 42957715, "comment_id": 73009963, "body": "I second the motion to use nlohmann&#39;s library. I&#39;ve used it before without too much trouble and with success."}, {"owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "edited": false, "score": 0, "creation_date": 1490239683, "post_id": 42957715, "comment_id": 73027154, "body": "Thanks all for recommending nlohmann&#39;s JSON. I will try that out. To jump start,  If someone can throw snippet of how to parse json data/object like above using the nlohman&#39;s json library that would be great."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490242869, "last_edit_date": 1490242869, "creation_date": 1490200659, "answer_id": 42957715, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib/42957715#42957715", "title": "Creating json string using json lib", "body": "<p>To paraphrase an old advertisement, \"libjson users would rather fight than switch.\"</p>\n\n<p>At least I assume you must like fighting with the library. Using <a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">nlohmann's JSON library</a>, you could use code like this:</p>\n\n<pre><code>nlohmann::json j {\n    { \"author-details\", {\n            { \"name\", \"Joys of Programming\" },\n            { \"Number of Posts\", 10 }\n        }\n    } \n};\n</code></pre>\n\n<p>At least to me, this seems somewhat simpler and more readable.</p>\n\n<p>Parsing is about equally straightforward. For example, let's assume we had a file named <code>somefile.json</code> that contained the JSON data shown above. To read and parse it, we could do something like this:</p>\n\n<pre><code>nlohmann::json j;\n\nstd::ifstream in(\"somefile.json\");\n\nin &gt;&gt; j;   // Read the file and parse it into a json object\n\n// Let's start by retrieving and printing the name.\nstd::cout &lt;&lt; j[\"author-details\"][\"name\"];\n</code></pre>\n\n<p>Or, let's assume we found a post, so we want to increment the count of posts. This is one place that things get...less tasteful--we can't increment the value as directly as we'd like; we have to obtain the value, add one, then assign the result (like we would in lesser languages that lack <code>++</code>):</p>\n\n<pre><code>j[\"author-details\"][\"Number of Posts\"] = j[\"author-details\"][\"Number of Posts\"] + 1;\n</code></pre>\n\n<p>Then we want to write out the result. If we want it \"dense\" (e.g., we're going to transmit it over a network for some other machine to read it) we can just use <code>&lt;&lt;</code>:</p>\n\n<pre><code>somestream &lt;&lt; j;\n</code></pre>\n\n<p>On the other hand, we might want to pretty-print it so a person can read it more easily. The library respects the width we set with <code>setw</code>, so to have it print out indented with 4-column tab stops, we can do:</p>\n\n<pre><code>somestream &lt;&lt; std::setw(4) &lt;&lt; j;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7668048, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/36f00fab604a9dd514fa867f4c9f025e?s=128&d=identicon&r=PG&f=1", "display_name": "ari", "link": "https://stackoverflow.com/users/7668048/ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1196, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1490242869, "creation_date": 1490197620, "last_edit_date": 1490197651, "question_id": 42956555, "link": "https://stackoverflow.com/questions/42956555/creating-json-string-using-json-lib", "title": "Creating json string using json lib", "body": "<p>I am using <a href=\"https://linuxprograms.wordpress.com/2010/05/20/json-c-libjson-tutorial/\" rel=\"nofollow noreferrer\">jsonc-libjson</a> to create a json string like below.</p>\n\n<pre><code>{ \"author-details\": {\n        \"name\" : \"Joys of Programming\",\n        \"Number of Posts\" : 10\n    }\n}\n</code></pre>\n\n<p>My code looks like below</p>\n\n<pre><code>json_object *jobj = json_object_new_object();\njson_object *jStr1 = json_object_new_string(\"Joys of Programming\");\njson_object *jstr2 = json_object_new_int(\"10\");\njson_object_object_add(jobj,\"name\", jStr1 );\njson_object_object_add(jobj,\"Number of Posts\", jstr2 );\n</code></pre>\n\n<p>this gives me json string </p>\n\n<pre><code>{\n \"name\" : \"Joys of Programming\",\n    \"Number of Posts\" : 10\n}\n</code></pre>\n\n<p>How do I add the top part associated with author details? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1490196974, "post_id": 42956218, "comment_id": 73007127, "body": "You can&#39;t really. You have to think up some other design (using e.g. arrays instead)."}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490197113, "post_id": 42956218, "comment_id": 73007231, "body": "@Someprogrammerdude may be use inline assembly and put all parameters on stack before pushing call of function?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490197218, "post_id": 42956218, "comment_id": 73007320, "body": "But then you&#39;re not programming in C anymore. And it will definitely not be portable. Or something I recommend in general."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1490197364, "post_id": 42956218, "comment_id": 73007434, "body": "You can have a very large switch statement with all possible calls."}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1490197514, "post_id": 42956218, "comment_id": 73007548, "body": "@stark and it will cover just first set of cases. Yes, it is nice idea, i&#39;ll try it. I think to overdose five cases is enough."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1490197552, "post_id": 42956218, "comment_id": 73007574, "body": "There is no universal solution in C. Perhaps in some future version there will be macros like <code>va_create</code> and <code>va_add_arg</code>"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1490197706, "post_id": 42956218, "comment_id": 73007692, "body": "@stark write your comment in answer"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1490198119, "post_id": 42956218, "comment_id": 73007996, "body": "@LorinczyZsigmond can I <code>mmap</code> all arguments in memory and make function understand that it should read there?"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1490198419, "post_id": 42956218, "comment_id": 73008221, "body": "<code>mmap</code> has nothing to do with it. An <code>intptr_t</code> array  could be converted into <code>va_list</code> -- on some platforms. Others (amd64 for example) pass arguments in registers, so this won&#39;t work. I&#39;d like to repeat: There is no universal solution in C."}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1490198674, "post_id": 42956218, "comment_id": 73008408, "body": "@LorinczyZsigmond Ok portability is problem. And if I use only Linux-i386 for instance?"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 1, "creation_date": 1490199185, "post_id": 42956218, "comment_id": 73008790, "body": "Then your idea using Assembly might work."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490206424, "post_id": 42956218, "comment_id": 73013570, "body": "Calling a <code>foo(xxx, ...)</code> function with too many arguments is OK.  Is the maximum numbers of arguments the function may receive known?"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490210031, "post_id": 42956218, "comment_id": 73015676, "body": "@chux my functions are NOT variable arguments. They like <code>cos</code>, <code>pow</code> and similar."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490210365, "post_id": 42956218, "comment_id": 73015854, "body": "Are the function arguments types all <code>double</code>?"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490210610, "post_id": 42956218, "comment_id": 73015990, "body": "@chux no. It can be <code>int</code>, <code>char *</code> or sth else"}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490210763, "post_id": 42956218, "comment_id": 73016064, "body": "@chux I am implementing now realization using inline assembly and I think that I can mark question as answered, though this solution was not explained in details here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1490210817, "post_id": 42956218, "comment_id": 73016092, "body": "Note: You can post your own answer and accept it."}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490210905, "post_id": 42956218, "comment_id": 73016151, "body": "@chux After finishing I will share the explanation of it)"}], "answers": [{"tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": true, "score": 1, "last_activity_date": 1490200123, "creation_date": 1490200123, "answer_id": 42957514, "question_id": 42956218, "link": "https://stackoverflow.com/questions/42956218/call-library-function-with-unknown-number-of-args/42957514#42957514", "title": "Call library function with unknown number of args", "body": "<p>A switch statement on the possible set of input parameters would allow you to call the library.  Something like:</p>\n\n<pre><code>switch(param) {\n   PARAM_II: rc = (*func)(int1, int2);\n   break;\n   ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "edited": false, "score": 0, "creation_date": 1490201576, "post_id": 42957838, "comment_id": 73010509, "body": "that is the main problem for me! For example I received <code>pow</code> and two arguments. I don&#39;t know how to pass array to <code>pow</code>."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "edited": false, "score": 0, "creation_date": 1490202198, "post_id": 42957838, "comment_id": 73010908, "body": "@Tehada: I just missed the point. I was speaking of the callee part, while your problem is the caller part. I cannot imagine a general solution without pushing arguments to the stack and calling the function in assembly language. Anyway this clearly does not answer your question and will be delete in a while..."}, {"owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "edited": false, "score": 0, "creation_date": 1490203587, "post_id": 42957838, "comment_id": 73011788, "body": "Please don&#39;t delete your answer -- it helped me understand the appropriate solution. As I don&#39;t care about portability in this case I can use <code>mmap</code> to place all in virtual memory. So now I have pointer to function and arguments. May be send it all to <code>PIPE</code> and then <code>mmap</code> it?"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1490201003, "creation_date": 1490201003, "answer_id": 42957838, "question_id": 42956218, "link": "https://stackoverflow.com/questions/42956218/call-library-function-with-unknown-number-of-args/42957838#42957838", "title": "Call library function with unknown number of args", "body": "<p>C supports vararg calls, where the variable part is represented by an ellipse in the function declaration. It is defined in 7.15 Variable arguments  of the standard. That's is a rather obscure part of C, but heavily used in standard library for the <code>*printf</code> and <code>*scanf</code> functions family, as well as the <code>execl</code> one.</p>\n\n<p>It is obscure IMHO, because you need some magic to guess what arguments were actually passed. For <code>*printf</code> and <code>*scanf</code>, you rely on the format string to declare that, for <code>execl</code>, you assume that it is a list of C strings (null terminated char arrays), terminated with a NULL pointer.</p>\n\n<p>This kind of call is good for use cases where the caller knows the number of arguments (again think about <code>*printf</code>). If the number of arguments can vary at run-time, for example the command line arguments, an array is more appropriate. Not surprisingly, the <code>main</code> function receives its argument list as a array + array length. If you want to be able to pass the command line arguments to another function (be it in a dll or not) just mimic it and pass an array either with its length as another parameter, or with the convention that it shall be terminated with a NULL pointer.</p>\n"}], "owner": {"reputation": 353, "user_id": 6411816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-v2NXLOec7TI/AAAAAAAAAAI/AAAAAAAAAB8/b1lFH64cnQM/photo.jpg?sz=128", "display_name": "Tehada", "link": "https://stackoverflow.com/users/6411816/tehada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 42957514, "answer_count": 2, "score": 1, "last_activity_date": 1490210104, "creation_date": 1490196811, "last_edit_date": 1490210104, "question_id": 42956218, "link": "https://stackoverflow.com/questions/42956218/call-library-function-with-unknown-number-of-args", "title": "Call library function with unknown number of args", "body": "<p>I have to load function (taking constant number of arguments like <code>pow</code> or <code>sin</code>) from <code>so</code> library and execute it with arguments given in command line. Name of the library and function are also given in command line arguments. Moreover I have a string encoding number of parameters and their type, e.g. \"ii\" means two integers. So I can load this library using <code>dlopen()</code> and load function using <code>dlsym</code> but I can't imagine how to pass all arguments to this function while their number is unknown before the execution.</p>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490196869, "post_id": 42956175, "comment_id": 73007051, "body": "Nothing useful is happening. Having a non-empty return statement in a void function is a setup for undefined behavior due to a constraint violation."}, {"owner": {"reputation": 1945, "user_id": 953331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99887094ae040b18cc989bd48e38f8e7?s=128&d=identicon&r=PG", "display_name": "Mr Morgan", "link": "https://stackoverflow.com/users/953331/mr-morgan"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490196907, "post_id": 42956175, "comment_id": 73007079, "body": "Can you elaborate?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490197285, "post_id": 42956175, "comment_id": 73007379, "body": "I can&#39;t. Since you edited your answer to fix that nonsense"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490197328, "post_id": 42956175, "comment_id": 73007412, "body": "@StoryTeller that is not in the edit history."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490197353, "post_id": 42956175, "comment_id": 73007424, "body": "@WeatherVane - Grace period. There was a void there"}, {"owner": {"reputation": 1945, "user_id": 953331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99887094ae040b18cc989bd48e38f8e7?s=128&d=identicon&r=PG", "display_name": "Mr Morgan", "link": "https://stackoverflow.com/users/953331/mr-morgan"}, "edited": false, "score": 0, "creation_date": 1490197389, "post_id": 42956175, "comment_id": 73007455, "body": "As is variable n."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1038155"}, "edited": false, "score": 0, "creation_date": 1490197741, "post_id": 42956175, "comment_id": 73007719, "body": "First problem counting in while is not limited add &amp;&amp; i&lt;254. n is not initalized. buff + i can be a random adress"}], "answers": [{"comments": [{"owner": {"reputation": 1945, "user_id": 953331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99887094ae040b18cc989bd48e38f8e7?s=128&d=identicon&r=PG", "display_name": "Mr Morgan", "link": "https://stackoverflow.com/users/953331/mr-morgan"}, "edited": false, "score": 0, "creation_date": 1490197863, "post_id": 42956498, "comment_id": 73007813, "body": "But how is n populated? I can see nothing that explicitly sets it."}, {"owner": {"reputation": 916, "user_id": 4121965, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ed23d9f7bf180f9632e5f2de23264c4f?s=128&d=identicon&r=PG", "display_name": "fpes", "link": "https://stackoverflow.com/users/4121965/fpes"}, "reply_to_user": {"reputation": 1945, "user_id": 953331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99887094ae040b18cc989bd48e38f8e7?s=128&d=identicon&r=PG", "display_name": "Mr Morgan", "link": "https://stackoverflow.com/users/953331/mr-morgan"}, "edited": false, "score": 0, "creation_date": 1490206771, "post_id": 42956498, "comment_id": 73013820, "body": "@MrMorgan If you don&#39;t find any lines that could be scanned, the value in the address of n is garbage. It just so happened to be -2. Your code is in high risk for undefined behavior since you don&#39;t ever explicitly initialize n. If you don&#39;t find a blank line then access n, you get undefined behavior - such as when you get -2.. (I think..). To avoid this, always initialize you variables: int i = 0;"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 1945, "user_id": 953331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99887094ae040b18cc989bd48e38f8e7?s=128&d=identicon&r=PG", "display_name": "Mr Morgan", "link": "https://stackoverflow.com/users/953331/mr-morgan"}, "edited": false, "score": 0, "creation_date": 1490257473, "post_id": 42956498, "comment_id": 73033731, "body": "@MrMorgan Then you need to look harder, especially at that <code>sscanf()</code> call. :)"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1490257459, "last_edit_date": 1490257459, "creation_date": 1490197503, "answer_id": 42956498, "question_id": 42956175, "link": "https://stackoverflow.com/questions/42956175/what-is-happening-in-this-c-code-when-return-is-called/42956498#42956498", "title": "What is happening in this C code when return is called?", "body": "<p>The value of <code>n</code> will depend on the input.</p>\n\n<p>It basically reads lines, until it finds one that doesn't start with <code>#</code> or is blank. Leading spaces are ignored, that's what the call to <code>strspn()</code> does.</p>\n\n<p>Once such a non-empty line is found, it is expected to contain a decimal integer, which is converted (using <code>sscanf()</code> and stored in the local variable <code>n</code>) and returned. If the conversion fails, an error is printed.</p>\n"}], "owner": {"reputation": 1945, "user_id": 953331, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99887094ae040b18cc989bd48e38f8e7?s=128&d=identicon&r=PG", "display_name": "Mr Morgan", "link": "https://stackoverflow.com/users/953331/mr-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 42956498, "answer_count": 1, "score": 0, "last_activity_date": 1490257459, "creation_date": 1490196715, "last_edit_date": 1490197179, "question_id": 42956175, "link": "https://stackoverflow.com/questions/42956175/what-is-happening-in-this-c-code-when-return-is-called", "title": "What is happening in this C code when return is called?", "body": "<p>This may seem a crass question but it is important. Can anyone tell me what is happening in this C code and what is the value of n when it returns?</p>\n\n<p>MAX_BUFFER is set to 256. I am especially interested in variable n when it is returned.</p>\n\n<pre><code>int getinteger(void) {\n    char buff[MAX_BUFFER];\n    int i;\n    int n;\n    /* Strip leading comments and blank lines */\n    do {\n        fgets(buff, sizeof (buff), stdin);\n        i = strspn(buff, \" \");\n    } while (buff[i] == '#' || buff[i] == '\\n');\n    if (sscanf(buff + i, \"%d\", &amp;n) != 1) {\n        fatal(\"Getinteger error (%s)\", buff);\n    }\n    return n;\n}\n</code></pre>\n\n<p>When called a value of -2 is returned. I do not understand why.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "cryptography", "rsa"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 6446146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/222226293323165b15c4721961265f4b?s=128&d=identicon&r=PG&f=1", "display_name": "yeger", "link": "https://stackoverflow.com/users/6446146/yeger"}, "is_accepted": true, "score": 0, "last_activity_date": 1567630898, "last_edit_date": 1567630898, "creation_date": 1490818472, "answer_id": 43103285, "question_id": 42955989, "link": "https://stackoverflow.com/questions/42955989/why-public-key-verify-signature-returns-error-if-signature-buffer-is-defined-i/43103285#43103285", "title": "why public_key_verify_signature() returns error if signature buffer is defined in file scope? (linux kernel crypto)", "body": "<p>The reason is that when you follow the code, you can see the following calls:</p>\n\n<pre><code>public_key_verify_signature();               // will call:\nsg_init_one(&amp;sig_sg, sig-&gt;s, sig-&gt;s_size);   // will call:\nsg_set_buf(sg, buf, buflen);\n</code></pre>\n\n<p><a href=\"http://lxr.free-electrons.com/source/include/linux/scatterlist.h?v=4.9#L136\" rel=\"nofollow noreferrer\">sg_set_buf</a> code is:</p>\n\n<pre><code>#ifdef CONFIG_DEBUG_SG\n    BUG_ON(!virt_addr_valid(buf));\n#endif\n    sg_set_page(sg, virt_to_page(buf), buflen, offset_in_page(buf));\n</code></pre>\n\n<p>and <code>virt_to_page</code> won't work, because elf sections are loaded to pages allocated with <a href=\"https://stackoverflow.com/questions/5982125/how-to-get-a-struct-page-from-any-address-in-the-linux-kernel#comment6953790_6015633\">vmalloc</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 209, "user_id": 4458513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BIIxB.jpg?s=128&g=1", "display_name": "Mahdi Mohammadi", "link": "https://stackoverflow.com/users/4458513/mahdi-mohammadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1606224633, "creation_date": 1606224633, "answer_id": 64987579, "question_id": 42955989, "link": "https://stackoverflow.com/questions/42955989/why-public-key-verify-signature-returns-error-if-signature-buffer-is-defined-i/64987579#64987579", "title": "why public_key_verify_signature() returns error if signature buffer is defined in file scope? (linux kernel crypto)", "body": "<p>haha its working...\nlinker i mean tinker...(dota 2)</p>\n<pre><code>int public_key_verify_signature1(const struct public_key *pkey,\n                const struct public_key_signature *sig)\n{\n    struct crypto_wait cwait;\n    struct crypto_akcipher *tfm;\n    struct akcipher_request *req;\n    struct scatterlist src_tab[3];\n    const char *alg_name;\n    char alg_name_buf[CRYPTO_MAX_ALG_NAME];\n    void *output;\n    unsigned int outlen;\n    int ret;\n\n    pr_devel(&quot;==&gt;%s()\\n&quot;, __func__);\n\n    BUG_ON(!pkey);\n    BUG_ON(!sig);\n    BUG_ON(!sig-&gt;s);\n\n    if (!sig-&gt;digest)\n        return -ENOPKG;\n\n    alg_name = sig-&gt;pkey_algo;\n    if (strcmp(sig-&gt;pkey_algo, &quot;rsa&quot;) == 0) {\n        /* The data wangled by the RSA algorithm is typically padded\n         * and encoded in some manner, such as EMSA-PKCS1-1_5 [RFC3447\n         * sec 8.2].\n         */\n        if (snprintf(alg_name_buf, CRYPTO_MAX_ALG_NAME,\n                 &quot;pkcs1pad(rsa,%s)&quot;, sig-&gt;hash_algo\n                 ) &gt;= CRYPTO_MAX_ALG_NAME)\n            return -EINVAL;\n        alg_name = alg_name_buf;\n    }\n\n    tfm = crypto_alloc_akcipher(alg_name, 0, 0);\n    if (IS_ERR(tfm))\n        return PTR_ERR(tfm);\n\n    ret = -ENOMEM;\n    req = akcipher_request_alloc(tfm, GFP_KERNEL);\n    if (!req)\n        goto error_free_tfm;\n\n    ret = crypto_akcipher_set_pub_key(tfm, pkey-&gt;key, pkey-&gt;keylen);\n    if (ret)\n        goto error_free_req;\n\n    ret = -ENOMEM;\n    outlen = crypto_akcipher_maxsize(tfm);\n    output = kmalloc(outlen, GFP_KERNEL);\n    if (!output)\n        goto error_free_req;\n\n\n    sg_init_table(src_tab, 3);\n\n    sg_set_buf(&amp;src_tab[1], sig-&gt;digest, sig-&gt;digest_size);\n    sg_set_buf(&amp;src_tab[0], sig-&gt;s, sig-&gt;s_size);\n\n    akcipher_request_set_crypt(req, src_tab, NULL, sig-&gt;s_size, sig-&gt;digest_size);\n\n    crypto_init_wait(&amp;cwait);\n    akcipher_request_set_callback(req, CRYPTO_TFM_REQ_MAY_BACKLOG |\n                      CRYPTO_TFM_REQ_MAY_SLEEP,\n                      crypto_req_done, &amp;cwait);\n\n\n    ret = crypto_wait_req(crypto_akcipher_verify(req), &amp;cwait);\n    if (ret)\n        goto out_free_output;\n    pr_info(&quot;verified successfuly!!!\\n&quot;);\n\nout_free_output:\n    kfree(output);\nerror_free_req:\n    akcipher_request_free(req);\nerror_free_tfm:\n    crypto_free_akcipher(tfm);\n    pr_devel(&quot;&lt;==%s() = %d\\n&quot;, __func__, ret);\n    if (WARN_ON_ONCE(ret &gt; 0))\n        ret = -EINVAL;\n    return ret;\n}\nint kk(void *data){\n // u8 signature_bytes[]... if it was here - it would work\n//public key in der format\n    unsigned char public_key_bytes[] = { 0x30,0x82,0x01,0x0a,0x02,0x82,0x01,0x01,0x00,0xe4,0xde,0x7c,0x12,0x6d,0xaa,0x6b,0xe9,0xb6,0x17,0x58,0x81,0x4e,0xad,0xfb,0x0e,0x21,0x39,0x4b,0x09,0x57,0xdd,0xa0,0xe1,0xfb,0x53,0x4b,0xc3,0xc3,0x0c,0x33,0xa7,0x37,0xfb,0xa8,0x47,0x26,0x2f,0xea,0x70,0x7c,0xbf,0x91,0x52,0xd8,0x2d,0x3a,0xd7,0xd9,0xba,0xa0,0x87,0x6d,0x8d,0x0c,0x7a,0xfe,0x7b,0x6c,0x7c,0x3d,0x57,0x73,0xb8,0xd1,0x55,0x2c,0x1e,0xc5,0x81,0xad,0x1a,0x59,0x71,0x12,0xa3,0x0b,0xee,0xe2,0x7b,0xf8,0x0c,0x8f,0xbf,0x68,0xbf,0x50,0x11,0x8b,0xa7,0xd7,0x00,0xb6,0xdc,0x65,0x4f,0xe3,0x75,0xdd,0xcc,0xa4,0x55,0x0c,0x70,0x27,0x23,0x9b,0x8d,0x1e,0x7d,0x66,0x33,0x06,0xad,0x62,0x37,0x1b,0xd4,0x68,0x50,0xcf,0x26,0x9d,0x60,0x6e,0xc0,0x3c,0xc7,0x15,0xcb,0x76,0x07,0x8a,0xc4,0xd3,0x84,0xf6,0xad,0x51,0xe0,0x63,0x31,0x55,0x4b,0x4a,0x96,0x4d,0x43,0xb7,0xd6,0x57,0xd6,0x6b,0x66,0x5c,0x60,0x35,0xf9,0x32,0x8d,0xe9,0x49,0x5c,0x3d,0x0f,0x77,0xfb,0x87,0x95,0xc2,0x57,0x8a,0xa2,0x9d,0xbe,0x42,0xc2,0x95,0x74,0x80,0xb1,0x10,0xd4,0x6c,0x37,0xb6,0xc5,0xed,0x73,0x2b,0xdd,0x44,0x87,0xf9,0xed,0x14,0xec,0x58,0x46,0x86,0xa4,0x0d,0x38,0x0f,0xcb,0x61,0xf9,0x39,0xf5,0x06,0xe6,0x20,0x0a,0x02,0xed,0x01,0xc7,0x77,0x9e,0x4e,0xaa,0x45,0xcf,0xc9,0xb2,0xa6,0xd1,0xf0,0x2c,0x6e,0x33,0xbb,0x49,0x18,0x7a,0x0a,0x55,0x06,0x7b,0xd8,0x6f,0x08,0xd6,0xc7,0xfd,0x41,0x2b,0x37,0x77,0x40,0x1e,0x63,0xf8,0x27,0x58,0x23,0x02,0x03,0x01,0x00,0x01 };\n\n    //SHA-256 digest for the data &quot;asaf&quot;\n    unsigned char digest[] = { 0x6f,0x82,0xd3,0x9a,0x2c,0x53,0xaf,0xa5,0x00,0xd4,0x6e,0x0e,0xfb,0xe1,0xa8,0xd5,0x6c,0xc4,0x69,0x4d,0xde,0x94,0x66,0xde,0xb2,0xb7,0x76,0x30,0xd1,0xf7,0x53,0x57 };\n\n    //given signature of data &quot;asaf&quot; using a private key\n    unsigned char signature_bytes[] = { 0xb7,0xa8,0x48,0x1c,0x31,0x80,0xab,0xa3,0x16,0x23,0xc8,0xb8,0x2b,0xf6,0x99,0x5b,0x90,0x64,0xe1,0x4f,0xda,0xe4,0xfc,0x4c,0xa4,0xbe,0x58,0x9c,0xec,0xef,0x9c,0x92,0x56,0x05,0x3e,0xa3,0xcc,0x00,0xd3,0x7e,0xa3,0xab,0x09,0xd7,0xc9,0x3f,0x2b,0x28,0x4f,0x14,0x57,0x2a,0x24,0x56,0x07,0x55,0xc1,0xbe,0xf8,0xbe,0x41,0x8d,0xa3,0xa4,0x79,0xdd,0x27,0x3e,0xc6,0x32,0xe1,0x80,0xe3,0x40,0x27,0x48,0x9f,0xe8,0xb6,0x87,0xee,0x4e,0x8a,0x82,0x6c,0x6c,0x32,0x50,0x7a,0x28,0x63,0xbc,0xb2,0xd4,0x59,0x50,0x66,0x07,0xb9,0x93,0x27,0x1b,0x45,0x35,0x00,0x15,0xe2,0x6e,0x7d,0xf8,0xb6,0x75,0x9b,0x3a,0xb8,0xc5,0xe5,0x1d,0xda,0x4c,0xdc,0x01,0xb2,0x69,0x7f,0x87,0x08,0x6e,0x11,0xb7,0xcd,0x1f,0x9f,0xaa,0xb4,0xe4,0x13,0x4e,0x67,0x1f,0x60,0x9c,0x30,0x7d,0xec,0xf1,0xf4,0x0d,0x72,0x62,0x39,0x51,0x82,0x9f,0x5f,0x25,0x1f,0x4a,0xff,0x73,0x88,0xf1,0x8e,0x2d,0x6e,0xec,0xa9,0x2a,0xea,0xca,0x49,0x39,0x6d,0x00,0xeb,0xb8,0x25,0x2b,0x02,0x06,0xcf,0xf3,0xa7,0xe2,0x14,0xcd,0xd6,0x5c,0xfa,0xd0,0x87,0x6b,0x29,0xc5,0xc4,0xe0,0x97,0x76,0x6b,0xd8,0x7c,0x49,0x63,0x2e,0xc9,0x96,0xf6,0xb2,0x3b,0x2d,0x35,0x77,0x3c,0x33,0x09,0x39,0xa6,0xff,0xb2,0x98,0x27,0x61,0x32,0x5b,0x30,0x30,0xd5,0xee,0xa0,0xcb,0x0a,0xb1,0xc7,0x6d,0x7b,0xf5,0x1a,0x12,0x25,0xe1,0xf0,0x78,0x4f,0xd9,0x54,0x32,0xb7,0x3b,0x6f,0xf3,0x33,0x9e,0xa8,0x58,0x7c,0xa3 };\n\n    struct public_key rsa_pub_key = {\n        .key = public_key_bytes,\n        .keylen = 270,\n        .pkey_algo = &quot;rsa&quot;,\n        .id_type = &quot;X509&quot;\n    };\n\n    struct public_key_signature sig = {\n        .s = signature_bytes,\n        .s_size = 256,\n        .digest = digest,\n        .digest_size = 32,\n        .pkey_algo = &quot;rsa&quot;,\n        .hash_algo = &quot;sha256&quot;\n    };\n\n    int error = public_key_verify_signature1(&amp;rsa_pub_key, &amp;sig);\n    if (error) {\n        pr_info(&quot;error verifying. error %d '%s'\\n&quot;, error, get_error(error));\n        return -1;\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7256847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa6a88fa5584fbc1ef921d50c1e2381?s=128&d=identicon&r=PG&f=1", "display_name": "Asaf Shohet", "link": "https://stackoverflow.com/users/7256847/asaf-shohet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 43103285, "answer_count": 2, "score": 2, "last_activity_date": 1606224633, "creation_date": 1490196291, "last_edit_date": 1490197229, "question_id": 42955989, "link": "https://stackoverflow.com/questions/42955989/why-public-key-verify-signature-returns-error-if-signature-buffer-is-defined-i", "title": "why public_key_verify_signature() returns error if signature buffer is defined in file scope? (linux kernel crypto)", "body": "<p>I'm using linux kernel 4.8.0.26, and writing a simple module verifying digital signature.</p>\n\n<p>If the buffer given to <code>struct public_key_signature</code> as the signature bytes is defined in the file scope - <code>public_key_verify_signature()</code> returns <code>-EINVAL.</code> </p>\n\n<p>If the buffer is defined inside the function - <code>public_key_verify_signature()</code> succeeds.</p>\n\n<p>The code below returns error. to make it work - just move <code>signature_bytes</code> declaration inside <code>rsa_verify()</code>:</p>\n\n<pre><code>/*  \n*  rsa-verify.c - simple kernel module using crypto api to verify digital signature.\n*/\n#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;   \n#include &lt;crypto/public_key.h&gt;\n\nMODULE_LICENSE(\"GPL\");\n\n//public key in der format\nu8 public_key_bytes[] = { 0x30,0x82,0x01,0x0a,0x02,0x82,0x01,0x01,0x00,0xe4,0xde,0x7c,0x12,0x6d,0xaa,0x6b,0xe9,0xb6,0x17,0x58,0x81,0x4e,0xad,0xfb,0x0e,0x21,0x39,0x4b,0x09,0x57,0xdd,0xa0,0xe1,0xfb,0x53,0x4b,0xc3,0xc3,0x0c,0x33,0xa7,0x37,0xfb,0xa8,0x47,0x26,0x2f,0xea,0x70,0x7c,0xbf,0x91,0x52,0xd8,0x2d,0x3a,0xd7,0xd9,0xba,0xa0,0x87,0x6d,0x8d,0x0c,0x7a,0xfe,0x7b,0x6c,0x7c,0x3d,0x57,0x73,0xb8,0xd1,0x55,0x2c,0x1e,0xc5,0x81,0xad,0x1a,0x59,0x71,0x12,0xa3,0x0b,0xee,0xe2,0x7b,0xf8,0x0c,0x8f,0xbf,0x68,0xbf,0x50,0x11,0x8b,0xa7,0xd7,0x00,0xb6,0xdc,0x65,0x4f,0xe3,0x75,0xdd,0xcc,0xa4,0x55,0x0c,0x70,0x27,0x23,0x9b,0x8d,0x1e,0x7d,0x66,0x33,0x06,0xad,0x62,0x37,0x1b,0xd4,0x68,0x50,0xcf,0x26,0x9d,0x60,0x6e,0xc0,0x3c,0xc7,0x15,0xcb,0x76,0x07,0x8a,0xc4,0xd3,0x84,0xf6,0xad,0x51,0xe0,0x63,0x31,0x55,0x4b,0x4a,0x96,0x4d,0x43,0xb7,0xd6,0x57,0xd6,0x6b,0x66,0x5c,0x60,0x35,0xf9,0x32,0x8d,0xe9,0x49,0x5c,0x3d,0x0f,0x77,0xfb,0x87,0x95,0xc2,0x57,0x8a,0xa2,0x9d,0xbe,0x42,0xc2,0x95,0x74,0x80,0xb1,0x10,0xd4,0x6c,0x37,0xb6,0xc5,0xed,0x73,0x2b,0xdd,0x44,0x87,0xf9,0xed,0x14,0xec,0x58,0x46,0x86,0xa4,0x0d,0x38,0x0f,0xcb,0x61,0xf9,0x39,0xf5,0x06,0xe6,0x20,0x0a,0x02,0xed,0x01,0xc7,0x77,0x9e,0x4e,0xaa,0x45,0xcf,0xc9,0xb2,0xa6,0xd1,0xf0,0x2c,0x6e,0x33,0xbb,0x49,0x18,0x7a,0x0a,0x55,0x06,0x7b,0xd8,0x6f,0x08,0xd6,0xc7,0xfd,0x41,0x2b,0x37,0x77,0x40,0x1e,0x63,0xf8,0x27,0x58,0x23,0x02,0x03,0x01,0x00,0x01 };\n\n//SHA-256 digest for the data \"asaf\"\nu8 digest[] = { 0x6f,0x82,0xd3,0x9a,0x2c,0x53,0xaf,0xa5,0x00,0xd4,0x6e,0x0e,0xfb,0xe1,0xa8,0xd5,0x6c,0xc4,0x69,0x4d,0xde,0x94,0x66,0xde,0xb2,0xb7,0x76,0x30,0xd1,0xf7,0x53,0x57 };\n\n//given signature of data \"asaf\" using a private key\nu8 signature_bytes[] = { 0xb7,0xa8,0x48,0x1c,0x31,0x80,0xab,0xa3,0x16,0x23,0xc8,0xb8,0x2b,0xf6,0x99,0x5b,0x90,0x64,0xe1,0x4f,0xda,0xe4,0xfc,0x4c,0xa4,0xbe,0x58,0x9c,0xec,0xef,0x9c,0x92,0x56,0x05,0x3e,0xa3,0xcc,0x00,0xd3,0x7e,0xa3,0xab,0x09,0xd7,0xc9,0x3f,0x2b,0x28,0x4f,0x14,0x57,0x2a,0x24,0x56,0x07,0x55,0xc1,0xbe,0xf8,0xbe,0x41,0x8d,0xa3,0xa4,0x79,0xdd,0x27,0x3e,0xc6,0x32,0xe1,0x80,0xe3,0x40,0x27,0x48,0x9f,0xe8,0xb6,0x87,0xee,0x4e,0x8a,0x82,0x6c,0x6c,0x32,0x50,0x7a,0x28,0x63,0xbc,0xb2,0xd4,0x59,0x50,0x66,0x07,0xb9,0x93,0x27,0x1b,0x45,0x35,0x00,0x15,0xe2,0x6e,0x7d,0xf8,0xb6,0x75,0x9b,0x3a,0xb8,0xc5,0xe5,0x1d,0xda,0x4c,0xdc,0x01,0xb2,0x69,0x7f,0x87,0x08,0x6e,0x11,0xb7,0xcd,0x1f,0x9f,0xaa,0xb4,0xe4,0x13,0x4e,0x67,0x1f,0x60,0x9c,0x30,0x7d,0xec,0xf1,0xf4,0x0d,0x72,0x62,0x39,0x51,0x82,0x9f,0x5f,0x25,0x1f,0x4a,0xff,0x73,0x88,0xf1,0x8e,0x2d,0x6e,0xec,0xa9,0x2a,0xea,0xca,0x49,0x39,0x6d,0x00,0xeb,0xb8,0x25,0x2b,0x02,0x06,0xcf,0xf3,0xa7,0xe2,0x14,0xcd,0xd6,0x5c,0xfa,0xd0,0x87,0x6b,0x29,0xc5,0xc4,0xe0,0x97,0x76,0x6b,0xd8,0x7c,0x49,0x63,0x2e,0xc9,0x96,0xf6,0xb2,0x3b,0x2d,0x35,0x77,0x3c,0x33,0x09,0x39,0xa6,0xff,0xb2,0x98,0x27,0x61,0x32,0x5b,0x30,0x30,0xd5,0xee,0xa0,0xcb,0x0a,0xb1,0xc7,0x6d,0x7b,0xf5,0x1a,0x12,0x25,0xe1,0xf0,0x78,0x4f,0xd9,0x54,0x32,0xb7,0x3b,0x6f,0xf3,0x33,0x9e,0xa8,0x58,0x7c,0xa3 };    \n\nint rsa_verify(void)\n{       \n    // u8 signature_bytes[]... if it was here - it would work\n\n    struct public_key rsa_pub_key = {\n        .key = public_key_bytes,\n        .keylen = (u32)(sizeof(public_key_bytes)),\n        .pkey_algo = \"rsa\",\n        .id_type = \"X509\"\n    };\n\n    struct public_key_signature sig = {\n        .s = signature_bytes,\n        .s_size = (u32)(sizeof(signature_bytes)),\n        .digest = digest,\n        .digest_size = (u8)(sizeof(digest)),\n        .pkey_algo = \"rsa\",\n        .hash_algo = \"sha256\"\n    };\n\n    int error = public_key_verify_signature(&amp;rsa_pub_key, &amp;sig);\n    if (error) {\n        pr_info(\"error verifying. error %d\\n\", error);\n        return -1;\n    }\n\n    pr_info(\"verified successfuly!!!\\n\");   \n    return 0;\n}\n\nint init_module(void)\n{\n    printk(KERN_INFO \"Hello rsa-verify\\n\");\n    return rsa_verify();\n}\n\nvoid cleanup_module(void)\n{\n    printk(KERN_INFO \"Goodbye rsa-verify\\n\");\n}\n</code></pre>\n\n<p>Makefile:</p>\n\n<pre><code>obj-m += rsa-verify.o\n\nall:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules EXTRA_CFLAGS=\"$(EXTRA_CFLAGS)\"\n\nclean:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n</code></pre>\n\n<p>(gcc version 6.1.1)</p>\n"}, {"tags": ["c", "sdl", "sdl-2", "conways-game-of-life"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1490196453, "post_id": 42955950, "comment_id": 73006693, "body": "Why are you subtracting one for the cell itself regardless of whether the cell is alive?"}, {"owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 1, "creation_date": 1490196517, "post_id": 42955950, "comment_id": 73006747, "body": "First of all, this seems like a good issue to track down using the debugger. That being said I have a hunch you might want to subtract the neighbour count only if the cell is alive i.e <code>if(a[x][y]) count--;</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490196639, "post_id": 42955950, "comment_id": 73006851, "body": "...as in <code>else if(a[cy][cx] == DEAD &amp;&amp; countLivingNeighbours(a, cx, cy) == 3)</code> where the count will be 1 short."}, {"owner": {"reputation": 115, "user_id": 1762905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fede9c8855bdbacad502f49db91638d6?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/1762905/sato"}, "reply_to_user": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 0, "creation_date": 1490196797, "post_id": 42955950, "comment_id": 73006984, "body": "@riodoro1 thanks, that seemed to be it! Next issue I need to work out is why random garbage cells appear on the top/bottom of the screen on the first update."}, {"owner": {"reputation": 115, "user_id": 1762905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fede9c8855bdbacad502f49db91638d6?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/1762905/sato"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490196805, "post_id": 42955950, "comment_id": 73006994, "body": "@WeatherVane what do you mean?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490196850, "post_id": 42955950, "comment_id": 73007032, "body": "@Sato that&#39;s an example that proves the other comments: the cell is <code>DEAD</code> but 1 will be subtracted."}, {"owner": {"reputation": 115, "user_id": 1762905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fede9c8855bdbacad502f49db91638d6?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/1762905/sato"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490197036, "post_id": 42955950, "comment_id": 73007172, "body": "@WeatherVane oh I see, thanks!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490197471, "post_id": 42955950, "comment_id": 73007519, "body": "you&#39;re not checking the x/y are in the bounds of the grid?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490197532, "post_id": 42955950, "comment_id": 73007558, "body": "like in <code>countLivingNeighbours</code> if you pass x as 0, then cx starts off as -1 for example"}, {"owner": {"reputation": 115, "user_id": 1762905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fede9c8855bdbacad502f49db91638d6?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/1762905/sato"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490197945, "post_id": 42955950, "comment_id": 73007867, "body": "@ChrisTurner yeah, I plan to fix that. I&#39;ll probably make it loop around infinitely rather than limiting it to within the grid boundaries."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490270649, "post_id": 42955950, "comment_id": 73042841, "body": "when calculating the &#39;life&#39; of a cell, must use the prior iterations cell layout, not the (partially) updated cell layout.  Otherwise, the new layout will be corrupted by the updates."}], "owner": {"reputation": 115, "user_id": 1762905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fede9c8855bdbacad502f49db91638d6?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/1762905/sato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490196203, "creation_date": 1490196203, "question_id": 42955950, "link": "https://stackoverflow.com/questions/42955950/conways-game-of-life-cell-changes-being-calculated-incorrectly-after-changing", "title": "Conway&#39;s Game of Life: cell changes being calculated incorrectly after changing neighbour count function", "body": "<p>Wondering if someone could help me work out this little issue. I've written a function to count the living neighbours of a cell in Conway's Game of Life:</p>\n\n<pre><code>int countLivingNeighbours(int a[][GRID_WIDTH], int x, int y){\n    int count = 0, cx, cy;\n\n    for(cy = y - 1; cy &lt;= y + 1; cy++){\n        for(cx = x - 1; cx &lt;= x + 1; cx++){\n            if(a[cy][cx] == ALIVE){\n                count++;\n            }\n        }\n    }\n\n    // subtract 1 so it's not counting it's own cell\n    count--;\n\n    return count;\n}\n</code></pre>\n\n<p>It takes a 2-dimensional array of all cells as an argument, along with the x and y co-ordinates of the cell we want to check.</p>\n\n<p>When running the program using this function to count living neighbours, it results in a bit of a glitch. It's hard to describe, so I'll post an image of one final cell arrangement I had:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qr4xr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qr4xr.png\" alt=\"Cell example\"></a></p>\n\n<p>Normally, there would be visible patterns, shapes, and blocks, but instead we just get lines.</p>\n\n<p>If anyone could help me, that would be great!</p>\n\n<p>I'll also post the full code, in case I've misidentified the problem:</p>\n\n<pre><code>#include &lt;SDL.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\n#define CELL_SIZE 10\n#define GRID_WIDTH 100\n#define GRID_HEIGHT 100\n\ntypedef enum {ALIVE, DEAD} State;\n\n// General functions\nvoid quitAll(void);\n\n// SDL related visual functions\nvoid drawGrid(SDL_Renderer *r, int winWidth, int winHeight);\nvoid drawCells(SDL_Renderer *r, int a[][GRID_WIDTH]);\n\n// Game of Life functions\nvoid updateCells(int a[][GRID_WIDTH]); // takes cells array as input\nint countLivingNeighbours(int a[][GRID_WIDTH], int x, int y);\n\nint main(int argc, char *argv[]){\n    // Initialise SDL\n    SDL_Init(SDL_INIT_VIDEO);\n\n    // Create window\n    int winWidth = GRID_WIDTH * CELL_SIZE;\n    int winHeight = GRID_HEIGHT * CELL_SIZE;\n\n    SDL_Window *window = SDL_CreateWindow(\n        \"Game of Life\",         // Title\n        SDL_WINDOWPOS_CENTERED, // Initial window x position\n        SDL_WINDOWPOS_CENTERED, // Initial window y position\n        winWidth,               // Window Width\n        winHeight,              // Window Height\n        0                       // Flags\n    );\n\n    if(window == NULL){\n        printf(\"Failed to create window. %s\\n\", SDL_GetError());\n        return 1;\n    }\n\n    // Create renderer\n    SDL_Renderer *renderer = SDL_CreateRenderer(\n        window,                     // Window\n        -1,                         // Monitor index (-1 for first available)\n        SDL_RENDERER_ACCELERATED    // Flags\n    );\n\n    if(renderer == NULL){\n        printf(\"Failed to create renderer. %s\\n\", SDL_GetError());\n        return 1;\n    }\n\n    // Setup event handling + mouse co-ordinate handling\n    SDL_Event event;\n    int mouseX, mouseY;\n    bool mouse_left_down = false;\n    bool mouse_right_down = false;\n\n    // Set all cells to initial state of dead\n    int cells[GRID_HEIGHT][GRID_WIDTH];\n    int cx, cy;\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            cells[cy][cx] = DEAD;\n        }\n    }\n\n    while(1){\n        // Handle events/input\n        while(SDL_PollEvent(&amp;event) != 0){\n            switch(event.type){\n                case SDL_QUIT: // Check if user has quit\n                    return 1;\n\n                case SDL_MOUSEBUTTONDOWN:\n                    if(event.button.button == SDL_BUTTON_LEFT){\n                        mouse_left_down = true;\n                        break;\n                    } else if(event.button.button == SDL_BUTTON_RIGHT){\n                        mouse_right_down = true;\n                        break;\n                    }\n\n                case SDL_MOUSEBUTTONUP:\n                    if(event.button.button == SDL_BUTTON_LEFT){\n                        mouse_left_down = false;\n                        break;\n                    } else if(event.button.button == SDL_BUTTON_RIGHT){\n                        mouse_right_down = false;\n                        break;\n                    }\n\n                // If user presses space, simulate a single change\n                case SDL_KEYDOWN:\n                    if(event.key.keysym.sym == SDLK_SPACE){\n                        updateCells(cells);\n                    }\n\n\n            }\n        }\n\n        // Allow user to draw new living cells\n        if(mouse_left_down == true){\n            SDL_GetMouseState(&amp;mouseX, &amp;mouseY); // Update mouse position\n            cells[mouseY / CELL_SIZE][mouseX / CELL_SIZE] = ALIVE; // Set the clicked on cell to alive\n        }\n\n        // Allow user to kill cells\n        else if(mouse_right_down == true){\n            SDL_GetMouseState(&amp;mouseX, &amp;mouseY); // Update mouse position\n            cells[mouseY / CELL_SIZE][mouseX / CELL_SIZE] = DEAD; // Set the clicked on cell to alive\n        }\n\n\n\n        // Set screen colour to white\n        SDL_SetRenderDrawColor(renderer, 255, 255, 255, 255);\n\n        // Render white to screen (clear screen)\n        SDL_RenderClear(renderer);\n\n        // Draw the grid and living cells\n        drawGrid(renderer, winWidth, winHeight);\n        drawCells(renderer, cells);\n\n        // Update screen\n        SDL_RenderPresent(renderer);\n    }\n\n    // Exit SDL and SDL_image\n    SDL_Quit();\n    return 0;\n}\n\n/*\n1. Any live cell with fewer than two live neighbours dies, as if caused by underpopulation.\n2. Any live cell with two or three live neighbours lives on to the next generation.\n3. Any live cell with more than three live neighbours dies, as if by overpopulation.\n4. Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.\n*/\nvoid updateCells(int a[][GRID_WIDTH]){\n    int new[GRID_HEIGHT][GRID_WIDTH];\n    int cy, cx; // vertical count, horizontal count\n\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            if(a[cy][cx] == ALIVE &amp;&amp; countLivingNeighbours(a, cx, cy) &lt; 2){\n                new[cy][cx] = DEAD;\n            }\n\n            // Any live cell with two or three live neighbours lives on to the next generation.\n            if(a[cy][cx] == ALIVE &amp;&amp; (countLivingNeighbours(a, cx, cy) == 2 || countLivingNeighbours(a, cx, cy) == 3)){\n                new[cy][cx] = ALIVE;\n            }\n\n            // Any live cell with more than three live neighbours dies, as if by overpopulation.\n            else if(a[cy][cx] == ALIVE &amp;&amp; countLivingNeighbours(a, cx, cy) &gt; 3){\n                new[cy][cx] = DEAD;\n            }\n\n            // Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.\n            else if(a[cy][cx] == DEAD &amp;&amp; countLivingNeighbours(a, cx, cy) == 3){\n                new[cy][cx] = ALIVE;\n            }\n\n            else{\n                new[cy][cx] = DEAD;\n            }\n        }\n    }\n\n    // Update all cells into new states\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            a[cy][cx] = new[cy][cx];\n        }\n    }\n}\n\n// THERE'S NO ERROR CHECKING HERE WHICH IS BAD\n// Should ideally check if a cell even exists before checking its state\nint countLivingNeighbours(int a[][GRID_WIDTH], int x, int y){\n    int count = 0, cx, cy;\n\n    for(cy = y - 1; cy &lt;= y + 1; cy++){\n        for(cx = x - 1; cx &lt;= x + 1; cx++){\n            if(a[cy][cx] == ALIVE){\n                count++;\n            }\n        }\n    }\n\n    // subtract 1 so it's not counting it's own cell\n    count--;\n\n    return count;\n}\n\nvoid drawGrid(SDL_Renderer *r, int winWidth, int winHeight){\n    // Draw vertical grid lines\n    for(int v = CELL_SIZE; v &lt; winWidth; v += CELL_SIZE){\n        // Set draw colour to grey\n        SDL_SetRenderDrawColor(r, 110, 110, 110, 110);\n\n        // Draw vertical line\n        SDL_RenderDrawLine(r, v, 0, v, winHeight);\n    }\n\n    // Draw horizontal grid lines\n    for(int h = CELL_SIZE; h &lt; winHeight; h += CELL_SIZE){\n        // Set draw colour to grey\n        SDL_SetRenderDrawColor(r, 110, 110, 110, 110);\n\n        // Draw horizontal line\n        SDL_RenderDrawLine(r, 0, h, winWidth, h);\n    }\n}\n\nvoid drawCells(SDL_Renderer *r, int a[][GRID_WIDTH]){\n    // Define cell width/height\n    SDL_Rect cellRect;\n    cellRect.w = CELL_SIZE + 1; // Same size as one cell +1 so it covers the grid line fully\n    cellRect.h = CELL_SIZE + 1; // Same size as one cell +1 so it covers the grid line fully\n\n    // Draw living cells\n    int cx, cy;\n    for(cy = 0; cy &lt; GRID_HEIGHT; cy++){\n        for(cx = 0; cx &lt; GRID_WIDTH; cx++){\n            if(a[cy][cx] == ALIVE){\n                // Set cell x/y pos\n                cellRect.x = cx * CELL_SIZE;\n                cellRect.y = cy * CELL_SIZE;\n\n                SDL_SetRenderDrawColor(r, 0, 0, 0, 0);\n                SDL_RenderFillRect(r, &amp;cellRect);\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1490196193, "post_id": 42955916, "comment_id": 73006470, "body": "Read about <i>short circuit evaluation</i>. And no, there is no way to know how it will compile. The C standard defines how it will <i>behave</i>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490196311, "post_id": 42955916, "comment_id": 73006581, "body": "@EugeneSh.: short circuit evaluation is only relevant for the posted code if <code>j</code> is <code>volatile</code> or <code>_Atomic</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1490196422, "post_id": 42955916, "comment_id": 73006669, "body": "@EOF Yeah, but I consider the code only as an example of a &quot;complex condition&quot;"}, {"owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "edited": false, "score": 0, "creation_date": 1490196428, "post_id": 42955916, "comment_id": 73006674, "body": "Interesting.  I&#39;ve clarified the specific example I meant, <code>i</code> and <code>j</code> are presented without modifiers"}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "edited": false, "score": 1, "creation_date": 1490196968, "post_id": 42956214, "comment_id": 73007124, "body": "why would <code>do_bar()</code> be called here?  The or statement is true in the original if, so the else if is not triggered, not so?"}, {"owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "reply_to_user": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "edited": false, "score": 0, "creation_date": 1490197037, "post_id": 42956214, "comment_id": 73007173, "body": "because the <code>x &lt; 10</code> has to be true, but the return value of <code>do_bar()</code> also has to be true for the expression to be resolved as true"}, {"owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 0, "creation_date": 1490197080, "post_id": 42956214, "comment_id": 73007205, "body": "Apologies... duff example - see it again."}], "tags": [], "owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "is_accepted": true, "score": 2, "last_activity_date": 1490196990, "last_edit_date": 1490196990, "creation_date": 1490196801, "answer_id": 42956214, "question_id": 42955916, "link": "https://stackoverflow.com/questions/42955916/how-are-if-statements-with-complex-conditions-treated-in-c/42956214#42956214", "title": "How are if statements with complex conditions treated in C?", "body": "<p>It's all about <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">precedence</a>.</p>\n\n<p>Your first expression is handled like so (the braces make it explicit and easy to read):</p>\n\n<pre><code>(i &lt; 6) &amp;&amp; (j &gt; 4)\n</code></pre>\n\n<p>But without knowing the order that the operations happen, there is no knowing. </p>\n\n<p>Example, which of the below are equivelant:</p>\n\n<pre><code>&amp;x[5]\n&amp;(x[5])\n(&amp;x)[5]\n</code></pre>\n\n<p>As you have pointed out, C as a language employs <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">Short-Circuit Evaluation</a>.\nThis means that once it knows the result of a statement, it will stop processing.</p>\n\n<pre><code>x = 3;\nif ((x &lt; 6) || do_foo()) {\n    /* ... */\n}\nif ((x &lt; 10) &amp;&amp; do_bar()) {\n    /* ... */\n}\n</code></pre>\n\n<p>In this situation, the <code>do_foo()</code> function is <em>not called</em>, but the <code>do_bar()</code> function is called.</p>\n\n<p>For this reason, it is a bad idea to place any statement which 'may do something' within a conditional - from both a clarity of intent, as well as a purposeful programming point of view (you may be a precedence expert, but the next guy may not be).</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1490197305, "post_id": 42956335, "comment_id": 73007392, "body": "For further study: this optimization is called <a href=\"https://en.wikipedia.org/wiki/Jump_threading\" rel=\"nofollow noreferrer\">Jump threading</a>"}], "tags": [], "owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "is_accepted": false, "score": 0, "last_activity_date": 1490197358, "last_edit_date": 1490197358, "creation_date": 1490197146, "answer_id": 42956335, "question_id": 42955916, "link": "https://stackoverflow.com/questions/42955916/how-are-if-statements-with-complex-conditions-treated-in-c/42956335#42956335", "title": "How are if statements with complex conditions treated in C?", "body": "<p>If the compiler can prove the condition of an <code>if</code> to always have some value, it may suppress the checking from the generated code. This is usually done if you compile with optimization enabled, where the compiler will try to analyze the code semantically and prove this kind of things.</p>\n\n<p>Using <code>if(0) { /* ... */ }</code> is a common idiom used to remove parts of the code, and I know optimizing compilers won't emit any code for it.</p>\n\n<p>That said, I don't know if any compiler will perform this particular optimization you mentioned: skip the <code>else if</code> entirely in case j > 4, but I wouldn't be surprised in GCC or Clang did, since they perform pretty aggressive code transformations.</p>\n"}], "owner": {"reputation": 559, "user_id": 5941157, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-a-UIp5V6iDM/AAAAAAAAAAI/AAAAAAAAABk/pXUQzjM0qCg/photo.jpg?sz=128", "display_name": "Michael Stachowsky", "link": "https://stackoverflow.com/users/5941157/michael-stachowsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 42956214, "answer_count": 2, "score": 1, "last_activity_date": 1490197358, "creation_date": 1490196159, "last_edit_date": 1490196407, "question_id": 42955916, "link": "https://stackoverflow.com/questions/42955916/how-are-if-statements-with-complex-conditions-treated-in-c", "title": "How are if statements with complex conditions treated in C?", "body": "<p>Consider the following (somewhat nonsensical) if statement:</p>\n\n<pre><code>int i = 0;\nint j = 0;\n\n//get i, j from the user, or a file, or something\n\nif(i &lt; 6 &amp;&amp; j &gt; 4)\n...\nelse if(j &gt; 6)\n...\n</code></pre>\n\n<p>Now, does this compile into something like the following:</p>\n\n<ul>\n<li>compare i &lt; 6, branch to the <code>else if</code> if not</li>\n<li>compare j > 4, branch to the <code>else if</code> if not</li>\n<li><code>else if</code>: compare j > 6 (even though this couldn't be true if the second comparison above were false)</li>\n</ul>\n\n<p>or is there some intelligent way of predicting things that simplifies the logic?</p>\n"}, {"tags": ["c", "double", "scanf"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7618631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19eff631bf5cd7a7c4ef98c8e9ea2dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Kody Rogers", "link": "https://stackoverflow.com/users/7618631/kody-rogers"}, "edited": false, "score": 0, "creation_date": 1490196474, "post_id": 42955899, "comment_id": 73006712, "body": "Thank you so much."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 0, "last_activity_date": 1490196121, "creation_date": 1490196121, "answer_id": 42955899, "question_id": 42955856, "link": "https://stackoverflow.com/questions/42955856/why-am-i-getting-a-segmentation-fault-when-using-scanflf-gpa-if-i-am-using/42955899#42955899", "title": "Why am I getting a segmentation fault when using scanf(&quot;%lf&quot;, GPA) if I am using a pointer for GPA, and scanf(&quot;%lf&quot;, &amp;GPA) if it is not a pointer?", "body": "<p>This:</p>\n\n<pre><code>scanf(\"%s\", currName);\n</code></pre>\n\n<p>is undefined behavior, since <code>currName</code> is not initialized. Using <code>scanf()</code> with plain <code>%s</code> to read in a name is not a good idea. Use a buffer (!) and then tell <code>scanf()</code> the buffer size:</p>\n\n<pre><code>char currName[128];\n\nif(scanf(\"%127s\", currName) == 1)\n{\n}\n</code></pre>\n\n<p>... and check the return value, as shown.</p>\n\n<p>Note that <code>%s</code> stops at the first whitespace character, so you won't be able to read a name containing spaces.</p>\n"}], "owner": {"reputation": 23, "user_id": 7618631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19eff631bf5cd7a7c4ef98c8e9ea2dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Kody Rogers", "link": "https://stackoverflow.com/users/7618631/kody-rogers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 42955899, "answer_count": 1, "score": -1, "last_activity_date": 1490196204, "creation_date": 1490196027, "last_edit_date": 1490196204, "question_id": 42955856, "link": "https://stackoverflow.com/questions/42955856/why-am-i-getting-a-segmentation-fault-when-using-scanflf-gpa-if-i-am-using", "title": "Why am I getting a segmentation fault when using scanf(&quot;%lf&quot;, GPA) if I am using a pointer for GPA, and scanf(&quot;%lf&quot;, &amp;GPA) if it is not a pointer?", "body": "<pre><code>void fillQueueWithStudents(Queue *q)\n{\n  int counter = 1;\n  char answer = 'Y';\n\n  //this signifies the current variables that\n  //are being dealt with\n  char *currName;\n  double GPA;\n\n  student stud;\n  while((answer != 'N') || (answer != 'n'))\n  {\n    printf(\"Please enter the info for student %i \\n\",counter);\n\n    //Gets the name of the current student being entered\n    printf(\"Name: \");\n    scanf(\"%s\", currName);\n    printf(\"\\n\");\n\n    //Gets the gpa of the current student being entered\n    printf(\"GPA: \");\n    scanf(\"%lf\", &amp;GPA); \n    //somewhere here is the problem\n    printf(\"\\n\");\n\n    //makes our student have the current variables\n    stud.name = currName;\n    stud.gpa = GPA;\n\n    //enqueues this student\n    enQueue(q,stud);\n\n    //increments to the next student\n    counter++;\n\n    //This sees if the user wants to enter another student\n    printf(\"Do you want to enter another student. Enter 'N' or 'n' for \n     no. \\n\");\n    scanf(\"%c\", &amp;answer);\n    printf(\"\\n\");\n  }\n}\n</code></pre>\n\n<p>I printed hello before and after the scanf and they both printed. It does not let me enter a value for GPA. I am wondering if it is scanning the entire newline or something like that. I do not understand why it will not let me put in a value. I am guessing it is trying to put too much into the GPA variable. </p>\n\n<p>Below is the complete program.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n  char *name;\n  float gpa;\n}student;\n\n//This struct will represent a node in the queue\ntypedef struct Node\n{\n  student *stud;\n  struct Node *next;\n}QNode;\n\n//This struct will identify the queue\n//It will store the front and rear values to make\n//it easier to enqueue and dequeue\ntypedef struct\n{\n  QNode *front, *rear;\n}Queue;\n\n/*\nThis creates a new node with some data k.\nIt then sets its next value to NULL.\nThen it returns the new node\n\nNote: This node is not yet known to the queue. I will\nuse a separate function to do that\n*/\nQNode* newNode (student *stud)\n{\n  QNode *temp = (QNode*)malloc(sizeof(QNode*));\n  temp-&gt;stud-&gt;gpa = stud-&gt;gpa;\n  temp-&gt;stud-&gt;name = stud-&gt;name;\n  temp-&gt;next = NULL;\n  return temp;\n}\n\n//Creats a empty queue\nQueue* createQueue()\n{\n  Queue *q = (Queue*)malloc(sizeof(Queue*));\n  q-&gt;front = q-&gt;rear = NULL;\n  return q;\n}\n/*\nUses the newNode function to make a new node in our linked list.\nThen it puts that node in the correct place in the queue. This\nis at the back\n*/\nvoid enQueue(Queue *q, student stud)\n{\n  QNode *temp = newNode(&amp;stud);//this creats a new node\n\n  /*\n  Checks if queue is empty, and if it is sets\n  our new node temp to rear and front. Then it\n  ends the function\n  */\n  if(q-&gt;rear == NULL)\n  {\n    q-&gt;front = q-&gt;rear = temp;\n    return;\n  }\n  //sets the current rears next to our new node temp\n  q-&gt;rear-&gt;next = temp;\n  //this makes temp the new rear\n  q-&gt;rear = temp;\n}\n\n/*\nThis function serves/dequeues a node.\nAs always nodes are dequeued from the front of the\nqueue\n*/\n\nQNode *deQueue(Queue *q)\n{\n  //if the queue is empty tell the user by\n  //returning NULL\n  if(q-&gt;rear == NULL)\n  {\n    return NULL;\n  }\n\n  /*\n  I will return front to the user in case they want\n  to use the data included in it. I have to save\n  front first to do that. So I save it hear\n  */\n  QNode *temp = q-&gt;front;\n\n  //Now I make front equal to its next\n  q-&gt;front = q-&gt;front-&gt;next;\n\n  /*\n  This makes rear NULL if front is NULL\n  This means the list is empty and we have dequeued the last\n  node.\n  */\n  if(q-&gt;front == NULL)\n  {\n    q-&gt;rear == NULL;\n  }\n\n  printf(\"The element dequeued was %s \\n\",temp-&gt;stud-&gt;name);\n  //This returns the node we have dequeued\n  return temp;\n}\n\nvoid printQueue(Queue *q)\n{\n  //Check is the queue is empty and if it is stop the\n  //function\n  if(q-&gt;rear == NULL)\n  {\n    return;\n  }\n\n  /*\n  I will now print out each node out one by one.\n  To do this I create a QNode pointer and make it equal to the\n  front. I will then print all contents of front\n  and make temp equal to the next print and repeat this\n  till the end.\n  */\n  QNode *temp = q-&gt;front;\n  while(temp != NULL)\n  {\n    int counter = 1;\n    printf(\"Student %i:      Name: %s          GPA: %f \\n\",\n     counter, temp-&gt;stud-&gt;name, temp-&gt;stud-&gt;gpa);\n\n    //increment the counter to display next student\n    counter++;\n\n    //Get the next node\n    temp = temp-&gt;next;\n  }\n}\n\n/*\nThis function keeps adding students to the queue until the\nuser enters 'N' that signifies they are done\n*/\nvoid fillQueueWithStudents(Queue *q)\n{\n  int counter = 1;\n  char answer = 'Y';\n\n  //this signifies the current variables that\n  //are being dealt with\n  char *currName;\n  float GPA;\n\n  student stud;\n  while((answer != 'N') || (answer != 'n'))\n  {\n    printf(\"Please enter the info for student %i \\n\",counter);\n\n    //Gets the name of the current student being entered\n    printf(\"Name: \");\n    scanf(\"%s\", currName);\n    printf(\"\\n\");\n\n    //Gets the gpa of the current student being entered\n    printf(\"GPA: \");\n    scanf(\"%f\", &amp;GPA);\n    printf(\"\\n\");\n\n    //makes our student have the current variables\n    stud.name = currName;\n    stud.gpa = GPA;\n\n    //enqueues this student\n    enQueue(q,stud);\n\n    //increments to the next student\n    counter++;\n\n    //This sees if the user wants to enter another student\n    printf(\"Do you want to enter another student. Enter 'N' or 'n' for no. \\n\");\n    scanf(\"%c\", &amp;answer);\n    printf(\"\\n\");\n  }\n}\n\nint main()\n{\n  Queue *q = createQueue();\n\n  fillQueueWithStudents(q);\n\n  QNode *temp;\n  do {\n    temp = deQueue(q);\n    free(temp);\n    printQueue(q);\n  } while(temp != NULL);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1490195992, "post_id": 42955780, "comment_id": 73006302, "body": "Yes, if you try to compile this without the <code>donePrinting</code> function, you&#39;ll get a compilation error."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490196136, "post_id": 42955780, "comment_id": 73006427, "body": "Run-time checking will not work, as you will get an error when you <i>build</i> about missing function. And no there is really no way to check if an external symbol exists or not, because C uses the concept of <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\"><i>translation units</i></a>, where each <i>unit</i> is compiled separately from every other <i>unit</i>. The compiler only knows what&#39;s in the <i>current</i> unit, the one it&#39;s currently compiling. There are ways to work around the issue, as mentioned in the answer by Lantig."}], "answers": [{"tags": [], "owner": {"reputation": 2887, "user_id": 2422450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c899826b7012b67268ee1899b40419?s=128&d=identicon&r=PG", "display_name": "Lanting", "link": "https://stackoverflow.com/users/2422450/lanting"}, "is_accepted": false, "score": 2, "last_activity_date": 1490196045, "creation_date": 1490196045, "answer_id": 42955864, "question_id": 42955780, "link": "https://stackoverflow.com/questions/42955780/c-check-if-a-function-is-defined-in-main-c-from-external-file/42955864#42955864", "title": "c: check if a function is defined in main.c from external file", "body": "<p>Have a look at <a href=\"https://en.wikipedia.org/wiki/Weak_symbol\" rel=\"nofollow noreferrer\">weak symbols</a></p>\n\n<p>A weak symbol allows you to provide a default implementation (that possibly does nothing), that can be overwritten by your <code>main.c</code> if you feel the need to do so.</p>\n"}, {"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1490196241, "creation_date": 1490196241, "answer_id": 42955968, "question_id": 42955780, "link": "https://stackoverflow.com/questions/42955780/c-check-if-a-function-is-defined-in-main-c-from-external-file/42955968#42955968", "title": "c: check if a function is defined in main.c from external file", "body": "<p>A mild form of dependency injection is what you need. Pass a pointer to the function that needs executing into <code>printHello</code>:</p>\n\n<pre><code>void printHello(void (*postPrintCB)(void)) {\n    printf(\"Hello World!\\n\");\n\n    // Check if donePrinting is defined in main.c here and call it if it is\n    if (postPrintCB)\n      postPrintCB(); \n}\n</code></pre>\n\n<p>That way, projects with a <code>donePrinting</code> function can call it like this:</p>\n\n<pre><code>printHello(donePrinting);\n</code></pre>\n\n<p>And projects without a <code>donePrinting</code> function can call it without:</p>\n\n<pre><code>printHello((void(*)(void))0);\n</code></pre>\n\n<p>You can of course typedef this thing a bit to make it easier on the eyes:</p>\n\n<pre><code>typedef void postPrintCB(void);\n#define NULL_POST_PRINT_CB ((postPrintCB*)0)\n\nvoid printHello(postPrintCB* callback);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1490196700, "creation_date": 1490196700, "answer_id": 42956170, "question_id": 42955780, "link": "https://stackoverflow.com/questions/42955780/c-check-if-a-function-is-defined-in-main-c-from-external-file/42956170#42956170", "title": "c: check if a function is defined in main.c from external file", "body": "<p>Fix it at linking</p>\n\n<p>Require all projects to define <code>donePrinting()</code>. Just add a function that does nothing to the projects that lack it. Or provide a central definition in a separate file and the projects that need an empty definition can add that file to their build step.</p>\n"}], "owner": {"reputation": 845, "user_id": 6073960, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/69679e1ac6a4b65c9642d53d9c833ba7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/6073960/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1490196975, "creation_date": 1490195843, "last_edit_date": 1490196049, "question_id": 42955780, "link": "https://stackoverflow.com/questions/42955780/c-check-if-a-function-is-defined-in-main-c-from-external-file", "title": "c: check if a function is defined in main.c from external file", "body": "<p>I have a .c file (external.c) that is going to be used in several different projects:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid printHello() {\n    printf(\"Hello World!\\n\");\n\n    // Check if donePrinting is defined in main.c here and call it if it is\n    donePrinting(); \n}\n</code></pre>\n\n<p>These different projects all have a main.c that call printHello(), but not all of them have donePrinting in them.  For example some look like this:</p>\n\n<pre><code>#include \"external.h\"\n#include &lt;stdio.h&gt;\n\nint donePrinting() {\n    printf(\"Done printing Hello World\\n\");\n}\n\nint main()\n{\n   printHello();\n   return 0;\n}\n</code></pre>\n\n<p>while others look like this:   </p>\n\n<pre><code>#include \"external.h\"\n#include &lt;stdio.h&gt;\n\nint main()\n{\n   printHello();\n   return 0;\n}\n</code></pre>\n\n<p>Is there a way I can check if donePrinting() exists when inside external.c?  If not what would be a work around for this?  I was thinking of defining a global variable in main.c that said if donePrinting exists or not and checking that global variable in printHello().</p>\n"}, {"tags": ["c", "mpu"], "comments": [{"owner": {"reputation": 1081, "user_id": 1835621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0003b0ad475c4569fb5152ee3f6b943?s=128&d=identicon&r=PG", "display_name": "Yaron", "link": "https://stackoverflow.com/users/1835621/yaron"}, "edited": false, "score": 2, "creation_date": 1490194622, "post_id": 42955255, "comment_id": 73005207, "body": "Can you please show the current code and output and desired output?"}, {"owner": {"reputation": 3, "user_id": 7026114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f17c9020b4a4799731d7889823082bac?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/7026114/art"}, "reply_to_user": {"reputation": 1081, "user_id": 1835621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0003b0ad475c4569fb5152ee3f6b943?s=128&d=identicon&r=PG", "display_name": "Yaron", "link": "https://stackoverflow.com/users/1835621/yaron"}, "edited": false, "score": 0, "creation_date": 1490195432, "post_id": 42955255, "comment_id": 73005879, "body": "What I do in matlab is something like this: <a href=\"https://www.mathworks.com/help/supportpkg/mobilesensor/examples/counting-steps-by-capturing-acceleration-data-from-your-android-device.html?prodcode=ML\" rel=\"nofollow noreferrer\">mathworks.com/help/supportpkg/mobilesensor/examples/&hellip;</a>   The desired output is will clearly distinguished peaks in the output (for better working with the peakfind algorithm)  What is the output with 10steps is this <a href=\"http://i.imgur.com/N4zfCNj.png\" rel=\"nofollow noreferrer\">i.imgur.com/N4zfCNj.png</a>   and the output from IMU"}, {"owner": {"reputation": 3, "user_id": 7026114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f17c9020b4a4799731d7889823082bac?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/7026114/art"}, "reply_to_user": {"reputation": 1081, "user_id": 1835621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0003b0ad475c4569fb5152ee3f6b943?s=128&d=identicon&r=PG", "display_name": "Yaron", "link": "https://stackoverflow.com/users/1835621/yaron"}, "edited": false, "score": 0, "creation_date": 1490195941, "post_id": 42955255, "comment_id": 73006258, "body": "9:19:16\t-1440\t16072\t2292 9:19:17\t-1380\t15510\t4050 9:19:18\t212\t17602\t3040 9:19:19\t-2048\t19548\t-3334 9:19:20\t-4478\t24740\t21200 .. From IMU i can write out to the file 1 value of X,Y,Z in 1sec....maybe this is my problem? I doesnt have for example. in 1sec 10 value of X,Y,Z acceleration ?"}, {"owner": {"reputation": 1081, "user_id": 1835621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0003b0ad475c4569fb5152ee3f6b943?s=128&d=identicon&r=PG", "display_name": "Yaron", "link": "https://stackoverflow.com/users/1835621/yaron"}, "edited": false, "score": 0, "creation_date": 1490196240, "post_id": 42955255, "comment_id": 73006521, "body": "Better edit the question, it&#39;s incomprehensible that way, also the links are broken."}, {"owner": {"reputation": 3, "user_id": 7026114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f17c9020b4a4799731d7889823082bac?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/7026114/art"}, "reply_to_user": {"reputation": 1081, "user_id": 1835621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0003b0ad475c4569fb5152ee3f6b943?s=128&d=identicon&r=PG", "display_name": "Yaron", "link": "https://stackoverflow.com/users/1835621/yaron"}, "edited": false, "score": 0, "creation_date": 1490254729, "post_id": 42955255, "comment_id": 73032330, "body": "Real question is...how (which file,where) to change the accelerometer sensitivity in library? <a href=\"https://github.com/mrbichel/linux-mpu9150\" rel=\"nofollow noreferrer\">github.com/mrbichel/linux-mpu9150</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7026114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f17c9020b4a4799731d7889823082bac?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/7026114/art"}, "edited": false, "score": 0, "creation_date": 1490364231, "post_id": 42974905, "comment_id": 73092462, "body": "thank you for the answer. I have already calibrated accelerometer/magnetometer. This effect  calibrated XYZ values from the sensor,but I working with RAW X,Y,Z values. I figured out how to read from register, and I can now confirm with sensitivity in tune. (is +/- 2g). Now I have problem, when I walking with imu what is at my feet, I only can find peaks pretty good,when I walking very slowly , tempo: 1 step / 1,5-2 secund .  When I walk in normal tempo, I can find only for example. 40 step I find with my algorithm only 13 step. have anybody some advice how can I increment measurement ?"}], "tags": [], "owner": {"reputation": 1081, "user_id": 1835621, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0003b0ad475c4569fb5152ee3f6b943?s=128&d=identicon&r=PG", "display_name": "Yaron", "link": "https://stackoverflow.com/users/1835621/yaron"}, "is_accepted": false, "score": 0, "last_activity_date": 1490269033, "creation_date": 1490269033, "answer_id": 42974905, "question_id": 42955255, "link": "https://stackoverflow.com/questions/42955255/how-to-change-mpu9150-sensitivity/42974905#42974905", "title": "how to change MPU9150 sensitivity?", "body": "<p>The github link you posted contains a calibration section, they suggest using <code>imucal</code> here:</p>\n\n<p><a href=\"https://github.com/mrbichel/linux-mpu9150/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/mrbichel/linux-mpu9150/blob/master/README.md</a></p>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 3, "user_id": 7026114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f17c9020b4a4799731d7889823082bac?s=128&d=identicon&r=PG&f=1", "display_name": "art", "link": "https://stackoverflow.com/users/7026114/art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491226964, "creation_date": 1490194552, "last_edit_date": 1491226964, "question_id": 42955255, "link": "https://stackoverflow.com/questions/42955255/how-to-change-mpu9150-sensitivity", "title": "how to change MPU9150 sensitivity?", "body": "<p>I want to know what sensitivity I am working with on an mpu 9150  (+ Raspberry PI).</p>\n\n<p><a href=\"https://github.com/mrbichel/linux-mpu9150\" rel=\"nofollow noreferrer\">this is the library I am using: linux-mpu9150</a></p>\n\n<p><a href=\"https://www.invensense.com/products/motion-tracking/9-axis/mpu-9150/\" rel=\"nofollow noreferrer\">mpu 9150 page</a></p>\n\n<p>I want the accelerometer to have more sensitivity(so I must set it to 2+/-g ?!?).</p>\n\n<p>When I count the steps, there aren't enough...I take 10 steps, I count 3-5 steps with matlab (with <code>peakfinds</code> or counting zero crossing)</p>\n\n<p>Example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/27lhZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/27lhZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Accelerometer at my foot, or at my shin (make similar output)</p>\n"}, {"tags": ["c", "io"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490194430, "post_id": 42955164, "comment_id": 73005044, "body": "Are you on windows? Did you open the file in regular old nodepad?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1490194504, "post_id": 42955164, "comment_id": 73005103, "body": "Don&#39;t use <code>gets</code>. Don&#39;t ever use <code>gets</code>. It&#39;s dangerous, have been obsolete since the C99 standard, and removed completely in the C11 standard."}, {"owner": {"reputation": 11, "user_id": 7643863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxoXJ.jpg?s=128&g=1", "display_name": "hageApple", "link": "https://stackoverflow.com/users/7643863/hageapple"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490194612, "post_id": 42955164, "comment_id": 73005199, "body": "@StoryTeller yes i am on windows using cygwin and normal notepad that come inbuilt with the system"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490194632, "post_id": 42955164, "comment_id": 73005219, "body": "As for your problem, can you please show some example input, and the expected and actual output from that input?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490194663, "post_id": 42955164, "comment_id": 73005247, "body": "Right. Then open the file in cygwin&#39;s vi or emacs... the new line is there. Notepad is just picky"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1490194676, "post_id": 42955164, "comment_id": 73005262, "body": "When you installed Cygwin, did you tell it to translate newlines? Newlines on Windows and most other non-Windows systems are not the same. On Windows a newline is <code>&quot;\\r\\n&quot;</code>, in POSIX systems (which Cygwin emulates) newline is plain <code>&quot;\\n&quot;</code>."}, {"owner": {"reputation": 11, "user_id": 7643863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxoXJ.jpg?s=128&g=1", "display_name": "hageApple", "link": "https://stackoverflow.com/users/7643863/hageapple"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490195138, "post_id": 42955164, "comment_id": 73005648, "body": "@Someprogrammerdude tanc its working fine now with &quot;\\r\\n&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490195223, "post_id": 42955164, "comment_id": 73005712, "body": "IMO the only reason to use Notepad is because you have not discovered the free <a href=\"https://notepad-plus-plus.org/\" rel=\"nofollow noreferrer\">Notepad++</a> in which you can select the line ending style, and convert one to another, and has all kinds of other stuff."}, {"owner": {"reputation": 11, "user_id": 7643863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxoXJ.jpg?s=128&g=1", "display_name": "hageApple", "link": "https://stackoverflow.com/users/7643863/hageapple"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490195606, "post_id": 42955164, "comment_id": 73006015, "body": "@WeatherVane i did have Notepad++ earlier but my system got corrupted and lost all my software. will download and install it now"}, {"owner": {"reputation": 4527, "user_id": 541065, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/447f6522620ddb164d15f777e8719bed?s=128&d=identicon&r=PG", "display_name": "Nikolaj Dam Larsen", "link": "https://stackoverflow.com/users/541065/nikolaj-dam-larsen"}, "edited": false, "score": 0, "creation_date": 1490197808, "post_id": 42955164, "comment_id": 73007765, "body": "Please, be sure to fix that buffer-overflow waiting to happen at <code>gets()</code> as others have pointed out as well."}], "answers": [{"tags": [], "owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "is_accepted": false, "score": 1, "last_activity_date": 1490194880, "creation_date": 1490194880, "answer_id": 42955395, "question_id": 42955164, "link": "https://stackoverflow.com/questions/42955164/notepad-dont-recognize-new-line-character-n-but-works-fine-with-other-specia/42955395#42955395", "title": "notepad don&#39;t recognize new line character &#39;\\n&#39; but works fine with other special character such as tab", "body": "<p>Notepad recognizes a <code>\\r\\n</code> (carriage return, followed immediately by newline) as a line break. Although, some other editors might recognize a <code>\\n</code> by itself, as do all Unix utilities.</p>\n\n<p>Also (and more importantly): it's <a href=\"http://c-faq.com/stdio/getsvsfgets.html\" rel=\"nofollow noreferrer\">not a good idea to use <code>gets</code></a> for unknown input sources.</p>\n"}], "owner": {"reputation": 11, "user_id": 7643863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxoXJ.jpg?s=128&g=1", "display_name": "hageApple", "link": "https://stackoverflow.com/users/7643863/hageapple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490195420, "creation_date": 1490194362, "last_edit_date": 1490195420, "question_id": 42955164, "link": "https://stackoverflow.com/questions/42955164/notepad-dont-recognize-new-line-character-n-but-works-fine-with-other-specia", "title": "notepad don&#39;t recognize new line character &#39;\\n&#39; but works fine with other special character such as tab", "body": "<p>I am trying to read input string from keyboard and write it into a text file called dFile.txt in my program using fputs(). Since fputs() don't add new line i have explicitly added new line in my code but when i check my output file it did not add any new line. I have added tab \"\\t\" just to cross check if note pad dont recognize any special character but it is working fine with it. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main()\n{\n    char arr[100];\n    FILE *dest;\n    dest=fopen(\"dFile.txt\",\"w\");\n    puts(\"enter the string\");\n    while(strlen(gets(arr))&gt;0)\n    {\n        fputs(arr,dest);\n        fputs(\"\\n\",dest);\n        fputs(\"\\t\",dest);                  \n    }\n    fclose(dest);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "syntax"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1490194366, "post_id": 42955150, "comment_id": 73004974, "body": "The if-else isn&#39;t nested."}, {"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 1, "creation_date": 1490194418, "post_id": 42955150, "comment_id": 73005032, "body": "Yes it is and its more of used as &quot;else if(condition)&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7752017"}, "edited": false, "score": 0, "creation_date": 1490194493, "post_id": 42955150, "comment_id": 73005096, "body": "I cut off some of my code just to show the top part, the code goes on through different Fine levels which is nested if-else I think."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490194545, "post_id": 42955150, "comment_id": 73005145, "body": "Be that as it may, the code you posted doesn&#39;t have the if-else nested in anything. Only the last if is nested."}, {"owner": {"reputation": 192, "user_id": 7607686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435f7fca50284f6317909c183bd89a22?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/7607686/john"}, "edited": false, "score": 0, "creation_date": 1490194549, "post_id": 42955150, "comment_id": 73005148, "body": "Though, it&#39;s fine, and produces smaller code (most likely) - a more optimized approach would be to embed the speeding (assuming speed limit is otherwise contained in the if-else if structure) - one less condition to check (print happens either way, I&#39;m assuming)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7752017"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490194649, "post_id": 42955150, "comment_id": 73005230, "body": "@StoryTeller Alright, I&#39;ll remember for next time to add the full code. I thought people would see that the code continued into a nested if-else without having to paste a bigger part of it, it&#39;s why I included the bottom if."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490194962, "post_id": 42955150, "comment_id": 73005506, "body": "You don&#39;t always need to add the full code. But the question must be in the terms of the code you have shown, not the code we can&#39;t see."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7752017"}, "edited": false, "score": 0, "creation_date": 1490194957, "post_id": 42955236, "comment_id": 73005499, "body": "Thanks for all the feedback. I hadn&#39;t known about the else if. It&#39;s only our second lab and I think the tutor is more looking for readability, I did find some of these alternative methods when I searched but I think he might want us to stick to the concepts we&#39;ve learnt so far because everything is so new. It&#39;s why I was wondering the question.   The responses are so fast here...it&#39;s crazy."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1490194513, "creation_date": 1490194513, "answer_id": 42955236, "question_id": 42955150, "link": "https://stackoverflow.com/questions/42955150/an-if-statement-right-before-nested-if-else/42955236#42955236", "title": "An IF statement right before nested IF-ELSE", "body": "<p>Yes, syntactically there's no problem. You can have any number of <code>if</code> statement and <code>if-else</code> statement next to each other. It is mainly about the readability and maintainability of the code which requires alternate possible approaches.</p>\n\n<p>For example, a better \"grouping\" would be</p>\n\n<pre><code>if (more than limit)\n{\n    if (more than higher limit) {...}\n    else if (more than middle limit) {...}\n    else {....}\n}\nelse\n{\n    //normal\n}\n</code></pre>\n\n<p>over</p>\n\n<pre><code>if (more than limit) {...}\nif (more than higher limit) {...}\nelse if (more than middle limit) {...}\nelse if {some other condition}\nelse\n{\n    //normal\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 0, "last_activity_date": 1490194677, "creation_date": 1490194677, "answer_id": 42955318, "question_id": 42955150, "link": "https://stackoverflow.com/questions/42955150/an-if-statement-right-before-nested-if-else/42955318#42955318", "title": "An IF statement right before nested IF-ELSE", "body": "<p>Yes, you see it quite a lot. However, the normal way to format it is not to add an additional level of indenting and it is normal to put the else and the if on the same line. This is so you can have as many of these as you like without going off the right hand side of the screen i.e.</p>\n\n<pre><code>if(speed &gt;= 80)\n{\n    printf(\"A fine of $%d has been issued!\\n\", FINE_C);\n}\nelse if(speed &gt;= 70)\n{ \n    // whatever\n}\nelse if (speed &gt;= 60)\n{\n    // whatever\n}\nelse if (speed &gt;= 50)\n// etc\n</code></pre>\n\n<p>It's like a slightly more flexible version of a switch statement.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I see I answered the wrong question. The above is all fine, but if you are asking if this is OK</p>\n\n<pre><code>if(speed &gt; SPEED_LIMIT)\n    printf(\"Speeding!\\n\");\n\nif(speed &gt;= 80) ...\n</code></pre>\n\n<p>Then yes, although if the speed limit is more than 80, the logic will be wrong, so it would be better to structure it thus:</p>\n\n<pre><code>    if(speed &gt; SPEED_LIMIT)\n    {\n        printf(\"Speeding!\\n\");\n\n        if(speed &gt;= 80) ...\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 7553110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A18Xc.jpg?s=128&g=1", "display_name": "kubre", "link": "https://stackoverflow.com/users/7553110/kubre"}, "is_accepted": false, "score": 0, "last_activity_date": 1490195036, "creation_date": 1490195036, "answer_id": 42955463, "question_id": 42955150, "link": "https://stackoverflow.com/questions/42955150/an-if-statement-right-before-nested-if-else/42955463#42955463", "title": "An IF statement right before nested IF-ELSE", "body": "<p>No there is no problem while doing this.Consider these two as separably, No matter what the condition satisfies or not The only thing to notice here is that if first condition is true/false (no matter what) next if will still be executed. If next condition is true then it will be executed then else will be ignored.</p>\n\n<p>Until you want second condition let execute no matter first will be true or false.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1490204521, "post_id": 42955506, "comment_id": 73012372, "body": "<i>&quot;All 3 of your ifs for instance can be made in a nested if/else like this, which in my opinion (and a lot of other programmers) looks a lot sleeker.&quot;</i> No, because you changed the semantics of the program."}], "tags": [], "owner": {"reputation": 193, "user_id": 7334065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b08b793fed5b0bc873d1625a7c41526?s=128&d=identicon&r=PG&f=1", "display_name": "Dax", "link": "https://stackoverflow.com/users/7334065/dax"}, "is_accepted": false, "score": 0, "last_activity_date": 1490195159, "creation_date": 1490195159, "answer_id": 42955506, "question_id": 42955150, "link": "https://stackoverflow.com/questions/42955150/an-if-statement-right-before-nested-if-else/42955506#42955506", "title": "An IF statement right before nested IF-ELSE", "body": "<p>It's not necessarily a bad thing, however, being consistent in your code is something you should teach yourself from the beginning of your programming career. :)</p>\n\n<p>All 3 of your ifs for instance can be made in a nested if/else like this, which in my opinion (and a lot of other programmers) looks a lot sleeker.</p>\n\n<pre><code>if(speed &gt; SPEED_LIMIT) {\n    printf(\"Speeding!\\n\");\n} else if(speed &gt;= 80) {\n    printf(\"A fine of $%d has been issued!\\n\", FINE_C);\n} else {\n    /* whatever happens when speed is greater or equal to 70 /*\n}\n</code></pre>\n\n<p>Consistency is quite important in bigger projects. Not only for yourself, but also for your colleagues. When 2 functions for example which do the same thing are written in different ways, it's more work to understand what they do, only to end up realizing they do the same thing. Quite frustrating, no? ;)</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Coding_conventions\" rel=\"nofollow noreferrer\">Here</a> you can find some coding conventions which are some guidelines you can follow, ofcourse, your teacher or in the future your company can give you other conventions you have to follow.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7752017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1490204315, "creation_date": 1490194324, "last_edit_date": 1490204315, "question_id": 42955150, "link": "https://stackoverflow.com/questions/42955150/an-if-statement-right-before-nested-if-else", "title": "An IF statement right before nested IF-ELSE", "body": "<p>My question is regarding whether the below snippet is considered good program structure.</p>\n\n<pre><code>if(speed &gt; SPEED_LIMIT)\n    printf(\"Speeding!\\n\");\n\nif(speed &gt;= 80)\n{\n    printf(\"A fine of $%d has been issued!\\n\", FINE_C);\n}\nelse\n    if(speed &gt;= 70)\n</code></pre>\n\n<p>Is it alright to have a Basic <code>if</code> statement before then going into a nested <code>if-else</code>?</p>\n\n<p>Might be a weird question, only the second week into learning programming and our unit is in C.</p>\n"}, {"tags": ["python", "c", "python-2.7"], "comments": [{"owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1490194059, "post_id": 42955022, "comment_id": 73004710, "body": "How does it fail?"}, {"owner": {"reputation": 133, "user_id": 3753231, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae66c6a32eb588a63df8298aad156df7?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/3753231/justin"}, "reply_to_user": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1490194408, "post_id": 42955022, "comment_id": 73005022, "body": "On my first assert which I think is caused by it not finding my module in the current directory @Vallentin"}, {"owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1490194537, "post_id": 42955022, "comment_id": 73005136, "body": "You remember to take the path <code>PyObject *path = PyObject_GetAttrString(PyImport_ImportModule(&quot;sys&quot;), &quot;path&quot;)</code> and <code>PyList_Append(path, ...)</code> the current working directory of your application?"}, {"owner": {"reputation": 452, "user_id": 1082321, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e6c4e54101fa674f2c729aa56639ba17?s=128&d=identicon&r=PG", "display_name": "Patrik Polakovic", "link": "https://stackoverflow.com/users/1082321/patrik-polakovic"}, "edited": false, "score": 0, "creation_date": 1490194621, "post_id": 42955022, "comment_id": 73005206, "body": "Check if exception is set (if any) <code>if(PyErr_Occurred()) PyErr_Print();</code>"}, {"owner": {"reputation": 133, "user_id": 3753231, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae66c6a32eb588a63df8298aad156df7?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/3753231/justin"}, "reply_to_user": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "edited": false, "score": 0, "creation_date": 1490195485, "post_id": 42955022, "comment_id": 73005927, "body": "I tried your suggestion and I am still getting Assertion failed: (module != NULL) @Vallentin"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1490198976, "post_id": 42955022, "comment_id": 73008631, "body": "Try using:  <code>pName = PyString_FromString((char*)&quot;dizzle&quot;);         assert(pName != NULL);          pModule = PyImport_Import(pName);         assert(pModule != NULL);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 18987, "user_id": 2470818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c3e0df5ee75b18ce0c8aeadf4433e151?s=128&d=identicon&r=PG&f=1", "display_name": "vallentin", "link": "https://stackoverflow.com/users/2470818/vallentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1490203391, "last_edit_date": 1490203391, "creation_date": 1490198609, "answer_id": 42956975, "question_id": 42955022, "link": "https://stackoverflow.com/questions/42955022/using-the-python-api-in-c-not-working-on-mac/42956975#42956975", "title": "Using the python api in c not working on mac", "body": "<p>I was able to recreate the problem. However note that I did so on Windows. The solution should be the same. I mentioned in the comments that it could be something with <code>sys.path</code>. Which after testing actually was the problem.</p>\n\n<p>Right after calling <code>Py_Initialize()</code> do the following:</p>\n\n<pre><code>PyObject *sys = PyImport_ImportModule(\"sys\");\nPyObject *path = PyObject_GetAttrString(sys, \"path\");\nPyList_Append(path, PyUnicode_FromString(\"...\"));\n</code></pre>\n\n<p>Where you replace <code>...</code> with something that retrieves your application's current working directory (Which in your case would be the directory containing the <code>dizzle.py</code> file).</p>\n\n<p>You can also check:</p>\n\n<pre><code>PyRun_SimpleString(\"print(os.getcwd())\");\n</code></pre>\n\n<p>If it prints the current working directory of your application, then you can equally do the following right after calling <code>Py_Initialize()</code>:</p>\n\n<pre><code>PyRun_SimpleString(\"sys.path.append(os.getcwd())\");\n</code></pre>\n\n<p>Doing either of those makes <code>assert(module != NULL)</code> pass for me.</p>\n\n<p>If it does have something to do with <code>PYTHONPATH</code> (which I doubt based on your error). Then you can use <code>Py_SetPythonHome(L\"/path/to/python\")</code>.</p>\n"}], "owner": {"reputation": 133, "user_id": 3753231, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae66c6a32eb588a63df8298aad156df7?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/3753231/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 42956975, "answer_count": 1, "score": 0, "last_activity_date": 1490203391, "creation_date": 1490194031, "last_edit_date": 1490194332, "question_id": 42955022, "link": "https://stackoverflow.com/questions/42955022/using-the-python-api-in-c-not-working-on-mac", "title": "Using the python api in c not working on mac", "body": "<p>I am trying to import my python file that is in the same directory as my main.c file but for some reason it will not work. I keeps failing at PyImport_ImportModule('dizzle').  Any help would be greatly appreciated I'm on a Mac (*I can get this to work on Ubuntu which is strange) I have PYTHONPATH set.</p>\n\n<pre><code>mytestfolder \n   main.c\n   dizzle.py\n</code></pre>\n\n<p>Here is my main.c </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;Python/Python.h&gt;\n\nint main()\n{ \n  char *xx = getpimacaddress2();\n  printf(\"%s\", xx);\n\n}\n\nchar *getpimacaddress2()\n{\n\n\n\n    Py_Initialize();\n\n\n    PyObject* module = PyImport_ImportModule(\"dizzle\");\n    assert(module != NULL);\n\n    PyObject* klass = PyObject_GetAttrString(module, \"SnowTest\");\n    assert(klass != NULL);\n\n    PyObject* instance = PyInstance_New(klass, NULL, NULL);\n    assert(instance != NULL);\n\n    PyObject* result = PyObject_CallMethod(instance, \"add_test\", \"(ii)\", 10, 34);\n    assert(result != NULL);\n\n    Py_Finalize();\n\n    return PyString_AsString(result);\n}\n</code></pre>\n\n<p>Python file dizzle.py</p>\n\n<pre><code>class SnowTest:\n\n  def add_test(self, x, y):\n    z = x + y \n    return str(z)\n</code></pre>\n"}, {"tags": ["c", "http", "get", "libcurl"], "comments": [{"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1490193541, "post_id": 42954760, "comment_id": 73004256, "body": "Do you change memory pointer for parsing new chunk of JSON?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1490193575, "post_id": 42954760, "comment_id": 73004288, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1490195176, "post_id": 42954760, "comment_id": 73005681, "body": "While you&#39;re thinking about how to create a MCVE, here&#39;s another thing to think about (and which is hinted about in the comment by @tilz0R): In the second (and all following) iterations of the loop, what is the contents of <code>chunk</code>?"}, {"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 1, "creation_date": 1490195929, "post_id": 42954760, "comment_id": 73006246, "body": "Are you sure you&#39;re <i>fetching</i> a new &quot;Chuck Norris fact&quot; each time you call <code>curl_easy_perform</code>? If you&#39;re sure of that, are you sure that your curl callbacks are <i>writing</i> the new fact into the chunk each time? It&#39;s very hard for people here to help you debug this unless you paste enough code in here for them to see what you fetch each time and how you write it into the chunk. Also: consider using a debugger and finding out for yourself. You might find your bug faster than by asking online."}, {"owner": {"reputation": 195, "user_id": 7419679, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/201735092000ec70e4246c77437ae490?s=128&d=identicon&r=PG&f=1", "display_name": "omrisim210", "link": "https://stackoverflow.com/users/7419679/omrisim210"}, "edited": false, "score": 0, "creation_date": 1490203800, "post_id": 42954760, "comment_id": 73011918, "body": "Thanks for the comments everyone, I&#39;ll take a look at my callback function (and there&#39;s a link to all of my code in the post, where it says &quot;a simple program&quot;)"}], "owner": {"reputation": 195, "user_id": 7419679, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/201735092000ec70e4246c77437ae490?s=128&d=identicon&r=PG&f=1", "display_name": "omrisim210", "link": "https://stackoverflow.com/users/7419679/omrisim210"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490193451, "creation_date": 1490193451, "question_id": 42954760, "link": "https://stackoverflow.com/questions/42954760/why-doesnt-my-code-fetch-new-data-on-every-cycle-of-the-loop", "title": "Why doesn&#39;t my code fetch new data on every cycle of the loop?", "body": "<p>I'm writing <a href=\"https://github.com/omrisim210/chuck\" rel=\"nofollow noreferrer\">a simple program</a> in C using ncurses, cJSON and libcurl that fetches Chuck Norris facts when you press a key and for some reason the fact stays the same no matter how many times it runs.</p>\n\n<p>I believe the problematic code is <a href=\"https://github.com/omrisim210/chuck/blob/master/main.c#L46\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>for(;;) {\n    /* get the json data */\n    res = curl_easy_perform(curl_handle);\n\n    /* check for errors */\n    if (res != CURLE_OK) {\n        fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",\\\n        curl_easy_strerror(res));\n    } else {\n        /*\n         * Now, our chunk.memory points to a memory block that is chunk.size\n         * bytes big and contains the remote file.\n         *\n         * Do something nice with it!\n         */\n\n        cJSON* root   = cJSON_Parse((char *) chunk.memory);\n        char*  joke   = cJSON_GetObjectItem(root, \"value\")-&gt;valuestring;\n        printw(\"Here's a joke:\\n %s\\n\", joke);\n        cJSON_Delete(root);\n        getch();\n    }\n}\n</code></pre>\n\n<p>Why does it not work as expected and what is the correct way to write this?</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490192979, "post_id": 42954541, "comment_id": 73003777, "body": "Please pick a language, C or C++.  With C++, it is approximately a 3 or 4 line solution using the algorithm functions."}, {"owner": {"reputation": 1069, "user_id": 4478454, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-uel-Wjw028s/AAAAAAAAAAI/AAAAAAAAAEw/p7DTIw25IfM/photo.jpg?sz=128", "display_name": "C&#226;rn\u0103ciov", "link": "https://stackoverflow.com/users/4478454/c%c3%a2rn%c4%83ciov"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490193043, "post_id": 42954541, "comment_id": 73003824, "body": "@PaulMcKenzie I did, sorry, didn&#39;t think it matters. I&#39;m more interested in why my approach doesn&#39;t work rather than a better solution."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1490193237, "post_id": 42954541, "comment_id": 73003994, "body": "This is the perfect opportunity to learn how to use a debugger, if you haven&#39;t done it before. With a debugger you can step through the code, line by line, while monitoring the variables and their values. This way you can see what&#39;s really going on with the code. Alternatively you could first try some <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber duck debugging</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1490193238, "post_id": 42954541, "comment_id": 73003995, "body": "&quot;sort either the odd or even numbers in an array while leaving the rest unchanged&quot; and &quot;not to duplicate any data&quot; are contradicting requirements. You can&#39;t sort half of the data in an array, in-place, while leaving the other half unchanged, that doesn&#39;t make any sense. You should make a hard copy of the array. That is, assuming that this task makes any sense at all to begin with?"}, {"owner": {"reputation": 1069, "user_id": 4478454, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-uel-Wjw028s/AAAAAAAAAAI/AAAAAAAAAEw/p7DTIw25IfM/photo.jpg?sz=128", "display_name": "C&#226;rn\u0103ciov", "link": "https://stackoverflow.com/users/4478454/c%c3%a2rn%c4%83ciov"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490193584, "post_id": 42954541, "comment_id": 73004295, "body": "@Someprogrammerdude I&#39;m familiar with both, I tried debugging by just printing messages and values at each step but the input is too big and as soon as I remove let&#39;s say the first 10 numbers it just starts working fine. I&#39;m a bit late with this, as I wouldn&#39;t have posted such a &#39;bad&#39; question otherwise. I assumed this is a problem with my algorithm and someone might spot the error immediately."}, {"owner": {"reputation": 1069, "user_id": 4478454, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-uel-Wjw028s/AAAAAAAAAAI/AAAAAAAAAEw/p7DTIw25IfM/photo.jpg?sz=128", "display_name": "C&#226;rn\u0103ciov", "link": "https://stackoverflow.com/users/4478454/c%c3%a2rn%c4%83ciov"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490193706, "post_id": 42954541, "comment_id": 73004393, "body": "@Lundin I don&#39;t know whether you&#39;re right or not, I don&#39;t see why a bubble sort wouldn&#39;t work with offsets instead of just <code>+1</code>. I&#39;m trying to process the array like the &#39;bad&#39; values don&#39;t exist, this shouldn&#39;t be impossible, I&#39;m just simulating dynamic memory."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1490194093, "post_id": 42954541, "comment_id": 73004730, "body": "20 value isn&#39;t &quot;big&quot;, even if it might be cumbersome to debug (with nested loops). But here&#39;s a general tip on how to try and refactor the algorithm: First of all make sure that the sorting works, irrespective of any conditions. Given an array, it should sort everything. Then when you have that working you can start thinking about when and where to add check for special conditions and requirements. For example, if you should not sort even numbers, in the outer loop you could check if the current value is even, and then just <code>continue</code>. No need to do the inner loop."}, {"owner": {"reputation": 1069, "user_id": 4478454, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-uel-Wjw028s/AAAAAAAAAAI/AAAAAAAAAEw/p7DTIw25IfM/photo.jpg?sz=128", "display_name": "C&#226;rn\u0103ciov", "link": "https://stackoverflow.com/users/4478454/c%c3%a2rn%c4%83ciov"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490197220, "post_id": 42954541, "comment_id": 73007323, "body": "@Someprogrammerdude thanks for the input. I did try the simple bubble sort first (mostly to make sure the rest of the program was fine as I&#39;m new to C but not programming). Continuing if the first element is not of the right type fixed the error, thank you, please post as full answer. Here&#39;s a paste to save you some time <a href=\"http://pastebin.com/5G87DNB8\" rel=\"nofollow noreferrer\">pastebin.com/5G87DNB8</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1490197837, "post_id": 42954541, "comment_id": 73007786, "body": "Even though this is C, a C++ programmer would think in algorithm functions to solve this problem.  The algorithms could be &quot;partition&quot; then &quot;sort&quot;, and thus can be applied in a &quot;language-agnostic&quot; way.  Basically start by dividing the array into two, the left side contains all the even numbers, the right side contains all the odd numbers.  Then sort the left side, up to the partition point. To partition requires just some swaps and logic.  To sort, well, whatever sort you&#39;re using, you use it."}], "answers": [{"comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1490194170, "post_id": 42954960, "comment_id": 73004797, "body": "You might want to post some example code, example data structures or something, because I don&#39;t understand  what you&#39;re suggesting."}, {"owner": {"reputation": 1069, "user_id": 4478454, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-uel-Wjw028s/AAAAAAAAAAI/AAAAAAAAAEw/p7DTIw25IfM/photo.jpg?sz=128", "display_name": "C&#226;rn\u0103ciov", "link": "https://stackoverflow.com/users/4478454/c%c3%a2rn%c4%83ciov"}, "edited": false, "score": 0, "creation_date": 1490197278, "post_id": 42954960, "comment_id": 73007369, "body": "Thanks for the input, however you ignored my second sentence where I mentioned I want to avoid duplicating the data."}, {"owner": {"reputation": 115, "user_id": 7235297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xVFW.jpg?s=128&g=1", "display_name": "Quentin Laill&#233;", "link": "https://stackoverflow.com/users/7235297/quentin-laill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1490197339, "post_id": 42954960, "comment_id": 73007415, "body": "if so try doing a counting sort and ignore every odd/even value."}, {"owner": {"reputation": 115, "user_id": 7235297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xVFW.jpg?s=128&g=1", "display_name": "Quentin Laill&#233;", "link": "https://stackoverflow.com/users/7235297/quentin-laill%c3%a9"}, "reply_to_user": {"reputation": 1069, "user_id": 4478454, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-uel-Wjw028s/AAAAAAAAAAI/AAAAAAAAAEw/p7DTIw25IfM/photo.jpg?sz=128", "display_name": "C&#226;rn\u0103ciov", "link": "https://stackoverflow.com/users/4478454/c%c3%a2rn%c4%83ciov"}, "edited": false, "score": 0, "creation_date": 1505981596, "post_id": 42954960, "comment_id": 79637208, "body": "Did I managed to answer your question @aron9forever ? If so please do what you have to do, otherwise answer yourself on how you managed to do."}], "tags": [], "owner": {"reputation": 115, "user_id": 7235297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xVFW.jpg?s=128&g=1", "display_name": "Quentin Laill&#233;", "link": "https://stackoverflow.com/users/7235297/quentin-laill%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1490194472, "last_edit_date": 1490194472, "creation_date": 1490193875, "answer_id": 42954960, "question_id": 42954541, "link": "https://stackoverflow.com/questions/42954541/sort-only-either-odd-or-even-numbers-from-an-array/42954960#42954960", "title": "Sort only either odd or even numbers from an array", "body": "<p>If you need to sort either odd or even numbers from an array, this is my method:</p>\n\n<p>I would first of all pick from the starting array all odd or even numbers depending and what you want to do, replace everything by an indicator (1 or 2 depends if you want to sort odds or evens).</p>\n\n<p>Then sort the array by itself (if you want to use another algorithm than the bubble sort, <a href=\"http://bigocheatsheet.com/\" rel=\"nofollow noreferrer\">there's Big-o cheat sheet</a>, very useful).</p>\n\n<p>And then you just scan your first array by replacing every indice by every sorted numbers depending on their position.</p>\n\n<p>In short :</p>\n\n<p>You want to put every odd (or even) number from array 1 into array 2, and replace them by an indicator (anything you might recognize when scaning array 1 after).</p>\n\n<p>You want to sort array 2.</p>\n\n<p>Then you want to replace every indicator by every element from array 2.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 3, "last_activity_date": 1567405955, "creation_date": 1567405955, "answer_id": 57752339, "question_id": 42954541, "link": "https://stackoverflow.com/questions/42954541/sort-only-either-odd-or-even-numbers-from-an-array/57752339#57752339", "title": "Sort only either odd or even numbers from an array", "body": "<h3>What's wanted</h3>\n\n<p>Given the description and the input data:</p>\n\n<pre><code>  13   5  -3   4   2  -7  23 -33   1   6  -8   7  10 -51   9  -5  12  92  69  55\n</code></pre>\n\n<p>I believe that the requirement to sort the odd numbers into ascending order leaving the even numbers unmoved requires the output:</p>\n\n<pre><code> -51 -33  -7   4   2  -5  -3   1   5   6  -8   7  10   9  13  23  12  92  55  69\n</code></pre>\n\n<p>And to sort the even numbers into ascending order leaving the odd numbers unmoved requires the output:</p>\n\n<pre><code>  13   5  -3  -8   2  -7  23 -33   1   4   6   7  10 -51   9  -5  12  92  69  55\n</code></pre>\n\n<h3>Concept behind the algorithm</h3>\n\n<p>One way to do this is to create an array of indices of the positions to be sorted:</p>\n\n<pre><code>int O = 13; // for sorting odd:\nint opos[] = { 0,  1,  2,  5,  6,  7,  8, 11, 13, 14, 15, 18, 19 };\n\nint E =  7; // for sorting even:\nint epos[] = {  3,  4,  9, 10, 12, 16, 17 };\n</code></pre>\n\n<p>Then any sorting algorithm that would normally scan <code>for (i = 0; i &lt; N; i++)</code> and then references <code>A[i]</code> would instead scan <code>for (e = 0; e &lt; E; e++)</code> and reference <code>A[epos[e]]</code>.</p>\n\n<p>So, we start with a simple-minded bubble sort that sorts a complete array <code>A</code> of type <code>int</code> with <code>N</code> elements:</p>\n\n<pre><code>void bsort_1(int *A, int N)\n{\n     for (int i = 0; i &lt; N - 1; i++)\n     {\n         for (int j = 0; j &lt; N - 1 - i; j++)\n         {\n              if (A[j+1] &lt; A[j])\n              {\n                  int t = A[j+1];\n                  A[j+1] = A[j];\n                  A[j] = t;\n              }\n         }\n    }\n}\n</code></pre>\n\n<h3>Using O(N) auxilliary storage</h3>\n\n<p>We can adapt that to sort only the elements with a specified parity (0 for even, 1 for odd):</p>\n\n<pre><code>void bsort_4(int *A, int N, int parity)\n{\n    assert(parity == 0 || parity == 1);\n    assert(N &lt; 1024 * 1024);\n    int posn[N];\n    int count = 0;\n    for (int i = 0; i &lt; N; i++)\n    {\n        if ((A[i] &amp; 1) == parity)\n            posn[count++] = i;\n    }\n    if (count &lt; 2)\n        return;\n    for (int i = 0; i &lt; count - 1; i++)\n    {\n        for (int j = 0; j &lt; count - 1 - i; j++)\n        {\n            if (A[posn[j + 1]] &lt; A[posn[j]])\n            {\n                int t = A[posn[j + 1]];\n                A[posn[j + 1]] = A[posn[j]];\n                A[posn[j]] = t;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This establishes the indexes that correspond to odd or even entries in the array, and then sorts just those elements of the array.</p>\n\n<h3>Test code and results</h3>\n\n<p>That needs some test code to be reasonably confident it is doing what it is supposed to do.</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic void bsort_4(int *A, int N, int parity)\n{\n    assert(parity == 0 || parity == 1);\n    assert(N &lt; 1024 * 1024);\n    int posn[N];\n    int count = 0;\n    for (int i = 0; i &lt; N; i++)\n    {\n        if ((A[i] &amp; 1) == parity)\n            posn[count++] = i;\n    }\n    if (count &lt; 2)\n        return;\n    for (int i = 0; i &lt; count - 1; i++)\n    {\n        for (int j = 0; j &lt; count - 1 - i; j++)\n        {\n            if (A[posn[j + 1]] &lt; A[posn[j]])\n            {\n                int t = A[posn[j + 1]];\n                A[posn[j + 1]] = A[posn[j]];\n                A[posn[j]] = t;\n            }\n        }\n    }\n}\n\nstatic void dump_array(const char *tag, const int *a, int n)\n{\n    printf(\"%-8s\", tag);\n    for (int i = 0; i &lt; n; i++)\n        printf(\" %3d\", a[i]);\n    putchar('\\n');\n}\n\nstatic void test_sorting(const int *data, int size, int parity)\n{\n    int array[size];\n    for (int i = 0; i &lt; size; i++)\n        array[i] = data[i];\n    dump_array(\"Before:\", array, size);\n    bsort_4(array, size, parity);\n    dump_array(\"After:\", array, size);\n}\n\nint main(void)\n{\n    const int array[] =\n    {\n        13,   5,  -3,   4,   2,  -7,  23, -33,   1,   6,\n        -8,   7,  10, -51,   9,  -5,  12,  92,  69,  55,\n    };\n    enum { A_SIZE = sizeof(array) / sizeof(array[0]) };\n\n    printf(\"Sort even numbers:\\n\");\n    test_sorting(array, A_SIZE, 0);\n    printf(\"Sort odd  numbers:\\n\");\n    test_sorting(array, A_SIZE, 1);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Sort even numbers:\nBefore:   13   5  -3   4   2  -7  23 -33   1   6  -8   7  10 -51   9  -5  12  92  69  55\nAfter:    13   5  -3  -8   2  -7  23 -33   1   4   6   7  10 -51   9  -5  12  92  69  55\nSort odd  numbers:\nBefore:   13   5  -3   4   2  -7  23 -33   1   6  -8   7  10 -51   9  -5  12  92  69  55\nAfter:   -51 -33  -7   4   2  -5  -3   1   5   6  -8   7  10   9  13  23  12  92  55  69\n</code></pre>\n\n<p>You have to take my word for it that the required outputs were created before running any of the programs that I used to arrive at this final result.</p>\n\n<p>This code can be adapted to other sort strategies \u2014 insertion, selection, shell, merge, quick.  The scan that sets up the <code>posn</code> array is needed in the top-level operation (but should be avoided for recursive calls in sorts like merge sort and quick sort), and then the rest of the code uses the extra level of indirection.</p>\n\n<h3>Avoiding O(N) auxilliary storage</h3>\n\n<p>If the extra array used isn't acceptable for some reason, then you have to go about things in a much more contorted way, and you get a larger runtime penalty because you have to calculate the elements of the <code>posn</code> array on the fly, rather than precomputing them once.  The comparisons in the sort are always between adjacent positions.  Without the <code>posn</code> array, the code still establishes the count of odd or even values, but there's be code to step through the data array to find the next value with the correct parity:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic void bsort_4(int *A, int N, int parity)\n{\n    assert(parity == 0 || parity == 1);\n    assert(N &lt; 1024 * 1024);\n    int count = 0;\n    for (int i = 0; i &lt; N; i++)\n    {\n        if ((A[i] &amp; 1) == parity)\n            count++;\n    }\n    if (count &lt; 2)\n        return;\n    for (int i = 0; i &lt; count - 1; i++)\n    {\n        int i0 = 0;\n        while ((A[i0] &amp; 1) != parity)\n            i0++;\n        for (int i1 = 0; i1 &lt; i; i1++)\n        {\n            while ((A[i0] &amp; 1) != parity)\n                i0++;\n        }\n        int j0 = i0;\n        for (int j = 0; j &lt; count - 1 - i; j++)\n        {\n            int j1 = j0 + 1;\n            while ((A[j1] &amp; 1) != parity)\n                j1++;\n            /*printf(\"P = %d; j0 = %2d; A[j0] = %3d; j1 = %2d; A[j1] = %3d\\n\",*/\n            /*       parity, j0, A[j0], j1, A[j1]);*/\n            if (A[j1] &lt; A[j0])\n            {\n                int t = A[j1];\n                A[j1] = A[j0];\n                A[j0] = t;\n            }\n            j0 = j1;\n        }\n    }\n}\n\nstatic void dump_array(const char *tag, const int *a, int n)\n{\n    printf(\"%-8s\", tag);\n    for (int i = 0; i &lt; n; i++)\n        printf(\" %3d\", a[i]);\n    putchar('\\n');\n}\n\nstatic void test_sorting(const int *data, int size, int parity)\n{\n    int array[size];\n    for (int i = 0; i &lt; size; i++)\n        array[i] = data[i];\n    dump_array(\"Before:\", array, size);\n    bsort_4(array, size, parity);\n    dump_array(\"After:\", array, size);\n}\n\nint main(void)\n{\n    const int array[] =\n    {\n        13,   5,  -3,   4,   2,  -7,  23, -33,   1,   6,\n        -8,   7,  10, -51,   9,  -5,  12,  92,  69,  55,\n    };\n    enum { A_SIZE = sizeof(array) / sizeof(array[0]) };\n\n    printf(\"Sort even numbers:\\n\");\n    test_sorting(array, A_SIZE, 0);\n    printf(\"Sort odd  numbers:\\n\");\n    test_sorting(array, A_SIZE, 1);\n\n    return 0;\n}\n</code></pre>\n\n<p><sup><em>I'm not happy about the variable naming in <code>bsort_5()</code>, but I don't immediately have better names to use.</em></sup></p>\n\n<p>Output:</p>\n\n<pre><code>Sort even numbers:\nBefore:   13   5  -3   4   2  -7  23 -33   1   6  -8   7  10 -51   9  -5  12  92  69  55\nAfter:    13   5  -3  -8   2  -7  23 -33   1   4   6   7  10 -51   9  -5  12  92  69  55\nSort odd  numbers:\nBefore:   13   5  -3   4   2  -7  23 -33   1   6  -8   7  10 -51   9  -5  12  92  69  55\nAfter:   -51 -33  -7   4   2  -5  -3   1   5   6  -8   7  10   9  13  23  12  92  55  69\n</code></pre>\n\n<p>Note that this relies on the fact that the bubble sort shown only compares adjacent entries of the same parity.  For sorts like shell, merge, quick sort which work on arbitrary positions, it is not appropriate \u2014 the loops to find the right indices would be appallingly expensive.  You'd almost certainly be better off with the bubble sort (or maybe selection sort or insertion sort).</p>\n\n<h3>GitHub</h3>\n\n<p>This code is available in my <a href=\"https://github.com/jleffler/soq\" rel=\"nofollow noreferrer\">SOQ</a> (Stack Overflow Questions) repository on GitHub as files <code>bsort1.c</code>, <code>bsort4.c</code> and <code>bsort5.c</code> in the <a href=\"https://github.com/jleffler/soq/tree/master/src/so-4295-4541\" rel=\"nofollow noreferrer\">src/so-4295-4541</a> sub-directory. </p>\n"}], "owner": {"reputation": 1069, "user_id": 4478454, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-uel-Wjw028s/AAAAAAAAAAI/AAAAAAAAAEw/p7DTIw25IfM/photo.jpg?sz=128", "display_name": "C&#226;rn\u0103ciov", "link": "https://stackoverflow.com/users/4478454/c%c3%a2rn%c4%83ciov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1589, "favorite_count": 0, "accepted_answer_id": 57752339, "answer_count": 2, "score": 1, "last_activity_date": 1567405955, "creation_date": 1490192940, "last_edit_date": 1490193276, "question_id": 42954541, "link": "https://stackoverflow.com/questions/42954541/sort-only-either-odd-or-even-numbers-from-an-array", "title": "Sort only either odd or even numbers from an array", "body": "<p>I need to sort either the odd or even numbers in an array while leaving the rest unchanged. As this is part of a memory management course, I would strongly prefer not to duplicate any data so I didn't go for the obvious solution.</p>\n\n<p>I thought about using a simple bubble sort function by skipping the \"bad\" first or second params of the comparison. I will post the function only as the rest is irrelevant.</p>\n\n<pre><code>//these are passed as sort_type_remainder\n#define REMAINDER_EVEN 0\n#define REMAINDER_ODD 1\n\nvoid sort_integers(int *integer_list, int num_integers, int sort_type_remainder)\n{\n    int i, j, aux, offset = 1;\n    for(i = 0; i &lt; num_integers - 1; i++)\n    {\n        offset = 1;\n        for(j = 0; j + offset &lt; num_integers - i; j++)\n        {\n            if(abs(integer_list[j] % 2) != sort_type_remainder) //first element to be compared is of wrong type, skip\n            {\n                j++;\n            }\n            else\n            {\n                //first element is of good type, but second element is not, increase offset and reloop first element\n                if(abs(integer_list[j + offset] % 2) != sort_type_remainder)\n                {\n                    j--;\n                    offset++;\n                }\n                else //both elements are of good type, bubble sort them\n                {\n                    if(integer_list[j] &gt; integer_list[j + offset])\n                    {\n                        aux = integer_list[j + offset];\n                        integer_list[j + offset] = integer_list[j];\n                        integer_list[j] = aux;\n                    }\n                    offset = 1;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This kind of works but some inputs are not processed properly and I can not figure out why. I tried reducing the input size to get a simpler way to reproduce this but as soon as I do so it starts working properly.</p>\n\n<p>Here is the input / output, I deleted the even numbers as they stay in their position and it makes the error easier to notice.</p>\n\n<pre><code>odd\n20\n13 5 -3 4 2 -7 23 -33 1 6 -8 7 10 -51 9 -5 12 92 69 55\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9cxRB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9cxRB.png\" alt=\"output\"></a></p>\n\n<p>Any help or suggestions would be greatly appreciated, preferably with an explanation not just a solution.</p>\n\n<p>Edit:: full program is here, don't want to clutter the question <a href=\"http://pastebin.com/vZDcmppV\" rel=\"nofollow noreferrer\">http://pastebin.com/vZDcmppV</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490192668, "post_id": 42954363, "comment_id": 73003516, "body": "where is your code? helps to include it in your question so we can see where the problem is."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1490192799, "post_id": 42954363, "comment_id": 73003621, "body": "Paste the code into the question. Don&#39;t link it as an image."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1490192917, "post_id": 42954363, "comment_id": 73003731, "body": "We get questions about implicit function declaration warnings regularly.  The answer is always a variation on &quot;ensure that a declaration of the function is in scope at the point of the call.&quot;  Since there is really only one answer, I find it difficult to believe that your review of such questions did not lead you to that answer.  If nevertheless it didn&#39;t, then it&#39;s unlikely that giving the same answer again will help you, either."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1490192935, "post_id": 42954363, "comment_id": 73003747, "body": "Your code calls a function called <code>mygets</code>. You need to provide a declaration of that function before using it."}], "answers": [{"comments": [{"owner": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 1, "creation_date": 1490193108, "post_id": 42954568, "comment_id": 73003877, "body": "Your use of &quot;declare&quot; and &quot;define&quot; in the context of C/C++ seems to be mixed up. Those terms are not the same and are clearly defined. &quot;declare&quot; is what you call &quot;reference&quot; in this example and &quot;define&quot; is what you call &quot;declare&quot;."}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "reply_to_user": {"reputation": 1156, "user_id": 4597023, "user_type": "registered", "profile_image": "https://graph.facebook.com/1089025404457164/picture?type=large", "display_name": "riodoro1", "link": "https://stackoverflow.com/users/4597023/riodoro1"}, "edited": false, "score": 0, "creation_date": 1490193247, "post_id": 42954568, "comment_id": 73004011, "body": "@riodoro1 is now ok?"}], "tags": [], "owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1490193125, "last_edit_date": 1490193125, "creation_date": 1490192994, "answer_id": 42954568, "question_id": 42954363, "link": "https://stackoverflow.com/questions/42954363/implicit-declaration-of-function-mygets-wimplicit-function-declaration-myge/42954568#42954568", "title": "implicit declaration of function \u2018mygets\u2019 [-Wimplicit-function-declaration] mygets(str1);", "body": "<p>Implicit declaration of function means that you don't have function reference somewhere in header file normally.</p>\n\n<p>Or maybe you have it, but the file where your function is called does not see this.</p>\n\n<pre><code>//Declaration, must always be before first function call\nvoid myfunc(void);\n\n//Function usage somewhere in the code\nint main(void) {\n   //Call it here, compiler see the reference and knows what type\n   //of func it is and what parameters should be used to func\n   myfunc();\n}\n\n//Definition, write function content here\n//This part will be compiled in separate way, linked will put everything together\nvoid myfunc(void) {\n   //Write function content here\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7751856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/393569c7879cf6383b899066f81a6ba9?s=128&d=identicon&r=PG&f=1", "display_name": "Ndm", "link": "https://stackoverflow.com/users/7751856/ndm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1431, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1490193125, "creation_date": 1490192516, "question_id": 42954363, "link": "https://stackoverflow.com/questions/42954363/implicit-declaration-of-function-mygets-wimplicit-function-declaration-myge", "title": "implicit declaration of function \u2018mygets\u2019 [-Wimplicit-function-declaration] mygets(str1);", "body": "<p>[I've been looking at other questions and none of the solutions have worked so I'll ask my own question.</p>\n\n<p>I'm working on a Ubuntu Kylin16.04(China version) and having trouble compiling my code, here are my gets function, the error received by the compiler]<a href=\"https://i.stack.imgur.com/OvpyP.png\" rel=\"nofollow noreferrer\">1</a></p>\n"}, {"tags": ["c", "linux", "gcc", "download", "header-files"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1490191478, "post_id": 42953882, "comment_id": 73002572, "body": "Why don&#39;t you just go to the <a href=\"https://www.gnu.org/software/libc/\" rel=\"nofollow noreferrer\">glibc homepage</a>, where you can find links to download the actual source archives and from them get all the files you need?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1490192630, "post_id": 42953882, "comment_id": 73003490, "body": "and there are tons of download managers capable of parsing the links for downloads by some pattern. Not a programming question anyway."}, {"owner": {"reputation": 1554, "user_id": 2941, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9482f8f6c5bbe9c8bb8b7dc7d3cb13f1?s=128&d=identicon&r=PG", "display_name": "guruz", "link": "https://stackoverflow.com/users/2941/guruz"}, "edited": false, "score": 0, "creation_date": 1490250876, "post_id": 42953882, "comment_id": 73030679, "body": "You can also just contact us and we can provide you with a file system image of the glibs subdirectory. Alternatively use the code browser generator to create this directory yourself <a href=\"https://github.com/woboq/woboq_codebrowser\" rel=\"nofollow noreferrer\">github.com/woboq/woboq_codebrowser</a>"}], "owner": {"reputation": 59, "user_id": 7434059, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/20dee808f71df8693e95749e2b57f519?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham B.", "link": "https://stackoverflow.com/users/7434059/shubham-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490191327, "creation_date": 1490191327, "question_id": 42953882, "link": "https://stackoverflow.com/questions/42953882/how-to-download-all-header-files-in-the-link-given", "title": "How to download all header files in the link given?", "body": "<p>I want to download all the files under this directory\n<a href=\"https://code.woboq.org/userspace/glibc/\" rel=\"nofollow noreferrer\">link containing .h and .c files</a></p>\n\n<p>How can I download all files in one go? as a tar file or any other format with the same hierarchy structure of files?</p>\n"}, {"tags": ["c", "visual-studio-2010", "visual-c++", "visual-c++-2008"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490191797, "post_id": 42953693, "comment_id": 73002814, "body": "It is not the <code>__int64</code> which is the problem, but the <code>inline</code> syntax which should be <code>_inline</code> (I just tried similar code on an older machine running MSVC 2008)."}, {"owner": {"reputation": 22818, "user_id": 422797, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1f20340416b67ca6567f7a3bfe612266?s=128&d=identicon&r=PG", "display_name": "Igor Skochinsky", "link": "https://stackoverflow.com/users/422797/igor-skochinsky"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1490191875, "post_id": 42953693, "comment_id": 73002866, "body": "@HansPassant: interesting, but it happens even when I&#39;m just using <code>cl &#47;c t.c</code> without any extra switches."}, {"owner": {"reputation": 22818, "user_id": 422797, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1f20340416b67ca6567f7a3bfe612266?s=128&d=identicon&r=PG", "display_name": "Igor Skochinsky", "link": "https://stackoverflow.com/users/422797/igor-skochinsky"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490192038, "post_id": 42953693, "comment_id": 73002985, "body": "@WeatherVane: indeed, it seems to be the issue. care to post an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 422797, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1f20340416b67ca6567f7a3bfe612266?s=128&d=identicon&r=PG", "display_name": "Igor Skochinsky", "link": "https://stackoverflow.com/users/422797/igor-skochinsky"}, "edited": false, "score": 0, "creation_date": 1490192149, "post_id": 42954187, "comment_id": 73003068, "body": "yep, <a href=\"https://msdn.microsoft.com/en-us/library/z8y1yy88(v=vs.100).aspx\" rel=\"nofollow noreferrer\">&quot;The <b>inline</b> keyword is available only in C++&quot;</a>. Thanks!"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1490192073, "creation_date": 1490192073, "answer_id": 42954187, "question_id": 42953693, "link": "https://stackoverflow.com/questions/42953693/visual-c-2010-2008-does-not-accept-int64-in-c-mode/42954187#42954187", "title": "Visual C++ 2010/2008 does not accept `__int64` in C mode", "body": "<p>It is not the <code>__int64</code> which is the problem, but the <code>inline</code> syntax which should be <code>_inline</code>.</p>\n\n<p>I just tried similar code on an older machine running MSVC 2008 to verify this.</p>\n"}], "owner": {"reputation": 22818, "user_id": 422797, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/1f20340416b67ca6567f7a3bfe612266?s=128&d=identicon&r=PG", "display_name": "Igor Skochinsky", "link": "https://stackoverflow.com/users/422797/igor-skochinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 42954187, "answer_count": 1, "score": 0, "last_activity_date": 1490192073, "creation_date": 1490190892, "question_id": 42953693, "link": "https://stackoverflow.com/questions/42953693/visual-c-2010-2008-does-not-accept-int64-in-c-mode", "title": "Visual C++ 2010/2008 does not accept `__int64` in C mode", "body": "<p>I have reduced the problem to these lines:</p>\n\n<pre><code>typedef __int64 int64;\ninline int64 qatoll(const char *nptr) { return _atoi64(nptr); }\n</code></pre>\n\n<p>When compiling in C mode with VC++2008 or 2010 I get errors:</p>\n\n<pre><code>t.c(2) : error C2054: expected '(' to follow 'inline'\nt.c(2) : error C2085: 'qatoll' : not in formal parameter list\nt.c(2) : error C2143: syntax error : missing ';' before '{'\n</code></pre>\n\n<p>In C++ mode it does accept the function definition and only complains about <code>_atoi64</code>.\nWhat is the problem and how can I fix it?\nVisual C++ 15 compiles it without errors, so is this related to C99 support?</p>\n"}, {"tags": ["c", "windows", "matlab", "delphi", "dll"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1490191341, "post_id": 42953585, "comment_id": 73002451, "body": "no, this is not missing dependencies - <code>API-MS-WIN-*</code> of course exist. this is simply  Dependency Walker wrong handle it"}], "answers": [{"comments": [{"owner": {"reputation": 6581, "user_id": 137071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/A1wgH.jpg?s=128&g=1", "display_name": "Remko", "link": "https://stackoverflow.com/users/137071/remko"}, "edited": false, "score": 0, "creation_date": 1490211959, "post_id": 42954048, "comment_id": 73016765, "body": "MSVC runtime dll&#39;s most likely, I would suggest using Process Monitor with load image filter to see what dll it&#39;s looking for. <a href=\"https://technet.microsoft.com/en-us/sysinternals/processmonitor.aspx\" rel=\"nofollow noreferrer\">technet.microsoft.com/en-us/sysinternals/processmonitor.aspx</a>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 6581, "user_id": 137071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/A1wgH.jpg?s=128&g=1", "display_name": "Remko", "link": "https://stackoverflow.com/users/137071/remko"}, "edited": false, "score": 0, "creation_date": 1490212303, "post_id": 42954048, "comment_id": 73016975, "body": "You could do that. Dependency Walker will give you same the information in a more focused way."}, {"owner": {"reputation": 6581, "user_id": 137071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/A1wgH.jpg?s=128&g=1", "display_name": "Remko", "link": "https://stackoverflow.com/users/137071/remko"}, "edited": false, "score": 0, "creation_date": 1490215270, "post_id": 42954048, "comment_id": 73018591, "body": "I wasn&#39;t aware that Dependancy Walker could go beyond statically linked DLL&#39;s but guess I learned something new. Cheers..."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 6581, "user_id": 137071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/A1wgH.jpg?s=128&g=1", "display_name": "Remko", "link": "https://stackoverflow.com/users/137071/remko"}, "edited": false, "score": 0, "creation_date": 1490215314, "post_id": 42954048, "comment_id": 73018618, "body": "Yeah, that profile mode is pretty useful and effective."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 2, "last_activity_date": 1490212341, "last_edit_date": 1490212341, "creation_date": 1490191721, "answer_id": 42954048, "question_id": 42953585, "link": "https://stackoverflow.com/questions/42953585/missing-dependencies-of-kernel32-dll/42954048#42954048", "title": "Missing dependencies of kernel32.dll", "body": "<p>Those are false positives. That output is perfectly normal. You will sometimes se that kind of thing, especially if you mix 32 bit DLL and 64 bit Dependency Walker, or vice versa. </p>\n\n<p>If you want to find out for sure what is wrong use the profiling option in Dependency Walker. It can monitor the DLL loading process and give you a report about where it fails. </p>\n\n<p>Based on your description the likely explanation is that you are failing to resolve dependencies on the Matlab runtime or the MSVC runtime. </p>\n"}], "owner": {"reputation": 13, "user_id": 7570265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a79a33468046cf7921035d4349a5d6b?s=128&d=identicon&r=PG&f=1", "display_name": "Midza", "link": "https://stackoverflow.com/users/7570265/midza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2064, "favorite_count": 0, "accepted_answer_id": 42954048, "answer_count": 1, "score": 1, "last_activity_date": 1490212341, "creation_date": 1490190605, "last_edit_date": 1490197286, "question_id": 42953585, "link": "https://stackoverflow.com/questions/42953585/missing-dependencies-of-kernel32-dll", "title": "Missing dependencies of kernel32.dll", "body": "<p>I have a Matlab DLL that I'm relentlessly trying to call from a Delphi code. To do this I use <code>Loadlibrary()</code> and it returns error 126 'module not found'.</p>\n\n<p>Thanks to Dependency Walker, I figured out that the problem could come from <code>kernel32.dll</code>. A lot of its dependencies from Windows API (as I understood) are missing or not found, as you can see on the screenshot below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2g3km.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2g3km.png\" alt=\"dependencies\"></a></p>\n\n<p>How can I get these missing DLLs? Should I re-install something Windows-related?</p>\n"}, {"tags": ["c", "relational-operators"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1490189864, "post_id": 42953267, "comment_id": 73001264, "body": "<code>a[i]&gt;0</code> is 0 or 1. yes it&#39;s defined."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1490190086, "post_id": 42953267, "comment_id": 73001443, "body": "Yes it is perfectly fine code. All boolean operations such as the relational operators are guaranteed to return an <code>int</code> with value 1 or 0."}], "answers": [{"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1490190104, "post_id": 42953331, "comment_id": 73001450, "body": "Do you know where to find relevant parts of the standard on the top of your head? or how can you be so fast?^^"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1490190195, "post_id": 42953331, "comment_id": 73001533, "body": "@KamiKaze All operator groups are listed in chapter 6.5 so it is just a matter of opening the pdf and click on the relevant group :)"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490190319, "post_id": 42953331, "comment_id": 73001646, "body": "@Lundin I think I will ditch the next book I want to read and read the full standard instead. That way I know where to find what"}, {"owner": {"reputation": 73538, "user_id": 43681, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c2dd6a39d3f38f1bb47a8c1fe8325e2?s=128&d=identicon&r=PG", "display_name": "sleske", "link": "https://stackoverflow.com/users/43681/sleske"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490190322, "post_id": 42953331, "comment_id": 73001649, "body": "@StoryTeller: Fixed the double negative :-)."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 73538, "user_id": 43681, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c2dd6a39d3f38f1bb47a8c1fe8325e2?s=128&d=identicon&r=PG", "display_name": "sleske", "link": "https://stackoverflow.com/users/43681/sleske"}, "edited": false, "score": 0, "creation_date": 1490190386, "post_id": 42953331, "comment_id": 73001697, "body": "@sleske With all due respect, that double negative was <b>not</b> a typo. Standard mentions the term &quot;undefined behaviour&quot;, but it never mentions &quot;defined behaviour&quot;, only implies."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1490190465, "post_id": 42953331, "comment_id": 73001751, "body": "@KamiKaze - The standard is a really bad resource to <i>learn</i> the language if you wish to do it fast. You&#39;d be better served to finish the book first, and then graduate to the standard."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490190844, "post_id": 42953331, "comment_id": 73002043, "body": "@StoryTeller Do I sound like that I need to learn the language? (honest question) On what parts would you deduct that? Because I am not reading a book about programming at the moment I thought my skills in C were a good basis at least. (Or did you just assumed it because of my book statement, As I said this is an honest question If I have deficits I have to remove I am glad to learn about those)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1490190927, "post_id": 42953331, "comment_id": 73002113, "body": "@KamiKaze - Meant no offence. I (perhaps erroneously) deduced from you yourself saying <i>&quot;I think I will ditch the next book I want to read and read the full standard instead&quot;</i>."}, {"owner": {"reputation": 73538, "user_id": 43681, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c2dd6a39d3f38f1bb47a8c1fe8325e2?s=128&d=identicon&r=PG", "display_name": "sleske", "link": "https://stackoverflow.com/users/43681/sleske"}, "edited": false, "score": 0, "creation_date": 1490193660, "post_id": 42953331, "comment_id": 73004356, "body": "@SouravGhosh: Sorry, no disrespect intended. It just that, as pointed out by StoryTeller, &quot;not undefined&quot; sounds weird in English. It&#39;s true the standard never mentions &quot;defined behavior&quot;, but that&#39;s probably just because any behavior described in the standard is by definition defined. Also, many texts on C use the expression &quot;behavior is defined&quot; or similar. Anyway, feel free to change it back if you feel it is clearer that way."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 73538, "user_id": 43681, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c2dd6a39d3f38f1bb47a8c1fe8325e2?s=128&d=identicon&r=PG", "display_name": "sleske", "link": "https://stackoverflow.com/users/43681/sleske"}, "edited": false, "score": 0, "creation_date": 1490193794, "post_id": 42953331, "comment_id": 73004490, "body": "@sleske Nothing to be sorry for, was just trying to point out that the other version was also &quot;conforming&quot;. I&#39;ll leave it to other language-lawyers to have a look at it. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1490191871, "last_edit_date": 1490191871, "creation_date": 1490189954, "answer_id": 42953331, "question_id": 42953267, "link": "https://stackoverflow.com/questions/42953267/is-it-defined-behaviour-to-add-the-result-of-logical-operation/42953331#42953331", "title": "is it defined behaviour to add the result of logical operation", "body": "<p>Quoting <code>C11</code>, chapter \u00a76.5.8, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>Each of the operators <code>&lt;</code> (less than), <code>&gt;</code> (greater than), <code>&lt;=</code> (less than or equal to), and <code>&gt;=</code>\n  (greater than or equal to) <strong>shall yield <code>1</code> if the specified relation is true and <code>0</code> if it is\n  false.<sup>107)</sup> The result has type <code>int</code>.</strong></p>\n</blockquote>\n\n<p>Then you're performing a compound assignment, where it is required that</p>\n\n<blockquote>\n  <p>For the operators <code>+=</code> and <code>-=</code> only, either the left operand shall be an atomic, qualified, or\n  unqualified pointer to a complete object type, and the right shall have integer type; or <strong>the\n  left operand shall have atomic, qualified, or unqualified arithmetic type, and the right\n  shall have arithmetic type.</strong></p>\n</blockquote>\n\n<p>and your expression satisfies the constraint.</p>\n\n<p>So yes, it is defined behaviour.</p>\n\n<hr>\n\n<p>That said, from a syntax perspective, you're only safe because of the default <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a> matches your expectation. There's no problem as such, but being explicit (and thus, sure) never hurts.</p>\n\n<p>You can rewrite the expression as</p>\n\n<pre><code> result += ( a[i] &gt; 0 );\n</code></pre>\n"}], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 42953331, "answer_count": 1, "score": 3, "last_activity_date": 1524725375, "creation_date": 1490189819, "last_edit_date": 1524725375, "question_id": 42953267, "link": "https://stackoverflow.com/questions/42953267/is-it-defined-behaviour-to-add-the-result-of-logical-operation", "title": "is it defined behaviour to add the result of logical operation", "body": "<p>Is it okay (defined behavior) to add up the result of logical operations (as they should just be <code>0</code> or <code>1</code>)?</p>\n\n<p>Can I do something like this if I want to count the numbers bigger than zero?(or is there a better way?)</p>\n\n<pre><code>int a[3] = {1,-5,3};\nint result  = 0;\nfor( int i = 0 ; i&lt;3; i++)\n{\n    result += a[i]&gt;0;\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "duplicates"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1490189304, "post_id": 42953034, "comment_id": 73000847, "body": "What&#39;s wrong with helper functions?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490189521, "post_id": 42953034, "comment_id": 73000992, "body": "Why not modify <code>push</code> to <i>not insert</i> a duplicate?"}, {"owner": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "edited": false, "score": 0, "creation_date": 1490189661, "post_id": 42953034, "comment_id": 73001084, "body": "you can use hashtables for checking of duplicates... then you don&#39;t need to check the whole list"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1490191024, "post_id": 42953034, "comment_id": 73002205, "body": "You have too many variables. You only need to compare <i>two</i> nodes, and (maybe) delete one of them (and update the pointer that points to the <i>deleted</i> node) Wihout sorting (or hashtables) this will have quadratic behavior."}, {"owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490191028, "post_id": 42953034, "comment_id": 73002210, "body": "@StoryTeller because I do not want to assume that a list is created without duplicates. I only included push() so that a Stack member could create a list easily to verify the code."}, {"owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490191146, "post_id": 42953034, "comment_id": 73002302, "body": "@MichaelWalz I suppose there is nothing wrong with helper functions. I say this because I have seen solutions where someone creates a helper function to first sort the list, but I don&#39;t like this -- what if the linked list contained &#39;unsortable&#39; data? This function should be general purpose."}, {"owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "edited": false, "score": 0, "creation_date": 1490191823, "post_id": 42953034, "comment_id": 73002834, "body": "Why don&#39;t you want to sort?"}, {"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1490194140, "post_id": 42953034, "comment_id": 73004769, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17643790/remove-duplicates-from-an-unsorted-linked-list\">Remove duplicates from an unsorted linked list</a>"}, {"owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "reply_to_user": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1490194249, "post_id": 42953034, "comment_id": 73004867, "body": "@SazzadHissainKhan the question you have pointed to is Java, a more traditional object oriented approach. My question (and solution) pertains to C."}, {"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1490195813, "post_id": 42953034, "comment_id": 73006171, "body": "Matt doest that really matter java or c? Did you ever see how they solve it?"}, {"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1490196449, "post_id": 42953034, "comment_id": 73006690, "body": "Did it help <a href=\"http://www.geeksforgeeks.org/remove-duplicates-from-an-unsorted-linked-list/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1490194515, "last_edit_date": 1490194515, "creation_date": 1490192161, "answer_id": 42954229, "question_id": 42953034, "link": "https://stackoverflow.com/questions/42953034/c-remove-duplicates-from-unsorted-linked-list/42954229#42954229", "title": "C: Remove duplicates from unsorted linked list", "body": "<p>This sort of question is asked <strong>a lot</strong> in various variations. Usually when one is implementing a linked-list, one eventually comes to a point where one needs to keep <em>way</em> too many pointers to various elements. On the face of it, it may seem that a single redirection is  easier to work with, when in fact it doesn't convey nearly enough information about the list to preform the operation locally.</p>\n\n<p>Here's the function re-written (but not fully tested) to make use of the \"link\" abstraction (which is essentially a <code>struct node**</code>):</p>\n\n<pre><code>void removeDuplicates(struct node** head) {\n  if(!head)\n    return;\n\n  struct node **link = head;\n\n  // We will iterate over the links. I.e. the `next` pointers in the list.\n  while(*link) {\n    struct node **rest = &amp;((*link)-&gt;next);\n    while(*rest) {\n      if ((*link)-&gt;data != (*rest)-&gt;data) {\n        rest = &amp;((*rest)-&gt;next); // move to the next link\n      } else {\n        // modify the current link of rest to look one past the next\n        struct node *to_remove = *rest;\n        *rest = to_remove-&gt;next;\n        free(to_remove);\n      }\n    }\n    link = &amp;((*link)-&gt;next); // again, move the the next link\n  }\n}\n</code></pre>\n\n<p>By using another level of indirection, it's possible to guarantee that the iterator we use to traverse the list isn't invalidated at any point. There is no way (barring mistakes in writing it) that the loop above can invalidate <code>*link</code>, and therefore there's no need to check before the assignment <code>link = &amp;((*link)-&gt;next);</code></p>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1490192864, "last_edit_date": 1490192864, "creation_date": 1490192432, "answer_id": 42954330, "question_id": 42953034, "link": "https://stackoverflow.com/questions/42953034/c-remove-duplicates-from-unsorted-linked-list/42954330#42954330", "title": "C: Remove duplicates from unsorted linked list", "body": "<pre><code>void removeDuplicates(struct node **head){\nstruct node *tmp;\n\nwhile (*head) {\n        /* Look below *head, to see if it has any duplicates */\n        for (tmp= (*head)-&gt;next; tmp; tmp = tmp-&gt;next) {\n                if (tmp-&gt;data == (*head)-&gt;data) break;\n                }\n                /* Found no duplicate: advance head */\n        if(!tmp) { head = &amp;(*head)-&gt;next; continue;}\n                /* Duplicate found :: delete *head */\n        tmp = (*head)-&gt;next;\n        free(*head);\n        *head = tmp;\n        }\nreturn;\n}\n</code></pre>\n\n<hr>\n\n<p>Now, check the corner cases:</p>\n\n<ul>\n<li>if *head is NULL, the outer loop is never executed: nothing happens</li>\n<li>if (*head)->next is NULL, the inner loop is never executed, so tmp is still NULL after the inner loop</li>\n<li>if a duplicate is found *head is replaced by its ->next pointer (which could be NULL)</li>\n<li>if no duplicate is found, *head is just advanced to its ->next pointer(which could be NULL)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490193566, "post_id": 42954763, "comment_id": 73004280, "body": "I was curious and ran my function through your test cases. You should know that in the code you posted you do not push 1 into <code>t2</code> despite expecting it to be there."}, {"owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490193770, "post_id": 42954763, "comment_id": 73004459, "body": "Thanks, @StoryTeller. I noticed this to upon testing my code. I have fixed the push() calls with t2 to accurately depict the relevant test case."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1490194116, "post_id": 42954763, "comment_id": 73004746, "body": "<code>struct node* runningNode = (*head)-&gt;next;</code> :: *head could be NULL here; dereferencing would step onto a NULL pointer. BTW: if you define things  correctly , there are no <i>special cases</i>"}], "tags": [], "owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "is_accepted": false, "score": -3, "last_activity_date": 1490193460, "creation_date": 1490193460, "answer_id": 42954763, "question_id": 42953034, "link": "https://stackoverflow.com/questions/42953034/c-remove-duplicates-from-unsorted-linked-list/42954763#42954763", "title": "C: Remove duplicates from unsorted linked list", "body": "<p>Special thanks to @StoryTeller -- I have not verified your solution but your comment about having too many pointers was definitely key. I have re-written my function and it now works for 4 different and special cases (duplicates at the end of list, at beginning of list, randomly throughout list, a list consisting purely of duplicates). Here is the correct code:</p>\n\n<pre><code>void removeDuplicates(struct node** head){\n    struct node* currentNode = *head;\n    struct node* runningNode = (*head)-&gt;next;\n    struct node* runningNodePrev = *head;\n    int count = -1;\n    while(currentNode-&gt;next != NULL){\n        count++;\n        if(count){\n            currentNode = currentNode-&gt;next;\n            runningNodePrev = currentNode;\n            runningNode = currentNode-&gt;next;\n        }\n        while(runningNode != NULL){\n            if(runningNode-&gt;data == currentNode-&gt;data){\n                runningNodePrev-&gt;next = runningNode-&gt;next;\n                free(runningNode);\n                runningNode = runningNodePrev-&gt;next;\n            }else{\n                runningNodePrev = runningNodePrev-&gt;next;\n                runningNode = runningNode-&gt;next;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Cheers and thank you to all who commented.</p>\n"}, {"tags": [], "owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "is_accepted": false, "score": 2, "last_activity_date": 1490230364, "last_edit_date": 1490230364, "creation_date": 1490196341, "answer_id": 42956015, "question_id": 42953034, "link": "https://stackoverflow.com/questions/42953034/c-remove-duplicates-from-unsorted-linked-list/42956015#42956015", "title": "C: Remove duplicates from unsorted linked list", "body": "<pre><code>/* Program to remove duplicates in an unsorted linked list */\n\n#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\n/* A linked list node */\nstruct Node\n{\n    int data;\n    struct Node *next;\n};\n\n// Utility function to create a new Node\nstruct Node *newNode(int data)\n{\n   Node *temp = new Node;\n   temp-&gt;data = data;\n   temp-&gt;next = NULL;\n   return temp;\n}\n\n/* Function to remove duplicates from a\n   unsorted linked list */\nvoid removeDuplicates(struct Node *start)\n{\n    struct Node *ptr1, *ptr2, *dup;\n    ptr1 = start;\n\n    /* Pick elements one by one */\n    while (ptr1 != NULL &amp;&amp; ptr1-&gt;next != NULL)\n    {\n        ptr2 = ptr1;\n\n        /* Compare the picked element with rest\n           of the elements */\n        while (ptr2-&gt;next != NULL)\n        {\n            /* If duplicate then delete it */\n            if (ptr1-&gt;data == ptr2-&gt;next-&gt;data)\n            {\n                /* sequence of steps is important here */\n                dup = ptr2-&gt;next;\n                ptr2-&gt;next = ptr2-&gt;next-&gt;next;\n                delete(dup);\n            }\n            else /* This is tricky */\n                ptr2 = ptr2-&gt;next;\n        }\n        ptr1 = ptr1-&gt;next;\n    }\n}\n\n/* Function to print nodes in a given linked list */\nvoid printList(struct Node *node)\n{\n    while (node != NULL)\n    {\n        printf(\"%d \", node-&gt;data);\n        node = node-&gt;next;\n    }\n}\n\n/* Druver program to test above function */\nint main()\n{\n    /* The constructed linked list is:\n     10-&gt;12-&gt;11-&gt;11-&gt;12-&gt;11-&gt;10*/\n    struct Node *start = newNode(10);\n    start-&gt;next = newNode(12);\n    start-&gt;next-&gt;next = newNode(11);\n    start-&gt;next-&gt;next-&gt;next = newNode(11);\n    start-&gt;next-&gt;next-&gt;next-&gt;next = newNode(12);\n    start-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next =\n                                    newNode(11);\n    start-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next =\n                                    newNode(10);\n\n    printf(\"Linked list before removing duplicates \");\n    printList(start);\n\n    removeDuplicates(start);\n\n    printf(\"\\nLinked list after removing duplicates \");\n    printList(start);\n\n    return 0;\n}\n</code></pre>\n\n<p>Reference: <a href=\"http://www.geeksforgeeks.org/remove-duplicates-from-an-unsorted-linked-list/\" rel=\"nofollow noreferrer\">geeksforgeeks</a></p>\n"}, {"comments": [{"owner": {"reputation": 1888, "user_id": 2307873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a144019607162938fa9d6d3538d3c706?s=128&d=identicon&r=PG", "display_name": "Adam Marshall", "link": "https://stackoverflow.com/users/2307873/adam-marshall"}, "edited": false, "score": 0, "creation_date": 1611953375, "post_id": 65961021, "comment_id": 116625012, "body": "While your answer may solve the question, <a href=\"https://meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please edit your answer to add explanations and give an indication of what limitations and assumptions apply. - <a href=\"https://stackoverflow.com/review/late-answers/28199678\">From Review</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 10606484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cE7ns3kbcN8/AAAAAAAAAAI/AAAAAAAAC5Q/QvnzOIzT-_M/photo.jpg?sz=128", "display_name": "satyam pandey", "link": "https://stackoverflow.com/users/10606484/satyam-pandey"}, "is_accepted": false, "score": 0, "last_activity_date": 1611950790, "creation_date": 1611950790, "answer_id": 65961021, "question_id": 42953034, "link": "https://stackoverflow.com/questions/42953034/c-remove-duplicates-from-unsorted-linked-list/65961021#65961021", "title": "C: Remove duplicates from unsorted linked list", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nstruct node\n{\nint data;\nstruct node *next;\n};\nstruct node *createNode(int data)\n {\nstruct node *n;\nn = (struct node *)malloc(sizeof(struct node));\nn-&gt;data = data;\nn-&gt;next = NULL;\nreturn n;\n}\nvoid traverseList(struct node *head)\n{\nwhile (head != NULL)\n{\n    printf(&quot;%d &quot;, head-&gt;data);\n    head = head-&gt;next;\n}\n}\n void removeDuplicates(struct node *head)\n {\nstruct node *ptr = head;\nwhile (ptr != NULL)\n{\n    struct node *runner = ptr;\n    while (runner-&gt;next != NULL)\n    {\n        if (ptr-&gt;data == runner-&gt;next-&gt;data)\n        {\n            runner-&gt;next = runner-&gt;next-&gt;next;\n        }\n        else\n        {\n            runner = runner-&gt;next;\n        }\n    }\n    free(runner-&gt;next);\n     ptr = ptr-&gt;next;\n }\n }\n int main()\n {\nstruct node *node1, *node2, *node3, *node4;\nnode1 = createNode(2);\nnode2 = createNode(5);\nnode3 = createNode(5);\nnode4 = createNode(1);\nnode1-&gt;next = node2;\nnode2-&gt;next = node3;\nnode3-&gt;next = node4;\nnode4-&gt;next = NULL;\ntraverseList(node1);\nremoveDuplicates(node1);\nprintf(&quot;\\n&quot;);\ntraverseList(node1);\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 1904605, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/99b425375ea607644ade83e78ca87482?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1904605/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3811, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1611950790, "creation_date": 1490189226, "last_edit_date": 1490194381, "question_id": 42953034, "link": "https://stackoverflow.com/questions/42953034/c-remove-duplicates-from-unsorted-linked-list", "title": "C: Remove duplicates from unsorted linked list", "body": "<p>I have been working on this problem for more hours than I'd like to admit now and it's driving me nuts! Given a simple linked list, say one that stores an integer (<code>data</code>) only in addition to a pointer to the next node (<code>next</code>), I would like an algorithm that removes duplicates without sorting or relying on helper functions.</p>\n\n<p>Previous questions have been asked about unsorted linked lists in Java which take advantage of helper functions that Java offers. This is strictly pertinent to C without the use of helper functions.</p>\n\n<p>I have tinkered around with code and have got this to work for some cases, but not all. Here is a complete, verifiable example -- I've include a <code>push()</code> function to create a linked list and a <code>main()</code> with test cases, but the logic that my question pertains to is in <code>removeDuplicates()</code> alone:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct node {\n    int data;\n    struct node *next; \n};\n\nvoid push(struct node **headRef, int data) {\n    struct node *newNode = malloc(sizeof(struct node));\n    newNode-&gt;data = data;\n    newNode-&gt;next = *headRef;\n    *headRef = newNode;\n}\n\nvoid removeDuplicates(struct node **head) {\n        struct node *currentNode = *head; //The node we compare other nodes against\n    struct node *runningNode = (*head)-&gt;next; //The node we are comparing to\n    struct node *runningNodePrev = *head; //The node before the node we are comparing to\n    struct node *runningNodeNext = (*head)-&gt;next-&gt;next; // The node after the node we are comparing to\n    int count = -1;\n    while (currentNode-&gt;next != NULL) { //Ensure we are not looking at the last node -- cannot have comparisons past this node\n        count++;\n        if (count) {\n            //'Base Position'\n            currentNode = currentNode-&gt;next;\n            runningNodePrev = currentNode;\n            runningNode = currentNode-&gt;next;\n            runningNodeNext = runningNode-&gt;next;\n        }\n        printf(\"\\nChecking for a match with  %d ... \\n\", currentNode-&gt;data);\n        while (runningNode != NULL) { //Compare each node in the list until we reach the end of the list\n            printf(\"Inspecting next adjacent node ... \\n\");\n            if (runningNode-&gt;data == currentNode-&gt;data) {//If a duplicate is found\n                printf(\"Found match ... \");\n\n                //Ensure link is maintained before removing duplicate node\n                if (currentNode == runningNodePrev)\n                    currentNode-&gt;next = runningNodeNext;\n                runningNodePrev-&gt;next = runningNodeNext; \n\n                free(runningNode);//Delete duplicate node\n                printf(\"Deleted duplicate.\\n\");\n            }\n            runningNode = runningNodeNext;//Continue searching for duplicates at the first unchecked node\n            runningNodeNext = runningNodeNext-&gt;next;//Move running node leader up the list.     \n        }\n    }\n}\n\nint main(void) {\n    struct node *t1 = NULL;\n    struct node *t2 = NULL;\n    struct node *t4 = NULL;\n    struct node *t5 = NULL;\n    push(&amp;t1, 1);\n    push(&amp;t1, 1);\n    push(&amp;t1, 1);\n    push(&amp;t1, 1);\n    push(&amp;t2, 6);\n    push(&amp;t2, 1);\n    push(&amp;t2, 2);\n    push(&amp;t2, 3);\n    push(&amp;t2, 4);\n    push(&amp;t2, 5);\n    push(&amp;t2, 6);\n    push(&amp;t4, 4);\n    push(&amp;t4, 2);\n    push(&amp;t4, 3);\n    push(&amp;t4, 2);\n    push(&amp;t4, 1);\n    push(&amp;t5, 0);\n    push(&amp;t5, 0);\n    push(&amp;t5, 1);\n    printf(\"Testing removeDuplicates()...\\n\");\n    printf(\"Case 1: Calling removeDuplicates({1,0,0}).\\n\");\n    printf(\"Expected result: { 1 0 }\\n\");\n    printf(\"Actual result:   { \");\n    removeDuplicates(&amp;t5);\n    ptr = t5;\n    while (ptr != NULL) { \n        printf(\"%d \", ptr-&gt;data);\n        ptr = ptr-&gt;next;\n    }\n    printf(\"}\\n\");\n    printf(\"Case 2: Calling removeDuplicates({1,2,3,2,4}).\\n\");\n    printf(\"Expected result: { 1 2 3 4 }\\n\");\n    printf(\"Actual result:   { \");\n    removeDuplicates(&amp;t4);\n    ptr = t4;\n    while (ptr != NULL) {\n        printf(\"%d \", ptr-&gt;data);\n        ptr = ptr-&gt;next;\n    }\n    printf(\"}\\n\");\n    printf(\"Case 3: Calling removeDuplicates({6,5,4,3,2,1,6}).\\n\");\n    printf(\"Expected result: { 6 5 4 3 2 1 }\\n\");\n    printf(\"Actual result:   { \");\n    removeDuplicates(&amp;t2);\n    ptr = t2;\n    while (ptr != NULL) {\n        printf(\"%d \", ptr-&gt;data);\n        ptr = ptr-&gt;next;\n    }\n    printf(\"}\\n\");\n    printf(\"Case 4: Calling removeDuplicates({1,1,1,1}).\\n\");\n    printf(\"Expected result: { 1 }\\n\");\n    printf(\"Actual result:   { \");\n    removeDuplicates(&amp;t1);\n    ptr = t1;\n    while (ptr != NULL) {\n        printf(\"%d \", ptr-&gt;data);\n        ptr = ptr-&gt;next;\n    }\n    printf(\"}\\n\");\n}\n</code></pre>\n\n<p>I've also included a picture that describes the logic if it is unclear what I'm doing: <a href=\"https://imgur.com/DbnBOq2\" rel=\"nofollow noreferrer\">http://imgur.com/DbnBOq2</a></p>\n"}, {"tags": ["c", "pipe", "c99"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490189257, "post_id": 42952965, "comment_id": 73000799, "body": "You should <code>calloc()</code> BUFSZ+1 so you have space for the <code>\\0</code> if you ever read in a line long enough to fill that buffer."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 2, "creation_date": 1490189343, "post_id": 42952965, "comment_id": 73000871, "body": "Your problem isn&#39;t that <code>stdin</code> doesn&#39;t get closed (it does, because <code>fgets</code> returns <code>NULL</code>), but rather that it isn&#39;t re-opened for user input."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490189504, "post_id": 42952965, "comment_id": 73000980, "body": "@ChrisTurner <code>fgets</code> allows for that: you just tell it the actual buffer size."}, {"owner": {"reputation": 37, "user_id": 6914819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJFJH.jpg?s=128&g=1", "display_name": "B Naucl&#233;r", "link": "https://stackoverflow.com/users/6914819/b-naucl%c3%a9r"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1490189779, "post_id": 42952965, "comment_id": 73001194, "body": "@Kninnug That was indeed the issue. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6914819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJFJH.jpg?s=128&g=1", "display_name": "B Naucl&#233;r", "link": "https://stackoverflow.com/users/6914819/b-naucl%c3%a9r"}, "edited": false, "score": 0, "creation_date": 1490189750, "post_id": 42953151, "comment_id": 73001173, "body": "Ah yes, that indeed seems to be the solution. I knew I was missing something elementary here. Thank you!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 5, "last_activity_date": 1490189557, "creation_date": 1490189557, "answer_id": 42953151, "question_id": 42952965, "link": "https://stackoverflow.com/questions/42952965/c-stdin-unix-pipeline-and-eof/42953151#42953151", "title": "C - stdin, unix pipeline and EOF", "body": "<p>If <code>stdin</code> is a pipe, then <code>stdin</code> is not the terminal. When you get to the end of the pipe, that's it! That's the end of <code>stdin</code>. You're expecting some kind of magical transformation where <code>stdin</code> stops being the pipe and starts being something else. Don't expect that. It's still the pipe. And EOF has occurred. For pipes, EOF is a permanent condition. Once you've hit EOF, you won't ever get anything more.</p>\n\n<p>Do check the return value of <code>fgets</code> <em>every</em> time. You'll see that the last one returns null, because it's at EOF.</p>\n\n<p>Programs that want to read piped <code>stdin</code> and also get keyboard input must open the terminal separately, as in <code>FILE *tty = fopen(\"/dev/tty\", \"r\");</code></p>\n"}], "owner": {"reputation": 37, "user_id": 6914819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJFJH.jpg?s=128&g=1", "display_name": "B Naucl&#233;r", "link": "https://stackoverflow.com/users/6914819/b-naucl%c3%a9r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 42953151, "answer_count": 1, "score": 0, "last_activity_date": 1490189557, "creation_date": 1490189061, "last_edit_date": 1495542740, "question_id": 42952965, "link": "https://stackoverflow.com/questions/42952965/c-stdin-unix-pipeline-and-eof", "title": "C - stdin, unix pipeline and EOF", "body": "<p>I am writing an application which first receives data from a unix pipeline, and then prompting the user for input. What I cannot seem to figure out is why the input from the pipeline does not seem to close properly before prompting the user for input. It feels like I'm missing something very elementary here.</p>\n\n<p>I have tried all examples for flushing stdin presented <a href=\"https://stackoverflow.com/questions/2187474/i-am-not-able-to-flush-stdin\">here</a> without success. <a href=\"https://stackoverflow.com/questions/28744759/plain-c-stdin-buffer-garbage-and-newline-eaters\">This</a> also seems potentially relevant, but I have not managed to extract any relevant answers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUFSZ 1024\n\nint main(void) {\n\n    char *buf = calloc(BUFSZ, sizeof(char));\n\n    while(fgets(buf, BUFSZ, stdin)) { printf(\"Pipe input: %s\", buf); }\n\n    printf(\"Enter input: \");\n    fgets(buf, BUFSZ, stdin);\n    printf(\"User input: %s\", buf);\n\n    free(buf);\n    return 0;\n}\n</code></pre>\n\n<p>Example usage and output:</p>\n\n<pre><code>$ cat testdata2 | ./a.out\nPipe input: testdata testdata\nPipe input: testdata testdata2\nPipe input: testdata testdata3\nPipe input: testdata testdata4\nPipe input: testdata testdata5\nPipe input: testdata testdata6\nPipe input: testdata testdata7\nEnter input: User input: testdata testdata7\n$\n</code></pre>\n\n<p>How can it be that the second fgets() (intended for keyboard input) never touches the buffer?</p>\n\n<p>This MCVE has been compiled tested on OSX and Linux with identical results.</p>\n"}, {"tags": ["c", "printf", "newline"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 6, "creation_date": 1490189036, "post_id": 42952895, "comment_id": 73000646, "body": "That is because character 13 is &quot;carriage return&quot;. So it then overwrites the first part. Newline is character 10."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1490189085, "post_id": 42952895, "comment_id": 73000681, "body": "13 is <code>\\r</code> not <code>\\n</code>"}, {"owner": {"reputation": 93, "user_id": 7751508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80b4d5994064966cca8be1d71e1329d?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian Kunze", "link": "https://stackoverflow.com/users/7751508/fabian-kunze"}, "edited": false, "score": 0, "creation_date": 1490189604, "post_id": 42952895, "comment_id": 73001037, "body": "Oh, I confused &#39;\\r&#39; (13) and &#39;\\n&#39; (10). So the actual question is why my program stumbled across an &#39;\\r&#39;; I might have not used text mode to open my file.  I would accept Weather Vane if his comment would be an answer."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490189829, "post_id": 42952895, "comment_id": 73001235, "body": "@FabianKunze on some systems when you press Enter you get a <code>\\r\\n</code> rather than just a <code>\\n</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490194992, "post_id": 42952895, "comment_id": 73005533, "body": "&quot;So the actual question is why my program stumbled across an &#39;\\r&#39;&quot; --&gt; Consider that the file opened in text mode to read a file may translate <code>&quot;\\r\\n&quot;</code> into <code>&quot;\\n&quot;</code> or it may not.  That translation decision is part of the compiler used.  It is not part of the <i>file read</i>.  So a complier that does not translate <code>&quot;\\r\\n&quot;</code> into <code>&quot;\\n&quot;</code>, when reading <code>&quot;\\r\\n&quot;</code> will leave that as <code>&quot;\\r\\n&quot;</code>.  IMO, use <code>fgets()</code> to read a line and then <code>buffer[strcspn(&quot;\\r\\n&quot;)] = &#39;\\0&#39;;</code> to lop off <i>either</i> a lone <code>&quot;\\n&quot;</code> or <code>&quot;\\r\\n&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1490189757, "creation_date": 1490189757, "answer_id": 42953241, "question_id": 42952895, "link": "https://stackoverflow.com/questions/42952895/printf-partly-ignores-format-string-when-printing-newline-via-c/42953241#42953241", "title": "Printf partly ignores format string when printing newline via &#39;%c&#39;", "body": "<p>That is because character 13 is \"carriage return\". </p>\n\n<p>After that the first part of the message is over-written.</p>\n\n<p>Newline is character 10.</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 7235297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xVFW.jpg?s=128&g=1", "display_name": "Quentin Laill&#233;", "link": "https://stackoverflow.com/users/7235297/quentin-laill%c3%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1490189933, "last_edit_date": 1495540011, "creation_date": 1490189933, "answer_id": 42953319, "question_id": 42952895, "link": "https://stackoverflow.com/questions/42952895/printf-partly-ignores-format-string-when-printing-newline-via-c/42953319#42953319", "title": "Printf partly ignores format string when printing newline via &#39;%c&#39;", "body": "<p>From <a href=\"https://stackoverflow.com/a/35375158/7235297\">this answer</a> :</p>\n\n<p>\\r is carriage return and moves the cursor back like if i will do-</p>\n\n<pre><code>printf(\"stackoverflow\\rnine\")\nninekoverflow\n</code></pre>\n\n<p>means it has shifted the cursor to the beginning of \"stackoverflow\" and overwrites the starting four characters since \"nine\" is four character long.</p>\n\n<p>In this case, </p>\n\n<pre><code>BAR (id %i)\\n\n</code></pre>\n\n<p>will overwrite \"FOO\".</p>\n"}], "owner": {"reputation": 93, "user_id": 7751508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80b4d5994064966cca8be1d71e1329d?s=128&d=identicon&r=PG&f=1", "display_name": "Fabian Kunze", "link": "https://stackoverflow.com/users/7751508/fabian-kunze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 42953241, "answer_count": 2, "score": 1, "last_activity_date": 1490189933, "creation_date": 1490188878, "question_id": 42952895, "link": "https://stackoverflow.com/questions/42952895/printf-partly-ignores-format-string-when-printing-newline-via-c", "title": "Printf partly ignores format string when printing newline via &#39;%c&#39;", "body": "<p>I observed some behavior I can't explain myself when using printf to print a character via format-string.\nIt seems that when the character is newline ('\\n'), the printf ignores everything up to (including) '%c' and just prints the remaining part.</p>\n\n<p>Here is a minimal example (user input to disable optimization):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n  int c;    \n  scanf(\"%d\", &amp;c); //read char by ascii id\n  printf(\"FOO%cBAR (id %i)\\n\", c,c);\n  return 0;\n}\n</code></pre>\n\n<p>Entering 45 (the code for '-') results in output \"FOO-BAR\", but entering 13 ('\\n') just prints \"BAR\". This happens both in gcc 6.3.1 and clang 3.9.1, on -Og and -O3 optimisation levels, on an linux.</p>\n\n<p>This should not be related to output buffering if I'm not mistaken.</p>\n\n<p>Is this behavior intended? </p>\n"}, {"tags": ["c", "file", "getc"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1490188852, "post_id": 42952832, "comment_id": 73000513, "body": "Please post the code in your question."}, {"owner": {"reputation": 954, "user_id": 1935009, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/LmCmh.png?s=128&g=1", "display_name": "Yashas", "link": "https://stackoverflow.com/users/1935009/yashas"}, "edited": false, "score": 0, "creation_date": 1490190084, "post_id": 42952832, "comment_id": 73001439, "body": "Can you show what your file contains? What does your prinft print?"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1490190684, "post_id": 42953543, "comment_id": 73001911, "body": "And change <code>char c;</code> to <code>int c;</code> which is the type returned by <code>getc()</code> and required by <code>putc()</code>."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490190860, "post_id": 42953543, "comment_id": 73002061, "body": "@WeatherVane True. Updated."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490190990, "post_id": 42953543, "comment_id": 73002164, "body": "@AjeyaSiddhartha for what it&#39;s worth <code>&#39;\\n&#39;</code> is also of type <code>int</code>."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1490191739, "post_id": 42953543, "comment_id": 73002767, "body": "The reason for getc to return an int and not a char, is that <code>&#39;\\xff&#39;</code> is a valid character and shall not be misinterpreted as an eond of file."}], "tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 2, "last_activity_date": 1490190839, "last_edit_date": 1490190839, "creation_date": 1490190493, "answer_id": 42953543, "question_id": 42952832, "link": "https://stackoverflow.com/questions/42952832/how-to-display-characters-read-from-a-file-using-getc/42953543#42953543", "title": "How to display characters read from a file using getc()", "body": "<p>The problem is here:</p>\n\n<pre><code>while(c=getc(ifp) !=EOF){\n</code></pre>\n\n<p>Because of <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precendence</a>, this <code>getc(ifp) !=EOF</code> gets executed first. Then <code>c = &lt;result of comparison&gt;</code> gets executed. Which is not the order you want.</p>\n\n<p>Use parentheses to force the correct order.</p>\n\n<pre><code>while((c=getc(ifp)) !=EOF) {\n</code></pre>\n\n<p>Other notes:\n<code>getc</code> returns an <code>int</code> so you should change the type of <code>c</code> to <code>int</code>.\nAlso, if you fail to open the file, you still continue execution. You should gracefully exit on failure.</p>\n"}], "owner": {"reputation": 325, "user_id": 7121735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/301ae0aa452e7b521f2a7f2db44a11db?s=128&d=identicon&r=PG&f=1", "display_name": "asdf", "link": "https://stackoverflow.com/users/7121735/asdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 42953543, "answer_count": 1, "score": 0, "last_activity_date": 1490196843, "creation_date": 1490188740, "last_edit_date": 1490196843, "question_id": 42952832, "link": "https://stackoverflow.com/questions/42952832/how-to-display-characters-read-from-a-file-using-getc", "title": "How to display characters read from a file using getc()", "body": "<p>When I try to read input from a file named \"file1\", my program correctly displays\nthe number of characters in the file, but in an unrecognized character format.\nBelow is the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nvoid db_sp(FILE*);\n\nint main(int argc,char *argv[])\n{   \n    FILE *ifp,*ofp;\n\n    if(argc!=2) {\n      fprintf(stderr,\"Program execution form: %s infile\\n\",argv[0]);\n      exit(1);\n    }\n    ifp=fopen(argv[1],\"r\");\n    if (ifp==NULL) printf(\"sdaf\");\n    //ofp=fopen(argv[2],\"w+\") ; \n    db_sp(ifp);\n    fclose(ifp);\n    //fclose(ofp);\n    return 0;\n}\n\nvoid db_sp(FILE *ifp)\n{     \n    char c;\n    while(c=getc(ifp) !=EOF) {\n      //printf(\"%c\",c);\n      putc(c,stdout);\n      if(c=='\\n' || c=='\\t' || c==' ')\n        printf(\"%c\",c);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1490188722, "post_id": 42952799, "comment_id": 73000404, "body": "<i>but rather I got some random numbers</i>...What is your output?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1490188730, "post_id": 42952799, "comment_id": 73000416, "body": "What do you expect a memory address to look like if not a bunch of random numbers?"}, {"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 1, "creation_date": 1490188825, "post_id": 42952799, "comment_id": 73000495, "body": "The char pointer points to the address of the string literal. It doesn&#39;t contain the address"}, {"owner": {"reputation": 31664, "user_id": 226975, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad744cf47bf63187d6b406f8be7cfa3a?s=128&d=identicon&r=PG", "display_name": "Wyzard", "link": "https://stackoverflow.com/users/226975/wyzard"}, "reply_to_user": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "edited": false, "score": 2, "creation_date": 1490189142, "post_id": 42952799, "comment_id": 73000722, "body": "@SeekAddo, it points to the string, which is another way of saying it contains the string&#39;s address.  &quot;Points to the address&quot; would be a pointer to a pointer."}, {"owner": {"reputation": 11, "user_id": 7007648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ff0653e08873bb7ae0ef496eeff467?s=128&d=identicon&r=PG&f=1", "display_name": "Richie", "link": "https://stackoverflow.com/users/7007648/richie"}, "edited": false, "score": 0, "creation_date": 1490256409, "post_id": 42952799, "comment_id": 73033182, "body": "Sorry guys, the address was 0000000000404000. Because I did not see a letter A through F in it, I was under the impression that it was not a hex. Thanks for your help"}], "answers": [{"tags": [], "owner": {"reputation": 1740, "user_id": 28572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3dc11e118b0e5efc040246327a9503e?s=128&d=identicon&r=PG", "display_name": "EFrank", "link": "https://stackoverflow.com/users/28572/efrank"}, "is_accepted": false, "score": 0, "last_activity_date": 1490188814, "creation_date": 1490188814, "answer_id": 42952862, "question_id": 42952799, "link": "https://stackoverflow.com/questions/42952799/memory-address-of-strings-declared-using-a-char-pointer/42952862#42952862", "title": "Memory address of strings declared using a char pointer", "body": "<p>The \"random numbers\" you got are the Memory addresses. They are not constant, since on each execution of your program, other Memory addresses are used.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 1, "last_activity_date": 1490188828, "creation_date": 1490188828, "answer_id": 42952868, "question_id": 42952799, "link": "https://stackoverflow.com/questions/42952799/memory-address-of-strings-declared-using-a-char-pointer/42952868#42952868", "title": "Memory address of strings declared using a char pointer", "body": "<p>It did work. It's just that you can consider the address as being arbitrarily chosen by the C runtime. <code>hi</code> is a pointer set to the address of the capital <code>G</code> in your string. You own all the memory from <code>hi</code> up to and including the nul-terminator at the end of that string.</p>\n\n<p>Also, use <code>const char *hi = \"Greeting!\";</code> rather than <code>char *</code>: the memory starting at <code>hi</code> is <em>read-only</em>. Don't try to modify the string: the behaviour on attempting to do that is <em>undefined</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 0, "last_activity_date": 1490189507, "creation_date": 1490189507, "answer_id": 42953137, "question_id": 42952799, "link": "https://stackoverflow.com/questions/42952799/memory-address-of-strings-declared-using-a-char-pointer/42953137#42953137", "title": "Memory address of strings declared using a char pointer", "body": "<p>A pointer could be represented in several ways. The format string <code>\"%p\"</code> <em>\"writes an implementation defined character sequence defining a pointer\"</em> <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">link</a>. In most cases, it's the pointed object's address interpreted as an appropriately sized unsigned integer, which looks like \"a bunch of random number\".</p>\n\n<p>A user readable pointer representation is generally only useful for debugging. It allows you to compare two different representations (are the pointers the same?) and, in some cases, the relative order and distance between pointers (which pointer comes \"first\", and how far apart are they?). Interpreting pointers as integers works well in this optic.</p>\n\n<p>It would be helpful to us if you could clarify what output you expected. Perhaps you expected pointers to be zero-based?</p>\n\n<p>Note that, while some compilers might accept your example, it would be wiser to use <code>const char *</code>. Using a <code>char *</code> would allow you to try to modify your string literal, which is undefined behavior.</p>\n"}], "owner": {"reputation": 11, "user_id": 7007648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ff0653e08873bb7ae0ef496eeff467?s=128&d=identicon&r=PG&f=1", "display_name": "Richie", "link": "https://stackoverflow.com/users/7007648/richie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 42952868, "answer_count": 3, "score": 0, "last_activity_date": 1490193399, "creation_date": 1490188666, "last_edit_date": 1490193399, "question_id": 42952799, "link": "https://stackoverflow.com/questions/42952799/memory-address-of-strings-declared-using-a-char-pointer", "title": "Memory address of strings declared using a char pointer", "body": "<p>I read that when you declare strings using a pointer, the pointer contains the memory address of the string literal. Therefore I expected to get the memory address from this code but rather I got some random numbers. Please help me understand why it didn't work.</p>\n\n<pre><code>int main()\n{\n    char *hi = \"Greeting!\";\n    printf(\"%p\",hi);\n    return(0);\n}\n</code></pre>\n\n<p>If the pointer <code>hi</code> contains the memory address of the string literal, then why did it not display the memory address?</p>\n"}, {"tags": ["c", "sockets", "netlink"], "answers": [{"tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1490193119, "last_edit_date": 1495541839, "creation_date": 1490193119, "answer_id": 42954620, "question_id": 42952607, "link": "https://stackoverflow.com/questions/42952607/how-to-trigger-first-recv-message-on-a-socket-to-get-netlink-status/42954620#42954620", "title": "How to trigger first recv message on a socket to get NETLINK status", "body": "<p>I was able to derive my answer from the answer provided by Tony in this question <a href=\"https://stackoverflow.com/questions/27327909/c-code-to-get-the-interface-name-for-the-ip-address-in-linux\">C code to get the interface name for the IP address in Linux</a></p>\n"}], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490193119, "creation_date": 1490188187, "question_id": 42952607, "link": "https://stackoverflow.com/questions/42952607/how-to-trigger-first-recv-message-on-a-socket-to-get-netlink-status", "title": "How to trigger first recv message on a socket to get NETLINK status", "body": "<p>I am getting the current status of my link whenever it changes however I need to get the initial status when my daemon starts up.  This is what I have.</p>\n\n<pre><code>void read_msg(int fd) {\n   // loop through the struct nlmsghdr and pull struct ifinfomsg\n   // data to get the flags.\n}\n\nint main(int argc, char* argv[]) {\n    memset(&amp;sa, 0, sizeof(sa));\n    sa.nl_family = AF_NETLINK;\n    sa.nl_groups = RTMGRP_LINK;\n\n    fd = socket(AF_NETLINK, SOCK_RAW, NETLINK_ROUTE);\n    if(fd == -1) \n    {\n        perror(\"Failed to Open Socket\");\n        return 1;\n    }\n\n    struct ifreq ifr;\n    memset(&amp;ifr, 0, sizeof(ifr));\n    snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), \"%s\", cmd_params.iface);\n    if (setsockopt(fd, SOL_SOCKET, SO_BINDTODEVICE, (void*)&amp;ifr,\n        sizeof(ifr)) &lt; 0) \n    {\n            perror(\"Failed to bind to given interface\");\n            return 1;\n    }\n\n    if(bind(fd, (struct sockaddr *) &amp;sa, sizeof(sa)) == -1) \n    {\n        perror(\"Failed to bind to socket\");\n        return 1;\n    }\n\n    &lt;--- HERE IS MY ISSUE -------&gt;\n    get_link_state(\"eth0\");\n    &lt;-- this function uses ioctl(fd, SIOCGIFINDEX, \"vif2.0\") \n        and ioctl(fd, SIOCGIFFLAGS, struct ifreq*)\n    --&gt;\n\n    while(true) {\n        read_msg(fd);\n    }\n}\n</code></pre>\n\n<p>I would like to avoid the <code>get_link_state()</code> method I am using now so that I don't have to call out my interface since my interface can change during the lifetime of the daemon.  As you can see it's a virtual interface.</p>\n\n<p>Finally my question, is there any way I can trigger a call before the while loop so I can read the first message.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1332, "user_id": 4205875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-tVU6CspMO1M/AAAAAAAAAAI/AAAAAAAADYU/RAEC1VgZbqM/photo.jpg?sz=128", "display_name": "Brank Victoria", "link": "https://stackoverflow.com/users/4205875/brank-victoria"}, "edited": false, "score": 0, "creation_date": 1490187301, "post_id": 42952091, "comment_id": 72999370, "body": "Have you tried to set a default value for each variable? I mean, strFirstName, strMiddleName and strLastName in the beggining has NULL values, try to initialize all of them to a blank string such as &quot;&quot;, because I think you are getting an error because of put a null in the parameter."}, {"owner": {"reputation": 3, "user_id": 7751355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ec532d983669f500f2a892544bff99?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/7751355/coder"}, "reply_to_user": {"reputation": 1332, "user_id": 4205875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-tVU6CspMO1M/AAAAAAAAAAI/AAAAAAAADYU/RAEC1VgZbqM/photo.jpg?sz=128", "display_name": "Brank Victoria", "link": "https://stackoverflow.com/users/4205875/brank-victoria"}, "edited": false, "score": 0, "creation_date": 1490187774, "post_id": 42952091, "comment_id": 72999712, "body": "They are all initialized as empty strings."}], "answers": [{"tags": [], "owner": {"reputation": 4071, "user_id": 1705337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/vzyhp.png?s=128&g=1", "display_name": "Morgoth", "link": "https://stackoverflow.com/users/1705337/morgoth"}, "is_accepted": false, "score": 0, "last_activity_date": 1490188166, "last_edit_date": 1490188166, "creation_date": 1490187443, "answer_id": 42952302, "question_id": 42952091, "link": "https://stackoverflow.com/questions/42952091/split-char-array-as-first-name-middle-name-and-last-name-skip-middle-name-if-i/42952302#42952302", "title": "split char array as first name, middle name and last name, skip middle name if its empty in C language", "body": "<p>Check if <code>token1</code> is null before trying to read the surname:</p>\n\n<pre><code>// get the first token\ntoken1 = strtok(udtAddressVar.strName, \" \");\nstrcpy(udtAddressVar.strFirstName, token1);\n\n// middle name\ntoken1 = strtok(NULL, \" \");\nstrcpy(udtAddressVar.strMiddleName, token1);\n\n// Check if the last name exists\nif (token1 == NULL) {\n    udtAddressVar.strLastName = udtAddressVar.strMiddleName;\n    udtAddressVar.strMiddleName = \"\";\n}\n// get the last name \nelse {\n    token1 = strtok(NULL, \" \");\n    strcpy(udtAddressVar.strLastName, token1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1490187893, "creation_date": 1490187893, "answer_id": 42952479, "question_id": 42952091, "link": "https://stackoverflow.com/questions/42952091/split-char-array-as-first-name-middle-name-and-last-name-skip-middle-name-if-i/42952479#42952479", "title": "split char array as first name, middle name and last name, skip middle name if its empty in C language", "body": "<pre><code>token1 = strtok(udtAddressVar.strName, \" \");\nstrcpy(udtAddressVar.strFirstName, token1);\ntoken2 = strtok(NULL, \" \");\ntoken3 = strtok(NULL, \" \");\nif (token3) {\n  strcpy(udtAddressVar.strMiddleName, token2);\n  strcpy(udtAddressVar.strLastName, token3);\n} else {\n  udtAddressVar.strMiddleName[0] = '\\0';\n  strcpy(udtAddressVar.strLastName, token2);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1490187963, "creation_date": 1490187963, "answer_id": 42952513, "question_id": 42952091, "link": "https://stackoverflow.com/questions/42952091/split-char-array-as-first-name-middle-name-and-last-name-skip-middle-name-if-i/42952513#42952513", "title": "split char array as first name, middle name and last name, skip middle name if its empty in C language", "body": "<p>As with most things, it's always a good idea to test the results of a function to make sure it's done what you think it has. And by doing so, you can solve your problem as well.</p>\n\n<pre><code>token1 = strtok(udtAddressVar.strName, \" \");\nif(token1)\n  {\n  strcpy(udtAddressVar.strFirstName, token1);\n  token1 = strtok(NULL, \" \");\n  if(token1)\n    { \n    strcpy(udtAddressVar.strMiddleName, token1);\n    token1 = strtok(NULL, \" \");\n    if(token1)\n      {\n      strcpy(udtAddressVar.strLastName, token1);\n      }\n    else\n      {\n      strcpy(udtAddressVar.strLastName, udtAddressVar.strMiddleName);\n      *udtAddressVar.strMiddleName='\\0';\n      }\n    }\n  }\n</code></pre>\n\n<p>You could also expand this yet further to deal with the case where you have 2 or more middle names too.</p>\n"}], "owner": {"reputation": 3, "user_id": 7751355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21ec532d983669f500f2a892544bff99?s=128&d=identicon&r=PG&f=1", "display_name": "Coder", "link": "https://stackoverflow.com/users/7751355/coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 42952513, "answer_count": 3, "score": 0, "last_activity_date": 1490188166, "creation_date": 1490186911, "question_id": 42952091, "link": "https://stackoverflow.com/questions/42952091/split-char-array-as-first-name-middle-name-and-last-name-skip-middle-name-if-i", "title": "split char array as first name, middle name and last name, skip middle name if its empty in C language", "body": "<pre><code>token1 = strtok(udtAddressVar.strName, \" \");\nstrcpy(udtAddressVar.strFirstName, token1);\ntoken1 = strtok(NULL, \" \");\nstrcpy(udtAddressVar.strMiddleName, token1);\ntoken1 = strtok(NULL, \" \");\nstrcpy(udtAddressVar.strLastName, token1);\n</code></pre>\n\n<p>using this code but it fails when there is no middle name. For example works fine for 'John Henry Blue' and not for 'Brad Henry'</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1490186842, "post_id": 42952025, "comment_id": 72999027, "body": "What&#39;s wrong with your code?"}, {"owner": {"reputation": 139, "user_id": 7751380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebe540133aa93909cf08e9be251b6ad?s=128&d=identicon&r=PG&f=1", "display_name": "K2mil J33", "link": "https://stackoverflow.com/users/7751380/k2mil-j33"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490186950, "post_id": 42952025, "comment_id": 72999104, "body": "I can&#39;t use function arg. But this solution using variable v..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490187072, "post_id": 42952025, "comment_id": 72999206, "body": "<i>I can&#39;t use function arg</i>. Why ??"}, {"owner": {"reputation": 11220, "user_id": 2609288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3634e5c231c72e362f00ae39b637734f?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/2609288/baldrick"}, "edited": false, "score": 0, "creation_date": 1490187103, "post_id": 42952025, "comment_id": 72999230, "body": "How can you write a function to count the digits without using a function argument?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490188204, "post_id": 42952025, "comment_id": 73000017, "body": "this <code>v = digits++</code> doesn&#39;t do what you think it does either"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1490188868, "post_id": 42952552, "comment_id": 73000522, "body": "I suggest <code>return (v &gt; 9 ? 1+countDigits(v&#47;10) : 1);</code> so that it gives the correct result when passed <code>0</code>."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1490189046, "post_id": 42952552, "comment_id": 73000651, "body": "@Weather Vane: that was my first shot, too, but it does then not work for negative values. Adapted the code; should work now for <code>0</code> as well as for negative numbers."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1490189209, "last_edit_date": 1490189209, "creation_date": 1490188044, "answer_id": 42952552, "question_id": 42952025, "link": "https://stackoverflow.com/questions/42952025/write-function-in-c-which-count-number-of-given-integer-digits-in-2-lines/42952552#42952552", "title": "Write function in C which count number of given integer digits, in 2 lines", "body": "<p>If it is not allowed to introduce any variables, recursion might be an option:</p>\n\n<pre><code>int countDigits(int v) {\n    return (v &gt;= 10 || v &lt;= -10 ? 1+countDigits(v/10) : 1);\n}\n</code></pre>\n\n<p>Note the extra condition such that the function can also handle negative numbers correctly.</p>\n"}], "owner": {"reputation": 139, "user_id": 7751380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cebe540133aa93909cf08e9be251b6ad?s=128&d=identicon&r=PG&f=1", "display_name": "K2mil J33", "link": "https://stackoverflow.com/users/7751380/k2mil-j33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "closed_date": 1490195254, "answer_count": 1, "score": -8, "last_activity_date": 1490189209, "creation_date": 1490186720, "last_edit_date": 1490186911, "question_id": 42952025, "link": "https://stackoverflow.com/questions/42952025/write-function-in-c-which-count-number-of-given-integer-digits-in-2-lines", "closed_reason": "Needs details or clarity", "title": "Write function in C which count number of given integer digits, in 2 lines", "body": "<p>Any suggestion for better solution?</p>\n\n<p>In C:</p>\n\n<pre><code>int countDigits(int v) {\n    for(int i=v, digits =1 ; i != 0; i = i/10,v = digits++);\n    return v;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "multidimensional-array", "language-lawyer", "strict-aliasing"], "comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1490186535, "post_id": 42951932, "comment_id": 72998813, "body": "I know that only one single question should be asked, but here the second one is just a complement to the first one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490187538, "post_id": 42951932, "comment_id": 72999568, "body": "I think the key here is that both arrays are aggregates that both contain the item <code>int</code> among its members &quot;including, recursively, a member of a subaggregate&quot;. C11 6.5/7."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490187995, "post_id": 42951932, "comment_id": 72999858, "body": "@Lunin My doubts come from 6.7.5.2 Array declarators <i>For two array types to be compatible, ... both size specifiers shall have <b>the same constant value</b>.</i>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490188682, "post_id": 42951932, "comment_id": 73000379, "body": "To nitpick, but the equality you mentioned misses a cast to (unsigned) char, and then a cast back to <code>T*</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1490189176, "post_id": 42951932, "comment_id": 73000744, "body": "@SergeBallesta The arrays here are not compatible types, but they can still alias each other, because of the various exceptions to the mentioned strict aliasing rule."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490189582, "post_id": 42951932, "comment_id": 73001024, "body": "@StoryTeller: The point was not there, but it is now more correct..."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490191261, "post_id": 42951932, "comment_id": 73002394, "body": "@Lundin Type <code>int(*)[3]</code> can&#39;t alias an array of type <code>int[3][4]</code>. Two separate accesses happen, a[0] and then a[0][0]. The latter one is compatible because the effective type is int and access is done through int, but the former one is not, because the effective type is <code>int[4]</code> and the access is done through <code>char[3]</code>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490191899, "post_id": 42951932, "comment_id": 73002884, "body": "@SergeBallesta The claim: <i>pointer to first element of an array of 12 ints (1)</i> Where/how does the array of type int[12] appear there?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490192240, "post_id": 42951932, "comment_id": 73003150, "body": "@2501: In the code, at line noted (3), I use the pointer to first element in a loop of size 12. AFAIK, pointer arithmetics is only valid inside an array, so I assume I can only to that if <code>arr1</code> points to an integer array of size (at least) 12. Per the declaration, <code>arr[0][0]</code> is element of a row, that is an array of size 4, so <code>arr1[i]</code> is guaranteed valid for i in [0,3]."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490192373, "post_id": 42951932, "comment_id": 73003282, "body": "@SergeBallesta That doesn&#39;t seem relevant. Accesses don&#39;t determine a type of an object in this case. The objects at the memory location indicated by the indentifier arr2d are: <code>int[3][4]</code>, three <code>int[4]</code>s, and twelve individual <code>int</code>s. There is no type char[12] at that location."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490192682, "post_id": 42951932, "comment_id": 73003529, "body": "This follows that the access here  <code>for (i=0; i&lt;12; i++) arr1[i] = k++; &#47;&#47; (3)</code>, when value of i is 4, is out of bounds of the inner array, as the pointer is one past the last element. It happens that there is some object there (an int), but strictly reading the standard, it is still out of bounds and ub."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490193560, "post_id": 42951932, "comment_id": 73004276, "body": "@2501: That&#39;s exactly the reason why I have asked this question here: I agree with your arguments, but the aliasing (1) (3) of <code>arr1</code> is very common and was the only way to process array of dynamic sizes before VLA."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490193742, "post_id": 42951932, "comment_id": 73004429, "body": "@SergeBallesta I wouldn&#39;t bet on arguments from popularity. What is wrong with using two loops?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1490194498, "post_id": 42951932, "comment_id": 73005100, "body": "@2501:Nothing is wrong. But I have already encountered use cases where it did make sense to see a 2D array as a 1D one, for example to pass it to a function in legacy code that uses explicit 2D pointer arithmetic on a 1D array. And anyway, I willingly put the language-lawyer tag, because I hope solid advices"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490194573, "post_id": 42951932, "comment_id": 73005166, "body": "@SergeBallesta So you&#39;re worried about legacy code? In that case use appropriate compiler flags and be done with it. i don&#39;t see any reason to do this in modern C code."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490221435, "post_id": 42951932, "comment_id": 73021544, "body": "@2501: If the Standard had specified that use of the <code>+</code> or <code>[]</code> operators directly on something of array type could processed in a fashion other than by converting the array&#39;s address into a pointer-to-element type, adding the appropriate index, and (for <code>[]</code>) applying unary <code>*</code> to the result, then it would make sense to say that use of such operators on array types would only yield defined behavior in a fraction of the cases where a manual cast to the pointer-to-element type followed by an indexing operation would do so.  The Standard doesn&#39;t say any such thing, however."}], "answers": [{"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1491295476, "post_id": 43202262, "comment_id": 73476396, "body": "This answer uses the comments to the question, many thanks to Lundin, 2501 and supercat for their help."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1513377284, "post_id": 43202262, "comment_id": 82645657, "body": "In cases where two pointer values of the same type would be required to identify the same address, and where the behavior of accessing one would be defined, the authors of the C89 didn&#39;t bother to list cases where accesses to the other would be likewise defined since that would have been implied by pointer equivalence.  Unfortunately, later versions of the Standard changed the meaning of pointers such that the aforementioned equivalence doesn&#39;t hold, but didn&#39;t revisit cases whose behavior had been defined by such equivalence.  What&#39;s ironic is that the Standard imposes many restrictions..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1513377589, "post_id": 43202262, "comment_id": 82645745, "body": "...on memory layout which would serve a useful purpose if code could exploit the addressing relations they implied thereby (e.g. the requirement that arrays have no padding was useful mainly because it implied that 2d arrays could be read out as a single sequence of elements).  If code can&#39;t exploit such guaranteed aspects of the layout, there&#39;s little benefit to mandating them,."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1591051440, "post_id": 43202262, "comment_id": 109905052, "body": "&quot;My understanding is that aliasing of 2D array with a 1D array is unspecified by the standard and as such leads to undefined behaviour&quot;   -- you have not established that it is unspecified  ; and also it is not correct to claim that any program with unspecified behaviour also has undefined behaviour .  Nor is it clear why you quoted 6.2.7 since you do not draw any conclusions from the text you quoted"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1591077621, "post_id": 43202262, "comment_id": 109910918, "body": "@M.M. As I said, this answer was mainly compiled from comments. I would be glad that you can prove me that it is wrong."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": -1, "last_activity_date": 1491295355, "creation_date": 1491295355, "answer_id": 43202262, "question_id": 42951932, "link": "https://stackoverflow.com/questions/42951932/aliasing-of-multi-dimensional-arrays/43202262#43202262", "title": "Aliasing of multi-dimensional arrays", "body": "<p>Even if the strict aliasing rules allows to access an object of one type from an object containing it, there are two elements in standards to say that aliasing a 2D array to a 1D array of same size is not allowed:</p>\n\n<p>Compatible type</p>\n\n<blockquote>\n  <p>6.2.7 Compatible type and composite type</p>\n  \n  <p>1 Two types have compatible type if their types are the same.<br/>...<br/>\n  3 A composite type can be constructed from two types that are compatible; it is a type that\n  is compatible with both of the two types and satisfies the following conditions:</p>\n  \n  <ul>\n  <li><strong>If one type is an array of known constant size, the composite type is an array of that\n  size</strong>; otherwise, if one type is a variable length array, the composite type is that type.<br/>...<br/></li>\n  </ul>\n  \n  <p><strong>These rules apply recursively to the types from which the two types are derived</strong>.</p>\n</blockquote>\n\n<p>Conformance:</p>\n\n<blockquote>\n  <p>4 Conformance</p>\n  \n  <p>...<br/></p>\n  \n  <ol start=\"2\">\n  <li>... Undefined behavior is otherwise indicated in this International\n  Standard by the words \u2018\u2018undefined behavior\u2019\u2019 or by the <strong>omission of any explicit definition\n  of behavior</strong>. There is no difference in emphasis among these three; they all describe\n  <strong>\u2018\u2018behavior that is undefined\u2019\u2019</strong>.<br/></li>\n  <li>A program that is correct in all other aspects, operating on correct data, containing\n  unspecified behavior shall be a correct program and act in accordance with 5.1.2.3.<br/>\n  ...<br/></li>\n  <li>A strictly conforming program shall use only those features of the language and library\n  specified in this International Standard.2) <strong>It shall not produce output dependent on any\n  unspecified, undefined, or implementation-defined behavior</strong>, and shall not exceed any\n  minimum implementation limit.</li>\n  </ol>\n</blockquote>\n\n<p>My understanding is that aliasing of 2D array with a 1D array is <em>unspecified</em> by the standard and as such leads to undefined behaviour. A program using it is still <em>a correct program</em> that shall be successfuly compiled, but its output is unspecified</p>\n\n<p>A stricly conforming program should not alias a 2D array to an 1D array.</p>\n\n<p>That being said, common implementation allows it and process it <em>as expected</em> (which is allowed per undefined behaviour...) in order to not break legacy code that heavily depends on it.</p>\n"}], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 1, "accepted_answer_id": 43202262, "answer_count": 1, "score": 3, "last_activity_date": 1491295355, "creation_date": 1490186474, "last_edit_date": 1490189382, "question_id": 42951932, "link": "https://stackoverflow.com/questions/42951932/aliasing-of-multi-dimensional-arrays", "title": "Aliasing of multi-dimensional arrays", "body": "<p>It is well known that a 2D array is an array of arrays, and that it is required by standard to be <em>a contiguously allocated nonempty set of objects</em> (6.2.5 Types \u00a720) - object being a 1D array here.</p>\n\n<p>It is also well known that for all common implementations the following equality is true for <code>T arr2d[X][Y]</code> where T is a type and X and Y integral constants:</p>\n\n<pre><code>(char *) &amp;arr2d[i][j] == (char *) &amp;arr2d[0][0] + i * Y * sizeof(T) + j * sizeof(T)\n</code></pre>\n\n<p>The above let think that it could be allowed to alias a 2D array and an 1D array of same size, or even another 2D array of same total size:</p>\n\n<p>For example the following program compiles and runs with no warnings, and gives expected output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int i, j, k=0;\n    int arr2d[3][4];   // array of 3 array of 4 ints\n    int *arr1 = &amp;arr2d[0][0];  // pointer to first element of an array of 12 ints (1)\n    int (*arrx)[3] = (int(*)[3]) arr1; //pointer to first row of an array of arrays of 3 ints\n                                       //(2)\n\n    for (i=0; i&lt;12; i++) arr1[i] = k++; // (3)\n\n    for (i=0; i&lt;3; i++) {\n        for (j=0; j&lt;4; j++) {\n            printf(\"%3d\", arr2d[i][j]);\n        }\n        putc('\\n', stdout);\n    }\n    for (i=0; i&lt;4; i++) {\n        for (j=0; j&lt;3; j++) {\n            printf(\"%3d\", arrx[i][j]); \n        }\n        putc('\\n', stdout);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>But:</p>\n\n<ul>\n<li>line (1) and (3) <em>alias</em> a 2D array 3x4 to a 1D array 12</li>\n<li>line (2) <em>alias</em> a 2D array 3x4 to a 2D array 4x3 (via a pointer to int)</li>\n</ul>\n\n<p>My questions are: </p>\n\n<ul>\n<li>are (1) and (3) valid according to the C standard?</li>\n<li>if yes, is (2) valid?</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 1, "creation_date": 1490186089, "post_id": 42951774, "comment_id": 72998490, "body": "that&#39;s not the way to pass 2d array"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1490186130, "post_id": 42951774, "comment_id": 72998524, "body": "try <code>void getStrListFromString(char strList[10][10])</code> for the prototype. 2D arrays are not pointers on 1D arrays."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1490186380, "post_id": 42951774, "comment_id": 72998687, "body": "Also, pointers printed using <code>%p</code> must be cast to <code>void *</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490186563, "post_id": 42951774, "comment_id": 72998840, "body": "Stop wasting your time and enable compiler warnings/errors. This code has 3-4 of them that shouldn&#39;t be ignored."}], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 2638191, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HYhDR.jpg?s=128&g=1", "display_name": "Karthik Raj Palanichamy", "link": "https://stackoverflow.com/users/2638191/karthik-raj-palanichamy"}, "edited": false, "score": 0, "creation_date": 1490264494, "post_id": 42951822, "comment_id": 73038586, "body": "I understood. But couldn&#39;t understand why I am getting <code>b[0]</code> as <code>0x7fffbe4ecf00</code> in main but <code>strList[0]</code> as <code>0x7fffbe4ecf80</code> in the function."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 477, "user_id": 2638191, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HYhDR.jpg?s=128&g=1", "display_name": "Karthik Raj Palanichamy", "link": "https://stackoverflow.com/users/2638191/karthik-raj-palanichamy"}, "edited": false, "score": 1, "creation_date": 1490266308, "post_id": 42951822, "comment_id": 73039938, "body": "@Karthik <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined behavior</a>.  When you pass an incompatible pointer to a function, you can&#39;t accurately predict what will happen."}, {"owner": {"reputation": 477, "user_id": 2638191, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HYhDR.jpg?s=128&g=1", "display_name": "Karthik Raj Palanichamy", "link": "https://stackoverflow.com/users/2638191/karthik-raj-palanichamy"}, "edited": false, "score": 0, "creation_date": 1490268580, "post_id": 42951822, "comment_id": 73041507, "body": "but there is certainly a predictable pattern. I always get (address + 128 bytes)?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 477, "user_id": 2638191, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HYhDR.jpg?s=128&g=1", "display_name": "Karthik Raj Palanichamy", "link": "https://stackoverflow.com/users/2638191/karthik-raj-palanichamy"}, "edited": false, "score": 1, "creation_date": 1490271681, "post_id": 42951822, "comment_id": 73043645, "body": "@Karthik You can&#39;t depend on that behavior.  For example, when I run this code I get address + 70."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1490186166, "creation_date": 1490186166, "answer_id": 42951822, "question_id": 42951774, "link": "https://stackoverflow.com/questions/42951774/how-to-pass-an-array-of-strings-to-a-function/42951822#42951822", "title": "How to pass an array of strings to a function?", "body": "<p>Your function expects a <code>char **</code> but you're passing it a <code>char [10][10]</code>.  These are not the same.</p>\n\n<p>An array when passed to a function decayed to a pointer to the first element.  So when you pass a <code>char [10][10]</code> (an array of size 10 of <code>char [10]</code>) to a function it decays into a <code>char (*)[10]</code> (a pointer to a <code>char [10]</code>.</p>\n\n<p>Change your function to accept either <code>char [10][10]</code> or <code>char (*)[10]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1490187094, "creation_date": 1490187094, "answer_id": 42952168, "question_id": 42951774, "link": "https://stackoverflow.com/questions/42951774/how-to-pass-an-array-of-strings-to-a-function/42952168#42952168", "title": "How to pass an array of strings to a function?", "body": "<p>In addition to the core issue about pointer-to-pointer having absolutely nothing to do with multi-dimensional arrays, your also has various other bugs:</p>\n\n<pre><code>main() // obsolete form of main(), won't compile unless C90\n{\n    char b[10][10]; // uninitialized\n    printf(\"%p, %p, %p\\n\", b, b[0], b[9]); // should be void pointers\n    getStrListFromString(b); // wrong type of parameter\n    // return statement necessary here in C90\n}\n\nvoid getStrListFromString(char **strList) // should not be pointer-to-pointer\n{\n    printf(\"%p, %p, %p\\n\", strList, strList[0], strList[9]); // same issue as in main\n}\n</code></pre>\n\n<p>The fact that this code compiled means that your compiler is either complete crap or incorrectly configured. You need to fix that asap.</p>\n\n<p>Corrected code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid getStrListFromString(char strList[10][10])\n{\n    printf(\"%p, %p, %p\\n\", (void*)strList, (void*)strList[0], (void*)strList[9]);\n}\n\nint main (void)\n{\n    char b[10][10];\n    printf(\"%p, %p, %p\\n\", (void*)b, (void*)b[0], (void*)b[9]);\n    getStrListFromString(b);\n}\n</code></pre>\n"}], "owner": {"reputation": 477, "user_id": 2638191, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/HYhDR.jpg?s=128&g=1", "display_name": "Karthik Raj Palanichamy", "link": "https://stackoverflow.com/users/2638191/karthik-raj-palanichamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 42951822, "answer_count": 2, "score": 2, "last_activity_date": 1490187094, "creation_date": 1490186024, "question_id": 42951774, "link": "https://stackoverflow.com/questions/42951774/how-to-pass-an-array-of-strings-to-a-function", "title": "How to pass an array of strings to a function?", "body": "<p>Could anybody please tell me why is the output of both the prints are not same? How to pass an array of strings to a function then?</p>\n\n<pre><code>main()\n{\n    char b[10][10];\n    printf(\"%p, %p, %p\\n\", b, b[0], b[9]);\n    getStrListFromString(b);\n}\n\nvoid getStrListFromString(char **strList)\n{\n    printf(\"%p, %p, %p\\n\", strList, strList[0], strList[9]);\n}\n</code></pre>\n\n<p>Expected OUTPUT :</p>\n\n<pre><code>0x7fffbe4ecf00, 0x7fffbe4ecf00, 0x7fffbe4ecf5a\n0x7fffbe4ecf00, 0x7fffbe4ecf00, 0x7fffbe4ecf5a\n</code></pre>\n\n<p>Actual Output :</p>\n\n<pre><code>0x7fffbe4ecf00, 0x7fffbe4ecf00, 0x7fffbe4ecf5a\n0x7fffbe4ecf00, 0x7fffbe4ecf80, (nil)\n</code></pre>\n"}, {"tags": ["c", "list", "graph", "malloc"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1490185325, "post_id": 42951412, "comment_id": 72997913, "body": "<i>I&#39;m currently struggling with the the first function...</i>: show the code your are struggling with, otherwise it&#39;s hard for us to tell you what&#39;s wrong."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1490185839, "post_id": 42951412, "comment_id": 72998310, "body": "You really cannot have spaces in symbol names (<code>struct linked list</code>) in C. Nor in most other programming languages."}, {"owner": {"reputation": 21, "user_id": 5586684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a9f6530977a586c5dde0b58aeab827ff?s=128&d=identicon&r=PG&f=1", "display_name": "M.Asgari", "link": "https://stackoverflow.com/users/5586684/m-asgari"}, "edited": false, "score": 0, "creation_date": 1490185927, "post_id": 42951412, "comment_id": 72998376, "body": "Im trying to write the first function which is    int initialise_graph(Graph *mygraph, int maxSize)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490186625, "post_id": 42951412, "comment_id": 72998876, "body": "@M.Asgari, yes we understand that you&#39;re trying to write the <code>initialise_graph</code> function. But please show us what you have written so far, even if it&#39;s wrong."}, {"owner": {"reputation": 21, "user_id": 5586684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a9f6530977a586c5dde0b58aeab827ff?s=128&d=identicon&r=PG&f=1", "display_name": "M.Asgari", "link": "https://stackoverflow.com/users/5586684/m-asgari"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490186892, "post_id": 42951412, "comment_id": 72999067, "body": "@MichaelWalz thanks for replying to me! i haven&#39;t written anything yet since i couldn&#39;t figure out how to start it!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1490187027, "post_id": 42951412, "comment_id": 72999170, "body": "@M.Asgari you forgot to mention what the return values of the functions represent."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5586684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a9f6530977a586c5dde0b58aeab827ff?s=128&d=identicon&r=PG&f=1", "display_name": "M.Asgari", "link": "https://stackoverflow.com/users/5586684/m-asgari"}, "edited": false, "score": 0, "creation_date": 1490209875, "post_id": 42952148, "comment_id": 73015589, "body": "thats a perfect answer, Thanks a lot ! would i need to follow the same strategy for the other 2 insert methods as well?"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 21, "user_id": 5586684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a9f6530977a586c5dde0b58aeab827ff?s=128&d=identicon&r=PG&f=1", "display_name": "M.Asgari", "link": "https://stackoverflow.com/users/5586684/m-asgari"}, "edited": false, "score": 0, "creation_date": 1490261059, "post_id": 42952148, "comment_id": 73036044, "body": "No, for insert_graph_node, you need to select an empty element in the table and fill in the details. For onsert_graph_link, you&#39;ll need to create a List object with malloc and add it to the relevant node."}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 0, "last_activity_date": 1490187034, "creation_date": 1490187034, "answer_id": 42952148, "question_id": 42951412, "link": "https://stackoverflow.com/questions/42951412/how-to-allocate-memory-when-initialising-graph-in-c/42952148#42952148", "title": "how to allocate memory when initialising graph in C?", "body": "<blockquote>\n  <p>I'm currently struggling with the first function. I know that I have to allocate memory for each data structure in the first function, but I don't know how to malloc the memory for each struct through the for loop</p>\n</blockquote>\n\n<p>Since your Graph objects have a <code>maxSize</code> member and a single pointer to <code>Node</code> and <code>Node</code> has no links in it, the intent is clearly for you to allocate and initialise an array of nodes. </p>\n\n<p>You'll need sensible values for all the unused nodes in your initially empty graph. I would suggest <code>NULL</code> for the name (not specified yet), <code>NULL</code> for the <code>outlist</code> (i.e. it is empty) and <code>0</code> for <code>outdegree</code>. </p>\n\n<p>I would do this by calling calloc for the nodes which allocates space and zeros all the bytes in that space.</p>\n\n<pre><code>int initialise_graph(Graph *mygraph, int maxSize)\n{\n    mygraph-&gt;maxSize = maxSize;\n    mygraph-&gt;table = calloc(maxSize, sizeof *table);\n    return 0;\n}\n</code></pre>\n\n<p>That's it, you are done.</p>\n\n<p>However:</p>\n\n<ul>\n<li>you might want to put some code in to check that <code>table</code> is non null. Opinioins differ on this, normally I rely on the platform's memory protection to pick it up, but if you are in embedded world, that might not work.</li>\n<li><p>the above code is not strictly speaking portable since a <code>NULL</code> pointer need not be represented by a pattern of all zero bytes. If that concerns you, use a loop to initialise the nodes. (Omitting the NULL check again).</p>\n\n<pre><code> mygraph-&gt;table = calloc(maxSize, sizeof *table);\n // Null check would go here\n for (i = 0 ; i &lt; maxSize ; ++i)\n {\n     table[i].name = NULL;\n     table[i].outlist = NULL;\n     table[i].outdegree = 0;\n }\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 5586684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a9f6530977a586c5dde0b58aeab827ff?s=128&d=identicon&r=PG&f=1", "display_name": "M.Asgari", "link": "https://stackoverflow.com/users/5586684/m-asgari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490187034, "creation_date": 1490185021, "last_edit_date": 1490185719, "question_id": 42951412, "link": "https://stackoverflow.com/questions/42951412/how-to-allocate-memory-when-initialising-graph-in-c", "title": "how to allocate memory when initialising graph in C?", "body": "<p>I'm trying to learn graphs in C and at the moment I'm trying to write a function that initializes the graph with the given data structures. \nso the structures I have are:</p>\n\n<pre><code>typedef struct linked list{\n int index;\n struct linked list *next;\n} List;\n\ntypedef struct {\n char *name;\n List *outlist;\n int outdegree;\n} Node;\n\ntypedef struct {\n int maxSize;\n Node *table;\n} Graph;\n</code></pre>\n\n<p>and i have three functions which are : </p>\n\n<pre><code>int initialise_graph(Graph *mygraph, int maxSize)\n{\n}\n\nint insert_graph_node(Graph *mygraph, int n, char *name)\n{\n}\n\nint insert_graph_link(Graph *mygraph, int source, int target)\n{\n}\n</code></pre>\n\n<p>I'm currently struggling with the first function. \nI know that I have to allocate memory for each data structure in the first function, but I don't know how to malloc the memory for each struct through the for loop. I appreciate it if someone could help me with that please. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490181526, "post_id": 42950124, "comment_id": 72995242, "body": "What did your profiler say?"}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490181665, "post_id": 42950124, "comment_id": 72995320, "body": "@SouravGhosh Sorry, what is a profiler?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1490181670, "post_id": 42950124, "comment_id": 72995326, "body": "You should take a look at generated assembler. Optimizer can do magics.."}, {"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "edited": false, "score": 0, "creation_date": 1490181839, "post_id": 42950124, "comment_id": 72995432, "body": "it doesn&#39;t take too much time if you use first method, it&#39;s purely depend on compiler optimization, you can have look at assembler code after you compile both the methods."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1490182934, "post_id": 42950124, "comment_id": 72996206, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/42311188/which-is-the-better-way-to-declare-dummy-variables-for-nested-loops\">Which is the better way to declare dummy variables for nested loops?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1490181734, "post_id": 42950196, "comment_id": 72995371, "body": "It really depends on the optimizer configuration."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490182258, "post_id": 42950196, "comment_id": 72995726, "body": "<i>&quot;you get a stack push and pop on each iteration&quot;</i> - No it doesn&#39;t necessarily mean that. Implementations can calculate and allocate the required stack frame in advance once. The only difference is which offsets from the stack pointer are used in which loop."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490185845, "post_id": 42950196, "comment_id": 72998318, "body": "&quot;Function scope&quot; doesn&#39;t mean what you think it does. In C, &quot;function scope&quot; refer to labels and goto. Best not to use that term at all."}], "tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1490181673, "creation_date": 1490181673, "answer_id": 42950196, "question_id": 42950124, "link": "https://stackoverflow.com/questions/42950124/local-variables-defined-inside-loop/42950196#42950196", "title": "Local variables defined inside loop", "body": "<p>The compiler will probably optimise the code so that all variables are in function code. If it doesn't, function scope is faster because other wise you get a stack push and pop on each iteration of the loop. But the consideration should be clarity, not micro-optimisation.</p>\n"}, {"tags": [], "owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1490181806, "creation_date": 1490181806, "answer_id": 42950246, "question_id": 42950124, "link": "https://stackoverflow.com/questions/42950124/local-variables-defined-inside-loop/42950246#42950246", "title": "Local variables defined inside loop", "body": "<pre><code>uint8_t contextBitPosition;\n</code></pre>\n\n<p>In most implementations, this shouldn't matter, performance-wise. Given that, it's best if you declare it in the tightest scope possible.</p>\n\n<hr>\n\n<pre><code>__aspProtocol_Event contextEvent = utils_getAbsoluteBitPosition(__aspProtocol_events, arrayIndex, contextBitPosition);\n</code></pre>\n\n<p>This matters. If the result of this operation is always the same, there is no reason to put it inside the loop. You would be better off putting it outside the loop and computing the result once.</p>\n\n<p>While static analysis can theoretically figure this out and move it outside the loop for you, it would take a clever compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "is_accepted": true, "score": 5, "last_activity_date": 1490181848, "creation_date": 1490181848, "answer_id": 42950257, "question_id": 42950124, "link": "https://stackoverflow.com/questions/42950124/local-variables-defined-inside-loop/42950257#42950257", "title": "Local variables defined inside loop", "body": "<p>As they're locals they'll be allocated on the stack. The compiler will do this by adjusting the stack pointer when the function is called to make sure it has enough space for all the locals.</p>\n\n<p>I wouldn't worry about how the space is allocated for variables in nested scopes. If you think you are seeing speed issues when using scoped locals then use a profiler to measure, but I suspect worrying about this is a classic case of premature optimization. Instead write readable and maintainable code.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1490182170, "creation_date": 1490182170, "answer_id": 42950375, "question_id": 42950124, "link": "https://stackoverflow.com/questions/42950124/local-variables-defined-inside-loop/42950375#42950375", "title": "Local variables defined inside loop", "body": "<p>Depending on the compiler, the compiler may re-use stack space. Consider the following example:</p>\n\n<pre><code>for (int i=0; i&lt;somevalue; i++) {\n    for (int j=0; j&lt;i; j++) {\n        int k[1024];\n        ...\n    }\n    for (int j=0; j&lt;i; j++) {\n        int k[1024];\n        ...\n    }\n}\n</code></pre>\n\n<p>in the <code>i</code> loop the variables <code>j</code> of the two for loops may re-use the same stack space and also the array variables <code>k</code> may re-use the same stack space.</p>\n\n<p>So there is no performance improvement but possibly a space improvement</p>\n"}, {"tags": [], "owner": {"reputation": 750, "user_id": 7054387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-6bDjhl9WjJI/AAAAAAAAAAI/AAAAAAAAAA0/HLJVVOTCc1Q/photo.jpg?sz=128", "display_name": "Fatemeh Karimi", "link": "https://stackoverflow.com/users/7054387/fatemeh-karimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1490183552, "creation_date": 1490183552, "answer_id": 42950868, "question_id": 42950124, "link": "https://stackoverflow.com/questions/42950124/local-variables-defined-inside-loop/42950868#42950868", "title": "Local variables defined inside loop", "body": "<p>when a function call happens, memory is allocated for all its local variables, no matter where they are defined. so it won't change the execution time. defining local variables inside or outside a loop only changes their scope.(i mean, the scope that we have access to them)</p>\n\n<p>read more at:\n<a href=\"http://duartes.org/gustavo/blog/post/journey-to-the-stack/\" rel=\"nofollow noreferrer\">journy to stack</a></p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490185709, "creation_date": 1490185709, "answer_id": 42951658, "question_id": 42950124, "link": "https://stackoverflow.com/questions/42950124/local-variables-defined-inside-loop/42951658#42951658", "title": "Local variables defined inside loop", "body": "<p>Where a variable is allocated in your local scope source code has no impact on performance what-so-ever. </p>\n\n<p>The compiler will allocate space for the variable if it is used, at some point before the first time that variable is used. The variable might end up in CPU register or on the stack, or optimized away entirely.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 42950257, "answer_count": 6, "score": 2, "last_activity_date": 1490185709, "creation_date": 1490181474, "last_edit_date": 1490182119, "question_id": 42950124, "link": "https://stackoverflow.com/questions/42950124/local-variables-defined-inside-loop", "title": "Local variables defined inside loop", "body": "<p>I have a function and several nested loops in it. Each loop uses different variable that is not used by the others.</p>\n\n<p>My question is motivated by optimization considerations.</p>\n\n<p>Here it is: Which approach is better?</p>\n\n<p>To define local variables inside the body of the loop</p>\n\n<pre><code>void aspProtocolDetectEvents()\n{\n    uint8_t arrayIndex;\n    for( arrayIndex = 0; arrayIndex &lt; sizeof(__aspProtocol_events); arrayIndex++ )\n    {\n        uint8_t contextBitPosition;\n        for(contextBitPosition = 0; __aspProtocol_events[arrayIndex] != 0; contextBitPosition++)\n        {\n            __aspProtocol_Event contextEvent = utils_getAbsoluteBitPosition(__aspProtocol_events, arrayIndex, contextBitPosition);\n            if( __aspProtocol_isRisenEvent(contextEvent) )\n            {\n                __aspProtocol_dispatchEvent(contextEvent);\n                __aspProtocol_clearEvent(contextEvent);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Or is it better to define all of them at the beginning of the function body like this?:</p>\n\n<pre><code>void aspProtocolDetectEvents()\n{\n    uint8_t arrayIndex;\n    uint8_t contextBitPosition;\n    __aspProtocol_Event contextEvent;\n    for( arrayIndex = 0; arrayIndex &lt; sizeof(__aspProtocol_events); arrayIndex++ )\n    {\n        for(contextBitPosition = 0; __aspProtocol_events[arrayIndex] != 0; contextBitPosition++)\n        {\n            contextEvent = utils_getAbsoluteBitPosition(__aspProtocol_events, arrayIndex, contextBitPosition);\n            if( __aspProtocol_isRisenEvent(contextEvent) )\n            {\n                __aspProtocol_dispatchEvent(contextEvent);\n                __aspProtocol_clearEvent(contextEvent);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I mean, I don't know if the compiler optimizes it. In aspect of code structure I would prefer the first example, but if it takes more time (for allocation each time the loop iterates) I will have to compromise, and use the second one. </p>\n"}, {"tags": ["c", "pointers", "command-line-arguments", "argv"], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 5579365, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10153866160373738/picture?type=large", "display_name": "Adam Copley", "link": "https://stackoverflow.com/users/5579365/adam-copley"}, "edited": false, "score": 0, "creation_date": 1490181649, "post_id": 42950098, "comment_id": 72995308, "body": "Thanks for your response, could you possibly explain why casting to an int results in the values that I did get? just to help me understand what C is doing a bit more?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1485, "user_id": 5579365, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10153866160373738/picture?type=large", "display_name": "Adam Copley", "link": "https://stackoverflow.com/users/5579365/adam-copley"}, "edited": false, "score": 1, "creation_date": 1490181678, "post_id": 42950098, "comment_id": 72995332, "body": "@AdamCopley Already updated the answer."}, {"owner": {"reputation": 1485, "user_id": 5579365, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10153866160373738/picture?type=large", "display_name": "Adam Copley", "link": "https://stackoverflow.com/users/5579365/adam-copley"}, "edited": false, "score": 0, "creation_date": 1490182208, "post_id": 42950098, "comment_id": 72995681, "body": "So was I effectively casting a memory address to an integer? hence the large numbers?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1485, "user_id": 5579365, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10153866160373738/picture?type=large", "display_name": "Adam Copley", "link": "https://stackoverflow.com/users/5579365/adam-copley"}, "edited": false, "score": 1, "creation_date": 1490182321, "post_id": 42950098, "comment_id": 72995772, "body": "@AdamCopley Yep, right."}, {"owner": {"reputation": 1485, "user_id": 5579365, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10153866160373738/picture?type=large", "display_name": "Adam Copley", "link": "https://stackoverflow.com/users/5579365/adam-copley"}, "edited": false, "score": 0, "creation_date": 1490182357, "post_id": 42950098, "comment_id": 72995801, "body": "Aha Thanks again!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1490181702, "last_edit_date": 1490181702, "creation_date": 1490181379, "answer_id": 42950098, "question_id": 42950071, "link": "https://stackoverflow.com/questions/42950071/why-are-my-integer-values-not-being-displayed-or-calculated-correctly-in-c/42950098#42950098", "title": "Why are my integer values not being displayed or calculated correctly in C?", "body": "<p>The problem is, <code>argv[1]</code> (<code>argv[n]</code>, in general) is a pointer to a <em>string</em> cating that to <code>int</code> does not give you the corresponding integer which you might have passed as argument.</p>\n\n<p>That said, the validity of the statement(s) like </p>\n\n<pre><code> leftop = (int) argv[1];\n</code></pre>\n\n<p>are heavily implementation dependent, as validity of pointer-to-integer conversion is implementation specific behaviour. In some of the cases, it causes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p><strong>Solution:</strong> You should be using <a href=\"https://linux.die.net/man/3/strtol\" rel=\"nofollow noreferrer\"><code>strtol()</code></a> to convert the <em>string</em> to integer type.</p>\n"}], "owner": {"reputation": 1485, "user_id": 5579365, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/10153866160373738/picture?type=large", "display_name": "Adam Copley", "link": "https://stackoverflow.com/users/5579365/adam-copley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1490181448, "accepted_answer_id": 42950098, "answer_count": 1, "score": 0, "last_activity_date": 1490181702, "creation_date": 1490181300, "last_edit_date": 1490181653, "question_id": 42950071, "link": "https://stackoverflow.com/questions/42950071/why-are-my-integer-values-not-being-displayed-or-calculated-correctly-in-c", "closed_reason": "Duplicate", "title": "Why are my integer values not being displayed or calculated correctly in C?", "body": "<p>By trade I'm a PHP programmer and wanted to test writing a C program, sending it arguments and using it's output in PHP using <code>shell_exec()</code>.</p>\n\n<p>Anyway, I wrote this code simply to add two numbers together:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint leftop, rightop, result;\n\nint main(int argc, char *argv[])\n{\n    leftop = (int) argv[1];\n\n    rightop = (int) argv[2];\n\n    result = leftop + rightop;\n\n    printf(\"The result of %i add %i = %i\\n\", leftop, rightop, result);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>i compile it with <code>MinGW</code> using <code>gcc -o main.c mycprogram.exe</code>.</p>\n\n<p>When I run the program (either using <code>shell_exec()</code> (php) or from command line) I get the following results.</p>\n\n<p><code>./mycprogram.exe 25 25</code></p>\n\n<p><code>The result of 7150824 add 7149184 = 14300008</code></p>\n\n<p>then i run it again and get:</p>\n\n<p><code>The result of 6692040 add 6692072 = 13384112</code></p>\n\n<p>obviously I expect the result to be <code>50</code>.</p>\n\n<p>How come I'm not getting the correct results?</p>\n"}, {"tags": ["c", "encryption", "rsa", "public-key-encryption", "gmp"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490180941, "post_id": 42949797, "comment_id": 72994823, "body": "Things got confusing once you introduced goto&#39;s instead of dividing the program into smaller functions and using proper control constructs."}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "edited": false, "score": 1, "creation_date": 1490181305, "post_id": 42949797, "comment_id": 72995092, "body": "Your question is...?"}, {"owner": {"reputation": 1, "user_id": 7750945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff79c74d6888376629b80149f2ce5329?s=128&d=identicon&r=PG", "display_name": "user7750945", "link": "https://stackoverflow.com/users/7750945/user7750945"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490181367, "post_id": 42949797, "comment_id": 72995126, "body": "@StoryTeller I know goto is dangerous, but in this case I don&#39;t think it&#39;s the problem. That part is just because I&#39;m lazy. XD, Thanks"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1490181474, "post_id": 42949797, "comment_id": 72995204, "body": "Voted to close because there isn&#39;t a question. What goes wrong? What output are you seeing? What output did you get?"}, {"owner": {"reputation": 1, "user_id": 7750945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff79c74d6888376629b80149f2ce5329?s=128&d=identicon&r=PG", "display_name": "user7750945", "link": "https://stackoverflow.com/users/7750945/user7750945"}, "reply_to_user": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "edited": false, "score": 0, "creation_date": 1490181503, "post_id": 42949797, "comment_id": 72995218, "body": "@lvella Sorry, I&#39;ll complete the question. If a public-key encrypted message can be decrypted by many other private-key, then why is this algorithm secure"}, {"owner": {"reputation": 1, "user_id": 7750945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff79c74d6888376629b80149f2ce5329?s=128&d=identicon&r=PG", "display_name": "user7750945", "link": "https://stackoverflow.com/users/7750945/user7750945"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1490181749, "post_id": 42949797, "comment_id": 72995378, "body": "@JeremyP Sorry, maybe because I open this question with my phone, it lacks some detail. I&#39;m adding it"}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 1, "creation_date": 1490199101, "post_id": 42949797, "comment_id": 73008733, "body": "For RSA the private key is unique mod lamba(N), which means any d + k *   lambda(N) is a valid private key. It&#39;s secure because nobody knows a way to efficiently determine <i>any</i> of the equivalent private keys."}, {"owner": {"reputation": 1, "user_id": 7750945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff79c74d6888376629b80149f2ce5329?s=128&d=identicon&r=PG", "display_name": "user7750945", "link": "https://stackoverflow.com/users/7750945/user7750945"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1490199600, "post_id": 42949797, "comment_id": 73009088, "body": "@JamesKPolk so why I got the second private-key and successfully decrypted the message again with the second private-key in my code? It shouldn&#39;t be unique? Or just because my code went wrong?"}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 1, "creation_date": 1490199796, "post_id": 42949797, "comment_id": 73009232, "body": "Your code is unreadable."}, {"owner": {"reputation": 1, "user_id": 7750945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff79c74d6888376629b80149f2ce5329?s=128&d=identicon&r=PG", "display_name": "user7750945", "link": "https://stackoverflow.com/users/7750945/user7750945"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1490201276, "post_id": 42949797, "comment_id": 73010267, "body": "@JamesKPolk can&#39;t be that bad...."}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 1, "creation_date": 1490307897, "post_id": 42949797, "comment_id": 73067832, "body": "Ok, so I ran your code, and it turns out I answered your question in my previous comment. So I&#39;ll try again. For RSA the private key is unique mod <a href=\"https://en.wikipedia.org/wiki/Carmichael_function\" rel=\"nofollow noreferrer\">lambda(N)</a>, which means any d + k * lambda(N) is a valid private key. It&#39;s secure because nobody knows a way to efficiently determine any of the equivalent private keys."}, {"owner": {"reputation": 1, "user_id": 7750945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff79c74d6888376629b80149f2ce5329?s=128&d=identicon&r=PG", "display_name": "user7750945", "link": "https://stackoverflow.com/users/7750945/user7750945"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1490314800, "post_id": 42949797, "comment_id": 73070122, "body": "@JamesKPolk  My math sucks, but I just check a tutorial. All his number fits my code, so I guess my code is right. What I dont understand is, if a public-key encrypted message can be decrypted by so many private-key, wouldn&#39;t it be easier to be brute-force attacked? Cause I added a loop to get more private-key, then I got the number running like hell. Maybe I should try to crack it to feel how hard is it or fix my math hope one day I will understand it?"}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1491509408, "post_id": 42949797, "comment_id": 73598256, "body": "@user7750945 It&#39;s not that much easier to brute force, because in the formula that James supplied a high <code>k</code> just increases the numbers that you have to work with and they are too far apart that you can work with them. RSA is broken through factoring which is much easier than hoping that this helps you in any way."}, {"owner": {"reputation": 2272, "user_id": 5562045, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/rWILr.png?s=128&g=1", "display_name": "rustyMagnet", "link": "https://stackoverflow.com/users/5562045/rustymagnet"}, "edited": false, "score": 0, "creation_date": 1588081132, "post_id": 42949797, "comment_id": 108758054, "body": "Why not use  <code>mpz_clears</code> and <code>mpz_inits</code> to make code easier to read? These are variadic functions. You need to send in <code>NULL</code> to tell the function that is the end of arguments:   <code>mpz_inits(a, b, c, NULL);</code>"}], "owner": {"reputation": 1, "user_id": 7750945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff79c74d6888376629b80149f2ce5329?s=128&d=identicon&r=PG", "display_name": "user7750945", "link": "https://stackoverflow.com/users/7750945/user7750945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 902, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490182549, "creation_date": 1490180678, "last_edit_date": 1490182549, "question_id": 42949797, "link": "https://stackoverflow.com/questions/42949797/rsa-implementation-in-c-using-gmp", "title": "RSA implementation in c using gmp", "body": "<p>I have wrote this program that successfully encrypt &amp; decrypt the message. Then I added the code that see if there is another private key that pair the same public key, things got comfusing.</p>\n\n<p>Anyway, the code will show everything. Thank you for viewing my question.</p>\n\n<p>I was expecting the message I encrypted by the public-key I just generated which in the below code to be able to decrypted by the only private-key I generate. But after it successfully decryptd the message, I got another private-key that can decrypt the message. </p>\n\n<p>I think it's a lots easier to understand me just reading the code, sorry for the lack of detail. I don't know what's going on.</p>\n\n<p>If a public-key encrypted message can be decrypted by many other private-key, then why is this algorithm secure?</p>\n\n<pre><code>// Module\n // System\n  #include &lt;stdio.h&gt;\n  #include &lt;stdlib.h&gt;\n  #include &lt;unistd.h&gt;\n  #include &lt;limits.h&gt;\n  #include &lt;errno.h&gt;\n  #include &lt;string.h&gt;\n  #include &lt;time.h&gt;\n  #include &lt;math.h&gt;\n  #include &lt;gmp.h&gt;\n  // sys\n   #include &lt;sys/time.h&gt;\n   #include &lt;sys/file.h&gt;\n // Homemade\n  #include \"/root/01_Code/03_C/00_Module/output_option.h\"\n  //\n// main()\n int main(void){\n  // Value\n   // Basic\n    long   Loop  [1];\n    time_t Seed;\n    long   Level = 8;\n    gmp_randstate_t Random_State; gmp_randinit_default(Random_State);\n   // RSA\n    mpz_t Buffer_mpz_1; mpz_init(Buffer_mpz_1);\n    mpz_t Buffer_mpz_2; mpz_init(Buffer_mpz_2);\n    mpz_t Prime_1;      mpz_init(Prime_1);\n    mpz_t Prime_2;      mpz_init(Prime_2);\n    mpz_t Phi;          mpz_init(Phi);\n    mpz_t Common_Key;   mpz_init(Common_Key);\n    mpz_t Public_Key;   mpz_init(Public_Key);\n    mpz_t Private_Key;  mpz_init(Private_Key);\n  // Implementation\n   // RSA init\n    // Prime_1\n     sleep(1);\n     time(&amp;Seed);\n     gmp_randseed_ui(Random_State, Seed);\n     mpz_urandomb(Prime_1, Random_State, Level);\n     while(mpz_probab_prime_p(Prime_1, 49) != 2)\n      mpz_add_ui(Prime_1, Prime_1, 1);\n    // Prime_2\n     sleep(1);\n     time(&amp;Seed);\n     gmp_randseed_ui(Random_State, Seed);\n     mpz_urandomb(Prime_2, Random_State, Level);\n     while(mpz_probab_prime_p(Prime_2, 49) != 2)\n      mpz_add_ui(Prime_2, Prime_2, 1);\n    // Phi\n     mpz_sub_ui(Phi,          Prime_1, 1);\n     mpz_sub_ui(Buffer_mpz_1, Prime_2, 1);\n     mpz_mul(   Phi,          Phi,     Buffer_mpz_1);\n    // Common_Key\n     mpz_mul(Common_Key, Prime_1, Prime_2);\n     //\n    // Public_Key\n     // Init random Public_Key\n      do{\n       sleep(1);\n       time(&amp;Seed);\n       gmp_randseed_ui(Random_State, Seed);\n       mpz_urandomb(Public_Key, Random_State, Level);\n      }while(mpz_cmp(Public_Key, Phi) &gt;= 0 || mpz_cmp_ui(Public_Key, 1) == 0);\n      mpz_set(Buffer_mpz_2, Public_Key);\n     // Pick Public_Key\n      while(1){\n       if(mpz_cmp(Public_Key, Phi) &lt; 0){\n        mpz_gcd(Buffer_mpz_1, Public_Key, Phi);\n        if(mpz_cmp_ui(Buffer_mpz_1, 1) == 0) break;\n        mpz_add_ui(Public_Key, Public_Key, 1);\n       }else{\n        mpz_set(Public_Key, Buffer_mpz_2);\n        while(1){\n         mpz_sub_ui(Public_Key, Public_Key, 1);\n         if(mpz_cmp_ui(Public_Key, 1) == 0){\n          printf(\"%d\\n\", __LINE__);\n          mpz_clear(Buffer_mpz_1);\n          mpz_clear(Buffer_mpz_2);\n          mpz_clear(Prime_1);\n          mpz_clear(Prime_2);\n          mpz_clear(Phi);\n          mpz_clear(Common_Key);\n          mpz_clear(Public_Key);\n          mpz_clear(Private_Key);\n          return 1;\n         }\n         mpz_gcd(Buffer_mpz_1, Public_Key, Phi);\n         if(mpz_cmp_ui(Buffer_mpz_1, 1) == 0) goto l_END_PK;\n        }\n       }\n      }\n      l_END_PK:;\n    // Private_Key\n     mpz_set_ui(Buffer_mpz_1, 1);\n     mpz_set_ui(Private_Key,  2); char Switch = 'V';\n     l_AGAIN:do{\n      mpz_add_ui(Private_Key, Private_Key, 1);\n      mpz_mul(Buffer_mpz_1, Public_Key,   Private_Key);\n      mpz_mod(Buffer_mpz_1, Buffer_mpz_1, Phi);\n     }while(mpz_cmp_ui(Buffer_mpz_1, 1) != 0);\n     if(Switch == 'V'){\n      Switch = 'X';\n      mpz_set(Buffer_mpz_2, Private_Key);\n      goto l_AGAIN;\n     }\n   // Encrypt &amp; Decrypt\n    mpz_set_ui(Buffer_mpz_1, 88);\n    mpz_powm(Buffer_mpz_1, Buffer_mpz_1, Public_Key,  Common_Key);\n    mpz_powm(Buffer_mpz_1, Buffer_mpz_1, Private_Key, Common_Key);\n    gmp_printf(\"Prime_1     %Zd\\n\", Prime_1);\n    gmp_printf(\"Prime_2     %Zd\\n\", Prime_2);\n    gmp_printf(\"Public_Key  %Zd\\n\", Public_Key);\n    gmp_printf(\"Private_Key %Zd\\n\", Private_Key);\n    gmp_printf(\"Common_Key  %Zd\\n\", Common_Key);\n    gmp_printf(\"Decrypted   %Zd\\n\", Buffer_mpz_1);\n    printf(\"----------------------------------------------------\\n\");\n    mpz_set_ui(Buffer_mpz_1, 88);\n    mpz_powm(Buffer_mpz_1, Buffer_mpz_1, Public_Key,   Common_Key);\n    mpz_powm(Buffer_mpz_1, Buffer_mpz_1, Buffer_mpz_2, Common_Key);\n    gmp_printf(\"Prime_1     %Zd\\n\", Prime_1);\n    gmp_printf(\"Prime_2     %Zd\\n\", Prime_2);\n    gmp_printf(\"Public_Key  %Zd\\n\", Public_Key);\n    gmp_printf(\"Private_Key %Zd\\n\", Buffer_mpz_2);\n    gmp_printf(\"Common_Key  %Zd\\n\", Common_Key);\n    gmp_printf(\"Decrypted   %Zd\\n\", Buffer_mpz_1);\n  // Clean up\n   mpz_clear(Buffer_mpz_1);\n   mpz_clear(Buffer_mpz_2);\n   mpz_clear(Prime_1);\n   mpz_clear(Prime_2);\n   mpz_clear(Phi);\n   mpz_clear(Common_Key);\n   mpz_clear(Public_Key);\n   mpz_clear(Private_Key);\n   return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "cs50", "vigenere"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1490180462, "post_id": 42949691, "comment_id": 72994496, "body": "Why the <code>C#</code> and <code>C++</code> tags?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1490180574, "post_id": 42949691, "comment_id": 72994575, "body": "Clearer using <code>key[i] = (int)k[i] - &#39;A&#39;;</code> and <code>key[i] = (int)k[i] - &#39;a&#39;;</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1490180717, "post_id": 42949691, "comment_id": 72994668, "body": "BTW your problem is that you are not null-terminating your string"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1490180779, "post_id": 42949691, "comment_id": 72994709, "body": "@LPs no room in the string to null-terminate it either"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1490185481, "post_id": 42949691, "comment_id": 72998024, "body": "For future reference, please try to make the titles of your questions descriptive of your problem. Something like &quot;output string has random characters at the end&quot; would have been better. The fact that this is a Vigenere cipher program is irrelevant and we already know it doesn&#39;t work well because otherwise you wouldn&#39;t be asking the question."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490205670, "post_id": 42949691, "comment_id": 73013087, "body": "when compiling, always enable all the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic</code>  I also use: <code>-Wconversion -std=gnu11</code> )"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490206041, "post_id": 42949691, "comment_id": 73013322, "body": "this line: <code>char c[strlen(p)];</code> declares a char array that is 1 short.  Need room for the NUL termination byte: Suggest: <code>char c[ strlen(p) +1];</code> followed by: <code>memset( c, &#39;\\0&#39;, strlen(p)+1 );</code> so the resulting string will be NUL terminated.  Note: <code>strlen()</code> returns a <code>size_t</code> so the variables be assigned to should also be <code>size_t</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490206191, "post_id": 42949691, "comment_id": 73013421, "body": "the header file/library <code>cs50</code> is not portable, strongly suggest using the functions found in the standard C library(s)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490206454, "post_id": 42949691, "comment_id": 73013592, "body": "for ease of readability and understanding: 1) consistently indent the code.  indent after every opening brace &#39;{&#39;. unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces as that is wide enough to be visible even with variable width fonts.  2) error messages should be output to <code>stderr</code>, not <code>stdout</code>.  For the &#39;wrong parameter count&#39; error, suggest using: <code>fprintf( stderr, &quot;USAGE: %s  key\\n&quot;, argv[0] );</code>"}], "answers": [{"tags": [], "owner": {"reputation": 47413, "user_id": 1200, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tqCaG.jpg?s=128&g=1", "display_name": "Adam Wright", "link": "https://stackoverflow.com/users/1200/adam-wright"}, "is_accepted": true, "score": 3, "last_activity_date": 1490180772, "creation_date": 1490180772, "answer_id": 42949852, "question_id": 42949691, "link": "https://stackoverflow.com/questions/42949691/my-vigenere-cs-50-project-doesnt-work-well/42949852#42949852", "title": "My &quot;Vigenere CS 50&quot; project doesn&#39;t work well", "body": "<p>It's a good old fashioned \"not null terminated\" string. C style strings (which is what you've created with <code>char c[strlen(p)];</code>) have no length associated with them. To calculate their length, the standard library assumes they'll be terminated with <code>\\0</code> (a null byte). You're not doing this, so when you <code>printf</code>, it carries on printing until it finds one.</p>\n\n<p>You need to:</p>\n\n<ol>\n<li>Allocate enough space for the null byte: <code>char c[strlen(p) + 1];</code></li>\n<li>Put it on the end: <code>c[strlen(p)] = 0;</code></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 7750847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5799794a7079ebed06ac11d289e3b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Barman", "link": "https://stackoverflow.com/users/7750847/vladimir-barman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 42949852, "answer_count": 1, "score": 0, "last_activity_date": 1490182607, "creation_date": 1490180402, "last_edit_date": 1490182607, "question_id": 42949691, "link": "https://stackoverflow.com/questions/42949691/my-vigenere-cs-50-project-doesnt-work-well", "title": "My &quot;Vigenere CS 50&quot; project doesn&#39;t work well", "body": "<p>I'm currently working on Vigenere CS 50 Problem. The code seems working pretty well, but sometimes the output is being confused by further symbols just being added at the end of the output string. For instance when I'm encrypting \"a\" with a key of \"a\" the output will be sometimes just ok as \"a\" and sometimes can look like \"a&lt;\" or \"aR\" or \"a{7\"... </p>\n\n<p>At the same time, the code works ok with much longer keys and more complex plain text, so I'm really confused now and do not really know what to start with. </p>\n\n<p>Could you please have a look of the code?</p>\n\n<p>Thanks in advance,\nVladimir  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, string argv[])\n{\n    if (argc != 2)\n    {\n    printf(\"Usage: ./vigenere k\\n\");\n    return 1;\n    } \n\n    string k = (argv[1]);\n\n    int key[strlen(k)];\n\n    int n = strlen(k);\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        if (isalpha(k[i]))\n        {\n            if (isupper(k[i]))\n            {\n                key[i] = (int)k[i] - 65;\n            }\n            else\n            {\n                key[i] = (int)k[i] - 97;\n            }\n        }\n        else \n        {\n            printf(\"Key must be alphabetical\\n\");\n            return 1;\n        }\n    }\n\n    string p;\n\n    do \n    {\n        printf(\"plaintext: \");\n        p = get_string();\n    } while (p == NULL); \n\n    char c[strlen(p)];\n\n    int cn = 0;\n\n    for (int j = 0, m = strlen(p); j &lt; m; j++)\n    {\n        if (isalpha(p[j]))\n        {\n            if (isupper(p[j])) \n            {\n                c[j] = (((int)p[j] + key[cn] - 65) % 26 + 65);\n            }\n            else\n            {\n                c[j] = (((int)p[j] + key[cn] - 97) % 26 + 97);\n            }\n\n            cn++;\n            cn = cn % n;\n        }\n        else \n        {\n            c[j] = p[j];\n        }\n    }\n\n    printf(\"ciphertext: %s\", c);\n    printf(\"\\n\");\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "opengl", "glfw"], "comments": [{"owner": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1490180342, "post_id": 42949571, "comment_id": 72994424, "body": "So are you trying to draw a wireframe?"}, {"owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "reply_to_user": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1490180851, "post_id": 42949571, "comment_id": 72994752, "body": "@Bartvbl my intention would be to draw a spirograph, for simplicity i was starting from a simple triangle that draws a circle and the expanding it once i can get it to work correctly"}, {"owner": {"reputation": 2708, "user_id": 383632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MT9E1.png?s=128&g=1", "display_name": "Bartvbl", "link": "https://stackoverflow.com/users/383632/bartvbl"}, "edited": false, "score": 0, "creation_date": 1490180930, "post_id": 42949571, "comment_id": 72994807, "body": "So why don&#39;t you saw with lines instead?"}], "answers": [{"comments": [{"owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "edited": false, "score": 0, "creation_date": 1490198288, "post_id": 42950143, "comment_id": 73008111, "body": "Ok thanks, i guess that i was searching for confirmation that it couldn&#39;t be done &quot;easily&quot; to not keep thinking about this problem xD"}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": true, "score": 2, "last_activity_date": 1490181535, "creation_date": 1490181535, "answer_id": 42950143, "question_id": 42949571, "link": "https://stackoverflow.com/questions/42949571/opengl-hide-parts-of-the-screen/42950143#42950143", "title": "Opengl hide parts of the screen", "body": "<blockquote>\n  <p>I clear the GL_COLOR_BUFFER_BIT only when initializing the window</p>\n</blockquote>\n\n<p>That's your problem right there. It's idiomatic in OpenGL to always start with a clear operation of the main framebuffer color bits. That is, because you don't know the state of your window main framebuffer when the operating system is asking for a redraw. For all you know it could have been all replaced with cat pictures in the background without your program knowing it. Seriously: If you have a cat video running and the OS felt the need to rearrange your window's main framebuffer memory this is what you might end up with.</p>\n\n<blockquote>\n  <p>Is there a way to do what i want without having to store all the point coordinates and then clearing the whole screen and redrawing only the lines?</p>\n</blockquote>\n\n<p>For all intents and purposes: No. In theory one could come up with a contraption made out of a convoluted series of stencil buffer operations to implement that, but this would be barking up a very wrong tree.</p>\n\n<p>Here's something for you to try out: Draw a bunch of triangles like you do, then resize your window down so there nothing remains, then resize it back to its original size\u2026 you see where the problem? There's a way to address this particular problem, but that's not what you should do here.</p>\n\n<p>The correct thing is to redraw everything. If you feel that that's to slow you have to optimize your drawing process. On current generation hardware it's possible to churn out on the order of 100 million triangles per second.</p>\n"}], "owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 42950143, "answer_count": 1, "score": 0, "last_activity_date": 1490181535, "creation_date": 1490180137, "question_id": 42949571, "link": "https://stackoverflow.com/questions/42949571/opengl-hide-parts-of-the-screen", "title": "Opengl hide parts of the screen", "body": "<p>(code snippet. I know it's ugly but i wanted to make it work before making it better so please don't pay too much attention to the structure) </p>\n\n<p>I modified slightly the glfw example present in the documentation to have a triangle that rotates when pressing the right arrow key and draws a circle described by the position of one of his  vertices (the blue one in this case).\nI clear the <code>GL_COLOR_BUFFER_BIT</code> only when initializing the window to avoid having to store all the coordinates that will be needed to draw the line (they would be hundreds of thousands in the final program), that means that on the screen every time i press the right arrow a \"copy\" of the triangle is draws rotated by 12 degrees and a line is drawn that connects the old blue angle position to the new one.</p>\n\n<p>The problem now is that i would want to be able to press the escape key <code>GLFW_KEY_ESCAPE</code> and \"delete\" the triangles while keeping the lines drawn.</p>\n\n<p>I tried using a z-buffer to hide the triangles behind a black rectangle but only the last line drawn is visualized (i think this is because opengl doesn't know the z of the previous lines since i don't store them).</p>\n\n<p>Is there a way to do what i want without having to store all the point coordinates and then clearing the whole screen and redrawing only the lines? If this is the case, what would be the best way to store them?</p>\n\n<p>Here is part of the code i have so far.</p>\n\n<pre><code>bool check = 0;\n\nVertex blue = {0.f, 0.6f, 0.5f};\nVertex green = {0.6f,-0.4f, 0.5f};\nVertex red = {-0.6f, -0.4f, 0.5f};\nVertex line = {0.f, 0.6f, 0.f};\nVertex line2 = {0.f, 0.6f, 0.f};\n\nstatic void\nkey_callback(GLFWwindow *window, int key, int scancode, int action, int mods) {\n    if (key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_PRESS)\n        check = !check;\n    if (key == GLFW_KEY_RIGHT &amp;&amp; action == GLFW_PRESS) {\n        line.x = line2.x;\n        line.y = line2.y;\n        rotation -= 12;\n        rad = DegToRad(-12);\n        double x = line.x*cos(rad) - line.y * sin(rad);\n        double y = line.y * cos(rad) + line.x * sin(rad);\n        line2.x = x;\n        line2.y = y;\n}\n\nint main(void) {\n    GLFWwindow *window;\n    glfwSetErrorCallback(error_callback);\n    if (!glfwInit())\n        exit(EXIT_FAILURE);\n    window = glfwCreateWindow(1280, 720, \"Example\", NULL, NULL);\n    if (!window) {\n        glfwTerminate();\n        exit(EXIT_FAILURE);\n    }\n    glfwMakeContextCurrent(window);\n    glfwSetKeyCallback(window, key_callback);\n    glClear(GL_COLOR_BUFFER_BIT);\n    while (!glfwWindowShouldClose(window)) {\n\n        glPolygonMode(GL_FRONT_AND_BACK,GL_LINE);\n        float ratio;\n        int width, height;\n        glfwGetFramebufferSize(window, &amp;width, &amp;height);\n        ratio = width / (float) height;\n        glViewport(0, 0, width, height);\n        glMatrixMode(GL_PROJECTION);\n        glLoadIdentity();\n        glOrtho(-ratio, ratio, -1.f, 1.f, 1.f, -1.f);\n        glMatrixMode(GL_MODELVIEW);\n\n        glLoadIdentity();\n        glRotatef(rotation, 0.f, 0.f, 1.f);\n        glBegin(GL_TRIANGLES);\n        glColor3f(1.f, 0.f, 0.f);\n        glVertex3f(red.x, red.y, red.z);\n        glColor3f(0.f, 1.f, 0.f);\n        glVertex3f(green.x, green.y, green.z);\n        glColor3f(0.f, 0.f, 1.f);\n        glVertex3f(blue.x, blue.y, blue.z);\n        glEnd();\n\n        glLoadIdentity();\n        glLineWidth(1.0);\n        glColor3f(1.0, 0.0, 0.0);\n        glBegin(GL_LINES);\n        glVertex3f(line.x, line.y, line.z);\n        glVertex3f(line2.x, line2.y, line2.z);\n        glEnd();\n\n        if (check){\n            //hide the triangles but not the lines\n         }\n\n        glEnd();\n\n\n        glfwSwapBuffers(window);\n        glfwPollEvents();\n\n    }\n\n    glfwDestroyWindow(window);\n    glfwTerminate();\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c", "comparator", "qsort"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1490179673, "post_id": 42949379, "comment_id": 72993922, "body": "Why not show some code instead of describing it? How you store the points matters a great deal to the solution you can get."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1490179880, "post_id": 42949379, "comment_id": 72994091, "body": "I&#39;d always plump for (2) and suck it."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490181190, "post_id": 42949379, "comment_id": 72995012, "body": "@Bathsheba option 2 could get very expensive for large arrays of points."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1490181321, "post_id": 42949379, "comment_id": 72995103, "body": "there is possibly a 3rd option - have different comparators for each of the coordinates?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490181395, "post_id": 42949379, "comment_id": 72995142, "body": "If so, then either use <code>qsort_r</code> as you detail in your fine answer, or nick the source for <code>qsort_r</code> if your platform doesn&#39;t have it."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490181429, "post_id": 42949918, "comment_id": 72995170, "body": "Nice. Have an upvote. It&#39;s probably juvenile to suggest pinching the source if your platform doesn&#39;t have <code>qsort_r</code>, but I would be tempted."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490181639, "post_id": 42949918, "comment_id": 72995306, "body": "@Bathsheba There&#39;s an implementation of qsort_r in glibc and another in OS X&#39;s libc. Both of these are open source, therefore using their source code is not only not pinching but encouraged (provided you comply with the licence terms, of course)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490182810, "post_id": 42949918, "comment_id": 72996127, "body": "Note that the specification of <code>qsort_r</code> differs on Linux and Mac.  The placement of the extra parameter is different, IIRC."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490182954, "post_id": 42949918, "comment_id": 72996227, "body": "@JonathanLeffler Thanks. In fact, my answer as written is wrong for both OS X and Linux! I&#39;ll edit it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490183290, "post_id": 42949918, "comment_id": 72996449, "body": "Note <a href=\"http://stackoverflow.com/q/39560773/15168\">stackoverflow.com/q/39560773/15168</a> for info about Mac vs Linux."}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 2, "last_activity_date": 1490183527, "last_edit_date": 1495540835, "creation_date": 1490180915, "answer_id": 42949918, "question_id": 42949379, "link": "https://stackoverflow.com/questions/42949379/c-comparator-best-practice-for-when-more-arguments-needed/42949918#42949918", "title": "c comparator best practice for when more arguments needed", "body": "<p>If your system has <a href=\"https://linux.die.net/man/3/qsort_r\" rel=\"nofollow noreferrer\">qsort_r</a>, you can use that. qsort_r has an extra parameter that you can use to pass your coordinate in.</p>\n\n<pre><code>int comparator(const void *l, const void *r, void *param)\n{\n    Point* lPoint = (Point*) l;\n    Point* rPoint = (Point*) r;\n    Coordinate* coord = (Coordinate*) param;\n\n    // Do your comparison ....\n}\n\nvoid mySort(Point* list, size_t listSize, Coordinate sortCoord)\n{\n    qsort_r(list, listSize, sizeof(Point), comparator, &amp;sortCoord);\n}\n</code></pre>\n\n<p>It's definitely available if you are using glibc (e.g. on Linux) and on OS X. However, it is not officially portable. See this answer on portability</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4300896/how-portable-is-the-re-entrant-qsort-r-function-compared-to-qsort\">How portable is the re-entrant qsort_r function compared to qsort?</a></p>\n\n<p>My code example is written for the Linux version. With OS X, the comparator must be declared as</p>\n\n<pre><code> int comparator( void *param, const void *l, const void *r)\n</code></pre>\n\n<p>and the qsort_r call is </p>\n\n<pre><code>qsort_r(list, listSize, sizeof(Point), &amp;sortCoord, comparator);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490183876, "creation_date": 1490183876, "answer_id": 42950988, "question_id": 42949379, "link": "https://stackoverflow.com/questions/42949379/c-comparator-best-practice-for-when-more-arguments-needed/42950988#42950988", "title": "c comparator best practice for when more arguments needed", "body": "<p>The most portable version would probably indeed be to encapsulate the comparsion object(s) (\"functors\") in a separate file, then use a static file scope variable to change the behavior of the function.</p>\n\n<p>something.h</p>\n\n<pre><code>void set_something (something_t s);\n\nint compare_something (const void* obj1, const void* obj2);\n</code></pre>\n\n<p>something.c</p>\n\n<pre><code>#include \"something.h\"\n\nstatic something_t someting = 0;\n\nvoid set_something (something_t s)\n{\n  something = s;\n}\n\nint compare_something (const void* obj1, const void* obj2)\n{\n  const coord_t* c1 = obj1;\n  const coord_t* c2 = obj2;\n\n  // do stuff with c1, c2 based on something\n}\n</code></pre>\n\n<p>The only down-side with this is that you can't have multiple threads performing different kinds of sorting at the same time, but that's not likely to be an issue. (If it is, design some way to pass a \"something\" variable as parameter to each thread callback instead.)</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1490193874, "last_edit_date": 1495541415, "creation_date": 1490191571, "answer_id": 42953987, "question_id": 42949379, "link": "https://stackoverflow.com/questions/42949379/c-comparator-best-practice-for-when-more-arguments-needed/42953987#42953987", "title": "c comparator best practice for when more arguments needed", "body": "<p>I suggest an option #3</p>\n\n<p>C11 presents <code>qsort_s()</code> which provides the needed <em>context</em> parameter.  This is in <em>Annex K (normative)</em> and so may not be included in C11 compliant compiler.<br>\nThe availability of this function may not be wide.</p>\n\n<blockquote>\n  <p>K.3.6.3.2 The qsort_s function</p>\n</blockquote>\n\n<pre><code>errno_t qsort_s(void *base, rsize_t nmemb, rsize_t size,\n    int (*compar)(const void *x, const void *y,\n    void *context), void *context);\n</code></pre>\n\n<blockquote>\n  <p>... The third argument to the comparison function is the\n  <code>context</code> argument passed to <code>qsort_s</code>. The sole use of <code>context</code> by <code>qsort_s</code> is to pass it to the comparison function</p>\n</blockquote>\n\n<hr>\n\n<p>If this function is not available, consider an alternative that mimics this interface.</p>\n\n<p>This idea is similar to the <a href=\"https://stackoverflow.com/a/42949918/2410359\">@JeremyP</a> which suggest <a href=\"https://linux.die.net/man/3/qsort_r\" rel=\"nofollow noreferrer\">qsort_r</a>.  The two functions are similar, except for argument order amongst <code>qsort_r()</code> variants the return type.</p>\n"}], "owner": {"reputation": 23, "user_id": 6931478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467ab1afaea797632d413a8059f7e2a9?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir Moses", "link": "https://stackoverflow.com/users/6931478/ofir-moses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1490193874, "creation_date": 1490179625, "question_id": 42949379, "link": "https://stackoverflow.com/questions/42949379/c-comparator-best-practice-for-when-more-arguments-needed", "title": "c comparator best practice for when more arguments needed", "body": "<p>I intend to sort an array of multidimentional points each time by another coordinate.\nI want to use c qsort() method but in order to do so I have to use comparator function which its input is only two pointers, so I can't send it the desired coordinate to sort by.\nTherefore I figured out two solutions and I am struggling choosing the best one of them :</p>\n\n<ol>\n<li>Use a static variable - an int in this example - initialize it to a -1, and before calling the qsort function set it to the wanted coordinate. In addition, make my comparator, access this variable and compare based on it.</li>\n<li>Build a new struct to hold a pointer to the point and the desired coordinate, then make the comparator to sort two pointers to such struct and use the additional info from the struct.</li>\n</ol>\n\n<p>The first sounds like a quick solution though it might be loop hole, while the second sounds like an overkill for such a simple task.\nI would be glad to hear any better solution if there is to the problem.</p>\n"}, {"tags": ["c", "multithreading", "synchronization"], "comments": [{"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1490179946, "post_id": 42949162, "comment_id": 72994135, "body": "Create a counting semaphore with an initial value of 2, you will get the desired result. But in reverse order."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7750697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e042d40cd5f4aa337f521978afe146?s=128&d=identicon&r=PG&f=1", "display_name": "sush", "link": "https://stackoverflow.com/users/7750697/sush"}, "edited": false, "score": 0, "creation_date": 1490180940, "post_id": 42949550, "comment_id": 72994822, "body": "Thank you Jens. I will make the relevant changes in the code and will get back to you in case of any further queries."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 4, "last_activity_date": 1490180102, "creation_date": 1490180102, "answer_id": 42949550, "question_id": 42949162, "link": "https://stackoverflow.com/questions/42949162/thread-synchronisation-using-semaphore-for-c/42949550#42949550", "title": "Thread synchronisation using semaphore for c", "body": "<p>Why would you even expect them in in an order?</p>\n\n<ul>\n<li>Your threads do things inbetween the different waits, and according to the system scheduler, these can take different amount of time.</li>\n<li><code>printf</code> is a buffered operation that gives you exclusive access to a shared resource. So in addition to your semaphore there is a hidden lock somewhere, that also regulates the progress of your threads. Don't expect the prints to appear in order, even if the calls themselves are.</li>\n</ul>\n\n<p>Then, for the end, using <code>assert</code> here is really a very bad idea. All <code>sem_t</code> operations can (and will) fail spuriously, so it is really bad to abort, just because such a failure.</p>\n\n<p>In fact, <code>sem_t</code> is really a low level tool, and you should never use it without checking return values and without having a fall back strategy if such a call fails.</p>\n"}, {"comments": [{"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1490180242, "post_id": 42949578, "comment_id": 72994346, "body": "Check @JensGustedt answer!"}, {"owner": {"reputation": 1, "user_id": 7750697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e042d40cd5f4aa337f521978afe146?s=128&d=identicon&r=PG&f=1", "display_name": "sush", "link": "https://stackoverflow.com/users/7750697/sush"}, "edited": false, "score": 0, "creation_date": 1490181033, "post_id": 42949578, "comment_id": 72994900, "body": "ohh okay. will try the same. Thank you."}], "tags": [], "owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "is_accepted": false, "score": 0, "last_activity_date": 1490181089, "last_edit_date": 1490181089, "creation_date": 1490180150, "answer_id": 42949578, "question_id": 42949162, "link": "https://stackoverflow.com/questions/42949162/thread-synchronisation-using-semaphore-for-c/42949578#42949578", "title": "Thread synchronisation using semaphore for c", "body": "<p>Of course. I can't see any order related synchronization mechanism. </p>\n\n<p>One of the options to achieve the strict order is to have one semaphore per thread:</p>\n\n<pre><code>sem_t sem[3];\n\n// ...\n\nwhile(1) {\n        for(n = 0; n &lt; 3; n++) {\n                rc=sem_post(&amp;sem[n]);\n                assert(rc==0);\n        }\n\n        sleep(1);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7750697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e042d40cd5f4aa337f521978afe146?s=128&d=identicon&r=PG&f=1", "display_name": "sush", "link": "https://stackoverflow.com/users/7750697/sush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1271, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490181089, "creation_date": 1490179093, "question_id": 42949162, "link": "https://stackoverflow.com/questions/42949162/thread-synchronisation-using-semaphore-for-c", "title": "Thread synchronisation using semaphore for c", "body": "<p>I am writing a c program to create three threads(1,2,3) such that at any given point of time only one thread must execute and print the output on console in the order 123123123123......... </p>\n\n<p>I am making use of semaphore for synchronization. </p>\n\n<p>I am having an issue with the code i have written. the code doesn't print it in the order 123123... the order is random and stops after a while. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;semaphore.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;assert.h&gt;\n#include&lt;stdlib.h&gt;\n\nsem_t sem_1;\n\nvoid *func1(void *arg){\n\n    int err1=0;\n\n    while(1){\n            err1=sem_wait(&amp;sem_1);\n            assert(err1==0);\n            printf(\"thread 1\\n\");\n    }\n    //return NULL;\n}\n\nvoid *func2(void *arg){\n\n   int err2=0;\n\n    while(1){\n            err2=sem_wait(&amp;sem_1);\n            assert(err2==0);\n            printf(\"thread 2\\n\");\n    }\n   // return NULL;\n}\n\nvoid *func3(void *arg){\n\n  int err3=0;\n\n   while(1){\n            err3=sem_wait(&amp;sem_1);\n            assert(err3==0);\n            printf(\"thread 3\\n\");\n    }\n   // return NULL;\n}\n\nint main(){\n\n    pthread_t *t1,*t2,*t3;\n    int i=0,rc=0,c1=0,c2=0,c3=0;\n    t1=(pthread_t *)malloc(sizeof(*t1));\n    t2=(pthread_t *)malloc(sizeof(*t2));\n    t3=(pthread_t *)malloc(sizeof(*t3));\n\n    i=sem_init(&amp;sem_1,0,1);\n    assert(i==0);\n\n    c1=pthread_create(t1,NULL,func1,NULL);\n    assert(c1==0);\n\n    c2=pthread_create(t2,NULL,func2,NULL);\n    assert(c2==0);\n\n    c3=pthread_create(t3,NULL,func3,NULL);\n    assert(c3==0);\n\n    while(1){\n            rc=sem_post(&amp;sem_1);\n            assert(rc==0);\n            sleep(1);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "utf-8", "crt"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1490179445, "post_id": 42949134, "comment_id": 72993759, "body": "The file position is not in general reliably for text streams.  Extra bonus for decoding utf-8, it requires buffering file data.  So ftell() returns a value that is too large.  You&#39;ll have to stop trying to make it work."}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1490180063, "post_id": 42949134, "comment_id": 72994222, "body": "But the docs say nothing about it. And anyhow why? I am always running on a full line UTF-8 char boundary (newline). Why this shouldn&#39;t be save? Or did I miss something?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1490180575, "post_id": 42949134, "comment_id": 72994579, "body": "This bit concerns me: <i>&quot;The text file simply contains some lines, with some lines have UTF-8&quot;</i>.  Could you clarify, is the whole file UTF-8 or only parts of it?"}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1490181001, "post_id": 42949134, "comment_id": 72994868, "body": "The whole file is UTF-8 but you see AFAIK only 1 line with chars using more than 1 char in UTF-8. So nearly all lines are simply 8bit per char or in other words chars in the ascii range. Sorry for the confusion. This file has currently no BOM and as you see I speficy the encoding by myself in the fopen."}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1490186519, "post_id": 42949134, "comment_id": 72998802, "body": "Must be a bug. Just calling GetLength() inside the loop is sufficient to repro the bug. GetLength itself saves the current position and restores it and do it in a wrong bad way."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1490187472, "post_id": 42949134, "comment_id": 72999515, "body": "@xMRI You are wrong about the docs, since you are running this on Windows you need to look at these docs: <a href=\"https://msdn.microsoft.com/en-us/library/75yw9bf3(v=vs.100).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/75yw9bf3(v=vs.100).aspx</a> ,  it says quite a bit about seeking in text files."}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1490187882, "post_id": 42949134, "comment_id": 72999791, "body": "@nos: Tell me where I am wrong! Quote it is save to do this: &quot;For streams opened in text mode, fseek and _fseeki64have limited use, because carriage return\u2013linefeed translations can cause fseek and _fseeki64to produce unexpected results. The only fseek and _fseeki64operations guaranteed to work on streams opened in text mode are: Seeking with an offset of 0 relative to any of the origin values. Seeking from the beginning of the file with an offset value returned from a call to ftell when using fseekor _ftelli64when using_fseeki64.&quot; I am just doing the second case."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1490188400, "post_id": 42949134, "comment_id": 73000159, "body": "You are not seeking with an offset of 0 except for the 1. iteration of your loop, and you are not seeking from the beginning of the file (you call fseek after the _fgetts() call, and _fgetts() advances the position so its no longer from the start of your file.)"}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 1, "creation_date": 1490188993, "post_id": 42949134, "comment_id": 73000613, "body": "I am doing this &quot;Seeking from the beginning of the file with an offset value returned from a call to ftell when using fseekor _ftelli64when using_fseeki64.&quot; What else?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1490189530, "post_id": 42949134, "comment_id": 73000998, "body": "@xMRi What value does <code>fseek()</code> return?  You may want to try setting <a href=\"https://msdn.microsoft.com/en-us/library/ksazx244%28v=vs.100%29.aspx\" rel=\"nofollow noreferrer\">an invalid parameter handler</a>, even if just to see if whether or not gets called - if your invalid parameter handler does get called, you&#39;ll know something is wrong.  You should also check the return value from your second <code>_fgetts()</code> call."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1490194292, "post_id": 42949134, "comment_id": 73004906, "body": "Echoing @AndrewHenle, to help debug this code, add <code>auto pos = ftell(fStream); assert(pos != -1);</code> and <code>int retval = fseek(fStream,pos,SEEK_SET); assert(retval ==0);</code>   I&#39;d also check the return value of <code>_fgetts(szBuffer2, _countof(szBuffer2), fStream);</code>.  Adding these 3 checks will help narrow the issue.  IOWs, with an I/O problem, check the return of <i>all</i> I/O functions."}, {"owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "edited": false, "score": 0, "creation_date": 1490254474, "post_id": 42949134, "comment_id": 73032203, "body": "Changed the code sample above. All checks passes. No error at all."}], "owner": {"reputation": 13842, "user_id": 2790621, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/b7bSs.jpg?s=128&g=1", "display_name": "xMRi", "link": "https://stackoverflow.com/users/2790621/xmri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1490254562, "creation_date": 1490179032, "last_edit_date": 1490254562, "question_id": 42949134, "link": "https://stackoverflow.com/questions/42949134/how-to-use-ftell-and-fseek-in-an-utf-8-encoded-with-visual-studio", "title": "How to use ftell and fseek in an UTF-8 encoded with Visual Studio?", "body": "<p>I want to seek back to a known position in a file. Therefore I use ftell to save the position and later I use fseek to get back.</p>\n\n<p>I know about the restrictions, to seek to a specific position. But this doesn't apply to my case. I have a known position and I want to return to it.</p>\n\n<p>Here the test code I wrote, to simplify the problem. It just saves a position in the file. Reads a string, gets back and rereads the string. And I get an assert, because sometimes I get two different results.</p>\n\n<pre><code>#include \"stdlib.h\"\n#include \"crtdbg.h\"\n\nint main()\n{\n    FILE *fStream = nullptr;\n    if (_tfopen_s(&amp;fStream,_T(\"TestFTell.txt\"), _T(\"rt,ccs=UTF-8\")))\n        return 0;\n\n    TCHAR szBuffer1[256], szBuffer2[256];    \n    for (;;)\n    {\n        auto pos = ftell(fStream);\n        _ASSERT(pos!=-1);\n        if (!_fgetts(szBuffer1, _countof(szBuffer1), fStream))\n            break;\n        auto retval1 = fseek(fStream,pos,SEEK_SET);\n        _ASSERT(retval1!=-1);\n        auto retval2 = _fgetts(szBuffer2, _countof(szBuffer2), fStream);\n        _ASSERT(retval2!=0);\n        _ASSERT(_tcscmp(szBuffer1, szBuffer2)==0);      \n    }\n    return 0;\n}\n</code></pre>\n\n<p>The program is compiled for unicode use.\nThe text file simply contains some lines, with some lines have UTF-8 chars.\n<a href=\"https://www.dropbox.com/s/j27hmmx8uwinyj5/TestFTell.txt?dl=0\" rel=\"nofollow noreferrer\">Here a test file.</a> </p>\n\n<p>I tested it in VS-2010, VS-2013, VS-2015. In all versions I get an ASSERT.</p>\n\n<p>Is this a bug, or do I misunderstand ftell/fseek?</p>\n\n<p>How can I return to a previous read position in the file?</p>\n\n<p>Or did I discover a bug in the CRT?</p>\n\n<p>PS: In VS-2010 I already filed a bug <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/591030/ftell-returns-negative-value-for-utf-8-files-opened-with-textmode-and-ccs\" rel=\"nofollow noreferrer\">for this case</a>. They wrote that it will be fixed. Seams that this was never fixed.</p>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1490178459, "post_id": 42948670, "comment_id": 72993026, "body": "Regarding compile-time evaluation, I&#39;m not sure that&#39;s a constant expression. For example, I don&#39;t think you could have something like <code>int x[IS_LITTLE_ENDIAN ? 10 : 20];</code> at file scope."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1490178557, "post_id": 42948670, "comment_id": 72993091, "body": "I&#39;m not sure how portable anything related to &quot;endianness&quot; is. There&#39;s no requirement at all that there are only two kinds of endianness. A hypothetical architecture could easily have padding in its integral representations, or arrange the bits in some non-sequential way."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490178570, "post_id": 42948670, "comment_id": 72993103, "body": "@KerrekSB It compiles in clang with <code>-Wall -std=c11</code>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490178570, "post_id": 42948670, "comment_id": 72993104, "body": "@KerrekSB - C11 has a well defined notion of what is a constant expression. And a conditional expression is one such thing if all operands are themselves constant expressions."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490178594, "post_id": 42948670, "comment_id": 72993124, "body": "@StoryTeller: Does that include the cast? (Yes, the conditional expression is of course fine, but I was concerned about the cast in the comparison expression.) Reworded."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1490178703, "post_id": 42948670, "comment_id": 72993204, "body": "@KerrekSB - In this particular case, I think not [ see <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.6p8\" rel=\"nofollow noreferrer\">here</a> ]. But it&#39;s not disallowed in general."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1490178807, "post_id": 42948670, "comment_id": 72993287, "body": "@KerrekSB My mistake, it does <b>not</b> compile at file scope. I had my declaration in a function scope (oops)."}, {"owner": {"reputation": 457, "user_id": 2711115, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/585cbaf4951cfcd70ba4858712539685?s=128&d=identicon&r=PG&f=1", "display_name": "user2711115", "link": "https://stackoverflow.com/users/2711115/user2711115"}, "edited": false, "score": 0, "creation_date": 1490179072, "post_id": 42948670, "comment_id": 72993484, "body": "So is the cast to char* the reason its not a constant expression?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490179185, "post_id": 42948670, "comment_id": 72993574, "body": "@user2711115 - You got it."}, {"owner": {"reputation": 457, "user_id": 2711115, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/585cbaf4951cfcd70ba4858712539685?s=128&d=identicon&r=PG&f=1", "display_name": "user2711115", "link": "https://stackoverflow.com/users/2711115/user2711115"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490179375, "post_id": 42948670, "comment_id": 72993697, "body": "@StoryTeller thanks, could the use of a union instead of a cast be helpful here? edit: something like this #define IS_BIG_ENDIAN (!(union { uint16_t u16; unsigned char c; }){ .u16 = 1 }.c) from <a href=\"http://stackoverflow.com/a/2100549/2711115\">stackoverflow.com/a/2100549/2711115</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490179537, "post_id": 42948670, "comment_id": 72993821, "body": "@user2711115 - Not really. The union is not considered a constant expression either (its address is, if you create a compound literal at file scope), but I don&#39;t know how that can be useful to you."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1490179626, "post_id": 42948670, "comment_id": 72993884, "body": "@user2711115 I do not think there is any way you can do this and have the resulting expression be a compile time constant. The fundamental problem is, I think, that the compiler does not necessarily know the endianness of the target platform."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490179781, "post_id": 42948670, "comment_id": 72994012, "body": "@StoryTeller The cast to char* isn&#39;t the reason, it&#39;s the compound literal that is not a constant."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490179916, "post_id": 42948670, "comment_id": 72994112, "body": "@2501 - At file scope, the compound literal is a static object, and taking its address produces a constant expression."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490179988, "post_id": 42948670, "comment_id": 72994165, "body": "@StoryTeller That is not relevant to what I&#39;m talking about. You agreed that the cast to char* is the reason the expression isn&#39;t a constant. That is not correct. I want to point that out so OP won&#39;t be mislead."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1490180069, "post_id": 42948670, "comment_id": 72994227, "body": "@2501 - The cast to char* invalidates the expression from being a CE either way. At block scope, it&#39;s the literals address that isn&#39;t a CE, but what difference does it make any way? The OP can&#39;t use that macro as CE endianess indicator. There is nothing misleading about telling them that."}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490178984, "post_id": 42949087, "comment_id": 72993416, "body": "It&#39;s not a portable constant expression, which is what I believe the OP was asking."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1490179034, "post_id": 42949087, "comment_id": 72993454, "body": "You might be right on a second reading. Let&#39;s see how this answer fares in the voting process."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1490179128, "post_id": 42949087, "comment_id": 72993526, "body": "Well, the point about it not really testing endianess well, kind of renders the constant expression discussion moot. So you know my opinion vote-wise :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1490180238, "post_id": 42949087, "comment_id": 72994342, "body": "&quot;The storage arrangements of an int are left purely to the implementation.&quot; Not entirely sure if this is correct. C allows three different kinds of signedness format. The mostly fictional <i>one&#39;s complement</i> and <i>sign &amp; magnitude</i> may have padding bits. I don&#39;t see how this code would fail even on such fictional systems though. I suppose it might be better to use <code>unsigned int</code>, but it isn&#39;t a grave sin to assume that your code will only be executed on computers that actually exist in the real world."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1490180801, "post_id": 42949087, "comment_id": 72994719, "body": "&quot;The mostly fictional one&#39;s complement and sign &amp; magnitude may have padding bits&quot; I had that in mind when I answered, without the &quot;mostly fictional&quot; bit. The problem I have with these sort of macros is folk assume they are definitive. But I have dropped the word &quot;purely&quot;, replacing with &quot;largely&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1490195639, "post_id": 42949087, "comment_id": 73006041, "body": "&quot;There is indeed no undefined behaviour here so it&#39;s portable&quot; --&gt; Hmm, I tried compiling <code>#define IS_LITTLE_ENDIAN (1 == *(unsigned char *)&amp;(const int){1}) #if IS_LITTLE_ENDIAN   int test; #endif</code> with &quot;error: operator &#39;==&#39; has no right operand&quot;.  So unclear how this is portable, if it does not compile."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 4, "last_activity_date": 1490180943, "last_edit_date": 1490180943, "creation_date": 1490178925, "answer_id": 42949087, "question_id": 42948670, "link": "https://stackoverflow.com/questions/42948670/is-this-c99-is-little-endian-macro-portable/42949087#42949087", "title": "Is this C99 IS_LITTLE_ENDIAN macro portable?", "body": "<p>There is indeed no undefined behaviour here so it's portable in that sense.</p>\n\n<p>But the condition doesn't <em>necessarily</em> prove <code>IS_LITTLE_ENDIAN</code>ness.</p>\n\n<p>The storage arrangements of an <code>int</code> are largely left to the implementation. There are other choices other than the classical little and big endian schemes, and your macro could yield a false positive.</p>\n"}], "owner": {"reputation": 457, "user_id": 2711115, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/585cbaf4951cfcd70ba4858712539685?s=128&d=identicon&r=PG&f=1", "display_name": "user2711115", "link": "https://stackoverflow.com/users/2711115/user2711115"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 42949087, "answer_count": 1, "score": 2, "last_activity_date": 1490180943, "creation_date": 1490177869, "last_edit_date": 1490180090, "question_id": 42948670, "link": "https://stackoverflow.com/questions/42948670/is-this-c99-is-little-endian-macro-portable", "title": "Is this C99 IS_LITTLE_ENDIAN macro portable?", "body": "<p>While looking for a compile-time endian detection macro I found this:</p>\n\n<pre><code>#define IS_LITTLE_ENDIAN (1 == *(unsigned char *)&amp;(const int){1})\n</code></pre>\n\n<p>According to <a href=\"/a/14272916\">an answer to <em>C Macro definition to determine big endian or little endian machine?</em></a>, this can be evaluated at compile-time (at least with GCC) and doesn't assume any memory alignment. Is this really portable (provided C99 is available) and if so what are the caveats of this macro?</p>\n"}, {"tags": ["c", "linux", "ssl", "wolfssl"], "comments": [{"owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "edited": false, "score": 0, "creation_date": 1490179276, "post_id": 42948526, "comment_id": 72993632, "body": "Well you could modify the code of cyassl and just check it by brute force (iterating over the array). Other than that, I don&#39;t think you can avoid using a debugger."}, {"owner": {"reputation": 526, "user_id": 4629630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DX63.png?s=128&g=1", "display_name": "Kaleb", "link": "https://stackoverflow.com/users/4629630/kaleb"}, "edited": false, "score": 0, "creation_date": 1490272570, "post_id": 42948526, "comment_id": 73044305, "body": "@watts please keep us posted on your findings. wolfSSL is very proactive when it comes to any vulnerabilities and they guarantee a fix and new release following any such reports. If you do identify a weakness in the wolfSSL implementation please alert them by emailing support@wolfssl.com as soon as possible!"}], "owner": {"reputation": 107, "user_id": 5841863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58b6c8f27176a5bacd36542808e55b0?s=128&d=identicon&r=PG&f=1", "display_name": "watts", "link": "https://stackoverflow.com/users/5841863/watts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490177493, "creation_date": 1490177493, "question_id": 42948526, "link": "https://stackoverflow.com/questions/42948526/how-to-ensure-or-check-if-the-unitialised-memory-contains-0s", "title": "How to ensure or check if the unitialised memory contains 0s?", "body": "<p>I'm trying to reproduce the skipTLS attack against cyassl &lt; 3.3.0 (wolfSSL) that allows to skip steps in the handshake and thus impersonate a server and force the client to communicate in clear. The specific attack is described here : <a href=\"http://www.ieee-security.org/TC/SP2015/papers-archived/6949a535.pdf\" rel=\"nofollow noreferrer\">http://www.ieee-security.org/TC/SP2015/papers-archived/6949a535.pdf</a> (p. 9-10).</p>\n\n<p>This exploit relies on the fact that unitialised memory in the cyassl client (coded in C) is set to 0 (a 12-long byte array).</p>\n\n<p>The attack inexplicably fails, and I wanted to check if it was because the unitialised memory wasn't set to 0. </p>\n\n<p>Now, the papers claims :</p>\n\n<blockquote>\n  <p>Consequently,  the  byte  array  that  stores  the  transcript  MAC\n  remains  uninitialized,  and  in  most  runtime  environments  this\n  array contains zeroes.</p>\n</blockquote>\n\n<p>I'm running the client on Ubuntu 16.04.</p>\n\n<p>Would you know of a way to check if the memory contains 0s (debugging would be quite painful as I'm working in blackbox) ?</p>\n\n<p>Or, alternatively, would there be an environment in which the probability that this area  of uninitialised memory contains 0s would be higher ?</p>\n\n<p>I know that I can't ever be sure that it always contains 0, but if it works from time to time, it's fine by me. </p>\n"}, {"tags": ["c++", "c", "xml-parsing", "expat-parser"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1490175705, "post_id": 42947704, "comment_id": 72991007, "body": "Use a library. If you don&#39;t know anything about parsing in general, then definitely use a library."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1490177334, "post_id": 42947704, "comment_id": 72992233, "body": "Do not underestimate the complexity of writing a parser for even quite a simple language. Use a library, it&#39;s much easier."}, {"owner": {"reputation": 85, "user_id": 5344906, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b997d8bcdda9a7acbaf39bb17c411562?s=128&d=identicon&r=PG&f=1", "display_name": "Rohith Mohan", "link": "https://stackoverflow.com/users/5344906/rohith-mohan"}, "edited": false, "score": 0, "creation_date": 1490179739, "post_id": 42947704, "comment_id": 72993977, "body": "My task just got more complicated. My data is in the form of a XML based binary encoding scheme. So from this I should either directly parse the transmitted binary representation or restore the XML representation. Can someone give some details on the basics of data parsing?"}], "answers": [{"tags": [], "owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "is_accepted": false, "score": 2, "last_activity_date": 1490175799, "last_edit_date": 1495540447, "creation_date": 1490175799, "answer_id": 42947821, "question_id": 42947704, "link": "https://stackoverflow.com/questions/42947704/how-to-implement-a-parser-in-c-for-xml-based-structured-language/42947821#42947821", "title": "How to implement a parser in C for xml based structured language?", "body": "<p>Use libxml or libexpat.\nThere are millions, trillions of examples you can find on net, or even at StackOverflow.\nHave a look at this: <a href=\"https://stackoverflow.com/questions/5465965/how-can-libxml2-be-used-to-parse-data-from-xml\">How can libxml2 be used to parse data from XML?</a></p>\n"}, {"comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 1, "creation_date": 1490177385, "post_id": 42948468, "comment_id": 72992275, "body": "It also won&#39;t parse XML which makes it useless to the questioner."}, {"owner": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1490180262, "post_id": 42948468, "comment_id": 72994367, "body": "yes, just in case that XML isn&#39;t real requirement."}], "tags": [], "owner": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "is_accepted": false, "score": -1, "last_activity_date": 1490177363, "creation_date": 1490177363, "answer_id": 42948468, "question_id": 42947704, "link": "https://stackoverflow.com/questions/42947704/how-to-implement-a-parser-in-c-for-xml-based-structured-language/42948468#42948468", "title": "How to implement a parser in C for xml based structured language?", "body": "<p>or use google protobuf, \nalthough it is not xml-based, but it fast.</p>\n"}], "owner": {"reputation": 85, "user_id": 5344906, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b997d8bcdda9a7acbaf39bb17c411562?s=128&d=identicon&r=PG&f=1", "display_name": "Rohith Mohan", "link": "https://stackoverflow.com/users/5344906/rohith-mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "closed_date": 1490180199, "answer_count": 2, "score": -2, "last_activity_date": 1490177363, "creation_date": 1490175571, "question_id": 42947704, "link": "https://stackoverflow.com/questions/42947704/how-to-implement-a-parser-in-c-for-xml-based-structured-language", "closed_reason": "Needs more focus", "title": "How to implement a parser in C for xml based structured language?", "body": "<p>I need to implement a simple parser in C (or C++ if C is discouraged for this application) that will read a xml file which will only contain a few elements (that's why called it xml based) i.e., only 4 root elements and and less than 5 child elements totally.\nIs it easy to implement or should I use a library like expat? And if it is possible can someone tell me how I can about the process? </p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490174950, "post_id": 42947435, "comment_id": 72990462, "body": "<code>int Minutes;</code> move to before do-while loop."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1490175048, "post_id": 42947435, "comment_id": 72990528, "body": "<a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">Find a good beginners book</a> and read about <i>scoping</i>."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1490176223, "post_id": 42947435, "comment_id": 72991371, "body": "The error pretty much says it all."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1490175033, "creation_date": 1490175033, "answer_id": 42947486, "question_id": 42947435, "link": "https://stackoverflow.com/questions/42947435/cs50-pset1-water-c-i-am-getting-error-while-compiling/42947486#42947486", "title": "cs50 pset1 water.c I am getting error while compiling", "body": "<p><code>int Minutes</code> is declared local to the loop body, meaning that the loop condition <code>while(Minutes&lt; 0)</code> has no idea what \"Minutes\" is.</p>\n\n<p>Simply move the declaration out of the loop, above it.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7594521, "user_type": "registered", "profile_image": "https://graph.facebook.com/1214597728616149/picture?type=large", "display_name": "Alwira Sheikh", "link": "https://stackoverflow.com/users/7594521/alwira-sheikh"}, "edited": false, "score": 0, "creation_date": 1490178181, "post_id": 42947488, "comment_id": 72992838, "body": "It is showing following error: water.c:10:8: error: declaration shadows a local variable [-Werror,-    Wshadow]        int Minutes = get_int();        ^     water.c:6:11: note: previous declaration is here        int y, Minutes=0;            ^     water.c:10:8: error: unused variable &#39;Minutes&#39; [-Werror,-Wunused-    variable]        int Minutes = get_int();        ^     2 errors generated. make: *** [water] Error 1 ~/workspace/pset1/ $"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1490178511, "post_id": 42947488, "comment_id": 72993060, "body": "The new error is because you still have <code>int Minutes = get_int();</code> in the loop meaning <code>Minutes</code> is redeclared -- it should be <code>Minutes = get_int();</code>."}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": false, "score": 1, "last_activity_date": 1490175382, "last_edit_date": 1490175382, "creation_date": 1490175040, "answer_id": 42947488, "question_id": 42947435, "link": "https://stackoverflow.com/questions/42947435/cs50-pset1-water-c-i-am-getting-error-while-compiling/42947488#42947488", "title": "cs50 pset1 water.c I am getting error while compiling", "body": "<p>You defined <code>Minutes</code> in the scope of the <code>do</code> block. That means it can only be used within that same scope - ie. between the <code>{}</code> enclosing the block.</p>\n\n<p>You are however using the variable outside of that scope (twice in fact).</p>\n\n<p>Instead, define <code>Minutes</code> before the <code>do</code> loop :</p>\n\n<pre><code>int Minutes = 0;\ndo {\n    printf(\"Minutes: \");\n    Minutes = get_int();\n}\nwhile(Minutes&lt; 0);\n</code></pre>\n\n<p>This puts it in the scope of the <code>main</code> function body, so it can be used anywhere in the <code>main</code> function (after its definition).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7884675, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/06e64a345228d00b1da0fdade57d677f?s=128&d=identicon&r=PG", "display_name": "DEJI BALOGUN", "link": "https://stackoverflow.com/users/7884675/deji-balogun"}, "is_accepted": false, "score": 0, "last_activity_date": 1492532705, "last_edit_date": 1492532705, "creation_date": 1492525280, "answer_id": 43474835, "question_id": 42947435, "link": "https://stackoverflow.com/questions/42947435/cs50-pset1-water-c-i-am-getting-error-while-compiling/43474835#43474835", "title": "cs50 pset1 water.c I am getting error while compiling", "body": "<p><strong>This is the answer</strong></p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\"minutes: \");\n    int minutes = get_int();\n\n    printf(\"bottles: \");\n    int bottles = get_int();\n\n    printf(\"%i\\n divided %i\\n is %i\\n\", minutes, bottles, minutes / bottles);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7594521, "user_type": "registered", "profile_image": "https://graph.facebook.com/1214597728616149/picture?type=large", "display_name": "Alwira Sheikh", "link": "https://stackoverflow.com/users/7594521/alwira-sheikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1492532705, "creation_date": 1490174874, "question_id": 42947435, "link": "https://stackoverflow.com/questions/42947435/cs50-pset1-water-c-i-am-getting-error-while-compiling", "title": "cs50 pset1 water.c I am getting error while compiling", "body": "<p>following code is throwing compiling error. I am new to programming and so dont know what else to do. I did as taught in the class but cant get it right. cam anyone please help me solve it?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;cs50.h&gt;\n\nint main(void)\n{\n   int y; \ndo\n{\n   printf(\"Minutes: \");\n   int Minutes = get_int();\n}\nwhile(Minutes&lt; 0);\n\ny= Minutes * 12;\nprintf(\"Bottles: %i\\n\", y);\n}\n</code></pre>\n\n<p>it is throwing following error:</p>\n\n<pre><code>water.c:10:8: error: unused variable 'Minutes' [-Werror,-Wunused-variable]\n   int Minutes = get_int();\n   ^\nwater.c:12:7: error: use of undeclared identifier 'Minutes'\nwhile(Minutes&lt; 0);\n  ^\nwater.c:14:4: error: use of undeclared identifier 'Minutes'\ny= Minutes * 12;\n   ^\n    3 errors generated.\nmake: *** [water] Error 1\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1490174702, "post_id": 42947050, "comment_id": 72990305, "body": "What is <code>N</code> ? Are you reading beyond the bounds of the array ? To better help you, can you create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete and Verifiable Example</a> ?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1490174804, "post_id": 42947050, "comment_id": 72990360, "body": "The question is a bit unclear to me. Are you saying that gdb is showing that the value of <code>node-&gt;pointer[4]</code> is <code>0x1</code> ?"}, {"owner": {"reputation": 27, "user_id": 7206092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80ea35ae50e2a5de23d9f89b46f151b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7206092/aaron"}, "edited": false, "score": 0, "creation_date": 1490178065, "post_id": 42947050, "comment_id": 72992755, "body": "Yes, gdb is showing node-&gt;pointer[4] as 0x1 and node-&gt;pointer[5] as 0x0(NULL)."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1490179528, "post_id": 42947050, "comment_id": 72993815, "body": "@aaron - In that case you can be pretty sure that pointer[4] is not pointing to anything valid. A pointer value of 0x1 is most likely not a valid value. What is the value of the three valid pointers? It seems you have a bug that write 0x1 to the pointer."}, {"owner": {"reputation": 27, "user_id": 7206092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80ea35ae50e2a5de23d9f89b46f151b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7206092/aaron"}, "edited": false, "score": 0, "creation_date": 1490194382, "post_id": 42947050, "comment_id": 73004994, "body": "how can I get rid of that. More than that how can I find out the bug."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7206092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80ea35ae50e2a5de23d9f89b46f151b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7206092/aaron"}, "edited": false, "score": 0, "creation_date": 1490178052, "post_id": 42947489, "comment_id": 72992743, "body": "Thank you for the suggestion. And my question is more about can I know the memory location that the pointer is pointing to holds a data structure I&#39;m looking for??"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 27, "user_id": 7206092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80ea35ae50e2a5de23d9f89b46f151b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7206092/aaron"}, "edited": false, "score": 0, "creation_date": 1490179400, "post_id": 42947489, "comment_id": 72993716, "body": "@aaron And I answered that: you cannot. It can&#39;t be done. No, there is no way to do that. You must ensure by the program&#39;s logic that your pointers point at valid locations (or <code>NULL</code>) at all times, if you intend to dereference them."}, {"owner": {"reputation": 27, "user_id": 7206092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80ea35ae50e2a5de23d9f89b46f151b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7206092/aaron"}, "edited": false, "score": 0, "creation_date": 1490197267, "post_id": 42947489, "comment_id": 73007362, "body": "Putting a bound on the number of pointers checked has helped my algorithm and it is working. Thank you very much."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 0, "last_activity_date": 1490175045, "creation_date": 1490175045, "answer_id": 42947489, "question_id": 42947050, "link": "https://stackoverflow.com/questions/42947050/how-to-check-if-the-pointer-of-a-particular-data-structure-is-pointing-to-anothe/42947489#42947489", "title": "how to check if the pointer of a particular data structure is pointing to another node of the same data structure", "body": "<p>Not in general, no. Pointers don't carry any additional meta information besides their value, at run-time. You cannot inspect memory and figure out what it is holding (you can <em>try</em> by decorating your data with magic numbers).</p>\n\n<p>Also, your code is scary since if all the pointers are used, it will run out of bounds. You must make sure <code>i</code> is less than <code>N</code> in the loop, and exit when all pointers have been checked.</p>\n"}], "owner": {"reputation": 27, "user_id": 7206092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80ea35ae50e2a5de23d9f89b46f151b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/7206092/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 1, "accepted_answer_id": 42947489, "answer_count": 1, "score": 0, "last_activity_date": 1490177743, "creation_date": 1490173884, "last_edit_date": 1490177743, "question_id": 42947050, "link": "https://stackoverflow.com/questions/42947050/how-to-check-if-the-pointer-of-a-particular-data-structure-is-pointing-to-anothe", "title": "how to check if the pointer of a particular data structure is pointing to another node of the same data structure", "body": "<p>This is the structure I defined for my B+ Tree. The function I display returns the number of the not NULL pointers of a node. The problem I'm encountering is that one of the pointers is pointing to:</p>\n\n<pre><code>7:i = 4\n\n8: node-&gt;pointer[i] = (struct bptree *) 0x1\n</code></pre>\n\n<p>when checked in gdb which is neither a NULL pointer or a pointer to a Bptree node. When actually the answer should be 3. So is there a way to see if the pointer is pointing a Bptree structure or any data structure it is supposed to point to. N is the order of the B+ Tree</p>\n\n<pre><code>struct bptree\n{\n    char **key;\n    int nokeys;\n    struct bptree* pointer[N];\n    int root;\n    int leaf;\n    struct bptree* parent;\n};\n\ntypedef struct bptree Bptree;\n\nint noofpointers(Bptree *node)\n{\n    int i = 0;\n    if(node == NULL)\n        return i;\n    while(node-&gt;pointer[i] != NULL)\n        i++;\n    return i;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "loops", "character"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490173652, "post_id": 42946738, "comment_id": 72989641, "body": "<code>Exit</code> processing does not work as expected."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7431345, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051568748304209/picture?type=large", "display_name": "Han Sen", "link": "https://stackoverflow.com/users/7431345/han-sen"}, "edited": false, "score": 0, "creation_date": 1490174465, "post_id": 42946876, "comment_id": 72990151, "body": "but if I put my last else if condition to newline=0 , I wont be able to restart the while loop. I have instead put newline=0 in the Exit processing"}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1490173716, "last_edit_date": 1490173716, "creation_date": 1490173265, "answer_id": 42946876, "question_id": 42946738, "link": "https://stackoverflow.com/questions/42946738/c-program-to-count-how-many-vowels-in-a-list-of-input-words/42946876#42946876", "title": "C program to count how many vowels in a list of input words", "body": "<p>You have an infinite loop. <code>newline</code> will never be 0. and the outer while loop will never exit.</p>\n\n<p>So, you need to change the <code>newline=1</code> in the last else if condition to <code>newline=0</code>.</p>\n\n<p>In addition, the variable <code>v</code> is not initialized, so you are not getting the first answer correctly. You should set <code>v=0</code> at the beginning before the while loop starts.</p>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 4511648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CM1MZsdZ9dU/AAAAAAAAAAI/AAAAAAAACFI/ZgS6h-YjtAU/photo.jpg?sz=128", "display_name": "Dorin", "link": "https://stackoverflow.com/users/4511648/dorin"}, "is_accepted": false, "score": 1, "last_activity_date": 1490177571, "last_edit_date": 1490177571, "creation_date": 1490177232, "answer_id": 42948410, "question_id": 42946738, "link": "https://stackoverflow.com/questions/42946738/c-program-to-count-how-many-vowels-in-a-list-of-input-words/42948410#42948410", "title": "C program to count how many vowels in a list of input words", "body": "<p>You should review few things:</p>\n\n<ol>\n<li><p>When compare char, case-insensitive, is easy to do like that:</p>\n\n<p><code>char c1, c2;\n if ( toupper(c1) == toupper(c1) ) {\n     do_something();\n }</code></p></li>\n<li><p>To exit from a loop, I would use <code>break;</code> instead of <code>return;</code></p></li>\n</ol>\n\n<p>The whole code would be this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint isVowel(char c);\nint isExit(char* c);\n\nint main(void)\n{\n    char s1[51];\n    int N, i, v = 0;\n    int noExit = 1;\n\n    while( noExit ){\n        fgets( s1, 51, stdin);\n        N=strlen(s1);\n\n        for(i=0;i&lt;N;i++) {\n            if ( isExit(&amp;s1[i]) ) {\n                 printf(\"2\\n\");\n                 noExit = 0;\n                 break;\n            }\n            else{\n                if( isVowel(s1[i]) ) {\n                    v++;\n                }\n                else if( s1[i]==' ' || s1[i]=='\\n' ) {\n                    printf(\"%d\\n\", v);\n                    v=0;\n                }\n            }\n        }\n    }\n    return 0;\n}\n\nint isVowel(char c) {\n    c = toupper(c);\n    if( c=='A' || c=='E' || c=='I' || c=='O' || c=='U' )\n        return 1;\n    else\n        return 0;\n}\n\nint isExit(char* c) {\n    if ( (toupper(c[0]) == 'E') &amp;&amp; (toupper(c[1]) == 'X') &amp;&amp;\n         (toupper(c[2]) == 'I') &amp;&amp; (toupper(c[3]) == 'T')    ) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7431345, "user_type": "registered", "profile_image": "https://graph.facebook.com/1051568748304209/picture?type=large", "display_name": "Han Sen", "link": "https://stackoverflow.com/users/7431345/han-sen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1490180327, "creation_date": 1490172876, "last_edit_date": 1490180327, "question_id": 42946738, "link": "https://stackoverflow.com/questions/42946738/c-program-to-count-how-many-vowels-in-a-list-of-input-words", "title": "C program to count how many vowels in a list of input words", "body": "<p>I need to write a program to count how many vowels (\u2018a\u2019, \u2018e\u2019, \u2018i\u2019, \u2018o\u2019, \u2018u\u2019) in a list of input words. My program reads the words one by one and prints the number of vowels occurring in each word. Each word consists of only alphabets in mixed cases. The program repeats this process until hitting the word \u201cexit\u201d (case-insensitive). In this case, terminate the program after printing the number of vowels in \u201cexit\u201d. After termination, the program shall ignore remaining inputs, if any.</p>\n\n<p>Input: Multiple words spanning across lines.\nEach word shall consists of no more than 50 characters.\nThe words are separated by white spaces.</p>\n\n<p>Output: The number of vowels in each of the input word, separated by newline.\nThat is, one number on a line.</p>\n\n<p>Example expected input output</p>\n\n<p>Input:</p>\n\n<p>I go to school by BUS</p>\n\n<p>Exit</p>\n\n<p>Output:</p>\n\n<p>1</p>\n\n<p>1</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>0</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>Another Input:</p>\n\n<p>I</p>\n\n<p>went</p>\n\n<p>apple</p>\n\n<p>school</p>\n\n<p>by</p>\n\n<p>BUS</p>\n\n<p>Exit</p>\n\n<p>Output:</p>\n\n<p>1</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>2</p>\n\n<p>0</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>I am having problem with \"Time limit exceed\" and i do appreciate any feedback to my program</p>\n\n<p>when i input:</p>\n\n<p>I go to school by BUS</p>\n\n<p>i got a notification Time limit exceed and an output :</p>\n\n<p>1</p>\n\n<p>1</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>0</p>\n\n<p>1</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\nchar s1[51], ex[5];\nint N, i, v, newline=1;\nwhile(newline){\nfgets( s1, 51, stdin);\nif((s1[0]=='e' || s1[0]=='E')&amp;&amp;(s1[1]=='x' || s1[1]=='X')&amp;&amp;(s1[2]=='i' ||       s1[2]=='I')&amp;&amp;(s1[3]=='t' || s1[3]=='T')&amp;&amp;(s1[4]=='\\0' || s1[4]==' ')){\n    printf(\"2\\n\"); // to check whether the input is Exit\n    newline=0;\n}\nelse{\n    N=strlen(s1);\n    for(i=0;i&lt;N;i++){\n        if(s1[i]=='a' || s1[i]=='o' || s1[i]=='e' || s1[i]=='i' || s1[i]=='u' || s1[i]=='A' || s1[i]=='O' || s1[i]=='E' || s1[i]=='I' || s1[i]=='U'){\n            v++; // to calculate the number of vowels\n                 }\n         if(s1[i+1]==' '){ // if next entry is spacebar, print the number of vowels in the current word and add i so that next loop will start on new word\n            printf(\"%d\\n\", v);\n            v=0;\n            i++;\n        }\n        else if(s1[i+1]=='\\n'){ // if next entry is new line, print the number of vowels in the current word, restart the whole program by exiting the for loop \n            printf(\"%d\\n\", v);\n            v=0;\n            newline=1;\n            break;\n        }\n\n        }\n\n        }\n    }\n\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 2, "creation_date": 1490172253, "post_id": 42946525, "comment_id": 72988803, "body": "Is your program IO-bound?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1490172263, "post_id": 42946525, "comment_id": 72988812, "body": "there&#39;s a bottleneck and that&#39;s not the CPU: I/O is probably the culprit. <code>grep</code> doesn&#39;t use that much CPU and a lot of I/O: not the best candidate for parallel processing."}, {"owner": {"reputation": 21, "user_id": 7750181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09400b815dd7f488674663cd6055c89a?s=128&d=identicon&r=PG&f=1", "display_name": "Gwiazda02", "link": "https://stackoverflow.com/users/7750181/gwiazda02"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1490182962, "post_id": 42946525, "comment_id": 72996231, "body": "@Dietrich Epp I think it is IO-bount. Most of time there are reading from file and printing to std IO."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1490183283, "post_id": 42946525, "comment_id": 72996446, "body": "IO-bound programs won&#39;t get faster if you add more CPU (like going from single-threaded to parallel).  That&#39;s exactly the difference between IO-bound and CPU-bound."}], "owner": {"reputation": 21, "user_id": 7750181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09400b815dd7f488674663cd6055c89a?s=128&d=identicon&r=PG&f=1", "display_name": "Gwiazda02", "link": "https://stackoverflow.com/users/7750181/gwiazda02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490172175, "creation_date": 1490172175, "question_id": 42946525, "link": "https://stackoverflow.com/questions/42946525/openmp-for-parallel-does-not-speeds-up-program-in-c", "title": "OpenMP for parallel does not speeds up program in c", "body": "<p>Hi I'm trying to create my own version of grep program. That program takes pattern and text files as input and search through files line by line for a pattern. When pattern is found in line, that line is printed.</p>\n\n<p>My problem is that I want to do searching in parallel, each file analyzed simultaneously, but there is no program speed up it takes as much time as serial version of code.</p>\n\n<p>Below the code:</p>\n\n<pre><code>void searchPatternInFile(char *fileName, char *inputPattern){\n\nsize_t      bufsize = 32;   \nchar        *tmpLineLeft, *tmpLineBeforePattern, *patFoundPointer;\nFILE        *fp;\nint         lineNum = 0;\nint     patPos  = 0;\nbool        found   = false;\n\n\nfp=fopen(fileName, \"r\");\n\nif(fp == NULL)\n{\n    perror(fileName);\n    exit(1);\n}\n\nwhile(!feof(fp))\n{\n    ++lineNum;\n\n    tmpLineLeft = (char *)malloc(bufsize * sizeof(char));\n\n    if( tmpLineLeft == NULL)\n    {\n        perror(\"B\u0139\u201a\u00c4\u2026d przy pr\u0102\u0142bie dynamicznej alokacji pami\u00c4\u2122ci!\");\n        exit(1);\n    }\n\n    getline(&amp;tmpLineLeft, &amp;bufsize, fp);\n\n\n    patFoundPointer = strstr(tmpLineLeft, inputPattern);\n\n    found = patFoundPointer != NULL;\n\n    if(found)\n    {       \n        printf(BLU \"\u0139\u0161cie\u0139\u013dka:%s\\n\" MAG \"Numer linii:%d\\t\" RESET, fileName, lineNum);\n    }\n\n    while(patFoundPointer)\n    {  \n\n        patPos = patFoundPointer - tmpLineLeft;\n\n        tmpLineBeforePattern = (char *)malloc((patPos +1) * sizeof(char));\n\n        if( tmpLineBeforePattern == NULL)\n        {\n            perror(\"B\u0139\u201a\u00c4\u2026d przy pr\u0102\u0142bie dynamicznej alokacji pami\u00c4\u2122ci!\");\n            exit(1);\n        }\n\n        strncpy(tmpLineBeforePattern, tmpLineLeft, patPos);\n\n        tmpLineBeforePattern[patPos] = '\\0';\n\n        strcpy(tmpLineLeft, &amp;tmpLineLeft[patPos + strlen(inputPattern)]);\n\n        printf(\"%s\", tmpLineBeforePattern);\n        printf(YEL \"%s\" RESET, inputPattern);\n\n        patFoundPointer = strstr(tmpLineLeft, inputPattern);\n\n        free(tmpLineBeforePattern);\n\n    }\n    if(found)\n    {\n        printf(\"%s\\n\", tmpLineLeft);\n    }\n    free(tmpLineLeft);\n}\nfclose(fp);\n}\n\n\nint main(int argc, char *argv[])\n{   \nconst int   patternLen = 10;\nchar        pattern[patternLen + 1];\n//char      fileName[FILENAME_MAX];\nint     numOfFilesToSearch = argc - 2;\nfloat       elapsed;\n\n\ndouble start_time = omp_get_wtime();        \n\nif(argc &lt; 3)\n{       \n    printf(\"Niepoprawne parametry!\\n\");\n    exit(1);\n}\nelse \n{\n    strncpy(pattern, argv[1], patternLen);\n    pattern[patternLen] = '\\0';     \n}\n\nint i;\n#pragma omp parallel for        \nfor(i = 1; i &lt;= numOfFilesToSearch; ++i)\n{\n    char localFileName[FILENAME_MAX];\n\n    strcpy(localFileName, argv[i+1]);\n\n    searchPatternInFile(localFileName, pattern);    \n}\n\n\ndouble end_time = omp_get_wtime(); \n\nelapsed = end_time - start_time;\n\nprintf(\"Czas wykonania programu: %f s\\n\", elapsed);\n\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "hashtable", "linear-probing"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1490171155, "post_id": 42945976, "comment_id": 72988186, "body": "I doubt you intended to nest your for loops in that monstrosity called <code>insertion</code>, but that&#39;s exactly what you did, and in so doing, you cycle <code>i</code>. The days of line editing on a decwriter are long-gone. indent, and properly brace, your code."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7750020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa722a79960fe341c7226105e1f3cda?s=128&d=identicon&r=PG&f=1", "display_name": "Ashrav", "link": "https://stackoverflow.com/users/7750020/ashrav"}, "edited": false, "score": 0, "creation_date": 1490190255, "post_id": 42946529, "comment_id": 73001581, "body": "In the question, it was given that I have to do so using structures. Incase reg%size gives the same value (which I am referring to as collision), I want the key value (reg%size) to shift to the next empty location and the details to be stored there. I don&#39;t understand why you said it&#39;ll overwrite. Structures can store information, and I declared 4 records using <code>stud[4]</code> I am sorry for the indentation, I am new to programming. Will keep in mind for future questions :)"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 23, "user_id": 7750020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa722a79960fe341c7226105e1f3cda?s=128&d=identicon&r=PG&f=1", "display_name": "Ashrav", "link": "https://stackoverflow.com/users/7750020/ashrav"}, "edited": false, "score": 0, "creation_date": 1490191384, "post_id": 42946529, "comment_id": 73002489, "body": "What you describe is not hashing. Of course you use structures, but you store them in the linked lists of the buckets. And linked list itself is a struct, of course More than enough structs to satisfy your teacher!"}, {"owner": {"reputation": 23, "user_id": 7750020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa722a79960fe341c7226105e1f3cda?s=128&d=identicon&r=PG&f=1", "display_name": "Ashrav", "link": "https://stackoverflow.com/users/7750020/ashrav"}, "edited": false, "score": 0, "creation_date": 1490197938, "post_id": 42946529, "comment_id": 73007864, "body": "According to what we have been taught, there are 2 ways to implement hash table 1) Using linked list, 2) array implementation. I am trying to use array implementation in my code. I agree your method sounds much better but I have been asked to solve this problem in this way only. Can you please tell me how I can fix this code?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 23, "user_id": 7750020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa722a79960fe341c7226105e1f3cda?s=128&d=identicon&r=PG&f=1", "display_name": "Ashrav", "link": "https://stackoverflow.com/users/7750020/ashrav"}, "edited": false, "score": 0, "creation_date": 1490202538, "post_id": 42946529, "comment_id": 73011099, "body": "Ashrav, my apologies. I didn&#39;t see the linear probing and had forgotten about it.. Though I found the bug. See revised answer"}, {"owner": {"reputation": 23, "user_id": 7750020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa722a79960fe341c7226105e1f3cda?s=128&d=identicon&r=PG&f=1", "display_name": "Ashrav", "link": "https://stackoverflow.com/users/7750020/ashrav"}, "edited": false, "score": 0, "creation_date": 1490254263, "post_id": 42946529, "comment_id": 73032100, "body": "Thanks a lot. And can you tell me how to do the same thing for quadratic probing?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 23, "user_id": 7750020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa722a79960fe341c7226105e1f3cda?s=128&d=identicon&r=PG&f=1", "display_name": "Ashrav", "link": "https://stackoverflow.com/users/7750020/ashrav"}, "edited": false, "score": 0, "creation_date": 1490263182, "post_id": 42946529, "comment_id": 73037626, "body": "The basic way to implement quadratic probing is 1) google; 2) write the algorithm 3) debug it. Your work, your learning, and probably your homework."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1490202971, "last_edit_date": 1490202971, "creation_date": 1490172191, "answer_id": 42946529, "question_id": 42945976, "link": "https://stackoverflow.com/questions/42945976/linear-probing-not-working-for-collision/42946529#42946529", "title": "Linear probing not working for collision", "body": "<p>The problem is in your inner loops.</p>\n\n<pre><code>        else\n            for(i=0;i&lt;k;i++)\n            {\n</code></pre>\n\n<p><code>i</code> is already in use, so you must use a new variable:</p>\n\n<pre><code>        else\n            for(int j=i+1;j&lt;k;j++)\n            {\n</code></pre>\n\n<p>This error is present in many places.</p>\n\n<p>I believe your code can be \"compressed\". I believey our <code>if..else { for..if..else { for..if</code> can be made into a single loop that, starting from <code>reg%size</code> searches for the first empty entry. That would make an elegant solution.</p>\n"}], "owner": {"reputation": 23, "user_id": 7750020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa722a79960fe341c7226105e1f3cda?s=128&d=identicon&r=PG&f=1", "display_name": "Ashrav", "link": "https://stackoverflow.com/users/7750020/ashrav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 42946529, "answer_count": 1, "score": 1, "last_activity_date": 1490202971, "creation_date": 1490170204, "last_edit_date": 1490171506, "question_id": 42945976, "link": "https://stackoverflow.com/questions/42945976/linear-probing-not-working-for-collision", "title": "Linear probing not working for collision", "body": "<p>I am making a hash table based on reg no. The insertion function is working fine but the search and deletion doesn't work in case of collision. It's not doing anything at all. There aren't any compilation errors either. Any help would be appreciated.</p>\n\n<pre><code>int size=4;\nstruct students\n{\n    char name[50];\n    int regno;\n    int age;\n    char city[50];\n}stud[4];\n\nvoid insertion()\n{\n    int reg,k,i;\n    printf(\"\\nenter the student details you want to insert:\\n\");\n    printf(\"\\nenter regno: \");\n    scanf(\"%d\",&amp;reg);\n    k=reg%size;\n    if (stud[k].regno==0)\n    {\n        stud[k].regno=reg;\n        printf(\"\\nenter name: \");\n        scanf(\"%s\",&amp;stud[k].name);\n        printf(\"\\nenter age: \");\n        scanf(\"%d\",&amp;stud[k].age);\n        printf(\"\\nenter city: \");\n        scanf(\"%s\",&amp;stud[k].city);\n    }\n\n    else\n    {\n        for(i=k+1;i&lt;size;i++)\n        {\n            if (stud[i].regno==0)\n            {\n                stud[i].regno=reg;\n                printf(\"\\nenter name: \");\n                scanf(\"%s\",&amp;stud[i].name);\n                printf(\"\\nenter age: \");\n                scanf(\"%d\",&amp;stud[i].age);\n                printf(\"\\nenter city: \");\n                scanf(\"%s\",&amp;stud[i].city);\n                break;\n            }\n            else\n                for(i=0;i&lt;k;i++)\n                {\n                    if (stud[i].regno==0)\n                    {\n\n                        stud[i].regno=reg;\n                        printf(\"\\nenter name: \");\n                        scanf(\"%s\",&amp;stud[i].name);\n                        printf(\"\\nenter age: \");\n                        scanf(\"%d\",&amp;stud[i].age);\n                        printf(\"\\nenter city: \");\n                        scanf(\"%s\",&amp;stud[i].city);\n                        break;\n                    }\n\n                }\n\n        }\n\n    }\n}\n\nvoid deletion()\n{\n    int reg, k;\n    int f=0;\n    printf(\"\\nenter the student reg no you want to delete\");\n    scanf(\"%d\",&amp;reg);\n    k=reg%size;\n    if(stud[k].regno==0)\n    {\n        printf(\"\\nIt is empty\");\n    }\n\n    else if(stud[k].regno==reg)\n    {\n        printf(\"The removed student is %d\",stud[k].regno);\n        stud[k].regno=0;\n        stud[k].name[0]='\\0';\n        stud[k].age=0;\n        stud[k].city[0]='\\0';\n        printf(\"\\n\\n\");\n\n    }\n\n    else\n    {   \n        int i;\n        for (i=k+1;i&lt;size;i++)\n        {\n            if(stud[k].regno==reg)\n            {\n                printf(\"The removed student is %d\",stud[k].regno);\n                stud[k].regno=0;\n                stud[k].name[0]='\\0';\n                stud[k].age=0;\n                stud[k].city[0]='\\0';\n                printf(\"\\n\\n\");\n                f=1;\n                break;\n            }\n\n        }\n\n        for(i=0;i&lt;k;i++)\n        {\n            if (stud[i].regno==reg)\n            {\n                printf(\"The removed student is %d\",stud[k].regno);\n                stud[k].regno=0;\n                stud[k].name[0]='\\0';\n                stud[k].age=0;\n                stud[k].city[0]='\\0';\n                printf(\"\\n\\n\");\n                f=1;\n                break;\n            }\n        }\n    }\n\n    if (f==1)\n    {\n        printf(\"\\nIt is not present\");\n    }\n}\n\n\nvoid search()\n{\n    int reg, k;\n    int f=0;\n    printf(\"\\nenter the student reg no you want to search\");\n    scanf(\"%d\",&amp;reg);\n    k=reg%size;\n    if(stud[k].regno==0)\n    {\n        printf(\"\\nIt is empty\");\n    }\n\n    else if(stud[k].regno==reg)\n    {\n        printf(\"The student found is: \\n\");\n        printf(\"\\nreg no: %d\",stud[k].regno);\n        printf(\"\\nname: %s\",stud[k].name);\n        printf(\"\\nage: %d\",stud[k].age);\n        printf(\"\\ncity: %s\",stud[k].city);\n        printf(\"\\n\\n\");\n    }\n\n    else\n    {\n        int i;\n        for (i=k+1;i&lt;size;i++)\n        {\n            if(stud[k].regno==reg)\n            {\n                printf(\"The student found is: \\n\");\n                printf(\"\\nreg no: %d\",stud[k].regno);\n                printf(\"\\nname: %s\",stud[k].name);\n                printf(\"\\nage: %d\",stud[k].age);\n                printf(\"\\ncity: %s\",stud[k].city);\n                printf(\"\\n\\n\");\n                f=1;\n                break;\n            }\n        }\n\n        for(i=0;i&lt;k;i++)\n        {\n            if (stud[i].regno==reg)\n            {\n                printf(\"The student found is: \\n\");\n                printf(\"\\nreg no: %d\",stud[k].regno);\n                printf(\"\\nname: %s\",stud[k].name);\n                printf(\"\\nage: %d\",stud[k].age);\n                printf(\"\\ncity: %s\",stud[k].city);\n                printf(\"\\n\\n\");\n                f=1;\n                break;\n            }\n        }\n\n        if (f==1)\n        {\n            printf(\"\\nIt is not present\");\n        }\n    }\n}\n\nvoid display()\n{\n    int i;\n    for(i=0;i&lt;size;i++)\n    {\n        printf(\"\\nreg no: %d\",stud[i].regno);\n        printf(\"\\nname: %s\",stud[i].name);\n        printf(\"\\nage: %d\",stud[i].age);\n        printf(\"\\ncity: %s\",stud[i].city);\n        printf(\"\\n\\n\");\n    }\n}\n\nvoid main()\n{\n    int i,c;\n    for(i=0;i&lt;size;i++)\n    {\n        stud[i].regno=0;\n        stud[i].name[0]='\\0';\n        stud[i].age=0;\n        stud[i].city[0]='\\0';\n    }\n\n    do {\n        printf (\" Enter 1 for insert \\n\");\n        printf (\" Enter 2 for deletion \\n\");\n        printf (\" Enter 3 for search \\n\");\n        printf (\" Enter 4 for display \\n\");\n        scanf (\"%d\", &amp;c);\n        switch(c)\n        {\n            case 1: insertion();\n                break;\n            case 2: deletion();\n                break;\n            case 3: search();\n                break;\n            case 4: display();\n        }\n    } while(c&gt;0 &amp;&amp; c&lt;=4);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1490168433, "post_id": 42945296, "comment_id": 72986750, "body": "<code>char argv[]</code> --&gt; <code>char *argv[]</code>, <code>printf(argv);</code> --&gt; <code>printf(&quot;%s\\n&quot;, *argv);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "edited": false, "score": 0, "creation_date": 1490169065, "post_id": 42945469, "comment_id": 72987065, "body": "adding ** to argv gives me an error &quot;/usr/include/stdio.h:362:12: /../ &#39;const char * <i>restrict</i>&#39; but arugement is of type &#39;char ***&#39; extern int printf (const char *_restrict_format, ...);&quot; i searched up that i need to use double quotes instead of single quotes but in all my code i dont use any single quotes (<a href=\"https://www.dropbox.com/s/cxvhm5i9kek8wok/bestls.c?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/cxvhm5i9kek8wok/bestls.c?dl=0</a>)"}, {"owner": {"reputation": 694, "user_id": 3794227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZmgn.jpg?s=128&g=1", "display_name": "T-Fowl", "link": "https://stackoverflow.com/users/3794227/t-fowl"}, "reply_to_user": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "edited": false, "score": 2, "creation_date": 1490169169, "post_id": 42945469, "comment_id": 72987126, "body": "Did you change it to <code>**argv[]</code>? If so, it should be either <code>*argv[]</code> or <code>**argv</code>."}, {"owner": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "edited": false, "score": 0, "creation_date": 1490169379, "post_id": 42945469, "comment_id": 72987245, "body": "ok, *argv makes the error go away, however the output becomes gibberish still"}, {"owner": {"reputation": 694, "user_id": 3794227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZmgn.jpg?s=128&g=1", "display_name": "T-Fowl", "link": "https://stackoverflow.com/users/3794227/t-fowl"}, "reply_to_user": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "edited": false, "score": 0, "creation_date": 1490169461, "post_id": 42945469, "comment_id": 72987278, "body": "Probably because neither of those two things are what I suggested. Give me a second and I will update my answer with parts of your code."}], "tags": [], "owner": {"reputation": 694, "user_id": 3794227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZmgn.jpg?s=128&g=1", "display_name": "T-Fowl", "link": "https://stackoverflow.com/users/3794227/t-fowl"}, "is_accepted": true, "score": 0, "last_activity_date": 1490170043, "last_edit_date": 1490170043, "creation_date": 1490168394, "answer_id": 42945469, "question_id": 42945296, "link": "https://stackoverflow.com/questions/42945296/string-outputting-gibberish/42945469#42945469", "title": "String outputting Gibberish", "body": "<p>The following should yield the results you are looking for</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n    // Check if there is at least 2 arguments. First argument is the executable name.\n    if(argc &gt; 1)\n    {\n        // Print out a string, followed by a new-line character.\n        printf(\"%s\\n\", argv[1]);\n    }\n    // Exit successfully\n    return 0;\n}\n</code></pre>\n\n<p>Edit: After looking at your code here and some of the things I recommend to change:</p>\n\n<p>The signature of your main function to <code>int main(int argc, char **argv)</code>. Here <code>argc</code> is the <strong>arg</strong>ument <strong>c</strong>ount, and <code>argv</code> are the <strong>arg</strong>ument <strong>v</strong>alues. <code>argv</code> is a double-pointer. If we consider <code>char*</code> to be a string (sequence of characters in memory terminated by a null-character, or <code>0</code>), then <code>argv</code> is a pointer to <code>argc</code>-many strings.</p>\n\n<p>Secondly, to check the first program argument, consider making sure that there is in-fact an argument there. <code>if(argc &gt; 1)</code> will make sure there is at least 1 argument to the program (the 0-index argument to a program is the executable path).</p>\n\n<p>When you want to actually check the value of the first argument, de-reference <code>argv</code> to get a \"string\" with <code>argv[1] //The first argument</code>. Then you can de-reference this string to get the first character</p>\n\n<pre><code>if ( *(argv[1]) == 'f' )\n{\n    ....\n}\n</code></pre>\n\n<p>If you want to check for a full string, rather than just a single character, consider using a function such as <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow noreferrer\">strcmp</a> defined in <code>&lt;string.h&gt;</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "closed_date": 1490169218, "accepted_answer_id": 42945469, "answer_count": 1, "score": -1, "last_activity_date": 1490170043, "creation_date": 1490167759, "last_edit_date": 1490169247, "question_id": 42945296, "link": "https://stackoverflow.com/questions/42945296/string-outputting-gibberish", "closed_reason": "Duplicate", "title": "String outputting Gibberish", "body": "<p>in my C script my input is printing out gibberish and im not sure why</p>\n\n<p>heres more or less what i have on it</p>\n\n<pre><code>int main (int arg, char argv[])\n{\n    printf(argv);\n}\n</code></pre>\n\n<p>this prints out giberish?</p>\n"}, {"tags": ["c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1490168663, "post_id": 42945285, "comment_id": 72986868, "body": "1. Linked C code shows how to read a file, but not how to create a data structure. That part you need to do yourself. 2. It converts between big-endian and little-endian integers <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">read more</a>."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7618120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cbfc33de7d8a39f3e8ddc3a7062be97?s=128&d=identicon&r=PG&f=1", "display_name": "frdf", "link": "https://stackoverflow.com/users/7618120/frdf"}, "edited": false, "score": 0, "creation_date": 1490170140, "post_id": 42945653, "comment_id": 72987634, "body": "Thank you, Very helpful answer, could you tell me how to save those lost images in the loop to vector or something? and How could we realize what Endian (little or big) the binary file used?"}, {"owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "reply_to_user": {"reputation": 55, "user_id": 7618120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cbfc33de7d8a39f3e8ddc3a7062be97?s=128&d=identicon&r=PG&f=1", "display_name": "frdf", "link": "https://stackoverflow.com/users/7618120/frdf"}, "edited": false, "score": 0, "creation_date": 1490171498, "post_id": 42945653, "comment_id": 72988357, "body": "The specification of the file format probably tell you what endian is used. I guess Big endian considering the code. In the loop, well, just push that to any data structure you defined outside the loop. That really depends on what your software will do with it. Don&#39;t forget to accept/vote the answer if it was useful ;-) thanks."}], "tags": [], "owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "is_accepted": true, "score": 0, "last_activity_date": 1490169115, "creation_date": 1490169115, "answer_id": 42945653, "question_id": 42945285, "link": "https://stackoverflow.com/questions/42945285/how-to-understand-mnist-binary-converter-in-c/42945653#42945653", "title": "How to understand MNIST Binary converter in c++?", "body": "<blockquote>\n  <p>1-What is the algorithm to convert the data-set in c++ with help of ifstream?</p>\n</blockquote>\n\n<p>This function read a file (<code>t10k-images-idx3-ubyte.gz</code>) as follow:</p>\n\n<ul>\n<li>Read a magic number and adjust endianness</li>\n<li>Read number of images and adjust endianness</li>\n<li>Read number rows and adjust endianness</li>\n<li>Read number of columns and adjust endianness</li>\n<li>Read all the given images x rows x columns characters (but loose them).</li>\n</ul>\n\n<p>The function use normal <code>int</code> and always switch endianness, that means it target a very specific architecture and is not portable.</p>\n\n<blockquote>\n  <p>How can we go to the specific offset for example 0004 and read for example 32 bit integer and put it to an integer variable.</p>\n</blockquote>\n\n<p><code>ifstream</code> provides a function to seek to a given position:</p>\n\n<pre><code>file.seekg( posInBytes, std::ios_base::beg);\n</code></pre>\n\n<p>At the given position, you could read the 32-bit integer:</p>\n\n<pre><code>int32_t val;\nfile.read ((char*)&amp;val,sizeof(int32_t));\n</code></pre>\n\n<blockquote>\n  <p>2- What the function <code>reverseInt</code> is doing?</p>\n</blockquote>\n\n<p>This function reverse order of the bytes of an <code>int</code> value:</p>\n\n<p>Considering an integer of 32bit like <code>aaaaaaaabbbbbbbbccccccccdddddddd</code>, it return the integer <code>ddddddddccccccccbbbbbbbbaaaaaaaa</code>. </p>\n\n<p>This is useful for normalizing endianness, however, it is probably not very portable, as <code>int</code> might not be 32bit (but e.g. 16bit or 64bit)</p>\n"}], "owner": {"reputation": 55, "user_id": 7618120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cbfc33de7d8a39f3e8ddc3a7062be97?s=128&d=identicon&r=PG&f=1", "display_name": "frdf", "link": "https://stackoverflow.com/users/7618120/frdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 42945653, "answer_count": 1, "score": 1, "last_activity_date": 1490169115, "creation_date": 1490167734, "question_id": 42945285, "link": "https://stackoverflow.com/questions/42945285/how-to-understand-mnist-binary-converter-in-c", "title": "How to understand MNIST Binary converter in c++?", "body": "<p>I've recently needed to convert <a href=\"http://yann.lecun.com/exdb/mnist/\" rel=\"nofollow noreferrer\">mnist</a> data-set to images and labels, it is binary and the structure is in the previous link, so i did a little research and as I'm fan of c++ ,I've read the <a href=\"http://courses.cs.vt.edu/cs2604/fall01/binio.html\" rel=\"nofollow noreferrer\">I/O binary in c++</a>,after that I've found <a href=\"https://stackoverflow.com/questions/8286668/how-to-read-mnist-data-in-c\">this link</a> in stack. That link works well but no code commenting and no explanation of algorithm so I've get confused and that raise some question in my mind which i need a professional c++ programmer to ask.</p>\n\n<p>1-What is the algorithm to convert the data-set in c++ with help of ifstream?</p>\n\n<p>I've realized to read a file as a binary with <code>file.read</code> and move to the next record, but in C , we define a struct and move it inside the file but i can't see any struct in c++ program for example to read this:</p>\n\n<pre><code>[offset] [type]          [value]          [description]\n0000     32 bit integer  0x00000803(2051) magic number\n0004     32 bit integer  60000            number of images\n0008     32 bit integer  28               number of rows\n0012     32 bit integer  28               number of columns\n0016     unsigned byte   ??               pixel\n</code></pre>\n\n<p>How can we go to the specific offset for example <code>0004</code> and read for example <code>32 bit integer</code> and put it to an integer variable.</p>\n\n<p>2-What the function reverseInt is doing? (It is not obviously doing simple reversing an integer)</p>\n\n<pre><code>int ReverseInt (int i)\n{\n    unsigned char ch1, ch2, ch3, ch4;\n    ch1 = i &amp; 255;\n    ch2 = (i &gt;&gt; 8) &amp; 255;\n    ch3 = (i &gt;&gt; 16) &amp; 255;\n    ch4 = (i &gt;&gt; 24) &amp; 255;\n    return((int) ch1 &lt;&lt; 24) + ((int)ch2 &lt;&lt; 16) + ((int)ch3 &lt;&lt; 8) + ch4;\n}\n</code></pre>\n\n<p>I've did a little debugging with cout and when it revised for example <code>270991360</code> it return <code>10000</code> , which i cannot find any relation, I understand it AND the number multiples with two with 255 but why? </p>\n\n<p>PS : </p>\n\n<p>1-I already have the MNIST converted images but i want to understand the algorithm.</p>\n\n<p>2-I've already unzip the gz files so the file is pure binary.</p>\n"}, {"tags": ["c++", "c"], "answers": [{"tags": [], "owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "is_accepted": false, "score": 1, "last_activity_date": 1490168274, "creation_date": 1490168274, "answer_id": 42945430, "question_id": 42945271, "link": "https://stackoverflow.com/questions/42945271/passing-any-data-type-object-as-parameter-to-determine-its-size/42945430#42945430", "title": "passing any data type / object as parameter to determine it&#39;s size", "body": "<p>I doubt that it's possible especially because of the <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding\" rel=\"nofollow noreferrer\">padding of data</a> that is present in C/C++. <code>sizeof()</code> is there for a reason. </p>\n\n<p>In C++ you can convert your function to a template function. This will enforce passing the type whenever you call it. You can than use <code>sizeof()</code> inside the function to calculate the size of the passed object of that type.</p>\n"}, {"comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1490168884, "post_id": 42945436, "comment_id": 72986981, "body": "Just for my understanding: This solution requires that the caller knows the exact type of the object to be passed, and the solution cannot deal with polymorphism, right?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1490169844, "post_id": 42945436, "comment_id": 72987459, "body": "Yes, you&#39;re right about the limitations - the OP seemed to just be asking about initialising POD types though (presumably you&#39;d never do something this nasty with actual objects, I would hope), so I think it&#39;s a reasonable solution in that context."}, {"owner": {"reputation": 286, "user_id": 6514401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3FFXB.jpg?s=128&g=1", "display_name": "SMFSW", "link": "https://stackoverflow.com/users/6514401/smfsw"}, "edited": false, "score": 1, "creation_date": 1490170596, "post_id": 42945436, "comment_id": 72987887, "body": "it&#39;s reasonable enough, this would just be to pass a data type with fixed size, without polymorphism. Thanks for the tip!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1490172502, "post_id": 42945436, "comment_id": 72988942, "body": "You may so add <code>static_assert(!std::is_class&lt;T&gt;::value || !std::is_polymorphic&lt;T&gt;::value, &quot;!&quot;);</code> to avoid to bypass the limitation."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 3, "last_activity_date": 1490168702, "last_edit_date": 1490168702, "creation_date": 1490168292, "answer_id": 42945436, "question_id": 42945271, "link": "https://stackoverflow.com/questions/42945271/passing-any-data-type-object-as-parameter-to-determine-its-size/42945436#42945436", "title": "passing any data type / object as parameter to determine it&#39;s size", "body": "<p>In C++ you could just use a template function:</p>\n\n<pre><code>template &lt;typename T&gt; void some_init_func(T* obj)\n{\n    const size_t size = sizeof(T);\n\n    // ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1475, "user_id": 2000724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qOARB.png?s=128&g=1", "display_name": "ETech", "link": "https://stackoverflow.com/users/2000724/etech"}, "is_accepted": false, "score": 0, "last_activity_date": 1490169421, "creation_date": 1490169421, "answer_id": 42945754, "question_id": 42945271, "link": "https://stackoverflow.com/questions/42945271/passing-any-data-type-object-as-parameter-to-determine-its-size/42945754#42945754", "title": "passing any data type / object as parameter to determine it&#39;s size", "body": "<p>Basicly, it is impossible to get the object size when it is passing as <code>void *</code> type, cause the object type can be implicitely converted to any object you wish. </p>\n\n<p>However, if to speak about C++ - abstract class is the solution:</p>\n\n<pre><code>class Template {\npublic:\n  virtual void method1()=0;\n  virtual void method2(void *)=0;\n};\n</code></pre>\n\n<p>In this case, you can pass not <code>void *</code> type object but <code>Template *</code> derived object, where <code>method2</code> can take common <code>void *</code> parameter with later implementation and conversion it to needed object type with known size.</p>\n"}], "owner": {"reputation": 286, "user_id": 6514401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3FFXB.jpg?s=128&g=1", "display_name": "SMFSW", "link": "https://stackoverflow.com/users/6514401/smfsw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 42945436, "answer_count": 3, "score": 1, "last_activity_date": 1490169421, "creation_date": 1490167694, "question_id": 42945271, "link": "https://stackoverflow.com/questions/42945271/passing-any-data-type-object-as-parameter-to-determine-its-size", "title": "passing any data type / object as parameter to determine it&#39;s size", "body": "<p>I'm pretty sure I already have the answer to my question in C, but unsure for Cpp.</p>\n\n<pre><code>typedef struct strXXX {\n    uint16_t member1;\n    uint8_t member2;\n    // ...\n} XXX;\n\nXXX tst;\n\nvoid some_init_func(void * obj, uint16_t sz)\n{\n    obj = &amp;tst;\n    size = sz;\n}\n</code></pre>\n\n<p>when calling <em>some_init_func</em>, size has to be given with:</p>\n\n<pre><code>sizeof(tst)\n</code></pre>\n\n<p>Is there a way to pass any object or data type to <em>some_init_func</em>, and determine the size of the object in the function?</p>\n\n<p>I do think it's not possible in C/Cpp as you can pass a pointer, but can't determine the size of the object itself from it's pointer,<br>\nbut I'd like to know if some of you hard coders have found a workaround about this lack in these languages?</p>\n\n<p>...other than this kind of macro (which won't do the trick all the time as size parameter may not be right after object address):</p>\n\n<pre><code>#define PASS_OBJ(obj)    &amp;obj, sizeof(obj)\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c", "windows"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1490166469, "post_id": 42944853, "comment_id": 72985648, "body": "Get a new book. There is no language C/C++. And the size of pointers depends on the implementation, not only the register-width."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1490166676, "post_id": 42944853, "comment_id": 72985758, "body": "That&#39;s not a C structure. A C compiler would give you errors."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1490166714, "post_id": 42944853, "comment_id": 72985779, "body": "You might also want to research <i>padding</i> and how it relates to structures."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490167130, "post_id": 42944853, "comment_id": 72985997, "body": "@Olaf: Who said there was a language called C/C++?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1490172601, "post_id": 42944853, "comment_id": 72989011, "body": "The document how a chunk of binary data is allocated by showing a C struct is complete nonsense. In order to understand the binary data, you need proper documentation. When you have that, you can then create a C representation of that data accordingly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1490198510, "post_id": 42944853, "comment_id": 73008285, "body": "@BenjaminLindley 1) read the question. 2) This is a common phrase to make clear C and C++ are <b>different</b> languages. 3) Did I say there is one?"}], "answers": [{"comments": [{"owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1490172805, "post_id": 42945224, "comment_id": 72989129, "body": "@Lundin: Thanks, I polished the answer. What I meant is it depends how you count: those special chip architecture have not a single address space, that means the linear access is some kind of hack/merge. Example is 12-bits for data-memory, 15-bits for program-memory, etc.. I do not remember the C pointer (void*) sizeof, which could well be of 16-bit. Please, feel free to edit my answer if you think the values there are not precise enough."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1490174126, "post_id": 42945224, "comment_id": 72989931, "body": "It makes no sense to have pointers in a header on disk. At best they can be sizes or offsets. Thus, they don&#39;t have to be the size of a memory address of the machine."}, {"owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1490179117, "post_id": 42945224, "comment_id": 72993515, "body": "@PaulOgilvie: Sorry, but I do not understand your comment. what disk, what offset?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1490179554, "post_id": 42945224, "comment_id": 72993840, "body": "The DOS header is a part of the executable file (on disk). The information in it is to load the executable code before running it. That information (on disk) cannot contain pointers as we use them in c (e.g. a <code>void *sp</code>). So at best these &quot;pointers&quot; can be offsets or sizes. For example the <code>void *sp</code> in the original question is actually <code>WORD e_sp</code> and contains the initial sp value relative to the ss base. So it is not a pointer and thus need not be the size of a pointer variable."}, {"owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1490180084, "post_id": 42945224, "comment_id": 72994238, "body": "@PaulOgilvie: Got it!. What happens is usually you just read and populate from a file the first few values. The pointers are filled afterward by reconstructing data-structures."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1490180566, "post_id": 42945224, "comment_id": 72994570, "body": "There is no use in reconstructing the header as a struct with proper pointer values. Just read the header into the struct and use that to load the code, set up segments and memory, load the registers and then transfer control (<code>jmp</code>) to the beginning of the code. That&#39;s how the loader works."}], "tags": [], "owner": {"reputation": 11267, "user_id": 903651, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e3dda4f66a2b7cc9fdced12a0fbede58?s=128&d=identicon&r=PG", "display_name": "Adrian Maire", "link": "https://stackoverflow.com/users/903651/adrian-maire"}, "is_accepted": false, "score": 0, "last_activity_date": 1490172873, "last_edit_date": 1490172873, "creation_date": 1490167574, "answer_id": 42945224, "question_id": 42944853, "link": "https://stackoverflow.com/questions/42944853/dos-header-presented-as-a-c-data-structure/42945224#42945224", "title": "DOS header presented as a C data structure", "body": "<p>A pointer is an address of memory, and it depends (as you said) of the architecture. Each architecture is able to address a specific amount of memory, and for it, the pointers are defined of a given size.</p>\n\n<p>Examples: </p>\n\n<ul>\n<li>My desktop computers use 64bits for both.</li>\n<li>My Pic16F1709 is 8bit architecture, memory address is of different length depending on the type) 12-bits for data-memory, 15-bits for program-memory, etc.</li>\n</ul>\n\n<blockquote>\n  <p>how to understant void* size in dos header?is it always 2byte in 16bit,32bit and 64bit platform?</p>\n</blockquote>\n\n<p>You cannot say. Most of the time yes, but nothing force that.</p>\n\n<p>In your code, the size of the final structure will vary.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 1, "last_activity_date": 1490173841, "last_edit_date": 1490173841, "creation_date": 1490173134, "answer_id": 42946830, "question_id": 42944853, "link": "https://stackoverflow.com/questions/42944853/dos-header-presented-as-a-c-data-structure/42946830#42946830", "title": "DOS header presented as a C data structure", "body": "<p>The C struct provided is only an example (and it should be updated at the wiki). In <code>winnt.h</code> there is a full definition. You'll see that there are no pointers in the struct but that they are \"initial sizes\". The definition is:</p>\n\n<pre><code>#pragma pack(push,2)\ntypedef struct _IMAGE_DOS_HEADER {      // DOS .EXE header\n    WORD   e_magic;                     // Magic number\n    WORD   e_cblp;                      // Bytes on last page of file\n    WORD   e_cp;                        // Pages in file\n    WORD   e_crlc;                      // Relocations\n    WORD   e_cparhdr;                   // Size of header in paragraphs\n    WORD   e_minalloc;                  // Minimum extra paragraphs needed\n    WORD   e_maxalloc;                  // Maximum extra paragraphs needed\n    WORD   e_ss;                        // Initial (relative) SS value\n    WORD   e_sp;                        // Initial SP value\n    WORD   e_csum;                      // Checksum\n    WORD   e_ip;                        // Initial IP value\n    WORD   e_cs;                        // Initial (relative) CS value\n    WORD   e_lfarlc;                    // File address of relocation table\n    WORD   e_ovno;                      // Overlay number\n    WORD   e_res[4];                    // Reserved words\n    WORD   e_oemid;                     // OEM identifier (for e_oeminfo)\n    WORD   e_oeminfo;                   // OEM information; e_oemid specific\n    WORD   e_res2[10];                  // Reserved words\n    LONG   e_lfanew;                    // File address of new exe header\n  } IMAGE_DOS_HEADER, *PIMAGE_DOS_HEADER;\n#pragma pack(pop)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7749376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b98ce599b740926e017bf6f49994df4c?s=128&d=identicon&r=PG&f=1", "display_name": "Djerry-upup", "link": "https://stackoverflow.com/users/7749376/djerry-upup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 42946830, "answer_count": 2, "score": -1, "last_activity_date": 1490173841, "creation_date": 1490166313, "last_edit_date": 1490166829, "question_id": 42944853, "link": "https://stackoverflow.com/questions/42944853/dos-header-presented-as-a-c-data-structure", "title": "DOS header presented as a C data structure", "body": "<p>when i want to know pe file's dos header.i get this in wikibook(X86_Disassembly/Windows_Executable_Files):  </p>\n\n<pre><code> Here is the DOS header presented as a C data structure:  \n    struct DOS_Header \n     {\n    // short is 2 bytes, long is 4 bytes\n         char signature[2] = \"MZ\";\n         short lastsize;\n         short nblocks;\n         short nreloc;\n         short hdrsize;\n         short minalloc;\n         short maxalloc;\n         void *ss;\n         void *sp;\n         short checksum;\n         void *ip;\n         void *cs;\n         short relocpos;\n         short noverlay;\n         short reserved1[4];\n         short oem_id;\n         short oem_info;\n         short reserved2[10];\n         long  e_lfanew;\n     }\n</code></pre>\n\n<p>there're some variable define in void*;i search and get this conclusion:<b>\"Size of VOID and CHAR pointer on 16 bit Platform is : 2 bytes , on 32 bit : 4 bytes and on 64 bit : 8 bytes. Size of void pointer and char pointer both are of same size in C/C++, but, platform dependent\"</b><br>\nalso i build a win32 program test.exe use C++(<a href=\"https://i.stack.imgur.com/VAA2v.png\" rel=\"nofollow noreferrer\">picture</a>) and void* is 4byte;<br>\nand figure out dos header is:char+25*short+long+4*void*=56+4*void*=72Byte;</p>\n\n<p>but open it with winhex(<a href=\"https://i.stack.imgur.com/t04lA.png\" rel=\"nofollow noreferrer\">picture</a>),DOS header=64Byte.  </p>\n\n<p>in this github project(Sable/McCli/blob/master/CliKit/IO/PE/IMAGE_DOS_HEADER.cs) ,void* was replaced by ushort;</p>\n\n<p>so how to understant void* size in dos header?is it always 2byte in 16bit,32bit and 64bit platform?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1490164562, "post_id": 42944244, "comment_id": 72984765, "body": "try <code>display(a, 3, 4);</code> --&gt; <code>display(&amp;a[0][0], 3, 4);</code>. Also <code>display</code> must return int value. or Change <code>int</code> to <code>void</code>. and Use <code>row</code> and <code>col</code> instead of <code>2</code> and <code>3</code>."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1490165198, "post_id": 42944244, "comment_id": 72985038, "body": "If you change declaration from <code>int display(int *q, int row, int col)</code> to <code>int display(int row, int col, int q[row][col])</code> then you can call it directly as <code>display(3,4,q)</code>. Moreover, you use <code>q</code> as an array inside the function <code>display</code>. So, you can write <code>printf(&quot;%d&quot;, q[i][j]);</code> for example."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1490165382, "post_id": 42944244, "comment_id": 72985119, "body": "@Marian I think that MSVC2015 did not support VLA."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1490165567, "post_id": 42944244, "comment_id": 72985206, "body": "@BLUEPIXY: MSVC never has been standard compliant. So one should use a compliant compiler."}], "answers": [{"comments": [{"owner": {"reputation": 4691, "user_id": 5343790, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jD1PP.jpg?s=128&g=1", "display_name": "Shridhar R Kulkarni", "link": "https://stackoverflow.com/users/5343790/shridhar-r-kulkarni"}, "edited": false, "score": 0, "creation_date": 1490164619, "post_id": 42944309, "comment_id": 72984791, "body": "Whatever you mentioned is already conveyed by error. Shouldn&#39;t your answer be a comment?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 4691, "user_id": 5343790, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jD1PP.jpg?s=128&g=1", "display_name": "Shridhar R Kulkarni", "link": "https://stackoverflow.com/users/5343790/shridhar-r-kulkarni"}, "edited": false, "score": 0, "creation_date": 1490164677, "post_id": 42944309, "comment_id": 72984814, "body": "@ShridharR.Kulkarni No, it&#39;s an answer. YMMV. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1490164636, "last_edit_date": 1495535397, "creation_date": 1490164388, "answer_id": 42944309, "question_id": 42944244, "link": "https://stackoverflow.com/questions/42944244/argument-of-type-int4-is-incompatible-with-parameter-type-int-i-am-usi/42944309#42944309", "title": "argument of type int(*)[4] is incompatible with parameter type &quot;int *&quot;. I am using visual studio", "body": "<p>In the context of this line</p>\n\n<pre><code>  display(a, 3, 4);\n</code></pre>\n\n<p><code>a</code> is of type <code>int [3][4]</code> (array type), which decays to <code>int (*)[4]</code> (a pointer to the first element of the array) and an <code>int *</code> is not a match for it.</p>\n\n<p>You need to adjust the function signature/call accordingly, i.e, either</p>\n\n<ul>\n<li>Change the parameter to <code>int (*)[4]</code> and use it accordingly.</li>\n<li>Change the call to pass the address of the first element of the first 1-D array, as mentioned the above comment by <a href=\"https://stackoverflow.com/users/971127/bluepixy\">BLUEPIXY</a>.</li>\n</ul>\n\n<p>That said, seeing the missing <code>return</code> statement and the usage of the function call, you can safely change the return type of the function to be <code>void</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 4511648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CM1MZsdZ9dU/AAAAAAAAAAI/AAAAAAAACFI/ZgS6h-YjtAU/photo.jpg?sz=128", "display_name": "Dorin", "link": "https://stackoverflow.com/users/4511648/dorin"}, "is_accepted": false, "score": -1, "last_activity_date": 1490165989, "creation_date": 1490165989, "answer_id": 42944751, "question_id": 42944244, "link": "https://stackoverflow.com/questions/42944244/argument-of-type-int4-is-incompatible-with-parameter-type-int-i-am-usi/42944751#42944751", "title": "argument of type int(*)[4] is incompatible with parameter type &quot;int *&quot;. I am using visual studio", "body": "<p>Cast <strong>a</strong> to <strong>(int*) a</strong>, like this:</p>\n\n<pre><code>display( (int*) a, 3, 4 );\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7749527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2b53a11da1ea364c0092ca79e9c2e?s=128&d=identicon&r=PG&f=1", "display_name": "muddy_ostrich", "link": "https://stackoverflow.com/users/7749527/muddy-ostrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 505, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490165989, "creation_date": 1490164122, "last_edit_date": 1490164450, "question_id": 42944244, "link": "https://stackoverflow.com/questions/42944244/argument-of-type-int4-is-incompatible-with-parameter-type-int-i-am-usi", "title": "argument of type int(*)[4] is incompatible with parameter type &quot;int *&quot;. I am using visual studio", "body": "<p>I am having an error in a c program of passing 2-d array to a function. error is as mentioned in the title. I am using visual studio 2015.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n\n\nint main()\n{\n int display(int*, int, int);\n int a[3][4] = {\n    1, 2, 3, 4,\n    5, 6, 7, 8,\n    9, 0, 1, 6\n    };\n display(a, 3, 4);\n}\nint display(int *q, int row, int col)\n {\n  int i,j;\n  for (i = 0; i &lt;= 2; i++)\n  {\n    for (j = 0; j &lt;= 3; j++)\n        printf(\"%d\", *(q + i*col + j));\n    printf(\"\\n\");\n  }\n printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "void"], "comments": [{"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1490162049, "post_id": 42943730, "comment_id": 72983708, "body": "Because even though it returns nothing you can still use <code>return</code> to interrupt the function."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1490163519, "post_id": 42943730, "comment_id": 72984271, "body": "@Havenard: Your comment does not make sense."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490163604, "post_id": 42943730, "comment_id": 72984309, "body": "Which version of gcc do you use? Versions before 5 default to non-standard C90 which is outdated since 18 years. Use a more recent version or speficy standard C, i.e. C11 - at least C99."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1490171058, "post_id": 42943730, "comment_id": 72988140, "body": "The code is accepted as an extension (it is valid in C++), and no warning is printed in non-pedantic mode because it doesn&#39;t seem likely to cause any issue: you are using consistent return types for foo and bar."}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1490162853, "last_edit_date": 1592644375, "creation_date": 1490162469, "answer_id": 42943853, "question_id": 42943730, "link": "https://stackoverflow.com/questions/42943730/gcc-return-statement-from-a-void-function-in-c/42943853#42943853", "title": "GCC : Return statement from a void function in C", "body": "<p>This construct has been disallowed in C99:</p>\n<blockquote>\n<p><code>return</code> without expression not permitted in function that returns a value (and vice versa)</p>\n</blockquote>\n<p>Compiling with proper version of standard compliance turned on <a href=\"http://ideone.com/JlkNRw\" rel=\"nofollow noreferrer\">produces</a> an appropriate error:</p>\n<blockquote>\n<p>prog.c:11:16: error: ISO C forbids \u2018return\u2019 with expression, in function returning void [-Werror=pedantic]</p>\n<pre><code>return foo(); // Note this return statement.\n       ^~~~~\n</code></pre>\n</blockquote>\n<p>As for the reason why this worked with older versions of C, the original K&amp;R lacked <code>void</code> keyword, so programmers who wanted to make it explicit that the function does not return anything were using preprocessor with <code>#define VOID int</code> or something similar. Of course, this &quot;poor man's <code>void</code>&quot; allowed returning an <code>int</code> value, so the code from your post would perfectly compile. My guess is that the authors of earlier versions of the standard were reluctant to plug this hole, because it would be a breaking change.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 1, "accepted_answer_id": 42943853, "answer_count": 1, "score": 3, "last_activity_date": 1490181030, "creation_date": 1490161890, "last_edit_date": 1490181030, "question_id": 42943730, "link": "https://stackoverflow.com/questions/42943730/gcc-return-statement-from-a-void-function-in-c", "title": "GCC : Return statement from a void function in C", "body": "<p><code>void bar()</code> means that <code>bar</code> returns nothing. I'm curious to know, If <code>void</code> returns nothing, then <strong>why doesn't the compiler(GCC) gives any warnings or errors, when compiling following program?</strong>   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo (void)\n{\n        printf(\"In foo() function\\n\");\n}\n\nvoid bar (void)\n{\n        printf(\"In bar() function\\n\");\n        return foo(); // Note this return statement.\n}\n\nint main (void)\n{\n        bar();\n        return 0;\n}\n</code></pre>\n\n<p>I have compiled using <code>gcc -Wall myprog.c</code>, and it's working fine.</p>\n"}, {"tags": ["c", "function", "if-statement", "struct"], "comments": [{"owner": {"reputation": 2268, "user_id": 6680585, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/eMjQ1.jpg?s=128&g=1", "display_name": "Tom Taylor", "link": "https://stackoverflow.com/users/6680585/tom-taylor"}, "edited": false, "score": 1, "creation_date": 1490161274, "post_id": 42943579, "comment_id": 72983424, "body": "you must specify book[some_index] value to check.."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490161307, "post_id": 42943579, "comment_id": 72983434, "body": "You can only use the empty <code>[]</code> in a variable definition (typically in a function parameter list; there are some other related contexts where it can appear).  In a reference such as <code>if (book[booknumber].isbn &lt; 0)</code>, you must provide a subscript (I used <code>booknumber</code> here; I probably would use a shorter name in a program)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490161539, "post_id": 42943579, "comment_id": 72983512, "body": "Also note that you should not create names that start with an underscore.  If you know enough that you don&#39;t need to ask this question, you might be able to quote the exact rule, but while you need to ask such questions, the rule is simple: do not start names you create with an underscore \u2014 despite any precedents you see.  Most such names are reserved for the implementation.  You may not run into problems immediately, but it may come back and hurt you later."}, {"owner": {"reputation": 15, "user_id": 7695273, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155878324137785/picture?type=large", "display_name": "bran", "link": "https://stackoverflow.com/users/7695273/bran"}, "edited": false, "score": 0, "creation_date": 1490161703, "post_id": 42943579, "comment_id": 72983567, "body": "thats how the teacher wants it, but yeah i understand now, thx for helping"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1490195777, "post_id": 42943579, "comment_id": 73006144, "body": "what do you expect this line: <code>(book[] &lt; 0) </code> to evaluate to?   Remember that  <code>book[]</code> is a pointer.   Pointers are unsigned (in most instances) so the expression is saying:  &#39;is this pointer less than 0&#39;  Probably not what you want to ask"}], "answers": [{"tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 0, "last_activity_date": 1490163603, "last_edit_date": 1490163603, "creation_date": 1490161396, "answer_id": 42943628, "question_id": 42943579, "link": "https://stackoverflow.com/questions/42943579/book-in-if-statement-error/42943628#42943628", "title": "book[] in if statement error", "body": "<p>The <code>book</code> variable is an <em>array</em> of <code>Struct Book</code> items. If you want to access <em>one</em> of those items, you need to provide the index of it, such as with:</p>\n\n<pre><code>if (book[0].id == 7) ...\n</code></pre>\n\n<p>In your case (checking the inventory), you probably wanted to use the passed-in size (assuming that's the number of items in use rather than the size of the array - that's probably what it should be in this case since there's no need for an inventory lister to know the size of the actual array itself, just the number of items you want to show):</p>\n\n<pre><code>if (size &lt;= 0) // inventory is empty.\n</code></pre>\n\n<p>Putting together <em>both</em> of those items, you'll probably end up with something along the lines of:</p>\n\n<pre><code>void displayInventory (const struct Book book[], const int size) {\n    if (size &lt;= 0) {\n        puts (\"The inventory is empty!\");\n        puts (\"======================================================\");\n        return;\n    }\n    puts (\"Inventory\");\n    puts (\"=======================================================\");\n    puts (\"ISBN       Title                Year  Price    Quantity\");\n    puts (\"----------+--------------------+-----+--------+--------\");\n    for (int idx = 0; idx &lt; size; idx++) {\n        printf (\"%-10.0d %-20s %-5d$ %-8.2f %-8d\\n\",\n            book[idx]._isbn, book[idx]._title, book[idx]._year,\n            book[idx]._price, book[idx]._qty);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7695273, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155878324137785/picture?type=large", "display_name": "bran", "link": "https://stackoverflow.com/users/7695273/bran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 42943628, "answer_count": 1, "score": 1, "last_activity_date": 1490163603, "creation_date": 1490161156, "last_edit_date": 1490161265, "question_id": 42943579, "link": "https://stackoverflow.com/questions/42943579/book-in-if-statement-error", "title": "book[] in if statement error", "body": "<pre><code>void displayInventory(const struct Book book[], const int size) {\n</code></pre>\n\n<p>Idk y book[] getting an error in visual studio plz help.</p>\n\n<pre><code>if (book[] &lt; 0) {\n    printf(\"The inventory is empty!\");\n    printf(\"===================================================\");\n}\nelse {\n    printf(\"Inventory\\n\");\n    printf(\"===================================================\\n\");\n    printf(\"ISBN      Title               Year Price  Quantity\\n\");\n    printf(\"---------+-------------------+----+-------+--------\");\n    printf(\"%-10.0d%-20s%-5d$%-8.2f%-8d\", book[]._isbn, book[]._title, book[]._year, book[]._price, book[]._qty);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "bash", "scripting"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1490157976, "post_id": 42942737, "comment_id": 72982251, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/q/42942357/499581\">stackoverflow.com/q/42942357/499581</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490157980, "post_id": 42942737, "comment_id": 72982252, "body": "Look at <code>man 3 printf</code> and particularly the <b>Format of the format string</b> section describing the <i>optional minimum field width</i>. That allows you to tabulate columns precisely."}, {"owner": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "edited": false, "score": 0, "creation_date": 1490158082, "post_id": 42942737, "comment_id": 72982282, "body": "Thanks!, columns fixed so it looks neat now. Just the -l problem now"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490159146, "post_id": 42942737, "comment_id": 72982653, "body": "Note that C programs are <i>not</i> scripts (nor are they &#39;codes&#39;, though that isn&#39;t a problem here); the <code>ls</code> command is not a script, either.  You should avoid misusing the names."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1490159342, "post_id": 42942737, "comment_id": 72982727, "body": "Also note that on Linux, it is unconditionally <b>wrong</b> to try using <code>void main()</code> \u2014 <a href=\"http://stackoverflow.com/questions/204476/\">the correct return type for <code>main()</code> in C and C++ is <code>int</code></a>."}, {"owner": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "edited": false, "score": 0, "creation_date": 1490159688, "post_id": 42942737, "comment_id": 72982846, "body": "ahh ok, changed it to int"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1497298204, "post_id": 42942737, "comment_id": 76009027, "body": "Don&#39;t use 1-letter variable names."}], "answers": [{"tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 0, "last_activity_date": 1490307943, "creation_date": 1490307943, "answer_id": 42988111, "question_id": 42942737, "link": "https://stackoverflow.com/questions/42942737/linux-c-program-emulating-ls-command/42988111#42988111", "title": "Linux C program emulating ls command", "body": "<p>You will never enter the <code>else</code> clause.  If <code>argv[1]</code> is NULL, then <code>argv[2]</code> will be NULL.  You just need to parse the arguments.</p>\n"}], "owner": {"reputation": 19, "user_id": 7748644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc5c309fdb21551d5c1e197d16a91d8?s=128&d=identicon&r=PG&f=1", "display_name": "nidh0gg", "link": "https://stackoverflow.com/users/7748644/nidh0gg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490307943, "creation_date": 1490156801, "last_edit_date": 1490176902, "question_id": 42942737, "link": "https://stackoverflow.com/questions/42942737/linux-c-program-emulating-ls-command", "title": "Linux C program emulating ls command", "body": "<h2>Resolved</h2>\n\n<p>I'm trying to create a program that functions similarly to the default <code>ls</code> command using C. I'm having some troubles with one of the attributes (<code>-l</code>) and the formatting currently. For the <code>-l</code>, it is not running the line that is supposed to make it a simple list with the inodes and names (argv[2]) and instead functions the same as <code>-f</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/dir.h&gt;\n#include &lt;sys/stat.h&gt;\n\nstruct direct **dirs; \n\nint main (int argc, char* argv[])\n{\n  struct stat statb;\n  int nent, i;\n  int x = 0;\n  int y;\n\n  char *F = argv[1];\n  char *l = argv[2];\n  char *others = argv[3];\n\n  nent = scandir (\".\", &amp;dirs, NULL, NULL);\n\n  for (i = 0; i &lt; nent; i ++) {       \n    if(argv[1]) {   \n      stat(dirs[i]-&gt;d_name, &amp;statb);  \n\n      if (y == 0) { \n        printf(\"\\n%-16s\",dirs[i]-&gt;d_name);   \n        switch (statb.st_mode &amp; S_IFMT) { \n        case S_IFDIR :                          \n          printf(\"/\\t    \");                          \n          break;     \n\n        case S_IFREG :                          \n          printf(\"*\\t    \");                          \n          break;     \n\n        }           \n      }                 \n      else {  \n        printf (\"%-16s\",dirs[i]-&gt;d_name);                   \n        switch (statb.st_mode &amp; S_IFMT) { \n        case S_IFDIR :                  \n          printf(\"/\\t    \");          \n          break;             \n\n        case S_IFREG :                      \n          printf(\"*\\t    \");          \n          break;      \n\n        }           \n      }      \n\n      x++;           \n      y = x%5;         \n    }         \n    else if (argv[2]) {\n      printf(\"I-node = %d   name = %s\\n\",    dirs[i]-&gt;d_ino, dirs[i]-&gt;d_name);\n}        \nelse { \n\n  if (y == 0) {                       \n    printf(\"\\n%-16s\\t    \",dirs[i]-&gt;d_name); \n  }         \n  else {       \n    printf(\"%-16s\\t    \",dirs[i]-&gt;d_name); \n      }    \n\n      x++;    \n      y = x%5;      \n\n    }\n  } \n\n  printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "string", "return-value"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1490156867, "post_id": 42942697, "comment_id": 72981952, "body": "<code>char str[128] = { 0 };</code> It can not be used outside the scope."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1490157395, "post_id": 42942697, "comment_id": 72982088, "body": "In other words <code>mybuff</code> points to memory that was destroyed when <code>loToString</code> returned. (the function stack frame is destroyed/released back to the memory pool when the function returns). Allocate for <code>mybuff</code> before you pass to <code>loToString</code> or dynamically within <code>loToString</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490165893, "post_id": 42942697, "comment_id": 72985370, "body": "Note use a boolean variable for boolean flags."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1490165946, "post_id": 42942697, "comment_id": 72985390, "body": "&quot;// large enough for an int even on 64-bit&quot; - There is no maximum length of integer types."}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 1, "last_activity_date": 1490164454, "last_edit_date": 1490164454, "creation_date": 1490159365, "answer_id": 42943207, "question_id": 42942697, "link": "https://stackoverflow.com/questions/42942697/convert-long-long-int-to-string-without-sprintf-using-functions/42943207#42943207", "title": "Convert long long int to string without sprintf using functions", "body": "<p>I modified few points</p>\n\n<ul>\n<li><code>str</code> should be allocated dynamically or should be in global scope. otherwise its  scope will end after execution of <code>loToString()</code> and you are returning an address from <code>str</code> array.</li>\n<li><code>char *myBuff</code> is moved into local scope. Both is fine. But no need to declare it globally.</li>\n</ul>\n\n<p>Check the modified code. </p>\n\n<pre><code>    char str[128]; // large enough for an int even on 64-bit, Moved to global scope \n\n    char * loToString(unsigned long long int anInteger)\n    {  \n        int flag = 0;\n        int i = 126;\n        char *myBuff = NULL;\n\n        memset(str,0,sizeof(str));\n        while (anInteger != 0) { \n            str[i--] = (anInteger % 10) + '0';\n            anInteger /= 10;\n        }\n\n        if (flag) str[i--] = '-';\n\n        myBuff = str+i+1;\n        return myBuff; \n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3736363, "user_type": "registered", "profile_image": "https://graph.facebook.com/1085377695/picture?type=large", "display_name": "user3736363", "link": "https://stackoverflow.com/users/3736363/user3736363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "closed_date": 1490159404, "answer_count": 1, "score": 0, "last_activity_date": 1490164454, "creation_date": 1490156496, "last_edit_date": 1490160511, "question_id": 42942697, "link": "https://stackoverflow.com/questions/42942697/convert-long-long-int-to-string-without-sprintf-using-functions", "closed_reason": "Duplicate", "title": "Convert long long int to string without sprintf using functions", "body": "<p>I am trying to convert an unsigned long long int to a string without using any library functions like <code>sprintf()</code> or <code>ltoi()</code>.\nThe problem is that when I return the value it doesn't return correctly, if I do not <code>printf()</code> in my function before returning it to the calling function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar *myBuff;\n\nchar * loToString(unsigned long long int anInteger)\n{  \n    int flag = 0;\n    char str[128] = { 0 }; // large enough for an int even on 64-bit\n    int i = 126;\n\n    while (anInteger != 0) { \n        str[i--] = (anInteger % 10) + '0';\n        anInteger /= 10;\n    }\n\n    if (flag) str[i--] = '-';\n\n    myBuff = str+i+1;\n    return myBuff; \n}\n\nint main() {\n    // your code goes here\n\n    unsigned long long int d;\n    d=  17242913654266112;\n    char * buff = loToString(d);\n\n    printf(\"chu %s\\n\",buff);\n    printf(\"chu %s\\n\",buff);\n\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "types", "malloc"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1490153807, "post_id": 42942268, "comment_id": 72981044, "body": "malloc returns <code>void *</code> which can be implicitly converted to any other pointer type.  Your statement means that the space allocated by <code>malloc</code> can be used as storage for a <code>char *</code> value."}, {"owner": {"reputation": 181, "user_id": 6232385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96e895e4fb9aa0ae843a7d880f73cc19?s=128&d=identicon&r=PG&f=1", "display_name": "FShiwani", "link": "https://stackoverflow.com/users/6232385/fshiwani"}, "edited": false, "score": 0, "creation_date": 1490897583, "post_id": 42942268, "comment_id": 73329819, "body": "I think I&#39;ve understood it now. Apologies for the delay in response."}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1490156821, "last_edit_date": 1490156821, "creation_date": 1490154967, "answer_id": 42942465, "question_id": 42942268, "link": "https://stackoverflow.com/questions/42942268/double-asterisks-and-malloc-in-c/42942465#42942465", "title": "Double-asterisks and `malloc` in C", "body": "<p><code>malloc()</code> returns <code>void *</code> which can be implicitly converted to any other pointer type. In your case, space allocated by <code>malloc()</code> can be used as storage for a <code>char *</code> value. Check below example</p>\n\n<pre><code>char str[10]= {'a'};\n//char c = 'c';\nchar **output_str = malloc(sizeof(char*));\n\n*output_str = str; /* Stored address of a char array of size 10*/\n\n//*output_str = &amp;c; // Stored address of a char, its also correct\n\nprintf(\"%c\\n\",**output_str); /* Will print the char element, if you are using string address it will print first element,\nto print other elements in str use (*output_str)[index] */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1385, "user_id": 6693299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CIeRF.jpg?s=128&g=1", "display_name": "ScottK", "link": "https://stackoverflow.com/users/6693299/scottk"}, "is_accepted": false, "score": 0, "last_activity_date": 1490155228, "creation_date": 1490155228, "answer_id": 42942511, "question_id": 42942268, "link": "https://stackoverflow.com/questions/42942268/double-asterisks-and-malloc-in-c/42942511#42942511", "title": "Double-asterisks and `malloc` in C", "body": "<p>Think of output_char as a pointer to an array of strings, and each string is a pointer to an array of characters. When you do malloc(sizeof(char*)), you are only providing a array of char pointers of length 1, so *output_char contains a single uninitialized pointer (NULL). </p>\n\n<p>What you should be doing is allocating enough pointers so you can point to a bunch of strings. Let's say you want to store N strings, all referenced by output_char. Initialize it as: </p>\n\n<pre><code>// Allocate an array of N string pointers\nchar **output_str = malloc(sizeof(char*)*N); \n</code></pre>\n\n<p>Then you need to allocate storage for each of those strings:</p>\n\n<pre><code>// Allocate storage for each of the N strings, assume 80 chars max each\n// including the null character required at the end of the string\n#define MAX_STRING_SIZE 80\nint i;\nfor(i=0; i&lt;N; i++)\n   // Allocate storage for each of the strings, but they\n   // still need to have some chars written to this storage\n   // for these strings to be anything but null strings \"\"\n   output_str[i] = malloc(MAX_STRING_SIZE*sizeof(char));\n</code></pre>\n\n<p>There is a great example of this at the start of every C program:</p>\n\n<pre><code>int main(int argc, char** argv) { /* your code */ }\n</code></pre>\n\n<p>Every C program starts with this main definition. It accepts two parameters, one is the number of strings being passed into your program via the command line (including the name of the program itself), and argv is a reference to an array of string parameters.</p>\n\n<p>For example, invoking myprog with the following command line parameters:</p>\n\n<pre><code>   myprog -h \"Fred\" Jones\n</code></pre>\n\n<p>Results in main() being passed <strong>argc</strong> and <strong>argv</strong> such that:</p>\n\n<pre><code>   argc = 4\n   argv[0] = \"myprog\"\n   argv[1] = \"-h\"\n   argv[2] = \"Fred\"\n   argv[3] = \"Jones\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 6232385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96e895e4fb9aa0ae843a7d880f73cc19?s=128&d=identicon&r=PG&f=1", "display_name": "FShiwani", "link": "https://stackoverflow.com/users/6232385/fshiwani"}, "edited": false, "score": 0, "creation_date": 1490897562, "post_id": 42942588, "comment_id": 73329810, "body": "Thank you for the very detailed response!"}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "reply_to_user": {"reputation": 181, "user_id": 6232385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96e895e4fb9aa0ae843a7d880f73cc19?s=128&d=identicon&r=PG&f=1", "display_name": "FShiwani", "link": "https://stackoverflow.com/users/6232385/fshiwani"}, "edited": false, "score": 0, "creation_date": 1490897876, "post_id": 42942588, "comment_id": 73329982, "body": "No prob! Glad to help :)"}], "tags": [], "owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "is_accepted": true, "score": 4, "last_activity_date": 1490192416, "last_edit_date": 1490192416, "creation_date": 1490155700, "answer_id": 42942588, "question_id": 42942268, "link": "https://stackoverflow.com/questions/42942268/double-asterisks-and-malloc-in-c/42942588#42942588", "title": "Double-asterisks and `malloc` in C", "body": "<p>Your code block is correct. With this declaration:</p>\n\n<blockquote>\n  <p><code>char **output_str = malloc(sizeof(char*));</code></p>\n</blockquote>\n\n<p>output_str is a char pointer to a char pointer, or it could be seen as a 2d array of chars, or a matrix of char.</p>\n\n<h2>Graphically represented:</h2>\n\n<pre><code>Memory Address | Stored Memory Address Value\n----------------------------------------------\n0              |     .....\n1              |     .....\n2              |     .....\n3              |     .....\n4              |     .....\n5              |     .....\n6              |     .....\n.              |     .....\n.              |     .....\n.              |     .....\nn-1            |     .....\n</code></pre>\n\n<p>Imagine the <strong>memory</strong> as being a very big array in which you can access positions by its memory address (in this case we've simplified the addresses to natural numbers. In reality they're hexadecimal values). \"n\" is the total amount (or size) of the memory. Since Memory counts and starts in 0, size is equivalent to n-1.</p>\n\n<h2>1. When you invoke:</h2>\n\n<blockquote>\n  <p><code>char **output_str = malloc(sizeof(char*));</code></p>\n</blockquote>\n\n<p>The Operating System and the C compiler does it for us, but we can think that our memory has been changed. E.g. Memory address 3 now has a <strong>char pointer to a char pointer</strong> called <code>output_str</code>. .</p>\n\n<pre><code>    Memory Address | Name - Stored Memory Address Value (it points to ...)\n    -----------------------------------------------------\n    0              |     .....\n    1              |     .....\n    2              |     .....\n    3              |     output_str = undefined\n    4              |     .....\n    5              |     .....\n    6              |     .....\n    .              |     .....\n    .              |     .....\n    .              |     .....\n    n-1            |     .....\n</code></pre>\n\n<h2>2. Now if we say:</h2>\n\n<blockquote>\n  <p><code>*output_str = malloc(sizeof(char));</code></p>\n</blockquote>\n\n<p>The memory has been changed again. E.g. Memory address 0 now has a <strong>char pointer</strong> called <code>*output_str</code>.</p>\n\n<pre><code>    Memory Address | Name - Stored Memory Address Value (it points to ...)\n    -----------------------------------------------------\n    0              |     *output_str = undefined\n    1              |     .....\n    2              |     .....\n    3              |     output_str = 0\n    4              |     .....\n    5              |     .....\n    6              |     .....\n    .              |     .....\n    .              |     .....\n    .              |     .....\n    n-1            |     .....\n</code></pre>\n\n<h2>3. We declare a statically instanced char:</h2>\n\n<blockquote>\n  <p><code>char a = 'a';</code></p>\n</blockquote>\n\n<p>So again our memory has changed, it has placed at MemoryAddress[6] = 'a':</p>\n\n<pre><code>        Memory Address | Name -&gt; Stored Memory Address Value (it points to ...)\n        ------------------------------------------------------\n        0              |     *output_str = undefined\n        1              |     .....\n        2              |     .....\n        3              |     output_str = 0\n        4              |     .....\n        5              |     .....\n        6              |     a = 'a' // 'a'is static memory\n        .              |     .....\n        .              |     .....\n        .              |     .....\n        n-1            |     .....\n</code></pre>\n\n<blockquote>\n  <p>Lastly, we invoke <code>*output_str = &amp;a;</code> we are now telling char pointer <code>*output_str</code> to point to/reference the previously instantiated <code>char a</code>.</p>\n</blockquote>\n\n<p>So our final memory will look like this:</p>\n\n<pre><code>            Memory Address | Name - Stored Memory Address Value (it points to ...)\n            -----------------------------------------------------\n            0              |     *output_str = 6\n            1              |     .....\n            2              |     .....\n            3              |     output_str = 0\n            4              |     .....\n            5              |     .....\n            6              |     a = 'a' // 'a'is static memory\n            .              |     .....\n            n-1            |     .....\n</code></pre>\n\n<hr>\n\n<h2>Further information</h2>\n\n<blockquote>\n<pre><code> Now printf(\"Value: \" + a) will output \"Value: a\" \n printf(\"Value: \" + *output_str[0]) will also output \"Value: a\" \n And printf(\"Value: \" + **output_str) will output \"Value: a\" \n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 6232385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96e895e4fb9aa0ae843a7d880f73cc19?s=128&d=identicon&r=PG&f=1", "display_name": "FShiwani", "link": "https://stackoverflow.com/users/6232385/fshiwani"}, "edited": false, "score": 0, "creation_date": 1490193343, "post_id": 42942719, "comment_id": 73004100, "body": "Ah! That&#39;s what I thought initially. Because I&#39;m giving a pointer to char type to malloc, it returns to me a pointer to a pointer to a char which is what output_str is"}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "reply_to_user": {"reputation": 181, "user_id": 6232385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96e895e4fb9aa0ae843a7d880f73cc19?s=128&d=identicon&r=PG&f=1", "display_name": "FShiwani", "link": "https://stackoverflow.com/users/6232385/fshiwani"}, "edited": false, "score": 0, "creation_date": 1490240241, "post_id": 42942719, "comment_id": 73027301, "body": "Ji bilkul, jawab pasand aaya ho to accept kar lijiye :)"}], "tags": [], "owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "is_accepted": false, "score": 2, "last_activity_date": 1490156673, "creation_date": 1490156673, "answer_id": 42942719, "question_id": 42942268, "link": "https://stackoverflow.com/questions/42942268/double-asterisks-and-malloc-in-c/42942719#42942719", "title": "Double-asterisks and `malloc` in C", "body": "<p>That's a genuine doubt. I will try best to make it clear for you.\nFrom the details in your question, I am assuming (read, \"pretty sure\") that you understand <code>malloc</code>ating a memory and the respective return type.</p>\n\n<p>You have a doubt that if <code>malloc</code> returns a pointer (<code>void*</code>), how can it be converted to a pointer to pointer (<code>char**</code>). </p>\n\n<ol>\n<li><code>char **output_str</code> is equivalent to <code>char *(*output_str)</code> which means <code>*output_str</code> is a pointer to some data of type <code>char</code>. So, this is what <code>malloc</code> is returning to it.</li>\n<li>Again, you see <code>malloc</code> returning a pointer. But essentially, you have a allocated memory for a pointer to char (<code>char*</code>), that \"literally\" means that, <code>malloc</code> is returning a pointer (<code>void*</code>) to a memory where you have <code>char*</code>, that makes it, a pointer to pointer to <code>char</code>, i.e., <code>char**</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 42, "user_id": 7073346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O5CdV.png?s=128&g=1", "display_name": "0x2333", "link": "https://stackoverflow.com/users/7073346/0x2333"}, "is_accepted": false, "score": 0, "last_activity_date": 1490158733, "last_edit_date": 1490158733, "creation_date": 1490157729, "answer_id": 42942895, "question_id": 42942268, "link": "https://stackoverflow.com/questions/42942268/double-asterisks-and-malloc-in-c/42942895#42942895", "title": "Double-asterisks and `malloc` in C", "body": "<p>A simple solution for understanding malloc:</p>\n\n<p>malloc(sizeof(<strong>Each_Element</strong>) * <strong>Number_Of_Elements</strong>) returns an address(aka: a pointer) of a new buffer. And in this buffer, Each element has the same size: sizeof(<strong>Each_Element</strong>), and there are <strong>Number_Of_Elements</strong> elements.</p>\n\n<p>For example:</p>\n\n<p><strong>malloc(sizeof(char))</strong> returns a pointer of a char.</p>\n\n<p><strong>malloc(sizeof(char) * 3)</strong> returns a pointer of a char which is the first element of an char array contains 3 chars.</p>\n\n<p><strong>malloc(sizeof(char *) * 6)</strong> returns a pointer of a char pointer which is the first element of an char pointer array contains 6 char pointers.</p>\n\n<p>Basically, <strong>malloc(sizeof(WHAT))</strong> returns a pointer of WHAT. So simply understand: <strong>malloc(Sizeof(WHAT))</strong> returns <strong>(WHAT *)</strong>. <strong>malloc(Sizeof(WHAT *))</strong> returns <strong>(WHAT **)</strong>... and so on.</p>\n\n<p>Notice that actually malloc returns a <strong>(void *)</strong> pointer. An <strong>(Void *)</strong> pointer can be cast to any kind of pointer later. So there's a good manner for VisualStudio Users: <strong>int * pbuff = (int *) malloc(sizeof(int) * 6);</strong>\nThe (int *) before function malloc convert the \"Amoeba pointer\" <strong>(void *)</strong> into <strong>(int *)</strong>.</p>\n"}], "owner": {"reputation": 181, "user_id": 6232385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96e895e4fb9aa0ae843a7d880f73cc19?s=128&d=identicon&r=PG&f=1", "display_name": "FShiwani", "link": "https://stackoverflow.com/users/6232385/fshiwani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 2, "accepted_answer_id": 42942588, "answer_count": 5, "score": 8, "last_activity_date": 1490192416, "creation_date": 1490153678, "last_edit_date": 1490173182, "question_id": 42942268, "link": "https://stackoverflow.com/questions/42942268/double-asterisks-and-malloc-in-c", "title": "Double-asterisks and `malloc` in C", "body": "<p>I've been studying pointers for a while and I can't seem to wrap my head around it fully. There seems to be a gap that isn't explained when you jump from tutorials explaining pointers to actual functions and code that assume you know about them.\nThe piece of code that is annoyning me is as follows:</p>\n\n<pre><code>char **output_str = malloc(sizeof(char*));\n</code></pre>\n\n<p>Alright, so my understanding is as follows, </p>\n\n<pre><code>**output_str is a character\n*output_str is a pointer to a character\noutput_str is a pointer to a pointer to a character\n</code></pre>\n\n<p>From what I know malloc() returns a pointer to the start of the memory that has just been allocated which has a size value equal to the size of a pointer to a character(char*). Now, shouldn't a pointer to the start of the memory have a single *? If so, how can we assign something with a * to a **? I'm quite confused, if anyone could provide some clarification and maybe with some insight into the memory part that would very nice.</p>\n"}, {"tags": ["c++", "c", "struct", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1490152678, "post_id": 42942068, "comment_id": 72980759, "body": "I&#39;m not sure I understand the problem. Since <code>slist</code> already contains a pointer to an <code>sentry</code>, what stops you from using the <code>next</code> pointer on that to connect to the remaining entries?"}, {"owner": {"reputation": 23, "user_id": 7586451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd453fa0ab739e78df1673cd56ed888?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Clark", "link": "https://stackoverflow.com/users/7586451/gabe-clark"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1490153008, "post_id": 42942068, "comment_id": 72980846, "body": "Sorry, I should specify. The line n-&gt;list = list-&gt; last; Gives me an error over incompatible types. And i think either the assignment to name and grade cause the program to crash or the output causes it."}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490153211, "post_id": 42942068, "comment_id": 72980906, "body": "Inside your sentry, you&#39;re never instantiating <b>stud</b> using dynamic memory.  In your main function, before: n-&gt;student-&gt;name = &quot;test&quot;; n-&gt;student-&gt;grade = &#39;A&#39;;  You must say <b>n-&gt;student = new stud;</b> Then you can have the two following statements assigning a name and a grade."}, {"owner": {"reputation": 23, "user_id": 7586451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd453fa0ab739e78df1673cd56ed888?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Clark", "link": "https://stackoverflow.com/users/7586451/gabe-clark"}, "reply_to_user": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490154536, "post_id": 42942068, "comment_id": 72981260, "body": "@SantiagoVarela Thank you very much. First time using pointers actually so I thought that invoking a new sentry would consequentially create new stud."}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "edited": false, "score": 0, "creation_date": 1490154660, "post_id": 42942068, "comment_id": 72981295, "body": "@GabeClark Unfortunately it doesn&#39;t :/ . In C++ you have to make everything explicit and you have to do it yourself!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7586451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd453fa0ab739e78df1673cd56ed888?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Clark", "link": "https://stackoverflow.com/users/7586451/gabe-clark"}, "edited": false, "score": 1, "creation_date": 1490154406, "post_id": 42942122, "comment_id": 72981217, "body": "The struct prototypes were given to us by our professor. I personally created a DLL without the header struct and found that must easier to abstract and manage than a DLL containing the header struct. I think I will give it a shot without the 2 way relationship because as you said, it is tedious. This way, to my understanding, the header simply acts as a sandwich containing the two ends of the DLL."}, {"owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "reply_to_user": {"reputation": 23, "user_id": 7586451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd453fa0ab739e78df1673cd56ed888?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Clark", "link": "https://stackoverflow.com/users/7586451/gabe-clark"}, "edited": false, "score": 0, "creation_date": 1490154712, "post_id": 42942122, "comment_id": 72981308, "body": "@GabeClark, could you mark the answer as correct one, if it indeed really help you?"}, {"owner": {"reputation": 23, "user_id": 7586451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd453fa0ab739e78df1673cd56ed888?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Clark", "link": "https://stackoverflow.com/users/7586451/gabe-clark"}, "edited": false, "score": 0, "creation_date": 1490155150, "post_id": 42942122, "comment_id": 72981445, "body": "You got it! I can now access each of my three structs:D"}], "tags": [], "owner": {"reputation": 2089, "user_id": 3022583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/re7Fa.png?s=128&g=1", "display_name": "Santiago Varela", "link": "https://stackoverflow.com/users/3022583/santiago-varela"}, "is_accepted": true, "score": 1, "last_activity_date": 1490152751, "creation_date": 1490152751, "answer_id": 42942122, "question_id": 42942068, "link": "https://stackoverflow.com/questions/42942068/how-might-i-be-able-to-access-a-nested-struct-within-a-doubly-linked-list/42942122#42942122", "title": "How might I be able to access a nested struct within a doubly linked list?", "body": "<p>Why don't you modify your struct sentry to not include <code>slist *list</code>?\nWhy is having a <strong>2-way relationship</strong> between <code>sentry</code> and <code>slist</code> <strong>necessary</strong>? It makes it tedious to maintain, to read and update the values inside the list of the sentry. Nevermind, deallocating the memory on the heap to avoid <strong>memory leaks</strong>. Why  not have <code>slist</code> (the header) only have information about the <code>sentry</code>. In this way you remove the complexity of a double binding between <code>sentry</code> and <code>slist</code>.</p>\n\n<pre><code> struct sentry {\n        sentry *next;\n        sentry *prev;\n        stud *student;\n };\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7586451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd453fa0ab739e78df1673cd56ed888?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Clark", "link": "https://stackoverflow.com/users/7586451/gabe-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 42942122, "answer_count": 1, "score": 1, "last_activity_date": 1490152751, "creation_date": 1490152461, "question_id": 42942068, "link": "https://stackoverflow.com/questions/42942068/how-might-i-be-able-to-access-a-nested-struct-within-a-doubly-linked-list", "title": "How might I be able to access a nested struct within a doubly linked list?", "body": "<p>I am trying to use a doubly linked list with a header struct. I believe the header struct is simply supposed to hold a count of how many structs have been created in the list, and the first and last nodes. Now I see two problems. One is connecting the header struct to the subsequent structs and the second is accessing a nested struct that i have within my list nodes (sentry). If anyone could shed some light on what I might be doing wrong it would be greatly appreciated. Code is below. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\ntypedef struct sentry sentry; \n\nstruct stud{\n    string name;\n    char grade;\n};\n\nstruct slist {\n    int length;\n    sentry *first;\n    sentry *last;\n};\n\nstruct sentry {\n    slist *list;\n    sentry *next;\n    sentry *prev;\n    stud *student;\n};\n\nint main(int argc, char** argv) {\n    slist list;\n    sentry *n;\n\n    n = new sentry;\n\n    // Full initialization of the header node.\n    list.first = n;\n    list.last = n;\n    list.length = 0;\n\n    n-&gt;prev = NULL;\n    n-&gt;next = NULL;\n    n-&gt;list = list-&gt;last;\n    n-&gt;student-&gt;name = \"test\";\n    n-&gt;student-&gt;grade = 'A';\n\n    cout &lt;&lt; n-&gt;student-&gt;name &lt;&lt; '\\n';\n    cout &lt;&lt; n-&gt;student-&gt;grade &lt;&lt; '\\n';\n\n    return 0; \n}\n</code></pre>\n"}]