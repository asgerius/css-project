[{"tags": ["c", "graph-theory", "vertex", "edges", "weighted"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438215089, "post_id": 31713148, "comment_id": 51364112, "body": "Standard warning: Do <b>not</b> cast <code>void *</code> as returned by <code>malloc</code> &amp; friends."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 2299416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d379fe0e81f032ea929e84ab07b4cd?s=128&d=identicon&r=PG", "display_name": "Tyler Pierog", "link": "https://stackoverflow.com/users/2299416/tyler-pierog"}, "edited": false, "score": 0, "creation_date": 1438215166, "post_id": 31713195, "comment_id": 51364130, "body": "Good call Eric Z!  I implemented weight into the insertEdge method and into the structure and now it has weight !!!!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 29, "user_id": 2299416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d379fe0e81f032ea929e84ab07b4cd?s=128&d=identicon&r=PG", "display_name": "Tyler Pierog", "link": "https://stackoverflow.com/users/2299416/tyler-pierog"}, "edited": false, "score": 0, "creation_date": 1438216246, "post_id": 31713195, "comment_id": 51364401, "body": "@TylerPierog: As there are no classes in C, there are also no methods actually."}, {"owner": {"reputation": 13579, "user_id": 419391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1817cc6266055df52382764dbffc125f?s=128&d=identicon&r=PG", "display_name": "Eric Z", "link": "https://stackoverflow.com/users/419391/eric-z"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438216694, "post_id": 31713195, "comment_id": 51364509, "body": "@Olaf: Strickly speaking, there is no method in C++ as well. There are only <b>functions</b> and <b>member functions</b>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438216924, "post_id": 31713195, "comment_id": 51364564, "body": "@EricZ: IIRC, these <i>member functions</i> are called <i>methods</i> in C++. However, I&#39;m not a C++ expert and can only refer to HLOOPL like Python."}, {"owner": {"reputation": 13579, "user_id": 419391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1817cc6266055df52382764dbffc125f?s=128&d=identicon&r=PG", "display_name": "Eric Z", "link": "https://stackoverflow.com/users/419391/eric-z"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438217310, "post_id": 31713195, "comment_id": 51364664, "body": "@Olaf: The C++ standard mentions no method. People tend to use words method and function interchangably when it causes no misunderstanding."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438218119, "post_id": 31713195, "comment_id": 51364843, "body": "@EricZ: &quot;People tend to use words method and function&quot; Not really, as you can also provide methods in C; actually OOP in C is not that rare. There is a good reason to differentiate the two types. Methods are functions bound to an object (thus methods are functions, but not vice versa.)"}, {"owner": {"reputation": 13579, "user_id": 419391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1817cc6266055df52382764dbffc125f?s=128&d=identicon&r=PG", "display_name": "Eric Z", "link": "https://stackoverflow.com/users/419391/eric-z"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438219238, "post_id": 31713195, "comment_id": 51365146, "body": "@Olaf You misunderstood what I mean. In C/C++, unofficially you can use the paired terms function and member function, or method and member method(less likely though). If you want to go official, well, there is no such thing as method. The C/C++ language takes the term function. Don&#39;t look at C/C++ in a Python way. If you still have questions, take a look at C++ ANSI ISO IEC 14882 or <a href=\"http://stackoverflow.com/questions/8596461/in-c-what-is-the-difference-between-a-method-and-a-function\">here</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438220077, "post_id": 31713195, "comment_id": 51365321, "body": "@EricZ: I did already. And: you are right, there is no such term with respect to functions - as much as there is none such in the C standard. However, that is common OOP nomenclature and clearly related to  functions bound to an object (in whichever way). That has nothing to do with Python, etc."}], "tags": [], "owner": {"reputation": 13579, "user_id": 419391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1817cc6266055df52382764dbffc125f?s=128&d=identicon&r=PG", "display_name": "Eric Z", "link": "https://stackoverflow.com/users/419391/eric-z"}, "is_accepted": true, "score": 1, "last_activity_date": 1438216030, "last_edit_date": 1438216030, "creation_date": 1438214726, "answer_id": 31713195, "question_id": 31713148, "link": "https://stackoverflow.com/questions/31713148/implementing-weighted-edges-to-graph/31713195#31713195", "title": "Implementing Weighted edges to graph", "body": "<p>Weight is an attribute of an edge so you can add it in your edge struct.</p>\n\n<pre><code>struct edge\n{\n   // You can use \"-1\" as the default invalid weight\n   int weight;\n   int vertexIndex;\n   struct edge *edgePtr;\n}edge;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 2299416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d379fe0e81f032ea929e84ab07b4cd?s=128&d=identicon&r=PG", "display_name": "Tyler Pierog", "link": "https://stackoverflow.com/users/2299416/tyler-pierog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3963, "favorite_count": 0, "accepted_answer_id": 31713195, "answer_count": 1, "score": 0, "last_activity_date": 1572280785, "creation_date": 1438214310, "last_edit_date": 1572280785, "question_id": 31713148, "link": "https://stackoverflow.com/questions/31713148/implementing-weighted-edges-to-graph", "title": "Implementing Weighted edges to graph", "body": "<p>I want to be able to implement a shortest path algorithm but I realized there is no weight to the actual edge itself. I wanted to change my structure  so that I can take a numerical value for the weight of going from one vertex to the other. How would I implement this?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    struct edge\n    {\n        int vertexIndex;\n        struct edge *edgePtr;\n    }edge;\n    struct vertex\n    {\n        int vertexKey;\n        struct edge *edgePtr;\n    }vertex;\n    struct vertex graph[1000];\n    int vertexCount=0;\n    void InsertVertex(int vertexKey)\n    {\n        graph[vertexCount].vertexKey=vertexKey;\n        graph[vertexCount].edgePtr=NULL;\n        vertexCount++;\n    }\n    void insertEdge(int vertex1, int vertex2)\n    {\n        struct edge *e,*e1,*e2;\n        e=graph[vertex1].edgePtr;\n        while(e&amp;&amp; e-&gt;edgePtr)\n        {\n            e=e-&gt;edgePtr;\n        }\n        e1=(struct edge *)malloc(sizeof(*e1));\n        e1-&gt;vertexIndex=vertex2;\n        e1-&gt;edgePtr=NULL;\n        if(e)\n            e-&gt;edgePtr=e1;\n        else\n            graph[vertex1].edgePtr=e1;\n        e=graph[vertex2].edgePtr;\n        while(e&amp;&amp; e-&gt;edgePtr)\n        {\n            e=e-&gt;edgePtr;\n        }\n        e2=(struct edge *)malloc(sizeof(*e2));\n        e2-&gt;vertexIndex=vertex1;\n        e2-&gt;edgePtr=NULL;\n        if(e)\n            e-&gt;edgePtr=e2;\n        else\n            graph[vertex2].edgePtr=e2;\n    }\n    void printGraph()\n    {\n        int i;\n        struct edge *e;\n        for(i=0;i&lt;vertexCount;i++)\n        {\n            printf(\"%d\",i);\n            e=graph[i].edgePtr;\n            while(e)\n            {\n                printf(\"-&gt;%d\",e-&gt;vertexIndex);\n                e=e-&gt;edgePtr;\n            }\n            printf(\"\\n\");\n        }\n    }\n    int main()\n    {\n        InsertVertex(1);\n        InsertVertex(2);\n        InsertVertex(3);\n        InsertVertex(4);\n        InsertVertex(5);\n        insertEdge(0,1);\n        insertEdge(0,2);\n        insertEdge(1,3);\n        insertEdge(1,4);\n        insertEdge(3,5);\n        printGraph();\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "data-structures", "heap"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1438214128, "post_id": 31713031, "comment_id": 51363856, "body": "Please show your code (even if it is incomplete) and preferably ask one question at a time. If you just describe your code in words it is very easy to misunderstand."}, {"owner": {"reputation": 11, "user_id": 4961197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21194c22a1eac197301a2cc3af24b347?s=128&d=identicon&r=PG&f=1", "display_name": "\uc591\uc218\ud604", "link": "https://stackoverflow.com/users/4961197/%ec%96%91%ec%88%98%ed%98%84"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1438214733, "post_id": 31713031, "comment_id": 51364017, "body": "@AlanAu I&#39;ve inserted the codes. I was curious about the Heap Tree Data Structure itself by using Nodes. Therefore seemed it wouldn&#39;t need any codes."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1438217038, "post_id": 31713031, "comment_id": 51364597, "body": "The question doesn&#39;t make sense. A binary heap is typically <i>used as</i> a queue, and the internal array <i>already is</i> used as a tree."}], "owner": {"reputation": 11, "user_id": 4961197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21194c22a1eac197301a2cc3af24b347?s=128&d=identicon&r=PG&f=1", "display_name": "\uc591\uc218\ud604", "link": "https://stackoverflow.com/users/4961197/%ec%96%91%ec%88%98%ed%98%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438214571, "creation_date": 1438213634, "last_edit_date": 1438214571, "question_id": 31713031, "link": "https://stackoverflow.com/questions/31713031/binary-heap-using-queue", "title": "Binary heap using queue", "body": "<p>There are lots of C examples by using an array to represent the tree.\nHowever, I'm trying to use a tree(Nodes) for the Binary heap.</p>\n\n<ol>\n<li><p>I was trying to add the child left and then right. In order to insert the elements in Width-first-Search, I've used a Queue. Is this necessary?</p></li>\n<li><p>My Queue is using a Node* not a int type. Because, if I put a int in the Queue I must search the position of the Node(more time needed). Is this an appropriate way to built a Binary heap?</p></li>\n<li><p>During the insertion, there are bubbling up and downs. However, since i have a binary heap and also a Queue. Do I have to match the orders in Queue also?</p></li>\n</ol>\n\n<p>4.Do I need to search for inserting position like a BST? or do I approach to the address directly by using Queue?</p>\n\n<p>I've learned the theory. However, the codes and structures are unfamiliar.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint left(int a,int b)\n{\n    return (int)(a-floor((float)a/(float)b)*b);\n}\n\ntypedef struct Node\n{\n    int data;\n    struct Node* leftNext;\n    struct Node* rightNext;\n}Node;\n\nstruct queue\n{\n    Node** data;\n    int top;\n    int bottom;\n    int size;\n}typedef Queue;\n\nint push(Queue* Q,Node* input)\n{\n    printf(\"PUSH : %d\\n\",input);\n\n    //\ud55c\uce78\uc740 \ube44\uc6b8 \uac83\uc784.\n    if(left((*Q).top-(*Q).bottom,(*Q).size)==(*Q).size-1)\n    {\n        printf(\"\ud050\uac00 \ub2e4 \ucc3c\uc2b5\ub2c8\ub2e4.\\n\");\n        return 0;\n    }\n    else\n    {\n        //\ud050\uc758 \ud06c\uae30\ub97c \ub118\uc73c\uba74 \uc544\ub798\ub85c \uc774\ub3d9\n        if((*Q).top==(*Q).size)\n            (*Q).top=0;\n\n        printf(\"TOP : %d\\n\",(*Q).top);\n        (*Q).data[(*Q).top++]=input;\n        return 1;\n    }\n}\n\nNode* pop(Queue* Q)\n{\n    if(left((*Q).top-(*Q).bottom,(*Q).size)==0)\n        printf(\"\ud050\uac00 \ube44\uc5c8\uc2b5\ub2c8\ub2e4.\\n\");\n    else\n    {\n        if((*Q).bottom==(*Q).size)\n            (*Q).bottom=0;\n\n        printf(\"BOTTOM : %d\\n\",(*Q).bottom);\n        return (*Q).data[(*Q).bottom];\n    }\n}\n\ntypedef struct Heap\n{\n    Node* head;\n}Heap;\n\nint insert(Node** head,int data,Queue* Q)\n{\n    if((*head)!=NULL)\n    {\n        if((*head)-&gt;leftNext==NULL)\n        {\n            (*head)-&gt;leftNext=(Node*)malloc(sizeof(Node));\n            (*head)-&gt;leftNext-&gt;data=data;\n            (*head)-&gt;leftNext-&gt;leftNext=NULL;\n            (*head)-&gt;leftNext-&gt;rightNext=NULL;\n            push(Q,&amp;(*head)-&gt;leftNext);\n        }\n        else if((*head)-&gt;rightNext==NULL)\n        {\n            (*head)-&gt;rightNext=(Node*)malloc(sizeof(Node));\n            (*head)-&gt;rightNext-&gt;data=data;\n            (*head)-&gt;rightNext-&gt;leftNext=NULL;\n            (*head)-&gt;rightNext-&gt;rightNext=NULL;\n            push(Q,&amp;(*head)-&gt;rightNext);\n            (*Q).bottom++;\n        }\n        else\n        {\n            if(insert((pop(Q)),data,Q)==1)\n                return 1;\n            else\n                return 0;\n        }\n    }\n    else\n    {\n        printf(\"\ud5e4\ub4dc\uac00 \ube44\uc5c8\uc2b5\ub2c8\ub2e4.\");\n        return 0;\n    }\n    return 1;\n}\n\nint main()\n{\n    //\uc785\ub825 15 6 12 7 10 17\n    Heap h;\n    //\ud050 \ucd08\uae30\ud654\n    Queue Q;\n    //\ud050 \ud06c\uae30\n    int temp=100;\n    Q.data=(Node**)malloc(sizeof(Node*)*temp);\n    Q.size=temp;\n    Q.top=0;\n    Q.bottom=0;\n\n    h.head=(Node*)malloc(sizeof(Node));\n    h.head-&gt;data=15;\n    h.head-&gt;leftNext=NULL;\n    h.head-&gt;rightNext=NULL;\n    insert(&amp;(h.head),6,&amp;Q);\n    insert(&amp;(h.head),12,&amp;Q);\n    insert(&amp;(h.head),7,&amp;Q);\n    insert(&amp;(h.head),10,&amp;Q);\n    insert(&amp;(h.head),17,&amp;Q);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "parsing", "csv", "struct"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1438212787, "post_id": 31712871, "comment_id": 51363538, "body": "1) What is <code>strncopy()</code> ?  2) <code>memcpy(&amp;myarray[LOOPNUMBER], &amp;temp, sizeof(accounts));</code> is one beyond the allocated size for myarray"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438213240, "post_id": 31712871, "comment_id": 51363660, "body": "1) <code>myarray[LOOPNUMBER]</code> :  <code>LOOPNUMBER</code> --&gt; counter_index (i.e 0..9) 2) <code>fwrite(myarray, sizeof(accounts), 10, fpData);</code> --&gt; <code>fwrite(&amp;myarray[i], sizeof(accounts), 1, fpData);</code> or not use loop."}], "answers": [{"tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1438240437, "last_edit_date": 1438240437, "creation_date": 1438213500, "answer_id": 31713009, "question_id": 31712871, "link": "https://stackoverflow.com/questions/31712871/parsing-csv-file-populating-struct-and-write-binary-data-file/31713009#31713009", "title": "parsing csv file, populating struct and write binary data file", "body": "<p>This is a short answer, you really need to check your code, there's one too many strtoks.</p>\n\n<p>But the main problem is here ...  I've got the snippet and changed the fwrite - please review.</p>\n\n<pre><code>if ((fpData = fopen(\"accounts.dat\", \"wb\")) == NULL)\n{\n    printf(\"File could not be opened.\\n\");\n}\nelse\n{\n    for (i = 0; i &lt; 10; i++)\n    {\n        fwrite( &amp;myarray[ i ], sizeof(accounts), 1, fpData );\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5171353, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f269a548bbd417a42b6cc4da7263d1f?s=128&d=identicon&r=PG&f=1", "display_name": "killburn", "link": "https://stackoverflow.com/users/5171353/killburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 31713009, "answer_count": 1, "score": -1, "last_activity_date": 1438240437, "creation_date": 1438212649, "question_id": 31712871, "link": "https://stackoverflow.com/questions/31712871/parsing-csv-file-populating-struct-and-write-binary-data-file", "title": "parsing csv file, populating struct and write binary data file", "body": "<p>I am trying to read csv file and parse it then populate a struct to write into a binary .dat file and I am stuck at the moment. I am trying to create 10 list of .csv file and here is the example of csv file format:\n1001, Shannon, Rylie, 5824.12, 1500.00</p>\n\n<p>and here is my code:</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n\n#define MAXBUFSIZE 511\n#define LOOPNUMBER 30\n#define BUFFER_SIZE 1024\n\ntypedef struct{\nint     accountNumber;\nchar    firstName[MAXBUFSIZE + 1];\nchar    lastName[MAXBUFSIZE + 1];\ndouble  accountBalance;\ndouble  lastPaymentAmount;\n} accounts;\n\nint main(void){\n\n    int i;\n    char buf[1024];\n    const char* tok;\n\n    accounts myarray[10];\n\n    FILE    *fpData;\n\naccounts temp = { 0, \"\", \"\", 0.0, 0.0 };\n\nif ((fpData = fopen(\"accounts.csv\", \"r\")) == NULL) //Reading a file\n{\n    printf(\"File could not be opened.\\n\");\n}\n\nwhile (fgets(buf, BUFFER_SIZE, fpData) != NULL)\n{\n    /* Here we tokenize our string and scan for \" \\n\" characters */\n\n    // for(tok = strtok(buf,\"\\n\");tok;tok=strtok(NULL,\"\\n\"))\n    // {\n    tok = strtok(buf, \",\");\n    temp.accountNumber = atoi(tok);\n    printf(\" %i \", temp.accountNumber);\n\n    tok = strtok(NULL, \",\");\n    strncopy(temp.firstName, tok, MAXBUFSIZE);\n    temp.firstName[MAXBUFSIZE] = '\\0';\n\n    tok = strtok(NULL, \",\");\n    strncopy(temp.lastName, tok, MAXBUFSIZE);\n    temp.lastName[MAXBUFSIZE] = '\\0';\n\n    tok = strtok(NULL, \",\");\n    temp.accountBalance = atof(tok);\n    printf(\"temp.accountBalance = %.2f \", temp.accountBalance);\n\n    tok = strtok(NULL, \",\");\n    temp.lastPaymentAmount = atof(tok);\n    printf(\"temp.lastPaymentAmount = %.2f \", temp.lastPaymentAmount);\n\n    tok = strtok(NULL, \",\");\n    printf(\"\\n\");\n\n    memcpy(&amp;myarray[LOOPNUMBER], &amp;temp, sizeof(accounts));\n}\n\nif ((fpData = fopen(\"accounts.dat\", \"wb\")) == NULL)\n{\n    printf(\"File could not be opened.\\n\");\n}\nelse\n{\n    for (i = 0; i &lt; 10; i++)\n    {\n        fwrite(myarray, sizeof(accounts), 10, fpData);\n    }\n}\n\nfclose(fpData);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "srand"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438212026, "post_id": 31712750, "comment_id": 51363366, "body": "Simple soulution: cast to <code>unsigned int</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438212513, "post_id": 31712750, "comment_id": 51363483, "body": "@Olaf: Yes, that will probably silence the warning -- but IMHO it&#39;s an annoying workaround, since the cast merely specifies the same conversion that would have happened anyway. It&#39;s also prone to error if you get the type wrong."}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "edited": false, "score": 0, "creation_date": 1438213074, "post_id": 31712750, "comment_id": 51363617, "body": "so seems from all answers suggestion is to just to typecast it or ignore the compiler warning-"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1438213175, "post_id": 31712750, "comment_id": 51363637, "body": "What compiler are you using?"}, {"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "edited": false, "score": 0, "creation_date": 1438213223, "post_id": 31712750, "comment_id": 51363656, "body": "I tried it on both VC++ and gcc/Linux - got same warning at both places"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438214495, "post_id": 31712750, "comment_id": 51363954, "body": "Casting is <b>no workaround</b>, but the C way to tell the compiler you know what you are doing and to shut up for this specific cast. That&#39;s why you shall <b>never</b> use casts just you think they look fancy or a **different langauge like C++ requires it - as for <code>malloc</code>, e.g."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438214800, "post_id": 31712750, "comment_id": 51364043, "body": "Btw: C or C++! These are different languages. Choose one!"}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "edited": false, "score": 0, "creation_date": 1438213106, "post_id": 31712807, "comment_id": 51363622, "body": "I guess that&#39;s the answer that I am getting from everyone - will go ahead and implement it that way.. thanks rici"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1438217225, "last_edit_date": 1438217225, "creation_date": 1438212305, "answer_id": 31712807, "question_id": 31712750, "link": "https://stackoverflow.com/questions/31712750/loss-of-precision-warning-with-usage-of-srand/31712807#31712807", "title": "Loss of precision - warning with usage of srand", "body": "<p>If you are using C++, look into <code>&lt;random&gt;</code>. It has much better PRNGs.</p>\n\n<p>If you're limited to <code>rand</code>, you can, in this case, ignore the warning, or better, tell the compiler you don't care by explicitly casting <code>(unsigned)time(NULL)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5101, "user_id": 2672913, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/swwCb.png?s=128&g=1", "display_name": "Nick L.", "link": "https://stackoverflow.com/users/2672913/nick-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1438212530, "creation_date": 1438212530, "answer_id": 31712850, "question_id": 31712750, "link": "https://stackoverflow.com/questions/31712750/loss-of-precision-warning-with-usage-of-srand/31712850#31712850", "title": "Loss of precision - warning with usage of srand", "body": "<p>Putting it to simple logic, it makes a good sense that you lose precision when you use a <code>long long</code> instead of an <code>unsigned int</code> and that the compiler warns you for this.\n(<code>long long</code> can represent a bigger range of numbers, you can check <a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz.aspx\" rel=\"nofollow\">here</a> the difference).</p>\n\n<p>If you think that despite the loss your needs are covered, you can either cast it to an <code>unsigned int</code> or simply ignore the warning.</p>\n"}], "owner": {"reputation": 537, "user_id": 3902763, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02819225c6fcfa3af9aa411a13e654bc?s=128&d=identicon&r=PG&f=1", "display_name": "oneday", "link": "https://stackoverflow.com/users/3902763/oneday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 31712807, "answer_count": 2, "score": 1, "last_activity_date": 1438217225, "creation_date": 1438211841, "question_id": 31712750, "link": "https://stackoverflow.com/questions/31712750/loss-of-precision-warning-with-usage-of-srand", "title": "Loss of precision - warning with usage of srand", "body": "<p>I am trying to use srand along with time for randomized value. If I look at \nsrand function it takes unsigned int - but if we initialize it with time which seems to have long long value - so compiler keeps complaining about loss of precision warning. Any better way to do things ?</p>\n\n<pre><code>// srand definition\nvoid srand (unsigned int seed);\n// using srand with time to seed random value\nsrand(time(NULL));\n</code></pre>\n\n<p>warning 712: (Info -- Loss of precision (arg. no. 1) (long long to unsigned int))</p>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 5, "creation_date": 1438210119, "post_id": 31712445, "comment_id": 51362848, "body": "You need to show the code that creates and inserts a new node into the list.  Or better yet, post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal Complete Verifiable Example</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1438210281, "post_id": 31712445, "comment_id": 51362904, "body": "should be <code>char* val=NULL;</code>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1438210288, "post_id": 31712445, "comment_id": 51362905, "body": "And you need to show the definition of <code>struct node</code>. In particular is the <code>name</code> field a static array? If so, you cannot <code>free</code> it."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438210470, "post_id": 31712445, "comment_id": 51362949, "body": "@Mossa Ahmed Show how you great list is declared."}, {"owner": {"reputation": 423, "user_id": 1102939, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec66abe104696b29841bee7b47bd84ae?s=128&d=identicon&r=PG", "display_name": "Elan", "link": "https://stackoverflow.com/users/1102939/elan"}, "edited": false, "score": 1, "creation_date": 1438210708, "post_id": 31712445, "comment_id": 51363021, "body": "Is that <i>all</i> of your main.c? Where is the variable head initialized then?"}, {"owner": {"reputation": 3, "user_id": 5171283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312a0a7d1744ef8f0fde767ef8535ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Mossa Ahmed", "link": "https://stackoverflow.com/users/5171283/mossa-ahmed"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438211937, "post_id": 31712445, "comment_id": 51363338, "body": "@VladfromMoscow I updates the post with most of main.c"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438212216, "post_id": 31712445, "comment_id": 51363408, "body": "@Mossa Ahmed You should show function push."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1438212432, "post_id": 31712445, "comment_id": 51363465, "body": "Use a debugger, like gdb.  Check that your data structure has the values you expect after you push a couple items.  Then check that it&#39;s still what you expect after a pop.  Narrow down to where things go from expected to unexpected.  You&#39;ll probably find the line of code with faulty logic, or that doesn&#39;t do what you thought it did."}, {"owner": {"reputation": 3, "user_id": 5171283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312a0a7d1744ef8f0fde767ef8535ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Mossa Ahmed", "link": "https://stackoverflow.com/users/5171283/mossa-ahmed"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1438213016, "post_id": 31712445, "comment_id": 51363600, "body": "@VladfromMoscow I added push"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438213342, "post_id": 31712445, "comment_id": 51363681, "body": "Still no definition for struct node...."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438213697, "post_id": 31712445, "comment_id": 51363768, "body": "<code>free(vin);</code> : <code>free</code> can&#39;t use to string literal."}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438213498, "post_id": 31712996, "comment_id": 51363718, "body": "Yeah.. we&#39;re still waiting for the OP to post the def. of struct node:("}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 0, "last_activity_date": 1438213408, "creation_date": 1438213408, "answer_id": 31712996, "question_id": 31712445, "link": "https://stackoverflow.com/questions/31712445/pop-an-element-from-a-linked-list-in-c/31712996#31712996", "title": "Pop an element from a linked list in C", "body": "<p><code>pop</code> is returning the same pointer that was passed to <code>push</code>: the address of the string literal <code>\"Vin\"</code>.  You can't <code>free</code> a string literal, since you didn't get it from <code>malloc</code>.</p>\n\n<p>If the values returned by <code>pop</code> are supposed to be <code>free</code>-able, then <code>push</code> will have to allocate a string rather than just copying a pointer.  For example, you might replace</p>\n\n<pre><code>newNode-&gt;name = name;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>newNode-&gt;name = strdup(name);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5171283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/312a0a7d1744ef8f0fde767ef8535ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Mossa Ahmed", "link": "https://stackoverflow.com/users/5171283/mossa-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "closed_date": 1438240381, "accepted_answer_id": 31712996, "answer_count": 1, "score": -2, "last_activity_date": 1438222237, "creation_date": 1438209976, "last_edit_date": 1438222237, "question_id": 31712445, "link": "https://stackoverflow.com/questions/31712445/pop-an-element-from-a-linked-list-in-c", "closed_reason": "Not suitable for this site", "title": "Pop an element from a linked list in C", "body": "<p>I've been trying to pop out an element from a linked list but I get this weird output. </p>\n\n<p>This is the given skeleton code:</p>\n\n<pre><code>char* pop() {\n\n}\n</code></pre>\n\n<p>and this is what I have for now: </p>\n\n<pre><code>char* pop() {\n  char* val;\n  struct node* current;\n\n  if( head != NULL){   \n        val = head -&gt; name;\n        current = head -&gt; next;\n        free(head);\n        head = current;\n    }\n\n  return(val);\n}\n</code></pre>\n\n<p>this is the main.c: </p>\n\n<pre><code>node *head = NULL; //globally accessible\n\nint main(){\n        printf(\"Printing an empty list\\n\");\n        print_list();\n\n        printf(\"\\nPushing Kelsier...\\n\");\n        push(\"Kelsier\");\n        print_list();\n\n        printf(\"\\nPushing Vin. Should be: Vin Kelsier\\n\");\n        push(\"Vin\");\n        print_list();\n        char* vin = pop();\n        free(vin);\n        pop();\n\n        print_list();\n</code></pre>\n\n<p>here is the weird output: </p>\n\n<pre><code>*** glibc detected *** ./linked_list: munmap_chunk(): invalid pointer: 0x000000000040098d ***\n</code></pre>\n\n<p>after this line is all some weird stuff and folder paths</p>\n\n<p>the thing is that the program works without these two lines: </p>\n\n<pre><code>char* vin = pop();\nfree(vin);\n</code></pre>\n\n<p>when I replace them with only <code>pop();</code> , but these two lines are given and I'm not supposed to them. </p>\n\n<p>This is push: </p>\n\n<pre><code>void push(char *name) {\n\n        struct node* newNode;\n        newNode =  malloc (sizeof (struct node));\n        newNode-&gt;name = name;\n        newNode-&gt;next = head;\n        head = newNode;\n\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1438208573, "post_id": 31712160, "comment_id": 51362309, "body": "Your description of behaviour doesn&#39;t make any sense. Please post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>, along with the exact input you supply to the program, and the output that you get"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1438208775, "post_id": 31712160, "comment_id": 51362387, "body": "We&#39;d need to see more of your code (and some input data wouldn&#39;t hurt).  How are you displaying <code>curritem.history</code>?  Do you use any other functions with it between <code>sscanf()</code> and checking the contents?"}, {"owner": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "edited": false, "score": 0, "creation_date": 1438209584, "post_id": 31712160, "comment_id": 51362682, "body": "Maybe i provided too much, such that it&#39;s being over-thought. The issue is simple; sscanf() takes a line from a file, and rather than placing the detected &#39;0&#39; (via %d, this detects integers) integer into an array index, it appears to be NULL-terminating the array at that point. I cannot provide the exact input and output because there is far too much, and the output isn&#39;t actually a necessary part of the program (simply a method of visualizing the problem).   I have edited the original post with more information."}, {"owner": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "edited": false, "score": 0, "creation_date": 1438210305, "post_id": 31712160, "comment_id": 51362908, "body": "Really?? I was under the impression that format will result in printing every item in an array until termination- this would imply the array is terminated prematurely; if that is not the case, then, is there no distinguishable difference between the termination of the array and a zero entry?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1438212938, "post_id": 31712160, "comment_id": 51363574, "body": "There&#39;s no &quot;null terminator&quot; for arrays in general, even <code>char</code> arrays.  By convention, a <code>char</code> with a value of <code>0</code> is used to mark the end of strings (but not the array that holds them) since text won&#39;t normally contain any such characters, and many string functions follow that convention -- but otherwise <code>0</code> can appear legitimately in an array, even an array of <code>char</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438214101, "post_id": 31712160, "comment_id": 51363848, "body": "<code>WL162343Fleece-Lined</code> will not match <code>%d</code> in sscanf either. I guess you mucked that up.  In any case you should <i>always</i> check the return value of <code>sscanf</code> to see that the expected number of elements were read."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "edited": false, "score": 0, "creation_date": 1438210458, "post_id": 31712463, "comment_id": 51362945, "body": "Zero. Because the integer zero is at that position in my integer array. Are you implying this type of loop simply cannot be used with integer arrays containing zero; an equivalent statement to &quot;an integer array including a value of zero has no distinguishable termination point&quot;? That seems downright silly."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1438212250, "post_id": 31712463, "comment_id": 51363418, "body": "In any case I would find it much safer and more transparent to explicitly reference the length of the array (even if there was an option to do this implicitly)."}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "reply_to_user": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "edited": false, "score": 0, "creation_date": 1438212780, "post_id": 31712463, "comment_id": 51363534, "body": "@CoshCaust Yes, and zero is false. Integer array with zeros can have a distinguishable termination point, you just need to define one. Eg. negative numbers."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "edited": false, "score": 0, "creation_date": 1438214144, "post_id": 31712463, "comment_id": 51363862, "body": "@CoshCaust all arrays have a &quot;termination point&quot;: the end of the array"}, {"owner": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438217584, "post_id": 31712463, "comment_id": 51364721, "body": "@MattMcNabb From my understanding, there is no &#39;end of the array&#39; in C; nothing is stopping you from continuing past the originally declared size&#39;s max index. StenSoft, This makes sense (a bit contrary to Matt) given C&#39;s nature."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "edited": false, "score": 0, "creation_date": 1438217674, "post_id": 31712463, "comment_id": 51364741, "body": "@CoshCaust there is an end. If the array has 12 elements then the end comes after the 12th element (index 11).  You can write code that attempts to read past the end of the array; then you are no longer reading the array."}], "tags": [], "owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1438210116, "creation_date": 1438210116, "answer_id": 31712463, "question_id": 31712160, "link": "https://stackoverflow.com/questions/31712160/c-sscanf-d-picking-up-zero-and-causing-destination-curritem-stock-to-be-nu/31712463#31712463", "title": "C - sscanf() %d picking up zero and causing destination &amp;curritem.stock to be NULL", "body": "<p>What do you think that <code>curritem.history[n]</code> will return in the <code>for</code>'s condition when it contains zero?</p>\n"}], "owner": {"reputation": 19, "user_id": 4544244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23efbc282075fc1dcf78e78d2e1b2d01?s=128&d=identicon&r=PG&f=1", "display_name": "CoshCaust", "link": "https://stackoverflow.com/users/4544244/coshcaust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1438227368, "answer_count": 1, "score": -3, "last_activity_date": 1438210658, "creation_date": 1438208353, "last_edit_date": 1438210658, "question_id": 31712160, "link": "https://stackoverflow.com/questions/31712160/c-sscanf-d-picking-up-zero-and-causing-destination-curritem-stock-to-be-nu", "closed_reason": "Not suitable for this site", "title": "C - sscanf() %d picking up zero and causing destination &amp;curritem.stock to be NULL", "body": "<p>sscanf() is great for the problem i'm facing, but it's doing something unexpected.</p>\n\n<p>tmp is a line read in from a file, i need to parse out parts of the line into separate pieces of data. curritem is a struct with int dollar, int cent, cat[], int stock, and int history[].</p>\n\n<p>The odd issue i'm having is that when %d picks up a double zero (00), it appropriately inserts integer zero into destination, but upon confronting a single zero (0), the integer is not added appropriately to the destination; for example, while collecting data pertaining to history[], all is well, adding 1, 4, 8, 2, 13, etc. to the array, but a single zero cuts everything off there, as if NULL terminated at that point, which i presume is related.</p>\n\n<p>The code:</p>\n\n<pre><code>sscanf(tmp, \"%d.%d%s %d %d %d\", &amp;curritem.dollar, &amp;curritem.cent, \n       curritem.cat, &amp;curritem.stock, &amp;curritem.history[0],\n       &amp;curritem.history[1]);\n</code></pre>\n\n<p>I have left out some indices of curritem.history[], as it clutters the necessary information.</p>\n\n<p>Example of what i should get, if all integers were added correctly:</p>\n\n<pre><code>curritem.history[0...11] = 5 2 6 1 0 11 9 0 15 0 7 10\n</code></pre>\n\n<p>What actually results as of right now:</p>\n\n<pre><code>curritem.history[0...11] = 5 2 6 1\n</code></pre>\n\n<p>Something dies when sscanf() sees a single '0' via %d and adds that to &amp;struct.intarray[n]</p>\n\n<p>Any ideas?</p>\n\n<p>Try not to recommend an entirely different solution to my general program function, sscanf() is working wonders in every other aspect.</p>\n\n<p>Thank you for your time!</p>\n\n<p>EDIT:</p>\n\n<p>A snippet of exact input:</p>\n\n<p>WL162343Fleece-Lined Double L Jeans     49.95PANTS  3  8  1  0  1  0  7  1  5  2 10  2  6</p>\n\n<p>All information is acquired successfully until after the category- in this case, 'PANTS'.</p>\n\n<p>With this example, my int array called history should hold the values</p>\n\n<pre><code>3  8  1  0  1  0  7  1  5  2 10  2  6\n</code></pre>\n\n<p>But upon printing every item in the array:</p>\n\n<pre><code>int n = 0;\nfor (n = 0; curritem.history[n]; n++) {\n  printf(\"%i \", curritem.history[n]);\n}\n</code></pre>\n\n<p>The following output results:</p>\n\n<pre><code>3  8  1\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>The 'for' loop used for printing is incapable of distinguishing between an integer '0' and a null-termination of the array. Annoying.</p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438208182, "post_id": 31712096, "comment_id": 51362164, "body": "try <a href=\"http://linux.die.net/man/3/rand\" rel=\"nofollow noreferrer\">google</a>"}, {"owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438208233, "post_id": 31712096, "comment_id": 51362186, "body": "I did try google, but I did not find any helpful information."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1438208247, "post_id": 31712096, "comment_id": 51362191, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/398ax69y(v=vs.120).aspx\" rel=\"nofollow noreferrer\">rand</a>"}, {"owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438208351, "post_id": 31712096, "comment_id": 51362231, "body": "So how can I set the range?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438208393, "post_id": 31712096, "comment_id": 51362241, "body": "So, it gives you a pseudo-random number. If that&#39;s the answer you are looking for, learn how to use google. If not, rephrase your question."}, {"owner": {"reputation": 63230, "user_id": 4281779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a29d596b0af040d7def18d1801340a8b?s=128&d=identicon&r=PG", "display_name": "Zakaria Acharki", "link": "https://stackoverflow.com/users/4281779/zakaria-acharki"}, "edited": false, "score": 0, "creation_date": 1438208654, "post_id": 31712096, "comment_id": 51362343, "body": "Please do an effort before posting question here."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1438208689, "post_id": 31712096, "comment_id": 51362354, "body": "You can&#39;t set the range. The range is 0 to MAX_RAND."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1438208865, "post_id": 31712096, "comment_id": 51362422, "body": "Oops, RAND_MAX. It&#39;s a constant defined in &lt;stdlib.h&gt;. The actual value is not specified by the C specification."}, {"owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438208950, "post_id": 31712096, "comment_id": 51362458, "body": "how can I find the actual value then?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438210893, "post_id": 31712096, "comment_id": 51363078, "body": "I have the strong feeling you should instantly consult a C book."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438208672, "post_id": 31712170, "comment_id": 51362348, "body": "Wow thanks for being the only person who gave me a respectful answer.  That wiki article, however, does not give me any help.  The library is stdlib.h, on windows."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438208771, "post_id": 31712170, "comment_id": 51362384, "body": "Then the line in the wiki article for Visual / Quick C / C++ is used. The internal seed is a 32 bit number, but as shown, bits 30 through 16 of the seed are returned, which is a 15 bit value. The seed is initialized to 1."}, {"owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438208882, "post_id": 31712170, "comment_id": 51362430, "body": "um...sorry im really new to this, what is a seed?  and what does this tell me about RAND_MAX?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438209429, "post_id": 31712170, "comment_id": 51362628, "body": "It&#39;s a <i>pseudo random number generator</i> that means it&#39;s not really random. Starting from the same seed, the sequence returned will be the same. That&#39;s why you typically use the current time as a seed (or a fixed value for debugging, <b>iff</b> you always want the same &quot;random&quot; numbers)"}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1438210335, "last_edit_date": 1438210335, "creation_date": 1438208436, "answer_id": 31712170, "question_id": 31712096, "link": "https://stackoverflow.com/questions/31712096/what-does-rand-do-in-c/31712170#31712170", "title": "What does rand() do in C?", "body": "<p>Depends on the compiler. This wiki article contains a list of them: <a href=\"http://en.wikipedia.org/wiki/Linear_congruential_generator\" rel=\"nofollow\">linear congruential generator</a></p>\n\n<p>If you need to extend the range of rand(), call it multiple times and merge the outputs:</p>\n\n<pre><code>unsigned int r;\n    /* ... */\n    r  = ((rand()&gt;&gt;4) &amp; 0xff)&lt;&lt; 0;\n    r += ((rand()&gt;&gt;4) &amp; 0xff)&lt;&lt; 8;\n    r += ((rand()&gt;&gt;4) &amp; 0xff)&lt;&lt;16;\n    r += ((rand()&gt;&gt;4) &amp; 0xff)&lt;&lt;24;\n</code></pre>\n\n<p>Example program to show how rand works by comparing the returned value. This works with Microsoft compiles (no mismatch).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, const char* argv[])\n{\nunsigned int seed = 1;\nunsigned int rand1, rand2;\nunsigned int i;\n\n    for(i = 0; i &lt; 20; i++){\n        seed = seed*214013 + 2531011;\n        rand1 = (seed &gt;&gt; 16) &amp; 0x7fffu;\n        rand2 = rand();\n        if(rand1 != rand2)\n            printf(\"mismatch %d %d\\n\", rand1, rand2);\n    }\n    return(0);\n}\n</code></pre>\n\n<p>Since only 15 bits of the seed are returned by this version of rand(), then RAND_MAX would be 32767 or hex 0x7fff. As noted in the wiki article, the period is 2^32, this means that seed will cycle through all 4,294,967,296 possible 32 bit values, never repeating until the 4,294,967,296 call to rand(), where seed will have cycled back to 1.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438208800, "post_id": 31712229, "comment_id": 51362402, "body": "Sorry, I&#39;m very new to c.  So what does [0..RAND_MAX] do?  and how do i find out RAND_MAX from that?  Thanks so much"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438209038, "post_id": 31712229, "comment_id": 51362493, "body": "<code>RAND_MAX</code> is a constant (defined by your implementation of C) declared in <code>stdlib.h</code>. that means it can be different for every compiler, but it is typically a large value. In general, just use modulo to transform the range to what you need."}, {"owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "edited": false, "score": 0, "creation_date": 1438209117, "post_id": 31712229, "comment_id": 51362523, "body": "Oh...I get it now!  Thanks so much!"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1438209381, "post_id": 31712229, "comment_id": 51362617, "body": "Note: If you need <i>high-quality</i> random numbers, you need to look elsewhere (probably /dev/urandom on Linux)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1438209571, "post_id": 31712229, "comment_id": 51362678, "body": "@immibis indeed. <code>rand()</code> is not for cryptography, but it&#39;s ok for games :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 0, "last_activity_date": 1438209231, "last_edit_date": 1438209231, "creation_date": 1438208714, "answer_id": 31712229, "question_id": 31712096, "link": "https://stackoverflow.com/questions/31712096/what-does-rand-do-in-c/31712229#31712229", "title": "What does rand() do in C?", "body": "<p>Now that there's an actual question: You can't. The range is fixed, and it's defined by the constant <code>RAND_MAX</code> if you need to know it (it's <code>[0 .. RAND_MAX]</code>)</p>\n\n<p>If you want a different range, you have to arrange that yourself, typically using the <em>modulo</em> operator <code>%</code> and optionally an offset ... for random numbers between <code>5</code> and <code>9</code> use</p>\n\n<pre><code>int foo = rand() % 5 + 5;\n</code></pre>\n\n<p>I use a helper function like this in the game i recently wrote:</p>\n\n<pre><code>int\nrandomNum(int min, int max)\n{\n    static int seeded = 0;\n    if (!seeded)\n    {\n        seeded = 1;\n        srand((unsigned int)time(0));\n    }\n    return (rand() % (max-min+1)) + min;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5171149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLpY6.jpg?s=128&g=1", "display_name": "DanDan01010", "link": "https://stackoverflow.com/users/5171149/dandan01010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 1, "closed_date": 1438227408, "accepted_answer_id": 31712229, "answer_count": 2, "score": -4, "last_activity_date": 1438210335, "creation_date": 1438208048, "last_edit_date": 1438208343, "question_id": 31712096, "link": "https://stackoverflow.com/questions/31712096/what-does-rand-do-in-c", "closed_reason": "Needs more focus", "title": "What does rand() do in C?", "body": "<p>What does rand() do in C?  I don't use C++, just C.\nVisual Studio 2012 tells me that its return type is int    __cdecl\nAnd it is part of stdlib.h\nIt does not take any parameters.\nHow can I set the range in which it generates (pseudo)random numbers?\nYour answers are greatly appreciated</p>\n"}, {"tags": ["python", "c", "int", "type-conversion", "wiringpi"], "comments": [{"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438208786, "post_id": 31711978, "comment_id": 51362393, "body": "you mean something like <code>wiringpi.lcdCharDef(self.lcd_handle, 0, array.array(&#39;B&#39;,cap_umlaut_a))</code>? Sorry, that gives me the same error..."}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438208790, "post_id": 31711978, "comment_id": 51362395, "body": "Have you tried using chr() or byte() instead of int()?  Also, you will need to join them together into a string (python 2) or byte string (python 3) and then decode() them into the Unicode you want.  But why not just use the Unicode \\Uxxxxx definition?"}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209244, "post_id": 31711978, "comment_id": 51362560, "body": "@PatrickMaupin I think the Unicode would not work, as I have to define the pixels of the new character myself (the Hitachi HD44780U LCDs are not very smart - they don&#39;t know capital umlauts themselves). Or did I get you wrong? However, <code>chr()</code> did not work and <code>byte()</code> is not a built-in type in python"}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209317, "post_id": 31711978, "comment_id": 51362593, "body": "chr() doesn&#39;t take a string, but it would take your actual number..."}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438209631, "post_id": 31711978, "comment_id": 51362693, "body": "Maybe it takes a bytestring. can you try <code>wiringpi.lcdCharDef(self.lcd_handle, 0, struct.pack(&#39;8B&#39;, *cap_umlaut_a))</code>"}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209660, "post_id": 31711978, "comment_id": 51362705, "body": "Thank you, @PatrickMaupin! I tried <code>chr(int(&#39;0b01010&#39;, 2))</code> (also with the other <code>ints</code>. However, I got the same error message :("}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438209854, "post_id": 31711978, "comment_id": 51362761, "body": "Thank you @WorldSEnder. Same error, regretfully... In a different part of the program I use <code>ord(char)</code> - for only one character. Does this maybe help?"}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209913, "post_id": 31711978, "comment_id": 51362779, "body": "Did you join() them into a string?  <code>&quot;&quot;.join(cap_umlaut_a)</code>"}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210126, "post_id": 31711978, "comment_id": 51362849, "body": "@PatrickMaupin yes. this gives a different error: TypeError: sequence item 0: expected str instance, int found"}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210201, "post_id": 31711978, "comment_id": 51362877, "body": "Is it Python 2 or 3?"}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210308, "post_id": 31711978, "comment_id": 51362910, "body": "@PatrickMaupin Python 3 - sorry I didn&#39;t mention that earlier..."}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438210603, "post_id": 31711978, "comment_id": 51362991, "body": "according to <a href=\"http://www.gossamer-threads.com/lists/python/dev/644529\" rel=\"nofollow noreferrer\">the source</a> and <a href=\"http://www.gossamer-threads.com/lists/python/dev/644529\" rel=\"nofollow noreferrer\">this</a> it should work with a byte-string."}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210710, "post_id": 31711978, "comment_id": 51363022, "body": "I think that error occurs when you do the conversion -- you have to join() chr().  In other words, if you define a list of integers like you did above, you should then be able to do <code>cap_umlaut_a = &#39;&#39;.join(chr(x) for x in cap_umlaut_a)</code> as a separate step.  See if that works."}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210930, "post_id": 31711978, "comment_id": 51363089, "body": "My mistake previously -- it&#39;s bytes, not byte.  Try getting your list of bytes like you do above ([int(),...]) and then try this <code>cap_umlaut_a = b&#39;&#39;.join(bytes(x) for x in cap_umlaut_a)</code>"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438211029, "post_id": 31711978, "comment_id": 51363111, "body": "Oops, the source is here: <a href=\"https://github.com/Gadgetoid/WiringPi2-Python/blob/7e1c18325ba7d56fe4a0a77a280e444c5e8a3c10/wiringpi_wrap.c#L5393\" rel=\"nofollow noreferrer\">github.com/Gadgetoid/WiringPi2-Python/blob/&hellip;</a>"}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438211651, "post_id": 31711978, "comment_id": 51363271, "body": "so you both think I need a byte string... hmmm I tried what you suggested, @PatrickMaupin. <code>print(cap_umlaut_a)</code> now gives b&#39;\\x00\\x00\\x00...\\x00\\x00\\x0&#39; however, I still get the same TypeError... :("}], "answers": [{"comments": [{"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438213370, "post_id": 31712747, "comment_id": 51363690, "body": "Thank you for the answer. I really appreciate that! I just tried it. <code>wiringpi.lcdCharDef(self.lcd_handle, 0, b&#39;\\x0A\\x04\\x0A\\x11\\x1F\\x11\\x11\\x0&#39;)</code> gives an error &quot;ValueError: invalid \\x escape&quot; and <code>wiringpi.lcdCharDef(lcd_handle, 0, struct.pack(&#39;8B&#39;, *cap_umlaut_a))</code> gives &quot;struct.error: pack requires exactly 8 arguments&quot;"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "reply_to_user": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 1, "creation_date": 1438213532, "post_id": 31712747, "comment_id": 51363722, "body": "I fixed the first error, but I <i>can&#39;t</i> reproduce the second one (with the definitions from your question)"}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438213837, "post_id": 31712747, "comment_id": 51363792, "body": "hm. thanks for fixing the first one - I&#39;ve seen it myself now :) now I also get the TypeError here... Maybe there is something else wrong in my code. I will try to make a running minimal example tomorrow and either post it or accept your answer, if I can locate the mistake."}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438214301, "post_id": 31712747, "comment_id": 51363912, "body": "... well, who needs sleep anyway. I just created the minimal example. Still get the same error. You can find it here: <a href=\"https://gist.github.com/anonymous/0fd82d376cd22763faf1\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/0fd82d376cd22763faf1</a>"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "reply_to_user": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438215892, "post_id": 31712747, "comment_id": 51364311, "body": "@speendo, can you try with a normal string instead of a byte string? :&lt;"}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438237286, "post_id": 31712747, "comment_id": 51370244, "body": "I just tried <code>wiringpi.lcdCharDef(lcd_handle, 0, &#39;AAAAAAAA&#39;)</code>. Same result. I think I&#39;ll ask the maintainer on github..."}, {"owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438248471, "post_id": 31712747, "comment_id": 51376666, "body": "I opened an issue on github: <a href=\"https://github.com/WiringPi/WiringPi2-Python/issues/20\" rel=\"nofollow noreferrer\">github.com/WiringPi/WiringPi2-Python/issues/20</a>"}], "tags": [], "owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "is_accepted": false, "score": 1, "last_activity_date": 1438213439, "last_edit_date": 1438213439, "creation_date": 1438211832, "answer_id": 31712747, "question_id": 31711978, "link": "https://stackoverflow.com/questions/31711978/unsigned-char-array-from-int-array-in-python/31712747#31712747", "title": "unsigned char array from int array in python", "body": "<p>I did a bit of research and found the source of the relevant python binding <a href=\"https://github.com/Gadgetoid/WiringPi2-Python/blob/7e1c18325ba7d56fe4a0a77a280e444c5e8a3c10/wiringpi_wrap.c#L5393\" rel=\"nofollow\">at this github repo</a>.</p>\n\n<p>The line in question is</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>res3 = SWIG_ConvertPtr(obj2, &amp;argp3,SWIGTYPE_p_unsigned_char, 0 | 0 );\n</code></pre>\n\n<p>as you can see, you have to pass in the python equivalent of a pointer to unsigned char.  According to <a href=\"http://www.gossamer-threads.com/lists/python/dev/644529\" rel=\"nofollow\">this thread</a>, the equivalent is a byte-string. This means that the correct call would be</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import struct\nwiringpi.lcdCharDef(lcd_handle, 0, struct.pack('8B', *cap_umlaut_a))\n</code></pre>\n\n<p>which should be equivalent to</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>wiringpi.lcdCharDef(lcd_handle, 0, b'\\x0A\\x04\\x0A\\x11\\x1F\\x11\\x11\\x00')\n</code></pre>\n"}], "owner": {"reputation": 11403, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1804, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1438248451, "creation_date": 1438207377, "last_edit_date": 1438248451, "question_id": 31711978, "link": "https://stackoverflow.com/questions/31711978/unsigned-char-array-from-int-array-in-python", "title": "unsigned char array from int array in python", "body": "<p>I try to define a new character (a capital german umlaut \"\u00c4\") on my 2004 lcd on a raspberry pi using <a href=\"http://wiringpi.com/dev-lib/lcd-library/\" rel=\"nofollow\">wiringPi's <code>lcdCharDef()</code></a></p>\n\n<p>This is my code</p>\n\n<pre><code>import wiringpi2 as wiringpi\n\n# \u00c4\ncap_umlaut_a = [\n    int('0b01010', 2),\n    int('0b00100', 2),\n    int('0b01010', 2),\n    int('0b10001', 2),\n    int('0b11111', 2),\n    int('0b10001', 2),\n    int('0b10001', 2),\n    int('0b00000', 2)\n]\n\nprint(cap_umlaut_a) # [10, 4, 10, 17, 31, 17, 17, 0]\n\nwiringpi.lcdCharDef(lcd_handle, 0, cap_umlaut_a)\n</code></pre>\n\n<p>When I run this code I get the following error:</p>\n\n<blockquote>\n  <p>TypeError: in method 'lcdCharDef', argument 3 of type 'unsigned char [8]'</p>\n</blockquote>\n\n<p>I expected these <code>ints</code> to be the same as <code>unsigned chars</code></p>\n\n<p><strong>[edit]</strong><br>\nIn a different part of the code I use <code>ord(char)</code> to convert only one character to an unsigned int. Can this lead to the correct anser?</p>\n\n<p>How can I cast/convert the array to a type that can be accepted?</p>\n\n<p>P.S. (Note that (as far as I understand it) the python wiringPi library simply wraps the C functions of wiringPi)</p>\n\n<p><strong>[edit]</strong><br>\nI opened an issue on github: <a href=\"https://github.com/WiringPi/WiringPi2-Python/issues/20\" rel=\"nofollow\">https://github.com/WiringPi/WiringPi2-Python/issues/20</a></p>\n"}, {"tags": ["c", "python-2.7"], "comments": [{"owner": {"reputation": 414, "user_id": 4880090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9731995440b63d4cbf69257df481c87?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kolokowsky", "link": "https://stackoverflow.com/users/4880090/steve-kolokowsky"}, "edited": false, "score": 0, "creation_date": 1438207775, "post_id": 31711852, "comment_id": 51362003, "body": "Look at the file using a tool like hexdump.  That way you can both agree on which side has the problem."}, {"owner": {"reputation": 105, "user_id": 5171047, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dadc15dfbad979e319af783c75d20901?s=128&d=identicon&r=PG&f=1", "display_name": "firefly2517", "link": "https://stackoverflow.com/users/5171047/firefly2517"}, "reply_to_user": {"reputation": 414, "user_id": 4880090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9731995440b63d4cbf69257df481c87?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kolokowsky", "link": "https://stackoverflow.com/users/4880090/steve-kolokowsky"}, "edited": false, "score": 0, "creation_date": 1438207956, "post_id": 31711852, "comment_id": 51362075, "body": "thanks Steve, I am looking into that ..."}, {"owner": {"reputation": 1018, "user_id": 1312320, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebf28b20dae6510720e69b1310422fd2?s=128&d=identicon&r=PG", "display_name": "sardok", "link": "https://stackoverflow.com/users/1312320/sardok"}, "edited": false, "score": 0, "creation_date": 1438208288, "post_id": 31711852, "comment_id": 51362201, "body": "I believe <code>struct.unpack</code> is your friend, in this case."}], "owner": {"reputation": 105, "user_id": 5171047, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dadc15dfbad979e319af783c75d20901?s=128&d=identicon&r=PG&f=1", "display_name": "firefly2517", "link": "https://stackoverflow.com/users/5171047/firefly2517"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438207858, "creation_date": 1438206808, "last_edit_date": 1438207858, "question_id": 31711852, "link": "https://stackoverflow.com/questions/31711852/reading-binary-file-constructed-with-c-in-python-2-7-is-causing-problems", "title": "Reading binary-file constructed with C in Python 2.7 is causing problems", "body": "<p>could you please help me with a file-reading problem?</p>\n\n<p>I have the following file structure information of a binary file constructed with C.</p>\n\n<pre><code>import numpy as np \n\n\n\n8 Bytes uint64_t name1\nfor (name1) {\n    8 bytes uint64_t name2\n    8 bytes unint64_t name3\n    for name2 {\n        8 bytes uint64_t name4     \n        4 bytes int32_t name5             #this are the bytes not correctly interpreted by my routine\n        52 x 4 bytes float name6\n        4 bytes float name7\n    }\n}\n</code></pre>\n\n<p>I wrote in Python the following routine to read that:</p>\n\n<pre><code>      start_byte = 8    #start after 8 bytes\n      blocksize  = 224  #sum up all bytes of the data block 'dt'\n\n\n      dt = np.dtype([\n                    ('name4', np.uint64),\n                    ('name5', np.int32),\n                    ('name6_7', np.float32, (53,)),\n                    ])\n\n        openfile = open(mypath,'rb')\n\n        name1 = np.fromstring(openfile.read(8), dtype = np.uint64)\n\n        i=0\n        while i&lt;name1:\n\n            #first value: read name2 8 bytes\n            openfile.seek(start_byte)\n            name2 = np.fromstring(openfile.read(8), dtype = np.uint64)       \n\n            #goto next value: read name3 8 bytes \n            start_byte=start_byte + 8            \n            openfile.seek(start_byte)\n            name3 = np.fromstring(openfile.read(8), dtype = np.uint64)\n\n            #goto data-block: read 224 bytes at once times name2 (count)         \n            start_byte=start_byte + 8\n            openfile.seek(start_byte)\n\n            #here I used my structure with the proper data formats\n            data_block = np.fromfile(openfile, dtype=dt, count=name2)\n            data_block_array.extend(data_block)\n\n            #do all that again for the next block of value name2  \n            count = count + name2     \n            start_byte= start_byte + name2*block_size\n\n            i+=1\n</code></pre>\n\n<p>OK, everything seems fine at the beginning, but I discovered that <strong>\"name5\"</strong> the int32_t are causes trouble. I could see the problem there, since the output for \"name5\" should be <strong>0 or 1</strong>. And I <strong>get some values between 0.3 to 13000</strong> whatsoever. I seems also that only this column of the data file causes trouble and the author of the C routine <strong>changed the \"name5\" data format from int8_t to int32_t</strong>!</p>\n\n<p>QUESTIONS:</p>\n\n<ul>\n<li><p>Do I not properly address the data format? In that case what to use\nfor Python for: C uint64_t, int32_t, float etc?</p></li>\n<li><p>Where is the error and how can I find out if the binary format is<br>\ncorrectly read?</p></li>\n<li><p>Has this problem something do to with going from C to Python. Is this\nproblem caused by the C-routing converting ASCII into binary file, or\nis it rather on my end of the programme not using Python correctly? (More direct: which fault is it ;-) ... )</p></li>\n</ul>\n\n<p>I really appreciate your help and looking forward your answer!</p>\n\n<p>Thanks</p>\n\n<p><em>fly</em></p>\n"}, {"tags": ["c", "linux", "bash", "assembly"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438206168, "post_id": 31711619, "comment_id": 51361296, "body": "what is <code>code = &quot;code goes here&quot;</code>??"}, {"owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438206181, "post_id": 31711619, "comment_id": 51361301, "body": "that&#39;s the string of assembly.     <code>code = &quot;\\x43\\x77\\x33\\x89\\x11\\x95...&quot;</code>  Edited for clarity."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1438206907, "post_id": 31711619, "comment_id": 51361628, "body": "Read about compiler, object file formats (ELF for gcc), relocation, etc. , memory protection (hint: NX bit), etc. That will take some time, depending on your current knowledge and learning speed."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1438207111, "last_edit_date": 1438207111, "creation_date": 1438206782, "answer_id": 31711850, "question_id": 31711619, "link": "https://stackoverflow.com/questions/31711619/how-do-you-convert-c-code-into-assemblys-hex-representation/31711850#31711850", "title": "How do you convert c code into assembly&#39;s hex representation?", "body": "<p>This won't work. The main reason is: What your compiler creates for you is not just plain <em>binary code</em> but a well-defined file-format for a runnable program (on windows a <a href=\"https://de.wikipedia.org/wiki/Portable_Executable\" rel=\"nofollow\">PE</a> file, on linux an <a href=\"https://de.wikipedia.org/wiki/Executable_and_Linking_Format\" rel=\"nofollow\">ELF</a> file) This file is read by the <em>dynamic linker</em> of your operating system and preprocessed (e.g. linked to <em>dynamic shared objects</em>, read libraries) before it is executed by jumping to the <em>entry point</em> that is somehow given in the headers of the file. There's <strong>no way</strong> such a file could be executed by just jumping to the first byte in the file. In fact, it's the linker that creates the output format, but it's invoked by the compiler automatically.</p>\n\n<p>If you JUST want the assembler code, use <code>gcc -S</code> ... you will get mnemonics that could be fed to a standalone assembler.</p>\n\n<p>There are ways to trick the linker to emit a <em>plain</em> binary of your code (See here an <a href=\"http://nullprogram.com/blog/2014/12/09/\" rel=\"nofollow\">interesting read</a> about how to use that to generate an MS-DOS <code>.COM</code> file), but you still have the problem that your program typically doesn't consist of only the <em>text</em> (read, the binary code executed) but you also have data, typically in <em>.data</em> segment (for readonly) and <em>.bss</em> segment (for readwrite).</p>\n\n<p>Adding to that, placing the binary in a <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> string will normally put it in the <em>.data</em> segment. Although this <em>could</em> be executable, it doesn't have to, and from a security point of view, it <em>shouldn't</em> -- see <a href=\"https://en.wikipedia.org/wiki/Data_Execution_Prevention\" rel=\"nofollow\">Data Execution Prevention</a>.</p>\n\n<p>All in all, just forget about that...</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 5030000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfb1d019283d360b169b9df998cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "TeasingDart", "link": "https://stackoverflow.com/users/5030000/teasingdart"}, "is_accepted": true, "score": 4, "last_activity_date": 1438206870, "creation_date": 1438206870, "answer_id": 31711870, "question_id": 31711619, "link": "https://stackoverflow.com/questions/31711619/how-do-you-convert-c-code-into-assemblys-hex-representation/31711870#31711870", "title": "How do you convert c code into assembly&#39;s hex representation?", "body": "<p>You are missing a <em>whole bunch of stuff</em> that the OS does for you between the time the binary code is loaded from disk and it is executed. The function call \"system(char *command)\" for example: The pointer to the command characters is invalid until the OS loader \"fixes\" the pointers.</p>\n\n<p>If you are very, very careful you can construct code that does not rely on pointers and can run from any arbitrary address without help from the OS loader. This is how stack overflow exploits are created. Most modern CPUs prevent this code from running by using the memory manager to mark memory as either \"DATA\" or \"CODE\" and faulting if your program tries to execute DATA or write to CODE.</p>\n\n<p>What you are trying to do, the OS is trying to prevent.</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 5030000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2dfb1d019283d360b169b9df998cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "TeasingDart", "link": "https://stackoverflow.com/users/5030000/teasingdart"}, "is_accepted": false, "score": 0, "last_activity_date": 1438208164, "creation_date": 1438208164, "answer_id": 31712118, "question_id": 31711619, "link": "https://stackoverflow.com/questions/31711619/how-do-you-convert-c-code-into-assemblys-hex-representation/31712118#31712118", "title": "How do you convert c code into assembly&#39;s hex representation?", "body": "<p>I'm not sure what you are trying to achieve, but if I put my black hat on for a minute...</p>\n\n<p>If you are trying to write a stack overflow exploit, you need to learn about the memory manager and the gory details of the target CPU. You will be dealing strictly with the CPU and circumventing the OS entirely.</p>\n\n<p>If you are trying to write a trojan horse, you should compile your payload as a dynamic library (.so) and put the hex for the <em>entire payload.so file</em> into code[]. Then, in the carrier program, map code[] to a virtual file (or just write it to disk) and call loadlibrary() on the (virtual) file. You still won't be root, but your payload will be buried inside the first executable. You can bit-twiddle the code[] bytes to obfuscate the payload. You will also need to figure out how to set the executable flag on the newly created file.</p>\n\n<p>For either of these, you will be working against the CPU and/or OS.</p>\n"}], "owner": {"reputation": 303, "user_id": 522091, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/405b495e14f67e26cd3f6569e942b41b?s=128&d=identicon&r=PG", "display_name": "Smipims", "link": "https://stackoverflow.com/users/522091/smipims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1424, "favorite_count": 1, "accepted_answer_id": 31711870, "answer_count": 3, "score": 2, "last_activity_date": 1438208164, "creation_date": 1438205864, "last_edit_date": 1438207392, "question_id": 31711619, "link": "https://stackoverflow.com/questions/31711619/how-do-you-convert-c-code-into-assemblys-hex-representation", "title": "How do you convert c code into assembly&#39;s hex representation?", "body": "<p><strong>Edit: It appears I have a lot more reading to do...</strong></p>\n\n<p><strong>Also, for those telling me this is a bad idea, it's for a buffer overflow exercise.</strong></p>\n\n<p>I have a fairly simple C program:</p>\n\n<pre><code>int main() {\n  system(\"cat file | nc -p 33 localhost 8080\");\n  return 0;\n}\n</code></pre>\n\n<p>I want to turn it into hex assembly code. Think something like:</p>\n\n<pre><code>\\x55\\x43\\xff\\x75\\x13\\x77...\n</code></pre>\n\n<p>I tried doing:</p>\n\n<pre><code>gcc -o shell shell.c\nfor i in $(objdump -d shell -M intel |grep \"^ \" |cut -f2); do echo -n '\\x'$i; done;echo\n</code></pre>\n\n<p>And that gave me a nice long string of hex. But when I tested it in this program, I got a segfault.</p>\n\n<pre><code>code = \"\\x55\\x43\\xff\\x75\\x13\\x77...\"\nint main(int argc, char **argv)\n{\n  int (*func)();\n  func = (int (*)()) code;\n  (int)(*func)();\n}\n</code></pre>\n\n<p>Anyone know how I can get this working? Thanks! Also, I don't know if it matters but it's a 64 bit system.</p>\n"}, {"tags": ["c", "performance", "haskell", "ffi"], "comments": [{"owner": {"reputation": 22266, "user_id": 649287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0ea0055b84020bf860c05f53ba53d5?s=128&d=identicon&r=PG", "display_name": "augustss", "link": "https://stackoverflow.com/users/649287/augustss"}, "edited": false, "score": 2, "creation_date": 1438208515, "post_id": 31711599, "comment_id": 51362286, "body": "There&#39;s quite a bit of work needed to make sure you can allocate memory etc. in the Haskell function."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 6, "creation_date": 1438212066, "post_id": 31711599, "comment_id": 51363376, "body": "Disassembling the <code>test</code> symbol produced by the Haskell code could be both educational and a great blog post."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 0, "creation_date": 1438244455, "post_id": 31711599, "comment_id": 51374184, "body": "Out of perverse curiosity... does compiling with <code>-threaded</code> make any difference either way?"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 0, "creation_date": 1438249783, "post_id": 31711599, "comment_id": 51377646, "body": "@MathematicalOrchid: Nope. Maybe in the linked RTS variant, but not in the object code."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1438251204, "post_id": 31711599, "comment_id": 51378522, "body": "@Zeta I was just wondering if it affects the timings. I know the two RTS ways differ in how they handle foreign calls... That said, I wouldn&#39;t be massively surprised if it makes no measurable difference."}], "answers": [{"comments": [{"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 0, "creation_date": 1438251497, "post_id": 31720445, "comment_id": 51378692, "body": "So, in summary, it&#39;s GHC&#39;s green thread scheduling that&#39;s taking up the time. (?)"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 1, "creation_date": 1438254759, "post_id": 31720445, "comment_id": 51380751, "body": "Kind of. It wouldn&#39;t be that bad if the CPU (aka capability) or the thread would exist beforehand, but they don&#39;t. And <a href=\"https://github.com/ghc/ghc/blob/892c3e98bcef50aa56ec818f4d001aee36e05bbc/rts/Threads.c\" rel=\"nofollow noreferrer\"><code>createThread</code></a> isn&#39;t really meant to be called for each invocation. In a regular Haskell program, there aren&#39;t that many threads, so that&#39;s not a problem. It&#39;s still better than creating a OS thread for every call, though."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "edited": false, "score": 0, "creation_date": 1438273683, "post_id": 31720445, "comment_id": 51394156, "body": "Interesting enough, I think an asynchronous promise would mitigate this problem. The RTS can keep it&#39;s (main) capability and thread. However, this introduces other problems."}, {"owner": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 0, "creation_date": 1438276685, "post_id": 31720445, "comment_id": 51395911, "body": "From my source reading I think the capability is initialized just once, on the first call into Haskell (see <a href=\"https://github.com/ghc/ghc/blob/111ba4beda4ffc48381723da12e5b237d7f9ac59/rts/Task.c#L119\" rel=\"nofollow noreferrer\">allocTask</a>; <code>myTask()</code> returns a per-OS thread global). The Haskell thread and its stack does get recreated for each foreign call, though. Looks like one could avoid this overhead at the cost of more complicated C code by reusing a single thread, using the functions in RtsAPI.c."}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "reply_to_user": {"reputation": 14485, "user_id": 190376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd8280c5e1491b8cf55760750ed97dec?s=128&d=identicon&r=PG", "display_name": "Reid Barton", "link": "https://stackoverflow.com/users/190376/reid-barton"}, "edited": false, "score": 0, "creation_date": 1438278304, "post_id": 31720445, "comment_id": 51396864, "body": "@ReidBarton: If the non-threaded RTS is used, yes. The threaded RTS should even have a little bit more overhead, due to <a href=\"https://github.com/ghc/ghc/blob/111ba4beda4ffc48381723da12e5b237d7f9ac59/rts/Capability.c#L700-L760\" rel=\"nofollow noreferrer\"><code>waitForCapability</code></a> actually performing something. I still think that the culprit is mostly <code>rts_evalIO</code>, but there are probably some other thins one has to consider. Either way, I guess one has to patch GHC/the RTS in order to remove the overhead, but OP&#39;s scenario doesn&#39;t seem too likely to be honest."}], "tags": [], "owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "is_accepted": false, "score": 17, "last_activity_date": 1438249774, "creation_date": 1438249774, "answer_id": 31720445, "question_id": 31711599, "link": "https://stackoverflow.com/questions/31711599/why-is-there-overhead-calling-haskell-functions-from-c/31720445#31720445", "title": "Why is there overhead calling Haskell functions from C?", "body": "<p><strong>TL;DR</strong>: Reason: RTS and STG calls. Solution: don't call trivial Haskell functions from C.</p>\n\n<hr>\n\n<blockquote>\n  <p>What is the reason for this\u2026?</p>\n</blockquote>\n\n<p>Disclaimer: I've never called Haskell from C. I'm familiar with C and Haskell, but I rarely intertwine both, unless I'm writing a wrapper. Now that I've lost my credibility, let's start this adventure of benchmarking, disassembling and other nifty horrors.</p>\n\n<h1>Benchmarking with gprof</h1>\n\n<p>One easy way to check what's eating all of your resources is to use gprof. We'll change your compile line slightly so that <code>-pg</code> is used both by the compiler and the linker (note: I've renamed test.c to main.c and test2.c to test.c):</p>\n\n<pre><code>$ ghc -no-hs-main -O2 -optc-O3 -optc-pg -optl-pg -fforce-recomp \\\n    main.c Test.hs -o test\n$ ./test\n$ gprof ./test\n</code></pre>\n\n<p>This gives us the following (flat) profile:</p>\n\n<pre>Flat profile:\n\nEach sample counts as 0.01 seconds.\n  %   cumulative   self              self     total           \n time   seconds   seconds    calls  Ts/call  Ts/call  name    \n 16.85      2.15     2.15                             scheduleWaitThread\n 11.78      3.65     1.50                             createStrictIOThread\n  7.66      4.62     0.98                             createThread\n  6.68      5.47     0.85                             allocate\n  5.66      6.19     0.72                             traverseWeakPtrList\n  5.34      6.87     0.68                             isAlive\n  4.12      7.40     0.53                             newBoundTask\n  3.06      7.79     0.39                             stg_ap_p_fast\n  2.36      8.09     0.30                             stg_ap_v_info\n  1.96      8.34     0.25                             stg_ap_0_fast\n  1.85      8.57     0.24                             rts_checkSchedStatus\n  1.81      8.80     0.23                             stg_PAP_apply\n  1.73      9.02     0.22                             rts_apply\n  1.73      9.24     0.22                             stg_enter_info\n  1.65      9.45     0.21                             stg_stop_thread_info\n  1.61      9.66     0.21                             test\n  1.49      9.85     0.19                             stg_returnToStackTop\n  1.49     10.04     0.19                             move_STACK\n  1.49     10.23     0.19                             stg_ap_v_fast\n  1.41     10.41     0.18                             rts_lock\n  1.18     10.56     0.15                             boundTaskExiting\n  1.10     10.70     0.14                             StgRun\n  0.98     10.82     0.13                             rts_evalIO\n  0.94     10.94     0.12                             stg_upd_frame_info\n  0.79     11.04     0.10                             blockedThrowTo\n  0.67     11.13     0.09                             StgReturn\n  0.63     11.21     0.08                             createIOThread\n  0.63     11.29     0.08                             stg_bh_upd_frame_info\n  0.63     11.37     0.08                             c5KU_info\n  0.55     11.44     0.07                             stg_stk_save_n\n  0.51     11.50     0.07                             threadPaused\n  0.47     11.56     0.06                             dirty_TSO\n  0.47     11.62     0.06                             ghczmprim_GHCziCString_unpackCStringzh_info\n  0.47     11.68     0.06                             stopHeapProfTimer\n  0.39     11.73     0.05                             stg_threadFinished\n  0.39     11.78     0.05                             allocGroup\n  0.39     11.83     0.05                             base_GHCziTopHandler_runNonIO1_info\n  0.39     11.88     0.05                             stg_catchzh\n  0.35     11.93     0.05                             freeMyTask\n  0.35     11.97     0.05                             rts_eval_\n  0.31     12.01     0.04                             awakenBlockedExceptionQueue\n  0.31     12.05     0.04                             stg_ap_2_upd_info\n  0.27     12.09     0.04                             s5q4_info\n  0.24     12.12     0.03                             markStableTables\n  0.24     12.15     0.03                             rts_getSchedStatus\n  0.24     12.18     0.03                             s5q3_info\n  0.24     12.21     0.03                             scavenge_stack\n  0.24     12.24     0.03                             stg_ap_7_upd_info\n  0.24     12.27     0.03                             stg_ap_n_fast\n  0.24     12.30     0.03                             stg_gc_noregs\n  0.20     12.32     0.03                             base_GHCziTopHandler_runIO1_info\n  0.20     12.35     0.03                             stat_exit\n  0.16     12.37     0.02                             GarbageCollect\n  0.16     12.39     0.02                             dirty_STACK\n  0.16     12.41     0.02                             freeGcThreads\n  0.16     12.43     0.02                             rts_mkString\n  0.16     12.45     0.02                             scavenge_capability_mut_lists\n  0.16     12.47     0.02                             startProfTimer\n  0.16     12.49     0.02                             stg_PAP_info\n  0.16     12.51     0.02                             stg_ap_stk_p\n  0.16     12.53     0.02                             stg_catch_info\n  0.16     12.55     0.02                             stg_killMyself\n  0.16     12.57     0.02                             stg_marked_upd_frame_info\n  0.12     12.58     0.02                             interruptAllCapabilities\n  0.12     12.60     0.02                             scheduleThreadOn\n  0.12     12.61     0.02                             waitForReturnCapability\n  0.08     12.62     0.01                             exitStorage\n  0.08     12.63     0.01                             freeWSDeque\n  0.08     12.64     0.01                             gcStableTables\n  0.08     12.65     0.01                             resetTerminalSettings\n  0.08     12.66     0.01                             resizeNurseriesEach\n  0.08     12.67     0.01                             scavenge_loop\n  0.08     12.68     0.01                             split_free_block\n  0.08     12.69     0.01                             startHeapProfTimer\n  0.08     12.70     0.01                             stg_MVAR_TSO_QUEUE_info\n  0.08     12.71     0.01                             stg_forceIO_info\n  0.08     12.72     0.01                             zero_static_object_list\n  0.04     12.73     0.01                             frame_dummy\n  0.04     12.73     0.01                             rts_evalLazyIO_\n  0.00     12.73     0.00        1     0.00     0.00  stginit_export_Test_zdfstableZZC0ZZCmainZZCTestZZCtest\n</pre>\n\n<p>Woah, that's a bunch of functions getting called. How does this compare to your C version?</p>\n\n<pre><code>$ ghc -no-hs-main -O2 -optc-O3 -optc-pg -optl-pg -fforce-recomp \\\n    main.c TestDummy.hs test.c -o test_c\n$ ./test_c\n$ gprof ./test_c\n</code></pre>\n\n<pre>Flat profile:\n\nEach sample counts as 0.01 seconds.\n  %   cumulative   self              self     total           \n time   seconds   seconds    calls  Ts/call  Ts/call  name    \n 75.00      0.05     0.05                             test\n 25.00      0.06     0.02                             frame_dummy\n</pre>\n\n<p>That's a <strong><em>lot</em></strong> simpler. But why?</p>\n\n<h1>What's happening behind?</h1>\n\n<p>Maybe you've wondered why <code>test</code> even showed up in the previous profile. Well, gprof itself adds some overhead, as can be seen with <code>objdump</code>:</p>\n\n<pre><code>$ objdump -D ./test_c | grep -A5 \"&lt;test&gt;:\"\n</code></pre>\n\n<pre class=\"lang-plain prettyprint-override\"><code>0000000000405630 &lt;test&gt;:\n  405630:   55                      push   %rbp\n  405631:   48 89 e5                mov    %rsp,%rbp\n  405634:   e8 f7 d4 ff ff          callq  402b30 &lt;mcount@plt&gt;\n  405639:   5d                      pop    %rbp\n  40563a:   c3                      retq   \n</code></pre>\n\n<p>The call of <code>mcount</code> is added by gcc. So for the next part you want to remove the <code>-pg</code> options. Let's check the disassembled <code>test</code> routine in C first:</p>\n\n<pre><code>$ ghc -no-hs-main -O2 -optc-O3 -fforce-recomp \\ \n    main.c TestDummy.hs test.c -o test_c\n$ objdump -D ./test_c | grep -A2 \"&lt;test&gt;:\"\n</code></pre>\n\n<pre class=\"lang-plain prettyprint-override\"><code>0000000000405510 &lt;test&gt;:\n  405510:   f3 c3                   repz retq\n</code></pre>\n\n<p>The <code>repz retq</code> is actually <a href=\"http://repzret.org/p/repzret/\">some optimisation magic</a>, but in this case you can think of it as a (mostly) no-op return. </p>\n\n<p>How does this compare to the Haskell version?</p>\n\n<pre><code>$ ghc -no-hs-main -O2 -optc-O3 -fforce-recomp \\ \n    main.c Test.hs -o test_hs    \n$ objdump -D ./Test.o | grep -A18 \"&lt;test&gt;:\"\n</code></pre>\n\n<pre class=\"lang-plain prettyprint-override\"><code>0000000000405520 &lt;test&gt;:\n  405520:   48 83 ec 18             sub    $0x18,%rsp\n  405524:   e8 f7 3a 05 00          callq  459020 &lt;rts_lock&gt;\n  405529:   ba 58 24 6b 00          mov    $0x6b2458,%edx\n  40552e:   be 80 28 6b 00          mov    $0x6b2880,%esi\n  405533:   48 89 c7                mov    %rax,%rdi\n  405536:   48 89 04 24             mov    %rax,(%rsp)\n  40553a:   e8 51 36 05 00          callq  458b90 &lt;rts_apply&gt;\n  40553f:   48 8d 54 24 08          lea    0x8(%rsp),%rdx\n  405544:   48 89 c6                mov    %rax,%rsi\n  405547:   48 89 e7                mov    %rsp,%rdi\n  40554a:   e8 01 39 05 00          callq  458e50 &lt;rts_evalIO&gt;\n  40554f:   48 8b 34 24             mov    (%rsp),%rsi\n  405553:   bf 64 57 48 00          mov    $0x485764,%edi\n  405558:   e8 23 3a 05 00          callq  458f80 &lt;rts_checkSchedStatus&gt;\n  40555d:   48 8b 3c 24             mov    (%rsp),%rdi\n  405561:   e8 0a 3b 05 00          callq  459070 &lt;rts_unlock&gt;\n  405566:   48 83 c4 18             add    $0x18,%rsp\n  40556a:   c3                      retq   \n  40556b:   0f 1f 44 00 00          nopl   0x0(%rax,%rax,1)\n  405570:   d8 ce                   fmul   %st(6),%st\n</code></pre>\n\n<p>This looks rather different. Indeed, the <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Rts\">RTS</a> functions seem suspicious. Let's have a look at them:</p>\n\n<ul>\n<li><a href=\"https://github.com/ghc/ghc/blob/111ba4beda4ffc48381723da12e5b237d7f9ac59/rts/RtsAPI.c#L514-L542\"><code>rts_checkSchedStatus</code></a> just checks whether the status is fine, and exits otherwise. The <code>Success</code> path doesn't have much overhead, so this function isn't really the culprit.</li>\n<li><a href=\"https://github.com/ghc/ghc/blob/111ba4beda4ffc48381723da12e5b237d7f9ac59/rts/RtsAPI.c#L550-L616\"><code>rts_unlock</code> and <code>rts_lock</code></a> basically claim and release a <a href=\"https://ghc.haskell.org/trac/ghc/wiki/Commentary/Rts/Scheduler#Capabilities\">capability</a> (a virtual CPU). They call <code>newBoundTask</code> and <code>boundTaskExiting</code>, which take some time (see profile above).</li>\n<li><a href=\"https://github.com/ghc/ghc/blob/111ba4beda4ffc48381723da12e5b237d7f9ac59/rts/RtsAPI.c#L195-L208\"><code>rts_apply</code></a> calls <code>allocate</code>, one of the most often used functions throughout the program (which isn't really surprising, with Haskell being garbage collected).</li>\n<li><a href=\"https://github.com/ghc/ghc/blob/111ba4beda4ffc48381723da12e5b237d7f9ac59/rts/RtsAPI.c#L448-L460\"><code>rts_evalIO</code></a>  finally creates the actual thread and waits for its completion. So we can estimate that <code>rts_evalIO</code> alone takes about 27%.</li>\n</ul>\n\n<p>So we found all the functions that are taking all the time. The STG and the RTS take all the credit for the overhead of 150ns per call.</p>\n\n<blockquote>\n  <p>\u2026and is there a way to mitigate this slowdown?</p>\n</blockquote>\n\n<p>Well, your <code>test</code> is basically a no-op. You're calling it 100000000 times, with a total runtime of 15s. Compared to the C version, that's an overhead of ~149ns per call.</p>\n\n<p>The solution is quite simple: don't use Haskell functions in your C world for trivial tasks. Use the right tool for the right situation. After all, you don't use the GMP library if you need to add two numbers that are guaranteed to be less than 10.</p>\n\n<p>Apart from this paradigmatic solution: no. The assembly shown above is what's created by GHC, and it's not possible to create a variant without RTS calls at the moment.</p>\n"}], "owner": {"reputation": 506, "user_id": 3855418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629e64849675ac3b6fe97e3b36357854?s=128&d=identicon&r=PG", "display_name": "Evan Jenkins", "link": "https://stackoverflow.com/users/3855418/evan-jenkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 3, "answer_count": 1, "score": 17, "last_activity_date": 1438272517, "creation_date": 1438205781, "last_edit_date": 1592644375, "question_id": 31711599, "link": "https://stackoverflow.com/questions/31711599/why-is-there-overhead-calling-haskell-functions-from-c", "title": "Why is there overhead calling Haskell functions from C?", "body": "<p>I've noticed a significant overhead calling Haskell functions in C, much larger than the overhead of a native C function call. To distill the issue to its essence, I wrote a program that just initializes the Haskell runtime, runs a loop that calls an empty function 100,000,000 times, and returns.</p>\n<p>With the function inlined, the program takes 0.003s. Calling an empty function written in C takes 0.18s. Calling an empty function written in Haskell takes 15.5s. (Strangely, if I compile the empty Haskell file separately before linking, it takes a few more seconds. Sub-question: why is this?)</p>\n<p>So it looks like there's about a 100-fold slowdown between calling a C function and calling a Haskell function. What is the reason for this, and is there a way to mitigate this slowdown?</p>\n<h1>Code</h1>\n<blockquote>\n<p>EDIT: I've discovered a version of this test in the <a href=\"https://github.com/ghc/nofib\" rel=\"noreferrer\">NoFib benchmark suite</a>, <code>callback002</code>. There's a <a href=\"http://blog.ezyang.com/2013/01/the-ghc-scheduler/\" rel=\"noreferrer\">nice blog post</a> by Edward Z. Yang mentioning this test in the context of the GHC scheduler. I'm still trying to grok this blog post along with Zeta's very nice answer. I'm not yet convinced that there's not a way to do this faster!</p>\n</blockquote>\n<p>To compile the &quot;slow&quot; Haskell version, run</p>\n<p><code>ghc -no-hs-main -O2 -optc-O3 test.c Test.hs -o test</code></p>\n<p>To compile the &quot;fast&quot; C version, run</p>\n<p><code>ghc -no-hs-main -O2 -optc-O3 test.c test2.c TestDummy.hs -o test</code></p>\n<p>test.c:</p>\n<pre><code>#include &quot;HsFFI.h&quot;\nextern void __stginit_Test(void);\n\nextern void test();\n\nint main(int argc, char *argv[]) {\n  hs_init(&amp;argc, &amp;argv);\n  hs_add_root(__stginit_Test);\n  int i;\n  for (i = 0; i &lt; 100000000; i++) {\n    test();\n  }\n  hs_exit();\n  return 0;\n}\n</code></pre>\n<p>test2.c:</p>\n<pre><code>void test() {\n}\n</code></pre>\n<p>Test.hs:</p>\n<pre><code>{-# LANGUAGE ForeignFunctionInterface #-}\n\nmodule Test where\n\nforeign export ccall test :: ()\n\ntest :: ()\ntest = ()\n</code></pre>\n<p>TestDummy.hs:</p>\n<pre><code>module Test where\n</code></pre>\n"}, {"tags": ["c", "intellisense", "visual-studio-2015", "wdk"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438207578, "post_id": 31711493, "comment_id": 51361920, "body": "if you use C++ memory allocators then you do not need to cast..."}, {"owner": {"reputation": 1169, "user_id": 439857, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67f4180a5c93048869fcc08991128738?s=128&d=identicon&r=PG", "display_name": "Burak Tamt&#252;rk", "link": "https://stackoverflow.com/users/439857/burak-tamt%c3%bcrk"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438207970, "post_id": 31711493, "comment_id": 51362086, "body": "But I have other reasons not to write c++ in a such project (and how can i specify the type (e.g. paged, non-paged memory or user-mode, kernel-mode memory) via c++&#39;s allocator)"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1438280560, "post_id": 31711493, "comment_id": 51398094, "body": "It almost never makes sense to choose C over C++ since C++ can be written as a &quot;better C.&quot; There is no law that says you have to use OO constructs, or that you can&#39;t use <code>malloc</code>, the OS memory APIs, or anything else you choose. I&#39;ve got drivers written in C++ that you would have a hard time telling from C just by looking, but they enjoy the benefits that C++ brings to the table."}], "answers": [{"comments": [{"owner": {"reputation": 1169, "user_id": 439857, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67f4180a5c93048869fcc08991128738?s=128&d=identicon&r=PG", "display_name": "Burak Tamt&#252;rk", "link": "https://stackoverflow.com/users/439857/burak-tamt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1438638865, "post_id": 31795369, "comment_id": 51522453, "body": "Are there any workaround for this issue? / Do Microsoft know this bug?"}, {"owner": {"reputation": 520, "user_id": 493152, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/80dce6c20dc646adecaa9702b2cc41d2?s=128&d=identicon&r=PG", "display_name": "AlexPi", "link": "https://stackoverflow.com/users/493152/alexpi"}, "edited": false, "score": 3, "creation_date": 1438712078, "post_id": 31795369, "comment_id": 51558253, "body": "No workarounds for now, and here&#39;s the bug report: <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/1623363/error-command-line-error-exception-handling-option-can-be-used-only-when-compiling-c\" rel=\"nofollow noreferrer\">connect.microsoft.com/VisualStudio/feedback/details/1623363/&zwnj;&#8203;&hellip;</a>"}], "tags": [], "owner": {"reputation": 21, "user_id": 5186969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nWa2xuUP9hk/AAAAAAAAAAI/AAAAAAAAADE/TUJaZBaEhKw/photo.jpg?sz=128", "display_name": "John Ziobro", "link": "https://stackoverflow.com/users/5186969/john-ziobro"}, "is_accepted": false, "score": 2, "last_activity_date": 1438630501, "creation_date": 1438630501, "answer_id": 31795369, "question_id": 31711493, "link": "https://stackoverflow.com/questions/31711493/wdk-intellisense-and-c-command-line-error-exception-handling-option-can-be-u/31795369#31795369", "title": "WDK, intellisense and C: &quot;command-line error: exception handling option can be used only when compiling C++ driver&quot;", "body": "<p>C++ is usually not used in kernel mode drivers because it is not supported.  I use some C++ in my drivers but that is the exception.</p>\n\n<p>I see this same issue with VS 2015.  Just create a blank C file in your project and you will see the intellisense (~) at the first column of the first line.  This means intellisense is essentially broken for all C source files now.</p>\n"}, {"comments": [{"owner": {"reputation": 1169, "user_id": 439857, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67f4180a5c93048869fcc08991128738?s=128&d=identicon&r=PG", "display_name": "Burak Tamt&#252;rk", "link": "https://stackoverflow.com/users/439857/burak-tamt%c3%bcrk"}, "edited": false, "score": 1, "creation_date": 1445255792, "post_id": 33213718, "comment_id": 54231511, "body": "Then there would be no code completion... It isn&#39;t a workaround, it is just like saying &quot;don&#39;t use if it doesn&#39;t work&quot;"}, {"owner": {"reputation": 11, "user_id": 5462640, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Z0L2VozS6I/AAAAAAAAAAI/AAAAAAAAArg/4VR5PVU1CkU/photo.jpg?sz=128", "display_name": "drimtajm", "link": "https://stackoverflow.com/users/5462640/drimtajm"}, "reply_to_user": {"reputation": 1169, "user_id": 439857, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67f4180a5c93048869fcc08991128738?s=128&d=identicon&r=PG", "display_name": "Burak Tamt&#252;rk", "link": "https://stackoverflow.com/users/439857/burak-tamt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1445266596, "post_id": 33213718, "comment_id": 54239507, "body": "Well, if your code doesn&#39;t compile then you cannot use it at all."}, {"owner": {"reputation": 11, "user_id": 5462640, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Z0L2VozS6I/AAAAAAAAAAI/AAAAAAAAArg/4VR5PVU1CkU/photo.jpg?sz=128", "display_name": "drimtajm", "link": "https://stackoverflow.com/users/5462640/drimtajm"}, "reply_to_user": {"reputation": 1169, "user_id": 439857, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67f4180a5c93048869fcc08991128738?s=128&d=identicon&r=PG", "display_name": "Burak Tamt&#252;rk", "link": "https://stackoverflow.com/users/439857/burak-tamt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1445266939, "post_id": 33213718, "comment_id": 54239768, "body": "Sorry, I didn&#39;t know the build succeeds even if IntelliSense gives errors."}], "tags": [], "owner": {"reputation": 11, "user_id": 5462640, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2Z0L2VozS6I/AAAAAAAAAAI/AAAAAAAAArg/4VR5PVU1CkU/photo.jpg?sz=128", "display_name": "drimtajm", "link": "https://stackoverflow.com/users/5462640/drimtajm"}, "is_accepted": false, "score": 0, "last_activity_date": 1445255630, "creation_date": 1445255630, "answer_id": 33213718, "question_id": 31711493, "link": "https://stackoverflow.com/questions/31711493/wdk-intellisense-and-c-command-line-error-exception-handling-option-can-be-u/33213718#33213718", "title": "WDK, intellisense and C: &quot;command-line error: exception handling option can be used only when compiling C++ driver&quot;", "body": "<p>The obvious workaround is to disable IntelliSense.<br/>\nUnder the \"Tools\" menu, choose \"Options\".\nThen, click on \"Text Editor\", \"C/C++\", \"Advanced\". Inside the panel to the right, locate \"InelliSense\" and change the value for \"DisableIntelliSense\" to True.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 5497466, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206732894934972/picture?type=large", "display_name": "Radu Ciocas", "link": "https://stackoverflow.com/users/5497466/radu-ciocas"}, "is_accepted": false, "score": 0, "last_activity_date": 1446025866, "creation_date": 1446025866, "answer_id": 33387771, "question_id": 31711493, "link": "https://stackoverflow.com/questions/31711493/wdk-intellisense-and-c-command-line-error-exception-handling-option-can-be-u/33387771#33387771", "title": "WDK, intellisense and C: &quot;command-line error: exception handling option can be used only when compiling C++ driver&quot;", "body": "<p>Unfortunately this is a known Visual Studio 2015 issue with C code There will, hopefully, be a fix soon.\nMore details here: <a href=\"https://www.osr.com/blog/2015/08/12/windows-10-wdk-visual-studio-2015-issues/\" rel=\"nofollow\">https://www.osr.com/blog/2015/08/12/windows-10-wdk-visual-studio-2015-issues/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1169, "user_id": 439857, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67f4180a5c93048869fcc08991128738?s=128&d=identicon&r=PG", "display_name": "Burak Tamt&#252;rk", "link": "https://stackoverflow.com/users/439857/burak-tamt%c3%bcrk"}, "is_accepted": true, "score": 0, "last_activity_date": 1448918907, "creation_date": 1448918907, "answer_id": 34008320, "question_id": 31711493, "link": "https://stackoverflow.com/questions/31711493/wdk-intellisense-and-c-command-line-error-exception-handling-option-can-be-u/34008320#34008320", "title": "WDK, intellisense and C: &quot;command-line error: exception handling option can be used only when compiling C++ driver&quot;", "body": "<p>Visual Studio 2015 Update 1 recently released. The problem is now gone, everything works as usual.</p>\n"}], "owner": {"reputation": 1169, "user_id": 439857, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/67f4180a5c93048869fcc08991128738?s=128&d=identicon&r=PG", "display_name": "Burak Tamt&#252;rk", "link": "https://stackoverflow.com/users/439857/burak-tamt%c3%bcrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "accepted_answer_id": 34008320, "answer_count": 4, "score": 5, "last_activity_date": 1448918907, "creation_date": 1438205387, "question_id": 31711493, "link": "https://stackoverflow.com/questions/31711493/wdk-intellisense-and-c-command-line-error-exception-handling-option-can-be-u", "title": "WDK, intellisense and C: &quot;command-line error: exception handling option can be used only when compiling C++ driver&quot;", "body": "<p>I want to write a kernel driver using Visual Studio 2015, so I installed the Windows 10 SDK and WDK alongside with VS 2015. </p>\n\n<p>I created empty kernel driver project and main.c inside the project.</p>\n\n<p>However, intellisense does not work and error list shows:</p>\n\n<p><code>\"command-line error: exception handling option can be used only when compiling C++ driver\"</code></p>\n\n<p>I suppose VS wants me to code my project on c++ but I don't want to code on c++. I hate casting when allocating memory etc. Are there any workaround for this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "assembly", "vectorization", "sse"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1438206109, "post_id": 31711407, "comment_id": 51361269, "body": "It&#39;s the equivalent of the second example except that XMM8 isn&#39;t changed. Or would be if you used the same base register (R12 vs R11) in both examples."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 3, "creation_date": 1438206192, "post_id": 31711407, "comment_id": 51361306, "body": "Instructions are often broken up into one or more uops within the processor. <code>paddd (%r12,%rax), %xmm7</code> is a two uop instruction on most processors. One for the load, and one for the add."}], "answers": [{"comments": [{"owner": {"reputation": 77787, "user_id": 479989, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a8eeb68641395ea82ac1c8783306548e?s=128&d=identicon&r=PG", "display_name": "Ben Jackson", "link": "https://stackoverflow.com/users/479989/ben-jackson"}, "edited": false, "score": 1, "creation_date": 1438482565, "post_id": 31712708, "comment_id": 51467682, "body": "One quirk I have found with using SSE intrinsics with GCC is that it will not transpose the arguments of associative operations like <code>add</code> to move a potential memory operand into the slot where it can be folded into one instruction."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 6, "last_activity_date": 1438211593, "creation_date": 1438211593, "answer_id": 31712708, "question_id": 31711407, "link": "https://stackoverflow.com/questions/31711407/operands-for-paddd-instruction/31712708#31712708", "title": "Operands for PADDD instruction", "body": "<p>Most x86 instructions can be used with a memory source operand.  No extra register is needed.  Read-modify instructions are just as fast as the combination of a load and then the operation.  The advantage is that it takes fewer instruction bytes, and doesn't need an extra register.</p>\n\n<p>It can also execute more efficiently in some cases on Intel CPUs (uop micro-fusion).  So if you don't need the data at that memory address again soon, prefer folding loads into other instructions.</p>\n\n<p>See <a href=\"http://agner.org/optimize/\">http://agner.org/optimize/</a> for docs on CPU internals, and how to optimize your asm and C code.</p>\n"}], "owner": {"reputation": 889, "user_id": 678860, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51273ac86c97cc7cca19f3c114f50f7b?s=128&d=identicon&r=PG&f=1", "display_name": "warunapww", "link": "https://stackoverflow.com/users/678860/warunapww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "accepted_answer_id": 31712708, "answer_count": 1, "score": 1, "last_activity_date": 1438211593, "creation_date": 1438205022, "last_edit_date": 1438210874, "question_id": 31711407, "link": "https://stackoverflow.com/questions/31711407/operands-for-paddd-instruction", "title": "Operands for PADDD instruction", "body": "<p>I wrote a simple vector addition program using vector intrinsic operations in C. Here I load 2 vectors and add them, finally store result vector back to global memory.</p>\n\n<p>When I check the assembly code, it has the following sequence of instructions</p>\n\n<pre><code>movdqa  0(%rbp,%rax), %xmm7    \npaddd (%r12,%rax), %xmm7\nmovdqa  %xmm7, (%rbx,%rax)\n</code></pre>\n\n<p>As you can see, it only moves one operand of the <code>paddd</code> instruction to a register (xmm7). In the <code>paddd</code> instruction 1st operand refers to address in global memory instead of moving it a register first.</p>\n\n<p>Does this mean that when <code>paddd</code> get executed, it does a mov from global memory to register first and then add two operands which are in registers? Which is equivalent to the following code sequence</p>\n\n<pre><code>movdqa  0(%rbp,%rax), %xmm7\nmovdqa  0(%r12,%rax), %xmm8    \npaddd %xmm8, %xmm7\nmovdqa  %xmm7, (%rbx,%rax)\n</code></pre>\n\n<p>Let me know if you need more information like compilable program, so that you can generate assembly for yourself.</p>\n"}, {"tags": ["c", "struct", "standards"], "comments": [{"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1438204397, "post_id": 31711174, "comment_id": 51360502, "body": "Not at all. I&#39;m sure someone will find the standards, but padding is implementation dependent unless there are very specific flags in the code."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1438204418, "post_id": 31711174, "comment_id": 51360515, "body": "as mentioned, padding would be in the way and implementation dependent. Have you tried on your system? Computers are fun because nothing breaks when you try things out"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1438204466, "post_id": 31711174, "comment_id": 51360537, "body": "I think it may be required that <code>B</code> be a strict <b>prefix</b> of <code>A</code>, not just a subset."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 1, "creation_date": 1438204495, "post_id": 31711174, "comment_id": 51360551, "body": "@Pynchia That will just tell you if it works in a specific case, not if it generalizes."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 2, "creation_date": 1438204556, "post_id": 31711174, "comment_id": 51360584, "body": "@Jashaszun While padding is implementation-dependent, I think the implementation has to be consistent about it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438204818, "post_id": 31711174, "comment_id": 51360732, "body": "You can definitely do this if you replace the first fields of <code>A</code> with an actual instance of <code>B</code>. I&#39;m not sure about separate fields."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1438206861, "post_id": 31711698, "comment_id": 51361610, "body": "<code>(struct B)as = bs;</code> is illegal, there are no conversions of struct types"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1438207075, "post_id": 31711698, "comment_id": 51361703, "body": "Your code doesn&#39;t contain any <i>anonymous struct member</i>. They are a struct with no tag, however <code>B</code> is a struct tag."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438207082, "post_id": 31711698, "comment_id": 51361705, "body": "@MattMcNabb: Sorry, edited. Not sure about strict aliasing now, however. Iat least &#39;memcpy` should be safe."}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "edited": false, "score": 1, "creation_date": 1438207315, "post_id": 31711698, "comment_id": 51361803, "body": "Doesn&#39;t work, gcc complains:  <code>warning: declaration does not declare anything struct B;</code>, and then: <code>error: \u2018struct A\u2019 has no member named \u2018x\u2019</code>. Clang says something similar."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438207437, "post_id": 31711698, "comment_id": 51361861, "body": "in fact <code>struct B;</code> is illegal in ISO C  . It&#39;s a Microsoft extension. In gcc for windows it is enabled by default (presumably for compatibility with windows headers), to get conforming behaviour use <code>-fno-ms-extensions</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438207807, "post_id": 31711698, "comment_id": 51362018, "body": "@MattMcNabb: edited. should work now. Sorry, tough day."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438208176, "post_id": 31711698, "comment_id": 51362158, "body": "@MattMcNabb: did you compile with <code>fms-extensions</code>? I tried and it works."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438208226, "post_id": 31711698, "comment_id": 51362183, "body": "@Olaf, oh, I see now that you are suggesting to use extensions"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438208343, "post_id": 31711698, "comment_id": 51362226, "body": "@MattMcNabb: I could make the second sentence bold, if you think that makes would be helpful;-). I actually do not understand the commitee did not make that standard. Imo this would have been the a logical step; without this, anonymous structs are of not much use imo. But <b>with</b> it they are ver powerful."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1438207759, "last_edit_date": 1438207759, "creation_date": 1438206156, "answer_id": 31711698, "question_id": 31711174, "link": "https://stackoverflow.com/questions/31711174/struct-similarity-in-c/31711698#31711698", "title": "struct similarity in C", "body": "<p>How about using <code>struct B</code> as an <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.1p13\" rel=\"nofollow\"><em>anonymous struct</em></a> member of <code>struct A</code>. This requires, however, <code>-fms-extensions</code> for gcc (there should be a similar extension for VC as the name implies):</p>\n\n<pre><code>struct B {\n    double x[3];\n    double y[3];\n    int z[3];\n};\n\nstruct A {\n    struct B;\n\n    struct A *a;\n    int b;\n    struct A *c;\n    unsigned d[10];\n};\n</code></pre>\n\n<p>This allows to use the fields in <code>struct A</code> like:</p>\n\n<pre><code>struct A as;\n\nas.x[2] = as.y[0];\n</code></pre>\n\n<p>etc. This guarantees identical layout (the standard allows no padding at the beginning of a struct, so the inner struct is guarantee to start at the same address as the outer) and <code>struct A</code> being cast-compatible to <code>struct B</code>.</p>\n\n<p>Also:</p>\n\n<pre><code>struct A as;\nstruct B bs;\nmemcpy(&amp;as, &amp;bs, sizeof(bs));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438207925, "post_id": 31712063, "comment_id": 51362065, "body": "It would be the same if <code>struct B</code> is just the first field of <code>struct B</code>. Both way, you would need another field name and for this it <i>is</i> guaranteed (and not just common practice)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438207952, "post_id": 31712063, "comment_id": 51362073, "body": "@Olaf I don&#39;t know what you are trying to say"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438208122, "post_id": 31712063, "comment_id": 51362143, "body": "<code>union X x; x.a.x[0];</code> would require to select the correct struct <code>.a</code>. <code>struct A { struct B b; ...} a; a.b.x[0]</code> ditto."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438208157, "post_id": 31712063, "comment_id": 51362152, "body": "@Olaf if <code>struct A</code> is defined that way, then it does not have a member <code>x[0]</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438208291, "post_id": 31712063, "comment_id": 51362206, "body": "Right: it does have a member <code>b</code> with member <code>x</code>. The other way round, you have the wrapping union <code>x</code>. Neither way looks very elegant to me (no criticism)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438208322, "post_id": 31712063, "comment_id": 51362216, "body": "I still don&#39;t know what you are trying to say, <code>x.a.x[0]</code> is an error if <code>struct A</code> is like you suggested"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438208670, "post_id": 31712063, "comment_id": 51362347, "body": "It&#39;s like <i>you</i> suggested actually. See my first code-fragment where I define the union. But nevermind. Sorry, I&#39;m very tired and writing English is getting complicated for me now. I think I should just stop here and try to relax (can&#39;t sleep either right now). I&#39;ll see if I gt downvotes and might delete my answer then - some time you win, some time you loose."}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "edited": false, "score": 0, "creation_date": 1438208949, "post_id": 31712063, "comment_id": 51362456, "body": "Well, it may be stronger than <code>in practice you should be safe</code>: imagine that I have the two <code>structs</code> defined in a header file, and use them independently in some compilation unit. Then, in another unrelated compilation unit (maybe a dynamically loaded shared object), I define a function that contains such a union. The only way the compiler have to guarantee the overlapping of fields inside some potential union is to use padding consistently, right?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438209076, "post_id": 31712063, "comment_id": 51362507, "body": "The compiler could (in theory) analyze the whole program, see that there is no union used anywhere, and then decide on its struct layouts.  But in practice that would be a nightmare for coders so I would expect no compiler to do it."}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438209118, "post_id": 31712063, "comment_id": 51362525, "body": "@Olaf, that is how you suggested. The way I asked, both <code>a</code> and <code>b</code> would have independent <code>x</code>, <code>y</code> and <code>z</code> members..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1473696044, "post_id": 31712063, "comment_id": 66230123, "body": "I would consider it implausible that the authors of the Standard intended that compiler authors would even think about trying to identify structures that weren&#39;t actually used as parts of unions but did have their addresses taken, and exempt such structures from the layout guarantees applicable to structures that are used within unions.  Most of the usefulness of the Common Initial Sequence rule stems not from how things behave when they are members of unions, but rather from what it implies about the behavior of structures identified by pointers."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1473697056, "post_id": 31712063, "comment_id": 66230611, "body": "The C Standard was never designed to be subjected to modern &quot;language-lawyering&quot;, and the authors acknowledge that it does not describe all the requirements for a useful implementation.  They expected that if the easiest way to meet the Standard&#39;s requirements would behave usefully, they shouldn&#39;t need to forbid compiler writers from doing otherwise (since they wouldn&#39;t do so anyway)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1473719480, "post_id": 31712063, "comment_id": 66240615, "body": "@supercat if you take out the &quot;within a union&quot; clause, then there would be layout guarantees for all structures -- which is exactly the sort of thing standards writers avoid, because it may constrain future implementations that they cannot yet imagine."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1473721774, "post_id": 31712063, "comment_id": 66241188, "body": "@M.M: I fail to see the problem.  If it becomes apparent that being able to rearrange structures would facilitate optimizations, compiler writers could either add a directive to indicate that a programmer doesn&#39;t care about the layout of a particular structure, or allow a command-line switch to select a non-conforming mode.  The amount of complexity required to implement such switches or directives would be far less than the complexity required to conform ensure compliance with the current rules (BTW, the gcc 6.2 at godbolt generates bogus code in some cases where storage is used..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1473722127, "post_id": 31712063, "comment_id": 66241258, "body": "...to hold different types at different times, even though all reads match the types with which data was written; allowing programmers to explicitly specify when optimizations should or should not be performed would reduce the likelihood of such bugs).  Fundamentally, if a program runs acceptably fast, having a new compiler run the program the same way unless/until a programmer identifies what directives can be safely added and adds them, would seem much safer than having a new compiler apply new optimizations by default.  I also think that while the authors of the Standard may have wanted..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1473722495, "post_id": 31712063, "comment_id": 66241332, "body": "...to allow for implementations which have a compelling reason to use unusual structure layouts (e.g. data compatibility some existing language on the same platform that uses such a layout), I can&#39;t imagine anyone in 1989 seriously entertaining the idea that programmers targeting only commonplace implementations should have to jump through hoops to get the semantics that could be achieved easily in either Dennis Ritchie&#39;s 1974 C implementation or almost any of the platforms that were commonplace in 1989."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1438207845, "last_edit_date": 1495541301, "creation_date": 1438207845, "answer_id": 31712063, "question_id": 31711174, "link": "https://stackoverflow.com/questions/31711174/struct-similarity-in-c/31712063#31712063", "title": "struct similarity in C", "body": "<p>It is not guaranteed that <code>struct A</code>'s layout starts off the same as <code>struct B</code>'s layout.</p>\n\n<p><em>However</em>, if and only if they were both members of a union:</p>\n\n<pre><code>union X\n{\n    struct A a; \n    struct B b;\n};\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/12164855/common-initial-sequence-in-structures-nested-within-union-definition-in-c-stan\">then it is guaranteed</a> that the common initial sequence has the same layout.</p>\n\n<p>I've never heard of any compiler that would lay out a struct differently if it detected that the struct were a member of a union, so in practice you should be safe!</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 0, "last_activity_date": 1473275548, "creation_date": 1473275548, "answer_id": 39377484, "question_id": 31711174, "link": "https://stackoverflow.com/questions/31711174/struct-similarity-in-c/39377484#39377484", "title": "struct similarity in C", "body": "<p>I do not think the Standard would prohibit an implementation from including so much more padding in <code>s_a</code> than <code>s_b</code> that the former is actually larger even though its members are a subset of <code>s_b</code>'s.  Such behavior would be very weird, and I can't think of any reason why a compiler would do such a thing, but I don't think it would be prohibited.</p>\n\n<p>If the number of bytes copied is the lesser of <code>sizeof s_a</code> and <code>sizeof s_b</code>, then the <code>memcpy</code> operation will be guaranteed to copy all of the common fields, but would not necessarily leave the later fields of <code>s_b</code> undisturbed.  On a typical machine, if the declarations had been:</p>\n\n<pre><code>struct A { uint32_t x; char y; };\nstruct B { uint32_t x; char y,p; uint16_t q; };\n</code></pre>\n\n<p>the first structure would contain five bytes of data and three bytes of padding, while the second would contain eight bytes of data with no padding.  Using <code>memcpy</code> as shown in your code would copy the padding from <code>s_a</code> over the data in <code>s_b</code>.</p>\n\n<p>If you need to copy the initial structure members while leaving the balance of the structure undisturbed, you should compute add offset and size of the last member of interest, and use that as the number of bytes to copy.  In the example I give above, the offset of <code>y</code> would be 4, and the size would be 1, so the <code>memcpy</code> would thus ignore parts of the structure that are used as padding in <code>A</code> but might hold data in <code>B</code>.</p>\n"}], "owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 31712063, "answer_count": 3, "score": 0, "last_activity_date": 1473275548, "creation_date": 1438204209, "question_id": 31711174, "link": "https://stackoverflow.com/questions/31711174/struct-similarity-in-c", "title": "struct similarity in C", "body": "<p>Consider the two <code>struct</code>s below:</p>\n\n<pre><code>struct A {\n    double x[3];\n    double y[3];\n    int z[3];\n\n    struct A *a;\n    int b;\n    struct A *c;\n    unsigned d[10];\n};\n\nstruct B {\n    double x[3];\n    double y[3];\n    int z[3];\n};\n</code></pre>\n\n<p>Notice that <code>struct B</code> is a strict subset of <code>struct A</code>. Now, I want to copy the members <code>.x</code>, <code>.y</code> and <code>.z</code> from an instance of <code>struct A</code> to an instance of <code>struct B</code>. My question is: according to the standards, is it valid to do:</p>\n\n<pre><code>struct A s_a = ...;\nstruct B s_b;\nmemcpy(&amp;s_b, &amp;s_a, sizeof s_b);\n</code></pre>\n\n<p>I.e. is it guaranteed that the paddings for the members, in their sequence of appearance, will be the same, so that I can \"partially\" <code>memcpy</code> <code>struct A</code> to <code>struct B</code>?</p>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1438202673, "post_id": 31710707, "comment_id": 51359523, "body": "I think you want to tag this as C, not C++."}, {"owner": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 0, "creation_date": 1438202851, "post_id": 31710707, "comment_id": 51359612, "body": "The division by null error should be easy to avoid with a check, but if the solution mostly works and you want feedback on the design the this question might be more suitable for <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}, {"owner": {"reputation": 36371, "user_id": 1180785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/UjU0z.png?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/1180785/dave"}, "edited": false, "score": 0, "creation_date": 1438203248, "post_id": 31710707, "comment_id": 51359837, "body": "Your approach seems good to me. To avoid the asymptotic behaviour, I&#39;d suggest you consider it from a vector perspective instead of a gradient perspective (e.g. the bisector has direction (-y,x) rather than gradient -y/x, and intersections can be found via this method: <a href=\"http://mathworld.wolfram.com/Line-LineIntersection.html\" rel=\"nofollow noreferrer\">mathworld.wolfram.com/Line-LineIntersection.html</a>). You&#39;ll end up with an equivalent overall equation, but without the asymptotes."}], "answers": [{"tags": [], "owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "is_accepted": false, "score": 0, "last_activity_date": 1438203114, "creation_date": 1438203114, "answer_id": 31710884, "question_id": 31710707, "link": "https://stackoverflow.com/questions/31710707/given-4-points-with-2-on-different-radius-obtain-the-center-of-the-circle/31710884#31710884", "title": "Given 4 points with 2 on different radius. Obtain the center of the circle", "body": "<p>In cases such as these, try getting \"y - y0\" kind of values to multiplication factor, rather than as divisor.\nhope this helps.\nAny more hint would be exact implementation of code, which I suppose you don't want ;)</p>\n"}, {"tags": [], "owner": {"reputation": 3770, "user_id": 4731679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a9b39bb57049590b4ba59423630ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Doolittle", "link": "https://stackoverflow.com/users/4731679/edward-doolittle"}, "is_accepted": true, "score": 2, "last_activity_date": 1438205283, "creation_date": 1438205283, "answer_id": 31711468, "question_id": 31710707, "link": "https://stackoverflow.com/questions/31710707/given-4-points-with-2-on-different-radius-obtain-the-center-of-the-circle/31711468#31711468", "title": "Given 4 points with 2 on different radius. Obtain the center of the circle", "body": "<p>What you need is a better representation for lines. Instead of using the point-slope form of a line, I suggest the <code>Ax + By + C = 0</code> form. You then find coefficients <code>A,B,C</code>. Note that they are only determined up to a factor; e.g., <code>2A,2B,2C</code> work just as well. </p>\n\n<p>(One way to make the situation more definite if necessary is to only allow <code>C=1</code> or <code>C=0 and B=1</code> or <code>C=0 and B=0 and A=1</code>. But I don't think that's necessary for your problem.)</p>\n\n<p>In this representation, all lines are on the same footing, so you don't have to set up special cases for vertical lines.</p>\n"}], "owner": {"reputation": 35, "user_id": 4682905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c04a68c9c914de5398abd284a1ec57d?s=128&d=identicon&r=PG&f=1", "display_name": "puwi", "link": "https://stackoverflow.com/users/4682905/puwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 31711468, "answer_count": 2, "score": 1, "last_activity_date": 1438275382, "creation_date": 1438202564, "last_edit_date": 1438202808, "question_id": 31710707, "link": "https://stackoverflow.com/questions/31710707/given-4-points-with-2-on-different-radius-obtain-the-center-of-the-circle", "title": "Given 4 points with 2 on different radius. Obtain the center of the circle", "body": "<p>This is a problem on a programming judge.</p>\n\n<p>In resume, the statement is the following :</p>\n\n<blockquote>\n  <p>Black holes have an overwhelming gravity, such that the nearest stars begin spinning around them (<a href=\"https://uploaddeimagens.com.br/images/000/483/195/original/UOJ_1783.png?1438189373\" rel=\"nofollow\">Example</a>). Every affected star keeps constant angular velocity and distance from the black hole. Given 2 different positions of 2 stars in the black hole. Can you give the position of the black hole ?</p>\n</blockquote>\n\n<p>The first line of input has the number <strong>T</strong> (1 \u2264 T \u2264 10000) of test cases. Each test cases has 4 points (<strong>X</strong>,<strong>Y</strong>) (-1000.0 \u2264 X, Y \u2264 1000.0) given in 4 lines; The old coordinate of the first star, the old coordinate of the second star, the new coordinate of the first star and the new coordinate of the second star respectively.</p>\n\n<p>The output consist of a single line with the black hole coordinates.</p>\n\n<p>Example of input:</p>\n\n<blockquote>\n  <p>3<br>\n  12.00 2.00<br>\n  5.00 6.00<br>\n  10.00 8.00<br>\n  2.00 7.00<br>\n  0.50 -0.50<br>\n  -1.00 0.00<br>\n  -0.50 -0.50<br>\n  0.00 1.00<br>\n  0.50 6.50<br>\n  -10.50 -3.50<br>\n  -1.50 6.50<br>\n  -5.50 -8.50   </p>\n</blockquote>\n\n<p>Example of output:</p>\n\n<blockquote>\n  <p>2.00 2.00<br>\n  0.00 0.00<br>\n  -0.50 1.50</p>\n</blockquote>\n\n<p>My solution tries to find the point where the perpendicular bisector formed by the two stars positions intersect. The problem is that sometimes, the difference of the y coordinates of a star has 0 value, causing a division by 0 in my algorithm. There is other solution ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct{\n    double x,y;\n}point_t;\n\n\nint main(){\n    point_t p1[2]; //p[0] is the old coordinate, p[1] is the new\n    point_t p2[2];\n\n    int n;\n    scanf(\"%d\",&amp;n);\n\n    //slope , b for the 2 perpendicular bisectors\n    double m1,m2,b1,b2;\n\n    //auxiliar points to store values for the formulas\n    double x,x0,y,y0;\n    for (int i = 0; i &lt; n; ++i) {\n        scanf(\"%lf %lf\",&amp;p1[0].x,&amp;p1[0].y);\n        scanf(\"%lf %lf\",&amp;p2[0].x,&amp;p2[0].y);\n        scanf(\"%lf %lf\",&amp;p1[1].x,&amp;p1[1].y);\n        scanf(\"%lf %lf\",&amp;p2[1].x,&amp;p2[1].y);\n\n\n        x0 = p1[0].x; \n        y0 = p1[0].y;\n        x  = p1[1].x; \n        y  = p1[1].y;\n        m1 = -((x-x0)/(y - y0)); // m = y - y0 / x - x0 &gt;&gt; bisector &gt;&gt;  m = x - x0 / y - y0\n\n        x0 = p2[0].x; \n        y0 = p2[0].y;\n        x  = p2[1].x; \n        y  = p2[1].y;\n        m2 = - ((x-x0)/(y - y0));// m = y - y0 / x - x0 &gt;&gt; bisector &gt;&gt;  m = x - x0 / y - y0\n\n        b1 = ((p1[0].y+p1[1].y)/2.0) - m1*((p1[0].x+p1[1].x)/2.0); // b = y - my &gt;&gt; x and y are the median points\n        b2 = ((p2[0].y+p2[1].y)/2.0) - m2*((p2[0].x+p2[1].x)/2.0);// b = y - my &gt;&gt; x and y are the median points\n\n        x = (b2-b1)/(m1 - m2);\n        printf(\"%.2lf %.2lf\\n\",x, m1*x + b1);\n    }\n}\n</code></pre>\n\n<p>Any hint is appreciated.</p>\n"}, {"tags": ["c", "linux", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 4, "creation_date": 1491075721, "post_id": 31710699, "comment_id": 73397377, "body": "I&#39;m not sure why this answer was accepted. The question was how to disable VLAs. @cauon&#39;s answer is the correct one."}, {"owner": {"reputation": 2677, "user_id": 1740154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/keyyz.jpg?s=128&g=1", "display_name": "twitchdotcom slash KANJICODER", "link": "https://stackoverflow.com/users/1740154/twitchdotcom-slash-kanjicoder"}, "edited": false, "score": 1, "creation_date": 1588329702, "post_id": 31710699, "comment_id": 108859982, "body": "It almost looks like the answer was written by some type of automated bot that just looks up random links and quotes related to the search term."}], "tags": [], "owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "is_accepted": false, "score": 2, "last_activity_date": 1491075603, "last_edit_date": 1495542851, "creation_date": 1438202533, "answer_id": 31710699, "question_id": 31710642, "link": "https://stackoverflow.com/questions/31710642/disable-variable-length-automatic-arrays-in-gcc/31710699#31710699", "title": "Disable variable-length automatic arrays in gcc", "body": "<blockquote>\n  <p><a href=\"https://stackoverflow.com/questions/4159746/variable-length-arrays-in-c89\">Variable-length arrays in C89?</a></p>\n  \n  <p>GCC always supported variable length arrays AFAIK. Setting -std to C89\n  doesn't turn off GCC extensions ...</p>\n</blockquote>\n\n<p>See also:</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html</a></p>\n\n<p><a href=\"http://tigcc.ticalc.org/doc/gnuexts.html#SEC76\" rel=\"nofollow noreferrer\">http://tigcc.ticalc.org/doc/gnuexts.html#SEC76</a></p>\n\n<p>Finally,</p>\n\n<blockquote>\n  <p><a href=\"http://tigcc.ticalc.org/doc/gnuexts.html\" rel=\"nofollow noreferrer\">http://tigcc.ticalc.org/doc/gnuexts.html</a></p>\n  \n  <p>'-pedantic' and other options cause warnings for many GNU C\n  extensions. You can prevent such warnings within one expression by\n  writing <code>__extension__</code> before the expression. <code>__extension__</code> has no\n  effect aside from this.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 362366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UpL56.jpg?s=128&g=1", "display_name": "cauon", "link": "https://stackoverflow.com/users/362366/cauon"}, "is_accepted": true, "score": 20, "last_activity_date": 1491075870, "last_edit_date": 1491075870, "creation_date": 1468410821, "answer_id": 38351015, "question_id": 31710642, "link": "https://stackoverflow.com/questions/31710642/disable-variable-length-automatic-arrays-in-gcc/38351015#38351015", "title": "Disable variable-length automatic arrays in gcc", "body": "<p>You can generate an error for variable length arrays using a compiler flag:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-Werror=vla\n</code></pre>\n"}], "owner": {"reputation": 1034, "user_id": 1620573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/804f4e81ee2271134ecaec65882594a6?s=128&d=identicon&r=PG", "display_name": "Ricardo Cristian Ramirez", "link": "https://stackoverflow.com/users/1620573/ricardo-cristian-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2237, "favorite_count": 5, "accepted_answer_id": 38351015, "answer_count": 2, "score": 14, "last_activity_date": 1575481290, "creation_date": 1438202348, "last_edit_date": 1575481290, "question_id": 31710642, "link": "https://stackoverflow.com/questions/31710642/disable-variable-length-automatic-arrays-in-gcc", "title": "Disable variable-length automatic arrays in gcc", "body": "<p>I couldn't disable it even though by using <code>-std=c89</code> flag. How can I disable it?</p>\n"}, {"tags": ["c", "function", "sockets", "network-programming"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1438202472, "post_id": 31710590, "comment_id": 51359416, "body": "Socket descriptors are just like file descriptors.&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1438202388, "creation_date": 1438202388, "answer_id": 31710652, "question_id": 31710590, "link": "https://stackoverflow.com/questions/31710590/do-sockets-persist-between-function-calls/31710652#31710652", "title": "Do sockets persist between function calls?", "body": "<p>There should be no problem doing that.  For example:</p>\n\n<pre><code>int sock = my_socket();\nmy_bind(sock);\nmy_listen(sock);\nint connected_sock = my_connect(sock);\nmy_read(connected_sock);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438203531, "post_id": 31710784, "comment_id": 51360017, "body": "I wouldn&#39;t go as far as telling that you can never pass address of local variables. You can pass around addresses of local variables as long as the code that uses them does not outlive their scope."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438203664, "post_id": 31710784, "comment_id": 51360102, "body": "@FilipeGon&#231;alves Thanks for pointing. I actually meant <code>return</code>ing. Updated. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1438203617, "last_edit_date": 1438203617, "creation_date": 1438202845, "answer_id": 31710784, "question_id": 31710590, "link": "https://stackoverflow.com/questions/31710590/do-sockets-persist-between-function-calls/31710784#31710784", "title": "Do sockets persist between function calls?", "body": "<blockquote>\n  <p><em>if I create a socket in 1 function, can I pass around the sockid and bind it in another, listen in another, and accept in another?</em></p>\n</blockquote>\n\n<p>Yes, you can. when you <em>create</em> a socket what you get is an socket file descriptor. You can pass that value to other functions, just like you can pass <em>any</em> other value (excluding <code>return</code>ing address of local variables, to be exact).</p>\n"}], "owner": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 31710652, "answer_count": 2, "score": 0, "last_activity_date": 1438203617, "creation_date": 1438202166, "question_id": 31710590, "link": "https://stackoverflow.com/questions/31710590/do-sockets-persist-between-function-calls", "title": "Do sockets persist between function calls?", "body": "<p>In the C language, you have local variables in functions that are destroyed when the function returns (they arn't accessible anymore, unless you pass around pointers obviously).</p>\n\n<p>What happens to sockets? Specifcially, if I create a socket in 1 function, can I pass around the sockid and bind it in another, listen in another, and accept in another?</p>\n\n<p>From what I can see this should work, but I'm not an expert in C.</p>\n"}, {"tags": ["c", "numbers", "unique"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438220325, "post_id": 31710074, "comment_id": 51365385, "body": "There are some advantages of generating numbers in the range <code>[0 ... some_prime_minus_1]</code>, <code>(some_prime_minus_1 &lt;= 32767 or 655535)</code>. I would take the 88 bits into a <code>64-bit unsigned long long ^ 24-bit unsigned long</code> and then <code>%some_prime_minus</code> as my simple hash function."}, {"owner": {"reputation": 45, "user_id": 2042403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fac730876a1b792c20f3d599d202f2?s=128&d=identicon&r=PG", "display_name": "keebler", "link": "https://stackoverflow.com/users/2042403/keebler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438274920, "post_id": 31710074, "comment_id": 51394838, "body": "Could you please write something more about your idea? Or some pseudo-code? Sounds interesting but I&#39;m not sure if I get it :)"}], "answers": [{"comments": [{"owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1438201178, "post_id": 31710288, "comment_id": 51358719, "body": "Even so, initializing random generator with different seeds does not guarantee different generated numbers."}, {"owner": {"reputation": 9691, "user_id": 5142537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9sFH5.png?s=128&g=1", "display_name": "mattinbits", "link": "https://stackoverflow.com/users/5142537/mattinbits"}, "reply_to_user": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "edited": false, "score": 0, "creation_date": 1438201290, "post_id": 31710288, "comment_id": 51358778, "body": "I&#39;m advocating any use of a randomiser. The hash output itself can be used as the ID if an 8 or 16 bit hash is used."}, {"owner": {"reputation": 45, "user_id": 2042403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fac730876a1b792c20f3d599d202f2?s=128&d=identicon&r=PG", "display_name": "keebler", "link": "https://stackoverflow.com/users/2042403/keebler"}, "edited": false, "score": 0, "creation_date": 1438275254, "post_id": 31710288, "comment_id": 51395034, "body": "Interesting, I&#39;ll give it a try :) Thanks for the link to wiki!"}], "tags": [], "owner": {"reputation": 9691, "user_id": 5142537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9sFH5.png?s=128&g=1", "display_name": "mattinbits", "link": "https://stackoverflow.com/users/5142537/mattinbits"}, "is_accepted": true, "score": 3, "last_activity_date": 1438201025, "creation_date": 1438201025, "answer_id": 31710288, "question_id": 31710074, "link": "https://stackoverflow.com/questions/31710074/how-to-generate-smaller-unique-number-from-larger-11-bytes-unique-number-gene/31710288#31710288", "title": "How to generate smaller unique number from larger (11 bytes) unique number? General C", "body": "<p>What you're trying to do is effectively find a hash for your ids where the hash output is smaller than the input, so there will always be a risk of collisions, ie two device ids producing the same short id. Nevertheless, you'll have better luck using a proper hashing function than your sum approach. Just look for a simple 8 or 16 bit hash function and use that. E.g. <a href=\"https://en.m.wikipedia.org/wiki/Pearson_hashing\" rel=\"nofollow\">https://en.m.wikipedia.org/wiki/Pearson_hashing</a></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1438294987, "last_edit_date": 1495542767, "creation_date": 1438278244, "answer_id": 31730617, "question_id": 31710074, "link": "https://stackoverflow.com/questions/31710074/how-to-generate-smaller-unique-number-from-larger-11-bytes-unique-number-gene/31730617#31730617", "title": "How to generate smaller unique number from larger (11 bytes) unique number? General C", "body": "<p>To generate a <em>unique number</em> in a range of 15 or 16 bits from larger numbers (11 bytes or 88 bits) is a <a href=\"https://en.wikipedia.org/wiki/Hash_function\" rel=\"nofollow noreferrer\">hash function</a> and prone to collisions as happened with OP's generated number 23860.</p>\n\n<p>Summing all the 11 bytes is very weak as the sum of the 11 bytes is in the range of 0 to 11*255 or 2805 with very uneven distribution.  So code only generates 2806 different seeds for <code>srand()</code>.  It would have been better to use a wider integer grouping than 8-bit.  Recommend 64-bit groups exclusive-or'd with each other.</p>\n\n<p>Using <code>srand() / rand()</code> is a method but has weakness <em>for consistency</em>: 1) Portability: same data on different platforms may yield different numbers as C specifies little about <code>rand()</code> method.  2) As it requires 2 functions sharing a global state variable, code must insure another thread/interrupt does not mess things up or that these calls mess up consistency in other functions using <code>rand()</code>.  A big problem with <code>rand()</code> is on systems where <code>RAND_MAX</code> is 32767, its minimum specified value, and code is attempting [0...65536].</p>\n\n<p>I found <em>consistency</em> important as being able to use the same test code on multiple platforms: a significant advantage in code maintenance.</p>\n\n<p><a href=\"https://stackoverflow.com/a/31710288/2410359\">@mattinbits</a> well recommends a good  8/16 bit solution.  Why re-invent the wheel?  Yet I do not drive on chariot tires, so ...</p>\n\n<p>If OP does not appear to really need a identifier in the <em>entire</em> range of [0...32767] or [0...65536] (Did OP mean 65535?), consider a simple portable repeatable hash method that relies on <code>%</code> by a <a href=\"http://www.onlineconversion.com/prime.htm\" rel=\"nofollow noreferrer\">prime</a> near the limit to well mix up the bits.</p>\n\n<pre><code>// return numbers 0 ... 32748 or 0 ... 65536\nunsigned long Hash(const unsigned char ID[11]) {\n  unsigned long long Upper;\n  unsigned long Lower;\n  Upper = (ID[0]*1ULL&lt;&lt;56) | (ID[1]*1ULL&lt;&lt;48) | (ID[2]*1ULL&lt;&lt;40) | (ID[3]*1ULL&lt;&lt;32) |\n      (ID[4]*1UL&lt;&lt;24)  | (ID[5]*1UL&lt;&lt;16) | (ID[6]*1U&lt;&lt;8) | ID[7];\n  Lower = (ID[8]*1UL&lt;&lt;16) | (ID[9]*1U&lt;&lt;8) | ID[10];\n  // Greatest prime &lt;= 32768\n  #define Prime_LE_32768 32749\n  return (Upper ^ Lower) % Prime_LE_32768;\n\n  // or \n  // Greatest prime &lt;= 65537\n  #define Prime_LE_65537 65537\n  return (Upper ^ Lower) % Prime_LE_65537;\n}\n</code></pre>\n\n<p>[Edit] with potential simplifications.</p>\n\n<pre><code>unsigned Hash(const uint8_t ID[11], unsigned prime) {\n  uint64_t H[2] = {0};\n  memcpy(H, ID, 11);\n  return (H[0] ^ H[1]) % prime;\n}\n\nconst unsigned char ID[][11] = {\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x02, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x06, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x0A, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x0E, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0A, 0x00, 0x14, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0A, 0x00, 0x1C, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x09, 0x00, 0x23, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0A, 0x00, 0x24, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x0E, 0x1D, 0x00, 0x1A, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x09, 0x00 },\n    { 0x34, 0x57, 0x33, 0x31, 0x35, 0x39, 0x04, 0x10, 0x00, 0x20, 0x00 },\n    { 0x34, 0x57, 0x33, 0x31, 0x35, 0x39, 0x04, 0x18, 0x00, 0x1C, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x0F, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x13, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x17, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0E, 0x00, 0x1F, 0x00 },\n    { 0x34, 0x57, 0x36, 0x31, 0x38, 0x39, 0x15, 0x0A, 0x00, 0x25, 0x00 },\n    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 } };\n\n#define Prime_LE_32768 32749\n#define Prime_LE_65536 65521u\nvoid test() {\n  int i, j;\n  for (i = 0; i &lt; sizeof ID / sizeof ID[0]; i++) {\n    const char *comma = \"\";\n    for (j = 0; j &lt; 11; j++) {\n      printf(\"%s%02X\", comma, ID[i][j]);\n      comma = \"-\";\n    }\n    printf(\" %5u\", Hash(ID[i], Prime_LE_32768));\n    printf(\" %5u\\n\", Hash(ID[i], Prime_LE_65536));\n  }\n  puts(\"\");\n}\n</code></pre>\n\n<blockquote>\n  <p>Output</p>\n</blockquote>\n\n<pre><code>34-57-36-31-38-39-15-0E-00-02-00 14759 13938\n34-57-36-31-38-39-15-0E-00-06-00 13735 12914\n34-57-36-31-38-39-15-0E-00-0A-00 16807 15986\n34-57-36-31-38-39-15-0E-00-0E-00 15783 14962\n34-57-36-31-38-39-15-0A-00-14-00 18507 25943\n34-57-36-31-38-39-15-0A-00-1C-00 20555 27991\n34-57-36-31-38-39-15-09-00-23-00   391 26260\n34-57-36-31-38-39-15-0A-00-24-00 30795 38231\n34-57-36-31-38-39-0E-1D-00-1A-00 23009 40628\n34-57-36-31-38-39-15-0E-00-09-00 17063 16242\n34-57-33-31-35-39-04-10-00-20-00 31736 54522\n34-57-33-31-35-39-04-18-00-1C-00  3760 10032\n34-57-36-31-38-39-15-0E-00-0F-00 15527 14706\n34-57-36-31-38-39-15-0E-00-13-00 10407  9586\n34-57-36-31-38-39-15-0E-00-17-00  9383  8562\n34-57-36-31-38-39-15-0E-00-1F-00 11431 10610\n34-57-36-31-38-39-15-0A-00-25-00 30539 37975\n00-00-00-00-00-00-00-00-00-00-00     0     0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 2042403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fac730876a1b792c20f3d599d202f2?s=128&d=identicon&r=PG", "display_name": "keebler", "link": "https://stackoverflow.com/users/2042403/keebler"}, "edited": false, "score": 0, "creation_date": 1438284011, "post_id": 31730994, "comment_id": 51400091, "body": "I do use processor unique serial number. It looks like this: <code>uniqueID[0] = LOTNUM0;  uniqueID[1] = LOTNUM1; \tuniqueID[2] = LOTNUM2; \tuniqueID[3] = LOTNUM3; \tuniqueID[4] = LOTNUM4; \tuniqueID[5] = LOTNUM5;  \tuniqueID[6] = WAFNUM; \tuniqueID[7] = COORDX0; \tuniqueID[8] = COORDX1; \tuniqueID[9] = COORDY0; \tuniqueID[10] = COORDY1;</code> So bytes 6 to 10 are more likely to change for batch of MCUs :) In standard RS485 reading is disabled when writing to cut off echoing and re-parsing communication but I could enable reding while writing just for this case to make it even more collision-proof"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 45, "user_id": 2042403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fac730876a1b792c20f3d599d202f2?s=128&d=identicon&r=PG", "display_name": "keebler", "link": "https://stackoverflow.com/users/2042403/keebler"}, "edited": false, "score": 0, "creation_date": 1438284894, "post_id": 31730994, "comment_id": 51400563, "body": "Yes, I think combining both is a good idea, select the most varying bits <i>and</i> detect collisions."}, {"owner": {"reputation": 45, "user_id": 2042403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fac730876a1b792c20f3d599d202f2?s=128&d=identicon&r=PG", "display_name": "keebler", "link": "https://stackoverflow.com/users/2042403/keebler"}, "edited": false, "score": 0, "creation_date": 1438290328, "post_id": 31730994, "comment_id": 51403519, "body": "I have added list of UIDs in first post and in fact it&#39;s much simplier if we look at numbers we are talking about :) I.e COORDY1 and COORDX1 looks to be always zero... Maybe their wafers aren&#39;t so big to increment that part but they wanted to be 7nm process ready ;)"}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 1, "last_activity_date": 1438303001, "last_edit_date": 1438303001, "creation_date": 1438279575, "answer_id": 31730994, "question_id": 31710074, "link": "https://stackoverflow.com/questions/31710074/how-to-generate-smaller-unique-number-from-larger-11-bytes-unique-number-gene/31730994#31730994", "title": "How to generate smaller unique number from larger (11 bytes) unique number? General C", "body": "<p>The solution where every device generates an ID on its own, like with the \"hash\" approach, has the advantage that it works without communication. On the other hand the number has to be large enough such that collisions are very unlikely. 16 bits is not much.</p>\n\n<p>One practical way I see, is to use a number based on a property of the device, like a processor serial number, or a RS485 bus address (but I suspect you want to use the ID we're talking about for exactly this purpose).\nIf the 11-byte unique ID, or a serial number you have access to, is not random, you can use that non-randomness to make a better hash function than any general-purpose one.<br>\nThis is because a general-purpose hash function has to mix the bits evenly, because it doesn't know which bits vary more than others. If you know which bits vary the most, you can use this knowledge to build a better hash function. For example if you have a counter, the least significant bits are the ones to choose for a \"unique\" ID.</p>\n\n<p>If this is not possible, I would try to make a communication scheme that detects colliding IDs. This should be possible because every device sees all the communication on the RS485 bus.</p>\n\n<p>Edit: Based on the example data I would select these bits:</p>\n\n<pre><code>00 00 00 00 01 00 1B 1F 00 3F 00\n</code></pre>\n\n<p>and implement a hash function like:</p>\n\n<pre><code>unsigned short hash(const unsigned char ID[11]) {\n    return (ID[9] &lt;&lt; 10)\n            | ((ID[6] &amp; 0x18) &lt;&lt; 5)\n            | ((ID[6] &amp; 0x03) &lt;&lt; 6)\n            | ((ID[7] &amp; 0x1F) &lt;&lt; 1)\n            | (ID[4] &amp; 0x01);\n}\n</code></pre>\n\n<p>This function is very likely to produce unique identifiers for devices that are added in the future.</p>\n"}], "owner": {"reputation": 45, "user_id": 2042403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fac730876a1b792c20f3d599d202f2?s=128&d=identicon&r=PG", "display_name": "keebler", "link": "https://stackoverflow.com/users/2042403/keebler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1529, "favorite_count": 1, "accepted_answer_id": 31710288, "answer_count": 3, "score": 3, "last_activity_date": 1438347596, "creation_date": 1438200223, "last_edit_date": 1438347596, "question_id": 31710074, "link": "https://stackoverflow.com/questions/31710074/how-to-generate-smaller-unique-number-from-larger-11-bytes-unique-number-gene", "title": "How to generate smaller unique number from larger (11 bytes) unique number? General C", "body": "<p>I have several devices. Each of them has its unique ID composed of 11 bytes, like: 0x34 0x57 0x36 0x31 0x38 0x39 0x15 0x0e 0x00 0x0f 0x00. I would like to generate unique number (0-32767 or 0-65535) to delay answer when FindDevices command is broadcasted. When devices start to answer at the same moment there is RS485 bus contention problem so I would like to avoid that.</p>\n\n<p>My first attempt was to sum all the 11 bytes of unique ID, call srand(sum) to seed generator and then call rand() to get my value.\nBut it's unfortunately poor solution and in my batch of devices I've got 2 devices with unique ID but the same \"(not so)unique\" number :(</p>\n\n<p>UID1: 34 57 36 31 38 39 15 0e 00 0f 00\nsum: 405 decimal\ngenerated number: 23860</p>\n\n<p>UID2: 34 57 33 31 35 39 04 18 00 1c 00\nsum: 405 decimal\ngenerated number: 23860</p>\n\n<p>Devices don't know what number was generated in other devices or what unique IDs they have so they can't simply compare them. </p>\n\n<p>Any idea how to generate such unique number (0-32767 or 0-65535)?</p>\n\n<p><strong>Edit:</strong>\nList of unique IDs (as hex) of batch from my bench:\n<code>\n01. 34 57 36 31 38 39 15 0E 00 02 00\n02. 34 57 36 31 38 39 15 0E 00 06 00\n03. 34 57 36 31 38 39 15 0E 00 0A 00\n04. 34 57 36 31 38 39 15 0E 00 0E 00\n05. 34 57 36 31 38 39 15 0A 00 14 00\n06. 34 57 36 31 38 39 15 0A 00 1C 00\n07. 34 57 36 31 38 39 15 09 00 23 00\n08. 34 57 36 31 38 39 15 0A 00 24 00\n09. 34 57 36 31 38 39 0E 1D 00 1A 00\n10. 34 57 36 31 38 39 15 0E 00 09 00\n11. 34 57 33 31 35 39 04 10 00 20 00\n12. 34 57 33 31 35 39 04 18 00 1C 00\n13. 34 57 36 31 38 39 15 0E 00 0F 00\n14. 34 57 36 31 38 39 15 0E 00 13 00\n15. 34 57 36 31 38 39 15 0E 00 17 00\n16. 34 57 36 31 38 39 15 0E 00 1F 00\n17. 34 57 36 31 38 39 15 0A 00 25 00\n</code> It looks that they are unique but many bytes are repeated/constant. Good solution should generate values placed in whole range even if input values are close to each other :) </p>\n\n<p><strong>Edit2:</strong>\nHere are results for all solutions from your answers:</p>\n\n<pre><code>Test results:\nOP:  1977, H1L: 14759, H1H: 13938, H2L:  7189, H2H: 36686, H3L: 14759, H3H: 13938, H4:  2652, PRS: 61086\nOP:  3669, H1L: 13735, H1H: 12914, H2L:  8213, H2H: 37710, H3L: 13735, H3H: 12914, H4:  6748, PRS: 25852\nOP:  5361, H1L: 16807, H1H: 15986, H2L:  5141, H2H: 34638, H3L: 16807, H3H: 15986, H4: 10844, PRS: 40974\nOP:  7053, H1L: 15783, H1H: 14962, H2L:  6165, H2H: 35662, H3L: 15783, H3H: 14962, H4: 14940, PRS: 19836\nOP:  7899, H1L: 18507, H1H: 25943, H2L:  3441, H2H: 24681, H3L: 18507, H3H: 25943, H4: 21076, PRS:  4898\nOP: 11283, H1L: 20555, H1H: 27991, H2L:  1393, H2H: 22633, H3L: 20555, H3H: 27991, H4: 29268, PRS: 10065\nOP: 13821, H1L:   391, H1H: 26260, H2L: 21557, H2H: 24364, H3L:   391, H3H: 26260, H4: 36434, PRS: 63904\nOP: 14667, H1L: 30795, H1H: 38231, H2L: 23902, H2H: 12393, H3L: 30795, H3H: 38231, H4: 37460, PRS: 46300\nOP: 15513, H1L: 23009, H1H: 40628, H2L: 31688, H2H:  9996, H3L: 23009, H3H: 40628, H4: 27066, PRS: 21678\nOP: 21322, H1L: 17063, H1H: 16242, H2L:  4885, H2H: 34382, H3L: 17063, H3H: 16242, H4:  9820, PRS: 60787\nOP: 22168, H1L: 31736, H1H: 54522, H2L: 22961, H2H: 61623, H3L: 31736, H3H: 54522, H4: 32801, PRS: 20737\nOP: 23860, H1L:  3760, H1H: 10032, H2L: 18188, H2H: 40592, H3L:  3760, H3H: 10032, H4: 28721, PRS: 50696\nOP: 23860, H1L: 15527, H1H: 14706, H2L:  6421, H2H: 35918, H3L: 15527, H3H: 14706, H4: 15964, PRS: 28319\nOP: 25552, H1L: 10407, H1H:  9586, H2L: 11541, H2H: 41038, H3L: 10407, H3H:  9586, H4: 20060, PRS: 60097\nOP: 27244, H1L:  9383, H1H:  8562, H2L: 12565, H2H: 42062, H3L:  9383, H3H:  8562, H4: 24156, PRS:  5512\nOP: 30628, H1L: 11431, H1H: 10610, H2L: 10517, H2H: 40014, H3L: 11431, H3H: 10610, H4: 32348, PRS: 55107\nOP: 31474, H1L: 30539, H1H: 37975, H2L: 24158, H2H: 12649, H3L: 30539, H3H: 37975, H4: 38484, PRS:  4379\nOP: 20035, H1L:     0, H1H:     0, H2L: 21948, H2H: 50624, H3L:     0, H3H:     0, H4:     0, PRS: 26124\n</code></pre>\n\n<p><em>OP</em> is my original method which is poor and generates non-unique numbers for UIDs that were listed.\n<em>H1L</em> and <em>H1H</em> are simplified solutions presented by chux.\n<em>H2L, H2H, H3L, H3H</em> are my modifications (adding ~ to lower or upper part) to see if it produces better results.\n<em>H4</em> is solution presented by alain.\n<em>PRS</em> is Pearson returning uint16_t suggested by mattinbits.</p>\n\n<p><strong>And the winner is... PRS!</strong> :) All your suggestions generate unique numbers from listed UIDs so they are correct but <strong>Pearson hashing</strong> offers best variance of results (checked in Excel ;) ).\n<strong>Thank you for your help!</strong></p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 2777, "user_id": 2211479, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/xlge0.jpg?s=128&g=1", "display_name": "Felype", "link": "https://stackoverflow.com/users/2211479/felype"}, "edited": false, "score": 0, "creation_date": 1438201097, "post_id": 31710067, "comment_id": 51358661, "body": "You need to explicitly cast that to float* when reading or c will not know how many bytes to read from that pointer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 6, "creation_date": 1438202289, "post_id": 31710067, "comment_id": 51359293, "body": "Why all the downvotes? although this is of course not a <i>great</i> question, OP actually tried something, probably having read about <code>void *</code> being a generic pointer. Understanding all the implications takes some time and I think it&#39;s worth explaining ..."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 9, "last_activity_date": 1438202662, "last_edit_date": 1438202662, "creation_date": 1438200276, "answer_id": 31710092, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value/31710092#31710092", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>Assuming your <code>function()</code> is <em>actually spelled</em> as <code>test()</code>, <code>%f</code> expects a <code>float</code> value. You're supplying a <code>void *</code>. It's wrong and <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>Solution: <code>void</code> being an incomplete type, you cannot dereference a <code>void</code> pointer directly. You need to cast the pointer to the required type before dereferencing. For example,</p>\n\n<pre><code>printf(\"%f\\n\", *( (float *) test() ) );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": false, "score": 5, "last_activity_date": 1438927972, "last_edit_date": 1438927972, "creation_date": 1438200383, "answer_id": 31710122, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value/31710122#31710122", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>Try</p>\n\n<pre><code>printf(\"%f\\n\", *( (float*)function() ));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4235, "user_id": 3362420, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/sqUXZ.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3362420/daniel"}, "is_accepted": false, "score": 4, "last_activity_date": 1438200433, "creation_date": 1438200433, "answer_id": 31710133, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value/31710133#31710133", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>What printf sees is a parameter value. That value isn't a float, but is a pointer to a float.  You would need to cast it back to a float* and dereference it.</p>\n"}, {"tags": [], "owner": {"reputation": 536, "user_id": 436766, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LbwY9.jpg?s=128&g=1", "display_name": "0xBAADF00D", "link": "https://stackoverflow.com/users/436766/0xbaadf00d"}, "is_accepted": false, "score": 0, "last_activity_date": 1438200628, "creation_date": 1438200628, "answer_id": 31710191, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value/31710191#31710191", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>You dont print 4.5, because you are returning a pointer over the variable \"floating\" not the variable itself.</p>\n\n<p>You have to change your code to :</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[]){\n     printf(\"%f\\n\", (*(float*)function()));\n     return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1438201556, "creation_date": 1438201556, "answer_id": 31710434, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value/31710434#31710434", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>The <code>%f</code> conversion specifier expects it's corresponding argument to have type <code>float</code>; you're passing it a <code>void *</code>, hence the garbage output.</p>\n\n<p>Change that to</p>\n\n<pre><code>printf( \"%f\\n\", * ((float *) test()) );\n</code></pre>\n\n<p>You have to convert the <code>void *</code> returned from <code>test</code> to a <code>float *</code>, then dereference the result to get the actual <code>float</code> value.  The cast is necessary, since you cannot directly deference a <code>void *</code>.  </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438220731, "post_id": 31710486, "comment_id": 51365467, "body": "Hmm, not convinced: <a href=\"http://cdecl.ridiculousfish.com/?q=int+%2A+foo\" rel=\"nofollow noreferrer\">foo as pointer to int</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438240141, "post_id": 31710486, "comment_id": 51371671, "body": "Apart from being ambiguous (it doesn&#39;t tell you exactly whether being a pointer is part of the type or a property of the variable) -- what exactly makes you trust this site? Try <code>int * foo, bar;</code> -&gt; <i>syntax error</i>. Great."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438241246, "post_id": 31710486, "comment_id": 51372322, "body": "And .. if you want it <i>completely</i> correct, you&#39;d have to cite the standard text, IMHO not that helpful for a newbie, but then you&#39;d get that being a pointer is called a <i>type derivator</i> and it&#39;s part of the <a href=\"http://port70.net/~nsz/c/c99/n1256.html#6.7.5\" rel=\"nofollow noreferrer\">declarator</a> (as opposed to the <i>type specifier</i>). Of course you can <i>define</i> your own type including such a derivator, then you will have a <i>pointer type</i> (<code>typedef int *pint</code>), but that&#39;s often considered <i>bad pactice</i> because it breaks with the natural assumption that the <code>*</code> is always visible in the <i>declarator</i> of any pointer..."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 5, "last_activity_date": 1438203482, "last_edit_date": 1438203482, "creation_date": 1438201726, "answer_id": 31710486, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value/31710486#31710486", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>Trying to provide a bit more details about that:</p>\n\n<p>First, from how you phrased your question, you should understand that pointers don't store values, they store addresses of objects. <code>void</code> is no type at all, and a <code>void *</code> pointer might store the address of <em>anything</em> (as long as it's data, but I don't want to overcomplicate my answer right here).</p>\n\n<p>That's probably where you came from in the first place. But then you made two mistakes:</p>\n\n<ol>\n<li><p>The <code>%f</code> format specifier of <code>printf()</code> doesn't expect a pointer, it expects a value. There's one operation called <em>dereferencing</em> a pointer that fetches the value the pointer points to. In <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> expressions, you have the <em>dereferencing operator</em> written as an asterisk (<code>*</code>) in front of your value to do that.</p></li>\n<li><p>So how can you read a value without knowing the type? You can't! That's why dereferencing a <code>void *</code> pointer is illegal. Means, even if you didn't forget the asterisk and wrote for example <code>printf(\"%f\\n\", *(test()));</code>, the code would be wrong (and this time, your compiler would catch the error).</p></li>\n</ol>\n\n<p>That being said, <code>void *</code> pointers in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> are meant as a <em>generic</em> pointer and are therefore implicitly convertible to and from any other data pointer type (note this is different in <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a>). So one way to write your program correctly would be:</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[]){\n     float *f = test();\n     printf(\"%f\\n\", *f);\n     return 0;\n}\n</code></pre>\n\n<p><strong>edit:</strong> From the fact that <code>void *</code> is implicitly convertible to/from other data pointer types follows your <code>test()</code> could be as simple as that:</p>\n\n<pre><code>void *test()\n{\n     return &amp;floating;\n}\n</code></pre>\n\n<p><strong>edit2:</strong> As you're new to pointers, adding an advice not directly related to your question: In a variable declaration in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a>, the asterisk <em>binds</em> to the <em>identifier</em> (variable name), not to the type. This means you read <code>int * foo;</code> not as \"foo is a variable of type <em>pointer to int</em>\" but as \"foo is a pointer variable of type <em>int</em>\". This has a serious implication when writing e.g. <code>int * foo, bar;</code> -- foo will be a pointer, bar a normal variable. Therefore the advice is: make it explicit by writing e.g. <code>void *test</code> instead of <code>void* test</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 3981203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fzSg5.jpg?s=128&g=1", "display_name": "cwfighter", "link": "https://stackoverflow.com/users/3981203/cwfighter"}, "is_accepted": false, "score": 2, "last_activity_date": 1438221298, "creation_date": 1438221298, "answer_id": 31714002, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value/31714002#31714002", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>I have test in my IDE. The <code>function()</code> is correct, what you need to modify is <code>printf()</code>. My answer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nfloat floating = 4.5;\n\nvoid* test(){\n    void* test = &amp;floating;\n    return test;\n}\n\nint main()\n{\n\n    printf(\"%f\\n\", *(float *)test());  //modify here\n    return 0;\n}\n</code></pre>\n\n<p>I hope this can help you.</p>\n"}], "owner": {"reputation": 85, "user_id": 5170914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0679c147b9cf0ff15872eb66783e8669?s=128&d=identicon&r=PG&f=1", "display_name": "VM Nova", "link": "https://stackoverflow.com/users/5170914/vm-nova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2231, "favorite_count": 0, "answer_count": 7, "score": 4, "last_activity_date": 1438927972, "creation_date": 1438200199, "last_edit_date": 1438203589, "question_id": 31710067, "link": "https://stackoverflow.com/questions/31710067/c-why-cant-a-void-pointer-store-a-float-value", "title": "C Why can&#39;t a void pointer store a float value?", "body": "<p>I'm trying to return a float value but when I print it out, I get 0.0.</p>\n\n<pre><code>float floating = 4.5;\n\nvoid* function(){\n    void* test = &amp;floating;\n    return test;\n}\n\nint _tmain(int argc, _TCHAR* argv[]){\n     printf(\"%f\\n\", test());\n     return 0;\n}\n</code></pre>\n\n<p>Any ideas on why it's not printing out 4.5?  Sorry if this is a noob question, I'm still fairly new to this.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 4, "creation_date": 1438200371, "post_id": 31709957, "comment_id": 51358224, "body": "If you are compiling with gcc, you really need to (a) use the -Wall option, and (b) read the warnings. <a href=\"http://ideone.com/Z1uz5R\" rel=\"nofollow noreferrer\">ideone.com/Z1uz5R</a>"}, {"owner": {"reputation": 95, "user_id": 3123568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b56990f47d82a99a324cead27f8c3666?s=128&d=identicon&r=PG&f=1", "display_name": "tjm", "link": "https://stackoverflow.com/users/3123568/tjm"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1438201877, "post_id": 31709957, "comment_id": 51359058, "body": "Thanks for the hint, how can it even work in the first place for smaller numbers when the correct header is not included?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1438204572, "post_id": 31709957, "comment_id": 51360596, "body": "Undeclared functions are assumed to return int. So you get the low order part of the return value, which is then sign-extended and cast to unsigned long."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5170687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a48d4ed8f55d0ff3d6bfe3ffe49e15?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey K", "link": "https://stackoverflow.com/users/5170687/jeffrey-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1438200233, "creation_date": 1438200233, "answer_id": 31710079, "question_id": 31709957, "link": "https://stackoverflow.com/questions/31709957/convert-hex-string-to-unsigned-long-using-strtoul/31710079#31710079", "title": "Convert hex string to unsigned long using strtoul()", "body": "<p>Your solution works properly for me on my local machine. However, I believe you need to include:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>Strtoul is part of stdlib.</p>\n"}], "owner": {"reputation": 95, "user_id": 3123568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b56990f47d82a99a324cead27f8c3666?s=128&d=identicon&r=PG&f=1", "display_name": "tjm", "link": "https://stackoverflow.com/users/3123568/tjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4918, "favorite_count": 0, "accepted_answer_id": 31710079, "answer_count": 1, "score": 4, "last_activity_date": 1438200233, "creation_date": 1438199824, "question_id": 31709957, "link": "https://stackoverflow.com/questions/31709957/convert-hex-string-to-unsigned-long-using-strtoul", "title": "Convert hex string to unsigned long using strtoul()", "body": "<p>I have this silly example program that takes an input value as hex and converts it to an unsigned long integer. After conversion I printf out the result.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (int argc, char *argv[])\n{\n\n    unsigned long int id = 0;\n\n    id = strtoul(argv[1], NULL, 16);\n    printf(\"value: %lx\\n\", id);\n\n    return 0;\n}\n</code></pre>\n\n<p>the problem is that running this program with an hex number larger than 31-bit causes the output value to be completely wrong. The upper 32 bits are all converted into (0xf). Shouldnt strtoul() be able to handle numbers up to 2^64? Why are bits >32 garbage? The machine is a X86_64 and actually, the result is also the same with strtoull().</p>\n\n<pre><code>$ ./ex 0x7fffffff\nvalue: 7fffffff\n\n$ ./ex 0x80000000\nvalue: ffffffff80000000\n\n$ ./ex 0x3cf180000000\nvalue: ffffffff80000000\n</code></pre>\n"}, {"tags": ["c++", "c", "delphi", "delphi-7"], "answers": [{"tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 6, "last_activity_date": 1438199706, "creation_date": 1438199706, "answer_id": 31709915, "question_id": 31709867, "link": "https://stackoverflow.com/questions/31709867/how-to-pass-c-c-puchar-correctly/31709915#31709915", "title": "How to pass C/C++ *(PUCHAR)(..) correctly?", "body": "<p><code>UCHAR</code> is an <code>unsigned char</code>. That's <code>Byte</code> in Delphi. <code>PUCHAR</code> is pointer to <code>UCHAR</code>. That's <code>PByte</code> in Delphi.</p>\n\n<p>The original code casts the <code>DWORD</code> to be a pointer to <code>unsigned char</code>, then de-references that pointer, and assigns a value to that <code>unsigned char</code>.</p>\n\n<p>So the Delphi equivalent code is:</p>\n\n<pre><code>PByte(isENABLED)^ := $00;\n</code></pre>\n\n<p>If your Windows unit defines <code>PUCHAR</code> then feel free to write it as:</p>\n\n<pre><code>PUCHAR(isENABLED)^ := $00;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4986144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57d88eeccd406d878dd096db12baa74?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Winford", "link": "https://stackoverflow.com/users/4986144/mike-winford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2111, "favorite_count": 0, "accepted_answer_id": 31709915, "answer_count": 1, "score": 2, "last_activity_date": 1439505378, "creation_date": 1438199526, "last_edit_date": 1439505378, "question_id": 31709867, "link": "https://stackoverflow.com/questions/31709867/how-to-pass-c-c-puchar-correctly", "title": "How to pass C/C++ *(PUCHAR)(..) correctly?", "body": "<p>I need to pass C/C++ code *(PUCHAR)(..) to delphi so I can use it with no errors but I don't know how exactly to do it. At the question I made in an IRC someone told me that \"<em>it cast to pointer to unsigned char and dereference that pointer but I don't think there is such a thing in Delphi</em>\".</p>\n\n<p>Here is an example:</p>\n\n<pre><code>DWORD isENABLED;\n\n...\n\n*(PUCHAR)(isENABLED) = 0x00;\n</code></pre>\n\n<p>In Delphi will be like this?</p>\n\n<pre><code>PUCHAR(isENABLED) := $00;   // Is it right?\n</code></pre>\n\n<p>I know that this question might not be properly written but I don't know how exactly to ask this.\nThanks for your help.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 49544, "user_id": 384706, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4d4c5200e64564047976e390fa9ed1cc?s=128&d=identicon&r=PG", "display_name": "Cratylus", "link": "https://stackoverflow.com/users/384706/cratylus"}, "edited": false, "score": 0, "creation_date": 1438198691, "post_id": 31709584, "comment_id": 51357260, "body": "But <code>current</code> can only be NULL in your function"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1438198753, "post_id": 31709584, "comment_id": 51357306, "body": "<code>current</code> is not assigned to anything.  Who knows what <code>while (current != NULL)</code> will do?  Certainly <code>deleteList()</code> should be something like <code>deleteList(struct node *head)</code> or <code>deleteList(struct node **head)</code> along with other code changes."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438200086, "post_id": 31709584, "comment_id": 51358057, "body": "Yeah. &#39;void deleteList()&#39; - what list?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438205049, "post_id": 31709584, "comment_id": 51360837, "body": "The signature is wrong: <code>void deleteList(void)</code> Also, this is a <i>function</i>, not a <i>method</i>. C does not support methods. Please use correct phrases."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4572388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62604e8d0017da8f8ef69f27467a5882?s=128&d=identicon&r=PG&f=1", "display_name": "Talal Alsarrani", "link": "https://stackoverflow.com/users/4572388/talal-alsarrani"}, "edited": false, "score": 0, "creation_date": 1438200389, "post_id": 31709721, "comment_id": 51358238, "body": "That is what I thought first, but the method was given without the passing anything in the parameter: it was only like this:    &#39;void deleteList(){   }&#39;"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 25, "user_id": 4572388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62604e8d0017da8f8ef69f27467a5882?s=128&d=identicon&r=PG&f=1", "display_name": "Talal Alsarrani", "link": "https://stackoverflow.com/users/4572388/talal-alsarrani"}, "edited": false, "score": 0, "creation_date": 1438200502, "post_id": 31709721, "comment_id": 51358303, "body": "@TalalAlsarrani So is the list in question stored in a global variable?  If so, you should use that as your <code>current</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1438203841, "last_edit_date": 1438203841, "creation_date": 1438198989, "answer_id": 31709721, "question_id": 31709584, "link": "https://stackoverflow.com/questions/31709584/a-method-to-delete-the-elements-in-a-linkedlist-using-c/31709721#31709721", "title": "A method to delete the elements in a linkedlist using C", "body": "<p>Your function needs to be passed the head of the list, i.e. <code>struct node *head</code> that it can operate on.  Then you can use that instead of <code>current</code> to keep track of the current head.</p>\n\n<pre><code>void deleteList(struct node *head){\n\n    struct node* next;\n\n    while (head!= NULL) {\n        next = head-&gt;next;\n        free(head);\n        head = next;\n    }\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Since the list head is a global variable, then you would do this:</p>\n\n<pre><code>struct node *head;   // Initialized elsewhere\n\nvoid deleteList(){\n\n    struct node* current = head;\n    struct node* next;\n\n    while (current != NULL) {\n        next = current-&gt;next;\n        free(current);\n        current = next;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 4572388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62604e8d0017da8f8ef69f27467a5882?s=128&d=identicon&r=PG&f=1", "display_name": "Talal Alsarrani", "link": "https://stackoverflow.com/users/4572388/talal-alsarrani"}, "edited": false, "score": 0, "creation_date": 1438200361, "post_id": 31709959, "comment_id": 51358219, "body": "That is what I thought first, but the method was given without the passing anything in the parameter: it was only like this:    void deleteList(){   }"}, {"owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "reply_to_user": {"reputation": 25, "user_id": 4572388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62604e8d0017da8f8ef69f27467a5882?s=128&d=identicon&r=PG&f=1", "display_name": "Talal Alsarrani", "link": "https://stackoverflow.com/users/4572388/talal-alsarrani"}, "edited": false, "score": 0, "creation_date": 1438200484, "post_id": 31709959, "comment_id": 51358296, "body": "That would seem to suggest that your list is some kind of globally scoped variable.  Assuming your list variable is called my_list, and it contains a pointer to the first node called first_node, you might write:  struct node * current = my_list-&gt;first_node instead of passing in the parameter."}], "tags": [], "owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "is_accepted": false, "score": 0, "last_activity_date": 1438200395, "last_edit_date": 1438200395, "creation_date": 1438199832, "answer_id": 31709959, "question_id": 31709584, "link": "https://stackoverflow.com/questions/31709584/a-method-to-delete-the-elements-in-a-linkedlist-using-c/31709959#31709959", "title": "A method to delete the elements in a linkedlist using C", "body": "<p>Your function never assigns \"current\" to any node to begin with.  Because of this your while loop never runs because \"current\" effectively always equals NULL (<strong>hopefully</strong>, actually it is undefined and could cause very strange behavior).  The loop is always skipped.  Try passing the first node of the list into your function as a parameter:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void deleteList(struct node * start) {\n\n    //\"start\" points to the first node in the list, point \"current\" at it\n    struct node * current = start;\n    struct node * next;\n\n    while (current != NULL) {\n       next = current-&gt;next;\n       //what's this pop doing?  It seems unnecessary to the logic here\n       pop(next);\n       //free \"current\" and then point \"current\" at \"next\"\n       free(current); \n       current = next;\n    }\n}\n</code></pre>\n\n<p>This would also allow you to release an arbitrary segment of the end of the list by providing \"start\" the node you want to begin releasing at.  It need not be the very first node.</p>\n"}], "owner": {"reputation": 25, "user_id": 4572388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62604e8d0017da8f8ef69f27467a5882?s=128&d=identicon&r=PG&f=1", "display_name": "Talal Alsarrani", "link": "https://stackoverflow.com/users/4572388/talal-alsarrani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 31709721, "answer_count": 2, "score": 0, "last_activity_date": 1438220526, "creation_date": 1438198534, "last_edit_date": 1438220526, "question_id": 31709584, "link": "https://stackoverflow.com/questions/31709584/a-method-to-delete-the-elements-in-a-linkedlist-using-c", "title": "A method to delete the elements in a linkedlist using C", "body": "<p>So I'm asked to make a method that empty out the entire linked list. </p>\n\n<p>This is what I have now, and I have no idea why it doesn't want to work: </p>\n\n<pre><code>void deleteList(){\n\n\n\n    }\n</code></pre>\n"}, {"tags": ["ios", "c", "xcode"], "comments": [{"owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "edited": false, "score": 0, "creation_date": 1438198001, "post_id": 31709333, "comment_id": 51356891, "body": "You just linked your project against the library. You haven&#39;t add that header file from that library to your project. Either add to your to project directly or configure the Header Search Path settings in Xcode."}], "answers": [{"comments": [{"owner": {"reputation": 10043, "user_id": 389161, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c77a349e89f6e9c0f109e528f90ca6f1?s=128&d=identicon&r=PG", "display_name": "Taranfx", "link": "https://stackoverflow.com/users/389161/taranfx"}, "edited": false, "score": 0, "creation_date": 1438201126, "post_id": 31709406, "comment_id": 51358687, "body": "is there no way to link .so or .a libraries? I cant attach the source coz it has huge set of dependencies"}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "reply_to_user": {"reputation": 10043, "user_id": 389161, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c77a349e89f6e9c0f109e528f90ca6f1?s=128&d=identicon&r=PG", "display_name": "Taranfx", "link": "https://stackoverflow.com/users/389161/taranfx"}, "edited": false, "score": 0, "creation_date": 1438238294, "post_id": 31709406, "comment_id": 51370714, "body": "@Taranfx Not finding a header file happens in a compilation stage well before linking. So your current problem has nothing to do with linking as such. Are you familiair with C compiler stages?"}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "reply_to_user": {"reputation": 10043, "user_id": 389161, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c77a349e89f6e9c0f109e528f90ca6f1?s=128&d=identicon&r=PG", "display_name": "Taranfx", "link": "https://stackoverflow.com/users/389161/taranfx"}, "edited": false, "score": 0, "creation_date": 1438284572, "post_id": 31709406, "comment_id": 51400401, "body": "@Taranfx I&#39;ve added some explanation how Java and C differ.  If you need more details I kindly point you to wikipedia or just do a google search (instead of me repeating what&#39;s available online). HTH and good luck!  I understand your pain."}], "tags": [], "owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "is_accepted": true, "score": 2, "last_activity_date": 1438285678, "last_edit_date": 1438285678, "creation_date": 1438197937, "answer_id": 31709406, "question_id": 31709333, "link": "https://stackoverflow.com/questions/31709333/linking-c-libraries-in-xcode-ios/31709406#31709406", "title": "Linking C libraries in Xcode iOS", "body": "<p>You also need to add the header file(s) to you project.  Or, if the headers are better off somewhere else, you need to add a Header Search Path to your Xcode target's Build Settings; in that way Xcode can find them.</p>\n\n<p>Coming from Java: C has header files in which you typically declare public interfaces of a matching source file.  Where in Java you have <code>import</code> after which the compiler sorts it all out for you <strong>from the binaries</strong>, in C you need to <code>#include</code> the public definitions as header <strong>at the source file level</strong>.</p>\n"}], "owner": {"reputation": 10043, "user_id": 389161, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c77a349e89f6e9c0f109e528f90ca6f1?s=128&d=identicon&r=PG", "display_name": "Taranfx", "link": "https://stackoverflow.com/users/389161/taranfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "accepted_answer_id": 31709406, "answer_count": 1, "score": 1, "last_activity_date": 1438285678, "creation_date": 1438197691, "question_id": 31709333, "link": "https://stackoverflow.com/questions/31709333/linking-c-libraries-in-xcode-ios", "title": "Linking C libraries in Xcode iOS", "body": "<p>I built C code separately and have libperson.a output. I want to include this library into my xcode project.\nAdded this .a under \u201cLink Binary with Libraries\u201d to my project.</p>\n\n<pre><code>#import \"person.h\"\n</code></pre>\n\n<p>It can't find the person.h. What am I doing wrong?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "microcontroller"], "comments": [{"owner": {"reputation": 3163, "user_id": 34369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08127c138596c3d6e9a7414702fd7230?s=128&d=identicon&r=PG", "display_name": "Baget", "link": "https://stackoverflow.com/users/34369/baget"}, "edited": false, "score": 0, "creation_date": 1438196373, "post_id": 31708898, "comment_id": 51355980, "body": "There is a session on it in the RPI site <a href=\"http://elinux.org/Raspberry_Pi_Kernel_Compilation#2._Cross_compiling_from_Linux\" rel=\"nofollow noreferrer\">elinux.org/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1438204759, "creation_date": 1438204759, "answer_id": 31711337, "question_id": 31708898, "link": "https://stackoverflow.com/questions/31708898/native-compilation-build-linux-kernel-embedded-system/31711337#31711337", "title": "native compilation &amp; build linux kernel embedded system", "body": "<p>I'd say your first two steps haven't much to do with <em>cross-compiling</em>. In fact it just comes down to having a <em>cross toolchain</em> targeting your platform correctly installed on your system.</p>\n\n<p>The <code>CROSS_COMPILE</code> make variable of the kernel doesn't do anything other than prepending the string it is set to to any toolchain command (like e.g. <code>gcc</code> for compiling), so if your <em>cross toolchain</em> is installed in your search path, it would be enough to set it to just the desired <a href=\"http://wiki.osdev.org/Target_Triplet\" rel=\"nofollow\">target triplet</a> with added hyphen, e.g. in your case <code>CROSS_COMPILE=arm-linux-gnueabi-</code>. This would lead to using the command <code>arm-linux-gnueabi-gcc</code> for compiling and so on.</p>\n\n<p>For other embedded devices, you might need different cross toolchains (depending on their architecture), but the general process would indeed stay the same.</p>\n"}], "owner": {"reputation": 858, "user_id": 4806970, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EO255.jpg?s=128&g=1", "display_name": "LandonZeKepitelOfGreytBritn", "link": "https://stackoverflow.com/users/4806970/landonzekepitelofgreytbritn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1438204759, "creation_date": 1438196225, "question_id": 31708898, "link": "https://stackoverflow.com/questions/31708898/native-compilation-build-linux-kernel-embedded-system", "title": "native compilation &amp; build linux kernel embedded system", "body": "<p>I have cross-compiled a kernel, in an autodidactic manner, on a raspberry pi twice in the past.\nThis kind of things can sometimes a pain in the ... But fortunately there are some step-by-step tutorials.</p>\n\n<p>So I am wondering whether there are general steps that have to be taken and that are the same on all the embedded systems (rpi, beaglebone, atmega controllers, etc...) in order to successfully cross-compile the kernel and make everything work?</p>\n\n<p>My guess:</p>\n\n<p>1) download the kernel source code </p>\n\n<p>2) generate a .config file (which seems necessary)</p>\n\n<p>3) get into the blue screen to do additional adjustements\n   with e.g.: make ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi- menuconfig</p>\n\n<p>4) compile the kernel:\nmake ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi- </p>\n\n<p>5) put it on the SD card or anything else</p>\n\n<p>Would this be a correct general scheme for any cross-compilation on an embedded system?\nSorry for my ignorance, as I mentioned above I learned it by myself.</p>\n\n<p>I would like to be able to setup a kernel on any embedded device.\nAny more information or explanation would be more than welcome! As it seems this kind of things can always be done in multiple manners, it gets me confused. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438196320, "post_id": 31708886, "comment_id": 51355958, "body": "Note that it&#39;s <code>-lrt</code>, not <code>-1rt</code> (it&#39;s an &#39;L&#39;, not the digit &#39;1&#39;). You need to put it on the line that builds the executable (so, in the line after <code>example: $(objects)</code>). Make sure it&#39;s the last thing on that line."}, {"owner": {"reputation": 485, "user_id": 3593148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6283afac38d96e96ceb1e0360746e2f?s=128&d=identicon&r=PG&f=1", "display_name": "user3593148", "link": "https://stackoverflow.com/users/3593148/user3593148"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438197191, "post_id": 31708886, "comment_id": 51356474, "body": "@FilipeGon&#231;alves i changed it to lower case L but it still looks different. Does it have to look exactly like yours because in TextEdit it looks different."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438197289, "post_id": 31708886, "comment_id": 51356524, "body": "It&#39;s a lower-case &#39;L&#39;. I just typed upper-case to show the difference. See dbush&#39;s answer, that&#39;s what you need."}, {"owner": {"reputation": 485, "user_id": 3593148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6283afac38d96e96ceb1e0360746e2f?s=128&d=identicon&r=PG&f=1", "display_name": "user3593148", "link": "https://stackoverflow.com/users/3593148/user3593148"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438198987, "post_id": 31708886, "comment_id": 51357437, "body": "@FilipeGon&#231;alves edited my question. Added a picture of how lrt looks in my text editor. Is the font of the l causing it to not work?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438199084, "post_id": 31708886, "comment_id": 51357494, "body": "It looks good. I would suggest posting the actual error message (or describe whatever problem you&#39;re having); that might be a better clue for us to help you."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438199130, "post_id": 31708886, "comment_id": 51357522, "body": "The font has nothing to do with it.  As long as it&#39;s a lower case L it should be fine.  If it&#39;s still not working, post the error message."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1438199844, "post_id": 31708886, "comment_id": 51357925, "body": "See my answer. You need to include <code>time.h</code> in the source code."}, {"owner": {"reputation": 485, "user_id": 3593148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6283afac38d96e96ceb1e0360746e2f?s=128&d=identicon&r=PG&f=1", "display_name": "user3593148", "link": "https://stackoverflow.com/users/3593148/user3593148"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438202279, "post_id": 31708886, "comment_id": 51359286, "body": "@dbush posted it, my code looks exactly like ritesh posted, and I&#39;m importing time.h and I&#39;m still getting those errors."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438202494, "post_id": 31708886, "comment_id": 51359428, "body": "If that&#39;s the case, then something else is off.  Please post your code (in text format, not a screenshot) so we can get more context on what your error is."}, {"owner": {"reputation": 485, "user_id": 3593148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6283afac38d96e96ceb1e0360746e2f?s=128&d=identicon&r=PG&f=1", "display_name": "user3593148", "link": "https://stackoverflow.com/users/3593148/user3593148"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438203542, "post_id": 31708886, "comment_id": 51360026, "body": "@dbush added the code"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438203662, "post_id": 31708886, "comment_id": 51360101, "body": "It compiles fine for me with <code>gcc -Wall -o &#47;tmp&#47;x1 &#47;tmp&#47;x1.c -lrt</code>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1438196358, "creation_date": 1438196358, "answer_id": 31708940, "question_id": 31708886, "link": "https://stackoverflow.com/questions/31708886/how-to-include-clock-gettime-in-a-c-make-file/31708940#31708940", "title": "How to include clock_gettime in a c make file", "body": "<p>You want to put it on the line that links the executable.  Namely, the line that specifies the <code>-o</code> option.  That's where the linker phase is carried out.</p>\n\n<pre><code>example: $(objects)\n    $(CC) $(CFLAGS) -o example $(objects) -lrt\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1438199790, "post_id": 31709847, "comment_id": 51357898, "body": "LDLIBS for libraries, LDFLAGS for other linker options, usually. Of course you can call it whatever you want as long as you don&#39;t need implicit rules to work."}, {"owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "edited": false, "score": 0, "creation_date": 1438199991, "post_id": 31709847, "comment_id": 51358011, "body": "@Wumpus I agree with you."}, {"owner": {"reputation": 17003, "user_id": 188704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3499592f2c9d48d68eb861845a83888?s=128&d=identicon&r=PG", "display_name": "Heath Hunnicutt", "link": "https://stackoverflow.com/users/188704/heath-hunnicutt"}, "edited": false, "score": 0, "creation_date": 1438203850, "post_id": 31709847, "comment_id": 51360204, "body": "@Ritesh, that is confusing.  You agree you don&#39;t need implicit rules to work?"}], "tags": [], "owner": {"reputation": 1639, "user_id": 2073349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0266d3aafa1813f794a5b71058d5cd27?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2073349/ritesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1438199450, "creation_date": 1438199450, "answer_id": 31709847, "question_id": 31708886, "link": "https://stackoverflow.com/questions/31708886/how-to-include-clock-gettime-in-a-c-make-file/31709847#31709847", "title": "How to include clock_gettime in a c make file", "body": "<pre><code>CFLAGS = -g -Wall -std=c99\nCC = gcc\nLDFLAGS = -lrt\n\nobjects = example.o\n\nexample: $(objects)\n    $(CC) $(CFLAGS) -o example $(objects) $(LDFLAGS)\n\nexample.o: example.c\n    $(CC) $(CFLAGS) -c example.c\nclean:\n    rm test $(objects)\n</code></pre>\n\n<p>As this is linker option, so its best to use as LDFLAGS variable which is common practice in Makefiles.</p>\n"}, {"tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": false, "score": 0, "last_activity_date": 1438199810, "creation_date": 1438199810, "answer_id": 31709950, "question_id": 31708886, "link": "https://stackoverflow.com/questions/31708886/how-to-include-clock-gettime-in-a-c-make-file/31709950#31709950", "title": "How to include clock_gettime in a c make file", "body": "<p>The other answers are correct, but your problem seems to be that you're not including the necessary header files.</p>\n\n<p>Add this in your source code:</p>\n\n<pre><code>#include &lt;time.h&gt;\n</code></pre>\n"}], "owner": {"reputation": 485, "user_id": 3593148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6283afac38d96e96ceb1e0360746e2f?s=128&d=identicon&r=PG&f=1", "display_name": "user3593148", "link": "https://stackoverflow.com/users/3593148/user3593148"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1438203706, "creation_date": 1438196181, "last_edit_date": 1438203706, "question_id": 31708886, "link": "https://stackoverflow.com/questions/31708886/how-to-include-clock-gettime-in-a-c-make-file", "title": "How to include clock_gettime in a c make file", "body": "<p>I know that in order to use the <code>clock_gettime(2)</code> function, you have to include <code>-lrt</code> in the makefile but I have no idea where it goes. Where would I put it in the example makefile.</p>\n\n<pre><code>CFLAGS = -g -Wall -std=c99\nCC = gcc\n\nobjects = example.o\n\nexample: $(objects)\n    $(CC) $(CFLAGS) -o example $(objects)\n\nexample.o: example.c\n    $(CC) $(CFLAGS) -c example.c\nclean:\n    rm test $(objects)\n</code></pre>\n\n<p>Edit: how my lrt looks.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UaLkq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UaLkq.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/GgJ3o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GgJ3o.png\" alt=\"enter image description here\"></a></p>\n\n<p>What my code is:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdlib.h\"\n#include &lt;time.h&gt;\n\nint main(int argc, char *argv[]) {\n\n    struct timespec starttime, endtime;\n    double elapsed;\n    clock_gettime(CLOCK_REALTIME, &amp;starttime);\n\n    /// work to be timed\n\n    clock_gettime(CLOCK_REALTIME, &amp;endtime);\n    elapsed = ((endtime.tv_sec-starttime.tv_sec)*1000000000.0 + (endtime.tv_nsec - starttime.tv_nsec))/1000000000;\n    // elapsed time can also be calculated as\n    if (endtime.tv_nsec &lt; starttime.tv_nsec) {\n        // borrow a second\n        elapsed = (endtime.tv_sec - starttime.tv_sec - 1) + (1000000000.0 + endtime.tv_nsec - starttime.tv_nsec)/1000000000;\n    }\n    else {\n        elapsed = (endtime.tv_sec - starttime.tv_sec ) + (endtime.tv_nsec - starttime.tv_nsec)/1000000000;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "hash", "hashtable", "openmp"], "comments": [{"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1438197046, "post_id": 31708796, "comment_id": 51356390, "body": "What happens when you use <code>#pragma omp critical Expand { Expand_hash_table(my_hash_table); }</code> instead? Here <code>Expand</code> is just a random name for this critical section."}, {"owner": {"reputation": 805, "user_id": 1270042, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cecd733ff030526fa7713dfccc8ca52a?s=128&d=identicon&r=PG", "display_name": "PGOnTheGo", "link": "https://stackoverflow.com/users/1270042/pgonthego"}, "reply_to_user": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 1, "creation_date": 1438198159, "post_id": 31708796, "comment_id": 51356979, "body": "Adding a critical region, would ensure only 1 thread performs the expansion, but it does not restrict access to the hash table. Other threads, are still updating sections in the hash table during the Insert/Append functions. I want to ensure that at the time Expand_hash_table() is called, no other thread can update any region of the hash table. Is there a way to do that?"}, {"owner": {"reputation": 12661, "user_id": 648955, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/DUiuD.jpg?s=128&g=1", "display_name": "leventov", "link": "https://stackoverflow.com/users/648955/leventov"}, "edited": false, "score": 0, "creation_date": 1438204620, "post_id": 31708796, "comment_id": 51360629, "body": "I&#39;m not a C/OpenMP expert, I can only prove that this idea is NOT inherently faulty, the same idea is implemented in project <a href=\"https://github.com/giltene/PauselessHashMap\" rel=\"nofollow noreferrer\">github.com/giltene/PauselessHashMap</a> and it seems it works."}, {"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "edited": false, "score": 0, "creation_date": 1438218410, "post_id": 31708796, "comment_id": 51364921, "body": "The obvious solution would be to have the thread doing the expansion  set all of the bucket locks - which will both prevent other threads from starting writes, and prevent the expansion from taking place while another threads are still writing."}, {"owner": {"reputation": 805, "user_id": 1270042, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cecd733ff030526fa7713dfccc8ca52a?s=128&d=identicon&r=PG", "display_name": "PGOnTheGo", "link": "https://stackoverflow.com/users/1270042/pgonthego"}, "reply_to_user": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "edited": false, "score": 0, "creation_date": 1438276104, "post_id": 31708796, "comment_id": 51395556, "body": "@JonathanDursi: I thought of that. But what if the thread doing the expansion, encounters a(or multiple) buckets that have already been locked by other threads at the time. I tried the omp_test_lock feature, to test for availability of each bucket lock, but that really slows things down. Any ideas on how to improve upon this?"}, {"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "edited": false, "score": 1, "creation_date": 1438282535, "post_id": 31708796, "comment_id": 51399310, "body": "@Hello_PG - but the expansion <i>has</i> to wait for those writers to finish anyway; some form of synchronization there is inevitable and indeed desired.  The alternative is to re-structure the synchronization..."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1438330621, "post_id": 31708796, "comment_id": 51416648, "body": "Perhaps you could just use an existing parallel hash table (for instance the parallel hash map in TBB <a href=\"https://www.threadingbuildingblocks.org/docs/help/reference/containers_overview/concurrent_hash_map_cls.htm\" rel=\"nofollow noreferrer\">threadingbuildingblocks.org/docs/help/reference/&hellip;</a> ). I don&#39;t think that it requires that you also use TBB for parallelism."}], "owner": {"reputation": 805, "user_id": 1270042, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cecd733ff030526fa7713dfccc8ca52a?s=128&d=identicon&r=PG", "display_name": "PGOnTheGo", "link": "https://stackoverflow.com/users/1270042/pgonthego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438195871, "creation_date": 1438195871, "question_id": 31708796, "link": "https://stackoverflow.com/questions/31708796/implement-parallel-hash-table-expansion-re-sizing-a-hash-table-within-an-openmp", "title": "Implement parallel Hash Table expansion (re-sizing a hash table within an OpenMP parallel region)", "body": "<p>I am trying to implemented the expansion of a Hash table within an OpenMP parallel region. What I want to achieve: Only 1 thread proceeds with the expansion (locks the entire table and updates it), while the remaining threads refrain from updating the table while the expansion is in progress.</p>\n\n<p>My code either deadlocks or as seen below (in the printf statements), is being updated by other threads while the expansion process is ongoing. </p>\n\n<p>Is there a better way to tackling such a problem, or is my approach plain faulty?</p>\n\n<p>Following are a few code snippets:</p>\n\n<pre><code>#define WIN_SIZE                        30\n#define HASH_TAB_SIZE                   100\n\nomp_lock_t hash_lock;\n\n/* Each key-value pair entry */\ntypedef struct htable_each_entry\n{\n        // key comprising of k+1 mer\n        char kmer_plus_one[WIN_SIZE_PLUS];\n\n        // value is a linked-list of read_id's\n        struct read_info *read_list;\n\n        struct htable_each_entry *hh_next;\n        struct htable_each_entry *hh_prev;\n\n} htable_entry;\n\n/* structure for each bucket entry */\ntypedef struct htable_each_bucket\n{\n        htable_entry *series;\n\n        // Lock for each bucket entry\n        omp_lock_t writelock;\n\n        int count;\n\n} htable_bucket;\n\n/* structure for the Hash table */\ntypedef struct hash_table_t {\n        size_t size;\n        htable_bucket *buckets;\n\n} hash_table_t;\n</code></pre>\n\n<blockquote>\n<pre><code>    int main (int argc, char *argv[])\n    {\n         /* Initializing global lock on table */                         \n              omp_init_lock(&amp;hash_lock);\n\n            hash_table_t *my_hash_table = create_hash_table(HASH_TAB_SIZE);\n\n    #pragma omp parallel shared(rd_seq, my_hash_table, hash_lock)\n            {\n                    int i=0;\n\n                    //Populating the hash table\n    #pragma omp for schedule(static) private(i) firstprivate(num_lines) nowait\n                    for (i=0; i&lt;num_lines; i++)\n                    {\n                            Sliding_window(my_hash_table,i);\n                    }\n\n            }\n            double end_t = omp_get_wtime ();\n            printf (\"\\nTime for populating entries to the hash table: %f\\n\", (end_t - start_t));\n\n            int num_entries = count_hashtab_entries(my_hash_table);\n            printf(\"There are %d entries in the Hash table \\n\", num_entries);\n    }\n\n\n\n    void Sliding_window (hash_table_t *my_hash_table, int idx)\n    {\n            char kmer_plus_1[WIN_SIZE_PLUS];\n            int i=0;\n            Sequence_r r_seq;\n            htable_entry *tag;\n\n            r_seq = rd_seq[idx];\n\n            /* Table is resized when the number of unique entries in the hash table \n               exceeds half the number of total buckets allocated.\n               Locking table using \"hash_lock\". Should be executed by 1 thread, whereas the\n               remaining threads should wait and refrain from updating the table, while table\n               expansion process is in progress.\n            */\n\n            omp_set_lock(&amp;hash_lock);\n\n            if (count_hashtab_entries(my_hash_table) &gt;= (my_hash_table-&gt;size/2)) {\n\n                 printf(\"BEFORE EXPAND: entries in hash table: %d Size: %d thread: %d &gt; \\n\",count_hashtab_entries(my_hash_table),(int)my_hash_table-&gt;size, omp_get_thread_num());\n\n                    Expand_hash_table(my_hash_table);\n\n                 printf(\"AFTER EXPAND: entries in hash table: %d Size: %d thread: %d \\n\",count_hashtab_entries(my_hash_table),(int)my_hash_table-&gt;size, omp_get_thread_num());\n\n            }\n\n            /* Table expansion done, hence releasing the lock. */\n            omp_unset_lock(&amp;hash_lock);\n\n        for(i=0; (r_seq.rlen - i) &gt; WIN_SIZE; i++)\n        {\n                memcpy(kmer_plus_1,&amp;r_seq.read_data[i],WIN_SIZE+1);\n                kmer_plus_1[WIN_SIZE+1] = '\\0';\n                htable_entry *entry_returned = NULL;\n\n                unsigned bucket_id = generate_hash(my_hash_table, kmer_plus_1);\n\n                // setting a lock on the respective bucket obtained from hashing \n                omp_set_lock(&amp;(my_hash_table-&gt;buckets[bucket_id].writelock));\n\n                // Check if key already exists ?\n                tag = Find_key_exists(my_hash_table, kmer_plus_1, bucket_id, &amp;entry_returned);\n\n                if (tag != NULL) /* Key already exists */\n                {\n                        append_read_info(tag, idx, i);\n                } else {\n                        /* key does not exist, therefore insert in hashtable */\n                        tag =  (htable_entry *) malloc(sizeof( htable_entry ));\n                        strcpy(tag-&gt;kmer_plus_one, kmer_plus_1);\n                        tag-&gt;read_list = NULL;\n\n                        Insert_key(my_hash_table, tag, bucket_id, entry_returned);\n                        append_read_info(tag, idx, i);\n                }\n\n                // release lock on the respective bucket. \n                omp_unset_lock(&amp;(my_hash_table-&gt;buckets[bucket_id].writelock));\n       }\n}\n</code></pre>\n</blockquote>\n\n<p>OUTPUT:</p>\n\n<pre><code>BEFORE EXPAND: entries in hash table: 500094 Size: 1000000 thread: 0 \nAFTER EXPAND: entries in hash table: 500115 Size: 2000000 thread: 0 \n</code></pre>\n\n<p>(Note: To avoid my post from becoming exceeding long, I have not added the Expand_hash_table procedure. I can update it if need be.)</p>\n\n<p>As seem above the number of entries in the hash table has exceeded while the expansion process was in progress. Which means, inspite of the lock, multiple threads accessed and updated regions of the hash table.</p>\n\n<p>Is there a way I can ensure atomicity during the resizing of the hash table, done within an \"OpenMP parallel for\" region? </p>\n"}, {"tags": ["c", "singly-linked-list"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1438195434, "post_id": 31708576, "comment_id": 51355450, "body": "Grab a linked list implementation, include a char array/string in structure, make compare function, start swapping entries as needed for sorting.  C doesn&#39;t do templates unfortunately - this is where containers in C++ really shine."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438195915, "post_id": 31708576, "comment_id": 51355727, "body": "If you want your sorting to be somewhat performant, consider using an array instead of a linked list. If your members can vary in size, an array of pointers will do. For arrays, there&#39;s already the generic <code>qsort()</code> in the standard lib."}, {"owner": {"reputation": 131, "user_id": 3620250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNyfe.jpg?s=128&g=1", "display_name": "Dipanjan", "link": "https://stackoverflow.com/users/3620250/dipanjan"}, "edited": false, "score": 0, "creation_date": 1438196035, "post_id": 31708576, "comment_id": 51355793, "body": "Check out the below link. Might be useful in your case.    <a href=\"http://stackoverflow.com/questions/23175782/sorting-linked-list-alphabetically-in-c\" title=\"sorting linked list alphabetically in c\">stackoverflow.com/questions/23175782/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5170687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58a48d4ed8f55d0ff3d6bfe3ffe49e15?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey K", "link": "https://stackoverflow.com/users/5170687/jeffrey-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1438195918, "creation_date": 1438195918, "answer_id": 31708806, "question_id": 31708576, "link": "https://stackoverflow.com/questions/31708576/alphabetically-sorting-a-linked-list/31708806#31708806", "title": "Alphabetically Sorting a Linked List", "body": "<p>This mergesort algorithm for linked list could be useful for you. It's use is generic where you could alter it to your use case. There is also some C code for you to follow along with.</p>\n\n<p><a href=\"http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\" rel=\"nofollow\">http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html</a></p>\n"}], "owner": {"reputation": 27, "user_id": 5012837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/999292160083761/picture?type=large", "display_name": "Tommy Buzaki", "link": "https://stackoverflow.com/users/5012837/tommy-buzaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 31708806, "answer_count": 1, "score": -2, "last_activity_date": 1438195918, "creation_date": 1438195123, "question_id": 31708576, "link": "https://stackoverflow.com/questions/31708576/alphabetically-sorting-a-linked-list", "title": "Alphabetically Sorting a Linked List", "body": "<p>Is there a general template for sorting a singly linked list alphabetically? The other posts on here have post-specific code and what I am looking for is more of a broad solution that I can tweak and use repeatedly in the future. I'd even appreciate just a link to somewhere that has an explanation of how to build my own template. </p>\n"}, {"tags": ["c++", "c", "cmake", "makefile"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438194815, "post_id": 31708369, "comment_id": 51355049, "body": "Does the CMake generated Makefile use <code>cd &#47;path&#47;to&#47;my&#47;modules&#47;dostuff &amp;&amp; &#47;usr&#47;bin&#47;make library</code> literally or does it use <code>cd &#47;path&#47;to&#47;my&#47;modules&#47;dostuff &amp;&amp; $(MAKE) library</code>? You could also try adding <code>env</code> or <code>printenv</code> as a command to that recipe to see what the environment at that point looks like. That might tell you something."}, {"owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438195294, "post_id": 31708369, "comment_id": 51355339, "body": "It uses the first. No variable needs to be expanded. I&#39;ll try printing out the environment variables and see if anything useful pops out."}, {"owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438195544, "post_id": 31708369, "comment_id": 51355518, "body": "The variables look right. It doesn&#39;t show me why there exist recipes that need to be overwritten or why it&#39;s trying to run the command I. (cc and cxx are correctly defined)."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438195684, "post_id": 31708369, "comment_id": 51355597, "body": "Is <code>my-make&#47;Make.common</code> a CMake controlled file or part of the &quot;external libraries&quot;?"}, {"owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438256891, "post_id": 31708369, "comment_id": 51382181, "body": "External library. The makefiles for individual projects are pretty bare, just specifying a few files and configurations with the bulk of the process being configured by Make.common."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438269741, "post_id": 31708369, "comment_id": 51391493, "body": "Can we see <code>my-make&#47;Make.common</code> lines 982, 1007 and 1032?"}, {"owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438284518, "post_id": 31708369, "comment_id": 51400374, "body": "I added lines from Make.common."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438285162, "post_id": 31708369, "comment_id": 51400724, "body": "So now I need to know what <code>$(execute)</code>, <code>$(dynlib)</code> and <code>$(library)</code> contain. Given the error message I assume that at the moment they all contain <code>&#47;dostuff</code> presumably because other variables failed to be set correctly. You can try adding <code>-p</code> to the cmake rules to get make to dump out the make database at you (so you&#39;ll see all the rules and variables in the output)."}, {"owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438350513, "post_id": 31708369, "comment_id": 51429120, "body": "Is there a reason, in general, why executing a make command from within CMake should be any different than executing it directly? I&#39;m not understanding why any of these variables should be set incorrectly in one context and not the other."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438354572, "post_id": 31708369, "comment_id": 51432197, "body": "Barring differences in the environment? Not that I can think of offhand. When you compared the environments before was there anything missing from the cmake run environment that might be relevant?"}, {"owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438363693, "post_id": 31708369, "comment_id": 51437394, "body": "I had only cherry picked a few elements that looked alright, but in fact after a diff it looks like the make environment variables that are set in the Makefile aren&#39;t actually being set. Seeing that it&#39;s obvious why it&#39;s failing, but it&#39;s still not obvious why they&#39;re not being set when invoked from CMake."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438363845, "post_id": 31708369, "comment_id": 51437472, "body": "What variables that are set where? The environment that runs make shouldn&#39;t be affected by variables set <i>inside</i> that makefile so I wouldn&#39;t expect them to be there. Unless you mean recursive make variables that normally exist but don&#39;t when cmake triggers the recursive make call? In which case that might be the use of <code>&#47;usr&#47;bin&#47;make</code> instead of <code>$(MAKE)</code> in the generated makefiles."}, {"owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438364032, "post_id": 31708369, "comment_id": 51437571, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/84833/discussion-between-anthony-and-etan-reisner\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1439415417, "creation_date": 1439415417, "answer_id": 31975843, "question_id": 31708369, "link": "https://stackoverflow.com/questions/31708369/running-make-from-cmake-on-external-dependency-forget-cmake-make-rules/31975843#31975843", "title": "Running make from cmake on external dependency - Forget cmake make rules", "body": "<p>As it turns out, the problem was elsewhere in the common makefile script. There was some code to conditionally set some internal variables based on a check of MAKELEVEL to avoid redefining variables on recursive runs. This gets set by CMake's make scripts (mine was at level 4, for example). So I just updated my command to</p>\n\n<pre><code>    COMMAND ${CMAKE_MAKE_PROGRAM} library MAKELEVEL=0\n</code></pre>\n\n<p>And now everything works.</p>\n"}], "owner": {"reputation": 2148, "user_id": 409103, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Y82a9.png?s=128&g=1", "display_name": "Anthony", "link": "https://stackoverflow.com/users/409103/anthony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 31975843, "answer_count": 1, "score": 0, "last_activity_date": 1439415417, "creation_date": 1438194435, "last_edit_date": 1438284448, "question_id": 31708369, "link": "https://stackoverflow.com/questions/31708369/running-make-from-cmake-on-external-dependency-forget-cmake-make-rules", "title": "Running make from cmake on external dependency - Forget cmake make rules", "body": "<p>I'm working with some in-house software that uses it's own Makefile build system. However the software I'm writing needs a bit more flexibility so I'm using CMake which I'd like to configure to build those projects automatically. I'm trying to include these external libraries with their own special build rules via a function like so:</p>\n\n<pre><code>set(MyModuleDir \"/path/to/my/modules\")\nset(MyModules \"\")\nfunction(import_my_module module_name)\n    add_custom_target(build_my_${module_name} ALL\n        COMMAND ${CMAKE_MAKE_PROGRAM} library\n        WORKING_DIRECTORY ${MyModuleDir}/${module_name})\n    add_library(my_${module_name} STATIC IMPORTED)\n    set_target_properties(my_${module_name}\n        PROPERTIES IMPORTED_LOCATION ${MyModuleDir}/${module_name}/lib${module_name}.a)\n    add_dependencies(my_${module_name} build_my_${module_name})\n    include_directories(${MyModuleDir}/${module_name})\n    set(MyModules my_${module_name} ${MyModules} PARENT_SCOPE)\nendfunction()\n</code></pre>\n\n<p>The command it ends up running is correct, say for dostuff library:</p>\n\n<pre><code>cd /path/to/my/modules/dostuff &amp;&amp; /usr/bin/make library\n</code></pre>\n\n<p>Which, if run on it's own, produces correct results. However, inside the CMake makefile execution I instead get some warnings about overriding old recipes and then a bunch of errors as it fails miserably while trying to build, like these:</p>\n\n<pre><code>cd /path/to/my/modules/dostuff &amp;&amp; /usr/bin/make library\nmake[3]: Entering directory '/path/to/my/modules/dostuff'\n../my-make/Make.common:1007: warning: overriding recipe for target '/dostuff'\n../my-make/Make.common:982: warning: ignoring old recipe for target '/dostuff'\n../my-make/Make.common:1032: warning: overriding recipe for target '/dostuff'\n../my-make/Make.common:1007: warning: ignoring old recipe for target '/dostuff'\nI. -I..    -o /myfile -c myfile.c\nmake[3]: I.: Command not found\n../my-make/Make.common:1145: recipe for target '/myfile' failed\nmake[3]: [/myfile] Error 127 (ignored)\nI. -I..    -o /myfile2 -c myfile2.c\nmake[3]: I.: Command not found\n... etc ...\n</code></pre>\n\n<p>So I guess maybe some of CMake's makefile configuration is getting injected in the execution of the other Makefiles. That, or execution from the make context is not allowing the child make process to configure itself properly. I would like to build these projects with a fresh make configuration, without inheriting anything from other make processes. How can this be done?</p>\n\n<p>Here are some of the lines in question from the external makefile:</p>\n\n<pre><code> 980 # Target for objdir's executable.\n 981 $(execute): $(siblibs) $(library) $(maincobjs) $(mainccobjs)\n 982     $(maincppobjs)\n...\n1004 # We make the libraries for each project, which causes all the object\n1005 # files to be created.\n1006 $(dynlib): $(siblibs) $(library)\n1007    @if [ \"$(dynlib_ok)\" = \"1\" ]; then \\\n1008        cd $(OBJDIR); \\\n1009            $(linkcc) $(dynlib_link_flags) \\\n1010                $(LFLAGS) \\\n1011                -o $(notdir $(dynlib)) \\\n1012                $(foreach sobj,$(sibobjs), ../$(sobj)) \\\n1013                $(notdir $(libcobjs)) \\\n1014                $(notdir $(libccobjs)) \\\n1015                $(notdir $(libcppobjs)) \\\n1016                $(LIBS) $(user_libs); \\\n1017    else \\\n...\n1030 $(library): $(libcobjs) $(libccobjs) $(libcppobjs) $(cplibs)\n1031 # numsources must be positive.\n1032    @if [ \"$(numsources)\" -eq 0 -a \"$(nummains)\" -eq 0 ]; then \\\n1033        echo \"There are no sources to compile or libs to be made.\"; \\\n1034        exit 1; \\\n1035    fi\n1036 # Check that sources (incl. main) do not include both libs and c files,\n1037 # or multiple libs.\n1038    @if [ \"$(numcplibs)\" -gt 0 -a \"$(numsources)\" -gt 1 ]; then \\\n1039        echo \"Error: cannot have source files (not incl. main) and\"; \\\n1040        echo \"libs {$(cplibs)}, or multiple libs, in same project\"; \\\n1041        exit 1; \\\n1042    fi\n</code></pre>\n"}, {"tags": ["c", "reference", "stack", "valgrind", "realloc"], "comments": [{"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 1, "creation_date": 1438193872, "post_id": 31708031, "comment_id": 51354528, "body": "What is the value of <code>r</code>? Are you sure that it is initialized?"}, {"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "reply_to_user": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 0, "creation_date": 1438193953, "post_id": 31708031, "comment_id": 51354574, "body": "yes. There is an r=fread(); if(r) { **salt_id=realloc()...}. I just found out that just commenting out sscanf removes the error for some reason."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1438194068, "post_id": 31708031, "comment_id": 51354638, "body": "And the content of <code>buf</code> comes from... ? <i>Post a MCVE please</i>. And for heaven sake, <i>check your IO call results</i>."}, {"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "edited": false, "score": 0, "creation_date": 1438194170, "post_id": 31708031, "comment_id": 51354698, "body": "I updated the code with the previous part. The code works fine."}, {"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438194272, "post_id": 31708031, "comment_id": 51354748, "body": "@WhozCraig Adding a *buf=0 after the fread removes the valgrind error, but destroys functionality"}, {"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1438194751, "post_id": 31708031, "comment_id": 51355014, "body": "@WhozCraig Added MCVE"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1438194920, "post_id": 31708031, "comment_id": 51355128, "body": "Why are you subtracting 2 from <code>r</code> when you call <code>realloc</code>?"}, {"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "edited": false, "score": 0, "creation_date": 1438194988, "post_id": 31708031, "comment_id": 51355168, "body": "no need really, but because it won&#39;t include id:."}, {"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "edited": false, "score": 0, "creation_date": 1438195039, "post_id": 31708031, "comment_id": 51355192, "body": "I found it, it needs a buf[r]=0 after fread.."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1438195043, "post_id": 31708031, "comment_id": 51355196, "body": "You shouldn&#39;t subtract anything. <code>r</code> will be <code>1</code>, so if you subtract anything you won&#39;t allocate any space."}, {"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1438195116, "post_id": 31708031, "comment_id": 51355239, "body": "@Barmar fread returns number of (1-byte) items read."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1438195204, "post_id": 31708031, "comment_id": 51355289, "body": "Oops, I was confused, I was thinking it was <code>read()</code>, and saw <code>1</code> as the buffer size."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1438195333, "post_id": 31708031, "comment_id": 51355371, "body": "Perhaps you should be using <code>fgets()</code> instead of <code>fread</code>, so you read a whole line and it automatically terminates it."}], "answers": [{"comments": [{"owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "edited": false, "score": 1, "creation_date": 1438195326, "post_id": 31708608, "comment_id": 51355362, "body": "yes, memset works too, I prefer to set just 1 byte though. Thanks."}], "tags": [], "owner": {"reputation": 131, "user_id": 3620250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNyfe.jpg?s=128&g=1", "display_name": "Dipanjan", "link": "https://stackoverflow.com/users/3620250/dipanjan"}, "is_accepted": false, "score": 1, "last_activity_date": 1438195220, "creation_date": 1438195220, "answer_id": 31708608, "question_id": 31708031, "link": "https://stackoverflow.com/questions/31708031/valgrind-realloc-error-conditional-jump-or-move-depends-on-uninitialised-value/31708608#31708608", "title": "valgrind realloc error: Conditional jump or move depends on uninitialised value(s)", "body": "<p>Initialize the buf when it is declared or memset it to 0 before fread.  </p>\n"}, {"tags": [], "owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "is_accepted": true, "score": 4, "last_activity_date": 1438195221, "creation_date": 1438195221, "answer_id": 31708609, "question_id": 31708031, "link": "https://stackoverflow.com/questions/31708031/valgrind-realloc-error-conditional-jump-or-move-depends-on-uninitialised-value/31708609#31708609", "title": "valgrind realloc error: Conditional jump or move depends on uninitialised value(s)", "body": "<p>This</p>\n\n<pre><code>r=fread(buf,1,255,fp);\nsscanf(buf,\"id:%s\",....\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>  r=fread(buf,1,255,fp);\n  buf[r]=0;\n  sscanf(buf,\"id:%s\",....\n</code></pre>\n"}], "owner": {"reputation": 1920, "user_id": 848547, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ea2a180c1dfdcd5a12176c633fa0ed2d?s=128&d=identicon&r=PG", "display_name": "sivann", "link": "https://stackoverflow.com/users/848547/sivann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 0, "accepted_answer_id": 31708609, "answer_count": 2, "score": 1, "last_activity_date": 1438195221, "creation_date": 1438193370, "last_edit_date": 1438194698, "question_id": 31708031, "link": "https://stackoverflow.com/questions/31708031/valgrind-realloc-error-conditional-jump-or-move-depends-on-uninitialised-value", "title": "valgrind realloc error: Conditional jump or move depends on uninitialised value(s)", "body": "<pre><code>==17209== Conditional jump or move depends on uninitialised value(s)\n==17209==    at 0x402E7C5: __GI___rawmemchr (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)\n==17209==    by 0x40CE921: _IO_str_init_static_internal (strops.c:45)\n==17209==    by 0x40B0B76: __isoc99_vsscanf (isoc99_vsscanf.c:42)\n==17209==    by 0x8048647: main (lala.c:23)\n==17209==  Uninitialised value was created by a stack allocation\n==17209==    at 0x8048659: gatherInfoSalt (lala.c:28)\n==17209== \n</code></pre>\n\n<p>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n\nstruct sysinfo_s {\n    char *salt_id;\n};\n\n\nvoid gatherInfoSalt(char ** );\n\nint main (int argc, char *argv[]) {\n    struct sysinfo_s si;\n\n    si.salt_id = malloc(1);\n    *si.salt_id = 0;\n\n    gatherInfoSalt(&amp;si.salt_id);\n\n    free(si.salt_id);\n}\n\nvoid gatherInfoSalt(char ** salt_id) {\n    FILE * fp;\n    char buf[256];\n    int r;\n\n\n    if (!(fp = fopen(\"/etc/salt/minion.d/id.conf\",\"r\"))) {\n            perror(\"fopen\");\n        return;\n    }\n\n    r=fread(buf,1,255,fp);\n\n    //adding *buf=0 here removes the error (but removes functionality)\n\n    if (r) {\n        *salt_id=realloc(*salt_id,r-2);\n        **salt_id=0;\n        sscanf(buf,\"id:%s\",*salt_id);\n        //sscanf(buf,\"id:%s\",buf1);\n    }\n\n    printf(\"saltid: %s\\n\",*salt_id);\n\n    fclose(fp);\n\n}\n</code></pre>\n"}, {"tags": ["python", "c", "linux", "scons"], "comments": [{"owner": {"reputation": 14757, "user_id": 172599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21eabf5c0a4d240da9cd1f8b4f52c94a?s=128&d=identicon&r=PG", "display_name": "Dave Bacher", "link": "https://stackoverflow.com/users/172599/dave-bacher"}, "edited": false, "score": 0, "creation_date": 1438194188, "post_id": 31707803, "comment_id": 51354709, "body": "Same problem as: <a href=\"http://stackoverflow.com/q/31232955/172599\">stackoverflow.com/q/31232955/172599</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "is_accepted": true, "score": 2, "last_activity_date": 1438193580, "creation_date": 1438193580, "answer_id": 31708106, "question_id": 31707803, "link": "https://stackoverflow.com/questions/31707803/how-to-use-scons-for-cross-build/31708106#31708106", "title": "How to use scons for cross build", "body": "<pre><code>p = Program( \"prog\", [ \"prog.c\", \"mylib.c\" ], CFLAGS=[ '-Iinclude', '-Werror', '-Wall', '-Wextra' ] )\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>p = env.Program( \"prog\", [ \"prog.c\", \"mylib.c\" ], CFLAGS=[ '-Iinclude', '-Werror', '-Wall', '-Wextra' ] )\n</code></pre>\n\n<p>Using Program instead of env.Program uses the default environment which doesn't have CC,etc set to any non-default values.</p>\n"}], "owner": {"reputation": 320, "user_id": 2464599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0112e8cdb0581da91f5b54f689f30e5?s=128&d=identicon&r=PG", "display_name": "radix", "link": "https://stackoverflow.com/users/2464599/radix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 1, "accepted_answer_id": 31708106, "answer_count": 1, "score": 4, "last_activity_date": 1569233071, "creation_date": 1438192676, "last_edit_date": 1569233071, "question_id": 31707803, "link": "https://stackoverflow.com/questions/31707803/how-to-use-scons-for-cross-build", "title": "How to use scons for cross build", "body": "<p>I am trying to create the simplest imaginable SConstruct file for cross compiling a program.\nI tried different settings, the latest SConstruct file is here:</p>\n\n<pre><code>env_options = {\n    \"CC\"    : \"arm-linux-gnueabihf-gcc\",\n    \"CXX\"   : \"arm-linux-gnueabihf-g++\",\n    \"LD\"    : \"arm-linux-gnueabihf-ld\",\n    \"AR\"    : \"arm-linux-gnueabihf-ar\",\n    \"STRIP\" : \"arm-linux-gnueabihf-strip\"\n}\nenv = Environment(**env_options)\npath = ['/path/to/toolchain/bin/']\nenv.Append( ENV = {'PATH' : path})\n\np = Program( \"prog\", [ \"prog.c\", \"mylib.c\" ], CFLAGS=[ '-Iinclude', '-Werror', '-Wall', '-Wextra' ] )\n</code></pre>\n\n<p>The output of <code>env.Dump()</code> shows e.g.:</p>\n\n<pre><code>{ 'AR': 'arm-linux-gnueabihf-ar',\n  'CC': 'arm-linux-gnueabihf-gcc',\n  'CXX': 'arm-linux-gnueabihf-g++',\n  'ENV': { 'PATH': [ '/path/to/toolchain/bin/']},\n  'LD': 'arm-linux-gnueabihf-ld',\n  'TOOLS': [ 'default',\n         'gnulink',\n         'gcc',\n         'g++',\n         'gas',\n         'ar',\n         'filesystem',\n         'm4',\n         'zip']\n}\n</code></pre>\n\n<p>I don't see any surprises in the <code>env.Dump()</code> output (especially no standard system paths), and thought that in case scons can not find the tools listed in <code>env_options</code> I would at least get an error message.\nInstead, scons uses the default tools and builds the program for my host system.\nI've considered the answers posted <a href=\"https://stackoverflow.com/questions/23898584/how-can-i-use-a-cross-compiler-with-scons\">here(1)</a> and <a href=\"https://stackoverflow.com/questions/3304095/how-to-point-scons-to-a-different-compiler-installed-in-my-home-directory\">here(2)</a> - with no success so far.</p>\n\n<ul>\n<li>What do I miss?</li>\n<li>How is it possible that scons still finds and uses the default tools (I explicitly stated to use a binary <code>arm-linux-gnueabihf-gcc-4.8.3</code> and there are no system paths like <code>/bin/</code> or <code>/usr/bin</code> set in ENV )?</li>\n<li>How can I force scons to explicitly only use the paths/tools that I'm passing (build an environment from scratch)?</li>\n</ul>\n"}, {"tags": ["c", "linux", "pipe", "setuid", "mkfifo"], "answers": [{"comments": [{"owner": {"reputation": 2064, "user_id": 2697122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dec5af9a41f7e09679282289295b6b?s=128&d=identicon&r=PG&f=1", "display_name": "sjnarv", "link": "https://stackoverflow.com/users/2697122/sjnarv"}, "edited": false, "score": 0, "creation_date": 1438196280, "post_id": 31708082, "comment_id": 51355927, "body": "There&#39;s still a zeile present, instead of line (this comment likely has a short shelf-life). MAX_CHARS needs to be defined too, and I guess you&#39;ve left the needed #includes as an exercise for the reader."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 2064, "user_id": 2697122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62dec5af9a41f7e09679282289295b6b?s=128&d=identicon&r=PG&f=1", "display_name": "sjnarv", "link": "https://stackoverflow.com/users/2697122/sjnarv"}, "edited": false, "score": 0, "creation_date": 1438197057, "post_id": 31708082, "comment_id": 51356400, "body": "Thanks! I should have used <code>sed</code>! :) You can find the <code>#includes</code> in the Wikipedia page I&#39;ve linked. I like the simple example even if it is the German Wikipedia."}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 0, "last_activity_date": 1438197121, "last_edit_date": 1438197121, "creation_date": 1438193504, "answer_id": 31708082, "question_id": 31707715, "link": "https://stackoverflow.com/questions/31707715/pipe-access-privileges-for-setuid-program/31708082#31708082", "title": "Pipe access privileges for setuid program", "body": "<p>Use an anonymous pipe using the <a href=\"http://linux.die.net/man/2/pipe\" rel=\"nofollow\"><code>pipe()</code></a> function, like this (the example is borrowed from <a href=\"https://de.wikipedia.org/wiki/Pipe_%28Informatik%29#Verwendung_einer_unnamed_Pipe_.28anonyme_Pipe.29_in_C\" rel=\"nofollow\">german Wikipedia</a>):</p>\n\n<pre><code># check the link above for #includes and const definitons\n\nint main(void) {\n    int fd[2], n, i;\n    pid_t pid;\n    char line[MAX_CHARS];\n\n    // Create the pipe\n    if (pipe(fd) &lt; 0)\n        fprintf(stderr, \"Failed to create pipe()\");\n\n    // Fork child\n    if ((pid = fork()) &gt; 0) {\n        // Parent process\n\n        close(fd[0]);\n        fprintf(stdout, \"Parent : \");\n        fgets(line, MAX_CHARS, stdin);\n        write(fd[1], line, strlen(line));\n\n        if (waitpid(pid, NULL, 0) &lt; 0)\n            fprintf(stderr, \"Error: waitpid()\");\n    }\n\n    else {\n        // Child process\n        close(fd[1]);\n        n = read(fd[0], line, MAX_CHARS);\n\n        for (i = 0; i &lt; n; i++)\n            line[i] = toupper(line[i]);\n        fprintf(stderr, \"Child : \");\n\n        write(STDOUT_FILENO, line, n);\n    }\n    exit(0);\n}\n</code></pre>\n\n<p>The above program creates an unidirectional pipe where the parent process holds the read end and the child process holds the write end.</p>\n"}, {"comments": [{"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1438194701, "post_id": 31708207, "comment_id": 51354985, "body": "The one thing I&#39;d add is that the <code>umask</code> value also applies to named pipes created by processes.  So, if it&#39;s set to 022 and the pipe isn&#39;t owned by the worker process, the worker process will not be able to write."}, {"owner": {"reputation": 2033, "user_id": 174514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziJ7S.jpg?s=128&g=1", "display_name": "aks", "link": "https://stackoverflow.com/users/174514/aks"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1438195068, "post_id": 31708207, "comment_id": 51355218, "body": "Yes, that&#39;s true.  On the other hand, a named pipe can be more easily managed by the process after its creation -- by <code>chmod</code>ing it, so I didn&#39;t focus on that comparatively easy path."}, {"owner": {"reputation": 4587, "user_id": 815409, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/799175f170f7352129f1ebf636be91d7?s=128&d=identicon&r=PG", "display_name": "Giorgio", "link": "https://stackoverflow.com/users/815409/giorgio"}, "edited": false, "score": 0, "creation_date": 1438207976, "post_id": 31708207, "comment_id": 51362091, "body": "Thanks a lot for the hints! I will try them out tomorrow."}], "tags": [], "owner": {"reputation": 2033, "user_id": 174514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziJ7S.jpg?s=128&g=1", "display_name": "aks", "link": "https://stackoverflow.com/users/174514/aks"}, "is_accepted": false, "score": 4, "last_activity_date": 1438193850, "creation_date": 1438193850, "answer_id": 31708207, "question_id": 31707715, "link": "https://stackoverflow.com/questions/31707715/pipe-access-privileges-for-setuid-program/31708207#31708207", "title": "Pipe access privileges for setuid program", "body": "<p>A Unix <code>pipe</code> can be named or unnamed.  A named pipe is implemented as a file, which has standard user, group, and world ownership permission bits.</p>\n\n<p>An unnamed pipe also has permissions, but these are constrained by <code>euid</code>, <code>egid</code>, and <code>umask</code> in place at the time that the pipe is created.</p>\n\n<p>So, if your <code>worker-user</code> is <code>setuid</code> to another user, with different group permissions, unless the <code>egid</code> is in common with the master process, it will not be able to use user or group perms to access the pipe that was created by the parent process.</p>\n\n<p>Of course, with certain <code>umask</code> values, the unnamed pipe world-permissions would allow the processes to communicate over the pipe, but <em>any</em> process would be able to read/write that pipe.  Being unnamed is more secure than a named pipe, but granting world-perms to any pipe is not a good security practice.</p>\n\n<p>A possible solution for this use case <em>(of wanting the two communicating processes to be run under different users)</em> would be to have both the <code>manager-user</code> and <code>worker-user</code> processes be in the same group, and have the <code>umask</code> cleared of group-perm bits at the time of pipe creation, so that both processes can read and write the unnamed pipe.</p>\n\n<p>So, if</p>\n\n<ol>\n<li>the <code>manager-user</code> is group-owned by <code>team</code>,</li>\n<li>the <code>worker-user</code> is also group-owned by <code>team</code>, </li>\n<li>both processes have their group <code>umask</code> bits cleared (no values of <code>1x</code> .. <code>7x</code>)</li>\n<li>before the unnamed pipe is created</li>\n</ol>\n\n<p>Then the <code>manager-user</code> should be able to write on the unnamed pipe and the <code>worker-user</code> should be able to read it (or vice-versa, depending on how the pipe is used) even if they are running as separate users.</p>\n\n<p>See the <code>man</code> page on <code>chmod</code> for details on permission bits.</p>\n"}], "owner": {"reputation": 4587, "user_id": 815409, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/799175f170f7352129f1ebf636be91d7?s=128&d=identicon&r=PG", "display_name": "Giorgio", "link": "https://stackoverflow.com/users/815409/giorgio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1438207842, "creation_date": 1438192448, "last_edit_date": 1438207842, "question_id": 31707715, "link": "https://stackoverflow.com/questions/31707715/pipe-access-privileges-for-setuid-program", "title": "Pipe access privileges for setuid program", "body": "<p>I am extending some software (of which I am not the author) that runs under GNU / Linux (Ubuntu 14.04) and consists of a <code>manager</code> process and several <code>worker</code> processes. The manager can start a worker by means of a command line that I can specify in a configuration file.</p>\n\n<p>After starting a worker, the manager communicates with it using a pipe. For security reasons, we have decided to let the workers run under a different user than the manager (let us call them <code>manager-user</code> and <code>worker-user</code>). This is achieved by writing a small wrapper script that switches user with <code>su</code> and starts a new worker. After this, the manager can communicate via a pipe with the worker process. This approach has been working for many months now.</p>\n\n<p>As an alternative to <code>su</code>, we have considered using the <code>setuid</code> bit to run the workers. So we have written a <code>C</code> wrapper that can be invoked by the manager to start a worker. If we configure the wrapper to be owned by <code>manager-user</code>, the worker is started correctly (but, of course, with the wrong privileges). If we configure the wrapper to be owned by <code>worker-user</code> and set the <code>setuid</code> bit, then the workers are started but then exit because they cannot connect to the manager.</p>\n\n<p>So my question is: how does running a <code>setuid</code> executable affect the permission on pipes created by both the parent and the child process? Can it be that the worker processes started through the setuid-wrapper do not have permission to open the manager's pipes (or the other way round)? If this can be the case, how can we change these permissions?</p>\n\n<p>I  have little experience using <code>setuid</code> so any information / explanation is welcome.</p>\n"}, {"tags": ["c++", "c", "arduino", "integer", "bit-manipulation"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1438192577, "post_id": 31707629, "comment_id": 51353706, "body": "With rational numbers ?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1438192628, "post_id": 31707629, "comment_id": 51353734, "body": "May be <a href=\"http://en.cppreference.com/w/cpp/numeric/ratio/ratio\" rel=\"nofollow noreferrer\">fixed point math</a> comes in handy for your use case."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1438192841, "post_id": 31707629, "comment_id": 51353878, "body": "@Aderis multiplying and dividing by a power of 2 is often faster, since it can be replaced with shifts."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438193875, "post_id": 31707629, "comment_id": 51354531, "body": "There are many types of filtering algorithm, with different responses for different needs. The function returns <code>int</code> so I wonder where its input value <code>float smoothedVal</code> comes from."}, {"owner": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438705665, "post_id": 31707629, "comment_id": 51554575, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 The following article brings some very interesting info on that, if you feel like writing an answer... :o)  <a href=\"http://bleaklow.com/2012/06/20/sensor_smoothing_and_optimised_maths_on_the_arduino.html\" rel=\"nofollow noreferrer\">bleaklow.com/2012/06/20/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1438706119, "post_id": 31707629, "comment_id": 51554853, "body": "@heltonbiker Hmm, not a link only answer. I&#39;m on my tablet, and writing answers containing bigger amounts of code is hard. Let&#39;s see, may be I can give a concise compilation of what&#39;s described in the article tomorrow. You may also write one yourself, that&#39;s perfectly OK."}], "answers": [{"tags": [], "owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "is_accepted": true, "score": 3, "last_activity_date": 1438719576, "last_edit_date": 1438719576, "creation_date": 1438194521, "answer_id": 31708394, "question_id": 31707629, "link": "https://stackoverflow.com/questions/31707629/smoothing-algorithm-using-integer-arithmetic/31708394#31708394", "title": "Smoothing algorithm using integer arithmetic", "body": "<p>A simple technique is scaling up by multiplying the input value with for example <code>10000</code> and putting that result in an <code>int</code>, do the calculations in <code>int</code>, and then scale the output back into a <code>float</code> by dividing with the same factor.</p>\n\n<p>In your function you then also need scale up everything with that same factor.</p>\n\n<p>The choice of factor depends on the possible ranges of the values; you want to avoid overflow at the high end, and inaccuracy at the low end.  If you think about it, the factor determines where you put the decimal point: fixed point, instead of floating point.</p>\n\n<p>The factor can be anything, it does not have to be <code>100</code>, <code>1000</code>, and so on, but <code>627</code> is fine too.</p>\n\n<p>If you go down this route, you want to convert as much of your code to <code>int</code>, because the conversions described above of course also take time.</p>\n\n<p>To illustrate my point, the following could be it:</p>\n\n<pre><code>#define FACTOR 10000  // Example value.\nint smooth(int data, int filterVal, int smoothedVal)\n{ \n    if (filterVal &gt; FACTOR)\n    {\n        filterVal = FACTOR - 100;\n    }\n    else if (filterVal &lt;= 0)\n    {\n        filterVal = 0;\n    }\n\n    smoothedVal = (data * (FACTOR - filterVal)) + (smoothedVal * filterVal);\n\n    return smoothedVal;\n}\n</code></pre>\n\n<p>You may need/want to check for overflow, ...</p>\n"}], "owner": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 31708394, "answer_count": 1, "score": 6, "last_activity_date": 1438719576, "creation_date": 1438192141, "question_id": 31707629, "link": "https://stackoverflow.com/questions/31707629/smoothing-algorithm-using-integer-arithmetic", "title": "Smoothing algorithm using integer arithmetic", "body": "<p>The following code was taken from an <a href=\"http://playground.arduino.cc/Main/Smooth\">Arduino tutorial on smoothing</a>:</p>\n\n<pre><code>int smooth(int data, float filterVal, float smoothedVal) { \n\n  if (filterVal &gt; 1) {\n    filterVal = .99;\n  }\n  else if (filterVal &lt;= 0) {\n    filterVal = 0;\n  }\n\n  smoothedVal = (data * (1 - filterVal)) + (smoothedVal  *  filterVal);\n\n  return (int)smoothedVal;\n}\n</code></pre>\n\n<p>The following statement, took from the same tutorial, got me thinking:</p>\n\n<blockquote>\n  <p>This function can easily be rewritten with all-integer math, if you need more speed or want to avoid floats.</p>\n</blockquote>\n\n<p>Fact is I do want to avoid floats and increase speed, but I wonder: how to convert this to integer arithmetic? Bit-banging solutions are a bonus ;o)</p>\n"}, {"tags": ["c", "string", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1438192025, "post_id": 31707561, "comment_id": 51353384, "body": "Is it ok to reassign string literals the way I did?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 1, "creation_date": 1438192212, "post_id": 31707561, "comment_id": 51353508, "body": "@brauner You are not reassigning string literals. You are reassigning pointers that previously pointed to first characters of the string literals."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1438192248, "post_id": 31707561, "comment_id": 51353533, "body": "You didn&#39;t reassign a string literal. The literal is the bit inside the <code>&quot;&quot;</code> marks. You reassigned <code>str</code> which is a pointer. It originally pointed <i>at</i> the literal, and then you pointed it at some dynamically allocated memory instead."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1438192295, "post_id": 31707561, "comment_id": 51353554, "body": "@brauner String literals have the same storage duration during the program execution."}, {"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1438192360, "post_id": 31707561, "comment_id": 51353582, "body": "Thanks for the clarification. Imprecision on my part!"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1438193237, "last_edit_date": 1438193237, "creation_date": 1438191942, "answer_id": 31707561, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals/31707561#31707561", "title": "Reassigning string literals", "body": "<p>String literals have static storage duration. They are not destroyed and have the same addresses during the program execution.</p>\n\n<p>In these statements</p>\n\n<pre><code>    str = \"Reassign str.\";\n    //...\n    str = strdup(str2);\n</code></pre>\n\n<p>pointer <code>str</code> is just reassigned by some other addresses. In the first statement it gets the address of the first character of string literal  \"Reassign str.\" and in the second statement it gets the address of the dynamically allocated  memory for the character array that contains a copy of the string literal pointed to by str2.</p>\n\n<p>According to the C Standard (6.4.5 String literals)</p>\n\n<blockquote>\n  <p>6 In translation phase 7, a byte or code of value zero is appended to\n  each multibyte character sequence that results from a string literal\n  or literals.78) The multibyte character sequence is then used to\n  initialize <strong>an array of static storage duration</strong> and length just\n  sufficient to contain the sequence. For character string literals, the\n  array elements have type char, and are initialized with the individual\n  bytes of the multibyte character sequence.</p>\n</blockquote>\n\n<p>And (6.2.4 Storage durations of objects)</p>\n\n<blockquote>\n  <p>3 An object ...has static storage duration. <strong>Its lifetime is the\n  entire execution of the program and its stored value is initialized\n  only once, prior to program startup</strong></p>\n</blockquote>\n\n<p>As for the string literals themselves then you may not change them. Any attempt to change a string literal results in undefined behaviour of the program.</p>\n\n<p>From the C Standard (6.4.5 String literals)</p>\n\n<blockquote>\n  <p>7 It is unspecified whether these arrays are distinct provided their\n  elements have the appropriate values. <strong>If the program attempts to\n  modify such an array, the behavior is undefined.</strong></p>\n</blockquote>\n\n<p>For example you may not write</p>\n\n<pre><code>    char *str = \"Hello World!\";\n    *str = 'h';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1438192062, "post_id": 31707598, "comment_id": 51353404, "body": "Oh, sorry, I mangled the <code>strdup()</code> in there without a <code>free()</code>."}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "reply_to_user": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1438192209, "post_id": 31707598, "comment_id": 51353505, "body": "The <code>free()</code> you added now simply deallocates the memory allocated by <code>strdup()</code>; nothing happens with the previous assigned static string."}, {"owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1438192256, "post_id": 31707598, "comment_id": 51353539, "body": "Yeah, I know I just considered it bad form to not have a <code>free()</code> in there."}, {"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "reply_to_user": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "edited": false, "score": 0, "creation_date": 1438192296, "post_id": 31707598, "comment_id": 51353557, "body": "Ah I see.  No worries."}], "tags": [], "owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "is_accepted": false, "score": 1, "last_activity_date": 1438192140, "last_edit_date": 1438192140, "creation_date": 1438192026, "answer_id": 31707598, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals/31707598#31707598", "title": "Reassigning string literals", "body": "<p>Normally static strings are in a static data section.  In this case, because you program does not do anything, I'm not so sure; all your static strings may be optimised away.</p>\n\n<p>In a real program, where you'd actually use these static strings, they would have a fixed address.</p>\n\n<p>By no means does the <code>str = strdup(str2);</code> free any memory.  In C memory is never freed by itself.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1438193296, "last_edit_date": 1438193296, "creation_date": 1438192181, "answer_id": 31707643, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals/31707643#31707643", "title": "Reassigning string literals", "body": "<p>When you do   </p>\n\n<pre><code>char *str = \"Hello World!\";  \n</code></pre>\n\n<p>compiler sets aside memory of bytes <code>strlen(str) + 1</code> for that string literal.  When the pointer <code>str</code> being reassigned, the memory allocated for string literal <code>\"Hello World!\"</code> is not destroyed/freed, rather it persist in its scope.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 1, "last_activity_date": 1438192488, "creation_date": 1438192488, "answer_id": 31707729, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals/31707729#31707729", "title": "Reassigning string literals", "body": "<p>Let's break this down:</p>\n\n<pre><code>char *str = \"Hello World!\";\n</code></pre>\n\n<p>declares a <em>pointer to char</em> called <code>str</code></p>\n\n<pre><code>char *str\n</code></pre>\n\n<p>and <em>also</em> declares a string literal</p>\n\n<pre><code>            \"Hello World!\";\n</code></pre>\n\n<p>and <em>also</em> sets <code>str</code> to point at the first character of the literal.</p>\n\n<p>The literal has static storage duration - it is compiled into your executable, is always there, and can't be moved or altered.</p>\n\n<p>The pointer is just a pointer, and you can point it at other things whenever you like.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1438192858, "creation_date": 1438192858, "answer_id": 31707862, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals/31707862#31707862", "title": "Reassigning string literals", "body": "<p>When declaring a string literal such as this:</p>\n\n<pre><code>char *str = \"Hello World!\";\n</code></pre>\n\n<p>The <code>\"Hello World!\"</code> string is stored in a read-only section of memory.  So if you one of these:</p>\n\n<pre><code>str[1] = 'i';\nstrcpy(str, \"Goodbye!\");\n</code></pre>\n\n<p>You'll most likely core dump.  If on the other hand you do this:</p>\n\n<pre><code>str = malloc(10);\nstrcpy(str, \"Goodbye!\");\n</code></pre>\n\n<p>You'll be fine, although you'll loose the pointer you had to the original string.</p>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1438197363, "post_id": 31707924, "comment_id": 51356557, "body": "Technically, a string literal does not have <code>const</code> type. You shouldn&#39;t write to it though."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1438193031, "creation_date": 1438193031, "answer_id": 31707924, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals/31707924#31707924", "title": "Reassigning string literals", "body": "<p>All is Ok in your code.</p>\n\n<pre><code>    char *str = \"Hello World!\"; \n</code></pre>\n\n<p>Ok you declare a <code>char *</code> pointing to a string litteral. To be correct, you should have written <code>const char *str =</code> because a string litteral is an unmodifiable string (<code>str[4] = 'u';</code> would be incorrect)</p>\n\n<pre><code>    str = \"Reassign str.\";\n</code></pre>\n\n<p>Ok the pointer str now point to another string litteral. Same remark as above, it should still be const.</p>\n\n<pre><code>    char *str2 = \"Something.\";\n</code></pre>\n\n<p>Still same story</p>\n\n<pre><code>    str = strdup(str2);\n</code></pre>\n\n<p>Now str points to  a malloc'ed string. For the first time it is correct for str not to be const. <code>str[0] = 's';</code> would be correct here.</p>\n\n<pre><code>    free(str);\n</code></pre>\n\n<p>Fine, you free the string allocated by <code>strdup</code>.</p>\n\n<pre><code>    exit(EXIT_SUCCESS);\n</code></pre>\n\n<p>You nicely return a defined value (0) to the environment.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1438197232, "creation_date": 1438197232, "answer_id": 31709197, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals/31709197#31709197", "title": "Reassigning string literals", "body": "<p>As if there weren't enough answers already, but I think one aspect is still worth mentioning:</p>\n\n<p>Yes, it's correct that a string literal in your code has static storage, so it will be <em>alive</em> during the whole program execution. In that terms, nothing can ever <em>happen</em> to it (you can't even change it). Technically, that means normally that the string is <em>part</em> of your program and put in a <em>data</em> segment that is read only.</p>\n\n<p>But, in your case, an optimizing compiler will detect that <code>\"Hello World!\"</code> is never actually used, so it will disappear from your compiled program. That's a legal thing for an optimizer to do, because it doesn't change the <em>observable behavior</em> of your program.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt; gcc -ostrlit strlit.c\n&gt; strings strlit | grep Hello\nHello World!\n&gt; gcc -O3 -ostrlit strlit.c\n&gt; strings strlit | grep Hello\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 5504, "user_id": 2734224, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/3icKz.jpg?s=128&g=1", "display_name": "lord.garbage", "link": "https://stackoverflow.com/users/2734224/lord-garbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 1, "accepted_answer_id": 31707561, "answer_count": 7, "score": 9, "last_activity_date": 1438197232, "creation_date": 1438191825, "last_edit_date": 1438192101, "question_id": 31707517, "link": "https://stackoverflow.com/questions/31707517/reassigning-string-literals", "title": "Reassigning string literals", "body": "<p>This is a really basic question but I did not find a clear answer. I try to understand how string literals in <code>C</code> work.</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n        char *str = \"Hello World!\";\n        str = \"Reassign str.\";\n\n        char *str2 = \"Something.\";\n\n        str = strdup(str2);\n\n        free(str);\n\n        exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>When I do <code>str = \"Reassign str.\"</code> or <code>str = strdup(str2)</code> to a string literal what happens to the <code>Hello World</code> string? Is it part of the executable, does it go out of scope, is it's memory freed after I reassign <code>str</code>?</p>\n"}, {"tags": ["c", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "edited": false, "score": 0, "creation_date": 1438191729, "post_id": 31707336, "comment_id": 51353211, "body": "Done but the problem is still there."}], "tags": [], "owner": {"reputation": 131, "user_id": 3620250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNyfe.jpg?s=128&g=1", "display_name": "Dipanjan", "link": "https://stackoverflow.com/users/3620250/dipanjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1438191760, "last_edit_date": 1438191760, "creation_date": 1438191200, "answer_id": 31707336, "question_id": 31707223, "link": "https://stackoverflow.com/questions/31707223/warning-incompatible-implicit-declaration-of-built-in-function-lrint/31707336#31707336", "title": "warning: incompatible implicit declaration of built-in function &#39;lrint&#39;", "body": "<p>Include the below header file (math.h).Usually this warnings are because of not including the header file where the function is defined.</p>\n\n<pre><code>#include &lt;math.h&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "edited": false, "score": 0, "creation_date": 1438192427, "post_id": 31707496, "comment_id": 51353614, "body": "Ok, now the warning disappeared. Can you explain me quickly what was the problem?"}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "reply_to_user": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "edited": false, "score": 0, "creation_date": 1438192512, "post_id": 31707496, "comment_id": 51353670, "body": "From the man page as mentioned in the answer, <code>-std=c99</code> option is necessary as this glibc feature is supported only after <code>c99</code>"}], "tags": [], "owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1438191751, "creation_date": 1438191751, "answer_id": 31707496, "question_id": 31707223, "link": "https://stackoverflow.com/questions/31707223/warning-incompatible-implicit-declaration-of-built-in-function-lrint/31707496#31707496", "title": "warning: incompatible implicit declaration of built-in function &#39;lrint&#39;", "body": "<ol>\n<li>Firstly make sure that you have included the header <code>math.h</code> in your program.</li>\n<li>Use this <code>-std=c99</code> option along with <code>gcc</code> to resolve this compiler issue.</li>\n</ol>\n\n<p>Change</p>\n\n<pre><code>gcc -I/shared/sav/opt/include -L/shared/sav/opt/lib -lopencv_core -lopencv_highgui -lopencv_imgproc -lm imagefilter.c -o imagefilter \n</code></pre>\n\n<p>to </p>\n\n<pre><code>gcc -std=c99 -I/shared/sav/opt/include -L/shared/sav/opt/lib -lopencv_core -lopencv_highgui -lopencv_imgproc -lm imagefilter.c -o imagefilter\n</code></pre>\n\n<p>Refer this for more info on usage of <a href=\"http://man7.org/linux/man-pages/man3/lrint.3.html\" rel=\"nofollow\">lrint</a></p>\n"}], "owner": {"reputation": 109, "user_id": 5073861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a0e1464fc306c43d5c89cb0f70d7e00?s=128&d=identicon&r=PG&f=1", "display_name": "Saverio", "link": "https://stackoverflow.com/users/5073861/saverio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1438191760, "creation_date": 1438190821, "question_id": 31707223, "link": "https://stackoverflow.com/questions/31707223/warning-incompatible-implicit-declaration-of-built-in-function-lrint", "title": "warning: incompatible implicit declaration of built-in function &#39;lrint&#39;", "body": "<p>I want to compile an opencv program on the Linux machine below:</p>\n\n<pre><code>sav@machine:/shared/sav/test$ uname -a\nLinux machine 2.6.32-24-generic #43-Ubuntu SMP Thu Sep 16 14:58:24 UTC 2010 x86_64 GNU/Linux\n</code></pre>\n\n<p>My gcc command is the following:</p>\n\n<pre><code>gcc -I/shared/sav/opt/include -L/shared/sav/opt/lib -lopencv_core -lopencv_highgui -lopencv_imgproc -lm imagefilter.c -o imagefilter\n</code></pre>\n\n<p>After I run the program, I have the following warning:</p>\n\n<pre><code>In file included from /shared/sav/opt/include/opencv2/core/core_c.h:47,\nfrom /shared/sav/opt/include/opencv/cv.h:63,\nfrom imagefilter.c:1:\n/shared/sav/opt/include/opencv2/core/types_c.h: In function 'cvRound':\n/shared/sav/opt/include/opencv2/core/types_c.h:327: warning: incompatible implicit declaration of built-in function 'lrint'\n</code></pre>\n\n<p>How can I fix this warning?</p>\n"}, {"tags": ["c", "centos", "glibc", "memcpy", "linux-mint"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438191515, "post_id": 31707211, "comment_id": 51353114, "body": "Don&#39;t build your tool on Linux Mint 17.2; build it on CentOS 6.3 instead? (Also realize that CentOS 6.3 is old, unsupported, and full of security flaws at this point.)"}, {"owner": {"reputation": 11, "user_id": 5038393, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103126634032405/picture?type=large", "display_name": "LuckyBulldog", "link": "https://stackoverflow.com/users/5038393/luckybulldog"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438192111, "post_id": 31707211, "comment_id": 51353434, "body": "Valid point. Choice of environment isn&#39;t really my decision in this case, but your comment is probably the best idea."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438192597, "post_id": 31707211, "comment_id": 51353718, "body": "It should be possible (using directives like that and linker files) to control specifically enough what versions of the symbols you use but you are likely to spend much longer getting it to work then it&#39;ll take to install CentOS 6.3 from scratch. That being said a quick look at <code>libc.so.6</code> on a CentOS 6.6 system doesn&#39;t see that version of symbols. I see <code>GLIBC_2.2.5</code> as the oldest but I don&#39;t see a memcpy with that tag (or any tags for that matter)."}, {"owner": {"reputation": 11, "user_id": 5038393, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103126634032405/picture?type=large", "display_name": "LuckyBulldog", "link": "https://stackoverflow.com/users/5038393/luckybulldog"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438361422, "post_id": 31707211, "comment_id": 51436154, "body": "You were right about <code>GLIBC_2.2.5</code>, that&#39;s the library to which I should be linking. It worked in one case. However, another binary is using <code>memcpy</code>, though it isn&#39;t called (by me). No matter if I use the linking method above, it doesn&#39;t correct the reference to <code>memcpy@GLIBC_2.14</code>. I&#39;m stuck here once again."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438361533, "post_id": 31707211, "comment_id": 51436216, "body": "A binary you are building or one you are just packaging?"}, {"owner": {"reputation": 11, "user_id": 5038393, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103126634032405/picture?type=large", "display_name": "LuckyBulldog", "link": "https://stackoverflow.com/users/5038393/luckybulldog"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438362237, "post_id": 31707211, "comment_id": 51436605, "body": "I&#39;m building it myself."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438362432, "post_id": 31707211, "comment_id": 51436708, "body": "And the binary is including that symbol even though you don&#39;t use it? Does it come from a system-library you are linking against? Did you fix the linkage on every library/etc. you are building with that binary?"}], "owner": {"reputation": 11, "user_id": 5038393, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103126634032405/picture?type=large", "display_name": "LuckyBulldog", "link": "https://stackoverflow.com/users/5038393/luckybulldog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 742, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438190784, "creation_date": 1438190784, "last_edit_date": 1495541639, "question_id": 31707211, "link": "https://stackoverflow.com/questions/31707211/referencing-memcpyglibc-2-0-returns-an-undefined-reference", "title": "Referencing memcpy@GLIBC_2.0 returns an undefined reference", "body": "<p>I am working on developing a tool in the Linux Mint 17.2 environment that will be run primarily in CentOS 6.3. This tool is made up of several C programs called in succession by a python script.</p>\n\n<p>Upon testing this build, an object was referencing GLIBC_2.14, which isn't available in CentOS 6.3. Using <a href=\"https://stackoverflow.com/questions/4032373/linking-against-an-old-version-of-libc-to-provide-greater-application-coverage\">this post</a>, I was able to find that the offending call was 'memcpy' referenced from GLIBC_2.14. After looking to see if there were any symbols in older versions of GLIBC that I could link against, I found that GLIBC_2.0 would work.</p>\n\n<p>I then tried to link the call of memcpy with memcpy@GLIBC_2.0 using an asm call in the source code, as suggested in the above linked solution.</p>\n\n<pre><code>__asm__(\".symver memcpy,memcpy@GLIBC_2.0\");\n</code></pre>\n\n<p>However, when building this, I received an undefined reference to memcpy@GLIBC_2.0 .</p>\n\n<p>I'm fairly new to this type of development. Is there something simple that I'm overlooking as to why this isn't working?</p>\n"}, {"tags": ["c++", "c", "linux", "gcc", "gnu"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438190109, "post_id": 31706822, "comment_id": 51352294, "body": "Use a different <code>--prefix</code> option to specify a path into your home directory when calling <code>configure</code>, or execute with root permissions. Obviously you don&#39;t have writing rights for <code>&#47;usr&#47;bin</code>, <code>&#47;usr&#47;lib</code>, etc."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438190191, "post_id": 31706822, "comment_id": 51352336, "body": "<code>which ld</code> if the previous doesn&#39;t help."}, {"owner": {"reputation": 520, "user_id": 439274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8a29af9c57ed8f88ba942ee3a17ff6e?s=128&d=identicon&r=PG", "display_name": "Jerunh", "link": "https://stackoverflow.com/users/439274/jerunh"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438190386, "post_id": 31706822, "comment_id": 51352460, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 I am attempting to install in my local home directory ($HOME/) where I do have write permission."}, {"owner": {"reputation": 520, "user_id": 439274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8a29af9c57ed8f88ba942ee3a17ff6e?s=128&d=identicon&r=PG", "display_name": "Jerunh", "link": "https://stackoverflow.com/users/439274/jerunh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438190428, "post_id": 31706822, "comment_id": 51352484, "body": "@eugeneSh. I have updated the question with some info about my tools."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1438190447, "post_id": 31706822, "comment_id": 51352493, "body": "Do you have the target directory created? ($HOME/usr/local)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1438191069, "post_id": 31706822, "comment_id": 51352875, "body": "It should work giving the <code>--prefix</code> option. Worked at least for me to build <a href=\"http://dev-jungle.blogspot.de/search?updated-min=2013-01-01T00:00:00%2B01:00&amp;updated-max=2014-01-01T00:00:00%2B01:00&amp;max-results=1\" rel=\"nofollow noreferrer\">cross GCC toolchain</a>, see step 5 there."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1438191115, "post_id": 31706822, "comment_id": 51352895, "body": "Hint for reading config.log: The &quot;juicy&quot; bit is usually just above &quot;Cache variables&quot; (log of the last commands executed, and their error messages). In this case: <code>gcc: error trying to exec &#39;cc1&#39;: execvp: No such file or directory</code>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1438335229, "post_id": 31706822, "comment_id": 51419311, "body": "Sorry, but the <code>--prefix</code> directory is neede in <code>make install</code>, not at <code>configure</code> time."}], "answers": [{"comments": [{"owner": {"reputation": 520, "user_id": 439274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8a29af9c57ed8f88ba942ee3a17ff6e?s=128&d=identicon&r=PG", "display_name": "Jerunh", "link": "https://stackoverflow.com/users/439274/jerunh"}, "edited": false, "score": 0, "creation_date": 1438195788, "post_id": 31707260, "comment_id": 51355653, "body": "&#39;First, it is documented that GCC should not be built inside its source tree:&#39; This solved my problem. I overlooked this while reading the docs. Thanks for all the other advice as well."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1438195980, "last_edit_date": 1438195980, "creation_date": 1438190953, "answer_id": 31707260, "question_id": 31706822, "link": "https://stackoverflow.com/questions/31706822/building-gcc-5-2-0-from-source-configure-error-c-compiler-cannot-create-execu/31707260#31707260", "title": "building gcc 5.2.0 from source: configure: error: C compiler cannot create executables", "body": "<p>First, it is <a href=\"https://gcc.gnu.org/install/configure.html\" rel=\"nofollow\">documented</a> that GCC should not be built inside its source tree: </p>\n\n<blockquote>\n  <p>First, we highly recommend that GCC be built into a separate directory from the sources which does not reside within the source tree. </p>\n</blockquote>\n\n<p>Then you need to be sure that the prefix tree exists. I believe that your choice <code>$HOME/usr/local/</code> is a poor one (it is confusing). I suggest using <code>$HOME/soft/</code> instead.</p>\n\n<p>If you have a Debian or similar distribution, be sure to <code>aptitude install build-dep gcc g++</code> before configuring (You might need some <code>deb-src</code> line in your <code>/etc/apt/sources.list</code> file). This will download all the software required to <em>build</em> <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a>. Don't forget to <code>aptitude install gcc g++ build-essential</code> in all cases (to have a working <code>gcc</code> &amp; <code>g++</code> system compilers). On SUSE, try to find the equivalent packages and commands: <a href=\"http://software.opensuse.org/package/gcc-c++\" rel=\"nofollow\">gcc-c++</a> package, <a href=\"https://en.opensuse.org/openSUSE:Build_Service_Tutorial\" rel=\"nofollow\">build service</a>.</p>\n\n<p>So I suggest to start again. Use</p>\n\n<pre><code>mkdir -p -$HOME/tmp/softbuilds\nmkdir -p $HOME/soft/\ncd $HOME/tmp/\n## the following URL is not the best one, choose carefully the server\nwget http://open-source-box.org/gcc/gcc-5.2.0/gcc-5.2.0.tar.bz2\ncd softbuilds\ntar xvf ../gcc-5.2.0.tar.bz2\nmkdir _GCC-5.2_Build\ncd _GCC-5.2_Build\n../gcc-5.2.0/configure --help\n## you could add some other configure options here:\n../gcc-5.2.0/configure --prefix=$HOME/soft --program-suffix=-mine \\\n      --enable-plugins --enable-languages=c,c++,jit,lto,go  \\\n      --enable-check=release --enable-host-shared\n</code></pre>\n\n<p>If the configuration step succeeded, you compile the thing with</p>\n\n<pre><code>make -j 3\n</code></pre>\n\n<p>Then (perhaps a few hours later) install it with:</p>\n\n<pre><code>make #to be sure all went ok\nmake install\n</code></pre>\n\n<p>Then add <code>$HOME/soft/bin/</code> to your <a href=\"https://en.wikipedia.org/wiki/PATH_%28variable%29\" rel=\"nofollow\"><code>PATH</code></a> (e.g. by editing <code>.bashrc</code> ...) and use <code>gcc-mine</code> as your compiler (e.g. <code>make CC=gcc-mine</code>)</p>\n\n<p>If you want to always use <em>your</em> GCC, and if <code>$HOME/bin/</code> is <em>early</em> in your <code>$PATH</code>, you might make symlinks from <code>$HOME/soft/bin/gcc-mine</code> to <code>$HOME/bin/gcc</code> (and likewise for <code>g++-mine</code> ...).</p>\n\n<p>BTW, you could later install the <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> meta-plugin for your GCC. I have <a href=\"https://gcc.gnu.org/ml/gcc/2015-07/msg00232.html\" rel=\"nofollow\">released</a> MELT 1.2.0 for GCC 4.9 &amp; 5.x a few days ago (end of july 2015).</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 2, "last_activity_date": 1438192914, "creation_date": 1438192914, "answer_id": 31707885, "question_id": 31706822, "link": "https://stackoverflow.com/questions/31706822/building-gcc-5-2-0-from-source-configure-error-c-compiler-cannot-create-execu/31707885#31707885", "title": "building gcc 5.2.0 from source: configure: error: C compiler cannot create executables", "body": "<blockquote>\n<pre>\nconfigure:4370: checking for C compiler default output file name\nconfigure:4392: gcc    conftest.c  >&5\ngcc: error trying to exec 'cc1': execvp: No such file or directory\n</pre>\n</blockquote>\n\n<p>This indicates that your host compiler isn't working. Make sure it works before attempting to configure other software.</p>\n\n<p>Whether it's caused by a missing package on your system, some environment variable you set that messes with the way GCC works, or perhaps even some local filesystem corruption, you'll see the same problem just compiling a simple \"Hello, world!\" program from the command line.</p>\n\n<p>Fix that first, and <em>only</em> then start trying to build larger software packages.</p>\n"}], "owner": {"reputation": 520, "user_id": 439274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8a29af9c57ed8f88ba942ee3a17ff6e?s=128&d=identicon&r=PG", "display_name": "Jerunh", "link": "https://stackoverflow.com/users/439274/jerunh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6891, "favorite_count": 1, "accepted_answer_id": 31707260, "answer_count": 2, "score": 1, "last_activity_date": 1438195980, "creation_date": 1438189487, "last_edit_date": 1438190335, "question_id": 31706822, "link": "https://stackoverflow.com/questions/31706822/building-gcc-5-2-0-from-source-configure-error-c-compiler-cannot-create-execu", "title": "building gcc 5.2.0 from source: configure: error: C compiler cannot create executables", "body": "<p>I am trying to build gcc 5.2.0 from source in my local $HOME directory and I get the following errors:</p>\n\n<pre><code>gcc-gcc_5_2_0_release&gt; ./configure --prefix=$HOME/usr/local\n\nchecking build system type... x86_64-unknown-linux-gnu\nchecking host system type... x86_64-unknown-linux-gnu\nchecking target system type... x86_64-unknown-linux-gnu\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether ln works... yes\nchecking whether ln -s works... yes\nchecking for a sed that does not truncate output... /usr/bin/sed\nchecking for gawk... gawk\nchecking for libatomic support... yes\nchecking for libcilkrts support... yes\nchecking for libitm support... yes\nchecking for libsanitizer support... yes\nchecking for libvtv support... yes\nchecking for gcc... gcc\nchecking for C compiler default output file name...\nconfigure: error: in `/home/s31941/tmp/gcc-gcc_5_2_0_release':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details.\n</code></pre>\n\n<p>here is a copy of the <code>config.log</code></p>\n\n<pre><code>This file contains any messages produced by compilers while\nrunning configure, to aid debugging if configure makes a mistake.\n\nIt was created by configure, which was\ngenerated by GNU Autoconf 2.64.  Invocation command line was\n\n  $ ./configure --prefix=/home/username/usr/local\n\n## --------- ##\n## Platform. ##\n## --------- ##\n\nhostname = fmsserv\nuname -m = x86_64\nuname -r = 3.0.101-0.46-default\nuname -s = Linux\nuname -v = #1 SMP Wed Dec 17 11:04:10 UTC 2014 (8356111)\n\n/usr/bin/uname -p = unknown\n/bin/uname -X     = unknown\n\n/bin/arch              = x86_64\n/usr/bin/arch -k       = unknown\n/usr/convex/getsysinfo = unknown\n/usr/bin/hostinfo      = unknown\n/bin/machine           = unknown\n/usr/bin/oslevel       = unknown\n/bin/universe          = unknown\n\nPATH: /home/username/usr/local/bin\nPATH: /home/username/tools/git/bin\nPATH: /home/username/tools/java/jre1.8.0_40/bin\nPATH: /home/username/tools/eclipse\nPATH: .\nPATH: /usr/NX/bin\nPATH: /usr/lib64/mpi/gcc/openmpi/bin\nPATH: /home/username/bin\nPATH: /usr/local/bin\nPATH: /usr/bin\nPATH: /bin\nPATH: /usr/bin/X11\nPATH: /usr/X11R6/bin\nPATH: /usr/games\nPATH: /opt/kde3/bin\nPATH: /usr/lib/mit/bin\nPATH: /usr/lib/mit/sbin\nPATH: /opt/gnome/bin\nPATH: /usr/lib/qt3/bin\nPATH: /home/fms/bin\nPATH: /usr/gnat/bin\nPATH: .\n\n\n## ----------- ##\n## Core tests. ##\n## ----------- ##\n\nconfigure:2292: checking build system type\nconfigure:2306: result: x86_64-unknown-linux-gnu\nconfigure:2353: checking host system type\nconfigure:2366: result: x86_64-unknown-linux-gnu\nconfigure:2386: checking target system type\nconfigure:2399: result: x86_64-unknown-linux-gnu\nconfigure:2453: checking for a BSD-compatible install\nconfigure:2521: result: /usr/bin/install -c\nconfigure:2532: checking whether ln works\nconfigure:2554: result: yes\nconfigure:2558: checking whether ln -s works\nconfigure:2562: result: yes\nconfigure:2569: checking for a sed that does not truncate output\nconfigure:2633: result: /usr/bin/sed\nconfigure:2642: checking for gawk\nconfigure:2658: found /usr/bin/gawk\nconfigure:2669: result: gawk\nconfigure:3183: checking for libatomic support\nconfigure:3193: result: yes\nconfigure:3202: checking for libcilkrts support\nconfigure:3212: result: yes\nconfigure:3240: checking for libitm support\nconfigure:3250: result: yes\nconfigure:3259: checking for libsanitizer support\nconfigure:3269: result: yes\nconfigure:3278: checking for libvtv support\nconfigure:3288: result: yes\nconfigure:4074: checking for gcc\nconfigure:4090: found /usr/bin/gcc\nconfigure:4101: result: gcc\nconfigure:4330: checking for C compiler version\nconfigure:4339: gcc --version &gt;&amp;5\ngcc (SUSE Linux) 4.3.4 [gcc-4_3-branch revision 152973]\nCopyright (C) 2008 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nconfigure:4350: $? = 0\nconfigure:4339: gcc -v &gt;&amp;5\nUsing built-in specs.\nTarget: x86_64-suse-linux\nConfigured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java,ada --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.3 --enable-ssp --disable-libssp --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --program-suffix=-4.3 --enable-linux-futex --without-system-libunwind --with-cpu=generic --build=x86_64-suse-linux\nThread model: posix\ngcc version 4.3.4 [gcc-4_3-branch revision 152973] (SUSE Linux) \nconfigure:4350: $? = 0\nconfigure:4339: gcc -V &gt;&amp;5\ngcc: '-V' option must have argument\nconfigure:4350: $? = 1\nconfigure:4339: gcc -qversion &gt;&amp;5\ngcc: unrecognized option '-qversion'\ngcc: no input files\nconfigure:4350: $? = 1\nconfigure:4370: checking for C compiler default output file name\nconfigure:4392: gcc    conftest.c  &gt;&amp;5\ngcc: error trying to exec 'cc1': execvp: No such file or directory\nconfigure:4396: $? = 1\nconfigure:4433: result: \nconfigure: failed program was:\n| /* confdefs.h */\n| #define PACKAGE_NAME \"\"\n| #define PACKAGE_TARNAME \"\"\n| #define PACKAGE_VERSION \"\"\n| #define PACKAGE_STRING \"\"\n| #define PACKAGE_BUGREPORT \"\"\n| #define PACKAGE_URL \"\"\n| /* end confdefs.h.  */\n| \n| int\n| main ()\n| {\n| \n|   ;\n|   return 0;\n| }\nconfigure:4439: error: in `/home/username/tmp/gcc-gcc_5_2_0_release':\nconfigure:4443: error: C compiler cannot create executables\nSee `config.log' for more details.\n\n## ---------------- ##\n## Cache variables. ##\n## ---------------- ##\n\nac_cv_build=x86_64-unknown-linux-gnu\nac_cv_env_AR_FOR_TARGET_set=\nac_cv_env_AR_FOR_TARGET_value=\nac_cv_env_AR_set=\nac_cv_env_AR_value=\nac_cv_env_AS_FOR_TARGET_set=\nac_cv_env_AS_FOR_TARGET_value=\nac_cv_env_AS_set=\nac_cv_env_AS_value=\nac_cv_env_CCC_set=\nac_cv_env_CCC_value=\nac_cv_env_CC_FOR_TARGET_set=\nac_cv_env_CC_FOR_TARGET_value=\nac_cv_env_CC_set=\nac_cv_env_CC_value=\nac_cv_env_CFLAGS_set=\nac_cv_env_CFLAGS_value=\nac_cv_env_CPPFLAGS_set=\nac_cv_env_CPPFLAGS_value=\nac_cv_env_CXXFLAGS_set=\nac_cv_env_CXXFLAGS_value=\nac_cv_env_CXX_FOR_TARGET_set=\nac_cv_env_CXX_FOR_TARGET_value=\nac_cv_env_CXX_set=\nac_cv_env_CXX_value=\nac_cv_env_DLLTOOL_FOR_TARGET_set=\nac_cv_env_DLLTOOL_FOR_TARGET_value=\nac_cv_env_DLLTOOL_set=\nac_cv_env_DLLTOOL_value=\nac_cv_env_GCC_FOR_TARGET_set=\nac_cv_env_GCC_FOR_TARGET_value=\nac_cv_env_GCJ_FOR_TARGET_set=\nac_cv_env_GCJ_FOR_TARGET_value=\nac_cv_env_GFORTRAN_FOR_TARGET_set=\nac_cv_env_GFORTRAN_FOR_TARGET_value=\nac_cv_env_GOC_FOR_TARGET_set=\nac_cv_env_GOC_FOR_TARGET_value=\nac_cv_env_LDFLAGS_set=\nac_cv_env_LDFLAGS_value=\nac_cv_env_LD_FOR_TARGET_set=\nac_cv_env_LD_FOR_TARGET_value=\nac_cv_env_LD_set=\nac_cv_env_LD_value=\nac_cv_env_LIBS_set=\nac_cv_env_LIBS_value=\nac_cv_env_LIPO_FOR_TARGET_set=\nac_cv_env_LIPO_FOR_TARGET_value=\nac_cv_env_LIPO_set=\nac_cv_env_LIPO_value=\nac_cv_env_NM_FOR_TARGET_set=\nac_cv_env_NM_FOR_TARGET_value=\nac_cv_env_NM_set=\nac_cv_env_NM_value=\nac_cv_env_OBJCOPY_FOR_TARGET_set=\nac_cv_env_OBJCOPY_FOR_TARGET_value=\nac_cv_env_OBJCOPY_set=\nac_cv_env_OBJCOPY_value=\nac_cv_env_OBJDUMP_FOR_TARGET_set=\nac_cv_env_OBJDUMP_FOR_TARGET_value=\nac_cv_env_OBJDUMP_set=\nac_cv_env_OBJDUMP_value=\nac_cv_env_RANLIB_FOR_TARGET_set=\nac_cv_env_RANLIB_FOR_TARGET_value=\nac_cv_env_RANLIB_set=\nac_cv_env_RANLIB_value=\nac_cv_env_READELF_FOR_TARGET_set=\nac_cv_env_READELF_FOR_TARGET_value=\nac_cv_env_READELF_set=\nac_cv_env_READELF_value=\nac_cv_env_STRIP_FOR_TARGET_set=\nac_cv_env_STRIP_FOR_TARGET_value=\nac_cv_env_STRIP_set=\nac_cv_env_STRIP_value=\nac_cv_env_WINDMC_FOR_TARGET_set=\nac_cv_env_WINDMC_FOR_TARGET_value=\nac_cv_env_WINDMC_set=\nac_cv_env_WINDMC_value=\nac_cv_env_WINDRES_FOR_TARGET_set=\nac_cv_env_WINDRES_FOR_TARGET_value=\nac_cv_env_WINDRES_set=\nac_cv_env_WINDRES_value=\nac_cv_env_build_alias_set=\nac_cv_env_build_alias_value=\nac_cv_env_build_configargs_set=\nac_cv_env_build_configargs_value=\nac_cv_env_host_alias_set=\nac_cv_env_host_alias_value=\nac_cv_env_host_configargs_set=\nac_cv_env_host_configargs_value=\nac_cv_env_target_alias_set=\nac_cv_env_target_alias_value=\nac_cv_env_target_configargs_set=\nac_cv_env_target_configargs_value=\nac_cv_host=x86_64-unknown-linux-gnu\nac_cv_path_SED=/usr/bin/sed\nac_cv_path_install='/usr/bin/install -c'\nac_cv_prog_AWK=gawk\nac_cv_prog_ac_ct_CC=gcc\nac_cv_target=x86_64-unknown-linux-gnu\nacx_cv_prog_LN=ln\n\n## ----------------- ##\n## Output variables. ##\n## ----------------- ##\n\nAR=''\nAR_FOR_BUILD='$(AR)'\nAR_FOR_TARGET=''\nAS=''\nAS_FOR_BUILD='$(AS)'\nAS_FOR_TARGET=''\nAWK='gawk'\nBISON=''\nBUILD_CONFIG=''\nCC='gcc'\nCC_FOR_BUILD='$(CC)'\nCC_FOR_TARGET=''\nCFLAGS=''\nCFLAGS_FOR_BUILD=''\nCFLAGS_FOR_TARGET=''\nCOMPILER_AS_FOR_TARGET=''\nCOMPILER_LD_FOR_TARGET=''\nCOMPILER_NM_FOR_TARGET=''\nCONFIGURE_GDB_TK=''\nCPPFLAGS=''\nCXX=''\nCXXFLAGS=''\nCXXFLAGS_FOR_BUILD=''\nCXXFLAGS_FOR_TARGET=''\nCXX_FOR_BUILD='$(CXX)'\nCXX_FOR_TARGET=''\nDEBUG_PREFIX_CFLAGS_FOR_TARGET=''\nDEFS=''\nDLLTOOL=''\nDLLTOOL_FOR_BUILD='$(DLLTOOL)'\nDLLTOOL_FOR_TARGET=''\nECHO_C=''\nECHO_N='-n'\nECHO_T=''\nEXEEXT=''\nEXPECT=''\nEXTRA_CONFIGARGS_LIBJAVA='--disable-static'\nFLAGS_FOR_TARGET=''\nFLEX=''\nGCC_FOR_TARGET=''\nGCC_SHLIB_SUBDIR=''\nGCJ_FOR_BUILD='$(GCJ)'\nGCJ_FOR_TARGET=''\nGDB_TK=''\nGFORTRAN_FOR_BUILD='$(GFORTRAN)'\nGFORTRAN_FOR_TARGET=''\nGNATBIND=''\nGNATMAKE=''\nGOC_FOR_BUILD='$(GOC)'\nGOC_FOR_TARGET=''\nINSTALL_DATA='${INSTALL} -m 644'\nINSTALL_GDB_TK=''\nINSTALL_PROGRAM='${INSTALL}'\nINSTALL_SCRIPT='${INSTALL}'\nLD=''\nLDFLAGS=''\nLDFLAGS_FOR_BUILD=''\nLDFLAGS_FOR_TARGET=''\nLD_FOR_BUILD='$(LD)'\nLD_FOR_TARGET=''\nLEX=''\nLIBOBJS=''\nLIBS=''\nLIPO=''\nLIPO_FOR_TARGET=''\nLN='ln'\nLN_S='ln -s'\nLTLIBOBJS=''\nM4=''\nMAINT=''\nMAINTAINER_MODE_FALSE=''\nMAINTAINER_MODE_TRUE=''\nMAKEINFO=''\nNM=''\nNM_FOR_BUILD='$(NM)'\nNM_FOR_TARGET=''\nOBJCOPY=''\nOBJCOPY_FOR_TARGET=''\nOBJDUMP=''\nOBJDUMP_FOR_TARGET=''\nOBJEXT=''\nPACKAGE_BUGREPORT=''\nPACKAGE_NAME=''\nPACKAGE_STRING=''\nPACKAGE_TARNAME=''\nPACKAGE_URL=''\nPACKAGE_VERSION=''\nPATH_SEPARATOR=':'\nRANLIB=''\nRANLIB_FOR_BUILD='$(RANLIB)'\nRANLIB_FOR_TARGET=''\nRAW_CXX_FOR_TARGET=''\nREADELF=''\nREADELF_FOR_TARGET=''\nRPATH_ENVVAR=''\nRUNTEST=''\nSED='/usr/bin/sed'\nSHELL='/bin/sh'\nSTRIP=''\nSTRIP_FOR_TARGET=''\nSYSROOT_CFLAGS_FOR_TARGET=''\nTOPLEVEL_CONFIGURE_ARGUMENTS='./configure --prefix=/home/username/usr/local'\nWINDMC=''\nWINDMC_FOR_BUILD='$(WINDMC)'\nWINDMC_FOR_TARGET=''\nWINDRES=''\nWINDRES_FOR_BUILD='$(WINDRES)'\nWINDRES_FOR_TARGET=''\nYACC=''\nac_ct_CC='gcc'\nac_ct_CXX=''\nbindir='${exec_prefix}/bin'\nbuild='x86_64-unknown-linux-gnu'\nbuild_alias=''\nbuild_configargs=''\nbuild_configdirs='build-libiberty build-libcpp build-texinfo build-flex build-bison build-m4 build-fixincludes'\nbuild_cpu='x86_64'\nbuild_libsubdir='build-x86_64-unknown-linux-gnu'\nbuild_noncanonical='x86_64-unknown-linux-gnu'\nbuild_os='linux-gnu'\nbuild_subdir='build-x86_64-unknown-linux-gnu'\nbuild_tooldir=''\nbuild_vendor='unknown'\ncompare_exclusions=''\nconfigdirs='intl libiberty opcodes bfd readline tcl tk itcl libgui zlib libbacktrace libcpp libdecnumber gmp mpfr mpc isl libelf libiconv texinfo flex bison binutils gas ld fixincludes gcc cgen sid sim gdb gprof etc expect dejagnu m4 utils guile fastjar gnattools libcc1 gotools'\ndatadir='${datarootdir}'\ndatarootdir='${prefix}/share'\ndo_compare=''\ndocdir='${datarootdir}/doc/${PACKAGE}'\ndvidir='${docdir}'\nexec_prefix='NONE'\nextra_host_libiberty_configure_flags=''\nextra_isl_gmp_configure_flags=''\nextra_liboffloadmic_configure_flags=''\nextra_linker_plugin_configure_flags=''\nextra_linker_plugin_flags=''\nextra_mpc_gmp_configure_flags=''\nextra_mpc_mpfr_configure_flags=''\nextra_mpfr_configure_flags=''\ngmpinc=''\ngmplibs=''\nhost='x86_64-unknown-linux-gnu'\nhost_alias=''\nhost_configargs=''\nhost_cpu='x86_64'\nhost_noncanonical='x86_64-unknown-linux-gnu'\nhost_os='linux-gnu'\nhost_shared=''\nhost_subdir='host-x86_64-unknown-linux-gnu'\nhost_vendor='unknown'\nhtmldir='${docdir}'\nincludedir='${prefix}/include'\ninfodir='${datarootdir}/info'\nislinc=''\nisllibs=''\nlibdir='${exec_prefix}/lib'\nlibexecdir='${exec_prefix}/libexec'\nlocaledir='${datarootdir}/locale'\nlocalstatedir='${prefix}/var'\nmandir='${datarootdir}/man'\noldincludedir='/usr/include'\npdfdir='${docdir}'\npoststage1_ldflags=''\npoststage1_libs=''\nprefix='/home/username/usr/local'\nprogram_transform_name='s,y,y,'\npsdir='${docdir}'\nsbindir='${exec_prefix}/sbin'\nsharedstatedir='${prefix}/com'\nstage1_cflags=''\nstage1_checking=''\nstage1_languages=''\nstage1_ldflags=''\nstage1_libs=''\nstage2_werror_flag=''\nsysconfdir='${prefix}/etc'\ntarget='x86_64-unknown-linux-gnu'\ntarget_alias=''\ntarget_configargs=''\ntarget_configdirs='target-libgcc target-libbacktrace target-libgloss target-newlib target-libgomp target-libcilkrts target-liboffloadmic target-libatomic target-libitm target-libstdc++-v3 target-libsanitizer target-libvtv target-libmpx target-libssp target-libquadmath target-libgfortran target-boehm-gc target-libffi target-zlib target-libjava target-libobjc target-libada target-libgo target-rda'\ntarget_cpu='x86_64'\ntarget_noncanonical='x86_64-unknown-linux-gnu'\ntarget_os='linux-gnu'\ntarget_subdir='x86_64-unknown-linux-gnu'\ntarget_vendor='unknown'\ntooldir=''\n\n## ------------------- ##\n## File substitutions. ##\n## ------------------- ##\n\nalphaieee_frag=''\nhost_makefile_frag='/dev/null'\nospace_frag=''\nserialization_dependencies=''\ntarget_makefile_frag=''\n\n## ----------- ##\n## confdefs.h. ##\n## ----------- ##\n\n/* confdefs.h */\n#define PACKAGE_NAME \"\"\n#define PACKAGE_TARNAME \"\"\n#define PACKAGE_VERSION \"\"\n#define PACKAGE_STRING \"\"\n#define PACKAGE_BUGREPORT \"\"\n#define PACKAGE_URL \"\"\n\nconfigure: exit 77\n</code></pre>\n\n<p>Any help determining whats wrong would be greatly appreciated.</p>\n\n<pre><code>gcc-gcc_5_2_0_release&gt; which ld\n/usr/bin/ld\n\ngcc-gcc_5_2_0_release&gt; which gcc\n/usr/bin/gcc\n\ngcc-gcc_5_2_0_release&gt; ld --version\nGNU ld (GNU Binutils; SUSE Linux Enterprise 11) 2.23.1\nCopyright 2012 Free Software Foundation, Inc.\nThis program is free software; you may redistribute it under the terms of\nthe GNU General Public License version 3 or (at your option) a later version.\nThis program has absolutely no warranty.\n\ngcc-gcc_5_2_0_release&gt; gcc --version\ngcc (SUSE Linux) 4.3.4 [gcc-4_3-branch revision 152973]\nCopyright (C) 2008 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n"}, {"tags": ["c", "cuda", "shared-memory", "reduction"], "comments": [{"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 2, "creation_date": 1438230886, "post_id": 31706599, "comment_id": 51367926, "body": "Have you considered using Thrust: <a href=\"http://stackoverflow.com/questions/17862078/reduce-matrix-rows-with-cuda\">Reduce matrix rows with CUDA</a>?"}, {"owner": {"reputation": 13, "user_id": 5170160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9855afe0694d776daa2205cc7f982d4f?s=128&d=identicon&r=PG&f=1", "display_name": "YJung", "link": "https://stackoverflow.com/users/5170160/yjung"}, "reply_to_user": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 0, "creation_date": 1439325850, "post_id": 31706599, "comment_id": 51812526, "body": "Thanks for the comment!! I saw some posts that Thrust is pretty much slower than cublas functions so I wanted to design my own kernel, but I&#39;ll try it out later anyway. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1438671839, "post_id": 31757588, "comment_id": 51531917, "body": "Another saintly performance. The help vampires of this place don&#39;t deserve your tireless efforts."}, {"owner": {"reputation": 13, "user_id": 5170160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9855afe0694d776daa2205cc7f982d4f?s=128&d=identicon&r=PG&f=1", "display_name": "YJung", "link": "https://stackoverflow.com/users/5170160/yjung"}, "edited": false, "score": 0, "creation_date": 1439325692, "post_id": 31757588, "comment_id": 51812454, "body": "Wow this is awesome, thank you so much!!! I&#39;ll try to test it later and get back to you. Very much appreciated!!"}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 7, "last_activity_date": 1438395945, "last_edit_date": 1495542668, "creation_date": 1438395945, "answer_id": 31757588, "question_id": 31706599, "link": "https://stackoverflow.com/questions/31706599/how-to-perform-reduction-on-a-huge-2d-matrix-along-the-row-direction-using-cuda/31757588#31757588", "title": "How to perform reduction on a huge 2D matrix along the row direction using cuda? (max value and max value&#39;s index for each row)", "body": "<p>Your code has various issues:</p>\n\n<ol>\n<li>You should use <a href=\"https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api\">proper cuda error checking</a>.  That's just a standard boiler-plate statement I make.  I don't think your code was producing any runtime errors.</li>\n<li>You should validate your results.  I seriously doubt the code was producing sensible results.  The reasons why will become evident.  If you want to prove this to yourself, modify your data initialization to something that is obviously and easily verifiable, such as I have shown, without making any other changes, and you will see that your program produces errors.</li>\n<li>In your kernel, you're not indexing through the arrays correctly.  Perhaps you don't understand the <code>IDX2C</code> and <code>IDX2F</code> macros.  They are hurting you in two ways: you don't understand the pattern in which they are indexing through your array, and they are killing your coalescing out of global memory (<em>due to the way you have used them</em>).  Whenever we have a construct that is an indexed function of <code>threadIdx.x</code> and <code>threadIdx.y</code> (or <code>blockIdx.y</code> in this case), to maintain proper coalescing amongst adjacent threads, its desirable that the component based on the <code>threadIdx.x</code> <em>not get multiplied by any scaling factors</em>.  But the way you are passing parameters to <code>IDX2C</code> in your kernel, you are breaking this rule (and also disrupting your desired row-wise access pattern.)  So for now, let's get rid of those macros, as they are confusing the issue.</li>\n<li><p>This is an illegal use of <code>__syncthreads()</code>:</p>\n\n<pre><code>  if (!threadIdx.x){    // at the shared memory, only the first element (index 0) (actually 2 elements in the first index. max value, and max value index) is what we need.\n      blk_vals[blockIdx.y][blockIdx.x] = vals[0]; // For each window (single x row), the first elements of the blocks are stored into the blk_vals[windowNumber][:]\n                                        // remember, this is a global variable.\n    blk_idxs[blockIdx.y][blockIdx.x] = idxs[0]; // and the max value index\n\n  __syncthreads();\n}\n</code></pre>\n\n<p>It's illegal to use it in conditional code unless the condition evaluates teh same for every thread in the block.  It's entirely unneeded there, so we'll just delete it.</p></li>\n<li><p>Your printouts were indexing up through 20 instead of NROWS.</p></li>\n</ol>\n\n<p>With the above changes, your code goes from being broken (producing incorrect results) to being fixed, and execution time for the kernels on my system goes from 0.929ms to 0.656ms.   I attribute all of this to the coalescing fix in item 3 above.</p>\n\n<p>When I <a href=\"http://docs.nvidia.com/cuda/profiler-users-guide/index.html#abstract\" rel=\"nofollow noreferrer\">profile</a> the before and after cases with <code>nvprof --metrics gld_efficiency ...</code>, it shows 12.5% efficiency with your original code and 53% efficiency with the changes.  Here's the modified code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;iostream&gt;\n\n#define NCOLS 163317 // number of columns\n#define NROWS 8 // number of rows\n#define nTPB 1024  // Threads per Block. nTPB should be a power-of-2\n#define MAX_BLOCKS_X ((NCOLS/nTPB)+1) // # of blocks I will launch\n\n#define FLOAT_MIN -1.0f // lowest anticipated number of the data. Values in array will be compared with this and updated with the larger one\n\n\n__device__ volatile float blk_vals[NROWS][MAX_BLOCKS_X];\n__device__ volatile int   blk_idxs[NROWS][MAX_BLOCKS_X];\n// blk_vals and blk_idxs are the results obtained from reduction within each block.\n// after 1st reduction, each row will have blk_vals[MAX_BLOCKS_X] array and blk_idxs[MAX_BLOCKS_X]\n// these will be passed to the 2nd kernel\n\n__global__ void max_idx_kernel_reduction_within_block(const float *data, const int xSize, const int ySize){  // first kernel. Reduction within blocks\n  __shared__ volatile float vals[nTPB]; // Total amount of shared memory per block: 49152 bytes (50 KB). 1024 gives ~ 4KB for single.\n  __shared__ volatile int idxs[nTPB]; // ~ 4 KB for single, when nTPB is 1024. each block will have both indices and values\n\n  int idx = threadIdx.x+blockDim.x * blockIdx.x; // idx in the x direction\n  int idy = blockIdx.y;\n  float my_val = FLOAT_MIN; // lowest possible number\n  int my_idx = -1;  // to check whether you DID perform the kernel. Again, it's the idx in the x dir.\n\n  // sweep from global memory\n  while (idx &lt; xSize){   // this ensures you don't go out the size of the array's x direction\n    float temp = data[idy*xSize+idx];\n    if (temp &gt; my_val) {my_val = temp; my_idx = idx;}\n    // compare with my_val, and put the bigger value into my_val for next comparison. my_idx is 0 index based\n    idx += blockDim.x*gridDim.x;}\n                                                                 // until here takes about 6 ms !! very fast!!\n  // populate shared memory: takes ~ 270 ms\n  vals[threadIdx.x] = my_val;  // put the computed max value for each thread into the shared memory. -&gt; this is the bottleneck!!\n  idxs[threadIdx.x] = my_idx;  // do this for index as well -&gt; this is also slow!!\n\n  __syncthreads();\n\n  // sweep in shared memory\n  for (int i = (nTPB&gt;&gt;1); i &gt; 0; i&gt;&gt;=1){\n    if (threadIdx.x &lt; i)    // the first half threads of the block\n      if (vals[threadIdx.x] &lt; vals[threadIdx.x + i]) {vals[threadIdx.x] = vals[threadIdx.x+i]; idxs[threadIdx.x] = idxs[threadIdx.x+i]; }\n                            // the above is comparing shared memory of threadIdx.x with shared memory of threadIdx.x + i.\n                            // then puts the larger value into shared memory of threadIdx.x\n    __syncthreads();}       // so now in each block, shared memory's first element (index 0) is the max value and max value index\n\n\n  // perform block-level reduction\n  if (!threadIdx.x){    // at the shared memory, only the first element (index 0) (actually 2 elements in the first index. max value, and max value index) is what we need.\n      blk_vals[blockIdx.y][blockIdx.x] = vals[0]; // For each window (single x row), the first elements of the blocks are stored into the blk_vals[windowNumber][:]\n                                                // remember, this is a global variable.\n      blk_idxs[blockIdx.y][blockIdx.x] = idxs[0]; // and the max value index\n\n  __syncthreads();\n}\n\n}\n\n  // originally the following kernel was in the 1st kernel, performed by the last block. So just use one block for this.\n__global__ void max_idx_kernel_final(int *result_maxInd, float *result_maxVal){\n\n  __shared__ volatile float vals[nTPB]; //  Total amount of shared memory per block: 49152 bytes (50 KB). 1024 gives ~ 4KB for single.\n  __shared__ volatile int idxs[nTPB]; // ~ 4 KB for single, when nTPB is 1024. each block will have these variables!! (vals and idxs)\n\n  int idx = threadIdx.x;\n  int idy = blockIdx.y;\n  float my_val = FLOAT_MIN;\n  int my_idx = -1;  // remember, these are local variables, so each thread has this variable. This local variable is independent from other thread's local variable\n  while (idx &lt; MAX_BLOCKS_X ){                                                          // ?? confused whether it should be gridDim.x (actual # of blocks launched) or MAX_BLOCKS_X (# of elements in x dir of the global array blk_vals)\n    float temp = blk_vals[idy][idx];\n    if (temp &gt; my_val)\n        {my_val = temp; my_idx = blk_idxs[idy][idx]; }\n    idx += blockDim.x;} // all threads in this single block (single in the x dir) are working, so you should loop over blockDim.x.\n                      // Imagine where gridDim.x (# of blocks) is huge so that you need to loop over to get the max value and index\n                      // After this, each thread in the block has a local variable (max value and max value index).\n                      // So far it was sort of a reduction, but instead of pairing values we just looped over the blk_vals and blk_idxs\n  // populate shared memory\n  idx = threadIdx.x;\n  vals[idx] = my_val;   // This is now shared memory. This is because reduction requires comparison between different elements\n  idxs[idx] = my_idx;   // my_idx value is 0 based. This is done for all blocks (in the y direction)\n  __syncthreads();\n  // Now the final task is to do reduction for all threads in our single block (single block in the x dir, NROWS blocks in the y dir)!\n\n// sweep in shared memory\n  for (int i = (nTPB&gt;&gt;1); i &gt; 0; i&gt;&gt;=1) {\n    if (idx &lt; i) // the first half threads of the block\n      if (vals[idx] &lt; vals[idx + i]) {vals[idx] = vals[idx+i]; idxs[idx] = idxs[idx+i]; }\n    __syncthreads();} // now all the results are in threadIdx.x == 0 for each block (there are NROWS blocks in the y dir)\n  // 0th thread. the results are in shared memory, not the local memory, so any thread could do the following. We just selected the 0th thread for no reason. If several threads try to do this, that would be a problem, since we'll have to wait for them\n\n  if(!threadIdx.x){\n        result_maxInd[idy] = idxs[0]; // the final result for each row goes into the corresponding position (blockIdx.y)\n        result_maxVal[idy] = vals[0];\n      }\n}\n\n\nint main(){\n\n    dim3 grids(MAX_BLOCKS_X, NROWS);\n    dim3 threads(nTPB,1);\n    dim3 grids2(1,NROWS);\n    dim3 threads2(nTPB);\n    float *d_vector, *h_vector;\n    h_vector = (float*)malloc(NROWS * NCOLS * sizeof(float));\n    memset(h_vector, 0, NROWS*NCOLS*sizeof(float));\n    for (int i =  0; i &lt; NROWS; i++)\n      h_vector[i*NCOLS + i] = 10.0f;  // create definite max element per row\n    cudaMalloc(&amp;d_vector, NROWS * NCOLS * sizeof(float));\n    cudaMemcpy(d_vector, h_vector, NROWS * NCOLS * sizeof(float), cudaMemcpyHostToDevice);\n\n    //d_vector is a pointer on the device pointing to the beginning of the vector, containing nrElements floats.\n\n    int *max_index;\n    float *max_val;\n    int *d_max_index;\n    float *d_max_val;\n\n    max_index = (int*)malloc(NROWS * sizeof(int));\n    max_val = (float*)malloc(NROWS * sizeof(float));\n    cudaMalloc((void**)&amp;d_max_index, NROWS * sizeof(int));\n    cudaMalloc((void**)&amp;d_max_val, NROWS * sizeof(float));\n\n    cudaEvent_t start, stop;\n    cudaEventCreate(&amp;start); cudaEventCreate(&amp;stop);\n    cudaEventRecord(start);\n    max_idx_kernel_reduction_within_block&lt;&lt;&lt;grids, threads&gt;&gt;&gt;(d_vector, NCOLS, NROWS);\n    max_idx_kernel_final&lt;&lt;&lt;grids2,threads2&gt;&gt;&gt;(d_max_index, d_max_val);\n    cudaEventRecord(stop);\n    cudaEventSynchronize(stop);\n    float et;\n    cudaEventElapsedTime(&amp;et, start, stop);\n    printf(\"elapsed time: %fms\\n\", et);\n\n    cudaMemcpy(max_index, d_max_index, NROWS * sizeof(int), cudaMemcpyDeviceToHost);\n    cudaMemcpy(max_val, d_max_val, NROWS * sizeof(float), cudaMemcpyDeviceToHost);\n\n    for(int z=0;z&lt;NROWS;z++)\n      printf(\"%d  \",max_index[z]);\n\n    printf(\"\\n\\n\\n\");\n\n    for(int z=0;z&lt;NROWS;z++)\n      printf(\"%f  \",max_val[z]);\n    printf(\"\\n\");\n    return 0;\n}\n$\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5170160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9855afe0694d776daa2205cc7f982d4f?s=128&d=identicon&r=PG&f=1", "display_name": "YJung", "link": "https://stackoverflow.com/users/5170160/yjung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1542, "favorite_count": 2, "accepted_answer_id": 31757588, "answer_count": 1, "score": 0, "last_activity_date": 1438395945, "creation_date": 1438188803, "last_edit_date": 1495540757, "question_id": 31706599, "link": "https://stackoverflow.com/questions/31706599/how-to-perform-reduction-on-a-huge-2d-matrix-along-the-row-direction-using-cuda", "title": "How to perform reduction on a huge 2D matrix along the row direction using cuda? (max value and max value&#39;s index for each row)", "body": "<p>I'm trying to implement a reduction along the row direction of a 2D matrix. I'm starting from a code I found on stackoverflow (thanks a lot Robert!)</p>\n\n<p><a href=\"https://stackoverflow.com/questions/27925979/thrustmax-element-slow-in-comparison-cublasisamax-more-efficient-implementat/27928463#27928463\">thrust::max_element slow in comparison cublasIsamax - More efficient implementation?</a></p>\n\n<p>The above link shows a custom kernel that performs reduction on a single row. It divides the input row into many rows and each row has 1024 threads. Works very well.</p>\n\n<p>For the 2D case, everything's the same except that now there's a y grid dimension. So each block's y dimension is still 1. The problem is that when I try to write data onto the shared memory within each block (within the \"max_idx_kernel_reduction_within_block\" kernel in the code), It takes very long (More than (# of Rows) * (Time it takes to perform reduction on 1 Row. I would rather run a for loop). I know I have a lot of elements but I was expecting something faster than that. </p>\n\n<p>I don't think the memory access pattern is an issue, but I heard that the TOTAL amount of shared memory might be the limitation?? : <a href=\"https://stackoverflow.com/questions/9196134/cuda-is-coalesced-global-memory-access-faster-than-shared-memory-also-does-al\">CUDA: Is coalesced global memory access faster than shared memory? Also, does allocating a large shared memory array slow down the program?</a></p>\n\n<p>Any suggestions to make my code faster (the first kernel is the bottleneck)? Thank you very much, very much appreciated!!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cuda_runtime.h&gt;\n\n#define NCOLS 163317 // number of columns\n#define NROWS 8 // number of rows\n#define nTPB 1024  // Threads per Block. nTPB should be a power-of-2\n#define MAX_BLOCKS_X ((NCOLS/nTPB)+1) // # of blocks I will launch\n\n#define MIN(a,b) ((a&gt;b)?b:a)\n#define FLOAT_MIN -1.0f // lowest anticipated number of the data. Values in array will be compared with this and updated with the larger one\n#define IDX2F(i,j,ld) ((j-1) * (ld) + ((i) - 1))  // 1 based indexing\n#define IDX2C(i,j,ld) ((j) * (ld) + i)  // 0 based indexing\n\n\n__device__ volatile float blk_vals[NROWS][MAX_BLOCKS_X];\n__device__ volatile int   blk_idxs[NROWS][MAX_BLOCKS_X];\n// blk_vals and blk_idxs are the results obtained from reduction within each block.\n// after 1st reduction, each row will have blk_vals[MAX_BLOCKS_X] array and blk_idxs[MAX_BLOCKS_X]\n// these will be passed to the 2nd kernel\n\n__global__ void max_idx_kernel_reduction_within_block(const float *data, const int xSize, const int ySize){  // first kernel. Reduction within blocks\n  __shared__ volatile float vals[nTPB]; // Total amount of shared memory per block: 49152 bytes (50 KB). 1024 gives ~ 4KB for single.\n  __shared__ volatile int idxs[nTPB]; // ~ 4 KB for single, when nTPB is 1024. each block will have both indices and values\n\n  int idx = threadIdx.x+blockDim.x * blockIdx.x; // idx in the x direction\n  float my_val = FLOAT_MIN; // lowest possible number\n  int my_idx = -1;  // to check whether you DID perform the kernel. Again, it's the idx in the x dir.\n\n  // sweep from global memory\n  while (idx &lt; xSize){   // this ensures you don't go out the size of the array's x direction\n    if (data[IDX2C(blockIdx.y,idx,ySize)] &gt; my_val) {my_val = data[IDX2C(blockIdx.y,idx,ySize)]; my_idx = idx;}\n    // compare with my_val, and put the bigger value into my_val for next comparison. my_idx is 0 index based\n    idx += blockDim.x*gridDim.x;}\n                                                                 // until here takes about 6 ms !! very fast!!\n\n  // populate shared memory: takes ~ 270 ms\n  vals[threadIdx.x] = my_val;  // put the computed max value for each thread into the shared memory. -&gt; this is the bottleneck!!\n  idxs[threadIdx.x] = my_idx;  // do this for index as well -&gt; this is also slow!!\n\n\n\n\n  __syncthreads();\n\n\n  // sweep in shared memory\n  for (int i = (nTPB&gt;&gt;1); i &gt; 0; i&gt;&gt;=1){\n    if (threadIdx.x &lt; i)    // the first half threads of the block\n      if (vals[threadIdx.x] &lt; vals[threadIdx.x + i]) {vals[threadIdx.x] = vals[threadIdx.x+i]; idxs[threadIdx.x] = idxs[threadIdx.x+i]; }\n                            // the above is comparing shared memory of threadIdx.x with shared memory of threadIdx.x + i.\n                            // then puts the larger value into shared memory of threadIdx.x\n    __syncthreads();}       // so now in each block, shared memory's first element (index 0) is the max value and max value index\n\n\n  // perform block-level reduction\n  if (!threadIdx.x){    // at the shared memory, only the first element (index 0) (actually 2 elements in the first index. max value, and max value index) is what we need.\n      blk_vals[blockIdx.y][blockIdx.x] = vals[0]; // For each window (single x row), the first elements of the blocks are stored into the blk_vals[windowNumber][:]\n                                                // remember, this is a global variable.\n    blk_idxs[blockIdx.y][blockIdx.x] = idxs[0]; // and the max value index\n\n  __syncthreads();\n}\n\n}\n\n\n\n\n\n\n\n  // originally the following kernel was in the 1st kernel, performed by the last block. So just use one block for this.\n__global__ void max_idx_kernel_final(int *result_maxInd, float *result_maxVal){\n\n  __shared__ volatile float vals[nTPB]; //  Total amount of shared memory per block: 49152 bytes (50 KB). 1024 gives ~ 4KB for single.\n  __shared__ volatile int idxs[nTPB]; // ~ 4 KB for single, when nTPB is 1024. each block will have these variables!! (vals and idxs)\n\n  int idx = threadIdx.x;\n  float my_val = FLOAT_MIN;\n  int my_idx = -1;  // remember, these are local variables, so each thread has this variable. This local variable is independent from other thread's local variable\n  while (idx &lt; MAX_BLOCKS_X ){                                                          // ?? confused whether it should be gridDim.x (actual # of blocks launched) or MAX_BLOCKS_X (# of elements in x dir of the global array blk_vals)\n    if (blk_vals[blockIdx.y][idx] &gt; my_val)\n        {my_val = blk_vals[blockIdx.y][idx]; my_idx = blk_idxs[blockIdx.y][idx]; }\n    idx += blockDim.x;} // all threads in this single block (single in the x dir) are working, so you should loop over blockDim.x.\n                      // Imagine where gridDim.x (# of blocks) is huge so that you need to loop over to get the max value and index\n                      // After this, each thread in the block has a local variable (max value and max value index).\n                      // So far it was sort of a reduction, but instead of pairing values we just looped over the blk_vals and blk_idxs\n  // populate shared memory\n  vals[threadIdx.x] = my_val;   // This is now shared memory. This is because reduction requires comparison between different elements\n  idxs[threadIdx.x] = my_idx;   // my_idx value is 0 based. This is done for all blocks (in the y direction)\n  __syncthreads();\n  // Now the final task is to do reduction for all threads in our single block (single block in the x dir, NROWS blocks in the y dir)!\n\n// sweep in shared memory\n  for (int i = (nTPB&gt;&gt;1); i &gt; 0; i&gt;&gt;=1) {\n    if (threadIdx.x &lt; i) // the first half threads of the block\n      if (vals[threadIdx.x] &lt; vals[threadIdx.x + i]) {vals[threadIdx.x] = vals[threadIdx.x+i]; idxs[threadIdx.x] = idxs[threadIdx.x+i]; }\n    __syncthreads();} // now all the results are in threadIdx.x == 0 for each block (there are NROWS blocks in the y dir)\n  // 0th thread. the results are in shared memory, not the local memory, so any thread could do the following. We just selected the 0th thread for no reason. If several threads try to do this, that would be a problem, since we'll have to wait for them\n\n  if(!threadIdx.x){\n        result_maxInd[blockIdx.y] = idxs[0]; // the final result for each row goes into the corresponding position (blockIdx.y)\n        result_maxVal[blockIdx.y] = vals[0];\n      }\n}\n\n\n\n\n\n\n  int main(){\n\n    dim3 grids(MAX_BLOCKS_X, NROWS);\n    dim3 threads(nTPB,1);\n    dim3 grids2(1,NROWS);\n    dim3 threads2(nTPB);\n    float *d_vector, *h_vector;\n    h_vector = (float*)malloc(NROWS * NCOLS * sizeof(float));\n\n\n    for (int j = 1; j &lt;= NCOLS; j++) {\n      for (int i = 1; i &lt;= NROWS; i++)  {\n          h_vector[IDX2F(i,j,NROWS)] = (float) (rand()/(float)RAND_MAX);\n      }\n    }\n\n\n\n    h_vector[IDX2F(2,5,NROWS)] = 10;  // create definite max element\n    cudaMalloc(&amp;d_vector, NROWS * NCOLS * sizeof(float));\n    cudaMemcpy(d_vector, h_vector, NROWS * NCOLS * sizeof(float), cudaMemcpyHostToDevice);\n\n    //d_vector is a pointer on the device pointing to the beginning of the vector, containing nrElements floats.\n\n    int *max_index;\n    float *max_val;\n    int *d_max_index;\n    float *d_max_val;\n\n    max_index = (int*)malloc(NROWS * sizeof(int));\n    max_val = (float*)malloc(NROWS * sizeof(float));\n    cudaMalloc((void**)&amp;d_max_index, NROWS * sizeof(int));\n    cudaMalloc((void**)&amp;d_max_val, NROWS * sizeof(float));\n\n    max_idx_kernel_reduction_within_block&lt;&lt;&lt;grids, threads&gt;&gt;&gt;(d_vector, NCOLS, NROWS);\n    max_idx_kernel_final&lt;&lt;&lt;grids2,threads2&gt;&gt;&gt;(d_max_index, d_max_val);\n\n\n\n\n    cudaMemcpy(max_index, d_max_index, NROWS * sizeof(int), cudaMemcpyDeviceToHost);\n    cudaMemcpy(max_val, d_max_val, NROWS * sizeof(float), cudaMemcpyDeviceToHost);\n\n    for(int z=0;z&lt;20;z++)\nprintf(\"%d  \",max_index[z]);\n\n    printf(\"\\n\\n\\n\");\n\n    for(int z=0;z&lt;20;z++)\n    printf(\"%f  \",max_val[z]);\n\n    return 0;\n  }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 3, "creation_date": 1438188501, "post_id": 31706374, "comment_id": 51351283, "body": "Learn to use a <i>debugger!</i> Set breakpoints, single-step through the code, inspect variables. Where are the variables (or the program flow) not as you would expect?"}, {"owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1438188619, "post_id": 31706374, "comment_id": 51351353, "body": "well i tried almost everything and tried to debug it but when i entered name which was also in that file it always wrote ITs not there i dont know where i made a mistake even now im trying to look for mistake i have made but when i go line by line in my code and try to imagine what it does it should work imo"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1438188794, "post_id": 31706374, "comment_id": 51351472, "body": "Post the complete source code, parts are missing that are important."}, {"owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "edited": false, "score": 0, "creation_date": 1438189034, "post_id": 31706374, "comment_id": 51351646, "body": "edited the code it should be the whole code"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1438189044, "post_id": 31706374, "comment_id": 51351653, "body": "You must be more careful to initialise flags such as <code>p</code> and <code>final</code> <i>before</i> you iterate and not <i>after</i>. <code>p</code> is undefined on the first usage, and <code>final</code> might be, as the compiler should have told you."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438197734, "post_id": 31706374, "comment_id": 51356748, "body": "Agree with @Weather Vane.  Do you really want to only initialize <code>k</code> and not <code>i,p,counter,final,length,j,c</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438198194, "post_id": 31706374, "comment_id": 51356997, "body": "For future ref: &quot;but it does not work&quot; is nearly worthless. <i>Much</i> better to describe input, what happened (output) and what was expected."}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1438188954, "creation_date": 1438188954, "answer_id": 31706655, "question_id": 31706374, "link": "https://stackoverflow.com/questions/31706374/how-do-i-find-a-string-in-a-file/31706655#31706655", "title": "How do I find a string in a file?", "body": "<p>There are multiple problems with your code.  You did not post the variable definitions, so we cannot verify if they are used consistently, especially <code>name</code> that should be an array of <code>char</code>.</p>\n\n<p>The main issue is this: you count the number of bytes in <code>fr</code> by reading it, but you do not <code>rewind</code> the stream before scanning it for instances of the string.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1438198037, "post_id": 31708554, "comment_id": 51356915, "body": "Small item: Why use <code>sizeof(char)</code> which is <i>always</i> 1 in <code>malloc(sizeof(char)*(size_t)length)</code>.  Maybe <code>malloc((size_t)length)</code> or <code>malloc((size_t)length * sizeof *buffer)</code>?"}], "tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": true, "score": 3, "last_activity_date": 1509646521, "last_edit_date": 1509646521, "creation_date": 1438195049, "answer_id": 31708554, "question_id": 31706374, "link": "https://stackoverflow.com/questions/31706374/how-do-i-find-a-string-in-a-file/31708554#31708554", "title": "How do I find a string in a file?", "body": "<p>There are a lot of way to search  a string into a File.\nTry this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nchar *loadFile(const char *fileName);\n\nint main (void) {\n    const char *fileName = \"test.txt\";\n    const char *stringToSearch = \"Addams\";\n    char *fileContent = loadFile(fileName);\n\n    if (strstr(fileContent, stringToSearch)){\n        printf(\"%s was Found\\n\",stringToSearch);\n    }else{\n        printf(\"%s was not Found\\n\",stringToSearch);\n    }\n\n    free(fileContent);\n\n    return 0;\n}\n\nchar *loadFile(const char *fileName){\n    size_t length,size;\n    char *buffer;\n    FILE *file;\n\n    file = fopen (fileName , \"r\" );\n    if (file == NULL){\n        printf(\"Error fopen, please check the file\\t%s\\n\",fileName);\n        exit(EXIT_FAILURE);\n    }\n\n\n    fseek (file , 0 , SEEK_END);\n    length = (size_t)ftell (file);\n    fseek (file , 0 , SEEK_SET);\n\n    buffer = malloc(length+1);\n    if (buffer == NULL){\n        fputs (\"Memory error\",stderr);\n        exit (2);\n    }\n\n    size = fread (buffer,1,length,file);\n    if (size != length){\n        fputs (\"Reading error\",stderr);\n        exit(3);\n    }\n    buffer[length] = '\\0';\n\n    fclose (file);\n    return buffer;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Addams was Found</p>\n</blockquote>\n\n<p>I have inside the file \"test.txt\" the following:</p>\n\n<blockquote>\n<pre><code>Michael Jackson\nBryan Addams\nJack Sparrow\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 484, "user_id": 3891312, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/998f9736610b935376162590d411b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "kvway", "link": "https://stackoverflow.com/users/3891312/kvway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 31708554, "answer_count": 2, "score": 0, "last_activity_date": 1509646521, "creation_date": 1438188129, "last_edit_date": 1438191711, "question_id": 31706374, "link": "https://stackoverflow.com/questions/31706374/how-do-i-find-a-string-in-a-file", "title": "How do I find a string in a file?", "body": "<p>I'm new at C and recently finished my work with files. I tried to create a program which will find an entered name in a file but it does not work. Could you try to repair it?  I'll be thankful.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    FILE *fr;\n    int i,p,counter,final,length,j,c,k = 0;\n    char name[256];\n    char buffer[1024];\n\n    fr = fopen(\"C:/Users/prixi/Desktop/HESLA.TXT\",\"r\");\n    while ((c = fgetc(fr)) != EOF)\n        counter++;\n\n    printf(\"Enter the name\");\n    scanf(\"%s\",&amp;name);\n    length = strlen(name);\n\n    while (fscanf(fr, \" %1023[^\\n]\", buffer) != EOF) {\n        for (i = 0; i &lt;= counter; i++)\n            if (name[0] == buffer[i]){\n                for (j = 0;j &lt; length; j++ )\n                    if (name[j] == buffer[i+j])\n                        p++;\n                    else\n                        p = 0;\n\n              /* The 2nd condition is there because after every name there is ' '. */\n              if (p == length &amp;&amp; buffer[i+j+1] == ' ')\n                  final = 1;\n          }\n     }\n\n     if ( final == 1 )\n         printf(\"its there\");\n     else\n         printf(\"its not there\"); \nreturn 0;\n}\n</code></pre>\n\n<p>It loads the inside of the file to the buffer and then scans char by char depending on how long the file is. I know that it's inefficient and slow, but I have been learning C only for like 4 days. I would really like you to help me fixing my own code otherwise :D I probably wont be able to fall asleep. </p>\n"}, {"tags": ["c", "gcc", "eclipse-cdt"], "comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1438187209, "post_id": 31706037, "comment_id": 51350552, "body": "So Eclipse has an integrated editor\u2026 and VS started your program which ran in a console. What&#39;s the problem, again?`"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1438187228, "post_id": 31706037, "comment_id": 51350563, "body": "What is the problem? If by &quot;unexpected output&quot; you mean the implicit <code>pause</code> command inserted by your IDE, then that&#39;s not a problem (how else would you see the output, if the window closed immediately?). And why is this tagged <code>c++</code>? It does not appear to be using any C++ features."}, {"owner": {"reputation": 27, "user_id": 3371177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OsZJz.jpg?s=128&g=1", "display_name": "Mr-Eyes", "link": "https://stackoverflow.com/users/3371177/mr-eyes"}, "edited": false, "score": 0, "creation_date": 1438187397, "post_id": 31706037, "comment_id": 51350654, "body": "The problem described above , the sequence of running the code is not the same in the two IDEs ,,  Eclipse asks me first to input the string --&gt;&gt; scanf then printing out all the printf . While VS is doing it correctly"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1438187897, "post_id": 31706037, "comment_id": 51350939, "body": "Don&#39;t forget to <code>fflush();</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "is_accepted": true, "score": 2, "last_activity_date": 1438210913, "last_edit_date": 1495535194, "creation_date": 1438187615, "answer_id": 31706226, "question_id": 31706037, "link": "https://stackoverflow.com/questions/31706037/eclipse-cdt-unexpected-output-after-compiling-c-program/31706226#31706226", "title": "Eclipse CDT unexpected output after compiling C Program", "body": "<p>OK, I see now. I think the issue is that whenever you want to be certain that something is printed by a given point in the code, you need to flush <code>stdout</code> at that point.</p>\n\n<p>Otherwise, streamed contents can be queued and delivered in an implementation-dependent way (usually in small batches)</p>\n\n<p>The C standard library's <code>printf()</code>, when outputting to <code>stdout</code> and encountering a newline <code>\\n</code>, provides an implicit flush, so you don't need to call <code>flush()</code> yourself. Whereas with C++'s <code>std::cout</code>, only <code>std::endl</code> has this property; <code>\\n</code> is not guaranteed to.</p>\n\n<p>Deliberately flushing <code>stdout</code> in C can be done like so: <code>fflush(stdout);</code></p>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin\">Why does printf not flush after the call unless a newline is in the format string?</a></p>\n"}], "owner": {"reputation": 27, "user_id": 3371177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OsZJz.jpg?s=128&g=1", "display_name": "Mr-Eyes", "link": "https://stackoverflow.com/users/3371177/mr-eyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31706226, "answer_count": 1, "score": 0, "last_activity_date": 1438210913, "creation_date": 1438186958, "last_edit_date": 1438187619, "question_id": 31706037, "link": "https://stackoverflow.com/questions/31706037/eclipse-cdt-unexpected-output-after-compiling-c-program", "title": "Eclipse CDT unexpected output after compiling C Program", "body": "<p>While Trying this code on eclipse CDT with GCC 5.1.0 Compiler\nAll the strings were printed after the user input .. \nand while compiling it on Visual Studio and Code Blocks IDEs even with the windows CMD The program worked just fine as expected ..</p>\n\n<hr>\n\n<pre><code>\u202a#\u200einclude\u202c &lt;stdio.h&gt;\nstatic char string[128] = \"\";\nint main() {\nprintf(\"Type a string: \");\nscanf(\"%s\",string);\nprintf(\"The String is %s\", string);\nreturn 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Eclipse Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/HjcXO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HjcXO.jpg\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>Visual Studio Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/dqFuH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dqFuH.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks ,,,</p>\n"}, {"tags": ["c", "compiler-construction", "bison", "abstract-syntax-tree", "yacc"], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1438188291, "creation_date": 1438188291, "answer_id": 31706425, "question_id": 31705988, "link": "https://stackoverflow.com/questions/31705988/bison-ast-production-prints-scrambled-values/31706425#31706425", "title": "BISON AST production prints scrambled values", "body": "<p>This problem actually has nothing to do with bison or flex. It's in your <code>make_number_leaf</code> implementation:</p>\n\n<pre><code>TREE *make_number_leaf(int n){\n    TREE *leafNum = malloc(sizeof(TREE));\n    char *c, ch[8];\n    //       ^ local variable\n    sprintf(ch, \"%d\", n); /* Effective way to convert int to string */\n    c = ch;\n    leafNum-&gt;token = c;\n    //               ^ dangling pointer\n    // Remainder omitted\n }\n</code></pre>\n\n<p>As indicated in the comments above, <code>ch</code> is a local (stack-allocated) variable, whose lifetime ends when the function returns. Assigning its address to the variable <code>c</code> does nothing to change that. So the value of <code>c</code> which is stored into <code>leafNum-&gt;token</code> will become a dangling pointer as soon as the function returns.</p>\n\n<p>So when you later attempt to print out the token, you are printing out the contents of random memory.</p>\n\n<p>You need to <code>malloc</code> a character buffer, and remember to <code>free</code> it when you are <code>free</code>ing the <code>TREE</code>. (However, in the case where <code>leafNum-&gt;token</code> is a string literal, you cannot call <code>free</code>, so you need to be a bit cleverer.)</p>\n"}], "owner": {"reputation": 865, "user_id": 2539126, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AFbXK.png?s=128&g=1", "display_name": "Arkoudinos", "link": "https://stackoverflow.com/users/2539126/arkoudinos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 31706425, "answer_count": 1, "score": 1, "last_activity_date": 1438188291, "creation_date": 1438186808, "last_edit_date": 1438187741, "question_id": 31705988, "link": "https://stackoverflow.com/questions/31705988/bison-ast-production-prints-scrambled-values", "title": "BISON AST production prints scrambled values", "body": "<p>I'm trying to make a simple parser. It's for a homework assignment but also for own experimentation. I have completed the lexer and the parser and I'm trying now to output an AST. The problem is that when I'm adding, for example, two integers, the result tree is printed with unrecognizable symbols. A valid input should be <code>+(1,1)</code> and a valid output should be <code>(+ 1 1)</code>. Instead of this, I'm getting <code>( +  \ufffd|k  \ufffd|k )</code>. I've tried many things, without actually any significant result. The <code>sprintf</code> function returns a null terminator, so probably this is not the problem. Below is the <strong>parser</strong> code (.y file):</p>\n\n<pre><code>%{\n#define YYDEBUG 1\n%}\n\n%start program\n\n%token  NUMBER\n%token  ID\n%token  PLUS    MINUS   TIMES\n%token  LP  RP  EQUALS  COMMA\n%token  END\n\n%token  LET IN  AND\n\n%left   PLUS    MINUS\n%left   TIMES\n%left   LET IN  AND\n%left   EQUALS\n\n%%\n\nprogram:{printf(\"Empty Input\\n\");}  /* empty */\n        | program line /* do nothing */\n\nline:   expr END        { printtree($1); printf(\"\\n\");}\n    ;\n\nexpr    : /*Empty*/\n    | LET deflist IN expr {}\n    | ID        { printf(\"Found ID\\n\"); $$ = make_id_leaf($1);}\n    | NUMBER    { printf(\"Found NUMBER\\n\"); $$ = make_number_leaf($1);}\n        | PLUS LP expr COMMA expr RP  {$$ = make_plus_tree($3,$5); printf(\"Found expr PLUS expr.\\n\"); }\n        | TIMES LP expr COMMA expr RP {$$ = make_times_tree($3,$5); printf(\"Found expr TIMES expr. Result:%d\\n\", $$);}\n    | MINUS ID\n    | MINUS NUMBER     { printf(\"found MINUS NUMBER\\n\"); }\n        ;\n\ndeflist : definition\n    | definition AND deflist\n    ;\n\ndefinition : /*Empty*/\n       | ID EQUALS expr {printf(\"Found EQ\\n\");}\n       ;\n%%\n\n/*int main (void) {return yyparse ( );}*/\n\nint yyerror (char *s) {fprintf (stderr, \"%s\\n\", s);}\n</code></pre>\n\n<p>The <strong>lexer</strong> file:</p>\n\n<pre><code>%{\n#include \"parser.h\"\n%}\nDIGIT [0-9]\nLETTER [a-zA-Z]\n%%\n\nLET {printf(\"Encountered LET\\n\"); return(LET);}\nIN  {printf(\"Encountered IN\\n\"); return(IN);}\nAND {printf(\"Encountered AND\\n\"); return(AND);}\n{DIGIT}+    {yylval = atoi(yytext); return NUMBER;}\n{LETTER}*       { if (strlen(yytext) &lt;= 8){\n                    yylval = strlen(yytext);\n            printf( \"&lt;ID, %s&gt; \", yytext );\n            return(ID);\n                  } else {\n                        yytext[8] = '\\0';\n                        printf(\"WARNING! Long identifier. Truncating to 8 chars\\n\");\n                        printf( \"&lt;ID, %s&gt; \", yytext );\n            return(ID);\n                  }\n                }\n[ \\t] ;\n[\\n]     return(END); \n\"+\"      return(PLUS);\n\"-\"      return(MINUS);\n\"*\"      return(TIMES);\n\"=\"  return(EQUALS);\n\"(\"      return(LP);\n\")\"      return(RP);\n\",\"  return(COMMA);\n&lt;&lt;EOF&gt;&gt;  return(0);\n%%\n\nint yywrap (void) {return 1;}\n</code></pre>\n\n<p>The <strong>main.c</strong> which includes the <strong>yyparse()</strong> function:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"tree.h\"\n#include \"treedefs.h\"\n\nint main(int argc, char **argv){\n    yyparse();\n\n    return 0;\n}\n</code></pre>\n\n<p>And the <strong>treedefs.h</strong> file which includes the function definitions (I've included only the struct definition, the number leaf and the plus tree):</p>\n\n<pre><code>typedef struct tree{\n    char *token;\n    TREE *l;\n    TREE *r;\n    TREE *child;\n}TREE;\n\n/* Make number leaves */\n\nTREE *make_number_leaf(int n){\n\n    TREE *leafNum = malloc(sizeof(TREE));\n\n    char *c, ch[8];\n    sprintf(ch, \"%d\", n); /* Effective way to convert int to string */\n    c = ch;\n    leafNum-&gt;token = c;\n    leafNum-&gt;l = NULL;\n        leafNum-&gt;r = NULL;\n        leafNum-&gt;child = NULL;\n\n    printf(\"NUM Leaf is: %s\\n\", leafNum-&gt;token);\n\n    return (leafNum);\n}\n\n/* Addition tree */\n\nTREE *make_plus_tree(TREE *l, TREE *r){\n\n    TREE *plusTree = malloc(sizeof(TREE));\n\n    plusTree-&gt;token = \"+\";\n    plusTree-&gt;l = l;\n    plusTree-&gt;r = r;\n    plusTree-&gt;child = NULL;\n\n    return (plusTree);\n\n}\nvoid printtree(TREE *tree)\n{\n    if (tree-&gt;l || tree-&gt;r){\n            printf(\"(\");\n    }\n\n    printf(\" %s \", tree-&gt;token);\n\n    if (tree-&gt;l){\n        printtree(tree-&gt;l);\n    }\n    if (tree-&gt;r){\n        printtree(tree-&gt;r);\n    }\n    if (tree-&gt;l || tree-&gt;r){\n        printf(\")\");\n    }\n}\n</code></pre>\n\n<p>The file <strong>tree.h</strong> includes only some declarations, no big deal, and definitely not related to the issue.</p>\n\n<p>Why the numbers look like this? And how can I fix it? Any help will be greatly appreciated.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1438187984, "post_id": 31705957, "comment_id": 51350986, "body": "You want debug at kernel level. It is not a so easy task. But the most relevant point is that your simplification is too...simplified! That is not the flow to show something on the screen, it involves files, streams, kernel drivers, cards drivers, etc..."}, {"owner": {"reputation": 14956, "user_id": 544557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1df76ef4fab96ec67b2afa080b3a0c?s=128&d=identicon&r=PG", "display_name": "Jim Balter", "link": "https://stackoverflow.com/users/544557/jim-balter"}, "edited": false, "score": 0, "creation_date": 1438189131, "post_id": 31705957, "comment_id": 51351717, "body": "Would you settle for a pony?"}, {"owner": {"reputation": 84, "user_id": 4630995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f459c07727b616977159f46fb5cce13?s=128&d=identicon&r=PG&f=1", "display_name": "Boluny", "link": "https://stackoverflow.com/users/4630995/boluny"}, "reply_to_user": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1438190529, "post_id": 31705957, "comment_id": 51352543, "body": "@Frankie_C, hi, yes, I want to track what happens down through the flow, sorry that I don&#39;t know much about the kernel, but if somebody could give me some hint on how to explore it is also good to me, I can use kgdb to debug the kernel by myself but it may take so much time so I prefer to get answer from here."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1438242454, "post_id": 31705957, "comment_id": 51373044, "body": "@Boluny It is very hard not only for the complexity, but also for the concurrency of tasks. Before to afford such job you need to know much more about Linux internals and how it works. I suggest you to begin to read around and to have a look at sources (start googling for &quot;linux innternals&quot;)."}], "answers": [{"tags": [], "owner": {"reputation": 905, "user_id": 5170218, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e746d5acb1323eea69830a11b4a12ef2?s=128&d=identicon&r=PG&f=1", "display_name": "SACHIN GOYAL", "link": "https://stackoverflow.com/users/5170218/sachin-goyal"}, "is_accepted": false, "score": -5, "last_activity_date": 1438187605, "creation_date": 1438187605, "answer_id": 31706221, "question_id": 31705957, "link": "https://stackoverflow.com/questions/31705957/what-happened-in-linux-after-write-2-to-stdout-until-the-string-is-showed-on-t/31706221#31706221", "title": "what happened in Linux after write (2) to stdout until the string is showed on tty or virtual tty?", "body": "<p>Here's the GNU version of printf.\nprintf internally implemented using vfprintf . \nyou can see it passing in stdout to vfprintf:</p>\n\n<pre><code>__printf (const char *format, ...)\n{\n   va_list arg;\n   int done;\n\n   va_start (arg, format);\n   done = vfprintf (stdout, format, arg);\n   va_end (arg);\n\n   return done;\n}\n</code></pre>\n\n<p>If you want to dig further on vfprintf .\nHere is the source code for vfprintf .\n<a href=\"https://github.com/lattera/glibc/blob/master/stdio-common/vfprintf.c\" rel=\"nofollow\">https://github.com/lattera/glibc/blob/master/stdio-common/vfprintf.c</a></p>\n\n<p>It will give a clear idea on how vfprintf works .</p>\n"}, {"comments": [{"owner": {"reputation": 84, "user_id": 4630995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f459c07727b616977159f46fb5cce13?s=128&d=identicon&r=PG&f=1", "display_name": "Boluny", "link": "https://stackoverflow.com/users/4630995/boluny"}, "edited": false, "score": 0, "creation_date": 1438194039, "post_id": 31707921, "comment_id": 51354620, "body": "hi, big thanks for answering and give me so many hints so I&#39;ve where to find the code, I will read code according to your guide. thank you so much again!"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1438233039, "post_id": 31707921, "comment_id": 51368563, "body": "Might be worth mentioning something about terminal emulators too."}], "tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": false, "score": 4, "last_activity_date": 1438278393, "last_edit_date": 1438278393, "creation_date": 1438193022, "answer_id": 31707921, "question_id": 31705957, "link": "https://stackoverflow.com/questions/31705957/what-happened-in-linux-after-write-2-to-stdout-until-the-string-is-showed-on-t/31707921#31707921", "title": "what happened in Linux after write (2) to stdout until the string is showed on tty or virtual tty?", "body": "<p>From what I can tell for a typical case of writing to a virtual console (like <code>/dev/tty1</code>):</p>\n\n<ol>\n<li><code>write(2)</code> is invoked as you describe.</li>\n<li><code>write(2)</code> delegates (through the <a href=\"http://lxr.free-electrons.com/source/drivers/tty/tty_io.c#L459\" rel=\"nofollow\">file ops</a>) to the TTY driver's <a href=\"http://lxr.free-electrons.com/source/drivers/tty/tty_io.c#L1233\" rel=\"nofollow\">tty_write</a>.</li>\n<li>The TTY driver delegates (through the <a href=\"http://lxr.free-electrons.com/source/include/linux/tty_ldisc.h#L194\" rel=\"nofollow\">ldisc ops</a>) to the n_tty line discipline's <a href=\"http://lxr.free-electrons.com/source/drivers/tty/n_tty.c#L2362\" rel=\"nofollow\">n_tty_write</a>.</li>\n<li>The n_tty line discipline delegates (through the <a href=\"http://lxr.free-electrons.com/source/include/linux/tty_driver.h#L260\" rel=\"nofollow\">tty ops</a>) to the console driver's <a href=\"http://lxr.free-electrons.com/source/drivers/tty/vt/vt.c#L2757\" rel=\"nofollow\">con_write</a>.</li>\n<li>The console driver processes the data, interprets control characters and escape sequences, and eventually <a href=\"http://lxr.free-electrons.com/source/drivers/tty/vt/vt.c#L656\" rel=\"nofollow\">redraws the screen</a> by calling (through the <a href=\"http://lxr.free-electrons.com/source/include/linux/console.h#L42\" rel=\"nofollow\">consw ops</a>) the VGA console's <a href=\"http://lxr.free-electrons.com/source/drivers/video/console/vgacon.c#L817\" rel=\"nofollow\">vga_con_switch</a>.</li>\n<li>The data is memcpy'd directly to video memory at a location determined by <a href=\"http://lxr.free-electrons.com/source/drivers/video/console/vgacon.c#L370\" rel=\"nofollow\">vgacon_startup</a>, e.g. 0xB0000, familiar from <a href=\"http://wiki.osdev.org/Printing_To_Screen\" rel=\"nofollow\">OS independent x86 console rendering</a> literature. The hardware now renders this video memory to screen.</li>\n</ol>\n\n<p>For terminals other than virtual consoles, such serial consoles and <code>xterm</code>, step 4+ changes as it uses serial ttys and pseudo ttys instead of the console tty driver.</p>\n"}], "owner": {"reputation": 84, "user_id": 4630995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f459c07727b616977159f46fb5cce13?s=128&d=identicon&r=PG&f=1", "display_name": "Boluny", "link": "https://stackoverflow.com/users/4630995/boluny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "closed_date": 1438190827, "answer_count": 2, "score": 0, "last_activity_date": 1438278393, "creation_date": 1438186740, "last_edit_date": 1438233672, "question_id": 31705957, "link": "https://stackoverflow.com/questions/31705957/what-happened-in-linux-after-write-2-to-stdout-until-the-string-is-showed-on-t", "closed_reason": "Needs more focus", "title": "what happened in Linux after write (2) to stdout until the string is showed on tty or virtual tty?", "body": "<p>I'm wondering what happened after system call write (2) to stdout until the string is showed on tty or virtual tty? in another word, how do the kernel receive the system call and finally let VGA driver read and render it? what functions are called in this control flow?</p>\n\n<p>I'm so sorry that I'm a newbie on asking questions, I'd appreciate if you could tell me <strong>how to narrow my topic</strong>, thanks.</p>\n\n<p>I've had a really simple understanding about that:</p>\n\n<ol>\n<li>the string is transfered from user space to kernel space from system call write (2). </li>\n<li>kernel handle it, put the string in a place in the memory which VGA or something else could read it.(<strong>this is the part I really want to know details</strong>)</li>\n<li>the VGA driver read that memory and render it on tty.</li>\n</ol>\n\n<p>Can anybody help me? it's better if you could give the function name in the kernel which I could check in the LXR.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438186601, "post_id": 31705703, "comment_id": 51350142, "body": "And if you add a third or forth star in <code>swap</code>, it also will be fine. Just think about it."}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1438192591, "post_id": 31706039, "comment_id": 51353716, "body": "When i run your program i get &quot;PA = 5 PB = 10  After Swap: PA = 5 PB = 5&quot;  Is the right rezult? Or you mean &quot;int *pTemp = *ppa;     *ppa = *ppb;     *ppb = pTemp;&quot; ?"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1438242829, "post_id": 31706039, "comment_id": 51373280, "body": "@Michi Yes, you&#39;re right just a typo. I&#39;ve corrected the answer. Thanks."}], "tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1438248878, "last_edit_date": 1438248878, "creation_date": 1438186974, "answer_id": 31706039, "question_id": 31705703, "link": "https://stackoverflow.com/questions/31705703/pointer-or-pointer-to-pointer/31706039#31706039", "title": "Pointer or Pointer-to-Pointer", "body": "<p>Nothing is wrong while it is legal and working.\nThe only consideration is how much it is useful and efficient. Passing a pointer to pointer the generated code will include a triple addressing, the first addressing will retrieve the address of the pointer to the variable, the second will retrieve the address of the variable from the pointer and last it will get the variable.\nIn your case you are obliged to pass pointers to make the function swap able to modify the two arguments outside the function scope.</p>\n\n<p>But passing a pointer of a pointer can have a sense if you consider this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int **ppa, int **ppb){\n    int *pTemp = *ppb;\n    *ppb = *ppa;\n    *ppa = pTemp;\n}\n\n\nint main(void){\n    int a = 5;\n    int b = 10;\n\n    int *pa = &amp;a;\n    int *pb = &amp;b;\n\n    printf(\"Before Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\\n\",*pa,*pb);\n\n    swap(&amp;pa,&amp;pb);\n\n    printf(\"After Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\",*pa,*pb);\n\n    return 0;\n}\n</code></pre>\n\n<p>In this case you are swapping pointers, not variables. This is very useful when you need to swap large data, like strings, because is much faster than copying back the whole data between objects.</p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1438265490, "post_id": 31719983, "comment_id": 51388319, "body": "Can you please change your code in C, i have no idea about C++. explain please this: &quot;void actYourAge(int &amp;age){      age = 39;   }&quot;"}, {"owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1438266173, "post_id": 31719983, "comment_id": 51388854, "body": "the idea is same in c and c++   function <b>actYourAge</b> I give you an example how to pass the refrence of variable to function and change the variable value by its refrence in memory   <b>myAge = 21</b>   befor I pass the refrence of <b>myAge</b> which is <b>ageRef</b> to the function <b>actYourAge(ageRef);</b>   and when i pass the variable refrence to it the new value of <b>myAge</b> will be 39 as we change it in function."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1438267661, "post_id": 31719983, "comment_id": 51390001, "body": "Yes, but the compiler complains about that function:    &quot;error: expected \u2018;\u2019, \u2018,\u2019 or \u2018)\u2019 before \u2018&amp;\u2019 token|&quot;. Please can you  Edit your post with a C code which i can compile it ?. thank you"}, {"owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1438269689, "post_id": 31719983, "comment_id": 51391455, "body": "just a minute I will help you"}], "tags": [], "owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "is_accepted": false, "score": 1, "last_activity_date": 1438270155, "last_edit_date": 1438270155, "creation_date": 1438248523, "answer_id": 31719983, "question_id": 31705703, "link": "https://stackoverflow.com/questions/31705703/pointer-or-pointer-to-pointer/31719983#31719983", "title": "Pointer or Pointer-to-Pointer", "body": "<p>you should well understand difference between pointers and refrences to got the right results </p>\n\n<p>also you should know well difference between calling by value and by pointer and by refrence in functions :</p>\n\n<p>here some examples should clarify the concept to you :</p>\n\n<pre><code> int myAge=39;\n\ncout&lt;&lt; \"myAge is locate at \" &lt;&lt; &amp;myAge &lt;&lt; endl; // address of myAge in memory\n\nint* agePtr=&amp;myAge;\n\ncout&lt;&lt;\"Address of pointer \"&lt;&lt; agePtr &lt;&lt; endl;\n\ncout&lt;&lt; \" Data at memory address \"&lt;&lt; *agePtr &lt;&lt; endl;\n\nint badNums[5]={4, 13, 14, 24, 34};\n\nint* numArrayPtr = badNums;\n\ncout&lt;&lt; \"Address \" &lt;&lt; numArrayPtr &lt;&lt; \" Value \" &lt;&lt; *numArrayPtr &lt;&lt; endl;\n\nnumArrayPtr++; // get next value in Array\n\ncout&lt;&lt; \"Address \" &lt;&lt; numArrayPtr &lt;&lt; \" Value \" &lt;&lt; *numArrayPtr &lt;&lt; endl;\n\ncout&lt;&lt; \"Address \" &lt;&lt; badNums &lt;&lt; \" Value \" &lt;&lt; *badNums &lt;&lt; endl;\n</code></pre>\n\n<p>here calling function paramaters by pointer and by refrence :</p>\n\n<pre><code>void makeMeYoung(int* age) {\n\n cout&lt;&lt; \" I used to be \" &lt;&lt; *age &lt;&lt; endl;\n\n    *age = 21;\n  } \n\nvoid actYourAge(int&amp; age){\n     age = 39;                                       \n  }\n\nmakeMeYoung(&amp;myAge);\n\ncout &lt;&lt; \"I'm \"&lt;&lt; myAge &lt;&lt; \" years old now\" &lt;&lt; endl; // 21\n\nint&amp; ageRef= myAge;\n\ncout&lt;&lt;\"myAge : \" &lt;&lt; myAge &lt;&lt; endl; // 21\n\n ageRef++;\n\n cout&lt;&lt;\"myAge : \" &lt;&lt; myAge &lt;&lt; endl; // 22\n\nactYourAge(ageRef);\n\ncout&lt;&lt;\"myAge : \" &lt;&lt; myAge &lt;&lt; endl; // 39\n</code></pre>\n\n<p>note that you should use pointers if you dont want to initialize at decleration of variables , also if you need to assign another variable to the pointer so with pointer you will be able to deal with more than one variable , while refrence when you need to use just one refrence to a variable and stuck with it , the idea is when you want to point to only one variable use refrence. </p>\n"}], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 31706039, "answer_count": 2, "score": 2, "last_activity_date": 1438270624, "creation_date": 1438186034, "last_edit_date": 1438187027, "question_id": 31705703, "link": "https://stackoverflow.com/questions/31705703/pointer-or-pointer-to-pointer", "title": "Pointer or Pointer-to-Pointer", "body": "<p>Before i proceed i wanna tell you that i'm a beginner in c language (6 months) and when I have to use pointers in my programs i'm not 100% sure about them, so please be gentle with me.</p>\n\n<p>Today i was coding something and at one point i realized that i need the use of swap.</p>\n\n<p><strong>Option 1:</strong>\nThis is what i used:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int *pa, int *pb){\n    int temp;\n    temp = *pa;\n    *pa = *pb;\n    *pb = temp;\n}\n\n\nint main(void){\n    int a = 5;\n    int b = 10;\n\n    printf(\"Before Swap:\\n\");\n    printf(\"A = %d\\nB = %d\\n\\n\",a,b);\n\n    swap(&amp;a,&amp;b);\n\n    printf(\"After Swap:\\n\");\n    printf(\"A = %d\\nB = %d\\n\",a,b);\n\n    return 0;\n}\n</code></pre>\n\n<p>And it works fine for what i need:</p>\n\n<blockquote>\n<pre><code>Before Swap:\nA = 5\nB = 10\n</code></pre>\n</blockquote>\n\n<pre><code>After Swap:\nA = 10\nB = 5\n</code></pre>\n\n<p>Latter i decided that in the Program has to be involved pointers and i changed the Program like this:</p>\n\n<p><strong>Option 2:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int *pa, int *pb){\n    int temp;\n    temp = *pa;\n    *pa = *pb;\n    *pb = temp;\n}\n\n\nint main(void){\n    int a = 5;\n    int b = 10;\n\n    int *pa = &amp;a;\n    int *pb = &amp;b;\n\n    printf(\"Before Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\\n\",*pa,*pb);\n\n    swap(pa,pb);\n\n    printf(\"After Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\",*pa,*pb);\n\n    return 0;\n}\n</code></pre>\n\n<p>And again its works fine for what i was needed:</p>\n\n<pre><code>Before Swap:\nPA = 5\nPB = 10\n\nAfter Swap:\nPA = 10\nPB = 5\n</code></pre>\n\n<p>Now come the interesting part. \nI was proceeding with the coding and i changed the swap Function by using Pointer-to-Pointer as arguments and i got this:</p>\n\n<p><strong>Option 3:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int **ppa, int **ppb){\n    int temp;\n    temp = **ppa;\n    **ppa = **ppb;\n    **ppb = temp;\n}\n\n\nint main(void){\n    int a = 5;\n    int b = 10;\n\n    int *pa = &amp;a;\n    int *pb = &amp;b;\n\n    printf(\"Before Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\\n\",*pa,*pb);\n\n    swap(&amp;pa,&amp;pb);\n\n    printf(\"After Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\",*pa,*pb);\n\n    return 0;\n}\n</code></pre>\n\n<p>And everything was ok:</p>\n\n<blockquote>\n<pre><code>Before Swap:\nPA = 5\nPB = 10\n</code></pre>\n</blockquote>\n\n<pre><code>After Swap:\nPA = 10\nPB = 5\n</code></pre>\n\n<p>So here i had to use &amp; operator when i was calling the swap function in main.\nMy question is (because i'm confused in here) are Option 2 and Option 3 both Ok to be used or just one of them should be used and why.\nI am not asking for a better coding, I just do not know if option 2 and 3, both are legal or not and why both are working fine.</p>\n\n<p>L.E:\n@Olaf said that:</p>\n\n<blockquote>\n  <p>And if you add a third or forth star in swap, it also will be fine. Just think about it</p>\n</blockquote>\n\n<p>Now i am more confused because its not working as he said:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap(int ****pa, int ****pb){\n    int temp;\n    temp = ****pa;\n    ****pa = ****pb;\n    ****pb = temp;\n}\n\n\nint main(void){\n    int a = 5;\n    int b = 10;\n\n    int *pa = &amp;a;\n    int *pb = &amp;b;\n\n    printf(\"Before Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\\n\",*pa,*pb);\n\n    swap(&amp;pa,&amp;pb);\n\n    printf(\"After Swap:\\n\");\n    printf(\"PA = %d\\nPB = %d\\n\",*pa,*pb);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>program.c: In function \u2018main\u2019:\nprogram.c:21:14: error: passing argument 1 of \u2018swap\u2019 from incompatible pointer type [-Werror]\n         swap(&amp;pa,&amp;pb);\n              ^\nprogram.c:3:10: note: expected \u2018int ****\u2019 but argument is of type \u2018int **\u2019\n     void swap(int ****pa, int ****pb){\n          ^\nprogram.c:21:18: error: passing argument 2 of \u2018swap\u2019 from incompatible pointer type [-Werror]\n         swap(&amp;pa,&amp;pb);\n                  ^\nprogram.c:3:10: note: expected \u2018int ****\u2019 but argument is of type \u2018int **\u2019\n     void swap(int ****pa, int ****pb){\n          ^\ncc1: all warnings being treated as errors\n</code></pre>\n</blockquote>\n"}, {"tags": ["c", "makefile"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 5, "last_activity_date": 1438199405, "last_edit_date": 1438199405, "creation_date": 1438185270, "answer_id": 31705395, "question_id": 31705270, "link": "https://stackoverflow.com/questions/31705270/clang-error-unknown-argument-wall/31705395#31705395", "title": "clang: error: unknown argument: &#39;-wall&#39;", "body": "<p>The option you're looking for is <code>-Wall</code>.</p>\n\n<p>In general, options starting with <code>-W</code> indicate specific warnings or sets of warnings to enable or disable.</p>\n"}], "owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438199405, "creation_date": 1438184970, "question_id": 31705270, "link": "https://stackoverflow.com/questions/31705270/clang-error-unknown-argument-wall", "title": "clang: error: unknown argument: &#39;-wall&#39;", "body": "<p>I was walking through <a href=\"http://c.learncodethehardway.org/book/ex3.html\" rel=\"nofollow\">this</a> tutorial, where I had to create this <code>make</code> file:</p>\n\n<pre><code> CFLAGS=-wall  -g\n\n clean:\n   rm  -f  ex1\n</code></pre>\n\n<p>I then used the above <code>make</code> file in <a href=\"http://c.learncodethehardway.org/book/ex3.html\" rel=\"nofollow\">this</a> tutorial, and ran the following command:</p>\n\n<pre><code>$ make ex3\n</code></pre>\n\n<p>When I did that, I got the following output:</p>\n\n<pre><code>cc -wall  -g    ex3.c   -o ex3\nclang: error: unknown argument: '-wall'\nmake: *** [ex3] Error 1\n</code></pre>\n\n<p>Why did I get the error? How can I fix it?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c#", "c++", "c", "dll", "dllimport"], "comments": [{"owner": {"reputation": 2717, "user_id": 3670482, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0c8eae23189a5c64f7bf9d1467cfd8a0?s=128&d=identicon&r=PG&f=1", "display_name": "The Vivandiere", "link": "https://stackoverflow.com/users/3670482/the-vivandiere"}, "edited": false, "score": 0, "creation_date": 1438184999, "post_id": 31705171, "comment_id": 51349106, "body": "Sorry cant help you. I would recommend that you look at some codeproject articles like <a href=\"http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w\" rel=\"nofollow noreferrer\">codeproject.com/Articles/9826/&hellip;</a>"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438199227, "post_id": 31705171, "comment_id": 51357573, "body": "You can&#39;t add an unmanaged dll as a reference. You need to write the p/invoke imports for each function. Or better still, create a C++/CLI wrapper."}], "answers": [{"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1438199187, "post_id": 31706323, "comment_id": 51357551, "body": "No. The user is attempting to add a reference which is not appropriate for an unmanaged dll"}], "tags": [], "owner": {"reputation": 84, "user_id": 5170223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/997f0eb5727f338c86755c492e0d2943?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Emberton", "link": "https://stackoverflow.com/users/5170223/dave-emberton"}, "is_accepted": false, "score": 0, "last_activity_date": 1438187955, "creation_date": 1438187955, "answer_id": 31706323, "question_id": 31705171, "link": "https://stackoverflow.com/questions/31705171/calling-c-from-c/31706323#31706323", "title": "Calling C from C#", "body": "<p>You don't need a header file, but you will need to __declspec(dllexport) each function. And if it's C++ (i.e. a .cpp file) you'll need extern \"C\".</p>\n\n<p>There's a handy program called depends.exe that allows you to look at a DLL and see what functions it exports and if it depends on any other DLLs. That might be why your DllImport is failing.</p>\n"}], "owner": {"reputation": 155, "user_id": 5120910, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LNFBQ.jpg?s=128&g=1", "display_name": "MathieuL", "link": "https://stackoverflow.com/users/5120910/mathieul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 808, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1438697210, "creation_date": 1438184653, "last_edit_date": 1495540283, "question_id": 31705171, "link": "https://stackoverflow.com/questions/31705171/calling-c-from-c", "title": "Calling C from C#", "body": "<p>I am from electric engineer background, therefore my knownledge is small about C#,DLL,etc.... I want to use c function into a C#. I know there is a couple post about that but I didn't find one that is enough simple.</p>\n\n<p>Currently, I got C function call windows API to read/write on the USB port. First to create a .dll do I need a header file? Because I got the following function decleration function into a header. The examples that I saw on stack overflow and Internet only use a simple .c file, Can I get rid of the header files?</p>\n\n<pre><code>__declspec(dllexport) LMUSB_HANDLE  __stdcall InitializeDevice(unsigned short usVID,\n                                    unsigned short usPID,\n                                    LPGUID lpGUID,\n                                    BOOL *pbDriverInstalled);\n__declspec(dllexport) LMUSB_HANDLE  __stdcall InitializeDeviceByIndex(unsigned short usVID,\n                                           unsigned short usPID,\n                                           LPGUID lpGUID,\n                                           DWORD dwIndex,\n                                           BOOL bOpenDataEndpoints,\n                                           BOOL *pbDriverInstalled);\n__declspec(dllexport) BOOL  __stdcall TerminateDevice(LMUSB_HANDLE hHandle);\n__declspec(dllexport) BOOL  __stdcall WriteUSBPacket(LMUSB_HANDLE hHandle,\n                          unsigned char *pcBuffer,\n                          unsigned long ulSize,\n                          unsigned long *pulWritten);\n__declspec(dllexport) DWORD  __stdcall ReadUSBPacket(LMUSB_HANDLE hHandle,\n                         unsigned char *pcBuffer,\n                         unsigned long ulSize,\n                         unsigned long *pulRead,\n                         unsigned long ulTimeoutMs,\n                         HANDLE hBreak);\n __declspec(dllexport) BOOL  __stdcall Endpoint0Transfer(LMUSB_HANDLE hHandle, UCHAR ucRequestType,\n                             UCHAR ucRequest, USHORT usValue,\n                             USHORT usIndex, USHORT usLength,\n                             PUCHAR pucBuffer, PUSHORT pusCount);\n</code></pre>\n\n<p>Second point, do I need to write __declspec(dllexport) in the cpp file? Here an function from the cpp:</p>\n\n<pre><code>extern \"C\" __declspec(dllexport) BOOL PASCAL EXPORT TerminateDevice(LMUSB_HANDLE hUSB)\n</code></pre>\n\n<p>I got no idea what \"BOOL PASCAL EXPORT\" does, this code is recycled from a furnisher project.</p>\n\n<p>Finaly, when the DLL is properly build. How I import it in the C# project? I tried the following but without success : </p>\n\n<pre><code>[DllImport(\"lmusbdll.dll\")]\n</code></pre>\n\n<p>I see that you could use right click on the project and add reference but Visual Studio pop-up an error message:</p>\n\n<pre><code>A reference to \"DLL path\" could not be added. Please make sure that the file is accessible, and that it is a valid assembly or COM component.\n</code></pre>\n\n<p>[EDIT]</p>\n\n<p>I tried the following <a href=\"https://stackoverflow.com/questions/2211867/how-do-i-call-native-c-from-c\">solution</a> , but when I tried to reference the header file in my c# project. I still get the message that I cannot reference the file.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2241, "user_id": 273853, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cc22d49f04954a5bae58a2e5e2c579bd?s=128&d=identicon&r=PG", "display_name": "Edward Ashak", "link": "https://stackoverflow.com/users/273853/edward-ashak"}, "edited": false, "score": 0, "creation_date": 1438185821, "post_id": 31704964, "comment_id": 51349653, "body": "maybe try: printf(&quot;Address of *s1 = %u \\n&quot;, &amp;s1);"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1438184169, "creation_date": 1438184169, "answer_id": 31704987, "question_id": 31704964, "link": "https://stackoverflow.com/questions/31704964/c-program-wont-run-beginnerss-query-on-pointers-char/31704987#31704987", "title": "C Program won&#39;t run - Beginners&#39;s Query on Pointers &amp; Char", "body": "<p>First, let me tell you, in your code,</p>\n\n<pre><code>*s1='p';\n*s2 ='q';\n</code></pre>\n\n<p>both the instructions try to write into uninitialised memory area. It  invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>You need to allocate memory to both <code>s1</code> and <code>s2</code> before you make use of them. maybe <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow\"><code>malloc()</code></a> can help.</p>\n\n<p>That said, </p>\n\n<ul>\n<li>use <code>%zu</code> to print the output of <code>sizeof</code>, which is of type <code>size_t</code>.</li>\n<li>use <code>%p</code> to print an address, and cast the corresponding argument to <code>(void *)</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1438189061, "last_edit_date": 1438189061, "creation_date": 1438187494, "answer_id": 31706188, "question_id": 31704964, "link": "https://stackoverflow.com/questions/31704964/c-program-wont-run-beginnerss-query-on-pointers-char/31706188#31706188", "title": "C Program won&#39;t run - Beginners&#39;s Query on Pointers &amp; Char", "body": "<p>Going through your errors:</p>\n\n<blockquote>\n  <p>10|warning: format '%u' expects argument of type 'unsigned int', but argument 2 has type 'char *' [-Wformat]|</p>\n</blockquote>\n\n<p>comes from the line</p>\n\n<pre><code>printf(\"Address of *s1 = %u \\n\", s1);\n</code></pre>\n\n<p>The <code>%u</code> conversion specifier expects its corresponding argument to have type <code>unsigned int</code>.  The expression <code>s1</code> has type <code>char *</code> (because you declared it as <code>char *s1</code>).  </p>\n\n<p>A pointer is not an unsigned integer<sup>1</sup>, hence the warning.  To print out pointer values, use the <code>%p</code> conversion specifier and cast the argument to <code>void *</code>, like so:</p>\n\n<pre><code>printf(\"Address of *s1 = %p \\n\", (void *) s1);\n</code></pre>\n\n<p>This is probably the only time in C where you have to explicitly cast a pointer value to <code>void</code>.</p>\n\n<blockquote>\n  <p>6|warning: 's1' is used uninitialized in this function [-Wuninitialized]|</p>\n</blockquote>\n\n<p>You've declared <code>s1</code> as a pointer to <code>char</code>; its value will be an <em>address</em> in memory where the value <code>p</code> will be stored (<code>p</code> will not be stored to <code>s1</code> itself).  Unfortunately, you haven't initialized <code>s1</code> to point to a valid memory location; it contains an <em>indeterminate</em> value that doesn't correspond to the address of any object in your program.  Thus, when you write</p>\n\n<pre><code>*s1 = 'p';\n</code></pre>\n\n<p>you're trying to store the value <code>'p'</code> to an invalid memory location.  </p>\n\n<p>Since you're trying to figure out the differences between pointers and other variables, I'm going to suggest the following changes:</p>\n\n<pre><code>char s1, *s2;\ns1 = 'p';\ns2 = &amp;s1;\n</code></pre>\n\n<p>So now the following are true:</p>\n\n<pre><code>*s2 ==  s1 == 'p'\n s2 == &amp;s1\n</code></pre>\n\n<p>The <em>expressions</em> <code>*s2</code> and <code>s1</code> have type <code>char</code>, and the value of each is the character value <code>'p'</code>.  </p>\n\n<p><strong>EDIT</strong> The expression <code>'p'</code> has type <code>int</code>, not <code>char</code>.  Oops.</p>\n\n<p>The expressions <code>s2</code> and <code>&amp;s1</code> have type <code>char *</code>, and the value of each is the <em>address</em> of <code>s1</code>.  The following memory map shows how this works (addresses are pulled out of thin air and don't represent any real-world system): </p>\n\n<pre><code>Item            Address          0x00 0x01 0x02 0x03\n----            -------          ---- ---- ---- ----\n  s1            0x10000000        'p'   ??   ??   ??  // ?? represents unknown byte value\n  s2            0x10000004       0x10 0x00 0x00 0x00\n</code></pre>\n\n<p>Then the rest of your code becomes something like this:</p>\n\n<pre><code>/**\n * If you have a c99 or later compiler, use %zu for size_t values,\n * otherwise use %lu and cast to unsigned long:\n *\n *  printf( \"%lu %lu\", (unsigned long) sizeof s1, (unsigned long) sizeof s2 );\n *\n * Note that sizeof is an operator, not a function; parentheses are only\n * required if the operand is a type name.  Thus\n *\n *  sizeof s1 == sizeof (char)\n *  sizeof s2 == sizeof (char *)\n *\n * Also note that the type of the character constant 'p'\n * is int, not char, so sizeof 'p' != sizeof s1.  \n */\nprintf(\"%zu %zu %zu\\n\", sizeof 'p', sizeof s1, sizeof s2);  \n\nprintf(\"Value of s1 = %c \\n\", s1);\nprintf(\"Value of s1 through s2 = %c\\n\", *s2 ); \nprintf(\"Address of s1 = %p \\n\", (void *) &amp;s1);\nprintf(\"Address of s1 through s2 = %p\\n\", (void *) s2 );\nprintf(\"Address of s2 = %p\\n\", (void *) &amp;s2 );\n</code></pre>\n\n<p><hr>\n<sup>1.  A pointer <em>value</em> (that is, an address) may fit in an <code>unsigned int</code> object (or not), but pointer <em>types</em> are distinct from integer types.</sup></p>\n"}], "owner": {"reputation": 67, "user_id": 5169339, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/8S9Hk.jpg?s=128&g=1", "display_name": "neo", "link": "https://stackoverflow.com/users/5169339/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438189695, "creation_date": 1438184100, "last_edit_date": 1438189695, "question_id": 31704964, "link": "https://stackoverflow.com/questions/31704964/c-program-wont-run-beginnerss-query-on-pointers-char", "title": "C Program won&#39;t run - Beginners&#39;s Query on Pointers &amp; Char", "body": "<p>I am unable to run this program. I keep getting the error message(s):  </p>\n\n<blockquote>\n  <p>10|warning: format '%u' expects argument of type 'unsigned int', but argument 2 has type 'char *' [-Wformat]| </p>\n</blockquote>\n\n<p>Another one is: </p>\n\n<blockquote>\n  <p>6|warning: 's1' is used uninitialized in this function [-Wuninitialized]| </p>\n</blockquote>\n\n<pre><code>int main()\n{\n    char *s1, *s2;\n    *s1='p';\n    *s2 ='q';\n    printf(\"%d %d\\n\", sizeof(s1), sizeof(s2));\n    printf(\"Value of *s1 = %c \\n\", *s1);\n    printf(\"Address of *s1 = %u \\n\", s1);\n    printf(\"Address of *s2 = %u \\n\", s2);\n    return 0;\n}\n</code></pre>\n\n<p>I am a beginner in C. Any help at explaining on what's wrong here would be greatly appreciated. Thanks.</p>\n"}, {"tags": ["c", "parsing", "printf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 6, "creation_date": 1438184090, "post_id": 31704927, "comment_id": 51348417, "body": "did you try <code>unsigned char....</code>"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1438188308, "post_id": 31704927, "comment_id": 51351170, "body": "That isn&#39;t parsing an IP address, it&#39;s formatting one. It is the exact opposite."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438188456, "post_id": 31704927, "comment_id": 51351260, "body": "Note: <code>ip[18]</code> is too small had test data been <code>&#39;\\0x80&#39;</code>: <code>&quot;&#39;-128.-128.-128.-128&#39;&quot;</code>.  Better to use <code>snprintf()</code> or oversize <code>buf</code> as output may be more than expected.  Since <code>&quot;%d&quot;</code> <i>could</i> print a number like <code>&quot;-2147483648&quot;</code>, better to assume the worst."}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438201419, "post_id": 31704927, "comment_id": 51358839, "body": "@chux: with <code>buf</code> correctly defined as an <code>unsigned char</code> it can only hold values in the range 0-255 (assuming a normal byte=8bits=char system). So the maximum length of <code>ip</code> will be 16 characters: four 3-digit values + three dot separators + a null terminator."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "edited": false, "score": 0, "creation_date": 1438202448, "post_id": 31704927, "comment_id": 51359395, "body": "@GrahamS  1) <code>buf</code> was not defined as <code>unsigned char</code> yet and did not invoke UB as <code>buf</code> was not <code>&#39;\\0x80&#39;</code>, else this post would have UB.  OP had <i>assumed</i> something that did not hold true.  Your comment continues with assumptions of 8-bit <code>unsigned char</code> and C locale for <code>sprintf()</code>.  Even though both reasonable assumptions, <code>sprintf()</code> is an unwieldy function.  Your 16 does not reflect OP&#39;s format of <code>&quot;&#39;%d.%d.%d.%d&#39;&quot;</code> which would need 18.  So had OP used 16 as you had computed, code would certainly have UB."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "edited": false, "score": 0, "creation_date": 1438202457, "post_id": 31704927, "comment_id": 51359403, "body": "@GrahamS  (cont) The larger point is that there is little need to <i>tightly</i> minimize buffer size.  Instead buffer size should be computed via the code with few assumptions.  Maybe <code>sizeof format + 4*MAX_INT_WIDTH + 1</code>, or better yet, use <code>snprintf()</code>."}, {"owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438209491, "post_id": 31704927, "comment_id": 51362647, "body": "@chux: thanks I missed the apostrophes in the OPs post - that explains where they got 18 from. However I complete disagree with over-allocating the buffer just in case. On a system with 32-bit ints that would end up creating a buffer of 50 characters for something that cannot be larger than 18 unless there are programming errors. I&#39;d agree that using <code>snprintf()</code> is a reasonable defence though, or better still use the proper <code>inet</code> libraries as @PSkocik and I also suggested."}], "answers": [{"tags": [], "owner": {"reputation": 9070, "user_id": 79591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rFGtY.jpg?s=128&g=1", "display_name": "GrahamS", "link": "https://stackoverflow.com/users/79591/grahams"}, "is_accepted": true, "score": 2, "last_activity_date": 1438185460, "creation_date": 1438185460, "answer_id": 31705494, "question_id": 31704927, "link": "https://stackoverflow.com/questions/31704927/c-using-sprintf-to-do-ip-address-parse-incorrect-value/31705494#31705494", "title": "C: Using sprintf( ) to do IP address parse, incorrect value", "body": "<p>You have <code>buf</code> declared as a <code>signed char</code>.<br>\nYou see <code>-1</code> because <code>0xFF</code> is <code>11111111</code> in binary which is <code>-1</code> in <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow\">Two's Complement</a></p>\n\n<p>Declare <code>buf</code> as an unsigned char instead, like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    unsigned char buf[4] = { 0xFF, 0xEE, 0xDD, 0xFF };\n    char ip[18];\n\n    sprintf(ip, \"%d.%d.%d.%d\", buf[0], buf[1], buf[2], buf[3]);\n\n    printf (ip);\n\n    return 0;\n}\n</code></pre>\n\n<p>Depending on your target platform, you might want to look at libraries that do all this for you. For example <a href=\"http://linux.die.net/man/3/inet_ntoa\" rel=\"nofollow\">inet_ntoa(3)</a></p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 3, "last_activity_date": 1438188164, "creation_date": 1438188164, "answer_id": 31706383, "question_id": 31704927, "link": "https://stackoverflow.com/questions/31704927/c-using-sprintf-to-do-ip-address-parse-incorrect-value/31706383#31706383", "title": "C: Using sprintf( ) to do IP address parse, incorrect value", "body": "<p>This doesn't really answer the question as GrahamS has already answered it well, but you might want to try using the functions and structs of the TCP/IP stack that were made for this kind of thing:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n\nint main()\n{\n  /*\n   * Using functions and structs that were made for this\n   */\n\n  //this is really just a one-member struct with a  uint_32t\n  struct in_addr addr;\n\n  //Convert Presenteation to Number (pton) for the AF_INET address family (IPv4)\n  inet_pton(AF_INET,\"1.2.3.4\",&amp;addr);\n\n\n  //INET_ADDRSTRLEN -- how much space is needed to hold the presentation of an IP4 ip addresss?\n  //defined to 16 -- enough to hold 255.255.255.255 with the null terminator\n  char buf[INET_ADDRSTRLEN]; \n\n  //convert back to string\n  inet_ntop(AF_INET,&amp;addr, buf, sizeof(buf));\n\n  puts(buf);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4906593, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ewscr.jpg?s=128&g=1", "display_name": "ButterLover", "link": "https://stackoverflow.com/users/4906593/butterlover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 31705494, "answer_count": 2, "score": 0, "last_activity_date": 1438188164, "creation_date": 1438184027, "question_id": 31704927, "link": "https://stackoverflow.com/questions/31704927/c-using-sprintf-to-do-ip-address-parse-incorrect-value", "title": "C: Using sprintf( ) to do IP address parse, incorrect value", "body": "<p>I was trying to use <code>sprintf()</code> to parse IP address. <code>buf</code> storing a packet received from other host. And the test data in <code>buf</code> is <code>'\\0xff'</code>. I expect to see <code>255.255.255.255</code> in <code>ip</code>. But what I get is <code>-1.-1.-1.-1</code> in <code>ip</code>.</p>\n\n<pre><code>char buf[5];\nchar ip[18];\n...\n// They all have value 0xff, that is buf[0]=buf[1]=buf[2]=buf[3]='\\0xff';\nsprintf(ip, \"'%d.%d.%d.%d'\",buf[0],buf[1],buf[2],buf[3]);\n</code></pre>\n\n<p>It seems in every byte in <code>buf</code> it is added by one. I think it should be something with the specifier, maybe I should use a specifier for <code>unsigned int</code>. Then I tried <code>%u</code>, <code>%hhd</code>. They are not correct. Anyone knows this? Is it because of the specifier?</p>\n"}, {"tags": ["python", "c", "ctypes", "ida"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1438184676, "post_id": 31704892, "comment_id": 51348891, "body": "In the C code you use <code>a2</code> as an address, the address <code>1</code> is hardly ever valid. Not only that, on 64-bit systems a pointer is normally 64 bits, while <code>int</code> is usually still 32 bits, leading to even further problems."}, {"owner": {"reputation": 57, "user_id": 4461456, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be886cb3bf9c812118d2340fd2de8d35?s=128&d=identicon&r=PG&f=1", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/4461456/vahagn"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438185023, "post_id": 31704892, "comment_id": 51349128, "body": "I change to <code>a1 = ctypes.c_int64(1)</code> but don&#39;t help"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1438187916, "post_id": 31704892, "comment_id": 51350953, "body": "Of course it won&#39;t help, the value of the second argument is <i>still</i> <code>1</code>, which is not a valid address."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1438189757, "post_id": 31704892, "comment_id": 51352091, "body": "@Joachim: Instead of just telling the OP what&#39;s wrong, why don&#39;t you tell them the right way to do it (or post an answer)?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1438191245, "post_id": 31704892, "comment_id": 51352965, "body": "Reading the <a href=\"https://docs.python.org/2/library/ctypes.html#ctypes-pointers\" rel=\"nofollow noreferrer\">manual section about pointers</a> might help. I&#39;m not sure it will help though, since the argument actually isn&#39;t a pointer (why not?)"}, {"owner": {"reputation": 414, "user_id": 4880090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9731995440b63d4cbf69257df481c87?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kolokowsky", "link": "https://stackoverflow.com/users/4880090/steve-kolokowsky"}, "edited": false, "score": 0, "creation_date": 1438192203, "post_id": 31704892, "comment_id": 51353499, "body": "You should never use a literal value as an address.  If you need to pass an address use a1 = &amp;variableName.  I don&#39;t know if Python and C use the same format or size for the value stored at &amp;variableName, which may cause other issues."}, {"owner": {"reputation": 57, "user_id": 4461456, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be886cb3bf9c812118d2340fd2de8d35?s=128&d=identicon&r=PG&f=1", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/4461456/vahagn"}, "edited": false, "score": 0, "creation_date": 1438245136, "post_id": 31704892, "comment_id": 51374567, "body": "I change to  <code>hllDll = cdll.LoadLibrary(&quot;E:\\\\sap mobile\\\\Bin32\\\\dbencod11.dll&quot;)  pp = POINTER(ctypes.c_long) print hllDll.EncodeInit(11, pp(ctypes.c_int()), 31, 4)</code> now get ValueError: Procedure called with not enough arguments (16 bytes missing) or wrong calling convention"}], "owner": {"reputation": 57, "user_id": 4461456, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be886cb3bf9c812118d2340fd2de8d35?s=128&d=identicon&r=PG&f=1", "display_name": "Vahagn", "link": "https://stackoverflow.com/users/4461456/vahagn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1469358364, "creation_date": 1438183939, "last_edit_date": 1469358364, "question_id": 31704892, "link": "https://stackoverflow.com/questions/31704892/how-can-i-get-parameter-from-dll-function-to-python", "title": "How can I get parameter from dll function to python", "body": "<p>I have a DLL file that contains this function </p>\n\n<pre><code>signed int __stdcall EncodeInit(unsigned int a1, int a2, int a3, int a4)\n{\n  signed int result; // eax@1\n\n  result = 55;\n  *(_DWORD *)a2 = (signed __int64)((double)a1 / 1.37 - 25.0 - 23.0 - 2.0 - 6.0);\n  return result;\n}\n</code></pre>\n\n<p>I am trying to call this function from Python:</p>\n\n<pre><code>import ctypes\nfrom ctypes import cdll\n\n# Load DLL into memory.\n\nhllDll = cdll.LoadLibrary(\"E:\\\\sap mobile\\\\Bin32\\\\dbencod11.dll\")\na1 = ctypes.c_int32(1)\nprint hllDll.EncodeInit(11, a1, 31, 4)\n</code></pre>\n\n<p>But I get an error:</p>\n\n<pre><code>WindowsError: exception: access violation writing 0x00000001\n</code></pre>\n\n<p>because <code>a1</code> is constant. How can I fix this issue?</p>\n"}, {"tags": ["c", "interop", "freebsd", "jail"], "comments": [{"owner": {"reputation": 20521, "user_id": 1135424, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rvwBS.jpg?s=128&g=1", "display_name": "nbari", "link": "https://stackoverflow.com/users/1135424/nbari"}, "edited": false, "score": 0, "creation_date": 1503828697, "post_id": 31704870, "comment_id": 78766286, "body": "Just in case you can use this image <a href=\"https://fabrik.red\" rel=\"nofollow noreferrer\">fabrik.red</a> using zfs+jails as a base to start testing creating/cloning etc"}], "answers": [{"tags": [], "owner": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "is_accepted": false, "score": 1, "last_activity_date": 1438328563, "creation_date": 1438328563, "answer_id": 31740734, "question_id": 31704870, "link": "https://stackoverflow.com/questions/31704870/managing-freebsd-jails-programmatically/31740734#31740734", "title": "Managing FreeBSD Jails programmatically", "body": "<p>On a FreeBSD system enter <code>apropos jail</code> to get all available manpages for jail.</p>\n\n<p>You are looking for the manpages in section 2 and section 3.</p>\n\n<p>start with <code>man 2 jail</code></p>\n"}, {"comments": [{"owner": {"reputation": 579, "user_id": 1027467, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/594c29c61ddc19f99241d167a3982961?s=128&d=identicon&r=PG", "display_name": "Nedo", "link": "https://stackoverflow.com/users/1027467/nedo"}, "edited": false, "score": 0, "creation_date": 1439151737, "post_id": 31898887, "comment_id": 51730801, "body": "The both of them are wrappers for the <code>jail</code> user space command. What I need are examples in C/C++ language."}], "tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1439152799, "last_edit_date": 1439152799, "creation_date": 1439070201, "answer_id": 31898887, "question_id": 31704870, "link": "https://stackoverflow.com/questions/31704870/managing-freebsd-jails-programmatically/31898887#31898887", "title": "Managing FreeBSD Jails programmatically", "body": "<p>There are several available in the ports tree. Like <a href=\"http://erdgeist.org/arts/software/ezjail/\" rel=\"nofollow\">ezjail</a> or <a href=\"http://qjail.sourceforge.net/\" rel=\"nofollow\">qjail</a>.</p>\n\n<p>For exemples on doing that from a C(++) program, look at the <a href=\"https://www.freebsd.org/cgi/man.cgi?query=jail&amp;sektion=3\" rel=\"nofollow\">jail(3)</a> manual page.</p>\n"}], "owner": {"reputation": 579, "user_id": 1027467, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/594c29c61ddc19f99241d167a3982961?s=128&d=identicon&r=PG", "display_name": "Nedo", "link": "https://stackoverflow.com/users/1027467/nedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539146670, "creation_date": 1438183858, "last_edit_date": 1539146670, "question_id": 31704870, "link": "https://stackoverflow.com/questions/31704870/managing-freebsd-jails-programmatically", "title": "Managing FreeBSD Jails programmatically", "body": "<p>Is it possible to manage the FreeBSD jails programmatically (create jails, perform snapshots, etc)? I know there is a <code>libjail</code>, but I couldn't find any examples.</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438183672, "post_id": 31704764, "comment_id": 51348052, "body": "What is the name of your <i>makefile</i>?"}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438183857, "post_id": 31704764, "comment_id": 51348219, "body": "It is a TextEdit (on MAC OS X) file called &quot;make&quot;"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1438183891, "post_id": 31704764, "comment_id": 51348251, "body": "I think you need then <code>make -f &lt;makefilename&gt; clean</code>"}, {"owner": {"reputation": 1228, "user_id": 995959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXPWG.png?s=128&g=1", "display_name": "gibertoni", "link": "https://stackoverflow.com/users/995959/gibertoni"}, "edited": false, "score": 0, "creation_date": 1438184121, "post_id": 31704764, "comment_id": 51348440, "body": "if you created your file with TextEdit, chances are that it saved with an extension. Have you removed the extension from the file? Also, nameless answer is pretty accurate as well. Follow the identation rules"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 3, "creation_date": 1438184178, "post_id": 31704764, "comment_id": 51348479, "body": "Make sure you follow your tutorial, it says &quot;Save this file as Makefile in your current directory. Make automatically assumes there&#39;s a file called Makefile and will just run it. &quot;"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1438184285, "post_id": 31704764, "comment_id": 51348580, "body": "Don&#39;t use <code>make</code> as the filename. Use <code>Makefile</code> as the tutorial says. If you want to use a non-standard name then you need to use <code>make -f make</code> or whatever other name you chose."}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "edited": false, "score": 0, "creation_date": 1438184327, "post_id": 31704764, "comment_id": 51348615, "body": "Thanks for your replies. Took your replies into account, I now get the following error: &quot;Makefile:4: *** missing separator.  Stop.&quot;"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438184429, "post_id": 31704764, "comment_id": 51348698, "body": "<b>That</b> error is about spaces instead of tabs on the recipe lines."}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "edited": false, "score": 1, "creation_date": 1438184570, "post_id": 31704764, "comment_id": 51348816, "body": "Yes, I think it worked now. Thanks everyone for your kind replies."}, {"owner": {"reputation": 2261, "user_id": 1160796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E5Np4.png?s=128&g=1", "display_name": "basher", "link": "https://stackoverflow.com/users/1160796/basher"}, "edited": false, "score": 0, "creation_date": 1438187325, "post_id": 31704764, "comment_id": 51350618, "body": "@Simplicity any reason you never accepted an answer on this question: <a href=\"http://stackoverflow.com/questions/6939864/what-is-the-difference-between-section-and-div\" title=\"what is the difference between section and div\">stackoverflow.com/questions/6939864/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "edited": false, "score": 2, "creation_date": 1438183997, "post_id": 31704837, "comment_id": 51348334, "body": "In my original code, I didn&#39;t have a space before the target. It seems the space showed in my question. I removed the space from the question."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438184105, "post_id": 31704837, "comment_id": 51348429, "body": "No. Target names can have whitespace in front of them. The recipe lines can&#39;t though. They need <i>only</i> a tab."}], "tags": [], "owner": {"reputation": 603, "user_id": 584189, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/43aacf939b4c14231c20c97c2d7cce96?s=128&d=identicon&r=PG", "display_name": "Merchako", "link": "https://stackoverflow.com/users/584189/merchako"}, "is_accepted": false, "score": -1, "last_activity_date": 1438183777, "creation_date": 1438183777, "answer_id": 31704837, "question_id": 31704764, "link": "https://stackoverflow.com/questions/31704764/make-no-rule-to-make-target-clean-stop/31704837#31704837", "title": "make: *** No rule to make target `clean&#39;. Stop", "body": "<p>I was under the impression that targets should not have whitespace in front of them.</p>\n\n<p>Also, Make treats the first target as the default target (what we traditionally call 'all'), so if 'clean' is your only target, it will get treated as the default.</p>\n"}, {"comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438184136, "post_id": 31704911, "comment_id": 51348453, "body": "No. Target names can have whitespace in front of them. The recipe lines can&#39;t though. They need <i>only</i> a tab (and only one tab though more is fine). And a tab <i>is</i> eight spaces."}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "edited": false, "score": 0, "creation_date": 1438184143, "post_id": 31704911, "comment_id": 51348457, "body": "For the TABS under &quot;clean&quot;. I used two TABS before &quot;rm&quot;, but still having the same issue. Thanks"}], "tags": [], "owner": {"reputation": 367, "user_id": 2406926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02227f00c8a6a92dbbb6abc2acf1a2e4?s=128&d=identicon&r=PG", "display_name": "nameless912", "link": "https://stackoverflow.com/users/2406926/nameless912"}, "is_accepted": false, "score": -1, "last_activity_date": 1438183985, "creation_date": 1438183985, "answer_id": 31704911, "question_id": 31704764, "link": "https://stackoverflow.com/questions/31704764/make-no-rule-to-make-target-clean-stop/31704911#31704911", "title": "make: *** No rule to make target `clean&#39;. Stop", "body": "<p>I'm guessing your indentation is borked. Make is <em>very, very</em> specific in how files should be indented.</p>\n\n<p>Your file should look like this:</p>\n\n<pre><code>CFLAGS=-wall -g\n\nclean:\n        rm -f ex1\n</code></pre>\n\n<p>Notice how clean is all the way left in the file (has no whitespace in front of it), and how there are two tabs (represented here by 8 spaces because I have no way of representing tabs on SO...)</p>\n\n<p>basically, Make is an ancient program that has very, VERY particular rules as to how things are done. Be careful and follow the indent rules as closely as you possibly can.</p>\n"}, {"tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": false, "score": 1, "last_activity_date": 1438184401, "creation_date": 1438184401, "answer_id": 31705078, "question_id": 31704764, "link": "https://stackoverflow.com/questions/31704764/make-no-rule-to-make-target-clean-stop/31705078#31705078", "title": "make: *** No rule to make target `clean&#39;. Stop", "body": "<p>The issue here, as indicated by a few comments on the post is that you named your file <code>make</code> instead of the traditional <code>Makefile</code> (or alternate names <code>GNUMakefile</code> and <code>makefile</code> that GNU make supports).</p>\n\n<p>See <a href=\"http://www.gnu.org/software/make/manual/make.html#Makefile-Names\" rel=\"nofollow\">What Name to Give Your Makefile</a> in the GNU make manual.</p>\n\n<p>If you want to use an alternate name (like <code>make</code>) then you need to tell <code>make</code> to use that file with the <code>-f</code> flag (also mentioned in that section of the manual).</p>\n\n<pre><code>make -f make\n</code></pre>\n\n<p>The <code>missing separator</code> error is caused by incorrect indentation in the makefile. Spaces instead of tabs on recipe lines, etc.</p>\n"}], "owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12605, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1438184419, "creation_date": 1438183575, "last_edit_date": 1438183951, "question_id": 31704764, "link": "https://stackoverflow.com/questions/31704764/make-no-rule-to-make-target-clean-stop", "title": "make: *** No rule to make target `clean&#39;. Stop", "body": "<p>I was walking through <a href=\"http://c.learncodethehardway.org/book/ex2.html\" rel=\"nofollow\">this</a> tutorial, where I had to create this <code>make</code> file:</p>\n\n<pre><code> CFLAGS=-wall  -g\n\n clean:\n   rm  -f  ex1\n</code></pre>\n\n<p>When I type this command:</p>\n\n<blockquote>\n  <p>$ make clean</p>\n</blockquote>\n\n<p>I get the following error:</p>\n\n<pre><code>make: *** No rule to make target `clean'.  Stop.\n</code></pre>\n\n<p>I made sure that I'm using TABS. Why am I getting this error? How can I solve it?</p>\n"}, {"tags": ["c", "matlab", "buffer", "nios"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438183676, "post_id": 31704505, "comment_id": 51348057, "body": "Is the data constantly coming in at 50Hz, or are there gaps in between, where no data is sent?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438183777, "post_id": 31704505, "comment_id": 51348149, "body": "1) It is unclear what you are actually asking. 2) What I get from your post is far too broad. This is no forum to discuss ideas, but ask specific questions about programming. If you have any problem with your code, feel free to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1438183896, "post_id": 31704505, "comment_id": 51348258, "body": "However, you cannot send 50Hz data on an 8bit/s port unless you remove redundancy. That is a very basic fact."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438186938, "post_id": 31704505, "comment_id": 51350359, "body": "Even if you use buffering, at that tortoise rate you&#39;ll probably need hardware handshaking."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1438189154, "post_id": 31704505, "comment_id": 51351731, "body": "Are you really sending data at 50Hz ?  How much data ?  What kind of serial port is limited to 8Hz ? what are the actual Baud rates ?"}], "owner": {"reputation": 219, "user_id": 2563812, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/20e784d0e27f01687e1cb05ffd63abdf?s=128&d=identicon&r=PG", "display_name": "user2563812", "link": "https://stackoverflow.com/users/2563812/user2563812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1438182922, "creation_date": 1438182922, "question_id": 31704505, "link": "https://stackoverflow.com/questions/31704505/do-i-need-buffering-in-this-case-if-so-how", "title": "Do I need buffering in this case, if so, how?", "body": "<p>I have an issue where the rate the data is sent to serial port (50Hz) is way faster than the serial port can receive (8Hz).</p>\n\n<p>Basically, what I have is, data is sent from fpga vhdl block to NIos II system, Nios II system sends the data to serial port, Matlab access the serial port to real time plot the graph.</p>\n\n<p>I am using Quartus 12.1 sp1, vhdl and Nios II programmed in C code for DE0-Nano. In Qsys, I am using a few cores such as timer, sdram, uart, pios etc.</p>\n\n<p>I dont know if this is feasible. What I am tempted to do, since the rate I can plot a graph is slower than the rate the incoming signal is read.</p>\n\n<p>If I know the beginning of every incoming signal let say this point is indicated by a count=0, everytime I detect count=0, I know it is the beginning of each incoming signal, I keep track of how many cycles, let say, I only want to plot the graph every 10 cycles of the incoming signals, I plot cycle no.1, skip 10 cycles, plot cycle no. 11, skip cycle no.12 to 20, next plot cycle no. 21 etc ...in other words, it means I will lose some cycles in between which I am okay with this.</p>\n\n<ol>\n<li><p>Do you think this method make any sense?</p></li>\n<li><p>Do I still need buffering in this case?</p></li>\n<li><p>How do I know how many cycles I need to skip? I assume it would depend on the incoming signal rate (50 Hz) and plot/receive rate (say 8 Hz), But I am not entirely clear about how to calculate...</p></li>\n</ol>\n\n<p>The incoming signal  (50 Hz) is from fpga vhdl, NIos system can read at 50 Mhz, but serial port receive rate or Matlab plot rate is 8 Hz.</p>\n\n<p>Appreciate any input...thank you</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1438182271, "post_id": 31704161, "comment_id": 51347027, "body": "Make compile dependent on run and retry by writing <code>run : compile</code> instead of <code>run :</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1438182610, "post_id": 31704161, "comment_id": 51347260, "body": "Rename <code>compile</code> to <code>a.out</code> and use <code>run: a.out</code> to have a makefile that actually means something useful. The use <code>all: run</code>. You can also add <code>compile: a.out</code> if you still want to be able to type <code>make compile</code>. That being said all that may have nothing to do with the problem since you haven&#39;t actually told us what the problem is. The actual error is <b>above</b> the snippet of error you pasted."}], "answers": [{"comments": [{"owner": {"reputation": 1305, "user_id": 5147241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b51cf4a8dbf087a47f818ae7f4b9d4f8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Gangwar", "link": "https://stackoverflow.com/users/5147241/abhishek-gangwar"}, "edited": false, "score": 0, "creation_date": 1438186827, "post_id": 31704985, "comment_id": 51350286, "body": "It worked I did not return 0 in the main. But some of my programs are working without returning 0"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1438189424, "post_id": 31704985, "comment_id": 51351903, "body": "It is not very difficult to always <code>return 0</code> from <code>main</code> or <code>exit</code> with a meaningful error status.  The fact that your compiler is both lenient about missing return statements or erroneous <code>main</code> prototypes, and non conforming is no excuse for sloppiness."}, {"owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "reply_to_user": {"reputation": 1305, "user_id": 5147241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b51cf4a8dbf087a47f818ae7f4b9d4f8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Gangwar", "link": "https://stackoverflow.com/users/5147241/abhishek-gangwar"}, "edited": false, "score": 1, "creation_date": 1438195614, "post_id": 31704985, "comment_id": 51355557, "body": "@AbhishekGangwar If you do not do a return in your main function or call exit your program will most likely compile depending on your compiler and settings.  However just because it compiles does not mean everything is good.  In this case you will have undefined behavior as main is expected to return an integer.  You might want to check out this SO post: <a href=\"http://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\" title=\"what should main return in c and c\">stackoverflow.com/questions/204476/&hellip;</a>."}, {"owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "reply_to_user": {"reputation": 1305, "user_id": 5147241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b51cf4a8dbf087a47f818ae7f4b9d4f8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Gangwar", "link": "https://stackoverflow.com/users/5147241/abhishek-gangwar"}, "edited": false, "score": 1, "creation_date": 1438195722, "post_id": 31704985, "comment_id": 51355618, "body": "@AbhishekGangwar Also if my answer solved your problem (it is a little hard to tell from your comment) you can accept the answer and we both get reputation.  More importantly though, future visitors to this page will know that this solved your problem so if they have a similar problem it is can indicator that it might help.  Again only if this solved your problem."}, {"owner": {"reputation": 2346, "user_id": 2294535, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/18P2I.jpg?s=128&g=1", "display_name": "Amrith Krishna", "link": "https://stackoverflow.com/users/2294535/amrith-krishna"}, "reply_to_user": {"reputation": 1305, "user_id": 5147241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b51cf4a8dbf087a47f818ae7f4b9d4f8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Gangwar", "link": "https://stackoverflow.com/users/5147241/abhishek-gangwar"}, "edited": false, "score": 0, "creation_date": 1438503753, "post_id": 31704985, "comment_id": 51471047, "body": "@AbhishekGangwar - Its always a cordial gesture to return the favour by accepting the answer, if the answer helped you"}], "tags": [], "owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "is_accepted": true, "score": 2, "last_activity_date": 1438539004, "last_edit_date": 1438539004, "creation_date": 1438184159, "answer_id": 31704985, "question_id": 31704161, "link": "https://stackoverflow.com/questions/31704161/getting-an-error-while-a-program-in-c-using-makefile/31704985#31704985", "title": "Getting an error while a program in c using makefile", "body": "<p>Besides the comments you have already been given about how <code>run</code> should depend on <code>a.out</code> and <code>compile</code> should really be changed to <code>a.out</code> or be made a phony that relies on <code>a.out</code> the exact reason you are getting this error message is because your program is returning a non-zero error value, specifically 45.</p>\n\n<p>A recipe fails when any of the commands in that recipe return a non-zero value (assuming Linux and most other systems where 0 indicates a success).  Therefore your <code>run</code> target is failing because <code>./a.out $(INPUT)</code> is returning something other than 0.  This is of course assuming that you have included the entire error message and the error number and Makefile and the error message is not from a dependency of <code>run</code>.  A simple way to check would be to replace <code>./a.out $(INPUT)</code> with <code>true</code>.  If everything works then it is your program itself.</p>\n\n<p>Note that the program may seem to run correctly but still return an error value.  One possible reason for this is you have not included a <code>return</code> statement in your <code>main</code> function.  Assuming you are using bash you can view the return value of the latest program via <code>echo $?</code>.</p>\n"}], "owner": {"reputation": 1305, "user_id": 5147241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b51cf4a8dbf087a47f818ae7f4b9d4f8?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Gangwar", "link": "https://stackoverflow.com/users/5147241/abhishek-gangwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 0, "accepted_answer_id": 31704985, "answer_count": 1, "score": 1, "last_activity_date": 1438539004, "creation_date": 1438182016, "last_edit_date": 1438182083, "question_id": 31704161, "link": "https://stackoverflow.com/questions/31704161/getting-an-error-while-a-program-in-c-using-makefile", "title": "Getting an error while a program in c using makefile", "body": "<p>I am facing an error while running my c program using makefile.\nWhen I run the following command directly on the terminal,the program runs correctly</p>\n\n<pre><code>$ ./a.out test1.c test2.c\n</code></pre>\n\n<p>(a.out is the executable generated by compiling the program,test1.c and test2.c are the command line arguments)</p>\n\n<p>But when I write the below in makefile:</p>\n\n<pre><code>all : compile run\n\ncompile :\n    gcc ConsonantVowelCount15.c\nrun :\n    ./a.out $(INPUT)\n</code></pre>\n\n<p>and run the following command on terminal</p>\n\n<pre><code>$ make INPUT=test1.c\\ test2.c\n</code></pre>\n\n<p>It gives the output followed by following error</p>\n\n<blockquote>\n  <p>makefile:6: recipe for target 'run' failed<BR> make: *** [run] Error 45</p>\n</blockquote>\n"}, {"tags": ["c", "linux", "linux-kernel", "u-boot", "device-tree"], "answers": [{"comments": [{"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1438182189, "post_id": 31704184, "comment_id": 51346969, "body": "But how do I choose them? I had intended to have a new u-boot command that would output different names of the fdt dependant on board rev, but I believe it&#39;s not possible to take the output of a command and use it to fill an environment variable in u-boot."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1438182417, "post_id": 31704184, "comment_id": 51347121, "body": "Do you want to put, say, the same boot SD card to different boards and have them booted automatically? What are you using to determine the architecture?"}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1438182625, "post_id": 31704184, "comment_id": 51347271, "body": "Yep. I want one SD card that can cope with being booted on multiple different boards (well, the same board but different revisions causing h/w incompatibility). There&#39;s a set of resistors hooked off GPIOs that give me the board revision."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1438182738, "post_id": 31704184, "comment_id": 51347345, "body": "So how do you get the revision? You have a custom u-boot reading these GPIOs? Can it write the revision to an environment variable? If so, you can use the <code>if</code> with <code>test</code> commands which can be compiled with u-boot."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 1, "creation_date": 1438182831, "post_id": 31704184, "comment_id": 51347429, "body": "Look <a href=\"http://lists.denx.de/pipermail/u-boot/2011-March/089318.html\" rel=\"nofollow noreferrer\">here</a>. I think it is fully addressing you question."}, {"owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "edited": false, "score": 0, "creation_date": 1438182989, "post_id": 31704184, "comment_id": 51347546, "body": "Hmm, that&#39;s not entirely transparent, but it certainly seems the right idea. I guess I have an XY problem..."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 3, "last_activity_date": 1438182061, "creation_date": 1438182061, "answer_id": 31704184, "question_id": 31704102, "link": "https://stackoverflow.com/questions/31704102/how-can-i-choose-different-device-trees-from-inside-u-boot-for-the-linux-kernel/31704184#31704184", "title": "How can I choose different device trees from inside u-boot for the Linux kernel", "body": "<p>The <code>bootm</code> command is taking three parameters:</p>\n\n<pre><code>bootm ${kernel_addr} ${ramdisk_addr} ${fdt_addr}\n</code></pre>\n\n<p>While the third one is the address of the flattened device tree blob in the memory. So if you have different device trees, either load them into different memory addresses and pass them to <code>bootm</code>, or load that memory address with different blobs. </p>\n"}, {"tags": [], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "is_accepted": false, "score": 2, "last_activity_date": 1522939624, "creation_date": 1522939624, "answer_id": 49675249, "question_id": 31704102, "link": "https://stackoverflow.com/questions/31704102/how-can-i-choose-different-device-trees-from-inside-u-boot-for-the-linux-kernel/49675249#49675249", "title": "How can I choose different device trees from inside u-boot for the Linux kernel", "body": "<p>Late answer, but i recently add to deal with the same problem. </p>\n\n<p>Using u-boot , you can actually write a macro for that.</p>\n\n<p>The u-boot environment variable for the device tree file is \"<code>fdtfile</code>\".</p>\n\n<p>From there, you can define a macro that set this variable according to your specific need for example :</p>\n\n<pre><code>setenv findfdt '\nif test $mycondition = value1; then setenv fdtfile devicetree1.dtb; fi;\nif test $mycondition = value2; then setenv fdtfile devicetree2.dtb; fi;\n..'\n</code></pre>\n\n<p>Then you can just create a .txt file to register this macro and then use <code>mkimage</code> tool to create a binary image .img for u-boot to load :</p>\n\n<pre><code>mkimage -T script -d macros.txt macros.img\n</code></pre>\n\n<p>You can of course wrap this macro with a more sophisticated one that will be executed at each boot. </p>\n"}], "owner": {"reputation": 6356, "user_id": 1109725, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab7e17981e19525fe1bed0878d0d2cc9?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1109725/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2845, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1522939624, "creation_date": 1438181817, "question_id": 31704102, "link": "https://stackoverflow.com/questions/31704102/how-can-i-choose-different-device-trees-from-inside-u-boot-for-the-linux-kernel", "title": "How can I choose different device trees from inside u-boot for the Linux kernel", "body": "<p>I need to have different variants of a device tree passed to my linux kernel dependant on a board revision that can only be determined at run time.</p>\n\n<p>What's the established way of setting up the boot of the kernel to deal with various hardware layouts that can only be determined at boot time from within u-boot?</p>\n"}, {"tags": ["c", "matlab", "gcc", "static-linking", "mex"], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 2258161, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/887b0efe9b941de6bdfe52abad58a787?s=128&d=identicon&r=PG", "display_name": "dannyhmg", "link": "https://stackoverflow.com/users/2258161/dannyhmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1438263169, "creation_date": 1438263169, "answer_id": 31725251, "question_id": 31703899, "link": "https://stackoverflow.com/questions/31703899/trouble-linking-a-mex-file-to-static-mpfr-library/31725251#31725251", "title": "Trouble linking a mex file to static mpfr library", "body": "<p>I found that the \"thread local variables\" error was caused by the compiler trying to include backwards-compatibility to OSX 10.5.  Since I don't need it to do this, I edited the mexopts.sh file, replacing this line</p>\n\n<pre><code>MACOSX_DEPLOYMENT_TARGET='10.5'\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>MACOSX_DEPLOYMENT_TARGET='10.8'\n</code></pre>\n\n<p>This resulted in the mex file compiling successfully using the built-in Xcode compiler. </p>\n"}], "owner": {"reputation": 125, "user_id": 2258161, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/887b0efe9b941de6bdfe52abad58a787?s=128&d=identicon&r=PG", "display_name": "dannyhmg", "link": "https://stackoverflow.com/users/2258161/dannyhmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438263169, "creation_date": 1438181321, "question_id": 31703899, "link": "https://stackoverflow.com/questions/31703899/trouble-linking-a-mex-file-to-static-mpfr-library", "title": "Trouble linking a mex file to static mpfr library", "body": "<p>I am trying to compile a mex file that requires the mpfr C library, using MATLAB R2013a on Mac OS 10.8.5.  I would like it to run on systems that don't have a separate installation of MPFR, so I am trying to include the static library: </p>\n\n<pre><code>mex my_program.c libmpfr.a\n</code></pre>\n\n<p>I copied the libmpfr.a library into the folder with my source code to simplify things.  When I run this command I get the following error message: </p>\n\n<pre><code>ld: targeted OS version does not support use of thread local variables in _mpfr_add for architecture x86_64\n</code></pre>\n\n<p>A little research suggested that this issue could be due to a problem with the llvm-gcc-4.2 compiler that comes with Xcode and is used in MATLAB by default. So, I tried to set up a different compiler.  I got GCC 4.7.4 (the latest version supported by MATLAB) from MacPorts, as described here: <a href=\"http://www.ficksworkshop.com/blog/14-coding/65-installing-gcc-on-mac\" rel=\"nofollow\">http://www.ficksworkshop.com/blog/14-coding/65-installing-gcc-on-mac</a>.  Next, I edited the mexopts.sh file to point MATLAB to the correct compiler, by entering the following settings: </p>\n\n<pre><code>CC='/opt/local/bin/gcc-mp-4.7'\nCXX='/opt/local/bin/g++-mp-4.7'\n</code></pre>\n\n<p>Now when I try to compile, I get a different error message: </p>\n\n<pre><code>In file included from /Applications/MATLAB_R2013a.app/extern/include/matrix.h:294:0,\n             from /Applications/MATLAB_R2013a.app/extern/include/mex.h:58,\n             from include/main.h:5,\n             from include/poisson.h:7,\n             from src/main.c:22:\n/Applications/MATLAB_R2013a.app/extern/include/tmwtypes.h:61:21: fatal error: float.h: No such file or directory\n</code></pre>\n\n<p>If, in mexopts.sh, I additionally set </p>\n\n<pre><code>SDKROOT='/opt/local/'\n</code></pre>\n\n<p>or a number of other choices (based on the locations of different copies of float.h that I can find on my system), I instead see </p>\n\n<pre><code>my_program.c:10:20: fatal error: stdlib.h: No such file or directory\n</code></pre>\n\n<p>So it seems that GCC-MP-4.7 is having trouble locating all of the standard C libraries.  </p>\n\n<p>I'd be grateful for a solution to either of these issues (linking to static mpfr useing the default compiler, or configuring GCC 4.7 to find the standard C libraries). </p>\n"}, {"tags": ["c++", "c", "variadic-templates", "variadic-functions", "variadic"], "answers": [{"comments": [{"owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1438242839, "post_id": 31703940, "comment_id": 51373290, "body": "Yakk, I think what you have suggested will do exactly what I need.  When combined with the warnings that @rici mention it covers most of the mistakes that I can make."}, {"owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1438247872, "post_id": 31703940, "comment_id": 51376255, "body": "That is a shame, it seems that gcc 4.8.4 does not produce the Wformat and Wformat-extra-args warnings when things are passed through the template.  I suppose I am thinking of things as if they were defines getting expanded, still feels like it should be able to check it.  I see now why Yakk said I need to parse format."}, {"owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1447661675, "post_id": 31703940, "comment_id": 55230556, "body": "After asking about this on a GCC users mailing list someone pointed me at the compilers <b>attribute</b> feature that lets you tell GCC to check a function as if it was a printf/scanf,etc.  The only problem is that it cannot support variadic functions so I have to pass things through a VARGS to have the checks triggered. There is some #define switching you can do to add it in debug and not in standard. Look for <code>__attribute__((format(scanf, blah blah)))</code> in <a href=\"https://gcc.gnu.org/ml/gcc-help/2015-11/msg00127.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/ml/gcc-help/2015-11/msg00127.html</a> for more background."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1438181437, "creation_date": 1438181437, "answer_id": 31703940, "question_id": 31703796, "link": "https://stackoverflow.com/questions/31703796/can-we-make-a-scanf-like-function-that-returns-true-when-all-parameters-are-popu/31703940#31703940", "title": "Can we make a scanf like function that returns true when all parameters are populated and false otherwise without looping through all variables?", "body": "<pre><code>template&lt;class...Ts&gt;\nbool scanner(const char * string, const char * format, Ts const&amp;...ts)\n{\n  size_t num_scanned = sscanf(string, format, ts...);\n  bool got_them_all = num_scanned == sizeof...(ts);\n  return got_them_all;\n}\n</code></pre>\n\n<p>would do it.  Note, however, that if you specify more parameters in the string than you pass, you'll do undefined behavior within <code>sscanf</code>.</p>\n\n<p>Annoying, you'll want to scan <code>format</code> for the format specifiers yourself prior to calling <code>sscanf</code> to make it safe.  At least do this in a debug build.</p>\n"}, {"comments": [{"owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1438183227, "post_id": 31704275, "comment_id": 51347727, "body": "I definatly have -Wformat enabled.  Messages such as  <code>: warning: format &#39;%x&#39; expects argument of type &#39;unsigned int*&#39;, but argument 4 has type &#39;long int&#39; [-Wformat=]</code> have already been correcting my poor typing.  Nice to know that i might get a warning if the string and variables don&#39;t align, that is one less silent error I can make."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1438183465, "post_id": 31704275, "comment_id": 51347879, "body": "@TafT: You should certainly get a warning if there are too few or too many arguments for the format string. Try it and see. You might want to specify <code>-Werror=format</code>, which will turn those warnings into errors making them even harder to ignore."}, {"owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1438184143, "post_id": 31704275, "comment_id": 51348458, "body": "Seems to warn when I have too many variables, but not too few <code>warning: too many arguments for format [-Wformat-extra-args]</code>.  I suppose too few is undefined behaviour so a warning might be inappropriate."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "edited": false, "score": 0, "creation_date": 1438184641, "post_id": 31704275, "comment_id": 51348868, "body": "@TafT: <a href=\"http://coliru.stacked-crooked.com/a/bde4b1bacb92573a\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/bde4b1bacb92573a</a> shows warnings for too few arguments. (Although the message could be confused with a type mismatch, it&#39;s certainly not inaccurate.) As is often the case, clang has better error messages: <a href=\"http://coliru.stacked-crooked.com/a/9b782d013ceb5f74\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/9b782d013ceb5f74</a>"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1438182307, "creation_date": 1438182307, "answer_id": 31704275, "question_id": 31703796, "link": "https://stackoverflow.com/questions/31703796/can-we-make-a-scanf-like-function-that-returns-true-when-all-parameters-are-popu/31704275#31704275", "title": "Can we make a scanf like function that returns true when all parameters are populated and false otherwise without looping through all variables?", "body": "<p>There is no way to tell at runtime how many arguments are passed to a varargs function. Nor can you tell what the types of the arguments are. In short, it is your responsibility to get it right.</p>\n\n<p>However, if you are using gcc or clang and your format strings are literal strings, then the compiler will warn you if there is a mismatch between the format string and the number or types of the arguments. This warning is enabled with <code>-Wformat</code>, but it is also one of the many useful warnings enabled with <code>-Wall</code>. (If you are compiling without <code>-Wall</code>, you are effectively wearing a blindfold.)</p>\n"}], "owner": {"reputation": 1756, "user_id": 741961, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04379dff55ab0030ed874df3774ae19f?s=128&d=identicon&r=PG", "display_name": "TafT", "link": "https://stackoverflow.com/users/741961/taft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438182307, "creation_date": 1438181061, "question_id": 31703796, "link": "https://stackoverflow.com/questions/31703796/can-we-make-a-scanf-like-function-that-returns-true-when-all-parameters-are-popu", "title": "Can we make a scanf like function that returns true when all parameters are populated and false otherwise without looping through all variables?", "body": "<p>I would like to do this in C++ (or C if required).  I looking into Variadic Functions and the only method I could come up with seemed rather poor in terms of performance:</p>\n\n<pre><code>scanner(const char * string, const char * format, ...) // ... is the variables\n{\n  bool got_them_all(false);\n  size_t length_of_list(0);\n  va_list variables_list;\n  va_start(variables_list, format);\n  // Loop through variables_list and count until we run out of items\n  ...\n  if (length_of_list == sscanf(string, format, va_list))\n  {\n    got_them_all = true;\n  }\n  va_end(variables_list);\n  return got_them_all;\n}\n</code></pre>\n\n<p>In my specific use case these are command parameters coming in and I know the string format.  What I am trying to do is avoid errors where I count 5 parameters but pass scanf (OK really sscanf in my case) 4 or 5.  I would call the function with: \n  <code>allOK = scanner(command_cstring, \"CMD:%02d,%02d\", inta, intb);</code>\nNow in that case I can easily see that there are 2 parameters so I could do the <code>if (2 = scanner(command_cstring, \"CMD:%02d,%02d\", inta, intb));</code> reliably.  When it is more than half a dozen parameters I think my odds of not getting something wrong get rather high.  </p>\n\n<p>I would rather not add a loop to count parameters to my dynamic incoming string processing.  It sounds like a waste of CPU time on this small embedded system.  </p>\n\n<p>There seems no standard way to do sizeof(va_list).  </p>\n\n<p>Variadic Templates sound hopeful.  I don't mind the compile time computing load as at that point the code has the longest list of variables I am going to enter.  I do not have a C++11 compiler available for me, but I would be happy to accept a solution that needed one for the future.  If I had a C++11 option today then I would probably be trying to get something together myself right now.  </p>\n"}, {"tags": ["c", "ucos"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438181145, "post_id": 31703772, "comment_id": 51346126, "body": "Any code will execute one time if it is not inside a loop, recursion or function called several times."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1438181266, "post_id": 31703772, "comment_id": 51346224, "body": "@EugeneSh. I think OP is considering a <i>part</i> of a function which can be called multiple times."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1438181342, "post_id": 31703772, "comment_id": 51346301, "body": "So, can we get a clarification? Anyway, having a flag for an indication is perfectly legitimate."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438182096, "post_id": 31703772, "comment_id": 51346893, "body": "This is a horrible requirement.  It would be even more difficult to define/implement in multithreaded apps:)"}, {"owner": {"reputation": 395, "user_id": 4391643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3d135c95c4c9a676c3149ebc800d908?s=128&d=identicon&r=PG&f=1", "display_name": "Stack Over", "link": "https://stackoverflow.com/users/4391643/stack-over"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438183815, "post_id": 31703772, "comment_id": 51348178, "body": "@EugeneSh.: This part of the code is inside a function which will be executed each cycle (Task)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1438183886, "post_id": 31703772, "comment_id": 51348247, "body": "In this case I wouldn&#39;t use a static or global. I would pass it as a parameter."}, {"owner": {"reputation": 395, "user_id": 4391643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3d135c95c4c9a676c3149ebc800d908?s=128&d=identicon&r=PG&f=1", "display_name": "Stack Over", "link": "https://stackoverflow.com/users/4391643/stack-over"}, "edited": false, "score": 0, "creation_date": 1438183963, "post_id": 31703772, "comment_id": 51348309, "body": "This part of code shall be executed just in startup then it is not applicable (like a dead code)."}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 4391643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3d135c95c4c9a676c3149ebc800d908?s=128&d=identicon&r=PG&f=1", "display_name": "Stack Over", "link": "https://stackoverflow.com/users/4391643/stack-over"}, "edited": false, "score": 0, "creation_date": 1438183731, "post_id": 31703887, "comment_id": 51348110, "body": "Why exactly a static variable ?"}, {"owner": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "reply_to_user": {"reputation": 395, "user_id": 4391643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3d135c95c4c9a676c3149ebc800d908?s=128&d=identicon&r=PG&f=1", "display_name": "Stack Over", "link": "https://stackoverflow.com/users/4391643/stack-over"}, "edited": false, "score": 0, "creation_date": 1438183839, "post_id": 31703887, "comment_id": 51348199, "body": "@StackOver, A static variable lives as long as program runs. Therefore, you are sure this code is executed once in a single thread environment."}, {"owner": {"reputation": 395, "user_id": 4391643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3d135c95c4c9a676c3149ebc800d908?s=128&d=identicon&r=PG&f=1", "display_name": "Stack Over", "link": "https://stackoverflow.com/users/4391643/stack-over"}, "edited": false, "score": 0, "creation_date": 1438184080, "post_id": 31703887, "comment_id": 51348402, "body": "Also a global variable lives as long as program runs?"}, {"owner": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "reply_to_user": {"reputation": 395, "user_id": 4391643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3d135c95c4c9a676c3149ebc800d908?s=128&d=identicon&r=PG&f=1", "display_name": "Stack Over", "link": "https://stackoverflow.com/users/4391643/stack-over"}, "edited": false, "score": 0, "creation_date": 1438184456, "post_id": 31703887, "comment_id": 51348721, "body": "Exact but static variables can be scoped to a function."}], "tags": [], "owner": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "is_accepted": true, "score": 2, "last_activity_date": 1438181299, "creation_date": 1438181299, "answer_id": 31703887, "question_id": 31703772, "link": "https://stackoverflow.com/questions/31703772/execute-a-code-only-one-time-in-c/31703887#31703887", "title": "Execute a code only one time in C", "body": "<p>A simple code using a static variable.</p>\n\n<pre><code>static bool once = false;\n\nif (once == false)\n{\n    once = true;\n    // do your \"once\" stuff here\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1438181829, "last_edit_date": 1438181829, "creation_date": 1438181311, "answer_id": 31703893, "question_id": 31703772, "link": "https://stackoverflow.com/questions/31703772/execute-a-code-only-one-time-in-c/31703893#31703893", "title": "Execute a code only one time in C", "body": "<p>Depends on when you want to do this check and where.</p>\n\n<p>Let's say you have a API like</p>\n\n<pre><code>void func(bool flag)\n{\n   if(flag)\n   {\n      // Code for only one condition\n   }\n   else\n   {\n     //Rest of the code\n   }\n}\n</code></pre>\n\n<p>Then just by passing TRUE or FALSE you can make sure that the required code is executed only once.</p>\n\n<p>Else your approach of having a global variable is also ok but you have to unset your <code>LOCK</code> once the required block is executed</p>\n\n<pre><code>if( LOCK == TRUE)\n{\n   //Execute code\n   LOCK = FALSE;\n}\n</code></pre>\n\n<p>Hope you have a global variable <code>LOCK</code> initialized to <code>1</code>. </p>\n\n<p>NOTE:</p>\n\n<blockquote>\n  <p>If you are on a flat memory systems it is always dangerous to have\n  global variables so we tend to avoid it. If there is a real need then\n  yes we go for global variable else we can use some flag as suggested\n  in my first approach</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 456, "user_id": 5068532, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h1OYQ.jpg?s=128&g=1", "display_name": "alovaros", "link": "https://stackoverflow.com/users/5068532/alovaros"}, "is_accepted": false, "score": 1, "last_activity_date": 1438181667, "creation_date": 1438181667, "answer_id": 31704045, "question_id": 31703772, "link": "https://stackoverflow.com/questions/31703772/execute-a-code-only-one-time-in-c/31704045#31704045", "title": "Execute a code only one time in C", "body": "<p>So if you just use</p>\n\n<pre><code>if (TRUE == Lock)\n{\n /*Code to execute one time*/``\n}\n</code></pre>\n\n<p>Lock will ever be true rigth ?</p>\n\n<p>so you need to do</p>\n\n<pre><code>if(Lock == TRUE)\n{//code to execute\n Lock = FALSE;\n}\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 4391643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3d135c95c4c9a676c3149ebc800d908?s=128&d=identicon&r=PG&f=1", "display_name": "Stack Over", "link": "https://stackoverflow.com/users/4391643/stack-over"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4345, "favorite_count": 0, "accepted_answer_id": 31703887, "answer_count": 3, "score": 1, "last_activity_date": 1438181829, "creation_date": 1438181008, "question_id": 31703772, "link": "https://stackoverflow.com/questions/31703772/execute-a-code-only-one-time-in-c", "title": "Execute a code only one time in C", "body": "<p>I want execute a code only one time. I used a solution based on a global varibale of bool type. My question, is it the best solution?</p>\n\n<p>Remark: I use ucos-II.</p>\n\n<pre><code>if (TRUE == Lock)\n{\n /*Code to execute one time*/\n}\n\n/*The reste of the code*/\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1438180083, "post_id": 31703402, "comment_id": 51345319, "body": "what&#39;s exactly <code>erray</code>?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1438180106, "post_id": 31703402, "comment_id": 51345342, "body": "Welcome to Stack Overflow! Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions here. Please be aware that we do not provide <i>from-scratch</i> coding service. Please show us what you&#39;ve tried already, how it failed and we might be able to help.:-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438180521, "post_id": 31703402, "comment_id": 51345658, "body": "Also, read about <a href=\"https://en.wikipedia.org/wiki/Positional_notation\" rel=\"nofollow noreferrer\">Positional notation</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438180738, "post_id": 31703402, "comment_id": 51345819, "body": "You should probably learn the basics of the C language."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1438180762, "post_id": 31703402, "comment_id": 51345837, "body": "@MichaelWalz ok, Why&#39;s so?"}, {"owner": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438189430, "post_id": 31703402, "comment_id": 51351906, "body": "array = table= tableau"}], "answers": [{"tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": false, "score": 0, "last_activity_date": 1438182447, "last_edit_date": 1438182447, "creation_date": 1438182035, "answer_id": 31704169, "question_id": 31703402, "link": "https://stackoverflow.com/questions/31703402/binary-to-char-in-c/31704169#31704169", "title": "binary to char in C?", "body": "<p>You really need to read in each byte of the array - I'm assuming a '0' is no bit set and '1' is bit set ...</p>\n\n<p>A loop that sets each bit would probably do the job - if I'm reading your array correctly ....</p>\n\n<pre><code>unsigned char bin[] = {....}   // your array full of data\nunsigned char output[ 16 ]      // you will need to set the output size...\nint nIndex = 0;\nint nOutIndex = 0;\n....\n\n// the inner loop ...\noutput[ nOutIndex ] = 0;\nfor( nIndex = 0; nIndex &lt; 8; nIndex++ )\n{\n    if ( bin[ nIndex ] == 1 )\n       output[ nOutIndex ] |= 1;\n\n    output[ nOutIndex ] &lt;&lt;= 1;\n}    \n</code></pre>\n\n<p>This example shows a simple method for setting the bit and shifting. Please note this is only the inner loop, and there's no code for moving through the bin array (from the second char onwards. </p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1438182160, "creation_date": 1438182160, "answer_id": 31704226, "question_id": 31703402, "link": "https://stackoverflow.com/questions/31703402/binary-to-char-in-c/31704226#31704226", "title": "binary to char in C?", "body": "<p>It is unimportant what is the type of the <code>bin</code>. It may be some integer type. For the demonstrative purpose I used type <code>uint8_t</code>. You can use for example type <code>int</code>.</p>\n\n<p>The program can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main( void )\n{\n    uint8_t bin[][8] =\n    {    \n        { 0, 1, 1, 0, 0, 0, 0, 1 },\n        { 0, 1, 1, 0, 0, 1, 0, 1 },\n        { 0, 1, 1, 1, 0, 0, 1, 0 },\n        { 0, 1, 1, 1, 0, 0, 1, 1 },\n        { 0, 1, 1, 0, 0, 1, 1, 1 },\n        { 0, 1, 1, 0, 1, 0, 1, 0 },\n        { 0, 1, 1, 0, 1, 0, 0, 0 },\n        { 0, 1, 1, 0, 0, 0, 0, 1 },\n        { 0, 1, 1, 1, 0, 1, 0, 0 },\n        { 0, 0, 1, 0, 0, 1, 1, 1 },\n        { 0, 1, 0, 0, 1, 0, 1, 0 },\n        { 0, 1, 0, 0, 1, 0, 0, 0 },\n    };\n\n    const size_t N = sizeof( bin ) / sizeof( *bin ); \n    char s[N + 1] = { '\\0' };\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        for ( size_t j = 0; j &lt; 8; j++  )\n        {\n            s[i] = ( ( unsigned char )s[i] &lt;&lt; 1 ) | ( bin[i][j] &amp; 1 );\n        }\n    }\n\n    puts( s );\n}    \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>aersgjhat'JH\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1438182261, "creation_date": 1438182261, "answer_id": 31704259, "question_id": 31703402, "link": "https://stackoverflow.com/questions/31703402/binary-to-char-in-c/31704259#31704259", "title": "binary to char in C?", "body": "<p>Get a <code>value_so_far</code> initialized to <code>0</code></p>\n\n<pre><code>int value_so_far = 0;\n</code></pre>\n\n<p>Read a bit, multiply the <code>value_so_far</code> by <code>2</code> and add that bit</p>\n\n<pre><code>int bit;\nif (scanf(\"%d\", &amp;bit) != 1) /* error */;\nif (bit &lt; 0 || bit &gt; 1) /* error */;\nvalue_so_far *= 2;\nvalue_so_far += bit;\n</code></pre>\n\n<p>After 8 times, you have an 8-bit value.<br>\nRestart.</p>\n"}], "owner": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 31704226, "answer_count": 3, "score": -2, "last_activity_date": 1438182447, "creation_date": 1438180057, "last_edit_date": 1438181764, "question_id": 31703402, "link": "https://stackoverflow.com/questions/31703402/binary-to-char-in-c", "title": "binary to char in C?", "body": "<p>I have an array </p>\n\n<pre><code>bin =\n\n     0     1     1     0     0     0     0     1\n     0     1     1     0     0     1     0     1\n     0     1     1     1     0     0     1     0\n     0     1     1     1     0     0     1     1\n     0     1     1     0     0     1     1     1\n     0     1     1     0     1     0     1     0\n     0     1     1     0     1     0     0     0\n     0     1     1     0     0     0     0     1\n     0     1     1     1     0     1     0     0\n     0     0     1     0     0     1     1     1\n     0     1     0     0     1     0     1     0\n     0     1     0     0     1     0     0     0\n</code></pre>\n\n<blockquote>\n  <p>Every line in the array is a 8 bits binary letter</p>\n</blockquote>\n\n<p>bin is equivalent to this string <code>aersgjhat'JH</code></p>\n\n<p>This is very simple using matlab, but I couldn't find how to convert a table full of binary 8 bit words to a string in C.</p>\n"}, {"tags": ["c", "linux", "windows"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1438180049, "post_id": 31703203, "comment_id": 51345291, "body": "So you want to read a string like we do from file ?"}, {"owner": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 1, "creation_date": 1438180145, "post_id": 31703203, "comment_id": 51345364, "body": "Can you show us the code you&#39;ve tried so far?"}, {"owner": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "edited": false, "score": 0, "creation_date": 1438180178, "post_id": 31703203, "comment_id": 51345391, "body": "I assume that writing the string in an actual file is not an option ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438180512, "post_id": 31703203, "comment_id": 51345645, "body": "Sorry, SO is no tutorial, discussion or code writing site. Please show your code or ask a specific question about a probramming problem."}, {"owner": {"reputation": 227, "user_id": 1573870, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cc2609b6351f8cc35c0100efb174592?s=128&d=identicon&r=PG", "display_name": "lineinthesand", "link": "https://stackoverflow.com/users/1573870/lineinthesand"}, "reply_to_user": {"reputation": 3357, "user_id": 3194340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b99bac217534b05a3f7b957e14025ccc?s=128&d=identicon&r=PG&f=1", "display_name": "n0p", "link": "https://stackoverflow.com/users/3194340/n0p"}, "edited": false, "score": 0, "creation_date": 1438182116, "post_id": 31703203, "comment_id": 51346909, "body": "@Coconop yes, if possible, I&#39;d like to avoid that. I should point out that using fmemopen works under linux, but it seems not to be available under windows, nor to have a simple winapi analog (which is why I was looking for a different solution in the first place)."}, {"owner": {"reputation": 227, "user_id": 1573870, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cc2609b6351f8cc35c0100efb174592?s=128&d=identicon&r=PG", "display_name": "lineinthesand", "link": "https://stackoverflow.com/users/1573870/lineinthesand"}, "reply_to_user": {"reputation": 191202, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1438182674, "post_id": 31703203, "comment_id": 51347306, "body": "@larsks, I&#39;ve added an example."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1438185252, "post_id": 31703203, "comment_id": 51349263, "body": "fmemopen and mem_openstream are now in the Posix standard, so you&#39;ll find them on all recent platforms which attempt to be Posix compliant (eg Linux, OSX, *BSD). So I think your question reduces to &quot;Is there an implementation of fmemopen for Windows&quot;, which has been asked a few times here; unfortunately, the answer today, as far as I know, is still &quot;No&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1438184812, "post_id": 31705089, "comment_id": 51348988, "body": "OP said he&#39;s on Windows where fmemopen is not available."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438232596, "post_id": 31705089, "comment_id": 51368435, "body": "cstdio is a C++ header.  suggest using stdio.h"}], "tags": [], "owner": {"reputation": 379, "user_id": 4691346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PrchoZ9cf-c/AAAAAAAAAAI/AAAAAAAAABI/u5WgTPOa15g/photo.jpg?sz=128", "display_name": "Konstantin W", "link": "https://stackoverflow.com/users/4691346/konstantin-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1516031325, "last_edit_date": 1516031325, "creation_date": 1438184425, "answer_id": 31705089, "question_id": 31703203, "link": "https://stackoverflow.com/questions/31703203/how-to-read-data-from-a-string-in-memory-using-file-functions/31705089#31705089", "title": "How to read data from a string in memory using file functions", "body": "<p>On linux you would use <a href=\"http://man7.org/linux/man-pages/man3/fmemopen.3.html\" rel=\"nofollow noreferrer\">fmemopen</a>.</p>\n\n<p>On Windows there is no fmemopen function available.</p>\n\n<p>You can create and map an in memory (paging) file with the <code>CreateFileMapping</code> / <code>MapViewOfFile</code> functions, but this will return you a Windows file handle, which is unusable for your purposes.</p>\n\n<p>Use <code>sscanf</code> and other string processing functions provided in stdio.</p>\n"}], "owner": {"reputation": 227, "user_id": 1573870, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1cc2609b6351f8cc35c0100efb174592?s=128&d=identicon&r=PG", "display_name": "lineinthesand", "link": "https://stackoverflow.com/users/1573870/lineinthesand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 31705089, "answer_count": 1, "score": 1, "last_activity_date": 1516031325, "creation_date": 1438179597, "last_edit_date": 1495535061, "question_id": 31703203, "link": "https://stackoverflow.com/questions/31703203/how-to-read-data-from-a-string-in-memory-using-file-functions", "title": "How to read data from a string in memory using file functions", "body": "<p>I have a function which reads data from a file (i.e. it is passed a FILE*). </p>\n\n<p>What I want to accomplish is to use that function for reading the data from a string, i.e. I would like to treat the data in the string as if it were data in a physical file (e.g. using fgets, fseek etc.), so in effect, a memory file.</p>\n\n<p>I tried to associate the data string with a /dev/null (NUL) file via setvbuf (similar to what I read in <a href=\"https://stackoverflow.com/questions/539537/memory-buffer-as-file#\">this stackoverflow question</a>), but either I did it wrong or that's not how it's done.</p>\n\n<p>Can somebody help me achieving this in C, preferably in a portable fashion (actually, I don't mind using OS-specific functions/ifdefs as long as it  works and it's not /too/ complicated).</p>\n\n<p>Edit:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define NULL_L \"/dev/null\"\n#define NULL_W \"NUL\"\n\nFILE* open_memfile(char *pc_file_as_string) {\n    FILE *f = fopen(NULL_L, \"rb\");\n    int i_size = strlen(pc_file_as_string);\n    setvbuf(f, pc_file_as_string, _IOLBF, i_size);\n    return f;\n}\n\nint main()\n{\n    char c_line[100] = \"\";\n    char pc_file_as_string[] = \"line1 asdf\\nline2 fsa afds\\n\\nline4\";\n    FILE *f = open_memfile(pc_file_as_string);\n    int i = 4;\n\n    while (i &gt; 0) {\n        fgets(c_line, 100, f);\n        if (c_line == NULL) \n            break;\n        else\n            puts(c_line);\n        i--;\n    }\n    fclose(f);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "cmake", "sdl"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1438180407, "post_id": 31703082, "comment_id": 51345573, "body": "And now please write 100 times: &quot;C is <b>not</b> C++ is <b>not</b> C!&quot;"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438180631, "post_id": 31703082, "comment_id": 51345736, "body": "@Olaf <code>for (i = 0; i &lt; 100; i++) C != C++ != C;</code> compilation error, please halp (yes, no typo here). :P"}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 5084780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7765c8eba9bf8e0b37b6e4bdadb09d3f?s=128&d=identicon&r=PG&f=1", "display_name": "user101", "link": "https://stackoverflow.com/users/5084780/user101"}, "edited": false, "score": 0, "creation_date": 1438180273, "post_id": 31703265, "comment_id": 51345475, "body": "by the way do you have an Idea why it would output fatal error Out of memory"}, {"owner": {"reputation": 355, "user_id": 5084780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7765c8eba9bf8e0b37b6e4bdadb09d3f?s=128&d=identicon&r=PG&f=1", "display_name": "user101", "link": "https://stackoverflow.com/users/5084780/user101"}, "edited": false, "score": 0, "creation_date": 1438180779, "post_id": 31703265, "comment_id": 51345851, "body": "nevermind I added this before including sdl <code>#define SDL_MAIN_HANDLED</code> and everything works, don&#39;t know why it works with gcc without that code,maybe i&#39;ll be using gcc for the meantime"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1438180220, "last_edit_date": 1438180220, "creation_date": 1438179748, "answer_id": 31703265, "question_id": 31703082, "link": "https://stackoverflow.com/questions/31703082/compiling-a-c-program-and-linking/31703265#31703265", "title": "Compiling a C program and linking", "body": "<p>The problem is the flags, you mix <em>compiler</em> and <em>linker</em> flags. First of all this is problematic because the compiler flags aren't used when linking, and secondly because the GNU linker needs the libraries to come after the main source (or object) file on the command line, just like when you build manually.</p>\n\n<p>You set the libraries by using the <a href=\"http://www.cmake.org/cmake/help/v3.2/command/target_link_libraries.html\" rel=\"nofollow\"><code>target_link_libraries</code></a> command in your <code>CMakeLists.txt</code> file:</p>\n\n<pre><code>target_link_libraries(Sdltest mingw32 SDL2main SDL2)\n</code></pre>\n\n<p>Also, you're not building a C++ project, you're building a C project, so the flags variable should be <code>CMAKE_C_FLAGS</code>.</p>\n\n<p>Finally, if you're wondering about the command and arguments that CMake uses when building, try making with <code>VERBOSE</code> set to non-zero, e.g.</p>\n\n<pre><code>make VERBOSE=1\n</code></pre>\n\n<p>I'm sure it's possible to add that argument to CLion.</p>\n\n<hr>\n\n<p>PS.</p>\n\n<p>If you want to enable more warnings, there are even more flags you could add, like <code>-Wextra</code> and <code>-pedantic</code>. Yes it might sometime give false positives, especially when including header files from external libraries, but I think it's better to have to many warnings when developing than to few.</p>\n"}], "owner": {"reputation": 355, "user_id": 5084780, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7765c8eba9bf8e0b37b6e4bdadb09d3f?s=128&d=identicon&r=PG&f=1", "display_name": "user101", "link": "https://stackoverflow.com/users/5084780/user101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 31703265, "answer_count": 1, "score": 0, "last_activity_date": 1438204860, "creation_date": 1438179309, "last_edit_date": 1438204860, "question_id": 31703082, "link": "https://stackoverflow.com/questions/31703082/compiling-a-c-program-and-linking", "title": "Compiling a C program and linking", "body": "<p>Do I understand it correctly on how to use cmake for linking</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2)\nproject(Sdltest)\n\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wall -Werror -lmingw32 -lSDL2main -lSDL2\")\n\nset(SOURCE_FILES main.c)\nadd_executable(Sdltest ${SOURCE_FILES})\n</code></pre>\n\n<p>I'm trying to link the sdl2 to my project but I get a lot of errors.</p>\n\n<p>like <strong><em>/src/mingw-org-wsl/4.0-dev/src/libcrt/crt/main.c:91: undefined reference to `WinMain@16'</em></strong></p>\n\n<p>When I use gcc on cmd, it compiles perfectly</p>\n\n<pre><code>gcc main.c -o test -Wall -Werror -lmingw32 -lSDL2main -lSDL2\n</code></pre>\n\n<p>By the way I use clion 1.0.5</p>\n"}, {"tags": ["c", "parsing", "lisp", "common-lisp", "interpreter"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1438179360, "post_id": 31702864, "comment_id": 51344708, "body": "I&#39;d think you&#39;d at least need to implement the special forms and operators."}, {"owner": {"reputation": 9089, "user_id": 293147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ce1ecd6cce2377ff3194386362392?s=128&d=identicon&r=PG", "display_name": "SK-logic", "link": "https://stackoverflow.com/users/293147/sk-logic"}, "edited": false, "score": 0, "creation_date": 1439802155, "post_id": 31702864, "comment_id": 51992564, "body": "You don&#39;t necessarily need lambda or any environment, see my approach explained here: <a href=\"https://combinatorylogic.wordpress.com/2015/01/14/bootstrapping-a-compiler/\" rel=\"nofollow noreferrer\">combinatorylogic.wordpress.com/2015/01/14/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1414, "user_id": 615116, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/33fe3103b44d6350083c04966e34ec23?s=128&d=identicon&r=PG", "display_name": "pankajdoharey", "link": "https://stackoverflow.com/users/615116/pankajdoharey"}, "edited": false, "score": 0, "creation_date": 1438187701, "post_id": 31704201, "comment_id": 51350819, "body": "Thanks For the reply, By minimal i meant how much lisp i need to implement that i stay close to first principles and yet the interpreter should be good enough to evaluate its own code &quot;A meta circular evaluator&quot;.   Then my next plan of action is to write a set of lisp library functions that could output nasm assembler code, and in affect could compile the lisp interpreter written in itself to machine code. Thus completing the cycle.    Also i have no intent of competing with mainstream LISP Compilers."}, {"owner": {"reputation": 23808, "user_id": 2382734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d80069e46785505b443aa9d1dd9eb3a3?s=128&d=identicon&r=PG", "display_name": "Renzo", "link": "https://stackoverflow.com/users/2382734/renzo"}, "reply_to_user": {"reputation": 1414, "user_id": 615116, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/33fe3103b44d6350083c04966e34ec23?s=128&d=identicon&r=PG", "display_name": "pankajdoharey", "link": "https://stackoverflow.com/users/615116/pankajdoharey"}, "edited": false, "score": 1, "creation_date": 1438189544, "post_id": 31704201, "comment_id": 51351958, "body": "&quot;Should be good enough to evaluate its own code&quot; means exactly to be &quot;Turing complete&quot;. So that you could rewrite the interpreter in your Lisp."}], "tags": [], "owner": {"reputation": 23808, "user_id": 2382734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d80069e46785505b443aa9d1dd9eb3a3?s=128&d=identicon&r=PG", "display_name": "Renzo", "link": "https://stackoverflow.com/users/2382734/renzo"}, "is_accepted": true, "score": 4, "last_activity_date": 1438231574, "last_edit_date": 1438231574, "creation_date": 1438182103, "answer_id": 31704201, "question_id": 31702864, "link": "https://stackoverflow.com/questions/31702864/how-much-lisp-to-implement-in-c-before-writing-extension-in-itself/31704201#31704201", "title": "How much lisp to implement in C before writing extension in itself?", "body": "<p>The answer to your question depends on the meaning that you give to the word \u201cminimal\u201d.</p>\n\n<p>Given your question, and assuming that you don't want to make an implementation competing with the nowdays fine implementations of Common Lisp and Schema, my hypothesis is that with \u201cminimal\u201d you intend: <a href=\"https://en.wikipedia.org/wiki/Turing_completeness\" rel=\"nofollow\">Turing complete</a>, that is capable of expressing any computation expressible in a general purpose programming language.</p>\n\n<p>With this assumption, you need to implement three other things:</p>\n\n<ol>\n<li>conditional forms  (<code>cond</code>)</li>\n<li>lambda expressions (<code>lambda</code>)</li>\n<li>a way of defining recursive lambda expression (<code>labels</code> or <code>defun</code>)</li>\n</ol>\n\n<p>Your interpreter then should be able to evaluate forms. This should be sufficient to have a language equivalent to the initial <a href=\"http://www-formal.stanford.edu/jmc/history/lisp/lisp.html\" rel=\"nofollow\">LISP</a>, that allow to express in the language any computable function.</p>\n"}, {"tags": [], "owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "is_accepted": false, "score": 3, "last_activity_date": 1438192348, "last_edit_date": 1438192348, "creation_date": 1438189735, "answer_id": 31706887, "question_id": 31702864, "link": "https://stackoverflow.com/questions/31702864/how-much-lisp-to-implement-in-c-before-writing-extension-in-itself/31706887#31706887", "title": "How much lisp to implement in C before writing extension in itself?", "body": "<p>First off, you are talking about first writing a LISP interpreter. You have a lot of choices to take when it comes to scoping, LISP1 vs LISP2 since these questions alter the implementation core. An interpreter is a general purpose program that reads and evaluates code. It can support abstractions but it won't extend itself by making more native stuff. </p>\n\n<p>If you are interested in such stuff you can perhaps make a compiler instead. Eg. there are many Sceme like subsets that compiles to C or Java code, but you can make your own VM. Thus it can indeed compile itself to be run on it's own target machine (self hosting) if all the forms and procedures you use has been implemented using the primitives supported by the compiler. </p>\n\n<p>Making a dumb compiler is not much difference from making an interpreter. That is very clear if yo've watched the <a href=\"https://groups.csail.mit.edu/mac/classes/6.001/abelson-sussman-lectures/\" rel=\"nofollow\">SICP videos</a> (10A is about compilation, 7A-B is about interpreters)</p>\n\n<p>The environment can be a chain of pairs just as in a LISP interpreter. It would be difficult to implement the environment of itself in LISP without making it a very difficult Lisp language to use (unless it's compiled that is)\nYou may use the data structures of lisp and the primitives from the C code though. </p>\n\n<p>Making a FFI is a fast way to give your language lots of features. It solves the chicken and egg problem by using other peoples work from within your language. In fuses the top (primitives and syntax) and the bottom layer (a runtime) of your system. It's the ultimate primitive and you can think of it as system call or message bus to the runtime. </p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1438232765, "last_edit_date": 1438232765, "creation_date": 1438192536, "answer_id": 31707752, "question_id": 31702864, "link": "https://stackoverflow.com/questions/31702864/how-much-lisp-to-implement-in-c-before-writing-extension-in-itself/31707752#31707752", "title": "How much lisp to implement in C before writing extension in itself?", "body": "<p>I strongly suggest to read <a href=\"http://pagesperso-systeme.lip6.fr/Christian.Queinnec/WWW/LiSP.html\" rel=\"nofollow\">Queinnec's book: <em>Lisp In Small Pieces</em></a>. It is a book dedicated entirely to answer your question, and it explains in detail the many trade-offs and the internals of Lisp implementations and definitions, by giving many explained examples of Lisp interpreters and compilers.</p>\n\n<p>You might also consider using <a href=\"https://sourceware.org/libffi/\" rel=\"nofollow\">libffi</a>. You could be interested in the internals of M.Serrano's <a href=\"http://www-sop.inria.fr/members/Manuel.Serrano/bigloo/\" rel=\"nofollow\">Bigloo</a> &amp; <a href=\"http://hop.inria.fr/\" rel=\"nofollow\">Hop</a> implementations. You might even look inside my <a href=\"http://gcc-melt.org/\" rel=\"nofollow\">MELT</a> lisp-like language to customize the <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">GCC</a>\n compiler.</p>\n\n<p>You also need to learn more about <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\" rel=\"nofollow\">garbage collection</a> (you might read the <a href=\"http://gchandbook.org/\" rel=\"nofollow\">GC handbook</a>). You could use <a href=\"http://www.hboehm.info/gc/\" rel=\"nofollow\">Boehm's conservative Garbage Collector</a> (or something else, e.g. my <a href=\"http://starynkevitch.net/basile/qishintro.html\" rel=\"nofollow\">Qish</a> or <a href=\"http://www.ravenbrook.com/project/mps/\" rel=\"nofollow\">MPS</a>) or write your own GC.</p>\n\n<p>You may want to learn more about <a href=\"http://code.call-cc.org/\" rel=\"nofollow\">Chicken</a>, <a href=\"http://s48.org/\" rel=\"nofollow\">Scheme 48</a>, <a href=\"http://www.gnu.org/software/guile/\" rel=\"nofollow\">Guile</a> and read their papers and look inside their code.</p>\n\n<p>See also <a href=\"http://bootstrappingartificialintelligence.fr/WordPress3/\" rel=\"nofollow\">J.Pitrat's blog</a>: it is not about Lisp (but about bootstrapping strong AI) and has several fascinating entries related to bootstrapping.</p>\n"}], "owner": {"reputation": 1414, "user_id": 615116, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/33fe3103b44d6350083c04966e34ec23?s=128&d=identicon&r=PG", "display_name": "pankajdoharey", "link": "https://stackoverflow.com/users/615116/pankajdoharey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 1, "accepted_answer_id": 31704201, "answer_count": 3, "score": 3, "last_activity_date": 1438232765, "creation_date": 1438178786, "question_id": 31702864, "link": "https://stackoverflow.com/questions/31702864/how-much-lisp-to-implement-in-c-before-writing-extension-in-itself", "title": "How much lisp to implement in C before writing extension in itself?", "body": "<p>I am implementing a lisp interpreter in C, i have implemented along with few primitives like cons , car, cdr , eq, basic arithmetic stuff.</p>\n\n<p>Just before i was starting to implement define and lambda it occurred to me that i need to implement an environment. I am unsure if i could implement it in lisp itself.</p>\n\n<p>My intent is to implement minimal amount of lisp so that i could write extension to the language in itself. I am not sure how much is minimal, Would implementing FFI Qualify as minimal ?</p>\n"}, {"tags": ["c#", "c", "dllimport"], "comments": [{"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1438179250, "post_id": 31702766, "comment_id": 51344621, "body": "What happens if you use <code>LayoutKind.Explicit</code> and decorate the fields with <code>[FieldOffset(0)]</code> and <code>[FieldOffset(1)]</code>?"}, {"owner": {"reputation": 946, "user_id": 2119832, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8d1e52a82514b27629a75120cb3587c?s=128&d=identicon&r=PG", "display_name": "walruz", "link": "https://stackoverflow.com/users/2119832/walruz"}, "reply_to_user": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1438179378, "post_id": 31702766, "comment_id": 51344727, "body": "@Theodoros Chatzigiannakis: nothing :("}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1438179503, "post_id": 31702766, "comment_id": 51344848, "body": "What if you try to pass a pointer, instead? <a href=\"https://msdn.microsoft.com/en-us/library/dn261468(v=vs.110).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/dn261468(v=vs.110).aspx</a>"}, {"owner": {"reputation": 5237, "user_id": 2531341, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vhbsU.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2531341/chris"}, "edited": false, "score": 0, "creation_date": 1438179530, "post_id": 31702766, "comment_id": 51344865, "body": "What values does the C function see?"}, {"owner": {"reputation": 5237, "user_id": 2531341, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vhbsU.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2531341/chris"}, "edited": false, "score": 2, "creation_date": 1438179681, "post_id": 31702766, "comment_id": 51344989, "body": "Also, <code>st_struct</code> seems like something that should be a struct, not a class."}, {"owner": {"reputation": 946, "user_id": 2119832, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8d1e52a82514b27629a75120cb3587c?s=128&d=identicon&r=PG", "display_name": "walruz", "link": "https://stackoverflow.com/users/2119832/walruz"}, "reply_to_user": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1438179731, "post_id": 31702766, "comment_id": 51345023, "body": "@Theodoros Chatzigiannakis: I works correct (when I allocate buffer, copy data to that buffer and pass pointer to function)"}, {"owner": {"reputation": 946, "user_id": 2119832, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8d1e52a82514b27629a75120cb3587c?s=128&d=identicon&r=PG", "display_name": "walruz", "link": "https://stackoverflow.com/users/2119832/walruz"}, "edited": false, "score": 0, "creation_date": 1438179851, "post_id": 31702766, "comment_id": 51345135, "body": "@ Chris: they are different each time"}, {"owner": {"reputation": 5237, "user_id": 2531341, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vhbsU.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2531341/chris"}, "edited": false, "score": 0, "creation_date": 1438179985, "post_id": 31702766, "comment_id": 51345240, "body": "@walruz Then you&#39;re seeing something other in memory. To me, marshalling a class like that doesn&#39;t make much sense. Change it to a struct and it should work fine!"}, {"owner": {"reputation": 946, "user_id": 2119832, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8d1e52a82514b27629a75120cb3587c?s=128&d=identicon&r=PG", "display_name": "walruz", "link": "https://stackoverflow.com/users/2119832/walruz"}, "reply_to_user": {"reputation": 5237, "user_id": 2531341, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vhbsU.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2531341/chris"}, "edited": false, "score": 0, "creation_date": 1438180034, "post_id": 31702766, "comment_id": 51345280, "body": "@Chris: you are THE BEST. It is because of class. I made mistake. Could you please write it as answer (not just comment)"}], "answers": [{"tags": [], "owner": {"reputation": 12222, "user_id": 815938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8mNbc.png?s=128&g=1", "display_name": "kennyzx", "link": "https://stackoverflow.com/users/815938/kennyzx"}, "is_accepted": false, "score": 2, "last_activity_date": 1438179986, "creation_date": 1438179986, "answer_id": 31703371, "question_id": 31702766, "link": "https://stackoverflow.com/questions/31702766/how-to-properly-pass-struct-pointer-from-c-to-c-dll/31703371#31703371", "title": "How to properly pass struct pointer from C# to C DLL", "body": "<p>You might be thinking that the <code>ref</code> keyword is required in order to <code>passing parameter by reference</code>. But since <code>st_struct</code> is defined as a reference type (class is reference type), so the parameter is passed by reference, not by value. You don't need the <code>ref</code> keyword.</p>\n\n<p>If <code>st_struct</code> were defined as <code>struct</code>, you may find it work when you use the <code>ref</code> keyword.</p>\n"}, {"tags": [], "owner": {"reputation": 5237, "user_id": 2531341, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/vhbsU.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2531341/chris"}, "is_accepted": true, "score": 2, "last_activity_date": 1438180851, "creation_date": 1438180851, "answer_id": 31703707, "question_id": 31702766, "link": "https://stackoverflow.com/questions/31702766/how-to-properly-pass-struct-pointer-from-c-to-c-dll/31703707#31703707", "title": "How to properly pass struct pointer from C# to C DLL", "body": "<p>As @kennyzx mentions, since your <code>st_struct</code> is a class, it is already a reference type and will be passed as a pointer. I suspect throwing a <code>ref</code> onto that will give you a double pointer, which doesn't make much sense when mixing managed and unmanaged code. The marshaller can possibly handle that and create a new object for you if the pointer changes, but it seems like a sketchy thing to do.</p>\n\n<p>So, when passing the class without <code>ref</code>, it works as expected (the C code gets a pointer). If you change it to a <code>struct</code>, passing it without <code>ref</code> should pass it on the stack and passing it with <code>ref</code> will pass it as a pointer.</p>\n\n<p>Using <code>struct</code> seems like the obvious choice in your case, as it can be passed directly (the CLR just needs to pin it and pass a pointer). Using <code>class</code> I suspect will involve more marshalling.</p>\n"}], "owner": {"reputation": 946, "user_id": 2119832, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c8d1e52a82514b27629a75120cb3587c?s=128&d=identicon&r=PG", "display_name": "walruz", "link": "https://stackoverflow.com/users/2119832/walruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2466, "favorite_count": 0, "accepted_answer_id": 31703707, "answer_count": 2, "score": 2, "last_activity_date": 1438180851, "creation_date": 1438178549, "last_edit_date": 1438178953, "question_id": 31702766, "link": "https://stackoverflow.com/questions/31702766/how-to-properly-pass-struct-pointer-from-c-to-c-dll", "title": "How to properly pass struct pointer from C# to C DLL", "body": "<p>I need to export function from C DLL. Here is example that I have written</p>\n\n<pre><code>typedef struct tag_struct {\n  unsigned char first;\n  unsigned char second;\n} st_struct;\n\n__declspec(dllexport) unsigned char Func( st_struct *ptr )\n{\n    return ptr-&gt;first + ptr-&gt;second;\n}\n</code></pre>\n\n<p>Here is C# code that I'm using to import described above function.</p>\n\n<pre><code>using System;\nusing System.Windows.Forms;\nusing System.Runtime.InteropServices;\n\nnamespace ImportTest\n{\n    [Serializable]\n    [StructLayout(LayoutKind.Sequential)]\n    public class st_struct\n    {\n        public byte first;\n        public byte second;\n    }\n\n    public partial class Form1 : Form\n    {\n        public Form1()\n        {\n            InitializeComponent();\n\n            st_struct x = new st_struct();\n\n            x.first = 1;\n            x.second = 2;\n\n            byte result = Func(ref x);\n        }\n\n        [DllImport(\"MarshalTest.dll\")]\n        protected static extern byte Func(ref st_struct inputs);\n    }\n}\n</code></pre>\n\n<p>My problem is that return value of Func is not 3 as it should be (1 + 2). </p>\n\n<p>I am using debugger to see values inside DLL - they are different (not 1 and 2 that I provided).</p>\n\n<p>Function returns proper value whan I change C# code like that:</p>\n\n<pre><code>public Form1()\n{\n    InitializeComponent();\n\n    st_struct x = new st_struct();\n\n    x.first = 1;\n    x.second = 2;\n\n    byte result = Func(x);\n}\n\n[DllImport(\"MarshalTest.dll\")]\nprotected static extern byte Func(st_struct inputs);\n</code></pre>\n\n<p>Problem disappears when I remove ref. But I don't understand why.</p>\n\n<p>Could you please explain that?</p>\n"}, {"tags": ["c", "visual-studio-2013", "optional-parameters"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438177323, "post_id": 31702156, "comment_id": 51343048, "body": "Is the extension of your file <code>.c</code>?"}, {"owner": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 3, "creation_date": 1438177388, "post_id": 31702156, "comment_id": 51343098, "body": "It&#39;s not &quot;optional&quot; as in C++ default argument. It is a pointer, so you should be passing NULL."}, {"owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438177521, "post_id": 31702156, "comment_id": 51343202, "body": "@MohitJain Yes. But I also tried to set it to .cpp, and I also set the &quot;Compile as C++ Code (/TP)&quot; option, but doesn&#39;t solve."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1438177565, "post_id": 31702156, "comment_id": 51343243, "body": "C does not have &quot;optional&quot; parameters. Tag changed to C++"}, {"owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "reply_to_user": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 0, "creation_date": 1438177670, "post_id": 31702156, "comment_id": 51343332, "body": "@Banex, the problem is, if I set the Timeout parameter to zero, as MSDN says, the behaviour of ZwWaitForSingleObject will be different then NOT specyfing it"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438177676, "post_id": 31702156, "comment_id": 51343336, "body": "Did you try passing third parameter as NULL? <code>ZwWaitForSingleObject(hSemaphore, 0, 0);</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2440, "user_id": 2676096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b1178790d916aa2177656a70aba28f86?s=128&d=identicon&r=PG&f=1", "display_name": "Banex", "link": "https://stackoverflow.com/users/2676096/banex"}, "edited": false, "score": 1, "creation_date": 1438177861, "post_id": 31702156, "comment_id": 51343494, "body": "To expand on the comment by @Banex, WIN32 types which have a prefix <code>P</code> means they are pointer types, <code>PLARGE_INTEGER</code> is a <i>pointer</i> to <code>LARGE_INTEGER</code>. Since the functions have to be callable from C as well as C++, they can&#39;t have arguments with default values (which is a C++ specific feature), and so pointers are used, and to the &quot;optional&quot; part is that the pointer have to be <code>NULL</code> if the argument is not to be used. Also, in C++, <code>0</code> <i>is</i> the null pointer (a.k.a. <code>NULL</code>). So passing <code>0</code> as the third argument is the same as passing <code>NULL</code>."}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "edited": false, "score": 0, "creation_date": 1438178511, "post_id": 31702375, "comment_id": 51344060, "body": "Thank you for the prompt response, now I understand. I didn&#39;t think about the difference between passing a valid pointer to a null value, and passing a null pointer."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 4, "last_activity_date": 1438177702, "creation_date": 1438177702, "answer_id": 31702375, "question_id": 31702156, "link": "https://stackoverflow.com/questions/31702156/msvc-too-few-arguments-in-function-call-when-omitting-optional-parameter/31702375#31702375", "title": "MSVC: &quot;too few arguments in function call&quot; when omitting optional parameter", "body": "<p><code>zero</code> is not the same as <code>NULL</code>. This is a <code>C</code> API, there are no \"optional\" parameters. So passing <code>NULL</code> means <em>not specified</em> The two cases in your quoted documentation are</p>\n\n<pre><code>ZwWaitForSingleObject(handle, 0, NULL);\n/* or ZwWaitForSingleObject(handle, 0, 0); which is the same */\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>LARGE_INTEGER timeout;\ntimeout.QuadPart = 0L;\nZwWaitForSingleObject(handle, 0, &amp;timeout);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "edited": false, "score": 0, "creation_date": 1438178415, "post_id": 31702397, "comment_id": 51343965, "body": "Thank you for the prompt response, now I understand."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 1, "last_activity_date": 1438177738, "creation_date": 1438177738, "answer_id": 31702397, "question_id": 31702156, "link": "https://stackoverflow.com/questions/31702156/msvc-too-few-arguments-in-function-call-when-omitting-optional-parameter/31702397#31702397", "title": "MSVC: &quot;too few arguments in function call&quot; when omitting optional parameter", "body": "<p>It's optional as in: you don't have to pass a valid value if you don't want to but you <em>have</em> to pass something, the optional parameters don't work the same as a default argument in C++ (even though this question is already tagged as <code>C</code>).</p>\n\n<p>The variable type of <code>Timeout</code> is <code>PLARGE_INTEGER</code> which is a pointer to a LARGE_INTEGER. Creating a LARGE_INTEGER and setting it's values to 0 and passing the created LARGE_INTEGER will cause the behaviour you specified :  </p>\n\n<blockquote>\n  <p>If an explicit Timeout value of zero is specified, then no wait will\n  occur if the wait cannot be satisfied immediately.</p>\n</blockquote>\n\n<p>However, this won't happen when you simply pass <code>NULL</code> as argument, it's the same as <code>a Timeout parameter is not specified</code>.</p>\n"}], "owner": {"reputation": 359, "user_id": 2409894, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/vmxZ8.gif?s=128&g=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/2409894/flavio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 31702397, "answer_count": 2, "score": -3, "last_activity_date": 1438182218, "creation_date": 1438177234, "last_edit_date": 1438182218, "question_id": 31702156, "link": "https://stackoverflow.com/questions/31702156/msvc-too-few-arguments-in-function-call-when-omitting-optional-parameter", "title": "MSVC: &quot;too few arguments in function call&quot; when omitting optional parameter", "body": "<p>in a WDF driver project I'm writing in Visual Studio 2013, I've got this function: </p>\n\n<pre><code>ZwWaitForSingleObject(hSemaphore, 0);\n</code></pre>\n\n<p>which gives the \"too few arguments in function call\" error, if I omit the last parameter, which is optional: </p>\n\n<pre><code>    NTSTATUS ZwWaitForSingleObject(\n  _In_     HANDLE         Handle,\n  _In_     BOOLEAN        Alertable,\n  _In_opt_ PLARGE_INTEGER Timeout\n);\n</code></pre>\n\n<p>The problem is, I <strong><em>have to</em></strong> omit it, I cannot just set it to NULL. Because, as MSDN says: </p>\n\n<blockquote>\n  <p>If a Timeout parameter is not specified, then the wait will not be\n   satisfied until the object attains a state of Signaled.  If an explicit Timeout value of zero is specified, then no\n   wait will occur if the wait cannot be satisfied immediately.</p>\n</blockquote>\n\n<p>So, the question is: have you got any idea on why Visual C++ forces me to type in the optional parameter on a system function call?\nHow can it be avoided?</p>\n"}, {"tags": ["c", "multithreading", "performance", "blas", "papi"], "comments": [{"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1438178539, "post_id": 31701676, "comment_id": 51344088, "body": "Umm.. Measure flops for each thread and then add them together?"}, {"owner": {"reputation": 143, "user_id": 4306664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f67da06f7f05d9a56ed456c3b84f3f15?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4306664/sebastian"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1438180036, "post_id": 31701676, "comment_id": 51345281, "body": "How can I do this? The blas library create the threads. So, the parallel region is inside the function call dgemm. I don&#39;t have access to the individual threads. Of course I could recompile the blas library and then inside the parallel region measure the performance for each thread (not possible in the case of MKL, okay I could switch to OpenBlas). But this is what I want to avoid."}, {"owner": {"reputation": 3510, "user_id": 4128833, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079bb7879c594630684e2c9ed4ecad7e?s=128&d=identicon&r=PG", "display_name": "paul-g", "link": "https://stackoverflow.com/users/4128833/paul-g"}, "edited": false, "score": 0, "creation_date": 1438241113, "post_id": 31701676, "comment_id": 51372258, "body": "Could you show the number of flops? Maybe mflops is an average across all threads?"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4306664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f67da06f7f05d9a56ed456c3b84f3f15?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4306664/sebastian"}, "edited": false, "score": 0, "creation_date": 1439047999, "post_id": 31790330, "comment_id": 51706666, "body": "First of all: Thank you for your answer! Why do I want to measure performance and execution time? I am actually interested in analyzing LAPACK&#39;s dense eigensolver. The dense eigensolvers calls three function: 1) reduction to tridiagonal form, 2) tridiagonal eigensolver, 3) backtransformation. To identify the bottlenecks of dense eigensolver it is necessary to measure time and performance. If I only have the execution time, then e.g. I could see that I spend most the time in the reduction. But I don&#39;t know if I use the resources efficiently. So I can not be sure if this is the bottleneck."}, {"owner": {"reputation": 143, "user_id": 4306664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f67da06f7f05d9a56ed456c3b84f3f15?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4306664/sebastian"}, "edited": false, "score": 0, "creation_date": 1439048005, "post_id": 31790330, "comment_id": 51706668, "body": "You have suggested two Variants for this problem. I like the first one. Overwriting the pthread_create (and also pthread_join) seems to be the only why to work with PAPI. Overwriting the pointer at runtime make sense for my case (I have a lot of correctness checking in my code, I do not want to measure also this part)."}, {"owner": {"reputation": 143, "user_id": 4306664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f67da06f7f05d9a56ed456c3b84f3f15?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4306664/sebastian"}, "edited": false, "score": 0, "creation_date": 1439048011, "post_id": 31790330, "comment_id": 51706669, "body": "I could understand the theory, but I am not sure how I could implement this. I would have to overwrite the function pointer to pthread_create. Inside this function I have to create the thread with the original pthread_create function and after this I have to start the measuring. I am not really sure how to resolve the problem with the overwritten pointer and the original pointer. My idea for this are macros. Is this the best way? In general: Do you have an example or do you have a recommended reading advise for learning more about this? Thanks!"}, {"owner": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "reply_to_user": {"reputation": 143, "user_id": 4306664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f67da06f7f05d9a56ed456c3b84f3f15?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4306664/sebastian"}, "edited": false, "score": 0, "creation_date": 1439282840, "post_id": 31790330, "comment_id": 51784996, "body": "I&#39;ll post an example when I&#39;m in front of a desktop computer - in two weeks"}], "tags": [], "owner": {"reputation": 1402, "user_id": 5128211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54de4260011300d135660ea63718ef4?s=128&d=identicon&r=PG&f=1", "display_name": "BitWhistler", "link": "https://stackoverflow.com/users/5128211/bitwhistler"}, "is_accepted": true, "score": 4, "last_activity_date": 1438613210, "creation_date": 1438613210, "answer_id": 31790330, "question_id": 31701676, "link": "https://stackoverflow.com/questions/31701676/how-to-measure-overall-performance-of-parallel-programs-with-papi/31790330#31790330", "title": "How to measure overall performance of parallel programs (with papi)", "body": "<p>First, I'm just curious - why do you need the FLOPS? don't you just care how much time is taken? or maybe time taken in compare to other BLAS libraries?<br></p>\n\n<p>PAPI is thread based not much help on its own here.<br></p>\n\n<p>What I would do is measure around the function call and see how time changes with number of threads it spawns. It should not spawn more threads than physical cores (HT is no good here). Then, if the matrix is big enough, and the machine is not loaded, the time should simply divide by the number of threads. E.g., 10 seconds over 4 core should become 2.5 seconds.</p>\n\n<p>Other than that, there are 2 things you can do to really measure it:<br>\n1. Use whatever you use now but inject your start/end measurement code around the BLAS code. One way to do that (in linux) is by pre-loading a lib that defines pthread_start and using your own functions that call the originals but do some extra measurements. Another way to to override the function pointer when the process is already running (=trampoline). In linux it's in the GOT/PLT and in windows it's more complicated - look for a library.<br>\n2. Use oprofile, or some other profiler, to report number of instructions executed in the time you care for. Or better yet, to report the number of floating point instructions executed. A little problem with this is that SSE instructions are multiplying or adding 2 or more doubles at a time so you'd have to account for that. I guess you can assume they always use the maximum possible operands.</p>\n"}], "owner": {"reputation": 143, "user_id": 4306664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f67da06f7f05d9a56ed456c3b84f3f15?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/4306664/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 2, "accepted_answer_id": 31790330, "answer_count": 1, "score": 9, "last_activity_date": 1438613210, "creation_date": 1438176075, "last_edit_date": 1438434359, "question_id": 31701676, "link": "https://stackoverflow.com/questions/31701676/how-to-measure-overall-performance-of-parallel-programs-with-papi", "title": "How to measure overall performance of parallel programs (with papi)", "body": "<p>I asked myself what would be the best way to measure the performance (in flops) of a parallel program. I read about papi_flops. This seems to work fine for a serial program. But I don't know how I can measure the overall performance of a parallel program.</p>\n\n<p>I would like to measure the performance of a blas/lapack function, in my example below gemm. But I also want to measure other function, specially functions where the number of operation is not known. (In the case of gemm the ops are known (ops(gemm) = 2*n^3), so I could calculate the performance as a function of the number of operations and the execution time.) The library (I am using Intel MKL) spawn the threads automatically. So I can't measure the performance of each thread individually and then reduce it.</p>\n\n<p>This is my example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;                                                              \n#include &lt;stdio.h&gt;                                                               \n#include &lt;string.h&gt;                                                             \n#include \"mkl.h\"\n#include \"omp.h\"\n#include \"papi.h\"       \n\nint main(int argc, char *argv[] )                                                \n{                                                                                \n  int i, j, l, k, n, m, idx, iter;\n  int mat, mat_min, mat_max;\n  int threads;\n  double *A, *B, *C;\n  double alpha =1.0, beta=0.0;\n\n  float rtime1, rtime2, ptime1, ptime2, mflops;\n  long long flpops;\n\n  #pragma omp parallel\n  {\n    #pragma omp master\n    threads = omp_get_num_threads();\n  }\n\n  if(argc &lt; 4){                                                                  \n    printf(\"pass me 3 arguments!\\n\");                                            \n    return( -1 );                                                                \n  }                                                                              \n  else                                                                           \n  {                                                                            \n    mat_min = atoi(argv[1]);\n    mat_max = atoi(argv[2]);\n    iter = atoi(argv[3]);                                                         \n  }                    \n\n  m = mat_max;  n = mat_max;  k = mat_max;\n\n  printf (\" Initializing data for matrix multiplication C=A*B for matrix \\n\"\n            \" A(%ix%i) and matrix B(%ix%i)\\n\\n\", m, k, k, n);\n\n  A = (double *) malloc( m*k * sizeof(double) );\n  B = (double *) malloc( k*n * sizeof(double) );\n  C = (double *) malloc( m*n * sizeof(double) );\n\n  printf (\" Intializing matrix data \\n\\n\");\n  for (i = 0; i &lt; (m*k); i++)\n    A[i] = (double)(i+1);\n  for (i = 0; i &lt; (k*n); i++)\n    B[i] = (double)(-i-1);\n  memset(C,0,m*n*sizeof(double));\n\n  // actual meassurment\n  for(mat=mat_min;mat&lt;=mat_max;mat+=5)\n  {\n    m = mat;  n = mat; k = mat;\n\n    for( idx=-1; idx&lt;iter; idx++ ){\n      PAPI_flops( &amp;rtime1, &amp;ptime1, &amp;flpops, &amp;mflops );\n      cblas_dgemm(CblasColMajor, CblasNoTrans, CblasNoTrans, \n                    m, n, k, alpha, A, k, B, n, beta, C, n);\n      PAPI_flops( &amp;rtime2, &amp;ptime2, &amp;flpops, &amp;mflops );\n    }\n\n    printf(\"%d threads: %d in %f sec, %f MFLOPS\\n\",threads,mat,rtime2-rtime1,mflops);fflush(stdout);\n  }\n\n  printf(\"Done\\n\");fflush(stdout);\n\n  free(A);\n  free(B);\n  free(C);\n\n  return 0;\n}\n</code></pre>\n\n<p>This is one output (for matrix size 200):</p>\n\n<pre><code>1 threads: 200 in 0.001459 sec, 5570.258789 MFLOPS\n2 threads: 200 in 0.000785 sec, 5254.993652 MFLOPS\n4 threads: 200 in 0.000423 sec, 4919.640137 MFLOPS\n8 threads: 200 in 0.000264 sec, 3894.036865 MFLOPS\n</code></pre>\n\n<p>We can see for the execution time, that the function gemm scales. But the flops that I am measuring is only the performance of thread 0.</p>\n\n<p>My question is: How can I measure the overall performance? I am grateful for any input.</p>\n"}, {"tags": ["c", "rust", "ffi"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1096614"}, "edited": false, "score": 1, "creation_date": 1438184956, "post_id": 31702182, "comment_id": 51349079, "body": "Ah, that works fine for compilers that support variable-length arrays, but not for mine. I&#39;m using the Visual C++ 2005 compiler. I will update my question to be more specific."}, {"owner": {"reputation": 96489, "user_id": 788207, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/KQmlY.jpg?s=128&g=1", "display_name": "Vladimir Matveev", "link": "https://stackoverflow.com/users/788207/vladimir-matveev"}, "edited": false, "score": 0, "creation_date": 1438195335, "post_id": 31702182, "comment_id": 51355373, "body": "In that case you&#39;re stuck with preprocessor-based constants, so you wouldn&#39;t be able to use constants defined on Rust side, unfortunately."}, {"owner": {"reputation": 2409, "user_id": 2284570, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9bd1d26aad2cfb7ece066d94c128d529?s=128&d=identicon&r=PG", "display_name": "user2284570", "link": "https://stackoverflow.com/users/2284570/user2284570"}, "edited": false, "score": 0, "creation_date": 1607995243, "post_id": 31702182, "comment_id": 115441634, "body": "how to declare <code>X</code> for C without initilizing it? <a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=eb9a09e43bf6495eb950fcea1a967ae6\" rel=\"nofollow noreferrer\">play.rust-lang.org/&hellip;</a> <a href=\"https://stackoverflow.com/q/65292878\">stackoverflow.com/q/65292878</a>"}], "tags": [], "owner": {"reputation": 96489, "user_id": 788207, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/KQmlY.jpg?s=128&g=1", "display_name": "Vladimir Matveev", "link": "https://stackoverflow.com/users/788207/vladimir-matveev"}, "is_accepted": true, "score": 12, "last_activity_date": 1438177636, "last_edit_date": 1438177636, "creation_date": 1438177283, "answer_id": 31702182, "question_id": 31701655, "link": "https://stackoverflow.com/questions/31701655/can-a-rust-constant-static-be-exposed-to-c/31702182#31702182", "title": "Can a Rust constant/static be exposed to C?", "body": "<p>You most certainly can do it, at least inside functions:</p>\n\n<p><code>cnst.rs</code>:</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>#[no_mangle]\npub static X: i32 = 42;\n</code></pre>\n\n<p><code>cnstuse.c</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\nextern const int32_t X;\n\nint main() {\n    char data[X];\n    printf(\"%lu\\n\", sizeof(data));\n    return 0;\n}\n</code></pre>\n\n<p>Compilation:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>% rustc --crate-type=staticlib cnst.rs\nnote: link against the following native artifacts when linking against this static library\nnote: the order and any duplication can be significant on some platforms, and so may need to be preserved\nnote: library: System\nnote: library: pthread\nnote: library: c\nnote: library: m\n% gcc -o cnstuse cnstuse.c libcnst.a\n% ./cnstuse\n42\n</code></pre>\n\n<p>Top-level array declarations, however, can't use global variables/constants for size, so this will only work inside functions.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1096614"}, "edited": false, "score": 0, "creation_date": 1438367211, "post_id": 31751524, "comment_id": 51439180, "body": "I will have to mess around with build.rs. I&#39;ve seen it, but passed over it in favor of getting as simple of a minimum proof-of-concept that I could."}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1438362274, "creation_date": 1438362274, "answer_id": 31751524, "question_id": 31701655, "link": "https://stackoverflow.com/questions/31701655/can-a-rust-constant-static-be-exposed-to-c/31751524#31751524", "title": "Can a Rust constant/static be exposed to C?", "body": "<blockquote>\n  <p>To be more specific, I am using a compiler which does not support variable-length arrays (Visual C++ 2005)</p>\n</blockquote>\n\n<p>This requires the constant to be defined (and not merely declared) at the point of use. Furthermore, C has much more restrictions than C++ on what constitutes a constant usable as an array dimension: basically integer literals (which can be substituted via macros) and enumerators; unlike C++ it does not have integral constants (<code>int const x</code>), so depending on the mode (C or C++) you compile in, you might be restricted.</p>\n\n<p>There is no facility in rustc or Cargo to automatically generate C files, the symbols are only exported and available at link-time, not at compile-time.</p>\n\n<hr>\n\n<p>You are fortunate though, there is a solution, though it is slightly more cumbersome.</p>\n\n<p>Rust features a <code>build.rs</code> file, which is compiled and executed as part of the regular compilation process. This file can contain command to generate other files, and therefore it is perfectly possible to:</p>\n\n<ol>\n<li>Write down the constant once and for all in a <code>.rs</code> file</li>\n<li>Generate a C header \"exporting\" this constant in a C format through the <code>build.rs</code> file.</li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1096614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 3, "accepted_answer_id": 31702182, "answer_count": 2, "score": 13, "last_activity_date": 1438362274, "creation_date": 1438176025, "last_edit_date": 1438185134, "question_id": 31701655, "link": "https://stackoverflow.com/questions/31701655/can-a-rust-constant-static-be-exposed-to-c", "title": "Can a Rust constant/static be exposed to C?", "body": "<p>Say I have a Rust API that contains a constant or a static, an i32 for example. I want to use this Rust API from C. From the C side, I want to use that constant as an array size. Am I correct that there is no way to do it? Is the best solution to redeclare the constant in my C header files that are providing the declarations for the rest of the Rust API?</p>\n\n<p><strong>Update:</strong>\nTo be more specific, I am using a compiler which does not support variable-length arrays (Visual C++ 2005)</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1438176621, "post_id": 31701641, "comment_id": 51342517, "body": "Most readable code since a long time...."}, {"owner": {"reputation": 80, "user_id": 3818488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/07BFN.jpg?s=128&g=1", "display_name": "Abol_Fa", "link": "https://stackoverflow.com/users/3818488/abol-fa"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1438176731, "post_id": 31701641, "comment_id": 51342599, "body": "@ckruczek so the problem is...?"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1438176942, "post_id": 31701641, "comment_id": 51342758, "body": "You better read how to format your code better in your question so you might get repu for asking a question. Although its much easier to read your question and to get the main point of your code."}, {"owner": {"reputation": 80, "user_id": 3818488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/07BFN.jpg?s=128&g=1", "display_name": "Abol_Fa", "link": "https://stackoverflow.com/users/3818488/abol-fa"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1438177769, "post_id": 31701641, "comment_id": 51343423, "body": "@ckruczek can i get some help now?.btw i need help not repu"}, {"owner": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "edited": false, "score": 0, "creation_date": 1438177971, "post_id": 31701641, "comment_id": 51343589, "body": "show us all your code, from the creation of the socket to the close call and check for return values, especially of send. maybe the remote socket is already closed when you try to send stuff"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1438178000, "post_id": 31701641, "comment_id": 51343611, "body": "No you don&#39;t get help from me. Stackoverflow lifes from well formed questions. Yours is not."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438178400, "post_id": 31701641, "comment_id": 51343953, "body": "You should be checking the return values of <code>accept</code> and <code>send</code>."}, {"owner": {"reputation": 80, "user_id": 3818488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/07BFN.jpg?s=128&g=1", "display_name": "Abol_Fa", "link": "https://stackoverflow.com/users/3818488/abol-fa"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438178928, "post_id": 31701641, "comment_id": 51344353, "body": "@dbush thanks.accept fails for some reason and returns -1. but why? i have checked my listen() call status and it returns zero"}, {"owner": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "edited": false, "score": 0, "creation_date": 1438178996, "post_id": 31701641, "comment_id": 51344415, "body": "WSAGetLastError() may be usefull"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438179344, "post_id": 31701641, "comment_id": 51344695, "body": "&#39;(socklen_t*) sizeof(theirs)&#39; - no, bad cast.  Load the length into a var, eg &#39;socklen_t sLen=sizeof(theirs);&#39; and pass &#39;&amp;sLen&#39;."}, {"owner": {"reputation": 80, "user_id": 3818488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/07BFN.jpg?s=128&g=1", "display_name": "Abol_Fa", "link": "https://stackoverflow.com/users/3818488/abol-fa"}, "reply_to_user": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "edited": false, "score": 0, "creation_date": 1438179420, "post_id": 31701641, "comment_id": 51344774, "body": "@robin.koch ty so much 10014 error  code. better google it"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1438179502, "post_id": 31701641, "comment_id": 51344845, "body": "It&#39;s &#39;WSAEFAULT; 10014. Bad address&#39;.   Fix the bad cast on .socklen_t*"}, {"owner": {"reputation": 80, "user_id": 3818488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/07BFN.jpg?s=128&g=1", "display_name": "Abol_Fa", "link": "https://stackoverflow.com/users/3818488/abol-fa"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438180054, "post_id": 31701641, "comment_id": 51345296, "body": "@MartinJames finally!. thank you! should be cast to (int*)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438180196, "post_id": 31701641, "comment_id": 51345408, "body": "^^whatever:)  The point is that the length is an in/out parameter and must be an lvalue."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1438180332, "post_id": 31701641, "comment_id": 51345517, "body": "@ckruczek yeah.  It is a shock to see code with no single-letter &#39;i,j,k,&#39; var names:("}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438183087, "post_id": 31701641, "comment_id": 51347621, "body": "Lesson learned: Do not wildly cast around to just make warnings or errors go away."}], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 3818488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/07BFN.jpg?s=128&g=1", "display_name": "Abol_Fa", "link": "https://stackoverflow.com/users/3818488/abol-fa"}, "edited": false, "score": 0, "creation_date": 1438176559, "post_id": 31701674, "comment_id": 51342481, "body": "sorry forgot to paste the correct code. the program compiles fine."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438183196, "post_id": 31701674, "comment_id": 51347703, "body": "&quot;<i>Change your code to :</i>&quot; no, as this &quot;<i><code>(socklen_t*) sizeof(theirs))</code></i>&quot; is a killer."}], "tags": [], "owner": {"reputation": 41428, "user_id": 440564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3dbcb5159c02d59f52159faa8437c97?s=128&d=identicon&r=PG", "display_name": "blue112", "link": "https://stackoverflow.com/users/440564/blue112"}, "is_accepted": false, "score": 0, "last_activity_date": 1438176075, "creation_date": 1438176075, "answer_id": 31701674, "question_id": 31701641, "link": "https://stackoverflow.com/questions/31701641/sending-data-after-an-accept/31701674#31701674", "title": "sending data after an accept()", "body": "<p>You never assign <code>newsockd</code> to the result of <code>accept</code>.</p>\n\n<p><code>accept</code> returns a new file descriptor related to the client socket.</p>\n\n<p>Change your code to :</p>\n\n<pre><code>newsockd = accept(sockd, (struct sockaddr*)&amp;theirs,(socklen_t*) sizeof(theirs));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": true, "score": 1, "last_activity_date": 1438179723, "creation_date": 1438179723, "answer_id": 31703255, "question_id": 31701641, "link": "https://stackoverflow.com/questions/31701641/sending-data-after-an-accept/31703255#31703255", "title": "sending data after an accept()", "body": "<p>'(socklen_t*) sizeof(theirs)' - no, bad cast. sizeof(theirs) is, like 20-ish, and dereferencing address 20-ish is illegal on most systems.</p>\n\n<p>Try:</p>\n\n<pre><code>socklen_t sLen=sizeof(theirs);\n..\nnewsockd=accept(sockd, (struct sockaddr*)&amp;theirs,&amp;sLen);\n</code></pre>\n\n<p>Note:  you may need sLen after the call to, say, shove a null in at the end of the returned peer address, (not sure if one gets put in by the accept call).</p>\n"}], "owner": {"reputation": 80, "user_id": 3818488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/07BFN.jpg?s=128&g=1", "display_name": "Abol_Fa", "link": "https://stackoverflow.com/users/3818488/abol-fa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 31703255, "answer_count": 2, "score": -1, "last_activity_date": 1438179723, "creation_date": 1438175982, "last_edit_date": 1438178307, "question_id": 31701641, "link": "https://stackoverflow.com/questions/31701641/sending-data-after-an-accept", "title": "sending data after an accept()", "body": "<p>i have written a small server that accept connections in c.it simply accepts a connection and is supposed to send data when the connection is accepted.but it doesn't!<br>\nit accepts the connection but never sends any data(lines after the accept() call never execute).</p>\n\n<pre><code>//Server!\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;WinSock2.h&gt;\n#include &lt;WS2tcpip.h&gt;\n#pragma comment(lib,\"WS2_32.lib\")\nusing namespace::std;\nint main(int argc, char **argv){\n    int sockd,newsockd,status=0;\n    WSADATA ws;\n    WSAStartup(MAKEWORD(2, 2),&amp;ws);\n    struct addrinfo hints, *res;\n    ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n    cout&lt;&lt;getaddrinfo(\"127.0.0.1\", \"6164\", &amp;hints, &amp;res)&lt;&lt;endl;\n    sockd = socket(res-&gt;ai_family, res-&gt;ai_socktype, res-&gt;ai_protocol);\n    cout&lt;&lt;\"SOCKET NUMBER=\"&lt;&lt;sockd&lt;&lt;endl;\n    cout &lt;&lt; \"BIND STATUS=\" &lt;&lt; bind(sockd,res-&gt;ai_addr, res-&gt;ai_addrlen)&lt;&lt;endl;\n    status = listen(sockd, 16);\n    if (status &gt;= 0){\n        cout &lt;&lt; \"Now Listening On Port 6164 TCP!\"&lt;&lt;endl;\n    }\n    else{\n        return WSAGetLastError();\n    }\n    struct sockaddr_storage theirs;\n    newsockd=accept(sockd, (struct sockaddr*)&amp;theirs,(socklen_t*) sizeof(theirs));\n    send(newsockd, \"Hello!\", 18, 0);\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438176385, "post_id": 31701603, "comment_id": 51342343, "body": "What exactly is <code>array[i] = array[i] * 2;</code> trying to accomplish?"}, {"owner": {"reputation": 21, "user_id": 3540166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24761ccc164f28a8feaa1ccf9e31e89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas5", "link": "https://stackoverflow.com/users/3540166/thomas5"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438176445, "post_id": 31701603, "comment_id": 51342398, "body": "array[i] *2 to double the array"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1438176518, "post_id": 31701603, "comment_id": 51342445, "body": "@dbush ...missing <code>atoi()</code> I believe...."}, {"owner": {"reputation": 393, "user_id": 1015192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vR9UX.jpg?s=128&g=1", "display_name": "pedwards", "link": "https://stackoverflow.com/users/1015192/pedwards"}, "edited": false, "score": 0, "creation_date": 1438176597, "post_id": 31701603, "comment_id": 51342506, "body": "Same comment as dbush...  what are you trying to accomplish.  If it is to multiply each number found between the <code>:</code> delimiter, then you should be converting the string you have identified with <code>strtok</code> to <code>int</code> then saving in your array.  <code>array[i++] = atoi(p);</code>"}, {"owner": {"reputation": 21, "user_id": 3540166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24761ccc164f28a8feaa1ccf9e31e89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas5", "link": "https://stackoverflow.com/users/3540166/thomas5"}, "edited": false, "score": 0, "creation_date": 1438176957, "post_id": 31701603, "comment_id": 51342773, "body": "ty this was the right answer"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3540166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24761ccc164f28a8feaa1ccf9e31e89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas5", "link": "https://stackoverflow.com/users/3540166/thomas5"}, "edited": false, "score": 0, "creation_date": 1438176110, "post_id": 31701630, "comment_id": 51342135, "body": "changed it to char and getting this error split.c: In function \u2018main\u2019: split.c:21:25: error: invalid operands to binary * (have \u2018char *\u2019 and \u2018int\u2019)      array[i] = array[i] * 2;"}, {"owner": {"reputation": 21, "user_id": 3540166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24761ccc164f28a8feaa1ccf9e31e89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas5", "link": "https://stackoverflow.com/users/3540166/thomas5"}, "edited": false, "score": 0, "creation_date": 1438176219, "post_id": 31701630, "comment_id": 51342221, "body": "split.c: In function \u2018main\u2019: split.c:16:16: warning: assignment makes integer from pointer without a cast      array[i++] = p;"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1438178568, "last_edit_date": 1438178568, "creation_date": 1438175966, "answer_id": 31701630, "question_id": 31701603, "link": "https://stackoverflow.com/questions/31701603/error-invalid-operands-to-binary/31701630#31701630", "title": "error: invalid operands to binary *", "body": "<p><em>Regarding the <code>error</code></em></p>\n\n<p>In your code, <code>array[i]</code> is of type <code>int *</code>, which cannot be used as the operand of multiply operator.</p>\n\n<p>To quote the standard, chapter \u00a76.5.5 , <em>Multiplicative operators</em></p>\n\n<blockquote>\n  <p>Each of the operands shall have <strong>arithmetic type.</strong></p>\n</blockquote>\n\n<p><sup>~~~~<em>see note</em>~~~~~</sup></p>\n\n<p><em>Regarding the <code>warning</code></em></p>\n\n<p>That said,</p>\n\n<pre><code> array[i++] = p;\n</code></pre>\n\n<p>looks very wrong. <code>array[n]</code> is of type <code>int *</code>, and <code>p</code> is of type <code>char *</code> and they are not compatible types. You may want to check your logic all over again.</p>\n\n<p><strong>Solution</strong></p>\n\n<p>It looks like, you want to perform arithmetic operation on the <em>numeric</em> value of the <em>string</em> content.  FYI, just casting the <code>char *</code> to <code>int *</code> does not make the content of the string to <em>appear</em> as <code>int</code>.</p>\n\n<p>For that, you need to convert the string to arithmatic type first, say <code>int</code> or <code>long</code>. <a href=\"http://linux.die.net/man/3/strtol\" rel=\"nofollow\"><code>strtol()</code></a> may be of your help.</p>\n\n<hr>\n\n<p>[NOTE]</p>\n\n<p><em>arithmetic type:</em></p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.2.5,</p>\n\n<blockquote>\n  <p>Integer and floating types are collectively called arithmetic types.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1438177448, "creation_date": 1438177448, "answer_id": 31702252, "question_id": 31701603, "link": "https://stackoverflow.com/questions/31701603/error-invalid-operands-to-binary/31702252#31702252", "title": "error: invalid operands to binary *", "body": "<p>A few errors here:</p>\n\n<p>You're defining your array as <code>int *array[3]</code> i.e. an array of <code>int *</code>, however what you probably want is <code>int array[3]</code>, i.e. an array of <code>int</code>.</p>\n\n<p>Next, as was mentioned elsewhere, <code>array[i++] = p</code> is invalid because you're trying to assign a <code>char *</code> to an <code>int *</code> (or an <code>int</code> if you first apply the first fix), which is invalid.  You want to convert the string to an integer using <code>atoi</code> as <code>array[i++] = atoi(p)</code>.</p>\n\n<p>Lastly, your commented out <code>printf</code> in the <code>for</code> loop should be using <code>%d</code> for the format specifier instead of <code>%s</code>, since the array contains <code>int</code>.  You probably also want to move it down one line, right after <code>array[i] = array[i] * 2</code>.</p>\n\n<p>With the above changes, you now have this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\nint main ()\n{\n  char buf[] =\"14:15:43\";\n  int i;\n  char *p;\n  int array[3];\n  i = 0;\n   p = strtok (buf,\":\");\n  while (p != NULL)\n  {\n   array[i++] = atoi(p);\n    p = strtok (NULL, \":\");\n  }\n  for (i=0;i&lt;3; ++i) {\n    array[i] = array[i] * 2;\n    printf(\"%d\\n\", array[i]);\n }\nreturn 0;\n}\n</code></pre>\n\n<p>Which outputs this:</p>\n\n<pre><code>28\n30\n86\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 4548383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981c3ef52cef1b7a7574a1209da356a8?s=128&d=identicon&r=PG", "display_name": "Alan Corey", "link": "https://stackoverflow.com/users/4548383/alan-corey"}, "is_accepted": false, "score": 0, "last_activity_date": 1534610031, "creation_date": 1534610031, "answer_id": 51910637, "question_id": 31701603, "link": "https://stackoverflow.com/questions/31701603/error-invalid-operands-to-binary/51910637#51910637", "title": "error: invalid operands to binary *", "body": "<p>It can also mean something completely different.  Think about the meaning of \"invalid operand\".  I was getting it on </p>\n\n<pre><code>fftout[lochead][i][0] * fftout[lochead][i][0]\n</code></pre>\n\n<p>When I forgot the [i] terms.  I have 10 buffers, each with 4096 elements, each of those with 2 elements.  I didn't have enough indexes.</p>\n\n<p>And yes, I'm just squaring the number.  It's part of a square root of sums of squares demodulation step.</p>\n"}], "owner": {"reputation": 21, "user_id": 3540166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24761ccc164f28a8feaa1ccf9e31e89?s=128&d=identicon&r=PG&f=1", "display_name": "thomas5", "link": "https://stackoverflow.com/users/3540166/thomas5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9327, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1534610031, "creation_date": 1438175904, "last_edit_date": 1438231253, "question_id": 31701603, "link": "https://stackoverflow.com/questions/31701603/error-invalid-operands-to-binary", "title": "error: invalid operands to binary *", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\nint main ()\n{\n  char buf[] =\"14:15:43\";\n  int i;\n  char *p;\n  int *array[3];\n  i = 0;\n   p = strtok (buf,\":\");  \n  while (p != NULL)\n  {\n   array[i++] = p;\n    p = strtok (NULL, \":\");\n  }\n  for (i=0;i&lt;3; ++i) {\n    //printf(\"%s\\n\", array[i]);\n    array[i] = array[i] * 2;\n } \nreturn 0;\n}\n</code></pre>\n\n<p>When I compile the above code I get this error:</p>\n\n<pre><code>split.c: In function \u2018main\u2019:\nsplit.c:16:16: warning: assignment from incompatible pointer type\n     array[i++] = p;\n                ^\nsplit.c:21:25: error: invalid operands to binary * (have \u2018int *\u2019 and \u2018int\u2019)\n     array[i] = array[i] * 2;\n                         ^\n</code></pre>\n"}, {"tags": ["c", "scanf", "eof"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438176196, "post_id": 31701540, "comment_id": 51342206, "body": "Check the return value of <code>scanf</code>. If it is <code>0</code>, break."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1438176223, "post_id": 31701540, "comment_id": 51342227, "body": "<code>EOF</code> is not the scanned value, but a possible return value of <code>scanf</code>: It returns the number of arguments successfully converted or <code>EOF</code> when the input stream runs out. Look at the &quot;Related&quot; answers to the right to learn how to control loops with <code>scanf</code>."}, {"owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "edited": false, "score": 0, "creation_date": 1438178569, "post_id": 31701540, "comment_id": 51344115, "body": "Are you using ctrl-z for EOF? Did you try ctrl-D? You can check this link <a href=\"http://stackoverflow.com/questions/17220158/exiting-a-while-loop-at-eof-using-scanf-in-c\" title=\"exiting a while loop at eof using scanf in c\">stackoverflow.com/questions/17220158/&hellip;</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1438218221, "post_id": 31701540, "comment_id": 51364868, "body": "@MOehm in general, <code>EOF</code> should not be tested against the return value of <code>scanf</code>, because the test will fail if reading failed due to a different error"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438232076, "post_id": 31701540, "comment_id": 51368275, "body": "double values must contain a &#39;.&#39; otherwise they must be converted.  Suggest when setting a double variable to some literal that the literal contain a &#39;.&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438232232, "post_id": 31701540, "comment_id": 51368325, "body": "when the code wants the user to input something, the code should always output a prompt to let the user know what to enter and perhaps the limits of the value.   Never trust the input from the user, always validate it, including checking the returned value from the scanf() function to assure the operation was successful"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1438233938, "post_id": 31701540, "comment_id": 51368885, "body": "@MattMcNabb: I don&#39;t say that you should test against <code>EOF</code>, do I? The OP checks for <code>EOF</code> in the scanned value, <code>c</code>, when you have to look for an <code>EOF</code> returned from <code>scanf</code>. How to handle the case of unsuccessful or partial scans is another question, though."}], "answers": [{"tags": [], "owner": {"reputation": 1656, "user_id": 4146943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54e34c794b157fdb8097d92c236aa8fb?s=128&d=identicon&r=PG", "display_name": "Habib Kazemi", "link": "https://stackoverflow.com/users/4146943/habib-kazemi"}, "is_accepted": false, "score": 1, "last_activity_date": 1438189244, "last_edit_date": 1438189244, "creation_date": 1438179765, "answer_id": 31703271, "question_id": 31701540, "link": "https://stackoverflow.com/questions/31701540/how-would-i-use-eof-to-end-input-in-the-following-code/31703271#31703271", "title": "How would I use EOF to end input in the following code?", "body": "<p>You can store the return value of scanf like this <code>check=scanf(\"%lf\", &amp;c);</code>\nAnd <code>while(check != EOF &amp;&amp; i &lt;= 5);</code>\nThe type of <code>check</code> variable must be int.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438193576, "post_id": 31704784, "comment_id": 51354332, "body": "Minor notes: With &quot;3. If read &#39;a&#39; and &#39;b&#39; failed, it will return 0.&quot;, <code>b</code> success/failure is irrelevant.  Last point is more like &quot;If read error or get the end of the file and scanning <code>a</code> was not successful, it will return EOF.&quot;"}, {"owner": {"reputation": 453, "user_id": 3981203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fzSg5.jpg?s=128&g=1", "display_name": "cwfighter", "link": "https://stackoverflow.com/users/3981203/cwfighter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1438217156, "post_id": 31704784, "comment_id": 51364631, "body": "@chux, maybe I did not say clearly. I will correct it. Thanks."}], "tags": [], "owner": {"reputation": 453, "user_id": 3981203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fzSg5.jpg?s=128&g=1", "display_name": "cwfighter", "link": "https://stackoverflow.com/users/3981203/cwfighter"}, "is_accepted": true, "score": 2, "last_activity_date": 1438217571, "last_edit_date": 1438217571, "creation_date": 1438183637, "answer_id": 31704784, "question_id": 31701540, "link": "https://stackoverflow.com/questions/31701540/how-would-i-use-eof-to-end-input-in-the-following-code/31704784#31704784", "title": "How would I use EOF to end input in the following code?", "body": "<p>You can check the function <code>scanf()</code>'s return value. For example:\n<code>scanf(\"%d %d\",&amp;a,&amp;b);</code> .</p>\n\n<ol>\n<li>If read <code>a</code> and <code>b</code> successfully, it will return <code>2</code>.</li>\n<li>If only read <code>a</code> successfully, it will return <code>1</code>.</li>\n<li>If read 'a' failed,now b is irrelative, for example: a not an <code>int</code>, it will return <code>0</code>.</li>\n<li>If get the end of the file while <code>scanf()</code>, it will return <code>EOF</code>.</li>\n</ol>\n\n<p>I hope this can help you.</p>\n"}], "owner": {"reputation": 229, "user_id": 2318390, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0812a2bfc16d04bce2313be46ec5b9f3?s=128&d=identicon&r=PG", "display_name": "James Pinson", "link": "https://stackoverflow.com/users/2318390/james-pinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 31704784, "answer_count": 2, "score": 1, "last_activity_date": 1438217571, "creation_date": 1438175753, "last_edit_date": 1438175829, "question_id": 31701540, "link": "https://stackoverflow.com/questions/31701540/how-would-i-use-eof-to-end-input-in-the-following-code", "title": "How would I use EOF to end input in the following code?", "body": "<p>I am currently working on a computer science project and I am stuck whilst trying to work on the final steps. It is very messy thus far, but the code basically takes the first two values given as x and y coordinates, and uses these to produce a total distance. It also then uses a third point to calculate the total uphill and downhill gradients. I have gotten these parts working correctly, however the assignment states: You should read data using scanf until EOF occurs, which can be detected by checking the return value of scanf.\nI am wondering how I would go about achieving this? At the moment I have the constraints of my do-while loop being that once it = EOF it will terminate, however this causes the code to terminate at any -1 present. \nHere is the code:</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    double a;\n    double total;\n    double up;\n    double b;\n    double c;\n    double d;\n    double down;\n    double zc;\n    double yes;\n    double m;\n    double n;\n    double m2;\n    double n2;\n    double o;\n    double p;\n    double q;\n    double xc;\n    double yc;\n    int i = 1;\n    xc = 1000;\n    yc = 1000;\n    total = 0;\n    down = 0;\n    scanf(\"%lf\", &amp;c);\n    do \n    {\n        if (i == 1) {\n            a = c;\n            scanf (\"%lf\", &amp;c);\n            i += 1;\n        }\n        else if (i == 2) {\n            b = c;\n            scanf (\"%lf\", &amp;c);\n            i += 1;\n        }\n\n        else if (i ==3) {\n            d = c;\n            if (xc == 1000 &amp;&amp; yc == 1000) {\n                i = 4;\n            }\n            else if (xc != 1000) {\n                i = 5;\n            }\n        }\n\n\n        else if (i == 4) {\n                if (d &gt; zc) {\n                    yes = d - zc;\n                    up = yes/p;\n                    if (up &gt; total) {\n                        total = up;\n                    }\n            }\n                if (d &lt; zc) {\n                    yes = d - zc;\n                    up = yes/p;\n                     if (up &lt; 0) {\n                        up = up *-1;\n                    }\n                    if (up &gt; down) {\n                        down = up;\n\n            }\n        }\n            xc = b;\n            yc = a;\n            zc = d;\n            scanf (\"%lf\", &amp;c);\n            i = 1;\n        }\n\n        else if (i == 5) {\n            m = (xc - b);\n            n = (yc - a);\n            m2 = m*m;\n            n2 = n*n;\n            o = m2 + n2;\n            p = sqrt(o);\n            q = q + p;\n            i = 4;\n        }\n    }\n\n    while (c != EOF &amp;&amp; i &lt;= 5);\n\n\n    printf (\"Total distance: %.1lf\\n\", q);\n    printf (\"Maximum uphill gradient: %.3lf\\n\", total);\n    printf (\"Maximum downhill gradient: %.3lf\\n\", down);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>And given the following input:</p>\n\n<pre><code>0.0 0.0 0.0\n0.0 3.0 1.0\n1.0 3.0 2.0\n1.0 5.0 -1.0\n4.0 5.0 -1.0\n</code></pre>\n\n<p>Should return:</p>\n\n<pre><code>Total distance: 9.0\nMaximum uphill gradient: 1.000\nMaximum downhill gradient: 1.500\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 6, "creation_date": 1438175168, "post_id": 31701244, "comment_id": 51341429, "body": "Offtopic suggestion: &quot;Let us C&quot; is a junk don&#39;t read it. Pick some good book on C. Also use <code>int main(void)</code> instead of <code>main()</code> and <code>return 0;</code>"}, {"owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438175218, "post_id": 31701244, "comment_id": 51341464, "body": "Why the downvote? Im asking a question... And dont just say &quot;use a new book&quot; , recommend one."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1438175248, "post_id": 31701244, "comment_id": 51341482, "body": "<code>i</code> and <code>j</code> are indeed different variables, so they have different addresses as you mention. What&#39;s the problem ?"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438175583, "post_id": 31701244, "comment_id": 51341734, "body": "@user700070 Offtopic again(Sorry): There are some (not all) good books @ <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/562303/&hellip;</a>"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438235562, "post_id": 31701244, "comment_id": 51369516, "body": "You may want to read <a href=\"http://c-faq.com/ptrs/index.html\" rel=\"nofollow noreferrer\">these</a> 17 questions and their answers. (Just click on question number to follow the answer link)"}], "answers": [{"comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1438175550, "post_id": 31701331, "comment_id": 51341703, "body": "Where do you see any absolute memory locations in the code?"}, {"owner": {"reputation": 41428, "user_id": 440564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3dbcb5159c02d59f52159faa8437c97?s=128&d=identicon&r=PG", "display_name": "blue112", "link": "https://stackoverflow.com/users/440564/blue112"}, "edited": false, "score": 0, "creation_date": 1438175765, "post_id": 31701331, "comment_id": 51341875, "body": "Oh, maybe I understood &quot;why does it output different values each time I start it ?&quot;. Nevermind then."}], "tags": [], "owner": {"reputation": 41428, "user_id": 440564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3dbcb5159c02d59f52159faa8437c97?s=128&d=identicon&r=PG", "display_name": "blue112", "link": "https://stackoverflow.com/users/440564/blue112"}, "is_accepted": false, "score": 0, "last_activity_date": 1438175236, "creation_date": 1438175236, "answer_id": 31701331, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario/31701331#31701331", "title": "Why does the address of a pointer var change in this scenario?", "body": "<p>When your program start, the OS kernel decides, based on many criteria, where to put your program and how to map it into memory.</p>\n\n<p>So, when you start it several time in a row, the memory location may or may not change.</p>\n\n<p>This is why you can't hard-code absolute memory location in your program, you always pick a start point how know (for instance, the first element of an array) and navigate in your memory from here.</p>\n"}, {"comments": [{"owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "edited": false, "score": 0, "creation_date": 1438175377, "post_id": 31701349, "comment_id": 51341581, "body": "Any recommendations on books/tutorials to better understand pointers ... super new to C"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1438175623, "last_edit_date": 1438175623, "creation_date": 1438175282, "answer_id": 31701349, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario/31701349#31701349", "title": "Why does the address of a pointer var change in this scenario?", "body": "<p><strong>Point 1:</strong> use <code>%p</code> to print the address. Also, cast the corresponding argument to <code>(void *)</code></p>\n\n<p><strong>Point 2:</strong> <code>*k</code> (type <code>int *</code>) and <code>&amp;j</code> (type <code>int **</code>) <strong>are</strong> two different things. Maybe you wanted to print either of</p>\n\n<ul>\n<li><code>k</code> and <code>&amp;j</code> (both <code>int **</code>)</li>\n<li><code>*k</code> and <code>j</code> (both <code>int *</code>)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 4, "last_activity_date": 1438248969, "last_edit_date": 1438248969, "creation_date": 1438175284, "answer_id": 31701350, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario/31701350#31701350", "title": "Why does the address of a pointer var change in this scenario?", "body": "<p>You are expecting <code>*k</code> (Same as address of <code>i</code>) and <code>&amp;j</code> (address of <code>j</code>) to be same. They are different type <code>int *</code> v/s <code>int **</code> and different values.</p>\n\n<p>Never use <code>%u</code> to print addresses rather use:</p>\n\n<pre><code>printf ( \"\\nAddress of i = %p\", (void *)*k ) ;\n</code></pre>\n\n<p>On the other hand, if you compare <code>&amp;j</code> and <code>k</code>, those should be same.</p>\n\n<p>For example:</p>\n\n<pre><code>printf ( \"%p v/s %p\\n\", (void *)&amp;j, (void *)k);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "is_accepted": false, "score": 2, "last_activity_date": 1438175297, "creation_date": 1438175297, "answer_id": 31701356, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario/31701356#31701356", "title": "Why does the address of a pointer var change in this scenario?", "body": "<p>Because you are printing the <strong>pointer to k</strong> in the first <code>printf</code> statement, not the actual value of <code>k</code>. <code>k</code> holds the value of <code>j</code>'s reference, so if you wanted the two statements to be equal, just print <code>k</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 26053, "user_id": 2082964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Iybex.jpg?s=128&g=1", "display_name": "Chris Maes", "link": "https://stackoverflow.com/users/2082964/chris-maes"}, "is_accepted": false, "score": 0, "last_activity_date": 1438175493, "creation_date": 1438175493, "answer_id": 31701435, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario/31701435#31701435", "title": "Why does the address of a pointer var change in this scenario?", "body": "<p>when your program starts, each variable gets a place in memory:</p>\n\n<pre><code>int i = 3, *j, **k ;\n</code></pre>\n\n<p>in your case, we know these adresses got decided:</p>\n\n<pre><code>address of (int i) = 65524\naddress of (int* j) = 65522\naddress of (int** k) = unknown\n</code></pre>\n\n<p>the operator <code>&amp;</code> gets the adress of the variable, so you get the output you observe.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1438178662, "creation_date": 1438178662, "answer_id": 31702819, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario/31702819#31702819", "title": "Why does the address of a pointer var change in this scenario?", "body": "<p>Given the code</p>\n\n<pre><code>int i = 3, *j, **k ;\nj = &amp;i ;\nk = &amp;j ;\n</code></pre>\n\n<p>then the following are true:</p>\n\n<pre><code>**k == *j ==  i == 3\n *k ==  j == &amp;i\n  k == &amp;j\n</code></pre>\n\n<p>That is, the expressions <code>**k</code>, <code>*j</code>, and <code>i</code> all have type <code>int</code> and evaluate to <code>3</code>, the expressions <code>*k</code>, <code>j</code>, and <code>&amp;i</code> all have type <code>int *</code> and evaluate to the address of <code>i</code>, and the expressions <code>k</code> and <code>&amp;j</code> have type <code>int **</code> and evaluate to the address of <code>j</code>.  </p>\n\n<p>So, </p>\n\n<pre><code>printf( \"value of i = %d\\n\", i );\nprintf( \"value of i (through j) = %d\\n\", *j );\nprintf( \"value of i (through k) = %d\\n\", **k );\n\nprintf( \"address of i = %p\\n\", (void *) &amp;i );\nprintf( \"address of i (through j) = %p\\n\", (void *)  j );\nprintf( \"address of i (through k) = %p\\n\", (void *) *k );\n\nprintf( \"address of j = %p\\n\", (void *) &amp;j );\nprintf( \"address of j (through k) = %p\\n\", k );\n\nprintf( \"address of k = %p\\n\", (void *) &amp;k );\n</code></pre>\n\n<p>Use the <code>%p</code> conversion specifier to print pointer values.  It expects a <code>void *</code> as its corresponding argument, and this is one of the few places (probably the only place) in C where you need to explicitly cast a pointer value to <code>void *</code>.  </p>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "is_accepted": false, "score": 1, "last_activity_date": 1438190904, "creation_date": 1438190904, "answer_id": 31707247, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario/31707247#31707247", "title": "Why does the address of a pointer var change in this scenario?", "body": "<pre><code>printf ( \"\\nAddress of i = %u\", *k );   \n</code></pre>\n\n<p>Here *k prints the value stored at j not the address of j.</p>\n\n<p>To get the address of j, you need to print k without de-referencing it. </p>\n\n<p>Assume that your variables are stored in following location.\nNote:  Addresses are just an assumption.\n<a href=\"https://i.stack.imgur.com/OrsTa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OrsTa.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now *k means de-reference the value stored at k (ie) value stored at memory location 200.</p>\n\n<p>Value stored at 200 is 100 which is the address of i,not the address of j.</p>\n"}], "owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 7, "score": -2, "last_activity_date": 1438248969, "creation_date": 1438175024, "last_edit_date": 1438175467, "question_id": 31701244, "link": "https://stackoverflow.com/questions/31701244/why-does-the-address-of-a-pointer-var-change-in-this-scenario", "title": "Why does the address of a pointer var change in this scenario?", "body": "<p>So, I'm following \"Let Us C\" book, and they have an example for pointers, can you explain why the value of <code>i</code> and <code>j</code> change values in this scenario?:</p>\n\n<pre><code>main( )\n{\n\n    int i = 3, *j, **k ;\n    j = &amp;i ;\n    k = &amp;j ;\n\n    printf ( \"\\nAddress of i = %u\", *k ) ;\n    printf ( \"\\nAddress of j = %u\", &amp;j ) ;\n\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<blockquote>\n  <p>Address of i = 65524<BR> Address of j = 65522</p>\n</blockquote>\n\n<p>I understand in <code>C</code> that new variable declarations for example <code>int i =3; int k=5</code> are assigned different memory locations by C, just cant seem to wrap my head around why this is outputting different values?</p>\n"}, {"tags": ["c", "singly-linked-list"], "comments": [{"owner": {"reputation": 351, "user_id": 4700271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rDVfg.jpg?s=128&g=1", "display_name": "Rachit Ahuja", "link": "https://stackoverflow.com/users/4700271/rachit-ahuja"}, "edited": false, "score": 1, "creation_date": 1438175601, "post_id": 31701241, "comment_id": 51341748, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/18083593/pointer-to-pointers-for-singly-linked-list-in-c\">pointer to pointers for singly linked list in C</a>"}, {"owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438175661, "post_id": 31701241, "comment_id": 51341792, "body": "For now, just an integer."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438175747, "post_id": 31701241, "comment_id": 51341866, "body": "When you call <code>insert_node(head, last, input)</code>, you expect <code>last</code> to be modified, but it isn&#39;t."}, {"owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "reply_to_user": {"reputation": 351, "user_id": 4700271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rDVfg.jpg?s=128&g=1", "display_name": "Rachit Ahuja", "link": "https://stackoverflow.com/users/4700271/rachit-ahuja"}, "edited": false, "score": 0, "creation_date": 1438175813, "post_id": 31701241, "comment_id": 51341907, "body": "@RachitAhuja pointer to pointer? Maybe its because of my function returning a pointer? I have tried another way with just void. Still did not work for me."}, {"owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438176538, "post_id": 31701241, "comment_id": 51342465, "body": "The reason why I say it is maybe a compiler error because I have used this code many times using Turbo C only. But now, I am using devC++."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438178228, "post_id": 31701241, "comment_id": 51343811, "body": "When a sub function is to change the contents of a pointer, where that pointer is a passed in parameter, then the function needs to be called with function( &amp; pointer )   and the prototype needs to be function( type  ** pointer ).  in this case, both &#39;head&#39; and &#39;last&#39; need to be &#39; ** &#39;  remembering that C passes by value, so the code is only changing the &#39;copy&#39; of the original pointer,  By passing &#39;pointer to pointer&#39; the code in the function can de-reference the pointer to change the actual pointer in the callers&#39; code"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438176521, "post_id": 31701567, "comment_id": 51342449, "body": "I will try. The reason why I say it is maybe a compiler error because I have used this code many times using Turbo C only. But now, I am using devC++."}], "tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1438175804, "creation_date": 1438175804, "answer_id": 31701567, "question_id": 31701241, "link": "https://stackoverflow.com/questions/31701241/singly-linked-list-in-cinserting-a-node/31701567#31701567", "title": "Singly linked list in C(Inserting a node)", "body": "<p>In your code, after the first entry head pointer will point to new value. Because of you are assigning the return value of that calling function. But last value will not be affect. Because of your are calling that as a pass by value. At\nnext time head == last will be fail. </p>\n\n<p>It will go to else block, and you are accessing the </p>\n\n<pre><code> last-&gt;next=temp;\n</code></pre>\n\n<p>It is like accessing the <code>null</code> pointer this is the reason. If you need to avoid this you need to call last as pass by reference. </p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438176406, "post_id": 31701692, "comment_id": 51342363, "body": "At the first input, the window will popup. &quot;.exe stopped working&quot;"}, {"owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438176551, "post_id": 31701692, "comment_id": 51342477, "body": "The reason why I say it is maybe a compiler error because I have used this code many times using Turbo C only. But now, I am using devC++."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438176649, "post_id": 31701692, "comment_id": 51342535, "body": "It works fine here. I&#39;m sure it&#39;s not a compiler error. Even Turbo C should compile simple code like this correctly. If forgot to mention how you have to call the function, I just edited my answer."}, {"owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438176896, "post_id": 31701692, "comment_id": 51342724, "body": "It works. Now I dont understand, I used the wrong code many times on my projects. It works perfectly."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "edited": false, "score": 0, "creation_date": 1438176959, "post_id": 31701692, "comment_id": 51342775, "body": "You probably got struck by <i>undefined behaviour</i>. Feel free to accept the answer."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 2, "last_activity_date": 1438176664, "last_edit_date": 1438176664, "creation_date": 1438176114, "answer_id": 31701692, "question_id": 31701241, "link": "https://stackoverflow.com/questions/31701241/singly-linked-list-in-cinserting-a-node/31701692#31701692", "title": "Singly linked list in C(Inserting a node)", "body": "<p>You need this:</p>\n\n<pre><code>node *insert_node(node *head, node **last, node x)\n{\n    node *temp;\n\n    temp=create_node(x);\n\n    if(head==NULL &amp;&amp; head== *last)\n    {\n        head=temp;\n        *last=temp;\n        head-&gt;next=NULL;\n        (*last)-&gt;next=NULL;\n    }\n    else\n    {\n        (*last)-&gt;next=temp;\n        (*last)=temp;\n        (*last)-&gt;next=NULL;\n\n    }\n\n    return head;\n}\n</code></pre>\n\n<p>Call like this:</p>\n\n<pre><code>head=insert_node(head, &amp;last, input);\n</code></pre>\n\n<p>Your function needs to modify the <code>last</code> pointer. In C values including pointers are passed by value. So if you modify the function argument inside the function, the argument passed to the function won't be modified. That is what happens in your program.</p>\n\n<p>In the modified we don't pas simpty the <code>last</code>pointer but we pass a pointer to the <code>last</code> pointer which will allow us to modify the <code>last</code> pointer of the <code>main</code> function.</p>\n\n<p>Simple Example:</p>\n\n<pre><code>int func1(int x)\n{\n  x = 10;\n  return 2;\n}\n\nint func2(int *x)\n{\n  *x = 10;\n  return 2;\n}\n\n...\nint x = 3;\nprintf (\"%d\\n\", func1(x));\nprintf (\"%d\\n\", x);\nprintf (\"%d\\n\", func2(&amp;x));\nprintf (\"%d\\n\", x);\n</code></pre>\n\n<p>Will print:</p>\n\n<pre><code>2\n3\n2\n10\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5169444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1afe624650a03d243b76b28b243f073c?s=128&d=identicon&r=PG&f=1", "display_name": "guwop69", "link": "https://stackoverflow.com/users/5169444/guwop69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 31701692, "answer_count": 2, "score": 2, "last_activity_date": 1438176664, "creation_date": 1438175021, "question_id": 31701241, "link": "https://stackoverflow.com/questions/31701241/singly-linked-list-in-cinserting-a-node", "title": "Singly linked list in C(Inserting a node)", "body": "<p>I have this problem when I input. The program will freeze and a pop out window will open and says \" .exe has stopped working. \"</p>\n\n<p>It is just a simple insert and display fuction of a singly linked list. I tried everything. I rewrote the code and find another way of inserting. I tried different compiler.. It works on turbo C but I am using devC++.</p>\n\n<ul>\n<li>Is this a compiler error?</li>\n</ul>\n\n<p>Here is the code: </p>\n\n<pre><code>#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;windows.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct process\n{\n    int pNum;\n    struct process *next;\n}node;\n\n\nnode *create_node(node x)\n{\n    node *temp;\n    temp=(node *)malloc(sizeof(node));\n\n    if(temp==NULL)\n    {\n        return 0;\n    }\n    else\n    {\n\n        temp-&gt;pNum=x.pNum;\n        temp-&gt;next=NULL;\n\n\n    }\n    return temp;\n}\n\n\nnode *insert_node(node *head,node *last,node x)\n{\n    node *temp;\n\n    temp=create_node(x);\n\n    if(head==NULL &amp;&amp; head==last)\n    {\n        head=temp;\n        last=temp;\n        head-&gt;next=NULL;\n        last-&gt;next=NULL;\n    }\n    else\n    {\n        last-&gt;next=temp;\n        last=temp;\n        last-&gt;next=NULL;\n\n    }\n\n    return head;\n}\n\nint main()\n{\n    node *head=NULL,*last=NULL,*temp,input;\n    int i,x,y,num;\n\n    printf(\"INPUT NUMBER: \");\n    scanf(\"%d\",&amp;num);\n\n\n    x=0;\n    y=6;\n\n    for(i=0;i&lt;num;i++)\n    {\n\n        gotoxy(39,y);\n        scanf(\"%d\",&amp;input.pNum);\n\n        head=insert_node(head, last, input);\n\n        y++;\n    }\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>I think I have found out what line it stopped working. \nOn the function <code>insert_node</code></p>\n\n<p>The line  <code>last-&gt;next=temp;</code></p>\n\n<p>It seems I can't find what I had done wrong.</p>\n"}, {"tags": ["c", "sonarqube"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1438177794, "post_id": 31701139, "comment_id": 51343445, "body": "Please post your code, please post the error message.  Please post &#39;what is &#39;Sonar&#39; in the context you are using it.  Please post &#39;what is Cppcheck&#39; in the context you are using it."}], "answers": [{"tags": [], "owner": {"reputation": 20794, "user_id": 2662707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ruzzB.jpg?s=128&g=1", "display_name": "G. Ann - SonarSource Team", "link": "https://stackoverflow.com/users/2662707/g-ann-sonarsource-team"}, "is_accepted": true, "score": 0, "last_activity_date": 1438349521, "creation_date": 1438349521, "answer_id": 31747458, "question_id": 31701139, "link": "https://stackoverflow.com/questions/31701139/sonar-runner-not-able-to-run-cppcheck/31747458#31747458", "title": "Sonar runner not able to run cppcheck", "body": "<p>The log error indicates that the analysis can't find your pre-generated CPPCheck report. I.e. the SonarQube analysis doesn't <em>run</em> CPPCheck, it simply imports the results.</p>\n\n<p><a href=\"http://docs.sonarqube.org/display/PLUG/CppCheck+Reports+Import\" rel=\"nofollow\">See the docs</a> for details on importing a CPPCheck report.</p>\n"}], "owner": {"reputation": 237, "user_id": 5053465, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6249c7b05454038b62c6292fd5fe5286?s=128&d=identicon&r=PG&f=1", "display_name": "Ganapathy", "link": "https://stackoverflow.com/users/5053465/ganapathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 31747458, "answer_count": 1, "score": 0, "last_activity_date": 1438507804, "creation_date": 1438174797, "question_id": 31701139, "link": "https://stackoverflow.com/questions/31701139/sonar-runner-not-able-to-run-cppcheck", "title": "Sonar runner not able to run cppcheck", "body": "<p>I have a c project and a c plugin of sonar. Sonar was not able to run the cppcheck automatically and give the results.\nIs there a way that sonar can run the cppcheck which is installed locallay ?\nAlways i see in the sonar log\n12:56:15.608 INFO  - Sensor Cppcheck...\nafter this it complains cppcheckreport is not available and giving error.</p>\n"}, {"tags": ["c", "arrays", "struct", "go"], "comments": [{"owner": {"reputation": 11881, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "edited": false, "score": 4, "creation_date": 1438174643, "post_id": 31700897, "comment_id": 51341117, "body": "Please be more specific in your questions. Good question should include problem statement and demonstrate your effort in solving it."}, {"owner": {"reputation": 10358, "user_id": 1211175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/il5eC.jpg?s=128&g=1", "display_name": "Endre Simo", "link": "https://stackoverflow.com/users/1211175/endre-simo"}, "edited": false, "score": 0, "creation_date": 1438174900, "post_id": 31700897, "comment_id": 51341254, "body": "What do you need exactly?"}, {"owner": {"reputation": 608, "user_id": 4050822, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UiYwh.jpg?s=128&g=1", "display_name": "Shivendra Mishra", "link": "https://stackoverflow.com/users/4050822/shivendra-mishra"}, "edited": false, "score": 0, "creation_date": 1438342256, "post_id": 31700897, "comment_id": 51423582, "body": "@ I m trying to parse command line arguments using cli library. And need to pass list options and their help to App.name/usage in a loop. By the way, as part of my effort: var login = []struct {           long_opt  string           help_data string   }{           {&quot;username, u&quot;, &quot;Requires name of the user&quot;},           {&quot;password, p&quot;, &quot;Requires password&quot;},           {&quot;Server, s&quot;, &quot;Server Name&quot;},  } But it is difficult this way. So posted a question here. I don&#39;t find any example like this on the google though."}], "answers": [{"tags": [], "owner": {"reputation": 11881, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "is_accepted": false, "score": 1, "last_activity_date": 1438174493, "creation_date": 1438174493, "answer_id": 31701015, "question_id": 31700897, "link": "https://stackoverflow.com/questions/31700897/array-of-structure-equivalent-in-golang/31701015#31701015", "title": "Array of structure equivalent in golang", "body": "<pre><code>// define structure type\ntype my_struct struct {\n  a int\n  b rune\n}\n\n// declare slice of my_struct\nvar a []my_struct\n\n// declare and initialise struct with one element \nb := make([]my_struct, 1)\n\n// create structure and save it\nb[0] = my_struct{1, 'a'}\n\n// append a new one\nb = append(b, my_struct{2, 'b'})\n</code></pre>\n\n<p>You definitely have to read <a href=\"https://golang.org/doc/effective_go.html\" rel=\"nofollow\">https://golang.org/doc/effective_go.html</a>, especially about structs and slices if you want to know more about them.</p>\n"}, {"tags": [], "owner": {"reputation": 1667, "user_id": 359660, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/73a63c1f44ef127e609753975421ef7f?s=128&d=identicon&r=PG", "display_name": "LanceH", "link": "https://stackoverflow.com/users/359660/lanceh"}, "is_accepted": true, "score": 1, "last_activity_date": 1438174918, "creation_date": 1438174918, "answer_id": 31701197, "question_id": 31700897, "link": "https://stackoverflow.com/questions/31700897/array-of-structure-equivalent-in-golang/31701197#31701197", "title": "Array of structure equivalent in golang", "body": "<p>You can find some basic info on arrays: <a href=\"http://golang.org/doc/effective_go.html#arrays\" rel=\"nofollow\">http://golang.org/doc/effective_go.html#arrays</a></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nvar s [10]MyStruct //initializes to 0\n\nfunc main() {\n    for k, v := range s {\n        fmt.Println(k, v.a)\n    }\n}\n\ntype MyStruct struct {\n    a int64\n}\n</code></pre>\n"}], "owner": {"reputation": 608, "user_id": 4050822, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UiYwh.jpg?s=128&g=1", "display_name": "Shivendra Mishra", "link": "https://stackoverflow.com/users/4050822/shivendra-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 31701197, "answer_count": 2, "score": -1, "last_activity_date": 1438174918, "creation_date": 1438174179, "last_edit_date": 1438174703, "question_id": 31700897, "link": "https://stackoverflow.com/questions/31700897/array-of-structure-equivalent-in-golang", "title": "Array of structure equivalent in golang", "body": "<p>I am looking for something equivalent to array of structures. Or something equivalent to the following code in golang:</p>\n\n<pre><code>struct my_struct {\n     int a;\n     char b;\n}ins[10],*p[10];\n</code></pre>\n\n<p>Any example, how can I feed/assign values to these in golang?</p>\n"}, {"tags": ["c", "embedded", "texas-instruments"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438176249, "post_id": 31700726, "comment_id": 51342250, "body": "You do know that modbus is a serial communication protocol.  Where the external device contains all the registers. Where communication is via messages.  Where each message contains 1) device address 2) function 3) some multiple of 8bit data bytes 4) a checksum.   Therefore, regarding the TMS320 family of DSPs, All the DSP contains is the serial port (UART) and the slave device contains all the MODBUS registers.  So the DSP can try to write to registers, but the value read from the registers depends only on the external device"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438176314, "post_id": 31700726, "comment_id": 51342299, "body": "please post which MODBUS device and perhaps a link to the register map for that device."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438176967, "post_id": 31700726, "comment_id": 51342784, "body": "the &#39;useful&#39; registers in a MODBUS device are usually in the 40000 through 50000 address range,  not at the 126 address."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438180672, "post_id": 31700726, "comment_id": 51345764, "body": "&quot; I don&#39;t know really much about the internal functioning of the DSPs&quot; is a very bad start for programming a/the DSP! In fact you will definitively not accomplish anythisng useful without getting comfortable with it. Best is to start with the reference manual/users guide (or what else it is called), then possibly app-notes. The datasheet might also become handy. You also should understand ModBus, of course."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1438188569, "post_id": 31700726, "comment_id": 51351326, "body": "Bear in mind too that processor registers might be write-only, or have a different function on read."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1438193629, "post_id": 31700726, "comment_id": 51354363, "body": "From TMS32010 to TMS320C6600, TMS320 is a amazingly HUGE family of distinct configurations."}], "owner": {"reputation": 1, "user_id": 5169348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e9bbee967a92c7d1dd283af05b338ed?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas Mu&#241;oz Zuara", "link": "https://stackoverflow.com/users/5169348/andreas-mu%c3%b1oz-zuara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438178590, "creation_date": 1438173777, "last_edit_date": 1438178590, "question_id": 31700726, "link": "https://stackoverflow.com/questions/31700726/dsp-tms320-change-in-register", "title": "DSP TMS320 change in register", "body": "<p>I'm trying to program a DSP from Texas, the TMS320 family, using CCStudio 3.3. I'm trying to communicate with Modbus protocol with oher device, but one of the memory registers is changing value all the time.</p>\n\n<p>This is were I initilize the register:</p>\n\n<pre><code>conf.Input_Regs.Num_Input_Regs=i;       ///(126)\n</code></pre>\n\n<p>In this case, <code>i=126</code>, the number of register in the modbus map. </p>\n\n<p>The initialization goes well, but when I visualize the value of this register in real time, this value is always changing, even sometimes takes negatives values, but the variable is <code>Uint16</code>.</p>\n\n<p>I never assign a different value to this variable in the code and I don't know what could happen, if this is an internal problem of the DSP or if it's something in my code, I don't know really much about the internal functioning of the DSPs.</p>\n\n<p>If somebody have any idea that I can try, I will be very grateful.</p>\n"}, {"tags": ["java", "c", "java-native-interface", "jnienv"], "comments": [{"owner": {"reputation": 368, "user_id": 2670066, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2a74bd33ab91f3acdb22eb886ec194ec?s=128&d=identicon&r=PG", "display_name": "Amareesh", "link": "https://stackoverflow.com/users/2670066/amareesh"}, "edited": false, "score": 1, "creation_date": 1438174089, "post_id": 31700603, "comment_id": 51340708, "body": "Please post the java program in which you are facing this issue and also let us know what exactly you are trying, so that we can try to help."}, {"owner": {"reputation": 35, "user_id": 3370776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1aa18ef74e1a4c6bacd05075f24c5b?s=128&d=identicon&r=PG", "display_name": "ARAVINTHKUMAR J", "link": "https://stackoverflow.com/users/3370776/aravinthkumar-j"}, "reply_to_user": {"reputation": 368, "user_id": 2670066, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2a74bd33ab91f3acdb22eb886ec194ec?s=128&d=identicon&r=PG", "display_name": "Amareesh", "link": "https://stackoverflow.com/users/2670066/amareesh"}, "edited": false, "score": 0, "creation_date": 1438178595, "post_id": 31700603, "comment_id": 51344136, "body": "public class HelloJNI {    static {       System.loadLibrary(&quot;hello&quot;); // Load native library at runtime                                    // hello.dll (Windows) or libhello.so (Unixes)    }     // Declare a native method sayHello() that receives nothing and returns void    private native void sayHello();     // Test Driver    public static void main(String[] args) {       new HelloJNI().sayHello();  // invoke the native method    } }"}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1438196892, "post_id": 31700603, "comment_id": 51356289, "body": "I believe that you can edit your original post to include the code. It would be easier to read."}, {"owner": {"reputation": 472, "user_id": 717139, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/46e773ce6ba6422c470ea5807dd81b4f?s=128&d=identicon&r=PG", "display_name": "Alain", "link": "https://stackoverflow.com/users/717139/alain"}, "edited": false, "score": 0, "creation_date": 1438197193, "post_id": 31700603, "comment_id": 51356476, "body": "Also, can you say which OS this is running on, and how you execute the program."}, {"owner": {"reputation": 35, "user_id": 3370776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1aa18ef74e1a4c6bacd05075f24c5b?s=128&d=identicon&r=PG", "display_name": "ARAVINTHKUMAR J", "link": "https://stackoverflow.com/users/3370776/aravinthkumar-j"}, "edited": false, "score": 0, "creation_date": 1438939705, "post_id": 31700603, "comment_id": 51666443, "body": "i am using Ubuntu OS"}], "owner": {"reputation": 35, "user_id": 3370776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1aa18ef74e1a4c6bacd05075f24c5b?s=128&d=identicon&r=PG", "display_name": "ARAVINTHKUMAR J", "link": "https://stackoverflow.com/users/3370776/aravinthkumar-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438174626, "creation_date": 1438173432, "last_edit_date": 1438174626, "question_id": 31700603, "link": "https://stackoverflow.com/questions/31700603/unsatisfiedlinkerror-with-jni-program", "title": "UnsatisfiedLinkError with JNI program", "body": "<p>I work with JNI, i followed all those thing from <a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-2.1\" rel=\"nofollow\">https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html#zz-2.1</a></p>\n\n<p>I run the java program,it is showing </p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no hello in java.library.path\nat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1886)\nat java.lang.Runtime.loadLibrary0(Runtime.java:849)\nat java.lang.System.loadLibrary(System.java:1088)\nat HelloJNI.&lt;clinit&gt;(HelloJNI.java:3)\n</code></pre>\n\n<p>I don't know how to solve this?</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1438173497, "post_id": 31700018, "comment_id": 51340283, "body": "That error code tells you that somebody else is already reading from the pipe.  There can be only one reader, having more than one would just create chaos when each reader gets a random bit of the data.  Nothing in your snippet makes it obvious what other code might be reading.  But clearly it is buggy code."}, {"owner": {"reputation": 51, "user_id": 5169279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe9a6d9c5186b3dc4f9a13cf59f4b75?s=128&d=identicon&r=PG&f=1", "display_name": "negipezu", "link": "https://stackoverflow.com/users/5169279/negipezu"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1438174479, "post_id": 31700018, "comment_id": 51341013, "body": "Who is that somebody else?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5169279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe9a6d9c5186b3dc4f9a13cf59f4b75?s=128&d=identicon&r=PG&f=1", "display_name": "negipezu", "link": "https://stackoverflow.com/users/5169279/negipezu"}, "edited": false, "score": 0, "creation_date": 1438174656, "post_id": 31700545, "comment_id": 51341123, "body": "So is reading and writing a given named pipe from the same thread forbidden? Could you point me to a place where this is explicitly stated?"}, {"owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "reply_to_user": {"reputation": 51, "user_id": 5169279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe9a6d9c5186b3dc4f9a13cf59f4b75?s=128&d=identicon&r=PG&f=1", "display_name": "negipezu", "link": "https://stackoverflow.com/users/5169279/negipezu"}, "edited": false, "score": 0, "creation_date": 1438174885, "post_id": 31700545, "comment_id": 51341242, "body": "No it is not forbidden. But if you write some data using your <code>hFile</code> pipe handle, you must read it using <code>hPipe</code>. In your example you close connection after writing data so it is lost."}, {"owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "reply_to_user": {"reputation": 51, "user_id": 5169279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe9a6d9c5186b3dc4f9a13cf59f4b75?s=128&d=identicon&r=PG&f=1", "display_name": "negipezu", "link": "https://stackoverflow.com/users/5169279/negipezu"}, "edited": false, "score": 1, "creation_date": 1438175013, "post_id": 31700545, "comment_id": 51341324, "body": "Also it is worth pointing out that named pipes are mechanism for the interprocess communication. Using them in the single thread is pointless."}, {"owner": {"reputation": 51, "user_id": 5169279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe9a6d9c5186b3dc4f9a13cf59f4b75?s=128&d=identicon&r=PG&f=1", "display_name": "negipezu", "link": "https://stackoverflow.com/users/5169279/negipezu"}, "edited": false, "score": 0, "creation_date": 1438175290, "post_id": 31700545, "comment_id": 51341519, "body": "@Ari0nnh. No, it&#39;s not lost after closing hFile. I did a PeekNamedPipe right after closing hFile, and the string was in there."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1438210754, "post_id": 31700545, "comment_id": 51363040, "body": "Closing the client end of a pipe doesn&#39;t discard the data, that only happens when the server end is closed or disconnected."}, {"owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "edited": false, "score": 0, "creation_date": 1438226380, "post_id": 31700545, "comment_id": 51366773, "body": "Yes of course, server still could get pipe data after client disconnects. What I mean, that other client, who somehow connects to this pipe could not retrieve this data, like in question&#39;s code fragment."}], "tags": [], "owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "is_accepted": false, "score": 1, "last_activity_date": 1438173261, "creation_date": 1438173261, "answer_id": 31700545, "question_id": 31700018, "link": "https://stackoverflow.com/questions/31700018/win32-api-named-pipe-all-pipe-instances-are-busy/31700545#31700545", "title": "Win32 API named pipe, All pipe instances are busy", "body": "<p>You are trying to use named pipe as some kind of buffer - client connects to it, puts some data, then disconnects, after that other client connects and retrieves this data. This is invalid approach, named pipe is just that - a <em>pipe</em>, it has two sides - <em>server side</em> and <em>client side</em>, server and client could communicate through it. Usual pipe usage scenario:</p>\n\n<ol>\n<li>Server creates named pipe using <code>CreateNamedPipe</code> function;</li>\n<li>Server begin waiting for the client connections using <code>ConnectNamedPipe</code> method;</li>\n<li>Client creates its side of the pipe using <code>CreateFile</code> API call;</li>\n<li>Server and client communicate using <code>ReadFile/WriteFile</code>;</li>\n<li>Pipe is closed with <code>DisconnectNamedPipe</code> and could be reactivated again with <code>ConnectNamedPipe</code>.</li>\n</ol>\n\n<p>You could see complete example in the MSDN <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365588%28v=vs.85%29.aspx\" rel=\"nofollow\">here</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1438179071, "last_edit_date": 1438179071, "creation_date": 1438176812, "answer_id": 31701979, "question_id": 31700018, "link": "https://stackoverflow.com/questions/31700018/win32-api-named-pipe-all-pipe-instances-are-busy/31701979#31701979", "title": "Win32 API named pipe, All pipe instances are busy", "body": "<p>It is because both extremities of the pipe have allready be opened (*)...</p>\n\n<p>First was opened with the CreatePipe call, the other was with the first CreateFile call. You should not try to open one time more the pipe, but simply read from the hPipe HANDLE :</p>\n\n<pre><code>const char * pipeName = \"\\\\\\\\.\\\\pipe\\\\pipe\";\nconst char * buffWrite = \"SOME TEXT\";\nunsigned buffLength = strlen(buffWrite);\nchar buffRead[1024];\nDWORD nWritten, nRead;\n\nHANDLE hPipe = CreateNamedPipe(pipeName,\nPIPE_ACCESS_DUPLEX, PIPE_TYPE_BYTE | PIPE_READMODE_BYTE | PIPE_WAIT, PIPE_UNLIMITED_INSTANCES, 1024, 1024, 0, 0);\n\nHANDLE hFile = CreateFile(pipeName, GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0);\nWriteFile(hFile, buffWrite, buffLength, &amp;nWritten, 0);\nCloseHandle(hFile);\n\nReadFile(hPipe, buffRead, buffLength, &amp;nRead, 0); // nRead=9, buffRead=\"SOME TEXT\"\n...\n</code></pre>\n\n<p>(*) You did specify <code>PIPE_UNLIMITED_INSTANCES</code> for the <code>nMaxInstances</code> parameter in <code>CreateNamedPipe</code> call, but as you never called <code>ConnectNamedPipe</code> to create other endpoints, only one <code>CreateFile</code> was allowed.</p>\n"}, {"tags": [], "owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "is_accepted": false, "score": 3, "last_activity_date": 1438210298, "creation_date": 1438210298, "answer_id": 31712497, "question_id": 31700018, "link": "https://stackoverflow.com/questions/31700018/win32-api-named-pipe-all-pipe-instances-are-busy/31712497#31712497", "title": "Win32 API named pipe, All pipe instances are busy", "body": "<p>The reason you're getting that specific error code is that you only created one instance of the named pipe, and you've already used it.  (You can create a new instance by calling <code>CreateNamedPipe</code> a second time, or you can reuse an existing instance by calling <code>DisconnectNamedPipe</code>.)</p>\n\n<p>However, based on your commentary, I believe you want the call to ReadFile to retrieve the data written by the call to WriteFile, i.e., you want the same instance of the pipe, not a new one.</p>\n\n<p>To do that, do not open a new handle.  Use the existing handle, <code>hPipe</code>.</p>\n\n<p>(Note that each pipe instance has two ends; a server end and a client end.  The handle from CreateNamedPipe is always to the server end, and the handle from CreateFile is always to the client end.  Data written to the server end can only be read from the client end, and vice-versa.)</p>\n"}], "owner": {"reputation": 51, "user_id": 5169279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe9a6d9c5186b3dc4f9a13cf59f4b75?s=128&d=identicon&r=PG&f=1", "display_name": "negipezu", "link": "https://stackoverflow.com/users/5169279/negipezu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10034, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1438210298, "creation_date": 1438171758, "last_edit_date": 1438174416, "question_id": 31700018, "link": "https://stackoverflow.com/questions/31700018/win32-api-named-pipe-all-pipe-instances-are-busy", "title": "Win32 API named pipe, All pipe instances are busy", "body": "<p>I'm trying to write in a named pipe and read back the same thing. Consider the following code snippet (the error handling is stripped for brevity):</p>\n\n<pre><code>const char * pipeName = \"\\\\\\\\.\\\\pipe\\\\pipe\";\nconst char * buffWrite = \"SOME TEXT\";\nunsigned buffLength = strlen(buffWrite);\nchar buffRead[1024];\nDWORD nWritten, nRead;\n\nHANDLE hPipe = CreateNamedPipe(pipeName,\nPIPE_ACCESS_DUPLEX, PIPE_TYPE_BYTE | PIPE_READMODE_BYTE | PIPE_WAIT, PIPE_UNLIMITED_INSTANCES, 1024, 1024, 0, 0);\n\nHANDLE hFile = CreateFile(pipeName, GENERIC_WRITE, 0, 0, OPEN_EXISTING, 0, 0);\nWriteFile(hFile, buffWrite, buffLength, &amp;nWritten, 0);\nCloseHandle(hFile);\n//the next line fails with &gt;&gt;All pipe instances are busy.&lt;&lt;\nhFile = CreateFile(pipeName, GENERIC_READ, 0, 0, OPEN_EXISTING, 0, 0);\nReadFile(hFile, buffRead, buffLength, &amp;nRead, 0);\n...\n</code></pre>\n\n<p>However when I try reopen the pipe for reading the CreateFile call fails with \"All pipes are busy.\" </p>\n\n<p>What am I missing here?</p>\n\n<p><strong>EDIT.</strong>\nPeeking works fine, i.e.</p>\n\n<pre><code>DWORD nRead, nTotal, nLeft;\nPeekNamedPipe(hPipe, buffRead, buffLength, &amp;nRead, &amp;nTotal, &amp;nLeft);\n</code></pre>\n\n<p>returns the written data correctly.</p>\n\n<p><strong>REMARK.</strong>\nThis is a proof of concept for something larger. No new threads and processes will be involved.</p>\n"}, {"tags": ["algorithm", "c", "queueing"], "answers": [{"comments": [{"owner": {"reputation": 711, "user_id": 1232726, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Bg5nq.jpg?s=128&g=1", "display_name": "filthy_wizard", "link": "https://stackoverflow.com/users/1232726/filthy-wizard"}, "edited": false, "score": 0, "creation_date": 1438425574, "post_id": 31727881, "comment_id": 51454465, "body": "thanks hhauer. yes. I was overthinking it for sure. your input has helped me thanks very much!"}], "tags": [], "owner": {"reputation": 61, "user_id": 4505429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3d70c8eec73105d868e657780dd0db?s=128&d=identicon&r=PG&f=1", "display_name": "hhauer", "link": "https://stackoverflow.com/users/4505429/hhauer"}, "is_accepted": true, "score": 1, "last_activity_date": 1438207782, "last_edit_date": 1495542109, "creation_date": 1438207782, "answer_id": 31727881, "question_id": 31727880, "link": "https://stackoverflow.com/questions/31727880/inserting-into-priority-queue-mit-c-programming-opencourseware/31727881#31727881", "title": "inserting into priority queue. MIT c programming opencourseware", "body": "<p>One of the common ways to implement a priority queue is as a heap, and a heap is commonly represented as a tree structure. However, it appears that the OpenCourseware Lab 2 Part B specifically refers to a linked-list implementation for this priority queue.</p>\n\n<p>It is therefore likely that you are correct in assuming that the \"left\" and \"right\" pointers won't be used. Additionally, the \"parent\" pointer likely won't be used because the comments refer to it as being for the tree-based implementation. A \"next\" pointer is sufficient for a simple linked list, as each node points to the next node starting from the \"head\" node or start of the list.</p>\n\n<p>What you're looking to do is called \"insert in sorted order\" and the general process is described here: <a href=\"https://stackoverflow.com/questions/27321156/inserting-element-into-a-sorted-list\">inserting element into a sorted list</a></p>\n\n<p>In general, \"curr\" will take the value of each node of the linked list as you iterate through it, and \"prev\" will take the value of the previous node (set this before you advance curr.) Setting curr to null at the start of pq_insert is fine because you'll want to start at the first element of the list when you go to insert a new element. You'll want to know what the previous node was in the case where you find that the current node belongs after the node you're trying to insert.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1438269848, "question_id": 291166}, "owner": {"reputation": 711, "user_id": 1232726, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Bg5nq.jpg?s=128&g=1", "display_name": "filthy_wizard", "link": "https://stackoverflow.com/users/1232726/filthy-wizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 31727881, "answer_count": 1, "score": 0, "last_activity_date": 1438269848, "creation_date": 1438171636, "question_id": 31727880, "link": "https://stackoverflow.com/questions/31727880/inserting-into-priority-queue-mit-c-programming-opencourseware", "title": "inserting into priority queue. MIT c programming opencourseware", "body": "<p>Iam currently trying an exercise from the \"practical programming in C\" from MIT opencourseware. the exercise is on huffman coding. it is lab2 part 2 where Iam having an Issue. Primarily the pq_insert() method. Iam getting pretty confused as to how the insertion of a node should be performed? I will post the whole .c file below. I think i need the sudo code for an insert operation.</p>\n\n<p>my node is basically a struct (shown below)</p>\n\n<pre><code>struct tnode\n{\nstruct  tnode* left; /*used when in tree*/\nstruct  tnode*right; /*used when in tree*/  \nstruct  tnode*parent;/*used when in tree*/\nstruct  tnode* next; /*used when in list*/ \nfloat   freq;\nint     isleaf;\nchar     symbol;\n};\n</code></pre>\n\n<p>Iam presuming the pointers \"left\" and \"right\" are not used in my PQ construction?   I just use \"parent\" and \"next\" pointers when creating PQ and if the current \"freq\" value is less than the next checked nodes \"freq\" value, I add this to the queue before next ?? I may be wrong here but this is one of the areas in which Iam confused??</p>\n\n<p>below is the full file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX_SYMBOLS 255\n#define MAX_LEN     7\n\nstruct tnode\n{\nstruct  tnode* left; /*used when in tree*/\nstruct  tnode*right; /*used when in tree*/  \nstruct  tnode*parent;/*used when in tree*/\nstruct  tnode* next; /*used when in list*/ \nfloat   freq;\nint     isleaf;\nchar     symbol;\n};\n\n\n/*global variables*/\nchar code[MAX_SYMBOLS][MAX_LEN];\nstruct tnode* root=NULL; /*tree of symbols*/\nstruct tnode* qhead=NULL; /*list of current symbols*/\nstruct cnode* chead=NULL;/*list of code*/\n\n/*\n@function   talloc\n@desc       allocates new node \n*/\nstruct tnode* talloc(int symbol,float freq)\n{\nstruct tnode* p=(struct tnode*)malloc(sizeof(struct tnode));\nif(p!=NULL)\n{\n    p-&gt;left=p-&gt;right=p-&gt;parent=p-&gt;next=NULL;\n    p-&gt;symbol=symbol;\n    p-&gt;freq=freq;\n    p-&gt;isleaf=1;\n}\nreturn p;\n}\n\n/*\n@function display_tnode_list\n@desc     displays the list of tnodes during code construction\n*/\nvoid pq_display(struct tnode* head)\n{\nstruct tnode* p=NULL;\nprintf(\"list:\");\nfor(p=head;p!=NULL;p=p-&gt;next)\n{\n    printf(\"(%c,%f) \",p-&gt;symbol,p-&gt;freq);\n}\nprintf(\"\\n\");\n}\n\n/*\n@function pq_insert\n@desc     inserts an element into the priority queue\nNOTE:     makes use of global variable qhead\n*/\nvoid pq_insert(struct tnode* p)\n{\nstruct tnode* curr=NULL;\nstruct tnode* prev=NULL;\n printf(\"inserting:%c,%f\\n\",p-&gt;symbol,p-&gt;freq);\n if(qhead==NULL) /*qhead is null*/\n    {\n       /*TODO: write code to insert when queue is empty*/\n\n    //qhead = null means we nead to set something as the heeed!\n    //possibly p???????\n\n\n    qhead = p;\n\n    return;\n\n       //not too sure bout this.\n\n\n }\n       /*TODO: write code to find correct position to insert*/\n\n\n//potentially check if 'symbol' less\n//than ?? \n\nif(curr==qhead)//curr is always set to null when method called????\n {\n    /*TODO: write code to insert before the current start*/\n    curr-&gt;parent = p;\n    curr = p;\n\n\n\n}\n else /*insert between prev and next*/\n{\n    /*TODO: write code to insert in between*/\n}\n}\n\n/*\n@function pq_pop\n@desc     removes the first element\nNOTE:     makes use of global variable qhead\n*/\n\nstruct tnode* pq_pop()\n{\nstruct tnode* p=NULL;\n\np = qhead;\n\n\nif(qhead-&gt;next != NULL)\n{   \n    qhead = qhead-&gt;next;\n}\n\n\n\n\n/*TODO: write code to remove front of the queue*/\nprintf(\"popped:%c,%f\\n\",p-&gt;symbol,p-&gt;freq);\nreturn p;\n}\n\n /*\n @function build_code\n @desc     generates the string codes given the tree\n NOTE: makes use of the global variable root\n */\n void generate_code(struct tnode* root,int depth)\n {\n int symbol;\n int len; /*length of code*/\n if(root-&gt;isleaf)\n {\n    symbol=root-&gt;symbol;\n    len   =depth;\n    /*start backwards*/\n    code[symbol][len]=0;\n    /*\n        TODO: follow parent pointer to the top\n        to generate the code string\n    */\n    printf(\"built code:%c,%s\\n\",symbol,code[symbol]);\n}\nelse\n{\n    generate_code(root-&gt;left,depth+1);\n    generate_code(root-&gt;right,depth+1);\n}\n\n}\n\n/*\n@func   dump_code\n@desc   output code file\n*/\nvoid dump_code(FILE* fp)\n{\nint i=0;\nfor(i=0;i&lt;MAX_SYMBOLS;i++)\n{\n    if(code[i][0]) /*non empty*/\n        fprintf(fp,\"%c %s\\n\",i,code[i]);\n}\n}\n\n/*\n@func   encode\n@desc   outputs compressed stream\n*/\n void encode(char* str,FILE* fout)\n{\nwhile(*str)\n{\n    fprintf(fout,\"%s\",code[*str]);\n    str++;\n}\n}\n /*\n  @function main\n */\nint main()\n {\n /*test pq*/\n struct tnode* p=NULL;\nstruct tnode* lc,*rc;\nfloat freq[]={0.01,0.04,0.05,0.11,0.19,0.20,0.4};\nint   NCHAR=7; /*number of characters*/\nint i=0;\nconst char *CODE_FILE=\"code.txt\";\nconst char *OUT_FILE=\"encoded.txt\";\nFILE* fout=NULL;\n/*zero out code*/\nmemset(code,0,sizeof(code));\n\n/*testing queue*/\npq_insert(talloc('a',0.1));\npq_insert(talloc('b',0.2));\npq_insert(talloc('c',0.15));\n/*making sure it pops in the right order*/\nputs(\"making sure it pops in the right order\");\nwhile((p=pq_pop()))\n{\n    free(p);\n}\n\n\n\nqhead=NULL;\n/*initialize with freq*/\nfor(i=0;i&lt;NCHAR;i++)\n{\n    pq_insert(talloc('a'+i,freq[i]));\n}\n/*build tree*/\nfor(i=0;i&lt;NCHAR-1;i++)\n{\n    lc=pq_pop();\n    rc=pq_pop();\n    /*create parent*/\n    p=talloc(0,lc-&gt;freq+rc-&gt;freq);\n    /*set parent link*/\n    lc-&gt;parent=rc-&gt;parent=p;\n    /*set child link*/\n    p-&gt;right=rc; p-&gt;left=lc;\n    /*make it non-leaf*/\n    p-&gt;isleaf=0;\n    /*add the new node to the queue*/\n    pq_insert(p);\n}\n/*get root*/\nroot=pq_pop();\n/*build code*/\ngenerate_code(root,0);\n/*output code*/\nputs(\"code:\");\nfout=fopen(CODE_FILE,\"w\");\ndump_code(stdout);\ndump_code(fout);\nfclose(fout);\n\n/*encode a sample string*/\nputs(\"orginal:abba cafe bad\");\nfout=fopen(OUT_FILE,\"w\");\nencode(\"abba cafe bad\",stdout);\nencode(\"abba cafe bad\",fout);\nfclose(fout);\ngetchar();\n/*TODO: clear resources*/\nreturn 0;\n}\n</code></pre>\n\n<p>i think i am over thinking this really and the left and right pointers are just used in tree construction after the priority queue is created. another thing that confused me was that \"curr\" is set to null whenever pq_insert() is called? Iam thinking maybe curr is set to the qhead. asuming its \"freq\" value is less than the \"qhead\" freq value? Also iam not doing this as homework or anything. anyway, any input is appreciated. </p>\n\n<p>also not really sure how to use \"curr\" and \"prev\" pointers in the pq_insert method. if anyone cold point me in the direction of some pseudo code that would also be pretty helpful.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 4, "creation_date": 1438171675, "post_id": 31699942, "comment_id": 51339032, "body": "see <a href=\"http://stackoverflow.com/q/26505722/1708801\">Why does this use of comma work in a expression but fail in a declaration?</a>"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1438171891, "post_id": 31699942, "comment_id": 51339191, "body": "<code>int i=1,2,3;</code> will not going to compile."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 2, "creation_date": 1438172368, "post_id": 31699942, "comment_id": 51339488, "body": "@rakeb.void yes, that is what the question is about"}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1438174857, "post_id": 31699942, "comment_id": 51341232, "body": "similar expressions like <code>int i = 3, y;</code> would be ambiguous: is it declaring y as an int or part of the initialization?"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1438172873, "last_edit_date": 1438172873, "creation_date": 1438171636, "answer_id": 31699980, "question_id": 31699942, "link": "https://stackoverflow.com/questions/31699942/why-is-it-an-error-to-initialize-a-variable-with-multiple-values-using-comma-ope/31699980#31699980", "title": "Why is it an error to initialize a variable with multiple values using comma operator?", "body": "<p>Because the C language grammar says that an <em>initializer</em> must be an <em>assignment-expression</em>. The latter includes all expressions <em>except</em> those formed from two other expressions and the comma operator:</p>\n\n<pre><code>expression :\n    assignment-expression\n    expression , assignment-expression\n</code></pre>\n\n<p>So <code>0,1,2</code> is not a valid initializer for <code>i</code>.  Since <code>1</code> is not a valid declarator either, this code does not match any syntax rules, making it a syntax error.</p>\n\n<p>I'd guess that the grammar was designed this way on purpose, to avoid the possibility of any situations where a comma is ambiguous between a separator and an operator.</p>\n"}], "owner": {"reputation": 47, "user_id": 5086763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdaa634f2d0abb9e046f72de1ea7dd88?s=128&d=identicon&r=PG&f=1", "display_name": "angel", "link": "https://stackoverflow.com/users/5086763/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1438171854, "answer_count": 1, "score": 1, "last_activity_date": 1438172873, "creation_date": 1438171534, "last_edit_date": 1438171714, "question_id": 31699942, "link": "https://stackoverflow.com/questions/31699942/why-is-it-an-error-to-initialize-a-variable-with-multiple-values-using-comma-ope", "closed_reason": "Duplicate", "title": "Why is it an error to initialize a variable with multiple values using comma operator?", "body": "<p>If I write the statement </p>\n\n<pre><code>int i=1,2,3;\n</code></pre>\n\n<p>why does here the comma acts as a separator rather than operator since we have comma operator having associativity from left to right  so according to me first value is initialized using <code>i=1</code> but it doesn't work like this , what's the reason behind this ?</p>\n"}, {"tags": ["c", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438172116, "post_id": 31699850, "comment_id": 51339340, "body": "this cvSet2D(img, 1, 2, cvScalar(f)); doesn&#39;t work at all"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438172382, "post_id": 31699850, "comment_id": 51339500, "body": "@RiwaMl it should work, what&#39;s the error? Also post a small sample where you also show how you create the image."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438172658, "post_id": 31699850, "comment_id": 51339674, "body": "@RiwaMl updated the snippet about <code>cvSet2D</code>. It works as expected. Is it different from what you&#39;re doing? Post your code..."}, {"owner": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438173868, "post_id": 31699850, "comment_id": 51340560, "body": "the error is too few arguments to function &#39;cvScalar&#39;"}, {"owner": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438173945, "post_id": 31699850, "comment_id": 51340609, "body": "it is C programming not C++"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438174501, "post_id": 31699850, "comment_id": 51341034, "body": "Yeah, I was using C++ wrapper to C stuff. Check updated snippet"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438175022, "post_id": 31699850, "comment_id": 51341334, "body": "@RiwaMl from your posted code (which you should add to your question) I think I finally got what you meant. Check if it&#39;s ok now. Please note that a clear question with all needed info will get you the correct answer sooner!"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "edited": false, "score": 0, "creation_date": 1438182483, "post_id": 31699850, "comment_id": 51347175, "body": "@RiwaMl I added the relevant code to the question, now you can delete your answer. If you find this answer useful, please accept it and/or upvote. Or comment to get additional information. To use C++ functions, you should <code>#include &lt;opencv2&#47;opencv.hpp&gt;</code>"}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 1, "last_activity_date": 1438176726, "last_edit_date": 1495540284, "creation_date": 1438171238, "answer_id": 31699850, "question_id": 31699693, "link": "https://stackoverflow.com/questions/31699693/use-cvset2d-in-gray-scale-image-in-c-language/31699850#31699850", "title": "use cvSet2D in gray scale image in C language?", "body": "<p>You can refer to  <a href=\"https://stackoverflow.com/questions/17612552/purpose-of-cvget2d-and-cvset2d\">this</a> question.</p>\n\n<blockquote>\n  <p>C: void cvSet2D(CvArr* arr, int idx0, int idx1, CvScalar value)</p>\n</blockquote>\n\n<p>The arguments are:</p>\n\n<ul>\n<li><strong>arr</strong> -  Input array (i.e. the image)</li>\n<li><strong>idx0</strong> \u2013 The first zero-based component of the element index (i.e. row)</li>\n<li><strong>idx1</strong> \u2013 The second zero-based component of the element index (i.e column)</li>\n<li><strong>value</strong> \u2013 The assigned value </li>\n</ul>\n\n<p>To know what <code>cvScalar</code> is, refer to <a href=\"https://stackoverflow.com/questions/31583694/why-cvscalar-is-used/31583848#31583848\">this</a> and</p>\n\n<blockquote>\n  <p>The <code>cvScalar</code> is simply a convenient container for 1, 2, 3 or 4 floating point values.</p>\n</blockquote>\n\n<p>You should do something like:</p>\n\n<pre><code>uchar f = 123;\nCvScalar scalar = cvGet2D(img, 1, 2);\nscalar.val[0] = f;\ncvSet2D(img, 1, 2, scalar);\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5165760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe64c5f8d96435759e8a1c5e290eaf67?s=128&d=identicon&r=PG&f=1", "display_name": "Riwa Ml", "link": "https://stackoverflow.com/users/5165760/riwa-ml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 31699850, "answer_count": 1, "score": 1, "last_activity_date": 1438183034, "creation_date": 1438170772, "last_edit_date": 1438183034, "question_id": 31699693, "link": "https://stackoverflow.com/questions/31699693/use-cvset2d-in-gray-scale-image-in-c-language", "title": "use cvSet2D in gray scale image in C language?", "body": "<p>I want to set pixel value in given bmp image using CvSet2D but I want to access only the first value. Could you explain what the 4 arguments of CvSet2D are for?</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cv.h&gt;\n#include &lt;highgui.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, char *argv[])\n{\n    IplImage* img = cvLoadImage(\"initial.bmp\",1);\n\n    int f = 123;\n    cvSet2D(img, 1, 2, f); // here is the error\n    //cvSet2D(img, 1, 2, cvScalar(f)); // error also this way\n\n    return 0;\n}\n</code></pre>\n\n<p>I get an error that says:</p>\n\n<pre><code>incompatible type for argument 4 of 'cvSet2D'   \n</code></pre>\n\n<p>I just need to set pixel value of a gray scale image, how con I do this? </p>\n"}, {"tags": ["c", "unix", "memory-management", "linker", "malloc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438170761, "post_id": 31699419, "comment_id": 51338347, "body": "If you&#39;re compiling these external libraries yourself, you could just inject a <code>-Dmalloc=__wrap_malloc</code> flag..."}, {"owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438170967, "post_id": 31699419, "comment_id": 51338509, "body": "I don&#39;t, but I could. Thank you. If I&#39;m left with no other option I&#39;ll do that."}], "answers": [{"comments": [{"owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438171079, "post_id": 31699765, "comment_id": 51338605, "body": "I&#39;ll try that. You&#39;ll now if it worked. Thank you. By the way, .a at the end should be excluded, just -lsomelib is required :)"}, {"owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438245414, "post_id": 31699765, "comment_id": 51374737, "body": "I&#39;m haveing some problems, I probably made some stupid mistake. I&#39;m having undefined reference error. But I&#39;ll fix it on my own."}, {"owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438249426, "post_id": 31699765, "comment_id": 51377373, "body": "I lost few hours, because I didn&#39;t notice that -lsomelib isn&#39;t the last option passed to linker. And at the end, it does not work. even with new library and -r option, linker does resolve malloc to __wrap_malloc. So final executable always calls real malloc."}, {"owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438269504, "post_id": 31699765, "comment_id": 51391340, "body": "OK, this, seems to actually work. Problem that I had was usage of operator new in C++. What I used --wrap=malloc for both of them it did work, because at this stage linker could resolve code to underlying malloc, but when I separated it linker didn&#39;t even know that new will actually call malloc. To overcome the problem, I needed to redefine operator new too."}, {"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "reply_to_user": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438288328, "post_id": 31699765, "comment_id": 51402396, "body": "@Marko Huh, never would have occurred to me. I try to stick to C as much as possible. Glad this worked out!"}, {"owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438323869, "post_id": 31699765, "comment_id": 51412950, "body": "Yea, simplicity is what makes C beautiful. But I had no choice."}], "tags": [], "owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "is_accepted": true, "score": 2, "last_activity_date": 1438171542, "last_edit_date": 1438171542, "creation_date": 1438170964, "answer_id": 31699765, "question_id": 31699419, "link": "https://stackoverflow.com/questions/31699419/wrap-malloc-but-only-for-some-of-input-files-object-and-lib/31699765#31699765", "title": "Wrap malloc but only for some of input files (object and lib)", "body": "<p>Try linking in two steps.</p>\n\n<p>First stage: <code>ld -r -o libwrapped.a --wrap=malloc myobj1.o myobj2.o -lsomelib</code></p>\n\n<p>Second stage: <code>ld -o final -lwrapped -lsomeotherlib</code></p>\n\n<p>The <code>-r</code> option makes the first file (<code>wrapped</code>) relocatable, often called partial linking. Basically you make a library of all the objects you want wrapped, then link that with the ones you don't want wrapped into the final object.</p>\n"}, {"comments": [{"owner": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1438172049, "post_id": 31700031, "comment_id": 51339290, "body": "Doesn&#39;t let you restrict memory access to third party libraries, unless you compile them, which may not always be an option. Works for most things, though."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "reply_to_user": {"reputation": 2742, "user_id": 2771245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vhsVn.jpg?s=128&g=1", "display_name": "mtijanic", "link": "https://stackoverflow.com/users/2771245/mtijanic"}, "edited": false, "score": 0, "creation_date": 1438172830, "post_id": 31700031, "comment_id": 51339810, "body": "@mtijanic Yes you&#39;re right, but here the request seems to be related to the use of a different allocator for just some modules, and this solution permit also to limit the use to a part of a module. In a more general way if you put it in an header it can just be included at beginning of module (as the last include of course)."}, {"owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "edited": false, "score": 0, "creation_date": 1438263106, "post_id": 31700031, "comment_id": 51386452, "body": "Unfortunately I just realized that I can&#39;t use this, because some of libraries are written in C, and some in C++."}], "tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1438171792, "creation_date": 1438171792, "answer_id": 31700031, "question_id": 31699419, "link": "https://stackoverflow.com/questions/31699419/wrap-malloc-but-only-for-some-of-input-files-object-and-lib/31700031#31700031", "title": "Wrap malloc but only for some of input files (object and lib)", "body": "<p>If you need to change the malloc for only some modules, or even part of modules, I would suggest to use a simple <code>#define</code>. This allows to restrict the use of the new malloc to some parts of the same module:</p>\n\n<pre><code>...\n#define malloc(x)  MyMalloc(x)\n...    //From here on will be used the new malloc MyMalloc\n#undef malloc\n...    //From here on will be used the standard malloc\n</code></pre>\n"}], "owner": {"reputation": 1110, "user_id": 1873877, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7c655a6d73e22decfcf2ed71e2411d9c?s=128&d=identicon&r=PG", "display_name": "Marko", "link": "https://stackoverflow.com/users/1873877/marko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 31699765, "answer_count": 2, "score": 2, "last_activity_date": 1438171792, "creation_date": 1438169950, "question_id": 31699419, "link": "https://stackoverflow.com/questions/31699419/wrap-malloc-but-only-for-some-of-input-files-object-and-lib", "title": "Wrap malloc but only for some of input files (object and lib)", "body": "<p>I need to wrap call to malloc, to serve  memory from my own pool.\nBut only for my own object files, and some of external libraries.\nOther libraries should have access to real malloc.\nI use static linking and only link to static libraries (.a archives).</p>\n\n<p>I use --wrap=malloc option to \"intercept\" call to malloc, but it makes all code from all input files use this malloc (__wrap_malloc).</p>\n\n<p>Ideal solution would be if I could use --wrap linker option but only apply it to some of input files. But other solutions are welcome too.</p>\n\n<p>I can provide dummy example code (which is not that small) if needed to illustrate the problem.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "c", "shared-libraries", "wrapper", "swig"], "answers": [{"comments": [{"owner": {"reputation": 1155, "user_id": 4689412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G3XRh.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/4689412/maximilian"}, "edited": false, "score": 0, "creation_date": 1438355992, "post_id": 31729297, "comment_id": 51433129, "body": "It is possible to wrap a library only the .so and the .i files given?"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 1155, "user_id": 4689412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G3XRh.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/4689412/maximilian"}, "edited": false, "score": 0, "creation_date": 1438356959, "post_id": 31729297, "comment_id": 51433712, "body": "@maxi yes if you know what the function declarations look like and any type definitions you care about."}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 1, "last_activity_date": 1438273820, "creation_date": 1438273820, "answer_id": 31729297, "question_id": 31699412, "link": "https://stackoverflow.com/questions/31699412/how-can-i-wrap-a-c-library-in-swig-which-has-usually-to-be-linked-during-c-comp/31729297#31729297", "title": "How can I wrap a C-Library in SWIG, which has usually to be linked during C-compilation?", "body": "<p>All you need to do to make the .so (or .a) library case work is to link the library appropriately when you do the compile step of the example build process. You will still have to compile the example_wrap.c that gets generated, this is where you can link against things. </p>\n\n<p>So modified from the SWIG docs that would be:</p>\n\n<pre><code>$ swig -python example.i\n$ gcc -O2 -fPIC -c example.c\n$ gcc -O2 -fPIC -c example_wrap.c -I/usr/local/include/python2.5\n$ gcc -shared example_wrap.o -o _example.so -lmylib.so\n</code></pre>\n\n<hr>\n\n<p>In reality you can also skip this at the compile time linker step and use <code>dlopen</code> at runtime instead by injecting some extra code into the Python part of your module that calls dlopen before the shared object from SWIG gets loaded. </p>\n"}], "owner": {"reputation": 1155, "user_id": 4689412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G3XRh.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/4689412/maximilian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 31729297, "answer_count": 1, "score": 0, "last_activity_date": 1438273820, "creation_date": 1438169926, "question_id": 31699412, "link": "https://stackoverflow.com/questions/31699412/how-can-i-wrap-a-c-library-in-swig-which-has-usually-to-be-linked-during-c-comp", "title": "How can I wrap a C-Library in SWIG, which has usually to be linked during C-compilation?", "body": "<p>Given a C-library, which has to be linked during compilation if I want to use its functions. I want to access these functions in Python using SWIG. I can only find examples and introductions where C-Code (example.c) is wrapped using SWIG, no method how to wrap a dynamic library (example.so). </p>\n"}, {"tags": ["java", "c", "metrics", "cyclomatic-complexity"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438172798, "post_id": 31699326, "comment_id": 51339784, "body": "C does not have <i>methods</i>. And that is a <i>function</i> anyway."}, {"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438172953, "post_id": 31699326, "comment_id": 51339892, "body": "@Olaf that is irrelevant to the discussion at hand. A method or a function is nothing more than a code path"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438173502, "post_id": 31699326, "comment_id": 51340285, "body": "A method is related to an object, <i>function</i> is the more overall term. There are good reason to call a dog not &quot;wolf&quot;."}, {"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1438174763, "post_id": 31699326, "comment_id": 51341177, "body": "@Olaf dogs, wolves, werewolves, whatever; coupling is not complexity!"}], "answers": [{"comments": [{"owner": {"reputation": 1491, "user_id": 3599370, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b557a9c32458f9db0335cb458648e78a?s=128&d=identicon&r=PG&f=1", "display_name": "d125q", "link": "https://stackoverflow.com/users/3599370/d125q"}, "edited": false, "score": 1, "creation_date": 1438171020, "post_id": 31699590, "comment_id": 51338563, "body": "I believe the cyclomatic complexity of OP&#39;s code is 2, as there are clearly 2 linearly independent paths through the code."}, {"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "reply_to_user": {"reputation": 1491, "user_id": 3599370, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b557a9c32458f9db0335cb458648e78a?s=128&d=identicon&r=PG&f=1", "display_name": "d125q", "link": "https://stackoverflow.com/users/3599370/d125q"}, "edited": false, "score": 0, "creation_date": 1438171167, "post_id": 31699590, "comment_id": 51338667, "body": "@d125q but then there is always a path in the code, right? Does it really count in complexity calculations? Would that mean that only functions/methods <i>with no statements</i> would have a complexity of 0?"}, {"owner": {"reputation": 2812, "user_id": 5033475, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rsGIW.png?s=128&g=1", "display_name": "Roel Strolenberg", "link": "https://stackoverflow.com/users/5033475/roel-strolenberg"}, "edited": false, "score": 0, "creation_date": 1438171480, "post_id": 31699590, "comment_id": 51338878, "body": "You are correct, as there is always at least 1 path, adding an if statement will make the complexity 2: <a href=\"https://en.wikipedia.org/wiki/Cyclomatic_complexity\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Cyclomatic_complexity</a>"}, {"owner": {"reputation": 1491, "user_id": 3599370, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b557a9c32458f9db0335cb458648e78a?s=128&d=identicon&r=PG&f=1", "display_name": "d125q", "link": "https://stackoverflow.com/users/3599370/d125q"}, "reply_to_user": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1438171506, "post_id": 31699590, "comment_id": 51338900, "body": "@fge: Going by the definition of cyclomatic complexity and control flow graphs, the cyclomatic complexity of an empty function is 1."}, {"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "reply_to_user": {"reputation": 1491, "user_id": 3599370, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b557a9c32458f9db0335cb458648e78a?s=128&d=identicon&r=PG&f=1", "display_name": "d125q", "link": "https://stackoverflow.com/users/3599370/d125q"}, "edited": false, "score": 0, "creation_date": 1438172917, "post_id": 31699590, "comment_id": 51339870, "body": "@d125q makes sense... I need to re-read everything from the start again, I believe"}], "tags": [], "owner": {"reputation": 2812, "user_id": 5033475, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rsGIW.png?s=128&g=1", "display_name": "Roel Strolenberg", "link": "https://stackoverflow.com/users/5033475/roel-strolenberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1438171441, "last_edit_date": 1438171441, "creation_date": 1438170414, "answer_id": 31699590, "question_id": 31699326, "link": "https://stackoverflow.com/questions/31699326/when-calculating-cyclomatic-complexity-should-statements-exiting-the-current-me/31699590#31699590", "title": "When calculating cyclomatic complexity, should statements exiting the current method/function be part of it?", "body": "<p>Your cyclomatic complexity would be 2, here's why:</p>\n\n<p>Your code is essentially this:</p>\n\n<pre><code>int foo(int arg)\n    {\n        int out;\n        if (arg &gt; 0)\n            out = 1;\n        else\n            out = 0;\n        return out;\n    }\n</code></pre>\n\n<p>plain <code>return</code> statement dont count toward complexity. You only have 1 <code>if</code> statement, no <code>if else</code> statements. Hence, your cyclomatic complexity will be 2, as there is 1 alternate path to the main path.\nIf return statements would count, your cyclomatic complexity of the same method could be 3 OR 4 (see my code vs yours), this should make clear why return statements aren't included.</p>\n"}, {"comments": [{"owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 0, "creation_date": 1438171050, "post_id": 31699679, "comment_id": 51338587, "body": "Not to mention that you could also have written that code with the <code>?:</code> ternary operator.. Hmm"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "edited": false, "score": 1, "creation_date": 1438171652, "post_id": 31699679, "comment_id": 51339016, "body": "The ternary operator has two distinct paths through it,so changes nothing in this case."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 3, "last_activity_date": 1438170726, "creation_date": 1438170726, "answer_id": 31699679, "question_id": 31699326, "link": "https://stackoverflow.com/questions/31699326/when-calculating-cyclomatic-complexity-should-statements-exiting-the-current-me/31699679#31699679", "title": "When calculating cyclomatic complexity, should statements exiting the current method/function be part of it?", "body": "<p>That code has two distinct paths through the function:  one that corresponds to <code>arg &gt; 0</code> being true and the other corresponding to it being false.</p>\n\n<p>The number of return statements involved does not affect that, since it does not change the number of distinct paths through the function.   Your code could be rewritten as</p>\n\n<pre><code>int foo(int arg)\n{\n     int retval = 0;\n     if (arg &gt; 0) retval = 1;\n     return retval;\n}\n</code></pre>\n\n<p>which has exactly the same number of paths, despite having one less return statement.</p>\n"}], "owner": {"reputation": 109504, "user_id": 1093528, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjxwC.jpg?s=128&g=1", "display_name": "fge", "link": "https://stackoverflow.com/users/1093528/fge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1438171441, "creation_date": 1438169692, "question_id": 31699326, "link": "https://stackoverflow.com/questions/31699326/when-calculating-cyclomatic-complexity-should-statements-exiting-the-current-me", "title": "When calculating cyclomatic complexity, should statements exiting the current method/function be part of it?", "body": "<p>This probably applies to more than C and Java, of course, but those are the two languages I am more familiar with, so let us take this simple example:</p>\n\n<pre><code>int foo(int arg)\n{\n    if (arg &gt; 0)\n        return 1;\n    return 0;\n}\n</code></pre>\n\n<p>Now, I have seen two interpretations as far as <code>return</code> is concerned:</p>\n\n<ul>\n<li>this is a \"different code path\" since it exits the method; as such any <code>return</code> statement should increase the complexity by 1. In this case, the sample code above has a complexity of 3; or</li>\n<li><code>return</code> just exits the method, no reason to count it in. In this case, the sample code above has a complexity of 1.</li>\n</ul>\n\n<p>Is any interpretation above the \"correct\", canonical one as far as cyclomatic complexity is concerned? I tend to favor the latter case but I'm no CS theorist...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1438169171, "post_id": 31699052, "comment_id": 51337306, "body": "What do you mean when you say that you &quot;want to calculate the XOR CRC of both buffers together&quot;? Do you mean that you should combine the contents of both buffers somehow? That you want to call the function twice, once for each buffer? Combine the return value of two calls? Something else? Please elaborate."}, {"owner": {"reputation": 23, "user_id": 4065601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5dd52b5e9d6a66e9d964f41e3a3c4f?s=128&d=identicon&r=PG&f=1", "display_name": "trek", "link": "https://stackoverflow.com/users/4065601/trek"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438169282, "post_id": 31699052, "comment_id": 51337373, "body": "I want to call the function once, and calculate the CRC with the content of both buffers."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438169321, "post_id": 31699052, "comment_id": 51337398, "body": "You should be able to find out this by yourself. This is really very simple."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438169397, "post_id": 31699052, "comment_id": 51337442, "body": "Then you can&#39;t. Not unless you modify the function to take <i>both</i> buffers (and their respective length) as arguments, and also provide some way to &quot;return&quot; the results for both buffers. One possible solution is to make a wrapper function which calls the <code>calc_crc</code> function for both buffers."}, {"owner": {"reputation": 23, "user_id": 4065601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5dd52b5e9d6a66e9d964f41e3a3c4f?s=128&d=identicon&r=PG&f=1", "display_name": "trek", "link": "https://stackoverflow.com/users/4065601/trek"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438169433, "post_id": 31699052, "comment_id": 51337471, "body": "@MichaelWalz I&#39;m really sorry, but I really don&#39;t know how to do it. If I knew it, I wouldn&#39;t asked..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438169509, "post_id": 31699052, "comment_id": 51337516, "body": "@trek can you edit your question with a very simple example of 2 buffers and the desired result ? Your question alread has 2 votes for closing because of &quot;unclear what your are asking&quot;."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1438169529, "post_id": 31699052, "comment_id": 51337532, "body": "Call it for one, call it for the other, xor the returned values together."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438169725, "post_id": 31699052, "comment_id": 51337656, "body": "The only other, more correct, way would be to modify the function to take an initializer char."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438169975, "post_id": 31699052, "comment_id": 51337813, "body": "Still not quite clear, so the CRC of both buffers combined would be the crc of this  : <code>unsigned char bufcombined[...] = { 0x1, 0x3, 0x43, 0x1, 0x0, 0x40, 0x1, 0x8, 0x44, 57, 0x00 }</code> ? Please edit your quastion and put the desired result."}, {"owner": {"reputation": 1083, "user_id": 5147212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0948323093255d680801e7fcbc7965?s=128&d=identicon&r=PG&f=1", "display_name": "Sigve Kolbeinson", "link": "https://stackoverflow.com/users/5147212/sigve-kolbeinson"}, "edited": false, "score": 1, "creation_date": 1438170165, "post_id": 31699052, "comment_id": 51337933, "body": "Also, Cyclic Redundancy Check is a type of error detection code. XOR is a different type of error detection code. So <code>calc_crc</code> doesn&#39;t calculate a CRC at all. From a clarity perspective, I suggest you choose a different function name, and edit the post (maybe CRC-&gt;checksum?) so it becomes more relevant when it turns up in search results."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438170520, "post_id": 31699052, "comment_id": 51338167, "body": "Oh... I missed the &#39;I want to call my crc function once&#39; homework tell:("}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438170783, "post_id": 31699052, "comment_id": 51338366, "body": "Oh - I missed it because it was edited in.  Great, I wonder what silly constraint is going to be added next?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1083, "user_id": 5147212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0948323093255d680801e7fcbc7965?s=128&d=identicon&r=PG&f=1", "display_name": "Sigve Kolbeinson", "link": "https://stackoverflow.com/users/5147212/sigve-kolbeinson"}, "edited": false, "score": 0, "creation_date": 1438173298, "post_id": 31699052, "comment_id": 51340141, "body": "As @SigveKolbeinson wrote, the term CRC is a commonly accepted term for a specific algorithm. Please choose a different one for your linear bit-checksum. (Note: that algorithm does not add much to error detection; such were used in the 80ies when clock cycles and ROM were rare. I&#39;d recommend either to use a true CRC or at least some true checksum on bytes instead of bits.). If using a table, CRC are almost as fast as your thing."}], "answers": [{"tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": false, "score": 0, "last_activity_date": 1438169941, "creation_date": 1438169941, "answer_id": 31699416, "question_id": 31699052, "link": "https://stackoverflow.com/questions/31699052/crc-calculation-with-different-buffers/31699416#31699416", "title": "CRC calculation with different buffers", "body": "<p>Use an initializer parameter:</p>\n\n<pre><code>static char calc_crc(char init, unsigned char *data, unsigned len)\n{\n     for ( int i = 0 ; i &lt; len; i++ )\n        init = init ^ data[i];\n    return init;\n}\n</code></pre>\n\n<p>Then you can do result=calc_crc(calc_crc(0,buffer1,buffer1len), buffer2, buffer2len);</p>\n"}, {"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1438170594, "post_id": 31699581, "comment_id": 51338223, "body": "Yeah.. I missed the &#39;call only once&#39; homework-constraint:("}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 1, "last_activity_date": 1438170389, "creation_date": 1438170389, "answer_id": 31699581, "question_id": 31699052, "link": "https://stackoverflow.com/questions/31699052/crc-calculation-with-different-buffers/31699581#31699581", "title": "CRC calculation with different buffers", "body": "<ol>\n<li><p>concatenate the buffers first, and then call your function once</p>\n\n<p>this is <em>stupid</em>, but the only way to do literally what you asked</p></li>\n<li><p>just call the function twice, like</p>\n\n<pre><code>char crc = calc_crc(buf1, len1) ^ calc_crc(buf2, len2);\n</code></pre>\n\n<p>this ignores your requirement that</p>\n\n<blockquote>\n  <p>I want to call my crc function once</p>\n</blockquote>\n\n<p>but you never explained why, and it seems like a daft requirement</p></li>\n<li><p>rewrite the function to take an array of buffers and an array of lengths. This also seems silly, unless you're often going to be calling it with an <code>iovec</code> or something</p></li>\n<li><p>other, even more elaborate ways of doing something simple ...</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": -1, "last_activity_date": 1438171449, "last_edit_date": 1438171449, "creation_date": 1438170792, "answer_id": 31699700, "question_id": 31699052, "link": "https://stackoverflow.com/questions/31699052/crc-calculation-with-different-buffers/31699700#31699700", "title": "CRC calculation with different buffers", "body": "<p>You can call the function like this:</p>\n\n<pre><code>combinedcrc = calc_crc(buf1, 11);  // 11 being the sum of the lengths of buf1 and buf2\n</code></pre>\n\n<p>But this requires that:</p>\n\n<ol>\n<li><code>buf2</code> is declared directly after <code>buf1</code> like in your question</li>\n<li>your compiler puts <code>buf1</code> and <code>buf2</code> directly one after the other in memory without any padding. This is often the case, but the compiler may very well arrange the two buffers differently in memory.</li>\n</ol>\n\n<p>So technically this is undefined behaviour.</p>\n"}], "owner": {"reputation": 23, "user_id": 4065601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5dd52b5e9d6a66e9d964f41e3a3c4f?s=128&d=identicon&r=PG&f=1", "display_name": "trek", "link": "https://stackoverflow.com/users/4065601/trek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 693, "favorite_count": 0, "accepted_answer_id": 31699581, "answer_count": 3, "score": -4, "last_activity_date": 1438171449, "creation_date": 1438168927, "last_edit_date": 1438170873, "question_id": 31699052, "link": "https://stackoverflow.com/questions/31699052/crc-calculation-with-different-buffers", "title": "CRC calculation with different buffers", "body": "<p>I'm calculating a simple XOR CRC for a data transmission.\nThe function is:</p>\n\n<pre><code>static char calc_crc(unsigned char *data, unsigned len)\n{\n    char crc = 0;\n    for ( int i = 0 ; i &lt; len; i++ )\n        crc = crc ^ data[i];\n    return crc;\n}\n</code></pre>\n\n<p>My problem is:</p>\n\n<p>How can I call this function with data from two seperate buffers?</p>\n\n<p>E.g.</p>\n\n<pre><code>unsigned char buf1[...] = { 0x1, 0x3, 0x43, 0x1, 0x0, 0x40 }\nunsigned char buf2[...] = { 0x1, 0x8, 0x44, 57, 0x00 }\n</code></pre>\n\n<p>I want to call my crc function <strong>once</strong>, and the calculation must be the content from buf1 and buf2 combined together.</p>\n\n<p>Thx! </p>\n\n<p>EDIT:\nAs user Michael Walz wrote, the combined buffer would be</p>\n\n<pre><code>unsigned char bufcombined[...] = { 0x1, 0x3, 0x43, 0x1, 0x0, 0x40, 0x1, 0x8, 0x44, 57, 0x00 }\n</code></pre>\n\n<p>and from this buffer I would like to do the XOR calculation.</p>\n"}, {"tags": ["c", "reference", "arguments", "pic", "eeprom"], "comments": [{"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1438168822, "post_id": 31698696, "comment_id": 51337082, "body": "Start with formatting your code!"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4378743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e271a3a16deb4427652de70d8da6141?s=128&d=identicon&r=PG&f=1", "display_name": "cwanish", "link": "https://stackoverflow.com/users/4378743/cwanish"}, "edited": false, "score": 0, "creation_date": 1438171846, "post_id": 31699497, "comment_id": 51339156, "body": "Thank You for Your advise, but I still get the same error:"}, {"owner": {"reputation": 29, "user_id": 4378743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e271a3a16deb4427652de70d8da6141?s=128&d=identicon&r=PG&f=1", "display_name": "cwanish", "link": "https://stackoverflow.com/users/4378743/cwanish"}, "edited": false, "score": 0, "creation_date": 1438174584, "post_id": 31699497, "comment_id": 51341082, "body": "Still didn&#39;t help. If You have any other idea, please let me know.  Thank You for your replies. Thank You very much :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1438172519, "last_edit_date": 1438172519, "creation_date": 1438170169, "answer_id": 31699497, "question_id": 31698696, "link": "https://stackoverflow.com/questions/31698696/variable-address-in-eeprom-space-as-function-argument-in-c/31699497#31699497", "title": "Variable address in eeprom space as function argument in C", "body": "<p>Consider that prototype:</p>\n\n<pre><code>void eeprom_writeWord(unsigned int addresOfMyEEpromVariable, unsigned int value)\n</code></pre>\n\n<p>The attribute probably doesn't do anything here, left out for readability. What you do ist not taking the <em>address</em> (which would be of type <code>unsigned int *</code>) but the value itself (a plain <code>unsigned int</code>, that's not magically a pointer just by calling it <code>addressOfSomething</code> ;)), so it just gets copied to your function.</p>\n\n<p>Change it to the following</p>\n\n<pre><code>void eeprom_writeWord(unsigned int *addresOfMyEEpromVariable, unsigned int value)\n</code></pre>\n\n<p>And use like this</p>\n\n<pre><code>eeprom_writeWord(&amp;eeData, 0x9876);\n</code></pre>\n\n<p>And, of course, don't use the addressOf operator <code>&amp;</code> inside the function any more ... cause now you already <em>have</em> a pointer. This will then do what you expected.</p>\n\n<p><strong>edit</strong>: Regarding your answer, you should delete this (because it is not an answer) and instead edit your original question and put it there.</p>\n\n<p>The version without the asterisks ist the correct one. Not knowing your compiler, it <em>might</em> help to have the attribute in your function prototype as well:</p>\n\n<pre><code>void eeprom_writeWord(\n    unsigned int __attribute__ ((space(eedata))) *addresOfMyEEpromVariable,\n    unsigned int value)\n</code></pre>\n\n<p>Just saying <em>without</em> the asterisk <em>there</em> (marking the argument to be a pointer), it definitely cannot work.</p>\n"}, {"tags": [], "owner": {"reputation": 657, "user_id": 3401601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NkaeT.jpg?s=128&g=1", "display_name": "EBlake", "link": "https://stackoverflow.com/users/3401601/eblake"}, "is_accepted": false, "score": 1, "last_activity_date": 1438240220, "last_edit_date": 1438240220, "creation_date": 1438235267, "answer_id": 31715999, "question_id": 31698696, "link": "https://stackoverflow.com/questions/31698696/variable-address-in-eeprom-space-as-function-argument-in-c/31715999#31715999", "title": "Variable address in eeprom space as function argument in C", "body": "<p>It may be that the builtin routines can deal with hard-coded addresses (as in your first example - compiler/linker knows where eeData is located), but cannot deal with variable addresses.</p>\n\n<p>Two things you can try:</p>\n\n<p>(1) make the eeprom_writeWord an inline function (so that once again, the compiler can hard-code the address). Note that if this works, it still will likely fail for \"complicated\" situations such as addresses stored in indexed arrays.</p>\n\n<p>(2) look at the assembler code generated for the builtin routines in your working sample and rewrite them for what you want (using C or inline assembler). These routines are only a few instructions long. e.g. __builtin_tblpage is just stripping off the upper part of the address - something easily accomplished in C with masking and/or right shifts.</p>\n"}], "owner": {"reputation": 29, "user_id": 4378743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e271a3a16deb4427652de70d8da6141?s=128&d=identicon&r=PG&f=1", "display_name": "cwanish", "link": "https://stackoverflow.com/users/4378743/cwanish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438240220, "creation_date": 1438167985, "last_edit_date": 1438174044, "question_id": 31698696, "link": "https://stackoverflow.com/questions/31698696/variable-address-in-eeprom-space-as-function-argument-in-c", "title": "Variable address in eeprom space as function argument in C", "body": "<p>I have a simple and quick problem with C in PIC24f16ka102 and xc16 compiler.</p>\n\n<p>I want to pass a variable reference to my function. The variable is in eeprom space:</p>\n\n<pre><code>   int __attribute__ ((space(eedata))) eeData; // Variable located in EEPROM,declared as a global variable.\n</code></pre>\n\n<p>With this sequence I am able to save some data in eeprom memory:</p>\n\n<pre><code>unsigned int offset;\n// Set up NVMCON to erase one word of data EEPROM\nNVMCON = 0x4004;\n// Set up a pointer to the EEPROM location to be erased\nTBLPAG = __builtin_tblpage(&amp;eeData2); // Initialize EE Data page pointer\ntestDebug = TBLPAG;\n\noffset = __builtin_tbloffset(&amp;eeData); // Initizlize lower word of address\n__builtin_tblwtl(offset, 0x9876); // Write EEPROM data to write latch\nasm volatile (\"disi #5\"); // Disable Interrupts For 5 Instructions\n__builtin_write_NVM(); // Issue Unlock Sequence &amp; Start Write Cycle\nwhile(NVMCONbits.WR == 1);\n</code></pre>\n\n<p>This way I write value 0x9876 to first 16 bits of eeprom.\nBut I need to have it as  <code>&amp;eeData</code></p>\n\n<p>I want to write my own function:</p>\n\n<pre><code>void eeprom_writeWord(unsigned int __attribute__ ((space(eedata)))  addresOfMyEEpromVariable, unsigned int value)\n{\n    unsigned int offset;\n// Set up NVMCON to erase one word of data EEPROM\nNVMCON = 0x4004;\n// Set up a pointer to the EEPROM location to be erased\nTBLPAG = __builtin_tblpage(&amp;addresOfMyEEpromVariable); // Initialize EE Data page pointer\noffset = __builtin_tbloffset(&amp;addresOfMyEEpromVariable); // Initizlize lower word of address\n__builtin_tblwtl(offset, value); // Write EEPROM data to write latch\nasm volatile (\"disi #5\"); // Disable Interrupts For 5 Instructions\n__builtin_write_NVM(); // Issue Unlock Sequence &amp; Start Write Cycle\nwhile(NVMCONbits.WR == 1);\n}\n</code></pre>\n\n<p>but How to pass my address as a function argument so that my function would see that it is still adress in eeprom space? It cannot be just address, becouse if so I get error. __builtin functions need address with some attribute that it is eeprom memory.</p>\n\n<p>How to pass eeprom address with attribute to my function?\nPlease help</p>\n\n<p>edit:</p>\n\n<p>Thank You for Your advise, but I still get the same error:</p>\n\n<pre><code>    error: Argument to __builtin_tbloffset() is not the address\nof an object in a code, psv, or eedata section;\n</code></pre>\n\n<p>Function __builtin_tbloffset needs an address of the eeprom memory, not just an address of something. It works well if I use the whole sequence but not in a function (I mean the sequence in my first post).</p>\n\n<p>Now i tried as You said:</p>\n\n<pre><code>void eeprom_writeWord(unsigned int *addresOfMyEEpromVariable, unsigned int value)\n{\n        //write word\n// Set up NVMCON to write one word of data EEPROM\nNVMCON = 0x4004;\n// Set up a pointer to the EEPROM location to be written\nTBLPAG = __builtin_tblpage(*addresOfMyEEpromVariable);\nunsigned int offset = __builtin_tbloffset(*addresOfMyEEpromVariable);\n// Write Data Value To Holding Latch\n__builtin_tblwtl(offset, 0x9999);\n// Disable Interrupts For 5 Instructions\nasm volatile (\"disi #5\");\n// Issue Unlock Sequence &amp; Start Write Cycle\n__builtin_write_NVM();\nwhile(NVMCONbits.WR == 1);\n}\n</code></pre>\n\n<p>or even without '*' sign:</p>\n\n<pre><code>void eeprom_writeWord(unsigned int *addresOfMyEEpromVariable, unsigned int value)\n{\n        //write word\n// Set up NVMCON to write one word of data EEPROM\nNVMCON = 0x4004;\n// Set up a pointer to the EEPROM location to be written\nTBLPAG = __builtin_tblpage(addresOfMyEEpromVariable);\nunsigned int offset = __builtin_tbloffset(addresOfMyEEpromVariable);\n// Write Data Value To Holding Latch\n__builtin_tblwtl(offset, 0x9999);\n// Disable Interrupts For 5 Instructions\nasm volatile (\"disi #5\");\n// Issue Unlock Sequence &amp; Start Write Cycle\n__builtin_write_NVM();\nwhile(NVMCONbits.WR == 1);\n}\n</code></pre>\n\n<p>The result is still the same. __builtin_tblpage and other __builtin_(...) functions are functions built into xc16 compiler.</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 5284, "user_id": 2040925, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/191d1998634eaa0af6129682394dc560?s=128&d=identicon&r=PG", "display_name": "typ1232", "link": "https://stackoverflow.com/users/2040925/typ1232"}, "edited": false, "score": 1, "creation_date": 1438166350, "post_id": 31698072, "comment_id": 51335535, "body": "<code>y == 1 &amp;&amp; y&lt;= year</code> most likely does not what you expect. <code>year</code> must be 1 for the expression to be true."}, {"owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "edited": false, "score": 0, "creation_date": 1438166441, "post_id": 31698072, "comment_id": 51335588, "body": "and the value of  <code>y</code> doesn&#39;t change in the body of the loop."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438166500, "post_id": 31698072, "comment_id": 51335628, "body": "I really did not get the flow of your program."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5159663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865d7cce54058470affe7f2b200d0006?s=128&d=identicon&r=PG&f=1", "display_name": "Papid", "link": "https://stackoverflow.com/users/5159663/papid"}, "edited": false, "score": 0, "creation_date": 1438167893, "post_id": 31698148, "comment_id": 51336502, "body": "Thanks very much, finally got it."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 2, "last_activity_date": 1438167411, "last_edit_date": 1438167411, "creation_date": 1438166421, "answer_id": 31698148, "question_id": 31698072, "link": "https://stackoverflow.com/questions/31698072/why-this-loop-does-not-iterate-during-second-run/31698148#31698148", "title": "Why this loop does not iterate during second run?", "body": "<pre><code> do\n{   \n  i = sum * interest/100;\n  sum += i;\n}   \nwhile (y == 1 &amp;&amp; y&lt;= year);\n</code></pre>\n\n<p>In this loop value of <code>y</code> does not change therefore 2nd time condition is false as <code>y</code> is initialized as <code>0</code>.Thus values of <code>sum</code> remains same as it was after <code>1st</code> iteration. increment <code>y</code> in this loop and change condition to </p>\n\n<pre><code>while ( y&lt;year);// y&lt;year because y is initialized to 0\n</code></pre>\n\n<h2>EDIT</h2>\n\n<p>Didn't really understand why you used this loop -</p>\n\n<pre><code>for(y = 1; y&lt;= year; y++)\nprintf(\"%5d %11.2f %5.2f\\n\", y, i, sum);\n</code></pre>\n\n<p>It will print same value in every iteration. If you want to print <code>interst</code> and <code>sum</code> value for every  year you should just use the <code>printf</code>  statement inside the above <code>while loop</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1163, "user_id": 2443844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/30b6ef0de1c372e61d35fd94cd6d91d8?s=128&d=identicon&r=PG", "display_name": "rfreytag", "link": "https://stackoverflow.com/users/2443844/rfreytag"}, "is_accepted": false, "score": 0, "last_activity_date": 1438166552, "creation_date": 1438166552, "answer_id": 31698200, "question_id": 31698072, "link": "https://stackoverflow.com/questions/31698072/why-this-loop-does-not-iterate-during-second-run/31698200#31698200", "title": "Why this loop does not iterate during second run?", "body": "<p>your do while() loop only runs once, since one of the conditions is \"y == 1\" which will evaluate to false after you increment y, thus the loops stops.\nYou also don increment y anywhere and since it's initialized to 0 it also doesn't satisfy the condition.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5159663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865d7cce54058470affe7f2b200d0006?s=128&d=identicon&r=PG&f=1", "display_name": "Papid", "link": "https://stackoverflow.com/users/5159663/papid"}, "edited": false, "score": 0, "creation_date": 1438168277, "post_id": 31698483, "comment_id": 51336747, "body": "Yes Himanshu, that&#39;s almost exactly what I did after I read above posts. Anyway thank you very much."}], "tags": [], "owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "is_accepted": false, "score": 0, "last_activity_date": 1438167674, "last_edit_date": 1438167674, "creation_date": 1438167324, "answer_id": 31698483, "question_id": 31698072, "link": "https://stackoverflow.com/questions/31698072/why-this-loop-does-not-iterate-during-second-run/31698483#31698483", "title": "Why this loop does not iterate during second run?", "body": "<p>I think you need something like this.  </p>\n\n<pre><code>int y = 1;  // initialize with 1\nprintf(\"   Year  Interest  Sum\\n\");\nprintf(\"--------+--------+--------\\n\");\ndo\n{   \n    i = (sum * interest)/100; // it will calculate sum+interest for 1 year.\n    sum += i;\n    y++;\n    printf(\"%5d %11.2f %5.2f\\n\", y, i, sum);\n}   \nwhile (y &lt;= year);  // you can compare y &gt; 0 also in case you kept y = 0\nprintf(\"Original sum %0.0f at %0.1f rate for %d years:\\n\\n\", sum, interest, year);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5159663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/865d7cce54058470affe7f2b200d0006?s=128&d=identicon&r=PG&f=1", "display_name": "Papid", "link": "https://stackoverflow.com/users/5159663/papid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1438167674, "creation_date": 1438166211, "last_edit_date": 1438166467, "question_id": 31698072, "link": "https://stackoverflow.com/questions/31698072/why-this-loop-does-not-iterate-during-second-run", "title": "Why this loop does not iterate during second run?", "body": "<p>I am C novice and got stuck with the following problem. Can somebody explain what is wrong with the loop to count interest and a sum? Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/*simple interest rate calculator */\n\nint main()\n{\n    int year, y;\n    float sum, interest, i; // i = interest after iteration\n    y = 0; \n    i = 0;\n\n    printf(\"Provide a sum you want to invest(in pence):\\n\");\n    scanf(\"%f\", &amp;sum);\n    printf(\"Provide interest rate:\\n\");\n    scanf(\"%f\", &amp;interest);\n    printf(\"For how long would you like to save(in years):\\n\");\n    scanf(\"%d\", &amp;year);\n\n    /*for(y = 1; y &lt;= year; y++)\n    i = sum * interest/100;\n    sum += i; */ \n\n    do\n    {   \n      i = sum * interest/100;\n      sum += i;\n    }   \n    while (y == 1 &amp;&amp; y&lt;= year);\n\n    printf(\"Original sum %0.0f at %0.1f rate for %d years:\\n\\n\", sum,    interest, year);\n    printf(\"   Year  Interest  Sum\\n\");\n    printf(\"--------+--------+--------\\n\");\n   for(y = 1; y&lt;= year; y++)\n       printf(\"%5d %11.2f %5.2f\\n\", y, i, sum);\n\n   return 0;\n\n  } \n</code></pre>\n\n<p>The output is:\nOriginal sum 33750 at 12.5 rate for 10 years:</p>\n\n<p>Year  Interest  Sum<br>\n--------+--------+--------<br>\n    1     3750.00 33750.00<br>\n    2     3750.00 33750.00<br>\n    3     3750.00 33750.00<br>\n    4     3750.00 33750.00<br>\n    5     3750.00 33750.00<br>\n    6     3750.00 33750.00<br>\n    7     3750.00 33750.00<br>\n    8     3750.00 33750.00<br>\n    9     3750.00 33750.00<br>\n   10     3750.00 33750.00  </p>\n\n<p>and with every line it should take a new sum and calculate accordingly.</p>\n\n<p>Thanks very much for any hints.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1438165675, "last_edit_date": 1438165675, "creation_date": 1438165333, "answer_id": 31697732, "question_id": 31697661, "link": "https://stackoverflow.com/questions/31697661/memory-allocation-for-int-array-set-in-method/31697732#31697732", "title": "Memory allocation for int array, set in method", "body": "<p>There will be a memory leak because the address of the memory allocated in statement</p>\n\n<pre><code>int* my_array = malloc(sizeof(int)*10);\n</code></pre>\n\n<p>will be lost after this assignment</p>\n\n<pre><code>my_array = get_filled_array();\n</code></pre>\n\n<p>And the memory previously allocated can not be freed.</p>\n\n<p>Thus before calling <code>get_filled_array</code> you have to free the already allocated memory</p>\n\n<pre><code>int* my_array = malloc(sizeof(int)*10);\n//...\nfree( my_array );\nmy_array = get_filled_array();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1438165358, "creation_date": 1438165358, "answer_id": 31697740, "question_id": 31697661, "link": "https://stackoverflow.com/questions/31697661/memory-allocation-for-int-array-set-in-method/31697740#31697740", "title": "Memory allocation for int array, set in method", "body": "<p>If you do</p>\n\n<pre><code>my_array = malloc(...);\nmy_array = ...;\n</code></pre>\n\n<p>The old value of <code>my_array</code> (the address of the block allocated by <code>malloc</code>) is overwritten and lost. This is called a <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow\">\"memory leak\"</a> (it can't be <code>free</code>d because the program doesn't know where it is anymore).</p>\n\n<p>If you want to do it like that, just use</p>\n\n<pre><code>int *my_array = get_filled_array();\n</code></pre>\n\n<p>There's no need to call <code>malloc</code> twice.</p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1438165976, "creation_date": 1438165976, "answer_id": 31697981, "question_id": 31697661, "link": "https://stackoverflow.com/questions/31697661/memory-allocation-for-int-array-set-in-method/31697981#31697981", "title": "Memory allocation for int array, set in method", "body": "<p>Render unto <code>free(.)</code> everything <code>malloc(.)</code> rendered unto thee.</p>\n\n<p>That is, you must call <code>free(.)</code> on anything you got from <code>malloc(.)</code>.</p>\n\n<p>Your code fails to <code>free(.)</code> the pointer returned by the first <code>malloc(.)</code></p>\n\n<p>Code like this:</p>\n\n<pre><code> int * my_array = get_filled_array();\n\n //All code using `my_arrray` must in or called from this section...\n\n\n free(my_array);\n</code></pre>\n\n<p>Consider calling the function <code>malloc_filled_array(.)</code> so its action in allocating memory is obvious.</p>\n\n<p>If you're just zero filling you will probably prefer to use <code>calloc(.)</code> that does it for you and on many platforms will be more efficient if that matters.</p>\n\n<p>NB: You also need to call <code>free(.)</code> on values returned by <code>calloc(.)</code> and <code>realloc(.)</code>.</p>\n\n<p>Finally, it can sometimes be acceptable to just let the program end without calling <code>free(.)</code> and you're assured the run-time / operating system will just recover any allocated memory during termination. If you do that in a program that has a loop it might keep allocating more memory and run out even though it isn't really using everything it allocated.</p>\n\n<p>It is not a recommended strategy unless absolutely necessary as it tends to mask leak problems with the program.</p>\n"}], "owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 31697740, "answer_count": 3, "score": 1, "last_activity_date": 1438165976, "creation_date": 1438165136, "last_edit_date": 1438165846, "question_id": 31697661, "link": "https://stackoverflow.com/questions/31697661/memory-allocation-for-int-array-set-in-method", "title": "Memory allocation for int array, set in method", "body": "<p>I am quite new in C and I have a question about understanding one memory allocation issue:</p>\n\n<p>So lets say I allocate memory for an int array:</p>\n\n<pre><code> int* my_array = malloc(sizeof(int)*10);\n</code></pre>\n\n<p>Now I know that a memory block of the given size has been allocated at position '&amp;my_array[0]' (or just my_array).</p>\n\n<p>SO:</p>\n\n<p>If I know call a method to fill my array, I KNOW I should give as a parameter the pointer to my array in order to fill it, so something like:</p>\n\n<pre><code>void fill_array(int* array) {//..do something}\nfill_array(my_array);\n</code></pre>\n\n<p>But I was wondering, what would happen, if the method itself allocates another memory block and I then try to set those equal, so what I mean is:</p>\n\n<pre><code>int* get_filled_array() {\n\n    int* result_array = malloc(sizeof(int)*10);\n    //fill it somehow...\n\n  return result_array;\n}\n</code></pre>\n\n<p>And then I set it like:</p>\n\n<pre><code> int* my_array = malloc(sizeof(int)*10);\n my_array = get_filled_array();\n</code></pre>\n\n<p>Does the memory of my_array gets removed or what is happens? I quess it is wrong this way but was just wondering. \nI quess if I want to do it like this, I should create an temporary array, get the returned array of (get_filled_array() and then set my_array and the temporary equal, so I can later free the memory of both?</p>\n"}, {"tags": ["c", "linux", "operating-system", "unix-timestamp", "timestamp-with-timezone"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438169215, "post_id": 31697393, "comment_id": 51337335, "body": "Using a timestamp, regardless of precision, may still collide.  Use <code>tmpnam()</code>. to &quot;generates a string that is a valid file name and that is not the same as the name of an existing file&quot;  Also <code>tmpfile_s()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1438233523, "post_id": 31697393, "comment_id": 51368732, "body": "Note that, in Linux, an &#39;inode&#39; is 4k and each file data block is 4k.   So making a bunch of 2k byte files is extremely wasteful of the disk space.  suggest: save to a new file in 4096 byte chunks"}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "is_accepted": false, "score": 0, "last_activity_date": 1438166685, "last_edit_date": 1438166685, "creation_date": 1438166124, "answer_id": 31698045, "question_id": 31697393, "link": "https://stackoverflow.com/questions/31697393/in-c-how-to-get-full-timestamp-even-after-seconds-in-linux/31698045#31698045", "title": "In C, How to get full timestamp (even after seconds) in linux?", "body": "<p>Use <code>date --rfc-3339='ns'</code> command to see the o/p in nanoseconds precision. You can try looking <code>\"man date\"</code> command for finer details. As you can see, following is the o/p I get with this command:</p>\n\n<pre><code>[user1@mach]# date --rfc-3339='ns'\n2015-07-29 03:34:09.077024060-07:00\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 4, "last_activity_date": 1438171218, "last_edit_date": 1438171218, "creation_date": 1438166996, "answer_id": 31698348, "question_id": 31697393, "link": "https://stackoverflow.com/questions/31697393/in-c-how-to-get-full-timestamp-even-after-seconds-in-linux/31698348#31698348", "title": "In C, How to get full timestamp (even after seconds) in linux?", "body": "<p>Linux has <a href=\"http://linux.die.net/man/3/clock_gettime\" rel=\"nofollow\"><code>clock_gettime()</code></a> with nanosecond resolution.</p>\n\n<p>Example code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(void) {\n    unsigned mult = 0;\n    struct timespec t0, t1;\n    clock_gettime(CLOCK_REALTIME, &amp;t0);\n    for (unsigned k = 0; k &lt; 10000000; k++) mult *= k; // no overflow!\n    clock_gettime(CLOCK_REALTIME, &amp;t1);\n\n    printf(\"%lld.%09ld --&gt; %lld.%09ld\\n\",\n          (long long)t0.tv_sec, t0.tv_nsec,\n          (long long)t1.tv_sec, t1.tv_nsec);\n    return 0;\n}\n</code></pre>\n\n<p>On my machine (FreeBSD/Unix but should be the same as any Linux), the code above prints</p>\n\n<pre>1438167485.022409606 --> 1438167485.055779608</pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438170291, "post_id": 31699085, "comment_id": 51338006, "body": "Concerning <code>sprintf(filename,&quot;%lu&quot;,time);</code>, Does <code>Linux specify </code>time_t` to be a <code>unsigned long</code>?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1438171890, "post_id": 31699085, "comment_id": 51339190, "body": "@chux: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.27.1\" rel=\"nofollow noreferrer\">the Standard says</a> that <code>time_t</code> (and <code>clock_t</code>) <i>&quot;are real types capable of representing times&quot;</i>. <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_types.h.html\" rel=\"nofollow noreferrer\">POSIX extends the Standard</a> with <i>&quot;clock_t shall be an integer or real-floating type. [CX] [Option Start] time_t shall be an integer type. [Option End]&quot;</i>. <b>Anyway ... a conversion is required to print it</b> <code>printf(&quot;%lu&quot;, (unsigned long)time);</code>"}], "tags": [], "owner": {"reputation": 181, "user_id": 3156498, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/uxcBm.jpg?s=128&g=1", "display_name": "Venkatesh Parthasarathy", "link": "https://stackoverflow.com/users/3156498/venkatesh-parthasarathy"}, "is_accepted": false, "score": 1, "last_activity_date": 1438168998, "creation_date": 1438168998, "answer_id": 31699085, "question_id": 31697393, "link": "https://stackoverflow.com/questions/31697393/in-c-how-to-get-full-timestamp-even-after-seconds-in-linux/31699085#31699085", "title": "In C, How to get full timestamp (even after seconds) in linux?", "body": "<p>Example code to create a filename string with millisecond timestamp:</p>\n\n<blockquote>\n  <p>get_time_in_ms.c</p>\n</blockquote>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;time.h&gt;\n\nvoid get_time_in_ms()\n{\n    long ms;\n    time_t time;\n    struct timespec spec;\n    char filename[14];\n\n    clock_gettime(CLOCK_REALTIME, &amp;spec);\n\n    time  = spec.tv_sec;\n    ms = round(spec.tv_nsec / 1000000 ); // Convert nanoseconds to milliseconds\n\n    printf(\"Current time: %lu.%03ld seconds since the Epoch\\n\", time, ms);\n    sprintf(filename,\"%lu%03ld\",time, ms);\n    printf(\"File name : %s\\n\", filename);\n}\n\nvoid main() {\n        get_time_in_ms();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ gcc -Wl,--no-as-needed -lrt -lm get_time_in_ms.c -o get_time_in_ms\n$ date &amp;&amp; get_time_in_ms\n\nWed Jul 29 16:51:20 IST 2015\n\nCurrent time: 1438168880.503 seconds since the Epoch\n\nFile name : 1438168880503\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3970925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae0f2cb259f8034296822535e84a91f3?s=128&d=identicon&r=PG&f=1", "display_name": "Devendar", "link": "https://stackoverflow.com/users/3970925/devendar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 0, "accepted_answer_id": 31698348, "answer_count": 3, "score": 0, "last_activity_date": 1438171218, "creation_date": 1438164542, "last_edit_date": 1438169376, "question_id": 31697393, "link": "https://stackoverflow.com/questions/31697393/in-c-how-to-get-full-timestamp-even-after-seconds-in-linux", "title": "In C, How to get full timestamp (even after seconds) in linux?", "body": "<p>I get a stream of bytes, after each 2000 bytes, I want to create a new file and store it. as it is a continuous stream of bytes, I cant use counter etc. \nSo, I want to use system time stamp to identify file uniquely like <code>filename</code>.</p>\n\n<p>I found some threads to get system time stamp, but there I am seeing till seconds. Is there any other way, with which we can get full timestamp in C, linux OS (<code>timestmap like: 2011-11-08 18:02:08.954092000</code>)?\nIn all thread, I am seeing only till seconds like <code>2011-11-08 18:02:08</code></p>\n"}, {"tags": ["c", "libssh"], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 1123335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvTBl.jpg?s=128&g=1", "display_name": "pnorton", "link": "https://stackoverflow.com/users/1123335/pnorton"}, "is_accepted": false, "score": 0, "last_activity_date": 1438176656, "creation_date": 1438176656, "answer_id": 31701917, "question_id": 31697261, "link": "https://stackoverflow.com/questions/31697261/how-to-do-double-authentication-using-libssh-module/31701917#31701917", "title": "How to do double authentication using libssh module?", "body": "<p>What version of \n<strong>libssh</strong> do you have?  </p>\n\n<p>\"versions 0.5.1 and above have a logical error in the handling of a SSH_MSG_NEWKEYS and SSH_MSG_KEXDH_REPLY package. A detected error did not set the session into the error state correctly and further processed the packet which leads to a null pointer dereference. This is the packet after the initial key exchange and doesn\u2019t require authentication.\"</p>\n\n<p>Ref <a href=\"https://www.libssh.org/2015/04/30/libssh-0-6-5-security-and-bugfix-release/\" rel=\"nofollow\">libssh</a></p>\n"}], "owner": {"reputation": 269, "user_id": 1160201, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c0b79a263cb733a3438272c9f6c7d1f2?s=128&d=identicon&r=PG", "display_name": "Bala", "link": "https://stackoverflow.com/users/1160201/bala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438176656, "creation_date": 1438164219, "question_id": 31697261, "link": "https://stackoverflow.com/questions/31697261/how-to-do-double-authentication-using-libssh-module", "title": "How to do double authentication using libssh module?", "body": "<p>My SSH server uses double authtication. I do not know how its implemented. But initially its asks for a password, then again asks for another password to login to a separate console which is different from usual control.</p>\n\n<p>My code is similar to the example code shown in the documentations,</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;libssh/libssh.h&gt;\n\n\nint main(int argc, char * argv[])\n{\n    ssh_session my_ssh_session = ssh_new();\n    int rc;\n    char * password;\n    char * username = \"admin\";\n    // Check if ssh session exists.\n    if(my_ssh_session == NULL)    \n    {\n        exit(-1);\n    }\n\n    ssh_options_set(my_ssh_session, SSH_OPTIONS_HOST, \"x.x.x.x\");\n\n    rc = ssh_connect(my_ssh_session);\n    if (rc != SSH_OK)\n    {\n        fprintf(stderr, \"Error Connecting to Server: %s.\\n\", ssh_get_error(my_ssh_session));    \n        exit(-1);\n    }\n\n    password = getpass(\"Password: \");\n    rc = ssh_userauth_password(my_ssh_session, username, password);\n    if (rc != SSH_AUTH_SUCCESS)\n    {\n        fprintf(stderr, \"ERROR Authenticating: %s.\\n\", ssh_get_error(my_ssh_session));\n        ssh_disconnect(my_ssh_session);\n        ssh_free(my_ssh_session);\n    }\n    else\n    {\n        printf(\"Authentication Successful.\\n\");\n    }\n\n    ssh_free(my_ssh_session);\n}\n</code></pre>\n\n<p>How do i implement a double authtication in this ? can you kindly help me out ? </p>\n"}, {"tags": ["c", "winapi", "readfile"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438165288, "post_id": 31697229, "comment_id": 51334834, "body": "I suppose you get the error after the 1st <code>if</code>. You cannot read from a drive lettre simply like that."}, {"owner": {"reputation": 77, "user_id": 5165007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9fe2b354a1b1ad8e66e918651cdde3?s=128&d=identicon&r=PG&f=1", "display_name": "Xyz Abc", "link": "https://stackoverflow.com/users/5165007/xyz-abc"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438165460, "post_id": 31697229, "comment_id": 51334965, "body": "No, I don&#39;t, I&#39;m talking about ReadFile function. And yes, I can read from a drive like that."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 4, "creation_date": 1438165500, "post_id": 31697229, "comment_id": 51334990, "body": "BUFFERSIZE-1 is wrong.  You cannot count on the file system cache when you read raw data from a disk drive.  Supported alignment depends on the file system, 4096 is a nice round number.  You must also specify FILE_SHARE_WRITE in the CreateFile() call.  And you&#39;ll need to make a lot more noise when CreateFile() fails, assert() does not cut it."}, {"owner": {"reputation": 77, "user_id": 5165007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9fe2b354a1b1ad8e66e918651cdde3?s=128&d=identicon&r=PG&f=1", "display_name": "Xyz Abc", "link": "https://stackoverflow.com/users/5165007/xyz-abc"}, "edited": false, "score": 0, "creation_date": 1438165729, "post_id": 31697229, "comment_id": 51335140, "body": "Wow, that was it, thank you!"}, {"owner": {"reputation": 77, "user_id": 5165007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9fe2b354a1b1ad8e66e918651cdde3?s=128&d=identicon&r=PG&f=1", "display_name": "Xyz Abc", "link": "https://stackoverflow.com/users/5165007/xyz-abc"}, "edited": false, "score": 0, "creation_date": 1438166974, "post_id": 31697229, "comment_id": 51335908, "body": "Could you explain though (or give a source) why I can&#39;t count on the file system cache when I read data from a disk drive?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1438167306, "post_id": 31697229, "comment_id": 51336122, "body": "Raw reads from a device must be a multiple of the block size."}], "answers": [{"tags": [], "owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "is_accepted": false, "score": 4, "last_activity_date": 1438213154, "last_edit_date": 1592644375, "creation_date": 1438212368, "answer_id": 31712818, "question_id": 31697229, "link": "https://stackoverflow.com/questions/31697229/readfile-function-returns-error-invalid-parameter/31712818#31712818", "title": "ReadFile function returns ERROR_INVALID_PARAMETER", "body": "<p>This is described in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation for CreateFile</a>:</p>\n<blockquote>\n<p>Volume handles can be opened as noncached at the discretion of the particular file system, even when the noncached option is not specified in CreateFile. You should assume that all Microsoft file systems open volume handles as noncached.</p>\n</blockquote>\n<p>The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/cc644950(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MSDN article on File Buffering</a> describes the requirements for noncached handles:</p>\n<blockquote>\n<p>File access sizes, including the optional file offset in the OVERLAPPED structure, if specified, must be for a number of bytes that is an integer multiple of the volume sector size. For example, if the sector size is 512 bytes, an application can request reads and writes of 512, 1,024, 1,536, or 2,048 bytes, but not of 335, 981, or 7,171 bytes.</p>\n<p>File access buffer addresses for read and write operations should be physical sector-aligned, which means aligned on addresses in memory that are integer multiples of the volume's physical sector size. Depending on the disk, this requirement may not be enforced.</p>\n</blockquote>\n<p>Rigorous code should check the sector size for the file system in question, then use <a href=\"https://stackoverflow.com/questions/7616719/win32-memory-allocation-with-large-alignment\">this approach</a> to allocate the memory.  However, in my experience, the sector size has always been less than or equal to the allocation granularity, so you can get away with just using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx\" rel=\"nofollow noreferrer\">VirtualAlloc()</a> to allocate a memory block.</p>\n"}, {"tags": [], "owner": {"reputation": 166, "user_id": 1755797, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8313aedbacf84a5ab51be095d95d6ef2?s=128&d=identicon&r=PG", "display_name": "Andre", "link": "https://stackoverflow.com/users/1755797/andre"}, "is_accepted": false, "score": 0, "last_activity_date": 1488640612, "creation_date": 1488640612, "answer_id": 42597618, "question_id": 31697229, "link": "https://stackoverflow.com/questions/31697229/readfile-function-returns-error-invalid-parameter/42597618#42597618", "title": "ReadFile function returns ERROR_INVALID_PARAMETER", "body": "<p>buffer size needs to be aligned with hdd sectorsize</p>\n\n<pre><code>WIN32_FIND_DATA atr = {0};\nDWORD BYTES_PER_SECTOR;\nchar path[MAX_PATH];\n\n/* get path length current dir */\nconst size_t len = GetCurrentDirectory(0, 0); \n\n/* set path to path char array */\nGetCurrentDirectory(len, path);\n\n/* windows function to get disk details */\nGetDiskFreeSpace(NULL, NULL, &amp;BYTES_PER_SECTOR, NULL, NULL); \n\n/* find first file in dir */\nfind = FindFirstFile(path, &amp;atr);\n\nfor(;find != INVALID_HANDLE_VALUE;){\n\n/* get the file size */\nDWORD filesize = atr.nFileSizeLow;\n  if(atr.nFileSizeHigh &gt; 0){\n                     filesize = atr.nFileSizeHigh;\n                     filesize = (filesize &lt;&lt; 31);\n                     filesize = atr.nFileSizeLow;\n                     }\n /* sector size aligned file size */\n size_t buffer_size = ((BYTES_PER_SECTOR + ((filesize + BYTES_PER_SECTOR)-1)) &amp; ~(BYTES_PER_SECTOR -1));\n\n /* create buffer */\n DWORD buffer[buffer_size];                                                       \n\n /* create a new file or open an existing file */\n handle =   CreateFile(&amp;path[0], GENERIC_READ | GENERIC_WRITE, 0 , NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL | FILE_FLAG_NO_BUFFERING, NULL))!=INVALID_HANDLE_VALUE)\n\n /* read the file in to buffer */\n ReadFile(handle, (void*)&amp;buffer, buffer_size, &amp;bytesread, NULL)\n\nif(FindNextFile(find, &amp;atr)==0){ printf(\"last file processed, leaving\\n\");break;};\n } \n CloseHandle(file);\n FindClose(find);\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5165007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9fe2b354a1b1ad8e66e918651cdde3?s=128&d=identicon&r=PG&f=1", "display_name": "Xyz Abc", "link": "https://stackoverflow.com/users/5165007/xyz-abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3285, "favorite_count": 3, "answer_count": 2, "score": 3, "last_activity_date": 1488640612, "creation_date": 1438164113, "question_id": 31697229, "link": "https://stackoverflow.com/questions/31697229/readfile-function-returns-error-invalid-parameter", "title": "ReadFile function returns ERROR_INVALID_PARAMETER", "body": "<p>I'm trying to get to work ReadFile function. Here's my code:</p>\n\n<pre><code>#define BUFFERSIZE 5\n\nint main(int argc, char* argv[])\n{\n    OVERLAPPED overlapIn = {};\n    HANDLE tHandle;\n    char buf[BUFFERSIZE] = {};\n    DWORD  lpNumberOfBytesRead;\n\n    tHandle = CreateFile(\n        L\"\\\\\\\\.\\\\D:\",\n        GENERIC_READ,\n        FILE_SHARE_READ,\n        NULL,\n        OPEN_EXISTING,\n        FILE_ATTRIBUTE_NORMAL,\n        NULL);\n\n    if (tHandle == INVALID_HANDLE_VALUE)\n    {\n        DWORD error = GetLastError();\n        assert(0);\n    }\n\n    if (ReadFile(tHandle, &amp;buf, BUFFERSIZE - 1, &amp;lpNumberOfBytesRead, NULL) == 0)\n    {\n        int error = GetLastError();\n        printf(\"Terminal failure: Unable to read from disk.\\n GetLastError=%d\\n\", error);\n        CloseHandle(tHandle);\n        return 1;\n    }\n</code></pre>\n\n<p>The GetLastError function returns code 87, which is ERROR_INVALID_PARAMETER.</p>\n\n<p>It's clear that one of the parameters is wrong, but I have no idea which one, since I tried to do everything like it's written in the documentation.</p>\n"}, {"tags": ["c", "multithreading", "algorithm", "pthreads", "gaussian"], "comments": [{"owner": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 0, "creation_date": 1438169304, "post_id": 31697173, "comment_id": 51337386, "body": "Can&#39;t you use OpenMP?  Find out yourself how the algorithm works and which dependencies there are in the data.  You can then determine which part of the iterations can be parallelised.  It&#39;s uncommon here to expect other people to sort this all out for you.  Start with wikipedia for example."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1438174537, "post_id": 31697173, "comment_id": 51341054, "body": "This algorithm breaks down if you have as much as a zero on the main diagonal."}, {"owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "edited": false, "score": 2, "creation_date": 1438174839, "post_id": 31697173, "comment_id": 51341220, "body": "<a href=\"http://parallelcomp.uw.hu/ch08lev1sec3.html\" rel=\"nofollow noreferrer\">parallelcomp.uw.hu/ch08lev1sec3.html</a>  explains how to perform the algorithm in parallel with 1D and 2D partitioning"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3319128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc77e10535a8a7595bc5ae2fbf999cc9?s=128&d=identicon&r=PG&f=1", "display_name": "user3319128", "link": "https://stackoverflow.com/users/3319128/user3319128"}, "edited": false, "score": 0, "creation_date": 1438686649, "post_id": 31700673, "comment_id": 51540919, "body": "I implemented above algo but its not performing as expected. I performed dry run but unable to locate the flaw in logic. Probably it is in function named as thread_subroutine The code is at <a href=\"https://www.dropbox.com/s/zus28j07rf4vpfk/testing_gauss_paral.c?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/zus28j07rf4vpfk/testing_gauss_paral.c?dl=0</a>  Can you please help me locating it.."}, {"owner": {"reputation": 25, "user_id": 3319128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc77e10535a8a7595bc5ae2fbf999cc9?s=128&d=identicon&r=PG&f=1", "display_name": "user3319128", "link": "https://stackoverflow.com/users/3319128/user3319128"}, "edited": false, "score": 0, "creation_date": 1438854767, "post_id": 31700673, "comment_id": 51624841, "body": "sorry, now working at :  <a href=\"https://www.dropbox.com/s/riilmbbtr74jwfe/gaussian_para_test_6AUG.c?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/riilmbbtr74jwfe/gaussian_para_test_6AUG.c?dl=0</a>"}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "reply_to_user": {"reputation": 25, "user_id": 3319128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc77e10535a8a7595bc5ae2fbf999cc9?s=128&d=identicon&r=PG&f=1", "display_name": "user3319128", "link": "https://stackoverflow.com/users/3319128/user3319128"}, "edited": false, "score": 0, "creation_date": 1438868938, "post_id": 31700673, "comment_id": 51634530, "body": "@user3319128: The <code>phase1_barrier</code> needs to be initialized to <code>CPU_THREADS + 1</code> because the main thread waits on it too."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "reply_to_user": {"reputation": 25, "user_id": 3319128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc77e10535a8a7595bc5ae2fbf999cc9?s=128&d=identicon&r=PG&f=1", "display_name": "user3319128", "link": "https://stackoverflow.com/users/3319128/user3319128"}, "edited": false, "score": 0, "creation_date": 1438869688, "post_id": 31700673, "comment_id": 51635082, "body": "@user3319128: I&#39;m also unclear on why you have the dance with <code>task_distributor()</code> and <code>tnode.cols</code> - why not just have the loop as <code>for (j = k+1+(thread_num); j &lt; N; j += CPU_THREADS)</code> and leave <code>thread_num</code> the same?"}], "tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 3, "last_activity_date": 1438174126, "last_edit_date": 1438174126, "creation_date": 1438173594, "answer_id": 31700673, "question_id": 31697173, "link": "https://stackoverflow.com/questions/31697173/parallel-implementation-of-gauss-elimination-with-pthreads/31700673#31700673", "title": "Parallel implementation of Gauss Elimination with pthreads", "body": "<p>The work for each row in the matrix requires all the previous rows to be finished, so you can't divide up the work that way.</p>\n\n<p>However, within a single row, each column can be processed in parallel (with the caveat that original value of the <code>k</code>-th column must be saved and used in the calculation of the other columns).  This corresponds to your <code>j</code> values.</p>\n\n<p>I believe you can rearrange the algorithm to make this easier, so that there's only one loop over <code>j</code>:</p>\n\n<pre><code>procedure GAUSSIAN ELIMINATION (A, b, y)\nbegin\n    for k := 0 to n \u2212 1 do /* Outer loop */\n    begin\n        for j := k + 1 to n \u2212 1 do\n        begin\n            A[k, j] := A[k, j]/A[k, k]; /* Division step */\n            for i := k + 1 to n \u2212 1 do\n                A[i, j] := A[i, j] \u2212 A[i, k] \u00d7 A[k, j]; /* Elimination step */\n        endfor;\n        y[k] := b[k]/A[k, k];\n        A[k, k] := 1;\n        for i := k + 1 to n \u2212 1 do\n        begin\n            b[i] := b[i] \u2212 A[i, k] \u00d7 y[k];\n            A[i, k] := 0;\n        endfor;\n    endfor;\nend GAUSSIAN ELIMINATION\n</code></pre>\n\n<p>Note that the body of the loop over <code>j</code> only accesses values in columns <code>j</code> and <code>k</code> - this is the loop that can be done in parallel.  You can then further note that the second part of the outer loop does not depend on the first part, so you can break the outer loop into two:</p>\n\n<pre><code>procedure GAUSSIAN ELIMINATION (A, b, y)\nbegin\n    for k := 0 to n \u2212 1 do /* Outer loop */\n    begin\n        for j := k + 1 to n \u2212 1 do\n        begin\n            A[k, j] := A[k, j]/A[k, k]; /* Division step */\n            for i := k + 1 to n \u2212 1 do\n                A[i, j] := A[i, j] \u2212 A[i, k] \u00d7 A[k, j]; /* Elimination step */\n        endfor;\n    endfor;\n\n    for k := 0 to n \u2212 1 do /* Outer loop, second pass */\n    begin\n        y[k] := b[k]/A[k, k];\n        A[k, k] := 1;\n        for i := k + 1 to n \u2212 1 do\n        begin\n            b[i] := b[i] \u2212 A[i, k] \u00d7 y[k];\n            A[i, k] := 0;\n        endfor;\n    endfor;\nend GAUSSIAN ELIMINATION\n</code></pre>\n\n<p>You can create threads up front, each one responsible for executing the loop over <code>j</code> for a subset of the <code>j</code> values from <code>0</code> to <code>n - 1</code>.  These threads will need a synchronisation barrier after each row is processed, because the results of all columns for the previous row are required to process the next row.  You can use <code>pthread_barrier_wait()</code> for this.</p>\n\n<p>You will note that not every column (value of <code>j</code>) has equal work.  Column <code>j</code> is processed by that loop <code>j</code> times (so column 0 executes 0 times, and column <code>n - 1</code> executes <code>n - 1</code> times).  You will want to assign column numbers to threads so that each thread has as close to equal work to do for each row as possible - this can be done by assigning the columns in round-robin fashion.  Eg. if you have three threads A, B and C and 10 columns from 0 to 9, you would assign them:</p>\n\n<pre><code>Thread A: 0, 3, 6, 9\nThread B: 1, 4, 7,\nThread C: 2, 5, 8,\n</code></pre>\n\n<p>The thread function would then look something like:</p>\n\n<pre><code>for k := 0 to n \u2212 1 do /* Outer loop */\nbegin\n    call pthread_barrier_wait(row_barrier);\n    for j := k + 1 + thread_number to n \u2212 1 step n_threads do\n    begin\n        A[k, j] := A[k, j]/A[k, k]; /* Division step */\n        for i := k + 1 to n \u2212 1 do\n            A[i, j] := A[i, j] \u2212 A[i, k] \u00d7 A[k, j]; /* Elimination step */\n    endfor;\nendfor;\n\ncall pthread_barrier_wait(phase1_barrier);\n</code></pre>\n\n<p>and the main function would look something like:</p>\n\n<pre><code>procedure GAUSSIAN ELIMINATION (A, b, y)\nbegin\n    call start_threads;\n    call pthread_barrier_wait(phase1_barrier);\n\n    for k := 0 to n \u2212 1 do /* Outer loop, second pass */\n    begin\n        y[k] := b[k]/A[k, k];\n        A[k, k] := 1;\n        for i := k + 1 to n \u2212 1 do\n        begin\n            b[i] := b[i] \u2212 A[i, k] \u00d7 y[k];\n            A[i, k] := 0;\n        endfor;\n    endfor;\nend GAUSSIAN ELIMINATION\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3319128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc77e10535a8a7595bc5ae2fbf999cc9?s=128&d=identicon&r=PG&f=1", "display_name": "user3319128", "link": "https://stackoverflow.com/users/3319128/user3319128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2981, "favorite_count": 1, "accepted_answer_id": 31700673, "answer_count": 1, "score": 0, "last_activity_date": 1438174126, "creation_date": 1438163979, "last_edit_date": 1438170588, "question_id": 31697173, "link": "https://stackoverflow.com/questions/31697173/parallel-implementation-of-gauss-elimination-with-pthreads", "title": "Parallel implementation of Gauss Elimination with pthreads", "body": "<p>I need to implement parallel version of following Gauss elimination algorithm using pthreads. </p>\n\n<pre><code>procedure GAUSSIAN ELIMINATION (A, b, y)\nbegin\n    for k := 0 to n \u2212 1 do /* Outer loop */\n    begin\n        for j := k + 1 to n \u2212 1 do\n            A[k, j] := A[k, j]/A[k, k]; /* Division step */\n        y[k] := b[k]/A[k, k];\n        A[k, k] := 1;\n        for i := k + 1 to n \u2212 1 do\n        begin\n            for j := k + 1 to n \u2212 1 do\n                A[i, j] := A[i, j] \u2212 A[i, k] \u00d7 A[k, j]; /* Elimination step */\n            b[i] := b[i] \u2212 A[i, k] \u00d7 y[k];\n            A[i, k] := 0;\n        endfor; /* Line 9 */\n    endfor; /* Line 3 */\nend GAUSSIAN ELIMINATION\n</code></pre>\n\n<p>I understand the sequential implementation and pthreads but not getting a single hint on how to construct logic for parallel version of it (Thread work distribution criteria, which loops to parallelize etc). Any clue or starting point would help me to continue.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1438164699, "post_id": 31697156, "comment_id": 51334426, "body": "Yes, your written method is possible to realise.  Have you actually tried to code your algorithm yet?  If no, I suggest you give it a go and if you get stuck, ask us about it.  If yes, tell us how far you got and where you are stuck and we should be able to help you."}, {"owner": {"reputation": 107, "user_id": 5168204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ee1e55433c358291c311739fac76c11?s=128&d=identicon&r=PG&f=1", "display_name": "paxie", "link": "https://stackoverflow.com/users/5168204/paxie"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1438167002, "post_id": 31697156, "comment_id": 51335935, "body": "yes i will try to do it but as somebody below mentioned i think its just uneffective."}, {"owner": {"reputation": 107, "user_id": 5168204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ee1e55433c358291c311739fac76c11?s=128&d=identicon&r=PG&f=1", "display_name": "paxie", "link": "https://stackoverflow.com/users/5168204/paxie"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1438178567, "post_id": 31697156, "comment_id": 51344111, "body": "@JeremyP  im trying to code it right now but i need to find some command which will assign a char from file on given position to variable. Like for example in my file there are names Paul Peter and from that file i want to assignt char &quot;t&quot; to variable c , something like c = fgetc[7] so c will store char &quot;t&quot; but fgetc doesnt work"}], "answers": [{"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": true, "score": 0, "last_activity_date": 1438164517, "creation_date": 1438164517, "answer_id": 31697385, "question_id": 31697156, "link": "https://stackoverflow.com/questions/31697156/finding-a-string-in-a-file-c/31697385#31697385", "title": "Finding a string in a file [C]", "body": "<p>I suggest avoiding reading the entire file into memory. Large files might result in large memory consumption, which is far from ideal.</p>\n\n<p>Presumably you have the string to search for in memory somewhere; it's already in an allocation. Create another allocation of the size of that string, and read that many bytes into it... Don't forget to account for the <code>'\\0'</code> string terminator.</p>\n\n<p>Check to see if it matches. If the string matches, well, obviously you've found a match within that file. If it doesn't, shift the array one byte left, read another byte onto the end of it. Rinse, lather, repeat until you find a match.</p>\n\n<hr>\n\n<p>The bug you mentioned implies that you need a string terminator, in the file, somewhere. Technically speaking, a string terminator is a <code>'\\0'</code>, but you could substitute any terminal value(s). Just replace the value(s) you choose (perhaps whitespace?) with a <code>'\\0'</code> as you're reading.</p>\n"}, {"comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1438164799, "post_id": 31697468, "comment_id": 51334497, "body": "What happens if <code>&quot;Pa&quot;</code> occurs at <code>name + 97</code>, and <code>&quot;ul&quot;</code> occurs at the beginning of the next read? Technically, <code>&quot;Paul&quot;</code> occurs in the file, but your (partial) method won&#39;t identify it."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1438164972, "post_id": 31697468, "comment_id": 51334617, "body": "@Freenode-newbostonSebivor  Yes but that&#39;s what he don&#39;t want I think so as he explained with example of <code>Paula</code>. So according to what you say sir every word will be found in a particularly big file."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1438164807, "last_edit_date": 1438164807, "creation_date": 1438164696, "answer_id": 31697468, "question_id": 31697156, "link": "https://stackoverflow.com/questions/31697156/finding-a-string-in-a-file-c/31697468#31697468", "title": "Finding a string in a file [C]", "body": "<p>Function <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow\"><code>fgets()</code></a> will be useful for this task as you can store whole string in buffer instead of one character at a time .</p>\n\n<pre><code> fgets(name,100,fp)\n</code></pre>\n\n<p>Where <code>name</code> is string pointer where string read is stored ,<code>100</code> is the number of characters to be read and <code>fp</code> is the FILE pointer from where you want to read. </p>\n\n<p>And then you can use function <code>strcmp()</code> to compare the string and <code>name  you want to search</code> .So it will eliminate the other possibility of matching with a different name.</p>\n"}], "owner": {"reputation": 107, "user_id": 5168204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ee1e55433c358291c311739fac76c11?s=128&d=identicon&r=PG&f=1", "display_name": "paxie", "link": "https://stackoverflow.com/users/5168204/paxie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 31697385, "answer_count": 2, "score": -1, "last_activity_date": 1438169166, "creation_date": 1438163912, "last_edit_date": 1438169166, "question_id": 31697156, "link": "https://stackoverflow.com/questions/31697156/finding-a-string-in-a-file-c", "title": "Finding a string in a file [C]", "body": "<p>Could anyone tell me the way how to find string (which you enter in a program) in a <code>.txt</code> file without using function for that?(Just need an algorithm for that nothing else) EXAMPLE: i have file named <code>NAMES.txt</code> with surnames on the first line separate with space like that:</p>\n\n<p><code>John Peter Paul</code></p>\n\n<p>and in my program I enter name for example <code>Paul</code> and it finds it in that file and write <code>\"the name is there\"</code></p>\n\n<p><code>name = Paul;</code></p>\n\n<p>I have one method on my mind that if i enter for example Paul to my program it would scan all chars one by one in that file in a row and if <code>name[1] = P</code> then it would start scaning and comparing letters and if they were the same it would each time increase counter <code>p</code> by one <code>(p++)</code> and if <code>p = lenghth</code> of name then the name would be there (there might be 1 bug which comes to my mind that if you enter <code>Paul</code> and in the file theres name Paula it will actually write <code>\"The name is there\"</code> if i used that method but it should not be impossible to debug)</p>\n\n<p>Could anyone also tell me if my written method is possible to realize ? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5688, "user_id": 1287864, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nU0Ti.png?s=128&g=1", "display_name": "S.Spieker", "link": "https://stackoverflow.com/users/1287864/s-spieker"}, "edited": false, "score": 0, "creation_date": 1438164291, "post_id": 31697126, "comment_id": 51334128, "body": "You can use a Bluetooth dongle and use some libraries for that. You can use a full debian linux on the raspberry."}, {"owner": {"reputation": 1, "user_id": 5155259, "user_type": "registered", "profile_image": "https://graph.facebook.com/976647049082934/picture?type=large", "display_name": "Khoulod Ghanem", "link": "https://stackoverflow.com/users/5155259/khoulod-ghanem"}, "reply_to_user": {"reputation": 5688, "user_id": 1287864, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nU0Ti.png?s=128&g=1", "display_name": "S.Spieker", "link": "https://stackoverflow.com/users/1287864/s-spieker"}, "edited": false, "score": 0, "creation_date": 1438270336, "post_id": 31697126, "comment_id": 51391928, "body": "okay. How can open and read from dev/rfcomm file in C code ?"}], "answers": [{"tags": [], "owner": {"reputation": 5688, "user_id": 1287864, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nU0Ti.png?s=128&g=1", "display_name": "S.Spieker", "link": "https://stackoverflow.com/users/1287864/s-spieker"}, "is_accepted": false, "score": 0, "last_activity_date": 1438276804, "creation_date": 1438276804, "answer_id": 31730228, "question_id": 31697126, "link": "https://stackoverflow.com/questions/31697126/controlling-an-arduino-robot-using-raspberry-pi-after-the-pairing-has-been-done/31730228#31730228", "title": "Controlling an arduino robot using raspberry pi after the pairing has been done", "body": "<p>I found an example here: <a href=\"http://www.cs.grinnell.edu/~walker/bluetooth-with-c/development-notes.shtml\" rel=\"nofollow\">Bluetooth-with-c</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n  char message[9];\n  int i;\n  FILE * robot = fopen (\"/dev/rfcomm0\", \"w\");\n\n  // send a message\n  int duration, frequency;\n  message[0]=113; // set speaker\n  duration = 2000; // 2000 milleseconds = 2 seconds\n  message[1]= duration &gt;&gt; 8;  // high-order 8 bits\n  message[2]= duration % 256;  // low-order 8 bits\n  frequency = 880; // A above middle C\n  message[3]= frequency &gt;&gt; 8; // high-order 8 bits\n  message[4]= frequency % 256;// low-order 8 bits\n  message[5]= -1 ; // end of data set\n  message[6]= 0;   // not used\n  message[7]= 0;   // not used\n  message[8]= 0;   // not used\n  for (i = 0; i &lt; 9; i++)\n    fputc(message[i], robot);\n\n  message[0]=113; // set speaker\n  duration = 3000; // 3000 milleseconds = 3 seconds\n  message[1]= duration &gt;&gt; 8;  // high-order 8 bits\n  message[2]= duration % 256;  // low-order 8 bits\n  frequency = 440; // A near middle C\n  message[3]= frequency &gt;&gt; 8; // high-order 8 bits\n  message[4]= frequency % 256;// low-order 8 bits\n  message[5]= -1 ; // end of data set\n  message[6]= 0;   // not used\n  message[7]= 0;   // not used\n  message[8]= 0;   // not used\n  for (i = 0; i &lt; 9; i++)\n    fputc(message[i], robot);\n\n  fclose(robot);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5155259, "user_type": "registered", "profile_image": "https://graph.facebook.com/976647049082934/picture?type=large", "display_name": "Khoulod Ghanem", "link": "https://stackoverflow.com/users/5155259/khoulod-ghanem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438276804, "creation_date": 1438163858, "last_edit_date": 1438164879, "question_id": 31697126, "link": "https://stackoverflow.com/questions/31697126/controlling-an-arduino-robot-using-raspberry-pi-after-the-pairing-has-been-done", "title": "Controlling an arduino robot using raspberry pi after the pairing has been done", "body": "<p>Does raspberry pi have any inbuilt Bluetooth libraries? Can I just call a bluetooth function when I'm programming in C to control a robot?\nI've already paired the arduino robot.</p>\n"}, {"tags": ["c", "global", "assign"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1438163034, "post_id": 31696727, "comment_id": 51333361, "body": "Because all code is in functions?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1438163064, "creation_date": 1438163064, "answer_id": 31696800, "question_id": 31696727, "link": "https://stackoverflow.com/questions/31696727/why-we-cannot-assign-value-to-variable-after-defining-as-global-variable-in-glob/31696800#31696800", "title": "why we cannot assign value to variable after defining as global variable in global area space", "body": "<p>Only assignmemnt is an instruction  and each instruction should appear inside a function body.</p>\n\n<p>In global scope only a special case, initialization through assignment while definition is allowed. </p>\n"}], "owner": {"reputation": 143, "user_id": 3181456, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0a13081f7f8046491f6f3874a75ffcd3?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Patil", "link": "https://stackoverflow.com/users/3181456/akshay-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "closed_date": 1438165424, "accepted_answer_id": 31696800, "answer_count": 1, "score": 0, "last_activity_date": 1438164768, "creation_date": 1438162903, "last_edit_date": 1438164768, "question_id": 31696727, "link": "https://stackoverflow.com/questions/31696727/why-we-cannot-assign-value-to-variable-after-defining-as-global-variable-in-glob", "closed_reason": "Duplicate", "title": "why we cannot assign value to variable after defining as global variable in global area space", "body": "<pre><code>#include&lt;stdio.h&gt;\nint c;\nc=35;//**warning:** data definition has no type or storage class\nint main(){\n.....\n.....\nreturn 0;\n}\n</code></pre>\n\n<p>When I run this code it give Warning as I mentioned in the comment. Why can't we assign a value after defining it as a global variable in global space?</p>\n"}, {"tags": ["c", "casting", "logic"], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 3482407, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3af351f693e10307a2b05b6569fbeeac?s=128&d=identicon&r=PG&f=1", "display_name": "user3482407", "link": "https://stackoverflow.com/users/3482407/user3482407"}, "edited": false, "score": 1, "creation_date": 1438167526, "post_id": 31696881, "comment_id": 51336277, "body": "Thank you, I was not aware of that!"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 273, "user_id": 3482407, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3af351f693e10307a2b05b6569fbeeac?s=128&d=identicon&r=PG&f=1", "display_name": "user3482407", "link": "https://stackoverflow.com/users/3482407/user3482407"}, "edited": false, "score": 0, "creation_date": 1438168331, "post_id": 31696881, "comment_id": 51336781, "body": "I&#39;m glad if it helps you."}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 5, "last_activity_date": 1438166123, "last_edit_date": 1438166123, "creation_date": 1438163256, "answer_id": 31696881, "question_id": 31696621, "link": "https://stackoverflow.com/questions/31696621/typecasting-inversion/31696881#31696881", "title": "Typecasting Inversion", "body": "<p>Result of <code>~b</code> is of promoted type <code>int</code> (Generally result of <code>b</code> with any other  unary operator <code>+</code>, <code>-</code> or <code>~</code>) so you need to typecast the result.</p>\n\n<p>From C11 spec draft section 6.5.3.3 Unary arithmetic operator:</p>\n\n<blockquote>\n  <p>The result of the <strong>~ operator</strong> is the bitwise complement of its\n  (<strong>promoted</strong>) operand (that is, each bit in the result is set if and\n  only if the corresponding bit in the converted operand is not set).\n  <strong>The integer promotions are performed on the operand</strong>, and the <strong>result\n  has the promoted type</strong>. If the promoted type is an <strong>unsigned type</strong>, the\n  expression ~E is equivalent to the <strong>maximum value representable in that\n  type minus E</strong>.</p>\n</blockquote>\n\n<p>So,</p>\n\n<pre><code>unsigned char b = 0x00;\n/* ~b = 0xFFFFFFFF (assuming 4 byte int), (unsigned char)~b = 0xFF */\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 3482407, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3af351f693e10307a2b05b6569fbeeac?s=128&d=identicon&r=PG&f=1", "display_name": "user3482407", "link": "https://stackoverflow.com/users/3482407/user3482407"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 31696881, "answer_count": 1, "score": 4, "last_activity_date": 1438166123, "creation_date": 1438162633, "last_edit_date": 1438163635, "question_id": 31696621, "link": "https://stackoverflow.com/questions/31696621/typecasting-inversion", "title": "Typecasting Inversion", "body": "<p>I really do not understand why I have to typecast the variable <code>b</code> after\ninversion (unary <code>operator ~</code>). Can anybody explain why this is needed?</p>\n\n<pre><code>unsigned char a = 0xFF;\nunsigned char b = 0x00; \n\nreturn (a == (~b));                //expected to return 1 but 0\n\n...\n\nreturn (a == (unsigned char)(~b)); //after typecast returns 1 as expected\n</code></pre>\n"}, {"tags": ["c", "function", "boolean"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1438162353, "post_id": 31696487, "comment_id": 51332915, "body": "Did you read any C code, written by anyone else, ever?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1438162499, "post_id": 31696487, "comment_id": 51333016, "body": "Please post the exact compiler error. Also, there&#39;s a curly brace missing somewhere."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1438162789, "post_id": 31696487, "comment_id": 51333223, "body": "You call functions with <code>()</code>."}, {"owner": {"reputation": 17135, "user_id": 581190, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a503f14866aaa083332c81264860ac8e?s=128&d=identicon&r=PG", "display_name": "zrzka", "link": "https://stackoverflow.com/users/581190/zrzka"}, "edited": false, "score": 0, "creation_date": 1438162853, "post_id": 31696487, "comment_id": 51333265, "body": "Read the error message <i>C4550: Expression evaluates to a function which is missing an argument list.</i> Change <code>if (ValidInput == true)</code> to <code>if (ValidInput(number1) == true)</code>. Your <code>ValidInput</code> function has one argument, you have to pass it."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 5141643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ef2ed63074f1fd1760e9d148824f6ab?s=128&d=identicon&r=PG&f=1", "display_name": "vivekn", "link": "https://stackoverflow.com/users/5141643/vivekn"}, "is_accepted": false, "score": -1, "last_activity_date": 1438162520, "creation_date": 1438162520, "answer_id": 31696590, "question_id": 31696487, "link": "https://stackoverflow.com/questions/31696487/how-to-call-a-simple-bool-function-and-print/31696590#31696590", "title": "How to Call A simple Bool function and print", "body": "<p>You missed adding braces after if()... Functions cannot be nested in C.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 4908233, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b8dd118a43f6caa31e0ce0d6d8b9a77d?s=128&d=identicon&r=PG&f=1", "display_name": "JJ1", "link": "https://stackoverflow.com/users/4908233/jj1"}, "edited": false, "score": 0, "creation_date": 1438163087, "post_id": 31696698, "comment_id": 51333390, "body": "ooooooh, i am so sorry for asking such a simple question. i am an idiot. thankyou so much."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1438334886, "post_id": 31696698, "comment_id": 51419090, "body": "There are no idiot questions, but the one that is not formulated by fear."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1438163168, "last_edit_date": 1438163168, "creation_date": 1438162831, "answer_id": 31696698, "question_id": 31696487, "link": "https://stackoverflow.com/questions/31696487/how-to-call-a-simple-bool-function-and-print/31696698#31696698", "title": "How to Call A simple Bool function and print", "body": "<p>In this if statement</p>\n\n<pre><code>if (ValidInput == true)\n{\n    printf(\"VALID INPUT\");\n}\n</code></pre>\n\n<p>you are comparing function pointer <code>ValidInput</code> with true.</p>\n\n<p>But your intention is to compare the result of the function call with true. So write</p>\n\n<pre><code>if (ValidInput( number1 ) == true)\n              ^^^^^^^^^^^\n{\n    printf(\"VALID INPUT\");\n}\n</code></pre>\n\n<p>And it would be more safe just to write</p>\n\n<pre><code>if ( ValidInput( number1 ) )\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>if (ValidInput( number1 ) == true)\n</code></pre>\n\n<p>Also the function itself can be written simpler</p>\n\n<pre><code>bool ValidInput(int number1)\n{\n    return number1 &lt; 50;\n}\n</code></pre>\n\n<p>Take into account that there is no need to declare variable <code>number1</code> like a global variable. And function main should be declared with the parameter list void. You should write</p>\n\n<pre><code>int main( void )\n{\n    int number1;\n    //...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32, "user_id": 2409243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ae20537e6da4479b2eaca8fe552432e?s=128&d=identicon&r=PG", "display_name": "QWERTTY123", "link": "https://stackoverflow.com/users/2409243/qwertty123"}, "is_accepted": false, "score": 0, "last_activity_date": 1438163866, "creation_date": 1438163866, "answer_id": 31697133, "question_id": 31696487, "link": "https://stackoverflow.com/questions/31696487/how-to-call-a-simple-bool-function-and-print/31697133#31697133", "title": "How to Call A simple Bool function and print", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool ValidInput;\nint number1;\n\nint main()\n{\nprintf(\"Enter number:\");\nscanf_s(\"%d\", &amp;number1);\n\nif (ValidInput(number1) == true)\n{\n    printf(\"VALID INPUT\");\n}\n}\n\nbool ValidInput(int number1)\n{\n    if (number1 &lt; 50)\n    {\n    return true;\n    }\n\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4908233, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b8dd118a43f6caa31e0ce0d6d8b9a77d?s=128&d=identicon&r=PG&f=1", "display_name": "JJ1", "link": "https://stackoverflow.com/users/4908233/jj1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7224, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1438165544, "creation_date": 1438162263, "last_edit_date": 1438163263, "question_id": 31696487, "link": "https://stackoverflow.com/questions/31696487/how-to-call-a-simple-bool-function-and-print", "title": "How to Call A simple Bool function and print", "body": "<p>I am trying to learn how to call functions and work with bools. Tried running a small test by calling a bool function that is true if an input number is less than 50. However I am getting an error saying that the function is missing an argument list whatever that is. Any advice as to what im doing wrong is much appreciated. thankyou! </p>\n\n<p>C4550: Expression evaluates to a function which is missing an argument list.</p>\n\n<p>error is pointing to where i am calling the bool function in main.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool ValidInput(int number1);\nint number1;\n\nint main(void)\n{\n    printf(\"Enter number: \");\n    scanf(\"%d\", &amp;number1);\n\n    if (ValidInput == true)\n        printf(\"VALID INPUT\\n\");\n}\n\nbool ValidInput(int number1)\n{\n    if (number1 &lt; 50)\n        return true;\n\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "memory-management", "dynamic", "structure"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438161695, "post_id": 31696210, "comment_id": 51332477, "body": "The destructor just free&#39;s the memory, it never resets the pointer. Is that the problem? You forgot to set it to <code>NULL</code>?"}, {"owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1438161785, "post_id": 31696210, "comment_id": 51332551, "body": "Is there any way to have the problem erase all memory of the pointer and the variables? A &quot;be gone&quot; type of command?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438161802, "post_id": 31696210, "comment_id": 51332565, "body": "Exactly. And for that reason, passing a pointer to the pointer to your destructor isn&#39;t necessary. A common idiom would be to check for <code>NULL</code> in the destructor and do nothing (if it has more to do than a simple <code>free()</code>), so it has the same semantics as <code>free()</code>."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1438162046, "post_id": 31696210, "comment_id": 51332728, "body": "You can&#39;t expect 20 when you&#39;re doing this <code>ga_ptr-&gt;running_value = (ga_ptr-&gt;running_value? ga_ptr-&gt;running_value : 0) + delta;</code>"}, {"owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "edited": false, "score": 0, "creation_date": 1438162178, "post_id": 31696210, "comment_id": 51332816, "body": "Well what I want to have happen is this: I destroy the ga_ptr on first iteration. During second iteration, I assign a new chunk of memory to the ga_ptr, and hope that current value for that pointer is 20, previous value for pointer is now zero, and the delta is 20. Running_value should not be set in this new memory chunk, so I would get 0+delta = 20. However, obviously I am misunderstanding what malloc and free do for me."}, {"owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "edited": false, "score": 0, "creation_date": 1438162358, "post_id": 31696210, "comment_id": 51332919, "body": "Also, I am okay with the pointer not being reset, so long as the memory chunk I initialize allocated for it is freed... and then the pointer is re-assigned to a new memory chunk with the values that I want. However, I do not think that&#39;s what is happening."}, {"owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "edited": false, "score": 0, "creation_date": 1438164072, "post_id": 31696210, "comment_id": 51333995, "body": "Calloc worked! Many thanks. If you post it as an answer, I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 1, "last_activity_date": 1438166027, "creation_date": 1438166027, "answer_id": 31697998, "question_id": 31696210, "link": "https://stackoverflow.com/questions/31696210/freeing-a-dynamically-allocated-structure-instance-in-c/31697998#31697998", "title": "Freeing a dynamically allocated structure instance in C", "body": "<p>You are just invoking undefined behaviour by using a never initialized value.</p>\n\n<p>In <code>construct_generic_attribute</code>, you initialize current and previous value and then call <code>set_ga_running_value</code>. In the latter, you use current and previous values that have just been initialize to compute delta : fine until here. But then you have :</p>\n\n<pre><code>ga_ptr-&gt;running_value = (ga_ptr-&gt;running_value? ga_ptr-&gt;running_value : 0) + delta;\n</code></pre>\n\n<p>Meaning that you use <code>running_value</code> before initializing it. As it is in a freshly malloc'ed struct, its value is just <em>undefined</em>. It might be 0, or it might be the value that existed in this memory location before allocation, or it might be a special value that compiler uses as a special initialization : you cannot know and should <strong>not</strong> rely on anything.</p>\n\n<p>You compiler seems to preinitialize memory to 0 on run and then never change the value on free and malloc, giving 30 on second run. Mine (in debug mode) allways initialized malloc'ed values to 0xcdcdcdcd, giving FAIL on each test. Just undefined behaviour ...</p>\n\n<p>So you really should initialize the freshed allocated struct in your constructor :</p>\n\n<pre><code>if(ga_ptr = malloc (sizeof (generic_attribute))){       //if allocation succeeds\n    memset(ga_ptr, 0, sizeof(generic_attribute));       // ensure all values are set to 0\n    set_ga_current_value(ga_ptr, current_value);        //assigned the current value to given input\n    set_ga_previous_value(ga_ptr, 0);                   //set previous value to zero\n    set_ga_running_value(ga_ptr);\n</code></pre>\n\n<p>or if you know that running_value is an integral, just replace the <code>memset</code> with:</p>\n\n<pre><code>ga_ptr-&gt;running_value = 0;\n</code></pre>\n"}], "owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 31697998, "answer_count": 1, "score": 1, "last_activity_date": 1438166027, "creation_date": 1438161480, "last_edit_date": 1438162824, "question_id": 31696210, "link": "https://stackoverflow.com/questions/31696210/freeing-a-dynamically-allocated-structure-instance-in-c", "title": "Freeing a dynamically allocated structure instance in C", "body": "<p>I have following structure:</p>\n\n<pre><code>typedef struct generic_attribute_struct{\n    attribute_value current_value;\n    attribute_value previous_value;\n    attribute_value running_value;\n} generic_attribute;\n</code></pre>\n\n<p>where <code>attribute_value</code> is simply a placeholder for <code>unsigned long long int</code>.</p>\n\n<p>I have the following constructor for this structure:</p>\n\n<pre><code>generic_attribute* construct_generic_attribute(attribute_value current_value){\n    generic_attribute *ga_ptr;                              //allocate space for pointer to generic attribute\n    if(ga_ptr = malloc (sizeof (generic_attribute))){       //if allocation succeeds\n        set_ga_current_value(ga_ptr, current_value);        //assigned the current value to given input\n        set_ga_previous_value(ga_ptr, 0);                   //set previous value to zero\n        set_ga_running_value(ga_ptr);\n    } else{                                                 //else, inform user of error\n        fprintf(stderr, \"Health Monitor ran out of space when allocating memory for a generic attribute.\");\n    }\n    return ga_ptr; // return pointer to new attribute or a NULL pointer if memory allocation failed\n}\n</code></pre>\n\n<p>where <code>set_ga_running_value</code> looks like this:</p>\n\n<pre><code>attribute_value set_ga_running_value(generic_attribute* ga_ptr){\n    attribute_value delta = get_ga_current_value(ga_ptr) - get_ga_previous_value(ga_ptr);\n    ga_ptr-&gt;running_value = (ga_ptr-&gt;running_value? ga_ptr-&gt;running_value : 0) + delta;\n    return ga_ptr-&gt;running_value;\n}\n</code></pre>\n\n<p>Destructor for this structure looks like this:</p>\n\n<pre><code>void destroy_generic_attribute(generic_attribute** ga_ptr){\n    free(*ga_ptr);\n}\n</code></pre>\n\n<p>I created a test that asks the user for some current_value input, constructs a pointer, and prints out whether the values for structure variables are what they ought to be. This test loops until the user no longer wants to test, in which case they quit out of the test. </p>\n\n<p>So, the test looks like this:</p>\n\n<ol>\n<li>Does user want to test? If yes, go to 2). If no, go to 7).</li>\n<li>Get input from user</li>\n<li>Call constructor for generic attribute with this new input</li>\n<li>Verify that generic attribute was created correctly</li>\n<li>Call the destructor on generic attribute</li>\n<li>Go to 1.</li>\n<li>Quit</li>\n</ol>\n\n<p>This is what the test looks like:</p>\n\n<pre><code>void test_generic_attribute_constructor_with_user_input(){\n    attribute_value input;\n    int continue_var;\n    bool current_value_test, previous_value_test, running_value_test, pointer_test;\n    generic_attribute* ga_ptr;\n    while(1){\n        printf(\"Would you like to execute a test for Generic Attribute Constructor? Type 1 for YES, or 0 for NO: \");\n        scanf(\"%i\", &amp;continue_var);\n        if(continue_var){\n            printf(TESTING, \"Constructor for Generic Attribute and Generic Attribute Reader\");\n            printf(\"\\n\" INPUT, \"single number\");\n            scanf(\"%lld\", &amp;input);\n            ga_ptr = construct_generic_attribute(input);\n            read_generic_attribute(ga_ptr);\n            current_value_test = (get_ga_current_value(ga_ptr) == input ? true : false);\n            previous_value_test = (get_ga_previous_value(ga_ptr) == 0 ? true: false);\n            // THIS TEST FAILS\n            running_value_test = (get_ga_running_value(ga_ptr) == input ? true: false);\n            pointer_test = (ga_ptr ? true: false);\n            printf(\"%s.\\n\", ((current_value_test &amp;&amp; previous_value_test &amp;&amp; running_value_test &amp;&amp; pointer_test) ? PASS : FAIL));\n            destroy_generic_attribute(&amp;ga_ptr);\n\n        }else{\n            printf(\"\\nOK! Testing concluded.\");\n            break;\n        }\n\n    }\n}\n</code></pre>\n\n<p>My problem is that the \"running value\" seems to never get \"reset\" when the ga_ptr gets destroyed. It seems to keep its old value. How would I clear memory for the entire ga_ptr structure properly?</p>\n\n<p>test result:</p>\n\n<pre><code>Would you like to execute a test for Generic Attribute Constructor? Type 1 for YES, or 0 for NO: 1\nTesting Constructor for Generic Attribute and Generic Attribute Reader:\nPlease enter single number for input: 10\nGeneric Attribute has the following contents:\n\n             Pointer       Current Value       Previos Value       Running Value\n         0x600058530                  10                   0                  10\nPASS.\nWould you like to execute a test for Generic Attribute Constructor? Type 1 for YES, or 0 for NO: 1\nTesting Constructor for Generic Attribute and Generic Attribute Reader:\nPlease enter single number for input: 20\nGeneric Attribute has the following contents:\n\n             Pointer       Current Value       Previos Value       Running Value\n         0x600058530                  20                   0                  30\nFAIL.\n</code></pre>\n\n<p>I would expect the Running value to be 20.</p>\n\n<p>If I change the destructor to this:</p>\n\n<pre><code>void destroy_generic_attribute(generic_attribute** ga_ptr){\n    set_ga_current_value(*ga_ptr, 0);\n    set_ga_previous_value(*ga_ptr, 0);\n    (*ga_ptr)-&gt;running_value = 0;\n    free(*ga_ptr);\n}\n</code></pre>\n\n<p>My test pass... However, I do not understand why skipping the setters makes the code fail. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1438161349, "post_id": 31696014, "comment_id": 51332219, "body": "Uh, you say the &quot;the &#39;real&#39; data is everything after the first 5 bytes&quot; and &quot;the fifth byte is the data length&quot;. So why do you think you <i>need</i> to &#39;scan&#39; the buffer for the header?"}, {"owner": {"reputation": 23, "user_id": 4065601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5dd52b5e9d6a66e9d964f41e3a3c4f?s=128&d=identicon&r=PG&f=1", "display_name": "trek", "link": "https://stackoverflow.com/users/4065601/trek"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1438162118, "post_id": 31696014, "comment_id": 51332771, "body": "Because I want to know if the data I received is from the known source/device, therefore I need to check the header every time."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438162448, "post_id": 31696014, "comment_id": 51332976, "body": "Do you still need the 1st five bytes after &quot;stripping&quot; the buffer?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438162461, "post_id": 31696014, "comment_id": 51332987, "body": "Why strip the header off the data ? Just pass the pointer to the buffer to your function and process the data that starts from the 5th byte."}, {"owner": {"reputation": 23, "user_id": 4065601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5dd52b5e9d6a66e9d964f41e3a3c4f?s=128&d=identicon&r=PG&f=1", "display_name": "trek", "link": "https://stackoverflow.com/users/4065601/trek"}, "edited": false, "score": 0, "creation_date": 1438162539, "post_id": 31696014, "comment_id": 51333045, "body": "After checking the header, I don&#39;t need the information anymore, so the header could be stripped off."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438162579, "post_id": 31696014, "comment_id": 51333074, "body": "<code>memmove(buffer, buffer + 5, 60 - 5)</code> strips the header."}, {"owner": {"reputation": 23, "user_id": 4065601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5dd52b5e9d6a66e9d964f41e3a3c4f?s=128&d=identicon&r=PG&f=1", "display_name": "trek", "link": "https://stackoverflow.com/users/4065601/trek"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1438162604, "post_id": 31696014, "comment_id": 51333091, "body": "@MichaelWalz You are absolutly right, I just had a weird &#39;solution&#39;. Thx!"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1438162271, "post_id": 31696162, "comment_id": 51332862, "body": "For completeness you might like to define <code>newBuf</code> as well as <code>CAPACITY_OF_BUF</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438162516, "post_id": 31696162, "comment_id": 51333030, "body": "Hu, why <code>UINT8_MAX</code> and not just <code>60</code>?"}, {"owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1438162566, "post_id": 31696162, "comment_id": 51333066, "body": "Because <code>length</code> is a byte and can be <code>UINT8_MAX</code>."}], "tags": [], "owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "is_accepted": true, "score": 1, "last_activity_date": 1438162442, "last_edit_date": 1438162442, "creation_date": 1438161348, "answer_id": 31696162, "question_id": 31696014, "link": "https://stackoverflow.com/questions/31696014/handling-header-in-data-buffer/31696162#31696162", "title": "Handling header in data buffer", "body": "<p>Assuming that the original buffer contains at least 5 bytes:</p>\n\n<pre><code>#define CAPACITY UINT8_MAX\nuint8_t buf[CAPACITY], newbuf[CAPACITY - 5];\n...\nint header_is_ok = \n    (buf[0] == 0x20 &amp;&amp; buf[1] == 0x7F &amp;&amp; buf[2] == 0x3E &amp;&amp; buf[3] == 0x15);\n\nif (header_is_ok) {\n    uint8_t length = buf[4];\n\n    if (length &gt; 0 &amp;&amp; length &lt; CAPACITY - 5) {\n        uint8_t *contents = buf + 5;\n        memcpy(newbuf, contents, length);\n    }\n}\n</code></pre>\n\n<p>The <code>memcpy</code> would move the buffer to another location, once the beginning of the contents and the length are known.</p>\n"}, {"tags": [], "owner": {"reputation": 82, "user_id": 5147977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/874cb5745c634cb1b656e0b306ec4292?s=128&d=identicon&r=PG&f=1", "display_name": "ezFreak", "link": "https://stackoverflow.com/users/5147977/ezfreak"}, "is_accepted": false, "score": 0, "last_activity_date": 1438169388, "creation_date": 1438169388, "answer_id": 31699212, "question_id": 31696014, "link": "https://stackoverflow.com/questions/31696014/handling-header-in-data-buffer/31699212#31699212", "title": "Handling header in data buffer", "body": "<p>My first contribution here on StackOverflow, hope u'll enjoy my help.</p>\n\n<p>The answer above is good enough, but I'd like to input the way I'd do it. This will make it easy for you to keep track of the different parts in the header, and to separate the header from the data.</p>\n\n<p>Cons is that you need less comments, easier to debug and so on.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;string.h&gt;\n\n\n//! Structure defining the different parts in the buffer\ntypedef union\n{\n    struct\n    {\n        uint8_t part1;\n        uint8_t part2;\n        uint8_t part3;\n        uint8_t part4;\n        uint8_t length;\n    }header;\n    uint8_t fullHeader[5];\n\n    uint8_t *data;\n}tDataInfo;\n\n\n//! Size of header (in bytes)\nstatic const uint8_t sizeOfHeader = 5;\n\n\n//! Dummy data buffer\nstatic uint8_t dataBuffer[] =\n{\n    0x20, 0x7F, 0x3E, 0x15, 0x0B, 0x34, 0x37, 0x2E, 0x38, 0x33, 0x33, 0x36, 0x38, 0x32, 0x20, 0x2F\n};\n\n\nint main()\n{\n    tDataInfo dataInfo;\n    uint8_t *dataPtr;\n    uint8_t cnt;\n\n\n    // Copy header information\n    memcpy(&amp;dataInfo.header, dataBuffer, sizeOfHeader);\n\n\n    // Print out header information\n    printf(\"part1: %x\\n\", dataInfo.header.part1);\n    printf(\"part2: %x\\n\", dataInfo.header.part2);\n    printf(\"part3: %x\\n\", dataInfo.header.part3);\n    printf(\"part4: %x\\n\", dataInfo.header.part4);\n    printf(\"length: %d\\n\\n\", dataInfo.header.length);\n\n\n    // Allocate space for the data\n    dataInfo.data = malloc(dataInfo.header.length);\n\n    // Point to first byte of data\n    dataPtr = dataBuffer + sizeOfHeader;\n\n    // Copy the data\n    memcpy(dataInfo.data, dataPtr, dataInfo.header.length);\n\n    // Print out the data\n    for ( cnt = 0; cnt &lt; dataInfo.header.length; cnt++ )\n    {\n        printf(\"byte %d: %x\\n\", cnt, *(dataInfo.data+cnt));\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1438170900, "last_edit_date": 1438170900, "creation_date": 1438170445, "answer_id": 31699599, "question_id": 31696014, "link": "https://stackoverflow.com/questions/31696014/handling-header-in-data-buffer/31699599#31699599", "title": "Handling header in data buffer", "body": "<p>This solution is resembles one of the previous, but is more functional. It implies that the machine use little endian format:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n    typedef struct    //pseudo structure describing the header and the data\n    {\n        int_16 key;   //first 4 bytes as device key\n        unsigned char length;    //length of data not including the 5 header bytes\n        char  data[1]    //pseudo array of buffer data\n    } DATA;\n\n    #define KEY 0x153e7f20    //The first 4 bytes used as a key to check for device\n    #define BUFSIZE 60        //buffer size\n\n    // The function return TRUE if any data is transferred to the buffer\n    BOOL ReadData(char *RawData, char *buf)\n    {\n         DATA *pdata = RawData;\n         if (KEY != pdata-&gt;key)\n             return FALSE;\n\n         memcpy(buf, pdata-&gt;data, pdata-&gt;length &lt;= BUFSIZE ? pdata-&gt;length : BUFSIZE);\n\n         return TRUE;\n    }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4065601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a5dd52b5e9d6a66e9d964f41e3a3c4f?s=128&d=identicon&r=PG&f=1", "display_name": "trek", "link": "https://stackoverflow.com/users/4065601/trek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "accepted_answer_id": 31696162, "answer_count": 3, "score": 1, "last_activity_date": 1438170900, "creation_date": 1438160984, "question_id": 31696014, "link": "https://stackoverflow.com/questions/31696014/handling-header-in-data-buffer", "title": "Handling header in data buffer", "body": "<p>I have a data buffer with following content:</p>\n\n<pre><code>00000000    20 7F 3E 15 38 34 37 2E 38 33 33 36 38 32 20 2F\n00000010    20 31 33 2E 30 30 35 34 31 39 20 3E 20 20 20 20    \n00000020    20 3E 20 4E 4F 20 47 50 53 20 44 41 54 41 20 20\n00000030    20 20 20 20 20 20 20 20 20 20 20 20\n</code></pre>\n\n<p>Now I want to use the 'real' data to process it in another function.</p>\n\n<p>The 'real' data is everything after the first 5 bytes. The fifth byte, in this example 0x38, is the data length. How do I now scan the buffer for the header 0x20 0x7F 0x3E 0x15 and the data length byte and move the real data content to another buffer or maybe better, strip the current buffer to only the data content?</p>\n\n<p>Note: I cannot allocate memory dynamically.\nThe buffer size is always 60 bytes (including header).</p>\n\n<p>Thx! </p>\n"}, {"tags": ["c", "function-pointers", "typedef"], "answers": [{"comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438161146, "post_id": 31695927, "comment_id": 51332079, "body": "@user3815726 Return type is important as well - <code>Enroll</code> needs to return <code>uint8_t</code>."}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438161526, "post_id": 31695927, "comment_id": 51332352, "body": "the function definition should be in test1.c ( Enroll(...) and Change(...) ) and somethingOkay ClientAlloc(Enroll, Change ); and forward-declare should be put at test2.c, is this what you mean ?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438161793, "post_id": 31695927, "comment_id": 51332559, "body": "@user3815726 Yes, you need forward declarations in the file from which you make the call to <code>ClientAlloc</code>. You may put them into <code>test1.c</code>&#39;s header if you have one, or simply forward-declare them in <code>test2.c</code> if you prefer."}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438162074, "post_id": 31695927, "comment_id": 51332747, "body": "an error happened: assignment makes pointer from integer without a cast"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438162834, "post_id": 31695927, "comment_id": 51333255, "body": "@user3815726 On what line does it happen? Did you include the first header in your <code>test2.c</code>?"}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438163066, "post_id": 31695927, "comment_id": 51333377, "body": "yea, I did include the header. the error occurs at somethingOkay = ClientAlloc(Enroll, Change); I am still checking why this happens."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438163459, "post_id": 31695927, "comment_id": 51333607, "body": "@user3815726 That&#39;s odd: you&#39;d get an error like that if you forgot to include <code>a.h</code>, or misspelled the name of <code>ClientAlloc</code> function in the header or in the call."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438164219, "post_id": 31695927, "comment_id": 51334085, "body": "@user3815726 Did you include <code>a.h</code> in <code>test2.c</code>?"}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438220834, "post_id": 31695927, "comment_id": 51365493, "body": "please let me know if you have any thoughts."}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438228657, "post_id": 31695927, "comment_id": 51367359, "body": "I have found out the root cause and your reply is very helpful to me."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1438160714, "creation_date": 1438160714, "answer_id": 31695927, "question_id": 31695719, "link": "https://stackoverflow.com/questions/31695719/the-arguments-of-a-function-gets-called-in-different-files/31695927#31695927", "title": "The arguments of a function gets called in different files", "body": "<p>You cannot use <code>Enroll</code> and <code>Change</code> to make an <code>EnrollT</code> and <code>ChangeT</code> function pointers, because they are incompatible. In order for the functions to match, they must have the same signatures as the functions declared in your <code>typedef</code>s:</p>\n\n<pre><code>uint8_t Enroll(uint16_t test1, uint16_t test2){\n    printf(\"Happy Enrolling\");\n    return 0;\n}\nvoid Change(uint64_t post1, uint8_t post2){\n     printf(\"Happy Changing\");\n}\n</code></pre>\n\n<p>Now you can pass these functions to <code>ClientAlloc</code>:</p>\n\n<pre><code>somethingOkay = ClientAlloc(Enroll, Change);\n</code></pre>\n\n<p>Since the call happens in a different file, you need to forward-declare your functions at the top of the file:</p>\n\n<pre><code>uint8_t Enroll(uint16_t test1, uint16_t test2);\nvoid Change(uint64_t post1, uint8_t post2);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438161583, "post_id": 31695941, "comment_id": 51332399, "body": "@user3815726 But when you e.g. pass a function as argument to another function, it decays to a <i>pointer</i> to the function. In my last example code, doing it like shown is the same as doing it like <code>ClientAlloc(&amp;my_enroll_function, &amp;my_change_function);</code>."}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438162397, "post_id": 31695941, "comment_id": 51332942, "body": "If I change the code about my EnrollT and ChangeT to be a function pointer, then EntrollT enroll; ChangeT  change; should be declared in test2.c and then call somethingOkay = ClientAlloc(&amp;enroll, &amp;change ); ---- is this what you mean ?"}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438163952, "post_id": 31695941, "comment_id": 51333920, "body": "@Pileborg, thanks but I got the eorror: assignment makes pointer from integer without a cast. I have just updated my post, please check."}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438220279, "post_id": 31695941, "comment_id": 51365377, "body": "Peiborg, any thoughts?"}, {"owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "edited": false, "score": 0, "creation_date": 1438228537, "post_id": 31695941, "comment_id": 51367340, "body": "I have found out the root cause and your reply is very useful to me."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1438161367, "last_edit_date": 1438161367, "creation_date": 1438160756, "answer_id": 31695941, "question_id": 31695719, "link": "https://stackoverflow.com/questions/31695719/the-arguments-of-a-function-gets-called-in-different-files/31695941#31695941", "title": "The arguments of a function gets called in different files", "body": "<p>First of all, if you want e.g. <code>EnrollT</code> to be a <em>pointer</em> to a function, then you need to declare it as such:</p>\n\n<pre><code>typedef uint8_t (*EnrollT)(uint16_t test1, uint16_t test2);\n</code></pre>\n\n<p>Secondly, the functions definitions you use do <em>not</em> match the type-alias you create, so while it might build without <em>errors</em>, you still have problems in your code that should cause compiler <em>warnings</em>, and if you don't get warnings then you should enable more warnings when building. Warnings are often a sign of you doing something you should not do, that might lead to undefined behavior and possible crashes. And don't fix warnings by just some simple casting, try to find out the root cause of the warnings, and fix that instead.</p>\n\n<p>Thirdly, and the problem you're asking about. If you make the change in the first paragraph, then it's simple:</p>\n\n<pre><code>EntrollT enroll;\nChangeT  change;\n\nClientAlloc(&amp;enroll, &amp;change);\n</code></pre>\n\n<p>However, that is the <em>simple</em> part, because you have to modify the <code>ClientAlloc</code> function too, to be able to handle the emulated <em>pass by reference</em> handling:</p>\n\n<pre><code>struct ClusterT * ClientAlloc(EnrollT *p, ChangeT *q)\n{\n    // Note use of dereference operator `*` here\n    *p = Enroll;\n    *q = Change;\n\n    return something;\n}\n</code></pre>\n\n<p>At least if you want to set <code>p</code> and <code>q</code> to the functions <code>Enroll</code> and <code>Change</code>, so you could call them from the code that called <code>ClientAlloc</code>. IF that's <em>not</em> what you want to do, but instead pass in functions pointer to be called by e.g. <code>ClientAlloc</code> then you need to make more modifications, like saving the pointer passed to the function instead of assigning to them.</p>\n\n<hr>\n\n<p>If you want to pass in function pointer to be used by <code>ClientAlloc</code> instead, then you should not define the functions inside that source file, instead define them where they are supposed to be, in the source <em>calling</em> <code>ClientAlloc</code>, then you should have e.g.</p>\n\n<p>Header file:</p>\n\n<pre><code>typedef uint8_t (*EnrollT)(uint16_t test1, uint16_t test2);\ntypedef void (*ChangeT)(uint64_t post1, uint8_t post2);\n\nstruct ClusterT * ClientAlloc(EnrollT, ChangeT);\n</code></pre>\n\n<p>Test1.c:</p>\n\n<pre><code>// Declare the function pointers\n// (static so the won't be exported)\nstatic EnrollT enroll;\nstatic ChangeT change;\n\nstruct ClusterT * ClientAlloc(EnrollT e, ChangeT c)\n{\n    enroll = e;\n    change = c;\n\n    ...\n}\n</code></pre>\n\n<p>And finally your test2.c:</p>\n\n<pre><code>uint8_t my_enroll_function(uint16_t test1, uint16_t test2)\n{\n    ...\n}\n\nvoid my_change_function(uint64_t post1, uint8_t post2)\n{\n    ...\n}\n\nint main(void)\n{\n    ClientAlloc(my_enroll_function, my_change_function);\n}\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 3815726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eec819fb2ab19baa0e23b09357cf086b?s=128&d=identicon&r=PG&f=1", "display_name": "user3815726", "link": "https://stackoverflow.com/users/3815726/user3815726"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 31695927, "answer_count": 2, "score": 2, "last_activity_date": 1438164730, "creation_date": 1438160104, "last_edit_date": 1438164730, "question_id": 31695719, "link": "https://stackoverflow.com/questions/31695719/the-arguments-of-a-function-gets-called-in-different-files", "title": "The arguments of a function gets called in different files", "body": "<p>The complete testing code shown in the following</p>\n\n<p>The header file ( say, a.h ) defines the following codes:</p>\n\n<pre><code>typedef uint8_t EnrollT(uint16_t test1, uint16_t test2);\ntypedef void ChangeT(uint64_t post1, uint8_t post2);\nstruct ClusterT * ClientAlloc(EnrollT *, ChangeT *);\n</code></pre>\n\n<p>In one of my c ( say, test1.c) files which includes a.h shown below:</p>\n\n<pre><code>void Enroll(uint16_t test1, uint16_t test2){\n     printf(\"Happy Enrolling\");\n}\n\nvoid Change(uint64_t post1, uint8_t post2){\n     printf(\"Happy Changing\");\n}\n\nstruct ClusterT * ClientAlloc(EnrollT *p, ChangeT *q)\n{\n    p = Enroll;\n    q = Change;\n\n    return something;\n}\n</code></pre>\n\n<p>Above codes gets compiled okay, however, in the following code, I am a little bit confused in the another c file ( say, test2.c ) which includes a.h as well.</p>\n\n<pre><code>void priTest(){\n    somethingOkay = ClientAlloc( ???? );\n}\n</code></pre>\n\n<p>In this case, what arguments should I add in my ClientAlloc() function in test2.c ?</p>\n\n<hr>\n\n<p>@dasblinkenlight</p>\n\n<p>To be clear, I've modified the code as shown in the following:</p>\n\n<p>In the header</p>\n\n<pre><code>typedef uint8_t EnrollT(uint16_t test1, uint16_t test2);\ntypedef void ChangeT(uint64_t post1, uint8_t post2);\nstruct ClusterT * ClientAlloc(EnrollT *, ChangeT *);\n</code></pre>\n\n<p>In test1.c</p>\n\n<pre><code>void Enroll(uint16_t test1, uint16_t test2){\n     printf(\"Happy Enrolling\");\n}\n\nvoid Change(uint64_t post1, uint8_t post2){\n     printf(\"Happy Changing\");\n}\n\nstruct ClusterT * ClientAlloc(EnrollT *p, ChangeT *q)\n{\n    p = Enroll;\n    q = Change;\n\n    return something;\n}\n</code></pre>\n\n<p>In test2.c</p>\n\n<pre><code>uint8_t Enroll(uint16_t test1, uint16_t test2);\nvoid Change(uint64_t post1, uint8_t post2);\n\n\nvoid priTest(){\n    somethingOkay = ClientAlloc( Enroll, Change );\n}\n</code></pre>\n\n<hr>\n\n<p>@Joachim Pileborg</p>\n\n<p>I modifed my code as shown in the following, please let me know if I misunderstand what you mean in your reply.</p>\n\n<p>In my header a.h</p>\n\n<pre><code>typedef uint8_t (*EnrollT)(uint16_t test1, uint16_t test2);\ntypedef void (*ChangeT)(uint64_t post1, uint8_t post2);\nstruct ClusterT * ClientAlloc(EnrollT *, ChangeT *);\n</code></pre>\n\n<p>In test1.c </p>\n\n<pre><code>void Enroll(uint16_t test1, uint16_t test2){\n     printf(\"Happy Enrolling\");\n}\n\nvoid Change(uint64_t post1, uint8_t post2){\n     printf(\"Happy Changing\");\n}\n\nstruct ClusterT * ClientAlloc(EnrollT *p, ChangeT *q)\n{\n    *p = Enroll;\n    *q = Change;\n\n    return something;\n}\n</code></pre>\n\n<p>In test2.c</p>\n\n<pre><code>EntrollT enroll;\nChangeT  change;\n\nvoid priTest(){\n    somethingOkay = ClientAlloc( &amp;enroll, &amp;change );\n}\n</code></pre>\n"}, {"tags": ["c", "android-ndk"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1438159827, "post_id": 31695470, "comment_id": 51331273, "body": "Have you added the NDK include directory to your include path? (e.g. <code>LOCAL_C_INCLUDES += $(NDK_ROOT)&#47;platforms&#47;android-3&#47;arch-arm&#47;usr&#47;include</code>). Btw, did you really intend to use <code>android-3</code> as your platform? That&#39;s quite old."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1438161405, "post_id": 31695470, "comment_id": 51332250, "body": "<i>&quot;I did not configure android3. How can I change that please&quot;</i> With <code>APP_PLATFORM</code> in Application.mk (e.g. <code>APP_PLATFORM := android-18</code>, or whichever platform you want to use). You can then refer to this as <code>$(APP_PLATFORM)</code> in your Android.mk when you specify the include path."}], "owner": {"reputation": 737, "user_id": 3326293, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/QcKfK.jpg?s=128&g=1", "display_name": "user3326293", "link": "https://stackoverflow.com/users/3326293/user3326293"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3284, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438162010, "creation_date": 1438159367, "last_edit_date": 1438162010, "question_id": 31695470, "link": "https://stackoverflow.com/questions/31695470/linux-types-h211-error-unknown-type-name-u16", "title": "linux/types.h:21:1: error: unknown type name &#39;__u16&#39;", "body": "<p>I have used ndk revision r10d on my machine to compile and run sample programs successfully before. But this new project, which uses the same header file stdio.h gives the following error(s). The errors are from a file, which stdio references. And although I do not see the variables defined in the file, I want to understand how it worked last time. The errors are from /linux/types.h file stating that __16 is not defined type. </p>\n\n<p>@Michael - Thanks. I did what you suggested, and here is the Android.mk file and results of compile. Basically the API level is changed, but the error persists:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS) \n# give module name\nAPP_PLATFORM := android-18\nLOCAL_MODULE := hello_tz  \n$(warning This is in NDK_ROOT $(NDK_ROOT))\nLOCAL_C_INCLUDES += $(NDK_ROOT)/platforms/$(APP_PLATFORM)/arch-arm/usr/include\nAPP_ABI := armeabi-v7a\n#LOCAL_CFLAGS := -mcpu=cortex-m3 -mthumb -march=armv7-a -mtune=cortex-a15\n#LOCAL_CFLAGS := -mcpu=cortex-a15 -march=armv7-a\nLOCAL_CFLAGS := -D__ASSEMBLY__ -mabi=aapcs-linux -gdwarf-2 -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-\naliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -Os -Wno\n-maybe-uninitialized -marm -fno-dwarf2-cfi-asm -fstack-protector -mabi=aapcs-linux -mno-thumb-interwork -funwind-tables \n-D__LINUX_ARM_ARCH__=7 -mcpu=cortex-a15 -msoft-float -Uarm -Wframe-larger-than=1024 -Wno-unused-but-set-variable -fomit-\nframe-pointer -g -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOT\nO\n# list your C files to compile\nFILE_LIST := $(patsubst %.c,%.c.arm,$(wildcard $(LOCAL_PATH)/*.c))\n#$(warning here is what is in FILE_LIST after an attempt to collect all the C files$(FILE_LIST))\nFILE_LIST += $(wildcard $(LOCAL_PATH)/*.s)\n#$(warning here is what is in FILE_LIST after an attempt to collect all the S files$(FILE_LIST))\nLOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)\n# this option will build executables instead of building library for android application.\ninclude $(BUILD_EXECUTABLE)\n\n\nIn file included from /home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/sys/types.h:39:0,\n                 from /home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/stdio.h:50,\n                 from jni/main_normal.c:1:\n/home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/linux/types.h:21:1: error: unknown type name '__u16'\n typedef __u16 __bitwise __le16;\n ^\n/home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/linux/types.h:22:1: error: unknown type name '__u16'\n typedef __u16 __bitwise __be16;\n ^\n/home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/linux/types.h:23:1: error: unknown type name '__u32'\n typedef __u32 __bitwise __le32;\n ^\n/home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/linux/types.h:24:1: error: unknown type name '__u32'\n typedef __u32 __bitwise __be32;\n ^\n/home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/linux/types.h:26:1: error: unknown type name '__u64'\n typedef __u64 __bitwise __le64;\n ^\n/home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/linux/types.h:27:1: error: unknown type name '__u64'\n typedef __u64 __bitwise __be64;\n ^\nIn file included from /home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/stdio.h:50:0,\n                 from jni/main_normal.c:1:\n/home/sansari/android/android-ndk-r10d/platforms/android-18/arch-arm/usr/include/sys/types.h:42:1: error: unknown type name '__u32'\n typedef __u32    __kernel_dev_t;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1438156515, "post_id": 31694404, "comment_id": 51329297, "body": "NOP. <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/c/fprintf</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438156949, "post_id": 31694404, "comment_id": 51329586, "body": "RTFM <a href=\"http://linux.die.net/man/3/printf\" rel=\"nofollow noreferrer\"><code>printf()</code></a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1438158043, "post_id": 31694404, "comment_id": 51330214, "body": "NO hard feelings, but I simply cant believe the Q is standing at <code>+3&#47;-3</code>...."}], "answers": [{"tags": [], "owner": {"reputation": 918, "user_id": 3338940, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Oi3IQ.jpg?s=128&g=1", "display_name": "Gerald", "link": "https://stackoverflow.com/users/3338940/gerald"}, "is_accepted": false, "score": 3, "last_activity_date": 1438156575, "creation_date": 1438156575, "answer_id": 31694501, "question_id": 31694404, "link": "https://stackoverflow.com/questions/31694404/what-the-hash-sign-do-in-the-following-statement/31694501#31694501", "title": "What the hash sign do in the following statement", "body": "<p>I didn't come up with this answer myself.  I just did a quick Google search and found this:</p>\n\n<p>\"Adding a # will cause a '0' to be prepended to an octal number (when using the o conversion specifier), or a 0x to be prepended to a hexadecimal number (when using a x conversion specifier). For most other conversion specifiers, adding a # will simply force the inclusion of a decimal point, even if the number has no fractional part.\"</p>\n\n<p>You can read more here:\n<a href=\"http://www.cprogramming.com/tutorial/printf-format-strings.html\" rel=\"nofollow\">http://www.cprogramming.com/tutorial/printf-format-strings.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1438156738, "post_id": 31694503, "comment_id": 51329451, "body": "The cited part doesn&#39;t contain anything about hash. What should this be helpfull for?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1438156849, "post_id": 31694503, "comment_id": 51329525, "body": "@Zaibis: the cited part is talking about the effects of the <code>#</code> flag in the format specifier."}], "tags": [], "owner": {"reputation": 2944, "user_id": 1466583, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TIcrY.png?s=128&g=1", "display_name": "Maximilian Ast", "link": "https://stackoverflow.com/users/1466583/maximilian-ast"}, "is_accepted": true, "score": 3, "last_activity_date": 1438597445, "last_edit_date": 1438597445, "creation_date": 1438156584, "answer_id": 31694503, "question_id": 31694404, "link": "https://stackoverflow.com/questions/31694404/what-the-hash-sign-do-in-the-following-statement/31694503#31694503", "title": "What the hash sign do in the following statement", "body": "<p>You can look in the <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_printf.htm\" rel=\"nofollow\"><code>printf</code> documentation</a>. You can find the description for <code>#</code> under <code>flags</code>:</p>\n\n<blockquote>\n  <p>Used with o, x or X specifiers the value is preceded with 0, 0x or 0X\n  respectively for values different than zero. Used with e, E and f, it\n  forces the written output to contain a decimal point even if no digits\n  would follow. By default, if no digits follow, no decimal point is\n  written. Used with g or G the result is the same as with e or E but\n  trailing zeros are not removed.</p>\n</blockquote>\n"}], "owner": {"reputation": 1753, "user_id": 4637326, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/1093075744051398/picture?type=large", "display_name": "Radoslaw Krasimirow", "link": "https://stackoverflow.com/users/4637326/radoslaw-krasimirow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "closed_date": 1438158194, "accepted_answer_id": 31694503, "answer_count": 2, "score": 0, "last_activity_date": 1544427538, "creation_date": 1438156303, "last_edit_date": 1544427538, "question_id": 31694404, "link": "https://stackoverflow.com/questions/31694404/what-the-hash-sign-do-in-the-following-statement", "closed_reason": "Duplicate", "title": "What the hash sign do in the following statement", "body": "<p>Can someone explain what the purpose of the <strong>#</strong> sign in this printf statement:</p>\n\n<pre><code>printf(\"%#d\\n\",15);\n</code></pre>\n\n<p>It seems to be ignored while printing. The output of the statement is:</p>\n\n<blockquote>\n  <p>15</p>\n</blockquote>\n"}, {"tags": ["c", "format", "bits"], "comments": [{"owner": {"reputation": 6055, "user_id": 956660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67d04ae3dfdf060c4a2fa2dfea9b6b22?s=128&d=identicon&r=PG", "display_name": "Cyrbil", "link": "https://stackoverflow.com/users/956660/cyrbil"}, "edited": false, "score": 0, "creation_date": 1438156619, "post_id": 31694349, "comment_id": 51329365, "body": "You can pad with zero by using <code>%#8f</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438156707, "post_id": 31694349, "comment_id": 51329417, "body": "<code>itoa</code> is not a standard C function."}, {"owner": {"reputation": 369, "user_id": 3615601, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/631eca741fb99db69b163ec3104c2271?s=128&d=identicon&r=PG&f=1", "display_name": "Micah Rockie", "link": "https://stackoverflow.com/users/3615601/micah-rockie"}, "edited": false, "score": 0, "creation_date": 1438156722, "post_id": 31694349, "comment_id": 51329438, "body": "I just made my charToBit function to this: int i; \tfor (i=0; i &lt; 8; i++){ \t\tprintf(&quot;\\n %d&quot;, !!((character &lt;&lt; i) &amp; 0x80)); \t} and it worked."}, {"owner": {"reputation": 4666, "user_id": 981367, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ca05a550269a76bcdc899350338f5501?s=128&d=identicon&r=PG", "display_name": "VoidStar", "link": "https://stackoverflow.com/users/981367/voidstar"}, "edited": false, "score": 0, "creation_date": 1438156733, "post_id": 31694349, "comment_id": 51329446, "body": "It&#39;s convenient to learn to read hex as binary in your head, then you can just write <code>printf(&quot;\\n VALUE OF: %x&quot;</code>) and save screen space too. There&#39;s only 16 cases to learn."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1438157116, "post_id": 31694349, "comment_id": 51329683, "body": "how is <a href=\"https://stackoverflow.com/questions/tagged/multithreading\">multithreading</a> relevant here?"}, {"owner": {"reputation": 369, "user_id": 3615601, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/631eca741fb99db69b163ec3104c2271?s=128&d=identicon&r=PG&f=1", "display_name": "Micah Rockie", "link": "https://stackoverflow.com/users/3615601/micah-rockie"}, "edited": false, "score": 0, "creation_date": 1438157218, "post_id": 31694349, "comment_id": 51329750, "body": "I&#39;m working on a project about multithreading @FelixPalmen sorry for the tag"}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 1527018, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62e4e73fe7386a5e9401f90dc98c7584?s=128&d=identicon&r=PG", "display_name": "mic4ael", "link": "https://stackoverflow.com/users/1527018/mic4ael"}, "is_accepted": false, "score": 0, "last_activity_date": 1438156386, "creation_date": 1438156386, "answer_id": 31694433, "question_id": 31694349, "link": "https://stackoverflow.com/questions/31694349/format-of-printing-bits-in-c/31694433#31694433", "title": "Format of printing bits in C", "body": "<p>I think you should replace <code>%d</code> with <code>%s</code> in your <code>printf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438156775, "post_id": 31694519, "comment_id": 51329480, "body": "@MohitJain Well, <code>gchRobotCmdStatus</code> has to hold the <i>binary</i> representation. I guess the original code does the same."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1438159284, "post_id": 31694519, "comment_id": 51330959, "body": "Looking at function <code>charToBit</code> and use of <code>itoa</code> (Not standard but available on many compilers as extension, it appears questioner is suffering with missing leading <code>0</code>s which is expected behavior of <code>itoa</code>"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1438156910, "last_edit_date": 1438156910, "creation_date": 1438156633, "answer_id": 31694519, "question_id": 31694349, "link": "https://stackoverflow.com/questions/31694349/format-of-printing-bits-in-c/31694519#31694519", "title": "Format of printing bits in C", "body": "<p>You can make use of the <code>flag</code> and <code>field width</code> properties of <a href=\"http://linux.die.net/man/3/printf\" rel=\"nofollow\"><code>printf()</code></a>. Assuming <code>gchRobotCmdStatus</code> is an <code>int</code> and hold the binary <em>representation</em> which you you want to be printed in an 8-bit pattern, you can use, for example,</p>\n\n<pre><code> printf(\"\\n VALUE OF: %08d\", gchRobotCmdStatus);\n</code></pre>\n\n<p>to print</p>\n\n<blockquote>\n  <p>VALUE OF: 0000 0000</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": false, "score": 0, "last_activity_date": 1438156803, "creation_date": 1438156803, "answer_id": 31694568, "question_id": 31694349, "link": "https://stackoverflow.com/questions/31694349/format-of-printing-bits-in-c/31694568#31694568", "title": "Format of printing bits in C", "body": "<pre><code>itoa(character, output, 2); \n</code></pre>\n\n<p>This will put a null terminator after producing the 2 bytes for the string. </p>\n\n<p>You will need a different method of converting the binary value to string.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438169770, "post_id": 31694618, "comment_id": 51337692, "body": "<code>printf(&quot;\\n %d&quot;,...</code> called 8 times will not produce &quot;0000 0000&quot;."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1438754147, "post_id": 31694618, "comment_id": 51572578, "body": "@chux Why? This looks reasonable."}], "tags": [], "owner": {"reputation": 369, "user_id": 3615601, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/631eca741fb99db69b163ec3104c2271?s=128&d=identicon&r=PG&f=1", "display_name": "Micah Rockie", "link": "https://stackoverflow.com/users/3615601/micah-rockie"}, "is_accepted": false, "score": 1, "last_activity_date": 1438156946, "creation_date": 1438156946, "answer_id": 31694618, "question_id": 31694349, "link": "https://stackoverflow.com/questions/31694349/format-of-printing-bits-in-c/31694618#31694618", "title": "Format of printing bits in C", "body": "<p>I just changed my function from</p>\n\n<pre><code>void charToBit(char character)\n{\n    char output[9] = \"00000000\";\n    itoa(character, output, 2);\n    printf(\"%s\\n\", output);\n}\n</code></pre>\n\n<p>to </p>\n\n<pre><code>void charToBit(char character)\n{\n    int i;\n    for (i=0; i &lt; 8; i++){\n        printf(\"\\n %d\", !!((character &lt;&lt; i) &amp; 0x80));\n    }\n}\n</code></pre>\n\n<p>and it worked. </p>\n"}, {"tags": [], "owner": {"reputation": 980, "user_id": 4435947, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/YJGgC.jpg?s=128&g=1", "display_name": "Vid", "link": "https://stackoverflow.com/users/4435947/vid"}, "is_accepted": false, "score": 2, "last_activity_date": 1438156971, "creation_date": 1438156971, "answer_id": 31694632, "question_id": 31694349, "link": "https://stackoverflow.com/questions/31694349/format-of-printing-bits-in-c/31694632#31694632", "title": "Format of printing bits in C", "body": "<pre><code>void charToBit(char ch)\n{\n    for (int i = 7; i &gt;= 0; --i)\n    {\n        putchar( (ch &amp; (1 &lt;&lt; i)) ? '1' : '0' );\n    }\n    putchar('\\n');\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1439212043, "creation_date": 1439212043, "answer_id": 31920428, "question_id": 31694349, "link": "https://stackoverflow.com/questions/31694349/format-of-printing-bits-in-c/31920428#31920428", "title": "Format of printing bits in C", "body": "<p>This produces required output:</p>\n\n<pre><code>void charToBit(char ch)\n{\n    static char* bits[] = \n    {\n        \"0000\", \"0001\", \"0010\", \"0011\", \"0100\", \"0101\", \"0110\", \"0111\",\n        \"1000\", \"1001\", \"1010\", \"1011\", \"1100\", \"1101\", \"1110\", \"1111\"\n    };\n    printf(\"%s %s\\n\", bits[ch &gt;&gt; 4 &amp; 0xf], bits[ch &amp; 0xf]);\n}\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 3615601, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/631eca741fb99db69b163ec3104c2271?s=128&d=identicon&r=PG&f=1", "display_name": "Micah Rockie", "link": "https://stackoverflow.com/users/3615601/micah-rockie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 6, "score": -1, "last_activity_date": 1439212043, "creation_date": 1438156173, "last_edit_date": 1438157829, "question_id": 31694349, "link": "https://stackoverflow.com/questions/31694349/format-of-printing-bits-in-c", "title": "Format of printing bits in C", "body": "<p>I'm working on a project on multithreading. It's all about a robot maze. Now, I need to convert the value of chRobotCmdStatus to an 8-bit format. chRobotCmdStatus is a global variable.</p>\n\n<p>This is my code:</p>\n\n<pre><code>void charToBit(char character)\n{\n    char output[9] = \"00000000\";\n    itoa(character, output, 2);\n    printf(\"%s\\n\", output);\n}\n\n// Control Thread\nunsigned int __stdcall ControlThread(void* arg){\n    printf(\"Control Thread 1 \\n\");\n    printf(\"\\n VALUE OF: %d\", gchRobotCmdStatus);\n    charToBit(gchRobotCmdStatus);\n\n    return 1;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>VALUE OF: 00\n</code></pre>\n\n<p>It needs to be:</p>\n\n<pre><code>VALUE OF: 0000 0000\n</code></pre>\n\n<p>Any suggestions on how I can achieve this? </p>\n"}, {"tags": ["c", "wifi", "openwrt"], "answers": [{"tags": [], "owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1438178549, "creation_date": 1438178549, "answer_id": 31702765, "question_id": 31694042, "link": "https://stackoverflow.com/questions/31694042/wifi-how-to-get-connected-devices-name-in-c-in-openwrt/31702765#31702765", "title": "wifi - How to get connected device&#39;s name in C in openwrt?", "body": "<p>One of the requested information source is DHCP leases. You could for instance parse the <em>/tmp/dhcp.leases</em> file.</p>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 1980391, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5884218fa258f5de31681027cdc4625?s=128&d=identicon&r=PG", "display_name": "Paktwis Homayun", "link": "https://stackoverflow.com/users/1980391/paktwis-homayun"}, "is_accepted": false, "score": 0, "last_activity_date": 1458822264, "creation_date": 1458822264, "answer_id": 36200152, "question_id": 31694042, "link": "https://stackoverflow.com/questions/31694042/wifi-how-to-get-connected-devices-name-in-c-in-openwrt/36200152#36200152", "title": "wifi - How to get connected device&#39;s name in C in openwrt?", "body": "<p>Use airodump-ng with your OpenWRT router. Here is some documentation on how to use it: <a href=\"https://wiki.openwrt.org/doc/howto/wireless.tool.aircrack-ng\" rel=\"nofollow\">Airodump OpenWRT</a></p>\n"}], "owner": {"reputation": 319, "user_id": 2798460, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/84ceacd969033c367c04b0cf45f612da?s=128&d=identicon&r=PG&f=1", "display_name": "user12345", "link": "https://stackoverflow.com/users/2798460/user12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 846, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1458822264, "creation_date": 1438155285, "last_edit_date": 1495542227, "question_id": 31694042, "link": "https://stackoverflow.com/questions/31694042/wifi-how-to-get-connected-devices-name-in-c-in-openwrt", "title": "wifi - How to get connected device&#39;s name in C in openwrt?", "body": "<p>I am working on openwrt and is configured as a router. My application has to get the connected device's name and MAC ID. I referred to this link : <a href=\"https://stackoverflow.com/questions/28279887/how-to-get-ip-and-mac-address-in-my-c-program-for-connected-wi-fi-user/31691811#31691811\">To get MAC ID</a></p>\n\n<p>Can anyone suggest me how to get device's name in C?</p>\n"}, {"tags": ["c", "linux", "unix"], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 1342791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fea8b4a1c2d6aa439e1cf07eb5bc1d?s=128&d=identicon&r=PG", "display_name": "maccam94", "link": "https://stackoverflow.com/users/1342791/maccam94"}, "edited": false, "score": 0, "creation_date": 1447144358, "post_id": 31694307, "comment_id": 55025165, "body": "Does it actually need to know about the children, or just have a handler for SIGCHLD?"}], "tags": [], "owner": {"reputation": 39526, "user_id": 265804, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/156ef8708acdbf6a9ef76dad0d69609f?s=128&d=identicon&r=PG&f=1", "display_name": "Blagovest Buyukliev", "link": "https://stackoverflow.com/users/265804/blagovest-buyukliev"}, "is_accepted": true, "score": 6, "last_activity_date": 1438156032, "creation_date": 1438156032, "answer_id": 31694307, "question_id": 31694032, "link": "https://stackoverflow.com/questions/31694032/what-happens-to-the-child-process-when-the-parent-process-calls-an-exec-command/31694307#31694307", "title": "What happens to the child process, when the parent process calls an exec command", "body": "<p>The pid of the parent process will remain the same after the <code>exec</code>, so the process hierarchy won't be affected.</p>\n\n<p>The problem with this approach is that the newly replaced parent process generally won't be aware that it has previously spawned a child and will not call <code>wait</code> or <code>waitpid</code> on it. This will cause the child process to become a zombie when it exits.</p>\n"}], "owner": {"reputation": 2346, "user_id": 2294535, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/18P2I.jpg?s=128&g=1", "display_name": "Amrith Krishna", "link": "https://stackoverflow.com/users/2294535/amrith-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 1, "accepted_answer_id": 31694307, "answer_count": 1, "score": 5, "last_activity_date": 1438157446, "creation_date": 1438155260, "last_edit_date": 1495542611, "question_id": 31694032, "link": "https://stackoverflow.com/questions/31694032/what-happens-to-the-child-process-when-the-parent-process-calls-an-exec-command", "title": "What happens to the child process, when the parent process calls an exec command", "body": "<p>Suppose we have a parent process and if it calls an exec function, after calling a fork to create child process.</p>\n\n<p>Now what happens to the child process: will it act like the original parent process, such that the user won't spot the difference that the parent process got replaced with some other binary ? </p>\n\n<p>I think this question differs from the following question\n<a href=\"https://stackoverflow.com/questions/5678395/what-happens-to-child-process\">what happens to child process?</a>.</p>\n\n<pre><code>if ( (pid == fork ()) != 0 )\n{\n    if (strcmp(cmd,\"mypwd\")==0)\n    {\n        execlp (\u201cmypwd\u201d,0);\n    }\n\n    ...\n    ...\n\n    else if (strcmp(cmd,\"myexit\")==0)\n        exit(1);\n}\n</code></pre>\n"}]