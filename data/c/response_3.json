[{"tags": ["c"], "comments": [{"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 1, "creation_date": 1422488937, "post_id": 28204427, "comment_id": 44775068, "body": "It&#39;s not clear what the meaning of 1s and 0s is... and the output you show can be easily generated by indexing the array in a circular fashion a given amount of times...so what&#39;s the point of the linked lists?"}, {"owner": {"reputation": 1119, "user_id": 1352575, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8fdf71d9f960b4ab57f2482a231e217f?s=128&d=identicon&r=PG", "display_name": "metraon", "link": "https://stackoverflow.com/users/1352575/metraon"}, "reply_to_user": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "edited": false, "score": 0, "creation_date": 1422490136, "post_id": 28204427, "comment_id": 44775444, "body": "The 1s and 0s are upper-case and lower case letter that I will later transform."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1422490180, "post_id": 28204427, "comment_id": 44775462, "body": "What is your question? And there <i>are</i> no uppercase letters in the examples each followed or preceded by a mix of 0s and 1s."}, {"owner": {"reputation": 1119, "user_id": 1352575, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8fdf71d9f960b4ab57f2482a231e217f?s=128&d=identicon&r=PG", "display_name": "metraon", "link": "https://stackoverflow.com/users/1352575/metraon"}, "edited": false, "score": 0, "creation_date": 1422490935, "post_id": 28204427, "comment_id": 44775674, "body": "linkedListOne contains the capitalisation in &quot;binary&quot;, so 11111 will be CLOSE. I am not sure how to capitalise or decapitalise the text yet so for now I just want to match the numbers of characters with the numbers of 0 and 1. I use linked list because the message is gonna repeat itselft a lot and its a variable lenght message so I cant use arrays, and its easier to add/remove something in it."}], "answers": [{"tags": [], "owner": {"reputation": 1119, "user_id": 1352575, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8fdf71d9f960b4ab57f2482a231e217f?s=128&d=identicon&r=PG", "display_name": "metraon", "link": "https://stackoverflow.com/users/1352575/metraon"}, "is_accepted": true, "score": 0, "last_activity_date": 1422501808, "creation_date": 1422501808, "answer_id": 28206485, "question_id": 28204427, "link": "https://stackoverflow.com/questions/28204427/loop-text-to-match-character-count-between-two-linked-list-in-c/28206485#28206485", "title": "Loop text to match character count between two linked list in C", "body": "<p>I ended doing this :</p>\n\n<pre><code>    int i=0;\n    int j=0;\n    while(i != LETTER_COUNT)\n    {\n        char c = myBaseArray[j % myBaseArray_LENGTH];\n        if(c == ' '){\n            linkedListTwo = add(linkedListTwo,  c);\n            j++;\n        }\n        else{\n            linkedListTwo= add(linkedListTwo,  c);\n            j++;\n            i++;    \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1119, "user_id": 1352575, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8fdf71d9f960b4ab57f2482a231e217f?s=128&d=identicon&r=PG", "display_name": "metraon", "link": "https://stackoverflow.com/users/1352575/metraon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 28206485, "answer_count": 1, "score": 0, "last_activity_date": 1422501808, "creation_date": 1422487912, "question_id": 28204427, "link": "https://stackoverflow.com/questions/28204427/loop-text-to-match-character-count-between-two-linked-list-in-c", "title": "Loop text to match character count between two linked list in C", "body": "<p>I have this text that I want to loop to match the count of my elements in a linked list.</p>\n\n<pre><code>char myBaseArray[] = \"close your eyes \";\n</code></pre>\n\n<p>I have this linked list made of int (0 and 1) like this :</p>\n\n<pre><code>linkedListOne = 1 -&gt; 0 -&gt; 0 -&gt; 0 -&gt; 1 -&gt; 1 -&gt; 1 -&gt; 1 -&gt; 1 -&gt; 1 -&gt; 1 -&gt; 0 -&gt; 0 -&gt; 0  \n</code></pre>\n\n<p>I want to make a second linked list with the same number of 0's and 1's and loop through my base array for text. In other words, 1's and 0's are letters but I want to keep the blanks with my base array. </p>\n\n<p>Example 1 :</p>\n\n<pre><code>linkedListOne = 1 -&gt; 0   (2 elements in my list)\nlinkedListTwo = c -&gt; l   (2 letters)\n</code></pre>\n\n<p>Example 2 : </p>\n\n<pre><code>linkedListOne = 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 -&gt; 1 -&gt; 0 (20 elements in my list)\nlinkedListTwo = c -&gt; l -&gt; o -&gt; s -&gt; e -&gt;(blank)-&gt; y -&gt; o -&gt; u -&gt; r -&gt;(blank)-&gt; e -&gt; y -&gt; e -&gt; s -&gt;(blank)-&gt;c -&gt; l -&gt; o -&gt; s -&gt; e-&gt;(blank)-&gt;y -&gt; o(20 letters)\n</code></pre>\n\n<p>As you can see blank does not count as a 0 or 1.</p>\n\n<p>The example 2 is more complex because I have to add blank spaces in my linked list so when I print it, it will output :</p>\n\n<pre><code>close your eyes close yo\n</code></pre>\n\n<p>Another output with a very long list could be :</p>\n\n<pre><code>close your eyes close your eyes close your eyes close your eyes close your eyes \n</code></pre>\n\n<p>My linked list are working just fine and I have implemented a count function so I know the numbers of 1's and 0's. I am not sure on how to loop through my base array to match that count.</p>\n"}, {"tags": ["c++", "c", "libxml2"], "comments": [{"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 1, "creation_date": 1422487532, "post_id": 28204317, "comment_id": 44774625, "body": "Given that you are processing fixed responses, couldn&#39;t you just preprocess the raw message text prior to the XML parsing, and replace the ESC chars with your own special text pattern?"}, {"owner": {"reputation": 1951, "user_id": 37236, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JJHyB.png?s=128&g=1", "display_name": "Amish Programmer", "link": "https://stackoverflow.com/users/37236/amish-programmer"}, "reply_to_user": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1422487723, "post_id": 28204317, "comment_id": 44774683, "body": "Peter M - That is my temporary workaround. The value is arbitrary text, so I wouldn&#39;t consider this approach 100% reliable."}, {"owner": {"reputation": 7145, "user_id": 31326, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/375fe48b92417121e65b2145dcc840be?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/31326/peter-m"}, "edited": false, "score": 0, "creation_date": 1422487784, "post_id": 28204317, "comment_id": 44774707, "body": "I&#39;m not sure but the ESC char may not be a valid XML UTF-8 char, so preprocessing may be your only real option."}], "answers": [{"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1422488173, "creation_date": 1422488173, "answer_id": 28204481, "question_id": 28204317, "link": "https://stackoverflow.com/questions/28204317/using-libxml2-to-parse-xml-attributes-containing-invalid-characters/28204481#28204481", "title": "Using libxml2 to Parse XML Attributes Containing Invalid Characters", "body": "<p>You are asking the unanswerable. Suppose instead of an <code>0x1B</code> character you got a <code>\\n</code>? Or worse an additional <code>\"</code>? Or a <code>\\</code>? Anything that produces invalid xml is going to make libxml2 choke, because it is an xml parser. And the example you produced is invalid xml. If you want it to parse invalid xml you need to determine how it should parse and either modify libxml2 or modify the xml so it is valid and undo the damage later. The reason it is invalid xml is precisely because it's not obvious how such things should parse.</p>\n\n<p>The best solution is to fix whatever is producing the (alleged) xml to not produce broken xml.</p>\n"}], "owner": {"reputation": 1951, "user_id": 37236, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JJHyB.png?s=128&g=1", "display_name": "Amish Programmer", "link": "https://stackoverflow.com/users/37236/amish-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449690861, "creation_date": 1422487269, "question_id": 28204317, "link": "https://stackoverflow.com/questions/28204317/using-libxml2-to-parse-xml-attributes-containing-invalid-characters", "title": "Using libxml2 to Parse XML Attributes Containing Invalid Characters", "body": "<p>I am attempting to parse XML response messages from a third-party interface that contain illegal characters. Please note that these responses are not within my control.</p>\n\n<p>The following is a modified example response</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;response&gt;\n  &lt;data value=\"Example A\" /&gt;\n  &lt;data value=\"Example B\" /&gt;\n  &lt;data value=\"Example C\" /&gt;\n&lt;/response&gt;\n</code></pre>\n\n<p>Occasionally, the \"value\" attribute might contain the <strong>ESC</strong> control character [0x1b], which is used (questionably) to indicate special characteristics to be applied to the value.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;response&gt;\n  &lt;data value=\"[0x1b]Example A\" /&gt;\n  &lt;data value=\"Example B\" /&gt;\n&lt;/response&gt;\n</code></pre>\n\n<p>I'm using the libxml2 <em>xmlParseMemory()</em> function to attempt to parse this response. <a href=\"http://www.xmlsoft.org/html/libxml-parser.html#xmlParseMemory\" rel=\"nofollow\">http://www.xmlsoft.org/html/libxml-parser.html#xmlParseMemory</a></p>\n\n<p>I'm calling the function as as follows:</p>\n\n<pre><code>xmlDocPtr doc = xmlParseMemory( buffer, size );\n</code></pre>\n\n<p>When the response XML is valid, I get a valid xmlDocPtr and can continue to work with it. If the response contains illegal characters, I receive NULL and wind up at a dead end.</p>\n\n<p>Is there any way I parse these messages without receiving errors and without throwing away the illegal characters?</p>\n"}, {"tags": ["c", "arrays", "input", "linked-list"], "comments": [{"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 1, "creation_date": 1422486854, "post_id": 28204197, "comment_id": 44774386, "body": "Sure, you can do that with a linked list.  Give it a try, and if you get stuck post a more specific question including your linked list code.  Also look at a circular buffer.  That is a specialized kind of data structure probably more appropriate to this task. <a href=\"http://en.wikipedia.org/wiki/Circular_buffer\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Circular_buffer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1422489422, "creation_date": 1422489422, "answer_id": 28204701, "question_id": 28204197, "link": "https://stackoverflow.com/questions/28204197/store-the-past-user-entered-commands-into-a-linked-list/28204701#28204701", "title": "Store the past user entered commands into a linked list", "body": "<p>This answer uses a ring buffer of structs that hold the string and the length, as OP asked for. When the buffer wraps, the previous string memory is freed and the new record initialised. The oldest record is at index <code>first_rec</code> and there are <code>num_recs</code> records. My main loop end test is when there is a blank entry, for the sake of this example. I was slightly lazy in the initialisation, assuming that the static array has string pointeres initialised to <code>NULL</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define RECORDS 10\n#define BUFSIZE 999\n\ntypedef struct {\n    int length;\n    char *input;\n    } inpstruct;\n\ninpstruct history [RECORDS];\nint first_rec;\nint num_recs;\n\nvoid show_history (void) {\n    int i, index;\n    for (i=0; i&lt;num_recs; i++) {\n        index = (first_rec + i) % RECORDS;\n        printf(\"Index: %-2d Length: %-3d Input: %s\\n\", index, \n                history[index].length, history[index].input);\n    }\n}\n\nint main(void) {\n    char buffer [BUFSIZE+1];\n    int len, index;\n    while (fgets(buffer, BUFSIZE, stdin) != NULL) {\n        len = strlen(buffer);\n        if (len &amp;&amp; buffer[len-1]=='\\n')\n            buffer [--len] = 0;             // truncate newline\n        if (len == 0)\n            break;\n        index = (first_rec + num_recs) % RECORDS;\n        if (history[index].input != NULL)   // release previous record\n            free (history[index].input);\n        if ((history[index].input = malloc(len+1)) == NULL) {\n            perror (\"malloc() failure\");\n            return 1;\n        }\n        strcpy (history[index].input, buffer);\n        history[index].length = len;\n        if (num_recs &lt; RECORDS)\n            num_recs++;\n        else\n            first_rec = (first_rec + 1) % RECORDS;\n        show_history();\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 3646037, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1637f9eb5faa85b89f39a6f2f838cacd?s=128&d=identicon&r=PG&f=1", "display_name": "user3646037", "link": "https://stackoverflow.com/users/3646037/user3646037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 28204701, "answer_count": 1, "score": -1, "last_activity_date": 1422489422, "creation_date": 1422486673, "question_id": 28204197, "link": "https://stackoverflow.com/questions/28204197/store-the-past-user-entered-commands-into-a-linked-list", "title": "Store the past user entered commands into a linked list", "body": "<p>I have a program that reads in the users input into a char array called <code>inputBuffer</code> and also stores the length of the char array:</p>\n\n<pre><code>length = read(STDIN_FILENO, inputBuffer, 80);\n</code></pre>\n\n<p>I want to be able to store the past 10 inputs so they are accessible. When the 11th input comes in, I need to remove the first input so now only inputs 2-11 are stored. Can this be done with a linked list somehow?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 30400, "user_id": 782609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21f80e8ae8c0da98241d8a0e07f94e7b?s=128&d=identicon&r=PG", "display_name": "kamituel", "link": "https://stackoverflow.com/users/782609/kamituel"}, "edited": false, "score": 3, "creation_date": 1422485741, "post_id": 28203943, "comment_id": 44773933, "body": "It&#39;s unclear to me how exactly is it supposed to work. It&#39;d be useful if you posted 1-2 examples of x, y and z meeting your criteria."}, {"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1422485961, "post_id": 28203943, "comment_id": 44774052, "body": "Casting on the left side of an <code>=</code> operator is usually a sign you&#39;re doing something wrong."}, {"owner": {"reputation": 43, "user_id": 4504469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634880f49ed4a6174d5cf42f7b901304?s=128&d=identicon&r=PG&f=1", "display_name": "rcbranham", "link": "https://stackoverflow.com/users/4504469/rcbranham"}, "edited": false, "score": 0, "creation_date": 1422486651, "post_id": 28203943, "comment_id": 44774320, "body": "added edits to show examples on how it is supposed to work. Hopefully everything is more clear now, sorry for the confusion"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1422487634, "post_id": 28203943, "comment_id": 44774661, "body": "Um, bytes have 8 bits each, not 2. Where did that idea come from?"}, {"owner": {"reputation": 43, "user_id": 4504469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634880f49ed4a6174d5cf42f7b901304?s=128&d=identicon&r=PG&f=1", "display_name": "rcbranham", "link": "https://stackoverflow.com/users/4504469/rcbranham"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1422489232, "post_id": 28203943, "comment_id": 44775169, "body": "@LeeDanielCrocker not sure. Thank you for pointing that out"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4504469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634880f49ed4a6174d5cf42f7b901304?s=128&d=identicon&r=PG&f=1", "display_name": "rcbranham", "link": "https://stackoverflow.com/users/4504469/rcbranham"}, "edited": false, "score": 0, "creation_date": 1422486625, "post_id": 28204109, "comment_id": 44774312, "body": "X is supposed to be an integer. I added some edits to hopefully make it more clear, I apologize for the confusion"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 43, "user_id": 4504469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634880f49ed4a6174d5cf42f7b901304?s=128&d=identicon&r=PG&f=1", "display_name": "rcbranham", "link": "https://stackoverflow.com/users/4504469/rcbranham"}, "edited": false, "score": 0, "creation_date": 1422489010, "post_id": 28204109, "comment_id": 44775090, "body": "... and, dear downvoters, the problem here is precisely what? Yes, it&#39;s artificial, but so is the question."}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 0, "last_activity_date": 1422489846, "last_edit_date": 1422489846, "creation_date": 1422486278, "answer_id": 28204109, "question_id": 28203943, "link": "https://stackoverflow.com/questions/28203943/byte-swapping-in-bit-wise-operations/28204109#28204109", "title": "Byte swapping in bit wise operations", "body": "<p>When you say the <em>'the y and z bytes of x'</em> this implies x is an array of bytes, not an integer. If so:</p>\n\n<pre><code>x[z] ^= x[y];\nx[y] ^= x[z];\nx[z] ^= x[y];\n</code></pre>\n\n<p>will do the trick, by swapping <code>x[y]</code> and <code>x[z]</code> </p>\n\n<p>After your edit, it appears you want to swap individual bytes of a 32 bit integer:</p>\n\n<p>On a little-endian machine:</p>\n\n<pre><code>int\nswapbytes (int x, int y, int z)\n{\n    char *b = (char *)&amp;x;\n    b[z] ^= b[y];\n    b[y] ^= b[z];\n    b[z] ^= b[y];\n    return x;\n}\n</code></pre>\n\n<p>On a big-endian machine:</p>\n\n<pre><code>int\nswapbytes (int x, int y, int z)\n{\n    char *b = (char *)&amp;x;\n    b[3-z] ^= b[3-y];\n    b[3-y] ^= b[3-z];\n    b[3-z] ^= b[3-y];\n    return x;\n}\n</code></pre>\n\n<p>With a strict interpretation of the rules, you don't even need the xor trick:</p>\n\n<pre><code>int\nswapbytes (int x, int y, int z)\n{\n    char *b = (char *)&amp;x;\n    char tmp = b[z];\n    b[z] = b[y];\n    b[y] = tmp;\n    return x;\n}\n</code></pre>\n\n<p>On a big-endian machine:</p>\n\n<pre><code>int\nswapbytes (int x, int y, int z)\n{\n    char *b = (char *)&amp;x;\n    char tmp = b[3-z];\n    b[3-z] = b[3-y];\n    b[3-y] = tmp;\n    return x;\n}\n</code></pre>\n\n<p>If you want to do it using bit shifts (note <code>&lt;&lt;3</code> multiplies by 8):</p>\n\n<pre><code>int\nswapbytes (unsigned int x, int y, int z)\n{\n    unsigned int masky = 0xff &lt;&lt; (y&lt;&lt;3);\n    unsigned int maskz = 0xff &lt;&lt; (z&lt;&lt;3);\n    unsigned int origy = (x &amp; masky) &gt;&gt; (y&lt;&lt;3);\n    unsigned int origz = (x &amp; maskz) &gt;&gt; (z&lt;&lt;3);\n    return (x &amp; ~masky &amp; ~maskz) | (origz &lt;&lt; (y&lt;&lt;3)) | (origy &lt;&lt; (z&lt;&lt;3));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "is_accepted": true, "score": 1, "last_activity_date": 1422489776, "creation_date": 1422489776, "answer_id": 28204778, "question_id": 28203943, "link": "https://stackoverflow.com/questions/28203943/byte-swapping-in-bit-wise-operations/28204778#28204778", "title": "Byte swapping in bit wise operations", "body": "<p>Extract the ith byte by using <code>((1ll &lt;&lt; ((i + 1) * 8)) - 1) &gt;&gt; (i * 8)</code>. Swap using the XOR operator, and put the swapped bytes in their places.</p>\n\n<pre><code>int x, y, z;\ny = 1, z = 3;\nx = 0x12345678;\n\nint a, b; /* bytes to swap */\na = (x &amp; ((1ll &lt;&lt; ((y + 1) * 8)) - 1)) &gt;&gt; (y * 8);\nb = (x &amp; ((1ll &lt;&lt; ((z + 1) * 8)) - 1)) &gt;&gt; (z * 8);\n\n/* swap */\na = a ^ b;\nb = a ^ b;\na = a ^ b;\n\n/* put zeros in bytes to swap */\nx = x &amp; (~((0xff &lt;&lt; (y * 8))));\nx = x &amp; (~((0xff &lt;&lt; (z * 8))));\n\n/* put new bytes in place */\nx = x | (a &lt;&lt; (y * 8));\nx = x | (b &lt;&lt; (z * 8));\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4504469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634880f49ed4a6174d5cf42f7b901304?s=128&d=identicon&r=PG&f=1", "display_name": "rcbranham", "link": "https://stackoverflow.com/users/4504469/rcbranham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5762, "favorite_count": 1, "accepted_answer_id": 28204778, "answer_count": 2, "score": 0, "last_activity_date": 1422489846, "creation_date": 1422485451, "last_edit_date": 1422489129, "question_id": 28203943, "link": "https://stackoverflow.com/questions/28203943/byte-swapping-in-bit-wise-operations", "title": "Byte swapping in bit wise operations", "body": "<p>I have this function called byte swap I am supposed to implement. The idea is that the function takes 3 integers (int x, int y, int z) and the function will swap the y and z bytes of the int x. The restrictions are pretty much limited to bit wise operations (no loops, and no if statements or logical operators such as ==).</p>\n\n<p><strong>I don't believe that I presented this problem adequately so Im going to re attempt</strong></p>\n\n<p>I now understand that </p>\n\n<pre><code>byte 1 is referring to bits 0-7\nbyte 2 is referring to bits 8-15\nbyte 3                      16-23\nbyte 4                      24-31\n</code></pre>\n\n<p>My function is supposed to take 3 integer inputs, x, y and z. The y byte and z byte on the x then would have to get switched</p>\n\n<pre><code>int byteSwap(int x, int y, int z)\n</code></pre>\n\n<p>ex of the working function  </p>\n\n<pre><code>byteSwap(0x12345678, 1, 3) = 0x56341278\nbyteSwap(0xDEADBEEF, 0, 2) = 0xDEEFBEAD\n</code></pre>\n\n<p>My original code had some huge errors in it, namely the fact that I was considering a byte to be 2 bits instead of 8. The main problem that I'm struggling with is that I do not know how to access the bits inside of the given byte. For example, when I'm given byte 4 and 5, how do I access their respected bits? As far as I can tell I can't find a mathematical relationship between the given byte, and its starting bit. I'm assuming I have to shift and then mask, and save those to variables.Though I cannot even get that far.</p>\n"}, {"tags": ["c", "command-line-arguments"], "comments": [{"owner": {"reputation": 74, "user_id": 2217588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78a85a855ce29c7eed8ca921d4220745?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/2217588/matt"}, "edited": false, "score": 1, "creation_date": 1422485828, "post_id": 28203935, "comment_id": 44773976, "body": "If argc is 1, does it make any sense to look at argv[1]?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1422486358, "post_id": 28203935, "comment_id": 44774204, "body": "You may be happy to hear there is a function to scan backwards for a character: <a href=\"http://en.cppreference.com/w/c/string/byte/strrchr\" rel=\"nofollow noreferrer\"><code>strrchr</code></a>. Also, better consider what happens when your user supplies a filename <i>without</i> extension. In that case you need to stop when encountering a path separator: the forward or backward slash and the <code>:</code>."}, {"owner": {"reputation": 97, "user_id": 3637994, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95129fa34f71d316f8849b0593c9ebf0?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Tran", "link": "https://stackoverflow.com/users/3637994/nguyen-tran"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422496022, "post_id": 28203935, "comment_id": 44776969, "body": "@Jongware any suggestion on how to deal with filename without extension? I tried to check the string for &#39;.&#39; character. Then concatenate a &quot;.bak&quot; after not finding any &#39;.&#39; . However it doesn&#39;t seem to work."}], "answers": [{"comments": [{"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1422486862, "post_id": 28204057, "comment_id": 44774390, "body": "@PaulRooney I&#39;d thought that was obvious, but perhaps not - edited"}, {"owner": {"reputation": 97, "user_id": 3637994, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95129fa34f71d316f8849b0593c9ebf0?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Tran", "link": "https://stackoverflow.com/users/3637994/nguyen-tran"}, "edited": false, "score": 0, "creation_date": 1422496246, "post_id": 28204057, "comment_id": 44777021, "body": "what type of value is fn?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1422497984, "post_id": 28204057, "comment_id": 44777510, "body": "<code>fn</code> is 1 <code>char</code> too small."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1422514917, "post_id": 28204057, "comment_id": 44782167, "body": "@chux: indeed, if there is no dot at al. Thanks - fixed."}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 3, "last_activity_date": 1422514885, "last_edit_date": 1422514885, "creation_date": 1422486012, "answer_id": 28204057, "question_id": 28203935, "link": "https://stackoverflow.com/questions/28203935/how-to-change-one-part-of-a-string-taken-from-c-line-argument/28204057#28204057", "title": "How to change one part of a string taken from C line argument?", "body": "<p>You appear to be trying to modify <code>argv[1]</code> when you didn't allocate it. That sounds like a recipe for disaster, as your longer string may not fit the allocation.</p>\n\n<p>Also, you are only running this code if <code>argc == 1</code>. If <code>argc == 1</code> then the last argument is <code>argv[0]</code> not <code>argv[1]</code>. I think you want <code>if (argc == 2)</code>.</p>\n\n<p>A suggestion (untested):</p>\n\n<pre><code>const char *suffix = \".bak\";\nchar *fn = malloc (strlen(argv[1]) + strlen (suffix) + 1);\nstrcpy (fn, argv[1])\nchar *dot = strrchr (fn, '.');\nif (dot)\n    *dot = '\\0';\nstrcpy (fn + strlen(fn), suffix);\n/* ... do some stuff with fn ... */\nfree (fn);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "is_accepted": false, "score": 3, "last_activity_date": 1422488958, "last_edit_date": 1422488958, "creation_date": 1422488000, "answer_id": 28204442, "question_id": 28203935, "link": "https://stackoverflow.com/questions/28203935/how-to-change-one-part-of-a-string-taken-from-c-line-argument/28204442#28204442", "title": "How to change one part of a string taken from C line argument?", "body": "<p>I think the main confusion is with your handling of command line arguments.</p>\n\n<p>When you do</p>\n\n<pre><code>if (argc &lt; 2)\n    {\n        printf(\"Source file must be specified.\");   \n    }\n</code></pre>\n\n<p>it means </p>\n\n<pre><code>else if (argc == 1) { .... }\n</code></pre>\n\n<p>Can never run, 1 is less than 2 of course.</p>\n\n<p>The best action to take is to return if <code>argc</code> is less than 2 (i.e. you passed no command line arguments). This prevents the <code>fcloses</code> at the end causing a crash (or undefined behaviour). Even better move the closes inside the if blocks or assign NULL to your FILE pointers intially and check for NULL before closing them.</p>\n\n<p>Where you check <code>argc == 1</code> it should be <code>argc == 2</code>. If argc is 1 it means you got no command line arguments, as the first argument is the name of the executable.</p>\n\n<p>Note also this line is wrong</p>\n\n<pre><code>if (buffer[length] == \".\")\n</code></pre>\n\n<p>It should be </p>\n\n<pre><code>if (buffer[length] == '.')\n</code></pre>\n\n<p>You are comparing a character, not a string (ultimately a pointer) and you should get a warning here (compare integer to pointer). </p>\n"}], "owner": {"reputation": 97, "user_id": 3637994, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/95129fa34f71d316f8849b0593c9ebf0?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Tran", "link": "https://stackoverflow.com/users/3637994/nguyen-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422514885, "creation_date": 1422485419, "question_id": 28203935, "link": "https://stackoverflow.com/questions/28203935/how-to-change-one-part-of-a-string-taken-from-c-line-argument", "title": "How to change one part of a string taken from C line argument?", "body": "<p>I'm trying to write a simple backup program. It will take in a file and then create a file with the same content, with a .bak extension unless specified. Below is my code, my program run fine when I specify that I want .back extension for my new file. I'm having problem trying to read in the path in the command line, truncate the file extension, concatenate .back to it. Can someone point out the problems in my code? thanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char ch, buffer[256];\n    FILE *source, *target;\n\n    if (argc &lt; 2)\n    {\n        printf(\"Source file must be specified.\");   \n    }\n    else if (argc == 3)\n    {\n        source = fopen(argv[1], \"rb\");\n        target = fopen(argv[2], \"wb\");\n\n        while ((ch = fgetc(source)) != EOF)\n        {\n            fputc(ch, target);\n        }\n    }\n\n// the part below doesn't work\n    else if (argc == 1)\n    {\n        int length = 0;\n        source = fopen(argv[1], \"rb\");\n        strcpy_s(buffer, 256, argv[1]);\n        length = strlen(argv[1]) - 1;\n        while (length &gt; 0)\n        {\n            if (buffer[length] == \".\")\n                break;\n            length--;\n        }\n        buffer[length + 1] = '\\0';\n        strcat(buffer, \"bak\");\n        target = fopen(buffer, \"wb\");\n        while ((ch = fgetc(source)) != EOF)\n        {\n            fputc(ch, target);\n        }\n    }\n\n    fclose(source);\n    fclose(target);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "security"], "comments": [{"owner": {"reputation": 4979, "user_id": 2676531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc88aa76113d738e11685389a1409a26?s=128&d=identicon&r=PG", "display_name": "Celeo", "link": "https://stackoverflow.com/users/2676531/celeo"}, "edited": false, "score": 1, "creation_date": 1422485908, "post_id": 28203934, "comment_id": 44774016, "body": "If you want people to look at your code, you&#39;ll need to provide it on this site. If it&#39;s too long, take a look at <a href=\"http://stackoverflow.com/help/mcve\">this help article</a>."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1422495449, "creation_date": 1422495449, "answer_id": 28205625, "question_id": 28203934, "link": "https://stackoverflow.com/questions/28203934/a5-1-security-algorithm-3/28205625#28205625", "title": "A5/1 security algorithm 3", "body": "<p>Apart from making some probably unwarranted assumptions about type sizes (these days, <code>unsigned long</code> is often 64-bit, not 32-bit), it isn't very hard code.</p>\n\n<p>Given that <code>x</code> is a 32-bit value, then:</p>\n\n<ul>\n<li><code>x ^= x &gt;&gt; 16;</code> xors the top 16 bits of <code>x</code> with the bottom 16 bits.  The bottom 16 bits each gives the parity of a pair of bits in the original 32-bit word.</li>\n</ul>\n\n<p>This process repeats for the bottom 8 bits, then 4, then 2, then 1 bits, so that in the end, the least significant bit is the parity of the original 32-bit value.</p>\n\n<p>If <code>unsigned long</code> is a 64-bit value, the code still produces the parity of the less significant 32-bits of the input value.</p>\n"}], "owner": {"reputation": 1, "user_id": 4499117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56f069e11b11f72f8756ab879e8d05f?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad sadegh Hekmat", "link": "https://stackoverflow.com/users/4499117/mohammad-sadegh-hekmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422495449, "creation_date": 1422485413, "last_edit_date": 1422495189, "question_id": 28203934, "link": "https://stackoverflow.com/questions/28203934/a5-1-security-algorithm-3", "title": "A5/1 security algorithm 3", "body": "<p>In the following link, we have a pedagogical implementation of the A5/1 algorithm. I know how it works but I can't understand what the <code>bit parity(word x)</code> function is for? I know what it is, but just tell me how it works.</p>\n\n<pre><code>typedef unsigned long word;\ntypedef word bit;\n\n/* Calculate the parity of a 32-bit word, i.e. the sum of its bits modulo 2 */\nbit parity(word x) {\n    x ^= x&gt;&gt;16;\n    x ^= x&gt;&gt;8;\n    x ^= x&gt;&gt;4;\n    x ^= x&gt;&gt;2;\n    x ^= x&gt;&gt;1;\n    return x&amp;1;\n}\n</code></pre>\n\n<p>Algorithm link: \n<a href=\"http://scard.org/gsm/a51.html\" rel=\"nofollow\">http://scard.org/gsm/a51.html</a></p>\n"}, {"tags": ["c", "bison", "yacc", "flex-lexer", "lex"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422485783, "post_id": 28203868, "comment_id": 44773949, "body": "You you don&#39;t have any accepted answer? aren&#39;t answers good enough for you?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422487790, "post_id": 28203868, "comment_id": 44774710, "body": "can you format the <code>lex</code> file content please?"}, {"owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422488649, "post_id": 28203868, "comment_id": 44774968, "body": "It is formatted now.   I would like to format it in my code but win flex does not like it if I split the code on different lines."}], "answers": [{"comments": [{"owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "edited": false, "score": 0, "creation_date": 1422530697, "post_id": 28205836, "comment_id": 44790578, "body": "Right!  The fopen was failing because the file name was invalid.  I had forgot to check for &quot;.&quot; in the name.  Thanks for clarifying the logic for the brackets / lines in a lex pattern / action."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1422496943, "creation_date": 1422496943, "answer_id": 28205836, "question_id": 28203868, "link": "https://stackoverflow.com/questions/28203868/debug-assertion-failed-error-in-flex-bison-program-when-trying-to-program-inc/28205836#28205836", "title": "Debug assertion failed error in flex / bison program when trying to program &quot;include&quot; functionality", "body": "<p>The debug assertion is the Windows runtime's way of telling you that you tried reading or writing a <code>FILE*</code> which is <code>NULL</code>, which would imply that the <code>fopen</code> failed.</p>\n\n<p>In your code:</p>\n\n<pre><code>yyin = fopen(yytext, \"r\" );\nif (!yyin)\n    sprintf(err_str, \"Error opening include file: %s\", yytext);\nyy_switch_to_buffer(yy_create_buffer(yyin, YY_BUF_SIZE, yyscanner),\n    yyscanner);\n</code></pre>\n\n<p>If the <code>fopen</code> fails, you produce a nice error message, but don't seem to do anything with it: you neither print it out nor do you avoid switching to the new buffer with a <code>NULL</code> value for <code>yyin</code>.</p>\n\n<p>So it seems most likely that your <code>fopen</code> failed and you proceeded to try to read from <code>NULL</code>.</p>\n\n<p>But there is another problem with your code.</p>\n\n<p>The <code>flex</code> start condition is not part of the buffer. It is global. Switching to a new buffer <em>does not</em> save the start condition (unless you save it somewhere). Similarly, unless you did the work to save the start condition, there is no way to restore it when you switch back to the original buffer. In short, since you were in start condition <code>include_state</code> when you switch buffers, you are still in that start condition when you start to tokenize the included file, which means that the string at the beginning of that file (if it starts with <code>[[:alnum:] ]</code>) will be used as a filename to include. That may well be why your <code>fopen</code> fails.</p>\n\n<p>I suspect that the other obvious problem is a cut-and-paste issue. You have:</p>\n\n<pre><code>&lt;include_state&gt;[a-zA-Z0-9 ]+\n{\n</code></pre>\n\n<p>which is a pattern with an empty action, followed by a free-standing action (which will never get executed). The action must <em>start</em>  on the same line as the pattern; <code>flex</code> will keep reading the action until it finds the matching <code>}</code>, so you only need to put the <code>{</code> on the same line as the pattern:</p>\n\n<pre><code>&lt;include_state&gt;[a-zA-Z0-9 ]+     {\n</code></pre>\n\n<p>I'm not sure what else you mean by \"split the code on different lines\", but I hope that is the answer to that query.</p>\n"}], "owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 28205836, "answer_count": 1, "score": 0, "last_activity_date": 1422522628, "creation_date": 1422485068, "last_edit_date": 1422522628, "question_id": 28203868, "link": "https://stackoverflow.com/questions/28203868/debug-assertion-failed-error-in-flex-bison-program-when-trying-to-program-inc", "title": "Debug assertion failed error in flex / bison program when trying to program &quot;include&quot; functionality", "body": "<p>I get a \"debug assertion failed... Expression stream != NULL\" error when running a flex / bison program.  Here is the relevant code, at the top of the lex file:</p>\n\n<pre><code>%x include_state\n\n%{\n    #define MAX_INCLUDE_DEPTH 10\n    YY_BUFFER_STATE include_stack[MAX_INCLUDE_DEPTH];\n    int include_stack_ptr = 0;\n%}\n</code></pre>\n\n<p>... and later in the lex file:</p>\n\n<pre><code>include[ \\t]*\\\" { BEGIN(include_state); }\n&lt;include_state&gt;[a-zA-Z0-9 ]+ {\n    if (include_stack_ptr &gt;= MAX_INCLUDE_DEPTH)\n    { \n        fprintf(stderr, \"Includes nested too deeply\");\n        exit(1);\n    } \n    include_stack[include_stack_ptr++] = YY_CURRENT_BUFFER;\n    yyin = fopen(yytext, \"r\" );\n    if (!yyin)\n        sprintf(err_str, \"Error opening include file: %s\", yytext);\n    yy_switch_to_buffer(yy_create_buffer(yyin, YY_BUF_SIZE, yyscanner),\n        yyscanner);\n}\n&lt;include_state&gt;\\\"; { BEGIN(INITIAL); }\n</code></pre>\n\n<p>... the text it is trying to pass is:</p>\n\n<pre><code>include \"hello.txt\";\n</code></pre>\n\n<p>I am trying to add \"include\" functionality to my program.  I am using win flex and win bison. (A side issue: how do I split lines of code in the lex file?)</p>\n"}, {"tags": ["c", "swift"], "answers": [{"tags": [], "owner": {"reputation": 357162, "user_id": 28804, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/015c999a9db79ffb3030b3cc207d0be8?s=128&d=identicon&r=PG", "display_name": "mipadi", "link": "https://stackoverflow.com/users/28804/mipadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1422485719, "creation_date": 1422485719, "answer_id": 28204003, "question_id": 28203675, "link": "https://stackoverflow.com/questions/28203675/is-it-possible-to-mix-c-and-swift/28204003#28204003", "title": "Is it possible to mix C and Swift?", "body": "<p>You can definitely interface directly with C code. <a href=\"https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html#//apple_ref/doc/uid/TP40014216-CH8-XID_11\" rel=\"nofollow\">This page</a> has a lot more details on how you do that.</p>\n"}, {"tags": [], "owner": {"reputation": 2034, "user_id": 1575195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BVRgR.jpg?s=128&g=1", "display_name": "ErAcube", "link": "https://stackoverflow.com/users/1575195/eracube"}, "is_accepted": false, "score": 0, "last_activity_date": 1422486146, "creation_date": 1422486146, "answer_id": 28204088, "question_id": 28203675, "link": "https://stackoverflow.com/questions/28203675/is-it-possible-to-mix-c-and-swift/28204088#28204088", "title": "Is it possible to mix C and Swift?", "body": "<p>Swift is designed for seamless compatibility with Objective-C. It means we can use Swift API in Objective-C and vice versa. </p>\n\n<p>Using swift can surely interact with the library purely written in C. And it is the best way to use the same libraries across different mobile platforms, because both Android and iOS supports pure C. However, you need not learn Objective-C because we can develop applications using only swift. </p>\n\n<p>Note from Apples documentation: You cannot import C++ code directly into Swift. Instead, create an Objective-C or C wrapper for C++ code.</p>\n"}, {"tags": [], "owner": {"reputation": 38822, "user_id": 3925941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a3f76eac79606d705426bcc267dc01?s=128&d=identicon&r=PG", "display_name": "Airspeed Velocity", "link": "https://stackoverflow.com/users/3925941/airspeed-velocity"}, "is_accepted": true, "score": 8, "last_activity_date": 1422486393, "creation_date": 1422486393, "answer_id": 28204142, "question_id": 28203675, "link": "https://stackoverflow.com/questions/28203675/is-it-possible-to-mix-c-and-swift/28204142#28204142", "title": "Is it possible to mix C and Swift?", "body": "<p>It is very much possible to mix Swift and C.  In fact it's pretty easy.  For example, if you type <code>import Darwin</code> into a playground, you will find all sorts of C functions:</p>\n\n<pre><code>import Darwin\n\nlet i = atoi(\"42\")\nlet path = String.fromCString(getenv(\"PATH\"))\n\nlet voidptr = malloc(10 * UInt(sizeof(Int)))\nlet ptr = UnsafeMutablePointer&lt;Int&gt;(voidptr)\nfor i in 0..&lt;10 {\n    ptr[i] = i\n}\nlet buffer = UnsafeBufferPointer(start: ptr, count: 10)\nreduce(buffer, 0, +) // sum(1 to 10) = 45\nfree(ptr)\n</code></pre>\n\n<p>There are various convenience conversions, for example in the above code, \"42\" was automatically converted to a C-style string to be passed into <code>atoi</code>.  Similarly, if you declare <code>var i: Int = 0</code>, you can pass that into a C API that takes a C pointer-to-int as <code>f(&amp;i)</code>, and arrays are similarly auto-converted to pointers when you pass them in.</p>\n\n<p>See <a href=\"https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/InteractingWithCAPIs.html#//apple_ref/doc/uid/TP40014216-CH8-XID_11\">the docs</a> on the Apple website for more info on how you can interact with C from Swift. </p>\n"}], "owner": {"reputation": 1442, "user_id": 3289673, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100001287204028/picture?type=large", "display_name": "SanchelliosProg", "link": "https://stackoverflow.com/users/3289673/sanchelliosprog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1933, "favorite_count": 1, "accepted_answer_id": 28204142, "answer_count": 3, "score": 5, "last_activity_date": 1422486393, "creation_date": 1422484141, "last_edit_date": 1422486091, "question_id": 28203675, "link": "https://stackoverflow.com/questions/28203675/is-it-possible-to-mix-c-and-swift", "title": "Is it possible to mix C and Swift?", "body": "<p>I've studied the basics of Swift and some C. How could I combine C and Swift in one project? Could I ignore Objective-C?</p>\n"}, {"tags": ["c", "doubly-linked-list"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1422484228, "post_id": 28203646, "comment_id": 44773346, "body": "Hint: prefer <code>for(current = head; current;  current = current-&gt;next) {...}</code> loops. It saves you more than two lines. /style"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4505008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZrUr.png?s=128&g=1", "display_name": "lukasm", "link": "https://stackoverflow.com/users/4505008/lukasm"}, "edited": false, "score": 0, "creation_date": 1422484527, "post_id": 28203723, "comment_id": 44773482, "body": "I do understand that after while cycle current will point to NULL but why it is wrong to use current = current-&gt;prev? Current would only point to the previous member, right?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 55, "user_id": 4505008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZrUr.png?s=128&g=1", "display_name": "lukasm", "link": "https://stackoverflow.com/users/4505008/lukasm"}, "edited": false, "score": 0, "creation_date": 1422484761, "post_id": 28203723, "comment_id": 44773560, "body": "@Evil0Teddy: no, <code>current</code> has, shall we say, &quot;left the building&quot;. Once it gets set to NULL, it&#39;s no longer a pointer to something in the list so there&#39;s no item there that you can get the <code>prev</code> field for."}, {"owner": {"reputation": 5028, "user_id": 986760, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vR2zH.jpg?s=128&g=1", "display_name": "fkl", "link": "https://stackoverflow.com/users/986760/fkl"}, "edited": false, "score": 0, "creation_date": 1422484831, "post_id": 28203723, "comment_id": 44773585, "body": "If you visualize that by drawing on a paper that would help. Current -&gt; prev would point to prev, ONLY if you have a valid pointer in current. Once it becomes null, there is no valid list node in it, with a prev pointer. You first need pointer to a valid structure, in order to use any of its fields."}, {"owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "reply_to_user": {"reputation": 55, "user_id": 4505008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZrUr.png?s=128&g=1", "display_name": "lukasm", "link": "https://stackoverflow.com/users/4505008/lukasm"}, "edited": false, "score": 0, "creation_date": 1422484935, "post_id": 28203723, "comment_id": 44773613, "body": "@Evil0Teddy: Just to amplify that: It doesn&#39;t &quot;point to NULL&quot; (get out of the habit of thinking that - it will confuse you, especially when you start working with pointers-to-pointers). Instead it <i>is</i> NULL. It doesn&#39;t point <i>anywhere</i> (at least, nowhere meaningful), so dereferencing it will not do anything good."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 4, "last_activity_date": 1422524710, "last_edit_date": 1422524710, "creation_date": 1422484345, "answer_id": 28203723, "question_id": 28203646, "link": "https://stackoverflow.com/questions/28203646/doubly-linked-list-in-c-printing/28203723#28203723", "title": "Doubly linked list in C (printing)", "body": "<p>When you finish the loop traversing in a forward direction, <code>current</code> will be set to <code>NULL</code>, so using the line:</p>\n\n<pre><code>current = current-&gt;prev;\n</code></pre>\n\n<p>is <em>not</em> going to end well. You are not allowed to dereference <code>NULL</code>.</p>\n\n<p>The reason your second code snippet works is because of this:</p>\n\n<pre><code>current = head;\nwhile (current-&gt;next) current = current-&gt;next;\n</code></pre>\n\n<p>It leaves <code>current</code> pointing to the <em>last</em> item in the list rather than <code>NULL</code>.</p>\n\n<p>Most doubly linked lists tend to have both a <code>head</code> <em>and</em> a <code>tail</code> and you would use the latter for a reverse scan.</p>\n\n<p>If you <em>don't</em> have a <code>tail</code>, that second code snippet may <em>seem</em> like an acceptable way to find the end, though less efficiently than it would be <em>with</em> a <code>tail</code>.</p>\n\n<p>However, it has one fatal flaw, which is that it will probably misbehave if the list is empty:</p>\n\n<pre><code>current = head;                 // current &lt;- NULL\nwhile (current-&gt;next)           // cannot dereference NULL\n    current = current-&gt;next;\n</code></pre>\n\n<p>You would be better off with something like:</p>\n\n<pre><code>current = head;\nif (current != NULL)\n    while (current-&gt;next != NULL)\n        current = current-&gt;next;\n</code></pre>\n\n<p>That will leave <code>current</code> set to <code>NULL</code> if the list is empty, or set to the address of the last item if it's not. That means your reverse loop will then work correctly:</p>\n\n<pre><code>while (current != NULL) {\n    doSomethingWith (current);\n    current = current-&gt;prev;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1422484634, "creation_date": 1422484634, "answer_id": 28203785, "question_id": 28203646, "link": "https://stackoverflow.com/questions/28203646/doubly-linked-list-in-c-printing/28203785#28203785", "title": "Doubly linked list in C (printing)", "body": "<p>The first time you traverse the list in forward direction to print it's elements the loop ends when <code>current == NULL</code> and then you try to dereference <code>current</code> immediately after that in</p>\n\n<pre><code>current = current-&gt;prev;\n/*          ^ NULL */\n</code></pre>\n\n<p>Try this instead</p>\n\n<pre><code>current = head;\nwhile (current-&gt;next) {\n   printf(\"%p\\t%s\\t%d\\n\", current, current-&gt;name, current-&gt;age); \n   current = current-&gt;next;\n}\nprintf(\"%p\\t%s\\t%d\\n\", current, current-&gt;name, current-&gt;age); \n\nwhile (current) {\n   printf(\"%p\\t%s\\t%d\\n\", current, current-&gt;name, current-&gt;age); \n   current = current-&gt;prev;\n}\n</code></pre>\n\n<p>notice that in your <strong>fix</strong> you essentially do that.</p>\n"}], "owner": {"reputation": 55, "user_id": 4505008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZrUr.png?s=128&g=1", "display_name": "lukasm", "link": "https://stackoverflow.com/users/4505008/lukasm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1846, "favorite_count": 0, "accepted_answer_id": 28203723, "answer_count": 2, "score": 2, "last_activity_date": 1422524710, "creation_date": 1422484049, "question_id": 28203646, "link": "https://stackoverflow.com/questions/28203646/doubly-linked-list-in-c-printing", "title": "Doubly linked list in C (printing)", "body": "<p>I've created doubly linked list and I managed to print it going forward from head to tail, however I`m having trouble in doing it backwards. I get segmentation fault in line \"current = current->prev\", I don't understand why.</p>\n\n<pre><code>current = head;\n\nwhile (current) {\n  printf(\"%p\\t%s\\t%d\\n\", current, current-&gt;name, current-&gt;age); \n  current = current-&gt;next;\n}\n\ncurrent = current-&gt;prev;\n\nwhile (current) {\n  printf(\"%p\\t%s\\t%d\\n\", current, current-&gt;name, current-&gt;age); \n  current = current-&gt;prev;\n}\n</code></pre>\n\n<p>I have found how to fix this problem:</p>\n\n<pre><code>current = head;\n\nwhile (current) {\n  printf(\"%p\\t%s\\t%d\\n\", current, current-&gt;name, current-&gt;age); \n  current = current-&gt;next;\n}\n\ncurrent = head;\nwhile (current-&gt;next) current = current-&gt;next;\n\nwhile (current) {\n  printf(\"%p\\t%s\\t%d\\n\", current, current-&gt;name, current-&gt;age); \n  current = current-&gt;prev;\n}\n</code></pre>\n\n<p>However, I still don't understand why my method didn't work. I would thankful if somebody could explain this.</p>\n"}, {"tags": ["c", "string", "char", "strtok"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1422484053, "post_id": 28203582, "comment_id": 44773262, "body": "<code>strtok(my_str, &quot; &quot;); my_str = strtok(NULL, &quot; &quot;);  printf(&quot;line number: %s\\n&quot;, my_str);</code>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1422484113, "post_id": 28203582, "comment_id": 44773279, "body": "&quot;On the first call to strtok() the string to be parsed        should be specified in str.  In each subsequent call that should  parse        the same string, str must be NULL.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1422484484, "last_edit_date": 1422484484, "creation_date": 1422484153, "answer_id": 28203677, "question_id": 28203582, "link": "https://stackoverflow.com/questions/28203582/strtok-not-working-as-expected-not-splitting-string/28203677#28203677", "title": "strtok not working as expected, not splitting string", "body": "<p>Because the second and all subsequent calls to <a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow\"><code>strtok()</code></a> requiere that the first argument be <code>NULL</code>.</p>\n\n<pre><code>if (*my_str == 'a') {\n    puts(\"appends case\");\n\n    my_str = strtok(my_str, \" \");\n\n    my_str = strtok(NULL, \" \");\n    if (my_str != NULL)\n        printf(\"line number: %s\\n\", my_str);\n\n    my_str = strtok(NULL, \" \");\n    if (my_str != NULL)\n        printf(\"line number2: %s\", my_str);\n}\n</code></pre>\n\n<p>you should also check that the return value from <code>strtok()</code> is not <code>NULL</code>, because if the token is not found in the string, <code>NULL</code> is returned, and dereferencing a <code>NULL</code> pointer is Undefined Behavior.</p>\n"}], "owner": {"reputation": 41, "user_id": 3850774, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/2808313a050b3bbf717794a3b6eafeac?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah Markers", "link": "https://stackoverflow.com/users/3850774/sarah-markers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 28203677, "answer_count": 1, "score": -2, "last_activity_date": 1422484484, "creation_date": 1422483760, "question_id": 28203582, "link": "https://stackoverflow.com/questions/28203582/strtok-not-working-as-expected-not-splitting-string", "title": "strtok not working as expected, not splitting string", "body": "<p>I am trying to access the '3' part of a string 'a 3', which is stored in my_str, a char pointer to a string.  am having difficulty accessing the 3 part. When I print my_str I get \"a 3\" as expected. How do I use strtok to move to the '3' character?</p>\n\n<pre><code>if(*my_str=='a'){\n        puts(\"appends case\");\n        my_str = strtok(my_str, \" \");\n        my_str = strtok(my_str, \" \");\n        printf(\"line number: %s\\n\", my_str);\n        my_str = strtok(my_str, \" \");\n        printf(\"line number2: %s\", my_str);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422484040, "post_id": 28203579, "comment_id": 44773255, "body": "One of the two is less typing and has less chance of a typo error. Tha&#39;s all."}], "answers": [{"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 3, "last_activity_date": 1572117367, "last_edit_date": 1572117367, "creation_date": 1422489354, "answer_id": 28204688, "question_id": 28203579, "link": "https://stackoverflow.com/questions/28203579/difference-between-number-number-10-and-number-10/28204688#28204688", "title": "difference between: number = number + 10; and number += 10;", "body": "<p>For almost all practical purposes, there is no difference, at least in the simple case you're asking about.</p>\n\n<p>The <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> (the link is to the N1570 draft), section 6.5.15.2, says:</p>\n\n<blockquote>\n  <p>A compound assignment of the form <strong><code>E1</code></strong> <em>op</em> <strong><code>=</code></strong> <strong><code>E2</code></strong> is equivalent to the\n  simple assignment expression <strong><code>E1 = E1</code></strong> <em>op</em> <strong><code>(E2)</code></strong>, except that the lvalue\n  <strong><code>E1</code></strong> is evaluated only once, and with respect to an\n  indeterminately-sequenced function call, the operation of a compound\n  assignment is a single evaluation. If <strong><code>E1</code></strong> has an atomic type, compound\n  assignment is a read-modify-write operation with <strong><code>memory_order_seq_cst</code></strong>\n  memory order semantics.</p>\n</blockquote>\n\n<p>(The text formatting of the above paragraph is a bit tricky; <strong><code>+=</code></strong> is a single token that can't have a space in the middle of it.)</p>\n\n<p>You can safely ignore most of that. I don't completely understand the last sentence myself.</p>\n\n<p>The relevant difference is that the <code>number</code> is evaluated <em>twice</em> if you write</p>\n\n<pre><code> number = number + 10;\n</code></pre>\n\n<p>and only once if you write</p>\n\n<pre><code> number += 10;\n</code></pre>\n\n<p>(It's evaluated once for each time it appears in the expression.)</p>\n\n<p>Now if the expression is just the name of a variable, there is no difference. In both cases, the same value is stored in <code>number</code>, and the result of the entire expression (which is discarded, but it <em>could</em> be used as part of a larger expression) is the new value that was just assigned.</p>\n\n<p>If <code>number</code> is declared <em>volatile</em>, then the number of times it's evaluated can affect your program's behavior. The details depend on where <code>number</code> is stored and the characteristics of your system. Loosely speaking, <code>volatile</code> inhibits optimizations, requiring the compiler to generate code that does exactly what you told it to. If the variable is some kind of special register connected with some physical device, it can make a big difference.</p>\n\n<p>If rather than just <code>number</code> you have a more complicated expression, evaluating it once vs. twice can also make a big difference. For example:</p>\n\n<pre><code>int arr[100] = ...;\narr[rand() % 100] += 10;\narr[rand() % 100] = arr[rand() % 100] + 10;\n</code></pre>\n\n<p>The first assignment increases the value of some random element of <code>arr</code>. The second grabs the value of some random element of <code>arr</code>, adds 10 to it, and stores the result in some <em>other</em> random element of <code>arr</code> (or maybe the same one), because <code>rand()</code> returns a (probably) different result each time it's called.</p>\n\n<p>But in the simple case you're asking about:</p>\n\n<pre><code>number += 10;\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>number = number + 10;\n</code></pre>\n\n<p>both statements do the same thing, and a compiler will <em>probably</em> generate exactly the same code for both.</p>\n\n<p>The main purpose of the compound assignment operators like <code>+=</code> is to let you write shorter and clearer code (the two don't always go together, but in this case they do). Because you're only operating on a single variable, it makes sense to be able to refer to its name only once. And for more complicated expressions, being able to write:</p>\n\n<pre><code>a[b].c[d+42]-&gt;e += 10;\n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>a[b].c[d+42]-&gt;e = a[b].c[d-42]-&gt;e;\n</code></pre>\n\n<p>not having to type the name of the target more than once reduces the risk that at typo will introduce a bug. (Did you notice the typo in the second version?)</p>\n"}], "owner": {"reputation": 53, "user_id": 3796561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d82be4a7d703ed5ce906c67cfa71e11e?s=128&d=identicon&r=PG&f=1", "display_name": "user3796561", "link": "https://stackoverflow.com/users/3796561/user3796561"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1572117367, "creation_date": 1422483749, "last_edit_date": 1572080312, "question_id": 28203579, "link": "https://stackoverflow.com/questions/28203579/difference-between-number-number-10-and-number-10", "title": "difference between: number = number + 10; and number += 10;", "body": "<p>Is there any difference between these two formats regarding the order of saving the result in the memory?  </p>\n\n<pre><code>number = number + 10;\nnumber += 10;  \n</code></pre>\n\n<p>I recall that one format saves the result immediately so the next line of code can use the new value and regarding the other format the new value can't be used by the next line of code. Am I right or wrong about that?</p>\n"}, {"tags": ["c", "language-lawyer", "c89"], "comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 1, "creation_date": 1422484363, "post_id": 28203506, "comment_id": 44773410, "body": "If you didn&#39;t already saw it, here are some interesting answers: <a href=\"http://stackoverflow.com/q/204476/3933332\">stackoverflow.com/q/204476/3933332</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1422484443, "post_id": 28203506, "comment_id": 44773443, "body": "<a href=\"http://port70.net/~nsz/c/c89/c89-draft.html\" rel=\"nofollow noreferrer\">My go-to C89 draft</a> doesn&#39;t match up at all with the quotes you&#39;ve given.  The section numbers are completely different, and the corresponding text differs as well.  Of course, it is a draft, not the final standard.  Nevertheless, we cannot possibly agree on an answer if we don&#39;t agree on the standard."}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 2, "creation_date": 1422484500, "post_id": 28203506, "comment_id": 44773465, "body": "I would read that is saying it&#39;s equivalent to calling <code>return</code> with no expression, which then per <code>&#167;5.1.2.2.3</code> states that a <code>return</code> with no expression results in an undefined return code to the host OS. You&#39;re correct, this isn&#39;t undefined behavior per-say, as what happens is known and always the same; the program will terminate and a value will be returned to the OS as a returncode. What <i>is</i> undefined is what that value will be. So yes, I would say your interpretation is correct."}, {"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1422484724, "post_id": 28203506, "comment_id": 44773544, "body": "<a href=\"https://stackoverflow.com/a/13545299\">It is allowed in C99</a>.  While this doesn&#39;t answer your question regarding C89, I think from a compiler writer&#39;s point of view it would be crazy to trigger UB in C89 but have well-defined behavior in C99.  This might even be considered a defect in C89."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1422485275, "post_id": 28203506, "comment_id": 44773738, "body": "Working from the standard excerpts you provided, I say it is implicit in &quot;the termination status returned to the host environment is undefined&quot; that reaching the trailing <code>}</code> of <code>main()</code> results in program termination.  That much therefore seems defined.  I am inclined to say that it is undefined, however, whether <code>exit()</code> is called in that case, and if it is, then the value of its argument is definitely undefined.  Those details are within the scope of the C standard, so the program does have undefined behavior."}], "answers": [{"comments": [{"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1422489838, "post_id": 28204103, "comment_id": 44775351, "body": "Are you referring to the <code>main</code> function specifically, or an ordinary function?"}, {"owner": {"reputation": 2710, "user_id": 622140, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ba04227d363caf1724948e11e1743e24?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/622140/james"}, "reply_to_user": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 0, "creation_date": 1422489952, "post_id": 28204103, "comment_id": 44775384, "body": "IIRC, it was <code>main</code>, but it was back in the early 90&#39;s.  That was a long time ago."}], "tags": [], "owner": {"reputation": 2710, "user_id": 622140, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ba04227d363caf1724948e11e1743e24?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/622140/james"}, "is_accepted": true, "score": 4, "last_activity_date": 1422487207, "last_edit_date": 1422487207, "creation_date": 1422486237, "answer_id": 28204103, "question_id": 28203506, "link": "https://stackoverflow.com/questions/28203506/is-omitting-return-statement-undefined-behaviour-in-c89-aka-ansi-c/28204103#28204103", "title": "Is omitting return statement undefined behaviour in C89 (aka ANSI C)?", "body": "<p>Years ago I actually debugged issues caused by this.  It gets even more interesting if you have some code paths with returns and others without.</p>\n\n<p>As @aruisdante surmised in the comments, the behavior exhibited is indeed 'undefined', but the only undefined part is the value returned (it's not like many other 'undefined' situations that may crash the program).</p>\n\n<p>These days this actually amounts to a security risk because the 'undefined' value returned is generally whatever happens to be in the CPU register normally used to return values (or on the stack in some implementations), which could theoretically be used to leak sensitive data.</p>\n"}, {"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1422671034, "last_edit_date": 1592644375, "creation_date": 1422671034, "answer_id": 28247508, "question_id": 28203506, "link": "https://stackoverflow.com/questions/28203506/is-omitting-return-statement-undefined-behaviour-in-c89-aka-ansi-c/28247508#28247508", "title": "Is omitting return statement undefined behaviour in C89 (aka ANSI C)?", "body": "<p>I believe that intent of Standard Committee was that this termination status value is unspecified.</p>\n<p>According to <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n739.htm\" rel=\"nofollow noreferrer\">N739</a> draft:</p>\n<blockquote>\n<p>and change the last sentence of subclause 5.1.2.2.3 from:</p>\n<p>If the /main/ function executes a return that specifies no value,\nthe termination status returned to the host environment is <strong>undefined</strong>.</p>\n<p>to:</p>\n<p>If the /main/ function executes a return that specifies no value,  |  the termination status returned to the host environment is\n<strong>unspecified</strong>.</p>\n<p>[The concept of undefined value is carefully avoided elsewhere.]</p>\n</blockquote>\n<p>You may also find in further Standards, that terminology was changed and term &quot;unspecified&quot; is used consequently.</p>\n<p>I would say that it's definitely not intented to be undefined behaviour per se, but still it's impossible to decide whether it's unspecified behavior or as I said no behaviour at all. Other excerpt, that would indicate latter these is \u00a71 <em>Scope</em>:</p>\n<blockquote>\n<p>This International Standard does not specify:</p>\n<ul>\n<li>the mechanism by which C programs are invoked for use by a data-processing system;</li>\n</ul>\n</blockquote>\n<p>I would expect this also means that this International Standard does not specify how programs's termination status is handled by host environment.</p>\n"}], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 3, "accepted_answer_id": 28204103, "answer_count": 2, "score": 15, "last_activity_date": 1422671034, "creation_date": 1422483462, "last_edit_date": 1495539878, "question_id": 28203506, "link": "https://stackoverflow.com/questions/28203506/is-omitting-return-statement-undefined-behaviour-in-c89-aka-ansi-c", "title": "Is omitting return statement undefined behaviour in C89 (aka ANSI C)?", "body": "<p>Consider following basic example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\"Hi there!\\n\");\n}\n</code></pre>\n\n<p>Does it invoke undefined behaviour in C89? I tried to get some sense from <a href=\"https://stackoverflow.com/questions/3727051/why-does-a-main-function-without-a-return-statement-return-value-12\">this question</a>, but most upvoted answers claim that it's implementation-defined and definitely no UB here (with comments of Keith Thompson, that looks contradictory).</p>\n\n<p>The spec says in \u00a73.16 <em>Definitions and conventions</em>:</p>\n\n<blockquote>\n  <p>If a \u201cshall\u201d or \u201cshall not\u201d requirement that appears outside of a\n  constraint is violated. the behavior is undefined. Undefined behavior\n  is otherwise indicated in this International Standard by the words\n  \u201cundefined behavior\u201d <strong>or by the omission of any explicit definition of\n  behavior</strong>. There is no difference in emphasis among these three: they\n  all describe \u201cbehavior that is undefined\u201d.</p>\n</blockquote>\n\n<p>and \u00a75.1.2.2.3 <em>Program termination</em>:</p>\n\n<blockquote>\n  <p>A return from the initial call to the <code>main</code> function is equivalent to\n  calling the <code>exit</code> function with the value returned by the <code>main</code> function\n  as its argument. If the <code>main</code> function executes a return that specifies\n  no value, the termination status returned to the host environment is\n  undefined.</p>\n</blockquote>\n\n<p>My understanding is that latter subclause does not cover case of missing return, as <code>return</code> statement in not never invoked, thus former subclause applies.</p>\n\n<p>However futher reading indicates something different, \u00a76.6.6.4 <em>The <code>return</code> statement</em>:</p>\n\n<blockquote>\n  <p>If a <code>return</code> statement without an expression is executed, and the value\n  of the function call is used by the caller, the behavior is undefined.\n  <strong>Reaching the <code>}</code> that terminates a function is equivalent to executing a\n  <code>return</code> statement without an expression</strong>.</p>\n</blockquote>\n\n<p>Ok, so now <code>5.1.2.2.3</code> subclause applies:</p>\n\n<blockquote>\n  <p>If the <code>main</code> function executes a return that specifies\n  no value. the termination status returned to the host environment is\n  undefined.</p>\n</blockquote>\n\n<p>The term \"termination status is undefined\" does not seem to be UB, nor <strong>any specific behavior</strong>, but more like it's outside of scope of C Standard, thinking more like: \"let the host environment to be worry about, we wash our hands from here\". Is it correct intepretation?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422483720, "post_id": 28203470, "comment_id": 44773120, "body": "Did you type all this by hand?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1422483734, "post_id": 28203470, "comment_id": 44773128, "body": "try <code>scanf(&quot; %[^\\t\\n]&quot;,insertproduct);</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422483831, "post_id": 28203470, "comment_id": 44773184, "body": "Have you heard about database systems?"}, {"owner": {"reputation": 11, "user_id": 4322054, "user_type": "registered", "profile_image": "https://graph.facebook.com/772107593/picture?type=large", "display_name": "Dimitris Vrettos", "link": "https://stackoverflow.com/users/4322054/dimitris-vrettos"}, "edited": false, "score": 0, "creation_date": 1422523346, "post_id": 28203470, "comment_id": 44786248, "body": "I tried BLUEPIXY&#39;s proposal to try scanf(&quot; %[^\\t\\n]&quot;,insertproduct); and it worked. The odd is that yesterday i tried to type scanf(&quot;%[^\\t\\n]&quot;,insertproduct); and it didn&#39;t work. It seems that the space between &quot; and % makes the whole difference."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1422489428, "post_id": 28204002, "comment_id": 44775235, "body": "Some small ideas: No need to post all 200 line of data. 2) Suggest checking <code>length != 0</code> before <code>[length - 1]</code> 3) As the length is to be 1 less, why not <code>insertproduct[--length] = &#39;\\0&#39;</code>? 4) minor: check <code>&#39;\\n&#39;</code> first as in <code>while (((chr = getchar()) != &#39;\\n&#39;) &amp;&amp; (chr != EOF));</code>"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1422485714, "creation_date": 1422485714, "answer_id": 28204002, "question_id": 28203470, "link": "https://stackoverflow.com/questions/28203470/not-working-scanf-when-the-product-has-2-or-more-words/28204002#28204002", "title": "not working scanf() when the product has 2 or more words", "body": "<p><code>scanf()</code> will stop reading when it finds a white space character, although you can fix your code and make <code>scanf()</code> work, I think in this case it is better to use <code>fgets()</code></p>\n\n<p>The <code>clearStdin()</code> function, in the following code has two tasks, first clear the <code>'\\n'</code> and other possible spaces left by</p>\n\n<pre><code>scanf(\"%d\", &amp;choise);\n</code></pre>\n\n<p>If you input invalid data, to allow to repeat the call without causing an infinite loop, and then if the input is valid, take them too so that <code>fgets()</code> doesn't find a <code>'\\n'</code> in the stream and returns with an empty string.</p>\n\n<p>Try this corrected code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct supermarket\n{\n    char name[50];\n    float price;\n    int quantity;\n};\n\nvoid clearStdin()\n{\n    int chr;\n    while (((chr = getchar()) != EOF) &amp;&amp; (chr != '\\n'));\n}\n\n\nint main(void) {\n    struct supermarket product[200] = {\n            {\"sugar\",1.2,127},\n            {\"greek coffee\",2.03,200},\n            {\"milk\",1.83,150},\n            {\"6pack small eggs\",3.03,22},\n            {\"AAA bateries\",2.2,20},\n            {\"AA bateries\",2.3,29},\n            {\"6-pack big eggs\",3.5,17},\n            {\"Frosties\",4.5,30},\n            {\"All Bran\",4.7,32},\n            {\"Special K\",5.2,19},\n            {\"Honey Nut Loops\",4.3,33},\n            {\"Coco Pops\",4.09,28},\n            {\"White Bread\",0.5,50},\n            {\"Black Bread\",0.7,55},\n            {\"Toast Bread\",1.73,66},\n            {\"cinamon\",1.9,500},\n            {\"salt\",1,423},\n            {\"pepper\",1.29,325},\n            {\"coca cola 330ml\",0.45,980},\n            {\"coca cola 500ml\",0.9,745},\n            {\"coca cola 2lt\",1.6,300},\n            {\"coca cola 1lt\",1.3,1025},\n            {\"pepsi 330ml\",0.45,980},\n            {\"pepsi 500ml\",0.9,745},\n            {\"pepsi 2lt\",1.6,300},\n            {\"pepsi 1lt\",1.3,1025},\n            {\"7-up 330ml\",0.6,682},\n            {\"fanta 330ml\",0.4,741},\n            {\"fanta 1lt\",1.1,120},\n            {\"fanta 500ml\",0.75,267},\n            {\"mild mustard\", 1.45,612},\n            {\"Hot mustard\",1.85,387},\n            {\"Ketchup\",1.6,400},\n            {\"mayonaise\",2.1,346},\n            {\"apples\",0.20,105},\n            {\"oranges\",0.4,222},\n            {\"bananas\",0.42,55},\n            {\"lettuce\",0.12,141},\n            {\"potatoes 1kg\",0.7,75},\n            {\"tomatoes\",0.35,199},\n            {\"onions\",0.11,425},\n            {\"grape-fruits\",0.55,94},\n            {\"fresh salads\",2.22,23},\n            {\"canned mushrooms\",1.5,422},\n            {\"fresh mushrooms 200gr\",1.98,55},\n            {\"oreos\",1.59,257},\n            {\"Tide\",2.47,730},\n            {\"Pampers\",5.89,123},\n            {\"Mr Clean\",5.01,35},\n            {\"Mr Proper\",4.99,8},\n            {\"Kool-Aid\",2.45,103},\n            {\"Knorr\",3.05,308},\n            {\"Palmolive\",3.01,617},\n            {\"Scotch-Brite\",2.3,970},\n            {\"Cheetos\",1.25,487},\n            {\"Top Ramen\",6.27,109},\n            {\"Tomato sauce\",0.59,1589},\n            {\"Goya Beans\",3.21,300},\n            {\"Quaker Oats\",3.39,32},\n            {\"Cream of Wheat\",3.09,91},\n            {\"Nesquick\",1.75,799},\n            {\"Silk Soy Milk\",3.14,50},\n            {\"Philadelphia\",4.15,6},\n            {\"Soy Sauce\",1.09,45},\n            {\"A1 steak sauce\",4.89,643},\n            {\"Barbeque sauce\",5.79,94},\n            {\"Lays\",2.5,567},\n            {\"Lays oregano\",2.7,163},\n            {\"Pringles\",1.85,421},\n            {\"Ajax\",4.59,2548},\n            {\"Cleanex\",5.27,941},\n            {\"Fountain\",5.55,559},\n            {\"Mountain Dew\",6.09,852},\n            {\"10 DVD\",3.09,1896},\n            {\"Lipton ice tea\",2.44,53},\n            {\"Lipton tea\",1.29,633},\n            {\"Listerine\",5.52,188},\n            {\"Centrum\",9.99,588},\n            {\"Snapple\",5.88,22},\n            {\"Purina 1\",12.99,33},\n            {\"Wiskas\",6.22,79},\n            {\"Pedigree Pal\",9.99,10},\n            {\"Gatorade\",2.13,1000},\n            {\"Amstel\",0.99,111},\n            {\"Heineken\",1.01,155},\n            {\"Guiness\",1.8,77},\n            {\"McFarland\",1.65,74},\n            {\"Estrella Damn\",1.32,488},\n            {\"Stella Artois\",0.87,14},\n            {\"Corona\",1.11,347},\n            {\"Pilsner\",1.74,166},\n            {\"Budweiser\",1.77,654},\n            {\"Chimay Blue\",2.12,344},\n            {\"Chimay Red\",2.35,179},\n            {\"Chimay Black\",2.55,333},\n            {\"Chimay Yellow\",2.65,198},\n            {\"Beck's\",1.72,188},\n            {\"Carlsberg\",1.67,843},\n            {\"Paulaner\",2.89,42},\n            {\"Erdinger\",3.02,7},\n            {\"Colgate\",1.75,644},\n            {\"butter\",1.28,399},\n            {\"Peanut-Butter\",2.74,211},\n            {\"PB&amp;J\",3.15,25},\n            {\"Barilla Linguini\",2.58,941},\n            {\"Barilla spaghetti\",1.56,357},\n            {\"Barilla tortellini\",2.08,700},\n            {\"Barilla papardelle\",3.58,9},\n            {\"Barilla lazagne\",2.99,88},\n            {\"Advil\",7.99,499},\n            {\"pears\",0.26,2985},\n            {\"peaches\",0.27,2456},\n            {\"Kiwi\",0.36,2145},\n            {\"nectarines\",0.38,2365},\n            {\"melon\",0.39,951},\n            {\"watermellon\",0.4,961},\n            {\"grapes\",0.53,582},\n            {\"cherries\",0.6,714},\n            {\"olives\",0.09,936},\n            {\"pickles\",0.87,195},\n            {\"halvah\",1.33,2015},\n            {\"frulite orange-juice\",1.61,478},\n            {\"frulite lemon-juice\",1.62,477},\n            {\"frulite pineapple-juice\",1.63,456},\n            {\"frulite carrot-juice\",1.64,698},\n            {\"frulite banana-juice\",1.65,874},\n            {\"frulite mixed-juice\",1.66,599},\n            {\"rusks 160gr\",1.35,588},\n            {\"rusks 320gr\",2.03,589},\n            {\"rusks 400gr\",2.72,523},\n            {\"rusks 500gr\",3.74,542},\n            {\"vanila biscuits\",3.30,699},\n            {\"cinamon biscuits\",3.32,698},\n            {\"almond biscuits\",3.35,612},\n            {\"butter biscuits\",3.54,609},\n            {\"chocolate biscuits\",3.41,59},\n            {\"cherry croissant\",0.47,1025},\n            {\"apricot croissant\",0.48,1058},\n            {\"chocolate croissant\",0.41,1089},\n            {\"vanilla croissant\",0.41,1054},\n            {\"vanilla-chocolate croissant\",0.74,1036},\n            {\"cocoa croissant\",0.27,1011},\n            {\"double-sized croissant\",1.4,555},\n            {\"Derby\",0.24,1000},\n            {\"Kinder Bueno\",1.22,642},\n            {\"Kinder egg\",0.91,377},\n            {\"Nivea hair-gel\",5.88,417},\n            {\"Fructise hair-gel\",5.97,429},\n            {\"Excellence hair-gel\",4.88,437},\n            {\"mixed cake\",3.99,11},\n            {\"chocolate cake\",3.26,31},\n            {\"vanilla cake\",3.36,44},\n            {\"orange cake\",3.46,66},\n            {\"orange-chocolate cake\",3.86,94},\n            {\"raisins cake\",3.06,52},\n            {\"vakalaos\",6.98,20},\n            {\"galeos\",7.40,30},\n            {\"frozen shrimps\",13.80,40},\n            {\"gavros\",5.98,50},\n            {\"frozen octopus\",6.36,90},\n            {\"fresh octopus\",7.23,70},\n            {\"fresh shrimps\",15.98,80},\n            {\"espresso\",2.25,1896},\n            {\"6 chicken legs\",6.66,11},\n            {\"2 chicken breasts\",4.59,37},\n            {\"whole chicken\",3.12,45},\n            {\"roasted chicken\",4.97,48},\n            {\"capuccino\",2.55,1478},\n            {\"jacobs vanilla\",4.96,2458},\n            {\"jacobs chocolate\",4.85,2365},\n            {\"jacobs caramel\",4.87,2148},\n            {\"jacobs classic\",4.59,1895},\n            {\"liquid fabric softener\",5.22,1025},\n            {\"concentrated fabric softener\",6.22,1048},\n            {\"noxzema saving foam 200ml\",2.2,4832},\n            {\"loreal saving foam 200ml\",2.6,613},\n            {\"nivea saving foam 200ml\",2.8,2000},\n            {\"gillette saving foam 200ml\",2.32,992},\n            {\"bic saving foam 200ml\",2.13,469},\n            {\"noxzema saving foam 400ml\",4.44,817},\n            {\"loreal saving foam 400ml\",4.42,802},\n            {\"nivea saving foam 400ml\",4.77,808},\n            {\"gillette saving foam 400ml\",5.25,707},\n            {\"bic saving foam 400ml\",5.21,303},\n            {\"Giotis baby-cream\",7.10,111},\n            {\"Nounou baby-cream\",7.05,223},\n            {\"Farin lacte baby-cream\",6.82,334},\n            {\"Nutricia baby-cream\",8.5,445},\n            {\"Ariel 5kg\",22.5,556},\n            {\"Ariel 2kg\",10.94,667},\n            {\"Ariel 1kg\",5.31,778},\n            {\"Elvive shampoo\",6.99,889},\n            {\"Wash and go shampoo\",4.98,991},\n            {\"Proderm shampoo\",7.22,882},\n            {\"Pantene shampoo\",6.44,773},\n            {\"Fructis shampoo\",7.13,664},\n            {\"Gliss shampoo\",3.19,552},\n            {\"toilet paper 8 rolls\",3.77,668},\n            {\"toilet paper 12 rolls\",5.99,3},\n            {\"toilet paper 16 rolls\",6.54,13}\n    };\n\n    int  choise;\n    int  i;\n    char insertproduct[50];\n\n    printf(\"Please enter 1 and hit Enter to continue.\\n\");\n    while (scanf(\"%d\", &amp;choise) != 1)\n    {\n        printf(\"invalid, choice\\n\");\n        printf(\"Please enter 1 and hit Enter to continue.\\n\");\n\n        clearStdin();\n    }\n    clearStdin();\n\n    printf(\"See our full list of products.\\n\\n\");\n    for (i = 0 ; i &lt; 200 ; i++) {\n        printf(\"%s\\n\", product[i].name);\n    }\n\n    printf(\"\\nPlease select the desirable product to see it's quantity and price.\\n\\n\");\n    if (fgets(insertproduct, sizeof(insertproduct), stdin) != NULL)\n    {\n        size_t length;\n\n        length = strlen(insertproduct);\n        /* remove possible '\\n' consumed by fgets */\n        if (insertproduct[length - 1] == '\\n')\n            insertproduct[length - 1] = '\\0';\n        for (i = 0 ; i &lt; 200 ; i++) {\n            if (strcmp(product[i].name, insertproduct) == 0) {\n                printf(\"You selected: %s.\\n\\tPrice: %.2f euro.\\n\\tQuantity: %d items.\\n\\n\",\n                    product[i].name,\n                    product[i].price,\n                    product[i].quantity);\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>One thing you should know is that <code>fgets()</code> does read the <code>'\\n'</code> character from the stream, so before comparison you should remove it from the array where you are holding the input string.</p>\n"}], "owner": {"reputation": 11, "user_id": 4322054, "user_type": "registered", "profile_image": "https://graph.facebook.com/772107593/picture?type=large", "display_name": "Dimitris Vrettos", "link": "https://stackoverflow.com/users/4322054/dimitris-vrettos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1422485714, "creation_date": 1422483334, "last_edit_date": 1422485087, "question_id": 28203470, "link": "https://stackoverflow.com/questions/28203470/not-working-scanf-when-the-product-has-2-or-more-words", "title": "not working scanf() when the product has 2 or more words", "body": "<p>The code following 200 products found in supermarket selves. I want to write a code that at first shows all the available products and if you type one of them it returns the product, it's price and quantity.\u03a4he problem is that  if i type <code>scanf(\"%s\",insertproduct);</code> it recognises only the products with one word. I saw in other posts that the solution is to write <code>scanf(\"%[^\\t\\n]s\",insertproduct);</code>. </p>\n\n<p>But when i do this the program ignores that <code>scanf</code> and terminates after the </p>\n\n<pre><code>printf(\"\\nPlease select the desirable product to see it's quantity and price.\\n\\n\");\n</code></pre>\n\n<p>One thought is to add _ between products with more than one word, but it will take a lot of time. Any thoughts about that particular scanf() ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;io.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;locale.h&gt;\n\nstruct supermarket \n{\n    char name[50];\n    float price;\n    int quantity;\n};\n\n\nint main(void) {\n    struct supermarket product[200] = {\n            {\"sugar\",1.2,127},\n            {\"greek coffee\",2.03,200},\n            {\"milk\",1.83,150},\n            {\"6pack small eggs\",3.03,22},\n            {\"AAA bateries\",2.2,20},\n            {\"AA bateries\",2.3,29},\n            {\"6-pack big eggs\",3.5,17},\n            {\"Frosties\",4.5,30},\n            {\"All Bran\",4.7,32},\n            {\"Special K\",5.2,19},\n            {\"Honey Nut Loops\",4.3,33},\n            {\"Coco Pops\",4.09,28},\n            {\"White Bread\",0.5,50},\n            {\"Black Bread\",0.7,55},\n            {\"Toast Bread\",1.73,66},\n            {\"cinamon\",1.9,500},\n            {\"salt\",1,423},\n            {\"pepper\",1.29,325},\n            {\"coca cola 330ml\",0.45,980},\n            {\"coca cola 500ml\",0.9,745},\n            {\"coca cola 2lt\",1.6,300},\n            {\"coca cola 1lt\",1.3,1025},\n            {\"pepsi 330ml\",0.45,980},\n            {\"pepsi 500ml\",0.9,745},\n            {\"pepsi 2lt\",1.6,300},\n            {\"pepsi 1lt\",1.3,1025},\n            {\"7-up 330ml\",0.6,682},\n            {\"fanta 330ml\",0.4,741},\n            {\"fanta 1lt\",1.1,120},\n            {\"fanta 500ml\",0.75,267},\n            {\"mild mustard\", 1.45,612},\n            {\"Hot mustard\",1.85,387},\n            {\"Ketchup\",1.6,400},\n            {\"mayonaise\",2.1,346},\n            {\"apples\",0.20,105},\n            {\"oranges\",0.4,222},\n            {\"bananas\",0.42,55},\n            {\"lettuce\",0.12,141},\n            {\"potatoes 1kg\",0.7,75},\n            {\"tomatoes\",0.35,199},\n            {\"onions\",0.11,425},\n            {\"grape-fruits\",0.55,94},\n            {\"fresh salads\",2.22,23},\n            {\"canned mushrooms\",1.5,422},\n            {\"fresh mushrooms 200gr\",1.98,55},\n            {\"oreos\",1.59,257},\n            {\"Tide\",2.47,730},\n            {\"Pampers\",5.89,123},\n            {\"Mr Clean\",5.01,35},\n            {\"Mr Proper\",4.99,8},\n            {\"Kool-Aid\",2.45,103},\n            {\"Knorr\",3.05,308},\n            {\"Palmolive\",3.01,617},\n            {\"Scotch-Brite\",2.3,970},\n            {\"Cheetos\",1.25,487},\n            {\"Top Ramen\",6.27,109},\n            {\"Tomato sauce\",0.59,1589},\n            {\"Goya Beans\",3.21,300},\n            {\"Quaker Oats\",3.39,32},\n            {\"Cream of Wheat\",3.09,91},\n            {\"Nesquick\",1.75,799},\n            {\"Silk Soy Milk\",3.14,50},\n            {\"Philadelphia\",4.15,6},\n            {\"Soy Sauce\",1.09,45},\n            {\"A1 steak sauce\",4.89,643},\n            {\"Barbeque sauce\",5.79,94},\n            {\"Lays\",2.5,567},\n            {\"Lays oregano\",2.7,163},\n            {\"Pringles\",1.85,421},\n            {\"Ajax\",4.59,2548},\n            {\"Cleanex\",5.27,941},\n            {\"Fountain\",5.55,559},\n            {\"Mountain Dew\",6.09,852},\n            {\"10 DVD\",3.09,1896},\n            {\"Lipton ice tea\",2.44,53},\n            {\"Lipton tea\",1.29,633},\n            {\"Listerine\",5.52,188},\n            {\"Centrum\",9.99,588},\n            {\"Snapple\",5.88,22},\n            {\"Purina 1\",12.99,33},\n            {\"Wiskas\",6.22,79},\n            {\"Pedigree Pal\",9.99,10},\n            {\"Gatorade\",2.13,1000},\n            {\"Amstel\",0.99,111},\n            {\"Heineken\",1.01,155},\n            {\"Guiness\",1.8,77},\n            {\"McFarland\",1.65,74},\n            {\"Estrella Damn\",1.32,488},\n            {\"Stella Artois\",0.87,14},\n            {\"Corona\",1.11,347},\n            {\"Pilsner\",1.74,166},\n            {\"Budweiser\",1.77,654},\n            {\"Chimay Blue\",2.12,344},\n            {\"Chimay Red\",2.35,179},\n            {\"Chimay Black\",2.55,333},\n            {\"Chimay Yellow\",2.65,198},\n            {\"Beck's\",1.72,188},\n            {\"Carlsberg\",1.67,843},\n            {\"Paulaner\",2.89,42},\n            {\"Erdinger\",3.02,7},\n            {\"Colgate\",1.75,644},\n            {\"butter\",1.28,399},\n            {\"Peanut-Butter\",2.74,211},\n            {\"PB&amp;J\",3.15,25},\n            {\"Barilla Linguini\",2.58,941},\n            {\"Barilla spaghetti\",1.56,357},\n            {\"Barilla tortellini\",2.08,700},\n            {\"Barilla papardelle\",3.58,9}, \n            {\"Barilla lazagne\",2.99,88},\n            {\"Advil\",7.99,499},\n            {\"pears\",0.26,2985},\n            {\"peaches\",0.27,2456},\n            {\"Kiwi\",0.36,2145},\n            {\"nectarines\",0.38,2365},\n            {\"melon\",0.39,951},\n            {\"watermellon\",0.4,961},\n            {\"grapes\",0.53,582},\n            {\"cherries\",0.6,714},\n            {\"olives\",0.09,936},\n            {\"pickles\",0.87,195}, \n            {\"halvah\",1.33,2015},\n            {\"frulite orange-juice\",1.61,478},\n            {\"frulite lemon-juice\",1.62,477},\n            {\"frulite pineapple-juice\",1.63,456},\n            {\"frulite carrot-juice\",1.64,698},\n            {\"frulite banana-juice\",1.65,874},\n            {\"frulite mixed-juice\",1.66,599},\n            {\"rusks 160gr\",1.35,588},\n            {\"rusks 320gr\",2.03,589},\n            {\"rusks 400gr\",2.72,523},\n            {\"rusks 500gr\",3.74,542},\n            {\"vanila biscuits\",3.30,699},\n            {\"cinamon biscuits\",3.32,698},\n            {\"almond biscuits\",3.35,612},\n            {\"butter biscuits\",3.54,609},\n            {\"chocolate biscuits\",3.41,59},\n            {\"cherry croissant\",0.47,1025},\n            {\"apricot croissant\",0.48,1058},\n            {\"chocolate croissant\",0.41,1089},\n            {\"vanilla croissant\",0.41,1054},\n            {\"vanilla-chocolate croissant\",0.74,1036},\n            {\"cocoa croissant\",0.27,1011},\n            {\"double-sized croissant\",1.4,555},\n            {\"Derby\",0.24,1000},\n            {\"Kinder Bueno\",1.22,642},\n            {\"Kinder egg\",0.91,377},\n            {\"Nivea hair-gel\",5.88,417},\n            {\"Fructise hair-gel\",5.97,429},\n            {\"Excellence hair-gel\",4.88,437},\n            {\"mixed cake\",3.99,11},\n            {\"chocolate cake\",3.26,31},\n            {\"vanilla cake\",3.36,44},\n            {\"orange cake\",3.46,66},\n            {\"orange-chocolate cake\",3.86,94},\n            {\"raisins cake\",3.06,52},\n            {\"vakalaos\",6.98,20},\n            {\"galeos\",7.40,30},\n            {\"frozen shrimps\",13.80,40},\n            {\"gavros\",5.98,50},\n            {\"frozen octopus\",6.36,90},\n            {\"fresh octopus\",7.23,70},\n            {\"fresh shrimps\",15.98,80},\n            {\"espresso\",2.25,1896},\n            {\"6 chicken legs\",6.66,11},\n            {\"2 chicken breasts\",4.59,37},\n            {\"whole chicken\",3.12,45},\n            {\"roasted chicken\",4.97,48},\n            {\"capuccino\",2.55,1478},\n            {\"jacobs vanilla\",4.96,2458},\n            {\"jacobs chocolate\",4.85,2365},\n            {\"jacobs caramel\",4.87,2148},\n            {\"jacobs classic\",4.59,1895},\n            {\"liquid fabric softener\",5.22,1025},\n            {\"concentrated fabric softener\",6.22,1048},\n            {\"noxzema saving foam 200ml\",2.2,4832},\n            {\"loreal saving foam 200ml\",2.6,613},\n            {\"nivea saving foam 200ml\",2.8,2000},\n            {\"gillette saving foam 200ml\",2.32,992},\n            {\"bic saving foam 200ml\",2.13,469},\n            {\"noxzema saving foam 400ml\",4.44,817},\n            {\"loreal saving foam 400ml\",4.42,802},\n            {\"nivea saving foam 400ml\",4.77,808},\n            {\"gillette saving foam 400ml\",5.25,707},\n            {\"bic saving foam 400ml\",5.21,303},\n            {\"Giotis baby-cream\",7.10,111},\n            {\"Nounou baby-cream\",7.05,223},\n            {\"Farin lacte baby-cream\",6.82,334},\n            {\"Nutricia baby-cream\",8.5,445},\n            {\"Ariel 5kg\",22.5,556},\n            {\"Ariel 2kg\",10.94,667},\n            {\"Ariel 1kg\",5.31,778},\n            {\"Elvive shampoo\",6.99,889},\n            {\"Wash and go shampoo\",4.98,991},\n            {\"Proderm shampoo\",7.22,882},\n            {\"Pantene shampoo\",6.44,773},\n            {\"Fructis shampoo\",7.13,664},\n            {\"Gliss shampoo\",3.19,552},\n            {\"toilet paper 8 rolls\",3.77,668},\n            {\"toilet paper 12 rolls\",5.99,3},\n            {\"toilet paper 16 rolls\",6.54,13}\n    };\n\n    int choise;\n\n    printf(\"Please enter 1 and hit Enter to continue.\\n\");\n    scanf(\"%d\", &amp;choise);\n\n    int i;\n\n    printf(\"See our full list of products.\\n\\n\");\n    for(i = 0 ; i &lt; 200 ; i++){\n        printf(\"%s\\n\", product[i].name);\n    }\n    char insertproduct[50];\n\n    printf(\"\\nPlease select the desirable product to see it's quantity and price.\\n\\n\");\n    scanf(\"%s\", insertproduct);\n    for (i = 0 ; i &lt; 200 ; i++) {\n        if(strcmp(product[i].name, insertproduct) == 0) {\n            printf(\"You selected: %s. Price: %.2f euro. Quantity: %d items.\\n\\n\", \n                product[i].name, \n                product[i].price, \n                product[i].quantity);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1422482255, "post_id": 28203165, "comment_id": 44772433, "body": "<code>c</code> is a local variable. It has no meaning outside the function, and dereferencing its copied value outside the function results in undefined behaviour."}, {"owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "edited": false, "score": 0, "creation_date": 1422482455, "post_id": 28203165, "comment_id": 44772554, "body": "your question is very confusing. we can&#39;t know exactly what you want. what does <code>n</code> mean?"}, {"owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "edited": false, "score": 0, "creation_date": 1422482570, "post_id": 28203165, "comment_id": 44772605, "body": "I&#39;m sorry about that. <code>n</code> is the ammount of string that are supposed to be generated."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "edited": false, "score": 0, "creation_date": 1422483735, "post_id": 28203433, "comment_id": 44773129, "body": "remember to free the strings after"}, {"owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "edited": false, "score": 0, "creation_date": 1422484489, "post_id": 28203433, "comment_id": 44773462, "body": "I&#39;m sorry, what do you mean by &quot;free the strings&quot;?"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 0, "last_activity_date": 1422484711, "last_edit_date": 1422484711, "creation_date": 1422483186, "answer_id": 28203433, "question_id": 28203165, "link": "https://stackoverflow.com/questions/28203165/randomizing-an-array-of-c-strings/28203433#28203433", "title": "Randomizing an array of C strings", "body": "<p>you need to make a copy of the generated string. and you need a string terminator</p>\n\n<pre><code>void rand(const char *tab[], int n){\n    int i, j;\n    char c[10];\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;9; j++){\n            c[j]= rand()%26 + 97;\n        }\n      c[9] = '\\0';\n        tab[i]=strdup(c) &lt;&lt;&lt;&lt;=====\n    }\n}\n</code></pre>\n\n<p>the strings are allocated on the heap - free them when you are finised</p>\n\n<pre><code>for(int i=0; i &lt; NO_STRINGS; i++)\n{\n   free(tab[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 28203433, "answer_count": 1, "score": 0, "last_activity_date": 1422484711, "creation_date": 1422482126, "question_id": 28203165, "link": "https://stackoverflow.com/questions/28203165/randomizing-an-array-of-c-strings", "title": "Randomizing an array of C strings", "body": "<p>I'm having a problem with a function meant to insert random C-strings into an array. I've read a few other questions about this on stackexchange, but none seem to work for me.</p>\n\n<pre><code>void rand(const char *tab[], int n){\n    int i, j;\n    char c[10];\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;10; j++){\n            c[j]= rand()%26 + 97;\n        }\n        tab[i]=c;\n    }\n}\n</code></pre>\n\n<p>When trying to print it out, I get a blank screen, as if the array is empty. I declared the array as <code>const char *tab[]</code> and use the function <code>rand(tab, 5)</code>. What could be wrong?</p>\n"}, {"tags": ["c", "matlab", "filter"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1422481600, "post_id": 28202827, "comment_id": 44772097, "body": "You need to tell us 1) what you put into the function 2) what you got out of the function 3) what you expected to get out of the function 4) why you expected that output, i.e. what is a <code>convolve</code> function intended to calculate."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1422481961, "post_id": 28202827, "comment_id": 44772291, "body": "It appears the user is trying to emulate the behaviour of the Matlab <a href=\"http://uk.mathworks.com/help/matlab/ref/filter.html\" rel=\"nofollow noreferrer\"><code>filter</code></a> function."}, {"owner": {"reputation": 69, "user_id": 4293519, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3e3e856cc6d96232ec30024cd0d479ad?s=128&d=identicon&r=PG&f=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/4293519/laura"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1422484274, "post_id": 28202827, "comment_id": 44773370, "body": "@user3386109 according to the filter instruction in matlab , y=filter(b,a,x)"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 4293519, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3e3e856cc6d96232ec30024cd0d479ad?s=128&d=identicon&r=PG&f=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/4293519/laura"}, "is_accepted": true, "score": 0, "last_activity_date": 1428480595, "creation_date": 1428480595, "answer_id": 29509225, "question_id": 28202827, "link": "https://stackoverflow.com/questions/28202827/matlab-function-filter-in-c/29509225#29509225", "title": "Matlab function filter in c", "body": "<p>Finally this is my code:     </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"coef_b.h\"\nextern  double x[];\n\n#define NN 48\n#define MM 13\nfloat a=1;\ndouble result [NN];\n\nvoid convolve(const real64_T b[], \n          const double x[], \n          double result[],\n          const float a)\n{\nFILE *f;\nint i,j,l,k;\ndouble temp[96]={0};\n\nfor(i=0;i&lt;48;i++)\n    temp[48+i]=x[i];\n\n    for(j=48;j&lt;96;j++)\n{\n    for(l=0;l&lt;13;l++)\n        result[j-48]=result[j-48]+temp[j-l]*b[l];   \n}\n\nf =fopen(\"super_result.dat\",\"w\");\n    for (k = 0; k&lt;48; k++)\n    {\n        fprintf(f,\"%lf\\n\",result[k]);\n    }\n    fclose(f);\n    return;\n}\n\n\n int main(void)\n {\n convolve(B,\n       x,\n       result,\n       a);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4293519, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3e3e856cc6d96232ec30024cd0d479ad?s=128&d=identicon&r=PG&f=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/4293519/laura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 29509225, "answer_count": 1, "score": 0, "last_activity_date": 1428480595, "creation_date": 1422480826, "last_edit_date": 1422480932, "question_id": 28202827, "link": "https://stackoverflow.com/questions/28202827/matlab-function-filter-in-c", "title": "Matlab function filter in c", "body": "<p>I want to write the c code for the matlab filter but I don't obtain the same result; the first members are correct but after, not. I don't know what's wrong.</p>\n\n<pre><code>void convolve(const double b[], size_t b_Len,\n          const double h[], size_t h_Len,\n          double result[],\n          const double a[])\n{\nint i,j;\nresult[0]=b[0]*h[0];\nfor (i=1;i&lt;h_Len+1;i++)\n{\n    result[i]=0;\n    for (j=0;j&lt;i+1;j++)\n        result[i]=result[i]+b[j]*h[i-j];\n    for (j=0;j&lt;i;j++)\n        result[i]=result[i]-a[j+1]*result[i-j-1];\n}\n</code></pre>\n"}, {"tags": ["c", "libjpeg-turbo"], "answers": [{"comments": [{"owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "edited": false, "score": 0, "creation_date": 1422489270, "post_id": 28203957, "comment_id": 44775188, "body": "Thanks a lot man. I wouldn&#39;t find it alone. U&#39;re good. Now it works."}], "tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": true, "score": 1, "last_activity_date": 1422485518, "creation_date": 1422485518, "answer_id": 28203957, "question_id": 28202818, "link": "https://stackoverflow.com/questions/28202818/why-read-jpeg-file-fails-to-write-image-libjpeg-jpeg-turbo-in-c/28203957#28203957", "title": "Why read_JPEG_file() fails to write image (libjpeg/jpeg-turbo) in C?", "body": "<p>You allocate space for the image buffer in <code>read_JPEG_file</code> and store a pointer to it in that function's <code>image_buffer</code> argument, but that value is lost when the function returns. The <code>image_buffer</code> variable in <code>main</code> is a different variable and isn't changed by the call to <code>read_JPEG_file</code>. Since the <code>image_buffer</code> variable in <code>main</code> is never initialized or assigned a value, you pass an uninitialized value to <code>write_JPEG_file</code> rather than a valid pointer. </p>\n\n<p>Also the global variable <code>image_buffer</code>, declared as a pointer to <code>JSAMPLE</code> near the start of your example, is also different variable. This variable is completely unused by your example program.</p>\n\n<p>Since you're already using global variables to communicate the image's width an height between the functions <code>read_JPEG_file</code> and <code>write_JPEG_file</code> the simple fix (but not necessarily the best) to your problem is to also use a global variable for the pointer to the image data. Change the type of the global variable <code>image_buffer</code> from <code>JSAMPLE *</code> to <code>unsigned char *</code>, remove the definition of <code>image_buffer</code> from <code>main</code>, and the arguments <code>image_buffer</code> from the functions <code>read_JPEG_file</code> and <code>write_JPEG_file</code>. This will result in the global variable <code>image_buffer</code> being used to store the pointer to the image data.</p>\n\n<p>For example:</p>\n\n<pre><code>...\n\nunsigned char * image_buffer;  // Points to large array of R,G,B-order data\nint image_height;     // Number of rows\nint image_width;      // Number of columns\n\nint read_JPEG_file(char * filename);\nvoid write_JPEG_file(char * filename, int quality);\n\nint main()\n{\n    char * filename1 = \"source.jpg\";\n    char * filename2 = \"target.jpg\";\n    read_JPEG_file(filename1);\n    write_JPEG_file(filename2, 95);\n    return 0;\n}\n\n...\n\nGLOBAL(int)\nread_JPEG_file (char * filename)\n{\n    ...\n}\n\nGLOBAL(void)\nwrite_JPEG_file(char * filename, int quality)\n{\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2996, "user_id": 1141649, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c121a84f18d9512b03b8a21ecae2a7?s=128&d=identicon&r=PG", "display_name": "John Boe", "link": "https://stackoverflow.com/users/1141649/john-boe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 28203957, "answer_count": 1, "score": -1, "last_activity_date": 1422485518, "creation_date": 1422480793, "question_id": 28202818, "link": "https://stackoverflow.com/questions/28202818/why-read-jpeg-file-fails-to-write-image-libjpeg-jpeg-turbo-in-c", "title": "Why read_JPEG_file() fails to write image (libjpeg/jpeg-turbo) in C?", "body": "<p>It is slightly modified code from example.c from jpeg-trubo (that code contained errors).</p>\n\n<p>When I try to write image data to file it fails when cinfo.next_scanline==9\nit crashes on line with jpeg_write_scanlines.\nError: SigSegv error. cinfo.image_height is set to 404.\nThe reading loop <em>looks</em> fine. Can you help to solve the problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"libjpeg-turbo\\libjpeg-turbo-gcc\\include\\jerror.h\"\n\n#include \"libjpeg-turbo\\libjpeg-turbo-gcc\\include\\jpeglib.h\"\n#include &lt;setjmp.h&gt; // optional error recovery mechanism\n//# include \"conversions.h\" // color conversion functions\n\nextern JSAMPLE * image_buffer;  // Points to large array of R,G,B-order data\nint image_height;     // Number of rows\nint image_width;      // Number of columns\n\nint read_JPEG_file(char * filename, unsigned char * image_buffer);\nvoid write_JPEG_file(char * filename, unsigned char * image_buffer, int quality);\n\nint main()\n{\n    char * filename1 = \"source.jpg\";\n    char * filename2 = \"target.jpg\";\n    unsigned char * image_buffer; // Final image\n    read_JPEG_file(filename1, image_buffer);\n    write_JPEG_file(filename2, image_buffer, 95);\n    return 0;\n}\n\nstruct my_error_mgr {\n  struct jpeg_error_mgr pub;    /* \"public\" fields */\n\n  jmp_buf setjmp_buffer;        /* for return to caller */\n};\ntypedef struct my_error_mgr * my_error_ptr;\n\nMETHODDEF(void) my_error_exit (j_common_ptr cinfo)\n{\n  my_error_ptr myerr = (my_error_ptr) cinfo-&gt;err;\n  (*cinfo-&gt;err-&gt;output_message) (cinfo);\n  longjmp(myerr-&gt;setjmp_buffer, 1);\n}\n\nGLOBAL(int)\nread_JPEG_file (char * filename, unsigned char * image_buffer)\n{\n  struct jpeg_decompress_struct cinfo;\n  struct my_error_mgr jerr;\n  FILE * infile;                // source file\n  JSAMPARRAY rows_buffer;  // Output row rows_buffer\n  int row_stride_len;  // physical row width in output rows_buffer\n\n  if ((infile = fopen(filename, \"rb\")) == NULL) {\n    fprintf(stderr, \"can't open %s\\n\", filename);\n    return 0;\n  }\n\n  cinfo.err = jpeg_std_error(&amp;jerr.pub);\n  jerr.pub.error_exit = my_error_exit;\n  if (setjmp(jerr.setjmp_buffer)) {\n    jpeg_destroy_decompress(&amp;cinfo);\n    fclose(infile); // close the input file and return\n    return 0;\n  }\n\n  jpeg_create_decompress(&amp;cinfo);\n  jpeg_stdio_src(&amp;cinfo, infile);\n\n  (void) jpeg_read_header(&amp;cinfo, TRUE);\n\n  (void) jpeg_start_decompress(&amp;cinfo); // no errors possible\n  row_stride_len = cinfo.output_width * cinfo.output_components;\n  rows_buffer = (*cinfo.mem-&gt;alloc_sarray)\n                ((j_common_ptr) &amp;cinfo, JPOOL_IMAGE, row_stride_len, 1);\n\n  size_t counter=0;\n  size_t raw_size = row_stride_len;\n  image_buffer = (unsigned char*) malloc( row_stride_len*cinfo.output_height );\n  while (cinfo.output_scanline &lt; cinfo.output_height) {\n    (void) jpeg_read_scanlines(&amp;cinfo, rows_buffer, 1);\n    memcpy(image_buffer+counter, rows_buffer[0], raw_size);\n    counter += row_stride_len;\n  }\n\n  // Save global values for later use\n  image_width=cinfo.image_width;\n  image_height=cinfo.image_height;\n\n  (void) jpeg_finish_decompress(&amp;cinfo); // Finish decompression, no errors possible\n  jpeg_destroy_decompress(&amp;cinfo); // 8) Release JPEG decompression object\n  fclose(infile);\n  return 1;\n}\n\nGLOBAL(void)\nwrite_JPEG_file(char * filename, unsigned char * image_buffer, int quality)\n{\n  struct jpeg_compress_struct cinfo;\n  struct jpeg_error_mgr jerr;\n  FILE * outfile;  // target file\n  JSAMPROW rows_buffer[1];  // pointer to JSAMPLE row[s]\n  int row_stride_len;  // physical row width in image rows_buffer\n  cinfo.err = jpeg_std_error(&amp;jerr);\n  jpeg_create_compress(&amp;cinfo); // initialize the JPEG compression object\n  if ((outfile = fopen(filename, \"wb\")) == NULL) {\n    fprintf(stderr, \"can't open %s\\n\", filename);\n    exit(1);\n  }\n  jpeg_stdio_dest(&amp;cinfo, outfile);\n  cinfo.image_width  = image_width;\n  cinfo.image_height = image_height;\n  cinfo.input_components = 3;\n  cinfo.in_color_space = JCS_RGB;\n  jpeg_set_defaults(&amp;cinfo); // set default compression parameters\n  jpeg_set_quality(&amp;cinfo, quality, TRUE /* limit to baseline-JPEG values */);\n  jpeg_start_compress(&amp;cinfo, TRUE); // TRUE - write a complete interchange-JPEG file.\n  row_stride_len = cinfo.image_width * 3; /* JSAMPLEs per row in image_buffer */\n\n  // pass array of pointers to scan lines\n  while (cinfo.next_scanline &lt; cinfo.image_height) {\n    rows_buffer[0] = &amp; image_buffer[cinfo.next_scanline * row_stride_len];\n    (void) jpeg_write_scanlines(&amp;cinfo, rows_buffer, 1);\n  }\n\n  jpeg_finish_compress(&amp;cinfo);\n  fclose(outfile);\n  jpeg_destroy_compress(&amp;cinfo);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "atmelstudio"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 2016528, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef4aa43b6bd22783d790249e62fde5b4?s=128&d=identicon&r=PG", "display_name": "bradix_14", "link": "https://stackoverflow.com/users/2016528/bradix-14"}, "edited": false, "score": 0, "creation_date": 1422481828, "post_id": 28202998, "comment_id": 44772226, "body": "Thanks for the suggestion. I&#39;m happy to use whatever will be best. I was just wondering if there was a way to do it in AtmelStudio so I could get to know my way around the IDE for the future when I do more with AVR chips."}], "tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": true, "score": 0, "last_activity_date": 1422482178, "last_edit_date": 1422482178, "creation_date": 1422481507, "answer_id": 28202998, "question_id": 28202777, "link": "https://stackoverflow.com/questions/28202777/use-atmel-studio-as-general-c-compiler/28202998#28202998", "title": "Use Atmel Studio as General C Compiler", "body": "<p>For programs intended to run in a Windows console window, may I suggest using MinGW?  That's a port of the GCC C/C++/etc. compilers used by Atmel Studio, and the Code::Blocks IDE makes a nice match for that under Windows.  I usually don't recommend software bundles, but there's a handy binary download codeblocks.org with a stable Code::Blocks and a recent stable MinGW.</p>\n\n<p><a href=\"http://www.codeblocks.org/downloads/26\" rel=\"nofollow\">Code::Block Binary Downloads</a></p>\n\n<p>As for using AtmelStudio to compile programs to run in a \"cmd\" window, the compilers used will will be some sort of cross-compiler for a CPU and OS that is not what you are running on.  Unless you have an emulator for that target platform that runs in Windows console, then I think you're out of luck.  Embedded systems typically don't have keyboard or console devices, so real programs won't have a classical Unix-style <code>main()</code> function.  You still can write and test functions that don't do console I/O or system calls.  Properly coded, those will recompile without changes to run in either environment.</p>\n"}, {"tags": [], "owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "is_accepted": false, "score": 2, "last_activity_date": 1422481886, "creation_date": 1422481886, "answer_id": 28203101, "question_id": 28202777, "link": "https://stackoverflow.com/questions/28202777/use-atmel-studio-as-general-c-compiler/28203101#28203101", "title": "Use Atmel Studio as General C Compiler", "body": "<p>As far as I know this is not possible. You can only use the simulator to investigate the simulated internal state of a microcontroller and that's it.</p>\n\n<p>There is stuff out there like <a href=\"http://winavr.cvs.sourceforge.net/viewvc/winavr/avrtest/\" rel=\"nofollow\">avrtest</a> or  <a href=\"https://github.com/buserror/simavr\" rel=\"nofollow\">simavr</a> but I'm not sure if this is working for you. </p>\n\n<p>If you just want to learn C before getting into microcontroller development - which is a rather good idea - just get another IDE like <a href=\"https://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/lunasr1a\" rel=\"nofollow\">Eclipse C/C++</a> and start with that. After you have the basics you will be able to debug a microcontroller using just the AVR simulator as well.</p>\n\n<p><a href=\"http://www.avrfreaks.net/forum/printf-question\" rel=\"nofollow\">Here</a> is another (possible) solution to what you want but I guess that is not an answer you want to get as a beginner.</p>\n"}], "owner": {"reputation": 17, "user_id": 2016528, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef4aa43b6bd22783d790249e62fde5b4?s=128&d=identicon&r=PG", "display_name": "bradix_14", "link": "https://stackoverflow.com/users/2016528/bradix-14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 0, "accepted_answer_id": 28202998, "answer_count": 2, "score": 0, "last_activity_date": 1422482178, "creation_date": 1422480624, "question_id": 28202777, "link": "https://stackoverflow.com/questions/28202777/use-atmel-studio-as-general-c-compiler", "title": "Use Atmel Studio as General C Compiler", "body": "<p>I'm trying to dig in and learn C. My end goal is to head more toward AVR programming and hardware so I downloaded AtmelStudio.</p>\n\n<p>I'm working through a C primer book and wondering how to write console programs in AtmelStudio?  All the project types seem to be AVR/ARM focused (makes sense) and require me to pick a Device.</p>\n\n<p>Can I use AtmelStudio for just compiling simple programs and running them in a cmd window?</p>\n"}, {"tags": ["javascript", "c", "arrays", "node.js", "emscripten"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1422480902, "post_id": 28202744, "comment_id": 44771744, "body": "Shouldn&#39;t you pass a pointer and an array size in C instead?"}, {"owner": {"reputation": 3196, "user_id": 2116766, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a47f248d01775a3ebf5819dd9367a761?s=128&d=identicon&r=PG", "display_name": "Shanqing Cai", "link": "https://stackoverflow.com/users/2116766/shanqing-cai"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1422481390, "post_id": 28202744, "comment_id": 44771992, "body": "@zerkms: I tried the C function signature modify_array(int *X, int size), then did the emscripten workflow again, with modifications to the JavaScript syntax of course. The behavior appears to be exactly the same  as the original array-based C function signature."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1422481444, "post_id": 28202744, "comment_id": 44772019, "body": "Could you show <code>modify_array.js</code> contents?"}, {"owner": {"reputation": 3196, "user_id": 2116766, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a47f248d01775a3ebf5819dd9367a761?s=128&d=identicon&r=PG", "display_name": "Shanqing Cai", "link": "https://stackoverflow.com/users/2116766/shanqing-cai"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1422481581, "post_id": 28202744, "comment_id": 44772086, "body": "@zerkms, Thanks for the suggestion. But I don&#39;t see how that might be helpful. The size of the generated file is pretty large (9.8k lines) and the code is not very human-readable. If you want, I can PM it to you (if there is such a thing on StackOverflow)."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1422483278, "post_id": 28202744, "comment_id": 44772928, "body": "So the <code>modify_array</code> function that is originally 3 lines of C code translated to 9.8k LOC?"}, {"owner": {"reputation": 3196, "user_id": 2116766, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a47f248d01775a3ebf5819dd9367a761?s=128&d=identicon&r=PG", "display_name": "Shanqing Cai", "link": "https://stackoverflow.com/users/2116766/shanqing-cai"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1422483718, "post_id": 28202744, "comment_id": 44773118, "body": "That is correct, @zerkms. This is apparently how Emscripten works... After a little more searching on StackOverflow (which I probably should have done beforehand), I found this Q+A: <a href=\"http://stackoverflow.com/questions/17883799/how-to-handle-passing-returning-array-pointers-to-emscripten-compiled-code\" title=\"how to handle passing returning array pointers to emscripten compiled code\">stackoverflow.com/questions/17883799/&hellip;</a>. This solves my problem. Using Module._malloc to create a chunk of heap memory, specifying the JS argument as &quot;number&quot; and passing it to the JS function does the trick. Later you can use &quot;getValue&quot; or &quot;subArray&quot; to retrieve the new values in the same heap memory location."}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 0, "creation_date": 1422487475, "post_id": 28202744, "comment_id": 44774603, "body": "@scai, it sounds like you figured it out correctly.  C++ is translated into JS with all memory done virtually in arrays.  As such a normal JS object won&#39;t make sense to C++ code, but base types are translated reasonably (usually)."}], "answers": [{"comments": [{"owner": {"reputation": 803, "user_id": 767440, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d845c11a24e2e78133885a0927affc6b?s=128&d=identicon&r=PG", "display_name": "carlos.baez", "link": "https://stackoverflow.com/users/767440/carlos-baez"}, "edited": false, "score": 3, "creation_date": 1474542774, "post_id": 28222459, "comment_id": 66578734, "body": "Module.malloc is not working for me, but Module has &#39;_malloc&#39;, it seems to work fine"}], "tags": [], "owner": {"reputation": 968, "user_id": 1176841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9f8cd8da97fa3a92e46ebe576e8050?s=128&d=identicon&r=PG", "display_name": "Alon Zakai", "link": "https://stackoverflow.com/users/1176841/alon-zakai"}, "is_accepted": false, "score": 9, "last_activity_date": 1541090233, "last_edit_date": 1541090233, "creation_date": 1422557893, "answer_id": 28222459, "question_id": 28202744, "link": "https://stackoverflow.com/questions/28202744/emscripten-calling-a-c-function-that-modifies-array-elements/28222459#28222459", "title": "Emscripten: Calling a C function that modifies array elements", "body": "<p>Emscripten's memory model is a single flat array. That means that when you provide an array of data to a compiled C method, it is copied into the single array, which is the only place it can be accessed (the ccall/cwrap methods do this for you). In other words, all arguments you pass are by value, not by reference, even if they are arrays (which in JS normally are passed by reference).</p>\n\n<p>To work within the emscripten memory model, you can use memory in the single flat array,</p>\n\n<pre><code>var ptr = Module._malloc(8);\nvar view = Module.HEAPU8.subarray(ptr, ptr+8);\nvar f = Module.cwrap(\"modify_array\", \"undefined\", [\"number\"]);\nf(ptr);\n</code></pre>\n\n<p>That reserves a space in the single array, and using a subarray on the single array, we can access its values. Note the use of <code>number</code> as the type. We are passing <code>ptr</code>, which is a pointer to the buffer. As a pointer, it is just a number referring to a location in the single array. </p>\n\n<p>(Note that you should call <code>free</code> to release the memory at the right time.)</p>\n"}], "owner": {"reputation": 3196, "user_id": 2116766, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/a47f248d01775a3ebf5819dd9367a761?s=128&d=identicon&r=PG", "display_name": "Shanqing Cai", "link": "https://stackoverflow.com/users/2116766/shanqing-cai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1865, "favorite_count": 3, "answer_count": 1, "score": 3, "last_activity_date": 1541090233, "creation_date": 1422480534, "last_edit_date": 1422481689, "question_id": 28202744, "link": "https://stackoverflow.com/questions/28202744/emscripten-calling-a-c-function-that-modifies-array-elements", "title": "Emscripten: Calling a C function that modifies array elements", "body": "<p>I have a simple C function that modifies elements of an integer array. I can convert it to JavaScript using Emscripten (emcc) without problems. But when I call the function on a JS array, the values in it do not seem to change. Please help. </p>\n\n<p>This is the C function definition:</p>\n\n<pre><code>/* modify_array.c */\nvoid modify_array(int X[8]) {\n  int i;\n  for (i = 0; i &lt; 8; ++i) {\n    X[i] += 1;\n  }\n}\n</code></pre>\n\n<p>This is the command I used to transpile the C code to JS:</p>\n\n<pre><code>emcc modify_array.c -o modify_array.js -s EXPORTED_FUNCTIONS=\"['_modify_array']\"\n</code></pre>\n\n<p>And this is the JavaScript (Node.js) code for invoking the transpiled JS code:</p>\n\n<pre><code>var mod = require(\"./modify_array.js\");\nvar f = mod.cwrap(\"modify_array\", \"undefined\", [\"array\"]);\n\nvar X = [0, 1, 2, 3, 4, 5, 6, 7];\nvar bytesX = new Uint8Array(new Int32Array(X).buffer);\n\n/* Invoke the emscripten-transpiled function */\nf(bytesX);\n\n\nconsole.log(new Int32Array(bytesX.buffer));\n</code></pre>\n\n<p>After running the JS code, the buffer contains values that are identical to the original values, not the incremented values. Why? How can I get the updated values? </p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422481062, "post_id": 28202728, "comment_id": 44771817, "body": "Did you by any chance mean <code>a_field = a.field</code>?"}, {"owner": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422486412, "post_id": 28202728, "comment_id": 44774228, "body": "@iharob actually i meant field_ptr in the second line instead of a_ptr, it was a typo. I didn&#39;t use a.field anywhere, see answer below"}], "answers": [{"comments": [{"owner": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "edited": false, "score": 0, "creation_date": 1422486469, "post_id": 28202783, "comment_id": 44774246, "body": "This my first attempt but unfortunately i get errors: expression must have class type"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "edited": false, "score": 0, "creation_date": 1422487150, "post_id": 28202783, "comment_id": 44774484, "body": "@nlooije please post the exact error, copy and paste."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "reply_to_user": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "edited": false, "score": 1, "creation_date": 1422487235, "post_id": 28202783, "comment_id": 44774522, "body": "@nlooije are you using C++?"}, {"owner": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1422487519, "post_id": 28202783, "comment_id": 44774619, "body": "@RyanHaining: I am using Cuda which i guess technically is C++."}, {"owner": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "edited": false, "score": 0, "creation_date": 1422487595, "post_id": 28202783, "comment_id": 44774645, "body": "@iharob: the error message is exactly &#39;error: expression must have class type&#39;, that is the error which appears for everytime i use a.field"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "edited": false, "score": 0, "creation_date": 1422487600, "post_id": 28202783, "comment_id": 44774649, "body": "@nlooije c and c++ are not the same, are you aware of that? In co you can&#39;t do <code>Struct *a</code> with your current struct definition, you would need this instead <code>struct Struct *a</code>."}, {"owner": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "edited": false, "score": 1, "creation_date": 1422487918, "post_id": 28202783, "comment_id": 44774761, "body": "a yes now it make sense! i am ofcourse aware that they are not the same, but in this case its not the difference in C vs C++ but if it is a pointer to a struct or not. That i didnt realize how to do... thx"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 5, "last_activity_date": 1422487846, "last_edit_date": 1422487846, "creation_date": 1422480640, "answer_id": 28202783, "question_id": 28202728, "link": "https://stackoverflow.com/questions/28202728/how-to-access-an-element-of-a-field-in-a-structure-directly/28202783#28202783", "title": "How to access an element of a field in a structure directly", "body": "<p>Of course there is; just use:</p>\n\n<pre><code>a-&gt;field[idx] = 1.0f;\n</code></pre>\n\n<p>if <code>a</code> is of type <code>Struct *</code>.</p>\n\n<p>If the instance is a pointer to a struct, you need to dereference it using <code>-&gt;</code> operator, and if it's not a pointer it's the <code>.</code> operator.  Example:</p>\n\n<pre><code>struct Struct x;\n/* you need to allocate space for the floats first */\nx.field[0] = value;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>struct Struct *x;\n/* you need to allocate space for the floats first, and x must be a valid pointer */\nx-&gt;field[0] = value;\n</code></pre>\n"}], "owner": {"reputation": 1130, "user_id": 1271603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5927ef611ebb896532c37b7b54f7ebe0?s=128&d=identicon&r=PG", "display_name": "nluigi", "link": "https://stackoverflow.com/users/1271603/nluigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8640, "favorite_count": 0, "accepted_answer_id": 28202783, "answer_count": 1, "score": 1, "last_activity_date": 1422487846, "creation_date": 1422480472, "last_edit_date": 1422486869, "question_id": 28202728, "link": "https://stackoverflow.com/questions/28202728/how-to-access-an-element-of-a-field-in-a-structure-directly", "title": "How to access an element of a field in a structure directly", "body": "<p>I have structure of arrays defined like in the following code sample:</p>\n\n<pre><code>struct Struct {\n   float *field;\n};\n</code></pre>\n\n<p>where field is an array of arbitrary length with index <code>idx</code>.\nCurrently i am filling these arrays as follows:</p>\n\n<pre><code>float *field_ptr = a-&gt;field;\nfield_ptr[idx] = 1.0f;\n</code></pre>\n\n<p>Is there a direct way to fill the array without the intermediate field_ptr pointer? I tried a couple of ways but unfortunately i am not exactly a C or pointer guru so I ran into out-of-bounds memory problems.</p>\n\n<p>Edit 1: It may be useful to know that this is part of a (Py)Cuda code.<br>\nEdit 2: The code resides in a sample function with the following (pointer) declaration:</p>\n\n<pre><code>void testfunction(Struct *a)\n{\n    int idx = get_index();\n    float *field_ptr = a-&gt;field;\n    field_ptr[idx] = 1.0f;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1422481900, "post_id": 28202691, "comment_id": 44772257, "body": "At some point, you should look into why you get the &#226; characters in the error message.  They&#39;re a nuisance if nothing else.  It might be a UTF-8 vs 8859-x code set problem."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1422483236, "post_id": 28202691, "comment_id": 44772907, "body": "In the compiler error message, it should contain a line number indicating which line the error was on."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 3578739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b2d3a54bd7f6729ad468d8877b6d16?s=128&d=identicon&r=PG&f=1", "display_name": "user3578739", "link": "https://stackoverflow.com/users/3578739/user3578739"}, "edited": false, "score": 0, "creation_date": 1422481439, "post_id": 28202747, "comment_id": 44772018, "body": "Thanks! That worked perfect. Sorry that was such a simple problem, i looked over it a hundred times and didn&#39;t notice i declared that parameter wrong."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 35, "user_id": 3578739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b2d3a54bd7f6729ad468d8877b6d16?s=128&d=identicon&r=PG&f=1", "display_name": "user3578739", "link": "https://stackoverflow.com/users/3578739/user3578739"}, "edited": false, "score": 1, "creation_date": 1422481710, "post_id": 28202747, "comment_id": 44772162, "body": "No worries. Most of us have been through such mistakes :)"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1422480546, "creation_date": 1422480546, "answer_id": 28202747, "question_id": 28202691, "link": "https://stackoverflow.com/questions/28202691/c-compile-error-using-an-external-function/28202747#28202747", "title": "C compile error using an external function", "body": "<p>The following line is incorrect:</p>\n\n<pre><code>void printstring(char[] s){\n</code></pre>\n\n<p>Change that to:</p>\n\n<pre><code>void printstring(char s[]){\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1422480560, "creation_date": 1422480560, "answer_id": 28202755, "question_id": 28202691, "link": "https://stackoverflow.com/questions/28202691/c-compile-error-using-an-external-function/28202755#28202755", "title": "C compile error using an external function", "body": "<p>Your line:</p>\n\n<pre><code>void printstring(char[] s){\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>void printstring(char s[]){\n</code></pre>\n\n<p>The square brackets for the array come after the variable name, just as they would if you indexed it with <code>s[i]</code> in the code.</p>\n"}], "owner": {"reputation": 35, "user_id": 3578739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b2d3a54bd7f6729ad468d8877b6d16?s=128&d=identicon&r=PG&f=1", "display_name": "user3578739", "link": "https://stackoverflow.com/users/3578739/user3578739"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 28202747, "answer_count": 2, "score": 0, "last_activity_date": 1422481832, "creation_date": 1422480338, "last_edit_date": 1422481832, "question_id": 28202691, "link": "https://stackoverflow.com/questions/28202691/c-compile-error-using-an-external-function", "title": "C compile error using an external function", "body": "<p>I'm new to C and feel as if I'm missing some formatting syntax but I can't figure out what exactly. Upon compiling the program with</p>\n\n<pre><code>gcc -o test test.c myprintf.c\n</code></pre>\n\n<p>I get the following error</p>\n\n<pre><code>expected \u00e2;\u00e2, \u00e2,\u00e2 or \u00e2)\u00e2 before \u00e2s\u00e2\n</code></pre>\n\n<p>I'm sorry if this is some simple overlook on my part, but the format seems to be correct to me. Also this is part of a homework assignment however I tested every function I was responsible for creating separately and they work just fine. I'm omitting the functions I was responsible for writing, if you believe they are needed I will edit them in as it appears to not even access them. The error occurs directly between my first and section function (the blank line between printint and printstring.</p>\n\n<h3>Simplest test file possible &mdash; test.c</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nextern void myprintf(const char *, ...);\n\nint main()\n{\n  myprintf(\"Nothing much\\n\");\n\n  return 0;\n}\n</code></pre>\n\n<h3>myprintf.c</h3>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stdio.h&gt;\n\n\n void printint(int i){\n  int temp;\n  /*some while loop that shrinks i while outputting the correct char*/\n\n  int ascii = i + '0';\n  putchar(ascii);\n}\n\nvoid printstring(char[] s){\n  int i = 0;\n  /*some while loop that moves through a string using putchar to output the                 corresponding character*/\n}\n\nvoid printhex(int k){\n  /*long complicated program involving a series of loops that change a    decimal into a hexidecimal, obviously without using any built in printf or     modifiers*/\n}\n\n/*This is the code provided that uses my 3 functions. I assume it all to be correct*/\n\nvoid myprintf(const char *fmt, ...) {\n  const char *p;\n  va_list argp;\n  int i;\n  char *s;\n\n  va_start(argp, fmt);\n\n  for (p = fmt; *p != '\\0'; p++) {\n    if (*p != '%') {\n      putchar(*p);\n      continue;\n    }\n    switch (*++p) {\n    case 'c':\n      i = va_arg(argp, int);\n      putchar(i);\n      break;\n\n    case 'd':\n      i = va_arg(argp, int);\n      printint(i);\n      break;\n\n    case 's':\n      s = va_arg(argp, char *);\n      printstring(s);\n      break;\n\n    case 'x':\n      i = va_arg(argp, int);\n      printhex(i);\n      break;\n\n    case '%':\n      putchar('%');\n      break;\n    }\n  }\n  va_end(argp);\n}\n</code></pre>\n"}, {"tags": ["python", "c", "header", "ctypes"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1422481003, "post_id": 28202676, "comment_id": 44771789, "body": "In ctype, you defined <code>szXMLAdditionalParameters&quot;, c_byte*512</code>, but in your c header, <code>char szXMLAdditionalParameters[513]</code>. Looks like an off by one error?"}, {"owner": {"reputation": 25, "user_id": 4493056, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c09a986e18146d3e8504fb0866d46a81?s=128&d=identicon&r=PG&f=1", "display_name": "Nick-M", "link": "https://stackoverflow.com/users/4493056/nick-m"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1422481136, "post_id": 28202676, "comment_id": 44771853, "body": "sorry , I have changed that still same issue."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1422481355, "post_id": 28202676, "comment_id": 44771973, "body": "What line is causing the error?"}, {"owner": {"reputation": 25, "user_id": 4493056, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c09a986e18146d3e8504fb0866d46a81?s=128&d=identicon&r=PG&f=1", "display_name": "Nick-M", "link": "https://stackoverflow.com/users/4493056/nick-m"}, "edited": false, "score": 0, "creation_date": 1422481588, "post_id": 28202676, "comment_id": 44772090, "body": "I am getting this message : &#39;module&#39; object has no attribute &#39;CONST&#39;"}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1422485350, "post_id": 28202676, "comment_id": 44773769, "body": "Just a long shot. Try to use <code>ctypes.c_byte(ord(&quot;s&quot;)) </code>"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422489320, "post_id": 28202676, "comment_id": 44775210, "body": "FYI, the compiled code for <code>test</code> handles the second argument as <code>char *arg2</code>. C arrays are passed as pointers. If you printed <code>sizeof arg2</code> in <code>test</code> it would return 4 or 8 bytes."}], "answers": [{"comments": [{"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "reply_to_user": {"reputation": 25, "user_id": 4493056, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c09a986e18146d3e8504fb0866d46a81?s=128&d=identicon&r=PG&f=1", "display_name": "Nick-M", "link": "https://stackoverflow.com/users/4493056/nick-m"}, "edited": false, "score": 0, "creation_date": 1422489657, "post_id": 28203463, "comment_id": 44775303, "body": "Totally forgot a step I missed out. You need to tell ctypes the parameters that the function takes so it knows how to convert the given python objects."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422493835, "post_id": 28203463, "comment_id": 44776485, "body": "If <code>test(&quot;s&quot;, utilityXMLparams)</code> raises an <code>ArgumentError</code>, then <code>test.argtypes</code> is already defined, because passing strings (as <code>const char *</code>) or integers (as <code>int</code>) works without defining <code>argtypes</code>."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1422519276, "post_id": 28203463, "comment_id": 44784251, "body": "@Dunes You wrote the only thing that mater in your answer just after read in my answer the evidence of what you wrote doesn&#39;t work and it was not related to the question. IMHO do it without any credit is not really ethic."}], "tags": [], "owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "is_accepted": false, "score": 1, "last_activity_date": 1422489832, "last_edit_date": 1422489832, "creation_date": 1422483306, "answer_id": 28203463, "question_id": 28202676, "link": "https://stackoverflow.com/questions/28202676/invalid-input-type-for-c-char-ctypes-in-python/28203463#28203463", "title": "Invalid input type for c_char ctypes in python", "body": "<p>It's because you're not stating that the first arg is a byte string -- <code>b's'</code> vs <code>'s'</code>. eg.</p>\n\n<pre><code>eftUtilityRes = lib.eftUtility(b\"s\", utilityXMLparams)\n</code></pre>\n\n<p>You also need to tell ctypes what arguments the function takes. Sometimes there is ambiguity to how a python object should be converted. In your case, is a single character string meant to be interpreted as <code>char</code> or <code>char*</code> (both of which would be valid interpretations).</p>\n\n<pre><code>lib.eftUtility.argtypes = (ctypes.c_char, ctypes.c_char_p)\n</code></pre>\n\n<p>In addition your <code>Structure</code> is unused and un-needed, and your way of creating a mutable byte array is long-winded. The following is all that is needed.</p>\n\n<pre><code>xml_data = b'&lt;xml&gt;&lt;DisplayWidthInCharacters&gt;20&lt;/DisplayWidthInCharacters&gt;&lt;JournalKeepDurationInDays&gt;30&lt;/JournalKeepDurationInDays&gt;&lt;/xml&gt;'\nutilityXml = ctypes.create_string_buffer(xml_data, 512) \n\ndef eftUtilityPepper():\n    eftUtilityRes = lib.eftUtility(b\"s\", utilityXml)\n    if (eftUtilityRes == 10):\n        \"success\"\n    elif(eftUtilityRes == -10):\n        \"type 2 error\"\n    else:\n        \"type 3 error\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 4493056, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c09a986e18146d3e8504fb0866d46a81?s=128&d=identicon&r=PG&f=1", "display_name": "Nick-M", "link": "https://stackoverflow.com/users/4493056/nick-m"}, "edited": false, "score": 0, "creation_date": 1422540703, "post_id": 28204376, "comment_id": 44796860, "body": "Thanks for the answer! I used Hex value of &quot;s&quot;---&gt; 0x73 and everything worked fine. Please add this to your answer for others who may come up with the same issue."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422543717, "post_id": 28204376, "comment_id": 44798941, "body": "The <code>b</code> prefix is for compatibility with Python 3. It&#39;s nice to provide an answer that works in both versions, where possible."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422545312, "post_id": 28204376, "comment_id": 44800072, "body": "@eryksun You got a point here. I forgot to try it both 2.7 and 3.x. I&#39;ll update my answer. Anyway the <code>b</code> prefix doesn&#39;t concern the original issue where there is any mention about <code>TypeError</code> exceptions."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422546464, "post_id": 28204376, "comment_id": 44800889, "body": "If you&#39;re not setting <code>argtypes</code> (but please do this for type safety in general), I recommend calling <code>c_char</code> instead of <code>ord</code>. The latter would quietly return an ordinal greater than 255 for a unicode character, which ctypes would quietly pass as a C <code>int</code>. It&#39;s much cleaner to raise a <code>TypeError</code> for a unicode character, which <code>c_char</code> does."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422548114, "post_id": 28204376, "comment_id": 44802072, "body": "@eryksun Thanks you your note. Just for the record <a href=\"https://docs.python.org/3.4/library/ctypes.html#return-types\" rel=\"nofollow noreferrer\">ctype documentation</a> make my same mistake :)"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422550285, "post_id": 28204376, "comment_id": 44803490, "body": "That example was carried over from the 2.x docs (e.g. <a href=\"https://docs.python.org/2.5/lib/ctypes-return-types.html\" rel=\"nofollow noreferrer\">Python 2.5</a> from 2006), first written back when working with byte strings was the norm."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422551844, "post_id": 28204376, "comment_id": 44804440, "body": "@eryksun You are right ... My was just a joke to note that the official documentation doesn&#39;t take in account these relevant points. I&#39;m very glad to take in account your observation: I learn a lot by your comments."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422553553, "post_id": 28204376, "comment_id": 44805463, "body": "<code>c_char</code> takes a single-character byte string, e.g. <code>c_char(b&quot;s&quot;)</code> works in Python 2 and 3.  Your example with <code>c_char(ord(&quot;s&quot;))</code> is an error."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422554314, "post_id": 28204376, "comment_id": 44805884, "body": "@eryksun are you sure? I&#39;d tried it before write. Now I cannot test it, I &#39;ll check it later."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422554604, "post_id": 28204376, "comment_id": 44806057, "body": "Yes, I&#39;m sure. <code>c_char._type_ == &#39;c&#39;</code>, for which the corresponding <code>setfunc</code> is <a href=\"https://hg.python.org/cpython/file/648dcafa7e5f/Modules/_ctypes/cfield.c#l1146\" rel=\"nofollow noreferrer\"><code>c_set</code></a> (2.7.9 source link)."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422558089, "post_id": 28204376, "comment_id": 44807979, "body": "@eryksun <code>c_char(ord(&quot;s&quot;))</code> return <code>c_char(b&#39;s&#39;)</code> in python 3 and raise exception in python 2.7. I-ll fix it ASAP"}], "tags": [], "owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "is_accepted": true, "score": 1, "last_activity_date": 1422564868, "last_edit_date": 1422564868, "creation_date": 1422487613, "answer_id": 28204376, "question_id": 28202676, "link": "https://stackoverflow.com/questions/28202676/invalid-input-type-for-c-char-ctypes-in-python/28204376#28204376", "title": "Invalid input type for c_char ctypes in python", "body": "<p>The signature of your function is <code>(const char arg1 ... )</code> so you must pass a char as first argument and not a <em>character</em>. That means a byte and not a single char string. To test it I wrote my lib</p>\n\n<p><strong>foo.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid foo(const char v)\n{\n    printf(\"Hello, I'm a shared library %c\\n\",v);\n}\n</code></pre>\n\n<p>And compile it by</p>\n\n<pre><code>gcc -c -Wall -Werror -fpic foo.c\ngcc -shared -o libfoo.so foo.o\n</code></pre>\n\n<p>And now call it by python console:</p>\n\n<p>My python script is:</p>\n\n<pre><code>&gt;&gt;&gt; from ctypes import *\n&gt;&gt;&gt; lib = cdll.LoadLibrary(\"./libfoo.so\")\n&gt;&gt;&gt; a=lib.foo(ord(\"s\"))\nHello, I'm a shared library s\n&gt;&gt;&gt; a=lib.foo(\"s\")\nHello, I'm a shared library D\n&gt;&gt;&gt; a=lib.foo(b\"s\")\nHello, I'm a shared library D\n</code></pre>\n\n<p>It is clear that what you need is <code>ord(\"s\")</code>.</p>\n\n<hr>\n\n<p>One more thing: it is just a guess but maybe the error that you read came from the library that read an incorrect char as first argument. </p>\n\n<hr>\n\n<p>Follow a lot of edits where we can see how many wrong assumptions or silly errors we can do if we don't use a correct cast by use <code>ctypes</code> to call a C library function. Now what I wrote above it was useful just to understand where the issue was but the real production code that should work either in Python 2 and Python 3 should declare the correct function interface and use <code>b\"s\"</code> as argument:</p>\n\n<pre><code>&gt;&gt;&gt; lib.foo.argtypes = (c_char,)\n&gt;&gt;&gt; lib.foo.restype = None\n&gt;&gt;&gt; lib.foo(b\"s\") \nHello, I'm a shared library s \n</code></pre>\n\n<hr>\n\n<p>Just for the record:</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>As @eryksun has correctly pointed me in the comments it is very unsafe call C function without use a correct cast: it is like in C don't use a prototype and everything become <code>int</code>. So if you don't set function <code>argtype</code> is better use explicit cast like:</p>\n\n<pre><code>&gt;&gt;&gt; a=lib.foo(c_char(ord(\"s\"))) #Work Just on Python 3\nHello, I'm a shared library s\n&gt;&gt;&gt; a=lib.foo(c_char(\"s\")) # Just Python 2.7\nHello, I'm a shared library s\n&gt;&gt;&gt; a=lib.foo(c_char(b\"s\")) # Python 2 and 3\nHello, I'm a shared library s\n</code></pre>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>Follow from your comment: you can also hardcode <code>ord(\"s\")</code> by use either <code>105</code> or hex value <code>0x73</code></p>\n\n<pre><code>&gt;&gt;&gt; a=lib.foo(105)\nHello, I'm a shared library s\n&gt;&gt;&gt; a=lib.foo(0x73)\nHello, I'm a shared library s\n</code></pre>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>As @Dunes pointed out there is a way to tell to python how do that conversion implicitly by <code>lib.foo.argtypes = (c_char,)</code>. But how you build your char by <code>b\"s\"</code> or simply <code>\"s\"</code> doesn't mater (on python 2.7).</p>\n\n<pre><code>&gt;&gt;&gt; lib.foo.argtypes = (c_char,)\n&gt;&gt;&gt; a=lib.foo(b\"s\") \nHello, I'm a shared library s\n&gt;&gt;&gt; a=lib.foo(\"s\")  #Python 2.7\nHello, I'm a shared library s\n</code></pre>\n\n<p>In Python 3 use <code>b\"s\"</code> if you specify <code>argtypes</code> is mandatory:</p>\n\n<pre><code>&gt;&gt;&gt; lib.foo.argtypes = (c_char,)\n&gt;&gt;&gt; a=lib.foo(b\"s\") \nHello, I'm a shared library s\n&gt;&gt;&gt; a=lib.foo(\"s\")  #Python 3.4\nctypes.ArgumentError: argument 1: &lt;class 'TypeError'&gt;: wrong type\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4493056, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c09a986e18146d3e8504fb0866d46a81?s=128&d=identicon&r=PG&f=1", "display_name": "Nick-M", "link": "https://stackoverflow.com/users/4493056/nick-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "accepted_answer_id": 28204376, "answer_count": 2, "score": 0, "last_activity_date": 1422564868, "creation_date": 1422480275, "last_edit_date": 1422482823, "question_id": 28202676, "link": "https://stackoverflow.com/questions/28202676/invalid-input-type-for-c-char-ctypes-in-python", "title": "Invalid input type for c_char ctypes in python", "body": "<p>In my C header file I have:</p>\n\n<pre><code>long TEST_API test( \n            _IN____ const char arg1,\n            _INOUT_ char arg2[512]\n    );\n</code></pre>\n\n<p>I have imported <code>ctypes</code> in my python code and I am passing \"<code>kcOpCode</code>\" and \"<code>szXMLAdditionalParameters</code>\" to <code>eftUtility</code> function as following:</p>\n\n<pre><code>utilityXml_bytes = bytearray(b'&lt;xml&gt;&lt;test&gt;20&lt;/test&gt;&lt;/xml&gt;')\nutilityXMLparams = (ctypes.c_byte*512)(*utilityXml_bytes)\n\ndef test():\n    eftUtilityRes = lib.test(\"s\", utilityXMLparams)\n    if (eftUtilityRes == 10):\n        \"success\"\n    elif(eftUtilityRes == -10):\n        \"type 2 error\"\n    else:\n        \"type 3 error\"\n</code></pre>\n\n<p>But I keep getting invalid input type error for \"<code>arg1</code>\". what am I doing wrong here? could it be encoding problem? am I actually passing <code>s</code> to my function?</p>\n"}, {"tags": ["c", "types"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1422480242, "post_id": 28202598, "comment_id": 44771421, "body": "<code>int64_t</code> or <code>long long</code>. A small hint: can you transform the equation to be more timeefficent?"}, {"owner": {"reputation": 45, "user_id": 4386354, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000276110433/picture?type=large", "display_name": "Esterified", "link": "https://stackoverflow.com/users/4386354/esterified"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1422480507, "post_id": 28202598, "comment_id": 44771563, "body": "no my code is not working with long long..can u arrange the code for me pls ??"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1422481481, "post_id": 28202598, "comment_id": 44772037, "body": "you can combine the first and second number ( -1 + 2 = 1) and the third with the fourth ( -3 + 4 = 1) and so on. How much 1s do you get? Now think at the end, what&#39;s left if the last number is even and what&#39;s left if the last number is odd?"}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422480572, "post_id": 28202692, "comment_id": 44771591, "body": "And the <code>scanf()</code> /<code>printf()</code> specifier for <code>long long int</code>/<code>unsigned long long int</code> is <code>&quot;%lld&quot;</code>/<code>&quot;%llu&quot;</code>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422480631, "post_id": 28202692, "comment_id": 44771631, "body": "@iharob: Thanks, I overlooked that"}, {"owner": {"reputation": 45, "user_id": 4386354, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000276110433/picture?type=large", "display_name": "Esterified", "link": "https://stackoverflow.com/users/4386354/esterified"}, "edited": false, "score": 0, "creation_date": 1422484491, "post_id": 28202692, "comment_id": 44773464, "body": "but what about  %I64d or %I64u ??"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 45, "user_id": 4386354, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000276110433/picture?type=large", "display_name": "Esterified", "link": "https://stackoverflow.com/users/4386354/esterified"}, "edited": false, "score": 1, "creation_date": 1422486470, "post_id": 28202692, "comment_id": 44774248, "body": "@Esterified: Those were Microsoft extensions from before <code>%lld</code> was invented.  <code>%lld</code> was the standard that replaced them.  Those old ones still work, but <code>%lld</code> is more portable."}], "tags": [], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 3, "last_activity_date": 1422480340, "creation_date": 1422480340, "answer_id": 28202692, "question_id": 28202598, "link": "https://stackoverflow.com/questions/28202598/how-can-i-work-with-16-digit-integer-type/28202692#28202692", "title": "how can i work with 16 digit integer type?", "body": "<p>The biggest value an <code>int</code> can hold is 2,147,483,647.  Change the variables to <code>unsigned long long</code>, which can hold a maximum of over 18,446,744,000,000,000,000.  (You'll need to use <code>%llu</code> to read in/out <code>unsigned long long</code> variables)</p>\n\n<p>Also, always validate inputs, this would have hinted at the issue. </p>\n\n<pre><code>if(scanf(\"%d\", &amp;a) &lt; 1) { //if we read less than one\n    printf(\"FAILED TO READ INPUT\");\n    return 1;\n}\n</code></pre>\n\n<p>Finally, you're iterating from 2 to 1000000000000000, which is going to take a LONG time regardless of what's inside the loop.  You'll need to use a faster algorithm in order to complete in the one second deadline.</p>\n"}], "owner": {"reputation": 45, "user_id": 4386354, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000276110433/picture?type=large", "display_name": "Esterified", "link": "https://stackoverflow.com/users/4386354/esterified"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3150, "favorite_count": 0, "accepted_answer_id": 28202692, "answer_count": 1, "score": -6, "last_activity_date": 1422480714, "creation_date": 1422480003, "last_edit_date": 1422480714, "question_id": 28202598, "link": "https://stackoverflow.com/questions/28202598/how-can-i-work-with-16-digit-integer-type", "title": "how can i work with 16 digit integer type?", "body": "<p>problem: <a href=\"http://codeforces.com/problemset/problem/486/A\" rel=\"nofollow\">http://codeforces.com/problemset/problem/486/A</a></p>\n\n<p>input:</p>\n\n<pre><code>1000000000000000\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>-1\n</code></pre>\n\n<p>answer:</p>\n\n<pre><code>500000000000000\n</code></pre>\n\n<p>Checker log:</p>\n\n<pre><code>wrong answer 1st numbers differ - expected: '500000000000000', found: '-1'\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>int main() {\n    int a, b = 0, c = 0, d, i;\n\n    scanf(\"%d\", &amp;a);\n    for (i = 2 ; i &lt;= a ; i++) {\n         if (i % 2 == 0) {\n             c = c + i;\n         }\n         if (i % 2 != 0) {\n             b = b + i;\n         }\n     }\n     d = c - b;\n     d = d - 1;\n\n     printf(\"%d\", d);\n     return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "dynamic", "segmentation-fault"], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 2, "last_activity_date": 1422478182, "creation_date": 1422478182, "answer_id": 28202128, "question_id": 28202108, "link": "https://stackoverflow.com/questions/28202108/segmentation-code-when-accessing-allocated-memory/28202128#28202128", "title": "Segmentation code when accessing allocated memory", "body": "<pre><code>m.val = malloc(sizeof(int) * size);\nm.val = malloc(sizeof(int) * size);\nm.val = malloc(sizeof(int) * size);\n</code></pre>\n\n<p>You never malloc m.col and m.row :-) Cut &amp; Paste programming is evil...</p>\n"}, {"tags": [], "owner": {"reputation": 40537, "user_id": 465378, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c03b8d34978563858020eff0d14cc17b?s=128&d=identicon&r=PG", "display_name": "Alexis King", "link": "https://stackoverflow.com/users/465378/alexis-king"}, "is_accepted": true, "score": 2, "last_activity_date": 1422478190, "creation_date": 1422478190, "answer_id": 28202130, "question_id": 28202108, "link": "https://stackoverflow.com/questions/28202108/segmentation-code-when-accessing-allocated-memory/28202130#28202130", "title": "Segmentation code when accessing allocated memory", "body": "<p>You assign to <code>val</code> three times, but never initialize the other two pointers.</p>\n\n<pre><code>m.val = malloc(sizeof(int) * size);\nm.val = malloc(sizeof(int) * size);\nm.val = malloc(sizeof(int) * size);\n</code></pre>\n\n<p>I'm guessing you meant this:</p>\n\n<pre><code>m.val = malloc(sizeof(int) * size);\nm.col = malloc(sizeof(int) * size);\nm.row = malloc(sizeof(int) * size);\n</code></pre>\n"}], "owner": {"reputation": 962, "user_id": 4504720, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ace526e1e08e475c20f8448be16a950e?s=128&d=identicon&r=PG&f=1", "display_name": "Random Guy", "link": "https://stackoverflow.com/users/4504720/random-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 28202130, "answer_count": 2, "score": 0, "last_activity_date": 1422478729, "creation_date": 1422478063, "last_edit_date": 1422478729, "question_id": 28202108, "link": "https://stackoverflow.com/questions/28202108/segmentation-code-when-accessing-allocated-memory", "title": "Segmentation code when accessing allocated memory", "body": "<p>I need to fill sparse matrix with random elemnts. I am trying to get random elements and write them as value, column and row elements of their arrays but I keep running into segmentation faults. </p>\n\n<p>This only happens if I set N=1000 then SIZE=10000 (because if I set SIZE=1000 or less, it works). </p>\n\n<p><strong>Does that mean I can't allocate all this memory or access it after I allocated it?</strong></p>\n\n<p>What should I do if I really need to get all this memory (SIZE=10'000) allocated? can someone please help me?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct _matrix {\n    int size;       //number of not-null elements\n    int ord;       //order of matrix\n    int* val;\n    int* col;\n    int* row;\n} matrix;\n\nmatrix init (int ord, int size)\n{\n    matrix m;\n    m.ord = ord;\n    m.size = size;\n\n    m.val = malloc(sizeof(int) * size);\n    m.val = malloc(sizeof(int) * size);\n    m.val = malloc(sizeof(int) * size);\n    return m;\n}\n\nmatrix fill_matrix (int ord)\n{\n    int i, j, gap, size = ord * ord / 100;\n    matrix new_matrix = init(ord, size);\n\n    j = 1;\n    for (i = 0; i &lt; size; i++) {\n        new_matrix.val[i] = rand() % 9 + 1;\n        new_matrix.col[i] = rand() % ord + 1;        //&lt;------SEGFAULT\n        new_matrix.row[i] = rand() % ord + 1;\n        j++;\n    }\n    return new_matrix;\n}\n\nint main()\n{\n    matrix A;\n    int n = 1000;\n    A = fill_matrix(n);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "embedded", "cmsis"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422477174, "post_id": 28201683, "comment_id": 44769869, "body": "You might get the preprocessed form of your source code (e.g. using something like <code>gcc -C -E yoursource.c &gt; yoursource.i</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 1868, "user_id": 4504711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/583d378f497f6f55857b9e3d58bb9a11?s=128&d=identicon&r=PG&f=1", "display_name": "Botond", "link": "https://stackoverflow.com/users/4504711/botond"}, "edited": false, "score": 0, "creation_date": 1422477463, "post_id": 28201828, "comment_id": 44770035, "body": "Thanks! Up to point 3. I see now what&#39;s happening. The part ((uint8_t *)0x10000) is still blury... Would that return the value stored at the address 0x10000 casted to uint8_t?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1868, "user_id": 4504711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/583d378f497f6f55857b9e3d58bb9a11?s=128&d=identicon&r=PG&f=1", "display_name": "Botond", "link": "https://stackoverflow.com/users/4504711/botond"}, "edited": false, "score": 0, "creation_date": 1422477779, "post_id": 28201828, "comment_id": 44770202, "body": "In the hypothetical expansion I showed, you would have an expression like: <code>uint8_t b = *GPIOA_AHB;</code> to read a byte from that address, or <code>*GPIOA_AHB = 0x83;</code> to write a byte to that address.  The general concept (an address you can read from or write to) is accurate; the detailed mechanics depend on the definitions. If the <code>GPIOA_AHB_Type</code> is a structure instead of a simple type, then you can use <code>GPIOA_AHB-&gt;member</code> to access a member of the structure. The main point is that it converts a memory address dictated by hardware into something a C program can use. It is unportable, but effective."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1422525870, "post_id": 28201828, "comment_id": 44787765, "body": "More commonly these kind of macros are written as: <code>#define GPIOA_AHB (*(volatile uint8_t*) GPIOA_AHB_BASE)</code>. That way you don&#39;t have to dereference but treat the register as any other variable. Also, the type needs to be volatile, since it is a hardware memory location."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1422477075, "creation_date": 1422477075, "answer_id": 28201828, "question_id": 28201683, "link": "https://stackoverflow.com/questions/28201683/embedded-c-define/28201828#28201828", "title": "embedded C #define", "body": "<p>The full details can't be stated from the information in the question, but:</p>\n\n<ol>\n<li>If the source code contains <code>GPIOA_AHB</code> as an identifier, it will be replaced by <code>((GPIOA_AHB_Type *)GPIOA_AHB_BASE)</code> initially.</li>\n<li>What happens next depends on whether either <code>GPIOA_AHB_Type</code> or <code>GPIOA_AHB_BASE</code> is itself a macro.</li>\n<li><p>If there is a <code>#define GPIOA_AHB_BASE 0x10000</code> say, then that value is inserted in the replacement text.  Similarly, if there is a <code>#define GPIOA_AHB_Type uint8_t</code>, then the value is inserted in the replacement text, leading to code containing:</p>\n\n<pre><code>((uint8_t *)0x10000)\n</code></pre></li>\n<li><p>That value can be dereferenced and a memory read will occur that actually references the GPIO bus and device.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1928, "user_id": 4359075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8402c4ebac8daf5089467881855b75a1?s=128&d=identicon&r=PG&f=1", "display_name": "ElazarR", "link": "https://stackoverflow.com/users/4359075/elazarr"}, "is_accepted": false, "score": 1, "last_activity_date": 1422477435, "last_edit_date": 1422477435, "creation_date": 1422477282, "answer_id": 28201895, "question_id": 28201683, "link": "https://stackoverflow.com/questions/28201683/embedded-c-define/28201895#28201895", "title": "embedded C #define", "body": "<p>From the definition of <code>GPIOA_AHB</code> I can conclude that it is used to reference registers of a <code>GPIO/AHB</code> device.</p>\n\n<p>The notation to access these registers would be <code>GPIOA_AHB-&gt;some_register</code> .</p>\n\n<p>If you would have defined <code>GPIOA_AHB</code> as you describe in the second case, it would just be a plain number. You would not be able to use it to reference registers without first casting it to the structure that describes the registers offsets within that device (<code>GPIOA_AHB_Type</code>) or manually adding the offsets of each register within that device register space.</p>\n"}], "owner": {"reputation": 1868, "user_id": 4504711, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/583d378f497f6f55857b9e3d58bb9a11?s=128&d=identicon&r=PG&f=1", "display_name": "Botond", "link": "https://stackoverflow.com/users/4504711/botond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "accepted_answer_id": 28201828, "answer_count": 2, "score": 1, "last_activity_date": 1422477435, "creation_date": 1422476553, "question_id": 28201683, "link": "https://stackoverflow.com/questions/28201683/embedded-c-define", "title": "embedded C #define", "body": "<p>In embedded C, I ran into the following (and many more similar) example:</p>\n\n<pre><code>#define GPIOA_AHB         ((GPIOA_AHB_Type          *) GPIOA_AHB_BASE)\n</code></pre>\n\n<p>GPIOA_AHB_BASE is an address, and it is defined previously. What does this code precisely do? I know defines are directive for the preprocessor, so that it replaces all instances with the value given in the define. For example,</p>\n\n<pre><code> #define GPIOA_AHB   GPIOA_AHB_BASE\n</code></pre>\n\n<p>would replace GPIOA_AHB with whatever value GPIOA_AHB_BASE has been defined. I don't get though what's happening in the first case...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 48820, "user_id": 182676, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/446fa39e5f227c92db408e1b68356b5e?s=128&d=identicon&r=PG", "display_name": "Macmade", "link": "https://stackoverflow.com/users/182676/macmade"}, "edited": false, "score": 0, "creation_date": 1422476744, "post_id": 28201665, "comment_id": 44769601, "body": "First, based on how you tagged your question, understand that C and C++ are two different languages..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422476921, "post_id": 28201665, "comment_id": 44769708, "body": "Start with a basic C book or tutorials. <code>char s[]</code> is nothing rare."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422476936, "post_id": 28201665, "comment_id": 44769719, "body": "You need to re-write this question <i>then how can the second array element <code>s[1] = c</code></i>  because it&#39;s not clear. And this functions is just emulating <code>fgets()</code> for <code>stdin</code>. i.e. <code>fgets(array, sizeof(array), stdin);</code> is equivalent to <code>getline(array, sizeof(array));</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422477483, "post_id": 28201665, "comment_id": 44770049, "body": "Why are you saying that in the first cycle <code>i == 1</code>? don&#39;t you see that it&#39;s <code>0</code>?"}, {"owner": {"reputation": 5, "user_id": 4057086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SQx0sPunC3o/AAAAAAAAAAI/AAAAAAAABhk/JWYMl67ZRvc/photo.jpg?sz=128", "display_name": "Raj S", "link": "https://stackoverflow.com/users/4057086/raj-s"}, "edited": false, "score": 0, "creation_date": 1422477657, "post_id": 28201665, "comment_id": 44770134, "body": "Doesn&#39;t ++i increment i at the end of the for statement?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422477700, "post_id": 28201665, "comment_id": 44770156, "body": "Yes but that will be evaluated after the first iteration, not before."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1422477727, "post_id": 28201665, "comment_id": 44770178, "body": "@RajS: The <code>++i</code> is executed after the body of the loop, before the loop condition is tested again."}, {"owner": {"reputation": 5, "user_id": 4057086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SQx0sPunC3o/AAAAAAAAAAI/AAAAAAAABhk/JWYMl67ZRvc/photo.jpg?sz=128", "display_name": "Raj S", "link": "https://stackoverflow.com/users/4057086/raj-s"}, "edited": false, "score": 0, "creation_date": 1422477865, "post_id": 28201665, "comment_id": 44770239, "body": "Okay, then how will s[0] = c contain hello if my first line of input is hello?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422477942, "post_id": 28201665, "comment_id": 44770276, "body": "No, it will contain <code>h</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4057086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SQx0sPunC3o/AAAAAAAAAAI/AAAAAAAABhk/JWYMl67ZRvc/photo.jpg?sz=128", "display_name": "Raj S", "link": "https://stackoverflow.com/users/4057086/raj-s"}, "edited": false, "score": 0, "creation_date": 1422478198, "post_id": 28202005, "comment_id": 44770432, "body": "If the inputs are   hello how are you  What will this function return?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 5, "user_id": 4057086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SQx0sPunC3o/AAAAAAAAAAI/AAAAAAAABhk/JWYMl67ZRvc/photo.jpg?sz=128", "display_name": "Raj S", "link": "https://stackoverflow.com/users/4057086/raj-s"}, "edited": false, "score": 0, "creation_date": 1422478235, "post_id": 28202005, "comment_id": 44770451, "body": "It will depend on the <code>lim</code> value."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 5, "user_id": 4057086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SQx0sPunC3o/AAAAAAAAAAI/AAAAAAAABhk/JWYMl67ZRvc/photo.jpg?sz=128", "display_name": "Raj S", "link": "https://stackoverflow.com/users/4057086/raj-s"}, "edited": false, "score": 0, "creation_date": 1422478505, "post_id": 28202005, "comment_id": 44770585, "body": "In that case the ouput will be <code>hello how are you\\n\\0</code> and some uninitialized bytes after that, of course, if the <code>s</code> array is big enough."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1422478158, "last_edit_date": 1422478158, "creation_date": 1422477640, "answer_id": 28202005, "question_id": 28201665, "link": "https://stackoverflow.com/questions/28201665/understand-a-c-program/28202005#28202005", "title": "Understand a C program", "body": "<p>What the code does is fetch one character from the input stream at a time, and then store the character at the <code>i</code>th position in the <code>s</code> array, then it increments <code>i</code>.</p>\n\n<p>It tests for two conditions, if <code>i == lim - 1</code> then the loop ends, and the <code>'\\0'</code> is appended at the <code>lim</code> position in the array, if a <code>'\\n'</code> was encounterd or the <code>EOF</code> end of file was reached, then the loop also ends.</p>\n\n<p>In case the last character read was <code>'\\n'</code> then it's appended at the <code>i</code>th position, and <code>i</code> is incremented, and then a <code>'\\0'</code> is appended at new <code>i</code>th position.</p>\n\n<p>If not, then just append <code>'\\0'</code> at the <code>i</code>th position, and return.</p>\n\n<p>No character will be read until the <kbd>Enter</kbd> key is pressed, so the loop will actually start running after the moment <kbd>Enter</kbd> is pressed, and the algorithm will do what I describe.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 4057086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SQx0sPunC3o/AAAAAAAAAAI/AAAAAAAABhk/JWYMl67ZRvc/photo.jpg?sz=128", "display_name": "Raj S", "link": "https://stackoverflow.com/users/4057086/raj-s"}, "edited": false, "score": 0, "creation_date": 1422478174, "post_id": 28202086, "comment_id": 44770419, "body": "If the inputs are   hello how are you  What will this function return?"}], "tags": [], "owner": {"reputation": 1928, "user_id": 4359075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8402c4ebac8daf5089467881855b75a1?s=128&d=identicon&r=PG&f=1", "display_name": "ElazarR", "link": "https://stackoverflow.com/users/4359075/elazarr"}, "is_accepted": false, "score": 3, "last_activity_date": 1422477972, "creation_date": 1422477972, "answer_id": 28202086, "question_id": 28201665, "link": "https://stackoverflow.com/questions/28201665/understand-a-c-program/28202086#28202086", "title": "Understand a C program", "body": "<p>Even if you type several characters and hit Enter the getchar() would return one character at a time for each invocation. </p>\n\n<p>So for the first iteration, <code>i=0</code> and <code>c='h'</code> --> <code>s[0]='h'</code>. On the second iteration <code>s[1]='e'</code>, on the third <code>s[2]='l'</code>, etc.</p>\n"}], "owner": {"reputation": 5, "user_id": 4057086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-SQx0sPunC3o/AAAAAAAAAAI/AAAAAAAABhk/JWYMl67ZRvc/photo.jpg?sz=128", "display_name": "Raj S", "link": "https://stackoverflow.com/users/4057086/raj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28202005, "answer_count": 2, "score": -6, "last_activity_date": 1422479342, "creation_date": 1422476508, "last_edit_date": 1422479342, "question_id": 28201665, "link": "https://stackoverflow.com/questions/28201665/understand-a-c-program", "title": "Understand a C program", "body": "<pre><code>int getline(char s[], int lim) {\n    int c, i;\n\n    for (i = 0 ; i &lt; lim - 1 &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != '\\n' ; ++i)\n        s[i] = c;\n    if (c == '\\n') {\n        s[i] = c;\n        ++i;\n     }\n     s[i] = '\\0';\n\n     return i;\n }\n</code></pre>\n\n<p>In the above function, how does the <code>s[]</code> work as the <code>getchar()</code> function gets one character at time even when you input a whole line to it.</p>\n\n<p>e.g. my first line of input is \"hello\" and it is six characters long including the null character at the end. </p>\n\n<p>In for loop in first cycle i is 1, then how is <code>s[1] = c</code> puts the line hello in <code>s[1]</code> as hello is 6 characters long and <code>s[1]</code> is only one character?</p>\n"}, {"tags": ["c", "linker"], "comments": [{"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 2, "creation_date": 1422476620, "post_id": 28201618, "comment_id": 44769529, "body": "I don&#39;t see why the variable being <code>volatile</code> would prevent it from being optimized away?"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1422476744, "post_id": 28201618, "comment_id": 44769603, "body": "volatile specify that the variable will be accessed outside of the compiler&#39;s knowledge so yes, a conforming compiler should <b>never</b> remove a volatile variable. It can&#39;t even reorder operations involving it."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1422476830, "post_id": 28201618, "comment_id": 44769653, "body": "@bolov I agree with your for the compiler, but can we make the same assumption for the linker?"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1422476952, "post_id": 28201618, "comment_id": 44769726, "body": "I never asked myself this question. I can only assume yes. In the sens of my previous comment, the definition of <i>compiler</i> includes the linker."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1422477273, "post_id": 28201618, "comment_id": 44769926, "body": "It may be possible it is a bug or a non-conforming behavior of your compiler toolchain."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1422477380, "post_id": 28201618, "comment_id": 44769984, "body": "@bolov, I agree, and that&#39;s what I want to point out before asking Analog Devices."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1422477457, "post_id": 28201618, "comment_id": 44770033, "body": "@NPE AFIK that&#39;s what <code>volatile</code> means: <b>don&#39;t touch</b>: don&#39;t optimize, don&#39;t reorder, don&#39;t remove (for the reasons described in my first comment)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1422478268, "post_id": 28201618, "comment_id": 44770471, "body": "That&#39;s not really what <code>volatile</code> means.  It means that when parsing code that accesses the variable, it must follow the exact semantics of the syntax, and cannot, for example, convert <code>int x = volatile_int + volatile_int;</code> into <code>int x = volatile_int &lt;&lt; 1;</code> -- it must keep two memory accesses to <code>volatile_int</code>.  But if the code never accesses the variable, the compiler (and linker) are under no obligation to do anything about keeping it."}, {"owner": {"reputation": 435637, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1422478610, "post_id": 28201618, "comment_id": 44770632, "body": "Just to clarify my earlier comment: when I say &quot;optimized away&quot; I specifically mean &quot;optimized away if it&#39;s unused&quot;."}, {"owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "edited": false, "score": 1, "creation_date": 1422479780, "post_id": 28201618, "comment_id": 44771200, "body": "the linker won&#39;t know about volatile. That information goes away once compiled.  You could use the tricks already mentioned or use a linker script with (toolchain dependend) commands to inline (and keep) an otherwise unused variable."}], "answers": [{"comments": [{"owner": {"reputation": 1068, "user_id": 492520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ddf2ce3e4bb2499b3759ed779c48813?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/492520/dmitri"}, "edited": false, "score": 0, "creation_date": 1461684191, "post_id": 28201975, "comment_id": 61305642, "body": "Addendum: this may be OK on a PC, but in an embedded context (where volatile is probably used most often), do not use print statements lightly. They can hog all kinds of resources, even if never executed. See <a href=\"https://mcuoneclipse.com/2013/04/19/why-i-dont-like-printf/\" rel=\"nofollow noreferrer\">mcuoneclipse.com/2013/04/19/why-i-dont-like-printf</a> ."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 1068, "user_id": 492520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ddf2ce3e4bb2499b3759ed779c48813?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/492520/dmitri"}, "edited": false, "score": 0, "creation_date": 1461775998, "post_id": 28201975, "comment_id": 61356420, "body": "@Dmitri Thanks for the interesting blog-post. I can well imagine that one might want to decide not to use <code>printf</code> and it certainly is a severe security flaw to use an untrusted format string. However, since the format string in the above example is a literal and the code won&#39;t be executed anyway, security, performance and stack-usage concerns will be moot. The only remaining valid concern is having to link <code>printf</code> in. If this dirty trick is <i>the only place</i> in your program where it is used, certainly don&#39;t do it. But if your application is using <code>printf</code> anyway, one extra usage won&#39;t hurt."}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 4, "last_activity_date": 1422477537, "creation_date": 1422477537, "answer_id": 28201975, "question_id": 28201618, "link": "https://stackoverflow.com/questions/28201618/under-which-circumstances-will-a-c-linker-eliminate-unused-volatile-symbols/28201975#28201975", "title": "Under which circumstances will a C Linker eliminate unused volatile symbols?", "body": "<p>You could make a dummy function with external linkage that uses the variable.</p>\n\n<pre><code>long\nhelp_us_keep_foo(void)\n{\n  return foo;\n}\n</code></pre>\n\n<p>Unless you are performing whole-program analysis, this will prevent <code>foo</code> from being eliminated.  If you <em>do</em> perform whole-program analysis, you can use a trick like the following.</p>\n\n<pre><code>int\nmain(int argc, char * * argv)\n{\n  if (getenv(\"PRINT_THE_VALUE_OF_FOO_AT_PROGRAM_STARTUP\"))\n    printf(\"Your hovercraft is full of eels, and foo is %ld\\n\", foo);\n  /* Do whatever your program has to do... */\n  return 0;\n}\n</code></pre>\n\n<p>I have been using a similar trick (inserting harmless print statements that test an exceptionally unlikely condition) in benchmarking code to make sure that the things I wanted to benchmark are not optimized away.</p>\n\n<p>If the situation permits it, you could use a less \u201cvisible\u201d trick like assigning <code>foo = foo</code> but since it is <code>volatile</code>, I'm not sure you can do this safely.</p>\n"}, {"tags": [], "owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "is_accepted": true, "score": 2, "last_activity_date": 1422713661, "last_edit_date": 1422713661, "creation_date": 1422479859, "answer_id": 28202552, "question_id": 28201618, "link": "https://stackoverflow.com/questions/28201618/under-which-circumstances-will-a-c-linker-eliminate-unused-volatile-symbols/28202552#28202552", "title": "Under which circumstances will a C Linker eliminate unused volatile symbols?", "body": "<p>If one standard for C is the K&amp;R book, there is not much to say about <code>volatile</code> except that it is mentioned a few times and is said to be related to optimization.</p>\n\n<p>In Appendix A.8.2 Type Specifiers, it says this:</p>\n\n<blockquote>\n  <p>Types may also be qualified, to indicate special properties of the\n  objects being declared.  type-qualifier: \n  const\n  volatile\n  Type qualifiers may appear with any type specifier. A const \n  object may be initialized, but not thereafter assigned to. \n  There are no implementation-dependent semantics for volatile objects.  The const\n  and volatile properties are new with the ANSI standard. The purpose of\n  const is to announce objects that may be placed in read-only memory,\n  and perhaps to increase opportunities for optimization. <strong>The purpose of</strong>\n  <strong>volatile is to force an implementation to suppress optimization that\n  could otherwise occur.</strong> For example, for a machine with memory-mapped\n  input/output, a pointer to a device register might be declared as a\n  pointer to volatile, in order to prevent the compiler from removing\n  apparently redundant references through the pointer. <strong>Except that it\n  should diagnose explicit attempts to change const objects, a compiler\n  may ignore these qualifiers.</strong></p>\n</blockquote>\n\n<p>Emphasis mine and note what the last paragraph says. It could suggest that the compiler can choose to ignore the <code>volatile</code> qualifier anyway.</p>\n\n<p>The compilers will allow volatile variable to remain un-optimized in my experience, even if they are never used.\nI'm not so sure about the linkers though. The standard says very little about the linking process.</p>\n\n<p>FWIW my general experience with commercial compilers for embedded targets, is that they sometimes do not comply fully with the standards. I've been using a TI compiler+linker toolchain lately, and let's just say it is really different from what I'm used to with the gcc+ld ports for ARM e.g. ...</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>No of course the K&amp;R book is not the standard. Let's have a look at a real standard, e.g. the ISO C99 standard obtained from <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf\" rel=\"nofollow\">here</a>, one paragraph in <code>Section 6.7.3 Type qualifiers, 6</code> says:</p>\n\n<blockquote>\n  <p>An object that has volatile-qualified type may be modified in ways unknown to the\n  implementation or have other unknown side effects. Therefore any expression referring\n  to such an object shall be evaluated strictly according to the rules of the abstract machine,\n  as described in 5.1.2.3. Furthermore, at every sequence point the value last stored in the\n  object shall agree with that prescribed by the abstract machine, except as modified by the\n  unknown factors mentioned previously.114) <strong>What constitutes an access to an object that\n  has volatile-qualified type is implementation-defined</strong>.</p>\n</blockquote>\n\n<p>Unfortunately I don't think this helps answer the question..</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 0, "accepted_answer_id": 28202552, "answer_count": 2, "score": 5, "last_activity_date": 1422713661, "creation_date": 1422476339, "last_edit_date": 1422478738, "question_id": 28201618, "link": "https://stackoverflow.com/questions/28201618/under-which-circumstances-will-a-c-linker-eliminate-unused-volatile-symbols", "title": "Under which circumstances will a C Linker eliminate unused volatile symbols?", "body": "<p>I am using a very specific toolchain (SHARC DSP Processor from Analog Devices) and I would like to get a better understanding of my compiler/linker. </p>\n\n<p>I have somewhere a volatile global variable: </p>\n\n<pre><code> volatile long foo;\n</code></pre>\n\n<p>This variable is not used and not referenced in my code but I want to preserve it in my final executable (don't ask me why, the sad truth is sad). </p>\n\n<p>I usually link my project with the <code>-e</code> option. It tells the linker to remove dead code from the executable. I initially thought no compilers would dare remove any global variable especially if these symbols are declared as volatile. Unfortunately it does. </p>\n\n<p>Then I found a very specific pragma <code>#pragma retain_name</code> which tell the linker to keep a symbol even though it is never used. </p>\n\n<p>I would like to know if such situation can be found in some ISO/POSIX standards. I always though neither the compiler or the linker would make any assumptions on volatile symbols. And thus, no compilers would ever try to remove a dead volatile variable or function from the final executable. </p>\n\n<p>Am I wrong?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "edited": false, "score": 0, "creation_date": 1422477177, "post_id": 28201482, "comment_id": 44769871, "body": "If you didn&#39;t already saw it you can take a tour here: <a href=\"http://stackoverflow.com/tour\">stackoverflow.com/tour</a> and see how this site works!"}], "answers": [{"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1422476133, "post_id": 28201522, "comment_id": 44769248, "body": "This is another example of why one should check the warnings that the compiler reports."}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1422476188, "post_id": 28201522, "comment_id": 44769289, "body": "@ScottHunter Yep :D, most times the compiler warnings/errors are pretty helpful."}, {"owner": {"reputation": 358, "user_id": 4504664, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FKtGj.jpg?s=128&g=1", "display_name": "MoreFoam", "link": "https://stackoverflow.com/users/4504664/morefoam"}, "edited": false, "score": 0, "creation_date": 1422481808, "post_id": 28201522, "comment_id": 44772216, "body": "Thanks for the help! I tried looking up the compiler error online, but I had trouble understanding what exactly was wrong."}, {"owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "reply_to_user": {"reputation": 358, "user_id": 4504664, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FKtGj.jpg?s=128&g=1", "display_name": "MoreFoam", "link": "https://stackoverflow.com/users/4504664/morefoam"}, "edited": false, "score": 0, "creation_date": 1422482068, "post_id": 28201522, "comment_id": 44772340, "body": "@MoreFoam You&#39;re welcome! Have a nice day :D (BTW: You are free to accept the answer how helped you the most and solved your problem! (<a href=\"http://meta.stackexchange.com/q/5234\">meta.stackexchange.com/q/5234</a>))"}], "tags": [], "owner": {"reputation": 55943, "user_id": 3933332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zuzev.png?s=128&g=1", "display_name": "Rizier123", "link": "https://stackoverflow.com/users/3933332/rizier123"}, "is_accepted": true, "score": 2, "last_activity_date": 1422476047, "creation_date": 1422476047, "answer_id": 28201522, "question_id": 28201482, "link": "https://stackoverflow.com/questions/28201482/why-does-my-float-print-out-as-0-even-though-i-input-13-5-for-it-using-scanf/28201522#28201522", "title": "Why does my float print out as 0 even though I input 13.5 for it using scanf?", "body": "<p>Just change this:</p>\n\n<pre><code>float price[10000];\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>float price;\n</code></pre>\n\n<p>Because you use it as a single variable and not as an array</p>\n"}, {"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 2, "last_activity_date": 1422476713, "last_edit_date": 1422476713, "creation_date": 1422476117, "answer_id": 28201546, "question_id": 28201482, "link": "https://stackoverflow.com/questions/28201482/why-does-my-float-print-out-as-0-even-though-i-input-13-5-for-it-using-scanf/28201546#28201546", "title": "Why does my float print out as 0 even though I input 13.5 for it using scanf?", "body": "<p>You have declared <code>price</code> as an array you need to do it this way</p>\n\n<pre><code>int num, month, day, year;\nfloat price[10000];\n\n\nprintf(\"Enter item number: \\n\");\nscanf(\"%d\", &amp;num);\nprintf(\"Enter unit price: \\n\");\nscanf(\"%f\", &amp;price[0]); /* &lt;---- it's not &amp;price it's &amp;price[0] */\nprintf(\"Enter purchase date (mm/dd/yyyy): \\n\");\nscanf(\"%d/%d/%d\", &amp;month, &amp;day, &amp;year);\n\nprintf(\"Item\\t\\tUnit\\t\\tPurchase\\n\");\nprintf(\"    \\t\\tPrice\\t\\tDate\\n\");\nprintf(\"%d      \", num);\nprintf(\"$%.2f     \", price[0]); /* &lt;---- it's not price it's price[0] */\nprintf(\"      %d/%d/%d\\n\", month, day, year);\nreturn 0;\n</code></pre>\n\n<p>you have to store the value in the first element of the array, and then print the first element too, i.e. <code>price[0]</code>.</p>\n\n<p>If you just want to read a single value, then you don't need to declare <code>price</code> as an array, so this would be the solution</p>\n\n<pre><code>int num, month, day, year;\nfloat price/* [10000] it doesn't need to be an array */;\n\nprintf(\"Enter item number: \\n\");\nscanf(\"%d\", &amp;num);\nprintf(\"Enter unit price: \\n\");\nscanf(\"%f\", &amp;price);\nprintf(\"Enter purchase date (mm/dd/yyyy): \\n\");\nscanf(\"%d/%d/%d\", &amp;month, &amp;day, &amp;year);\n\nprintf(\"Item\\t\\tUnit\\t\\tPurchase\\n\");\nprintf(\"    \\t\\tPrice\\t\\tDate\\n\");\nprintf(\"%d      \", num);\nprintf(\"$%.2f     \", price);\nprintf(\"      %d/%d/%d\\n\", month, day, year);\nreturn 0;\n</code></pre>\n\n<p>You was printing the address to the first element of the array instead of the value at that address, and it was being converted to <code>unsigned int</code> or <code>unsigned long int</code>, so when you used the <code>\"%f\"</code> specifier, it was printing <code>0</code>.</p>\n\n<p><strong>In both cases</strong>:</p>\n\n<p>To prevent this kind of mistake, you should turn your compilers warnings ON, if using <code>gcc</code>\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcc -Wall -Wextra -Werror ${SOURCE_FILES} -o ${OUTPUT_FILE}\n</code></pre>\n\n<p>would do it.</p>\n\n<p>And also, on invalid input, your program will have undefined behavior, you need to check that <code>scanf()</code> did actually read the value you instructed it to read, that is achieved by checking the return value from <code>scanf()</code> which equals the number of matched items, in your case</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>if (scanf(\"%d\", num) != 1)\n    errorInputWasInvalid();\n</code></pre>\n\n<p>since you are requesting <code>1</code> item, then <code>scanf()</code> has to return <code>1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9978, "user_id": 2986537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff296a622eb6993b28017005d1f7e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Razib", "link": "https://stackoverflow.com/users/2986537/razib"}, "is_accepted": false, "score": 4, "last_activity_date": 1422476403, "creation_date": 1422476403, "answer_id": 28201637, "question_id": 28201482, "link": "https://stackoverflow.com/questions/28201482/why-does-my-float-print-out-as-0-even-though-i-input-13-5-for-it-using-scanf/28201637#28201637", "title": "Why does my float print out as 0 even though I input 13.5 for it using scanf?", "body": "<p>You can not insert array value like this - </p>\n\n<pre><code>scanf(\"%f\", &amp;price);\n</code></pre>\n\n<p>Use a for loop to insert values into the array price -</p>\n\n<pre><code>for(i=0; i&lt;sizeWhatYouWant; i++){\n scanf(\"%f\", &amp;price[i]);\n}\n</code></pre>\n\n<p>Or just change the declaration <code>float price[10000]</code> to -</p>\n\n<pre><code>float price;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1422476419, "creation_date": 1422476419, "answer_id": 28201640, "question_id": 28201482, "link": "https://stackoverflow.com/questions/28201482/why-does-my-float-print-out-as-0-even-though-i-input-13-5-for-it-using-scanf/28201640#28201640", "title": "Why does my float print out as 0 even though I input 13.5 for it using scanf?", "body": "<p>There are two things to notice.</p>\n\n<ol>\n<li><p>change <code>float price[10000];</code> to <code>float price;</code> as you'll be using only a single <code>float</code> variable, so you don't need an array.</p></li>\n<li><p>You need to check the return value of <code>scanf()</code> to ensure proper input.</p></li>\n</ol>\n\n<p>Also, as a note, you might want to initialize the local variables, as they are not automatically initialized.</p>\n"}], "owner": {"reputation": 358, "user_id": 4504664, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FKtGj.jpg?s=128&g=1", "display_name": "MoreFoam", "link": "https://stackoverflow.com/users/4504664/morefoam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1357, "favorite_count": 0, "accepted_answer_id": 28201522, "answer_count": 4, "score": 6, "last_activity_date": 1438317822, "creation_date": 1422475923, "last_edit_date": 1438317822, "question_id": 28201482, "link": "https://stackoverflow.com/questions/28201482/why-does-my-float-print-out-as-0-even-though-i-input-13-5-for-it-using-scanf", "title": "Why does my float print out as 0 even though I input 13.5 for it using scanf?", "body": "<p>I'm having trouble figuring out why my float variable keeps printing out 0 when I input it as a number.</p>\n\n<p>Code:</p>\n\n<pre><code>int num, month, day, year;\nfloat price[10000];\n\n\nprintf(\"Enter item number: \\n\");\nscanf(\"%d\", &amp;num);\nprintf(\"Enter unit price: \\n\");\nscanf(\"%f\", &amp;price);\nprintf(\"Enter purchase date (mm/dd/yyyy): \\n\");\nscanf(\"%d/%d/%d\", &amp;month, &amp;day, &amp;year);\n\nprintf(\"Item\\t\\tUnit\\t\\tPurchase\\n\");\nprintf(\"    \\t\\tPrice\\t\\tDate\\n\");\nprintf(\"%d      \", num);\nprintf(\"$%.2f     \", price); \nprintf(\"      %d/%d/%d\\n\", month, day, year);\nreturn 0;\n</code></pre>\n\n<p>I input 555 for my item number, 13.5 for my price, and 10/24/2010 for my date.\nWhen I did this it printed out that my price was $0.00. It does this for any number I input. Why?</p>\n"}, {"tags": ["c", "windows", "gcc", "cygwin", "configure"], "comments": [{"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1422473548, "post_id": 28200581, "comment_id": 44767825, "body": "Run the installer again and make sure you select the gcc package.  It does not come with it by default."}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1422474114, "post_id": 28200581, "comment_id": 44768099, "body": "Are you attempting to do this from a VS command prompt?  It appears that it is the linker that is failing due to not being able to find a library."}, {"owner": {"reputation": 11, "user_id": 2959013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d0f4c2995dc613dcc62d84501671bb?s=128&d=identicon&r=PG&f=1", "display_name": "wasmith92", "link": "https://stackoverflow.com/users/2959013/wasmith92"}, "edited": false, "score": 0, "creation_date": 1422475792, "post_id": 28200581, "comment_id": 44769042, "body": "Have run the installer multiple times with install selected on development tools, but doesn&#39;t appear to be installing gcc. Currently trying again with all packages selected. Running this in cygwin. I see that it isn&#39;t finding the library but I&#39;m not sure why."}, {"owner": {"reputation": 825, "user_id": 1521805, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YdwEh.jpg?s=128&g=1", "display_name": "pak", "link": "https://stackoverflow.com/users/1521805/pak"}, "edited": false, "score": 1, "creation_date": 1422477137, "post_id": 28200581, "comment_id": 44769842, "body": "If it doesn&#39;t install with gcc selected by itself, I can&#39;t see how it would install if you select everything, which is extreme overkill.  You might try selecting some alternate mirrors."}, {"owner": {"reputation": 11, "user_id": 2959013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d0f4c2995dc613dcc62d84501671bb?s=128&d=identicon&r=PG&f=1", "display_name": "wasmith92", "link": "https://stackoverflow.com/users/2959013/wasmith92"}, "edited": false, "score": 0, "creation_date": 1422524471, "post_id": 28200581, "comment_id": 44786902, "body": "Yeah, even with everything selected, it wasn&#39;t installing properly. It was a problem with the mirror. I used a different mirror and selected only development tools, it has properly installed now and configure is working. Cheers."}], "answers": [{"tags": [], "owner": {"reputation": 1819, "user_id": 2522849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjZiO.jpg?s=128&g=1", "display_name": "DrumM", "link": "https://stackoverflow.com/users/2522849/drumm"}, "is_accepted": false, "score": 0, "last_activity_date": 1571227602, "creation_date": 1571227602, "answer_id": 58412927, "question_id": 28200581, "link": "https://stackoverflow.com/questions/28200581/cygwin-c-compiler-cannot-create-executables/58412927#58412927", "title": "cygwin: C compiler cannot create executables", "body": "<p>Run the native tool from command prompt, e.g.:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gBltY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gBltY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 2959013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d0f4c2995dc613dcc62d84501671bb?s=128&d=identicon&r=PG&f=1", "display_name": "wasmith92", "link": "https://stackoverflow.com/users/2959013/wasmith92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2217, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571227602, "creation_date": 1422472686, "question_id": 28200581, "link": "https://stackoverflow.com/questions/28200581/cygwin-c-compiler-cannot-create-executables", "title": "cygwin: C compiler cannot create executables", "body": "<p>When trying to run ./configure in cygwin, I get the following error:</p>\n\n<blockquote>\n<pre><code>Wayne@Wayne-PC /cygdrive/c/users/wayne/documents/Minuit2-5.34.14\n$ ./configure\nchecking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for a thread-safe mkdir -p... /usr/bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... no\nchecking for gcc... no\nchecking for cc... no\nchecking for cl.exe... cl.exe\nchecking for C compiler default output file name...\nconfigure: error: in `/cygdrive/c/users/wayne/documents/Minuit2-5.34.14':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details.\n</code></pre>\n</blockquote>\n\n<p>Note that I have installed every part of cygwin but there appears to be no gcc (I thought this is included?), so I added the VS12.0 directory to #Path for cl.exe instead.</p>\n\n<p>Here is the everything in config.log:</p>\n\n<blockquote>\n<pre><code>This file contains any messages produced by compilers while\nrunning configure, to aid debugging if configure makes a mistake.\n\nIt was created by configure, which was\ngenerated by GNU Autoconf 2.63.  Invocation command line was\n\n  $ ./configure \n\n## --------- ##\n## Platform. ##\n## --------- ##\n\nhostname = Wayne-PC\nuname -m = i686\nuname -r = 1.7.33-2(0.280/5/3)\nuname -s = CYGWIN_NT-6.3-WOW64\nuname -v = 2014-11-13 15:45\n\n/usr/bin/uname -p = unknown\n/bin/uname -X     = unknown\n\n/bin/arch              = i686\n/usr/bin/arch -k       = unknown\n/usr/convex/getsysinfo = unknown\n/usr/bin/hostinfo      = unknown\n/bin/machine           = unknown\n/usr/bin/oslevel       = unknown\n/bin/universe          = unknown\n\nPATH: /usr/local/bin\nPATH: /usr/bin\nPATH: /cygdrive/c/Program Files (x86)/Intel/iCLS Client\nPATH: /cygdrive/c/Program Files/Intel/iCLS Client\nPATH: /cygdrive/c/WINDOWS/system32\nPATH: /cygdrive/c/WINDOWS\nPATH: /cygdrive/c/WINDOWS/System32/Wbem\nPATH: /cygdrive/c/WINDOWS/System32/WindowsPowerShell/v1.0\nPATH: /cygdrive/c/Program Files/Intel/Intel(R) Management Engine Components/DAL\nPATH: /cygdrive/c/Program Files/Intel/Intel(R) Management Engine Components/IPT\nPATH: /cygdrive/c/Program Files (x86)/Intel/Intel(R) Management Engine Components/DAL\nPATH: /cygdrive/c/Program Files (x86)/Intel/Intel(R) Management Engine Components/IPT\nPATH: /cygdrive/c/Program Files (x86)/Intel/OpenCL SDK/2.0/bin/x86\nPATH: /cygdrive/c/Program Files (x86)/Intel/OpenCL SDK/2.0/bin/x64\nPATH: /cygdrive/c/Program Files (x86)/Windows Kits/8.1/Windows Performance Toolkit\nPATH: /cygdrive/c/Program Files/Microsoft SQL Server/110/Tools/Binn\nPATH: /usr/bin\nPATH: /cygdrive/c/Program Files (x86)/Microsoft Visual Studio 12.0/VC/bin\nPATH: /cygdrive/c/Program Files (x86)/Microsoft Visual Studio 12.0/VC/lib\n\n\n## ----------- ##\n## Core tests. ##\n## ----------- ##\n\nconfigure:2077: checking for a BSD-compatible install\nconfigure:2145: result: /usr/bin/install -c\nconfigure:2156: checking whether build environment is sane\nconfigure:2216: result: yes\nconfigure:2357: checking for a thread-safe mkdir -p\nconfigure:2396: result: /usr/bin/mkdir -p\nconfigure:2409: checking for gawk\nconfigure:2425: found /usr/bin/gawk\nconfigure:2436: result: gawk\nconfigure:2447: checking whether make sets $(MAKE)\nconfigure:2473: result: no\nconfigure:2600: checking for gcc\nconfigure:2630: result: no\nconfigure:2693: checking for cc\nconfigure:2740: result: no\nconfigure:2796: checking for cl.exe\nconfigure:2812: found /cygdrive/c/Program Files (x86)/Microsoft Visual Studio 12.0/VC/bin/cl.exe\nconfigure:2823: result: cl.exe\nconfigure:2859: checking for C compiler version\nconfigure:2867: cl.exe --version &gt;&amp;5\nMicrosoft (R) C/C++ Optimizing Compiler Version 18.00.21005.1 for x86\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ncl : Command line warning D9002 : ignoring unknown option '--version'\ncl : Command line error D8003 : missing source filename\nconfigure:2871: $? = 2\nconfigure:2878: cl.exe -v &gt;&amp;5\nMicrosoft (R) C/C++ Optimizing Compiler Version 18.00.21005.1 for x86\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ncl : Command line warning D9002 : ignoring unknown option '-v'\ncl : Command line error D8003 : missing source filename\nconfigure:2882: $? = 2\nconfigure:2889: cl.exe -V &gt;&amp;5\nMicrosoft (R) C/C++ Optimizing Compiler Version 18.00.21005.1 for x86\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ncl : Command line error D8004 : '/V' requires an argument\nconfigure:2893: $? = 2\nconfigure:2916: checking for C compiler default output file name\nconfigure:2938: cl.exe    conftest.c  &gt;&amp;5\nMicrosoft (R) C/C++ Optimizing Compiler Version 18.00.21005.1 for x86\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\nconftest.c\nMicrosoft (R) Incremental Linker Version 12.00.21005.1\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n/out:conftest.exe \nconftest.obj \nLINK : fatal error LNK1104: cannot open file 'LIBCMT.lib'\nconfigure:2942: $? = 2\nconfigure:2980: result: \nconfigure: failed program was:\n| /* confdefs.h.  */\n| #define PACKAGE_NAME \"\"\n| #define PACKAGE_TARNAME \"\"\n| #define PACKAGE_VERSION \"\"\n| #define PACKAGE_STRING \"\"\n| #define PACKAGE_BUGREPORT \"\"\n| #define PACKAGE \"Minuit2\"\n| #define VERSION \"5.34.14\"\n| /* end confdefs.h.  */\n| \n| int\n| main ()\n| {\n| \n|   ;\n|   return 0;\n| }\nconfigure:2986: error: in `/cygdrive/c/users/wayne/documents/Minuit2-5.34.14':\nconfigure:2989: error: C compiler cannot create executables\nSee `config.log' for more details.\n\n## ---------------- ##\n## Cache variables. ##\n## ---------------- ##\n\nac_cv_env_CCC_set=\nac_cv_env_CCC_value=\nac_cv_env_CC_set=\nac_cv_env_CC_value=\nac_cv_env_CFLAGS_set=\nac_cv_env_CFLAGS_value=\nac_cv_env_CPPFLAGS_set=\nac_cv_env_CPPFLAGS_value=\nac_cv_env_CPP_set=\nac_cv_env_CPP_value=\nac_cv_env_CXXCPP_set=\nac_cv_env_CXXCPP_value=\nac_cv_env_CXXFLAGS_set=\nac_cv_env_CXXFLAGS_value=\nac_cv_env_CXX_set=\nac_cv_env_CXX_value=\nac_cv_env_LDFLAGS_set=\nac_cv_env_LDFLAGS_value=\nac_cv_env_LIBS_set=\nac_cv_env_LIBS_value=\nac_cv_env_build_alias_set=\nac_cv_env_build_alias_value=\nac_cv_env_host_alias_set=\nac_cv_env_host_alias_value=\nac_cv_env_target_alias_set=\nac_cv_env_target_alias_value=\nac_cv_path_install='/usr/bin/install -c'\nac_cv_path_mkdir=/usr/bin/mkdir\nac_cv_prog_AWK=gawk\nac_cv_prog_ac_ct_CC=cl.exe\nac_cv_prog_make_make_set=no\n\n## ----------------- ##\n## Output variables. ##\n## ----------------- ##\n\nACLOCAL='${SHELL} /cygdrive/c/users/wayne/documents/Minuit2-5.34.14/config/missing --run\n</code></pre>\n  \n  <p>aclocal-1.11'\n      AMDEPBACKSLASH=''\n      AMDEP_FALSE=''\n      AMDEP_TRUE=''\n      AMTAR='${SHELL} /cygdrive/c/users/wayne/documents/Minuit2-5.34.14/config/missing --run\n  tar'\n      AR=''\n      AUTOCONF='${SHELL} /cygdrive/c/users/wayne/documents/Minuit2-5.34.14/config/missing --run\n  autoconf'\n      AUTOHEADER='${SHELL} /cygdrive/c/users/wayne/documents/Minuit2-5.34.14/config/missing --run\n  autoheader'\n      AUTOMAKE='${SHELL} /cygdrive/c/users/wayne/documents/Minuit2-5.34.14/config/missing --run\n  automake-1.11'\n      AWK='gawk'\n      CC='cl.exe'\n      CCDEPMODE=''\n      CFLAGS=''\n      CPP=''\n      CPPFLAGS=''\n      CXX=''\n      CXXCPP=''\n      CXXDEPMODE=''\n      CXXFLAGS=''\n      CXX_LIB_PATH=''\n      CYGPATH_W='cygpath -w'\n      DEFS=''\n      DEPDIR=''\n      DSYMUTIL=''\n      DUMPBIN=''\n      ECHO_C=''\n      ECHO_N='-n'\n      ECHO_T=''\n      EGREP=''\n      EXEEXT=''\n      FGREP=''\n      GMAKE=''\n      GREP=''\n      INSTALL_DATA='${INSTALL} -m 644'\n      INSTALL_PROGRAM='${INSTALL}'\n      INSTALL_SCRIPT='${INSTALL}'\n      INSTALL_STRIP_PROGRAM='$(install_sh) -c -s'\n      LD=''\n      LDFLAGS=''\n      LIBOBJS=''\n      LIBS=''\n      LIBSTDCPP=''\n      LIBTOOL=''\n      LIPO=''\n      LN_S=''\n      LTLIBOBJS=''\n      MAKEINFO='${SHELL} /cygdrive/c/users/wayne/documents/Minuit2-5.34.14/config/missing --run\n  makeinfo'\n      MKDIR_P='/usr/bin/mkdir -p'\n      NM=''\n      NMEDIT=''\n      OBJDUMP=''\n      OBJEXT=''\n      OPENMP_CXXFLAGS=''\n      OTOOL64=''\n      OTOOL=''\n      PACKAGE='Minuit2'\n      PACKAGE_BUGREPORT=''\n      PACKAGE_NAME=''\n      PACKAGE_STRING=''\n      PACKAGE_TARNAME=''\n      PACKAGE_VERSION=''\n      PATH_SEPARATOR=':'\n      RANLIB=''\n      SED=''\n      SET_MAKE='MAKE=make'\n      SHELL='/bin/sh'\n      STRIP=''\n      VERSION='5.34.14'\n      ac_ct_CC='cl.exe'\n      ac_ct_CXX=''\n      ac_ct_DUMPBIN=''\n      am__EXEEXT_FALSE=''\n      am__EXEEXT_TRUE=''\n      am__fastdepCC_FALSE=''\n      am__fastdepCC_TRUE=''\n      am__fastdepCXX_FALSE=''\n      am__fastdepCXX_TRUE=''\n      am__include=''\n      am__isrc=''\n      am__leading_dot='.'\n      am__quote=''\n      am__tar='${AMTAR} chof - \"$$tardir\"'\n      am__untar='${AMTAR} xf -'\n      bindir='${exec_prefix}/bin'\n      build=''\n      build_alias=''\n      build_cpu=''\n      build_os=''\n      build_vendor=''\n      datadir='${datarootdir}'\n      datarootdir='${prefix}/share'\n      docdir='${datarootdir}/doc/${PACKAGE}'\n      dvidir='${docdir}'\n      exec_prefix='NONE'\n      host=''\n      host_alias=''\n      host_cpu=''\n      host_os=''\n      host_vendor=''\n      htmldir='${docdir}'\n      includedir='${prefix}/include'\n      infodir='${datarootdir}/info'\n      install_sh='${SHELL} /cygdrive/c/users/wayne/documents/Minuit2-5.34.14/config/install-sh'\n      libdir='${exec_prefix}/lib'\n      libexecdir='${exec_prefix}/libexec'\n      localedir='${datarootdir}/locale'\n      localstatedir='${prefix}/var'\n      lt_ECHO='echo'\n      mandir='${datarootdir}/man'\n      mkdir_p='/usr/bin/mkdir -p'\n      oldincludedir='/usr/include'\n      pdfdir='${docdir}'\n      pfk_cxx_lib_path=''\n      prefix='NONE'\n      program_transform_name='s,x,x,'\n      psdir='${docdir}'\n      sbindir='${exec_prefix}/sbin'\n      sharedstatedir='${prefix}/com'\n      sysconfdir='${prefix}/etc'\n      target_alias=''</p>\n\n<pre><code>## ----------- ##\n## confdefs.h. ##\n## ----------- ##\n\n#define PACKAGE_NAME \"\"\n#define PACKAGE_TARNAME \"\"\n#define PACKAGE_VERSION \"\"\n#define PACKAGE_STRING \"\"\n#define PACKAGE_BUGREPORT \"\"\n#define PACKAGE \"Minuit2\"\n#define VERSION \"5.34.14\"\n\nconfigure: exit 77\n</code></pre>\n</blockquote>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1422472620, "post_id": 28200443, "comment_id": 44767262, "body": "You could also build that mask from small enough constants and then use the code that you know works."}], "answers": [{"comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422472737, "post_id": 28200536, "comment_id": 44767330, "body": "<code>no loops or if statements</code>"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422472893, "post_id": 28200536, "comment_id": 44767423, "body": "Ok, missed that requirement. Updated my answer."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422473110, "post_id": 28200536, "comment_id": 44767565, "body": "<code>no logical operators</code>"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422475456, "post_id": 28200536, "comment_id": 44768857, "body": "Rightshifting signed integers is undefined behaviour."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422475608, "post_id": 28200536, "comment_id": 44768947, "body": "@abligh: Cite please."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422475691, "post_id": 28200536, "comment_id": 44768995, "body": "@JonathanWood see e.g. <a href=\"http://stackoverflow.com/questions/4009885/arithmetic-bit-shift-on-a-signed-integer\" title=\"arithmetic bit shift on a signed integer\">stackoverflow.com/questions/4009885/&hellip;</a> whilst I go find the bit (not) in the standard"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422475800, "post_id": 28200536, "comment_id": 44769049, "body": "@JonathanWood and the resultant vulnerabilities: <a href=\"https://www.securecoding.cert.org/confluence/display/seccode/INT13-C.+Use+bitwise+operators+only+on+unsigned+operands\" rel=\"nofollow noreferrer\">securecoding.cert.org/confluence/display/seccode/&hellip;</a>"}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422476008, "post_id": 28200536, "comment_id": 44769175, "body": "@abligh: Ok, thanks. That surprises me. I would always expect signed values to shift 1s into the highest order bits when the value is negative, and to shift 0s into the highest order bits when the value is positive. Wasn&#39;t aware some implementations might do otherwise."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 1, "creation_date": 1422476102, "post_id": 28200536, "comment_id": 44769230, "body": "@JonathanWood ISO/IEC 9899:TC3 6.5.7/5 &quot;The result of E1 &gt;&gt; E2 is E1 right-shifted E2 bit positions. If E1 has an unsigned type or if E1 has a signed type and a nonnegative value, the value of the result is the integral part of the quotient of E1 / 2E2. If E1 has a signed type and a negative value, the resulting value is implementation-defined.&quot;"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422476144, "post_id": 28200536, "comment_id": 44769253, "body": "@JonathanWood yep it surprised the hell out of me when I found it, and more so when I discovered it causes real bugs rather than being &quot;almost guaranteed&quot; to be an arithmetic shift right."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 1, "creation_date": 1422476278, "post_id": 28200536, "comment_id": 44769350, "body": "@abligh: But I&#39;m not seeing how that would affect the results of the code I posted, since it masks the bits I&#39;m interested in."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422476409, "post_id": 28200536, "comment_id": 44769413, "body": "@JonathanWood simply because UB means that (-1 &gt;&gt; 8) could evaluate to 0 - UB is UB - (and thus the answer would be wrong)."}], "tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 2, "last_activity_date": 1422472851, "last_edit_date": 1422472851, "creation_date": 1422472539, "answer_id": 28200536, "question_id": 28200443, "link": "https://stackoverflow.com/questions/28200443/bit-wise-operators/28200536#28200536", "title": "Bit wise operators", "body": "<p>I don't know why you are ANDing your values with 1. What is the purpose of that?</p>\n\n<p>This code is untested, but I would do something along the lines of the following.</p>\n\n<pre><code>int allEvenBits(int x) {\n    return (x &amp; 0x55 == 0x55) &amp;&amp;\n        ((x &gt;&gt; 8) &amp; 0x55 == 0x55) &amp;&amp;\n        ((x &gt;&gt; 16) &amp; 0x55 == 0x55) &amp;&amp;\n        ((x &gt;&gt; 24) &amp; 0x55 == 0x55);\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422472751, "post_id": 28200555, "comment_id": 44767340, "body": "<code>no loops or if statements</code>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422472861, "post_id": 28200555, "comment_id": 44767409, "body": "@Lashane Where do you see a loop or <code>if</code> statement in my answer?  I just suggested changing an operator."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422472895, "post_id": 28200555, "comment_id": 44767431, "body": "<code>d = ((x&gt;&gt;24) &amp; mask) &amp;&amp; 1;</code> this is <code>if</code>, just short form, and actually wrong according to requirements to test that <i>all even</i> bits are 1"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422473002, "post_id": 28200555, "comment_id": 44767506, "body": "@Lashane That&#39;s <i>not</i> <code>if</code>... it&#39;s logical AND, returning 1 when true and 0 when false."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 1, "creation_date": 1422473078, "post_id": 28200555, "comment_id": 44767547, "body": "<code>no logical operators</code>"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422473172, "post_id": 28200555, "comment_id": 44767592, "body": "also, logical and returns <code>non-zero</code> if true, it could be 0xff, or 0x80"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1422473451, "post_id": 28200555, "comment_id": 44767770, "body": "@Lashane Logical AND is actually required to return 1 for true."}, {"owner": {"reputation": 43, "user_id": 4504469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634880f49ed4a6174d5cf42f7b901304?s=128&d=identicon&r=PG&f=1", "display_name": "rcbranham", "link": "https://stackoverflow.com/users/4504469/rcbranham"}, "edited": false, "score": 0, "creation_date": 1422476327, "post_id": 28200555, "comment_id": 44769369, "body": "Thanks a ton for all the help. I did not catch that the &amp;1 was only checking that first bit."}], "tags": [], "owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "is_accepted": true, "score": 2, "last_activity_date": 1422474782, "last_edit_date": 1422474782, "creation_date": 1422472614, "answer_id": 28200555, "question_id": 28200443, "link": "https://stackoverflow.com/questions/28200443/bit-wise-operators/28200555#28200555", "title": "Bit wise operators", "body": "<p>When you do, for example, this:</p>\n\n<pre><code>d = ((x&gt;&gt;24) &amp; mask)&amp;1;\n</code></pre>\n\n<p>..you're actually checking whether the lowest bit (with value 1) is set, not whether any of the the mask bits are set... since the <code>&amp;1</code> at the end bitwise ANDs the result of the rest with <code>1</code>.  If you change the <code>&amp;1</code> to <code>== mask</code>, you'll instead get <code>1</code> when all of the bits set in <code>mask</code> are set in <code>(x&gt;&gt;24)</code>, as intended.  And of course, the same problem exists for the other similar lines as well.</p>\n\n<p>If you can't use comparisons like <code>==</code> or <code>!=</code> either, then you'll need to shift all the interesting bits into the same position, then AND them together and with a mask to eliminate the other bit positions.  In two steps, this could be:</p>\n\n<pre><code>/* get bits that are set in every byte of x */\nx = (x &gt;&gt; 24) &amp; (x &gt;&gt; 16) &amp; (x &gt;&gt; 8) &amp; x;\n/* 1 if all of bits 0, 2, 4 and 6 are set */\nreturn (x &gt;&gt; 6) &amp; (x &gt;&gt; 4) &amp; (x &gt;&gt; 2) &amp; x &amp; 1;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 1, "creation_date": 1422475415, "post_id": 28200588, "comment_id": 44768833, "body": "Rightshifting signed integers is undefined behaviour."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422493289, "post_id": 28200588, "comment_id": 44776342, "body": "@abligh actually it is <i>implementation dependent</i>, in any case - there is no difference for this code whether sign bit will be promoted or not"}], "tags": [], "owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "is_accepted": false, "score": 0, "last_activity_date": 1422472699, "creation_date": 1422472699, "answer_id": 28200588, "question_id": 28200443, "link": "https://stackoverflow.com/questions/28200443/bit-wise-operators/28200588#28200588", "title": "Bit wise operators", "body": "<p>the main problem in your code that you're doing &amp;1, so you take first 8 bits from number, mask them with 0x55 and them use only 1st bit, which is wrong</p>\n\n<p>consider straightforward approach:</p>\n\n<pre><code>int evenBitsIn8BitNumber(int a) {\n    return (a &amp; (a&gt;&gt;2) &amp; (a&gt;&gt;4) &amp; (a&gt;&gt;6)) &amp; 1;\n}\n\nint allEvenBits(int a) {\n    return evenBitsIn8BitNumber(a) &amp;\n        evenBitsIn8BitNumber(a&gt;&gt;8) &amp;\n        evenBitsIn8BitNumber(a&gt;&gt;16) &amp;\n        evenBitsIn8BitNumber(a&gt;&gt;24);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "is_accepted": false, "score": 1, "last_activity_date": 1422472818, "creation_date": 1422472818, "answer_id": 28200630, "question_id": 28200443, "link": "https://stackoverflow.com/questions/28200443/bit-wise-operators/28200630#28200630", "title": "Bit wise operators", "body": "<p>Say you are checking the first 4 least significant digits, the even ones would make <code>1010</code>. Now you should AND this with the first 4 bits of the number you're checking against. All 1's should remain there. So the test would be <code>((number &amp; mask) == mask)</code> (mask is 1010) for the 4 least significant bits, you do this in blocks of 4bits (or you can use 8 since you are allowed).</p>\n"}, {"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1422484779, "last_edit_date": 1422484779, "creation_date": 1422475373, "answer_id": 28201332, "question_id": 28200443, "link": "https://stackoverflow.com/questions/28200443/bit-wise-operators/28201332#28201332", "title": "Bit wise operators", "body": "<p>If you aren't allowed to use constants larger than <code>0xff</code> and your existing program works, how about replacing:</p>\n\n<pre><code>int all_even_bits = 0x55555555;\n</code></pre>\n\n<p>by:</p>\n\n<pre><code>int all_even_bits = 0x55;\nall_even_bits |= all_even_bits &lt;&lt; 8;  /* it's now 0x5555 */\nall_even_bits |= all_even_bits &lt;&lt; 16; /* it's now 0x55555555 */\n</code></pre>\n\n<p>Some of the other answers here right shift signed integers (i.e. <code>int</code>) which is undefined behaviour.</p>\n\n<p>An alternative route is:</p>\n\n<pre><code>int allevenbitsone(unsigned int a)\n{\n    a &amp;= a&gt;&gt;16; /* superimpose top 16 bits on bottom */ \n    a &amp;= a&gt;&gt;8;  /* superimpose top 8 bits on bottom */\n    a &amp;= a&gt;&gt;4;  /* superimpose top 4 bits on bottom */\n    a &amp;= a&gt;&gt;2;  /* and down to last 2 bits */\n    return a&amp;1; /* return &amp; of even bits */\n}\n</code></pre>\n\n<p>What this is doing is and-ing together the even 16 bits into bit 0, and the odd 16 bits into bit 1, then returning bit 0.</p>\n"}], "owner": {"reputation": 43, "user_id": 4504469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634880f49ed4a6174d5cf42f7b901304?s=128&d=identicon&r=PG&f=1", "display_name": "rcbranham", "link": "https://stackoverflow.com/users/4504469/rcbranham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 2, "accepted_answer_id": 28200555, "answer_count": 5, "score": 3, "last_activity_date": 1422484872, "creation_date": 1422472192, "last_edit_date": 1422484872, "question_id": 28200443, "link": "https://stackoverflow.com/questions/28200443/bit-wise-operators", "title": "Bit wise operators", "body": "<p>am having a little trouble with this function of mine. We are supposed to use bit wise operators only (that means no logical operators and no loops or if statements) and we aren't allowed to use a constant bigger than 0xFF.</p>\n\n<p>I got my function to work, but it uses a huge constant. When I try to implement it with smaller numbers and shifting, I can't get it to work and I'm not sure why.</p>\n\n<p>The function is supposed to check all of the even bits in a given integer, and return 1 if they are all set to 1.</p>\n\n<p>Working code </p>\n\n<pre><code> int allEvenBits(int x) {\n /* implements a check for all even-numbered bits in the word set to 1 */\n /* if yes, the program outputs 1 WORKING */\n\n int all_even_bits = 0x55555555;\n return (!((x &amp; all_even_bits) ^ all_even_bits)); \n }\n</code></pre>\n\n<p>Trying to implement with a smaller constant and shifts</p>\n\n<pre><code>int allEvenBits(int x) {\n/* implements a check for all even-numbered bits in the word set to 1 */\n/* if yes, the program outputs 1 WORKING */\n\nint a, b, c, d, e = 0;\nint mask = 0x55;\n\n/* first 8 bits */\na = (x &amp; mask)&amp;1;\n\n/* second eight bits */\nb = ((x&gt;&gt;8) &amp; mask)&amp;1;\n\n/* third eight bits */\nc = ((x&gt;&gt;16) &amp; mask)&amp;1;\n\n/* fourth eight bits */\nd = ((x&gt;&gt;24) &amp; mask)&amp;1;\ne = a &amp; b &amp; c &amp; d;\nreturn e;\n}\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c", "multithreading", "unix", "fork"], "comments": [{"owner": {"reputation": 12011, "user_id": 641451, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/IcOuq.jpg?s=128&g=1", "display_name": "mgarciaisaia", "link": "https://stackoverflow.com/users/641451/mgarciaisaia"}, "edited": false, "score": 2, "creation_date": 1422472086, "post_id": 28200350, "comment_id": 44766954, "body": "See <a href=\"http://stackoverflow.com/questions/1716296/why-does-printf-not-flush-after-the-call-unless-a-newline-is-in-the-format-strin\">this question</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422472147, "post_id": 28200350, "comment_id": 44766995, "body": "sorry, but where is <code>fork()</code>?"}, {"owner": {"reputation": 39, "user_id": 1903907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc560dfc0b9a9fcf4620aa64be88e977?s=128&d=identicon&r=PG", "display_name": "ccb3", "link": "https://stackoverflow.com/users/1903907/ccb3"}, "edited": false, "score": 0, "creation_date": 1422472176, "post_id": 28200350, "comment_id": 44767012, "body": "In the main function"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 3, "last_activity_date": 1422472741, "last_edit_date": 1422472741, "creation_date": 1422472285, "answer_id": 28200465, "question_id": 28200350, "link": "https://stackoverflow.com/questions/28200350/printf-after-unix-fork/28200465#28200465", "title": "printf() after UNIX fork()", "body": "<p>Very likely stdio buffering gets in the way. To make stdout unbuffered, use</p>\n\n<pre><code>setvbuf(stdout, 0, _IONBF, 0);\n</code></pre>\n\n<p>once before starting I/O. This is a C89 function, declared in <code>&lt;stdio.h&gt;</code>. Your <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/setvbuf.html\" rel=\"nofollow\">manual page</a> has all the details.</p>\n"}, {"tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1422472564, "creation_date": 1422472564, "answer_id": 28200545, "question_id": 28200350, "link": "https://stackoverflow.com/questions/28200350/printf-after-unix-fork/28200545#28200545", "title": "printf() after UNIX fork()", "body": "<p>You are writing out the input prompt \">\" from one thread and the server statements from another.</p>\n\n<p>To make the UI you want, you will need to invest development in curses (or termcap) technology, and either thread synchronization or select() system call to read from both keyboard and socket.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1422472822, "creation_date": 1422472822, "answer_id": 28200631, "question_id": 28200350, "link": "https://stackoverflow.com/questions/28200350/printf-after-unix-fork/28200631#28200631", "title": "printf() after UNIX fork()", "body": "<p>The double <code>&gt;</code> in your example output is not explained by the code you presented.  Possibly your other thread is also printing to <code>stdout</code>.</p>\n\n<p>The lack of a <code>&gt;</code> at the end is almost certainly because <code>stdout</code> is line-buffered by default, meaning it accumulates output until it receives a newline, and prints it one line at a time.  You could work around that by disabling buffering, as Jens suggested, or by calling <code>fflush(stdout)</code> after printing.</p>\n\n<p>Be aware, too, that your usage of <code>read()</code> is questionable.  It is not certain to read a whole message from the other side in one call, even if that message is less than the 512 bytes you specify.  Also, your loop will go into a spin if the other side closes the network connection, with every <code>read()</code> call immediately returning -1 without blocking.</p>\n"}], "owner": {"reputation": 39, "user_id": 1903907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc560dfc0b9a9fcf4620aa64be88e977?s=128&d=identicon&r=PG", "display_name": "ccb3", "link": "https://stackoverflow.com/users/1903907/ccb3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 28200465, "answer_count": 3, "score": 0, "last_activity_date": 1422472822, "creation_date": 1422471876, "last_edit_date": 1422472329, "question_id": 28200350, "link": "https://stackoverflow.com/questions/28200350/printf-after-unix-fork", "title": "printf() after UNIX fork()", "body": "<p>I'm working on a very basic client server communication service just to learn the concept.\nOn the server side I have a function that accepts connections and lets the client communicate with the server. Whenever a connected client sends a message to the server, it sends a responding message to the client.\nOn the client side I create one thread that listens to messages/responses from the server. This thread simply runs a loop that checks if read() returns more than 0 bytes if so it prints the message. The other threads handles user input and sending messages to the server.</p>\n\n<p>Now to the question: \nI have a few lines of code that listens to messages from the server</p>\n\n<pre><code>void readFromServer(int fileDescriptor)\n{\n    int nOfBytes;\n    char buffer[512];\n    while(1){\n        nOfBytes = read(fileDescriptor, buffer, 512);\n        if(nOfBytes &gt; 0)\n            printf(\"Server says: %s \\n\\n&gt;\", buffer);\n    }\n}\n</code></pre>\n\n<p>This means that when a message comes from the server I would like to represent it like this</p>\n\n<pre><code>&gt;Serever says: Something\n\n&gt;|\n</code></pre>\n\n<p>but for some reason what I get is this</p>\n\n<pre><code>&gt;&gt;Server says: Something\n\n|\n</code></pre>\n\n<p>(| pipeline represents the cursor in the console window)</p>\n\n<p>Does anyone know why this is? And is there any solution to this problem?</p>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT------------>\nThe fork() is done in the main function like this</p>\n\n<pre><code>int pid = fork();\nif(pid != 0)\n    readFromServer(sock);\n</code></pre>\n"}, {"tags": ["c", "bubble-sort"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1422471750, "post_id": 28200199, "comment_id": 44766774, "body": "what does the debugger say?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422471769, "post_id": 28200199, "comment_id": 44766783, "body": "Kindly use a debugger like <code>gdb</code> and try to step through the program."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1422472585, "post_id": 28200199, "comment_id": 44767244, "body": "<code>void bubbleSort(struct order *start)</code> : this Interface cannnot swap first element."}, {"owner": {"reputation": 1160, "user_id": 1848150, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eede751ed4bf75214f6ce5589d4fe22c?s=128&d=identicon&r=PG", "display_name": "lecardo", "link": "https://stackoverflow.com/users/1848150/lecardo"}, "edited": false, "score": 0, "creation_date": 1422472739, "post_id": 28200199, "comment_id": 44767331, "body": "i&#39;ve read up on the internet you can only change data elements of a link list and not the pointers with bubble sort?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1422472961, "post_id": 28200199, "comment_id": 44767477, "body": "You can perform a swap either by updating the <code>next</code> pointers or by swapping the data. If you choose to swap data, you may want to define the <code>list</code> structure separately from the <code>data</code> structure, so that the <code>list</code> structure has a pointer to the <code>data</code> structure."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1422480297, "post_id": 28200199, "comment_id": 44771448, "body": "If you use a double pointer (pointer to pointer to node), that is set to &amp;start or &amp;(node-&gt;next), then special code to handle updating start will not be needed. If you have node **ppnode = &amp;start, then to advance ppnode, you use ppnode = &amp;((*ppnode)-&gt;next);"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1422480569, "post_id": 28200199, "comment_id": 44771589, "body": "As a somewhat faster alternative to bubble sort, you could simply scan the list to find the pointer to the node with the largest value, then remove that node from the original list and insert it into the front of a new, initially empty list. Repeat this process until the original list is empty, and the new list contains all the nodes (in sorted order). For a large list, using a merge oriented sort would be much faster, but that&#39;s a totally different approach."}], "answers": [{"comments": [{"owner": {"reputation": 1160, "user_id": 1848150, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eede751ed4bf75214f6ce5589d4fe22c?s=128&d=identicon&r=PG", "display_name": "lecardo", "link": "https://stackoverflow.com/users/1848150/lecardo"}, "edited": false, "score": 0, "creation_date": 1422477362, "post_id": 28200347, "comment_id": 44769977, "body": "lets say using your example i want to swap a &amp; b around. if im currently at link A: id store the current address of a,b,c in temp variables. then using current-&gt;next-&gt; assign that to the address of A and the current address of a id point assign to the address of C"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 1160, "user_id": 1848150, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eede751ed4bf75214f6ce5589d4fe22c?s=128&d=identicon&r=PG", "display_name": "lecardo", "link": "https://stackoverflow.com/users/1848150/lecardo"}, "edited": false, "score": 0, "creation_date": 1422478053, "post_id": 28200347, "comment_id": 44770343, "body": "@Bobski I&#39;m not sure I understand. If you&#39;re at position <code>A</code>, you can&#39;t swap <code>A</code> and <code>B</code> without backing up and figuring out what points to <code>A</code>. If <code>A</code> is the very first item in the list, then presumably <code>start</code> points to <code>A</code>, and that causes the problem that BLUEPIXY commented on. To change what <code>start</code> points to, you need to pass <code>start</code> as a pointer-to-a-pointer, i.e. <code>bubbleSort(struct order **start)</code>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1422479742, "post_id": 28200347, "comment_id": 44771178, "body": "@rcgldr In context, adjacent is implied, but I agree that I should have been explicit, thanks."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 2, "creation_date": 1422479773, "post_id": 28200347, "comment_id": 44771194, "body": "Although this doesn&#39;t occur with bubble sort, if swapping two non-adjacent items, you change four next pointers. For example, A --&gt; B --&gt; C --&gt; D --&gt;E, and you swap B and D. A-&gt;next points to D instead of B. B-&gt;next points to E instead of C. C-&gt;next points to B instead of D. D-&gt;next points to B instead of E. If you keep track of what points to B and D, then if you swap X-&gt;B with Y-&gt;D, then swap B-&gt;next with D-&gt;next, the logic works with adjacent or non-adjacent items. Normally X and Y will be double pointers, to start of list and/or items in the list."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 0, "last_activity_date": 1422479115, "last_edit_date": 1422479115, "creation_date": 1422471872, "answer_id": 28200347, "question_id": 28200199, "link": "https://stackoverflow.com/questions/28200199/c-bubblesort-a-link-list/28200347#28200347", "title": "c bubblesort a link list", "body": "<p>Swapping two adjacent items in a singly-linked-list requires that you change three <code>next</code> pointers.</p>\n\n<p>If the order is <code>A --&gt; B --&gt; C --&gt; D</code> and you swap <code>B</code> with <code>C</code> to get <code>A --&gt; C --&gt; B --&gt; D</code> then</p>\n\n<p><code>A-&gt;next</code> needs to point to <code>C</code> instead of <code>B</code><br>\n<code>B-&gt;next</code> needs to point to <code>D</code> instead of <code>C</code><br>\n<code>C-&gt;next</code> needs to point to <code>B</code> instead of <code>D</code></p>\n"}, {"tags": [], "owner": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "is_accepted": false, "score": 0, "last_activity_date": 1422637848, "creation_date": 1422637848, "answer_id": 28241066, "question_id": 28200199, "link": "https://stackoverflow.com/questions/28200199/c-bubblesort-a-link-list/28241066#28241066", "title": "c bubblesort a link list", "body": "<p>This is a very slow thing you're trying to do - see this paper on <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=C168E4B02EED9EFC56FBCB7972C3A955?doi=10.1.1.31.9981&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow\">comparing ways to sort a linked list</a>.</p>\n\n<p>Currently, your algorithm will never terminate because in your while loop, you set <code>lptr = current</code>, but then test whether <code>current-&gt;next == lptr</code>.  This will never return true unless one of your list members points to itself.</p>\n\n<p>If you do have a definite use case to bubble sort the linked list, consider this:  The purpose of a linked list is that you access it by working sequentially from the list head to the item you want.  If your initial list head is not the smallest or the largest and you're only changing pointers, you need to keep track of where the head of the list is.</p>\n\n<p>I did think of a way to do it loosely based on yours, see below.  Sorry it's a bit messy - I'm not a C expert (hope the memory allocation is OK...) and I'm sure there are optimisations.  In particular I'm sure there are better ways to pass the headOfList pointer back to the <code>main</code> algorithm.  I've tested it for a number of 100 member lists of structs with some negative numbers.  I've left the code to generate them with random arrival times in <code>main()</code> so you can just paste this in where your old code was and run it.</p>\n\n<pre><code>processData *bubbleSort(processData *start)\n{\n  int swapped;\n  processData *current = start;\n  processData *lheadptr = start;\n  processData *previous = NULL;\n  processData *oldPrevButBigger;\n  processData *oldAfterThisPair;\n\n  /* Checking for empty list */\n   if (current == NULL)\n   {\n     printf(\"null \\n\");\n     return NULL;\n   }\n\n  do\n    {\n      swapped = 0;\n      current = lheadptr;\n      previous = NULL;\n\n      while (current-&gt;next) //Stop when current-&gt;next is null (i.e. end of list)\n        {\n          if (current-&gt;arrivalTime &gt; current-&gt;next-&gt;arrivalTime)\n            {\n              oldPrevButBigger = current;\n              oldAfterThisPair = current-&gt;next-&gt;next;\n              current = current-&gt;next;\n              current-&gt;next = oldPrevButBigger;\n              current-&gt;next-&gt;next = oldAfterThisPair;\n\n              if (!previous)\n                {\n                   //If no previous, this was the head of the list, so need to update\n                   lheadptr = current;\n                }\n              else\n                {\n                   // If there is a \"previous\", then we're not at head of list, so need\n                   // to update that pointer too\n                   previous-&gt;next = current;\n                }\n              swapped = 1;\n            }\n          previous = current;\n          current = current-&gt;next;\n        }\n    }\n    while (swapped);\n\n    return lheadptr;\n}\n\n\nint main()\n{\n\n\n   srand(time(NULL));\n   int NUM = 100;\n\n   processData* pointToLast = NULL;\n   int i;\n   processData orders[NUM];  \n\n   //Generate a list with random arrival times (last member of the list generated first\n   for (i = 0; i &lt; NUM; i++ )\n     {\n           orders[i].name = i;\n           orders[i].arrivalTime = rand()-1000000000;\n           orders[i].quanta = 500;\n           orders[i].next = pointToLast;\n       pointToLast = &amp;orders[i];\n    }\n\n\n   printf(\"List before\\n\");\n   printf(\"===========\\n\"); \n   for (i=0; i &lt; NUM; i++)\n   {\n             printf(\"%i;%i;%i\\n\", pointToLast-&gt;name, pointToLast-&gt;arrivalTime, pointToLast-&gt;quanta);\n        pointToLast = pointToLast-&gt;next;\n   }\n\n   processData* newListHead = bubbleSort(&amp;orders[NUM-1]);  \n\n   printf(\"List after\\n\");\n   printf(\"===========\\n\"); \n   for (i=0; i &lt; NUM; i++)\n   {\n             printf(\"%i;%i;%i\\n\", newListHead-&gt;name, newListHead-&gt;arrivalTime, newListHead-&gt;quanta);\n        newListHead = newListHead-&gt;next;\n   }\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1160, "user_id": 1848150, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/eede751ed4bf75214f6ce5589d4fe22c?s=128&d=identicon&r=PG", "display_name": "lecardo", "link": "https://stackoverflow.com/users/1848150/lecardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1422637848, "creation_date": 1422471346, "question_id": 28200199, "link": "https://stackoverflow.com/questions/28200199/c-bubblesort-a-link-list", "title": "c bubblesort a link list", "body": "<p>trying to get a function to run that will bubble sort a link list from smallest to largest number. I don't want the data to be moved around in the link list instead have the pointers be pointing elsewhere in case each link needs to hold a lot of data. </p>\n\n<p>In each link I have a INT arrivalTime field that will house a integer value. THis number determines where the link should be in the list.</p>\n\n<p>My program seems to hang at the moment, I'd appreciate if anyone could fix it up, Thanks</p>\n\n<p>bubble sort function</p>\n\n<pre><code>void bubbleSort(struct order *start)\n{\n  int swapped, i;\n  processData *current = start;\n  processData *temp;\n  struct order *lptr = NULL;\n\n  /* Checking for empty list */\n   if (current == NULL)\n    printf(\"null \\n\");\n\n\n  do\n    {\n      swapped = 0;\n      current = start;\n\n      while (current-&gt;next != lptr)\n        {\n      if (current-&gt;arrivalTime &gt; current-&gt;next-&gt;arrivalTime)\n            {\n          temp = current;\n          current = current-&gt;next;\n          current-&gt;next = temp;\n          swapped = 1;\n            }\n      current = current-&gt;next;\n        }\n      lptr = current;\n    }\n    while (swapped);\n}\n</code></pre>\n\n<p>structure of link list</p>\n\n<pre><code>struct order \n{\n  int name;\n  int arrivalTime;\n  int quanta;\n  struct order * next;\n};\ntypedef struct order processData;\n</code></pre>\n"}, {"tags": ["c", "regex", "text", "scanf", "text-parsing"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1422474935, "post_id": 28200183, "comment_id": 44768527, "body": "Dunno, but it&#39;s easy to find out. Just <code>printf(&quot;%s\\n&quot;,nextWord)</code> after every <code>fscanf</code>. Redirect the output to a couple of files and compare the files."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1422475211, "post_id": 28200183, "comment_id": 44768721, "body": "Also, in the working code, you can combine the two <code>fscanf</code> into one using this format string <code>&quot;%*[^a-zA-Z]%80[a-zA-Z]&quot;</code>. As I&#39;m writing this, it occurs to me that you may have a buffer overflow. The format string in the non-working code should be <code>&quot;%80s&quot;</code> to limit the word size to 80."}, {"owner": {"reputation": 343, "user_id": 3993234, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78f93d5680fee7ad7e0effb6a432e956?s=128&d=identicon&r=PG", "display_name": "Alexander Bolinsky", "link": "https://stackoverflow.com/users/3993234/alexander-bolinsky"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1422475614, "post_id": 28200183, "comment_id": 44768949, "body": "Thanks for the response. The change to &quot;%80s&quot; yields the same result"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1422475634, "post_id": 28200183, "comment_id": 44768961, "body": "No, you cannot safely combine the two <code>scanf()</code> calls into one.  The resulting behavior differs when the first edit descriptor does not match an input item."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1422475711, "post_id": 28200183, "comment_id": 44769005, "body": "@JohnBollinger Good point, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 3993234, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78f93d5680fee7ad7e0effb6a432e956?s=128&d=identicon&r=PG", "display_name": "Alexander Bolinsky", "link": "https://stackoverflow.com/users/3993234/alexander-bolinsky"}, "edited": false, "score": 0, "creation_date": 1422476459, "post_id": 28201350, "comment_id": 44769436, "body": "Oof, I had the wrong idea about the -w flag for grep, thank you for correcting that for me.  I went ahead and added code to include the trailing punctuation (see edit above) and I get the same result of 17."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 343, "user_id": 3993234, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78f93d5680fee7ad7e0effb6a432e956?s=128&d=identicon&r=PG", "display_name": "Alexander Bolinsky", "link": "https://stackoverflow.com/users/3993234/alexander-bolinsky"}, "edited": false, "score": 1, "creation_date": 1422476865, "post_id": 28201350, "comment_id": 44769683, "body": "Your logic is backward there.  I&#39;m positing that in many cases <code>nextWord</code> <i>already</i> has punctuation marks on one or both sides.  Adding more is not going to improve your matching.  Moreover, <code>strcat()</code> modifies its left argument, so you end up appending a whole string of punctuation marks.  And you also need to worry about punctuation on the left.  Why not just use your first approach, which works, and does a good job of expressing what you actually want?"}, {"owner": {"reputation": 343, "user_id": 3993234, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78f93d5680fee7ad7e0effb6a432e956?s=128&d=identicon&r=PG", "display_name": "Alexander Bolinsky", "link": "https://stackoverflow.com/users/3993234/alexander-bolinsky"}, "edited": false, "score": 0, "creation_date": 1422477215, "post_id": 28201350, "comment_id": 44769894, "body": "Thank you. I wasn&#39;t thinking clearly about what that code was doing. It makes a lot of sense now. I use my first approach, but I was just trying to understand why the second did not work. Thanks for clearing it up :)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1422551296, "post_id": 28201350, "comment_id": 44804137, "body": "neither of the two while loops is foolproof.  suggest inputting the file character by char using a state maching.  when a &#39;M&#39; is found change to second  state, looking for &#39;a&#39;, etc.  and at each failure, step back to the first state, using the current character.   repeat until EOF.  if a state is reached where the whole &#39;Mars&#39; string is found, then bump the counter."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1422552454, "post_id": 28201350, "comment_id": 44804804, "body": "@user3629249, what problem do you see with the first loop, other than the 80-character word-size limit?"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1422475919, "last_edit_date": 1422475919, "creation_date": 1422475431, "answer_id": 28201350, "question_id": 28200183, "link": "https://stackoverflow.com/questions/28200183/why-do-these-two-methods-of-counting-words-differ-significantly/28201350#28201350", "title": "Why do these two methods of counting words differ significantly?", "body": "<p>You are incorrect when you say that the command ...</p>\n\n<pre><code>$ grep -o -w 'Mars' TripToMars.txt | wc -w\n</code></pre>\n\n<p>... \"finds only instances of 'Mars' as a standalone word\", or at least that statement is misleading in context.  The command finds instances of \"Mars\" that are not part of a larger word, where a \"word\" is defined as a contiguous string of letters, digits, and/or underscores.  In particular, it will match \"Mars\" where it is followed by a punctuation mark, which conflicts with what you seem to be claiming.</p>\n\n<p>But what is the difference between your two scanning approaches? Well, this ...</p>\n\n<pre><code>while (fscanf(textToSearch, \"%*[^a-zA-Z]\"),\n        fscanf(textToSearch, \"%80[a-zA-Z]\", nextWord) &gt; 0) { /* ... */ }\n</code></pre>\n\n<p>... scans zero or more characters that are not Latin letters, ignoring whether any are matched and whether any input error occurs, then scans a contiguous sequence of up to 80 Latin letters, recording that sequence in the <code>nextWord</code> buffer.</p>\n\n<p>On the other hand, this ...</p>\n\n<pre><code>while(1) {\n    d = fscanf(textToSearch, \"%s\", nextWord);\n    if (d == EOF) break;\n}\n</code></pre>\n\n<p>... ignores leading whitespace, then scans the next contiguous string of non-whitespace into <code>nextWord</code>.</p>\n\n<p>The two differ significantly in what they do with characters that are neither Latin letters nor whitespace: the former ignores them, whereas the latter includes them in <code>nextWord</code>.  When you then compare <code>nextWord</code> with the string <code>\"Mars\"</code>, the latter misses on</p>\n\n<blockquote>\n  <p>Going to Mars.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>The name \"Mars\"</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Is there water on Mars?</p>\n</blockquote>\n\n<p>because the adjacent punctuation is included in the comparison.  Your text is quite likely to have many constructions similar to those, and your <code>grep</code> commands do not demonstrate otherwise.</p>\n"}], "owner": {"reputation": 343, "user_id": 3993234, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/78f93d5680fee7ad7e0effb6a432e956?s=128&d=identicon&r=PG", "display_name": "Alexander Bolinsky", "link": "https://stackoverflow.com/users/3993234/alexander-bolinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 28201350, "answer_count": 1, "score": 0, "last_activity_date": 1422477145, "creation_date": 1422471307, "last_edit_date": 1422477145, "question_id": 28200183, "link": "https://stackoverflow.com/questions/28200183/why-do-these-two-methods-of-counting-words-differ-significantly", "title": "Why do these two methods of counting words differ significantly?", "body": "<p>I wrote a program that allows a user to find the number of instances of a word or collection of words in any text file. The user can enter something like this in the command line: </p>\n\n<pre><code>$ ./wordCount Mars TripToMars.txt\n</code></pre>\n\n<p>to search for the number of instances of the word \"Mars\" in the book Trip To Mars, or </p>\n\n<pre><code>$ ./wordCount -f collectionOfSearchWords.txt TripToMars.txt\n</code></pre>\n\n<p>to search for the number of instances of several words on individual lines in collectionOfSearchWords.txt.</p>\n\n<p>To ensure that the program was correct, I used the grep commands:</p>\n\n<pre><code>$ grep -o 'Mars' TripToMars.txt | wc -w\n</code></pre>\n\n<p>and </p>\n\n<pre><code>$ grep -o -w 'Mars' TripToMars.txt | wc -w\n</code></pre>\n\n<p>The first command finds the number of instances of the word anywhere, which would include terms like \"Marsa\", \"Marseen\", \"Marses\", etc., while the second command finds only instances of \"Mars\" as a standalone word, which would include trailing punctuation such as \"Mars.\", \"Mars!\", \"Mars?\", etc.</p>\n\n<p>Both grep commands return 49 as the number of instances of \"Mars\" in the book.</p>\n\n<p>When I use the code in the while loop below (for simplicity, I'm only including the relevant code), the program returns 49. Awesome!</p>\n\n<pre><code>FILE *textToSearch;\nchar *readMode = \"r\";\n\nint count;\nchar nextWord[100];\nchar d;\n\ntextToSearch = fopen(argVector[argCount-1], readMode);\nif (textToSearch == NULL) {\n    fprintf(stderr, \"Cannot open %s to be searched\\n\", argVector[argCount-1]);\n    return 1;\n} else {\n    while (fscanf(textToSearch, \"%*[^a-zA-Z]\"), fscanf(textToSearch, \"%80[a-zA-Z]\", nextWord) &gt; 0) { \n\n        // increment the counter if the word is a match\n        if (strcmp(nextWord, argVector[word]) == 0) {\n            count++;\n        }\n    }\n}\n</code></pre>\n\n<p>But when I substitute this while loop for the previous one, the program returns 17. </p>\n\n<pre><code>while(1) {\n    d = fscanf(textToSearch, \"%s\", nextWord);\n    if (d == EOF) break;\n\n    // increment the counter if the word is a match\n    if (strcmp(nextWord, argVector[word]) == 0) {\n        count++;\n    }\n}     \n</code></pre>\n\n<p>So, what's the big difference between</p>\n\n<pre><code>while (fscanf(textToSearch, \"%*[^a-zA-Z]\"), fscanf(textToSearch, \"%80[a-zA-Z]\", nextWord) &gt; 0) {}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>while(1) {\n    d = fscanf(textToSearch, \"%s\", nextWord);\n    if (d == EOF) break;\n}\n</code></pre>\n\n<p>?</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I added this code: </p>\n\n<pre><code>if (strcmp(nextWordDict, nextWord) == 0 ||\n     strcmp(nextWordDict, strcat(nextWord, \".\")) == 0 ||\n     strcmp(nextWordDict, strcat(nextWord, \"?\")) == 0 ||\n     strcmp(nextWordDict, strcat(nextWord, \"!\")) == 0 ||\n     strcmp(nextWordDict, strcat(nextWord, \",\")) == 0) {\n        count++;\n }\n</code></pre>\n\n<p>to the code producing 17 for Mars to try and account for cases with trailing punctuation, and there was no change. Still 17.</p>\n\n<p><strong>EDIT2</strong>:</p>\n\n<p>As John Bollinger correctly points out below, this code does nothing because the string buffered into nextWord would already have the trailing punctuation, and the code would only be adding more. This is faulty thinking on my part.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "mmap", "notify"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422471476, "post_id": 28200087, "comment_id": 44766623, "body": "I am not expert, but I believe it is not possible. AFAIK, context switches (&amp; user-mode -&gt; kernel-mode transitions) are necessarily heavy operations. Ask on <a href=\"https://lkml.org/\" rel=\"nofollow noreferrer\">lkml.org</a>"}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1422474096, "post_id": 28200087, "comment_id": 44768093, "body": "You cannot have a process &quot;not incur a context-switch&quot; <i>and</i> wait on something to happen in the kernel unless A) you are on a multi-core / SMP system, and B) you&#39;re busy waiting (e.g. spinlocks).  By definition, anything that waits without &quot;spinning&quot; will do a context switch and allow another process / thread to run."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422478396, "post_id": 28200087, "comment_id": 44770527, "body": "How do the packets get to your user networking stack? Are they generated by another userland application? Or do they arrive on a kernel networking interface? You might want to look at openvswitch which has the same challenges."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422478608, "post_id": 28200087, "comment_id": 44770630, "body": "Also, if you are only talking about packets to/from your NIC, note that the kernel uses NAPI to achieve this: <a href=\"http://www.linuxfoundation.org/collaborate/workgroups/networking/napi\" rel=\"nofollow noreferrer\">linuxfoundation.org/collaborate/workgroups/networking/napi</a> that&#39;s a combination of polling (<code>while(1)</code> or nearly that) and interrupts (in which case you&#39;d need your card to generate something that propagates to userspace). IE don&#39;t rule out <code>while(1)</code>."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422479392, "post_id": 28200087, "comment_id": 44771014, "body": "@abligh: packets come from a ethernet NIC, so kernel first. NAPI is the right direction. But when looking at dpdk and netmap they don&#39;t need it in the first place. And one paper showed napi to not provide excellent performance (grain of salt)"}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1422482938, "post_id": 28200087, "comment_id": 44772783, "body": "Why not simply send a signal, SIGIO for example? Also few nanoseconds is a couple of processor instructions. It is almost impossible to reach such latency, may be mean microseconds?"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1422515701, "post_id": 28200087, "comment_id": 44782552, "body": "@sergeyklyaus: sigio is complex and slow. I thought about my problem during the night and may have found something. We definitely talk about nanoseconds (counting every cpu cycle) not micro."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1422518475, "post_id": 28200087, "comment_id": 44783864, "body": "@Larry That&#39;s going to be amazingly challenging on a non-RTOS operating system communicating between userspace&lt;-&gt;kernel such as linux - you&#39;ll never have any guarantees the kernel doesn&#39;t decide to spend time doing something else for far longer than a few ns. The best you can do is a spinlock or park the user space process on a wait queue (with e.g. a custom ioctl) - and buffer as much as you can."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1422519437, "post_id": 28200087, "comment_id": 44784315, "body": "@nos: i fear you are right. I will not keep debian &amp; linux kernel."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1422540271, "post_id": 28200087, "comment_id": 44796558, "body": "Are you familiar with PF_RING?  <a href=\"http://www.ntop.org/products/pf_ring/\" rel=\"nofollow noreferrer\">ntop.org/products/pf_ring</a>  Much of it is free, and it sound like it takes a similar approach.  I&#39;ve used it to great success for capturing sensor data at close to line rate for a 10Gb NIC."}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1422557444, "post_id": 28200087, "comment_id": 44807679, "body": "pf ring doesn&#39;t support batching but dpdk does."}], "answers": [{"comments": [{"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1422479638, "post_id": 28202348, "comment_id": 44771138, "body": "The linux stack is not good enough when dealing with some high loads. It is very good at being general purpose though and fast enough for the majority. But when innovations in mathematics enable to cut the corners, it is not the man anymore and we have to implement the right way to benefit the innovation and specialization :)"}, {"owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "edited": false, "score": 0, "creation_date": 1422519896, "post_id": 28202348, "comment_id": 44784531, "body": "So you are right, I will have to deal with a RTOS module. Will look at existing solutions at first. Anyway, the goal of being as fast / faster as dpdk &amp; netmap seems to be achieved. I will test it more before claiming it publicly. Thanks ElazarR"}], "tags": [], "owner": {"reputation": 1928, "user_id": 4359075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8402c4ebac8daf5089467881855b75a1?s=128&d=identicon&r=PG&f=1", "display_name": "ElazarR", "link": "https://stackoverflow.com/users/4359075/elazarr"}, "is_accepted": true, "score": 1, "last_activity_date": 1422479033, "creation_date": 1422479033, "answer_id": 28202348, "question_id": 28200087, "link": "https://stackoverflow.com/questions/28200087/linux-c-notify-the-kernel-from-userspace-as-fast-as-possible-and-vice-versa/28202348#28202348", "title": "linux -c - notify the kernel from userspace as fast as possible and vice versa", "body": "<p>It seems like you are taking approaches which are common to networking in embedded systems based on RTOS.</p>\n\n<p>In Linux you are not supposed to write your own network stack - Linux kernel already have a good network stack. You are just expected to implement a NIC device driver (in kernel) which hands over all the packets for processing by the Linux network stack.</p>\n\n<p>Any Linux network related components are always in the kernel - and the problems you describe provide some explanation why that is essential for reasonable performance.</p>\n\n<p>The only exception is userspace network filters (e.g., for firewalls) that may be hooked to the <code>iptables</code> mechanism - and those incur higher latencies on packets that routed through them.</p>\n"}], "owner": {"reputation": 1595, "user_id": 1791534, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c8551210c2992777f91586f6edabad9?s=128&d=identicon&r=PG", "display_name": "Larry", "link": "https://stackoverflow.com/users/1791534/larry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 2, "accepted_answer_id": 28202348, "answer_count": 1, "score": 1, "last_activity_date": 1422517312, "creation_date": 1422471049, "last_edit_date": 1592644375, "question_id": 28200087, "link": "https://stackoverflow.com/questions/28200087/linux-c-notify-the-kernel-from-userspace-as-fast-as-possible-and-vice-versa", "title": "linux -c - notify the kernel from userspace as fast as possible and vice versa", "body": "<h2>Context :</h2>\n<p>Debian 64 bits.</p>\n<p>Making a linux-only userspace networking stack that I may release open source.</p>\n<p>Everything is ready but one last thing.</p>\n<h2>The problem :</h2>\n<p>I know about <code>poll</code>/<code>select</code>/<code>epoll</code> and use them heavily already but they are too complicated for my need and tend to add latency (few nanoseconds -&gt; too much).</p>\n<h2>The need :</h2>\n<p>A simple mean to notify from the kernel to an application that packets are to be processed and the reverse with a shared <code>mmap</code> file operating as a multi-ring buffer. It would obviously not incur a context-switch.</p>\n<p>I wrote a custom driver for my NIC (and plan to create others for the big league -&gt; 1-10Gb).</p>\n<p>I would like two shared arrays of <code>int</code> and two shared arrays of <code>char</code>. I have the multiprocess and non blocking design already working.</p>\n<p>A peer (int and char) for the kernel -&gt; app direction; another for app -&gt; kernel.</p>\n<p>But how to notify at the very moment <code>mmap</code> has changed. I read a <code>msync</code> would do it but it is slow too. That is my problem.\nMutexes lead to dead slow code. Spinlocks tend to waste cpu cycles on overload.</p>\n<p>Not talking about a busy <code>while(1)</code> loop always reading -&gt; cpu cycles waste.</p>\n<p>What do you recommend ?</p>\n<p>It is my last step.</p>\n<p>Thanks</p>\n<h2>Update:</h2>\n<p>I think i will have to pay the latency of setting the interrupt mask anyway. So it should ideally be amortized by the number of incoming packets during that required latency. The first few packets after a burst will always be slower i guess since i obviously don't infinite loop.</p>\n<p>The worst case would be that packets are sparse to come (hence why seeking saturating link performance at the first place). That worts case will be met at times. But who cares, it is still faster than the stock kernel anyway. Trade-offs trade-offs :)</p>\n"}, {"tags": ["c++", "c", "linux", "file-io", "printf"], "comments": [{"owner": {"reputation": 29810, "user_id": 423170, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H9kNQ.png?s=128&g=1", "display_name": "Frxstrem", "link": "https://stackoverflow.com/users/423170/frxstrem"}, "edited": false, "score": 0, "creation_date": 1422470350, "post_id": 28199843, "comment_id": 44766048, "body": "I don&#39;t understand what you expect to happen, apart from what the quoted paragraph says?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1422470372, "post_id": 28199843, "comment_id": 44766063, "body": "You are &quot;wrong&quot; in your <code>scanf</code> use inside <code>from_user</code> (<code>&amp;</code> should not be there) and in general memory management (pointer value is not returned to <code>main</code>). It has nothing to do with <code>printf</code> vs. <code>fprintf</code> matter."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1422470445, "post_id": 28199843, "comment_id": 44766102, "body": "You may want to add a newline to the file when you print.  Did you try opening the file in a text editor?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1422470738, "post_id": 28199843, "comment_id": 44766244, "body": "<code>void main()</code> should be <code>int main(void)</code>. If a book, tutorial, or instructor told you to use <code>void main()</code>, <b>find a better one</b>. Allocating 10 bytes for an <code>int*</code> makes no sense. You want <i>one</i> <code>int</code> object, so <code>malloc(sizeof (int))</code> would make more sense -- but the <code>malloc</code> isn&#39;t necessary at all, since you already have an <code>int</code> object whose address is passed as a parameter. Except that you don&#39;t, since you initialized <code>ch</code> to <code>NULL</code>. Try: <code>int ch; from_user(&amp;ch);</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1422470826, "post_id": 28199843, "comment_id": 44766289, "body": "Your <code>from_user</code> function doesn&#39;t modify <code>ch</code> -- it can&#39;t, functions can&#39;t modify their arguments (modifying a parameter only updates a local copy of the argument)."}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470486, "post_id": 28199901, "comment_id": 44766131, "body": "Even single pointer is enough right? Anyways we have the location being allocated and initialized in the function the OP&#39;s scanf() has an issue"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470596, "post_id": 28199901, "comment_id": 44766177, "body": "@Gopi: If we want to edit the value of <code>ch</code>, then we need to pass the pointer to <code>ch</code>, or pass it by reference."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470733, "post_id": 28199901, "comment_id": 44766240, "body": "I meant why not do everything inside the func() and return the pointer like <code>int *from_user()</code>"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1422470799, "post_id": 28199901, "comment_id": 44766277, "body": "@Gopi: That would be fine, as would pm100&#39;s variant. I felt that this kept to the spirit of how the original code was intended to work."}], "tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 6, "last_activity_date": 1422470750, "last_edit_date": 1592644375, "creation_date": 1422470382, "answer_id": 28199901, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file/28199901#28199901", "title": "Is fprintf not like printf when writing to file?", "body": "<h3><code>from_user()</code> is not implemented correctly.</h3>\n<ol>\n<li><p>The pointer that you create in <code>from_user()</code> will not be passed back to the calling function. To do that, you need a double pointer, or to pass by reference.</p>\n</li>\n<li><p>In your code, you pass a <code>int **</code> to <code>scanf()</code>, while it is expecting a variable of <code>int *</code>.</p>\n</li>\n</ol>\n<h3>Here's a working implementation:</h3>\n<pre><code>void from_user(int **b){\n    *b = malloc(sizeof(int));\n    printf(&quot;please give me an integer&quot;);\n    scanf(&quot;%d&quot;, *b);\n}\n\nint main() {\n    int *ch;\n    from_user(&amp;ch);\n}\n</code></pre>\n<h3>Your File IO</h3>\n<p>That part is all fine. It's just the value of <code>ch</code> that is broken.</p>\n"}, {"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1422470779, "post_id": 28199983, "comment_id": 44766266, "body": "Just add how it should be used : <code>int ch = from_user();</code> and later <code>fprintf(fp,&quot;%d&quot;,ch);</code>"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 3, "last_activity_date": 1422471699, "last_edit_date": 1422471699, "creation_date": 1422470658, "answer_id": 28199983, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file/28199983#28199983", "title": "Is fprintf not like printf when writing to file?", "body": "<p>a much simpler from_user implementation</p>\n\n<pre><code>int from_user(){\n    int i;\n    printf(\"please give me an integer\");\n    scanf(\"%d\", &amp;i);\n    return i;\n}\n</code></pre>\n\n<p>and in main</p>\n\n<pre><code>int ch = from_user();\n...\n      printf(\"this is what you entered %d\",ch);\n        fprintf(fp,\"%d\",ch);  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "is_accepted": false, "score": 0, "last_activity_date": 1422472039, "last_edit_date": 1495540168, "creation_date": 1422471560, "answer_id": 28200247, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file/28200247#28200247", "title": "Is fprintf not like printf when writing to file?", "body": "<p>Simplest fix to your own code, you don't need to use double pointers, just allocate the memory in main and pass the pointer to your function, like this:</p>\n\n<ol>\n<li>Remove <code>b = malloc(10);</code></li>\n<li>Remove the <code>&amp;</code> before b in scanf</li>\n<li>Change <code>int*ch = NULL;</code> to <code>int *ch = malloc(sizeof(int));</code></li>\n</ol>\n\n<p>Done. Why does it matter where we allocate the memory? See my more detailed answer here: <a href=\"https://stackoverflow.com/questions/15244429/pointer-of-a-pointer-in-linked-list-append/15244654#15244654\">pointer of a pointer in linked list append</a></p>\n\n<p>Oh and you should move <code>free(ch)</code> out from the else statement.</p>\n"}], "owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 28199901, "answer_count": 3, "score": -2, "last_activity_date": 1422476189, "creation_date": 1422470170, "last_edit_date": 1422476189, "question_id": 28199843, "link": "https://stackoverflow.com/questions/28199843/is-fprintf-not-like-printf-when-writing-to-file", "title": "Is fprintf not like printf when writing to file?", "body": "<p>I've reviewed the documentation:</p>\n\n<p>It says <a href=\"http://www.cs.bu.edu/teaching/c/file-io/intro/\" rel=\"nofollow\">here</a>:</p>\n\n<blockquote>\n  <p>Once a file has been successfully opened, you can read from it using fscanf() or write to it using fprintf(). These functions work just\n  like scanf() and printf(), except they require an extra first\n  parameter, a FILE * for the file to be read/written.</p>\n</blockquote>\n\n<p>So, I wrote my code as such, and I made sure to include a conditional statement to make sure that the file opened:</p>\n\n<pre><code># include&lt;stdio.h&gt;\n# include&lt;stdlib.h&gt;\n\nvoid from_user(int*b){\n\n    b = malloc(10);\n    printf(\"please give me an integer\");\n    scanf(\"%d\",&amp;b);\n\n}\n\nvoid main(){\n\n    FILE *fp;\n\n    int*ch = NULL;\n    from_user(ch);\n    fp = fopen(\"bfile.txt\",\"w\");\n\n    if (fp == NULL){\n        printf(\"the file did not open\");\n    }\n    else {\n        printf(\"this is what you entered %d\",*ch);\n        fprintf(fp,\"%d\",*ch);  \n        fclose(fp);\n        free(ch);   \n    }\n}\n</code></pre>\n\n<p>Am I wrong or is the documentation not explaining this correctly?  thanks.</p>\n"}, {"tags": ["python", "c", "numpy", "cython"], "owner": {"reputation": 10384, "user_id": 2186160, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cdd8455d7ef529f1941b1874bd67e3c8?s=128&d=identicon&r=PG", "display_name": "rwolst", "link": "https://stackoverflow.com/users/2186160/rwolst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "closed_date": 1602575553, "answer_count": 0, "score": 3, "last_activity_date": 1422470841, "creation_date": 1422470098, "last_edit_date": 1422470841, "question_id": 28199819, "link": "https://stackoverflow.com/questions/28199819/pass-numpy-array-to-c-2d-array-in-pointer-to-pointer-format-using-cython", "closed_reason": "Duplicate", "title": "Pass Numpy array to C 2D array in pointer to pointer format using Cython", "body": "<p>I have C code that I am currently incorporating into Python using Cython. The C code deals with 2D arrays in pointer to pointer format i.e. allocating memory for a 3x3 array is done as follows</p>\n\n<pre><code>float **A = (float **)malloc(3*sizeof(float *));\nfor (i=0; i&lt;3; i++) A[i] = (float *)malloc(3*sizeof(float));\n</code></pre>\n\n<p>I am following this <a href=\"https://github.com/cython/cython/wiki/tutorials-NumpyPointerToC\" rel=\"nofollow\">tutorial</a> from the Cython Github wiki. Note that they store the 2D array linearly.</p>\n\n<p>My question then is, what is the most efficient way to change the Cython code (specifically the handling of the Numpy array) so that it would work for a function <code>void c_multiply (float** array, float multiplier, int m, int n)</code> say (i.e. now dealing with pointer to pointer arrays).</p>\n\n<p>Note I am currently handling it by having two converting functions in the C code that gets called initially and at the end to change the indexing from linear to pointer to pointer and vice versa. However, ideally I don't want to have to change the C code.</p>\n"}, {"tags": ["c", "audio", "sdl-2", "synthesizer", "sdl-mixer"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1422470518, "post_id": 28199783, "comment_id": 44766145, "body": "Do you have some method  to guarantee the input values to your BLIT function are within acceptable limits?   For the most obvious example, problems would occur if was &#39;P&#39; were allowed to be passed  as 0.  Are there any other parameter limits that should be considered?  userdata is also a curiosity.  is its content somehow validated before being allowed into these algorithms?  Perhaps should be Pre-filtered for data points that do not fall within acceptable limits."}, {"owner": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1422472016, "post_id": 28199783, "comment_id": 44766926, "body": "@ryyker I tried to add some checks on P values, checking if it&#39;s &gt; 0, but really it was ok. userdata is a parameter of SDL_Mixer, and I don&#39;t use it at all (it&#39;s used to pass additional parameters to my callback function, but I don&#39;t need it...). I also added a plot of the bipolar impulse train before integrating it..."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1422489683, "post_id": 28199783, "comment_id": 44775311, "body": "I&#39;ve up-clicked your question just because in the context of what you are doing, it is presented very well.  However, I wonder if you are limiting the number responses you will get by the quantity of information you are providing.  I wonder if you can scope it down to address the core relevance of the problem?  For what it is worth, I do not currently see a problem anywhere in the C code you have provided.  And as long as the input file contains no noise or errors, the code should be predictable."}], "owner": {"reputation": 6363, "user_id": 2837813, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/5Xggf.png?s=128&g=1", "display_name": "ProGM", "link": "https://stackoverflow.com/users/2837813/progm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1422472007, "creation_date": 1422469997, "last_edit_date": 1422472007, "question_id": 28199783, "link": "https://stackoverflow.com/questions/28199783/realtime-band-limited-impulse-train-synthesis-using-sdl-mixer", "title": "Realtime Band-Limited Impulse Train Synthesis using SDL mixer", "body": "<p>I'm trying to implement a audio synthesizer using this technique:</p>\n\n<p><a href=\"https://ccrma.stanford.edu/~stilti/papers/blit.pdf\" rel=\"nofollow noreferrer\">https://ccrma.stanford.edu/~stilti/papers/blit.pdf</a></p>\n\n<p>I'm doing it in standard C, using SDL2_Mixer library.</p>\n\n<p>This is my BLIT function implementation:</p>\n\n<pre><code>double blit(double angle, double M, double P) {\n    double x = M * angle / P;\n    double denom = (M * sin(M_PI * angle / P));\n    if (denom &lt; 1)\n        return (M / P) * cos(M_PI * x) / cos(M_PI * x / M);\n    else {\n        double numerator = sin(M_PI * x);\n        return (M / P) * numerator / denom;\n    }\n}\n</code></pre>\n\n<p>The idea is to combine it to generate a square wave, following the paper instructions. I setted up SDL2_mixer with this configuration:</p>\n\n<pre><code>SDL_AudioSpec *desired, *obtained;\nSDL_AudioSpec *hardware_spec;\n\ndesired = (SDL_AudioSpec*)malloc(sizeof(SDL_AudioSpec));\nobtained = (SDL_AudioSpec*)malloc(sizeof(SDL_AudioSpec));\n\ndesired-&gt;freq=44100;\ndesired-&gt;format=AUDIO_U8;\ndesired-&gt;channels=1;\ndesired-&gt;samples=2048;\ndesired-&gt;callback=create_rect;\ndesired-&gt;userdata=NULL;\n</code></pre>\n\n<p>And here's my <code>create_rect</code> function. It creates a bipolar impulse train, then it integrates it's value to generate a band-limited rect function.</p>\n\n<pre><code>void create_rect(void *userdata, Uint8 *stream, int len) {\n    static double angle = 0;\n    static double integral = 0;\n    int i = 0;\n    // This is the freq of my tone\n    double f1 = tone_table[current_wave.note];\n    // Sample rate\n    double fs = 44100;\n    // Pulse\n    double P = fs / f1;\n    int M = 2 * floor(P / 2) + 1;\n\n    double oldbipolar = 0;\n    double bipolar = 0;\n    for(i = 0; i &lt; len; i++) {\n        if (++angle &gt; P)\n            angle -= P;\n        double angle2 = angle + floor(P/2);\n        if (angle2 &gt; P)\n            angle2 -= P;\n\n        bipolar = blit(angle2, M, P) - blit(angle, M, P);\n\n        integral += (bipolar + old bipolar) * 0.5;\n        oldbipolar = bipolar;\n        *stream++ = (integral + 0.5) * 127;\n    }\n}\n</code></pre>\n\n<p>My problem is: the resulting wave is quite ok, but after few seconds it starts to make noises. I tried to plot the result, and here's it:</p>\n\n<p><img src=\"https://i.stack.imgur.com/exHAV.png\" alt=\"Standard version\">\n<img src=\"https://i.stack.imgur.com/90tzR.png\" alt=\"More zoomed version\">\n<img src=\"https://i.stack.imgur.com/p0yBI.png\" alt=\"Critique area\"></p>\n\n<p>Any idea?</p>\n\n<p>EDIT: Here's a plot of the bipolar BLIT before integrating it:</p>\n\n<p><img src=\"https://i.stack.imgur.com/1ZVHa.png\" alt=\"BLIT\">\n<img src=\"https://i.stack.imgur.com/MZG84.png\" alt=\"Scaled BLIT\"></p>\n"}, {"tags": ["c", "arrays", "pointers", "dynamic-memory-allocation"], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1422470859, "last_edit_date": 1422470859, "creation_date": 1422469314, "answer_id": 28199599, "question_id": 28199575, "link": "https://stackoverflow.com/questions/28199575/dynamic-array-allocation-pass-by-value-out-of-range/28199599#28199599", "title": "Dynamic Array Allocation, pass by value, out of range", "body": "<ol>\n<li><p>You are not reassiging the pointer, it should be</p>\n\n<pre><code>void main()\n{\n   int * array;\n   allocation(&amp;array);\n   if (array != NULL)\n       deallocation(array);\n}\n\nvoid allocation(int **result)\n{\n   if (result == NULL)\n       return;\n   *result = malloc(8293 * sizeof(int));\n}\n\nvoid deallocation(int * result)\n{\n   free(result);\n}\n</code></pre>\n\n<p>by passing the pointer, you can modify it's content, but you cannot change where it points to, so you must pass a pointer to the pointer, i.e. the address to the pointer so you can modify where it points to.</p>\n\n<p>The problem in your code is that your pointer remains invalid in the scope of main, so when you pass it to <code>free</code> it's not actually pointing to the <code>malloc</code>ed memory block.</p></li>\n<li><p>Doing that is causes undefined behavior. Reading or writing past the <code>malloc</code>ed block causes undefined behavior, so you cannot expect a given behavior, because it's undefined.</p>\n\n<p>It means, it could cause a Segmentation Fault, or it could work, or anything could happen because it's undefined.</p>\n\n<p>Eventualy you will write to a special location in memory and something will happen, you can't be sure what is happening meanwhile since again it's undefined behavior.</p></li>\n</ol>\n"}], "owner": {"reputation": 313, "user_id": 1316781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b569c5cf2bd020004053a374c592dc59?s=128&d=identicon&r=PG", "display_name": "CrazyFrog", "link": "https://stackoverflow.com/users/1316781/crazyfrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 28199599, "answer_count": 1, "score": -1, "last_activity_date": 1422470859, "creation_date": 1422469245, "last_edit_date": 1422469969, "question_id": 28199575, "link": "https://stackoverflow.com/questions/28199575/dynamic-array-allocation-pass-by-value-out-of-range", "title": "Dynamic Array Allocation, pass by value, out of range", "body": "<p>I have two questions about dynamic allocated array. I have looked up some similar questions but still didn't find the answer.</p>\n\n<ol>\n<li><p>Pass by value</p>\n\n<p>Basically, I write two functions, one for allocation and another for free memory. When I pass the array pointer by value, the allocation function didn't work (as expected) but the free function works. And in my naive understanding, even if we pass the array pointer by value, the allocation should still work since it allocates a memory at the same memory address the value represented. And if we refers to that address later, regardless of the variable name, we should be able to find that space. This is the code:</p>\n\n<pre><code>void main()\n{\n   int * array;\n   allocation(array);\n   deallocation(array);\n}\n\nvoid allocation(int * result)\n{\n   result = malloc(8293 * sizeof(result));\n}\n\nvoid deallocation(int * result)\n{\n   free(result);\n}\n</code></pre>\n\n<p>For deallocation test, I declared int * array = malloc(23123* sizeof(int)) in the main function instead of using allocation function. Again, the deallocation works.</p></li>\n<li><p>Out of range access.</p>\n\n<pre><code>void main()\n{\n    FILE * fp = fopen(\"sometext.txt\");\n\n    int * A = malloc(100 * sizeof(int));\n    int * B = malloc(200 * sizeof(int));\n\n /* Now I accidentally access A from 0-199 and B from 0-999 using a for loop*/\n    char buffer[500];\n    int i,x;\n\n     for (i=0; i&lt;200; i++)\n     {  \n          fgets(fp,buffer);\n          sccanf(buffer, \"%d\", x);\n          A[i]=x;\n     }\n\n     for (i=0; i&lt;1000; i++)\n     {  \n          fgets(fp,buffer);\n          sccanf(buffer, \"%d\", x);\n          B[i]=x;\n     }\n}\n</code></pre>\n\n<p>Both for loop should not work. However, I somehow get passed the first loop and only get seg fault in the second loop. And the error I get is traced back to sccanf (I tested the code without assign any value to A or B, and it works. So the sccanf statement should be fine.) The gdb error message is : isoc99_sscanf (s=,  format=).</p></li>\n</ol>\n\n<p>The full bt message is below, SOL[] is my B[] here and the actual sscanf read more variables. I can post full code if you are interested.\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  #0  0x00007ffff7a6869b in _IO_vfscanf_internal (s=s@entry=0x7fffffffd3b0, \n    format=format@entry=0x4010f8 \"%*d%5c%5c%5d %lf %lf %lf %*f %*f %*f\\n\", \n  argptr=argptr@entry=0x7fffffffd4d8, errp=errp@entry=0x0) at vfscanf.c:343\n #1  0x00007ffff7a72a0c in __GI___isoc99_vsscanf (\n     string=0x7fffffffd650 \" 4545SOL    HW123234   2.687   0.089   7.120 -1.1448  0.0920  0.6016\\n\", format=0x4010f8 \"%*d%5c%5c%5d %lf %lf %lf %*f %*f %*f\\n\", \n   args=args@entry=0x7fffffffd4d8) at isoc99_vsscanf.c:43\n #2  0x00007ffff7a72997 in __isoc99_sscanf (s=&lt;optimized out&gt;, \n  format=&lt;optimized out&gt;) at isoc99_sscanf.c:31\n #3  0x0000000000400a9c in read (PMI=0x603490, COION=0x606ce0, \n     COUNTERION=0x60dd70, SOL=0x7ffff7f58010, in=0x603010, out=0x603250)\n   at thick_calc.c:97\n #4  0x0000000000400915 in main () at thick_calc.c:52\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "c", "pcap"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "edited": false, "score": 1, "creation_date": 1422480150, "post_id": 28201142, "comment_id": 44771377, "body": "The underlying OS packet capture mechanism, atop which libpcap runs, may deliver packets one at a time or deliver them in batches.  <code>pcap_dispatch()</code> typically processes one batch at a time - i.e., the number of packets that a single blocking operation will provide - so it may only provide one packet (&quot;one at a time&quot; being one-packet batches) or more, but it won&#39;t keep providing them indefinitely.  Use <code>pcap_loop()</code> for that."}], "tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 1, "last_activity_date": 1422474691, "creation_date": 1422474691, "answer_id": 28201142, "question_id": 28199196, "link": "https://stackoverflow.com/questions/28199196/why-is-pcap-dispatch-only-returning-1-packet/28201142#28201142", "title": "Why is pcap_dispatch only returning 1 packet?", "body": "<p>From the man page:</p>\n\n<pre>\n       pcap_dispatch() processes packets from a live capture or ``savefile'' until\n       cnt  packets  are processed, the end of the current bufferful of packets is\n       reached when doing a live capture, the end of the ``savefile''  is  reached\n       when  reading  from a ``savefile'', pcap_breakloop() is called, or an error\n       occurs.  Thus, when doing a live capture, cnt  is  the  maximum  number  of\n       packets  to  process  before  returning,  but is not a minimum number; when\n       reading a live capture, only one bufferful of packets is read at a time, so\n       fewer  than cnt packets may be processed. A value of -1 or 0 for cnt causes\n       all the packets received in one buffer to be processed when reading a  live\n       capture,  and causes all the packets in the file to be processed when read\u2010\n       ing a ``savefile''.\n</pre>\n\n<p>Note the bit that says: <em>\"so fewer than <code>cnt</code> packets may be processed\"</em> - i.e. it's up the the pcap implementation what it does.</p>\n\n<p>A note on Python: I have no idea what the python implementation does, but in C the callback is called for once for each packet anyway.</p>\n"}], "owner": {"reputation": 793, "user_id": 2271391, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e88dc241baa8f16d0bc9fcd79fde6935?s=128&d=identicon&r=PG", "display_name": "SadSeven", "link": "https://stackoverflow.com/users/2271391/sadseven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1423414557, "creation_date": 1422468022, "last_edit_date": 1423414557, "question_id": 28199196, "link": "https://stackoverflow.com/questions/28199196/why-is-pcap-dispatch-only-returning-1-packet", "title": "Why is pcap_dispatch only returning 1 packet?", "body": "<p>Why is <code>pcap_dispatch</code> (with <code>count</code>=10) only returning 1 packet?</p>\n\n<p>If I don't do anything it waits and then shows 1 packet, but if I click on a link it stops immediately and shows 1 packet.</p>\n\n<p>Am I supposed to have a loop like this or not?:</p>\n\n<pre><code>for i in range(0,10):\n        p.dispatch(10, savePacket)\n</code></pre>\n\n<p>This is python, but I had the same problem in C.</p>\n"}, {"tags": ["c", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1422468410, "post_id": 28199133, "comment_id": 44764927, "body": "The real question is, WHY do you have such a recursive call?  Why not just do everything in the same invocation?  Adding the recursion is what&#39;s causing your problem.  If you really, truly want the recursion then you need to mark <code>PROGNAME</code> as <code>.PHONY</code> so that the recursion will happen every time."}, {"owner": {"reputation": 99, "user_id": 4266979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0051206233002d9b1786cdbc923f7d52?s=128&d=identicon&r=PG&f=1", "display_name": "Neither_8", "link": "https://stackoverflow.com/users/4266979/neither-8"}, "reply_to_user": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1422470094, "post_id": 28199133, "comment_id": 44765910, "body": "@MadScientist: I want the source files to be compiled with a different set of flags depending upon the target. So I have another target, say <code>PROGNAME2:</code> where <code>EXTRA_FLAGS</code> is set to something different. But it looks like using target-specific variables might be a cleaner way to go."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 4266979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0051206233002d9b1786cdbc923f7d52?s=128&d=identicon&r=PG&f=1", "display_name": "Neither_8", "link": "https://stackoverflow.com/users/4266979/neither-8"}, "edited": false, "score": 0, "creation_date": 1422470112, "post_id": 28199305, "comment_id": 44765926, "body": "Yep, that is exactly the problem! I can&#39;t believe I overlooked this. Changing the output filename to something different from the first target name easily fixes this. But your comment about target specific variables is a much cleaner approach. Thanks a lot!"}], "tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": true, "score": 3, "last_activity_date": 1422468315, "creation_date": 1422468315, "answer_id": 28199305, "question_id": 28199133, "link": "https://stackoverflow.com/questions/28199133/recursive-call-to-makefile-does-not-update-object-files/28199305#28199305", "title": "Recursive call to makefile does not update object files", "body": "<p>The target <code>PROGNAME</code> has no prerequisites.</p>\n\n<p>The first time you <code>make PROGNAME</code>, Make sees that there is no such file, so it executes the rule.</p>\n\n<p>The second time (after you modify <code>shared1.o</code>), Make sees that <code>PROGNAME</code> already exists, and that the target has no prerequisites, so it sees no need to rebuild the target. It doesn't know that <code>PROGNAME</code> depends on <code>shared1.o</code>, because you didn't tell it.</p>\n\n<p>There's more than one way to solve this problem. I suggest you do away with the recursion entirely and use a <a HREF=\"http://www.gnu.org/software/make/manual/make.html#Target_002dspecific\" rel=\"nofollow\">target-specific variable value</a>:</p>\n\n<pre><code>PROGNAME: EXTRA_FLAGS=\"$(FLAGS)\"\nPROGNAME: PROGNAME_TARGET\n</code></pre>\n\n<p>(Your target names could be improved, but that can wait.)</p>\n"}], "owner": {"reputation": 99, "user_id": 4266979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0051206233002d9b1786cdbc923f7d52?s=128&d=identicon&r=PG&f=1", "display_name": "Neither_8", "link": "https://stackoverflow.com/users/4266979/neither-8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 28199305, "answer_count": 1, "score": 0, "last_activity_date": 1422468315, "creation_date": 1422467832, "question_id": 28199133, "link": "https://stackoverflow.com/questions/28199133/recursive-call-to-makefile-does-not-update-object-files", "title": "Recursive call to makefile does not update object files", "body": "<p>I have a makefile with a recursive call to itself. When I first run make, the object files are created and linked just fine. But when I modify a source file and run make again, the objects are not recreated (make says the target is up to date). I need to run <code>make clean</code> and then run make. Here is simplified version of my makefile which I think includes all relevant information:</p>\n\n<pre><code>PCC = mpicc\n\n#Locations\nOBJDIR = ./objects\n\n#Compiler and linker flags\nFLAGS = -g -lm\n\n#Object files\nSHAREDOBJS = $(addprefix $(OBJDIR)/,shared1.o shared2.o)\nSPECIFICOBJS = $(addprefix $(OBJDIR)/,specific1.o specific2.o)\n\n#How to compile and link\n$(OBJDIR)/%.o: %.c\n    $(PCC) -c $*.c $(EXTRA_FLAGS) -o $(OBJDIR)/$*.o\n\nPROGNAME:\n    $(MAKE) $(MAKEFLAGS) EXTRA_FLAGS=\"$(FLAGS)\" PROGNAME_TARGET\n\nPROGNAME_TARGET: $(SHAREDOBJS) $(SPECIFICOBJS)\n    $(PCC) $(SHAREDOBJS) $(SPECIFICOBJS) $(EXTRA_FLAGS) -o PROGNAME\n</code></pre>\n\n<p>So running <code>make PROGNAME</code> the first time compiles just fine. But the second returns <code>make: \"PROGNAME\" is up to date.</code></p>\n\n<p>It appears to me that the recursive call is never made. For example, if I add an <code>echo</code> right before the call to make, nothing is displayed in <code>stdout</code>.</p>\n\n<p>Why is this happening? Why are the timestamps on the source files not checked in the recursive call? I don't understand why the recursion breaks the dependency on the source files.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "function", "macros"], "comments": [{"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1422467695, "post_id": 28198369, "comment_id": 44764485, "body": "You could just have a function read from <code>stdin</code>, and based on what it finds, use either a macro or a function, though it should be fairly clear which to use..."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422478313, "post_id": 28198369, "comment_id": 44770499, "body": "@Senri I see this is your first question, did you take the <a href=\"http://stackoverflow.com/tour\">tour</a>."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1422466250, "last_edit_date": 1422466250, "creation_date": 1422465590, "answer_id": 28198430, "question_id": 28198369, "link": "https://stackoverflow.com/questions/28198369/switching-between-macro-or-function/28198430#28198430", "title": "Switching between macro or function", "body": "<p>Just check if <code>IS_AVAIL</code> is defined like this</p>\n\n<pre><code>#ifdef IS_AVAIL\n#define isAvail() MACRO_DEFINITION_HERE\n#else\nint isAvail(void) {return ?;}\n#endif\n</code></pre>\n\n<p>where <code>?</code> is what should be returned by the function.</p>\n"}], "owner": {"reputation": 67, "user_id": 4504024, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ab1ed423c3009fa54c498a4af2875f50?s=128&d=identicon&r=PG&f=1", "display_name": "Senri", "link": "https://stackoverflow.com/users/4504024/senri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422466250, "creation_date": 1422465432, "question_id": 28198369, "link": "https://stackoverflow.com/questions/28198369/switching-between-macro-or-function", "title": "Switching between macro or function", "body": "<p>I have three files. </p>\n\n<ol>\n<li>ass3.c</li>\n<li>ass3.h</li>\n<li>teacher.c</li>\n</ol>\n\n<p><em>teacher.c</em> was supplied to me and cannot be changed it in any way and the other two files were coded by me.</p>\n\n<p><em>teacher.c</em> has the main() function and includes <em>ass3.h</em>.</p>\n\n<p><em>ass3.c</em> also includes <em>ass3.h</em>. <em>teacher.c</em> calls for functions in <em>ass3.c</em>.</p>\n\n<p>The program works but I need to add another functionality.</p>\n\n<p>I need to add the ability for a user to specify if user wants to use a macro or a function (call it <em>isAvail()</em>). Right now the program works only using the <em>isAvail()</em> function. </p>\n\n<p>How do I go about implementing this? The excerpt for the requirement is:</p>\n\n<p>\"Implement <em>isAvail()</em> as a <strong>function</strong> and a macro expansion(macro) using conditional processing, the user can choose between macro or a function in the compiled code. If <em>IS_AVAIL</em> (the macro name) name is defined the macro should be used, if the IS_AVAIL name is not defined, the function should be used\"</p>\n\n<p>Again, please keep in mind that I can only change Ass3.c and Ass3.h.</p>\n\n<p>Please point me to the right direction and if possible can you please give me an example as well. If I need to add more details please excuse me.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "memory-management", "struct"], "comments": [{"owner": {"reputation": 10709, "user_id": 855421, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/10ba80b2d73f068e916ba35852a8a436?s=128&d=identicon&r=PG", "display_name": "Lews Therin", "link": "https://stackoverflow.com/users/855421/lews-therin"}, "edited": false, "score": 1, "creation_date": 1422465226, "post_id": 28198290, "comment_id": 44763021, "body": "Probably some padding taking place. Post  an example"}, {"owner": {"reputation": 76348, "user_id": 392044, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4df33f9e8a81cc9d8046f057dbb4debc?s=128&d=identicon&r=PG", "display_name": "Mike Christensen", "link": "https://stackoverflow.com/users/392044/mike-christensen"}, "edited": false, "score": 2, "creation_date": 1422465233, "post_id": 28198290, "comment_id": 44763024, "body": "Can you show examples of both?"}], "answers": [{"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 2, "creation_date": 1422465406, "post_id": 28198321, "comment_id": 44763140, "body": "There can also be padding in the middle of a structure."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 2, "last_activity_date": 1422465787, "last_edit_date": 1422465787, "creation_date": 1422465262, "answer_id": 28198321, "question_id": 28198290, "link": "https://stackoverflow.com/questions/28198290/why-structs-took-more-space-than-it-needs/28198321#28198321", "title": "Why structs took more space than it needs?", "body": "<pre><code>sizeof(struct) &gt;= sum of all the structure members.\n</code></pre>\n\n<p>Because there might be extra padding for alignment requirements.That is the reason you are seeing that the size of the struct is more than what you thought.</p>\n"}], "owner": {"reputation": 23, "user_id": 4504056, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000063087510/picture?type=large", "display_name": "Aluma Gelbard", "link": "https://stackoverflow.com/users/4504056/aluma-gelbard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1422465519, "accepted_answer_id": 28198321, "answer_count": 1, "score": -5, "last_activity_date": 1422465787, "creation_date": 1422465116, "last_edit_date": 1422465567, "question_id": 28198290, "link": "https://stackoverflow.com/questions/28198290/why-structs-took-more-space-than-it-needs", "closed_reason": "Duplicate", "title": "Why structs took more space than it needs?", "body": "<p>I saw that when I checked the size of struct it took 36 bytes, but the same variables (without the struct) took 33 bytes.\nWhy?</p>\n"}, {"tags": ["c", "linux", "xlib", "freetype"], "answers": [{"comments": [{"owner": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "edited": false, "score": 0, "creation_date": 1422516160, "post_id": 28205520, "comment_id": 44782771, "body": "Well, pango seems to have too complex API and FreeType - too low level. I mean it renders glyphs, not strings.  I edited the question in order to cleanup the requirements. Actually Xft seems to be what I need (it manages fonts and can render Unicode strings), but for memory bitmaps."}], "tags": [], "owner": {"reputation": 22804, "user_id": 705115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/212db408fb84ef88b9d5c6b543076c1d?s=128&d=identicon&r=PG", "display_name": "Andrey Sidorov", "link": "https://stackoverflow.com/users/705115/andrey-sidorov"}, "is_accepted": true, "score": 1, "last_activity_date": 1422494642, "creation_date": 1422494642, "answer_id": 28205520, "question_id": 28198261, "link": "https://stackoverflow.com/questions/28198261/how-to-draw-text-on-ximage-object-in-linux/28205520#28205520", "title": "How to draw text on XImage object in Linux", "body": "<p>most toolkits are using pango for this. If you target more than just latin scripts it is probably the only sane choice around. Otherwise plain freetype rendering might be enough for you (there are plenty of examples). If you need complex scripts but want to go low level, use freetype + harfbuzz</p>\n"}], "owner": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 28205520, "answer_count": 1, "score": 1, "last_activity_date": 1422515948, "creation_date": 1422465021, "last_edit_date": 1422515948, "question_id": 28198261, "link": "https://stackoverflow.com/questions/28198261/how-to-draw-text-on-ximage-object-in-linux", "title": "How to draw text on XImage object in Linux", "body": "<p>I read the reference of Xft library, but it seems to draw text only on server site drawable: Pixmap or Window. The same is about the native xlib text drawing functions.</p>\n\n<p>But how to draw some text on a XImage object that has an array of pixels in memory on the client site? </p>\n\n<p>What library to use and where to find some reference and example sources?</p>\n\n<p>There is no need for ultra-high-quality typography and probably RTL is not needed. </p>\n\n<p>On the other hand it is good to have UTF-8 support and simple API.</p>\n\n<p>For example FreeType seems to be not what is needed - it renders single glyphs, not directly Unicode text.</p>\n\n<p>This way, what I need is the API of Xft, but for memory bitmaps. (Or as an example Win32 <code>TextOut</code> level function).</p>\n\n<p>I prefer a plain C code examples, but any other non-OOP language is OK too.</p>\n"}, {"tags": ["c", "linux", "assembly", "gdb", "x86-64"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422464036, "post_id": 28197841, "comment_id": 44762217, "body": "Check what <code>puts@plt</code> does. A sane guess is it first pushes the registers it&#39;s going to use."}, {"owner": {"reputation": 448, "user_id": 1709643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e29636f02a1452127c30c260d665e5?s=128&d=identicon&r=PG", "display_name": "Jonnycake", "link": "https://stackoverflow.com/users/1709643/jonnycake"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422464366, "post_id": 28197841, "comment_id": 44762450, "body": "That would make sense, I checked but it doesn&#39;t look like it, I&#39;ll update my post in a second to show what I&#39;ve found"}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 1709643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e29636f02a1452127c30c260d665e5?s=128&d=identicon&r=PG", "display_name": "Jonnycake", "link": "https://stackoverflow.com/users/1709643/jonnycake"}, "edited": false, "score": 0, "creation_date": 1422466793, "post_id": 28198479, "comment_id": 44763959, "body": "Thank you so much, that makes sense now.  I knew I wasn&#39;t understanding something."}], "tags": [], "owner": {"reputation": 10530, "user_id": 521897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ZTZI.jpg?s=128&g=1", "display_name": "amdn", "link": "https://stackoverflow.com/users/521897/amdn"}, "is_accepted": true, "score": 4, "last_activity_date": 1422507155, "last_edit_date": 1422507155, "creation_date": 1422465745, "answer_id": 28198479, "question_id": 28197841, "link": "https://stackoverflow.com/questions/28197841/preserving-registers/28198479#28198479", "title": "Preserving Registers?", "body": "<p>The disassembly you show for puts is not correct.  Library symbols for dynamically loaded libraries are resolved, well, dynamically.  The compiler generates a call to a stub (<em>procedure linkage table</em> or <strong>PLT</strong>), the loader resolves that at runtime, the second time you call that function the address has been resolved and it runs faster.  Disassemble it on the 2nd iteration and you will see the actual puts code being run, and you will see the registers being pushed.</p>\n\n<p>More info <a href=\"https://www.technovelty.org/linux/plt-and-got-the-key-to-code-sharing-and-dynamic-libraries.html\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 3, "last_activity_date": 1422474206, "creation_date": 1422474206, "answer_id": 28200989, "question_id": 28197841, "link": "https://stackoverflow.com/questions/28197841/preserving-registers/28200989#28200989", "title": "Preserving Registers?", "body": "<p>This instruction:</p>\n\n<pre><code> jmpq   *0x200c02(%rip)        # 0x601018 &lt;puts@got.plt&gt;\n</code></pre>\n\n<p>reads the quadword (8 bytes) from the address given by the offset from the instruction pointer and jumps there.  So to see where this is going, you don't want to use <code>disas 0x601018</code>, you want to use <code>x /1xg 0x601018</code> to see what is in those bytes (read the pointer), and then call <code>disas</code> on that value to see the actual code for <code>puts</code></p>\n\n<p>This stuff is all dynamic linkage stuff that is set up to call functions in dynamic libraries.  <code>plt</code> is an abbreviation for \"program linkage table\" and is a set of trampolines created by the linker whenever an object calls a function in some other dynamic library.  <code>got</code> is an abbreviation for \"global object table\" and is a table of function pointers built by the linker and filled in by the dynamic linker when the program is loaded.</p>\n"}], "owner": {"reputation": 448, "user_id": 1709643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e29636f02a1452127c30c260d665e5?s=128&d=identicon&r=PG", "display_name": "Jonnycake", "link": "https://stackoverflow.com/users/1709643/jonnycake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 28198479, "answer_count": 2, "score": 2, "last_activity_date": 1422507155, "creation_date": 1422463880, "last_edit_date": 1422464524, "question_id": 28197841, "link": "https://stackoverflow.com/questions/28197841/preserving-registers", "title": "Preserving Registers?", "body": "<p>Okay, so in C code, I have it looping through the command line arguments and printing each one out.  I compiled it and opened it in GDB to see what the main function looks like because I was attempting to do the same thing in assembly.  I ended up figuring out what my problem was - that my print function was using the same registers as the main function was.  I ended up just pushing each onto the stack before the function call and popping them back off after.  Only thing I don't understand is why this code doesn't seem to do that and why it doesn't run into the same problem as I was.</p>\n\n<pre><code>   0x000000000040052d &lt;+0&gt;:     push   %rbp\n   0x000000000040052e &lt;+1&gt;:     mov    %rsp,%rbp\n   0x0000000000400531 &lt;+4&gt;:     sub    $0x20,%rsp\n   0x0000000000400535 &lt;+8&gt;:     mov    %edi,-0x14(%rbp)\n   0x0000000000400538 &lt;+11&gt;:    mov    %rsi,-0x20(%rbp)\n   0x000000000040053c &lt;+15&gt;:    jmp    0x400561 &lt;main+52&gt;\n   0x000000000040053e &lt;+17&gt;:    mov    -0x4(%rbp),%eax\n   0x0000000000400541 &lt;+20&gt;:    cltq   \n   0x0000000000400543 &lt;+22&gt;:    lea    0x0(,%rax,8),%rdx\n   0x000000000040054b &lt;+30&gt;:    mov    -0x20(%rbp),%rax\n   0x000000000040054f &lt;+34&gt;:    add    %rdx,%rax\n   0x0000000000400552 &lt;+37&gt;:    mov    (%rax),%rax\n   0x0000000000400555 &lt;+40&gt;:    mov    %rax,%rdi\n   0x0000000000400558 &lt;+43&gt;:    callq  0x400410 &lt;puts@plt&gt;\n   0x000000000040055d &lt;+48&gt;:    addl   $0x1,-0x4(%rbp)\n   0x0000000000400561 &lt;+52&gt;:    mov    -0x4(%rbp),%eax\n   0x0000000000400564 &lt;+55&gt;:    cmp    -0x14(%rbp),%eax\n   0x0000000000400567 &lt;+58&gt;:    jl     0x40053e &lt;main+17&gt;\n   0x0000000000400569 &lt;+60&gt;:    leaveq \n   0x000000000040056a &lt;+61&gt;:    retq   \n</code></pre>\n\n<p>Any input is appreciated, thanks.</p>\n\n<pre><code>(gdb) disass 0x400410\nDump of assembler code for function puts@plt:\n   0x0000000000400410 &lt;+0&gt;:     jmpq   *0x200c02(%rip)        # 0x601018 &lt;puts@got.plt&gt;\n   0x0000000000400416 &lt;+6&gt;:     pushq  $0x0\n   0x000000000040041b &lt;+11&gt;:    jmpq   0x400400\nEnd of assembler dump.\n(gdb) disass 0x601018\nDump of assembler code for function puts@got.plt:\n   0x0000000000601018 &lt;+0&gt;:     (bad)  \n   0x0000000000601019 &lt;+1&gt;:     add    $0x40,%al\n   0x000000000060101b &lt;+3&gt;:     add    %al,(%rax)\n   0x000000000060101d &lt;+5&gt;:     add    %al,(%rax)\n   0x000000000060101f &lt;+7&gt;:     add    %ah,(%rsi)\nEnd of assembler dump.\n</code></pre>\n\n<p>In fact I can't even seem to find where it's printing out in puts.  I must be missing something, just don't know what.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1422463502, "post_id": 28197649, "comment_id": 44761854, "body": "<code>while (!EOF) { ...}</code> EOF is a constant. Note: <code>fread()</code> takes 4 arguments. And it returns a value."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1422463654, "post_id": 28197649, "comment_id": 44761956, "body": "mandatory: <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\" title=\"while feof file is always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1422463662, "post_id": 28197649, "comment_id": 44761962, "body": "@wildplasser I think this is the unfortunately chosen &quot;<i>PSEUDOCODE</i>&quot; part. Not sure though."}], "answers": [{"tags": [], "owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "is_accepted": false, "score": 22, "last_activity_date": 1471878797, "last_edit_date": 1471878797, "creation_date": 1422463587, "answer_id": 28197753, "question_id": 28197649, "link": "https://stackoverflow.com/questions/28197649/reading-binary-file-in-c-in-chunks/28197753#28197753", "title": "Reading binary file in C (in chunks)", "body": "<p><code>fread()</code> returns the number of bytes read. You can loop until that's 0.</p>\n\n<pre><code>FILE *file = NULL;\nunsigned char buffer[1024];  // array of bytes, not pointers-to-bytes\nsize_t bytesRead = 0;\n\nfile = fopen(myfile, \"rb\");   \n\nif (file != NULL)    \n{\n  // read up to sizeof(buffer) bytes\n  while ((bytesRead = fread(buffer, 1, sizeof(buffer), file)) &gt; 0)\n  {\n    // process bytesRead worth of data in buffer\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4499870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0e36797a0fb0aa7b97da5bb701afd49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/4499870/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14230, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1471878797, "creation_date": 1422463292, "last_edit_date": 1422463395, "question_id": 28197649, "link": "https://stackoverflow.com/questions/28197649/reading-binary-file-in-c-in-chunks", "title": "Reading binary file in C (in chunks)", "body": "<p>I'm not good at C and I'm trying to do something simple. I want to open a binary file, read blocks of 1024 bytes of data and dump into a buffer, process the buffer, read another 1024 byes of data and keep doing this until EOF. I know how / what I want to do with the buffer, but it's the loop part and file I/O I keep getting stuck on.</p>\n\n<p>PSEUDO code:</p>\n\n<pre><code>FILE *file;\nunsigned char * buffer[1024];\n\nfopen(myfile, \"rb\");\n\nwhile (!EOF)\n{\n  fread(buffer, 1024);\n  //do my processing with buffer;\n  //read next 1024 bytes in file, etc.... until end\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "stack"], "comments": [{"owner": {"reputation": 955, "user_id": 4384927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c233d91742b49c9a2f27a62e9f08b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chostakovitch", "link": "https://stackoverflow.com/users/4384927/chostakovitch"}, "edited": false, "score": 0, "creation_date": 1422463300, "post_id": 28197600, "comment_id": 44761719, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3113668/where-pointers-and-global-variables-in-c-are-saved-in-memory-in-heap-or-in-stac\">where pointers and global variables in C are saved in memory, in heap or in stack?</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1422463379, "post_id": 28197600, "comment_id": 44761780, "body": "It is operating system and/or processor and/or compiler specific (i.e. implementation). I&#39;m not sure the C standard <i>requires</i> a stack (even if every implementation of C I know about uses one)"}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1422463979, "post_id": 28197600, "comment_id": 44762172, "body": "@BasileStarynkevitch: C Standard does not require stack. In general it does not tell how things are or should be implemented internally (See C11 1/p2 Scope). It just happens that is used commonly for storing objects with automatic storage duration, mostly by the architecture of CPUs."}], "answers": [{"tags": [], "owner": {"reputation": 2080, "user_id": 4157487, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d14df3ab7cb8c9e793b7d30ec3d740e?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/4157487/george"}, "is_accepted": true, "score": 1, "last_activity_date": 1422471768, "creation_date": 1422471768, "answer_id": 28200311, "question_id": 28197600, "link": "https://stackoverflow.com/questions/28197600/memory-division-in-c/28200311#28200311", "title": "Memory Division in C", "body": "<p>Constants may be inlined by the compiler so that they are not backed by a memory location at all. Constants that are backed by a memory location may be put in readonly memory. The exact implementation depends on the compiler, the OS and hardware. For example, on a modern computer with a modern OS constants may be placed in virtual memory pages marked as read-only. An attempt to write to such memory will generate a general protection fault. On an embedded system, constants may be placed in ROM.</p>\n\n<p>Literal strings that you use in your program are commonly assigned into constant memory.</p>\n\n<p>None of this is required by the C standard. The only thing required of a portable program is that you do not attempt to modify your constants. If you modify data that the compiler thinks is constant, your program's behavior is undefined. Consider, for example, what happens if you take a an address of a string literal used in your program and try to modify the string through this pointer. The same string may be used elsewhere in your program and the compiler is allowed to merge all occurrences and only allocate space for one copy of the string. On some implementations you may be able to modify the string, which will affect all parts of your program that happen to use the same string literal. On other implementations you'll get a general protection fault and your program will terminate. On still other implementations you will modify your string as if it was not constant.</p>\n"}], "owner": {"reputation": 3, "user_id": 4362453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e0b77a6630e2e3e42cad1e0b1e6591?s=128&d=identicon&r=PG&f=1", "display_name": "MiniG", "link": "https://stackoverflow.com/users/4362453/minig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 28200311, "answer_count": 1, "score": 0, "last_activity_date": 1422471768, "creation_date": 1422463144, "question_id": 28197600, "link": "https://stackoverflow.com/questions/28197600/memory-division-in-c", "title": "Memory Division in C", "body": "<p>I'm trying to understand the division of the memory. I know that it's divided in stack, heap, globals and constants. The stack contains the variables inside the <code>main ()</code>, the heap it's used with the <code>malloc</code> function; but which is the difference between globals and constants? I hope you can help me to solve this doubt. Thanks!</p>\n"}, {"tags": ["c++", "c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1422462990, "post_id": 28197461, "comment_id": 44761498, "body": "It has a bug because?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1422463062, "post_id": 28197461, "comment_id": 44761548, "body": "It seems it&#39;s <i>someone else</i> how likes to know that."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422464065, "post_id": 28197461, "comment_id": 44762235, "body": "@iharob It does have a bug.  See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1422464024, "post_id": 28197840, "comment_id": 44762207, "body": "I would consider passing a size of 0 to <code>realloc</code> to be a bug to begin with. Different implementations vary, often in non-conforming ways, with regard to how they handle this case. <code>realloc</code> to size 0 is <b>not</b> specified to be the same as <code>free</code> except on implementations where <code>malloc(0)</code> returns a null pointer, but some implementations wrongly make it the same, and there&#39;s no clean way to handle the difference (to determine whether it&#39;s an error or an expected behavior). Just avoid doing this."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1422464159, "post_id": 28197840, "comment_id": 44762307, "body": "See definition of <a href=\"http://www.cplusplus.com/reference/cstdlib/realloc/\" rel=\"nofollow noreferrer\">realloc</a>."}, {"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1422464412, "post_id": 28197840, "comment_id": 44762484, "body": "@R.. Thanks for pointing that out.  I&#39;ve added a note regarding the different standards."}], "tags": [], "owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "is_accepted": true, "score": 2, "last_activity_date": 1422464361, "last_edit_date": 1422464361, "creation_date": 1422463878, "answer_id": 28197840, "question_id": 28197461, "link": "https://stackoverflow.com/questions/28197461/whats-the-bug-with-a-possible-wrapper-function-of-realloc-c-function/28197840#28197840", "title": "What&#39;s the bug with a possible wrapper function of realloc C function?", "body": "<p>A null-pointer return value from <code>realloc</code> may indicate either:</p>\n\n<ol>\n<li>That the function did not allocate storage.</li>\n<li>That the size parameter was zero and the memory was deallocated.</li>\n</ol>\n\n<p>Your code covers the first possibility, but not the second.  A null return value can be valid, indicating that deallocation of a memory block completed succesfully.  Signalling an error under these conditions is a bug.</p>\n\n<p><strong>Note this applies for C90 C++98</strong></p>\n\n<p>As noted in the comments, passing a size parameter of 0 is implementation specific in C99/C11 C++11.</p>\n"}, {"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1422463897, "creation_date": 1422463897, "answer_id": 28197853, "question_id": 28197461, "link": "https://stackoverflow.com/questions/28197461/whats-the-bug-with-a-possible-wrapper-function-of-realloc-c-function/28197853#28197853", "title": "What&#39;s the bug with a possible wrapper function of realloc C function?", "body": "<p>There is at least one bug; this line:</p>\n\n<pre><code>    if (new_ptr != *ptr)\n</code></pre>\n\n<p>invokes undefined behavior. Any use of the old pointer, especially comparison with the new one, after <code>realloc</code> succeeds, is forbidden. You need to make the assignment unconditionally.</p>\n\n<p>Further, while this is not an internal bug, the external API is misdesigned and error-prone. Often the type of the caller's pointer will not be <code>void *</code> but some other pointer type like <code>char *</code> or <code>struct foo *</code>, and you'll have users doing:</p>\n\n<pre><code>reallocX((void **)&amp;myptr, size);\n</code></pre>\n\n<p>This causes your function to invoke undefined behavior via aliasing violations (at the very least; possibly also out-of-bound writes if different pointer types vary in size/representation) because it's accessing a <code>void *</code> object at an address that does not point to a <code>void *</code> object but to some other type of pointer object.</p>\n\n<p>These kinds of wrappers are simply harmful and need to be rejected. There's no way to do them right/safely.</p>\n"}], "owner": {"reputation": 63, "user_id": 4433636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/45ac43a5940e6a876a5ddf1842943cd7?s=128&d=identicon&r=PG&f=1", "display_name": "dsfbi_13052013", "link": "https://stackoverflow.com/users/4433636/dsfbi-13052013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 28197840, "answer_count": 2, "score": -1, "last_activity_date": 1422464361, "creation_date": 1422462742, "question_id": 28197461, "link": "https://stackoverflow.com/questions/28197461/whats-the-bug-with-a-possible-wrapper-function-of-realloc-c-function", "title": "What&#39;s the bug with a possible wrapper function of realloc C function?", "body": "<p>I like to know the possible bug in the following possible wrapper function of the realloc C function:</p>\n\n<pre><code>void reallocX(void** ptr, size_t size)\n{\n    void *new_ptr = realloc(*ptr, size);\n    if (new_ptr != NULL)\n    {\n        if (new_ptr != *ptr)\n        {\n            *ptr = new_ptr;\n        }\n    }\n    else\n    {\n        printf( \"Help! realloc returned NULL!\\n\");\n        exit( EXIT_FAILURE);\n    }\n}\n</code></pre>\n\n<p>.</p>\n\n<p>I know that it is based in the possible wrapper function of the malloc C function, that is:</p>\n\n<pre><code>void *\nmallocX (size_t nbytes)\n{\n  void *ptr;\n  ptr = malloc (nbytes);\n  if (ptr == NULL) {\n    printf( \"Help! malloc returned NULL!\\n\");\n    exit (EXIT_FAILURE);\n  }\n  return ptr;\n}\n</code></pre>\n\n<p>. This malloc C function wrapper function is based on the \"mallocc\" C function of <a href=\"http://www.ime.usp.br/~pf/algoritmos/aulas/aloca.html\" rel=\"nofollow\">this webpage</a>. </p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422461558, "post_id": 28197006, "comment_id": 44760525, "body": "<code>fails</code>? what you mean? You are not checking for that, so how do you know it failed?"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 2, "creation_date": 1422461614, "post_id": 28197006, "comment_id": 44760562, "body": "<code>%s</code> (and the other conversion specifiers with skipping) skips <i>initial</i> white-space, not trailing. (So the second <code>scanf</code> fails.)"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 1, "creation_date": 1422464138, "post_id": 28197006, "comment_id": 44762294, "body": "@mafso: Was thinking about the common issue with <code>%c</code>, nevermind"}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 4, "last_activity_date": 1422462528, "last_edit_date": 1422462528, "creation_date": 1422461752, "answer_id": 28197109, "question_id": 28197006, "link": "https://stackoverflow.com/questions/28197006/the-scanf-function-the-specifer-s-and-the-new-line/28197109#28197109", "title": "The scanf function, the specifer %s and the new line", "body": "<p><code>%s</code> consumes everything <strong>until</strong> a whitespace character and discards <strong>leading</strong> whitespace characters not trailing ones. The <code>[</code> conversion specifier in the second <code>scanf</code> does not skip leading whitespace characters and therefore, fails to scan because of the newline character(which is a whitespace character) left over by the first <code>scanf</code>.</p>\n\n<p>To fix the issue, either use</p>\n\n<pre><code>int c;\nwhile((c=getchar())!='\\n' &amp;&amp; c!=EOF);\n</code></pre>\n\n<p>After the first <code>scanf</code> to clear the <code>stdin</code> or add a space before the format specifier(<code>%[</code>) in the second <code>scanf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1422462031, "post_id": 28197117, "comment_id": 44760851, "body": "@haccks: 7.21.6.2/8 - Input white-space characters (as specified by the <code>isspace</code> function) are skipped, unless the specification includes a <code>[</code>, <code>c</code>, or <code>n</code> specifier."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1422462033, "post_id": 28197117, "comment_id": 44760854, "body": "@haccks: the specifier <code>%s</code> skips as many white space characters as found (can be 0)"}, {"owner": {"reputation": 19170, "user_id": 65120, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ac81051f3e74f6bf8ff6a4e60c47adf6?s=128&d=identicon&r=PG", "display_name": "xdevel2000", "link": "https://stackoverflow.com/users/65120/xdevel2000"}, "edited": false, "score": 0, "creation_date": 1422464402, "post_id": 28197117, "comment_id": 44762474, "body": "Ok, so, can we say that the difference is that [...], %c, and %n,  retains leading and trailing white-spaces while %s only trailing?"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 4, "last_activity_date": 1422481850, "last_edit_date": 1422481850, "creation_date": 1422461765, "answer_id": 28197117, "question_id": 28197006, "link": "https://stackoverflow.com/questions/28197006/the-scanf-function-the-specifer-s-and-the-new-line/28197117#28197117", "title": "The scanf function, the specifer %s and the new line", "body": "<blockquote>\n  <p>So also %s doesn't discard a new line?</p>\n</blockquote>\n\n<p><code>%s</code> tells <code>scanf</code> to discard any <em>leading</em> whitespace, including newlines.  It will then read any non-whitespace characters, leaving any trailing whitespace in the input buffer.</p>\n\n<p>So assuming your input stream looks like <code>\"\\n\\ntest\\n\"</code>, <code>scanf(\"%s\", buf)</code> will discard the two leading newlines, consume the string <code>\"test\"</code>, and leave the trailing newline in the input stream, so after the call the input stream looks like <code>\"\\n\"</code>.  </p>\n\n<p><strong>Edit</strong></p>\n\n<p>Responding to xdevel2000's comment here.</p>\n\n<p>Let's talk about how conversion specifiers work.  Here are some relevant paragraphs from the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">online C 2011 standard</a>:</p>\n\n<blockquote>\n<strong>7.21.6.2 The fscanf function</strong><br>\n...<br>\n9 An input item is read from the stream, unless the specification includes an n specifier. An input item is defined as the longest sequence of input characters which does not exceed any specified field width and which is, or is a prefix of, a matching input sequence.<sup>285)</sup>\nThe first character, if any, after the input item remains unread. If the length of the input item is zero, the execution of the directive fails; this condition is a matching failure unless end-of-file, an encoding error, or a read error prevented input from the stream, in which case it is an input failure.<br>\n<br>\n10 Except in the case of a <code>%</code> specifier, the input item (or, in the case of a <code>%n</code> directive, the\ncount of input characters) is converted to a type appropriate to the conversion specifier. If the input item is not a matching sequence, the execution of the directive fails: this condition is a matching failure. Unless assignment suppression was indicated by a <code>*</code>, the result of the conversion is placed in the object pointed to by the first argument following\nthe format argument that has not already received a conversion result. If this object does not have an appropriate type, or if the result of the conversion cannot be represented in the object, the behavior is undefined.<br>\n<br>\n12 The conversion specifiers and their meanings are:<br>\n...<br>\n<code>c</code> Matches a sequence of characters of exactly the number specified by the field width (1 if no field width is present in the directive).<sup>286)</sup><br>\n...<br>\n<code>s</code> Matches a sequence of non-white-space characters.<sup>286)</sup><br>\n...<br>\n<code>[</code> Matches a nonempty sequence of characters from a set of expected characters\n(the <em>scanset</em>).<sup>286)</sup><br>\n...\n<hr>\n<sup>\n285) <code>fscanf</code> pushes back at most one input character onto the input stream. Therefore, some sequences that are acceptable to <code>strtod</code>, <code>strtol</code>, etc., are unacceptable to <code>fscanf</code>.<br><br>\n286) No special provisions are made for multibyte characters in the matching rules used by the <code>c</code>, <code>s</code>, and <code>[</code>\nconversion specifiers \u2014 the extent of the input field is determined on a byte-by-byte basis. The\nresulting field is nevertheless a sequence of multibyte characters that begins in the initial shift state.\n</sup>\n</blockquote>\n\n<p><code>%s</code> matches a sequence of <em>non-whitespace</em> characters.  Here's a basic algorithm describing how it works (not taking into account end of file or other exceptional conditions):</p>\n\n<pre><code>c &lt;- next character from input stream\nwhile c is whitespace\n  c &lt;- next character from input stream\nwhile c is not whitespace\n  append c to target buffer\n  c &lt;- next character from input stream\npush c back onto input stream\nappend 0 terminator to target buffer\n</code></pre>\n\n<p>The first whitespace character after the non-whitespace characters (if any) is pushed back onto the input stream for the next input operation to read.  </p>\n\n<p>By contrast, the algorithm for the <code>%c</code> specifier is dead simple (unless you're using a field width greater than 1, which I've never done and won't get into here):</p>\n\n<pre><code>c &lt;- next character from input stream\nwrite c to target\n</code></pre>\n\n<p>The algorithm for the <code>%[</code> conversion specifier is a little different:</p>\n\n<pre><code>c &lt;- next character from input stream\nwhile c is in the list of characters in the scan set\n  append c to target buffer\n  c &lt;- next character from input stream\nappend 0 to target buffer\npush c back onto input stream\n</code></pre>\n\n<p>So, it's a mistake to describe any conversion specifier as \"retaining\" trailing whitespace (which would imply that the trailing whitespace is saved to the target buffer); that's not the case.  Trailing whitespace is left in the input stream for the next input operation to read.  </p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1422465035, "last_edit_date": 1422465035, "creation_date": 1422463089, "answer_id": 28197582, "question_id": 28197006, "link": "https://stackoverflow.com/questions/28197006/the-scanf-function-the-specifer-s-and-the-new-line/28197582#28197582", "title": "The scanf function, the specifer %s and the new line", "body": "<p>Your excerpt from the standard omits important context.  The preceding text specifies that skipping whitespace is the <em>first step</em> in processing a conversion specifier for a type other than <code>c</code>, <code>[</code>, or <code>n</code>.</p>\n\n<p>The next step, other than for an <code>n</code> specifier, is to read an input item, which is defined as \"the longest sequence of input characters which does not exceed any specified field width and which is, or is a prefix of, a matching input sequence\" (quoted from C99, but equivalent applies to C2011).</p>\n\n<p>An <code>s</code> item \"[m]atches a sequence of non-white-space characters\", so with the input you specify, the first <code>scanf()</code> reads everything up to, but not including, the newline.</p>\n\n<p>The standard explicitly specifies</p>\n\n<blockquote>\n  <p>Trailing white space (including new-line characters) is left unread unless matched by a directive.</p>\n</blockquote>\n\n<p>so the newline definitely remains unscanned at this point.</p>\n\n<p>The format given to the next <code>scanf()</code> starts with a <code>%[</code> conversion specifier, which, as you already observed, does <strong>not</strong> cause whitespace (leading or otherwise) to be skipped, though it can include whitespace in the item that is scanned.  Since the next character available from the input is a newline, however, and the given scan set for your <code>%[</code> does not include that character, zero characters are scanned for that item.  Going back to the standard (C99, again):</p>\n\n<blockquote>\n  <p>If the length of the input item is zero, the execution of the directive fails; this condition is a matching failure unless end-of-file, an encoding error, or a read error prevented input from the stream, in which case it is an input failure.</p>\n</blockquote>\n\n<p>There are easier ways to read free-form input line by line, but you can do it with <code>scanf()</code> if you must.  For example:</p>\n\n<pre><code>char buff[10 + 1] = {0};\nprintf(\"Input: \");\n/*\n * Ignore leading whitespace and scan a string of up to 10 non-whitespace\n * characters.  Zero-length inputs will produce a matching failure, leaving\n * the buffer unchanged (and initialized to an empty string).  End of\n * input will produce an input error, which is ignored.\n */\nscanf(\"%10s\", buff);\n\n/* Scan and ignore anything else up to a newline.  There will\n * be an (ignorable) matching failure if the next available character is a\n * newline.  Any input error generated by this call is also ignored.\n */\nscanf(\"%*[^\\n]\");\n\n/*\n * Consume the next character, if any.  If there is one, it will be a\n * newline.  An input error will occur if we're already at the end of stdin;\n * a careful program would test for that (by comparing the return value to\n * EOF) but this one doesn't.\n */\nscanf(\"%*c\");\n\nprintf(\"Input: \");\n\n/* scan the second string; again, we're ignoring matching and input errors */\nchar buff_2[5 + 1] = {0};\nscanf(\"%5[abcde]\", buff_2);\n</code></pre>\n\n<p>If you're exclusively using <code>scanf()</code> for such a job then it is essential to read each line in three steps, as shown, because each one can produce a matching failure that would prevent any attempt to match subsequent items.</p>\n\n<p>Note, too, how maximum field widths are matched to buffer sizes in that example, which your original code did not do correctly.</p>\n"}], "owner": {"reputation": 19170, "user_id": 65120, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ac81051f3e74f6bf8ff6a4e60c47adf6?s=128&d=identicon&r=PG", "display_name": "xdevel2000", "link": "https://stackoverflow.com/users/65120/xdevel2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3706, "favorite_count": 0, "accepted_answer_id": 28197117, "answer_count": 3, "score": 2, "last_activity_date": 1422481850, "creation_date": 1422461484, "last_edit_date": 1422461648, "question_id": 28197006, "link": "https://stackoverflow.com/questions/28197006/the-scanf-function-the-specifer-s-and-the-new-line", "title": "The scanf function, the specifer %s and the new line", "body": "<p>I read into C11 standard this:</p>\n\n<blockquote>\n  <p>Input white-space characters (as speci\ufb01ed by the isspace function) are\n  skipped, unless the speci\ufb01cation includes a [, c, or n speci\ufb01er.</p>\n</blockquote>\n\n<p>so I understand that if I use that specifiers the next <code>scanf</code> can contains for example a new line.</p>\n\n<p>But if I write this:</p>\n\n<pre><code>char buff[5 + 1];\nprintf(\"Input: \");\nscanf(\"%10s\", buff);\n\nprintf(\"Input: \");\n\nchar buff_2[5 + 1];\nscanf(\"%[abcde]\", buff_2);\n</code></pre>\n\n<p>and then I input, i.e., <code>RR</code> and then <kbd>Return</kbd>, \nthe next <code>scanf</code> fails because of <code>\\n</code>.</p>\n\n<p>So also <code>%s</code> doesn't discard a new line?</p>\n"}, {"tags": ["c", "linux", "memory", "memory-management", "memory-leaks"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1422460838, "post_id": 28196760, "comment_id": 44760088, "body": "How did you detect the leak, did you use <a href=\"http://www.valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a>? if you didn&#39;t do it."}, {"owner": {"reputation": 1033, "user_id": 2841441, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c636f049b64847e01e361422b22f3c22?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/2841441/joe"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422461175, "post_id": 28196760, "comment_id": 44760284, "body": "@iharob thanks for your comment. But, on this scenario, I can not use valgrind. This particular process has eaten up all the available system memory and crashed himself forcing a core. We have another machine in the same situation, But not crashed yet. I&#39;m trying to get maximum out of the live process before it die and the core available."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 2, "creation_date": 1422461402, "post_id": 28196760, "comment_id": 44760425, "body": "joe, such a program shouldn&#39;t exist. Eating up the memory should lead to the program being terminated due to an out-of-memory error. Long before that happens, using valgrind should still be possible."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422461627, "post_id": 28196760, "comment_id": 44760567, "body": "If it&#39;s impossible to use <code>valgrind</code> which I also doubt as Marcus M&#252;ller does, you can read <a href=\"http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html\" rel=\"nofollow noreferrer\">this</a>. But in case the libraries have some custom allocator it wont work."}, {"owner": {"reputation": 1033, "user_id": 2841441, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c636f049b64847e01e361422b22f3c22?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/2841441/joe"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1422464644, "post_id": 28196760, "comment_id": 44762631, "body": "@MarcusM&#252;ller as I said, no instrumentation possible in the binary. Are you talking about the OOM killer? the process cored before that. It caused an malloc failure and called abort ()"}], "answers": [{"comments": [{"owner": {"reputation": 1033, "user_id": 2841441, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c636f049b64847e01e361422b22f3c22?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/2841441/joe"}, "edited": false, "score": 0, "creation_date": 1422464385, "post_id": 28196967, "comment_id": 44762459, "body": "thanks for taking a look @Marcus M&#252;ller, but the thing is - what I&#39;m talking about here is a problem in a released code. No instrumentation possible. as I have mentioned in earlier comment, all i&#39;ve is just a binary and a core file generated from a similar binary. I know about Vallgrind, I &#39;ve used it also. but not to help here."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 1033, "user_id": 2841441, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c636f049b64847e01e361422b22f3c22?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/2841441/joe"}, "edited": false, "score": 0, "creation_date": 1422464697, "post_id": 28196967, "comment_id": 44762667, "body": "Well if everything is compiled and there&#39;s no debugging symbols in there, how in the world would anyone know where memory allocation takes place? However, as long as that program is not compiled statically, libc calls should be interceptible by valgrind. I&#39;m a bit confused here."}, {"owner": {"reputation": 1033, "user_id": 2841441, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c636f049b64847e01e361422b22f3c22?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/2841441/joe"}, "edited": false, "score": 0, "creation_date": 1422875828, "post_id": 28196967, "comment_id": 44907455, "body": "I am dealing with a core from a core from a released code for a problem which is reproducible only on customer side. So my hands and legs are all tied here. My question was more on a forensic analysis on the core perspective. However, accepting your answer for the right approach you have mentioned for debugging."}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": true, "score": 0, "last_activity_date": 1422461340, "creation_date": 1422461340, "answer_id": 28196967, "question_id": 28196760, "link": "https://stackoverflow.com/questions/28196760/is-there-a-way-to-identify-details-about-memory-allocations-from-a-library/28196967#28196967", "title": "Is there a way to identify details about memory allocations from a library", "body": "<p>This is going to be a bit hard if you do it without the help of external tools. You have to be aware that there's nothing like a \"gauge\" telling your process how much memory it's actually using, and which library function allocated that memory. This has basically to do with two things:</p>\n\n<ol>\n<li>Your OS, which is handing your process the memory, doesn't care or know which library asked for memory -- getting a new page mapped into your process' memory is just a syscall like any other.</li>\n<li>Usually, libc's are the ones providing functionality like <code>malloc()</code> and <code>free()</code> to programs/libraries/programmers. These functions wrap your OS'es memory assignment/unassignment (in fact, mapping and unmapping) functionalities; this allows you to allocate and free memory in units that are not multiples of page sizes (4kB, usually). However, this also means that you can't really rely on your OS to tell you how much of the memory your process got really is in use, how much has been properly cleaned up, and how much is leaking.</li>\n</ol>\n\n<p>Therefore, you'll need some mechanism to deal with <code>libc</code> and your OS, that allows you to inspect what your process is doing inside. A typical tool is Valgrind. It's not overly complex, so I encourage you to try it.</p>\n"}], "owner": {"reputation": 1033, "user_id": 2841441, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c636f049b64847e01e361422b22f3c22?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/2841441/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 28196967, "answer_count": 1, "score": 0, "last_activity_date": 1422461340, "creation_date": 1422460736, "question_id": 28196760, "link": "https://stackoverflow.com/questions/28196760/is-there-a-way-to-identify-details-about-memory-allocations-from-a-library", "title": "Is there a way to identify details about memory allocations from a library", "body": "<p>My process which is linked to multiple libraries is causing a memory leak. The memory leak is coming from one of the libraries. I am trying to see if there is a way to identify the memory allocated from the functions residing in these libraries. what size each library is using?</p>\n\n<p>Would memory allocator follow any specific way while allocating based on where malloc is called from. Like, if it is called from Lib A, allocation will happen from address starts from 0xA, for lib B, 0xB etc. </p>\n\n<p>Basically, I 'm trying to see if there is a way to identify the leaking library and leaked memory and to dump that. </p>\n"}, {"tags": ["c", "linux", "alsa"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1422464601, "post_id": 28196433, "comment_id": 44762604, "body": "What happens after the code you&#39;ve shown?"}, {"owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1422502580, "post_id": 28196433, "comment_id": 44778544, "body": "After the shown code snippet i am closing playback_handle."}], "answers": [{"comments": [{"owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "edited": false, "score": 0, "creation_date": 1422596680, "post_id": 28209932, "comment_id": 44822470, "body": "Thank you. The issue was solved. The issue was with setting the hw params."}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 0, "last_activity_date": 1422519516, "creation_date": 1422519516, "answer_id": 28209932, "question_id": 28196433, "link": "https://stackoverflow.com/questions/28196433/snd-pcm-writei-not-working-after-a-delay/28209932#28209932", "title": "snd_pcm_writei not working after a delay", "body": "<p><code>snd_pcm_write*()</code> just writes samples to the buffer, but returns immediately when all the samples are in the buffer.</p>\n\n<p>To wait until all samples in the buffer have been played, call <code>snd_pcm_drain()</code>.</p>\n"}], "owner": {"reputation": 224, "user_id": 3663917, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RWAo3.jpg?s=128&g=1", "display_name": "user-ag", "link": "https://stackoverflow.com/users/3663917/user-ag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422519516, "creation_date": 1422459876, "last_edit_date": 1422502958, "question_id": 28196433, "link": "https://stackoverflow.com/questions/28196433/snd-pcm-writei-not-working-after-a-delay", "title": "snd_pcm_writei not working after a delay", "body": "<p>I was trying to generate a beep sound using ALSA. 2 beep sounds should be generated, the 2nd one after a delay of 1 second. My code looks like the following.</p>\n\n<pre><code>if ((err = snd_pcm_prepare (playback_handle)) &lt; 0) {\n    printf(\"cannot prepare audio interface for use \\n\");\n    return -1;\n}\n\n\nfor (i = 0; i &lt; TABLE_SIZE; i ++){\n    samples[i] = 100*sin(2.0*pi*f*(i/44100.0));\n    if ((err = snd_pcm_writei (playback_handle, &amp;samples[i], 4)) != 4) {\n        printf(\"write to audio interface failed \\n\");\n        return -1;\n    }\n}\n\n//snd_pcm_drain(playback_handle);\n\nprintf(\"ending beep !!! \\n\");\nsleep(1);\n\nif ((err = snd_pcm_prepare (playback_handle)) &lt; 0) {\n    printf(\"cannot prepare audio interface for use \\n\");\n    return -1;\n}\nfor (i = 0; i &lt; TABLE_SIZE; i ++){\n    samples[i] = 100*sin(2.0*pi*f*(i/44100.0));\n    if ((err = snd_pcm_writei (playback_handle, &amp;samples[i], 4)) != 4) {\n        printf(\"write to audio interface failed \\n\");\n        return -1;\n    }\n}\n</code></pre>\n\n<p>Here the first beep is heard properly but the second beep is not OK. Can anyone help me with this issue.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422460044, "post_id": 28196413, "comment_id": 44759513, "body": "What is your problem? is your code working? or isn&#39;t it? Also, please choose a more readable style for coding, your code is very hard to follow, you put all characters next to each other, for the compiler it&#39;s easy to tokenize your code, but for human eyes it&#39;s all just one huge token, so use more whitespace, that&#39;s just advice of course."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1422460169, "post_id": 28196413, "comment_id": 44759605, "body": "You initialize <code>n</code> to 0. So the <code>while</code> loop in <code>main</code> dosen&#39;t execute."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422460297, "post_id": 28196413, "comment_id": 44759698, "body": "I don&#39;t know what toolset you&#39;re using, but this shouldn&#39;t even <i>compile</i>. Neither <code>CompteBancaire</code> nor <code>ClientJeune</code> are properly declared, and code like <code>CompteBancaire *nov=malloc(sizeof(CompteBancaire)),pnt=first;</code> declares a <i>pointer</i> (<code>nov</code>) and a regular <i>instance</i> (<code>pnt</code>), the latter of which is then assigned a pointer, which isn&#39;t even legal. You&#39;re calling <code>fprintf</code> without passing a <code>FILE*</code>, etc.. Frankly, this code is a <i>mess</i>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1422460362, "post_id": 28196413, "comment_id": 44759757, "body": "Indent your code and remove all the irrelevant parts."}, {"owner": {"reputation": 39, "user_id": 4433010, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100002513018287/picture?type=large", "display_name": "Madox", "link": "https://stackoverflow.com/users/4433010/madox"}, "edited": false, "score": 0, "creation_date": 1422473116, "post_id": 28196413, "comment_id": 44767567, "body": "Please just try to help me. I know my english is si bad but I&#39;m trying to do my best.   Question: I&#39;ve one struct pointer and I want creat a new list from the first one(CompteBancaire), so how can i assign all the content of the first struct pointer to my new structer pointer (ClientJeune) without doing this:  pnt1-&gt;solde=pnt-&gt;solde;  pnt1-&gt;identite.nom=pnt.identite.nom; ..."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422460624, "post_id": 28196647, "comment_id": 44759942, "body": "Where <code>struct XXX</code> is? Maybe this is not the most elegant way, but it works. did you test?"}, {"owner": {"reputation": 955, "user_id": 4384927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c233d91742b49c9a2f27a62e9f08b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chostakovitch", "link": "https://stackoverflow.com/users/4384927/chostakovitch"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422460977, "post_id": 28196647, "comment_id": 44760174, "body": "@iharob I will edit my answer. And yes, I tested, I use this in a program."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422461122, "post_id": 28196647, "comment_id": 44760252, "body": "I hope now you understand what I mean."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422461191, "post_id": 28196647, "comment_id": 44760292, "body": "But this is actually a very bad idea i think, and can&#39;t think of a practical use case, though it seems to answer the question."}, {"owner": {"reputation": 955, "user_id": 4384927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c233d91742b49c9a2f27a62e9f08b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chostakovitch", "link": "https://stackoverflow.com/users/4384927/chostakovitch"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422461248, "post_id": 28196647, "comment_id": 44760325, "body": "@iharob Yes, I understand. I do my best in order to answer the most correctly, but I&#39;m still quite new here and in programming in general. :)"}], "tags": [], "owner": {"reputation": 955, "user_id": 4384927, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c233d91742b49c9a2f27a62e9f08b0ab?s=128&d=identicon&r=PG&f=1", "display_name": "Chostakovitch", "link": "https://stackoverflow.com/users/4384927/chostakovitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1422461094, "last_edit_date": 1422461094, "creation_date": 1422460444, "answer_id": 28196647, "question_id": 28196413, "link": "https://stackoverflow.com/questions/28196413/how-to-assign-a-pointer-in-struct-directly-to-a-new-struct/28196647#28196647", "title": "How to assign a pointer in struct directly to a new struct?", "body": "<p>I don't know if I understood correctly, but if you want to initialize a struct AND assigning it's adress to a pointer</p>\n\n<p>Suppose you have</p>\n\n<pre><code>struct XXX\n{\n    T1 arg1;\n    T2 arg2;\n    T3 arg3;\n    .\n    .\n    .\n};\n</code></pre>\n\n<p>you may want to do something like :</p>\n\n<pre><code>struct XXX *ptr = &amp;(struct XXX){arg1, arg2, arg3, ...};\n</code></pre>\n\n<p>maybe this is not the most elegant way, but it works.</p>\n"}], "owner": {"reputation": 39, "user_id": 4433010, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100002513018287/picture?type=large", "display_name": "Madox", "link": "https://stackoverflow.com/users/4433010/madox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422461094, "creation_date": 1422459823, "question_id": 28196413, "link": "https://stackoverflow.com/questions/28196413/how-to-assign-a-pointer-in-struct-directly-to-a-new-struct", "title": "How to assign a pointer in struct directly to a new struct?", "body": "<p>can you help me please? </p>\n\n<p>I want to manipulate a doubly linked liste that manage a bank accounts, but I don't know why it doesn't work even if I tried vainly to correct all my mistakes. Certainly, It's the first time that i use this nested structer and i don't know how to access from the main structre to the other ones (idt,idf).</p>\n\n<p>2 Questions:</p>\n\n<p>-is this method accepted \"pnt->idt.dn.j_n\" (pnt is a pointer on CompteBancaire)?</p>\n\n<p>-when i traverse the main linked liste using a pointer and i want add a particular struct to my new liste (YoungCustomers), is there any possibility to assign the struct pointer to a new struct that i'll put it in my new liste, instead of assigning each element to it?\n Thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h &gt;\ntypedef struct\n{  int j_n,m_n,a_n;\n}dateDeNaissance;\n\ntypedef struct\n{  char nom[15];\n   char prenom[15];\n    dateDeNaissance dn;\n}identite;\n\ntypedef struct\n{  int numCompte;\n   char nomBanque[20];\n}identifiant;\n/* ------------THE MAIN STRUCT-------------*/\ntypedef struct\n{  identite idt;\n   identifiant idf;\n   float solde;\n   struct CompteBancaire *next;\n   struct CompteBancaire *prc;\n}CompteBancaire;\n/* -----------STRUCT OF YOUNG CUSTOMERS----------------*/\ntypedef struct\n{ CompteBancaire *Cpt;\n struct ClientJeune *next;\n}ClientJeune;\n/*-------------GLOBAL POINTERS------------- */\nCompteBancaire *first=NULL;\nCompteBancaire *first2=NULL;\n/*---------- CREATE A BANC ACOUNTE ---------*/\nvoid saisiNovCompt (char nom[],char prn[],int j,int m,int a,int numCpt,char nomB[],float Solde) //21:32\n{  CompteBancaire *nov=malloc(sizeof(CompteBancaire)),pnt=first;\n   strcpy (nov-&gt;idt.nom,nom);\n   strcpy (nov-&gt;idt.prenom,prn);\n   nov-&gt;idt.dn.j_n=j;\n   nov-&gt;idt.dn.m_n=m;\n   nov-&gt;idt.dn.a_n=a;\n   nov-&gt;idf.numCompte=numCpt;\n   nov-&gt;prc=NULL;\n   strcpy (nov-&gt;idf.nomBanque,nomB);\n   nov-&gt;solde=Solde;\n   if (first==NULL)\n   {  nov-&gt;next=NULL;\n      nov-&gt;prc=NULL;\n      first=nov;\n   }\n   else\n   {  first=nov;\n      nov-&gt;next=pnt;\n      pnt-&gt;prc=nov;\n   }\n}\n/* --------SAVE AN ACCOUNTE IN FILE-------------*/\nvoid fichier (CompteBancaire *pnt)\n{  FILE *Compte;\n   Compte=fopen(\"comptBancaire.txt\",\"w\");\n   fprintf(\"nom: %s\\nprenom: %s\\ndate de naissance: %d/%d/%d\\nnum de compte: %d\\nnom de la banque: %s\\nsolde: %.2f\\n\",\n           pnt-&gt;idt.nom,pnt-&gt;idt.prenom,pnt-&gt;idt.dn.j_n,pnt-&gt;idt.dn.m_n,pnt-&gt;idt.dn.a_n,pnt-&gt;idf.nomCompte,pnt-&gt;idf.nomBanque);\n  fclose(Compte);\n}\n/* -------------- SAVE AN ACCOUNT THAT IT'S NUMBER IS GIVEN BY THE USER ------------------*/\nvoid afficheParNum (int numCpt)\n{  CompteBancaire *pnt=first;\n   if (first==NULL)\n      printf (\"la liste est vide \\n\");\n   else\n   {  while (pnt!=NULL &amp;&amp; pnt-&gt;idf.numDeCompt!=numCpt)\n             pnt=pnt-&gt;next;\n      if (pnt==NULL)\n         printf(\"Compte non trouve !\\n\");\n      else\n         fichier(pnt);\n   }\n}\n/*-----------------REMOVE AN ACCOUNT THAT IT'S NUMBER IS GIVEN BY THE USER--------------------*/\nvoid suppCompt (int numCpt)\n{  CompteBancaire *pnt=first;\n   if (first==NULL)\n       printf(\"la liste vide !\\n\");\n   else\n   {   while (pnt!=NULL &amp;&amp; pnt-&gt;idf.numCompte!=numCpt)\n              pnt=pnt-&gt;next;\n       if (pnt==first) // remove in beginning\n       {  first=pnt-&gt;next;\n          free(pnt);\n       }\n       else if (pnt-&gt;next==NULL) // remove at the end\n       {  (pnt-&gt;prc)-&gt;next=NULL;\n           free(pnt);\n       }\n       else  // remove in the middle\n       {  (pnt-&gt;prc)-&gt;next=pnt-&gt;next;\n          (pnt-&gt;next)-&gt;prc=pnt-&gt;prc;\n           free(pnt);\n       }\n       }\n   }\n   }\n/* ------------------REMOVE THE ACCOUNT IF THE BALANCE IS LESS THEN 0 DH--------------------------*/\nvoid suppInf00 ()\n{CompteBancaire *pnt2=first,*pnt=NULL;\n   if (first==NULL)\n       printf(\"la liste vide !\\n\");\n   else\n   {   while (pnt2!=NULL) {\n       pnt=pnt2;\n       if (pnt-&gt;solde &lt;0) {\n       if (pnt==first) // remove in the beginning\n       {  first=pnt-&gt;next;\n          free(pnt);\n       else if (pnt-&gt;next==NULL) // remove at the end\n       {  (pnt-&gt;prc)-&gt;next=NULL;\n           free(pnt);\n       }\n       else  // remove in the middle\n       {  (pnt-&gt;prc)-&gt;next=pnt-&gt;next;\n          (pnt-&gt;next)-&gt;prc=pnt-&gt;prc;\n           free(pnt);\n       }\n       }\n        pnt2=pnt2-&gt;next;\n   }\n   }\n   }\n\n}\n/* -----------CREAT A LISTE OF YOUNG PEAPLE--------------------- */\nvoid under35 ()\n{  ClientJeune nov,*pnt=first;\n   if (first==NUll)\n      printf(\"liste vide !\\n\");\n   else\n   {  while (pnt!=NULL)\n      if (2015-(pnt-&gt;idt.dn.a_n)&lt;=35)\n      {   nov-&gt;Cpt=pnt;\n          if (first2==NULL)\n             nov-&gt;next=NULL;\n           else\n           {  nov-&gt;next=first2;\n              first2=nov;\n           }\n      }\n   }\n}\n/* -----------------DISPLAY ALL ACCOUNTS---------------------*/\nvoid afficage ()\n{CompteBancaire *pnt=first;\n if(first==NULL)\n    printf(\"liste vide !\\n\");\n else\n { while (pnt!=NULL)\n   printf(\"nom: %s\\nprenom: %s\\ndate de naissance: %d/%d/%d\\n num de compte: %d\\nnom de la banque: %s\\nsolde: %.2f\\n\\n\",\n           pnt-&gt;idt.nom,pnt-&gt;idt.prenom,pnt-&gt;idt.dn.j_n,pnt-&gt;idt.dn.m_n,pnt-&gt;idt.dn.a_n,pnt-&gt;idf.nomCompte,pnt-&gt;idf.nomBanque);\n     pnt=pnt-&gt;next;\n }\n\n}\nint main()\n{int n=0,c,j,m,a,numC;\n float S=0;\nchar A[15],B[15],C[15];\nprintf(\"-----------------Menu-------------------\\n\");\nprintf(\"1----------------------------------Saisi\\n\");\nprintf(\"2----------------------------------affichage par num de compte \\n\");\nprintf(\"3----------------------------------Suppression d'un compte \\n\");\nprintf(\"4----------------------------------Supp inf 00 DH\\n\");\nprintf(\"5----------------------------------under 35ans\\n\");\nprintf(\"6----------------------------------Affichage\\n\\n\");\nwhile (n==1)\n{\n    printf(\"donner votre choix :\");\n    scanf(\"%c\",&amp;c);\n    switch (c)\n    { case 1:printf(\"donner le nom:\");scanf(\"%s\",A);\n             printf(\"donner le prenom:\");scanf(\"%s\",B);\n             printf(\"donner la date de naissance jj mm aa:\");scanf(\"%d %d %d\",&amp;j,&amp;m,&amp;a);\n             printf(\"donner le num du compte:\");scanf(\"%d\",&amp;numC);\n             printf(\"donner le nom de la banque:\");scanf(\"%s\",C);\n             printf(\"donner le solde :\");scanf(\"%f\",&amp;S);\n             saisiNovCompt(A,B,j,m,a,numC,C,S);break;\n     case 2:printf(\"donner le num du compte:\");scanf(\"%d\",&amp;numC);\n            afficheParNum(numC);break;\n     case 3:printf(\"donner le num du compte:\");scanf(\"%d\",&amp;numC);\n            suppCompt(numC);break;\n     case 4:suppInf00();\n            printf(\"suppression solde inf 0 \u00e0 ete efectue\\n\");break;\n     case 5:under35 ();\n            printf(\"une nouvelle liste a ete creer\\n\");break;\n     case 6:affichage();\n     default:printf(\"tapper 1/2/3/4/5/6 !!\\n\");\n    }\n    printf(\"tapper 1:\");\n    scanf(\"%d\",&amp;n);\n}\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 6, "creation_date": 1422458964, "post_id": 28196039, "comment_id": 44758738, "body": "<code>c</code> or <code>c++</code>? not both."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1422459042, "post_id": 28196039, "comment_id": 44758786, "body": "Wouldn&#39;t it be better to use &#39;&amp;(RP6.some_part)&#39;?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1422459043, "post_id": 28196039, "comment_id": 44758787, "body": "It looks like that&#39;s what you&#39;re doing. What is the problem with your code?"}, {"owner": {"reputation": 33, "user_id": 3716789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1941786d7e94b5bf990083177f56699?s=128&d=identicon&r=PG&f=1", "display_name": "Bastonje", "link": "https://stackoverflow.com/users/3716789/bastonje"}, "edited": false, "score": 0, "creation_date": 1422459123, "post_id": 28196039, "comment_id": 44758847, "body": "c, the value of speed is not going into robot.leftMotorSpeed"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1422459123, "post_id": 28196039, "comment_id": 44758848, "body": "@ForceBru No, those parentheses are pointless and obfuscating."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 3, "last_activity_date": 1422458952, "creation_date": 1422458952, "answer_id": 28196086, "question_id": 28196039, "link": "https://stackoverflow.com/questions/28196039/how-to-pass-struct-attributes-as-arguments/28196086#28196086", "title": "How to pass struct attributes as arguments", "body": "<p>Just</p>\n\n<pre><code>robot my_robot;\n\nsetLeftMotorSpeed(&amp;speed, &amp;my_robot.leftMotorSpeed, &amp;rightMotorSpeed);\n</code></pre>\n\n<p>this will work and set the value of <code>my_robot.leftMotorSpeed</code> as you apparently require it to.</p>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1422459221, "creation_date": 1422459221, "answer_id": 28196190, "question_id": 28196039, "link": "https://stackoverflow.com/questions/28196039/how-to-pass-struct-attributes-as-arguments/28196190#28196190", "title": "How to pass struct attributes as arguments", "body": "<p>The <code>chooseRequest()</code> function must take a pointer to a <code>robot</code>, in order to be able to modify it.</p>\n\n<p>As written, you're just modifying a local copy which ceases to exist when the function exits.</p>\n"}, {"tags": [], "owner": {"reputation": 3531, "user_id": 1762193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a75e9.jpg?s=128&g=1", "display_name": "Mike Housky", "link": "https://stackoverflow.com/users/1762193/mike-housky"}, "is_accepted": true, "score": 1, "last_activity_date": 1422461183, "last_edit_date": 1422461183, "creation_date": 1422460767, "answer_id": 28196772, "question_id": 28196039, "link": "https://stackoverflow.com/questions/28196039/how-to-pass-struct-attributes-as-arguments/28196772#28196772", "title": "How to pass struct attributes as arguments", "body": "<p>Your code will be simpler if you simply pass a pointer to the struct and let the function modify the fields that it needs to.  Only pass individual fields (or pointers to them) if the function needs to draw information from more than one robot.  Your <code>setLeftMotorSpeed</code> function could look something like:</p>\n\n<pre><code>void setLeftMotorSpeed(robot *rptr, int speed)\n{\n    rptr-&gt;leftMotorSpeed = speed;\n}\n</code></pre>\n\n<p>This is a trivial example, of course.  The <code>moveAtSpeed</code> function might also use a robot pointer, if the intent of that function is to move just one particular robot.  </p>\n\n<p>This is the beginning of object-oriented thinking, by the way.  You've built a struct to describe a robot.  The next step is to think of functions that act on one of those robot structs as logical operations on the whole robot, so that the code that requests a robot \"speed up\" can be written without worrying about the bit-by-bit details of how that gets done.</p>\n\n<p>PS: Using a pointer for <code>command</code> is not recommended.  Simple read-only values should be passed as normal arguments. It takes extra time and code at each use to \"dereference\" a pointer, and the extra source code complexity isn't needed.  This is a small difference, but the cumulative effect of doing things like this over a whole program can be significant.</p>\n"}], "owner": {"reputation": 33, "user_id": 3716789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1941786d7e94b5bf990083177f56699?s=128&d=identicon&r=PG&f=1", "display_name": "Bastonje", "link": "https://stackoverflow.com/users/3716789/bastonje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 28196772, "answer_count": 3, "score": 1, "last_activity_date": 1422461183, "creation_date": 1422458817, "last_edit_date": 1422459134, "question_id": 28196039, "link": "https://stackoverflow.com/questions/28196039/how-to-pass-struct-attributes-as-arguments", "title": "How to pass struct attributes as arguments", "body": "<p>I'm trying to pass struct parts to functions, is this possible?\nI want to create general functions like the <code>setLeftMotorSpeed</code> below and pass them anything i want, in this case i need to set the <code>robot.leftMotorSpeed</code> via a pointer</p>\n\n<p>Example:</p>\n\n<pre><code>typedef struct\n{\n    int maximumSpeed;\n    int leftMotorSpeed;\n    int rightMotorSpeed;\n    int timesAboveMaximumSpeed;\n    int batteryLevel;\n    int collisions;\n\n}robot;\n\nvoid setLeftMotorSpeed(int *speed, int *leftMotorSpeed, int *rightMotorSpeed)\n{\n    *leftMotorSpeed = *speed;\n}\n\nvoid chooseRequest(int *command, int *speed, robot RP6)\n{\n    switch(*command)\n    {\n        case 1:\n            setMaximumSpeed(speed, &amp;RP6.maximumSpeed);\n            break;\n        case 2:\n            getMaximumSpeed(speed, &amp;RP6.maximumSpeed);\n            break;\n        case 3:\n            setLeftMotorSpeed(speed, &amp;RP6.leftMotorSpeed, &amp;RP6.rightMotorSpeed);\n            moveAtSpeed(RP6.leftMotorSpeed, RP6.rightMotorSpeed);       \n            break;\n        case 4:\n            setRightMotorSpeed(speed, &amp;RP6.leftMotorSpeed, &amp;RP6.rightMotorSpeed);\n            moveAtSpeed(RP6.leftMotorSpeed, RP6.rightMotorSpeed);\n            break;\n        case 5:\n            break;\n        case 6:\n            break;\n        case 7:\n            break;\n        default:\n            break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3019, "user_id": 112934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZNbWe.png?s=128&g=1", "display_name": "AJPerez", "link": "https://stackoverflow.com/users/112934/ajperez"}, "edited": false, "score": 0, "creation_date": 1422457904, "post_id": 28195602, "comment_id": 44757997, "body": "Does the code work anyway? It&#39;s throwing a warning, not an error... (By the way, I&#39;m amazed that there is a &quot;learn-c-the-hard-way&quot; tag :)"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1422457923, "post_id": 28195602, "comment_id": 44758006, "body": "<code>(unsigned char)ch</code> . The standard mandates the passed value to both of those (<a href=\"http://en.cppreference.com/w/c/string/byte/isalpha\" rel=\"nofollow noreferrer\"><code>isalpha</code></a> and <a href=\"http://en.cppreference.com/w/c/string/byte/isblank\" rel=\"nofollow noreferrer\"><code>isblank</code></a>) must be representable as <code>unsigned char</code> or the behavior is undefined."}, {"owner": {"reputation": 722, "user_id": 4300244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7057dff1d207815fcdee665224bee52?s=128&d=identicon&r=PG&f=1", "display_name": "no_name", "link": "https://stackoverflow.com/users/4300244/no-name"}, "reply_to_user": {"reputation": 3019, "user_id": 112934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZNbWe.png?s=128&g=1", "display_name": "AJPerez", "link": "https://stackoverflow.com/users/112934/ajperez"}, "edited": false, "score": 0, "creation_date": 1422458016, "post_id": 28195602, "comment_id": 44758079, "body": "@AjPerez, whoa my bad, It actually works, I still want to get rid of that warning though"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1422458030, "post_id": 28195602, "comment_id": 44758094, "body": "I do not understand why the compiler considers char index as dangerous, but you can change <code>can_print_it(char ch);</code> to <code>can_print_it(int ch);</code> to fix it."}, {"owner": {"reputation": 722, "user_id": 4300244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7057dff1d207815fcdee665224bee52?s=128&d=identicon&r=PG&f=1", "display_name": "no_name", "link": "https://stackoverflow.com/users/4300244/no-name"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1422458079, "post_id": 28195602, "comment_id": 44758121, "body": "@Marian That raised two more errors"}, {"owner": {"reputation": 722, "user_id": 4300244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7057dff1d207815fcdee665224bee52?s=128&d=identicon&r=PG&f=1", "display_name": "no_name", "link": "https://stackoverflow.com/users/4300244/no-name"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422458105, "post_id": 28195602, "comment_id": 44758135, "body": "@WhozCraig I have tried that, two more errors"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1422458177, "post_id": 28195602, "comment_id": 44758181, "body": "@Marian: No, this doesn&#39;t fix it. And this is a potentially subtle bug, as basic characters are positive, so it is observable only for <code>char</code> values bigger than <code>CHAR_MAX</code> (and only if <code>char</code> is signed)."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1422458243, "post_id": 28195602, "comment_id": 44758223, "body": "You shall probably change it also in the declaration, i.e. <code>int can_print_it(char ch);</code> to <code>int can_print_it(int ch);</code>"}, {"owner": {"reputation": 722, "user_id": 4300244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7057dff1d207815fcdee665224bee52?s=128&d=identicon&r=PG&f=1", "display_name": "no_name", "link": "https://stackoverflow.com/users/4300244/no-name"}, "reply_to_user": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1422458283, "post_id": 28195602, "comment_id": 44758247, "body": "That what I&#39;ve Tried @Marian"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422458559, "post_id": 28195602, "comment_id": 44758421, "body": "Can&#39;t see it on <a href=\"http://coliru.stacked-crooked.com/a/78427441d9eb1b84\" rel=\"nofollow noreferrer\">coliru</a>, but I&#39;m pretty sure its in your implementation. both of those appear to be <i>macros</i> indexing into lookup tables; not functions. trace down their decls and you&#39;ll probably find that is the case."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422458585, "post_id": 28195602, "comment_id": 44758436, "body": "What i don&#39;t understand is that the tutorial uses 2 functions from <code>ctype.h</code> instead of just using <code>isprint()</code>.? why would that be?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422459861, "post_id": 28195602, "comment_id": 44759380, "body": "@iharob because they want to use heavier restriction than just printable. The goal of the poorly named <code>can_print_it</code> is to exclude all but alphabetic chars or spaces. Punctuation, digits, etc, are all excluded, where they would not be with <code>isprint</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422459972, "post_id": 28195602, "comment_id": 44759459, "body": "@WhozCraig you are absolutely right."}], "answers": [{"comments": [{"owner": {"reputation": 722, "user_id": 4300244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7057dff1d207815fcdee665224bee52?s=128&d=identicon&r=PG&f=1", "display_name": "no_name", "link": "https://stackoverflow.com/users/4300244/no-name"}, "edited": false, "score": 0, "creation_date": 1422459485, "post_id": 28196056, "comment_id": 44759101, "body": "Changing both of the functions to accept unsigned char&#39;s has worked"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422524831, "post_id": 28196056, "comment_id": 44787104, "body": "The compiler shouldn&#39;t warn for this. The <i>default argument promotions</i> ensure that the char is converted to an int through integer promotion. The original signedness of char for the given implementation is therefore completely irrelevant, as it will always be converted to a (signed) int. Furthermore, there are no arrays in the function can_print_it(). Therefore I believe the correct answer is &quot;the compiler warning is broken&quot;."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": true, "score": 4, "last_activity_date": 1422458861, "creation_date": 1422458861, "answer_id": 28196056, "question_id": 28195602, "link": "https://stackoverflow.com/questions/28195602/learn-c-the-hard-way-exercise-14-error-warning-array-subscript-has-type-char/28196056#28196056", "title": "Learn C The Hard Way exercise 14 Error (warning: array subscript has type ?char? [-Wchar-subscripts]", "body": "<p>The reason for the warning is that char values are usually positive, but sometimes they may be negative; this may come unexpected to the programmer (especially because on some implementations char is always positive), and using a negative index for an array is obviously a bad thing. </p>\n\n<p>isalpha does exactly that behind your back. You fix the warning by casting the char to int or by storing it in an int in the first place - this doesn't fix the problem though, because a negative char will be cast to a negative int which has exactly the same problem. You can fix the warning and the problem by casting the char to an unsigned char. </p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422525001, "post_id": 28196064, "comment_id": 44787218, "body": "If isalpha etc are implemented as macros, the implementation (compiler) is broken, because making them macros would remove the default argument promotion of char to an int, which the programmer will expect to happen, since they are functions. And there are no arrays in the function can_print_it(), so the compiler should not give this warning."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 3, "last_activity_date": 1422459700, "last_edit_date": 1422459700, "creation_date": 1422458884, "answer_id": 28196064, "question_id": 28195602, "link": "https://stackoverflow.com/questions/28195602/learn-c-the-hard-way-exercise-14-error-warning-array-subscript-has-type-char/28196064#28196064", "title": "Learn C The Hard Way exercise 14 Error (warning: array subscript has type ?char? [-Wchar-subscripts]", "body": "<p>So if we look at the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow\">gcc document for warnings which covers -Wchar-subscripts</a> it says:</p>\n\n<blockquote>\n  <p>Warn if an array subscript has type char. This is a common cause of error, as programmers often forget that this type is signed on some machines. This warning is enabled by -Wall. </p>\n</blockquote>\n\n<p>It is implementation defined whether <em>char</em> is signed or unsigned, if you use an <em>unsigned char</em> then the warning will go away.</p>\n\n<p>We can see from the draft C99 standard that the arguments to functions in <code>&lt;ctype.h&gt;</code> are expected to be representable as <em>unsigned char</em> or <code>EOF</code>, from section <code>7.4</code> <em>Character handling &lt;ctype.h&gt;</em>:</p>\n\n<blockquote>\n  <p>In all cases the argument is an int, the value of which shall be\n  representable as an unsigned char or shall equal the value of the macro EOF. If the\n  argument has any other value, the behavior is undefined</p>\n</blockquote>\n\n<p>So most likely <code>isalpha</code> and <code>isblank</code> are implemented as a macro which uses a lookup table and so this code would indeed be using a char to index an array.</p>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1422459340, "post_id": 28196070, "comment_id": 44759006, "body": "Both would fix the warnings, but <i>neither</i> will fix the negative-index lookup when passed a high-ascii value, which is exactly what that warning is designed to address. The  former (1) is closer to the metal, but to properly invoke it requires <code>if(can_print_it((unsigned char)ch))</code> to ensure the conversion to <code>int</code> doesn&#39;t fall right back in to a negative index. (and btw, I did <i>not</i> downtick this)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422460059, "post_id": 28196070, "comment_id": 44759525, "body": "@WhozCraig, If an <code>int</code> is accepted as a valid argument to <code>isalpha</code> and <code>isblank</code>, which can be a negative value in theory, it&#39;s not clear to me how <code>gcc</code> is protecting the use with this warning."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422460873, "post_id": 28196070, "comment_id": 44760112, "body": "Because when <code>int</code> is passed it is <i>not</i> promoted (its already <code>int</code>). If said-<code>int</code> was negative (and it certainly can be, as the type is <i>definitely</i> signed), well, it sucks to be the guy passing a negative <code>int</code>. But <code>char</code> <i>may</i> be signed (usually is). It is (a) promoted to <code>int</code>, and (b) if signed <i>and</i> negative, will have said-sign extended during the promotion. So joe sixpack not knowing his <code>char</code> may actually be a signed-negative value will find out the hard way."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1422461086, "post_id": 28196070, "comment_id": 44760233, "body": "And btw, your <i>second</i> alternative would work if <code>int temp = (unsigned char)ch;</code> were the temporary, though I still think the first is more-correct, putting the onus on the caller to do the cast, just like all the standard ctype <code>iswhatever</code> functions."}, {"owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 0, "creation_date": 1422461163, "post_id": 28196070, "comment_id": 44760275, "body": "@RSahu: On some systems the &quot;&#233;&quot; character (for example) is represented by a <code>char</code> that is negative. The rules for <code>isalpha</code> etc specify that the value passed to them must be representable by an <code>unsigned char</code> (or EOF, but let&#39;s ignore that case for now), which negative numbers are not."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1422462920, "post_id": 28196070, "comment_id": 44761463, "body": "@RSahu: The warning isn&#39;t intended to indicate wrong <code>isalpha</code> etc usage, but using <code>char</code> as array indexes. That OP&#39;s implementation chooses to use a macro function with array indexing for <code>isalpha</code> just makes the warning also appear for those functions (the warning is nonetheless correct, it just isn&#39;t as useful, because it doesn&#39;t cover other (very similar) wrong usages of <code>isalpha</code>)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1422463316, "post_id": 28196070, "comment_id": 44761730, "body": "@mafso, the parts of <code>gcc</code> that deals with <code>-Wchar-subscripts</code> is coming into conflict with the parts of <code>gcc</code> that implements <code>isalpha</code> (and other <code>is&lt;something&gt;</code> functions). An <code>int</code> is valid argument to <code>isalpha</code>. Using a <code>char</code> where an <code>int</code> is expected should not be cause for compiler warnings. It&#39;s gcc&#39;s bad, IMHO."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1422463707, "post_id": 28196070, "comment_id": 44761991, "body": "@RSahu, no it&#39;s UB to pass something else than a value representable as an <code>unsigned char</code> (or <code>EOF</code>), see Shafik&#39;s answer. <code>isalpha</code> is not obliged to do the <code>unsigned char</code> conversion on its own (this design, in turn, is indeed questionable, but that&#39;s not GCC&#39;s bad)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1422464478, "post_id": 28196070, "comment_id": 44762525, "body": "@mafso, I understand that. I find it strange that gcc, or any compiler for that matter, would produce warning when a <code>char</code> is used where an <code>int</code> is expected -- be it in a function call or in a macro."}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1422465476, "post_id": 28196070, "comment_id": 44763182, "body": "I agree that the warning is strange in this case. It&#39;s nonetheless justified in most cases (as in this one), so nothing to fix here for Gcc, IMO. (Btw, &lt;ctype.h&gt; is not part of GCC, but of the C library, I think, and I don&#39;t know which one is used with cygwin.) Anyway, the solution shown here shuts down the compiler while keeping the bug, which isn&#39;t really an improvement."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422525306, "post_id": 28196070, "comment_id": 44787406, "body": "The warning comes because GCC does not perform the mandatory default argument promotion of the parameter: by making the function a macro, they have goofed this up. It appears that this warning is gone in later versions of GCC. There is no need for any explicit casts anywhere, as there is nothing wrong with the code. The warning is incorrect."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1422458901, "creation_date": 1422458901, "answer_id": 28196070, "question_id": 28195602, "link": "https://stackoverflow.com/questions/28195602/learn-c-the-hard-way-exercise-14-error-warning-array-subscript-has-type-char/28196070#28196070", "title": "Learn C The Hard Way exercise 14 Error (warning: array subscript has type ?char? [-Wchar-subscripts]", "body": "<p>The input type of <code>isalpha</code> and <code>isblank</code> is expected to be <code>int</code>, not <code>char</code>. That's the core issue. The rest are details of how those are implemented. If use the <code>-E</code> flag to just pre-process the code, the function <code>can_print_it</code> expands to:</p>\n\n<pre><code>int can_print_it(char ch)\n{\n    return (((__ctype_ptr__+sizeof(\"\"[ch]))[(int)(ch)])&amp;(01|02)) || __extension__ ({ __typeof__ (ch) __x = (ch); (((__ctype_ptr__+sizeof(\"\"[__x]))[(int)(__x)])&amp;0200) || (int) (__x) == '\\t';});\n}\n</code></pre>\n\n<p>As you can see, the input, <code>ch</code>, is used as an array index in the implementation of <code>isalpha</code>. A temporary, <code>__x</code>, which is of the same type as <code>ch</code>, is use as an array index in the implementation of <code>isblank</code>.</p>\n\n<p>You can fix the warnings by:</p>\n\n<ol>\n<li><p>Changing the argument type of <code>can_print_it</code> to <code>int</code>.</p>\n\n<pre><code>int can_print_it(int ch)\n{\n    return isalpha(ch) || isblank(ch);\n}\n</code></pre></li>\n<li><p>Creating a temporary variable in the function and using it to call <code>isalpha</code> and <code>isblank</code>.</p>\n\n<pre><code>int can_print_it(char ch)\n{\n    int temp = ch;\n    return isalpha(temp) || isblank(temp);\n}\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1422459163, "creation_date": 1422459163, "answer_id": 28196167, "question_id": 28195602, "link": "https://stackoverflow.com/questions/28195602/learn-c-the-hard-way-exercise-14-error-warning-array-subscript-has-type-char/28196167#28196167", "title": "Learn C The Hard Way exercise 14 Error (warning: array subscript has type ?char? [-Wchar-subscripts]", "body": "<p>It would appear that your compiler is old or broken. GCC 4.9.1 compiles this code with no warnings/errors, given:</p>\n\n<pre><code>gcc test.c -std=c11 -pedantic-errors -Wall -Wextra\n</code></pre>\n\n<p>The compiler is obliged to implicitly promote your char to the int that the isalpha etc functions require. It will do this promotion no matter the implementation-defined signedness of char. The size of char should not matter either, since char is always a small integer type.</p>\n\n<p>The only kind of warning I'd expect a compiler to give from this code is something along the lines of \"implicit conversion from char to int\".</p>\n"}], "owner": {"reputation": 722, "user_id": 4300244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7057dff1d207815fcdee665224bee52?s=128&d=identicon&r=PG&f=1", "display_name": "no_name", "link": "https://stackoverflow.com/users/4300244/no-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 28196056, "answer_count": 4, "score": 4, "last_activity_date": 1429884948, "creation_date": 1422457707, "last_edit_date": 1429884948, "question_id": 28195602, "link": "https://stackoverflow.com/questions/28195602/learn-c-the-hard-way-exercise-14-error-warning-array-subscript-has-type-char", "title": "Learn C The Hard Way exercise 14 Error (warning: array subscript has type ?char? [-Wchar-subscripts]", "body": "<p>I'm following along that tutorial, I'm running WindowsXP 32-bit with cygwin compiler, The tutorial asks me to run this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\n// forward declarations\nint can_print_it(char ch);\nvoid print_letters(char arg[]);\n\nvoid print_arguments(int argc, char *argv[])\n{\n    int i = 0;\n\n    for(i = 0; i &lt; argc; i++) {\n        print_letters(argv[i]);\n    }\n}\n\nvoid print_letters(char arg[])\n{\n    int i = 0;\n\n    for(i = 0; arg[i] != '\\0'; i++) {\n        char ch = arg[i];\n\n        if(can_print_it(ch)) {\n            printf(\"'%c' == %d \", ch, ch);\n        }\n    }\n\n    printf(\"\\n\");\n}\n\nint can_print_it(char ch)\n{\n    return isalpha(ch) || isblank(ch);\n}\n\n\nint main(int argc, char *argv[])\n{\n    print_arguments(argc, argv);\n    return 0;\n}\n</code></pre>\n\n<p>But I keep running into this warning:</p>\n\n<pre><code>$ make ex14\ncc -Wall -g    ex14.c   -o ex14\nex14.c: In function ?can_print_it?:\nex14.c:34:5: warning: array subscript has type ?char? [-Wchar-subscripts]\n    return isalpha(ch) || isblank(ch);\n    ^\nex14.c:34:5: warning: array subscript has type ?char? [-Wchar-subscripts]\n</code></pre>\n\n<p>I have tried searching around, while I have found a lot of threads talking about a similar error, none of their answers/solutions worked on my code, and I couldn't find a question related to <em>Learn C The Hard Way</em> <a href=\"http://c.learncodethehardway.org/book/ex14.html\" rel=\"nofollow\">exercise 14</a>.</p>\n\n<p>So what should I do to get rid of that warning?</p>\n"}, {"tags": ["c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1422457341, "post_id": 28195421, "comment_id": 44757597, "body": "Wouldn&#39;t that be base <i>52</i>?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1422457371, "post_id": 28195421, "comment_id": 44757615, "body": "@JoachimPileborg, ow, I&#39;m sorry, gonna correct it"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 3, "creation_date": 1422457473, "post_id": 28195421, "comment_id": 44757690, "body": "letters, uppercase and lowers, <i>and numbers (digits)</i> is 62"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1424970502, "post_id": 28195421, "comment_id": 45779014, "body": "Clarified question in a late edit."}], "answers": [{"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1422457547, "post_id": 28195522, "comment_id": 44757745, "body": "... but when you &quot;increase&quot; 25 to 0, you have to shift left also and add 1. i.e. &quot;carry the one&quot;"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1422457722, "post_id": 28195522, "comment_id": 44757867, "body": "OK, if I want to do this about 1e9 times, that&#39;ll be <i>extremely</i> slow, won&#39;t it?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1422457977, "post_id": 28195522, "comment_id": 44758050, "body": "@ForceBru Doing that many operations will take time no matter the algorithms, but it can be offset by using better data structures. For example, if you&#39;re programming in C++ you could use e.g. <code>std::map</code> to map each digit to a <code>std::pair</code> that contains the next and previous digits. (Note: I don&#39;t actually know if that will be more effective than searching a string.)"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1422458551, "post_id": 28195522, "comment_id": 44758413, "body": "@ForceBru No, it&#39;ll be extremely fast. Zillions of times faster than you could do it yourself without a computer. It won&#39;t be as fast as doing the same operations in base 2 or base 10 with a computer, of course. Perhaps that&#39;s one reason that we tend not to use base 62."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1422457473, "creation_date": 1422457473, "answer_id": 28195522, "question_id": 28195421, "link": "https://stackoverflow.com/questions/28195421/adding-base62-numbers/28195522#28195522", "title": "Adding base62 numbers", "body": "<p>Assuming you have the order of the \"digits\" (like e.g. the string <code>\"05DprPaGAg\"</code>) then it's quite easy. To increase by one, find the letter in the digit-order string and get the next letter, to decrease by one find the letter in the digit-order string and get the previous letter.</p>\n\n<p>If the digit you want to decrease is the lowest digit (the <code>0</code> in the example alphabet), then decrease the second least significant digit (by using the method described above) and use the highest digit for the least significant digit of the number to decrease. Do the opposite for increase.</p>\n"}, {"comments": [{"owner": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1422457892, "post_id": 28195604, "comment_id": 44757987, "body": "@ForceBru It is not necessary to use a map to map characters to something. You can use a simple array, where <code>digit[c]</code> is the digit that the <code>c</code> character represents."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 1, "creation_date": 1422457926, "post_id": 28195604, "comment_id": 44758008, "body": "@ForceBru, if you want pure C, you should remove the [c++] tag from the question"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1422458111, "post_id": 28195604, "comment_id": 44758143, "body": "@AaronMcDaid, I&#39;ve put two tags, so I&#39;d prefer to get answers concerned to both C and C++"}], "tags": [], "owner": {"reputation": 17464, "user_id": 2040251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UsW2G.jpg?s=128&g=1", "display_name": "kraskevich", "link": "https://stackoverflow.com/users/2040251/kraskevich"}, "is_accepted": false, "score": 0, "last_activity_date": 1422457713, "creation_date": 1422457713, "answer_id": 28195604, "question_id": 28195421, "link": "https://stackoverflow.com/questions/28195421/adding-base62-numbers/28195604#28195604", "title": "Adding base62 numbers", "body": "<ol>\n<li><p>Map each character to a digit it represents(in base 62).</p></li>\n<li><p>Use simple addition like you would do it manually(carrying the one if necessary, starting from the right-most position).</p></li>\n<li><p>Subtraction can be performed in almost the same manner(starting from the right-most position and carrying a \"minus one\" to the left if required).</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1422458718, "post_id": 28195771, "comment_id": 44758544, "body": "Wow, to tell the truth, I never thought about base-2. That&#39;s a good idea."}], "tags": [], "owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "is_accepted": false, "score": 2, "last_activity_date": 1422458164, "creation_date": 1422458164, "answer_id": 28195771, "question_id": 28195421, "link": "https://stackoverflow.com/questions/28195421/adding-base62-numbers/28195771#28195771", "title": "Adding base62 numbers", "body": "<p>The usually-best answer to questions such as <em>How do I compute in base N ?</em> is </p>\n\n<blockquote>\n  <p>convert from base-N to base-2 (trivial if <code>N==2</code>, easy enough\n  otherwise), use the lightning-fast, hardware-implemented features of\n  your computer to calculate in base-2, then convert from base-2 to\n  base-N.</p>\n</blockquote>\n\n<p>While rejecting my absurd suggestion consider how your computer fools you into thinking that it does base-10 arithmetic.</p>\n\n<p>Note carefully that this approach complies with OP's strict instruction to avoid converting numbers to base-10.</p>\n"}], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1424970399, "creation_date": 1422457187, "last_edit_date": 1424970399, "question_id": 28195421, "link": "https://stackoverflow.com/questions/28195421/adding-base62-numbers", "title": "Adding base62 numbers", "body": "<p>Say, one's got a base62 number (alphabet: [aAbBcC-yYzZ0-9]) <code>char *num=\"abcd\"</code>. <em>The alphabet used to create such a number consists of letters in non-alphabetical order! ('A' after 'a', not 'b')</em>. </p>\n\n<p>How to get the next number of the sequence (how to add 1 to base62 number)? Next is \"abce\" and previous is \"abcc\". I'd appreciate it if you provide me with some code.</p>\n"}, {"tags": ["android", "c", "service", "binary"], "comments": [{"owner": {"reputation": 7491, "user_id": 1806099, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xT2cr.png?s=128&g=1", "display_name": "Skynet", "link": "https://stackoverflow.com/users/1806099/skynet"}, "edited": false, "score": 0, "creation_date": 1422454828, "post_id": 28194469, "comment_id": 44755921, "body": "<a href=\"http://stackoverflow.com/questions/9868309/how-can-i-run-c-binary-executable-file-in-android-from-android-shell\">This?</a>"}, {"owner": {"reputation": 894, "user_id": 3082247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lIT95.png?s=128&g=1", "display_name": "Tabrej Khan", "link": "https://stackoverflow.com/users/3082247/tabrej-khan"}, "edited": false, "score": 0, "creation_date": 1422455004, "post_id": 28194469, "comment_id": 44756034, "body": "You need to create .so file and use it as library file. Hope link provided by memphis or <a href=\"http://stackoverflow.com/questions/21901061/how-to-use-so-file-to-create-an-apk-file-in-android-application-for-my-custom\">this link</a> help you."}], "owner": {"reputation": 1, "user_id": 4190393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/437ec4a466e56c641253ed167ccbf04d?s=128&d=identicon&r=PG&f=1", "display_name": "memphis raines", "link": "https://stackoverflow.com/users/4190393/memphis-raines"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422454603, "creation_date": 1422454603, "question_id": 28194469, "link": "https://stackoverflow.com/questions/28194469/running-c-binary-as-android-service", "title": "Running c binary as android service", "body": "<p>I know how to run c program on android (ndk) but I have NO IDEA how to run a c binary as android service. I want to run java application which will be connecting to the c binary. Is there any chance to do this?</p>\n\n<p>Thanks for you help.</p>\n"}, {"tags": ["c", "printf", "lines"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1422454226, "post_id": 28194311, "comment_id": 44755491, "body": "<i>I exceed the limit on the lines I can print</i>? what you mean they are more lines that those printable in your console?"}, {"owner": {"reputation": 3, "user_id": 4324197, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_8UxoxlDl4E/AAAAAAAAAAI/AAAAAAAAAX0/vlU5nAut0eI/photo.jpg?sz=128", "display_name": "Mazza", "link": "https://stackoverflow.com/users/4324197/mazza"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422454335, "post_id": 28194311, "comment_id": 44755565, "body": "yeah I&#39;m talking about the console, sorry (I&#39;m not mother tongue, don&#39;t know how to ask these things haha)"}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 1, "creation_date": 1422454366, "post_id": 28194311, "comment_id": 44755591, "body": "Can&#39;t you just scroll the console window up afterwards?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1422454457, "post_id": 28194311, "comment_id": 44755657, "body": "For <code>feof()</code> issues see <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\" title=\"while feof file is always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1422454484, "post_id": 28194311, "comment_id": 44755676, "body": "Which console? cmd? A console of an IDE?"}, {"owner": {"reputation": 3, "user_id": 4324197, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_8UxoxlDl4E/AAAAAAAAAAI/AAAAAAAAAX0/vlU5nAut0eI/photo.jpg?sz=128", "display_name": "Mazza", "link": "https://stackoverflow.com/users/4324197/mazza"}, "edited": false, "score": 0, "creation_date": 1422454497, "post_id": 28194311, "comment_id": 44755683, "body": "yeah, but I&#39;m not able to see the first few products, they just get cut off the console. They told me it&#39;s a Windows limitation, but I couldn&#39;t find how to fix this"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422454553, "post_id": 28194311, "comment_id": 44755718, "body": "Oh if it&#39;s a windows limitation why don&#39;t you try with a diffrent OS? Linux, for example."}, {"owner": {"reputation": 11225, "user_id": 3718878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/392829bf28778fcbb8ae53033c98df8c?s=128&d=identicon&r=PG&f=1", "display_name": "Zenadix", "link": "https://stackoverflow.com/users/3718878/zenadix"}, "edited": false, "score": 2, "creation_date": 1422454632, "post_id": 28194311, "comment_id": 44755778, "body": "You can increase the console buffer size. If your console is <code>cmd.exe</code>, right-click the title bar, and click properties."}, {"owner": {"reputation": 408, "user_id": 2797530, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fG38n.jpg?s=128&g=1", "display_name": "Nerf Herder", "link": "https://stackoverflow.com/users/2797530/nerf-herder"}, "edited": false, "score": 1, "creation_date": 1422454897, "post_id": 28194311, "comment_id": 44755955, "body": "So it&#39;s not a C problem, and your code example is largely irrelevant.  As Zenadix implicates above, you can change the buffer size of the console."}, {"owner": {"reputation": 3, "user_id": 4324197, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_8UxoxlDl4E/AAAAAAAAAAI/AAAAAAAAAX0/vlU5nAut0eI/photo.jpg?sz=128", "display_name": "Mazza", "link": "https://stackoverflow.com/users/4324197/mazza"}, "edited": false, "score": 0, "creation_date": 1422454915, "post_id": 28194311, "comment_id": 44755964, "body": "I am using CodeBlocks, didn&#39;t modify anything, so it should be the stock console..."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1422454947, "post_id": 28194311, "comment_id": 44755992, "body": "Try using system() function to use the command to resize the window as mentioned <a href=\"http://www.stackoverflow.com/questions/945527/modify-cmd-exe-properties-using-the-command-prompt\">here</a>"}, {"owner": {"reputation": 408, "user_id": 2797530, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fG38n.jpg?s=128&g=1", "display_name": "Nerf Herder", "link": "https://stackoverflow.com/users/2797530/nerf-herder"}, "edited": false, "score": 0, "creation_date": 1422455168, "post_id": 28194311, "comment_id": 44756148, "body": "About the feof question, yes, to be truly safe it should be checked after every fread, to cover partial records.  Blank fields are different than null fields though, I&#39;m not exactly sure what you&#39;re seeing."}], "answers": [{"tags": [], "owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "is_accepted": false, "score": 0, "last_activity_date": 1422474822, "creation_date": 1422474822, "answer_id": 28201178, "question_id": 28194311, "link": "https://stackoverflow.com/questions/28194311/c-lines-limit-when-using-printfs/28201178#28201178", "title": "C - Lines limit when using printf&#39;s", "body": "<p>If this is really a console limitation, how about executing your file and piping it to <code>more</code>, i.e. (trying to remember DOS terminology):</p>\n\n<pre><code>\\path\\to\\program arg1 arg2 | more\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4324197, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_8UxoxlDl4E/AAAAAAAAAAI/AAAAAAAAAX0/vlU5nAut0eI/photo.jpg?sz=128", "display_name": "Mazza", "link": "https://stackoverflow.com/users/4324197/mazza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422474822, "creation_date": 1422454123, "question_id": 28194311, "link": "https://stackoverflow.com/questions/28194311/c-lines-limit-when-using-printfs", "title": "C - Lines limit when using printf&#39;s", "body": "<pre><code>    typedef struct product_temp{\n        int code;\n        char name[MAX_NAME];\n        char category[MAX_CATEGORY];\n        char provenience[MAX_PROVENIENCE];\n        int quantity;\n        float price;\n        struct product_temp *next;\n    } product;\n\n    product *list_transfer(FILE *file);\n    void print(product *head);\n    void *insert_tail(product *head, int code, char name[], char category[], char provenience[], int quantity, float price);\n    int search_code(int code, product *iterator);\n    product *remove_product(int code, product *head);\n    void free_heap(product *head);\n    void save_file(product *head, FILE *file);\n\nint main (int argc, char *argv[]){\n    product *head;\n    FILE *file, *file_REFRESH;\n    int outcome;\n\n    file = fopen(\"magazzino.dat\", \"rb\");\n    if(file != NULL){\n        head = list_transfer(file);\n        print(head);\n        insert_tail(head, 950, \"Latta Pomodori\", \"FruttaVerdura\", \"Campania\", 70, 0.90);\n        insert_tail(head, 1011, \"Olio Bottiglia 1L\", \"Alimentari\", \"Puglia\", 50, 4.50);\n        insert_tail(head, 1150, \"Biscotti Busta 1Kg\", \"Alimentari\", \"Lombardia\", 60, 1.50);\n        insert_tail(head, 1205, \"Detersivo Piatti 0.75L\", \"Pulizia Casa\", \"Lombardia\", 75, 1.10);\n        print(head);\n        head = remove_product(985, head);\n        head = remove_product(1015, head);\n        head = remove_product(1150, head);\n        print(head);\n        file_REFRESH = fopen(\"magazzino_aggiornato\", \"wb\");\n        save_file(head, file_REFRESH);\n        fclose(file);\n        fclose(file_REFRESH);\n        free_heap(head);\n    }\n    else{\n        fprintf(stderr, \"Non e' stato trovato il file magazzino.dat!\\n\");\n        exit(6);\n    }\n    return 0;\n}\n\n    product *list_transfer(FILE *file){\n        product *head, *current;\n\n        head = malloc(sizeof(product));\n        if(head == NULL){\n            fprintf(stderr, \"Impossibile allocare memoria!\\n\");\n            exit(5);\n        }\n        memset(head, 0, sizeof(product));\n        current = head;\n        rewind(file);\n        while(!feof(file)){\n            fread(&amp;current-&gt;code, sizeof(current-&gt;code), 1, file);\n            fread(&amp;current-&gt;name, sizeof(current-&gt;name), 1, file);\n            fread(&amp;current-&gt;category, sizeof(current-&gt;category), 1, file);\n            fread(&amp;current-&gt;provenience, sizeof(current-&gt;provenience), 1, file);\n            fread(&amp;current-&gt;quantity, sizeof(current-&gt;quantity), 1, file);\n            fread(&amp;current-&gt;price, sizeof(current-&gt;price), 1, file);\n            current-&gt;next = malloc(sizeof(product));\n            if(current-&gt;next == NULL){\n                fprintf(stderr, \"Impossibile allocare memoria!\\n\");\n                exit(5);\n            }\n            memset(current-&gt;next, 0, sizeof(product));\n            current = current-&gt;next;\n        }\n        return head;\n    }\n    void print(product *head){\n        while(head != NULL){\n            fprintf(stdout, \"Code:\\t\\t%d\\n\", head-&gt;code);\n            fprintf(stdout, \"Name:\\t\\t%s\\n\", head-&gt;name);\n            fprintf(stdout, \"Category:\\t%s\\n\", head-&gt;category);\n            fprintf(stdout, \"Provenience:\\t%s\\n\", head-&gt;provenience);\n            fprintf(stdout, \"Quantity:\\t%d\\n\", head-&gt;quantity);\n            fprintf(stdout, \"Price:\\t\\t%.2f\\n\\n\", head-&gt;price);\n            head = head-&gt;next;\n        }\n        printf(\"\\n\");\n    }\n</code></pre>\n\n<p>Now the problem is: there are lots of products in magazzino.dat, so when I run it, I exceed the limit on the lines I can print, so it cuts off some products. How can I fix that? I know there might be some mistakes here and there, but that's not the point, I still have to fix some things. My only problem for now is that one.</p>\n\n<p>Maybe another thing I have questions about is the feof(file) condition inside the list_transfer function. Is it right to write:\nwhile(!feof(file)){\nbecause I get two product with all fields set to zero at the end of the print function.</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["c", "printf", "undefined-behavior"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422454016, "post_id": 28194227, "comment_id": 44755336, "body": "You can make your compiler tell you about that, by enabling warnings. Though this program compiles it will search for a matching integer argument causing undefined behavior."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 6, "creation_date": 1422454122, "post_id": 28194227, "comment_id": 44755419, "body": "That is the beauty of <b>Undefined Behaviour</b> :)"}], "answers": [{"tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 6, "last_activity_date": 1422454758, "last_edit_date": 1422454758, "creation_date": 1422453967, "answer_id": 28194257, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194257#28194257", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>Because of how C variadic arguments work, the compiler cannot track their correct usage. It is still (syntactically) legal to provide less, or more, parameters that the function needs to work, although this generally ends up as undefined behavior when looking at the standard.</p>\n\n<p>The declaration of <code>printf</code> looks like this:</p>\n\n<pre><code>int printf(const char*, ...);\n</code></pre>\n\n<p>The compiler only sees <code>...</code>, and knows that there may be zero or more additional arguments that the function may or may not use. The called function <strong>does not know</strong> how many arguments it is passed; it can, at best, <em>assume</em> that it was passed all the information it needs and nothing more.</p>\n\n<p>Contrast this with other languages, like C#:</p>\n\n<pre><code>void WriteLine(string format, params object[] arguments);\n</code></pre>\n\n<p>Here, the method knows exactly how many additional arguments is was passed (doing <code>arguments.Length</code>).</p>\n\n<p>In C, variadic functions and especially <code>printf</code> are a frequent cause of security vulnerabilities. <code>Printf</code> ends up reading raw bytes from the stack, which may leak important details about your application and its security environment.</p>\n\n<p>For this reason, Clang and GCC support a special extension to validate <code>printf</code> formats. If you use an invalid format string, you'll get a warning (not an error). </p>\n\n<pre><code>code.c:4:11: warning: more '%' conversions than data arguments [-Wformat]\n    printf(\"%d\\n\");\n           ~~^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 1, "last_activity_date": 1422454038, "creation_date": 1422454038, "answer_id": 28194277, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194277#28194277", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>According to <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow\">this documentation</a>, the additional arguments must be at least as many as the format specifiers in the first argument. This seems to be undefined behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1422455847, "last_edit_date": 1422455847, "creation_date": 1422454038, "answer_id": 28194278, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194278#28194278", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>In general diagnostic messages (you may think of them like compilation errors) are not guaranteed for <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviors</a> (like lack of sufficient arguments for <code>printf</code> function call as in your case), that are not counted as syntax rule or constraint violations.</p>\n\n<blockquote>\n  <h3>C11 (N1570) \u00a75.1.1.3/p1 <em>Diagnostics</em>:</h3>\n  \n  <p>A conforming implementation shall produce at least one diagnostic\n  message (identified in an implementation-defined manner) if a\n  preprocessing translation unit or translation unit contains a\n  violation of <strong>any syntax rule or constraint</strong>, even if the behavior is\n  also explicitly specified as undefined or implementation-defined.\n  Diagnostic messages <strong>need not be produced</strong> in other circumstances.<sup>9)</sup></p>\n</blockquote>\n\n<p>In other words your compiler is free to translate such unit, but you should never run it or rely on its behaviour (as it's de facto unpredictable). Moreover your compiler is allowed not to provide any documentation (that is C Standard does not enforce it to do so), like it's required for implementation-defined or locale-specific behaviours.</p>\n\n<blockquote>\n  <h3>C11 (N1570) \u00a73.4.3/p2 <em>undefined behavior</em>:</h3>\n  \n  <p>NOTE Possible undefined behavior ranges from ignoring the situation\n  completely with unpredictable results, to behaving during translation\n  or program execution in a documented manner characteristic of the\n  environment (with or without the issuance of a diagnostic message), to\n  terminating a translation or execution (with the issuance of a\n  diagnostic message).</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1422455050, "last_edit_date": 1422455050, "creation_date": 1422454078, "answer_id": 28194290, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194290#28194290", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>This compiles well. Because it matches the printf() prototype which is</p>\n\n<pre><code>printf(const char *,...);\n</code></pre>\n\n<p>During run-time the call</p>\n\n<pre><code>printf(\"%d\\n\");\n</code></pre>\n\n<p>Tries to fetch the value from second argument and since you have not passed anything it might get some garbage value and print it out so the behavior is undefined here.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1472392179, "post_id": 28194300, "comment_id": 65724489, "body": "You might also mention the more general <code>gcc -Wall</code> and <code>clang -Weverything</code> options."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 9, "last_activity_date": 1422454544, "last_edit_date": 1422454544, "creation_date": 1422454094, "answer_id": 28194300, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194300#28194300", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>Your program will compile fine, as <code>printf()</code> is a variadic function and the matching check of the number of format specifiers with supplied argument is not performed by default.</p>\n\n<p>At runtime, your program exhibits <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behaviour</a>, as there in no argument supplied which has to be printed using the supplied format specifier.</p>\n\n<p>As per chapter 7.19.6.1, <code>c99</code> standard, (from <code>fprintf()</code>)</p>\n\n<blockquote>\n  <p>If there are insufficient arguments for the format, the behavior is\n  undefined.</p>\n</blockquote>\n\n<p>If you compile using <code>-Wformat</code> flag in <code>gcc</code>, your compiler will produce the warning for the mismatch.</p>\n"}, {"tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 2, "last_activity_date": 1422454106, "creation_date": 1422454106, "answer_id": 28194308, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194308#28194308", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>You are invoking undefined behaviour. That's your problem, not the compiler's, and basically anything is \"allowed\" to happen.</p>\n\n<p>Of course, virtually every existing compiler should be able to warn you about this particular condition regarding <code>printf()</code>, you just have to allow him to (by enabling, and heeding, compiler warnings).</p>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 4, "last_activity_date": 1422455008, "last_edit_date": 1422455008, "creation_date": 1422454116, "answer_id": 28194310, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194310#28194310", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>This is simply <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a> if you do not provide the sufficient arguments to <code>printf</code>, which mean the behavior is unpredictable. From the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">draft C99 standard</a> section <code>7.19.6.1</code> <em>The fprintf function</em> which also covers <code>printf</code> for this case:</p>\n\n<blockquote>\n  <p>If there are insufficient arguments for the format, the behavior is\n  undefined.</p>\n</blockquote>\n\n<p>Since <code>printf</code> is a <a href=\"http://en.cppreference.com/w/c/variadic\" rel=\"nofollow\">variadic function</a> there is no matching of arguments to the function declaration. So the compiler needs to support support format string checking which is covered by <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Warning-Options.html\" rel=\"nofollow\">-Wformat flag in gcc</a>:</p>\n\n<blockquote>\n  <p>Check calls to printf and scanf, etc., to make sure that the arguments supplied have types appropriate to the format string specified, and that the conversions specified in the format string make sense. This includes standard functions, and others specified by format attributes (see Function Attributes), [...]</p>\n</blockquote>\n\n<p>Enabling sufficient compiler warnings is important, for this code <code>gcc</code> using the <code>-Wall</code> flag tells us (<em><a href=\"http://coliru.stacked-crooked.com/a/65a9999b1d02f72d\" rel=\"nofollow\">see it live</a></em>):</p>\n\n<pre><code> warning: format '%d' expects a matching 'int' argument [-Wformat=]\n printf(\"%d\\n\");\n ^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 852, "user_id": 2048756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2afq4.jpg?s=128&g=1", "display_name": "daniel.wirtz", "link": "https://stackoverflow.com/users/2048756/daniel-wirtz"}, "is_accepted": false, "score": 1, "last_activity_date": 1422455734, "creation_date": 1422455734, "answer_id": 28194879, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28194879#28194879", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>what warnings/messages did you get using your compilers?\ni ran this through gcc (Ubuntu 4.8.2-19ubuntu1) and got a warning</p>\n\n<pre><code>warning: format \u2018%d\u2019 expects a matching \u2018int\u2019 argument [-Wformat=]\n     printf(\"%d\\n\");\n     ^\n</code></pre>\n\n<p>and running it also \"garbage output\".\nhere, the gcc is so clever to parse the format expression and notifies the coder to provide a matching number of arguments.</p>\n\n<p>what i think happens:\nthe function signature of printf is <em>independent</em> from the behaviour of the compiled code. at compile time, all the compiler cares is to check if at least one argument is there and continues. however, the compiled function will first parse the format expression and, dependent on that, read further arguments from the functions' arguments stack. therein it simply expects appropriately put values (int, float etc) and uses them.\nso if you dont specify the argument, no place on the function call stack is reserved and printf still reads random memory (in this case at the first location). this also explains the \"garbage\" output, which will differ each time you call the binary. you can even extend the code to</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n    printf(\"%d\\n%d\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>and get two <em>different</em> garbage numbers :)</p>\n\n<p>then again it will depend on the environment/process/compiler which values will be read. \"unspecified behaviour\" is what describes this effect best, sometimes zero, sometimes other.</p>\n\n<p>i hope this clarifies your issue!</p>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1422457213, "post_id": 28195129, "comment_id": 44757504, "body": "And How does this answer the question?"}, {"owner": {"reputation": 7889, "user_id": 1911064, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/F8Vxe.jpg?s=128&g=1", "display_name": "Axel Kemper", "link": "https://stackoverflow.com/users/1911064/axel-kemper"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1422457539, "post_id": 28195129, "comment_id": 44757737, "body": "The code snippet compiles fine, unless warnings are enabled (cf. comment of @iharob). Checking of variadic parameters seems to be a strength of g++/gcc and is probably not provided by most other compilers."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1472392252, "post_id": 28195129, "comment_id": 65724506, "body": "Adding <code>-Werror</code> will make these warnings fatal and prevent compilation.  A sane precaution."}], "tags": [], "owner": {"reputation": 7889, "user_id": 1911064, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/F8Vxe.jpg?s=128&g=1", "display_name": "Axel Kemper", "link": "https://stackoverflow.com/users/1911064/axel-kemper"}, "is_accepted": false, "score": 2, "last_activity_date": 1422456408, "creation_date": 1422456408, "answer_id": 28195129, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/28195129#28195129", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>Using <code>g++</code> with commandline parameter <code>-Wall</code> produces the following diagnostics:</p>\n\n<pre><code>g++ -Wall   -c -g -MMD -MP -MF \"build/Debug/MinGW-Windows/main.o.d\" -o build/Debug/MinGW-Windows/main.o main.cpp\nmain.cpp: In function 'int main(void)':\nmain.cpp:17:16: warning: format '%d' expects a matching 'int' argument [-Wformat=]\n     printf(\"%d\");\n                ^\n</code></pre>\n\n<p>That's pretty useful, isn't it?</p>\n\n<p><code>gcc/g++</code> also check if the format specifiers actually match the parameter types. This is really cool for debugging.</p>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 4508946, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004656930638/picture?type=large", "display_name": "Karthik Sagar", "link": "https://stackoverflow.com/users/4508946/karthik-sagar"}, "is_accepted": false, "score": -1, "last_activity_date": 1472390626, "last_edit_date": 1472390626, "creation_date": 1472308706, "answer_id": 39182305, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how/39182305#39182305", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>In the context of printf() and fprintf(), as per C standard C11 clause 7.21.6.1, \"If there are insufficient arguments for the format, the behavior is undefined. If the format is exhausted while arguments remain, the excess arguments are evaluated (as always) but are otherwise ignored.\" </p>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2423, "favorite_count": 1, "accepted_answer_id": 28194300, "answer_count": 10, "score": 8, "last_activity_date": 1486020966, "creation_date": 1422453879, "last_edit_date": 1486020966, "question_id": 28194227, "link": "https://stackoverflow.com/questions/28194227/printf-with-no-arguments-in-c-compiles-fine-how", "title": "printf() with no arguments in C compiles fine. how?", "body": "<p>I tried the below c program &amp; I expected to get compile time error, but why compiler isn't giving any error?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\n    printf(\"%d\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>Why output is compiler dependent?\nHere is the output on various compilers</p>\n\n<p>Output on Orwell Dev C++ IDE (uses gcc 4.8.1) : 0</p>\n\n<p>Output on Visual C++ provided by Visual Studio 2010 : 0</p>\n\n<p>CodeBlocks IDE (uses gcc 4.7.1) : garbage value</p>\n\n<p>Online compiler ideone.com : garbage value</p>\n\n<p>What is going wrong here ?</p>\n"}, {"tags": ["c", "drag-and-drop", "char", "gtk"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422453151, "post_id": 28193897, "comment_id": 44754719, "body": "Is <code>pathh</code> a global variable? If it is, you should redesign your program, and also may be the <code>GtkSelectionData *seldata</code> is destroyed after it is passed to your function, can you print <code>seldata-&gt;data</code>?"}, {"owner": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422458742, "post_id": 28193897, "comment_id": 44758564, "body": "Yeah i can print seldata and when I do the casting i can even print pathh but when i use it in an other function it is lost and it becomes empty and yes pathh is a global variable"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422458848, "post_id": 28193897, "comment_id": 44758657, "body": "How are you initializing <code>liststore</code>?"}, {"owner": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422459107, "post_id": 28193897, "comment_id": 44758831, "body": "this is how i initialize it  &#39;liststore = gtk_list_store_new(NUM_COLS, G_TYPE_STRING);&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422460234, "post_id": 28196194, "comment_id": 44759654, "body": "I&#39;m now getting a segmentation fault :D is their a way i can send you the whole function that creates the model so you can tell me what are the changes to be done :D"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422460277, "post_id": 28196194, "comment_id": 44759687, "body": "@RidaAmine I am very busy right now, but you could do it later to my email iharob@gmail.com What is this project for? I see you have been working on it for a while, I think it&#39;s the same project right?"}, {"owner": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422460861, "post_id": 28196194, "comment_id": 44760108, "body": "Yeah it&#39;s the same project it&#39;s just because of the exams i had to stop and now i&#39;m resuming it&#39;s somehow an application that manages files that professor adds so that students can view them after it doesn&#39;t have the network stuff yet but i&#39;m planning to add them later , and i&#39;m trying to integrate the drag &#39;n&#39; drop so you can easily add files :D"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422460930, "post_id": 28196194, "comment_id": 44760146, "body": "@RidaAmine very cool, I recieved your mail, will check it later. Is the University/Professor paying to you for this?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422461331, "post_id": 28196194, "comment_id": 44760382, "body": "Wow that&#39;s quite a homework, I hope you are having fun doing it, BTW my father is Arabian, he is Syrian."}, {"owner": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422461607, "post_id": 28196194, "comment_id": 44760560, "body": "Yeah of course i&#39;m having fun that&#39;s why i chose this field of study , it&#39;s nice that your father is Arabian even that what&#39;s happening now their is a masacre i&#39;m from Morocco :D"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422535870, "post_id": 28196194, "comment_id": 44793690, "body": "@RidaAmine I was looking at your code, it&#39;s not very well formatted and it&#39;s hard to read, can you please format it? Also, remove every cast in front of the <code>malloc()</code> calls."}, {"owner": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "edited": false, "score": 0, "creation_date": 1422539013, "post_id": 28196194, "comment_id": 44795728, "body": "i sent you the new version hope it&#39;s changed a bit as i added comments :D"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1422459549, "last_edit_date": 1422459549, "creation_date": 1422459237, "answer_id": 28196194, "question_id": 28193897, "link": "https://stackoverflow.com/questions/28193897/problems-with-drag-and-drop-in-gtk/28196194#28196194", "title": "Problems with drag and drop in Gtk", "body": "<p>Try this way</p>\n\n<pre><code>struct SelectionData\n{\n    GtkListStore *listStore;\n    gchar *path;\n}\n</code></pre>\n\n<p>and then in the caller function</p>\n\n<pre><code>struct SelectionData *data;\n\ndata = malloc(sizeof(*data));\nif (data == NULL)\n    handleMallocFailureAndPleaseDoNotContinue();\ndata-&gt;listStore = liststore;\ndata-&gt;path      = NULL;\n\ng_signal_connect(view, \"drag_data_received\",G_CALLBACK(view_onDragDataReceived), data);\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>void view_onDragDataReceived(GtkWidget *wgt, GdkDragContext *context, int x, int y,GtkSelectionData *seldata, guint info, guint time, gpointer userdata)\n{\n    GtkTreeModel  *model;\n    GtkTreeIter    iter;\n    SelectionData *selectionData;\n    size_t         length;\n\n    selectionData = (SelectionData *)userdata;\n    model = GTK_TREE_MODEL(selectionData-&gt;liststore);\n\n    gtk_list_store_append(GTK_LIST_STORE(model), &amp;iter);\n    gtk_list_store_set(GTK_LIST_STORE(model), &amp;iter, COL_URI,(gchar*)seldata-&gt;data, -1);\n    length = strlen((char*)seldata-&gt;data);\n    if (selectionData-&gt;path != NULL) /* for subsequent calls */\n        free(selectionData-&gt;path);\n    selectionData-&gt;path = malloc(1 + length);\n    if (selectionData-&gt;path != NULL)\n        memcpy(selectionData-&gt;path, seldata-&gt;data, 1 + length);\n}\n</code></pre>\n\n<p>and then you can access <code>selectionData</code> somewhere else and thus it's <code>path</code> field, which must be <code>free</code>d after you finish using it.</p>\n\n<p>Try to avoid global variables as much as possible.</p>\n\n<p>You can also use the same technique to copy <code>seldata-&gt;data</code> into your <code>pathh</code> global variable, but rethink your design and try not to use <code>pathh</code> global variable, since you are going to use <code>malloc</code> to allocate space for the string, and the global variable will be a pointer to it, so it will be very dificult to understand where and how you must <code>free</code> it.</p>\n"}], "owner": {"reputation": 27, "user_id": 4320895, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001494935351/picture?type=large", "display_name": "Rida Amine", "link": "https://stackoverflow.com/users/4320895/rida-amine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422459549, "creation_date": 1422452948, "question_id": 28193897, "link": "https://stackoverflow.com/questions/28193897/problems-with-drag-and-drop-in-gtk", "title": "Problems with drag and drop in Gtk", "body": "<p>I'm building an application that uses drag and drop using GTK in C language but I have a problem with this part of code </p>\n\n<pre><code>void view_onDragDataReceived(GtkWidget *wgt, GdkDragContext *context, int x, int y,GtkSelectionData *seldata, guint info, guint time,gpointer userdata)\n{\n   GtkTreeModel *model;\n   GtkTreeIter   iter;\n\n    model = GTK_TREE_MODEL(userdata);\n\n   gtk_list_store_append(GTK_LIST_STORE(model), &amp;iter);\n\n   gtk_list_store_set(GTK_LIST_STORE(model), &amp;iter, COL_URI,(gchar*)seldata-&gt;data, -1);\n    pathh=(char*)seldata-&gt;data;\n      }   \n</code></pre>\n\n<p>I call this Function from this line of code</p>\n\n<pre><code> g_signal_connect(view, \"drag_data_received\",G_CALLBACK(view_onDragDataReceived), liststore);\n</code></pre>\n\n<p>the problem i'm having is that when i try to use that pathh variable in an other function i find it empty even though it's declared a global variable type char*</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 5855, "user_id": 842658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7803680028e20c68aa8d54c935d681fb?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/842658/marc"}, "edited": false, "score": 0, "creation_date": 1422452515, "post_id": 28193637, "comment_id": 44754303, "body": "what&#39;s wrong with <code>.&#47;digital-signage | fbi -noverbose bg.jpg</code>?"}, {"owner": {"reputation": 1513, "user_id": 1334750, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0vTHg.png?s=128&g=1", "display_name": "Pawe\u0142 Duda", "link": "https://stackoverflow.com/users/1334750/pawe%c5%82-duda"}, "reply_to_user": {"reputation": 5855, "user_id": 842658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7803680028e20c68aa8d54c935d681fb?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/842658/marc"}, "edited": false, "score": 0, "creation_date": 1422452644, "post_id": 28193637, "comment_id": 44754388, "body": "ioctl VT_GETSTATE: inappropriate ioctl for device (not a linux console?) OpenVG application starts but fbi does not."}, {"owner": {"reputation": 5855, "user_id": 842658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7803680028e20c68aa8d54c935d681fb?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/842658/marc"}, "edited": false, "score": 0, "creation_date": 1422452774, "post_id": 28193637, "comment_id": 44754471, "body": "how about <code>fbi -noverbose bg.jpg &amp;</code> and then <code>.&#47;digital-signage</code>?"}, {"owner": {"reputation": 1513, "user_id": 1334750, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0vTHg.png?s=128&g=1", "display_name": "Pawe\u0142 Duda", "link": "https://stackoverflow.com/users/1334750/pawe%c5%82-duda"}, "reply_to_user": {"reputation": 5855, "user_id": 842658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7803680028e20c68aa8d54c935d681fb?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/842658/marc"}, "edited": false, "score": 0, "creation_date": 1422452992, "post_id": 28193637, "comment_id": 44754614, "body": "After the first command the screen went blank and I could not do anything but reboot my Pi."}], "owner": {"reputation": 1513, "user_id": 1334750, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/0vTHg.png?s=128&g=1", "display_name": "Pawe\u0142 Duda", "link": "https://stackoverflow.com/users/1334750/pawe%c5%82-duda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422452214, "creation_date": 1422452214, "question_id": 28193637, "link": "https://stackoverflow.com/questions/28193637/two-linux-programs-running-simultaneously-and-keypress-capturing", "title": "Two linux programs running simultaneously and keypress capturing", "body": "<p>I have an OpenVG digital signage application running on Raspberry Pi (linux). Unfortunately, making it display a full-screen .jpg background in a loop slows down things a lot. </p>\n\n<p>So instead I went for a transparent background and my OpenVG program running on layer 1. Then, I also start FBI (a shell program that displays images in framebuffer). That way I have the same visual effect but also a huge speed-up in OpenVG program working like an overlay which is very important in my case. To start both programs simultaneously I use this command: </p>\n\n<pre><code>fbi -noverbose bg.jpg | ./digital-signage\n</code></pre>\n\n<p>(-noverbose argument makes fbi display no UI, just a fullscreen image)</p>\n\n<p>The problem is, I would like to be able to capture and process keypresses in my OpenVG application. The code for it looks like this:</p>\n\n<pre><code>void changemode(int dir) {\n    static struct termios oldt, newt;\n\n    if (dir == 1) {\n        tcgetattr( STDIN_FILENO, &amp;oldt);\n        newt = oldt;\n        newt.c_lflag &amp;= ~( ICANON | ECHO );\n        tcsetattr( STDIN_FILENO, TCSANOW, &amp;newt);\n    } else {\n        tcsetattr( STDIN_FILENO, TCSANOW, &amp;oldt);\n    }   \n}\n\nint kbhit(void) {\n    struct timeval tv;\n    fd_set rdfs;\n\n    tv.tv_sec = 0;\n    tv.tv_usec = 0;\n\n    FD_ZERO(&amp;rdfs);\n    FD_SET(STDIN_FILENO, &amp;rdfs);\n\n    select(STDIN_FILENO+1, &amp;rdfs, NULL, NULL, &amp;tv);\n    return FD_ISSET(STDIN_FILENO, &amp;rdfs);\n}\n\nint main(int argc, char **argv) {\n    char key = 0;\n\n    changemode(1);\n    while (!kbhit()) {\n        // do the rendering here until a key is pressed\n    }\n    key = getchar();\n    changemode(0);\n    finish(); \n\n    printf(\"%c\", key);\n    return 0;\n}\n</code></pre>\n\n<p>As you can see, the program will loop until a keypress is detected, then it echoes the key and exits. It works fine when I only run the OpenVG application:</p>\n\n<pre><code>./digital-signage\n</code></pre>\n\n<p>But when I do this...</p>\n\n<pre><code>fbi -noverbose bg.jpg | ./digital-signage\n</code></pre>\n\n<p>The key is always wrong because fbi seems to catch the input (and it does properly because it reacts to keyboard shortcuts). <strong>The program exits but detects incorrect key.</strong></p>\n\n<p>My problem is that I do not need fbi to react to anything. I need my OpenVG application to handle keypress properly. Is there any way to achieve it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1422452473, "post_id": 28193589, "comment_id": 44754284, "body": "what is your input? what is your output?"}, {"owner": {"reputation": 29, "user_id": 2857811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001132332877/picture?type=large", "display_name": "Bruno Novais", "link": "https://stackoverflow.com/users/2857811/bruno-novais"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1422452593, "post_id": 28193589, "comment_id": 44754352, "body": "my output is after comented line in prints.."}], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1422452290, "post_id": 28193620, "comment_id": 44754159, "body": "<code>%lf</code> should do the same as <code>%f</code>."}, {"owner": {"reputation": 1170, "user_id": 771451, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/be0b359becd3d11206ab659fcef3ac0a?s=128&d=identicon&r=PG", "display_name": "Aymanadou", "link": "https://stackoverflow.com/users/771451/aymanadou"}, "edited": false, "score": 1, "creation_date": 1422452646, "post_id": 28193620, "comment_id": 44754391, "body": "float strtof (const char* str, char** endptr); only two parameter allowed"}, {"owner": {"reputation": 29, "user_id": 2857811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001132332877/picture?type=large", "display_name": "Bruno Novais", "link": "https://stackoverflow.com/users/2857811/bruno-novais"}, "edited": false, "score": 0, "creation_date": 1422452856, "post_id": 28193620, "comment_id": 44754519, "body": "hmmm it work.  strtof what is last paramter ? ( My monodev put a warning about more paramter )  it is right atof return int and double.. I need a float i need use strtof"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 29, "user_id": 2857811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001132332877/picture?type=large", "display_name": "Bruno Novais", "link": "https://stackoverflow.com/users/2857811/bruno-novais"}, "edited": false, "score": 0, "creation_date": 1422453225, "post_id": 28193620, "comment_id": 44754773, "body": "@BrunoNovais Last parameter is a pointer to the characters that could not be converted, if all of them are converted, then it will only contain 1 character, the terminating nul byte <code>&#39;\\0&#39;</code>"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": -1, "last_activity_date": 1422452854, "last_edit_date": 1422452854, "creation_date": 1422452157, "answer_id": 28193620, "question_id": 28193589, "link": "https://stackoverflow.com/questions/28193589/pass-float-in-argument-issue/28193620#28193620", "title": "Pass float in argument issue", "body": "<p>First of all include <code>stdlib.h</code>, then change this</p>\n\n<pre><code>printf(\"%lf\\n\", floatNumber );\n</code></pre>\n\n<p>to</p>\n\n<pre><code>printf(\"%f\\n\", floatNumber );\n</code></pre>\n\n<p>the correct specifier for <code>float</code> in <code>printf()</code> is <code>\"%f\"</code>.</p>\n\n<p>By omiting <code>stdlib.h</code> the compiler assumes that <code>atof()</code> returns <code>int</code>, which is the cause of the porblem.</p>\n\n<p>You should also use a function that allows you to be sure that the conversion was performed correctly, instead of assuming that <code>argv[1]</code> is convertible, so for example a version of your program that will check for conversion errors would be</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main (int argc, char *argv[])\n{\n    if(argc&gt;1)\n    {\n        char *endptr;\n\n        printf(\"%s\\n\", argv[1] ); // 222         \n\n        float floatNumber = strtof(argv[1], &amp;endptr);\n        if (*endptr != '\\0')\n            printf(\"%s is not convertible to float\\n\", argv[1]);\n        else\n            printf(\"%f\\n\", floatNumber ); //0.000000            \n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>Finally</strong>: to prevent this kind of problems, use compiler warnings, the compiler should have warned you about implicit function declaration, since <code>atof()</code> is implicitly declared in your program.</p>\n\n<p>When a funciton is implicitly declared the compiler assumes that it's return value is <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422452834, "post_id": 28193716, "comment_id": 44754500, "body": "After having seen the problem several times since I am on Stack Overflow, I still miss this, why would someone compile their program without checking all includes? and why not use warnings? I just noticed this was the problem, after thinking that the program was alright, why would it fail? ... Oh! <code>stdlib.h</code> is not included... +1"}, {"owner": {"reputation": 29, "user_id": 2857811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001132332877/picture?type=large", "display_name": "Bruno Novais", "link": "https://stackoverflow.com/users/2857811/bruno-novais"}, "edited": false, "score": 0, "creation_date": 1422581482, "post_id": 28193716, "comment_id": 44818669, "body": "is exactly that..  but solution cant be used with atof.. atof return int i need a float.  but you have a good post thnkx."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "reply_to_user": {"reputation": 29, "user_id": 2857811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001132332877/picture?type=large", "display_name": "Bruno Novais", "link": "https://stackoverflow.com/users/2857811/bruno-novais"}, "edited": false, "score": 0, "creation_date": 1422611167, "post_id": 28193716, "comment_id": 44828265, "body": "@BrunoNovais What do you mean? <code>atof()</code> returns <code>double</code> if you include <code>stdlib.h</code>, it only returns <code>int</code> if you don&#39;t include <code>stdlib.h</code>"}], "tags": [], "owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "is_accepted": false, "score": 7, "last_activity_date": 1422452461, "creation_date": 1422452461, "answer_id": 28193716, "question_id": 28193589, "link": "https://stackoverflow.com/questions/28193589/pass-float-in-argument-issue/28193716#28193716", "title": "Pass float in argument issue", "body": "<p>You need <code>#include &lt;stdlib.h&gt;</code>.</p>\n\n<p>The function prototype for <code>atof()</code> is declared in <code>&lt;stdlib.h&gt;</code>. Failure to include this results in the <code>atof()</code> function being assumed to return an <code>int</code>.</p>\n\n<p>You would have known if you turned on compiler warnings. For example, gcc gives the following warning:</p>\n\n<pre><code>warning: implicit declaration of function \u2018atof\u2019 [-Wimplicit-function-declaration]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 0, "creation_date": 1422452945, "post_id": 28193874, "comment_id": 44754575, "body": "At least according to the Linux Programmer&#39;s Manual, <code>atof()</code> conforms to C99."}], "tags": [], "owner": {"reputation": 3366, "user_id": 2193418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12788df365569bd764b6c51f7ed22199?s=128&d=identicon&r=PG&f=1", "display_name": "lqhcpsgbl", "link": "https://stackoverflow.com/users/2193418/lqhcpsgbl"}, "is_accepted": false, "score": 2, "last_activity_date": 1422452887, "creation_date": 1422452887, "answer_id": 28193874, "question_id": 28193589, "link": "https://stackoverflow.com/questions/28193589/pass-float-in-argument-issue/28193874#28193874", "title": "Pass float in argument issue", "body": "<p>You should add header file <code>stdlib.h</code> and <code>atof</code> return double type not float so try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\nint main (int argc, char *argv[])\n{\n    if(argc&gt;1)\n    {\n        printf(\"%s\\n\", argv[1] ); // 222\n\n        double floatNumber = atof( argv[1] );\n\n        printf(\"%lf\\n\", floatNumber ); //0.000000\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>besides, <code>atof()</code> is for both <a href=\"http://linux.die.net/man/3/atof\" rel=\"nofollow\">c99 or c89</a>:</p>\n\n<pre><code>zookeepdeMacBook-Pro:Desktop zookeep$ gcc test.c -o test\nzookeepdeMacBook-Pro:Desktop zookeep$ ./test 222\n222\n222.000000\n</code></pre>\n\n<p>will works fine.</p>\n"}], "owner": {"reputation": 29, "user_id": 2857811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001132332877/picture?type=large", "display_name": "Bruno Novais", "link": "https://stackoverflow.com/users/2857811/bruno-novais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1556, "favorite_count": 0, "accepted_answer_id": 28193620, "answer_count": 3, "score": 0, "last_activity_date": 1422452887, "creation_date": 1422452057, "last_edit_date": 1422452728, "question_id": 28193589, "link": "https://stackoverflow.com/questions/28193589/pass-float-in-argument-issue", "title": "Pass float in argument issue", "body": "<p>I need pass float numbers and get it in program.</p>\n\n<p>I tried a few ways but not success.  Here my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (int argc, char *argv[])\n{\n    if(argc&gt;1)\n    {\n        printf(\"String \\t[%s]\\n\", argv[1] ); // 222\n\n        float floatNumber = atof( argv[1] );\n\n        printf(\"Float \\t[%lf]\\n\", floatNumber ); //0.000000\n\n        printf(\"Float \\t[%f]\\n\", floatNumber );  //0.000000     \n\n        double doubleValue = atof( argv[1] );\n\n        printf(\"Double \\t[%f]\\n\", doubleValue );  //0.000000    \n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "vhdl"], "comments": [{"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1422448403, "post_id": 28192260, "comment_id": 44751773, "body": "Do you need to read the data in runtime (as an input pin/bus for the curcuit) or do you need to use it to modify the circuit, i.e. the program itself?"}, {"owner": {"reputation": 1, "user_id": 3374691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6bb8bad7b2e71505cac57976d7e8a0?s=128&d=identicon&r=PG&f=1", "display_name": "user3374691", "link": "https://stackoverflow.com/users/3374691/user3374691"}, "reply_to_user": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1422449666, "post_id": 28192260, "comment_id": 44752557, "body": "in each line i have the addresses of the lookup table and the output associated to each one. so i need to read them to obtain the design. if I understood correctly your question I need them as an input"}, {"owner": {"reputation": 1565, "user_id": 3356542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1hRah.png?s=128&g=1", "display_name": "fru1tbat", "link": "https://stackoverflow.com/users/3356542/fru1tbat"}, "edited": false, "score": 0, "creation_date": 1422454750, "post_id": 28192260, "comment_id": 44755857, "body": "Reading in the file may not be sufficient - if, say, you need this for synthesis, and you&#39;re trying to populate a ROM with some matrix data you generated, file I/O will not work for you. You may need to give more details on your problem to get the answer you need."}], "answers": [{"tags": [], "owner": {"reputation": 17509, "user_id": 1818839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c85353a93872849b5ef6041b2f28fb3?s=128&d=identicon&r=PG&f=1", "display_name": "user_1818839", "link": "https://stackoverflow.com/users/1818839/user-1818839"}, "is_accepted": false, "score": 2, "last_activity_date": 1422461860, "creation_date": 1422461860, "answer_id": 28197159, "question_id": 28192260, "link": "https://stackoverflow.com/questions/28192260/reading-data-into-vhdl/28197159#28197159", "title": "reading data into VHDL", "body": "<p>If you are fluent in C, add a few printf statements to the start of your program like the following:</p>\n\n<pre><code>printf(\"Package ROM is\\n\");\nprintf(\"   constant Memory : array(0 to 255) of Natural;\\n\");\nprintf(\"end ROM;\\n\\n\");\nprintf(\"Package Body ROM is\\n\");\nprintf(\"   constant Memory : array(0 to 255) of Natural := (\\n\");\n</code></pre>\n\n<p>You may have to tweak printing the actual contentsto generate valid comma-separated VHDL literals (remember, no comma after the last value!)</p>\n\n<p>Then at the end of your program (before closing the file!) add</p>\n\n<pre><code>printf(\"   );\\n\");\nprintf(\"end ROM;\\n\");\n</code></pre>\n\n<p>Now you can use <code>Rom.Memory</code> in your VHDL for either sim or synthesis without worrying about reading files.</p>\n"}, {"tags": [], "owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "is_accepted": false, "score": 0, "last_activity_date": 1422635643, "last_edit_date": 1495542511, "creation_date": 1422635207, "answer_id": 28240291, "question_id": 28192260, "link": "https://stackoverflow.com/questions/28192260/reading-data-into-vhdl/28240291#28240291", "title": "reading data into VHDL", "body": "<p>Judging by <a href=\"https://stackoverflow.com/questions/28192260/reading-data-into-vhdl#comment44752557_28192260\">comment44752557</a>, you use the data to specify the wiring. Then your program is essentially partly autogenerated from a template.</p>\n\n<p>VHDL has no such facilities, it specifies a circuit statically. So you need to use some custom step and/or 3rd party tool to generate the program from your \"template\". <a href=\"https://stackoverflow.com/a/28197159/648265\">Brian Drummond's answer</a> gives one possible way to do this.</p>\n\n<p>If, on the other hand, your circuit includes some programmable element that you need to burn with your data prior to using, then implement the burning procedure with input signals, one of which would be from the file. Alternatively, the element might allow to specify the initial contents of its memory somehow.</p>\n"}], "owner": {"reputation": 1, "user_id": 3374691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c6bb8bad7b2e71505cac57976d7e8a0?s=128&d=identicon&r=PG&f=1", "display_name": "user3374691", "link": "https://stackoverflow.com/users/3374691/user3374691"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1422635643, "creation_date": 1422448081, "question_id": 28192260, "link": "https://stackoverflow.com/questions/28192260/reading-data-into-vhdl", "title": "reading data into VHDL", "body": "<p>I have a C program which performs a lookup table. I insert the size of my matrix by console and I have the output data printed on a text file. Then I should use this data  stored in the text file into a VHDL compiler, to obtain the design of the circuit. Does anybody knows how to read this data using VHDL code?\nThanks</p>\n"}, {"tags": ["c", "for-loop", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 4, "creation_date": 1422446427, "post_id": 28191655, "comment_id": 44750633, "body": "Both of your <code>for</code> loops calls <code>getchar()</code> twice which causes each check to be performed only on every other character."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1422447087, "last_edit_date": 1422447087, "creation_date": 1422446188, "answer_id": 28191686, "question_id": 28191655, "link": "https://stackoverflow.com/questions/28191655/c-rewriting-a-while-loop-in-a-for-loop-with-if-statements/28191686#28191686", "title": "C - Rewriting a while-loop in a for-loop with if statements", "body": "<p>You are calling <code>getchar()</code> twice</p>\n\n<pre><code>for (nc = 0; getchar() != EOF; ++nc)\n    if (getchar() == '\\n')\n        --nc;\nprintf(\"%d\", nc);\n</code></pre>\n\n<p>try this instead</p>\n\n<pre><code>int chr;\nint nc;\n\nchr = fgetc(stdin);\nfor (nc = 0 ; chr != EOF ; nc += (chr == '\\n') ? 0 : 1)\n    chr = fgetc(stdin);\nprintf(\"%d\\n\", nc);\n</code></pre>\n\n<p><code>getchar()</code> which is equivalent to <code>fgetc(stdin)</code> reads a character from the input stream <code>stdin</code>, once you read that character you have to process it because it's removed from the stream, so calling the function twice will remove two characters from <code>stdin</code> and hence your count will be wrong.</p>\n\n<p>So it doesn't matter how you write the for loop, what is important is to call <code>getchar()</code> once per iteration, for example this could work</p>\n\n<pre><code>int chr;\nint nc;\n\nfor (nc = 0 ; ((chr = fgetc(stdin)) != EOF) ; nc += (chr == '\\n') ? 0 : 1);\nprintf(\"%d\\n\", nc);\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>int chr;\nint nc;\n\nfor (nc = 0 ; ((chr = fgetc(stdin)) != EOF) ; )\n{\n    if (chr != '\\n')\n        nc += 1;\n}\nprintf(\"%d\\n\", nc);\n</code></pre>\n\n<p>note that <code>x = (condition) ? value : another_value</code> is called the <a href=\"http://en.wikipedia.org/wiki/%3F:#C\" rel=\"nofollow\">ternary operator</a>, and is equivalent to</p>\n\n<pre><code>if (condition)\n    x = value;\nelse\n    x = another_value;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3425, "user_id": 3865158, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/tcEZu.jpg?s=128&g=1", "display_name": "Igor", "link": "https://stackoverflow.com/users/3865158/igor"}, "edited": false, "score": 2, "creation_date": 1422446685, "post_id": 28191692, "comment_id": 44750776, "body": "Your mistake is that you give ready code without explanation to a complete beginnner. That is not the way in which he will learn. What&#39;s the point of copy-pasting?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 3425, "user_id": 3865158, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/tcEZu.jpg?s=128&g=1", "display_name": "Igor", "link": "https://stackoverflow.com/users/3865158/igor"}, "edited": false, "score": 0, "creation_date": 1422446747, "post_id": 28191692, "comment_id": 44750814, "body": "@Igor Really !!!!!! ok I take it but I am happy my code is good. Needs explanation :)"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1422446832, "post_id": 28191692, "comment_id": 44750864, "body": "@undur_gongor What is strange here."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 2, "last_activity_date": 1422446903, "last_edit_date": 1422446903, "creation_date": 1422446202, "answer_id": 28191692, "question_id": 28191655, "link": "https://stackoverflow.com/questions/28191655/c-rewriting-a-while-loop-in-a-for-loop-with-if-statements/28191692#28191692", "title": "C - Rewriting a while-loop in a for-loop with if statements", "body": "<p>It can be done as shown below </p>\n\n<pre><code>    int nc=0;\n    char ch;\n    for (; (ch =getchar()) != EOF; )\n    {\n        if (ch != '\\n')\n            nc++;\n    }\n\n    printf(\"Count = %d\\n\",nc);\n</code></pre>\n\n<p>The initialization and increment are not mandatory they can be skipped as shown in the above code.So by doing this we are achieving the same as we do with your <code>while()</code> loop</p>\n"}, {"comments": [{"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1422455774, "post_id": 28191890, "comment_id": 44756536, "body": "why did you pose <code>c = &#39;\\n&#39;</code> in your first statement? did you mean &#39;c = getchar()`?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1422457891, "post_id": 28191890, "comment_id": 44757986, "body": "So that it would do nothing the first iteration. A better way is to use <code>c = getchar()</code> which I did in the second example."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 3, "last_activity_date": 1422446826, "creation_date": 1422446826, "answer_id": 28191890, "question_id": 28191655, "link": "https://stackoverflow.com/questions/28191655/c-rewriting-a-while-loop-in-a-for-loop-with-if-statements/28191890#28191890", "title": "C - Rewriting a while-loop in a for-loop with if statements", "body": "<p>This is one equivalent way, although I'm not really happy about having to initialize <code>c</code> to <code>\\n</code>. (the reason for this is that the get_char is performed in the post step:</p>\n\n<pre><code>int c, nc;\n\nfor (c = '\\n', nc = 0; c != EOF; c = getchar()) {\n    if (c != '\\n')\n        ++nc;\n    }\n}\nprintf(\"%d\\n\", nc);\n</code></pre>\n\n<p>Another way is:</p>\n\n<pre><code>int c, nc;\nc = getchar();\nfor (nc = 0; c != EOF; c = getchar()) {\n    if (c != '\\n')\n        ++nc;\n    }\n}\nprintf(\"%d\\n\", nc);\n</code></pre>\n"}], "owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1185, "favorite_count": 0, "accepted_answer_id": 28191686, "answer_count": 3, "score": 0, "last_activity_date": 1422447087, "creation_date": 1422446090, "question_id": 28191655, "link": "https://stackoverflow.com/questions/28191655/c-rewriting-a-while-loop-in-a-for-loop-with-if-statements", "title": "C - Rewriting a while-loop in a for-loop with if statements", "body": "<p><strong>--beware of horrible newbie code ahead--</strong></p>\n\n<p>I'm trying to rewrite this simple counting program from <code>while</code> to <code>for</code>.</p>\n\n<pre><code>int c, nc;\n\nnc = 0;\nwhile ((c = getchar()) != EOF) {\n    if (c != '\\n')\n        ++nc;\n    }\n}\nprintf(\"%d\\n\", nc);\n</code></pre>\n\n<p>this outputs <code>example-&gt;8</code>.</p>\n\n<p>so far I tried this couple of examples:</p>\n\n<pre><code>int c, nc;\nfor (nc = 0; ((c = getchar()) != EOF &amp;&amp; (c = getchar()) != '\\n'); ++nc)\n    ;\nprintf(\"%d\", nc);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int nc;\nfor (nc = 0; getchar() != EOF; ++nc)\n    if (getchar() == '\\n')\n        --nc;\nprintf(\"%d\", nc);\n</code></pre>\n\n<p>both this attempts lead to strange output like <code>example-&gt;3</code> or <code>a-&gt;0</code>, also the program doesn't \"wait\" anymore for a break after receiving its input, it just shows the output and close itself.</p>\n\n<p>I would like to know what's happening here, because as I see it I just inserted (quite clumsily.. ) an <code>if</code> check and can't seem to explain what's happening..</p>\n"}, {"tags": ["c", "json", "csv"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4498191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/095732b7cf53726d5048c749fb87e00a?s=128&d=identicon&r=PG&f=1", "display_name": "Slim R", "link": "https://stackoverflow.com/users/4498191/slim-r"}, "edited": false, "score": 0, "creation_date": 1422452940, "post_id": 28191726, "comment_id": 44754573, "body": "Thank you ever so much! :)"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 3, "last_activity_date": 1422446320, "creation_date": 1422446320, "answer_id": 28191726, "question_id": 28191376, "link": "https://stackoverflow.com/questions/28191376/store-data-dynamically-after-reading-from-a-file/28191726#28191726", "title": "Store data dynamically after reading from a file", "body": "<p>Use this code:</p>\n\n<pre><code>char a[50], b[50];\nwhile(1 == fscanf(file,\" %[^,]\",a) ) /* Read data until a comma is detected,  */\n{\n  fgetc( file ); // Ignore , character\n  fscanf(file,\" %[^,]\",b); /* Read data until a comma is detected,  */\n  fgetc( file ); // Ignore , character\n  printf(\"{\\\"%s\\\":\\\"%s\\\"}\\n\",a,b); /* Display results into {\"A\":\"B\"} format */\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/LFS69E\" rel=\"nofollow\">Live demo here</a></p>\n\n<p>Note the extra space before format in <code>fscanf</code></p>\n\n<p>The algorithm to read is:</p>\n\n<pre><code>while( is reading [a] succesful )\n{\n  ignore comma\n  read [b]\n  ignore comma\n  print {\"a\": \"b\"}\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4498191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/095732b7cf53726d5048c749fb87e00a?s=128&d=identicon&r=PG&f=1", "display_name": "Slim R", "link": "https://stackoverflow.com/users/4498191/slim-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 28191726, "answer_count": 1, "score": 2, "last_activity_date": 1422446320, "creation_date": 1422445235, "last_edit_date": 1422446095, "question_id": 28191376, "link": "https://stackoverflow.com/questions/28191376/store-data-dynamically-after-reading-from-a-file", "title": "Store data dynamically after reading from a file", "body": "<p>I am trying to read strings from a file separated by commas, and want to display and save the result into a particular format (which looks like a JSON format) during output.</p>\n\n<p>I managed to read and display data from a file but failed to dynamically display it in a format which looks like the example below. Instead, it just displays the entire string in one line before ending.</p>\n\n<p>e.g.</p>\n\n<p><strong>Contents of the file:</strong><br>\nDistance, 50km, Time, 2 hrs, Date, 1 Jan 2015, etc.</p>\n\n<p><strong>Desired output result:</strong>   </p>\n\n<pre><code>{\"Distance\":\"50km\"}\n{\"Time\":\"2hrs\"}  \n{\"Date\":\"1 Jan 2015\"}\n</code></pre>\n\n<p><strong>Actual Output</strong><br>\n{\" Entire contents from the file \" : \" nothing appears here \"} </p>\n\n<p>I've commented out the lines that deals with reading the file contents until it finds a comma, and where it prints the result in the desired format as those lines didn't work correctly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main ( int argc, char *argv[] )\n{     \n  if ( argc != 2 )\n  {    printf( \"Insert filename you wish to open\\n Eg: %s filename\\n\\n\", argv[0] );\n  }\n else\n   {\n    FILE *file = fopen( argv[1], \"r\" );\n\n    if ( file == 0 )\n    {\n        printf( \"There was an error opening the file\\n\\n\" );\n    }\n    else\n    {\n        char a,b;\n        while  ( ( a = fgetc( file ) ) != EOF )\n        {\n            printf( \"%c\", a,b );\n//fscanf(file,\"%[^,]\",a);/* Read data until a comma is detected,  */\n// printf(\"\\nData from file:\\n{\\\"%s\\\" : \\\"%s\\\"}\\n\\n\",a,b); /* Display results into {\"A\":\"B\"} format */\n        }\n        fclose( file );\n    }\n  }\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "qsort"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422445128, "post_id": 28191285, "comment_id": 44749914, "body": "You should not add answers that are not really answers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3151614"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1422445181, "post_id": 28191285, "comment_id": 44749944, "body": "yeah. its just a wild guess i can remove it when its proven to be wrong"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 2, "last_activity_date": 1422445306, "creation_date": 1422445306, "answer_id": 28191393, "question_id": 28191285, "link": "https://stackoverflow.com/questions/28191285/function-pointer-as-parameter-of-qsort-function/28191393#28191393", "title": "Function pointer as parameter of qsort function", "body": "<blockquote>\n  <p>Well i understand a will casted to MyType* but what about the star\n  after that on the very left? what is it doing?</p>\n</blockquote>\n\n<p>So you know <code>a</code> is a pointer and pointer holds some valid memory location the value stored in that memory location is fetched by using the <code>*</code> operator which is called Dereferencing a pointer</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3151614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 28191393, "answer_count": 1, "score": 1, "last_activity_date": 1422445834, "creation_date": 1422445017, "last_edit_date": 1422445834, "question_id": 28191285, "link": "https://stackoverflow.com/questions/28191285/function-pointer-as-parameter-of-qsort-function", "title": "Function pointer as parameter of qsort function", "body": "<p>at the qsort function in c there is a functin pointer to the compare function, which actually sorts the data of the array given.</p>\n\n<p>so inside that function i see:</p>\n\n<pre><code>if ( *(MyType*)a &lt;  *(MyType*)b ) return -1;\n</code></pre>\n\n<p>Well i understand a will casted to MyType* but what about the star after that on the very left? what is it doing?</p>\n\n<p>Well, i guess this just dereference the pointer a?</p>\n\n<p>thx.</p>\n\n<p>/me</p>\n"}, {"tags": ["c", "function", "gcc", "compiled", "inline-functions"], "comments": [{"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1422445125, "post_id": 28191141, "comment_id": 44749908, "body": "If you&#39;re not sure what compiler generates, you can always use <code>-S</code> (and maybe <code>-fverbose-asm</code> for better readability) and check generated assembly. Result may be different for different compiler options and optimisation levels."}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1422444963, "creation_date": 1422444963, "answer_id": 28191263, "question_id": 28191141, "link": "https://stackoverflow.com/questions/28191141/how-to-compile-inline-c-function-with-literal-attributes-with-gcc/28191263#28191263", "title": "How to compile inline C function with literal attributes with GCC?", "body": "<p>Yes, in general gcc will optimise away dead code in inline functions when it can evaluate branches at compile-time. I use this construct a lot to allow optimised code to be generated for different use cases - somewhat like template instantiation in C++.</p>\n"}], "owner": {"reputation": 35, "user_id": 4502562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f26979a3f7c117dde3131e0db431f4cd?s=128&d=identicon&r=PG&f=1", "display_name": "kergtot", "link": "https://stackoverflow.com/users/4502562/kergtot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 28191263, "answer_count": 1, "score": 1, "last_activity_date": 1424290052, "creation_date": 1422444606, "last_edit_date": 1424290052, "question_id": 28191141, "link": "https://stackoverflow.com/questions/28191141/how-to-compile-inline-c-function-with-literal-attributes-with-gcc", "title": "How to compile inline C function with literal attributes with GCC?", "body": "<p>I have an <code>inline</code> function like this:</p>\n\n<pre><code>inline void func_1 (int a)\n{\n   if(a==1)\n   {\n      other_func1();\n   }\n   else\n   {\n      other_func2();\n   }\n}\n</code></pre>\n\n<p>and I use in the Main like this:</p>\n\n<pre><code> int main()\n {\n     func1(1);\n     func1(42);\n\n     return 0;\n }\n</code></pre>\n\n<p>I use GCC, I think, the compiled code look like this (in \u201csource level\u201d):</p>\n\n<pre><code> int main()\n {\n     other_func1()\n     other_func2();\n\n     return 0;\n }\n</code></pre>\n\n<p>Is it true or am I wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1422444413, "post_id": 28191024, "comment_id": 44749525, "body": "<a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/strxfrm.html\" rel=\"nofollow noreferrer\">strxfrm.html</a> defines the difference in DESCRIPTION itself."}, {"owner": {"reputation": 74, "user_id": 4237396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YOYiWlcIplg/AAAAAAAAAAI/AAAAAAAAACg/RMiSTTsfNwE/photo.jpg?sz=128", "display_name": "audin", "link": "https://stackoverflow.com/users/4237396/audin"}, "reply_to_user": {"reputation": 6115, "user_id": 2339452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvFTP.jpg?s=128&g=1", "display_name": "Dayal rai", "link": "https://stackoverflow.com/users/2339452/dayal-rai"}, "edited": false, "score": 0, "creation_date": 1422444913, "post_id": 28191024, "comment_id": 44749791, "body": "much obliged, appreciate it"}], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 581966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/560c58dc25f8f61e4a2622b20e0d6b79?s=128&d=identicon&r=PG", "display_name": "John Calcote", "link": "https://stackoverflow.com/users/581966/john-calcote"}, "edited": false, "score": 0, "creation_date": 1530588302, "post_id": 28191107, "comment_id": 89276601, "body": "This answer should not have been accepted. It&#39;s simply not true. While the return values are not the same, the functions do not do the same thing either. strcpy copies the contents of s2 into s1, while strxfrm transforms the characters in s2 into something which will make strcmp return the same results as strcoll for two strings that have been transformed. strxfrm then places the resulting characters in s1. This MAY be the same content, but it&#39;s equally likely that it will be something not even printable."}], "tags": [], "owner": {"reputation": 3425, "user_id": 3865158, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/tcEZu.jpg?s=128&g=1", "display_name": "Igor", "link": "https://stackoverflow.com/users/3865158/igor"}, "is_accepted": true, "score": 2, "last_activity_date": 1422444484, "creation_date": 1422444484, "answer_id": 28191107, "question_id": 28191024, "link": "https://stackoverflow.com/questions/28191024/difference-between-strncpy-and-strxfrm/28191107#28191107", "title": "difference between strncpy and strxfrm", "body": "<p>The difference is in the <strong>return value</strong>:</p>\n\n<p>The <strong>strcpy()</strong> and <strong>strncpy()</strong> functions return a <strong>pointer</strong> to the destination string.</p>\n\n<p>Upon successful completion, <strong>strxfrm()</strong> shall return the <strong>length</strong> of the transformed string (not including the terminating null byte). If the value returned is n or more, the contents of the array pointed to by s1 are unspecified.</p>\n"}], "owner": {"reputation": 74, "user_id": 4237396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YOYiWlcIplg/AAAAAAAAAAI/AAAAAAAAACg/RMiSTTsfNwE/photo.jpg?sz=128", "display_name": "audin", "link": "https://stackoverflow.com/users/4237396/audin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 28191107, "answer_count": 1, "score": 2, "last_activity_date": 1422444598, "creation_date": 1422444234, "last_edit_date": 1422444598, "question_id": 28191024, "link": "https://stackoverflow.com/questions/28191024/difference-between-strncpy-and-strxfrm", "title": "difference between strncpy and strxfrm", "body": "<p>I can't seem to get my head around this, what is the basic difference between these two functions:</p>\n\n<pre><code>char *strncpy(char *str1, const char *str2, size_t  count);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>size_t strxfrm(char *str1, const char *str2, size_t  count);\n</code></pre>\n\n<p>To me it seems they both copy <code>count</code> characters from <code>str2</code> to <code>str1</code>. What I really want to know is, when should I use either of them?</p>\n"}, {"tags": ["c", "arrays", "pointers", "while-loop"], "comments": [{"owner": {"reputation": 21474, "user_id": 718379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4810c6c963334e5dce573e6671d746ec?s=128&d=identicon&r=PG", "display_name": "timrau", "link": "https://stackoverflow.com/users/718379/timrau"}, "edited": false, "score": 4, "creation_date": 1422442616, "post_id": 28190386, "comment_id": 44748552, "body": "You didn&#39;t initialize <code>i</code> in <code>position()</code>."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1422442833, "post_id": 28190386, "comment_id": 44748669, "body": "<code>pos</code> is incremented by pointer arithmetic. Is the current position in the string."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1422442988, "post_id": 28190386, "comment_id": 44748755, "body": "Don&#39;t use <code>gets()</code> use <code>fgets()</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "is_accepted": false, "score": 1, "last_activity_date": 1422443507, "last_edit_date": 1422443507, "creation_date": 1422443077, "answer_id": 28190623, "question_id": 28190386, "link": "https://stackoverflow.com/questions/28190386/c-pointers-and-arrays/28190623#28190623", "title": "C pointers and arrays", "body": "<blockquote>\n  <p>What is unclear to me is what is exactly in the pos variable once it is set and how exactly the while loop at the end works?</p>\n</blockquote>\n\n<p>Your code contains lot of bugs but if your question is just what I quote a simple answer is:</p>\n\n<p><code>pos</code> is a pointer in <code>sentence</code> string. Start to point in where <code>sentence</code> point and move away to reach the end of string. </p>\n\n<p><code>position()</code> take a start point end return the point where <code>letter</code> is found, otherwise it return <code>NULL</code>: so when you write <code>pos = position (letter, pos);</code> <code>pos</code> is moved to <code>letter</code> position. After that by <code>pos +=1;</code> you move away to the next element (move the pointer of one char).\nWhen there are any letter <code>position()</code> return <code>NULL</code> and <code>while</code> cycle terminate. </p>\n"}, {"tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1422443135, "creation_date": 1422443135, "answer_id": 28190639, "question_id": 28190386, "link": "https://stackoverflow.com/questions/28190386/c-pointers-and-arrays/28190639#28190639", "title": "C pointers and arrays", "body": "<p>pos is initialized with <code>char *pos = sentence;</code> which lets it point to the first character in <code>sentence</code>, due to arrays \"decaying\" to pointers in most expressions, like this one. After that, it points to elements inside <code>sentence</code> because <code>position()</code> returns <code>sentence+i</code> which is the address of the first element of sentence plus the offset i.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4502507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da714a06e921f4ad6b796a06a44317e8?s=128&d=identicon&r=PG&f=1", "display_name": "Manda K", "link": "https://stackoverflow.com/users/4502507/manda-k"}, "edited": false, "score": 0, "creation_date": 1422444589, "post_id": 28190800, "comment_id": 44749619, "body": "Thanks for the quick and helpful reply, I get it now!"}], "tags": [], "owner": {"reputation": 126, "user_id": 4240204, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8239250bdec0102eb34a6f25df1ee621?s=128&d=identicon&r=PG&f=1", "display_name": "morgelo", "link": "https://stackoverflow.com/users/4240204/morgelo"}, "is_accepted": true, "score": 2, "last_activity_date": 1422443610, "creation_date": 1422443610, "answer_id": 28190800, "question_id": 28190386, "link": "https://stackoverflow.com/questions/28190386/c-pointers-and-arrays/28190800#28190800", "title": "C pointers and arrays", "body": "<p>Lets do a small example: you've got the String \"abaab\" and your looking for the Letter b. As you know a C-String always ends with '\\0'. So at beginning your pos represents the whole string.</p>\n\n<pre><code>abaab\\0 //pos represents =\"abaab\"\n| \npos\n</code></pre>\n\n<p>After that you call your function: postiton(pos, 'b'). Pos now points on the seccond letter. And with this pos only represents the smaller String \"baab\".</p>\n\n<pre><code>abaab\\0 //pos represents=\"baab\"\n | \npos\n</code></pre>\n\n<p>After ++pos; you got this situation: (pos represents a smaller String)</p>\n\n<pre><code>abaab\\0 //pos represents =\"aab\"\n  | \n pos\n</code></pre>\n\n<p>When you now call the position function again. pos will point on the next 'b'. And of course the String is shorter again.</p>\n\n<pre><code>abaab\\0 //pos represents =\"b\"\n    | \n   pos\n</code></pre>\n\n<p>Increment pos:</p>\n\n<pre><code>abaab\\0 //pos represents =\"\"\n     | \n    pos\n</code></pre>\n\n<p>Calling the position function again will return NULL, because there is no 'b'. When this function returns NULL the while function is finished.</p>\n"}], "owner": {"reputation": 3, "user_id": 4502507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da714a06e921f4ad6b796a06a44317e8?s=128&d=identicon&r=PG&f=1", "display_name": "Manda K", "link": "https://stackoverflow.com/users/4502507/manda-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 28190800, "answer_count": 3, "score": 0, "last_activity_date": 1422444356, "creation_date": 1422442375, "last_edit_date": 1422444356, "question_id": 28190386, "link": "https://stackoverflow.com/questions/28190386/c-pointers-and-arrays", "title": "C pointers and arrays", "body": "<p>In this code I have a function besides main which finds a specific character in a string (sentence) and returns a pointer to it and otherwise it returns NULL:</p>\n\n<pre><code>char *position (char letter, char *sentence){\nint i=0;\nwhile (*(sentence+i) != '\\0') {\n    if (toupper(*(sentence+i)) == toupper (letter))\n      return (sentence+i);\n    ++i;\n}\nreturn NULL;}\n</code></pre>\n\n<p>It's all clear to me here.</p>\n\n<p>And in  the main function i have to use the previous function (position) to find how many times does a specific letter appear in a specific sentence.</p>\n\n<pre><code>int main (void){\nchar sentence [200+1];\nchar letter;\nchar *pos = sentence;\nint counter=0;\ngets(sentence);\nscanf(\"%c\", &amp;letter);\nwhile (pos != NULL){\n    pos = position (letter, pos);\n    if (pos != NULL){\n        ++counter;\n        pos +=1;\n    }\n}\nreturn 0;   \n}\n</code></pre>\n\n<p>What is unclear to me is what is exactly in the pos variable once it is set and how exactly the while loop at the end works?</p>\n\n<p>edit: forgot to initialise variable <code>i</code> in <code>function()</code>, thanks for pointing it out</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1422441926, "post_id": 28190179, "comment_id": 44748143, "body": "&quot;...efficient and concise...&quot; - drop that function then, it&#39;s not buying you anything. As for the argument: compile in standards mode, with warnings enabled (<code>-std=c99 -Wall -Wextra -pedantic</code> for gcc or clang for instance)."}, {"owner": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1422441977, "post_id": 28190179, "comment_id": 44748178, "body": "It is OK if function return value matches <code>printf</code> format. But don&#39;t expect that this improves the program performance."}, {"owner": {"reputation": 1977, "user_id": 2521785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a3dd96147f29703a6d4b84eb10e4cc08?s=128&d=identicon&r=PG&f=1", "display_name": "cheznead", "link": "https://stackoverflow.com/users/2521785/cheznead"}, "edited": false, "score": 0, "creation_date": 1422442072, "post_id": 28190179, "comment_id": 44748231, "body": "You are right. I realise I could have done all under main() but I did it this way to get practice writing my own functions outside of main() and then calling them."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1422442201, "post_id": 28190179, "comment_id": 44748305, "body": "I stumbled over your &quot;calling another function from printf&quot;. That&#39;s not. strictly spoken, what you do -- you <i>call</i> printf with an argument which is the result of a function call. Which, btw, is perfectly fine in general."}, {"owner": {"reputation": 1977, "user_id": 2521785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a3dd96147f29703a6d4b84eb10e4cc08?s=128&d=identicon&r=PG&f=1", "display_name": "cheznead", "link": "https://stackoverflow.com/users/2521785/cheznead"}, "edited": false, "score": 0, "creation_date": 1422442717, "post_id": 28190179, "comment_id": 44748614, "body": "Great! Thanks a lot for clarifying that Peter. I think I phrased it and thought of it in that way because I think of printf as a &#39;statement&#39; rather than a &#39;function&#39;. Important distinction in this case for sure!"}], "answers": [{"comments": [{"owner": {"reputation": 1977, "user_id": 2521785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a3dd96147f29703a6d4b84eb10e4cc08?s=128&d=identicon&r=PG&f=1", "display_name": "cheznead", "link": "https://stackoverflow.com/users/2521785/cheznead"}, "edited": false, "score": 0, "creation_date": 1422443857, "post_id": 28190247, "comment_id": 44749231, "body": "Thanks a lot almas for that extra info."}], "tags": [], "owner": {"reputation": 33775, "user_id": 315228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/g17T4.jpg?s=128&g=1", "display_name": "SMA", "link": "https://stackoverflow.com/users/315228/sma"}, "is_accepted": false, "score": 2, "last_activity_date": 1422441973, "creation_date": 1422441973, "answer_id": 28190247, "question_id": 28190179, "link": "https://stackoverflow.com/questions/28190179/calling-another-function-from-printf/28190247#28190247", "title": "Calling another function from printf?", "body": "<blockquote>\n  <p>\"I called my squareOfInteger function from my printf statement. Is this advisable though?\"</p>\n</blockquote>\n\n<p>There is nothing wrong in calling the function from within a function. It depends on case, where you say need to retain the squared value (as not in your case where you just need to print the value) and perform other operations on it. like:</p>\n\n<pre><code>int value = myFun(100);\nint nextVal = myNextFun(value);\n</code></pre>\n\n<blockquote>\n  <p>\"The other thing nagging at me is whether or not I need to reiterate the type as being an int inside the parameter of my function before my variable number, or whether it is enough to declare the result as being of type int, and leaving out type in the parameter, which I have done below.\"</p>\n</blockquote>\n\n<p>Yes you should use define the type of number (in your case as by default it would be integer type and would fail if you have it of other type) as a best practice as it will make code more clear and readable.</p>\n"}, {"comments": [{"owner": {"reputation": 1977, "user_id": 2521785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a3dd96147f29703a6d4b84eb10e4cc08?s=128&d=identicon&r=PG&f=1", "display_name": "cheznead", "link": "https://stackoverflow.com/users/2521785/cheznead"}, "edited": false, "score": 0, "creation_date": 1422442338, "post_id": 28190271, "comment_id": 44748386, "body": "Thanks Gopi. Is it then better to specify what type of argument your function should take within the parameter? Would that be good practice?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 1977, "user_id": 2521785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a3dd96147f29703a6d4b84eb10e4cc08?s=128&d=identicon&r=PG&f=1", "display_name": "cheznead", "link": "https://stackoverflow.com/users/2521785/cheznead"}, "edited": false, "score": 0, "creation_date": 1422442387, "post_id": 28190271, "comment_id": 44748417, "body": "@shinnyWhack Yes absoultely that is the best way and the right one"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 6, "last_activity_date": 1422442359, "last_edit_date": 1422442359, "creation_date": 1422442034, "answer_id": 28190271, "question_id": 28190179, "link": "https://stackoverflow.com/questions/28190179/calling-another-function-from-printf/28190271#28190271", "title": "Calling another function from printf?", "body": "<blockquote>\n  <p>I called my squareOfInteger function from my printf statement. Is this\n  advisable though? It worked but I'm worried this might be bad\n  practice?</p>\n</blockquote>\n\n<p>Calling a function from <code>printf()</code> is not bad. But there might be scenarios leading to undefined behavior since the order of evaluation within <code>printf()</code> is not specified.For example:</p>\n\n<pre><code>int func(int *p)\n{\n   *p =30;\n}\nint main()\n{\n   printf(\"%d %d\",num,func(&amp;num));\n   return 0;\n}\n</code></pre>\n\n<p>Here you are calling <code>func()</code> as well as printing the value of <code>num</code> so you have UB.</p>\n\n<blockquote>\n  <p>whether it is enough to declare the result as being of type int, and\n  leaving out type in the parameter</p>\n</blockquote>\n\n<p>If the type of the argument is not specified then it defaults to <code>int</code>.But it is always good to mention the type of the arguments.</p>\n"}], "owner": {"reputation": 1977, "user_id": 2521785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a3dd96147f29703a6d4b84eb10e4cc08?s=128&d=identicon&r=PG&f=1", "display_name": "cheznead", "link": "https://stackoverflow.com/users/2521785/cheznead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10311, "favorite_count": 0, "accepted_answer_id": 28190271, "answer_count": 2, "score": 2, "last_activity_date": 1422442414, "creation_date": 1422441713, "question_id": 28190179, "link": "https://stackoverflow.com/questions/28190179/calling-another-function-from-printf", "title": "Calling another function from printf?", "body": "<p>I am doing a simple challenge from a  book on C/Objective-C where I have to write a program that computes and displays the square of an integer, while also putting the numbers in quotation marks.</p>\n\n<p>I made a program that works successfully but I have two questions about it.\nFirstly having had the the idea of cutting back on the amount of code in mind, to practice being efficient and concise in my code, I called my <code>squareOfInteger</code> function from my <code>printf</code> statement. Is this advisable though? It worked but I'm worried this might be bad practice? </p>\n\n<p>The other thing nagging at me is whether or not I need to reiterate the type as being an <code>int</code> inside the parameter of my function before my variable <code>number</code>, or whether it is enough to declare the result as being of type <code>int</code>, and leaving out type in the parameter, which I have done below.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint squareOfInteger(number)\n{\n    int square = number * number;\n    return square;\n\n\n\n}\n\nint main(int argc, const char * argv[]) {\n    int myNumber = 5;\n    printf(\"\\\"%d\\\" squared is \\\"%d\\\".\\n\", myNumber, squareOfInteger(myNumber));\n    return 0;\n}\n</code></pre>\n\n<p>I would greatly appreciate your help.</p>\n"}, {"tags": ["c", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 1818, "user_id": 4491408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb320866c604eaa67685a61e799719f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4491408/rob"}, "edited": false, "score": 0, "creation_date": 1422442359, "post_id": 28190282, "comment_id": 44748396, "body": "I wouldn&#39;t even do that.  I&#39;d do  &quot;type * p = malloc(100 * sizeof(*p))&quot; in all three of your examples.   No need, if the type needs to be changed for some reason, to touch sizeof&#39;s operand."}, {"owner": {"reputation": 2548, "user_id": 802997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/03f53c19a23c299133b7ee4ebb58cb7a?s=128&d=identicon&r=PG&f=1", "display_name": "totten", "link": "https://stackoverflow.com/users/802997/totten"}, "edited": false, "score": 0, "creation_date": 1422442386, "post_id": 28190282, "comment_id": 44748414, "body": "sizeof(char) cannot assumed to be always 1 ( <a href=\"http://stackoverflow.com/questions/2215445/are-there-machines-where-sizeofchar-1\" title=\"are there machines where sizeofchar 1\">stackoverflow.com/questions/2215445/&hellip;</a> ). If you&#39;re writing kernel driver, you must use sizeof(char).   I&#39;m not adding trailing zero since I&#39;m reporting the sizeof data to user. And user must properly use this. I&#39;m not sending the all data - at least always."}, {"owner": {"reputation": 1818, "user_id": 4491408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb320866c604eaa67685a61e799719f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4491408/rob"}, "edited": false, "score": 1, "creation_date": 1422442630, "post_id": 28190282, "comment_id": 44748560, "body": "sizeof(char) is defined by every C standard to be 1, totten.    It is not however guaranteed that a char will be 8 bits.   sizeof(char) would be 1 even for a compiler that supported 27 bit char.   (27 is a number I just made up on the spot)."}, {"owner": {"reputation": 2548, "user_id": 802997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/03f53c19a23c299133b7ee4ebb58cb7a?s=128&d=identicon&r=PG&f=1", "display_name": "totten", "link": "https://stackoverflow.com/users/802997/totten"}, "edited": false, "score": 0, "creation_date": 1422442890, "post_id": 28190282, "comment_id": 44748702, "body": "Even if it&#39;s 1 always, it&#39;s not answering my question. Is it weird?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1422444074, "post_id": 28190282, "comment_id": 44749335, "body": "But if it <i>is</i> alway 1, then multiplying with it <i>is</i> weird. Don&#39;t do it. It&#39;s not necessarily a &quot;symptom of some severe misunderstanding&quot;, it&#39;s just a sign that you don&#39;t know that it is always 1. As such it is a bit embarassing, and the code is confusing because everybody thinks &quot;wtf is he doing there!?&quot; before one understands that you didn&#39;t know sizeof(char)  is always 1. The code becomes almost unreadable."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1422444498, "post_id": 28190282, "comment_id": 44749571, "body": "<code>sizeof(char)</code> is always 1 and in your link it&#39;s also said that. A char is always a byte but not always an octet. What can be different is <a href=\"http://stackoverflow.com/questions/2098149/what-platforms-have-something-other-than-8-bit-char?lq=1\"><code>CHAR_BIT</code></a>"}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1422442052, "creation_date": 1422442052, "answer_id": 28190282, "question_id": 28190139, "link": "https://stackoverflow.com/questions/28190139/pointer-aritmetic-on-long-char-pointers/28190282#28190282", "title": "Pointer aritmetic on long, char pointers", "body": "<p>Multiplying by sizeof (char) is quite pointless, because it is by definition always 1. It never can be anything else. The only case where I would do this is when explicitly multiplying number of elements with an element size, like</p>\n\n<pre><code>long* p = malloc (100 * sizeof (long));\nint* q = malloc (100 * sizeof (int));\nchar* r = malloc (100 * sizeof (char)); \n</code></pre>\n\n<p>Multiplying a strlen () by sizeof (char) looks very, very dubious and I'd suspect that this is just a symptom of some severe misunderstanding. And if you use strlen () in an argument for memcpy, I'd expect a comment why you aren't adding 1 to account for the trailing zero byte. </p>\n"}, {"comments": [{"owner": {"reputation": 2548, "user_id": 802997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/03f53c19a23c299133b7ee4ebb58cb7a?s=128&d=identicon&r=PG&f=1", "display_name": "totten", "link": "https://stackoverflow.com/users/802997/totten"}, "edited": false, "score": 0, "creation_date": 1422443757, "post_id": 28190824, "comment_id": 44749190, "body": "Thanks, I&#39;m looking for this <b>answer</b>."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 1, "last_activity_date": 1422443703, "creation_date": 1422443703, "answer_id": 28190824, "question_id": 28190139, "link": "https://stackoverflow.com/questions/28190139/pointer-aritmetic-on-long-char-pointers/28190824#28190824", "title": "Pointer aritmetic on long, char pointers", "body": "<p><code>sizeof(char)</code> is always 1. So normally that's left out as it's redundant.</p>\n\n<pre><code>(void *)((char *)buf_k + sizeof(long)\n</code></pre>\n\n<p>There is also no need to cast to a <code>void*</code> for memcpy(). Any pointer is implicitly convertible to a void* in C, so that cast is redundant too. So you end up with:</p>\n\n<pre><code>(char *)buf_k + sizeof(long)\n</code></pre>\n"}], "owner": {"reputation": 2548, "user_id": 802997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/03f53c19a23c299133b7ee4ebb58cb7a?s=128&d=identicon&r=PG&f=1", "display_name": "totten", "link": "https://stackoverflow.com/users/802997/totten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 28190824, "answer_count": 2, "score": 0, "last_activity_date": 1422443703, "creation_date": 1422441627, "question_id": 28190139, "link": "https://stackoverflow.com/questions/28190139/pointer-aritmetic-on-long-char-pointers", "title": "Pointer aritmetic on long, char pointers", "body": "<p>I have a struct like:</p>\n\n<pre><code>struct holder {\n    int prio;\n    long id;\n    char * data;\n}\n</code></pre>\n\n<p>But for some reason, I will be using malloced space for just id and data (not the pointer, the actual data).</p>\n\n<p>Now I'm copying the data from holder to the other space like this:</p>\n\n<pre><code>struct holder * my_elem = next_data();\nvoid * buf_k = kmalloc(sizeof(long) + maxlen * sizeof(char), GFP_KERNEL);\nmemcpy(buf_k, &amp;(my_elem-&gt;id), sizeof(long));\nmemcpy((void *)((char *)buf_k + sizeof(long) * sizeof(char)), my_elem-&gt;data, sizeof(char) * str_len(my_elem-&gt;data));\n</code></pre>\n\n<p>However, the code fragment <code>(void *)((char *)buf_k + sizeof(long) * sizeof(char))</code> is seemed weird to my collugues. Especially the part <code>sizeof(long) * sizeof(char)</code>. Isn't it correct, or is it just a weird way of doing the right thing?</p>\n"}, {"tags": ["c", "include", "libcurl"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 868129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4bd4184edf8ee274365241173942b2?s=128&d=identicon&r=PG", "display_name": "afk", "link": "https://stackoverflow.com/users/868129/afk"}, "edited": false, "score": 0, "creation_date": 1422442491, "post_id": 28190230, "comment_id": 44748472, "body": "Thanks. This actually worked out. I didn&#39; considered LD_LIBRARY_PATH because of <a href=\"http://stackoverflow.com/questions/18241517/c-include-path-vs-ld-library-path\">this</a> article."}], "tags": [], "owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1422441896, "creation_date": 1422441896, "answer_id": 28190230, "question_id": 28190110, "link": "https://stackoverflow.com/questions/28190110/specify-include-directory-for-c-libs/28190230#28190230", "title": "Specify include-directory for C libs", "body": "<p>You need to specify path to curl library at LD_LIBRARY_PATH environment variable. C_INCLUDE_PATH is used for paths to header files.</p>\n"}], "owner": {"reputation": 123, "user_id": 868129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e4bd4184edf8ee274365241173942b2?s=128&d=identicon&r=PG", "display_name": "afk", "link": "https://stackoverflow.com/users/868129/afk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 28190230, "answer_count": 1, "score": 0, "last_activity_date": 1422441896, "creation_date": 1422441546, "last_edit_date": 1495541570, "question_id": 28190110, "link": "https://stackoverflow.com/questions/28190110/specify-include-directory-for-c-libs", "title": "Specify include-directory for C libs", "body": "<p>I wrote a little C-program which uses libcurl and it's SMTP-capabilities in particular.</p>\n\n<p>Since the version/the supported protocols of host-installed libcurl doesn't quite fit my needs I compiled a version of curl/libcurl in my home-directory.</p>\n\n<p>I configured my PATH so I can use my own compiled version of curl, <code>curl -V</code> looks fine, exactly how I need it.</p>\n\n<p>With help of <code>curl-config</code> I compiled my program like this:</p>\n\n<pre><code>gcc -I/home/me/include -o my-program my-program.c -L/home/me/lib -lcurl\n</code></pre>\n\n<p>If I call the programm from the shell it works like expected without any errors.</p>\n\n<p>It gets tricky if I call it through cron which leads to this error:</p>\n\n<pre><code>curl_easy_perform() failed: Unsupported protocol\n</code></pre>\n\n<p>The <code>Unsupported protocol</code> error indicates that the wrong build of libcurl is used because the host-installed curl indeed does not have SMTP-support.</p>\n\n<p>I already tried setting PATH like in the shell (/home/me/bin) and C_INCLUDE_PATH like suggested <a href=\"https://stackoverflow.com/questions/558803/how-to-add-a-default-include-path-for-gcc-in-linux\">here</a> (/home/me/include) but neither solved my problem.</p>\n\n<p>Where is my fallacy? Any suggestions?</p>\n\n<p>Thanks, Tim</p>\n"}, {"tags": ["c", "file", "binaryfiles", "fseek"], "comments": [{"owner": {"reputation": 8682, "user_id": 64121, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d518503a8b459ab2066d1623872e94bd?s=128&d=identicon&r=PG", "display_name": "Dan Bystr&#246;m", "link": "https://stackoverflow.com/users/64121/dan-bystr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1422440273, "post_id": 28189584, "comment_id": 44747219, "body": "Th last fseek should be SEEK_SET - not SEEK_END"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 8682, "user_id": 64121, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d518503a8b459ab2066d1623872e94bd?s=128&d=identicon&r=PG", "display_name": "Dan Bystr&#246;m", "link": "https://stackoverflow.com/users/64121/dan-bystr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1422440497, "post_id": 28189584, "comment_id": 44747353, "body": "If it does not reverse, it seems to have one big bug alright. &lt;g&gt;. But I think @DanBystr&#246;m is right."}, {"owner": {"reputation": 31, "user_id": 3540460, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-8cLYEiiQDzw/AAAAAAAAAAI/AAAAAAAAAFs/w-umP7bizHA/photo.jpg?sz=128", "display_name": "Avital", "link": "https://stackoverflow.com/users/3540460/avital"}, "edited": false, "score": 0, "creation_date": 1422440509, "post_id": 28189584, "comment_id": 44747362, "body": "You&#39;re talking about   fseek(fr, i2, SEEK_END)?   why? I want to set fr to the next char from the end, and i2 will always be negative so it fits."}, {"owner": {"reputation": 8682, "user_id": 64121, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d518503a8b459ab2066d1623872e94bd?s=128&d=identicon&r=PG", "display_name": "Dan Bystr&#246;m", "link": "https://stackoverflow.com/users/64121/dan-bystr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1422440743, "post_id": 28189584, "comment_id": 44747484, "body": "Oh, sorry. I read your code wrong, I thought you initialized i2 to size. My bad."}, {"owner": {"reputation": 31, "user_id": 3540460, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-8cLYEiiQDzw/AAAAAAAAAAI/AAAAAAAAAFs/w-umP7bizHA/photo.jpg?sz=128", "display_name": "Avital", "link": "https://stackoverflow.com/users/3540460/avital"}, "edited": false, "score": 0, "creation_date": 1422442109, "post_id": 28189584, "comment_id": 44748258, "body": "What seems to be the problem then?"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1422442925, "post_id": 28189584, "comment_id": 44748719, "body": "ISTM that you see <code>f1</code> and <code>fr</code> as separate entities, but they point to the same file structure, so using SEEK_END on <code>fr</code> is like using it on <code>f1</code>, and vice versa, so you are not reading or writing what you think you are."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1422443957, "post_id": 28189584, "comment_id": 44749273, "body": "Normally, using SEEK_END alright, but you must do the SEEK_SET and SEEK_END before you read, since both apply to the same file."}, {"owner": {"reputation": 31, "user_id": 3540460, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-8cLYEiiQDzw/AAAAAAAAAAI/AAAAAAAAAFs/w-umP7bizHA/photo.jpg?sz=128", "display_name": "Avital", "link": "https://stackoverflow.com/users/3540460/avital"}, "edited": false, "score": 0, "creation_date": 1422444377, "post_id": 28189584, "comment_id": 44749507, "body": "IT WORKS!  I added 2 lines inside the while loop just before fwrite, only setting f1 and fr with fseek again with the same parameters."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2911080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkw4K.jpg?s=128&g=1", "display_name": "AndreaPomatto", "link": "https://stackoverflow.com/users/2911080/andreapomatto"}, "is_accepted": false, "score": 0, "last_activity_date": 1422444280, "creation_date": 1422444280, "answer_id": 28191035, "question_id": 28189584, "link": "https://stackoverflow.com/questions/28189584/reverse-binary-file-without-structures-in-c/28191035#28191035", "title": "reverse binary file without structures in c", "body": "<p>The simplest way:</p>\n\n<p>1- read the file from bottom to top, write the bytes in a temporary file (top to bottom)</p>\n\n<p>2- call unlink() to delete the original file</p>\n\n<p>3- rename() the temporary file as the original</p>\n\n<p>But that's called cheating :p</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 3540460, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-8cLYEiiQDzw/AAAAAAAAAAI/AAAAAAAAAFs/w-umP7bizHA/photo.jpg?sz=128", "display_name": "Avital", "link": "https://stackoverflow.com/users/3540460/avital"}, "edited": false, "score": 0, "creation_date": 1422445678, "post_id": 28191092, "comment_id": 44750223, "body": "I understand it now. Thank you."}], "tags": [], "owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "is_accepted": false, "score": 0, "last_activity_date": 1422444434, "creation_date": 1422444434, "answer_id": 28191092, "question_id": 28189584, "link": "https://stackoverflow.com/questions/28189584/reverse-binary-file-without-structures-in-c/28191092#28191092", "title": "reverse binary file without structures in c", "body": "<p>This works for me. It can probably be optimized a bit, by reading from the same place and the succeeding byte, but I did not spend my time to optimize it:</p>\n\n<pre><code>void reverse(FILE* fr)\n{\n    int i1 = 0, i2 = -2;\n    char c = '\\0', tmp = '\\0';\n    long size;\n    fseek(fr, 0, SEEK_END);\n    size = ftell(fr);\n    getch();\n    while ((i1 - i2) &lt; size+2)\n    {\n        fseek(fr, i1, SEEK_SET);\n        fread(&amp;c,1, 1, fr);\n        fseek(fr, i2, SEEK_END);\n        fread(&amp;tmp, 1, 1, fr);\n        fseek(fr, i2, SEEK_END);\n        fwrite(&amp;c,1, 1, fr);\n        fseek(fr, i1, SEEK_SET);\n        fwrite(&amp;tmp, 1, 1, fr);\n        i1++;\n        i2--;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3540460, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-8cLYEiiQDzw/AAAAAAAAAAI/AAAAAAAAAFs/w-umP7bizHA/photo.jpg?sz=128", "display_name": "Avital", "link": "https://stackoverflow.com/users/3540460/avital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 720, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422444434, "creation_date": 1422440071, "question_id": 28189584, "link": "https://stackoverflow.com/questions/28189584/reverse-binary-file-without-structures-in-c", "title": "reverse binary file without structures in c", "body": "<p>I have a binary file of numbers, for example 1234. I need to reverse it <strong>in C</strong> to become 4321 without structures or arrays to help me. I thought of having to file pointers: one to the beggining and one to the end, and swap them until they reach each other.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\nFILE* f1;\nf1 = fopen(\"C:\\\\temp\\\\file2.bin\",\"r+b\");\nif (!f1) {\n    fprintf(stderr, \"file doesn't exist\");\n    exit(1);\n}\nreverse(f1);\nfclose(f1);\nexit(0);\n}\n\nvoid reverse(FILE* fr) {\nint i1 = 0, i2 = -2;\nchar c = '\\0', tmp = '\\0', size;\nFILE* f1 = fr;\nfseek(fr, 0, SEEK_END);\nsize = ftell(fr);\nfseek(fr, -1, SEEK_END);\nwhile ((i1 - i2) != size+2) {\n    fread(&amp;c,1, 1, fr);\n    fseek(f1, i1, SEEK_SET);\n    fread(&amp;tmp, 1, 1, f1);\n    fwrite(&amp;c,1, 1, f1);\n    fwrite(&amp;tmp, 1, 1, fr);\n    fseek(fr, i2, SEEK_END);\n    i1++;\n    i2--;\n}\nfclose(f1);\n}\n</code></pre>\n\n<p>It seems allright and doesn't have any bugs but the file remains the same.</p>\n"}, {"tags": ["c", "struct", "8051", "sdcc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422440436, "post_id": 28189555, "comment_id": 44747310, "body": "where exactly your <code>struct OW_info</code> definition present? somewhere at line 5?"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422440487, "post_id": 28189555, "comment_id": 44747347, "body": "More like 101, it is not inside the main."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422440562, "post_id": 28189555, "comment_id": 44747393, "body": "right. i&#39;m much worried about the <code>&#39;OW</code> part in the print <code>previous definition of  &#39;OW</code>. Can you please make sure there&#39;s no typo?"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422441391, "post_id": 28189555, "comment_id": 44747876, "body": "@SouravGhosh I&#39;m sorry, i cut out a bit of the error. It&#39;s fully there now."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422445646, "post_id": 28189555, "comment_id": 44750201, "body": "You must have some other prototype as <code>int OW_search(struct OW_info *info, char p);</code> or similar. Maybe check all the header files?"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422446129, "post_id": 28189555, "comment_id": 44750472, "body": "I checked all the header files, that could have had this declaration, i did not find any, i even excluded them, just in case. I did that all yesterday."}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422448263, "post_id": 28189555, "comment_id": 44751684, "body": "I upload my entire code, if you think that would help."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422448613, "post_id": 28189555, "comment_id": 44751912, "body": "Is is too big? If possible, please upload, maybe some other pair of eyes will be able to track down the issue, if any. :-)"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422449603, "post_id": 28189555, "comment_id": 44752522, "body": "Here is the code <a href=\"http://www.upload.ee/files/4489287/test3.txt.html\" rel=\"nofollow noreferrer\">upload.ee/files/4489287/test3.txt.html</a>"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1422451297, "post_id": 28189555, "comment_id": 44753529, "body": "My wild stab-in-the dark suggestion would be to move the definition of <code>struct OW_info</code> from after the prototype to before it... maybe the compiler (probably incorrectly) sees &quot;pointer-to-not-yet-defined structure&quot; as different to &quot;pointer-to-defined-structure&quot;?"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1422451600, "post_id": 28189555, "comment_id": 44753697, "body": "Excuse my language, but... i can&#39;t f*king believe this **** worked. This is unheard of... I have tens of prototypes that use variables declared after. Does struct work in another way when declaring?"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1422455400, "post_id": 28189555, "comment_id": 44756287, "body": "You could just try putting <code>struct OW_info;</code> ahead of the prototype declaration (in a sense, prototyping the structure).  Without either of these, Microsoft&#39;s C compiler (VS2008) with <code>&#47;Wall</code> produces a warning (&quot;<i>warning C4115: &#39;OW_info&#39; : named type definition in parentheses</i>&quot;) so maybe you <i>should</i> &quot;declare&quot; the structure before using it in a prototype (I am not a C language lawyer enough to know), but <i>most</i> compilers don&#39;t mind.  My limited experience (from 20 years ago) with 8051 and similar compilers is that they often have &quot;quirks&quot; like this!"}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "edited": false, "score": 0, "creation_date": 1422456274, "post_id": 28189555, "comment_id": 44756863, "body": "You already got your up vote with your previous comment. If i did not make my joy clear enough...Thank you very much man, that was it."}], "answers": [{"comments": [{"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1422515304, "post_id": 28208773, "comment_id": 44782358, "body": "You probably meant defined, not declared. And you can go around it by just <code>typedef</code>-ing the structure declaration, putting the typedef before the function and using it in the prototype, like this:      <code>typedef struct OW_info OW_info; &#47;* ... *&#47; int OW_search(OW_info *info); &#47;* ...and after that come the struct definition and then the function body... *&#47;</code>  Should work."}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1422515638, "post_id": 28208773, "comment_id": 44782515, "body": "Note: this all happens because the compiler treats the <code>struct</code> in the function prototype and the actual <code>struct</code> as two different structs, because they belong to different scopes. That&#39;s completely standartized behaviour."}, {"owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "reply_to_user": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1422516474, "post_id": 28208773, "comment_id": 44782918, "body": "Yea, as someone who has never used structs before yesterday, it was a real mind breaker, since i did not know i have to define(?) the structure before. Thanks for making it even more clear."}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 0, "creation_date": 1422517019, "post_id": 28208773, "comment_id": 44783165, "body": "this might help you, too: <a href=\"http://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration\" title=\"what is the difference between a definition and a declaration\">stackoverflow.com/questions/1410563/&hellip;</a> =)"}], "tags": [], "owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "is_accepted": true, "score": 1, "last_activity_date": 1422514976, "creation_date": 1422514976, "answer_id": 28208773, "question_id": 28189555, "link": "https://stackoverflow.com/questions/28189555/error-98conflict-with-previous-definition-of-x-for-attribute-type/28208773#28208773", "title": "Error 98:Conflict with previous definition of x for attribute &#39;type&#39;", "body": "<p>I got the errors because I declared the structures after prototyping my functions.\nThanks to @TripeHound it is now know that structures have to be declared before prototyping a function and after further research it seems that there is no other way.</p>\n"}], "owner": {"reputation": 146, "user_id": 4457720, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed04c94f4fc3145a5dd2bdef8e606a93?s=128&d=identicon&r=PG&f=1", "display_name": "s3v3ns", "link": "https://stackoverflow.com/users/4457720/s3v3ns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 28208773, "answer_count": 1, "score": 2, "last_activity_date": 1422514976, "creation_date": 1422439991, "last_edit_date": 1422449630, "question_id": 28189555, "link": "https://stackoverflow.com/questions/28189555/error-98conflict-with-previous-definition-of-x-for-attribute-type", "title": "Error 98:Conflict with previous definition of x for attribute &#39;type&#39;", "body": "<p>I am getting this compile error using SDCC and programming an old 8051.\nI am trying to make 1wire search command work. I got my hands on an OneWire library that I started modifying for my hardware/software and now I am stuck behind this error:</p>\n\n<pre><code>C:\\sdcc\\code&gt;sdcc test3.c\ntest3.c:164: error 98: conflict with previous definition of 'OW_search' for  attribute 'type'\nfrom type 'int function ( struct OW_info generic* fixed, unsigned-char fixed) fixed'\nto type 'int function ( struct OW_info generic* fixed, unsigned-char fixed) fixed'\n</code></pre>\n\n<p>The lines where the error come in are the following.</p>\n\n<pre><code>183:...\n184:int OW_search(struct OW_info *info)\n185:{\n186:unsigned char *buffer;\n187:int id_bit_number;\n188 ...\n</code></pre>\n\n<p>Just in case, the declaration of OW_info</p>\n\n<pre><code>struct OW_info\n{\nunsigned char family;\nunsigned char serialNum[6];\nunsigned char crc;\n\n};\n</code></pre>\n\n<p>I am prototyping the function above</p>\n\n<pre><code>int OW_search(struct OW_info *info);\n</code></pre>\n\n<p>I can not find a proper reason why I am getting that compile error. I am hoping for some hints why it would come there. Thanks.</p>\n\n<p>And a link to download my entire code <a href=\"http://www.upload.ee/files/4489287/test3.txt.html\" rel=\"nofollow\">http://www.upload.ee/files/4489287/test3.txt.html</a></p>\n"}, {"tags": ["python", "c", "pointers", "structure", "ctypes"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1422441678, "post_id": 28189551, "comment_id": 44748012, "body": "An array is not a pointer. The fields should be <code>(&#39;Value2&#39;, c_char * 80)</code> and <code>(&#39;ValueB&#39;, c_char * 80)</code>. The assignments should be <code>sub_struct.Value2 = &quot;Hello StructureB!&quot;</code>, <code>struct.ValueB = &quot;Hello StructureA!&quot;</code>, and <code>struct.ValueC = pointer(sub_struct)</code>."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1422441825, "post_id": 28189551, "comment_id": 44748094, "body": "Also, you can load the library with <code>lib = CDLL(&quot;structures&quot;)</code> instead of <code>lib = cdll.LoadLibrary(&quot;structures.dll&quot;)</code>. It&#39;s more efficient to use <code>byref</code> to pass an argument by reference, e.g. <code>lib.bar(byref(struct))</code>. For type safety set <code>lib.bar.argtypes = (POINTER(StructureA),)</code>."}, {"owner": {"reputation": 11, "user_id": 4502276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57edb7114ac2f1feddff585be3f72d8?s=128&d=identicon&r=PG&f=1", "display_name": "Timux", "link": "https://stackoverflow.com/users/4502276/timux"}, "edited": false, "score": 0, "creation_date": 1422444637, "post_id": 28189551, "comment_id": 44749654, "body": "Perfect. This solved my problem. Thanks a lot!"}], "owner": {"reputation": 11, "user_id": 4502276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57edb7114ac2f1feddff585be3f72d8?s=128&d=identicon&r=PG&f=1", "display_name": "Timux", "link": "https://stackoverflow.com/users/4502276/timux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 800, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1422439976, "creation_date": 1422439976, "question_id": 28189551, "link": "https://stackoverflow.com/questions/28189551/how-can-i-reference-a-structure-in-a-structure-using-python-ctypes", "title": "How can I reference a Structure in a Structure using python ctypes", "body": "<p>Good morning,\nI have been searching for an answer for quite some time. I hope I simply didn't try the wrong key words. Thanks for the answers! Here is my question:</p>\n\n<p>I'm writing some proof of concept code. I have two C structs. StructureA has a pointer to StructureB. The function bar prints the values to the console. The goal is to initialize and use the structs in Python and pass them to a shared lib, which does some fancy stuff with the structs.</p>\n\n<p>I assume I do something wrong in Python. I tried several ways, as you can see in the (Python-)main function.</p>\n\n<p>Additionally the content of the Strings is mixed up, but that is not my major questions.</p>\n\n<p>This is my C code:</p>\n\n<pre><code>#define _DLL_H_ \n#if BUILDING_DLL \n# define DLLIMPORT __declspec (dllexport) \n#else /* Not BUILDING_DLL */ \n# define DLLIMPORT __declspec (dllimport) \n#endif /* Not BUILDING_DLL */ \n\n#include &lt;stdio.h&gt;\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\ntypedef struct StructureB {\n    int Value1;\n    char Value2[80];\n} StructureB;\n\ntypedef struct StructureA {\n    int ValueA;\n    char ValueB[80];\n    StructureB *ValueC;\n} StructureA;\n\nvoid bar(StructureA *ref){\n    printf(\"ValueA: %d\\n\", ref-&gt;ValueA);\n    printf(\"ValueB: %s\\n\", ref-&gt;ValueB);\n    printf(\"Value1: %d\\n\", ref-&gt;ValueC-&gt;Value1);\n    printf(\"Value2: %s\\n\", ref-&gt;ValueC-&gt;Value2);\n}\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>Here is my Python Code:</p>\n\n<pre><code>#!/usr/bin/python\n\nfrom ctypes import *\nimport sys\n\nclass StructureB(Structure):\n   _fields_ = [('Value1', c_int),\n               ('Value2', c_char_p)]\n\nclass StructureA(Structure):\n   _fields_ = [('ValueA', c_int),\n               ('ValueB', c_char_p),\n               ('ValueC', POINTER(StructureB))]\n\n\ndef main(argv):\n    lib = cdll.LoadLibrary(\"structures.dll\")\n\n    sub_struct = StructureB()\n    sub_struct.Value1 = 42*42\n    sub_struct.Value2 = c_char_p(\"Hello StructureB!\")\n\n    struct = StructureA()\n    struct.ValueA = -42\n    struct.ValueB = c_char_p(\"Hello StructureA!\")\n\n    #struct.ValueC = pointer(sub_struct)\n    #struct.ValueC = cast(sub_struct, POINTER(StructureB))\n    #struct.ValueC = addressof(StructureB)\n    #struct.ValueC = pointer(StructureB)\n    struct.ValueC = StructureB\n\n    lib.bar(pointer(struct))\n\n    print sub_struct.Value2\n    print struct.ValueB\n\nif __name__ == \"__main__\":\n    main(sys.argv)\n</code></pre>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 1, "creation_date": 1422440201, "post_id": 28189537, "comment_id": 44747173, "body": "a character is printed here... But I&#39;m not sure to understand what result you are expecting here. The value of EOF is an integer (-1 usually)."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422441061, "post_id": 28189537, "comment_id": 44747689, "body": "Perhaps you should use <code>putchar</code> to write the <i>decimal</i> value of EOF."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1422441342, "post_id": 28189537, "comment_id": 44747852, "body": "<i>Why</i> do you feel the need to &quot;use <code>putchar</code>&quot; here?"}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 1, "creation_date": 1422441369, "post_id": 28189537, "comment_id": 44747861, "body": "Spoiler: <a href=\"http://stackoverflow.com/q/11975780/1025391\">stackoverflow.com/q/11975780/1025391</a>"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1422442489, "post_id": 28189537, "comment_id": 44748471, "body": "@ Jongware treating EOF as a float just returns some gibberish @Lightness _Races_in_Orbit I asked just to make sure (as I wrote, the exercise is presented in a section about putchar)"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422465712, "post_id": 28189537, "comment_id": 44763303, "body": "But &quot;numerical&quot; does not automatically imply &quot;float&quot;! (Although you may be doing something wrong. The usual value of EOF, <code>-1</code>, is a <i>perfectly fine value</i> for a float as well.)"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1422502088, "post_id": 28189537, "comment_id": 44778421, "body": "Here are a few examples using different types in printf: <code>%d</code> -&gt; <code>-1</code>; <code>%f</code> -&gt; <code>1.#NAN0</code>; <code>%s</code> -&gt; [void]; <code>%x</code> -&gt; <code>ffffffff</code>"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1422502313, "post_id": 28189537, "comment_id": 44778469, "body": "declaring c to be <code>int</code>, <code>double</code>, <code>long</code>, <code>short</code>, <code>float</code>, <code>char</code> and then equationg c to the value of EOF all lead to an empty output"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1422502779, "post_id": 28189537, "comment_id": 44778583, "body": "sorry, equating (<code>==</code>) c to <code>EOF</code> gives <code>int</code> -&gt; <code>&#199;</code>; <code>long</code> -&gt; <code>&#199;</code>; <code>short</code> -&gt; <code>@</code>; <code>float</code> -&gt; [void]; <code>char</code> -&gt; [void]"}, {"owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "edited": false, "score": 0, "creation_date": 1422503293, "post_id": 28189537, "comment_id": 44778687, "body": "(the last two comments meant &quot;declaring c and then calling it with putchar&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1422445932, "post_id": 28189871, "comment_id": 44750377, "body": "Thanks @LightnessRacesinOrbit."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1422445507, "last_edit_date": 1422445507, "creation_date": 1422440881, "answer_id": 28189871, "question_id": 28189537, "link": "https://stackoverflow.com/questions/28189537/kr-1-7-is-it-solvable-by-using-putchar-instead-of-printf/28189871#28189871", "title": "K&amp;R 1-7 is it solvable by using putchar() instead of printf?", "body": "<p>As per the <a href=\"http://linux.die.net/man/3/putchar\" rel=\"nofollow\">man page</a> of <code>putchar()</code>,</p>\n\n<blockquote>\n  <p><code>int putchar(int c);</code></p>\n  \n  <p><code>putchar(c);</code> is equivalent to <code>putc(c,stdout)</code>.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p><code>putc()</code> is equivalent to <code>fputc()</code> .......<code>fputc()</code> writes the character <code>c</code>, cast to an <code>unsigned char</code>, to <code>stream</code>.</p>\n</blockquote>\n\n<p>This, <code>putchar()</code> is supposed to output the <code>char</code> representation of the ASCII value supplied as it's argument.</p>\n\n<p>So, if the value of <code>EOF</code> is a non printable character [in ASCII], you won't see anything [<em>\"without showing any text</em>\"] on stdout. </p>\n"}, {"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 2, "last_activity_date": 1422440894, "creation_date": 1422440894, "answer_id": 28189875, "question_id": 28189537, "link": "https://stackoverflow.com/questions/28189537/kr-1-7-is-it-solvable-by-using-putchar-instead-of-printf/28189875#28189875", "title": "K&amp;R 1-7 is it solvable by using putchar() instead of printf?", "body": "<p><code>EOF</code> is not a char which can be printed as you expected. So <code>putchar(EOF)</code> doesn't print any values, as it prints only <code>char</code>. </p>\n\n<p>Hence use <code>printf(\"%d\", EOF)</code> which outputs integer <code>-1</code>.  </p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 1, "last_activity_date": 1422441037, "creation_date": 1422441037, "answer_id": 28189927, "question_id": 28189537, "link": "https://stackoverflow.com/questions/28189537/kr-1-7-is-it-solvable-by-using-putchar-instead-of-printf/28189927#28189927", "title": "K&amp;R 1-7 is it solvable by using putchar() instead of printf?", "body": "<p><code>putchar(int char)</code> So if you pass a ASCII value to this API you get a corresponding character printed on the screen but <code>EOF</code> evaluates to -1 which is not a printable ASCII character so you don't see anything or might see some junk. </p>\n"}, {"tags": [], "owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "is_accepted": true, "score": 2, "last_activity_date": 1422445248, "creation_date": 1422445248, "answer_id": 28191380, "question_id": 28189537, "link": "https://stackoverflow.com/questions/28189537/kr-1-7-is-it-solvable-by-using-putchar-instead-of-printf/28191380#28191380", "title": "K&amp;R 1-7 is it solvable by using putchar() instead of printf?", "body": "<p><code>putchar</code> converts its argument to <code>unsigned char</code> before it's outputted (and it's a character which is written, not the result of a decimal conversion). As <code>EOF</code> is negative, this conversion isn't value-preserving. Commonly, <code>EOF</code> has the value -1, with 8-bit <code>char</code>, that conversion results in 255, that is, <code>putchar(EOF)</code> is equivalent to <code>putchar('\\xff')</code>, which isn't a printable character (assuming an ASCII system). Piping the output to <code>hexdump -C</code> would make the output visible.</p>\n\n<p>Without using <code>printf</code> and friends, a function outputting a decimal number for an <code>int</code> can be written. Basically,</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>print a '-' if the value is negative\nfor every decimal digit, starting from the highest-valued:\n    convert the digit's value to a character (e.g. 7 should become '7')\n    try to print the result (with putchar, for example)\n    if that fails, return an error indicator\n</code></pre>\n\n<p>Hint: The division and modulus operators, <code>/</code> and <code>%</code>, will be useful.</p>\n\n<p>The digits <code>'0'</code> ... <code>'9'</code> are ascending (and contiguous); so for the conversion from the digit's value to a character, adding <code>'0'</code> yields the desired result (<code>3 + '0'</code> is <code>'3'</code>, for example).</p>\n\n<p>Care must be taken to avoid integer overflow, even if corner cases like <code>INT_MIN</code> are passed to the function. <code>-INT_MIN</code> may result in an overflow (and in fact does on pretty much every system), a positive number, on the other hand, can always be negated. A value of 0 may need special handling.</p>\n\n<p>(Alternatively, the number can be converted to a string first which then can be outputted. A <code>char</code> array of size <code>1 + sizeof(int)*CHAR_BIT/3+1 + 1</code> is big enough to hold that string, including minus sign and 0-terminator.)</p>\n\n<p>If you get stuck, the (non-standard) <code>itoa</code> function does something similar, looking for example implementations may give some ideas.</p>\n"}], "owner": {"reputation": 356, "user_id": 3950644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44f718812052771995a9acc9786771c2?s=128&d=identicon&r=PG&f=1", "display_name": "maja", "link": "https://stackoverflow.com/users/3950644/maja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 28191380, "answer_count": 4, "score": 2, "last_activity_date": 1422445507, "creation_date": 1422439943, "question_id": 28189537, "link": "https://stackoverflow.com/questions/28189537/kr-1-7-is-it-solvable-by-using-putchar-instead-of-printf", "title": "K&amp;R 1-7 is it solvable by using putchar() instead of printf?", "body": "<p>There are many questions about this exercise all over the internet, but I couldn't find any solution (nor any hint) on how to solve this exercise using 'putchar'.</p>\n\n<pre><code>Write a program to print the value of EOF.\n</code></pre>\n\n<p>I can easily get a working answer to this:</p>\n\n<pre><code>printf(\"%d\", EOF);\n</code></pre>\n\n<p>I'd like to know if there are any known (or logical) answers using 'putchar' (as I guess that was the whole purpose of the exercise, being located at the end of a paragraph on 'getchar' and 'putchar')</p>\n\n<p>Writing:</p>\n\n<pre><code>putchar(EOF);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int c;\nc = EOF;\nputchar(c);\n</code></pre>\n\n<p>the program just launches and closes itself without showing any text.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1422440286, "post_id": 28189489, "comment_id": 44747231, "body": "I would recommend to download a <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf\" rel=\"nofollow noreferrer\">draft version of the C standard</a>. Then in your pdf viewer, go to Annex B Library summary and do a search (whole words only). It will work for most things, unfortunately except uint32_t, since the C standard calls it <code>uintN_t</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1422514543, "post_id": 28189489, "comment_id": 44781990, "body": "Note that <code>size_t</code> is a tricky one since quite a number of headers can be included to define it (<code>&lt;stddef.h&gt;</code> is the smallest, but <code>&lt;stdio.h&gt;</code>, <code>&lt;string.h&gt;</code>, &lt;stdlib.h&gt;` also define it \u2014 at minimum).  <code>uint32_t</code> is defined by including <code>&lt;stdint.h&gt;</code> or <code>&lt;inttypes.h&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422440381, "post_id": 28189603, "comment_id": 44747288, "body": "It is C++ though. For example, a search for <code>_Generic</code> gives me <code>std::generic_category</code>, which is hardly what I wanted."}, {"owner": {"reputation": 14997, "user_id": 90580, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d2bc85f56e32b0c01f0acc44f509ecd1?s=128&d=identicon&r=PG", "display_name": "RubenLaguna", "link": "https://stackoverflow.com/users/90580/rubenlaguna"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422440604, "post_id": 28189603, "comment_id": 44747421, "body": "It has both C++ and C. For example <a href=\"http://en.cppreference.com/w/c/types/size_t\" rel=\"nofollow noreferrer\">/c/types/size_t</a> gives C&#39;s <code>size_t</code> and <a href=\"http://en.cppreference.com/w/cpp/types/size_t\" rel=\"nofollow noreferrer\">/cpp/types/size_t</a> gives C++&#39;s <code>std::size_t</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422441064, "post_id": 28189603, "comment_id": 44747690, "body": "Apparently it just doesn&#39;t know about C11."}, {"owner": {"reputation": 14997, "user_id": 90580, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d2bc85f56e32b0c01f0acc44f509ecd1?s=128&d=identicon&r=PG", "display_name": "RubenLaguna", "link": "https://stackoverflow.com/users/90580/rubenlaguna"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422444845, "post_id": 28189603, "comment_id": 44749762, "body": "It does know about C11,  <code>_Generic</code> is not under <code>&#47;c&#47;types&#47;</code> but <code>language&#47;_Generic</code> I guess it&#39;s not a type per se. <a href=\"http://en.cppreference.com/w/c/language/_Generic\" rel=\"nofollow noreferrer\">_Generic</a>.  For actual types (where you need the <code>#include</code>) the answer kind of works."}], "tags": [], "owner": {"reputation": 14997, "user_id": 90580, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d2bc85f56e32b0c01f0acc44f509ecd1?s=128&d=identicon&r=PG", "display_name": "RubenLaguna", "link": "https://stackoverflow.com/users/90580/rubenlaguna"}, "is_accepted": true, "score": 0, "last_activity_date": 1422440136, "creation_date": 1422440136, "answer_id": 28189603, "question_id": 28189489, "link": "https://stackoverflow.com/questions/28189489/is-there-any-command-to-find-which-header-file-needs-to-be-included-for-certain/28189603#28189603", "title": "Is there any command to find which header file needs to be included for certain type (not function)?", "body": "<p>A possible solution is  <code>open http://en.cppreference.com/w/c/types/&lt;type&gt;</code> which relies on an external web page. </p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1422544272, "post_id": 28208301, "comment_id": 44799319, "body": "Up to a point\u2026the problem being that <code>uint32_t</code> might well be typedef&#39;d in a header in <code>&#47;usr&#47;include&#47;bits</code> or <code>&#47;usr&#47;include&#47;sys</code> even though the header that should be included is some other header altogether (nominally <code>stdint.h</code> or <code>inttypes.h</code> for this specific type).  This tells you which header it <i>is</i> defined in, but not which header you should be including to gain access to the definition."}], "tags": [], "owner": {"reputation": 114, "user_id": 1244511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5981144d8b4d81b7fc9dd24a7a8094c9?s=128&d=identicon&r=PG", "display_name": "Pavel Kucera", "link": "https://stackoverflow.com/users/1244511/pavel-kucera"}, "is_accepted": false, "score": 1, "last_activity_date": 1422512966, "creation_date": 1422512966, "answer_id": 28208301, "question_id": 28189489, "link": "https://stackoverflow.com/questions/28189489/is-there-any-command-to-find-which-header-file-needs-to-be-included-for-certain/28208301#28208301", "title": "Is there any command to find which header file needs to be included for certain type (not function)?", "body": "<p>Another possible solution is to search locally using grep.</p>\n\n<p>Something like <code>grep -r 'typedef\\s.*\\suint32_t;' /usr/include</code> should work for you.</p>\n"}], "owner": {"reputation": 14997, "user_id": 90580, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d2bc85f56e32b0c01f0acc44f509ecd1?s=128&d=identicon&r=PG", "display_name": "RubenLaguna", "link": "https://stackoverflow.com/users/90580/rubenlaguna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 28189603, "answer_count": 2, "score": 0, "last_activity_date": 1422512966, "creation_date": 1422439771, "question_id": 28189489, "link": "https://stackoverflow.com/questions/28189489/is-there-any-command-to-find-which-header-file-needs-to-be-included-for-certain", "title": "Is there any command to find which header file needs to be included for certain type (not function)?", "body": "<p>For library functions I use <code>man &lt;function&gt;</code> to find which header file I need to include. But for types like <code>size_t</code>, <code>uint32_t</code>, etc. the <code>man</code> approach doesn't work. </p>\n\n<p>Is there any command to find the header file required? </p>\n"}, {"tags": ["c", "macos", "udp", "kernel", "kernel-extension"], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 2869674, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002681476958/picture?type=large", "display_name": "Arthur  Bulakaiev", "link": "https://stackoverflow.com/users/2869674/arthur-bulakaiev"}, "is_accepted": false, "score": 1, "last_activity_date": 1496420772, "creation_date": 1496420772, "answer_id": 44333497, "question_id": 28189415, "link": "https://stackoverflow.com/questions/28189415/how-to-obtain-value-of-socket-filter-handle-sflt-filter-sf-handle-from-apple-s/44333497#44333497", "title": "How to obtain value of socket filter handle (sflt_filter.sf_handle) from apple site for registering packet filtration", "body": "<p>I know the question is very outdated, but I faced the same problem, and just for next one who will too:</p>\n\n<p>now you can register and obtain unique handle for filter calling kev_vendor_code_find function from sys/kern_event.h, passing bundle id and pointer to uint32 variable. </p>\n\n<p>After that, in user space you can get this handle by SIOCGKEVVENDOR ioctl, passing pointer to kev_vendor_code structure with same bundle id in vendor_string field.</p>\n\n<p>You should not do any things to \"unregister\" this handle (but you should unregister the filter with this handle in driver::stop() )</p>\n"}], "owner": {"reputation": 379, "user_id": 3487885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7cc5f0fbfd7a8f758be59eae6684fe0f?s=128&d=identicon&r=PG&f=1", "display_name": "hkb_dev", "link": "https://stackoverflow.com/users/3487885/hkb-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1496420772, "creation_date": 1422439505, "last_edit_date": 1422515516, "question_id": 28189415, "link": "https://stackoverflow.com/questions/28189415/how-to-obtain-value-of-socket-filter-handle-sflt-filter-sf-handle-from-apple-s", "title": "How to obtain value of socket filter handle (sflt_filter.sf_handle) from apple site for registering packet filtration", "body": "<p>I am trying to obtain handle key for socket-filter for registering packet filtration. I have already register it for TCP packets now I want to register it for UDP packet. This handle key needs to be unique from another applications.</p>\n\n<pre><code>sflt_filter.sf_handle = 0xAACAF333;\n</code></pre>\n\n<p>I have obtained it before about 2 years ago using the <a href=\"http://developer.apple.com/datatype/\" rel=\"nofollow\">link</a> (<a href=\"http://developer.apple.com/datatype/\" rel=\"nofollow\">http://developer.apple.com/datatype/</a>) but it get redirected to different link now.</p>\n\n<p>I have read the <a href=\"http://revolution.byu.edu/helps/file-creatorcodes.php\" rel=\"nofollow\">link</a> it says that Creator Codes are ignored by 10.6 and above. But for implementing kext for packet-filtration we need that code to be unique.</p>\n\n<p>Does any one know how to obtain the unique key?\nOR it is not required to obtain the unique key?\nOR their is different way to use handle now?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "algorithm", "mergesort"], "comments": [{"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1422439200, "post_id": 28189289, "comment_id": 44746564, "body": "<code>it appears that I am doing something wrong.</code> what happens that makes you think so?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422439204, "post_id": 28189289, "comment_id": 44746566, "body": "How you came to this conclusion that <code>I am doing something wrong</code>?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422439243, "post_id": 28189289, "comment_id": 44746588, "body": "You can start by specifying the return type of your functions."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1422439729, "post_id": 28189289, "comment_id": 44746862, "body": "First: arrays, in C, have indexes from <code>0</code> to <code>n - 1</code>. An array defined as <code>int L[n1 + 1];</code> has (<code>n1 + 1</code>) elements with indexes <code>0</code> to <code>n1</code>. The element <code>L[n1 + 1]</code> does not exist ... yet you attempt to write to it."}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1422441422, "post_id": 28189289, "comment_id": 44747881, "body": "For all the sarcastic comments <code>what happens that makes you think so?</code>, <code>How you came to this conclusion</code> - if the OP knew the answer to this the question would never have been asked. The OP tried to solve a problem and posted the effort in question. If you cannot answer questions then don&#39;t take the standard of SO down at least. I expect SO to answer such questions as an experienced user here. Same for the downvoters. We know exactly what Merge Sort is supposed to do."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1422443132, "post_id": 28189289, "comment_id": 44748843, "body": "@al-Acme - failing to provide output, logs, error-messages and whatever has been found so far by the OP&#39;s debugging attempts is a waste of contributors&#39; time.  The OP obviously didn&#39;t think that such a waste was important.  That&#39;s fine, but it&#39;s then not surprising that contributors can&#39;t be bothered with wasting any effort on such a question.  Then there&#39;s the code, with its single-letter vars and no comments.  I ignore such code - there are more interesting and fruitful questions that don&#39;t involve un-obfuscating someone else&#39;s crap before attempting to spot bugs."}, {"owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1422448689, "post_id": 28189289, "comment_id": 44751961, "body": "There is no output required. Output is what Merge sort should give, the code is invoking UB and at times may have no runtime errors even. And if it is such a waste of time to read this question - then why waste time commenting on it."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "edited": false, "score": 0, "creation_date": 1422463740, "post_id": 28189289, "comment_id": 44762015, "body": "@al-Acme - you did, and then criticised contributors for asking a reasonable question: to explain &#39;it appears that I am doing something wrong&#39;.  I haven&#39;t looked closely at the code, just the comments.  The OP question is debugging-slave request.  It deserves to be closed."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4265017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476626089dacaeb0dd24099289fc775b?s=128&d=identicon&r=PG&f=1", "display_name": "MMarch", "link": "https://stackoverflow.com/users/4265017/mmarch"}, "edited": false, "score": 0, "creation_date": 1422444292, "post_id": 28189759, "comment_id": 44749451, "body": "The code did not work - that&#39;s quite a strong indication that i was doing something wrong. Thanks <b>al-Acme</b>"}], "tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 2, "last_activity_date": 1422440962, "last_edit_date": 1422440962, "creation_date": 1422440603, "answer_id": 28189759, "question_id": 28189289, "link": "https://stackoverflow.com/questions/28189289/merge-sort-in-c/28189759#28189759", "title": "Merge sort in C", "body": "<p>Here is your corrected code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;limits.h&gt;\n\nvoid merge(int A[],int p,int q,int r);\nvoid part(int A[],int p,int r);\n\nint main()\n{\nint A [6]={10,5,4,0,11,7}, n,y,z;\n\ny=0; z=6;\n\npart(A,0,z-1); // Pass starting from 0 to Length - 1 of Array\nfor(n=0;n&lt;z;n++)\nprintf(\"%d\\n\", A[n]);\n\n    return 0;\n}\n\nvoid part(int A[],int p,int r)\n{\n    if (p&lt;r)\n    {\n        int q=(p+r)/2;\n        part(A,p,q);\n        part(A,q+1,r);\n        merge(A,p,q,r);\n    }\n}\n\nvoid merge(int A[],int p,int q,int r)\n{\n    int n1=q-p+1,n2=r-q;\n    int L[n1+1],R[n2+1],i,j,k;\n    L[n1]=INT_MAX;\n    R[n2]=INT_MAX;\n\n    for (i=0;i&lt;n1;i++)\n        L[i]=A[p+i];\n\n    for (j=0;j&lt;n2;j++)\n        R[j]=A[q+j+1];\n\n    i=0;j=0;\n\n    for (k=p;k&lt;=r;k++)\n    {\n        if(L[i]&lt;=R[j])\n        {\n            A[k]=L[i];\n            i++;\n        }\n        else\n        {\n            A[k]=R[j];\n            j++;\n        }\n    }\n}\n</code></pre>\n\n<p>These are the parts which were wrong:</p>\n\n<pre><code>int n1=q-r+1,n2=r-q  // --&gt; Your calculation of new indices was wrong\n</code></pre>\n\n<p>These indices take you out of bounds of the array:</p>\n\n<pre><code>L[n1+1]=100000;\nR[n2+1]=100000;\n</code></pre>\n\n<p>Also instead of using a random value like <code>100000</code> use <code>INT_MAX</code> in <code>limits.h</code> for the sentinel element.</p>\n\n<pre><code> for (k=0;k&lt;r;k++) // -&gt;wrong\n</code></pre>\n\n<p>You should move from left index of array to right not from <code>0</code>th index.</p>\n\n<p>Output:</p>\n\n<pre><code>0\n4\n5\n7\n10\n11\n</code></pre>\n\n<p>Rest you can check for yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1422459591, "last_edit_date": 1422459591, "creation_date": 1422459137, "answer_id": 28196157, "question_id": 28189289, "link": "https://stackoverflow.com/questions/28189289/merge-sort-in-c/28196157#28196157", "title": "Merge sort in C", "body": "<p>Alternative solution with part parameters 0 to size of array. My old C compiler doesn't support variable sized arrays so I used _alloca() as a substitute. Other alternatives would be to pass a second array to be used as a temp array for the merge sort, and either a top down or bottom up merge sort. The copy operations can be avoided in top down by alternating the direction of the merge based on the level of recursion, with a pair of co-recursive functions: the top level would be partAtoA(), which would call partAtoB() (which would call partAtoA(), ...).</p>\n\n<pre><code>#include &lt;stddef.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid merge(int A[],int p,int q,int r);\nvoid part(int A[],int p,int r);\n\nint main()\n{\nint A[6]={10,5,4,0,11,7}, n,y,z;\n    y=0;\n    z=sizeof(A)/sizeof(int);\n    part(A,y,z);\n    for(n=0;n&lt;z;n++)\n        printf(\"%d\\n\", A[n]);\n    return 0;\n}\n\nvoid part(int A[], int p, int r)\n{\nint q;\n    if ((r - p) &lt; 2)\n        return;\n    q=(p+r)/2;\n    part(A,p,q);\n    part(A,q,r);\n    merge(A,p,q,r);\n}\n\nvoid merge(int A[],int p,int q,int r)\n{\nint n1=q-p, n2=r-q;\nint i,j,k;\n/* using _alloca for variable size arrays */\nint * L = _alloca(n1*sizeof(int));\nint * R = _alloca(n2*sizeof(int));\n    for (i=0; i&lt;n1; i++)\n        L[i]=A[p+i];\n    for (j=0; j&lt;n2; j++)\n        R[j]=A[q+j];\n    i=0;j=0;\n    for(k=p;k&lt;r;k++)\n        if(j&gt;=n2 || i&lt;n1 &amp;&amp; L[i]&lt;=R[j])\n            A[k]=L[i++];\n        else\n            A[k]=R[j++];\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 4265017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/476626089dacaeb0dd24099289fc775b?s=128&d=identicon&r=PG&f=1", "display_name": "MMarch", "link": "https://stackoverflow.com/users/4265017/mmarch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1642, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1422459591, "creation_date": 1422439132, "question_id": 28189289, "link": "https://stackoverflow.com/questions/28189289/merge-sort-in-c", "title": "Merge sort in C", "body": "<p>I am new in programming/C. \nI understand the algorithm of merge-sort as an algorithm but when it comes to programming, it appears that I am doing something wrong. \nCould anybody help?</p>\n\n<p>Thanks.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>merge(int A[],int p,int q,int r);\npart(int A[],int p,int r);\n\nint main()\n{\nint A [6]={10,5,4,0,11,7}, n,y,z;\n\ny=1; z=sizeof(A)/sizeof(int);\n\npart(A,y,z);\nfor(n=0;n&lt;z;n++)\nprintf(\"%d\\n\", A[n]);\n\n    return 0;\n}\n\npart(int A[],int p,int r)\n{\n    if (p&lt;r)\n    {\n        int q=(p+r)/2;\n        part(A,p,q);\n        part(A,q+1,r);\n        merge(A,p,q,r);\n    }\n}\n\nmerge(int A[],int p,int q,int r)\n{\n    int n1=q-r+1,n2=r-q,L[n1+1],R[n2+1],i,j,k;\n    L[n1+1]=100000;\n    R[n2+1]=100000;\n    for (i=0;i&lt;n1;i++)\n        L[i]=A[p-1+i];\n    for (j=0;j&lt;n2;j++)\n        R[j]=A[q+j];\n    i=0;j=0;\n    for (k=0;k&lt;r;k++)\n        if(L[i]&lt;=R[j])\n    {\n        A[k]=L[i];\n        i++;\n    }\n    else\n    {\n        A[k]=R[j];\n        j++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "for-loop", "char"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1422438656, "post_id": 28189073, "comment_id": 44746206, "body": "See e.g. <a href=\"http://stackoverflow.com/q/3960954/440558\">stackoverflow.com/q/3960954/440558</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 6, "creation_date": 1422438669, "post_id": 28189073, "comment_id": 44746217, "body": "Explain how did you wait for an infinitely long time :-)"}, {"owner": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422438811, "post_id": 28189073, "comment_id": 44746300, "body": "@BasileStarynkevitch :- ha ha.. well first time it was 3000 and next i waited for quite long. (22854)"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1422438898, "post_id": 28189073, "comment_id": 44746360, "body": "<code>&#39;hi&#39;</code> is wrong, 2 chars means it&#39;s a string, which requires double quotes, and <code>&quot;hi&quot;</code> decays into a pointer. The correct declaration would be <code>const char * a = &quot;hi&quot;;</code> or <code>char a[] = &quot;hi&quot;</code>"}, {"owner": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1422438975, "post_id": 28189073, "comment_id": 44746403, "body": "@EliasVanOotegem : well... compiler didn&#39;t gave me an error with this code."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1422438976, "post_id": 28189073, "comment_id": 44746404, "body": "BTW if you compiled with all warnings &amp; debug info (e.g. <code>gcc -Wall -Wextra -g</code>) the compiler would have warned you (and then you can use the <code>gdb</code> debugger)"}, {"owner": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422439101, "post_id": 28189073, "comment_id": 44746489, "body": "@BasileStarynkevitch : yes there were warnings but what i am asking is the reason behind those warnings. what is wrong here?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1422439129, "post_id": 28189073, "comment_id": 44746507, "body": "<code>char a = &#39;hi&#39;;</code> is not possible -- you can only store a single char in a <code>char</code>!"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1422439156, "post_id": 28189073, "comment_id": 44746530, "body": "Trust the compiler. If it warns you your code is wrong. And read about <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>"}, {"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422439318, "post_id": 28189073, "comment_id": 44746635, "body": "warning: multi-character character constant [-Wmultichar] (@BasileStarynkevitch no need for -Wall here)"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 3, "creation_date": 1422439337, "post_id": 28189073, "comment_id": 44746644, "body": "Multichar constants are implementation-defined. Different compilers (or build platform targets) can produce different value. You generally cannot rely on that, and most compilers warns you about it. You always can avoid using them, so just don&#39;t. <code>&#39;foo&#39;</code> and <code>&quot;foo&quot;</code> are completely different things."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 1, "creation_date": 1422439610, "post_id": 28189073, "comment_id": 44746807, "body": "@Maxime: for a newbie <code>-Wall -Wextra</code> is always useful"}, {"owner": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422439932, "post_id": 28189073, "comment_id": 44746992, "body": "@BasileStarynkevitch : well .. I was using Xcode in MAC OS X so..didn&#39;t know how to use &quot;-Wall -Wextra&quot;"}, {"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1422439942, "post_id": 28189073, "comment_id": 44746996, "body": "@BasileStarynkevitch they are always useful, not only for newbies. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "edited": false, "score": 2, "creation_date": 1422439279, "post_id": 28189275, "comment_id": 44746612, "body": "Might be good to mention that this even has a proper name - a <i>multi-character literal</i>"}, {"owner": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "edited": false, "score": 0, "creation_date": 1422439488, "post_id": 28189275, "comment_id": 44746741, "body": "how can i find value of &#39;hi&#39;. or according to Mints97  any &quot;multi-character literal&quot;"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 2, "creation_date": 1422439592, "post_id": 28189275, "comment_id": 44746795, "body": "The integer value of a multi-character literal looks dodgy to me, though: C99 =&gt; &#167;6.4.4.4.10: <i>&quot;The value of an integer character constant containing more than one character (e.g., &#39;ab&#39;), [...] is implementation-defined.&quot;</i>, so there is some possible undefined behavior at play here"}, {"owner": {"reputation": 5482, "user_id": 3079266, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3957246a6593b75c3b706364f0c553d?s=128&d=identicon&r=PG&f=1", "display_name": "Mints97", "link": "https://stackoverflow.com/users/3079266/mints97"}, "reply_to_user": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "edited": false, "score": 2, "creation_date": 1422439601, "post_id": 28189275, "comment_id": 44746800, "body": "@DemonSOCKET: it is implementation-defined. Some compilers combine the ASCII values of the symbols in a multi-character literal as Sergey explained, and some compilers simply take the last character of the literal. To figure out what the value is in your case, just output it to stdout as a number =)"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1422439925, "post_id": 28189275, "comment_id": 44746987, "body": "In other words, <i>avoid them</i>. If you really want to combine two text characters, do so in a way you will know what the result is: <code>int a = (&#39;h&#39;&lt;&lt;8)+&#39;i&#39;;</code>."}], "tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": true, "score": 10, "last_activity_date": 1422439418, "last_edit_date": 1422439418, "creation_date": 1422439095, "answer_id": 28189275, "question_id": 28189073, "link": "https://stackoverflow.com/questions/28189073/why-this-loop-is-running-infinite-times-in-c/28189275#28189275", "title": "why this loop is running infinite times in c?", "body": "<p>That is because <code>'hi'</code> has type <code>int</code> not a <code>char</code>. It also resolves to value 26729. But loop variable most likely (assuming <code>char</code> is 1-byte type and byte has 8 bits) is limited by 127 and after that overflows.</p>\n\n<p>Note that this:</p>\n\n<pre><code>char a =0;\nchar m = 'hi';\nfor(; a &lt; m; a++)\n{\n    printf(\"%d= hello world \\n\",a);\n}\n</code></pre>\n\n<p>will work because <code>'hi'</code> is will be coerced to char (105).</p>\n\n<p><code>'hi'</code> is a multi-character literal. It is not common practice in programming, it is \"less known\" C feature which became part of C99 standard. More information about them: <a href=\"http://zipcon.net/~swhite/docs/computers/languages/c_multi-char_const.html\" rel=\"nofollow\">http://zipcon.net/~swhite/docs/computers/languages/c_multi-char_const.html</a> </p>\n"}, {"comments": [{"owner": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "edited": false, "score": 0, "creation_date": 1422440319, "post_id": 28189509, "comment_id": 44747255, "body": "stuff after 1st Paragraph .. gone completely over my head. :) I mean couldn&#39;t understand the integer-promotion rule. no offense."}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "reply_to_user": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "edited": false, "score": 2, "creation_date": 1422440457, "post_id": 28189509, "comment_id": 44747325, "body": "@DemonSOCKET then you should read more about it. Or it will hurt later."}, {"owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "reply_to_user": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "edited": false, "score": 0, "creation_date": 1422440939, "post_id": 28189509, "comment_id": 44747614, "body": "@DemonSOCKET: What exactly was unclear about the description? Did you check the standard?"}], "tags": [], "owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "is_accepted": false, "score": 1, "last_activity_date": 1422439837, "creation_date": 1422439837, "answer_id": 28189509, "question_id": 28189073, "link": "https://stackoverflow.com/questions/28189073/why-this-loop-is-running-infinite-times-in-c/28189509#28189509", "title": "why this loop is running infinite times in c?", "body": "<p>In C (as opposed to C++, as cited in some comments), character literals, <em>always</em> have type <code>int</code>. It doesn't matter if it's an ordinary one-character literal, such as 'c', or a multi-character literal, such as 'hi'. It always has type <code>int</code>, which is required to hold at least 16 bit. A <code>char</code> holds exactly one byte.</p>\n\n<p>When comparing integer values of different type, integer-promotion rules kick in and the integer value of smaller size gets promoted to the larger one.\nThat is why <code>a &lt; 'hi'</code> can only be <code>1</code> (\"true\"). Even if promoted to type <code>int</code>, the variable <code>a</code> can never hold anything larger than <code>MAX_CHAR</code>. But the multi-character literal <code>'hi'</code> is an <code>int</code> with a larger value than that <strong>in your complier's implementation</strong>.</p>\n\n<p>The reason that <code>a &lt; m</code> can succeed is that when declaring <code>m</code>, you initialise it with <code>'hi'</code> which gets converted to type <code>char</code>, which indeed has a chance to compare not-less-than an other <code>char</code>.</p>\n"}], "owner": {"reputation": 1481, "user_id": 2881549, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gN98l.png?s=128&g=1", "display_name": "Pawan Joshi", "link": "https://stackoverflow.com/users/2881549/pawan-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 28189275, "answer_count": 2, "score": 5, "last_activity_date": 1422439837, "creation_date": 1422438562, "last_edit_date": 1422438902, "question_id": 28189073, "link": "https://stackoverflow.com/questions/28189073/why-this-loop-is-running-infinite-times-in-c", "title": "why this loop is running infinite times in c?", "body": "<p>I was just experimenting a code in C programming. and came to know a strange behavior.\nWell... Since i am not an expert on C, so i don't know whether its strange or normal.</p>\n\n<p>Basically my question is all about the difference between the following two lines of code:-</p>\n\n<pre><code>char a = 'h'; // here variable a is not an array of \"char\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>char a = 'hi'; //here variable a is not an array of \"char\" as well (i don't know if compiler assumes it as an array or not but , at least i didn't declared it that way )\n</code></pre>\n\n<p>I used the following codes</p>\n\n<p>first:-</p>\n\n<pre><code>char a =0;\nfor(;a&lt;'hi';a++)\n{\n    printf(\"%d= hello world \\n\",a);\n}\n</code></pre>\n\n<p>second:-</p>\n\n<pre><code>char a;\nfor(a='h';a&lt;'hi';a++)\n{\n    printf(\"%d= hello world \\n\",a);\n}\n</code></pre>\n\n<p>both of the above mentioned loops keep running forever,</p>\n\n<p>Can somebody tell me why so ?</p>\n\n<p>I might be missing a very basic concept of programing. please help me guys</p>\n"}, {"tags": ["c", "contiki"], "owner": {"reputation": 135, "user_id": 4501971, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e874888cd47ad728c56b9a58dd3f8f03?s=128&d=identicon&r=PG&f=1", "display_name": "yushaa yave", "link": "https://stackoverflow.com/users/4501971/yushaa-yave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422441049, "creation_date": 1422438421, "last_edit_date": 1422441049, "question_id": 28189032, "link": "https://stackoverflow.com/questions/28189032/adding-p2p-rpl-patch-to-instant-contiki", "title": "Adding p2p-rpl patch to instant contiki", "body": "<p>I'm trying to apply the p2p-rpl patch offered by <a href=\"http://contiki-p2p-rpl.gforge.inria.fr/\" rel=\"nofollow\">http://contiki-p2p-rpl.gforge.inria.fr/</a>  to contiki, but I'm facing the following errors while trying to make the patch:</p>\n\n<pre><code>../../../core/dev/sht11.c: In function \u2018sstart\u2019:\n../../../core/dev/sht11.c:74:3: error: \u2018P1DIR\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:74:3: note: each undeclared identifier is reported only once for each function it appears in\n../../../core/dev/sht11.c:74:12: error: \u2018P1OUT\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c: In function \u2018sreset\u2019:\n../../../core/dev/sht11.c:93:3: error: \u2018P1DIR\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:94:3: error: \u2018P1OUT\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c: In function \u2018swrite\u2019:\n../../../core/dev/sht11.c:116:7: error: \u2018P1DIR\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:120:5: error: \u2018P1OUT\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:129:10: error: \u2018P1IN\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c: In function \u2018sread\u2019:\n../../../core/dev/sht11.c:142:3: error: \u2018P1DIR\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:145:5: error: \u2018P1OUT\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:147:8: error: \u2018P1IN\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c: In function \u2018sht11_init\u2019:\n../../../core/dev/sht11.c:215:3: error: \u2018P1OUT\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:217:3: error: \u2018P1DIR\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c: In function \u2018sht11_off\u2019:\n../../../core/dev/sht11.c:230:3: error: \u2018P1OUT\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c:232:3: error: \u2018P1DIR\u2019 undeclared (first use in this function)\n../../../core/dev/sht11.c: In function \u2018scmd\u2019:\n../../../core/dev/sht11.c:256:9: error: \u2018P1IN\u2019 undeclared (first use in this function)\nmake: *** [obj_sky/sht11.o] Error 1\n</code></pre>\n"}, {"tags": ["c", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 2182, "user_id": 1689090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef8d951e67e4b0c03f5b4c021e22b93d?s=128&d=identicon&r=PG", "display_name": "Evil Dog Pie", "link": "https://stackoverflow.com/users/1689090/evil-dog-pie"}, "edited": false, "score": 0, "creation_date": 1422438745, "post_id": 28189007, "comment_id": 44746262, "body": "The variable <code>genMatrix</code> is created on the stack every time <code>matrixGenerator()</code> function is called and the data contained at that address is undefined as soon as the function returns.  Consequently, using its address outside of this function is going to cause you no end of problems.  If you need a new array / matrix, look into using <code>malloc()</code> and <code>free()</code> to reserve the memory so taht it can be used anywhere in your program."}], "answers": [{"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": false, "score": 0, "last_activity_date": 1422438709, "creation_date": 1422438709, "answer_id": 28189130, "question_id": 28189007, "link": "https://stackoverflow.com/questions/28189007/erratic-behavior-while-handling-pointers-to-2d-arrays-in-c/28189130#28189130", "title": "Erratic behavior while handling pointers to 2D arrays in C", "body": "<p>You are returning a pointer to a local variable, thus the behavior of your code is <em>undefined</em>.</p>\n\n<p><code>matrix = &amp;genMatrix;</code></p>\n\n<p>The <code>genMatrix</code> is local, so when the function returns, <code>genMatrix</code> is no longer valid.</p>\n"}], "owner": {"reputation": 289, "user_id": 1831665, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/x35Ap.jpg?s=128&g=1", "display_name": "Tarun Verma", "link": "https://stackoverflow.com/users/1831665/tarun-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1422439863, "answer_count": 1, "score": 0, "last_activity_date": 1422438717, "creation_date": 1422438354, "question_id": 28189007, "link": "https://stackoverflow.com/questions/28189007/erratic-behavior-while-handling-pointers-to-2d-arrays-in-c", "closed_reason": "Duplicate", "title": "Erratic behavior while handling pointers to 2D arrays in C", "body": "<p>I'm an amateur C programmer, and while writing code to generate matrices of desired rows and columns, I decided to use pointers to 2D arrays rather than using them directly. Here's what I wrote:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef int matrices[1000][1000];\n\nvoid matrixGenerator(matrices *matrix, int rows, int columns) { \n    int genMatrix[rows][columns];\n    for (int i = 0; i &lt;= rows; i++) {\n        for (int j = 0; j &lt;= columns; j++) {\n            genMatrix[i][j] = 100; //Replace with some random value, 100 for testing\n        }\n    }\n    matrix = &amp;genMatrix;\n}\n\nint main(int argc, char *argv[]) {\n    matrices *mainMatrix, *kernelMatrix;\n    int rowsA = 0, columnsA = 0;\n    int rowsB = 0, columnsB = 0;\n    fprintf(stdout, \"Enter number of rows and columns in the main matrix:\");\n    fscanf(stdin, \"%d %d\", &amp;rowsA, &amp;columnsA);\n    matrixGenerator(mainMatrix, rowsA, columnsA);\n    fprintf(stdout, \"Enter number of rows and columns in the kernel matrix:\");\n    fscanf(stdin, \"%d %d\", &amp;rowsB, &amp;columnsB)   ;\n    matrixGenerator(kernelMatrix, rowsB, columnsB);\n\n    fprintf(stdout, \"%d %d %d %d\\n\", rowsA, columnsA, rowsB, columnsB);\n\n    for (int i = 0; i &lt;= rowsA; i++) {\n        for (int j = 0; j &lt;= columnsA; j++) {\n            fprintf(stdout, \"%d\\t\", (*mainMatrix)[i][j]);\n        }\n        fprintf(stdout, \"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I have two problems:</p>\n\n<ol>\n<li>The <code>fprintf</code> statement that prints the array contents after the call to <code>matrixGenerator()</code> crashes the program if I don't call the previous <code>fprintf</code> statement that prints the rows and columns of the individual matrices.</li>\n<li>When it does print, it prints random garbage values.</li>\n</ol>\n\n<p>Where am I going wrong?</p>\n"}, {"tags": ["c", "struct", "network-programming"], "comments": [{"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 1, "creation_date": 1422438359, "post_id": 28188941, "comment_id": 44746041, "body": "This breaks strict aliasing rules, doesn&#39;t it?"}, {"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1422438876, "post_id": 28188941, "comment_id": 44746343, "body": "Thanks, I didn&#39;t known <a href=\"http://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">this rule</a>. But it seems that, by using an <code>uint8_t buffer[]</code> it is ok."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1422440442, "post_id": 28188941, "comment_id": 44747315, "body": "I would say thats right, but not at all. I suppose if you are on a machine with CHAR_BIT &gt; 8 you will get trouble. But I can&#39;t confirm, as I never worked on such machine."}, {"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "reply_to_user": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1422441035, "post_id": 28188941, "comment_id": 44747672, "body": "@Zaibis Not really, I am running this on a microcontroller, so it should be ok. Thanks for the information"}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "edited": false, "score": 0, "creation_date": 1422442257, "post_id": 28188941, "comment_id": 44748328, "body": "My concern is, the Standard states that only <code>char</code>, <code>unsigned char</code> and <code>signed char</code> or equilent sized types pointer are allowed to alias in that way. So If you are on a i.e. 16 bit machine, you would break that rule by aliasing it with <code>uint8_t</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "edited": false, "score": 0, "creation_date": 1422439069, "post_id": 28188983, "comment_id": 44746471, "body": "Thanks, I also thought to this solution, but for me it is not very elegant."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1422438292, "creation_date": 1422438292, "answer_id": 28188983, "question_id": 28188941, "link": "https://stackoverflow.com/questions/28188941/access-data-after-a-header-structure/28188983#28188983", "title": "Access data after a header structure", "body": "<p>Well, if I understood your question correctly, you can do something like</p>\n\n<pre><code>uint8_t * data = (uint8_t *)buffer + sizeof (struct my_frame)\n</code></pre>\n\n<p>then, <code>data</code> will be a pointer to the next <code>uint8_t</code> element after the header.</p>\n"}, {"comments": [{"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "edited": false, "score": 0, "creation_date": 1422439844, "post_id": 28189388, "comment_id": 44746934, "body": "Not an answer, but very useful. Thanks. As suggested in the article, I will add some compiler directive to correct this."}, {"owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "edited": false, "score": 0, "creation_date": 1422440882, "post_id": 28189388, "comment_id": 44747577, "body": "Unfortunately, I am running this on a microcontroller with endless loop tasks (freertos) and data on the stack. So I will really need to check this out."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1422440305, "last_edit_date": 1422440305, "creation_date": 1422439425, "answer_id": 28189388, "question_id": 28188941, "link": "https://stackoverflow.com/questions/28188941/access-data-after-a-header-structure/28189388#28189388", "title": "Access data after a header structure", "body": "<pre><code>uint8_t buffer[BUFFER_SIZE];\nstruct my_frame_header *frame_header = (struct my_frame_header *)buffer;\n</code></pre>\n\n<p>This is wrong, the base address of <code>buffer</code> can be unaligned for <code>my_frame_header</code>.</p>\n\n<p>Take  look to <a href=\"http://lwn.net/Articles/260832/\" rel=\"nofollow\">Memory access and alignment</a></p>\n\n<p>On the other hand:</p>\n\n<blockquote>\n  <p>The block that malloc gives you is guaranteed to be aligned so that it\n  can hold any type of data.</p>\n</blockquote>\n\n<p>Then, you can use <code>malloc</code> in order to skip this problem:</p>\n\n<pre><code>uint8_t *buffer = malloc(BUFFER_SIZE);\n</code></pre>\n"}], "owner": {"reputation": 4314, "user_id": 2893600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9627f68f303857fa6e1bc984033dc10?s=128&d=identicon&r=PG", "display_name": "jmlemetayer", "link": "https://stackoverflow.com/users/2893600/jmlemetayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 28188983, "answer_count": 2, "score": 2, "last_activity_date": 1422440305, "creation_date": 1422438142, "question_id": 28188941, "link": "https://stackoverflow.com/questions/28188941/access-data-after-a-header-structure", "title": "Access data after a header structure", "body": "<p>I am doing some network programming, and I use some <code>struct</code> to describe my frame header like that:</p>\n\n<pre><code>struct my_frame_header {\n    uint16_t field1;\n    uint16_t field2;\n};\n</code></pre>\n\n<p>And so, when I have a buffer frame I can do something like that:</p>\n\n<pre><code>uint8_t buffer[BUFFER_SIZE];\nstruct my_frame_header *frame_header = (struct my_frame_header *)buffer;\n\nmy_read(buffer, BUFFER_SIZE);\n</code></pre>\n\n<p>I can now access to the header field like that:</p>\n\n<pre><code>ntohl(frame_header-&gt;field1);\n</code></pre>\n\n<p>Now, my question is: <strong>What is the most elegant way to access the data after the structure?</strong> <em>(i.e. to get a pointer at the beginning of the data part)</em></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 2, "creation_date": 1422437950, "post_id": 28188752, "comment_id": 44745817, "body": "With only one parameter, no recursion, and no loops, the only method that comes to mind is explicitly checking against each possible prime from 1 to 2^31 - 1."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1422438234, "post_id": 28188752, "comment_id": 44745974, "body": "Also, if this is actually an assignment that you have for a class, then I&#39;m fairly sure that either you&#39;re not expected to solve it, or you&#39;ve misunderstood the constraints that are to be placed on your code."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1422438349, "post_id": 28188752, "comment_id": 44746038, "body": "You need to write a wrapper for the real prime check function, for example <code>bool prime(const int i)</code> will call <code>bool primeCheck(i, 2)</code>"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1422438417, "post_id": 28188752, "comment_id": 44746065, "body": "@BillLynch: Actually you only have to check if it is divisible by each possible prime from 1 to about 2^16 (exactly to <code>floor(sqrt(2^31-1))</code>)."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1422438876, "post_id": 28188752, "comment_id": 44746342, "body": "@rodrigo: Well, that&#39;s only 4792 numbers to divide against."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1422440568, "post_id": 28188752, "comment_id": 44747401, "body": "@BillLynch: Yeah, perfectly doable. I would like to see the reaction of the teacher upon a 5000 line function that fits their nonsensical requirements <i>perfectly</i>. I would write <code>return (i%2!=0&amp;&amp;i%3!=0&amp;&amp;i%5!=0&amp;&amp;...);</code> and blame the compiler if it blows up."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1564668948, "post_id": 28188752, "comment_id": 101114362, "body": "<code>sprintf(url, &quot;https:&#47;&#47;www.isprimenumber.com&#47;prime&#47;%d&quot;, i);</code> then fetch and parse the page :)"}], "answers": [{"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1422438373, "creation_date": 1422438373, "answer_id": 28189010, "question_id": 28188752, "link": "https://stackoverflow.com/questions/28188752/determine-if-a-number-is-a-prime-without-using-loops-and-mutations/28189010#28189010", "title": "Determine if a number is a prime without using loops and mutations?", "body": "<p>Only way I can think of is:</p>\n\n<pre><code>bool prime(const int i) \n{\n  assert(i &gt;= 0);\n  return char_array_odd_primes_const[i / 8] &amp; (1U &lt;&lt; (i % 8)) ? true : false;\n}\n</code></pre>\n\n<p>Where <code>char_array_primes_const</code> contains 2<sup>31</sup> bits which are set to 1 for prime numbers and 0 for non-prime.</p>\n\n<hr>\n\n<p>More efficient would be:</p>\n\n<pre><code>bool prime(const int i) \n{\n  assert(i &gt;= 0);\n  if(2 == i) return true;\n  if(i % 2) return false;\n  return char_array_primes_const[i / 16] &amp; (1U &lt;&lt; ((i/2) % 8)) ? true : false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1008, "user_id": 4233030, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a2335c96adce97e5a0f64b2dfadf0582?s=128&d=identicon&r=PG&f=1", "display_name": "Python_user", "link": "https://stackoverflow.com/users/4233030/python-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1422438760, "creation_date": 1422438760, "answer_id": 28189149, "question_id": 28188752, "link": "https://stackoverflow.com/questions/28188752/determine-if-a-number-is-a-prime-without-using-loops-and-mutations/28189149#28189149", "title": "Determine if a number is a prime without using loops and mutations?", "body": "<p>Randomized Algorithms are known to exist for determining whether a no. is prime or not (and <strong><em>most probably they use only a single input</em></strong>(i do not have idead regarding <em>all</em> such algorithms), i.e., the number itself that is to be tested for its primality). These algorithms are proven to be accurate in <strong><em>maximum</em></strong> no. of situations, i.e., the probability with which they can give the correct result is very high(although not 100% like the usual deterministic algorithms that are written). If you want, you can use them.</p>\n\n<p>Refer to the following link for more details:<br>\n<a href=\"http://en.wikipedia.org/wiki/Primality_test#Probabilistic_tests\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Primality_test#Probabilistic_tests</a> </p>\n"}, {"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 2, "last_activity_date": 1422438788, "creation_date": 1422438788, "answer_id": 28189158, "question_id": 28188752, "link": "https://stackoverflow.com/questions/28188752/determine-if-a-number-is-a-prime-without-using-loops-and-mutations/28189158#28189158", "title": "Determine if a number is a prime without using loops and mutations?", "body": "<p>With an auxiliary function it should be more or less easy, although terrible innefficient:</p>\n\n<pre><code>bool prime(const int i) \n{\n    prime_aux(i, i-1);\n}\n\nbool prime_aux(const int i, const int d)\n{\n    if (d == 1) return true;\n    if (i % d == 0) return false;\n    return prime_aux(i, d - 1);\n}\n</code></pre>\n\n<p>There are some easy optimizations out there, but I omitted them because the code is prettier this way. Also some checks to the input parameters may be needed before proceeding.</p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1564668846, "post_id": 57310984, "comment_id": 101114297, "body": "This is a Java solution.  The question is tagged with C, not Java."}], "tags": [], "owner": {"reputation": 11, "user_id": 11825509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6618e2513747bd295aa4432a684e7e0d?s=128&d=identicon&r=PG&f=1", "display_name": "Asif Jamal", "link": "https://stackoverflow.com/users/11825509/asif-jamal"}, "is_accepted": false, "score": 1, "last_activity_date": 1564668637, "creation_date": 1564668637, "answer_id": 57310984, "question_id": 28188752, "link": "https://stackoverflow.com/questions/28188752/determine-if-a-number-is-a-prime-without-using-loops-and-mutations/57310984#57310984", "title": "Determine if a number is a prime without using loops and mutations?", "body": "<pre><code>check a given number prime or not without loop,Recursion,Auxiliary Function   \n\nimport java.math.RoundingMode;\nimport java.util.Scanner;\npublic class PrimeNumberwithoutloop {\n    static void PrimeNumber(double num)\n    {\n        double n=num/6;\n        if(n&lt;Math.round(n))\n        { n=6*(Math.round(n))-1;\n            if(n==num)\n                System.out.println(\"Prime\");\n            else\n              System.out.println(\"Not Prime\");\n        }\n        else\n        {    n=6*(Math.round(n))+1;\n            if(n==num)\n                System.out.println(\"Prime\");\n            else\n                System.out.println(\"Not Prime\");\n        }\n    }\n public static void main(String[] args) {\n      Scanner sc=new Scanner(System.in);\n      System.out.println(\"Enter number to check prime or not\");\n              double num=sc.nextDouble();\n       PrimeNumber(num);\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4486260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7cf5ce574f122d792ef71efdd1507f21?s=128&d=identicon&r=PG&f=1", "display_name": "Pheegy", "link": "https://stackoverflow.com/users/4486260/pheegy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1961, "favorite_count": 1, "answer_count": 4, "score": -1, "last_activity_date": 1564668637, "creation_date": 1422437583, "last_edit_date": 1422438032, "question_id": 28188752, "link": "https://stackoverflow.com/questions/28188752/determine-if-a-number-is-a-prime-without-using-loops-and-mutations", "title": "Determine if a number is a prime without using loops and mutations?", "body": "<p>How can I determine is a number is a prime without using a loop? I'm a beginner student and so far I've only been taught functional C. All I am allowed to use is the most basic code like + -, if, ==,!,||....Also, no variable mutations are allowed, all variables must be constant.</p>\n\n<p>Here is my code with mutation:</p>\n\n<pre><code>bool prime(const int i, int a) {\n    if (a &gt; i/2){\n        return false;\n    }\n    if (i%a == 0){\n        return true;\n    }\n    else {\n        return prime(i, a+1);\n    }\n}\n\n# int a is a counter its given initial value is always 2\n#prime (5,2) --&gt; false\n#prime (9,2) --&gt; true\n</code></pre>\n\n<p>However, as the question requires, no mutation is allowed, and only one variable is consumed so it should look like </p>\n\n<pre><code>bool prime(const int i) {\n    ...\n}\n</code></pre>\n\n<p>I'm thinking of a recursive approach but I just can't quite figure it out.\nAlso efficiency is not a factor to be considered in this problem.\nAny help will be appreciated, thanks!</p>\n"}, {"tags": ["c", "locking", "pthreads", "mutex", "deadlock"], "comments": [{"owner": {"reputation": 818, "user_id": 3499764, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ddeb573635f59d364d53c6c6fe865995?s=128&d=identicon&r=PG&f=1", "display_name": "Leviathan", "link": "https://stackoverflow.com/users/3499764/leviathan"}, "edited": false, "score": 0, "creation_date": 1422439161, "post_id": 28188630, "comment_id": 44746534, "body": "Could you add some code?"}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422439775, "post_id": 28188630, "comment_id": 44746890, "body": "Checking the size of allocation doesn&#39;t preclude corruption."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422439867, "post_id": 28188630, "comment_id": 44746953, "body": "Suggest you try running under <code>valgrind</code> (for corruption) and perhaps try <code>helgrind</code> (part of <code>valgrind</code>) for lock / mutex abuse."}, {"owner": {"reputation": 1, "user_id": 4501911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb6fb2f285463a71cc087cf8eee8aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Thangaraj", "link": "https://stackoverflow.com/users/4501911/thangaraj"}, "reply_to_user": {"reputation": 818, "user_id": 3499764, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ddeb573635f59d364d53c6c6fe865995?s=128&d=identicon&r=PG&f=1", "display_name": "Leviathan", "link": "https://stackoverflow.com/users/3499764/leviathan"}, "edited": false, "score": 0, "creation_date": 1422440070, "post_id": 28188630, "comment_id": 44747079, "body": "@Leviathan it is very big code base, it would be difficult to share. Let me know if you need any specific information. Thanks."}, {"owner": {"reputation": 1, "user_id": 4501911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb6fb2f285463a71cc087cf8eee8aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Thangaraj", "link": "https://stackoverflow.com/users/4501911/thangaraj"}, "reply_to_user": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1422440162, "post_id": 28188630, "comment_id": 44747145, "body": "@abligh this is not consistently reproducible. It hits once only. so we could not try with helgrind."}], "owner": {"reputation": 1, "user_id": 4501911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb6fb2f285463a71cc087cf8eee8aa6?s=128&d=identicon&r=PG&f=1", "display_name": "Thangaraj", "link": "https://stackoverflow.com/users/4501911/thangaraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422437208, "creation_date": 1422437208, "question_id": 28188630, "link": "https://stackoverflow.com/questions/28188630/pthread-mutex-lock-locked-but-no-owner-or-count-set", "title": "pthread_mutex_lock locked but no owner or count set", "body": "<p>There was a deadlock and found that pthread_mutex_lock is waiting to get the lock but the mutex lock is already locked with owner set to zero.</p>\n\n<pre><code>p *(*spinLock)-&gt;lock\n$47 = {__data = {__lock = 1, __count = 0, __owner = 0, __kind = 0, __nusers = 0, {__spins = 0, __list = {__next = 0x0}}}, __size = \"\\001\", '\\000' &lt;repeats 22 times&gt;, __align = 1}\n</code></pre>\n\n<p>I was wondered here, only lock and __align set to one but reset including owner and count set to zero. Initially I thought of corruption but when I checked the size of allocation it was correct.</p>\n\n<pre><code>(gdb) p (*spinLock)-&gt;lock\n$49 = (pthread_mutex_t *) 0x2df7a764\n(gdb) x/2x 0x2df7a764-4\n0x2df7a760: 0x0000001c  0x00000001\n(gdb) p/x sizeof(*(*spinLock)-&gt;lock)+4\n$51 = 0x1c\n</code></pre>\n\n<p>I try to figure out what could leads to this condition but I could not. Any pointer would really. Thanks!</p>\n"}, {"tags": ["c", "loops", "switch-statement"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422437124, "post_id": 28188588, "comment_id": 44745358, "body": "A suggestion: try to make a program simpler. not more complex."}, {"owner": {"reputation": 2555, "user_id": 664010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e18fb6458794f60f32a5ae70d832d27?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/664010/stefan"}, "edited": false, "score": 0, "creation_date": 1422437204, "post_id": 28188588, "comment_id": 44745400, "body": "Is this your homework? What <i>exactly</i> have you tried? Show me your tried do-while loop and we can see what you may have done wrong."}, {"owner": {"reputation": 11, "user_id": 3497039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CdjJg.jpg?s=128&g=1", "display_name": "el_coder", "link": "https://stackoverflow.com/users/3497039/el-coder"}, "edited": false, "score": 0, "creation_date": 1422437214, "post_id": 28188588, "comment_id": 44745405, "body": "What is the fun in that (I&#39;m 14 btw)"}, {"owner": {"reputation": 11, "user_id": 3497039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CdjJg.jpg?s=128&g=1", "display_name": "el_coder", "link": "https://stackoverflow.com/users/3497039/el-coder"}, "edited": false, "score": 0, "creation_date": 1422437234, "post_id": 28188588, "comment_id": 44745419, "body": "so no. not my homework"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3497039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CdjJg.jpg?s=128&g=1", "display_name": "el_coder", "link": "https://stackoverflow.com/users/3497039/el-coder"}, "edited": false, "score": 0, "creation_date": 1422437730, "post_id": 28188669, "comment_id": 44745693, "body": "Like C is, pretty interesting."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11, "user_id": 3497039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CdjJg.jpg?s=128&g=1", "display_name": "el_coder", "link": "https://stackoverflow.com/users/3497039/el-coder"}, "edited": false, "score": 0, "creation_date": 1422437744, "post_id": 28188669, "comment_id": 44745703, "body": "@el_coder just as the same reason for <code>scanf(&quot; %c&quot;, &amp;response);</code>"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1422437698, "last_edit_date": 1422437698, "creation_date": 1422437357, "answer_id": 28188669, "question_id": 28188588, "link": "https://stackoverflow.com/questions/28188588/c-looping-a-switch/28188669#28188669", "title": "C Looping a switch?", "body": "<p><del>The most common way is to use a <code>do-while</code> loop. Make following changes</del></p>\n\n<del>\n1. initialize `response` to `C`.\n2. put the `switch` case and next `printf()` and `scanf()` in `do..while()` loop.\n3. in the `while ()` condition, check `while (c == `C`)`.\n</del>\n\n<hr>\n\n<p>After the edit, the problem seems to be</p>\n\n<pre><code>scanf(\"%c\", &amp;scale);\n</code></pre>\n\n<p>you need to have a space before <code>%c</code>, like</p>\n\n<pre><code>scanf(\" %c\", &amp;scale);\n</code></pre>\n\n<p>to avoid the <kbd>ENTER</kbd> [<code>\\n</code>]after <code>C</code> at last.</p>\n"}], "owner": {"reputation": 11, "user_id": 3497039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CdjJg.jpg?s=128&g=1", "display_name": "el_coder", "link": "https://stackoverflow.com/users/3497039/el-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 28188669, "answer_count": 1, "score": -1, "last_activity_date": 1422437698, "creation_date": 1422437038, "last_edit_date": 1422437343, "question_id": 28188588, "link": "https://stackoverflow.com/questions/28188588/c-looping-a-switch", "title": "C Looping a switch?", "body": "<p>so here is my code:</p>\n\n<p>My problem is that I want to loop the switch statement with a while loop, depending on what char response gets (at the bottom).</p>\n\n<p>I have tried putting the whole switch statement in a do while loop (that flopped).</p>\n\n<p>Anyways I'm new to this language and I wanted to try to make a complex program. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define LINE  \"____________________\"\n#define TITLE \"Tempature Converter\"\n#define NAME  \"Jose Meza II\"\n\nchar scale, response;\nfloat temp, celTemp, farTemp, kelTemp;\n\nint main() {\n\nprintf(\"\\n \\t %s \\n \\t %s \\n\", LINE, TITLE );\nprintf(\"\\t by %s \\n \\t %s \\n\\n\", NAME, LINE );\n\nprintf(\"Enter C for Celsius, F for Fahrenheit, or K for Kelvin: \");\nscanf(\"%c\", &amp;scale);\nprintf(\"Tempature value: \");\nscanf(\"%f\", &amp;temp);\n\nswitch (scale)\n{\n    case ('c'): /* convert to Fahrenheit and Kelvin */\n    {\n        farTemp = (temp * 9 / 5) + 32;\n        kelTemp = temp + 273.15;\n        printf(\"Fahrenheit = %.2f\\n\", farTemp);\n        printf(\"Kelvin = %.2f\\n\\n\", kelTemp);\n        break;\n    } /* end case 'c' */\n    case ('f'): /* convert to Celsius and Kelvin */\n    {\n        celTemp = (temp - 32) * 5 / 9;\n        kelTemp = (temp - 32) * 5 / 9 + 273.15;\n        printf (\"Celsius = %.2f\\n\", celTemp);\n        printf (\"Kelvin = %.2f\\n\\n\", kelTemp);\n        break;\n    } /* end case 'f' */\n    case ('k'): /* convert to Celsius and Fahrenheit */\n    {\n        celTemp = temp - 273.15;\n        farTemp = (temp - 273.15) * 9 /5 + 32;\n        printf(\"Celsius = %.2f\\n\", celTemp);\n        printf(\"Fahrenheit = %.2f\\n\\n\", farTemp);\n        break;\n    } /* end case 'k' */\n    default: exit(0); /* no valid temperature scale was given, exit program */\n} /* end switch */\n\nprintf(\"Enter in C to Continue, or S to stop: \");\nscanf(\" %c\", &amp;response);\n\nreturn 0;\n}\n</code></pre>\n\n<p>What can I do?</p>\n\n<p>I have tried:</p>\n\n<pre><code>do\n{\n    printf(\"Enter C for Celsius, F for Fahrenheit, or K for Kelvin: \");\n    scanf(\"%c\", &amp;scale);\n    printf(\"Tempature value: \");\n    scanf(\"%f\", &amp;temp);\n\n    switch (scale)\n    {\n        case ('c'): /* convert to Fahrenheit and Kelvin */\n        {\n            farTemp = (temp * 9 / 5) + 32;\n            kelTemp = temp + 273.15;\n            printf(\"Fahrenheit = %.2f\\n\", farTemp);\n            printf(\"Kelvin = %.2f\\n\\n\", kelTemp);\n            break;\n        } /* end case 'c' */\n        case ('f'): /* convert to Celsius and Kelvin */\n        {\n            celTemp = (temp - 32) * 5 / 9;\n            kelTemp = (temp - 32) * 5 / 9 + 273.15;\n            printf (\"Celsius = %.2f\\n\", celTemp);\n            printf (\"Kelvin = %.2f\\n\\n\", kelTemp);\n            break;\n        } /* end case 'f' */\n        case ('k'): /* convert to Celsius and Fahrenheit */\n        {\n            celTemp = temp - 273.15;\n            farTemp = (temp - 273.15) * 9 /5 + 32;\n            printf(\"Celsius = %.2f\\n\", celTemp);\n            printf(\"Fahrenheit = %.2f\\n\\n\", farTemp);\n            break;\n        } /* end case 'k' */\n        default: exit(0); /* no valid temperature scale was given, exit     program */\n    } /* end switch */\n\n    printf(\"Enter in C to Continue, or S to stop: \");\n    scanf(\" %c\", &amp;response);\n}\nwhile(response == 'c');\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "network-programming", "ip"], "comments": [{"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 1, "creation_date": 1422435790, "post_id": 28188080, "comment_id": 44744606, "body": "Did you try to run your application with <code>root</code> rights? There is no other way in my opinion to change it through <code>C&#47;C++</code> but use linux/unix headers and libs."}, {"owner": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1422435827, "post_id": 28188080, "comment_id": 44744639, "body": "mmm, good question. Let me try it."}, {"owner": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "reply_to_user": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "edited": false, "score": 0, "creation_date": 1422436113, "post_id": 28188080, "comment_id": 44744815, "body": "Initially it worked! I will do further testing to make sure. Thanks man!"}], "answers": [{"comments": [{"owner": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "edited": false, "score": 0, "creation_date": 1422436568, "post_id": 28188329, "comment_id": 44745079, "body": "Thanks for the help. I have two questions; Number one is how to set the default gateway ? And number two in the question I mentioned why there is a suggestion to use &#39;struct sockaddr_in*&#39; instead of &#39;struct ifreq&#39; ? I mean the second one worls for me."}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "edited": false, "score": 1, "creation_date": 1422437643, "post_id": 28188329, "comment_id": 44745646, "body": "Setting default gateway I believe is explained <a href=\"http://www.unix.com/programming/142516-set-host-default-gateway-c-program.html\" rel=\"nofollow noreferrer\">here</a>. Second question - don&#39;t know. Comment a post there and ask a guy who proposed that. Good luck."}, {"owner": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "edited": false, "score": 0, "creation_date": 1422439707, "post_id": 28188329, "comment_id": 44746853, "body": "the code you provided works fine but it adds another route. Can I change the current default gateway not adding a new one ?"}, {"owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "reply_to_user": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "edited": false, "score": 0, "creation_date": 1422440165, "post_id": 28188329, "comment_id": 44747147, "body": "Maybe you have to remove default gateway first then? Also, here is another <a href=\"http://www.linuxquestions.org/questions/programming-9/problem-to-set-gateway-using-c-program-846692/\" rel=\"nofollow noreferrer\">link</a>. Don&#39;t shy to google it, it can be easily googled."}], "tags": [], "owner": {"reputation": 12555, "user_id": 1750757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Zmc7D.jpg?s=128&g=1", "display_name": "Victor Polevoy", "link": "https://stackoverflow.com/users/1750757/victor-polevoy"}, "is_accepted": true, "score": 2, "last_activity_date": 1589800525, "last_edit_date": 1589800525, "creation_date": 1422436200, "answer_id": 28188329, "question_id": 28188080, "link": "https://stackoverflow.com/questions/28188080/change-ip-settings-programmatically-in-linux-with-c-c/28188329#28188329", "title": "Change IP settings programmatically in Linux with C/C++", "body": "<p>In most cases, such kind of operations requires root access. Run your application with root rights and it'll make it work.</p>\n"}], "owner": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6061, "favorite_count": 0, "accepted_answer_id": 28188329, "answer_count": 1, "score": 2, "last_activity_date": 1589800525, "creation_date": 1422435353, "last_edit_date": 1495535188, "question_id": 28188080, "link": "https://stackoverflow.com/questions/28188080/change-ip-settings-programmatically-in-linux-with-c-c", "title": "Change IP settings programmatically in Linux with C/C++", "body": "<p>How to change the IP settings [mainly IP address, subnet mask and default gateway] in Linux using C/C++ ? I've seen examples that uses sockets but there are not much [besides they don't work]. I've tried <a href=\"https://stackoverflow.com/questions/6652384/how-to-set-the-ip-address-from-c-in-linux\">this question</a> but it does not work.</p>\n\n<p>Whenever I try the code I use ifconfig to see my network configuration but they are still the same. I have openSUSE 13.2 and have both wireless and ethernet available connections.</p>\n\n<p>I think another solution would be is to change the corresponding script file for the interface but I can't find these script files' locations.</p>\n"}, {"tags": ["c", "opengl", "texture-mapping", "skybox"], "comments": [{"owner": {"reputation": 829, "user_id": 1441978, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a32df3a5c6b13fe4bffd7dc4c83d006d?s=128&d=identicon&r=PG", "display_name": "Pankaj Bansal", "link": "https://stackoverflow.com/users/1441978/pankaj-bansal"}, "edited": false, "score": 0, "creation_date": 1422435654, "post_id": 28188078, "comment_id": 44744540, "body": "Few things to try 1. You are creating textures again and again in display function. This is not the way. Create textures in Init function and just use them in display 2. You have not set idleFunc and not called glutPostRedisplay  in draw function"}, {"owner": {"reputation": 8298, "user_id": 2663985, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/531b51e8cd1cf8655256f3e913ed9eef?s=128&d=identicon&r=PG&f=1", "display_name": "Mysterion", "link": "https://stackoverflow.com/users/2663985/mysterion"}, "edited": false, "score": 0, "creation_date": 1422435716, "post_id": 28188078, "comment_id": 44744578, "body": "please describe what you&#39;ve done, may be you could try to debug and locate the problem piece?"}, {"owner": {"reputation": 512, "user_id": 4082630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YP8rqyAKtT0/AAAAAAAAAAI/AAAAAAAAAAo/OkfAHt3V2h8/photo.jpg?sz=128", "display_name": "K_Finlay", "link": "https://stackoverflow.com/users/4082630/k-finlay"}, "edited": false, "score": 0, "creation_date": 1422436009, "post_id": 28188078, "comment_id": 44744735, "body": "Does changing the clear colour make any difference?. Also, have you confirmed that the textures are loading correctly? If you can see the clear colour, then there is something wrong with your mesh drawing. If it is still black, then the textures have not been created successfully."}, {"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1422436070, "post_id": 28188078, "comment_id": 44744777, "body": "Your projections seems not to fit your skybox. In z-direction, for example, the visible range is specified from 1.5 to 20, but your skybox is drawn from -256 to 256, which is behind the farplane or the nearplane."}, {"owner": {"reputation": 512, "user_id": 4082630, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YP8rqyAKtT0/AAAAAAAAAAI/AAAAAAAAAAo/OkfAHt3V2h8/photo.jpg?sz=128", "display_name": "K_Finlay", "link": "https://stackoverflow.com/users/4082630/k-finlay"}, "reply_to_user": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 2, "creation_date": 1422436896, "post_id": 28188078, "comment_id": 44745238, "body": "I think @BDL has the right answer."}, {"owner": {"reputation": 45, "user_id": 3579421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2960cf6a483b26aa55f9fab89dcb4dd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579421", "link": "https://stackoverflow.com/users/3579421/user3579421"}, "reply_to_user": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1422437840, "post_id": 28188078, "comment_id": 44745748, "body": "@BDL I see. So would you then recommend that I change the values in frustum? I&#39;m afraid I&#39;m not entirely sure what would be the best way in going about fixing this."}, {"owner": {"reputation": 45, "user_id": 3579421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2960cf6a483b26aa55f9fab89dcb4dd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579421", "link": "https://stackoverflow.com/users/3579421/user3579421"}, "reply_to_user": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1422438487, "post_id": 28188078, "comment_id": 44746106, "body": "@BDL I assumed that because my bmp image files are 512 x 512, that the width, height, and length should therefore be 512. Was this a mistake?"}, {"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1422438963, "post_id": 28188078, "comment_id": 44746396, "body": "Basically you can use all sizes you want, unless the projection fits to the size of your skybox. There is also no need to have the geometry at the same size as the resolution of the texture."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3579421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2960cf6a483b26aa55f9fab89dcb4dd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579421", "link": "https://stackoverflow.com/users/3579421/user3579421"}, "edited": false, "score": 0, "creation_date": 1422486944, "post_id": 28189815, "comment_id": 44774417, "body": "I see. So to implement the solution would I then just change the values of frustum? What values would be the most reasonable to use?"}, {"owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "reply_to_user": {"reputation": 45, "user_id": 3579421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2960cf6a483b26aa55f9fab89dcb4dd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579421", "link": "https://stackoverflow.com/users/3579421/user3579421"}, "edited": false, "score": 0, "creation_date": 1422513938, "post_id": 28189815, "comment_id": 44781757, "body": "At least something that is bigger than 256"}], "tags": [], "owner": {"reputation": 18064, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": false, "score": 1, "last_activity_date": 1422440742, "creation_date": 1422440742, "answer_id": 28189815, "question_id": 28188078, "link": "https://stackoverflow.com/questions/28188078/i-am-trying-to-create-a-skybox-with-opengl-in-c-but-am-only-getting-a-black-scr/28189815#28189815", "title": "I am trying to create a skybox with openGL in C, but am only getting a black screen", "body": "<p>The problem seems to be, that the skybox is not located inside of the visible area. When looking at the definition of the projection matrix <code>glFrustum(-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);</code>, one sees, that along the z-axis visible values have to be between 1.5 and 20.0. But the skybox is drawn from -256.0 to 256.0, which is behind the far-plane/near-plane and gets clipped away.</p>\n\n<p>There are two possible solutions for this: One can either draw a smaller skybox or increase the visible area. In general the result will be the same in both cases (at least when rendering the skybox without depth-testing as first object, which one would normally do).</p>\n\n<p>According to the comments: There is no relation between the size of a texture in pixels and the size of the geometry. So there is no need to draw a cube with side length of 512.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 3579421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2960cf6a483b26aa55f9fab89dcb4dd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579421", "link": "https://stackoverflow.com/users/3579421/user3579421"}, "edited": false, "score": 0, "creation_date": 1422487094, "post_id": 28194809, "comment_id": 44774467, "body": "Okay thank you! I moved the methods creating the textures into init(). I also cleared the GL_DEPTH_BUFFER_BIT and got rid of the extra enables. Those did not fix the problem however. I&#39;m sure @BDL is correct that the values are incorrect. I&#39;m messing around with those now to get it right, but I&#39;m not sure exactly how I should go about fixing them."}, {"owner": {"reputation": 1066, "user_id": 4449067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9808cdffad25628a47f1b95526edc3b9?s=128&d=identicon&r=PG", "display_name": "Shadocko", "link": "https://stackoverflow.com/users/4449067/shadocko"}, "reply_to_user": {"reputation": 45, "user_id": 3579421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2960cf6a483b26aa55f9fab89dcb4dd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579421", "link": "https://stackoverflow.com/users/3579421/user3579421"}, "edited": false, "score": 0, "creation_date": 1422522063, "post_id": 28194809, "comment_id": 44785583, "body": "Try 1024.0 for far clipping plane. Also, did you fix the gluLookAt call?"}], "tags": [], "owner": {"reputation": 1066, "user_id": 4449067, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9808cdffad25628a47f1b95526edc3b9?s=128&d=identicon&r=PG", "display_name": "Shadocko", "link": "https://stackoverflow.com/users/4449067/shadocko"}, "is_accepted": false, "score": 0, "last_activity_date": 1422455564, "creation_date": 1422455564, "answer_id": 28194809, "question_id": 28188078, "link": "https://stackoverflow.com/questions/28188078/i-am-trying-to-create-a-skybox-with-opengl-in-c-but-am-only-getting-a-black-scr/28194809#28194809", "title": "I am trying to create a skybox with openGL in C, but am only getting a black screen", "body": "<p>Several things seem wonrg:</p>\n\n<ul>\n<li>glClear is called without the GL_DEPTH_BUFFER_BIT but depth-test is enabled</li>\n<li>gluLookAt uses (0,0,0) for both eye position and point of interest, the modelview matrix won't look good; you should use the center of the box for position and whatever you want for target.</li>\n<li>Your display function is reloading the images and recreating the textures every frame! This should really be done just once and for all at startup time, in your init() function.</li>\n<li>You don't need to enable GL_TEXTURE_GEN_S or GL_TEXTURE_GEN_T because <em>you</em> <em>are</em> <em>providing</em> texture coords.</li>\n<li>What @BDL said: the far clipping plane is too close (20.0) considering the size of your box (512.0).</li>\n</ul>\n"}], "owner": {"reputation": 45, "user_id": 3579421, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2960cf6a483b26aa55f9fab89dcb4dd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579421", "link": "https://stackoverflow.com/users/3579421/user3579421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1443943793, "creation_date": 1422435325, "last_edit_date": 1422437775, "question_id": 28188078, "link": "https://stackoverflow.com/questions/28188078/i-am-trying-to-create-a-skybox-with-opengl-in-c-but-am-only-getting-a-black-scr", "title": "I am trying to create a skybox with openGL in C, but am only getting a black screen", "body": "<p>I'm trying to create a skybox with OpenGL in C. I have viewed many tutorials and looked at many people's code, and I don't think I've missed anything, and yet get a black screen. Have I gone about the whole thing wrong?</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;GL/glut.h&gt;\n#include &lt;GL/glu.h&gt;\n#include &lt;GL/gl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nGLuint texture[6];\n\n/**\n * Init function initializing the background to black.\n */\nvoid init()\n{\n    glClearColor(0.0, 0.0, 0.0, 0.0);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glLoadIdentity();   \n    glMatrixMode(GL_MODELVIEW | GL_PROJECTION);\n    glEnable(GL_DEPTH_TEST);    \n}\n\nvoid reshape(int w, int h)\n{\n   glViewport(0, 0, (GLsizei) w, (GLsizei) h);\n   glMatrixMode(GL_PROJECTION);\n   glLoadIdentity();\n   glFrustum(-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);\n   glMatrixMode(GL_MODELVIEW);\n}\n\nGLuint LoadTexture(const char * filename, int width, int height)\n{\n    GLuint texture;\n    unsigned char * data;\n    FILE * file;\n\n    //Open the image file\n    file = fopen(filename, \"rb\");\n    //If it doesn't open just return 0\n    if(file == NULL)\n    {\n        return 0;\n    }\n\n    //Allocate space for data and read\n    data = (unsigned char *)malloc(width * height * 3);\n    fread(data, width * height * 3, 1, file);\n\n    //Close the file\n    fclose(file);\n\n    glGenTextures(1, &amp;texture);\n    glBindTexture(GL_TEXTURE_2D, texture);\n    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);\n\n    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR );\n    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_LINEAR );\n\n    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );\n    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );\n\n    gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height, GL_RGB, GL_UNSIGNED_BYTE, data );    \n    free(data);\n\n    return texture;     \n}\n\nvoid draw()\n{\n    int width = 512;\n    int height = 512;\n    int length = 512;\n\n    //start in this coordinates\n    int x = 0;\n    int y = 0;\n    int z = 0;\n\n    //center the square\n    x = x - width / 2;\n    y = y - height / 2;\n    z = z - length / 2;\n\n    // Bind the BACK texture of the sky map to the BACK side of the cube\n    glBindTexture(GL_TEXTURE_2D, texture[0]);\n    glBegin(GL_QUADS);      \n        glTexCoord2f(1.0f, 0.0f); glVertex3f(x + width, y,  z);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(x + width, y + height, z); \n        glTexCoord2f(0.0f, 1.0f); glVertex3f(x, y + height, z);\n        glTexCoord2f(0.0f, 0.0f); glVertex3f(x, y, z);\n    glEnd();\n\n    //FRONT\n    glBindTexture(GL_TEXTURE_2D, texture[1]);\n    glBegin(GL_QUADS);  \n        glTexCoord2f(1.0f, 0.0f); glVertex3f(x, y,  z + length);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y + height, z + length);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(x + width, y + height, z + length); \n        glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y,  z + length);\n    glEnd();\n\n    //BOTTOM\n    glBindTexture(GL_TEXTURE_2D, texture[4]);\n    glBegin(GL_QUADS);      \n        glTexCoord2f(1.0f, 0.0f); glVertex3f(x, y,  z);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y,  z + length);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(x + width, y,  z + length); \n        glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y,  z);\n    glEnd();\n\n    //TOP\n    glBindTexture(GL_TEXTURE_2D, texture[5]);\n    glBegin(GL_QUADS);      \n        glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y + height, z);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(x + width, y + height, z + length); \n        glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y + height, z + length);\n        glTexCoord2f(0.0f, 1.0f); glVertex3f(x, y + height, z);\n    glEnd();\n\n    //LEFT\n    glBindTexture(GL_TEXTURE_2D, texture[2]);\n    glBegin(GL_QUADS);      \n        glTexCoord2f(1.0f, 1.0f); glVertex3f(x, y + height, z); \n        glTexCoord2f(0.0f, 1.0f); glVertex3f(x, y + height, z + length); \n        glTexCoord2f(0.0f, 0.0f); glVertex3f(x, y,  z + length);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(x, y,  z);     \n\n    glEnd();\n\n    //RIGHT\n    glBindTexture(GL_TEXTURE_2D, texture[3]);\n    glBegin(GL_QUADS);  \n        glTexCoord2f(0.0f, 0.0f); glVertex3f(x + width, y,  z);\n        glTexCoord2f(1.0f, 0.0f); glVertex3f(x + width, y,  z + length);\n        glTexCoord2f(1.0f, 1.0f); glVertex3f(x + width, y + height, z + length); \n        glTexCoord2f(0.0f, 1.0f); glVertex3f(x + width, y + height, z);\n    glEnd();\n}\n\nvoid display()\n{\n    glClear(GL_COLOR_BUFFER_BIT);\n    glLoadIdentity();\n    gluLookAt(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);\n    texture[0] = LoadTexture(\"back.bmp\", 512, 512);\n    /*texture[0] = SOIL_load_OGl_texture\n    {\n        \"back.bmp\",\n        SOIL_LOAD_AUTO,\n        SOIL_CREATE_NEW_ID,\n        SOIL_FLAG_INVERT_Y\n    };*/\n    texture[1] = LoadTexture(\"front.bmp\", 512, 512);\n    texture[2] = LoadTexture(\"left.bmp\", 512, 512);\n    texture[3] = LoadTexture(\"right.bmp\", 512, 512);\n    texture[4] = LoadTexture(\"cesped.bmp\", 512, 512);\n    texture[5] = LoadTexture(\"top.bmp\", 512, 512);\n\n    glEnable(GL_TEXTURE_2D);\n    glEnable(GL_TEXTURE_GEN_S);\n    glEnable(GL_TEXTURE_GEN_T);\n\n    draw();\n    glutSwapBuffers();\n}\n\nint main(int argc, char* argv[])\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH | GLUT_ALPHA);\n    glutInitWindowSize(1000, 1000);\n    glutInitWindowPosition(100, 100);\n    glutCreateWindow(\"blah\");\n\n    init();\n    glutDisplayFunc(display);\n    glutReshapeFunc(reshape);\n\n    glutMainLoop();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1422434647, "post_id": 28187837, "comment_id": 44744006, "body": "&quot;struct numbers defined inside main&quot; and &quot;struct numbers outside any function&quot; are considered different types. Move the definition outside <code>main</code>."}, {"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 1, "creation_date": 1422434723, "post_id": 28187837, "comment_id": 44744053, "body": "Welcome to SO. While the question is generally ok, it will be easier for everyone if the next time you post a question you specify which line raises each error. Don&#39;t forget to mark one of the answers that solve your problem (if there is any) as the solution."}, {"owner": {"reputation": 406, "user_id": 4214412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ad8718ddc68c9ff1967e81780bb2b5?s=128&d=identicon&r=PG", "display_name": "Gophyr", "link": "https://stackoverflow.com/users/4214412/gophyr"}, "edited": false, "score": 0, "creation_date": 1422468029, "post_id": 28187837, "comment_id": 44764701, "body": "As previously said, make the <code>struct</code> definition global.  Also, put extra space between lines that deal with different things (such as after your <code>#include</code>, C does not care about indentations.  You may want to use <code>%d</code> in <code>printf</code> as well, it is more common."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 6, "last_activity_date": 1422434548, "creation_date": 1422434548, "answer_id": 28187881, "question_id": 28187837, "link": "https://stackoverflow.com/questions/28187837/new-to-programming-issue-with-structures-and-functions/28187881#28187881", "title": "New to programming, issue with structures and functions", "body": "<p>The problem is that the <code>struct numbers</code> <em>declaration</em> is global, but the <em>definition</em> is local in <code>main</code>, To use the members of a structure, the <code>swap</code> function must know what members the structure have, and as it can't see the definition it doesn't know that. Remove the declaration and put the definition in the global scope.</p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 4502000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22bdac13429d52ad2e1ac4cb120dcc46?s=128&d=identicon&r=PG&f=1", "display_name": "ashissl", "link": "https://stackoverflow.com/users/4502000/ashissl"}, "edited": false, "score": 0, "creation_date": 1422434759, "post_id": 28187882, "comment_id": 44744073, "body": "Thanks, that fixed the issue."}, {"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "edited": false, "score": 0, "creation_date": 1422435104, "post_id": 28187882, "comment_id": 44744256, "body": "It might also be worth using <code>typedef</code> so that multiple instances of the structure can be created: <code>typedef struct { int a; int b; int c; } NUMBERS;</code> allows you to simply write <code>static void swap(NUMBERS *s)</code> in much the same way as you would use <code>int*</code> or <code>float*</code>."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1422435264, "post_id": 28187882, "comment_id": 44744349, "body": "Sure, that&#39;s convenient, but I don&#39;t understand what you mean by &quot;multiple instances&quot;. That has nothing to do with <code>typedef</code>, and is not a problem in the OP&#39;s code. Note the line in <code>main()</code> that starts with <code>struct numbers x =</code>, that&#39;s creating an instance and there can be any number of such."}, {"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "edited": false, "score": 0, "creation_date": 1422436096, "post_id": 28187882, "comment_id": 44744799, "body": "@unwind Hmm, it seems that I mis-typed; I meant to say &quot;It might also be worth using <code>typedef</code> <b>for convenience if</b> multiple instances of the structure will be created&quot;. (This wasn&#39;t meant to be a criticism of your answer or anything - I just didn&#39;t think that it was worth being posted separately.)"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 8, "last_activity_date": 1422434553, "creation_date": 1422434553, "answer_id": 28187882, "question_id": 28187837, "link": "https://stackoverflow.com/questions/28187837/new-to-programming-issue-with-structures-and-functions/28187882#28187882", "title": "New to programming, issue with structures and functions", "body": "<p>You're expecting the code in <code>swap()</code> to be able to access the fields of <code>struct numbers</code>, but the full declaration of that type is <em>inside</em> <code>main()</code>, so it's not visible.</p>\n\n<p>Break out the declaration, it must be visible to all who need it. Putting it first will also remove the need to pre-declare the structure.</p>\n\n<p>The same with <code>swap()</code> itself, putting it before <code>main()</code> will remove the need to have a prototype for it in the same file.</p>\n\n<p>It should be:</p>\n\n<pre><code>struct numbers\n{\n .\n .\n .\n}\n\nstatic void swap(struct numbers *s)\n{\n .\n .\n .\n}\n\nint main(void)\n{\n .\n .\n .\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 387, "user_id": 3319454, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/248e74acd11734222342f1322c470c7d?s=128&d=identicon&r=PG&f=1", "display_name": "3bdalla", "link": "https://stackoverflow.com/users/3319454/3bdalla"}, "is_accepted": false, "score": 4, "last_activity_date": 1422434938, "creation_date": 1422434938, "answer_id": 28187979, "question_id": 28187837, "link": "https://stackoverflow.com/questions/28187837/new-to-programming-issue-with-structures-and-functions/28187979#28187979", "title": "New to programming, issue with structures and functions", "body": "<p>Function <code>swap</code> can't see the definition of <code>struct numbers</code>. Put it globally outside <code>main</code>.</p>\n\n<p>Extra Tip - Use <code>typedef</code> with structs, it gives you flexibility in declaration:</p>\n\n<pre><code>typedef struct typeNumbers\n{\n    int a;\n    int b;\n    int c;\n} numbers;\n</code></pre>\n\n<p>Note that typeNumbers is optional. Declare it like:</p>\n\n<pre><code>numbers x = {1, 2, 3};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "is_accepted": false, "score": 1, "last_activity_date": 1422435541, "creation_date": 1422435541, "answer_id": 28188137, "question_id": 28187837, "link": "https://stackoverflow.com/questions/28187837/new-to-programming-issue-with-structures-and-functions/28188137#28188137", "title": "New to programming, issue with structures and functions", "body": "<p>The problem was that the structure was in main, I did some fixes also to the code and comment them.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//By defining the struct at the beginning you can avoid the forward declaration \n//and it make more sense to know what \"numbers\" is before continuing reading the code.\nstruct numbers {\n    int a;\n    int b;\n    int c;\n};\n\nvoid swap(struct numbers* s)\n{\n    //Small change to use only one temp variable...\n    int temp2 = s -&gt; b;\n    s -&gt; b = s -&gt; a;\n    s -&gt; a = s -&gt; c;\n    s -&gt; c = temp2;\n}\n\nint main(void)\n{\n    struct numbers x = {1, 5 , 9};\n    swap(&amp;x);\n    printf(\"%i, %i, %i\\n\", x.a, x.b, x.c);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 4502000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22bdac13429d52ad2e1ac4cb120dcc46?s=128&d=identicon&r=PG&f=1", "display_name": "ashissl", "link": "https://stackoverflow.com/users/4502000/ashissl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 4, "score": 5, "last_activity_date": 1422435541, "creation_date": 1422434393, "question_id": 28187837, "link": "https://stackoverflow.com/questions/28187837/new-to-programming-issue-with-structures-and-functions", "title": "New to programming, issue with structures and functions", "body": "<p>Hey I'm new to programming (learning through cs50x in C) and when they mentioned structures I decided to try to fool around and just write a quick program that would swap some values in a structure using a function. I'm running until several error messages, the first of which is \"incompatible pointer types passing 'struct numbers*' to parameter of type 'struct numbers*'. Another issue seems to come up in the function definition where the compiler says \"incomplete definition of type 'struct number'\" I was just hoping for some help cause I'm stumped.</p>\n\n<p>Heres the code (I know its rough but I'm learning lol)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct numbers;\nvoid swap(struct numbers* s);\n\nint main(void)\n{\n    struct numbers\n    {\n        int a;\n        int b;\n        int c;\n    };\n    struct numbers x = {1, 5 , 9};\n    swap(&amp;x);\n    printf(\"%i, %i, %i\\n\", x.a, x.b, x.c);\n    return 0;\n}\n\nvoid swap(struct numbers* s)\n{\n    int temp = s -&gt; a;\n    int temp2 = s -&gt; b;\n    s -&gt; a = s -&gt; c;\n    s -&gt; b = temp;\n    s -&gt; c = temp2;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "sizeof", "c11"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1422434143, "post_id": 28187738, "comment_id": 44743763, "body": "Essentially you just have to be aware that arrays decay to pointers when passed as parameters, so don&#39;t use <code>sizeof</code> on an array that is passed to you as a parameter."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1422434350, "post_id": 28187738, "comment_id": 44743863, "body": "It&#39;s just restating that <code>void f(char p[])</code> declares the parameter <code>p</code> to have pointer type."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1422434216, "creation_date": 1422434216, "answer_id": 28187791, "question_id": 28187738, "link": "https://stackoverflow.com/questions/28187738/sizeof-applied-to-array-types/28187791#28187791", "title": "sizeof applied to array types", "body": "<p>Having an object of array type that does not produce the size of a pointer is simple: don't do it on a a function argument:</p>\n\n<pre><code>const int foo[32];\n\nprintf(\"hey, foo is %zu bytes\\n\", sizeof foo);\n</code></pre>\n\n<p>Will not print <code>sizeof (int *)</code>.</p>\n\n<p>This is the normal usage, the text you're quoting is pointing out that when an array is passed to a function, it decays to a pointer, even if the function's prototype specifies an array size.</p>\n\n<p>So this:</p>\n\n<pre><code>static void printsize(int x[100])\n{\n  printf(\"the argument is %zu bytes\\n\", sizeof x);\n}\n\nint main(void)\n{\n  const int foo[100];\n  printsize(foo);\n  return 0;\n}\n</code></pre>\n\n<p><em>will</em> print <code>sizeof (int *)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1422434682, "post_id": 28187807, "comment_id": 44744026, "body": "<code>sizeof(a)</code> is <code>sizeof(int*)</code> not because the argument decays when called, but because <code>int a[]</code> is <i>adjusted</i> to <code>int* a</code>. Array decay means that you can call <code>func(array)</code> even if <code>array</code> is an array."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1422434980, "post_id": 28187807, "comment_id": 44744202, "body": "Inside the function it <i>is</i> a pointer, because the function&#39;s parameter has been adjusted to pointer. So the decay happens when you pass an array to the function. I added some explanations to my answer."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1422435034, "post_id": 28187807, "comment_id": 44744223, "body": "@juanchopanza Yes I get what you are saying. Thanks"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1422434765, "last_edit_date": 1422434765, "creation_date": 1422434297, "answer_id": 28187807, "question_id": 28187738, "link": "https://stackoverflow.com/questions/28187738/sizeof-applied-to-array-types/28187807#28187807", "title": "sizeof applied to array types", "body": "<p>Just to clarify your doubt below code might help:</p>\n\n<pre><code>void func(int a[])\n{\n  sizeof(a) is not equal to sizeof(int) * 10 but equal to sizeof(pointer)\n  Because int a[] is adjusted to int * \n}\n\nint main()\n{\nint a[10];\nint *p = a;\n//Initialize\n//sizeof(a) = sizeof(int) * 10 \n\n//sizeof(p) = sizeof(pointer)\n\nfunc(a);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 4, "last_activity_date": 1422440054, "last_edit_date": 1422440054, "creation_date": 1422434354, "answer_id": 28187822, "question_id": 28187738, "link": "https://stackoverflow.com/questions/28187738/sizeof-applied-to-array-types/28187822#28187822", "title": "sizeof applied to array types", "body": "<p>The key point from the quote are \"<em>parameter declared to have array type</em>\" and \"<em>the adjusted (pointer) type</em>\". What this is referring to is the fact that a function parameter of \"array type\" is adjusted to pointer type. Once that adjustment is made, the type is pointer, and its size has to be the size of a pointer. It cannot be anything else. This is how it works:</p>\n\n<pre><code>void foo(int p[42]);\n</code></pre>\n\n<p>is <em>adjusted</em> to</p>\n\n<pre><code>void foo(int* p);\n</code></pre>\n\n<p>Those two function declarations are equivalent. So the type of <code>p</code> is <code>int*</code>. and <code>sizeof(int*)</code> is always the size of a pointer.</p>\n\n<p>However, in a different context, there is no type adjustment:</p>\n\n<pre><code>int a[42]; // no adjustment. a is an array of size 42;\n\nsizeof(a); // gives the size of type int[42]\n</code></pre>\n\n<p>Here, the type of <code>a</code> really is \"size 42 array of int\". The sizeof operator has access to this (compile-time) information and thus can give the correct size for that type.</p>\n\n<p>Note that this is related to <em>array decay</em>, where an array can \"decay\" into a pointer to its first element under some circumstances. That decay is what would allow you to call <code>foo</code> with an array argument:</p>\n\n<pre><code>int a[26];\nfoo(a);     // foo(int*): a decays to int*\n\nint* p = a; // same phenomenon\n</code></pre>\n\n<p>So, <em>adjustment</em> changes the function signature, and <em>decay</em> allows you pass an array to a function that expects a pointer.</p>\n\n<p><strong><em>Update</em></strong> Concerning your update, the application of binary arithmetic operators is one of the many cases where an array decays to a pointer to its first element. For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int a[42];\n    printf(\"sizeof(a) = %zu\\n\", sizeof(a));\n    printf(\"sizeof(a+1) = %zu\\n\", sizeof(a+1));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>sizeof(a) = 168\nsizeof(a+1) = 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": false, "score": 1, "last_activity_date": 1422434455, "creation_date": 1422434455, "answer_id": 28187858, "question_id": 28187738, "link": "https://stackoverflow.com/questions/28187738/sizeof-applied-to-array-types/28187858#28187858", "title": "sizeof applied to array types", "body": "<p>The footnote applies to a (function) parameter.</p>\n\n<p>e.g. </p>\n\n<pre><code>void foo(int param_arr[32])\n{\n     int local_arr[32];\n}\n</code></pre>\n\n<p><code>param_arr</code> is a parameter to the function - and while it looks like an array, it's really a pointer (an <code>int *</code>). So sizeof <code>param_arr</code> yields the size of an <code>int *</code>.</p>\n\n<p><code>local_arr</code> is not a parameter. So sizeof yields the size of that array.</p>\n"}, {"tags": [], "owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "is_accepted": true, "score": 3, "last_activity_date": 1422449550, "last_edit_date": 1422449550, "creation_date": 1422435999, "answer_id": 28188272, "question_id": 28187738, "link": "https://stackoverflow.com/questions/28187738/sizeof-applied-to-array-types/28188272#28188272", "title": "sizeof applied to array types", "body": "<p>In response to your update (being concerned about <code>sizeof(foo+1)</code> type situations:</p>\n\n<p>Yes, <code>sizeof</code> applied to <code>array_name + int</code> is equivalent to <code>sizeof &amp;(array_name[int]);</code>, on the basis that an array, decays into a pointer in those cases. Likewise, to get to the actual value out of the array you don't write <code>arr_name + 1</code>, but rather <code>*(arr_name + 1)</code>.</p>\n\n<p>So, taking the footnote into account, when will a <code>sizeof</code> yield the actual array size (in bytes)? For that, look at what the standard says about arrays decaying into pointers:</p>\n\n<blockquote>\n  <p>Except when it is the operand of the sizeof operator or the unary &amp; operator, or is a string literal used to initialize an array, an expression that has type \u2018\u2018array of type\u2019\u2019 is converted to an expression with type \u2018\u2018pointer to type\u2019\u2019 that points to the initial element of the array object and is not an lvalue.</p>\n</blockquote>\n\n<p>Meaning:</p>\n\n<ul>\n<li>Using <code>sizeof</code> directly on the array variable (<code>sizeof array_var</code>)</li>\n<li>Dereferencing a pointer to an array (<code>sizeof *(&amp;array_var)</code>) <em>Note: This also applies when you pass this pointer to an array to another function, but isn't always the best way to go (see example below)</em></li>\n<li>string literals (like the Rvalue in <code>char foo[] = \"foobar\";</code> => <code>sizeof(\"foobar\");</code>)</li>\n</ul>\n\n<p>In all other cases (AFAIK), the array decays into a pointer, and <code>sizeof</code> will yield the size of a pointer:</p>\n\n<ul>\n<li>Arithmetic on array => pointer arithmetic (<code>sizeof (array_var +1 )</code>)</li>\n<li>Passing array to function (decays into pointer)</li>\n<li>...</li>\n</ul>\n\n<p><strong><em>passing an array to a function</em></strong></p>\n\n<p>So using the unary <code>&amp;</code> operator, it <em>is</em> possible to pass a pointer to an array to a function, but it's rarely done. Still, here's an example:</p>\n\n<pre><code>void pointer_to_array(char (*ptr)[]);//pointer to array type\nvoid error_p_to_arr(char (*ptr)[]);\n\nint main ( void )\n{\n    char str[] = \"some random string\";//array of 18 bytes\n    printf(\n        \"Sizeof array %zu\\n\",\n        sizeof str\n    );\n    pointer_to_array(&amp;str);\n    return 0;\n}\n//we need to specify the exact type, including size!\n//replace 18 with 10, you're fine, but use 20 and you're in trouble\nvoid pointer_to_array(char (*ptr)[18])\n{\n    printf(\n        \"sizeof argument: %zu\\nsizeof array %zu\",\n        sizeof ptr,//4 or 8\n        sizeof *ptr//18!! YaY\n    );\n}\n//if we don't specify the array size here\nvoid error_p_to_arr(char (*ptr)[])\n{\n    printf(\n        \"sizeof argument: %zu\\nsizeof array %zu\",\n        sizeof ptr,//4 or 8\n        sizeof *ptr//ERROR!\n    );\n}\n</code></pre>\n\n<p>The latter <code>sizeof *ptr</code> will cause an error (<em>\"invalid application of \u2018sizeof\u2019 to incomplete type \u2018char[]\u2019\"</em>). Because this way of passing an array around is quite error prone (the correct size must be defined everywhere), it's a lot more common common to simply let the array decay, and pass a second argument along with it:</p>\n\n<pre><code>void common_usage(const char *ptr, size_t arr_len);\nint main ( void )\n{\n    char str[] = \"some random string\";\n    common_usage(str, sizeof str/sizeof *str);\n    return 0;\n}\n</code></pre>\n\n<p>It looks a lot cleaner, it's a lot more common and just so much easier to maintain.</p>\n\n<h1>See examples <a href=\"https://eval.in/266462\" rel=\"nofollow\">here</a></h1>\n"}, {"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 0, "last_activity_date": 1422437842, "last_edit_date": 1422437842, "creation_date": 1422436954, "answer_id": 28188562, "question_id": 28187738, "link": "https://stackoverflow.com/questions/28187738/sizeof-applied-to-array-types/28188562#28188562", "title": "sizeof applied to array types", "body": "<p>As arrays decay into pointers, when an array is passed to function as a parameter we can illustrate it as declaring parameter as an array as shown below,</p>\n\n<pre><code>void function (char a[])\n{ ... }\n</code></pre>\n\n<p>Now the above declaration is interpreted by compiler differently as a pointer declaration since the function actually receives the pointer to an arrya of type T, as shown below:</p>\n\n<pre><code>void function(char *a)\n{ ... }\n</code></pre>\n\n<p>Therefore, the compiler pretend that the array parameter declared as a pointer (of type <code>char *</code>) and <code>sizeof</code> will give the size of pointer in fact instead of size of array.</p>\n\n<p>Example:</p>\n\n<pre><code>void function (char a[10])\n{\n    int i = sizeof(a);\n    printf(\"%d\\n\", i);\n}\n</code></pre>\n\n<p>Output is acutually <code>4</code> and not <code>10</code>.</p>\n"}], "owner": {"reputation": 159, "user_id": 4465786, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14b537e78977d57235256115d7763b73?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4465786/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1380, "favorite_count": 0, "accepted_answer_id": 28188272, "answer_count": 6, "score": 4, "last_activity_date": 1422449550, "creation_date": 1422433995, "last_edit_date": 1592644375, "question_id": 28187738, "link": "https://stackoverflow.com/questions/28187738/sizeof-applied-to-array-types", "title": "sizeof applied to array types", "body": "<p>The c11 standard says that sizeof,</p>\n<blockquote>\n<p>&quot;when applied to an operand that has array type, the result is the\ntotal number of bytes in the array&quot;</p>\n</blockquote>\n<ul>\n<li>(6.5.3.4, bullet 4).</li>\n</ul>\n<p>The foot note (103) says:</p>\n<blockquote>\n<p>&quot;When applied to a parameter declared to have array or function type,\nthe sizeof operator yields the size of the adjusted (pointer) type&quot;.</p>\n</blockquote>\n<p>I take from this that when applied to an array type, sizeof gives the size of the array (number of elements x size of elements), but applied to parameters declared to have array type, it gives the size of the pointer.</p>\n<h1>My question:</h1>\n<p>How is it possible to have an object of array type that does not produce the size of a pointer, due to the foot note?</p>\n<p>I feel like I cannot trust the sizeof operator in some circumstances without knowing this.</p>\n<p>Thanks.</p>\n<p>EDIT: I guess I should clarify my concern, if &quot;int a[4]&quot; is defined, then I see from the responses that sizeof a==4*sizeof(int), but what about sizeof(a+0)? It seems that sizeof(a+1) must be evaluated as a pointer. I am concerned with circumstances other than function calls where an array decays to a pointer.</p>\n"}, {"tags": ["c", "syntax", "c-preprocessor", "preprocessor-directive"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422433732, "post_id": 28187619, "comment_id": 44743574, "body": "Should be <code>dbg_print(x)</code>"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422434111, "post_id": 28187619, "comment_id": 44743747, "body": "@BasileStarynkevitch No, that&#39;s not what he&#39;s doing (see the call, he passes parentheses for the function call there)."}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 1, "creation_date": 1422434363, "post_id": 28187619, "comment_id": 44743871, "body": "It&#39;s simply not possible."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1422434656, "post_id": 28187619, "comment_id": 44744014, "body": "@Axalo It&#39;s not portable, but it is possible. There is also a workaround to non-portability."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1422435847, "post_id": 28187619, "comment_id": 44744651, "body": "Can you convert your TRACE() macro to a static inline function ?"}, {"owner": {"reputation": 153, "user_id": 881814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70eebb761b819466bdcbb3668b4396ad?s=128&d=identicon&r=PG", "display_name": "wmjdgla", "link": "https://stackoverflow.com/users/881814/wmjdgla"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1422439745, "post_id": 28187619, "comment_id": 44746871, "body": "@nos: To do that, my compiler must be able to handle variable argument list, and I could have used <code>#define TRACE(...) do { if (DEBUG) dbg_print(__VA_ARGS__); } while (0)</code>, which would eliminate the double parentheses and therefore the problem altogether. Another limitation is that <code>TRACE</code> has been used extensively throughout the legacy code I&#39;m working on, so changing it is not very practical too."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 881814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70eebb761b819466bdcbb3668b4396ad?s=128&d=identicon&r=PG", "display_name": "wmjdgla", "link": "https://stackoverflow.com/users/881814/wmjdgla"}, "edited": false, "score": 0, "creation_date": 1422440206, "post_id": 28187891, "comment_id": 44747175, "body": "Appreciate the effort, but it seems like it will run into scalability issues. Your example only handles 1 &quot;additional stuff&quot;. What if I have 3, each to be controlled by a different <code>#define</code> flag? Also, this only handles the format string. What if I have additional arguments that are to be controlled by <code>#define</code> too?"}, {"owner": {"reputation": 153, "user_id": 881814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70eebb761b819466bdcbb3668b4396ad?s=128&d=identicon&r=PG", "display_name": "wmjdgla", "link": "https://stackoverflow.com/users/881814/wmjdgla"}, "edited": false, "score": 0, "creation_date": 1422458234, "post_id": 28187891, "comment_id": 44758215, "body": "Wait, <code>IF_MY_YOUR</code> allows for the &quot;y z&quot;, &quot;y&quot; and &quot;&quot;(neither) case. How about the &quot;z&quot; case?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 153, "user_id": 881814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70eebb761b819466bdcbb3668b4396ad?s=128&d=identicon&r=PG", "display_name": "wmjdgla", "link": "https://stackoverflow.com/users/881814/wmjdgla"}, "edited": false, "score": 0, "creation_date": 1422461323, "post_id": 28187891, "comment_id": 44760378, "body": "@wmjdgla You are right, I need to put <code>IF_MY</code> on both branches. See the edit and the four demos."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1422461283, "last_edit_date": 1422461283, "creation_date": 1422434603, "answer_id": 28187891, "question_id": 28187619, "link": "https://stackoverflow.com/questions/28187619/using-preprocessor-conditionals-in-macro-functions-with-double-parentheses/28187891#28187891", "title": "Using preprocessor conditionals in macro functions with double parentheses", "body": "<p>Some compilers will compile your code through compiler extension, but it is not portable. You can work around this issue by conditionally defining another macro, and using its result in a call of <code>TRACE</code>, like this:</p>\n\n<pre><code>#ifdef MYDEF\n#define IF_MY(x,y) x y\n#else\n#define IF_MY(x,y) x\n#endif\n</code></pre>\n\n<p>Now you can write your <code>TRACE</code> as follows:</p>\n\n<pre><code>TRACE((IF_MY(\"Message: %s\", \"Additional stuff\"), msg));\n</code></pre>\n\n<p><a href=\"http://ideone.com/61EGmh\" rel=\"nofollow\">Demo #1.</a></p>\n\n<blockquote>\n  <p>it seems like it will run into scalability issues.</p>\n</blockquote>\n\n<p>That impression is incorrect. You can scale this approach quite easily to as many variables as you wish without running into combinatorial explosion. Here is an example of adding a second variable:</p>\n\n<pre><code>#ifdef YOURDEF\n#define IF_MY_YOUR(x,y,z) IF_MY(x,y) z\n#else\n#define IF_MY_YOUR(x,y,z) IF_MY(x,y)\n#endif\n</code></pre>\n\n<p>Now you can use the combined macro in your <code>TRACE</code>:</p>\n\n<pre><code>TRACE((IF_MY_YOUR(\"Message: %s\", \"Additional stuff\", \"More stuff\"), msg));\n</code></pre>\n\n<p><a href=\"http://ideone.com/uW7DDq\" rel=\"nofollow\">Demo #2 - Both <code>MYDEF</code> and <code>YOURDEF</code> are defined</a></p>\n\n<p><a href=\"http://ideone.com/x7NZzZ\" rel=\"nofollow\">Demo #2 - Only <code>YOURDEF</code> is defined</a></p>\n\n<p><a href=\"http://ideone.com/LGtqvD\" rel=\"nofollow\">Demo #2 - Only <code>MYDEF</code> is defined</a></p>\n\n<p><a href=\"http://ideone.com/Y10O3O\" rel=\"nofollow\">Demo #2 - Neither <code>MYDEF</code> or <code>YOURDEF</code> is defined</a></p>\n\n<blockquote>\n  <p>What if I have additional arguments that are to be controlled by #define too?</p>\n</blockquote>\n\n<p>Do the same thing for parameters, with commas in between <code>x</code> and <code>y</code> parts. The call of <code>TRACE</code> would look like this:</p>\n\n<pre><code>TRACE((\n    IF_MY_YOUR_FMT(\"Message: %s\", \"Additional %s stuff\", \"More %s stuff\")\n,   IF_MY_YOUR_ARG(msg1, msg2, msg3)\n));\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 881814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70eebb761b819466bdcbb3668b4396ad?s=128&d=identicon&r=PG", "display_name": "wmjdgla", "link": "https://stackoverflow.com/users/881814/wmjdgla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 1, "accepted_answer_id": 28187891, "answer_count": 1, "score": 2, "last_activity_date": 1464024792, "creation_date": 1422433519, "last_edit_date": 1464024792, "question_id": 28187619, "link": "https://stackoverflow.com/questions/28187619/using-preprocessor-conditionals-in-macro-functions-with-double-parentheses", "title": "Using preprocessor conditionals in macro functions with double parentheses", "body": "<p>Given:</p>\n\n<pre><code>#define TRACE(x) do { if (DEBUG) dbg_print x; } while (0)\n</code></pre>\n\n<p>I want:</p>\n\n<pre><code>TRACE((\n    \"Message: %s\"\n#ifdef MYDEF\n    \"Additional stuff\"\n#endif\n    , msg));\n</code></pre>\n\n<p>But gives error:</p>\n\n<pre><code>error C2121: '#' invalid character : possibly the result of a macro expansion\nerror C2146: syntax error : missing ')' before identifier 'ifdef'\nerror C2121: '#' invalid character : possibly the result of a macro expansion\nerror C2059: syntax error : ')'\n</code></pre>\n\n<p>I know I can easily resolve this by writing two different <code>TRACE</code> calls and using <code>#ifdef...#else...#endif</code>, but the above is only a simplified case. My actual use case involve multiple <code>#ifdef</code> that controls both the format string and the arguments, so it's not practical write multiple trace calls (e.g. with 3 <code>ifdef</code>, I'll need 2^3 = 8 different calls to take care of all the possible combinations). Is there a way around this?</p>\n"}, {"tags": ["c", "struct", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1422433382, "post_id": 28187579, "comment_id": 44743400, "body": "Standard Warning : Please <a href=\"http://stackoverflow.com/q/605845/2173917\">do not cast</a> the return value of <code>malloc()</code>."}, {"owner": {"reputation": 47440, "user_id": 229410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0014fcc07d184018d3b8185a85a09?s=128&d=identicon&r=PG", "display_name": "Rohan", "link": "https://stackoverflow.com/users/229410/rohan"}, "edited": false, "score": 1, "creation_date": 1422433435, "post_id": 28187579, "comment_id": 44743424, "body": "You should <code>malloc()</code> for <code>mon-&gt;task[0]</code> and/or other elements not <code>mon-&gt;task</code>."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1422434397, "post_id": 28187579, "comment_id": 44743890, "body": "First: What type is <code>task</code>, in English?"}, {"owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422434501, "post_id": 28187579, "comment_id": 44743935, "body": "well, since task is in the struct named month, then i&#39;ll say it&#39;s in the type month. (if in type you mean as if in int, char, double, etc.)"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1422434585, "post_id": 28187579, "comment_id": 44743977, "body": "@lili No, not &quot;what type is it inside?&quot; but &quot;what type is it?&quot;"}, {"owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422434694, "post_id": 28187579, "comment_id": 44744035, "body": "i don&#39;t really understand waht you mean..."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1422434761, "post_id": 28187579, "comment_id": 44744074, "body": "<code>int i;</code> &lt;- now <code>i</code> is an integer. <code>month m;</code> &lt;- now <code>m.task</code> is what? (I&#39;m testing your understanding; this is not part of an answer)"}, {"owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422434817, "post_id": 28187579, "comment_id": 44744110, "body": "mon.task is a string, an array of chars"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1422434837, "post_id": 28187579, "comment_id": 44744123, "body": "Nope, it&#39;s not. (How would you define an array of chars?)"}, {"owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422434933, "post_id": 28187579, "comment_id": 44744175, "body": "well i do think it is a string (but since task has a pointer then it is an array of pointers)"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 3, "creation_date": 1422435403, "post_id": 28187579, "comment_id": 44744403, "body": "@lil A value in C can&#39;t be &quot;a string&quot; and &quot;an array of pointers&quot; at the same time, they are not the same."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422434183, "post_id": 28187599, "comment_id": 44743776, "body": "i have tried that option but for some reason the compailer screms: &quot;=&quot;- cannot convert from &#39;void *&#39; to &#39;char *&#39;"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1422434959, "post_id": 28187599, "comment_id": 44744188, "body": "What compiler are you using that can&#39;t convert from <code>void*</code> to <code>char*</code>?  See <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 2, "creation_date": 1422435430, "post_id": 28187599, "comment_id": 44744422, "body": "@JohnZwinck Sounds like a C++ compiler to me. :("}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1422435525, "post_id": 28187599, "comment_id": 44744472, "body": "@unwind You should be right. The most acclaimed answer of yours not to cast <code>malloc()</code>  answers the OP&#39;s question :)"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422435645, "post_id": 28187599, "comment_id": 44744534, "body": "@lili: If you&#39;re using a C++ compiler you need to cast the result of malloc, like <code>(char*)malloc(...)</code>."}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 0, "creation_date": 1422436726, "post_id": 28187599, "comment_id": 44745146, "body": "Better: If you use a C++ compiler, you should program in C++. Use <code>new</code>, <code>delete</code> etc. If you want to program in C, use a C compiler (resp. tell your compiler to compile in C)."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 1, "last_activity_date": 1422433735, "last_edit_date": 1422433735, "creation_date": 1422433410, "answer_id": 28187599, "question_id": 28187579, "link": "https://stackoverflow.com/questions/28187579/using-malloc-on-a-elemnt-in-struct-in-c/28187599#28187599", "title": "Using malloc on a elemnt in struct in C", "body": "<pre><code>for(i=0;i&lt;40;i++)\n{ \n  /* Allocating memory to each pointers and later you write to this location */\n  mon-&gt;task[i] = malloc(size);/* If you have a initialized string then size = strlen(tempTask) + 1 */\n}\n</code></pre>\n\n<p>What you have is array of pointers and just access them and allocate memory to each of the pointers individually as shown above.</p>\n"}, {"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 0, "last_activity_date": 1422433459, "creation_date": 1422433459, "answer_id": 28187608, "question_id": 28187579, "link": "https://stackoverflow.com/questions/28187579/using-malloc-on-a-elemnt-in-struct-in-c/28187608#28187608", "title": "Using malloc on a elemnt in struct in C", "body": "<p><code>char *task[40];</code> is an array of 40 pointers.  You probably want a single array of 40 characters, in which case no need to malloc it separately, or else a single pointer in which case you can <code>malloc(40)</code>.  You can't call <code>strlen()</code> on an uninitialized C string, that's undefined behavior (buffer overrun).</p>\n"}, {"comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1422433597, "post_id": 28187612, "comment_id": 44743513, "body": "What you&#39;re proposing is undefined behavior!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1422433892, "post_id": 28187612, "comment_id": 44743631, "body": "@JohnZwinck I really appreciate leaving the comment along with the downvote. Can you please elaborate a bit, as i&#39;m not clear on the reason behind undefined behaviour here."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1422433977, "post_id": 28187612, "comment_id": 44743675, "body": "It&#39;s undefined behavior to call <code>strlen(temptask)</code> when <code>temptask</code> is an uninitialized C string.  This UB was in the OP as well.  There&#39;s no need for the <code>temptask</code> variable at all."}, {"owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422434604, "post_id": 28187612, "comment_id": 44743990, "body": "why do i need to write     mon[i]    if month are going to max 12? why is going from 0 to 39?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1422434678, "post_id": 28187612, "comment_id": 44744024, "body": "@JohnZwinck Is it better now?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422434811, "post_id": 28187612, "comment_id": 44744106, "body": "@lili <code>mon[0]</code> will be the first month, <code>mon[1]</code> will be the second and so on. each month will be represented by a structure variable in the array"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "edited": false, "score": 0, "creation_date": 1422436188, "post_id": 28187612, "comment_id": 44744856, "body": "@lili aah, I din&#39;t mean to have to loop for 40 times. for clarification, let&#39;s use <code>j</code> as index to <code>mon</code>. Clear?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1422453906, "last_edit_date": 1422453906, "creation_date": 1422433472, "answer_id": 28187612, "question_id": 28187579, "link": "https://stackoverflow.com/questions/28187579/using-malloc-on-a-elemnt-in-struct-in-c/28187612#28187612", "title": "Using malloc on a elemnt in struct in C", "body": "<p>I think, what you need is </p>\n\n<pre><code>char *task;\n</code></pre>\n\n<p>and then allocate memory as</p>\n\n<pre><code>mon[j].task=malloc(sizeof(temptask));\n</code></pre>\n\n<p>Next, as you've allocated memory to <code>mon</code> as </p>\n\n<pre><code> mon = malloc(12 * sizeof(month));\n</code></pre>\n\n<p>the access should be made as</p>\n\n<pre><code> mon[j].task  // j being the index, running from 0 to 11\n</code></pre>\n\n<p>Otherwise, if you really have a <code>char *task[40];</code>, that means, an array of <code>40</code> <code>char *</code>s, then you have to allocate memory for <em>each of them</em>, one by one.</p>\n\n<pre><code>int p = strlen(temptask);\nfor(i=0;i&lt;40;i++)\n{\n      mon[j].task[i] = malloc(p+1);\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4446866, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/880a0eb2957b29a98d2cb1953e2d0761?s=128&d=identicon&r=PG&f=1", "display_name": "lili", "link": "https://stackoverflow.com/users/4446866/lili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 28187599, "answer_count": 3, "score": 0, "last_activity_date": 1422453906, "creation_date": 1422433342, "last_edit_date": 1422434076, "question_id": 28187579, "link": "https://stackoverflow.com/questions/28187579/using-malloc-on-a-elemnt-in-struct-in-c", "title": "Using malloc on a elemnt in struct in C", "body": "<p>I have this struct:</p>\n\n<pre><code>typedef struct\n{\n    char name[3];\n    int month_num;\n    int day_num;\n    int day_size; // amount of days that are field in with tasks.\n    char *task[40];\n}\n\nmonth; // each month contains a name, its num in the calendar and days.\n</code></pre>\n\n<p>and I need to assign memory allocation for it.\nI was able to assign the memory for the struct itself:</p>\n\n<pre><code>mon = (month*)malloc(12 * sizeof(month));\n</code></pre>\n\n<p>But I am having trouble to do it the same for the char *task[40].</p>\n\n<p>I tried a lot of possibilities, but non of them worked...</p>\n\n<pre><code>char temptask[40];\nmon-&gt;task=malloc(strlen(temptask)+1);\n</code></pre>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422432611, "post_id": 28187414, "comment_id": 44743072, "body": "why there is no return type for functions?"}, {"owner": {"reputation": 101, "user_id": 4428814, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/557012870/picture?type=large", "display_name": "Tommy Yap", "link": "https://stackoverflow.com/users/4428814/tommy-yap"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422432813, "post_id": 28187414, "comment_id": 44743161, "body": "@SouravGhosh sorry i am not very sure too, is my bad to follow blindly but somehow this code running fine for now"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1422434497, "post_id": 28187414, "comment_id": 44743929, "body": "You need to call <code>write</code> in a loop - guess why."}, {"owner": {"reputation": 818, "user_id": 3499764, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ddeb573635f59d364d53c6c6fe865995?s=128&d=identicon&r=PG&f=1", "display_name": "Leviathan", "link": "https://stackoverflow.com/users/3499764/leviathan"}, "edited": false, "score": 0, "creation_date": 1422439731, "post_id": 28187414, "comment_id": 44746863, "body": "I am confused, what are you trying to do? This has nothing to do with socket-programming. And if want to communicate between processes you need IPC-solution e.g. pipes. For communication between sockets you need to use send/sendto and recv/recvfrom depending which protocol type you using."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1422436298, "last_edit_date": 1422436298, "creation_date": 1422432816, "answer_id": 28187460, "question_id": 28187414, "link": "https://stackoverflow.com/questions/28187414/socket-programming-read-write-with-client-server/28187460#28187460", "title": "socket programming read-write with client-server", "body": "<p>Your code is very confusing, however, the answers are.</p>\n\n<ol>\n<li><code>readLine()</code> is <em>actually</em> reading the input from the client using <code>read()</code> and storing that to <code>str</code>, yeah, byte by byte. What <em>else</em> you want to do as <code>read from client input</code>?</li>\n<li>Not clear.</li>\n<li>you cannot compare <em>string</em> using <code>==</code>. Use <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow\"><code>strcmp()</code>/ <code>strncmp()</code></a>.</li>\n</ol>\n\n<p>Note:</p>\n\n<ol>\n<li>Please add the return type of the functions. Don't rely on compiler for what task you're supposed to do.</li>\n<li>while reading from <code>stdin</code>, <code>fgets()</code> reads and stores the last <code>\\n</code>. Take care of that.</li>\n</ol>\n"}], "owner": {"reputation": 101, "user_id": 4428814, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/557012870/picture?type=large", "display_name": "Tommy Yap", "link": "https://stackoverflow.com/users/4428814/tommy-yap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 28187460, "answer_count": 1, "score": 0, "last_activity_date": 1422436298, "creation_date": 1422432552, "question_id": 28187414, "link": "https://stackoverflow.com/questions/28187414/socket-programming-read-write-with-client-server", "title": "socket programming read-write with client-server", "body": "<p>i am new to c program and socket, I am trying to get my concepts right before i start going in deeper. Below are my codes assuming my connection are all done and went into those methods where fd are the clientFd.</p>\n\n<p>Server:</p>\n\n<pre><code>writeSomething (int fd)\n{\n    char str [200];\n\n    while (readLine (fd, str)) \n    printf (\"You have entered - %s\\n\", str);\n}\n\nreadLine (int fd, char* str)\n{\n    int n;\n    do /* Read characters until NULL or end-of-input */\n    {\n        n = read (fd, str, 1); /* Read one character */\n    }\n    while (n &gt; 0 &amp;&amp; *str++ != 0);       \n    return (n &gt; 0); /* Return false if end-of-input */\n}\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>readSomething (int fd)\n{\n    print_intro();\n    char input[200];\n    do {\n        printf (\"Please enter something &gt; \");\n        fgets(input, 200, stdin);\n        if (input == \"end\")\n        {\n            printf (\"*** Thank you for using, have a nice day! ***\");\n            close (fd);\n        } else {\n            write (fd, input, strlen (input) + 1);\n        }\n\n    } while ( input == \"\")\n}\n</code></pre>\n\n<p>My question:\n1)Is that readLine() method really necessary or can i just read from client input and store into the variable 'str'? \n2) If yes how do i store the input into that 'str'?\n3) How do make an infinite loop to prompt input until the user type 'end', my if else doesn't seem to be working? </p>\n\n<p>Sorry for the trouble and thanks.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1422431813, "post_id": 28187221, "comment_id": 44742740, "body": "This will certainly not work if <code>array</code> is a pointer"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1422431925, "post_id": 28187221, "comment_id": 44742790, "body": "Please clarify 1) I don&#39;t know the size of the array 2) doesn&#39;t seem to work correctly"}, {"owner": {"reputation": 839, "user_id": 1477869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ded2654469bf87bc5b4f8b110588e25?s=128&d=identicon&r=PG&f=1", "display_name": "OHHH", "link": "https://stackoverflow.com/users/1477869/ohhh"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422431942, "post_id": 28187221, "comment_id": 44742800, "body": "I added my function."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1422432360, "post_id": 28187221, "comment_id": 44742972, "body": "--&gt; <code>for(i=0; string[i] != &#39;\\0&#39;; i++){</code>"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422432378, "post_id": 28187291, "comment_id": 44742980, "body": "@Gopi Very True, that&#39;s what I added in my answer later."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1422432444, "last_edit_date": 1422432444, "creation_date": 1422432011, "answer_id": 28187291, "question_id": 28187221, "link": "https://stackoverflow.com/questions/28187221/how-to-check-if-an-array-of-characters-is-a-valid-integer-1-in-c/28187291#28187291", "title": "How to check if an array of characters is a valid integer &gt;= 1 in c?", "body": "<p>In your code, <code>string</code> is of type <code>char *</code>. <code>sizeof(string)</code> will give you the size of a <code>char *</code>, not the array.</p>\n\n<p>You need to pass the size of the array explicitly, using another paramter to <code>all_digits()</code> function and use that value in <code>for</code> loop condition checking.</p>\n\n<p>Maybe something like this</p>\n\n<pre><code>int all_digits(char *string, int size){\n\n    short i;\n    for(i=0; i &lt; size; i++){\n\n        if (!isdigit(string[i])){\n            //Non-digit found.\n            return 1;           \n        }\n\n    }\n    //All of them are digits.\n    return 0;\n}\n</code></pre>\n\n<p>Note: Specifically in case of a <code>char *</code>, a better, smaller and cleaner approach to this can be achieved using <code>strlen()</code> [assuming proper aguments passed], which will give you the length of the supplied <em>string</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1422432993, "post_id": 28187307, "comment_id": 44743240, "body": "Unnecessary calculating <code>strlen</code> on each loop iteration. Calculate the length once, then use it: <code>int len=strlen(string); for(i=0; i&lt;len; i++){...}</code> However the test for <code>string[i] != 0</code> is simpler."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1422433064, "post_id": 28187307, "comment_id": 44743268, "body": "@CiaPan Yes you are 100% right. I myslef have suggested the same in many of the answers . Check the edits. Thanks"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 2, "last_activity_date": 1422433331, "last_edit_date": 1422433331, "creation_date": 1422432116, "answer_id": 28187307, "question_id": 28187221, "link": "https://stackoverflow.com/questions/28187221/how-to-check-if-an-array-of-characters-is-a-valid-integer-1-in-c/28187307#28187307", "title": "How to check if an array of characters is a valid integer &gt;= 1 in c?", "body": "<pre><code>int n = strlen(string);\nfor(i=0; i &lt; n; i++)\n</code></pre>\n\n<p><code>sizeof(pointer)</code> is not same as <code>sizeof(array)</code></p>\n\n<p>You need to pass a valid string which is a null terminated string else <code>strlen()</code> might crash.</p>\n\n<p><strong>Edits:</strong></p>\n\n<p>Alternatively you can have</p>\n\n<pre><code>for(i=0; string[i] != '\\0'; i++)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1422432210, "creation_date": 1422432210, "answer_id": 28187336, "question_id": 28187221, "link": "https://stackoverflow.com/questions/28187221/how-to-check-if-an-array-of-characters-is-a-valid-integer-1-in-c/28187336#28187336", "title": "How to check if an array of characters is a valid integer &gt;= 1 in c?", "body": "<p>In this case you cannot get the correct length using the <code>sizeof</code> function.</p>\n\n<p><code>sizeof</code> function will give you the size of the given data type. You can use the\n<code>strlen</code> function.</p>\n\n<p>While using the <code>strlen</code> you have to manage the following,</p>\n\n<p>Consider in your string in last there is no null value you didn't get the correct value of the string length. For this you have to send the size of that array as a another parameter or you have to place the null value in the last value of the a string.</p>\n\n<p>Then you can get that easily. </p>\n"}, {"tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 0, "last_activity_date": 1422433401, "creation_date": 1422433401, "answer_id": 28187593, "question_id": 28187221, "link": "https://stackoverflow.com/questions/28187221/how-to-check-if-an-array-of-characters-is-a-valid-integer-1-in-c/28187593#28187593", "title": "How to check if an array of characters is a valid integer &gt;= 1 in c?", "body": "<p>Simply iterate along the string, testing every character:</p>\n\n<pre><code>int all_digits(char *string){\n    if( *string == 0)              // empty string - wrong\n         return 1;\n\n    for( ; *string != 0; string++) // scan the string till its end (a zero byte (char)0)\n        if (!isdigit(*string))     // test for a digit\n            return 1;              // not a digit - return\n\n    return 0;                      // all characters are digits\n}\n</code></pre>\n\n<p>However that only tests if the string consists of digits and does not make you any closer to determining its numerical value...</p>\n"}], "owner": {"reputation": 839, "user_id": 1477869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ded2654469bf87bc5b4f8b110588e25?s=128&d=identicon&r=PG&f=1", "display_name": "OHHH", "link": "https://stackoverflow.com/users/1477869/ohhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 28187307, "answer_count": 4, "score": -2, "last_activity_date": 1422433401, "creation_date": 1422431749, "question_id": 28187221, "link": "https://stackoverflow.com/questions/28187221/how-to-check-if-an-array-of-characters-is-a-valid-integer-1-in-c", "title": "How to check if an array of characters is a valid integer &gt;= 1 in c?", "body": "<p>I don't know the size of the array and using isdigit(array[i]) for every element i &lt; sizeof(array) doesn't seem to work correctly.</p>\n\n<p>I am trying to:</p>\n\n<p>Check that every char is a digit.</p>\n\n<p>Convert the string to int.</p>\n\n<p>Check that it is > 0</p>\n\n<pre><code>int all_digits(char *string){\n\n    short i;\n    for(i=0; i &lt; sizeof(string); i++){\n\n        if (!isdigit(string[i])){\n            //Non-digit found.\n            return 1;           \n        }\n\n    }\n    //All of them are digits.\n    return 0;\n}\n</code></pre>\n\n<p>The first part is the one that I can't get.</p>\n"}, {"tags": ["objective-c", "c", "c-preprocessor"], "comments": [{"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422431453, "post_id": 28186684, "comment_id": 44742577, "body": "@Lundin if you read the OP, it&#39;d tell you."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422431578, "post_id": 28186684, "comment_id": 44742639, "body": "The C11 tag should be used for questions that use features that are specific to the C11 standard, which is not the case here. If you read the tag wiki, it&#39;d tell you."}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422431620, "post_id": 28186684, "comment_id": 44742655, "body": "@Lundin I&#39;m well aware of how tags work. I&#39;m compiling against the C11 standard. After the answer, it is clear it is not a C11 issue. However, when I asked I didn&#39;t know if C11 had changed how macros worked. It was pertinent to the question at the time. You&#39;re welcome to search Meta regarding C/C++ related &#39;tag-nazi&#39; discussions."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422431754, "post_id": 28186684, "comment_id": 44742714, "body": "You could always just remote the tag from your post instead of leaving snide comments. It is not the end of the world."}, {"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1422431782, "post_id": 28186684, "comment_id": 44742729, "body": "@Lundin and if you looked at the OP, you would have seen that I did. Thank you for your concern."}], "answers": [{"comments": [{"owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "edited": false, "score": 1, "creation_date": 1422429948, "post_id": 28186766, "comment_id": 44742006, "body": "Aha! Learn something new every day. That fixed it; will accept in 8 minutes."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1422432765, "post_id": 28186766, "comment_id": 44743140, "body": "No need for the <code>0</code>, a simple <code>;</code> would do, too."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 5, "last_activity_date": 1422429842, "last_edit_date": 1495542511, "creation_date": 1422429842, "answer_id": 28186766, "question_id": 28186684, "link": "https://stackoverflow.com/questions/28186684/can-macros-accept-types/28186766#28186766", "title": "Can macros accept types?", "body": "<p>Your understanding is correct! But you're running into a quirk of the C language. <a href=\"https://stackoverflow.com/a/1231209/149341\">A label, including a <code>case</code> label, must be followed by an expression, not a variable declaration.</a></p>\n\n<p>You can work around this by inserting a null statement (e.g, <code>0;</code>) after the <code>case</code>, or by enclosing the <code>case</code> body in a set of braces. A practical way of doing this might be by redefining <code>CHECK</code> as:</p>\n\n<pre><code>#define CHECK(chr, type, fn) \\\n    case chr: { SET(type,fn); } break;\n</code></pre>\n"}], "owner": {"reputation": 12040, "user_id": 510036, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b7c510641e6526d19abc93e866e75ac8?s=128&d=identicon&r=PG", "display_name": "Qix - MONICA WAS MISTREATED", "link": "https://stackoverflow.com/users/510036/qix-monica-was-mistreated"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 28186766, "answer_count": 1, "score": 3, "last_activity_date": 1422431649, "creation_date": 1422429517, "last_edit_date": 1422431649, "question_id": 28186684, "link": "https://stackoverflow.com/questions/28186684/can-macros-accept-types", "title": "Can macros accept types?", "body": "<p>Unless my understanding is incorrect, the following macro</p>\n\n<pre><code>int i; // for loop\nconst char* ctype; // proprietary type string\nvoid** pool = malloc(sizeof(void*) * (nexpected - 1));\nsize_t poolc = 0;\n\n#define SET(type, fn) type* v = (pool[poolc++] = malloc(sizeof(type)));         \\\n    *v = (type) fn(L, i)\n#define CHECK(chr, type, fn) case chr:                                          \\\n    SET(type, fn);                                                              \\\n    break\n\nswitch (ctype[0]) {\n  CHECK('c', char, lua_tonumber);\n}\n</code></pre>\n\n<p>should expand to</p>\n\n<pre><code>int i; // for loop\nconst char* ctype; // proprietary type string\nvoid** pool = malloc(sizeof(void*) * (nexpected - 1));\nsize_t poolc = 0;\n\nswitch (ctype[0]) {\n  case 'c':\n    char* v = (pool[poolc++] = malloc(sizeof(char)));\n    *v = (char) lua_tonumber(L, i);\n    break;\n}\n</code></pre>\n\n<p>but upon compilation, I get:</p>\n\n<pre><code>src/lua/snip.m:185:16: error: expected expression\n    CHECK('c', char, lua_tonumber);\n               ^\nsrc/lua/snip.m:181:9: note: expanded from macro 'CHECK'\n    SET(type, fn);                                                              \\\n        ^\nsrc/lua/snip.m:178:23: note: expanded from macro 'SET'\n#define SET(type, fn) type* v = (pool[poolc++] = malloc(sizeof(type)));         \\\n                      ^\nsrc/lua/snip.m:185:5: error: use of undeclared identifier 'v'\n    CHECK('c', char, lua_tonumber);\n    ^\nsrc/lua/snip.m:181:5: note: expanded from macro 'CHECK'\n    SET(type, fn);                                                              \\\n    ^\nsrc/lua/snip.m:179:6: note: expanded from macro 'SET'\n    *v = (type) fn(L, i)\n     ^\n2 errors generated.\n</code></pre>\n\n<p>What is going on here? Isn't the preprocessor a literal text replacement engine? Why is it trying to evaluate expressions?</p>\n\n<p>Keep in mind while this looks like straight C, this is actually clang Objective C (note the <code>.m</code>) under the C11 standard. Not sure if that makes any difference.</p>\n\n<p>I'm a loss at how to continue without expanding the code for each entry.</p>\n"}, {"tags": ["c", "padding", "armcc"], "comments": [{"owner": {"reputation": 2415, "user_id": 3265278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/989ab16ec9748599e26320a635757036?s=128&d=identicon&r=PG&f=1", "display_name": "TNA", "link": "https://stackoverflow.com/users/3265278/tna"}, "edited": false, "score": 1, "creation_date": 1422429055, "post_id": 28186492, "comment_id": 44741597, "body": "It is important to mention that this is not standard C++ but a compiler specific extension."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1422429103, "post_id": 28186492, "comment_id": 44741620, "body": "This usage is actually specific to ARM (and, in fact, to a specific ARM C compiler). I&#39;ve edited the tags to reflect this."}, {"owner": {"reputation": 10188, "user_id": 220386, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Ggig2.png?s=128&g=1", "display_name": "manav m-n", "link": "https://stackoverflow.com/users/220386/manav-m-n"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1422429173, "post_id": 28186492, "comment_id": 44741648, "body": "@duskwuff why is it specific to <code>arm</code>, it can be the case with any processor with supports unaligned memory access."}, {"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1422472797, "post_id": 28186492, "comment_id": 44767367, "body": "I edited the tag to &#39;armcc&#39; ; at least include that one.  Especially, there are macros/extensions like <code>__packed</code> for other systems.  It is nice to be up front this question deals with armcc.  I found the tag [arm] misleading, but you can add it back."}], "answers": [{"comments": [{"owner": {"reputation": 10188, "user_id": 220386, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Ggig2.png?s=128&g=1", "display_name": "manav m-n", "link": "https://stackoverflow.com/users/220386/manav-m-n"}, "edited": false, "score": 0, "creation_date": 1422433269, "post_id": 28186629, "comment_id": 44743371, "body": "We can also use the functions <code>get_unaligned()</code> and <code>put_unaligned()</code> for doing unaligned reads and writes."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 6, "last_activity_date": 1422429332, "creation_date": 1422429332, "answer_id": 28186629, "question_id": 28186492, "link": "https://stackoverflow.com/questions/28186492/what-is-the-use-of-packed-attribute-in-function-arguments/28186629#28186629", "title": "What is the use of __packed attribute in function arguments", "body": "<p>The <code>__packed</code> qualifier is a compiler-specific feature of the <code>armcc</code> C compiler, published by ARM. <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491e/CJAFJHJD.html\" rel=\"noreferrer\">A full explanation is present in their documentation</a>, but in brief, it indicates that no padding for alignment should be inserted into the qualified object, and that pointers with this qualifier should be accessed as if they might be misaligned. (This may cause slower code to be generated for some processors, so it should not be used gratuitously.)</p>\n\n<p>Note that this is <em>not</em> the same as the GCC <code>packed</code> attribute, which only applies to <code>struct</code> and <code>union</code> type definitions.</p>\n"}], "owner": {"reputation": 10188, "user_id": 220386, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Ggig2.png?s=128&g=1", "display_name": "manav m-n", "link": "https://stackoverflow.com/users/220386/manav-m-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 1, "accepted_answer_id": 28186629, "answer_count": 1, "score": 3, "last_activity_date": 1422472495, "creation_date": 1422428759, "last_edit_date": 1422472495, "question_id": 28186492, "link": "https://stackoverflow.com/questions/28186492/what-is-the-use-of-packed-attribute-in-function-arguments", "title": "What is the use of __packed attribute in function arguments", "body": "<pre><code>int readint(__packed int *data)\n{\n    return *data;\n}\n</code></pre>\n\n<p>I have seen <code>__packed</code> attribute in <code>struct</code> declarations to avoid padding. However, what is the benefit of using <code>__packed</code> attribute in function arguments. </p>\n\n<p>The <a href=\"https://rads.stackoverflow.com/amzn/click/com/1558608745\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">author</a> says that he has used <code>__packed</code> to tell the compiler that the integer may possibly not be aligned. What does it means?</p>\n\n<p><strong>Edit:</strong> Will the following work with <code>gcc</code> compiler</p>\n\n<pre><code>int readint(__attribute__((packed)) int *data)\n{\n    return *data;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "fread"], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "is_accepted": false, "score": 1, "last_activity_date": 1422424973, "creation_date": 1422424973, "answer_id": 28185704, "question_id": 28185644, "link": "https://stackoverflow.com/questions/28185644/behaviour-of-fread-for-empty-0kb-files/28185704#28185704", "title": "behaviour of fread for empty (0kb) files", "body": "<p>No fread does <strong>not</strong> fail for empty files. <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fread.html#tag_03_185_04\" rel=\"nofollow\">Source</a>.</p>\n\n<p>As already pointed out by others the error has nothing to do with the function itself.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422426559, "post_id": 28185712, "comment_id": 44740606, "body": "Sir, thank you for the clarification. I have a small inked query. in section 7.19.8.1 of c99, i see nothing is  specified when <code>stream</code> is <i>invalid</i> or NULL. Am i missing something or do i need to look somewhere else?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422427315, "post_id": 28185712, "comment_id": 44740891, "body": "@SouravGhosh: No, you have the right place.  I&#39;ll expand the answer a little bit rather than try to cram it into a comment."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422427627, "post_id": 28185712, "comment_id": 44741005, "body": "Thank you sir, but still, no mention about the behaviour of the function <i>if</i> NULL is passed. Where do I refer to support my <a href=\"http://stackoverflow.com/a/28185717/2173917\">answer</a> below, specifically the <i>undefined behaviour</i> part, or shall I remove that part?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422427928, "post_id": 28185712, "comment_id": 44741122, "body": "@SouravGhosh: Refer to appendix J, &quot;undefined behavior&quot;."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1422428299, "post_id": 28185712, "comment_id": 44741273, "body": "Right. This is what I was looking for. :-)"}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 6, "last_activity_date": 1422427903, "last_edit_date": 1422427903, "creation_date": 1422425014, "answer_id": 28185712, "question_id": 28185644, "link": "https://stackoverflow.com/questions/28185644/behaviour-of-fread-for-empty-0kb-files/28185712#28185712", "title": "behaviour of fread for empty (0kb) files", "body": "<p>What should happen, if the program works, is this:</p>\n\n<pre>\n1\n2\n3\ni = 0\n</pre>\n\n<p>When <code>fread()</code> fails, it <em>should</em> return 0 (or a number smaller than the requested number of items).  However, this does not happen.  This is probably because <code>fp</code> is null.  You are not allowed to pass a null parameter to <code>fread()</code>.  Probably, <code>fp</code> is null because <code>/home/amadhab/aa</code> does not exist.  Try using this to open the file instead:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n\nfp = fopen(\"/home/amadhab/aa\", \"r+\");\nassert(fp != NULL);\n</code></pre>\n\n<p>Or, for more information,</p>\n\n<pre><code>#include &lt;err.h&gt;\n\nconst char *fname = \"/home/amadhab/aa\";\nfp = fopen(fname, \"r+\");\nif (!fp)\n    err(1, \"%s\", fname)\n</code></pre>\n\n<p>Note that the <code>err()</code> function is a BSD extension, but you can use <code>strerror()</code> or <code>perror()</code> on other systems if portability is a concern.</p>\n\n<h2>The standard</h2>\n\n<p>From n1516 section 7.21.8.1:</p>\n\n<blockquote>\n  <p>The <code>fread</code> function reads, into the array pointed to by <code>ptr</code>, up to <code>nmemb</code> elements whose size is specified by <code>size</code>, from the stream pointed to by <code>stream</code>.</p>\n</blockquote>\n\n<p>Note that <code>NULL</code> does not point to a stream, so by passing <code>NULL</code> you are violating a precondition of the <code>fread()</code> function.  This is explicitly spelled out in section 7.1.4:</p>\n\n<blockquote>\n  <p>If an argument to a [library] function has an invalid value (such as [...] a null pointer [...]) [...], the behavior is undefined.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1422428929, "last_edit_date": 1422428929, "creation_date": 1422425042, "answer_id": 28185717, "question_id": 28185644, "link": "https://stackoverflow.com/questions/28185644/behaviour-of-fread-for-empty-0kb-files/28185717#28185717", "title": "behaviour of fread for empty (0kb) files", "body": "<p>In your code</p>\n\n<pre><code>fp = fopen(\"/home/amadhab/aa\", \"r+\");\n</code></pre>\n\n<p>there is no success check for <code>fopen()</code> return value. if <code>fopen()</code> fails, it will return NULL (which get collected in <code>fp</code>) and the subsequent usage of the variable <code>fp</code> which was used to collect the return value will lead to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a> <sup>Note</sup>. That is what is happening in</p>\n\n<pre><code>fread(buffer, 1, 1, fp);  // note the usage of fp here\n</code></pre>\n\n<p>causing the segmentation fault.</p>\n\n<p>To avoid this, you should immediately check the return value of <code>fopen()</code> and if it fails, you should avoid accessing <code>fp</code>.</p>\n\n<p>Note: Just a suggestion, learn to use a debugger [like <code>gdb</code> on linux] and step through your application. Most of the time, it <em>will</em> pinpoint the exact issue.</p>\n\n<hr>\n\n<p>Note: Refer Annex J, <code>C99</code>, as a reason behind undefined behaviour, </p>\n\n<blockquote>\n  <p>An argument to a library function has an invalid value or a type not expected by a function with variable number of arguments (7.1.4).</p>\n</blockquote>\n\n<p>And, NULL is <em>considered</em> invalid value for a <code>FILE *</code> to be passed to <code>fread()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1422425992, "post_id": 28185786, "comment_id": 44740404, "body": "I wojuld call <code>perror</code> then <code>exit</code> on failure of <code>fopen</code>"}, {"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422426660, "post_id": 28185786, "comment_id": 44740643, "body": "@BasileStarynkevitch Yeah! I changed  that. Thanks for your suggestion."}], "tags": [], "owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1422426576, "last_edit_date": 1422426576, "creation_date": 1422425407, "answer_id": 28185786, "question_id": 28185644, "link": "https://stackoverflow.com/questions/28185644/behaviour-of-fread-for-empty-0kb-files/28185786#28185786", "title": "behaviour of fread for empty (0kb) files", "body": "<p>Fread does not fail while reading the empty file. You didn't check the stream open\nthat is opened correctly. </p>\n\n<pre><code>fp = fopen(\"/home/amadhab/aa\", \"r+\"); \n</code></pre>\n\n<p>In this case, if the open of that file is failed. Now the fp have the value as NULL.</p>\n\n<pre><code>i = fread(buffer, 1, 1, fp);\n</code></pre>\n\n<p>Now you are accessing the <code>NULL</code> File Stream. This is the reason for segmentation fault. To avoid this you have to check the condition.</p>\n\n<pre><code>if ( ( fp = fopen(\"/home/amadhab/aa\", \"r+\") ) == NULL  ){\n            perror(\"fopen\");\n            exit(5);\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4501563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6361e94db1e48188131a4b7c991af32?s=128&d=identicon&r=PG&f=1", "display_name": "anandmadhab", "link": "https://stackoverflow.com/users/4501563/anandmadhab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 1, "accepted_answer_id": 28185712, "answer_count": 4, "score": 2, "last_activity_date": 1422428929, "creation_date": 1422424719, "last_edit_date": 1422426612, "question_id": 28185644, "link": "https://stackoverflow.com/questions/28185644/behaviour-of-fread-for-empty-0kb-files", "title": "behaviour of fread for empty (0kb) files", "body": "<p>Here is sample code which gives segmentation fault while reading empty file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    FILE *fp;\n    int i = 0;\n    char buffer[20];\n\n    printf(\"1\\n\");\n    fp = fopen(\"/home/amadhab/aa\", \"r+\");\n    printf(\"2\\n\");\n    i = fread(buffer, 1, 1, fp);\n    printf(\"3\\n\");\n    printf(\"i = %d\\n\", i);\n}\n</code></pre>\n\n<p>Gives o/p as </p>\n\n<pre><code>1\n2\nSegmentation fault\n</code></pre>\n\n<p>Does <code>fread()</code> fails to read an empty (0KB)file?.</p>\n"}, {"tags": ["c", "arrays", "file-io", "buffer"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1429607812, "post_id": 28185608, "comment_id": 47666539, "body": "before accessing anything beyond argv[0], the argc needs to be checked to assure such parameter (as would be in argv[1]) actually exists."}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1422424776, "post_id": 28185653, "comment_id": 44739961, "body": "Opening the file in rb mode to write?"}, {"owner": {"reputation": 11, "user_id": 4501537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8d60edcf8343814cd3c89d970f47c6?s=128&d=identicon&r=PG&f=1", "display_name": "michael", "link": "https://stackoverflow.com/users/4501537/michael"}, "edited": false, "score": 0, "creation_date": 1422425301, "post_id": 28185653, "comment_id": 44740152, "body": "you are my savior. i cant believe i waste 12 hours to find out that i opened the file using rb not wb. im literrally crying right now here is my webcam image <a href=\"http://i.imgur.com/JdQUNO8.png\" rel=\"nofollow noreferrer\">i.imgur.com/JdQUNO8.png</a>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11, "user_id": 4501537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8d60edcf8343814cd3c89d970f47c6?s=128&d=identicon&r=PG&f=1", "display_name": "michael", "link": "https://stackoverflow.com/users/4501537/michael"}, "edited": false, "score": 2, "creation_date": 1422463978, "post_id": 28185653, "comment_id": 44762170, "body": "@michael: That&#39;s why <b>one shall always test</b> the outcome of (system) calls which&#39;s result(s) will be used by the following code. Never skip a man-page&#39;s &quot;<b><i>RETURN VALUE</i></b>&quot; and &quot;<b><i>ERRORS</i></b>&quot; section."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1422468500, "last_edit_date": 1422468500, "creation_date": 1422424735, "answer_id": 28185653, "question_id": 28185608, "link": "https://stackoverflow.com/questions/28185608/c-program-terminates-when-doing-fwrite/28185653#28185653", "title": "C program terminates when doing fwrite", "body": "<p>You forgot to test the failure of <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow\"><code>fopen</code></a> like:</p>\n\n<pre><code>finalFile = fopen(\"new.wav\", \"wb\");\nif (!finalFile) { perror(\"new.wav\"); exit(EXIT_FAILURE); }\n</code></pre>\n\n<p><sup>And if you write a file, open it in write mode.</sup></p>\n\n<p>You should of course compile with all warnings &amp; debug info: </p>\n\n<pre><code>gcc -Wall -Wextra -g yoursource.c -o yourbinary\n</code></pre>\n\n<p>and use the debugger (<code>gdb</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 3, "last_activity_date": 1422432167, "last_edit_date": 1422432167, "creation_date": 1422428376, "answer_id": 28186418, "question_id": 28185608, "link": "https://stackoverflow.com/questions/28185608/c-program-terminates-when-doing-fwrite/28186418#28186418", "title": "C program terminates when doing fwrite", "body": "<p>You just opened write file in \"rb\" mode. </p>\n\n<pre><code>finalFile = fopen(\"new.wav\", \"rb\");\n</code></pre>\n\n<p>Please try </p>\n\n<pre><code>finalFile = fopen(\"new.wav\", \"wb\");\n</code></pre>\n\n<p>and check </p>\n\n<pre><code>finalFile==NULL\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "edited": false, "score": 0, "creation_date": 1429600737, "post_id": 29765328, "comment_id": 47662167, "body": "your answer is just similar to other answers... Please try to answer un answered questions. Or sent different answer."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4813548"}, "is_accepted": false, "score": 2, "last_activity_date": 1429600361, "creation_date": 1429600361, "answer_id": 29765328, "question_id": 28185608, "link": "https://stackoverflow.com/questions/28185608/c-program-terminates-when-doing-fwrite/29765328#29765328", "title": "C program terminates when doing fwrite", "body": "<p>Please open file in Write mode , Like \"wb\"</p>\n\n<pre><code>finalFile = fopen(\"new.wav\", \"wb\");\n</code></pre>\n\n<p>then you have to check the return values</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4817407"}, "is_accepted": false, "score": 1, "last_activity_date": 1429672095, "last_edit_date": 1429672095, "creation_date": 1429671582, "answer_id": 29786934, "question_id": 28185608, "link": "https://stackoverflow.com/questions/28185608/c-program-terminates-when-doing-fwrite/29786934#29786934", "title": "C program terminates when doing fwrite", "body": "<p>You opened file in read mode. That's why this issue happened, per the <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow\">man page of fopen</a>. Please try write mode.</p>\n"}], "owner": {"reputation": 11, "user_id": 4501537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8d60edcf8343814cd3c89d970f47c6?s=128&d=identicon&r=PG&f=1", "display_name": "michael", "link": "https://stackoverflow.com/users/4501537/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1429672095, "creation_date": 1422424569, "question_id": 28185608, "link": "https://stackoverflow.com/questions/28185608/c-program-terminates-when-doing-fwrite", "title": "C program terminates when doing fwrite", "body": "<p>So in this code what im trying to do is read the initial 44 bytes from a wave file put to a new file then calculate combination by using a sequence of left-right shorts</p>\n\n<p>new file : (intial 44bytes - combination - combination - combination...) but it stops when I try to call fwrite.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]) {\n    FILE * firstFile;\n    FILE * finalFile;\n    size_t size;\n    char *buffer;\n    short left;\n    short right;\n    short combination;\n    int loop;\n\n    printf(\"%s\", argv[1]);\n    if ((firstFile = fopen(\"test.wav\", \"rb\")) == NULL) {\n        printf(\"File error\");\n        exit(1);\n    }\n\n    fseek(firstFile, 0, SEEK_END);\n\n    size = ftell(firstFile);\n\n    fseek(firstFile, 0, SEEK_SET);\n\n    buffer = malloc(44);\n    fread(buffer, 1, 44, firstFile);\n\n    finalFile = fopen(\"new.wav\", \"rb\");\n    fwrite(&amp;buffer, sizeof(buffer), 1, finalFile);\n    loop = 1;\n\n    while (loop == 1) {\n        fread(&amp;left, sizeof(short), 1, firstFile);\n        if (fread(&amp;right, sizeof(short), 1, firstFile) == 0) {\n            loop = 0;\n        }\n\n        combination = (left - right) / 2;\n        fwrite(&amp;combination, sizeof(short), 1, finalFile);\n    }\n\n    fclose(firstFile);\n    fclose(finalFile);\n    free(buffer);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "gcc", "gdb"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1422425310, "post_id": 28185599, "comment_id": 44740157, "body": "You should upgrade your  <a href=\"http://www.gnu.org/software/gdb/\" rel=\"nofollow noreferrer\">gdb</a>. Its current version is 7.8.2, and recent <code>gcc</code> are wanting recent <code>gdb</code>"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 1, "creation_date": 1422434143, "post_id": 28185599, "comment_id": 44743764, "body": "Have you tried <code>gdb .&#47;simapp</code> ? What is output of <code>file .&#47;simapp</code> ?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1422435535, "post_id": 28185599, "comment_id": 44744476, "body": "I agree with Basile - &quot;gdb doesn&#39;t understand [all of] your executable&quot;, and a newer gdb would solve the problem."}, {"owner": {"reputation": 2406, "user_id": 221802, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/30750dfdd4d7294dae9e4268e669cd5f?s=128&d=identicon&r=PG", "display_name": "peter karasev", "link": "https://stackoverflow.com/users/221802/peter-karasev"}, "edited": false, "score": 0, "creation_date": 1422453970, "post_id": 28185599, "comment_id": 44755305, "body": "Nope, but that was certainly a good idea:  GNU gdb (GDB) 7.8.2 Copyright (C) 2014 Free Software Foundation, Inc. This GDB was configured as &quot;x86_64-unknown-linux-gnu&quot;. Type &quot;show configuration&quot; for configuration details.. &lt;<a href=\"http://www.gnu.org/software/gdb/documentation/\" rel=\"nofollow noreferrer\">gnu.org/software/gdb/documentation</a>&gt;. For help, type &quot;help&quot;. Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;... &quot;opt/path/bin/simapp&quot;: not in executable format: File format not recognized (gdb)   Note: I realized this executable is ~800MB; is there a size limit?"}, {"owner": {"reputation": 2406, "user_id": 221802, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/30750dfdd4d7294dae9e4268e669cd5f?s=128&d=identicon&r=PG", "display_name": "peter karasev", "link": "https://stackoverflow.com/users/221802/peter-karasev"}, "edited": false, "score": 0, "creation_date": 1422454097, "post_id": 28185599, "comment_id": 44755394, "body": "file ./simapp is questionable:  $file ./simapp ./simapp: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), stripped  $file ./simgui ./simgui: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.9, not stripped"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1422454243, "post_id": 28185599, "comment_id": 44755501, "body": "You could try compiling with <code>gcc -gdwarf-2</code> for more compatibility with older gdb."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1422483530, "post_id": 28185599, "comment_id": 44773036, "body": "what command line did you use to compile the simapp file?  did you use the -g and -gdb compile/link parameters?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1422483743, "post_id": 28185599, "comment_id": 44773133, "body": "perhaps I&#39;m misunderstanding something, but why is the OP comment discussing file simgui rather than file simapp?"}, {"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "edited": false, "score": 0, "creation_date": 1422730092, "post_id": 28185599, "comment_id": 44868791, "body": "If I were trying to debug this I would try building an even more recent (perhaps git master) gdb and use --enable-targets=all.  I&#39;d also try it on a trivial test program compiled with the same compiler; and if that failed, I would file a bug report."}], "owner": {"reputation": 2406, "user_id": 221802, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/30750dfdd4d7294dae9e4268e669cd5f?s=128&d=identicon&r=PG", "display_name": "peter karasev", "link": "https://stackoverflow.com/users/221802/peter-karasev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422454031, "creation_date": 1422424529, "last_edit_date": 1422454031, "question_id": 28185599, "link": "https://stackoverflow.com/questions/28185599/compiling-with-gcc-4-9-2-strange-error-about-not-in-executable-format", "title": "compiling with gcc 4.9.2 , strange error about &quot;not in executable format&quot;", "body": "<p>When using gcc4.9.2 to compile an app, I get a strange error when attempting to debug with gdb. Although I can run the executable OK: </p>\n\n<pre><code>$./simapp --help\n\nChecking for design variables is enabled.\nQuick simplification of expressions is enabled.    \nIn expressions, the replacement of references by their values is enabled.    \nUsage: simapp [options] [-r rawfile] [inputfile]\n\nOptions:\n    -h             List devices and analyses.\n    .............................\n</code></pre>\n\n<p>But, attempting to run through gdb gives an error about not being in executable format... why? </p>\n\n<pre><code>$gdb simapp\nGNU gdb (GDB) Red Hat Enterprise Linux (7.2-75.el6)\nCopyright (C) 2010 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-redhat-linux-gnu\".\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;...\n\"/home/build/64bitdebug/bin/simapp\": not in executable format: File format not recognized\n(gdb)\n</code></pre>\n\n<p>What's wrong with the format? Here are a few possibly relevant lines from \"ldd simapp\":</p>\n\n<pre><code>libstdc++.so.6 =&gt; /opt/gcc/4.9.2_rebld/lib64/libstdc++.so.6 (0x00007f4c8f119000)\n        libm.so.6 =&gt; /lib64/libm.so.6 (0x0000003e9c200000)\n        libgcc_s.so.1 =&gt; /opt/gcc/4.9.2_rebld/lib64/libgcc_s.so.1 (0x00007f4c8ef02000)\n        libc.so.6 =&gt; /lib64/libc.so.6 (0x0000003e9be00000)\n</code></pre>\n\n<p>Edit Note: I realized this executable is ~800MB; is there some kind of size limit on the executable? </p>\n"}, {"tags": ["c", "contiki", "iot"], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 4485457, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0f0cf070d0afb066ccf49dafa976c993?s=128&d=identicon&r=PG&f=1", "display_name": "sagar", "link": "https://stackoverflow.com/users/4485457/sagar"}, "edited": false, "score": 0, "creation_date": 1422555924, "post_id": 28210454, "comment_id": 44806821, "body": "thanks man i got idea i try it myself and give back comment whether i m on track or not.."}, {"owner": {"reputation": 76, "user_id": 4485457, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0f0cf070d0afb066ccf49dafa976c993?s=128&d=identicon&r=PG&f=1", "display_name": "sagar", "link": "https://stackoverflow.com/users/4485457/sagar"}, "edited": false, "score": 0, "creation_date": 1422639007, "post_id": 28210454, "comment_id": 44843771, "body": "Thanks you save my time. Now I want to retrieve / capture data (any yhing temp / humid or any word) from one node but from different sources, because my task is related to DoS attack identification."}, {"owner": {"reputation": 76, "user_id": 4485457, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0f0cf070d0afb066ccf49dafa976c993?s=128&d=identicon&r=PG&f=1", "display_name": "sagar", "link": "https://stackoverflow.com/users/4485457/sagar"}, "edited": false, "score": 0, "creation_date": 1422898287, "post_id": 28210454, "comment_id": 44920831, "body": "I have 1 RaspberyPi board and 1 ARM7 is it helping me anyhow for this?? but i dont have any motes"}], "tags": [], "owner": {"reputation": 487, "user_id": 2165027, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9z8QN.jpg?s=128&g=1", "display_name": "Darko P.", "link": "https://stackoverflow.com/users/2165027/darko-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1422521527, "creation_date": 1422521527, "answer_id": 28210454, "question_id": 28185590, "link": "https://stackoverflow.com/questions/28185590/which-files-i-should-refer-for-simulation-in-contiki/28210454#28210454", "title": "Which files i should refer for simulation in contiki", "body": "<p>For the border-router look in <code>examples\\ipv6\\rpl-border-router</code> and for your nodes in <code>examples\\ipv6\\rpl-udp</code>. Then run the <code>tools\\tunslip6</code> on your linux machine connected to the border-router through usb. </p>\n\n<p>Have a look <a href=\"http://anrg.usc.edu/contiki/index.php/RPL_Border_Router\" rel=\"nofollow\">here</a>. </p>\n"}], "owner": {"reputation": 76, "user_id": 4485457, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0f0cf070d0afb066ccf49dafa976c993?s=128&d=identicon&r=PG&f=1", "display_name": "sagar", "link": "https://stackoverflow.com/users/4485457/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 28210454, "answer_count": 1, "score": 0, "last_activity_date": 1422521527, "creation_date": 1422424477, "question_id": 28185590, "link": "https://stackoverflow.com/questions/28185590/which-files-i-should-refer-for-simulation-in-contiki", "title": "Which files i should refer for simulation in contiki", "body": "<p>I am working on contiki as my academic work, now i have question which file i should refer specificaly from example folder in contiki for simulating schenario like - 30 node iot having ipv6 node , all these node send data to master / gateway node whenever any request come from outside that is from native linux host machine. So communication series is like any host outside IoT request some data from any of 30 IoT nodes via Gateway node/Border Router.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422424486, "post_id": 28185512, "comment_id": 44739858, "body": "You should test <code>argc</code> and you could do a loop <code>(for int argix=1; argix&lt;argc; argix++)</code>"}, {"owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "edited": false, "score": 1, "creation_date": 1422424509, "post_id": 28185512, "comment_id": 44739862, "body": "35055 + 50 =35105 not <code>36005</code>"}, {"owner": {"reputation": 957, "user_id": 4197697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa54343c1708ca1bc987888cb121e49b?s=128&d=identicon&r=PG&f=1", "display_name": "softwarenewbie7331", "link": "https://stackoverflow.com/users/4197697/softwarenewbie7331"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1422426535, "post_id": 28185512, "comment_id": 44740599, "body": "@BasileStarynkevitch not sure what you&#39;re trying to do with that loop but argc is the number of arguments and his input is (start, step, end) not three values"}, {"owner": {"reputation": 12666, "user_id": 49329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cd991227ac34793b8bae42972cbb03d6?s=128&d=identicon&r=PG", "display_name": "Don Reba", "link": "https://stackoverflow.com/users/49329/don-reba"}, "edited": false, "score": 0, "creation_date": 1422427251, "post_id": 28185512, "comment_id": 44740863, "body": "Source code is uncountable and does not allow an indefinite article, btw."}, {"owner": {"reputation": 4084, "user_id": 2425232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W0wq4.jpg?s=128&g=1", "display_name": "Henrik", "link": "https://stackoverflow.com/users/2425232/henrik"}, "edited": false, "score": 0, "creation_date": 1422427952, "post_id": 28185512, "comment_id": 44741133, "body": "This is not a good question. In fact, it&#39;s barely a question. This is not a forum where people will do your programming for you. When you have given it a try, searched around and maybe read a book/tutorial on basic C-programming, <a href=\"http://stackoverflow.com/help/how-to-ask\">this</a> is a good place to find out how to ask a good question."}], "answers": [{"tags": [], "owner": {"reputation": 5767, "user_id": 2259878, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e520af219aea39f7c5ea9722e8116b92?s=128&d=identicon&r=PG", "display_name": "uncletall", "link": "https://stackoverflow.com/users/2259878/uncletall"}, "is_accepted": false, "score": 0, "last_activity_date": 1422427040, "creation_date": 1422427040, "answer_id": 28186116, "question_id": 28185512, "link": "https://stackoverflow.com/questions/28185512/how-to-change-pass-some-integer-value-in-steps-of-50-to-a-c-code/28186116#28186116", "title": "How to change pass some integer value in steps of 50 to a C++ code", "body": "<p>You need to parse 3 arguments, not just one.</p>\n\n<pre><code>int main(int argc, char *argv[] )\n{\n   int start = atoi(argv[1]);  // 35005\n   int interval = atoi(argv[2]); // 50\n   int end = atoi(argv[3]); // 36005\n</code></pre>\n\n<p>Ofcourse, you should also check that <code>argc</code> to make sure you have enough arguments</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 2864439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d08d0ac7b93bd7e028973b028e727bf?s=128&d=identicon&r=PG&f=1", "display_name": "tetorea", "link": "https://stackoverflow.com/users/2864439/tetorea"}, "is_accepted": false, "score": 0, "last_activity_date": 1422427605, "creation_date": 1422427605, "answer_id": 28186230, "question_id": 28185512, "link": "https://stackoverflow.com/questions/28185512/how-to-change-pass-some-integer-value-in-steps-of-50-to-a-c-code/28186230#28186230", "title": "How to change pass some integer value in steps of 50 to a C++ code", "body": "<p>If I understand well, your program takes 3 arguments : start value, increment and end value.<br/>\nSo:</p>\n\n<pre><code>if( argc &gt;= 4 ) {\n    int start_value = atoi( argv[1] );\n    int incr_value = atoi( argv[2] );\n    int end_value = atoi( argv[3] );\n    // .. do what you want ...\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4501535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CDhKN.jpg?s=128&g=1", "display_name": "R.G.J", "link": "https://stackoverflow.com/users/4501535/r-g-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1422427605, "creation_date": 1422424207, "question_id": 28185512, "link": "https://stackoverflow.com/questions/28185512/how-to-change-pass-some-integer-value-in-steps-of-50-to-a-c-code", "title": "How to change pass some integer value in steps of 50 to a C++ code", "body": "<p>I have a code which takes some integer values ex : 35005. I want to compile the code once and then pass the start integer value and end integer value for which I want the code to run. These are in increments of 50. Like 35005, 35055, 36005 and so on. </p>\n\n<p>I want to write something like ./a.out 35005  50   36005 and submit jobs. </p>\n\n<p>Till now, I am using something like :</p>\n\n<pre><code>int main(int argc, char *argv[] )\n {\n int input = atoi(argv[1]);\nint nConfig(1);\nint initConfig (input);\n</code></pre>\n\n<p>This takes only one value and not what I want as stated above. Thanks for the help. </p>\n"}, {"tags": ["c++", "c", "gcc", "dll"], "comments": [{"owner": {"reputation": 4084, "user_id": 2425232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W0wq4.jpg?s=128&g=1", "display_name": "Henrik", "link": "https://stackoverflow.com/users/2425232/henrik"}, "edited": false, "score": 1, "creation_date": 1422428929, "post_id": 28185502, "comment_id": 44741545, "body": "Have you given it a try? Intuitively, if your <code>MyClass</code> instance is allocated in <code>main</code>, you will get a segfault/bad things will happen as soon as <code>mysharedlibrary.so</code> tries to access any of the new members. If the objects are encoded equally except for the two new members at the end (a big if, probably compiler dependent?), you <i>may just about</i> get away with it if the instance is allocated in <code>mysharedlib.so</code> and all you get in <code>main</code> is a pointer. This is purely based on my intuition."}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "reply_to_user": {"reputation": 4084, "user_id": 2425232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W0wq4.jpg?s=128&g=1", "display_name": "Henrik", "link": "https://stackoverflow.com/users/2425232/henrik"}, "edited": false, "score": 0, "creation_date": 1422430892, "post_id": 28185502, "comment_id": 44742368, "body": "<a href=\"http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html\" rel=\"nofollow noreferrer\">yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html</a>  .. and .. <a href=\"http://www.linuxjournal.com/article/3687?page=0,0\" rel=\"nofollow noreferrer\">linuxjournal.com/article/3687?page=0,0</a> .. give a little more insight to the matter, but @Henrik is right in you &quot;might get away with it&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 14495, "user_id": 431369, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/ac0a17cdc0247f909093802caa4f3bd0?s=128&d=identicon&r=PG", "display_name": "Christian Stewart", "link": "https://stackoverflow.com/users/431369/christian-stewart"}, "edited": false, "score": 0, "creation_date": 1422465622, "post_id": 28187032, "comment_id": 44763264, "body": "Thank you. I was trying to decide if I can transfer parsed protobuf objects between my libraries and the main or if I need to reparse the binary array a second time."}], "tags": [], "owner": {"reputation": 4575, "user_id": 746569, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7816351c392c2da71dc1019017b8dde?s=128&d=identicon&r=PG", "display_name": "MichaelCMS", "link": "https://stackoverflow.com/users/746569/michaelcms"}, "is_accepted": true, "score": 0, "last_activity_date": 1422430988, "creation_date": 1422430988, "answer_id": 28187032, "question_id": 28185502, "link": "https://stackoverflow.com/questions/28185502/class-conflicts-in-loaded-shared-libraries/28187032#28187032", "title": "Class conflicts in loaded shared libraries", "body": "<p>Problems might occur when using MyClass objects .</p>\n\n<p>It depends on how you use them.</p>\n\n<p>Take the following scenario (bogus code here).</p>\n\n<pre><code>MyClass* ptr = SharedLibHandle-&gt;CreateMyClass();\nptr-&gt;doStuffNonVirtual(); //1 this might work fine\nptr-&gt;doStuffVirtual(); //2 this will work fine\nptr-&gt;myThing= 5; // 3 this might work fine\n\nMyClass* localAllocPtr = new MyClass();\nSharedLibHandle()-&gt;DoSomethingWithTheClass(localAllocPtr);\n...\nvoid DoSomethingWithTheClass(MyClass* ptr)\n{\n ptr-&gt;myFourthThing = \" mama \" ; // 4 this might seem to work fine\n}\n</code></pre>\n\n<p>In the example above there are several possible use cases based on the place of instantiation and usage :</p>\n\n<p>ptr handles the scenario where the class is instantiated in the so with the size defined in the so , then used by your executable with the size defined there.</p>\n\n<p>localAllocPtr handles the reverse scenario (class instantiated in your executable then passed to .so).</p>\n\n<p>Taking each one :</p>\n\n<ol>\n<li>Call to non virtual function.</li>\n</ol>\n\n<p>Non virtual functions are resolved at compile time, this meaning that if you have a different code implementation inside your executable, the stack pointer will jump to your function implementation instead of the one in the .so . It will work as expected if your code is the same in both of the executable and so , and the structure alignment remains the same (which is most likely).  </p>\n\n<ol start=\"2\">\n<li>Call to virtual function</li>\n</ol>\n\n<p>This will work fine, since it will jump into a vftable then jump to the correct memory address in the .so . The .so initialized the class, so offsets, jumps and everything will be legal.</p>\n\n<ol start=\"3\">\n<li>Access of commonly defined member</li>\n</ol>\n\n<p>This will work fine only if myThing has the same alignment inside the structure, meaning he's at *(ptr+0) offset inside the structure. If by any chance inside your class myThing is first and mySecondThing is second, while in the .so  mySecondThing is first while myThing is second, then you will change the wrong parameter. Which ironically will have no effect if you continue to use the class inside your executable and not pass it back to the .so (Let's say ignorance is a bliss).</p>\n\n<ol start=\"4\">\n<li>Access to a non-allocated member</li>\n</ol>\n\n<p>When your executable allocs localAllocPtr it will allocate it with the sizeof(MyClass) as defined in your executable. In your executable the class doesn't define a string and a u32. When passing this allocated structure to the .so , the .so will consider the class as having the members and size according to it's definition. When accessing myFourthThing it will access a zone of memory that would normally be *(ptr + 8). If that zone of memory is in use (someone allocated there) you will write outside your ptr bounds into someone else's memory, and it might seem to work fine but you will end up with one of the hardest bugs to find. If after *(ptr +8) nothing is allocated, you'll get lucky and get a segmentation fault.</p>\n\n<p>In order to avoid the sort of problem you are describing a common approach is the pImpl idiom , which allows you to make the class specific implementation private, so you can add virtual functions and member variables while keeping the exposed definition of the class the same.</p>\n"}], "owner": {"reputation": 14495, "user_id": 431369, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/ac0a17cdc0247f909093802caa4f3bd0?s=128&d=identicon&r=PG", "display_name": "Christian Stewart", "link": "https://stackoverflow.com/users/431369/christian-stewart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 28187032, "answer_count": 1, "score": 2, "last_activity_date": 1422430988, "creation_date": 1422424164, "last_edit_date": 1495541191, "question_id": 28185502, "link": "https://stackoverflow.com/questions/28185502/class-conflicts-in-loaded-shared-libraries", "title": "Class conflicts in loaded shared libraries", "body": "<p>Say I have a class in my main process:</p>\n\n<pre><code>class MyClass\n{\n    void doStuff();\n    int myThing;\n    int mySecondThing;\n    bool myThirdThing; \n};\n</code></pre>\n\n<p>And I load a shared library, <code>mysharedlib.so</code>, with a <strong>newer</strong> version of the class compiled in:</p>\n\n<pre><code>class MyClass\n{\n    void doStuff();\n    int myThing;\n    int mySecondThing;\n    bool myThirdThing;\n    std::string myFourthThing;\n    u32 myFifthThing; \n};\n</code></pre>\n\n<p>What happens when I create an instance of MyClass / pass existing instances around between the library's functions and the main executable's functions? </p>\n\n<p>I know <a href=\"https://stackoverflow.com/a/22004193/431369\">the two libraries live in a different address space</a> but passing the data between the library and the executable is what confuses me.</p>\n\n<p>Does this behave differently when using <code>gmodule</code>?</p>\n"}, {"tags": ["c", "file"], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "is_accepted": false, "score": 3, "last_activity_date": 1422423871, "creation_date": 1422423871, "answer_id": 28185448, "question_id": 28185388, "link": "https://stackoverflow.com/questions/28185388/runtime-error-during-file-operation-in-c/28185448#28185448", "title": "Runtime error during file operation in C", "body": "<p>The Debug assertion failure might be caused by <code>fp1</code> being null.<br>\nThis will happen if the file could not have been opened.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 3582072, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3004dd8bbf962bd748bd6028776800c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3582072", "link": "https://stackoverflow.com/users/3582072/user3582072"}, "edited": false, "score": 0, "creation_date": 1422424338, "post_id": 28185488, "comment_id": 44739796, "body": "thanks for the response .. it is printing no.. can u help me out in knowing why is the file not opening.?"}, {"owner": {"reputation": 67, "user_id": 3582072, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3004dd8bbf962bd748bd6028776800c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3582072", "link": "https://stackoverflow.com/users/3582072/user3582072"}, "edited": false, "score": 0, "creation_date": 1422425884, "post_id": 28185488, "comment_id": 44740361, "body": "i am sorry but it is not working for both the solutions.. thanks again for the help.. appreciate it"}], "tags": [], "owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1422424513, "last_edit_date": 1422424513, "creation_date": 1422424080, "answer_id": 28185488, "question_id": 28185388, "link": "https://stackoverflow.com/questions/28185388/runtime-error-during-file-operation-in-c/28185488#28185488", "title": "Runtime error during file operation in C", "body": "<p>Change</p>\n\n<pre><code>if (feof(fp1))\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (fp1 &amp;&amp; !feof(fp1))\n</code></pre>\n\n<p>That is check for the return value of <code>fopen()</code>. If unable to open the file it would return NULL.</p>\n\n<p>Edit:</p>\n\n<blockquote>\n  <ol>\n  <li>Check if the file is in the same directory as that of exe/binary.</li>\n  <li>Check whether you have the permission to access the file.</li>\n  </ol>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 2184960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee3fb011aab6b63cb1aed2df949e8c6?s=128&d=identicon&r=PG", "display_name": "jjm", "link": "https://stackoverflow.com/users/2184960/jjm"}, "is_accepted": false, "score": 0, "last_activity_date": 1422424890, "creation_date": 1422424890, "answer_id": 28185678, "question_id": 28185388, "link": "https://stackoverflow.com/questions/28185388/runtime-error-during-file-operation-in-c/28185678#28185678", "title": "Runtime error during file operation in C", "body": "<p>Check the return value of </p>\n\n<pre><code> fp1 = fopen(\"try1.txt\",\"r\");\n</code></pre>\n\n<p>first. It is fare to check the return values of all standard functions( with proper return values) before proceeding to next step. In this case \"fp1\" should not be NULL. Please check the file location or check whether file is present in current directory.  </p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 4333455, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/e12D3.jpg?s=128&g=1", "display_name": "Saisujithreddy", "link": "https://stackoverflow.com/users/4333455/saisujithreddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1422425155, "creation_date": 1422425155, "answer_id": 28185745, "question_id": 28185388, "link": "https://stackoverflow.com/questions/28185388/runtime-error-during-file-operation-in-c/28185745#28185745", "title": "Runtime error during file operation in C", "body": "<p>Try to check if the file is opened correctly or not<br>\ncheck if( fp==NULL) using an if condition</p>\n\n<p>if fp==NULL is true, file is not being opened correctly</p>\n"}, {"comments": [{"owner": {"reputation": 6986, "user_id": 2968959, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/34c70f9a66b79ca49e2b14e3c075fe3d?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Meshram", "link": "https://stackoverflow.com/users/2968959/saurabh-meshram"}, "reply_to_user": {"reputation": 67, "user_id": 3582072, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3004dd8bbf962bd748bd6028776800c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3582072", "link": "https://stackoverflow.com/users/3582072/user3582072"}, "edited": false, "score": 0, "creation_date": 1422427623, "post_id": 28185835, "comment_id": 44741003, "body": "It means that the file <code>try1.txt</code> doesn&#39;t exist. Ensure this file is in the same directory as that of executable."}], "tags": [], "owner": {"reputation": 6986, "user_id": 2968959, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/34c70f9a66b79ca49e2b14e3c075fe3d?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Meshram", "link": "https://stackoverflow.com/users/2968959/saurabh-meshram"}, "is_accepted": false, "score": 0, "last_activity_date": 1422427478, "last_edit_date": 1422427478, "creation_date": 1422425615, "answer_id": 28185835, "question_id": 28185388, "link": "https://stackoverflow.com/questions/28185388/runtime-error-during-file-operation-in-c/28185835#28185835", "title": "Runtime error during file operation in C", "body": "<p>Before using <code>feof()</code> on <code>fp</code>.<br>\nEnsure that <code>fopen()</code> succeeded.</p>\n\n<pre><code>#include &lt;string.h&gt;   /* For strerror() */\n#include &lt;errno.h&gt;    /* For errno  */\n#include &lt;stdlib.h&gt;   /* For exit() */\n\nfp = fopen (\"FaultyFile.txt\", \"r\");\n\n/* Add Error-checking */             \nif (NULL == fp)                          \n{\n    printf (\"Error No : [%d]\\n\", errno);\n    printf (\"Error Msg: [%s]\\n\", strerror(errno));\n    exit (EXIT_FAILURE);          \n}                               \n</code></pre>\n\n<p>From <code>man(3) fopen</code>:<br>\nReturn Value: Upon successful <code>fopen()</code> return a <code>FILE</code> pointer.  Otherwise, <code>NULL</code> is returned and <code>errno</code>  is  set  to indicate the error.</p>\n"}], "owner": {"reputation": 67, "user_id": 3582072, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/3004dd8bbf962bd748bd6028776800c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3582072", "link": "https://stackoverflow.com/users/3582072/user3582072"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1422427478, "creation_date": 1422423550, "last_edit_date": 1422424985, "question_id": 28185388, "link": "https://stackoverflow.com/questions/28185388/runtime-error-during-file-operation-in-c", "title": "Runtime error during file operation in C", "body": "<p>I am trying to run a C code for file opening and whenever I do that I get a debug assertion failed message.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid main()\n{\n    FILE *fp1;\n    printf(\"program to demonstrate file operations\");\n    fp1 = fopen(\"try1.txt\",\"r\");\n    if (feof(fp1))\n    {\n        printf(\"Yes\");\n    }\n    else \n        printf(\"No\");\n\n    printf(\"%f\",fp1);\n\n    getchar();\n}\n</code></pre>\n"}]