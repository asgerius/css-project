[{"tags": ["c", "pipe", "fork"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1455148863, "post_id": 35328367, "comment_id": 58365222, "body": "The most significant part of the code, i.e. the read / write on the pipe, is missing.  Post the full code, or at least enough for others to reproduce your issue."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1455149076, "post_id": 35328367, "comment_id": 58365289, "body": "Seems it will be sequential due to the fact that the parent process reads from the pipe and that read blocks until the child writes to it. Which also means the parent will not do the next <code>fork</code> until each child that was just forked has done its write. This assumes each <code>read</code> consumes everything that was written - which is not actually guaranteed to be the case."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455149632, "post_id": 35328367, "comment_id": 58365462, "body": "the &#39;child&#39; path should end with a call to <code>exit()</code> not just jump out of the loop."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455149844, "post_id": 35328367, "comment_id": 58365533, "body": "so as to not run out of available file descriptors, after the parent completes it&#39;s read, it should close the read end of the pipe[].  after the child completes it&#39;s write, it should close the write end of the pipe.   The parent should call <code>wait()</code> or <code>waitpid()</code> before jumping back to the top of the loop.  The result will be that both ends of the pipe will be closed in both processes when done, However, it would be much better, since it is different processes, to use <code>named pipes</code> rather than the current method."}, {"owner": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1455150255, "post_id": 35328367, "comment_id": 58365665, "body": "@kaylum how can I make it concurrent? I need each child process to process a file, but not sequentially. Its the requirement for my assignment."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455150324, "post_id": 35328367, "comment_id": 58365691, "body": "@M.Averbach How about: 1) start a bunch of children 2) wait for all of them to finish. Instead of what you have now, which seems to be: 1) start a child 2) wait for it to finish 3) start another child 4) wait for it to finish 5) ..."}, {"owner": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455150439, "post_id": 35328367, "comment_id": 58365722, "body": "@immibis I thought about that, but the problem is that after all the children break out of the loop, they are running concurrently, but I can&#39;t communicate with the parent process anymore. I need each child process to send the filename to the parent, and for this to be concurrent. The part after the for loop is read only once by the parent process, the rest of the times its the children."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455150669, "post_id": 35328367, "comment_id": 58365803, "body": "@M.Averbach Did you know you can create more than one pipe?"}, {"owner": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455150758, "post_id": 35328367, "comment_id": 58365845, "body": "@immibis I create a pipe right before each fork call."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455150943, "post_id": 35328367, "comment_id": 58365898, "body": "@M.Averbach So what stops you from creating a bunch of pipes, starting children so that one child writes to each pipe, and then (once all the children are started) reading from each pipe?"}, {"owner": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455151035, "post_id": 35328367, "comment_id": 58365928, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/103148/discussion-between-m-averbach-and-immibis\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1455150372, "creation_date": 1455150372, "answer_id": 35328662, "question_id": 35328367, "link": "https://stackoverflow.com/questions/35328367/c-concurrent-processes-and-a-pipe/35328662#35328662", "title": "C Concurrent Processes and a Pipe", "body": "<p>printing after the <code>for()</code> loop the value returned from <code>getpid()</code> will be printed both for the (many) child pids and the parent pid.   </p>\n\n<p>There is no guarantee as to what process will execute to the call to <code>printf()</code> first.</p>\n\n<p>so the pid values can (and as you have seen) probably will) be printed in some 'random' order.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1455153039, "creation_date": 1455153039, "answer_id": 35329078, "question_id": 35328367, "link": "https://stackoverflow.com/questions/35328367/c-concurrent-processes-and-a-pipe/35329078#35329078", "title": "C Concurrent Processes and a Pipe", "body": "<p>When you fork a child process, the parent and child both run concurrently. Unless they do something that synchronizes them, the order that they each run is unpredictable.</p>\n\n<p>In the case of your <code>for</code> loop, the reads and writes in the pipes are synchronizing the processes: the parent can't return from <code>read()</code> until after the child has called <code>write()</code>. And they won't fork new children until both have done this.</p>\n\n<p>But after the loop is done, there's nothing synchronizing the processes, so they'll all print their PIDs in any order.</p>\n"}], "owner": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455167242, "creation_date": 1455148665, "last_edit_date": 1455167242, "question_id": 35328367, "link": "https://stackoverflow.com/questions/35328367/c-concurrent-processes-and-a-pipe", "title": "C Concurrent Processes and a Pipe", "body": "<p>I have the following code:</p>\n\n<pre><code>for(i=0; i &lt; argc; i++)\n{\n     pipe(fd[2]);\n     pid=fork();\n\n     if (pid &gt; 0)\n     {\n          close(fd[1]);\n          // read the string, and print it\n     }\n     else if (pid == 0)\n     {\n          close(fd[0]);\n          // write the file name to the main process\n          break;\n     }    \n}\n\n// wait for all processes to finish\n</code></pre>\n\n<p>So basically, it outputs each file name in sequential order:</p>\n\n<pre><code>file1\nfile2\nfile3\n</code></pre>\n\n<p>But if I put <code>printf(\"%d\\n\", getpid())</code> after the for loop, the outputs seems concurrent. Some processes with a higher process id are printed first.</p>\n\n<p>My question is, the way I do the pipe read/write inside the for loop, is it sequential or concurrent?</p>\n"}, {"tags": ["php", "c", "sockets", "caching", "data-structures"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455148444, "post_id": 35328276, "comment_id": 58365102, "body": "Congratulations, you&#39;ve discovered one of the many reasons people hate PHP."}, {"owner": {"reputation": 25177, "user_id": 1064767, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/af97e0b5fa21ad9414e7c2c383d4cc81?s=128&d=identicon&r=PG", "display_name": "Sammitch", "link": "https://stackoverflow.com/users/1064767/sammitch"}, "edited": false, "score": 1, "creation_date": 1455148591, "post_id": 35328276, "comment_id": 58365147, "body": "Why not just write the whole thing in C then? I&#39;m sure there&#39;s a lightweight HTTP/REST thing you can integrate. If you&#39;re dead-set on using PHP you can always <a href=\"http://www.phpinternalsbook.com/\" rel=\"nofollow noreferrer\">write your own extension</a>."}, {"owner": {"reputation": 1473, "user_id": 3165402, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2a581825fc2b00bc2b610442740ebec6?s=128&d=identicon&r=PG", "display_name": "clzola", "link": "https://stackoverflow.com/users/3165402/clzola"}, "edited": false, "score": 0, "creation_date": 1455148852, "post_id": 35328276, "comment_id": 58365220, "body": "I have tried writing php extension, simple create an array of integer and two functions to add elements and read array. Turns out PHP_MSHUTDOWN_FUNCTION is called when there is no requests, so even if I add 5 numbers to array, if I do not make another request in let&#39;s say 20 seconds, PHP_MSHUTDOWN_FUNCTION is called and thus my array deleted (since I need to free allocated memory)"}, {"owner": {"reputation": 1473, "user_id": 3165402, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2a581825fc2b00bc2b610442740ebec6?s=128&d=identicon&r=PG", "display_name": "clzola", "link": "https://stackoverflow.com/users/3165402/clzola"}, "edited": false, "score": 0, "creation_date": 1455149239, "post_id": 35328276, "comment_id": 58365346, "body": "Also this web application is very large, I am going to use Laravel Framework to make it. So I can&#39;t just write whole thing in C which would be tremendously hard and time consuming (and painful) xD"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1455150889, "post_id": 35328276, "comment_id": 58365885, "body": "You know what&#39;s worse? If the graph is large enough to matter (a few million nodes), A* starts to really hurt. Use Arc Flags, and you don&#39;t even need to load most of the graph."}], "answers": [{"tags": [], "owner": {"reputation": 1319, "user_id": 1051018, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/17623b699060c78823d7d6c95d1de7ec?s=128&d=identicon&r=PG", "display_name": "Abby Chau Yu Hoi", "link": "https://stackoverflow.com/users/1051018/abby-chau-yu-hoi"}, "is_accepted": false, "score": 1, "last_activity_date": 1455160409, "creation_date": 1455160409, "answer_id": 35330148, "question_id": 35328276, "link": "https://stackoverflow.com/questions/35328276/how-to-keep-large-graph-in-memory-with-php-and-c/35330148#35330148", "title": "How to keep large graph in memory with PHP and C?", "body": "<blockquote>\n  <p>I am thinking about making a C program, which I will run once, it will\n  construct graph and then open server socket and start listening on\n  some port.</p>\n</blockquote>\n\n<p>This approach is totally valid, but it increases the complexity of the path finding program and complexity of the deployment of system.</p>\n\n<p>Actually you can program it in PHP and store the object or any intermediate result in a serialized format using <code>serialize()</code>. But this may not be CPU efficient if your object is very large.</p>\n\n<p>The third method other than using a listening application or PHP code could be a compiled PHP extension (in C/C++), this is way more CPU and memory efficient than in PHP codes. In the mean time, you can build your own search tree or index in static files for your system. However, the objects are still not persistent.</p>\n\n<p>And at last, you can always build a listening service using PHP instead of C at anytime, using a socket approach <a href=\"http://php.net/manual/en/sockets.examples.php\" rel=\"nofollow\">http://php.net/manual/en/sockets.examples.php</a> . It can still persist object and the program session will not end.</p>\n\n<p>You should be able to make your own choice according to the nature(memory, CPU and logic complexity) of your application.</p>\n"}], "owner": {"reputation": 1473, "user_id": 3165402, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2a581825fc2b00bc2b610442740ebec6?s=128&d=identicon&r=PG", "display_name": "clzola", "link": "https://stackoverflow.com/users/3165402/clzola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1455746864, "answer_count": 1, "score": 0, "last_activity_date": 1455160409, "creation_date": 1455148212, "question_id": 35328276, "link": "https://stackoverflow.com/questions/35328276/how-to-keep-large-graph-in-memory-with-php-and-c", "closed_reason": "Needs more focus", "title": "How to keep large graph in memory with PHP and C?", "body": "<p>I need to make a web application which will, besides other stuff, do queries on large graph (data structure). I will just run Dijkstra or A* algorithm on graph, and return shortest path to the user as server response (probably JSON format). But the graph is very large and constructing it each time when user queries for shortest path from point A to point B is not very efficient. I need to find a way to keep graph in memory. </p>\n\n<p>So, I am thinking about making a C program, which I will run once, it will construct graph and then open server socket and start listening on some port. Then in PHP I would connect to that program via socket, send points A and B and wait for response. </p>\n\n<p>But I am not sure how good is this solution... And is there any other better and more elegant solution? There is no particular reason why I am proposing to make standalone program in C for constructing graph, it is just that I am more comfortable writing it in C than in PHP and also C is quite faster then PHP (as far as I know, which may not be true today).</p>\n"}, {"tags": ["c", "ipv6", "multicast"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1455160364, "post_id": 35327834, "comment_id": 58368384, "body": "As @dbush points out, it&#39;s very easy to determine whether or not it is a multicast address. The harder part is determining what kind of multicast based on the flags and scopes. Some multicast addresses are invalid, depending on how the flags are set (e.g. if the R flag is set, bot the P and T flags must be set, too, and if one or both are not set, it is an invalid multicast address)."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1455148471, "creation_date": 1455148471, "answer_id": 35328330, "question_id": 35327834, "link": "https://stackoverflow.com/questions/35327834/filtering-out-ipv6-multicast-address-range/35328330#35328330", "title": "Filtering out IPv6 multicast address range", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Multicast_address#IPv6\" rel=\"nofollow\">IPv6 multicast addresses</a> have a value of <code>0xFF</code> in the first byte.  So you can test it like this:</p>\n\n<pre><code>int is_ipv6_multicast(struct sockaddr_in6* sa6) {\n    return (sa6-&gt;sin6_addr.s6_addr[0] == 0xff);\n}\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 1036234, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a543093d02efde468d2cdeca8ad18703?s=128&d=identicon&r=PG", "display_name": "kjee", "link": "https://stackoverflow.com/users/1036234/kjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455149382, "creation_date": 1455145871, "last_edit_date": 1455149382, "question_id": 35327834, "link": "https://stackoverflow.com/questions/35327834/filtering-out-ipv6-multicast-address-range", "title": "Filtering out IPv6 multicast address range", "body": "<p>For a given IPv6 address represented in a <code>struct sockaddr_in6</code> data type, I want to know whether or not the address is in the multicast <a href=\"http://www.iana.org/assignments/ipv6-multicast-addresses/ipv6-multicast-addresses.xhtml\" rel=\"nofollow\">address range</a> or not. </p>\n\n<p>For instance, I want a function <code>is_ipv6_multicast()</code> that works as follows</p>\n\n<pre><code>struct sockaddr_in6* sa6;\n...\nif (is_ipv6_multicast(sa6)) {\n    // do one thing\n} else {\n    // do another\n}\n</code></pre>\n\n<p>Can anyone help me with this?</p>\n"}, {"tags": ["c", "struct", "copy", "ppm"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1455146063, "post_id": 35327794, "comment_id": 58364205, "body": "you should use memcpy to copy the values of the format and comments fields.  You could use strcpy if the values are null terminated."}, {"owner": {"reputation": 372, "user_id": 2227925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4dd98a63224dbb1cad354ab9c8dead5e?s=128&d=identicon&r=PG", "display_name": "BryanT", "link": "https://stackoverflow.com/users/2227925/bryant"}, "edited": false, "score": 0, "creation_date": 1455146192, "post_id": 35327794, "comment_id": 58364267, "body": "This has been answered here:- <a href=\"http://stackoverflow.com/questions/4931123/copying-one-structure-to-another\" title=\"copying one structure to another\">stackoverflow.com/questions/4931123/&hellip;</a>"}, {"owner": {"reputation": 77, "user_id": 4474422, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/10e0b44fe3db377d19635c329e077756?s=128&d=identicon&r=PG&f=1", "display_name": "Porteous96", "link": "https://stackoverflow.com/users/4474422/porteous96"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1455154813, "post_id": 35327794, "comment_id": 58366989, "body": "@bruceg Thanks for the tip, this solved my error message."}], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1455145955, "post_id": 35327832, "comment_id": 58364166, "body": "This just copies the address, do you mean *a = *b?"}, {"owner": {"reputation": 77, "user_id": 4474422, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/10e0b44fe3db377d19635c329e077756?s=128&d=identicon&r=PG&f=1", "display_name": "Porteous96", "link": "https://stackoverflow.com/users/4474422/porteous96"}, "edited": false, "score": 0, "creation_date": 1455146009, "post_id": 35327832, "comment_id": 58364189, "body": "So in this case does this make a&#39;s fields point to what b&#39;s fields point to or does it actually copy the values? I&#39;m new to C and still trying to understand the whole pointer thing."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1455146017, "post_id": 35327832, "comment_id": 58364192, "body": "@CecilioPardo, <code>a</code> and <code>b</code> are pointers in the function, so you need to dereference."}, {"owner": {"reputation": 1589, "user_id": 2770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2321a7b8ee2a179e16b50242ecb21c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilio Pardo", "link": "https://stackoverflow.com/users/2770092/cecilio-pardo"}, "reply_to_user": {"reputation": 77, "user_id": 4474422, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/10e0b44fe3db377d19635c329e077756?s=128&d=identicon&r=PG&f=1", "display_name": "Porteous96", "link": "https://stackoverflow.com/users/4474422/porteous96"}, "edited": false, "score": 0, "creation_date": 1455146086, "post_id": 35327832, "comment_id": 58364218, "body": "@Porteous96: It&#39;s make a bit-by-by copy of the struct, copying all the values."}, {"owner": {"reputation": 1589, "user_id": 2770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2321a7b8ee2a179e16b50242ecb21c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilio Pardo", "link": "https://stackoverflow.com/users/2770092/cecilio-pardo"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1455146149, "post_id": 35327832, "comment_id": 58364250, "body": "@AlterMann: I know, by in my answer I said they are variables of the struct type. He doesn&#39;t need such function."}], "tags": [], "owner": {"reputation": 1589, "user_id": 2770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2321a7b8ee2a179e16b50242ecb21c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilio Pardo", "link": "https://stackoverflow.com/users/2770092/cecilio-pardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1455145854, "creation_date": 1455145854, "answer_id": 35327832, "question_id": 35327794, "link": "https://stackoverflow.com/questions/35327794/copying-a-structs-contents-to-another/35327832#35327832", "title": "Copying a struct&#39;s contents to another", "body": "<p>You can simply do a = b, where and b are variables of type PPImage.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 4474422, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/10e0b44fe3db377d19635c329e077756?s=128&d=identicon&r=PG&f=1", "display_name": "Porteous96", "link": "https://stackoverflow.com/users/4474422/porteous96"}, "edited": false, "score": 0, "creation_date": 1455156169, "post_id": 35327846, "comment_id": 58367305, "body": "How would I go about copying the array over so that I have a version of it in each struct? It&#39;s an array using malloc for each cell and that points to a pixel, so it works like a 2d array of pixels."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1455228907, "last_edit_date": 1455228907, "creation_date": 1455145930, "answer_id": 35327846, "question_id": 35327794, "link": "https://stackoverflow.com/questions/35327794/copying-a-structs-contents-to-another/35327846#35327846", "title": "Copying a struct&#39;s contents to another", "body": "<p>You can copy the contents of one structure to the other with a simple assignment:</p>\n\n<pre><code>void copyPPM(PPMImage *newPPM, PPMImage *messagePPM)  {\n    *newPPM = *messagePPM;\n}\n</code></pre>\n\n<p>This means you do not even need a function.</p>\n\n<p>Yet the structures will share the <code>pixels</code> array.  If you want to duplicate that, you will need to allocate a copy and copy the contents.</p>\n\n<p>Copying one structure over another one may also cause the <code>pixels</code> array of the destination to be lost.</p>\n\n<p>If you want to make a deep copy of the structure, you need to allocate new arrays for the pixels this way:</p>\n\n<pre><code>void copyPPM(PPMImage *newPPM, PPMImage *messagePPM)  {\n    *newPPM = *messagePPM;\n    if (newPPM-&gt;pixels) {\n        newPPM-&gt;pixels = malloc(newPPM-&gt;height * sizeof(*newPPM-&gt;pixels));\n        for (int i = 0; i &lt; newPPM-&gt;height; i++) {\n            newPPM-&gt;pixels[i] = malloc(newPPM-&gt;width * sizeof(*newPPM-&gt;pixels[i]);\n            memcpy(newPPM-&gt;pixels[i], messagePPM-&gt;pixels[i],\n                   newPPM-&gt;width * sizeof(*newPPM-&gt;pixels[i]));\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4474422, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/10e0b44fe3db377d19635c329e077756?s=128&d=identicon&r=PG&f=1", "display_name": "Porteous96", "link": "https://stackoverflow.com/users/4474422/porteous96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 35327846, "answer_count": 2, "score": 0, "last_activity_date": 1455228907, "creation_date": 1455145697, "last_edit_date": 1455145917, "question_id": 35327794, "link": "https://stackoverflow.com/questions/35327794/copying-a-structs-contents-to-another", "title": "Copying a struct&#39;s contents to another", "body": "<p>I am trying to copy a struct's contents into another struct of the same type.</p>\n\n<p>I would like to be able to change the values of one struct without it affecting the other later though.</p>\n\n<p>I am dealing with reading and editing PPM files. I have a struct:</p>\n\n<pre><code>typedef struct {\n    char format[4];\n    char comments[MAX_COMMENT_LENGTH];\n    int width, height, maxColourValue;\n    PPMPixel **pixels;\n} PPMImage;\n</code></pre>\n\n<p>And then I have a copy function to copy the values over but I get an error when assigning different fields.</p>\n\n<p>I am trying to copy the fields of newPPM into messagePPM.</p>\n\n<p>Error:</p>\n\n<pre><code>incompatible types when assigning to type 'char[4]' from type 'char *'\n    messagePPM-&gt;format = newPPM-&gt;format;\nincompatible types when assigning to type 'char[100]' from type 'char *'\n    messagePPM-&gt;comments = newPPM-&gt;comments;\n</code></pre>\n\n<p>Copy Function:</p>\n\n<pre><code>//A function to copy contents of one PPMImage to another\nvoid copyPPM(PPMImage *newPPM, PPMImage *messagePPM) {\n\n    messagePPM-&gt;format = newPPM-&gt;format;\n    messagePPM-&gt;comments = newPPM-&gt;comments;\n    messagePPM-&gt;width = newPPM-&gt;width;\n    messagePPM-&gt;height = newPPM-&gt;height;\n    messagePPM-&gt;maxColourValue = newPPM-&gt;maxColourValue;\n    messagePPM-&gt;pixels = newPPM-&gt;pixels;\n</code></pre>\n\n<p>}</p>\n\n<p>How do I fix my error?\nWill copying fields this way achieve what I am aiming for?</p>\n"}, {"tags": ["c", "arrays", "string", "string-concatenation"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455145563, "post_id": 35327726, "comment_id": 58364000, "body": "1) C does not have a string type. 2) You cannot append a <code>char []</code> to a pointer - very different types! 3) You can, however append a <code>char []</code> to what a <code>char</code>-pointer <b>points to</b>, provided there is enough space. But <code>*(char *)</code> is a <code>char</code>, not a <code>char []</code>."}, {"owner": {"reputation": 67, "user_id": 5910978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0abe92bee83060c1268332e7358fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonTM9", "link": "https://stackoverflow.com/users/5910978/claytontm9"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455145672, "post_id": 35327726, "comment_id": 58364048, "body": "@Barmar kstring is my struct type."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1455145844, "post_id": 35327726, "comment_id": 58364122, "body": "<code>while(src.data[i] != &#39;\\0&#39;)</code>. Looks like an infinete loop for all non-empty strings in <code>src</code>. <code>i</code> is never changed so the same byte is being checked over and over again. Also, you really need to provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal complete and verifiable example</a>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455147038, "post_id": 35327726, "comment_id": 58364624, "body": "@ClaytonTM9 Okay, so what is it?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1455151709, "post_id": 35327726, "comment_id": 58366127, "body": "This does not work:  <code>void kstrcat(kstring *destp, kstring src) ... destp = realloc(destp,lenDest*sizeof(char));</code>  That changes the value of <code>destp</code> (and leaks the old value if the <code>realloc()</code> fails...), but it will not change the <code>kstring *</code> value held by the code that calls <code>kstrcat()</code>.  Since that value is no longer valid, you get a core dump."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455146227, "post_id": 35327805, "comment_id": 58364285, "body": "How does this help with his implementation of strings using a structure with <code>length</code> and <code>data</code>."}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455146320, "post_id": 35327805, "comment_id": 58364331, "body": "@Barmar by showing the base algorithm, the OP can use this code to implement it using a structure containing <code>length</code> and <code>data</code>."}, {"owner": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 0, "creation_date": 1455148805, "post_id": 35327805, "comment_id": 58365202, "body": "This code is quite dangerous, because it assumes that dest is already reallocated to hold the total length. Furthermore,  there is a dereference operator missing in the first for loop       for (pend = dest; *pend; ++pend)  and"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "reply_to_user": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 0, "creation_date": 1455150670, "post_id": 35327805, "comment_id": 58365805, "body": "@StefanW The caller should pass a valid string and do the bounds checking himself."}], "tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": -1, "last_activity_date": 1455150591, "last_edit_date": 1455150591, "creation_date": 1455145721, "answer_id": 35327805, "question_id": 35327726, "link": "https://stackoverflow.com/questions/35327726/concatenate-a-string-onto-the-end-of-a-pointer-variable/35327805#35327805", "title": "Concatenate a string onto the end of a pointer variable", "body": "<p>This is how you would concatenate two strings</p>\n\n<pre><code>char *strcat(char *dest, char *src)\n{\n    char *pend;\n\n    /* make pend point to end of dest */\n    for (pend = dest; *pend; ++pend)\n        ;\n\n    /* copy src to pend. Assume dest has enough space */\n    while (*pend++ = *src++)\n        ;\n\n    /* null terminate dest */\n    *pend = 0;\n    return dest;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5910978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0abe92bee83060c1268332e7358fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonTM9", "link": "https://stackoverflow.com/users/5910978/claytontm9"}, "edited": false, "score": 0, "creation_date": 1455146786, "post_id": 35327875, "comment_id": 58364531, "body": "Thank you so much. Very much appreciated."}, {"owner": {"reputation": 67, "user_id": 5910978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0abe92bee83060c1268332e7358fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonTM9", "link": "https://stackoverflow.com/users/5910978/claytontm9"}, "edited": false, "score": 0, "creation_date": 1455211393, "post_id": 35327875, "comment_id": 58399056, "body": "Hate to bring up an old topic, but when I run a memory check I get 3 errors all as a result from line <code>while(scrc.data[i] != &#39;\\0&#39;</code> Could you help with figuring out why i&#39;m getting memory errors?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 5910978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0abe92bee83060c1268332e7358fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonTM9", "link": "https://stackoverflow.com/users/5910978/claytontm9"}, "edited": false, "score": 0, "creation_date": 1455212412, "post_id": 35327875, "comment_id": 58399640, "body": "The only thing I can think of is that when you initially create your <code>kstring</code>s, you&#39;re not adding an extra byte to the allocations for the null terminators."}, {"owner": {"reputation": 67, "user_id": 5910978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0abe92bee83060c1268332e7358fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonTM9", "link": "https://stackoverflow.com/users/5910978/claytontm9"}, "edited": false, "score": 0, "creation_date": 1455213522, "post_id": 35327875, "comment_id": 58400362, "body": "I figured out my problem. Instead of <code>while(src.data[i] != &#39;\\0&#39;</code> I used a for loop <code>for(int i = 0 ; i &lt; src.length; i++)</code> and it worked out perfectly."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 67, "user_id": 5910978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0abe92bee83060c1268332e7358fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonTM9", "link": "https://stackoverflow.com/users/5910978/claytontm9"}, "edited": false, "score": 0, "creation_date": 1455213875, "post_id": 35327875, "comment_id": 58400626, "body": "They should be the same, because <code>kstrextend</code> initializes all the new entries with 0."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1455146078, "creation_date": 1455146078, "answer_id": 35327875, "question_id": 35327726, "link": "https://stackoverflow.com/questions/35327726/concatenate-a-string-onto-the-end-of-a-pointer-variable/35327875#35327875", "title": "Concatenate a string onto the end of a pointer variable", "body": "<p>You shouldn't add 1 to the index when assigning to the destination string. That's leaving the null byte that ended the destination string in it, instead of overwriting it with the first byte of the source.</p>\n\n<p>Also, you forgot to increment <code>i</code> in your loop.</p>\n\n<pre><code>void kstrcat(kstring *destp, kstring src)\n{\n    int lenDest = destp-&gt;length;\n    int lenSrc = src.length;\n\n    kstrextend(destp, lenDest + lenSrc);\n\n    int i = 0;\n    while(src.data[i] != '\\0')\n    {\n        destp-&gt;data[i+lenDest] = src.data[i];\n        i++;\n    }\n    destp-&gt;data[i+lenDest] = '\\0';\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5910978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0abe92bee83060c1268332e7358fa8d?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonTM9", "link": "https://stackoverflow.com/users/5910978/claytontm9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 35327875, "answer_count": 2, "score": -1, "last_activity_date": 1455150591, "creation_date": 1455145436, "last_edit_date": 1455148217, "question_id": 35327726, "link": "https://stackoverflow.com/questions/35327726/concatenate-a-string-onto-the-end-of-a-pointer-variable", "title": "Concatenate a string onto the end of a pointer variable", "body": "<p>fairly new to C. Having trouble with a certain function. The function is suppose to concatenate a str onto the end of *destp. First extends *destp to be long enough to hold the contents of both strings, by calling kstrextend(). Then copies the contents of src into the dest. </p>\n\n<p>This is my current code right now, only because it compiles. I want to change so I can call my kstrextend() function which reallocates the memory.\nAlso I'm running test cases and I'm having a core dump after it ask for \"kstrcat of two empty kstrings.\" </p>\n\n<pre><code>    void kstrcat(kstring *destp, kstring src)\n    {\n        int lenDest = destp-&gt;length;\n        //int lenSrc = src.length;\n\n       destp = realloc(destp,lenDest*sizeof(char));\n\n       int i = 0;\n\n       while(src.data[i] != '\\0')\n       {\n           destp-&gt;data[i+lenDest+1] = src.data[i];\n       }\n       destp-&gt;data[i+lenDest+1] = '\\0';\n   }\n</code></pre>\n\n<p>Also here is my kstrextend function in case of reference or anything I might need to change.</p>\n\n<pre><code>    void kstrextend(kstring *strp, size_t nbytes)\n    {\n        char *data1;\n        int len=strp-&gt;length;\n        if(len &lt; nbytes)\n        {\n            //allocate a new array with larger size\n            data1 = realloc(strp-&gt;data, nbytes);\n            if(data1 == NULL)\n            {\n                abort();\n            }\n            strp-&gt;data = data1;\n            strp-&gt;length = nbytes;\n            //remaining space of new array is filled with '\\0'\n            for (int i = len; i &lt; nbytes; i++)\n            {\n                strp-&gt;data[i] = '\\0';\n            }\n       }\n   }\n</code></pre>\n"}, {"tags": ["c", "while-loop", "scanf"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455145353, "post_id": 35327689, "comment_id": 58363926, "body": "<code>while (((scanf(&quot; %c&quot;,&amp;ch)) == 1)</code> - What is your problem? And comparing with <code>-1</code> is wrong anyway! Read the man page of the function."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1455145644, "post_id": 35327689, "comment_id": 58364037, "body": "What do you type after the &quot;last&quot; character?  Do you wait, hit &lt;Enter&gt; or some key(s) to cause end-of-file?"}, {"owner": {"reputation": 97, "user_id": 3260745, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8c9f69a8c17bd92aa5469c5aacd40721?s=128&d=identicon&r=PG&f=1", "display_name": "user3260745", "link": "https://stackoverflow.com/users/3260745/user3260745"}, "edited": false, "score": 0, "creation_date": 1455146409, "post_id": 35327689, "comment_id": 58364378, "body": "well what I&#39;d like to do is scanf(&quot; %c&quot;,&amp;c) and the input is going to be a really large number input so 3143143124132543125, and once that last 5 is read in I&#39;d like to cancel out of the while loop. Because once the characters are read in, it hangs in the while loop."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455149942, "post_id": 35327689, "comment_id": 58365568, "body": "@user3260745 How should the program know that&#39;s the last 5? What if you keep typing 638961 after that?"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 3260745, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8c9f69a8c17bd92aa5469c5aacd40721?s=128&d=identicon&r=PG&f=1", "display_name": "user3260745", "link": "https://stackoverflow.com/users/3260745/user3260745"}, "edited": false, "score": 0, "creation_date": 1455147007, "post_id": 35327750, "comment_id": 58364609, "body": "so all my characters are being read. The only thing is that I would like the while loop to terminate once everything has been read, the while loop terminates and the program closes. my input should terminate with a &#39;\\n&#39; character but even (((scanf(&quot; %c&quot;,&amp;ch)) != &#39;\\n&#39;)) won&#39;t terminate on a new line."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 97, "user_id": 3260745, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8c9f69a8c17bd92aa5469c5aacd40721?s=128&d=identicon&r=PG&f=1", "display_name": "user3260745", "link": "https://stackoverflow.com/users/3260745/user3260745"}, "edited": false, "score": 0, "creation_date": 1455147097, "post_id": 35327750, "comment_id": 58364649, "body": "@user3260745, that&#39;s correct. You&#39;ll have to terminate that by sending EOF to the stream. On a unix terminal, that is usually Ctrl+D and an a windows cmd window, it is usually Ctrl+Z."}, {"owner": {"reputation": 97, "user_id": 3260745, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8c9f69a8c17bd92aa5469c5aacd40721?s=128&d=identicon&r=PG&f=1", "display_name": "user3260745", "link": "https://stackoverflow.com/users/3260745/user3260745"}, "edited": false, "score": 0, "creation_date": 1455147213, "post_id": 35327750, "comment_id": 58364696, "body": "Okay, I actually figured it out! I guess when scanf is done reading from an input it returns an integer &lt; 0, so != -1 wouldn&#39;t always work as it doesn&#39;t return -1 specifically."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 97, "user_id": 3260745, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8c9f69a8c17bd92aa5469c5aacd40721?s=128&d=identicon&r=PG&f=1", "display_name": "user3260745", "link": "https://stackoverflow.com/users/3260745/user3260745"}, "edited": false, "score": 0, "creation_date": 1455147466, "post_id": 35327750, "comment_id": 58364776, "body": "@user3260745, you should be able to use <code>!= EOF</code>. <code>scanf</code> should return <i>Number of receiving arguments successfully assigned, or EOF if read failure occurs before the first receiving argument was assigned.</i>"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1455145531, "creation_date": 1455145531, "answer_id": 35327750, "question_id": 35327689, "link": "https://stackoverflow.com/questions/35327689/terminate-while-loop-scanfc-ch/35327750#35327750", "title": "Terminate While Loop scanf(&quot;%c&quot;,&amp;ch)", "body": "<p>If you want to read all characters, including whitespace characters, use:</p>\n\n<pre><code>int c;\nwhile ( (c = getchar()) != EOF )\n{\n   // Use c as a char.\n}\n</code></pre>\n\n<p>If you want to skip whitespace characters, use:</p>\n\n<pre><code>char c;\nwhile ( scanf(\" %c\", &amp;c) == 1 )\n{\n   // Use c.\n}\n</code></pre>\n\n<p>Notice the use of <code>int</code> vs <code>char</code> as the type for <code>c</code> in the two cases.</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 3260745, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8c9f69a8c17bd92aa5469c5aacd40721?s=128&d=identicon&r=PG&f=1", "display_name": "user3260745", "link": "https://stackoverflow.com/users/3260745/user3260745"}, "is_accepted": false, "score": 0, "last_activity_date": 1455147315, "last_edit_date": 1495540347, "creation_date": 1455147315, "answer_id": 35328103, "question_id": 35327689, "link": "https://stackoverflow.com/questions/35327689/terminate-while-loop-scanfc-ch/35328103#35328103", "title": "Terminate While Loop scanf(&quot;%c&quot;,&amp;ch)", "body": "<p>Okay, I actually figured it out! I guess when scanf is done reading from an input it returns an integer &lt; 0, so != -1 wouldn't always work as it doesn't return -1 specifically.</p>\n\n<p>ref:\nben glasser answer on this post:\n<a href=\"https://stackoverflow.com/questions/13549102/scanf-in-while-loop-not-terminating\">scanf() in while loop not terminating?</a></p>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 4982988, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7fd34a370cfab7f4619a088d3814f2f?s=128&d=identicon&r=PG&f=1", "display_name": "Harsh Dave", "link": "https://stackoverflow.com/users/4982988/harsh-dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1455165072, "creation_date": 1455165072, "answer_id": 35330821, "question_id": 35327689, "link": "https://stackoverflow.com/questions/35327689/terminate-while-loop-scanfc-ch/35330821#35330821", "title": "Terminate While Loop scanf(&quot;%c&quot;,&amp;ch)", "body": "<p>After the successful completion of scanf function it will a non-zero value(value>0). And if there occures any problem then it will return 0.I think in none of the case you will get a -1.So if you want to terminate the loop you can prompt the user to give a special character that can signify the end of input.Or if you are reading it from a file then you can use the EOF to terminate the loop.</p>\n\n<p>Hope you will like the solution....</p>\n\n<p>If anyone finds any mistakes in my answer than please comment it below.\nI will be very thankful to him.</p>\n"}], "owner": {"reputation": 97, "user_id": 3260745, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/8c9f69a8c17bd92aa5469c5aacd40721?s=128&d=identicon&r=PG&f=1", "display_name": "user3260745", "link": "https://stackoverflow.com/users/3260745/user3260745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1231, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1455165072, "creation_date": 1455145196, "question_id": 35327689, "link": "https://stackoverflow.com/questions/35327689/terminate-while-loop-scanfc-ch", "title": "Terminate While Loop scanf(&quot;%c&quot;,&amp;ch)", "body": "<p>I want to read in an input one character at a time. I don't know how big this input will be, so I'm not pointing an array to the input, but rather processing each character one at a time and constructing a linked list. The problem I'm having though, is how do I terminate this while loop after the last character has been read?</p>\n\n<pre><code>struct node{\nstruct node *next;\nint data;\n};\n\nint main(){\n\nint i; //iterator\nchar ch;\n//char *numberArr = (char*)malloc(1024,sizeof(char*));\nstruct node* head = NULL;\nstruct node* curr = NULL;\nstruct node* tail = NULL;\n\n\nprintf(\"Please input a number: \");\nwhile (((scanf(\" %c\",&amp;ch)) != -1)){\n    printf(\"%c\",ch);\n}\n</code></pre>\n"}, {"tags": ["c", "file", "io", "fwrite", "fread"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455144316, "post_id": 35327482, "comment_id": 58363507, "body": "C and C++ are <b>different</b> languages!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1455144362, "post_id": 35327482, "comment_id": 58363522, "body": "You need first <code>fopen</code> the file..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1455144410, "post_id": 35327482, "comment_id": 58363538, "body": "And stack overflow is no tutoring site. Please read the man pages of the functions or consult a C book - they are explained in likely every C book."}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 4289170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/818805709/picture?type=large", "display_name": "Mike Henke", "link": "https://stackoverflow.com/users/4289170/mike-henke"}, "edited": false, "score": 1, "creation_date": 1455144665, "post_id": 35327513, "comment_id": 58363653, "body": "Thank you for your response. I feel like an idiot now. I&#39;ll take more time researching before posting next time. I&#39;ll accept when I am allowed."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 551, "user_id": 4289170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/818805709/picture?type=large", "display_name": "Mike Henke", "link": "https://stackoverflow.com/users/4289170/mike-henke"}, "edited": false, "score": 1, "creation_date": 1455144736, "post_id": 35327513, "comment_id": 58363679, "body": "@MikeHenke learn from the mistake, feel no shame. ;) If I could I would vote for you, but I am on a limit."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 3, "last_activity_date": 1455144709, "last_edit_date": 1495542200, "creation_date": 1455144443, "answer_id": 35327513, "question_id": 35327482, "link": "https://stackoverflow.com/questions/35327482/fread-fwrite-in-c/35327513#35327513", "title": "fread/fwrite in C", "body": "<p>First read the ref <em>twice</em>: <a href=\"http://www.cplusplus.com/reference/cstdio/fwrite/\" rel=\"nofollow noreferrer\">fwrite()</a> and <a href=\"http://www.cplusplus.com/reference/cstdio/fread/\" rel=\"nofollow noreferrer\">fread()</a>.</p>\n\n<p>The last parameter should be a file ponter, so do it like this:</p>\n\n<pre><code>fp = fopen(dst_file, \"w+\");\nif(fp != NULL) {\n    fwrite(src_data, elem_size, elem_count, fp);\n    rewind(fp);\n    fread(result_data, elem_size, elem_count, fp);\n}\n</code></pre>\n\n<p>Take a look on <a href=\"https://stackoverflow.com/questions/9180006/how-to-use-fread-and-fwrite-functions-to-read-and-write-binary-files\">more examples</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "edited": false, "score": 0, "creation_date": 1455145805, "post_id": 35327819, "comment_id": 58364102, "body": "Please note it has been about 6 months since I wrote any C, so there may be errors in my code"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1455147539, "post_id": 35327819, "comment_id": 58364807, "body": "Sorry \u2013 no real errors in your code (although reading and writing <code>struct</code>s may have padding issues and thus needs a note on that), but it does not answer OP&#39;s question regarding the correct parameter type for <code>dst_file</code>."}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1455831050, "post_id": 35327819, "comment_id": 58678201, "body": "The correct parameter type is any pointer to a datatype. Good point on the padding, that would be where my getting out of c coding shows."}, {"owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1455831102, "post_id": 35327819, "comment_id": 58678231, "body": "I guess I misunderstood the question"}], "tags": [], "owner": {"reputation": 370, "user_id": 2460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/556d249147908ac03c34bd8a71ee2459?s=128&d=identicon&r=PG", "display_name": "DAhrens", "link": "https://stackoverflow.com/users/2460992/dahrens"}, "is_accepted": false, "score": 0, "last_activity_date": 1455145776, "creation_date": 1455145776, "answer_id": 35327819, "question_id": 35327482, "link": "https://stackoverflow.com/questions/35327482/fread-fwrite-in-c/35327819#35327819", "title": "fread/fwrite in C", "body": "<p>const char is effectively a byte type, you can cast it to any type you want to.\nIf you have a binary file stored with a known pattern (you better) you read the type by the member size into your target struct.</p>\n\n<p>So for instance if you have a struct with two variables</p>\n\n<pre><code>struct foo {\n  int f1;\n  int f2;\n};\n</code></pre>\n\n<p>And you know that the entire file is made up of these, then you can fread the values from the file like this</p>\n\n<pre><code>fread(&amp;target, sizeof(foo), num_elems, fp)\n</code></pre>\n\n<p>You can rinse and repeat this based on the file you are reading or writing.</p>\n\n<p>Additionally you can structure the file to have headers which tell you what type of data is stored, and how many of them there are, which allows you to have variable structures in a single file.</p>\n"}], "owner": {"reputation": 551, "user_id": 4289170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/818805709/picture?type=large", "display_name": "Mike Henke", "link": "https://stackoverflow.com/users/4289170/mike-henke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1699, "favorite_count": 0, "accepted_answer_id": 35327513, "answer_count": 2, "score": 1, "last_activity_date": 1455831209, "creation_date": 1455144282, "last_edit_date": 1455831209, "question_id": 35327482, "link": "https://stackoverflow.com/questions/35327482/fread-fwrite-in-c", "title": "fread/fwrite in C", "body": "<p>Let's say I have these parameters:</p>\n\n<pre><code>bool array_serialize(const void *src_data,\n                const char *dst_file,\n                const size_t elem_size,\n                const size_t elem_count);\n</code></pre>\n\n<p>Assume that <code>src_data</code> is the array I'd like to write into <code>dst_file</code>.</p>\n\n<p>I can't quite figure out how to use <code>fwrite</code>. I know that <code>fwrite</code> requires four parameters: </p>\n\n<ul>\n<li><code>ptr</code> \u2212 This is the pointer to the array of elements to be written.</li>\n<li><code>size</code> \u2212 This is the size in bytes of each element to be written.</li>\n<li><code>nmemb</code> \u2212 This is the number of elements, each one with a size of size bytes.</li>\n<li><code>stream</code> \u2212 This is the pointer to a <code>FILE</code> object that specifies an output stream.</li>\n</ul>\n\n<p>But the problem I run into is that <code>*dst_file</code> is of <code>const char</code> type. How can I convert this into the appropriate type to be able to use <code>fwrite</code>?\nI've tried doing </p>\n\n<pre><code>fwrite(src_data, elem_size, elem_count, dst_file);\n</code></pre>\n\n<p>but obviously this is incorrect.</p>\n\n<p>Similar question for <code>fread</code> as well.</p>\n"}, {"tags": ["c", "json"], "comments": [{"owner": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 0, "creation_date": 1455143630, "post_id": 35327091, "comment_id": 58363207, "body": "The tutorial of the jansson library looks useful at first glance. Have you tried with  json_loads and then using json_object_get ?"}, {"owner": {"reputation": 1163, "user_id": 2443844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/30b6ef0de1c372e61d35fd94cd6d91d8?s=128&d=identicon&r=PG", "display_name": "rfreytag", "link": "https://stackoverflow.com/users/2443844/rfreytag"}, "edited": false, "score": 0, "creation_date": 1455144041, "post_id": 35327091, "comment_id": 58363386, "body": "there are so many json libraries available for C, just choose one and go with it, read the docs. For example you could use <a href=\"https://github.com/json-c/json-c\" rel=\"nofollow noreferrer\">github.com/json-c/json-c</a>"}], "owner": {"reputation": 1, "user_id": 5910844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b43d6a743fb609a976cd7627654545f?s=128&d=identicon&r=PG", "display_name": "Mateus Pinho", "link": "https://stackoverflow.com/users/5910844/mateus-pinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "closed_date": 1455145353, "answer_count": 0, "score": 0, "last_activity_date": 1455143054, "creation_date": 1455142835, "last_edit_date": 1455143054, "question_id": 35327091, "link": "https://stackoverflow.com/questions/35327091/getting-data-from-a-json-file-in-c", "closed_reason": "Duplicate", "title": "Getting data from a .json file in c", "body": "<p>How do I get information from a JSON file in C? For example the following code in Python</p>\n\n<pre><code>open('simfin.json').read()\nvar = json.loads(open('simfin.json').read())\nvar = var[\"var\"]\n</code></pre>\n\n<p>Gets the value that I gave to a variable and then stores it in var. How do I do it in C, then write it to the .json file, preferably using Jansson?</p>\n\n<p>Here's my .json file:</p>\n\n<pre><code>{\n    \"whenaddrm\": \"01/01/1970 00:00\",\n    \"var\": 0,\n    \"moneyaddrm\": 0\n}\n</code></pre>\n"}, {"tags": ["c", "image", "printing", "rgb"], "comments": [{"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1455143067, "post_id": 35326911, "comment_id": 58362926, "body": "Add a declaration <code>struct PPM *getPPM(FILE * fd);</code> towards the top of the file, before <code>getPPM</code> is first called. Otherwise, the compiler doesn&#39;t have a prototype at that point, so it will assume <code>getPPM</code> is some function returning an <code>int</code>. Since <code>getPPM</code> is later defined with a different prototype, that causes the error."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455150658, "post_id": 35326911, "comment_id": 58365798, "body": "a small thing:  generally, a <code>FILE *</code> name is <code>fp</code> (for filepointer) set with something like: <code>fp = fopen( filename, mode)</code>   and a <code>fd</code> (an integer/file descriptor) is set with something like: <code>fd = open(...);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 735, "user_id": 4838284, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31f9133efa4665383038a34262e8b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4838284/chris"}, "edited": false, "score": 0, "creation_date": 1455217820, "post_id": 35329243, "comment_id": 58403164, "body": "Thanks very much, this was very helpful!"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 2, "last_activity_date": 1455154238, "creation_date": 1455154238, "answer_id": 35329243, "question_id": 35326911, "link": "https://stackoverflow.com/questions/35326911/display-rgb-values-of-ppm-image-and-conflict-type-error-in-c/35329243#35329243", "title": "Display rgb values of ppm image and conflict type error in C", "body": "<p>the following code</p>\n\n<ol>\n<li>contains lots of comments about what is wrong and/or how to correct</li>\n<li>performs appropriate error checking</li>\n<li>corrects some function signatures</li>\n<li>properly declares a prototype for each function</li>\n<li>corrects some of the 'keypunch' errors</li>\n<li>corrects the 'syntax' errors</li>\n<li>moved the struct definitions to before those definitions are first referenced</li>\n</ol>\n\n<p>Caveat: this code does not correct the problems with accessing the PPM image file.</p>\n\n<p>Caveat: this code still does not pass the malloc'd memory areas to <code>free()</code>, so those statements still need to be added.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n#define MAX_HEIGHT 600\n#define MAX_WIDTH 400\n\n// 1) giving the struct tag name the same as an instance name is a bad idea\n// 2) good programming practice is to define a struct separately\n//    from the instance of that struct\n\nstruct PPM\n{\n    char format[2]; //PPM format code\n    int height, width; //image pixel height and width\n    int max; //max rgb colour value\n\n};\n\nstruct PPM myPPM;\n\nstruct PPM_Pixel\n{\n    //Create variables to hold the rgb pixel values\n    //int red, green, blue;\n    // follow the axiom:\n    //    only one statement per line and (at most) one variable declaration per statement\n    int red;\n    int green;\n    int blue;\n};\n\nstruct PPM_Pixel myPPM_Pixel;\n\n// prototypes\nstruct PPM *getPPM(FILE * fp);\nvoid showPPM(struct PPM * image);\n\n// this line will cause the compiler to raise two warnings \n//    about unused variable 'argc' and 'argv'\n//int main(int argc, char ** argv)\nint main( void )\n{\n    // get image file\n    //FILE *file;\n    //file = fopen(\"aab(1).ppm\", \"r\");\n\n    //if there is no file then return an error\n    //if(file == NULL)\n    FILE *fp == NULL;\n    if( NUL == (fp = fopen(\"aab(1).ppm\", \"r\") ) )\n    {\n        //fprintf(stderr, \"File is not valid\");\n        //  should include system error message\n        perror( \"fopen for read of aab(1).ppm failed\" );\n        //return 0;\n        // need to indicate an error occurred\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen was successful\n\n    // following statement will raise a compiler warning\n    //    about: 'set but not used variable'\n    struct PPM *newPPM = getPPM(fp);\n\n    fclose( fp ); // moved to here from 'getPPM()'\n} // end function: main\n\n\n\n\nstruct PPM *getPPM(FILE * fp)\n{\n    struct PPM *image;\n    char buffer[16];\n\n    //char c;\n    // the returned value from 'getc()' is an integer, not a character\n    int  c;\n    char commentArray[256];\n\n    // following line is nonsence and the passed in parameter is already open\n    //fd = fopen(fd, \"r\");\n\n    // when allocating memory, always check the returned value\n    //    to assure the operation was successful\n    struct PPM *newPPM = NULL;\n    if( NULL == (newPPM = malloc( sizeof struct PPM ) ) )\n    {\n        perror( \"malloc for struct PPM failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n    // already done in main()\n    //checks if the file being read is valid/the correct file\n    //if(fd == NULL){\n    //    exit(1);\n    //}\n\n    //read the image of the format\n    if(!fgets(buffer, sizeOf(buffer), fd)){\n        exit(1);\n    }\n\n    //checks the format of the ppm file is correct\n    if(buffer[0] != 'P' || buffer[1] != '3'){\n        fprintf(stderr, \"Invalid image format! \\n\");\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, file format correct\n\n    printf(\"%s\", newPPM-&gt;format);\n\n\n\n    //allocate memory for the image\n    // note: there is no item named 'PPM'\n    // image = malloc(sizeof(PPM));\n    //if(!image){\n    // best to keep things together\n    if( NULL == (image = malloc( sizeof struct PPM ) ) )\n    {\n        //fprintf(stderr, \"Cannot allocate memory\");\n        // should include the OS message for the failure\n        perror( \"malloc for struct PPM failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n\n    // the following code does not store a comment in a linked list\n    // and\n    // skips over 1/2 the characters in the line due to the double call\n    // to 'getc()' in the inner while loop\n    //checks whether the next character is a comment and store it in a linked list\n    //c = getc(fd);\n    //while(c == '#'){\n    //    while(getc(fd) != '\\n'){\n    //    c = getc(fd);\n    //    }\n    //}\n\n    // this line does not compile!  did you actually mean to call: 'fscanf()'?\n    //if(fscaf(fd, \"%d %d\", &amp;image-&gt;height, &amp;image-&gt;width)!= 2)\n    if( 2 == fscanf( fp, \"%d %d\", &amp;image-&gt;height, &amp;image-&gt;width) )\n    {\n        // next line NOT true, what actually happened is the call to 'fscanf()' failed\n        //fprintf(stderr, \"Size of image is invalid\");\n        perror( \"fscanf for image height and width failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fscanf successful\n\n    // best practice to close a file, where it was opened.\n    //fclose(fd);\n    return newPPM;\n //};  do not follow a function definition with a semicolon\n}\n\n\n// Note: the following function is never called\n// showPPM(struct PPM * image) each function signature needs a return type, even if 'void'\nvoid showPPM(struct PPM * image)\n{\n    // Note: PPM images have the number of pixels in each row rounded up to a multiple of 4\n    //       but this posted code fails to handle that\n    //two-dimensional array to show the rows and columns of pixels.\n    // bad idea, suggest passing the (already input) width and height\n    //   and use those passed in values to define the array sizes\n    int rgb_array[MAX_HEIGHT][MAX_WIDTH];\n    int i;\n    int j;\n\n    for(i = 0; i&lt;MAX_HEIGHT; i++)\n    {\n        for(j = 0; j&lt;MAX_WIDTH; j++)\n        {\n            printf(\"%d\", rgb_array[i][j]);\n        }\n    }\n// }; do not follow a function definition with a semicolon\n}\n</code></pre>\n"}], "owner": {"reputation": 735, "user_id": 4838284, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/31f9133efa4665383038a34262e8b3cc?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4838284/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1455154238, "creation_date": 1455142039, "last_edit_date": 1455142388, "question_id": 35326911, "link": "https://stackoverflow.com/questions/35326911/display-rgb-values-of-ppm-image-and-conflict-type-error-in-c", "title": "Display rgb values of ppm image and conflict type error in C", "body": "<p>I'm fairly new to C and have been tasked with creating a program that reads an image and displays that image. I've created (what I believe to be) a function to read in the files format/comments etc, and have attempted to create a function to display each pixels rgb values.</p>\n\n<p>I cannot test it because I have an error in my program - 'conflicting types for getPPM'. Could anyone explain why I'm getting this error? and any possible fix to this would be great.</p>\n\n<p>If anyone could suggest a way to be able to store the comments (maybe in array?) and print them later on that would also be really helpful! Thanks.</p>\n\n<p>Also feel free to scrutinize the program as a whole and give me feedback, I'm not entirely sure if it will actually do anything once the above error is fixed. \nThanks very much!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n#define MAX_HEIGHT 600\n#define MAX_WIDTH 400\n\nint main(int argc, char ** argv){\n\n    // get image file\n    FILE *file;\n    file = fopen(\"aab(1).ppm\", \"r\");\n\n    //if there is no file then return an error\n    if(file == NULL){\n        fprintf(stderr, \"File is not valid\");\n        return 0;\n    }\n    else {\n        struct PPM *newPPM = getPPM(file);\n        return 0;\n    }\n}\n\nstruct PPM {\n    char format[2]; //PPM format code\n    int height, width; //image pixel height and width\n    int max; //max rgb colour value\n\n} PPM;\n\nstruct PPM_Pixel {\n    //Create variables to hold the rgb pixel values\n    int red, green, blue;\n} PPM_Pixel;\n\nstruct PPM *getPPM(FILE * fd){\n\n    struct PPM *image;\n    char buffer[16];\n    char c;\n    char commentArray[256];\n    fd = fopen(fd, \"r\");\n\n    struct PPM *newPPM = malloc(sizeof(PPM));\n\n    //checks if the file being read is valid/the correct file\n    if(fd == NULL){\n        exit(1);\n    }\n\n    //read the image of the format\n    if(!fgets(buffer, sizeOf(buffer), fd)){\n        exit(1);\n    }\n\n    //checks the format of the ppm file is correct\n    if(buffer[0] != 'P' || buffer[1] != '3'){\n        fprintf(stderr, \"Invalid image format! \\n\");\n        exit(1);\n    }else {\n        printf(\"%s\", newPPM-&gt;format);\n    }\n\n\n    //allocate memory for the image\n    image = malloc(sizeof(PPM));\n    if(!image){\n        fprintf(stderr, \"Cannot allocate memory\");\n        exit(1);\n    }\n\n    //checks whether the next character is a comment and store it in a linked list\n    c = getc(fd);\n    while(c == '#'){\n        while(getc(fd) != '\\n'){\n        c = getc(fd);\n        }\n    }\n\n    if(fscaf(fd, \"%d %d\", &amp;image-&gt;height, &amp;image-&gt;width)!= 2){\n         fprintf(stderr, \"Size of image is invalid\");\n         exit(1);\n    }\n\n    fclose(fd);\n    return newPPM;\n };\n\nshowPPM(struct PPM * image){\n\n    //two-dimensional array to show the rows and columns of pixels.\n\n    int rgb_array[MAX_HEIGHT][MAX_WIDTH];\n    int i;\n    int j;\n\n    for(i = 0; i&lt;MAX_HEIGHT; i++){\n        for(j = 0; j&lt;MAX_WIDTH; j++){\n            printf(\"%d\", rgb_array[i][j]);\n        }\n    }\n\n\n\n};\n</code></pre>\n"}, {"tags": ["c", "algorithm", "time-complexity"], "comments": [{"owner": {"reputation": 309, "user_id": 1122218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33478200c27c87c342c75693cc0bf0f4?s=128&d=identicon&r=PG", "display_name": "camel-man", "link": "https://stackoverflow.com/users/1122218/camel-man"}, "edited": false, "score": 2, "creation_date": 1455141189, "post_id": 35326651, "comment_id": 58362115, "body": "But the loop still goes n times in the first one so it is O(n)"}, {"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1455141236, "post_id": 35326651, "comment_id": 58362137, "body": "Btw, <code>m *= n;</code> = <code>m = m * n;</code>"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 309, "user_id": 1122218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/33478200c27c87c342c75693cc0bf0f4?s=128&d=identicon&r=PG", "display_name": "camel-man", "link": "https://stackoverflow.com/users/1122218/camel-man"}, "edited": false, "score": 0, "creation_date": 1455141272, "post_id": 35326651, "comment_id": 58362145, "body": "@camel-man Oh right, and btw, O(n) &gt; O(log(n^n))? if yes, why?"}, {"owner": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 1, "creation_date": 1455141566, "post_id": 35326651, "comment_id": 58362275, "body": "O(log(n^n)) ~ O(n log(n)) &gt; O(n)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1455141609, "post_id": 35326651, "comment_id": 58362295, "body": "The size of <code>n</code> is limited in C, the function will have undefined behavior for all but very small values of <code>n</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1455142268, "post_id": 35326739, "comment_id": 58362606, "body": "Assuming I&#39;m not bound by maximum number, the answer will be n * log3(n) = O(n * log(n)) right?"}, {"owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "reply_to_user": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 1, "creation_date": 1455142590, "post_id": 35326739, "comment_id": 58362736, "body": "@IlanAizelmanWS yes, but then it can&#39;t be written in c in a way you wrote it."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1455142626, "post_id": 35326739, "comment_id": 58362752, "body": "I see. Thank you very much for your time and effort you put here sir."}], "tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": true, "score": 2, "last_activity_date": 1455149777, "last_edit_date": 1455149777, "creation_date": 1455141334, "answer_id": 35326739, "question_id": 35326651, "link": "https://stackoverflow.com/questions/35326651/find-the-time-complexity-of-the-function-foo/35326739#35326739", "title": "Find the time complexity of the function &quot;foo&quot;", "body": "<p>Theoretically, time complexity is <code>O(n log n)</code> because:</p>\n\n<pre><code>for (i=0; i&lt;n; i++) \n   m *= n;\n</code></pre>\n\n<p>this will be executed n times and in the end <code>m=n^n</code></p>\n\n<p>Then this </p>\n\n<pre><code>while (m&gt;1)\n   m /= 3;\n</code></pre>\n\n<p>will be executed <code>log3(n^n)</code> times which is <code>n * log3(n)</code>:</p>\n\n<p><strong>P.S.</strong> But this is only if you count number of operations. In real life it takes much more time to calculate <code>n^n</code> because the numbers become too big. Also your function will overflow when you will be multiplying such big numbers and most probably you will be bounded by the maximum number of <code>int</code> (in which case the complexity will be <code>O(n)</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1455144337, "last_edit_date": 1455144337, "creation_date": 1455143133, "answer_id": 35327194, "question_id": 35326651, "link": "https://stackoverflow.com/questions/35326651/find-the-time-complexity-of-the-function-foo/35327194#35327194", "title": "Find the time complexity of the function &quot;foo&quot;", "body": "<p>With <code>foo(int n)</code> and 32-bit <code>int</code>, <code>n</code> cannot exceed the magnitude of 10, else <code>m *= n</code> overflows.</p>\n\n<p>Given such a small range that <code>n</code> works, the O() seems moot.  Even with 64-bit unsigned <code>m</code>, <code>n &lt;= 15</code>.</p>\n\n<p>So I suppose O(n lg(n)) is technically correct, but given the constraints of <code>int</code>, suspect code took more time to do a single <code>printf()</code> than iterate through <code>foo(10)</code>.  IOWs it is <em>practically</em> O(1).</p>\n\n<pre><code>unsigned long long foo(int n) {\n  unsigned long long cnt = 0;\n  int i;\n  unsigned long long m = 1;\n  for (i = 0; i &lt; n; i++) {\n    if (m &gt;= ULLONG_MAX/n) exit(1);\n    m *= n; // (m = n^n) ??\n    cnt++;\n  }\n  while (m &gt; 1) {\n    m /= 3;\n    cnt++;\n  }\n  return cnt;\n}\n</code></pre>\n\n<p>And came up with</p>\n\n<pre><code>1 1\n2 3\n3 6\n4 9\n5 12\n6 16\n7 19\n8 23\n9 27\n10 31\n11 35\n12 39\n13 43\n14 47\n15 52\n</code></pre>\n"}], "owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 35326739, "answer_count": 2, "score": 0, "last_activity_date": 1455149777, "creation_date": 1455141048, "last_edit_date": 1455149668, "question_id": 35326651, "link": "https://stackoverflow.com/questions/35326651/find-the-time-complexity-of-the-function-foo", "title": "Find the time complexity of the function &quot;foo&quot;", "body": "<p>I'm struggling to find the <strong>time complexity</strong> of this function:</p>\n\n<pre><code>void foo(int n) {\n    int i, m = 1;\n    for (i = 0; i &lt; n; i++) {\n        m *= n; // (m = n^n) ??\n    }\n    while (m &gt; 1) {\n        m /= 3;\n    }\n}\n</code></pre>\n\n<p>Well, the first for iteration is clearly <code>O(n^n)</code>, the explanation to it is because <code>m started with value 1</code>, and multiplies itself <code>n</code> times.</p>\n\n<p>Now, we start the while loop with <code>m = n^n</code> and we divide it every time by <code>3</code>.\nwhich means, (I guess), <code>log(n^n)</code>. </p>\n\n<p>Assuming I got it right up till now, I'm not sure if I need to sum or multiply, but my logic says I need to sum them, because <em>they</em> are 'odd' to each other.</p>\n\n<p>So my assumption is: <code>O(n^n) + O(log(n^n)) = O(n^n)</code> Because if n is quite big, we can just refrain from <code>O(log(n^n))</code>.</p>\n\n<p>Well, I really made many assumptions here, and I hope that makes sense. I'd love to hear your opinions about the time complexity of this function.</p>\n"}, {"tags": ["c", "search", "word"], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 0, "last_activity_date": 1455141035, "creation_date": 1455141035, "answer_id": 35326647, "question_id": 35326519, "link": "https://stackoverflow.com/questions/35326519/reading-in-grid-of-characters-in-c/35326647#35326647", "title": "Reading in grid of characters in C", "body": "<p>Each time through the loop, you increment <code>r</code> even though, at most, you have read a single character.  You might find it easier to use <em>nested loops</em>: a loop to keep track of the rows/lines, and a loop inside that one to process each character within that row/line.</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1460117537, "creation_date": 1460117537, "answer_id": 36499249, "question_id": 35326519, "link": "https://stackoverflow.com/questions/35326519/reading-in-grid-of-characters-in-c/36499249#36499249", "title": "Reading in grid of characters in C", "body": "<p><code>scanf(\"%[^\\n]%*c\", inputString)</code> doesn't store <code>\\n</code> in <code>inputString</code>, hence the test <code>inputString[r] == '\\n'</code> will never be true.</p>\n\n<p>You could use</p>\n\n<pre><code>    int i, r, c;\n    while (scanf(\"%[^\\n]%*c\", inputString) &gt; 0)\n    {\n        for (rowLength = i = 0; i &lt; strlen(inputString); ++i)\n            if (inputString[i] != ' ')\n                inputGrid[inputRow][rowLength++] = inputString[i];\n        if (++inputRow &gt;= rowLength) break;\n    }\n\n    // Print the array\n    for (r = 0; r &lt; inputRow; ++r, printf(\"\\n\"))\n        for (c = 0; c &lt; rowLength; ++c)\n            printf(\"%c\", inputGrid[r][c]);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5910724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1460117537, "creation_date": 1455140552, "last_edit_date": 1455141188, "question_id": 35326519, "link": "https://stackoverflow.com/questions/35326519/reading-in-grid-of-characters-in-c", "title": "Reading in grid of characters in C", "body": "<p>I am working on a word search assignment for my C class. I need to read in a grid of characters from the console by using the redirection operator such as </p>\n\n<blockquote>\n  <p>./a.out &lt; data1 </p>\n</blockquote>\n\n<p>I am not reading in the data from a file, so I don't need to use file operations. I need to read this grid in and then store it in a 2D array. However, my code just reads in the first line of the grid and stops. Here is my code: </p>\n\n<pre><code>int main(void) {\n    char inputGrid[50][50];\n    char solvedGrid[50][50];\n    char inputString[50];\n    char ch;\n\n    int inputRow = 0;\n    int rowLength = 0;\n    int i = 0;\n\n    size_t r;\n    size_t c;\n\n    scanf(\"%[^\\n]%*c\", inputString);\n    rowLength = strlen(inputString);\n\n    for (r = 0, c = 0; r &lt;= rowLength; r++) {\n        if (inputString[r] == '\\n') {\n            scanf(\"%[^\\n]%*c\", inputString);\n\n            inputRow++;\n\n            if (inputString[r] != ' ') {\n                inputGrid[inputRow][c] = inputString[r];\n                c++;\n            }\n        } else\n        if (inputString[r] != ' ') {\n            inputGrid[inputRow][c] = inputString[r];\n            c++;\n        }\n    }\n\n    // Print the array\n    for (r = 0; r &lt; strlen(inputString); r++) {\n        for (c = 0; c &lt; strlen(inputString); c++) {\n            printf(\"%c\", inputGrid[r][c]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>I need to read in the data in the form of space separated characters that form a square matrix. Any help would be appreciated.</p>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455140500, "post_id": 35326501, "comment_id": 58361782, "body": "Yes there is, you can write a program using the <code>fprintf</code> function for that. Your question is completely unclear, I am sorry."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1455140751, "post_id": 35326501, "comment_id": 58361904, "body": "<code>fprintf</code> returns the number of bytes written. <code>strlen</code> tells you the length used in a string buffer. Some arithmetic will tell you how many bytes to write - and where to split the buffer."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1455228400, "post_id": 35326562, "comment_id": 58409279, "body": "@J.Doe: Can you click on the grey check mark below the answer score to mark it as accepted?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1455142244, "last_edit_date": 1455142244, "creation_date": 1455140749, "answer_id": 35326562, "question_id": 35326501, "link": "https://stackoverflow.com/questions/35326501/strategy-to-fprintf-into-a-file-from-a-buffer-but-going-to-a-new-line-after-ever/35326562#35326562", "title": "strategy to fprintf into a file from a buffer but going to a new line after every 100 characters?", "body": "<p>In the general case, not really: <code>fprintf</code> does not come with an automatic line wrapping facility.</p>\n\n<p>But you can take advantage of <code>fprintf</code>'s return value: the number of characters that were written.  Updating a column count, you can output a linefeed every time you go past a certain value. If your <code>fprintf</code> chunks are small enough, the can be a good approximation of what you are trying to do.  To properly compute the column count, you must take into account any linefeeds you may output as part of an <code>fprintf</code> function call.</p>\n\n<p>Otherwise, you can <code>snprintf</code> to a buffer and search for spaces to break the line appropriately or even just break the line arbitrarily at 100 characters.</p>\n\n<p>Another more general solution is to use <code>popen()</code> to pipe the output through a utility that would perform the kind of wrapping you want.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1455144662, "post_id": 35327023, "comment_id": 58363651, "body": "Using the return value of <code>fpritnff()</code>, nice! (As long as it is&gt;= 0)."}, {"owner": {"reputation": 23, "user_id": 5906332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/880dafe6a63bd981e71eb55ec58de398?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5906332/j-doe"}, "edited": false, "score": 0, "creation_date": 1455167968, "post_id": 35327023, "comment_id": 58370624, "body": "@Alter Mann I think I understand what you algorithm is doing, Do you mind commenting the do loop for me. I have a bit confused abt that part. Especially the fprintf arguments/ quotation marks."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 23, "user_id": 5906332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/880dafe6a63bd981e71eb55ec58de398?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5906332/j-doe"}, "edited": false, "score": 0, "creation_date": 1455228017, "post_id": 35327023, "comment_id": 58409078, "body": "@J.Doe, you are welcome,  regarding your doubt, no, <code>char *ptr = str;</code> and <code>char *ptr = &amp;str[0];</code> are the same (stores the address of the first element in <code>str</code>), but using <code>char *ptr = &amp;str;</code> you are initializing a <code>char *</code> with an expression of type <code>char (*)[10000]</code>"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 2, "last_activity_date": 1455181120, "last_edit_date": 1455181120, "creation_date": 1455142524, "answer_id": 35327023, "question_id": 35326501, "link": "https://stackoverflow.com/questions/35326501/strategy-to-fprintf-into-a-file-from-a-buffer-but-going-to-a-new-line-after-ever/35327023#35327023", "title": "strategy to fprintf into a file from a buffer but going to a new line after every 100 characters?", "body": "<p>A simple loop:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_LINE 100\n\nint main(void)\n{    \n    char str[10000];\n    char *ptr = str;\n    int size;\n\n    fgets(ptr, sizeof str, stdin);\n    do {\n        /* write a maximum of 100 chars to file and a trailing new line */\n        /* size stores the number of chars written - trailing nl */\n        size = fprintf(stdout, \"%.*s\\n\", MAX_LINE, ptr) - 1;\n        /* increment the ptr size positions */\n        ptr += size;\n        /* if (end-of-buffer - size &lt; 100) exit loop */\n    } while (size &gt;= MAX_LINE);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5906332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/880dafe6a63bd981e71eb55ec58de398?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/5906332/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 35327023, "answer_count": 2, "score": 2, "last_activity_date": 1455181120, "creation_date": 1455140464, "question_id": 35326501, "link": "https://stackoverflow.com/questions/35326501/strategy-to-fprintf-into-a-file-from-a-buffer-but-going-to-a-new-line-after-ever", "title": "strategy to fprintf into a file from a buffer but going to a new line after every 100 characters?", "body": "<p>Is there any simple function or strategy that will help me <code>fprintf</code> onto a file from a buffer that I have while moving to the next line every 100 characters?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1455139986, "post_id": 35326332, "comment_id": 58361513, "body": "arrays can&#39;t have negative indexes. just normalize to <code>arr[maybe_negative_index+20]</code>"}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1455140688, "post_id": 35326332, "comment_id": 58361872, "body": "Ad 1) What does the size of <code>x</code> have to do with the size of the lookup table? x will use gigabytes of memory whereas the lookup table only a 100 bytes or so. Ad 2) Yes - you could write a python script to generate C source code (;-)), or, <code>malloc</code> the lookup table and loop over -20..20, calling <code>f</code>. A small suggestion: why not implement the lookup table in python first, and see if it makes a difference in speed. It&#39;s more likely that the size of the dataset (a billion doubles, using 4 or 8Gb of ram) is the issue. How much ram do you have?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1455141471, "post_id": 35326332, "comment_id": 58362232, "body": "LUT method would finally come to the tradeoff between accuracy and table size. It&#39;s common practice to use a small table a a rough guess and run a few iterations of approximations to get the final result."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1455143153, "post_id": 35326332, "comment_id": 58362973, "body": "If you <i>can</i> sort <code>x</code> and deal with consequences, it can be <i>very</i> efficiently compressed by a simple run-length algorithm, as it has a very limited number of possible values. In your case it will turn into array of size of order 2*21=42 elements..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1455145385, "post_id": 35326332, "comment_id": 58363941, "body": "Agree with @Marc, but would state it as <code>table_of_values[max_index - min_index+ 1]; y[i] = table_of_values[i - min_index];</code>"}, {"owner": {"reputation": 53155, "user_id": 427309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/JYj7w.png?s=128&g=1", "display_name": "Richard J. Ross III", "link": "https://stackoverflow.com/users/427309/richard-j-ross-iii"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1455145468, "post_id": 35326332, "comment_id": 58363971, "body": "@marcb it&#39;s well defined to create a pointer to an element at a given index in the array, and access elements before it using a negative subscript, for the record."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1455141032, "post_id": 35326474, "comment_id": 58362039, "body": "<i>arrays in c are defined as pointers</i>,  please clarify this nonsense... and you <b>definitely</b> cannot use <code>free(lookupTable)</code> to free <code>arr</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455145182, "post_id": 35326474, "comment_id": 58363849, "body": "&quot;have negative indices in your arrays&quot; is not quite right.  The <i>array</i> <code>arr</code> cannot be accessed via a negative index, but the <i>pointer</i> <code>lookupTable</code> can add a negative to it."}], "tags": [], "owner": {"reputation": 1804, "user_id": 4313775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kpFpj.jpg?s=128&g=1", "display_name": "David van rijn", "link": "https://stackoverflow.com/users/4313775/david-van-rijn"}, "is_accepted": false, "score": 1, "last_activity_date": 1455144780, "last_edit_date": 1455144780, "creation_date": 1455140352, "answer_id": 35326474, "question_id": 35326332, "link": "https://stackoverflow.com/questions/35326332/c-fastest-way-to-evaluate-a-function-on-a-finite-set-of-small-integer-values-by/35326474#35326474", "title": "C: fastest way to evaluate a function on a finite set of small integer values by using a lookup table?", "body": "<p>You can have negative indices in your arrays. (I am not sure if this is in the specifications.) If you have the following code:</p>\n\n<pre><code>int arr[] = {1, 2 ,3, 4, 5};\nint* lookupTable = arr + 3;\nprintf(\"%i\", lookupTable[-2]);\n</code></pre>\n\n<p>it will print out <code>2</code>. </p>\n\n<hr>\n\n<p>This works because arrays in c are defined as pointers. And if the pointer does not point to the begin of the array, you can access the item before the pointer.</p>\n\n<p>Keep in mind though that if you have to <code>malloc()</code> the memory for <code>arr</code> you probably cannot use <code>free(lookupTable)</code> to free it.</p>\n"}, {"comments": [{"owner": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "edited": false, "score": 0, "creation_date": 1455167440, "post_id": 35327762, "comment_id": 58370463, "body": "Could you please elaborate on the usefulness of your macro <code>VARIABLE_USED</code>? Is its sole purpose to avoid the preceding assignment being optimized away by  the compiler? If so, why not just use <code>volatile</code>?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 4441, "user_id": 788824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96f5e5d858f1562ac8075c2664451b3b?s=128&d=identicon&r=PG", "display_name": "vsz", "link": "https://stackoverflow.com/users/788824/vsz"}, "edited": false, "score": 1, "creation_date": 1455167881, "post_id": 35327762, "comment_id": 58370590, "body": "@vsz It&#39;s just a boilerplate macro I have to prevent the compiler [with <code>-Wall</code>] from complaining about this example code [which doesn&#39;t actually <i>do</i> anything with <code>val</code>]. Without it, the code example will produce: <code>warning: variable \u2018val\u2019 set but not used [-Wunused-but-set-variable]</code>. In real code, <code>VARIABLE_USED</code> would be replaced with code that does something useful with <code>val</code>. An alternate way would have been to create <code>void dummy(double val) {}</code> and replace <code>VARIABLE_USED(val)</code> with <code>dummy(val)</code>"}, {"owner": {"reputation": 6448, "user_id": 568249, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/de1c1bf8393206415463491920067f8b?s=128&d=identicon&r=PG", "display_name": "Berk U.", "link": "https://stackoverflow.com/users/568249/berk-u"}, "edited": false, "score": 0, "creation_date": 1455204442, "post_id": 35327762, "comment_id": 58393774, "body": "@CraigEstey Thank you for this <b>incredible</b> answer. I have some silly questions about <code>fcached</code> since that seems like it would be useful. It looks like <code>fcached</code> is declared in the code but not really used anywhere. Is that because you replaced <code>fcached</code> with <code>fripper</code>? If not, where would you plug it in? And would adding <code>inline</code> to the declaration to make sure it&#39;s inline?"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 5, "last_activity_date": 1455237660, "last_edit_date": 1455237660, "creation_date": 1455145568, "answer_id": 35327762, "question_id": 35326332, "link": "https://stackoverflow.com/questions/35326332/c-fastest-way-to-evaluate-a-function-on-a-finite-set-of-small-integer-values-by/35327762#35327762", "title": "C: fastest way to evaluate a function on a finite set of small integer values by using a lookup table?", "body": "<p>It's fairly easy to generate such a table with dynamic range values.</p>\n\n<p>Here's a simple, single table method:</p>\n\n<pre><code>#include &lt;malloc.h&gt;\n\n#define VARIABLE_USED(_sym) \\\n    do { \\\n        if (1) \\\n            break; \\\n        if (!! _sym) \\\n            break; \\\n    } while (0)\n\ndouble *table_of_values;\nint table_bias;\n\n// use the smallest of these that can contain the values the x array may have\n#if 0\ntypedef int xval_t;\n#endif\n#if 0\ntypedef short xval_t;\n#endif\n#if 1\ntypedef char xval_t;\n#endif\n\n#define XLEN        (1 &lt;&lt; 9)\nxval_t *x;\n\n// fslow -- your original function\ndouble\nfslow(int i)\n{\n    return 1;  // whatever\n}\n\n// ftablegen -- generate variable table\nvoid\nftablegen(double (*f)(int),int lo,int hi)\n{\n    int len;\n\n    table_bias = -lo;\n\n    len = hi - lo;\n    len += 1;\n\n    // NOTE: you can do free(table_of_values) when no longer needed\n    table_of_values = malloc(sizeof(double) * len);\n\n    for (int i = lo;  i &lt;= hi;  ++i)\n        table_of_values[i + table_bias] = f(i);\n}\n\n// fcached -- retrieve cached table data\ndouble\nfcached(int i)\n{\n    return table_of_values[i + table_bias];\n}\n\n// fripper -- access x and table arrays\nvoid\nfripper(xval_t *x)\n{\n    double *tptr;\n    int bias;\n    double val;\n\n    // ensure these go into registers to prevent needless extra memory fetches\n    tptr = table_of_values;\n    bias = table_bias;\n\n    for (int i = 0;  i &lt; XLEN;  ++i) {\n        val = tptr[x[i] + bias];\n\n        // do stuff with val\n        VARIABLE_USED(val);\n    }\n}\n\nint\nmain(void)\n{\n\n    ftablegen(fslow,-10,10);\n    x = malloc(sizeof(xval_t) * XLEN);\n    fripper(x);\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's a slightly more complex way that allows many similar tables to be generated:</p>\n\n<pre><code>#include &lt;malloc.h&gt;\n\n#define VARIABLE_USED(_sym) \\\n    do { \\\n        if (1) \\\n            break; \\\n        if (!! _sym) \\\n            break; \\\n    } while (0)\n\n// use the smallest of these that can contain the values the x array may have\n#if 0\ntypedef int xval_t;\n#endif\n#if 1\ntypedef short xval_t;\n#endif\n#if 0\ntypedef char xval_t;\n#endif\n\n#define XLEN        (1 &lt;&lt; 9)\nxval_t *x;\n\nstruct table {\n    int tbl_lo;                         // lowest index\n    int tbl_hi;                         // highest index\n    int tbl_bias;                       // bias for index\n    double *tbl_data;                   // cached data\n};\n\nstruct table ftable1;\nstruct table ftable2;\n\ndouble\nfslow(int i)\n{\n    return 1;  // whatever\n}\n\ndouble\nf2(int i)\n{\n    return 2;  // whatever\n}\n\n// ftablegen -- generate variable table\nvoid\nftablegen(double (*f)(int),int lo,int hi,struct table *tbl)\n{\n    int len;\n\n    tbl-&gt;tbl_bias = -lo;\n\n    len = hi - lo;\n    len += 1;\n\n    // NOTE: you can do free tbl_data when no longer needed\n    tbl-&gt;tbl_data = malloc(sizeof(double) * len);\n\n    for (int i = lo;  i &lt;= hi;  ++i)\n        tbl-&gt;tbl_data[i + tbl-&gt;tbl_bias] = fslow(i);\n}\n\n// fcached -- retrieve cached table data\ndouble\nfcached(struct table *tbl,int i)\n{\n    return tbl-&gt;tbl_data[i + tbl-&gt;tbl_bias];\n}\n\n// fripper -- access x and table arrays\nvoid\nfripper(xval_t *x,struct table *tbl)\n{\n    double *tptr;\n    int bias;\n    double val;\n\n    // ensure these go into registers to prevent needless extra memory fetches\n    tptr = tbl-&gt;tbl_data;\n    bias = tbl-&gt;tbl_bias;\n\n    for (int i = 0;  i &lt; XLEN;  ++i) {\n        val = tptr[x[i] + bias];\n\n        // do stuff with val\n        VARIABLE_USED(val);\n    }\n}\n\nint\nmain(void)\n{\n\n    x = malloc(sizeof(xval_t) * XLEN);\n\n    // NOTE: we could use 'char' for xval_t ...\n    ftablegen(fslow,-37,62,&amp;ftable1);\n    fripper(x,&amp;ftable1);\n\n    // ... but, this forces us to use a 'short' for xval_t\n    ftablegen(f2,-99,307,&amp;ftable2);\n\n    return 0;\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<p><code>fcached</code> could/should be an <code>inline</code> function for speed. Notice that once the table is calculated once, <code>fcached(x[i])</code> is quite fast. The index offset issue you mentioned [solved by the \"bias\"] is trivially small in calculation time.</p>\n\n<p>While <code>x</code> may be a large array, the cached array for <code>f()</code> values is fairly small (e.g. -10 to 10). Even if it were (e.g.) -100 to 100, this is still about 200 elements. This small cached array will [probably] stay in the hardware memory cache, so access will remain quite fast.</p>\n\n<p>Thus, sorting <code>x</code> to optimize H/W cache performance of the lookup table will have little to no [measurable] effect.</p>\n\n<p>The access pattern to <code>x</code> is independent. You'll get best performance if you access <code>x</code> in a linear manner (e.g. <code>for (i = 0; i &lt; 999999999; ++i) x[i]</code>). If you access it in a semi-random fashion, it will put a strain on the H/W cache logic and its ability to keep the needed/wanted <code>x</code> values \"cache hot\"</p>\n\n<p>Even with linear access, because <code>x</code> is so large, by the time you get to the end, the first elements will have been evicted from the H/W cache (e.g. most CPU caches are on the order of a few megabytes)</p>\n\n<p>However, if <code>x</code> only has values in a limited range, changing the type from <code>int x[...]</code> to <code>short x[...]</code> or even <code>char x[...]</code> cuts the <em>size</em> by a factor of 2x [or 4x]. And, <em>that</em> can have a measurable improvement on the performance.</p>\n\n<p><strong>Update:</strong> I've added an <code>fripper</code> function to show the fastest way [that I know of] to access the table and <code>x</code> arrays in a loop. I've also added a <code>typedef</code> named <code>xval_t</code> to allow the <code>x</code> array to consume less space (i.e. will have better H/W cache performance).</p>\n\n<hr>\n\n<p><strong>UPDATE #2:</strong></p>\n\n<p>Per your comments ...</p>\n\n<p><code>fcached</code> was coded [mostly] to illustrate simple/single access. But, it was not used in the final example.</p>\n\n<p>The exact requirements for inline has varied over the years (e.g. was extern inline). Best use now: <code>static inline</code>. However, if using <code>c++</code>, it may be, yet again different. There are entire pages devoted to this. The reason is because of compilation in different <code>.c</code> files, what happens when optimization is on or off. Also, consider using a <code>gcc</code> extension. So, to force inline all the time:</p>\n\n<pre><code>__attribute__((__always_inline__)) static inline\n</code></pre>\n\n<p><code>fripper</code> is the fastest because it avoids refetching globals <code>table_of_values</code> and <code>table_bias</code> on each loop iteration. In fripper, compiler optimizer will ensure they remain in registers. See my answer: <a href=\"https://stackoverflow.com/questions/34847662/is-accessing-statically-or-dynamically-allocated-memory-faster/34848186#34848186\">Is accessing statically or dynamically allocated memory faster?</a> as to why.</p>\n\n<p><strong>However</strong>, I coded an <code>fripper</code> variant that uses <code>fcached</code> and the disassembled code was the same [and <em>optimal</em>]. So, we can disregard that ... Or, can we? Sometimes, disassembling the code is a good cross check and the only way to know for sure. Just an extra item when creating fully optimized C code. There are many options one can give to the compiler regarding code generation, so sometimes it's just trial and error.</p>\n\n<p>Because benchmarking is important, I threw in my routines for timestamping (FYI, [AFAIK] the underlying <code>clock_gettime</code> call is the basis for python's <code>time.clock()</code>).</p>\n\n<p>So, here's the updated version:</p>\n\n<pre><code>#include &lt;malloc.h&gt;\n#include &lt;time.h&gt;\n\ntypedef long long s64;\n\n#define SUPER_INLINE \\\n    __attribute__((__always_inline__)) static inline\n\n#define VARIABLE_USED(_sym) \\\n    do { \\\n        if (1) \\\n            break; \\\n        if (!! _sym) \\\n            break; \\\n    } while (0)\n\n#define TVSEC           1000000000LL    // nanoseconds in a second\n#define TVSECF          1e9             // nanoseconds in a second\n\n// tvget -- get high resolution time of day\n// RETURNS: absolute nanoseconds\ns64\ntvget(void)\n{\n    struct timespec ts;\n    s64 nsec;\n\n    clock_gettime(CLOCK_REALTIME,&amp;ts);\n\n    nsec = ts.tv_sec;\n    nsec *= TVSEC;\n    nsec += ts.tv_nsec;\n\n    return nsec;\n)\n\n// tvgetf -- get high resolution time of day\n// RETURNS: fractional seconds\ndouble\ntvgetf(void)\n{\n    struct timespec ts;\n    double sec;\n\n    clock_gettime(CLOCK_REALTIME,&amp;ts);\n\n    sec = ts.tv_nsec;\n    sec /= TVSECF;\n    sec += ts.tv_sec;\n\n    return sec;\n)\n\ndouble *table_of_values;\nint table_bias;\n\ndouble *dummyptr;\n\n// use the smallest of these that can contain the values the x array may have\n#if 0\ntypedef int xval_t;\n#endif\n#if 0\ntypedef short xval_t;\n#endif\n#if 1\ntypedef char xval_t;\n#endif\n\n#define XLEN        (1 &lt;&lt; 9)\nxval_t *x;\n\n// fslow -- your original function\ndouble\nfslow(int i)\n{\n    return 1;  // whatever\n}\n\n// ftablegen -- generate variable table\nvoid\nftablegen(double (*f)(int),int lo,int hi)\n{\n    int len;\n\n    table_bias = -lo;\n\n    len = hi - lo;\n    len += 1;\n\n    // NOTE: you can do free(table_of_values) when no longer needed\n    table_of_values = malloc(sizeof(double) * len);\n\n    for (int i = lo;  i &lt;= hi;  ++i)\n        table_of_values[i + table_bias] = f(i);\n}\n\n// fcached -- retrieve cached table data\nSUPER_INLINE double\nfcached(int i)\n{\n    return table_of_values[i + table_bias];\n}\n\n// fripper_fcached -- access x and table arrays\nvoid\nfripper_fcached(xval_t *x)\n{\n    double val;\n    double *dptr;\n\n    dptr = dummyptr;\n\n    for (int i = 0;  i &lt; XLEN;  ++i) {\n        val = fcached(x[i]);\n\n        // do stuff with val\n        dptr[i] = val;\n    }\n}\n\n// fripper -- access x and table arrays\nvoid\nfripper(xval_t *x)\n{\n    double *tptr;\n    int bias;\n    double val;\n    double *dptr;\n\n    // ensure these go into registers to prevent needless extra memory fetches\n    tptr = table_of_values;\n    bias = table_bias;\n    dptr = dummyptr;\n\n    for (int i = 0;  i &lt; XLEN;  ++i) {\n        val = tptr[x[i] + bias];\n\n        // do stuff with val\n        dptr[i] = val;\n    }\n}\n\nint\nmain(void)\n{\n\n    ftablegen(fslow,-10,10);\n    x = malloc(sizeof(xval_t) * XLEN);\n    dummyptr = malloc(sizeof(double) * XLEN);\n    fripper(x);\n    fripper_fcached(x);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 1659500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dc77cc2498bea2b49cab73be68bd0?s=128&d=identicon&r=PG", "display_name": "&#216;ystein Sch&#248;nning-Johansen", "link": "https://stackoverflow.com/users/1659500/%c3%98ystein-sch%c3%b8nning-johansen"}, "is_accepted": false, "score": 1, "last_activity_date": 1455152878, "last_edit_date": 1455152878, "creation_date": 1455148913, "answer_id": 35328397, "question_id": 35326332, "link": "https://stackoverflow.com/questions/35326332/c-fastest-way-to-evaluate-a-function-on-a-finite-set-of-small-integer-values-by/35328397#35328397", "title": "C: fastest way to evaluate a function on a finite set of small integer values by using a lookup table?", "body": "<p>I really think Craig Estey is on the right track for building your table in an automatic way. I just want to add a note for looking up the table.</p>\n\n<p>If you know that you will run the code on a <em>Haswell</em> machine (with AVX2) you should make sure your code utilise <code>VGATHERDPD</code> which you can utilize with the <code>_mm256_i32gather_pd</code> intrinsic. If you do that, your table lookups will fly! (You can even detect avx2 on the fly with <code>cpuid()</code>, but that's another story) </p>\n\n<p><strong>EDIT:</strong><br/>\nLet me elaborate with some code:</p>\n\n<pre><code>#include &lt;stdint.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;immintrin.h&gt; \n/* I'm not sure if you need the alignment */\ndouble table[8]  __attribute__((aligned(16)))= { 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8 };\n\nint main()\n{\n    int32_t i[4] = { 0,2,4,6 };\n    __m128i index = _mm_load_si128( (__m128i*) i );\n    __m256d result = _mm256_i32gather_pd( table, index, 8 );\n\n    double* f = (double*)&amp;result;\n    printf(\"%f %f %f %f\\n\", f[0], f[1], f[2], f[3]);\n    return 0;\n}\n</code></pre>\n\n<p>Compile and run:</p>\n\n<pre><code>$ gcc --std=gnu99 -mavx2 gathertest.c -o gathertest &amp;&amp; ./gathertest\n0.100000 0.300000 0.500000 0.700000\n</code></pre>\n\n<p>This is fast!</p>\n"}], "owner": {"reputation": 6448, "user_id": 568249, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/de1c1bf8393206415463491920067f8b?s=128&d=identicon&r=PG", "display_name": "Berk U.", "link": "https://stackoverflow.com/users/568249/berk-u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 35327762, "answer_count": 3, "score": 3, "last_activity_date": 1455237660, "creation_date": 1455139823, "last_edit_date": 1455228998, "question_id": 35326332, "link": "https://stackoverflow.com/questions/35326332/c-fastest-way-to-evaluate-a-function-on-a-finite-set-of-small-integer-values-by", "title": "C: fastest way to evaluate a function on a finite set of small integer values by using a lookup table?", "body": "<p>I am currently working on a project where I would like to optimize some numerical computation in Python by calling C.</p>\n\n<p>In short, I need to compute the value of <code>y[i] = f(x[i])</code> for each element in an huge array <code>x</code> (typically has <code>10^9</code> entries or more). Here, <code>x[i]</code> is an integer between -10 and 10 and <code>f</code> is function that takes <code>x[i]</code> and returns a double. My issue is that <code>f</code> but it takes a <strong>very long</strong> time to evaluate in a way that is numerically stable. </p>\n\n<p>To speed things up, I would like to just hard code all <code>2*10 + 1</code> possible values of <code>f(x[i])</code> into constant array such as:</p>\n\n<p><code>double table_of_values[] = {f(-10), ...., f(10)};</code></p>\n\n<p>And then just evaluate <code>f</code> using a \"lookup table\" approach as follows:</p>\n\n<pre><code>for (i = 0; i &lt; N; i++) {\n    y[i] = table_of_values[x[i] + 11]; //instead of y[i] = f(x[i])\n}\n</code></pre>\n\n<p>Since I am not really well-versed at writing <em>optimized</em> code in C, I am wondering:</p>\n\n<ol>\n<li><p>Specifically - since <code>x</code> is really large - I'm wondering if it's worth doing second-degree optimization when evaluating the loop (e.g. by sorting <code>x</code> beforehand, or by finding a smart way to deal with the negative indices (aside from just doing <code>[x[i] + 10 + 1]</code>)?</p></li>\n<li><p>Say <code>x[i]</code> were not between -10 and 10, but between -20 and 20. In this case, I could still use the same approach, but would need to hard code the lookup table manually. Is there a way to generate the look-up table dynamically in the code so that I make use of the same approach and allow for <code>x[i]</code> to belong to a variable range?</p></li>\n</ol>\n"}, {"tags": ["c", "algorithm", "time-complexity"], "comments": [{"owner": {"reputation": 3463, "user_id": 508175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ca8c547ecf1fad821a9932396820baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Teruzzi", "link": "https://stackoverflow.com/users/508175/alessandro-teruzzi"}, "edited": false, "score": 31, "creation_date": 1455198819, "post_id": 35326140, "comment_id": 58389573, "body": "IMHO is not a duplicate of Plain English explanation of Big O at all. OP knows what Big O is and she/he is asking the correct evaluation in a specific case."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 4, "creation_date": 1455228518, "post_id": 35326140, "comment_id": 58409355, "body": "Seeing as there is no return value and no side effects, can we be sure the compiler doesn&#39;t optimize it away?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1455310498, "post_id": 35326140, "comment_id": 58449906, "body": "Woah.. would you expect such a question to gain such a score? Mysteries of SO..."}, {"owner": {"reputation": 6523, "user_id": 499922, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/168958e86210e7a60277634309705672?s=128&d=identicon&r=PG", "display_name": "billc.cn", "link": "https://stackoverflow.com/users/499922/billc-cn"}, "edited": false, "score": 1, "creation_date": 1455664207, "post_id": 35326140, "comment_id": 58587696, "body": "Note, this may also be a trick question. Quoting Wikipedia, &quot;<i>the time complexity of an algorithm quantifies the amount of time taken by an algorithm to run as <b>a function of the length</b> of the string representing the input</i>&quot;. The input size here is fixed and the code terminates for all inputs, so complexity can&#39;t be greater than O(1). In fact, any self-respecting optimising compiler will turn the entire method into no-op."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 6523, "user_id": 499922, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/168958e86210e7a60277634309705672?s=128&d=identicon&r=PG", "display_name": "billc.cn", "link": "https://stackoverflow.com/users/499922/billc-cn"}, "edited": false, "score": 3, "creation_date": 1455719807, "post_id": 35326140, "comment_id": 58615489, "body": "@billc.cn Actually, <code>n</code> is a parameter to a function here, so you can&#39;t know how it will be called."}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 37, "last_activity_date": 1455681017, "last_edit_date": 1495540502, "creation_date": 1455140035, "answer_id": 35326392, "question_id": 35326140, "link": "https://stackoverflow.com/questions/35326140/what-is-the-time-complexity-of-my-function/35326392#35326392", "title": "What is the time complexity of my function?", "body": "<p>The first inner loop runs <code>n</code> times<br>\nThe second inner loop runs <code>n/2</code> times<br>\nThe third inner loop runs <code>n/3</code> times<br>\n.. \nThe last one runs once</p>\n\n<p>So <code>n + n/2 + n/3 + ... + 1 = n(1+1/2+1/3+1/4 + ... +1/n)</code>.</p>\n\n<p>This is n multiplied by the sum of harmonic series, which does not have a nice closed form representation. But as shown <a href=\"https://stackoverflow.com/questions/25905118/finding-big-o-of-the-harmonic-series\">here</a> it is <code>O(log(n))</code>. So overall the algorithm is <code>O(n log(n))</code></p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 114, "last_activity_date": 1500232473, "last_edit_date": 1500232473, "creation_date": 1455140076, "answer_id": 35326405, "question_id": 35326140, "link": "https://stackoverflow.com/questions/35326140/what-is-the-time-complexity-of-my-function/35326405#35326405", "title": "What is the time complexity of my function?", "body": "<p>The outer loop runs <code>n</code> times.</p>\n\n<p>For each iteration, the inner loops runs <code>n / i</code> times.</p>\n\n<p>The total number of runs is:</p>\n\n<pre><code>n + n/2 + n/3 + ... + n/n\n</code></pre>\n\n<p>Asymptotically (ignoring integer arithmetic rounding), this simplifies as</p>\n\n<pre><code>n * (1 + 1/2 + 1/3 + ... + 1/n)\n</code></pre>\n\n<p>This series loosely converges towards <code>n * log(n)</code>.</p>\n\n<p>Hence the complexity is <strong>O(N.log(N))</strong> as you expected.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1455204194, "post_id": 35326915, "comment_id": 58393585, "body": "Further analysis : O(n * log(n)) is certainly a worst case - it just does not grow quite that fast.  Apparently between O(n * log(n)/log(log(n))) and O(n * log(n))"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 1, "creation_date": 1455209650, "post_id": 35326915, "comment_id": 58397860, "body": "@dfri By analysis and experimentation, the O() of <code>what()</code> is <code>O(foo(n) * n * ln(n))</code> where <code>foo(n)</code> is TBD.  It is not a constant, but a slowly decreasing value with larger <code>n</code>.  Since it is decreasing,  <code>O(n * ln(n))</code> represents an upper bound."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 1, "creation_date": 1455210024, "post_id": 35326915, "comment_id": 58398128, "body": "@dfri Your <a href=\"http://stackoverflow.com/a/35342203/2410359\">fine mathematical analysis</a>,  like the other 2 good answers, ignore integer arithmetic rounding.  Hence the difference between <code>O(n * ln(n))</code> and actual <code>O()</code> of <code>what()</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 1, "creation_date": 1455210238, "post_id": 35326915, "comment_id": 58398282, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/103212/discussion-between-chux-and-dfri\">continue this discussion in chat</a>."}, {"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 2, "creation_date": 1455222350, "post_id": 35326915, "comment_id": 58405872, "body": "Sorry for late return. Anyway, I tried your <code>n</code> values above against the formula I calculated below, and they <a href=\"https://gist.github.com/dfrib/58cf872ded63a5985924\" rel=\"nofollow noreferrer\">harmonize quite neatly</a>. I.e., the actual growth is well captured by <code>n(1 + ln(n)) - ln(n)</code>."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 11, "last_activity_date": 1455206743, "last_edit_date": 1455206743, "creation_date": 1455142048, "answer_id": 35326915, "question_id": 35326140, "link": "https://stackoverflow.com/questions/35326140/what-is-the-time-complexity-of-my-function/35326915#35326915", "title": "What is the time complexity of my function?", "body": "<p>Attempting this by testing and graphics. The log2 vs log2 plot looks fairly linear.  Something between more than linear O(n) and less than O(n*log(n)). \"Draw\" your own conclusion. </p>\n\n<p>[Edit]</p>\n\n<p>Using the mathematical derived formulas, the O() calculated is an upper bound of O(n * log(n)).  That uses \"fractions of loop iterations\" that increase the count by a fraction and not 1. E.g.  When <code>n</code> is 6, iteration count is  6 + 3 + 2 + 1.5 + 1.2 + 1 = 14.7 loops rather than actual 6 + 3 + 2 + 2 + 2 + 1 = 16.  This difference is relatively less significant as <code>n</code> increases, thus the slightly less than O(n * log(n)) growth.  So by not ignoring code uses integer math, we have a much more challenging question.</p>\n\n<hr>\n\n<p><a href=\"https://i.stack.imgur.com/2HbVS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2HbVS.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>unsigned long long what(int n) {\n  unsigned long long cnt = 0;\n  int i;\n  for (i = 1; i &lt;= n; i++) {\n    int x = n;\n    while (x &gt; 0) {\n      x -= i;\n      cnt++;\n    }\n  }\n  return cnt;\n}\n\nvoid wtest(int n) {\n  unsigned long long cnt = what(n);\n  printf(\"%d %llu\\n\", n, cnt);\n  fflush(stdout);\n}\n\nvoid wtests(void) {\n  int i = INT_MAX/2 + 1;\n  while (i &gt; 0) {\n    wtest(i);\n    i /= 2;\n  }\n}\n\nint main(void) {\n  wtests();\n  return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>1073741824 23567395117\n536870912 11411566988\n268435456 5519718329\n134217728 2666826555\n67108864 1286897093\n33554432 620190504\n16777216 298466265\n8388608 143418602\n4194304 68802063\n2097152 32947406\n1048576 15746897\n524288 7510048\n262144 3573331\n131072 1695816\n65536 802493\n32768 378537\n16384 177921\n8192 83286\n4096 38803\n2048 17973\n1024 8275\n512 3782\n256 1713\n128 765\n64 337\n32 145\n16 61\n8 24\n4 9\n2 3\n1 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "is_accepted": false, "score": 21, "last_activity_date": 1455226201, "last_edit_date": 1455226201, "creation_date": 1455201368, "answer_id": 35342203, "question_id": 35326140, "link": "https://stackoverflow.com/questions/35326140/what-is-the-time-complexity-of-my-function/35342203#35342203", "title": "What is the time complexity of my function?", "body": "<p>As an alternative, use a variable substitution <code>y = n - x</code> followed by Sigma notation to analyse the number of iterations of the inner <code>while</code> loop of your algorithm.</p>\n\n<p><a href=\"https://i.stack.imgur.com/38I3K.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/38I3K.png\" alt=\"enter image description here\"></a></p>\n\n<p>The above overestimates, for each inner while loop, the number of iterations by <code>1</code> for cases where <code>n-1</code> is not a multiple of <code>i</code>, i.e. where <code>(n-1) % i != 0</code>. As we proceed, we'll assume that <code>(n-1)/i</code> is an integer for all values of <code>i</code>, hence overestimating the total number of iterations in the inner <code>while</code> loop, subsequently including the less or equal sign at <code>(i)</code> below. We proceed with the Sigma notation analysis:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UBc6E.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/UBc6E.png\" alt=\"enter image description here\"></a></p>\n\n<p>where we, at <code>(ii)</code>, have approximated the <code>n</code>:th <a href=\"https://en.wikipedia.org/wiki/Harmonic_number\" rel=\"noreferrer\">harmonic number</a> by the associated integral. Hence, you algorithm runs in <code>O(n\u00b7ln(n))</code>, asymptotically.</p>\n\n<hr>\n\n<p>Leaving asymptotic behaviour and studying actual growth of the algorithm, we can use the nice sample data of exact <code>(n,cnt)</code> (where <code>cnt</code> is number of inner iterations) pairs by @chux (refer to his answer), and compare with the estimated number of iterations from above, i.e., <code>n(1+ln(n))-ln(n)</code>. It's apparent that the estimation harmonize neatly with the actual count, see the plots below or <a href=\"https://gist.github.com/dfrib/58cf872ded63a5985924\" rel=\"noreferrer\">this snippet for the actual numbers</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/K4SNk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/K4SNk.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Finally note that if we let <code>n-&gt;\u221e</code> in the sum over <code>1/i</code> above, the resulting series is the <a href=\"https://en.wikipedia.org/wiki/Harmonic_series_(mathematics)\" rel=\"noreferrer\">infinite harmonic series</a>, which is, curiously enough, divergent. The proof for the latter makes use of the fact that in infinite sum of non-zero terms naturally is infinite itself. In practice, however, for a <em>sufficiently large but not infinite n</em>, <code>ln(n)</code> is an appropriate approximation of the sum, and this divergence is not relevant for our asymptotic analysis here.</p>\n\n<hr>\n"}], "owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6957, "favorite_count": 12, "closed_date": 1514135910, "accepted_answer_id": 35326405, "answer_count": 4, "score": 97, "last_activity_date": 1514135925, "creation_date": 1455139253, "last_edit_date": 1508102068, "question_id": 35326140, "link": "https://stackoverflow.com/questions/35326140/what-is-the-time-complexity-of-my-function", "closed_reason": "Duplicate", "title": "What is the time complexity of my function?", "body": "<p>Started studying about complexity, I'm struggling with this one:</p>\n\n<pre><code>void what(int n) {\n    int i;\n    for (i = 1; i &lt;= n; i++) {\n        int x = n;\n        while (x &gt; 0)\n            x -= i;\n    }\n}\n</code></pre>\n\n<p>Well, the first for loop is clearly <code>O(n)</code>. The first iteration is <code>O(n)</code>, second one is <code>O(n/2)</code>.. and like that <code>log(n)</code> times I guess?\nWhich means <strong><code>O(n) * O(log(n)) = O(n * log(n)) complexity</code></strong>. Did I get this right?</p>\n\n<p>Edit: (not a duplicate) I know what Big O is. I've asked the correct evaluation in a specific case. </p>\n"}, {"tags": ["c", "arrays", "memory"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1455138807, "post_id": 35325981, "comment_id": 58360842, "body": "how <code>kstring</code> is defined?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455138960, "post_id": 35325981, "comment_id": 58360932, "body": "If you are getting <code>int len=strp-&gt;length;</code> then you surely should be reallocating another field not <code>strp</code>: and you won&#39;t need to copy the data: <code>realloc</code> takes care of that."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1455139038, "post_id": 35325981, "comment_id": 58360975, "body": "Sure you don&#39;t want to reallocate <code>strp-&gt;data</code> instead of <code>strp</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1455139082, "post_id": 35325981, "comment_id": 58361003, "body": "@immibis I am sure it is the case. Realloc the <code>data</code>, update the <code>length</code>.."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455139149, "post_id": 35325981, "comment_id": 58361039, "body": "You must also update <code>strp-&gt;length = bytes</code>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1455139274, "post_id": 35325981, "comment_id": 58361107, "body": "Also, <code>realloc</code> copies your data to the new array for you.  Your code to &quot;copy older array to new array&quot; is either a no-op (if <code>realloc</code> didn&#39;t have to move the array), or a segmentation violation waiting to happen (if <code>realloc</code> did move the array, in which case the old pointer is invalid). You don&#39;t need that code."}, {"owner": {"reputation": 3, "user_id": 5318933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad244b322a1a54db91559331af341784?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonM9", "link": "https://stackoverflow.com/users/5318933/claytonm9"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455139333, "post_id": 35325981, "comment_id": 58361135, "body": "@WeatherVane where would i need to update that at?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455139384, "post_id": 35325981, "comment_id": 58361156, "body": "After the (corrected) <code>realloc</code> call."}, {"owner": {"reputation": 3, "user_id": 5318933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad244b322a1a54db91559331af341784?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonM9", "link": "https://stackoverflow.com/users/5318933/claytonm9"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455139802, "post_id": 35325981, "comment_id": 58361406, "body": "@WeatherVane okay, so you&#39;re saying that i need to realloc something other than strp?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455140050, "post_id": 35325981, "comment_id": 58361553, "body": "@ClaytonM9 please see my answer, guessed as you didn&#39;t provide full details."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1455143345, "post_id": 35325981, "comment_id": 58363077, "body": "Is <code>kstring</code> your definition or from a library? If from a library, there is almost certainly a whole set of functions already made to operate on <code>kstring</code> and you should use those."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3, "user_id": 5318933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad244b322a1a54db91559331af341784?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonM9", "link": "https://stackoverflow.com/users/5318933/claytonm9"}, "edited": false, "score": 0, "creation_date": 1455140319, "post_id": 35326347, "comment_id": 58361693, "body": "@ClaytonM9 sorry I added one more line mentioned in comments above - update new length."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 1, "last_activity_date": 1455140269, "last_edit_date": 1455140269, "creation_date": 1455139885, "answer_id": 35326347, "question_id": 35325981, "link": "https://stackoverflow.com/questions/35325981/reallocating-memory-to-increase-size-of-array-in-c/35326347#35326347", "title": "Reallocating memory to increase size of array in C", "body": "<p>I made some corrections to your code, untested (no MVCE!)  but I hope it works. Note that there is no need to copy the <em>old</em> data because <code>realloc</code> ensures the previous memory content is preserved. After <code>realloc</code>, the old pointer becomes invalid anyway.</p>\n\n<pre><code>void kstrextend(kstring *strp, size_t nbytes)\n{\n    char *data1;                        // altered type and name\n    int len=strp-&gt;length;\n    if (len &lt; nbytes)\n    {\n        //allocate a new array with larger size\n        data1 = realloc(strp-&gt;data, nbytes);\n        if (data1 == NULL)\n        {\n            // take evasive measures\n        }\n        strp-&gt;data = data1;             // replace old pointer\n        strp-&gt;length = nbytes;          // update length\n\n        //remaining space of new array is filled with '\\0'\n        for (int i = len; i &lt; nbytes; i++)\n        {\n            strp-&gt;data[i] = '\\0';       // use original pointer now\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5318933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad244b322a1a54db91559331af341784?s=128&d=identicon&r=PG&f=1", "display_name": "ClaytonM9", "link": "https://stackoverflow.com/users/5318933/claytonm9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 35326347, "answer_count": 1, "score": 0, "last_activity_date": 1455143168, "creation_date": 1455138719, "last_edit_date": 1455143168, "question_id": 35325981, "link": "https://stackoverflow.com/questions/35325981/reallocating-memory-to-increase-size-of-array-in-c", "title": "Reallocating memory to increase size of array in C", "body": "<p>I am fairly new to C, so I am having trouble with realloc().</p>\n\n<p>I have a test case, where I need to lengthen my <code>kstring</code>.</p>\n\n<p>I've already used <code>malloc()</code> to allocate memory to the array.</p>\n\n<p>Now, I need to lengthen the memory, if <code>nbytes</code> is greater than <code>kstring</code>.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>    void kstrextend(kstring *strp, size_t nbytes)\n    {\n        kstring *strp1;\n        int len=strp-&gt;length;\n        if(len &lt; nbytes)\n        {\n            //allocate a new array with larger size\n            strp1 = realloc(strp, nbytes);\n            //copy older array to new array\n            for(int i = 0; i&lt;len; i++)\n            {\n                strp1-&gt;data[i]=strp-&gt;data[i];\n            }\n            //remaining space of new array is filled with '\\0'\n            for (int i = len; i &lt; nbytes; i++)\n            {\n                strp1-&gt;data[i] = '\\0';\n            }\n        }\n    }\n</code></pre>\n\n<p>Not sure what I'm doing wrong, but I'm getting core dumps, when I try to reallocate. </p>\n"}, {"tags": ["c++", "c", "signals", "backtrace"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1455139067, "post_id": 35325808, "comment_id": 58360990, "body": "Please share your code for <code>backtrace</code> also"}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "edited": false, "score": 2, "creation_date": 1455139689, "post_id": 35325808, "comment_id": 58361336, "body": "The gist of the problem is that <code>backtrace</code> is async-signal unsafe. I can&#39;t understand how there are so many examples out there where people blatantly call it from signal handlers."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5128925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/88dadffd1eaabd18bd1e97612be7f6b0?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5128925/william"}, "edited": false, "score": 1, "creation_date": 1455228638, "post_id": 35348319, "comment_id": 58409410, "body": "@cnicutar Thanks for your comments. I really appreciate your time. Since that&#39;s the case I&#39;m also surprised to see examples out there, espcially in <a href=\"http://www.linuxjournal.com/article/6391?page=0,1\" rel=\"nofollow noreferrer\">Linux Journal</a> that use this as an example. Do you know of any other ways to mimic gdb functionality that prints backtraces upon errors without using signal handlers? Thanks again!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1455218825, "creation_date": 1455218825, "answer_id": 35348319, "question_id": 35325808, "link": "https://stackoverflow.com/questions/35325808/backtrace-inside-signal-handler/35348319#35348319", "title": "Backtrace inside Signal Handler", "body": "<p>As stated <a href=\"https://www.gnu.org/software/libc/manual/html_node/Backtraces.html\" rel=\"nofollow\">here</a>, the <code>backtrace</code> function is AS-Unsafe, which means it is unsafe to call from an asynchronous signal handler.  Doing so invokes undefined behavior.</p>\n"}], "owner": {"reputation": 91, "user_id": 5128925, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/88dadffd1eaabd18bd1e97612be7f6b0?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/5128925/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2052, "favorite_count": 0, "accepted_answer_id": 35348319, "answer_count": 1, "score": 1, "last_activity_date": 1455218825, "creation_date": 1455138074, "last_edit_date": 1495539912, "question_id": 35325808, "link": "https://stackoverflow.com/questions/35325808/backtrace-inside-signal-handler", "title": "Backtrace inside Signal Handler", "body": "<p>I'm trying to following the code from <a href=\"https://stackoverflow.com/questions/3151779/how-its-better-to-invoke-gdb-from-program-to-print-its-stacktrace/4611112#4611112\">this post</a> to have signal handlers print a backtrace on errors such as floating point and segmentation faults. I'm using seg fault signals as a starting point. Here is the code:</p>\n\n<pre><code>#include &lt;cstdlib&gt;      //for exit()\n#include &lt;signal.h&gt;     //signal handling   \n#include &lt;execinfo.h&gt;   //backtrace, backtrace_symbols and backtrace_fd\n#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#define TRACE_MSG fprintf(stderr, \"TRACE at: %s() [%s:%d]\\n\", \\\n        __FUNCTION__, __FILE__, __LINE__)\n\nvoid show_stackframe()\n{\n    void *trace[1024];\n    char **messages = (char **) NULL;\n    int i, trace_size = 0;\n    TRACE_MSG;\n    trace_size = backtrace(trace, 1024);    // segfault here???\n    // More code here to print backtrace, but not needed at the moment..\n    TRACE_MSG;\n}\n\nvoid sigSegvHandler( int signum, siginfo_t* info, void* arg )\n{\n    TRACE_MSG;\n    show_stackframe();\n    return;\n}\n\ndouble func_b()\n{\n    show_stackframe();  // Show that backtrace works without being \n                    // called inside sighandler.\n\n    TRACE_MSG;\n    int int_a[5];\n    int_a[0] = 4;\n    int_a[11] = 10;         // cause a segfault on purpose to see\n                    // how the signal handling performs.\n\n    return 1.1;\n}\n\nint main()\n{\n    // Examine and change the seg fault signal\n    struct sigaction segvAction;   // File: /usr/include/bits/sigaction.h\n\n   // Initialize segvAction struct to all zeros for initialiation\n   memset( &amp;segvAction,  0, sizeof( segvAction ) );\n\n   segvAction.sa_sigaction = sigSegvHandler;\n   segvAction.sa_flags = SA_SIGINFO;    //Invoke signal catching function with 3 arguments instead of 1\n\n   // Set the action for the SIGSEGV signal\n   sigaction( SIGSEGV, &amp;segvAction,  NULL );\n\n   func_b();    // Produce a SIGSEGV error\n}\n</code></pre>\n\n<p>I am compiling using:</p>\n\n<pre><code> g++ -rdynamic testprogram.cpp -o testprogram\n</code></pre>\n\n<p>I receive the following output from the program:</p>\n\n<pre><code>TRACE at: show_stackframe() [stackoverflow.cpp:15]\nTRACE at: show_stackframe() [stackoverflow.cpp:17]\nTRACE at: func_b() [stackoverflow.cpp:33]\nTRACE at: sigSegvHandler() [stackoverflow.cpp:22]\nTRACE at: show_stackframe() [stackoverflow.cpp:15]\nSegmentation fault\n</code></pre>\n\n<p>My question is why does show_stackframe() cause a segmentation fault inside of sigaction but works fine when not inside of the sigaction handler? I obviously seem to be setting up the signal handler/action incorrect but I haven't been able to find it all day. GDB doesn't seem to be any help in this case.</p>\n"}, {"tags": ["python", "c", "algorithm", "python-3.x", "red-black-tree"], "owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455138051, "creation_date": 1455137581, "last_edit_date": 1455138051, "question_id": 35325673, "link": "https://stackoverflow.com/questions/35325673/rbts-deletion-delete-one-child-operation", "title": "RBT&#39;s deletion: delete_one_child operation", "body": "<p>I'm trying to build a RBT, and in particular now I am trying to implement the RBT's delete operation, which is quite complex. I understood that the first idea is to replace the node that we want to delete, if it has two non leaf children, with its successor, which might have at most one non-leaf child. Then deletion reduces always to the case of deleting a node which has at most one child (like the BST's deletion operation).</p>\n\n<p>I was trying to follow the <a href=\"https://en.wikipedia.org/wiki/Red%E2%80%93black_tree#Removal\" rel=\"nofollow\">Wiki's article</a> on the matter, but I am still quite confused after some time trying to understand all the cases, etc. In the article, they represent null-leaf children with real nodes, but in my case I'm representing null-leaf children simply with <code>None</code>, so this might also be a source of confusion for me.</p>\n\n<p>So, from now on suppose we already have replace our node with its successor, eventually if it had 2 non-leaf children initially.</p>\n\n<p>I understood that </p>\n\n<ol>\n<li><p>if a node <code>n</code> is red, we can simply remove it without risking to violate any of the properties. </p></li>\n<li><p>If a node <code>n</code> is black, the story is different. </p>\n\n<p>2.1 The easy case is when the only possible non-leaf child is red. In that case, we simply replace <code>n</code> with its child, and change the child's color to black.</p>\n\n<p>2.2. The difficult case is when both <code>n</code> and its possible child are black. But apparently and surprisingly this can only happen if both children of <code>n</code> are actually null-leaf nodes, in my case they would simply both be <code>None</code>. Why is that? Since we know that <code>n</code> has at most one child, if that child wasn't a null-leaf node, and we know it is black, the black-heigh on the subtree containing it would be greater than the black-height of the subtree containing just the null-leaf node.</p></li>\n</ol>\n\n<hr>\n\n<p>If so far all my reasonings are correct, then I would have a question. On the Wiki's article, there's the following function:</p>\n\n<pre><code>void delete_one_child(struct node *n)\n{\n    /*\n    * Precondition: n has at most one non-null child.\n    */\n\n    struct node *child = is_leaf(n-&gt;right) ? n-&gt;left : n-&gt;right;\n\n    replace_node(n, child);\n\n    if (n-&gt;color == BLACK) {\n        if (child-&gt;color == RED)\n            child-&gt;color = BLACK;\n        else\n            delete_case1(child);\n    }\n\n    free(n);\n}\n</code></pre>\n\n<p>I'm trying to understand what this function is exactly trying to accomplish. So, it replaces <code>n</code> with its child, i.e. in order to delete <code>n</code>. So, it checks if the color of <code>n</code> is black, because if it's red, we are just talking about the first easy situation we talked above. If it's black and its child is red, then we are talking about the 2.1 situation. Otherwise, we go to all other \"complex\" cases.</p>\n\n<p>What I don't understand is the comment under that code:</p>\n\n<blockquote>\n  <p>Note: <strong>If <code>N</code> is a null leaf and we do not want to represent null leaves as actual node objects, we can modify the algorithm by first calling <code>delete_case1()</code> on its parent (the node that we delete, <code>n</code> in the code above) and deleting it afterwards</strong>. </p>\n  \n  <p>We do this if the parent is black (red is trivial), so <em>it behaves in the same way as a null leaf (and is sometimes called a 'phantom' leaf)</em>. </p>\n  \n  <p>And we can safely delete it at the end as <code>n</code> will remain a leaf after all operations, as shown above. </p>\n  \n  <p>In addition, the sibling tests in cases 2 and 3 require updating as it is no longer true that the sibling will have children represented as objects.</p>\n</blockquote>\n\n<p>1) My understanding is that I need to follow this advice, but I am not fully understanding it. In my case, I would need first to call <code>delete_case1(n)</code> (i.e. on <code>n</code>, the node I want to delete), and delete the node just at the end of all calls to \"delete_casesX\"s, and do this only if <code>n</code> is black, i.e. only after the check</p>\n\n<pre><code>if (n-&gt;color == BLACK) {\n    // Should I call delete_case1() on n here\n    // that is, delete_case1(n) ?\n</code></pre>\n\n<p>2) My second problem is that I don't fully understand why should <code>n</code> behave like a null-leaf.</p>\n\n<p>3) What is <code>N</code> here? <code>n</code> or its child?</p>\n\n<p>4) Apparently <code>n</code> must remain a leaf after all operations, but why? (Maybe this question is related to question 2).</p>\n\n<hr>\n\n<p>I have already implemented the insertion operation, and it was a lot more easier than it's being the deletion. I think I had followed also the Wiki's article for the insertion, which also worked when leaves are just nulls or nones.</p>\n\n<p>Could you please lead me in understanding how to implement this RBT by following the Wiki's article? I know this is a very complex question with a further more complex answer, but any help is appreciated. If anything is unclear, just ask.</p>\n"}, {"tags": ["c", "output", "console-application", "histogram"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1455137784, "post_id": 35325672, "comment_id": 58360286, "body": "<code>do {...} while(a &gt; 11)</code> should be <code>for (a=1;a&lt;=10;a++)</code>, but note that the array needs to be declared as <code>int y[11]</code> so that the valid indexes in the array are 0 through 10. And you need to fully initialize the array before using it. Also, be sure to check that the word length is <code>&lt;= 10</code> before updating the array. Many words are longer than 10 letters."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1455137787, "post_id": 35325672, "comment_id": 58360290, "body": "The loop ought to print at least once but stops the first time <code>while (a &gt; 11)</code> is encountered. Are you sure it should not be something like <code>a &lt; 11</code> instead? (The print statements depend on the <code>if</code> - apparently you never get there.)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1455137838, "post_id": 35325672, "comment_id": 58360324, "body": "Are you missing <code>{ braces }</code> in your first <code>else</code> block? The way you have it, <code>b</code> will be reset to <code>0</code> anyway. And why are you following an obsolete tutorial that has <code>main()</code> and not <code>int main(void)</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455139636, "post_id": 35325672, "comment_id": 58361306, "body": "Why use such cryptic variable names that you need a comment to explain what each variable is? Why not name your variables <code>array_position</code>, <code>word_length</code>, etc.?"}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1455138141, "last_edit_date": 1455138141, "creation_date": 1455137794, "answer_id": 35325744, "question_id": 35325672, "link": "https://stackoverflow.com/questions/35325672/c-word-count-histogram-application-returns-no-output/35325744#35325744", "title": "C word count histogram application returns no output", "body": "<p>In this loop</p>\n\n<pre><code>a = 1;                                          //reset the array_position to one\ndo{\n    if(y[a] &gt; 0){                               //if current array_position holds a value greater than 0\n        printf(\"%i\",a);                         //print the name of the array_position (1,2,3...)\n        for(d = 0; d &lt; y[a]; ++d){              //reset the word_length--if the word_length is less than the value contained in the current array position, increment the word length by one\n            putchar('-');                       //print a dash and re-evaluate the condition\n        }\n        if(d == y[a]){                          //when the word_length is equal to the value contained in the current array position\n            putchar('-');                       //print a final dash\n            putchar('\\n');                      //and a newline\n        }\n    }\n    ++a;                                        //increment the array position by one\n}while(a &gt; 11);  \n</code></pre>\n\n<p>you need to check <code>while (a &lt; 11)</code> instead of <code>while (a &gt; 11)</code></p>\n\n<p>And, (as pointed out by @WeatherVane):</p>\n\n<pre><code>if(c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t')      //if c is anything other than a blank, newline or tab\n    ++b;                                     //increment the word_length by one\nelse                                        //otherwise\n    ++a;                                    //increment the array_position by one\n    b = 0; \n</code></pre>\n\n<p>looks suspicious, did you forget the braces around the second block?</p>\n\n<pre><code>if(c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t')      //if c is anything other than a blank, newline or tab\n    ++b;                                     //increment the word_length by one\nelse {                                       //otherwise\n    ++a;                                    //increment the array_position by one\n    b = 0; \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1455138587, "creation_date": 1455138587, "answer_id": 35325943, "question_id": 35325672, "link": "https://stackoverflow.com/questions/35325672/c-word-count-histogram-application-returns-no-output/35325943#35325943", "title": "C word count histogram application returns no output", "body": "<p>Two main issues:</p>\n\n<p>First, as was mentioned before, your <code>do..while</code> loop should be checking for <code>a &lt; 11</code> instead of <code>a &gt; 11</code>.</p>\n\n<p>The second problem is in your first <code>for</code> loop:</p>\n\n<pre><code>for(y[a] = 0; (c = getchar()) != EOF;){     \n    if(c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t')  \n        ++b;                                \n    else                                    \n        ++a;                                \n        b = 0;                              \n}\n</code></pre>\n\n<p>Besides the missing braces around the <code>else</code> part, you're never assigning anything to the elements of <code>y</code> except for position 1 when you first enter the loop.</p>\n\n<p>You need to initialize the array elements to 0, then you need to increment <code>y[b]</code> instead of <code>a</code>:</p>\n\n<pre><code>for (d=0;d&lt;10;d++) {\n    y[d] = 0;\n}\nwhile ((c = getchar()) != EOF) {\n    if(c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t') {\n        ++b;                                \n    } else {\n        ++y[b];\n        b = 0;    \n    }                          \n}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1455138587, "creation_date": 1455137580, "question_id": 35325672, "link": "https://stackoverflow.com/questions/35325672/c-word-count-histogram-application-returns-no-output", "title": "C word count histogram application returns no output", "body": "<p>I'm trying to solve K&amp;R C exercise 1-13 by creating a horizontally-oriented histogram that measures the frequency of words of different lengths in the user's input.  Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain(){\n\nint a, b, c, d;                                 //array_position, word_length, getchar(), word_count\nint y[10];                                      //array representing word lengths from 1-10 letters\n\nb =  0;                                         //word_length initializes with a zero value\na = 1;                                          //array_position initializes with a value of one (no words contain zero characters)\n\n\nfor(y[a] = 0; (c = getchar()) != EOF;){         //current array position initializes with a zero value, and c initializes as the current input character\n    if(c != ' ' &amp;&amp; c != '\\n' &amp;&amp; c != '\\t')      //if c is anything other than a blank, newline or tab\n        ++b;                                     //increment the word_length by one\n    else                                        //otherwise\n        ++a;                                    //increment the array_position by one\n        b = 0;                                  //and reset the word_length to zero\n}\n\na = 1;                                          //reset the array_position to one\n\ndo{\n    if(y[a] &gt; 0){                               //if current array_position holds a value greater than 0\n        printf(\"%i\",a);                         //print the name of the array_position (1,2,3...)\n        for(d = 0; d &lt; y[a]; ++d){              //reset the word_length--if the word_length is less than the value contained in the current array position, increment the word length by one\n            putchar('-');                       //print a dash and re-evaluate the condition\n        }\n        if(d == y[a]){                          //when the word_length is equal to the value contained in the current array position\n            putchar('-');                       //print a final dash\n            putchar('\\n');                      //and a newline\n        }\n    }\n    ++a;                                        //increment the array position by one\n}while(a &gt; 11);                                 //repeat until the current array position is 11\n}\n</code></pre>\n\n<p>The code is meant to produce a very simple chart that would look something like this, sorting words of lengths from 1-10 characters:</p>\n\n<pre><code>1---\n2----------\n3-----\n4--\n</code></pre>\n\n<p>and so on.  It would also omit any lengths that are not represented by one or more words from the input.  However, the code as it appears above returns <em>no</em> output <em>at all</em>, and I've been working on this problem for three days.  </p>\n\n<p>What am I unable to see that is preventing my code from producing the desired output?</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455136490, "post_id": 35325346, "comment_id": 58359568, "body": "&quot;I am working with C legacy code&quot; - So why added the tag for a different language? And provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1455136525, "post_id": 35325346, "comment_id": 58359593, "body": "What compiler are you using? <code>gcc -E</code> is emitting the preprocessed code. But it could be easier just to <code>grep</code> out all of the occurences of <code>#define A_MACRO</code>.."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1455136560, "post_id": 35325346, "comment_id": 58359618, "body": "You need to find in the codebase where this macro is defined.  Run <code>grep &quot;#define.*A_MACRO&quot; *.c *.h</code> to find it."}], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1455136955, "post_id": 35325448, "comment_id": 58359840, "body": "You need two-leveled implementation of <code>STRINGIZE(x)</code> for that to work with arguments which themselves are macros. What you have now will simply print <code>&quot;A_MACRO&quot;</code> string, not the actual &quot;value&quot; of <code>A_MACRO</code> macro. First, <code>#define STRINGIZE_(x) #x</code>, then <code>#define STRINGIZE(x) STRINGIZE_(x)</code>."}, {"owner": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1455137540, "post_id": 35325448, "comment_id": 58360157, "body": "@AnT Two level implementation is not working it&#39;s printing &quot;A_MACRO&quot; I think the only way is <code>-dM</code> flag."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1455138137, "post_id": 35325448, "comment_id": 58360492, "body": "Are you sure <code>A_MACRO</code> is a macro?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "edited": false, "score": 0, "creation_date": 1455138223, "post_id": 35325448, "comment_id": 58360531, "body": "@Nick: Exactly. Could it be that <code>A_MACRO</code> is a typedef-name and not really a macro at all? That would explain why even two-leveled <code>STRINGIZE</code> still prints mere <code>&quot;A_MACRO&quot;</code> string."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 697, "user_id": 3002444, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Sx6Ce.gif?s=128&g=1", "display_name": "8bra1nz", "link": "https://stackoverflow.com/users/3002444/8bra1nz"}, "edited": false, "score": 1, "creation_date": 1455138494, "post_id": 35325448, "comment_id": 58360674, "body": "@Nick: C language does not have <code>assert</code> macro. It has <code>assert(x)</code> macro, i.e. a macro <i>with a parameter</i>. If a macro is defined with a parameter, then macro name alone is not replaced as a macro by the preprocessor. So, in your case <code>assert</code> is not recognized as a macro,"}], "tags": [], "owner": {"reputation": 10964, "user_id": 2478565, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/UnOcW.jpg?s=128&g=1", "display_name": "Drew McGowen", "link": "https://stackoverflow.com/users/2478565/drew-mcgowen"}, "is_accepted": false, "score": 1, "last_activity_date": 1455174425, "last_edit_date": 1455174425, "creation_date": 1455136779, "answer_id": 35325448, "question_id": 35325346, "link": "https://stackoverflow.com/questions/35325346/c-print-value-of-macro/35325448#35325448", "title": "C: print value of macro", "body": "<p>You can create a \"stringize\" macro which converts the definition to a string like so:</p>\n\n<pre><code>#define STRINGIZE_(x) #x\n#define STRINGIZE(x) STRINGIZE_(x)\n</code></pre>\n\n<p>Then you just \"call\" it with the macro name:</p>\n\n<pre><code>printf(\"A_MACRO is defined as %s\\n\", STRINGIZE(A_MACRO));\n</code></pre>\n\n<hr>\n\n<p>Alternatively, depending on the compiler you're using, it might have an option for displaying macro definitions. For example, with <code>gcc</code> you can use the <code>-dM</code> option:</p>\n\n<pre><code>gcc -dM file.c | grep A_MACRO\n</code></pre>\n"}], "owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1354, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455174425, "creation_date": 1455136405, "last_edit_date": 1455136464, "question_id": 35325346, "link": "https://stackoverflow.com/questions/35325346/c-print-value-of-macro", "title": "C: print value of macro", "body": "<p>I am working with C legacy code. In the code, a macro is used:</p>\n\n<pre><code>static int _main(A_MACRO *input_obj)\n{\n ....\n</code></pre>\n\n<p>I am not sure what data type A_MACRO declares input_obj to be. How can I print this information to the screen?</p>\n\n<p>I tried to do it like this:</p>\n\n<pre><code>static int _main(A_MACRO *input_obj)\n{\nsprintf(\"%s is the macro\", A_MACRO);\n....\n</code></pre>\n\n<p>but that resulted in this error message:</p>\n\n<pre><code>error: expected primary-expression before \u2018)\u2019 token\n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "udp", "broadcast"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455136035, "post_id": 35325189, "comment_id": 58359294, "body": "Yeah, you missed to take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455154695, "post_id": 35325189, "comment_id": 58366959, "body": "To get us to debug the problem, 1) post the code 2) post the actual input from the DHCP server (a DHCP is a server, not a client) 3) post the actual output to the DHCP server.  4) post the code.  (1 an 4 are repeats because that is so critical."}, {"owner": {"reputation": 21, "user_id": 5910429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a3bbde57f0a80b03b52ac20e4a28f0?s=128&d=identicon&r=PG&f=1", "display_name": "kaspar", "link": "https://stackoverflow.com/users/5910429/kaspar"}, "edited": false, "score": 0, "creation_date": 1455196906, "post_id": 35325189, "comment_id": 58388100, "body": "Seen so many questions, and then I go all wrong for the first I ask myself - sorry. :)"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5910429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a3bbde57f0a80b03b52ac20e4a28f0?s=128&d=identicon&r=PG&f=1", "display_name": "kaspar", "link": "https://stackoverflow.com/users/5910429/kaspar"}, "is_accepted": true, "score": 1, "last_activity_date": 1455231927, "creation_date": 1455231927, "answer_id": 35351844, "question_id": 35325189, "link": "https://stackoverflow.com/questions/35325189/receive-udp-broadast-with-no-address-assigned-to-interface-with-linux-c-ipv4/35351844#35351844", "title": "Receive UDP broadast with no address assigned to interface with Linux/C/IPv4", "body": "<p>I solved it. \"reverse path filtering\" was activated, causing all IPv4 packets which would take a different return path (or which have no route) to be dropped.\nIf no address is configured for that interface, every packet gets dropped.</p>\n\n<pre><code>echo 0 &gt; /proc/sys/net/ipv4/conf/all/rp_filter\n</code></pre>\n\n<p>did the trick.</p>\n"}], "owner": {"reputation": 21, "user_id": 5910429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a3bbde57f0a80b03b52ac20e4a28f0?s=128&d=identicon&r=PG&f=1", "display_name": "kaspar", "link": "https://stackoverflow.com/users/5910429/kaspar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 35351844, "answer_count": 1, "score": 0, "last_activity_date": 1455231927, "creation_date": 1455135861, "last_edit_date": 1455196856, "question_id": 35325189, "link": "https://stackoverflow.com/questions/35325189/receive-udp-broadast-with-no-address-assigned-to-interface-with-linux-c-ipv4", "title": "Receive UDP broadast with no address assigned to interface with Linux/C/IPv4", "body": "<p>While developing a small DHCP client, I managed to <em>send</em> broadcasts on a specific interface by binding to IFADDR_ANY and setting SO_BROADCAST and SO_BINDTODEVICE, and I can see replies from the DHCP server.</p>\n\n<p>Unfortunately, unless that interface has an address configured, my application doesn't receive any packets. That makes writing a DHCP client rather pointless.</p>\n\n<p><strong>QUESTION:</strong> How can I receive IPv4 UDP broadcasts on an interface that has not assigned an address?</p>\n\n<p>I'm aware of RAW sockets, but I'd like to avoid using them.\nIf sending was impossible, I would just accept that no UDP is possible unless addresses are configured, but as sending works fine and just receiving does not, I'm wondering if I'm missing something.</p>\n\n<p>Here's minimal code:</p>\n\n<pre><code>#define _DEFAULT_SOURCE\n\n#include &lt;sys/types.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;net/if.h&gt;\n#include &lt;unistd.h&gt;\n\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    if(argc &lt; 2) {\n        return 0;\n    }\n\n    struct sockaddr_in src = { .sin_family=AF_INET, .sin_addr.s_addr=INADDR_ANY, .sin_port=htons(68) };\n\n    int fd = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);\n\n    const int on=1;\n    setsockopt(fd, SOL_SOCKET, SO_REUSEADDR, &amp;on, sizeof(on));\n\n    struct ifreq ifr;\n    memset(&amp;ifr, '\\0', sizeof(ifr));\n    snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), argv[1]);\n    ioctl(fd, SIOCGIFINDEX, &amp;ifr);\n    setsockopt(fd, SOL_SOCKET, SO_BINDTODEVICE, (void *)&amp;ifr, sizeof(ifr));\n\n    bind(fd, (struct sockaddr *)&amp;src, sizeof(src));\n\n    char buf[512];\n    ssize_t res = recvfrom(fd, buf, sizeof(buf), 0, NULL, 0);\n    printf(\"res=%zi\\n\", res);\n\n    return 0;\n}\n</code></pre>\n\n<p>I run this through \"sudo strace\", and it stops in recvmsg() forever, even if I can watch broadcast UDP on port 68 in wireshark.</p>\n"}, {"tags": ["c", "gcc", "inline-assembly"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455135941, "post_id": 35325139, "comment_id": 58359241, "body": "RTFM. What&#39;s wrong with <code>asm(&quot;.word 1\\n&quot;: : :);</code>? Please read the documentation and/or a tutorial."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1455135949, "post_id": 35325139, "comment_id": 58359248, "body": "That&#39;s for ARM?  Is this something you can&#39;t do more easily with a separately-compiled .s?"}, {"owner": {"reputation": 173, "user_id": 4999000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53b0dc431083e8643890b5c6c9b0230?s=128&d=identicon&r=PG&f=1", "display_name": "lkamp", "link": "https://stackoverflow.com/users/4999000/lkamp"}, "edited": false, "score": 0, "creation_date": 1455136301, "post_id": 35325139, "comment_id": 58359459, "body": "I&#39;ve edited the question to make clear why I can&#39;t use &quot;.word 1&quot;"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1455137123, "post_id": 35325139, "comment_id": 58359926, "body": "You can&#39;t pass a constant by inlining a <code>.word</code> directive.  You&#39;re just inserting invalid instructions into the function. What are you actually trying to accomplish?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4999000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53b0dc431083e8643890b5c6c9b0230?s=128&d=identicon&r=PG&f=1", "display_name": "lkamp", "link": "https://stackoverflow.com/users/4999000/lkamp"}, "edited": false, "score": 0, "creation_date": 1455138047, "post_id": 35325488, "comment_id": 58360438, "body": "Thank you very much, this looks very promising. I will look into the two options."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 1, "last_activity_date": 1455136924, "creation_date": 1455136924, "answer_id": 35325488, "question_id": 35325139, "link": "https://stackoverflow.com/questions/35325139/inline-assembler-pass-a-constant/35325488#35325488", "title": "Inline assembler: Pass a constant", "body": "<p>Your macro has a <code>;</code> at the end.  So it's a whole statement, not just an expression.  Don't do that.</p>\n\n<p>A <code>.word</code> mixed in with the code of your function is usually going to be an illegal instruction, isn't it?  Are you actually planning to run this binary?</p>\n\n<hr>\n\n<p>You should be able to get the preprocessor to <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Stringification.html\" rel=\"nofollow\">stringify your macro parameter</a>, and let string-concatenation join it up.  Then the assembler can evaluate <code>1+2</code>.</p>\n\n<pre><code>#define LABELS_PUT(b) asm(\".word \" #b  \"\\n\")\n\n\nLABELS_PUT(1+2);   // becomes:\nasm(\".word \" \"1+2\" \"\\n\");\n</code></pre>\n\n<hr>\n\n<p>There's also <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#x86Operandmodifiers\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#x86Operandmodifiers</a>, some of which might work for other architectures:</p>\n\n<pre><code>asm (\".word %c0\" : : \"i\" (b))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1455139634, "post_id": 35325698, "comment_id": 58361304, "body": "The <code>volatile</code> is <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Volatile\" rel=\"nofollow noreferrer\">implicit for GNU C asm statements with no outputs</a>.  That&#39;s why I didn&#39;t use it in my answer."}], "tags": [], "owner": {"reputation": 17, "user_id": 5900899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8beb2418e1ce0305c27a4904d8f6561?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Volt", "link": "https://stackoverflow.com/users/5900899/mark-volt"}, "is_accepted": false, "score": 0, "last_activity_date": 1455137654, "creation_date": 1455137654, "answer_id": 35325698, "question_id": 35325139, "link": "https://stackoverflow.com/questions/35325139/inline-assembler-pass-a-constant/35325698#35325698", "title": "Inline assembler: Pass a constant", "body": "<p>In GCC you can do it like this:</p>\n\n<pre><code>asm __volatile__ (\".word 0x1\");\n</code></pre>\n\n<p>If you are using Visual Studio then you can try:</p>\n\n<pre><code>some_word: _asm{_emit 1000b}\n</code></pre>\n\n<p>It will pass into code word constant 1000b</p>\n\n<p>You can get access with label some_word</p>\n"}], "owner": {"reputation": 173, "user_id": 4999000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53b0dc431083e8643890b5c6c9b0230?s=128&d=identicon&r=PG&f=1", "display_name": "lkamp", "link": "https://stackoverflow.com/users/4999000/lkamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2334, "favorite_count": 0, "accepted_answer_id": 35325488, "answer_count": 2, "score": 1, "last_activity_date": 1455137654, "creation_date": 1455135692, "last_edit_date": 1455137357, "question_id": 35325139, "link": "https://stackoverflow.com/questions/35325139/inline-assembler-pass-a-constant", "title": "Inline assembler: Pass a constant", "body": "<p>I have the following problem: I want to use the following assembler code from my C source files using inline assembler:</p>\n\n<pre><code>.word 1\n</code></pre>\n\n<p>The closest I've gotten is using this inline assembler code:</p>\n\n<pre><code>asm(\".word %0\\n\": : \"i\"(1));\n</code></pre>\n\n<p>However, this results in the following code in the generated assembler file:</p>\n\n<pre><code>.word #1\n</code></pre>\n\n<p>So I need a way to pass a constant that is known at compile time without adding the '#' in front of it. Is this possible using inline assembler?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>To make it more clear why I need this, this is how it will be used:</p>\n\n<pre><code>#define LABELS_PUT(b) asm(\".word %0\\n\": : \"i\"((b)));\n\nint func(void) {\n    LABELS_PUT(1 + 2);\n\n    return 0;\n}\n</code></pre>\n\n<p>I can't use \".word 1\" because the value will be different every time the macro LABELS_PUT is called.</p>\n"}, {"tags": ["c", "parameter-passing"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455135420, "post_id": 35324934, "comment_id": 58358964, "body": "&quot;The variable is however used in my function.&quot; - No, it is not! The warning exactly tells you what your problem is! Where do you think you use it?"}, {"owner": {"reputation": 613, "user_id": 1554734, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6878b1c2864d805172edb55b7e7e7c54?s=128&d=identicon&r=PG", "display_name": "JDL Wahaha", "link": "https://stackoverflow.com/users/1554734/jdl-wahaha"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455135505, "post_id": 35324934, "comment_id": 58359007, "body": "@Olaf I think I&#39;m using it inside my if-else block"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1455135548, "post_id": 35324934, "comment_id": 58359028, "body": "OT: <code>if((hour &gt;= start_hour) || (hour &lt; end_hour)) {</code> are you sure? it seems that you need the and operator <code>&amp;&amp;</code> in this case if you want to chack if the value is between start an end."}, {"owner": {"reputation": 613, "user_id": 1554734, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6878b1c2864d805172edb55b7e7e7c54?s=128&d=identicon&r=PG", "display_name": "JDL Wahaha", "link": "https://stackoverflow.com/users/1554734/jdl-wahaha"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1455136228, "post_id": 35324934, "comment_id": 58359410, "body": "@AlterMann Yes, because I want to turn on the backlight during night time. So if i want to start at 10pm to 7am, then it&#39;d be (hour &gt;= 22) || (hour &lt; 7)."}, {"owner": {"reputation": 613, "user_id": 1554734, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6878b1c2864d805172edb55b7e7e7c54?s=128&d=identicon&r=PG", "display_name": "JDL Wahaha", "link": "https://stackoverflow.com/users/1554734/jdl-wahaha"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1455136343, "post_id": 35324934, "comment_id": 58359481, "body": "@AlterMann  No worries :)"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 1554734, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6878b1c2864d805172edb55b7e7e7c54?s=128&d=identicon&r=PG", "display_name": "JDL Wahaha", "link": "https://stackoverflow.com/users/1554734/jdl-wahaha"}, "edited": false, "score": 1, "creation_date": 1455135691, "post_id": 35325067, "comment_id": 58359097, "body": "Oh i see!! Thank you so much for the detailed explanations! I will accept this answer in 5 mins :)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1455135492, "creation_date": 1455135492, "answer_id": 35325067, "question_id": 35324934, "link": "https://stackoverflow.com/questions/35324934/c-parameter-set-but-not-used/35325067#35325067", "title": "C parameter set but not used", "body": "<p>Just as the error says, in your <code>backlight_subscribe</code> function, you're assigning a value to <code>light_bitmap</code> but you're not reading from it.  That means it's not being used.</p>\n\n<p>In C, all parameters are pass by value.  So the value you assign to <code>light_bitmap</code> is visible only in that function.  If you're intending to change the variable you're passing in, you need to pass in the address of the variable in question, change the function to accept a pointer to that variable, then dereference the pointer when you assign to it:</p>\n\n<pre><code>void backlight_subscribe(GBitmap **light_bitmap, int start_hour, int end_hour) {\n    int hour = get_current_hour();\n    if((hour &gt;= start_hour) || (hour &lt; end_hour)) {\n        accel_tap_service_subscribe(tap_handler);\n        *light_bitmap = gbitmap_create_with_resource(RESOURCE_ID_IMAGE_LIGHT_ON_ICON);\n    } else {\n        accel_tap_service_unsubscribe();\n        *light_bitmap = gbitmap_create_with_resource(RESOURCE_ID_IMAGE_LIGHT_OFF_ICON);\n    }\n}\n</code></pre>\n\n<p>Then you call the function like this:</p>\n\n<pre><code>backlight_subscribe(&amp;light_bitmap, 22, 8);\n</code></pre>\n\n<p>As a side note, the function parameter <code>light_bitmap</code> is masking a global variable of the same name.  That can cause confusion, so try to avoid that.</p>\n"}], "owner": {"reputation": 613, "user_id": 1554734, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6878b1c2864d805172edb55b7e7e7c54?s=128&d=identicon&r=PG", "display_name": "JDL Wahaha", "link": "https://stackoverflow.com/users/1554734/jdl-wahaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4776, "favorite_count": 0, "accepted_answer_id": 35325067, "answer_count": 1, "score": 6, "last_activity_date": 1470074253, "creation_date": 1455135083, "last_edit_date": 1455135863, "question_id": 35324934, "link": "https://stackoverflow.com/questions/35324934/c-parameter-set-but-not-used", "title": "C parameter set but not used", "body": "<p>I am using C to build a pebble watchface. I've been getting an error <code>parameter 'light_bitmap' set but not used [-Werror=unused-but-set-parameter]</code>. The variable is however used in my function. I'm not sure what this message mean. Below is the code that I have:</p>\n\n<p>In header declaration: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void backlight_subscribe(GBitmap *light_bitmap, int start_hour, int end_hour);\n</code></pre>\n\n<p>In definition .c : </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void backlight_subscribe(GBitmap *light_bitmap, int start_hour, int end_hour) {\n    int hour = get_current_hour();\n    if((hour &gt;= start_hour) || (hour &lt; end_hour)) {\n        accel_tap_service_subscribe(tap_handler);\n        light_bitmap = gbitmap_create_with_resource(RESOURCE_ID_IMAGE_LIGHT_ON_ICON);\n    } else {\n        accel_tap_service_unsubscribe();\n        light_bitmap = gbitmap_create_with_resource(RESOURCE_ID_IMAGE_LIGHT_OFF_ICON);\n    }\n}\n</code></pre>\n\n<p>and in main.c: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static GBitmap *light_bitmap;\n...\nstatic void window_load(Window *window) {\n     ...\n     backlight_subscribe(light_bitmap, 22, 8);\n     ...\n}\n\nstatic void init(void) {\n    s_main_window = window_create();\n    window_set_window_handlers(s_main_window, (WindowHandlers) {\n        .load = window_load,\n        .unload = window_unload,\n    });\n    window_stack_push(s_main_window, false); \n}\n\n...\n\nint main(void) {\n    init();\n    app_event_loop();\n    deinit();\n}\n</code></pre>\n\n<p>Full error message: </p>\n\n<pre><code>[16/28] c: src/accel_sensor.c -&gt; build/src/accel_sensor.c.16.o\n../src/accel_sensor.c: In function 'backlight_subscribe':\n../src/accel_sensor.c:22:35: error: parameter 'light_bitmap' set but not used [-Werror=unused-but-set-parameter]\n void backlight_subscribe(GBitmap *light_bitmap, int start_hour, int end_hour) {\n                                   ^\ncc1: all warnings being treated as errors\nWaf: Leaving directory `/home/adminuser/pebble/pebble-app/watchface/build'\nBuild failed\n</code></pre>\n\n<p>Might anyone see where I'm doing wrong? </p>\n"}, {"tags": ["c", "fork", "sleep"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1455134609, "post_id": 35324753, "comment_id": 58358513, "body": "Have another <code>for</code> loop inside the first <code>for</code> loop for <code>pid==0</code> case (child case) that just sleeps and prints its own pid."}, {"owner": {"reputation": 2073, "user_id": 357403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RpSGe.jpg?s=128&g=1", "display_name": "Koshinae", "link": "https://stackoverflow.com/users/357403/koshinae"}, "edited": false, "score": 0, "creation_date": 1455134913, "post_id": 35324753, "comment_id": 58358687, "body": "After you forked, the output order is purely coincidental."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "edited": false, "score": 0, "creation_date": 1455135372, "post_id": 35324809, "comment_id": 58358940, "body": "but I still create 3 child processes in this case. Because what about those processes where pid &gt; 0? How come those processes don&#39;t get to &quot;Main Process&quot;?"}, {"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "reply_to_user": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "edited": false, "score": 1, "creation_date": 1455135522, "post_id": 35324809, "comment_id": 58359014, "body": "@M.Averbach There&#39;s only one process where pid &gt; 0: the original one. It executes the loop and then prints &quot;Main Process&quot;."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1455135833, "last_edit_date": 1455135833, "creation_date": 1455134619, "answer_id": 35324809, "question_id": 35324753, "link": "https://stackoverflow.com/questions/35324753/c-concurrent-processes/35324809#35324809", "title": "C Concurrent Processes", "body": "<p>The child processes will each return 0 to <code>fork</code>.  That means they'll execute the <code>else</code> portion of your <code>if</code> block, which is <code>exit</code>.  In other words, each client process exits almost as soon as it starts.  The children don't print \"Main Process\" because they <code>exit</code> before they get there.</p>\n\n<p>If you want the child processes to sleep, call the <code>sleep</code> function in the child portion of the code, i.e. the <code>else</code> block.</p>\n\n<p>For example, you can do something like this:</p>\n\n<pre><code>...\nelse\n{\n     printf(\"in child %d\\n\", getpid());\n     sleep(1);\n     printf(\"in child %d\\n\", getpid());\n     sleep(3);\n     exit(0);\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I'll explain in more detail exactly what happens:</p>\n\n<p>On the first iteration of the <code>for</code> loop, the original process calls <code>fork</code>.  This function returns twice: once to the parent where it returns the child's pid, and once to the child where it returns 0.  </p>\n\n<p>The parent goes into the <code>if</code> block where it updates its list of pids and goes back to the top of the loop.  The child goes to the <code>else</code> part, where it calls <code>exit</code> which ends the child process.</p>\n\n<p>The original parent process is now a the top of the <code>for</code> loop again, and the above repeats 3 more times.</p>\n"}, {"tags": [], "owner": {"reputation": 3364, "user_id": 693294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d5935d56f077497b60c12cf86b9d2e1?s=128&d=identicon&r=PG", "display_name": "Gilbert", "link": "https://stackoverflow.com/users/693294/gilbert"}, "is_accepted": false, "score": 0, "last_activity_date": 1455136140, "creation_date": 1455136140, "answer_id": 35325272, "question_id": 35324753, "link": "https://stackoverflow.com/questions/35324753/c-concurrent-processes/35325272#35325272", "title": "C Concurrent Processes", "body": "<p>As M. Averbach said, your posted code would exit so fast it would be hard to spot them. But to address your question on how to check if processes are running:</p>\n\n<p>However, if the processes survived a bit longer you could spot them using a basic \"ps\" command can assure you processes are running:</p>\n\n<pre>   ps</pre>\n\n<p>If your child processes may have their own children than using a form that shows in tree format can be helpful:</p>\n\n<pre>   ps jf</pre>\n"}], "owner": {"reputation": 121, "user_id": 5508721, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba4742b7b23ea2c63bff54f442f2f684?s=128&d=identicon&r=PG&f=1", "display_name": "M. Averbach", "link": "https://stackoverflow.com/users/5508721/m-averbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1455136140, "creation_date": 1455134413, "question_id": 35324753, "link": "https://stackoverflow.com/questions/35324753/c-concurrent-processes", "title": "C Concurrent Processes", "body": "<p>I'm trying to do a simple test to see if the processes are running concurrently.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>pid_t pids[argc-1];\npid_t pid;\n\nfor(i=1; i&lt;argc; i++)\n{\n    pid = fork();\n    if (pid &gt; 0)\n    {\n         pids[i-1] = pid;\n         printf(\"process %d created\\n\", pid);\n    }\n    else\n    {\n         exit(0);\n    }\n}\n\nprintf(\"Main Process\\n\");\n\nfor (i=0; i &lt; argc - 1; i++)\n{\n     int status;\n     wait(pids[i], &amp;status, 0);\n     printf(\"Process %d finished\\n\", pids[i]);\n}\n</code></pre>\n\n<p>My argc = 4 in this case, so this creates 3 child processes, exactly what I need.</p>\n\n<p>My question is how can I be sure that all processes are running concurrently? I tried calling sleep but that doesn't help, since the processes are created sequentially and each sleep will make them sleep one at a time. I wanted to set the second child process to sleep(1) just to see if the other two processes will print something for example while it is sleeping, but I can't do that inside the for loop.</p>\n\n<p>Also, why is \"Main Process\" printed only once? Isn't every process, once its done with the for loop, continues to execute until the return statement? I'm confused about this.</p>\n\n<p>Any help would be much appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "parallel-processing", "text-files", "mpi"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1455133903, "post_id": 35324597, "comment_id": 58358068, "body": "If only one process is writing, you don&#39;t need that fancy <code>MPI_File</code> stuff. Just right the file as you usually do. But as it seems, you let the other processes write too, which contradicts your earlier statement."}, {"owner": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1455134043, "post_id": 35324597, "comment_id": 58358160, "body": "I tried to write the file with Just FILE type but is not working. this is just the example. what I need is to write the file from the master after he will get the results from the slaves."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455134085, "post_id": 35324597, "comment_id": 58358184, "body": "This looks like C! Do not add tags for unrelated, different languages."}, {"owner": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "edited": false, "score": 0, "creation_date": 1455134156, "post_id": 35324597, "comment_id": 58358223, "body": "sorry ! I&#39;m kind of new here..:)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1455134471, "post_id": 35324597, "comment_id": 58358433, "body": "<i>&quot;what I need is to write the file from the master after he will get the results from the slaves&quot;</i> So? Just collect the results in the Master, then <code>fprintf</code> them like you would do in plain standard C."}, {"owner": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "edited": false, "score": 0, "creation_date": 1455135296, "post_id": 35324597, "comment_id": 58358910, "body": "I tried it. it&#39;s not working."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1455135518, "post_id": 35324597, "comment_id": 58359012, "body": "What exactly did you try? Right now, you do not even attempt to communicate between the processes. Is that the real issue here, communication between processes via MPI?"}, {"owner": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "edited": false, "score": 0, "creation_date": 1455135627, "post_id": 35324597, "comment_id": 58359069, "body": "No. this is just the sample code. I need to create text file from the master after I will do some calculations. I tried to do this with Just FILE type in C but the file is not created. so from what I read I thought I need to create and manage file in MPI and this method also not working."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1455135679, "post_id": 35324597, "comment_id": 58359095, "body": "@OfirN Then please post some sample code that actually reproduces the problem, i.e. a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Right now, it is impossible to tell what your problem is in the first place."}, {"owner": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "edited": false, "score": 1, "creation_date": 1455136267, "post_id": 35324597, "comment_id": 58359436, "body": "I edited the code to explain my problem."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1455137220, "post_id": 35324597, "comment_id": 58359975, "body": "Hm, with francis&#39; modification, that code should work fine, but I do not feel like setting up MPI on my Windows PC and try it tbh."}], "answers": [{"comments": [{"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "reply_to_user": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "edited": false, "score": 0, "creation_date": 1455139282, "post_id": 35325395, "comment_id": 58361109, "body": "It seems to work on my personal computer. Are you working on a cluster featuring a particular file system ? Can you create a file in this folder ?"}, {"owner": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "edited": false, "score": 0, "creation_date": 1455175898, "post_id": 35325395, "comment_id": 58374091, "body": "I solved the problem. The problem was with the file path. Thank you all for helping !"}], "tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": false, "score": 1, "last_activity_date": 1455141491, "last_edit_date": 1455141491, "creation_date": 1455136563, "answer_id": 35325395, "question_id": 35324597, "link": "https://stackoverflow.com/questions/35324597/writing-to-text-file-in-mpi/35325395#35325395", "title": "writing to text file in MPI", "body": "<p>In the sample code you posted, all processes open the file and only process 0 closes it. Could you try the following modification ?</p>\n\n<pre><code>if (rank == 0) {\n    FILE* f = fopen(\"test.txt\",\"wb+\");\n    if(f==NULL){printf(\"failed to open file: permission issue ?\\n\");exit(1);}\n    for (int i=0; i &lt; 5; i++){\n        fprintf(f,\"%d \\n\",i);\n    }\n    fclose(f);\n}\n</code></pre>\n\n<p>Since your code seems to come from the Argonne National Laboratory, I suppose that it is ran on a cluster using a particular file system. \nThe following code is based on yours. It makes use of <code>MPI_File_open()</code> and <code>MPI_File_write()</code> on a single process, using <code>MPI_COMM_SELF</code>.</p>\n\n<pre><code>/* This is an interactive version of cpi */\n#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(int argc,char *argv[])\n{\n\n    int  namelen, numprocs, rank;\n    char processor_name[MPI_MAX_PROCESSOR_NAME];\n    MPI_Init(&amp;argc,&amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD,&amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD,&amp;numprocs);    \n    MPI_Get_processor_name(processor_name,&amp;namelen);\n    MPI_Status status;\n\n    MPI_File fh;\n\n\n    if (rank == 0) {\n        MPI_File_open(MPI_COMM_SELF, \"test.txt\",MPI_MODE_CREATE | MPI_MODE_WRONLY,MPI_INFO_NULL,&amp;fh);\n        //FILE* f = fopen(\"test.txt\",\"wb+\");\n        //if(f==NULL){\n        //printf(\"failed to open file\\n\");exit(1);\n        //}\n        for (int i=0; i &lt; 5; i++){\n            char buf[42];\n            //fprintf(f,\"%d \\n\",i);\n            snprintf(buf,42,\"%d \\n\",i);\n            MPI_File_write(fh,buf,strlen(buf), MPI_CHAR,&amp;status);\n        }\n        //        fclose(f);\n        MPI_File_close(&amp;fh);\n    }\n    else {\n        // do nothing\n    }\n\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Please make sure that you hae the permission to write in the considered folder. Make sure that all nodes can access this folder ! Try some folders like your folder in <code>/tmp</code> or <code>/scratch</code>... Your cluster may have some sort of documentation somewhere telling you where you can write files !</p>\n"}], "owner": {"reputation": 69, "user_id": 5208378, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/51bd34ba2ac0538b25b16ff7e732b1e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ofir N", "link": "https://stackoverflow.com/users/5208378/ofir-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4549, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1455141491, "creation_date": 1455133796, "last_edit_date": 1455136223, "question_id": 35324597, "link": "https://stackoverflow.com/questions/35324597/writing-to-text-file-in-mpi", "title": "writing to text file in MPI", "body": "<p>I'm trying to write to text file with MPI but the file is not created.\nI need only to write at the master (rank = 0), but nothing works.\nIt only working when I running the program in console (and save corrupt element)  and not in Mpich2 and\nI attached the code.\nThanks for helping.</p>\n\n<pre><code>  /* -*- Mode: C; c-basic-offset:4 ; -*- */\n/*\n *  (C) 2001 by Argonne National Laboratory.\n *      See COPYRIGHT in top-level directory.\n */\n\n/* This is an interactive version of cpi */\n#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(int argc,char *argv[])\n{\n\n    int  namelen, numprocs, rank;\n    char processor_name[MPI_MAX_PROCESSOR_NAME];\n    MPI_Init(&amp;argc,&amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD,&amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD,&amp;numprocs);    \n    MPI_Get_processor_name(processor_name,&amp;namelen);\n    MPI_Status status;\n    FILE* f = fopen(\"test.txt\",\"wb+\");\n\n    if (rank == 0) {\n        for (int i=0; i &lt; 5; i++){\n            fprintf(f,\"%d \\n\",i);\n        }\n        fclose(f);\n    }\n    else {\n        // do nothing\n    }\n\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "clock", "cortex-a"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 5, "creation_date": 1455134122, "post_id": 35324583, "comment_id": 58358205, "body": "Unless you&#39;re running this on the bare metal with no OS or anything else then things like interrupts will use up cycles. Even on bare metal subtle differences in your program or the environment could lead to different cache behaviour."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455134233, "post_id": 35324583, "comment_id": 58358280, "body": "The compiler might intermix your assembler code with other code! Use a <b>single</b> <code>asm</code> statement for code which belongs together! And <code>enabled = 1;</code> is useless, as the variable is not used anymore. How do you ensure your process is not preempted?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455134648, "post_id": 35324583, "comment_id": 58358532, "body": "You should run code you wish to time for thousands or even millions of cycles and take an average. In some cases, the timing measurement may have poor granularity."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1455142696, "post_id": 35324583, "comment_id": 58362777, "body": "If you use a silly PMUSERENR_EL0 hack to access the PMUs from userspace under Linux, you will at best measure the execution of &quot;some stuff&quot; - including, but by no means limited to, your code - and at worst measure absolute nonsense when you read a different cycle counter to the one you started with. The code to manage the PMUs <i>properly</i> is already right there in the kernel: seriously, if you want to actually profile something, use perf."}, {"owner": {"reputation": 1752, "user_id": 1597059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AEZlG.png?s=128&g=1", "display_name": "A23149577", "link": "https://stackoverflow.com/users/1597059/a23149577"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1455144603, "post_id": 35324583, "comment_id": 58363623, "body": "@Notlikethat I haven&#39;t write the readticks code by myself. It seems this method is a common method for getting approximate clock cycles of a C function. However, I&#39;ve already mentioned in my question that apparently this method is not accurate enough and I am seeking for another method. So, it&#39;s greatly appreciated if you let me know what other options I have beside bare metal !"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455162069, "post_id": 35324583, "comment_id": 58368875, "body": "per the man page, <code>gettimeofday()</code> is obsolete and the use of <code>clock_gettime()</code> is recommended.  The <code>clock_gettime()</code> with the <code>CLOCK_PROCESS_CPUTIME_ID</code> gets a timer of how long the specific process (the item your interested in) has been running/  The <code>clock_getres()</code> get the resolution of the requested clock.  Using the resolution, and the value from the call to clock_gettime() you can very closely calculate the number CPU cycles that the current time span has taken."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455162458, "post_id": 35324583, "comment_id": 58368987, "body": "the posted code shows arrays with 3 elements, but other than setting the second and third element, those elements are never used.  Suggest modifying the code to only use the first element. (this could be done by changing the declarations to not be arrays and modifying the code accordingly."}, {"owner": {"reputation": 1752, "user_id": 1597059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AEZlG.png?s=128&g=1", "display_name": "A23149577", "link": "https://stackoverflow.com/users/1597059/a23149577"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455205746, "post_id": 35324583, "comment_id": 58394826, "body": "@user3629249 Could you provide some code using <code>clock_gettime()</code> with the <code>CLOCK_PROCESS_CPUTIME_ID</code> as an answer to this question? I&#39;m not sure if I understood your method correctly."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455206380, "post_id": 35324583, "comment_id": 58395340, "body": "you could read <code>http:&#47;&#47;stackoverflow.com&#47;questions&#47;34758443&#47;how-a-process-ru&zwnj;&#8203;nning-in-linux-can-d&zwnj;&#8203;etermine-for-how-lon&zwnj;&#8203;g-it-has-been-suspen&zwnj;&#8203;ded&#47;34770450#3477045&zwnj;&#8203;0</code> for some details about the timing"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 2426195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAhxa.jpg?s=128&g=1", "display_name": "Sakshama Ghoslya", "link": "https://stackoverflow.com/users/2426195/sakshama-ghoslya"}, "is_accepted": false, "score": 0, "last_activity_date": 1580885316, "creation_date": 1580885316, "answer_id": 60070315, "question_id": 35324583, "link": "https://stackoverflow.com/questions/35324583/clock-cycles-count-variation-cortex-a53-aarch64/60070315#60070315", "title": "Clock Cycles Count Variation Cortex A53 AArch64", "body": "<p>use the following macro</p>\n\n<pre><code>    #define mfcp(rn)    ({u32 rval = 0U; \\\n             __asm__ __volatile__(\\\n               \"mrc \" rn \"\\n\"\\\n               : \"=r\" (rval)\\\n             );\\\n             rval;\\\n             })\n#endif\n</code></pre>\n\n<p>call mfcp with counter register</p>\n\n<pre><code>uint64_t t1,t2;\nt1 = mfcp(CNTPCT_EL0);\n// your code\nt2 = mfcp(CNTPCT_EL0);\n</code></pre>\n"}], "owner": {"reputation": 1752, "user_id": 1597059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AEZlG.png?s=128&g=1", "display_name": "A23149577", "link": "https://stackoverflow.com/users/1597059/a23149577"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1776, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1580885316, "creation_date": 1455133752, "question_id": 35324583, "link": "https://stackoverflow.com/questions/35324583/clock-cycles-count-variation-cortex-a53-aarch64", "title": "Clock Cycles Count Variation Cortex A53 AArch64", "body": "<p>I try to count cpu clock cycles for my function on ARM Cortex-A53 using following function:</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n    readticks(unsigned int *result, int enabled)\n    {\n      struct timeval t;\n      unsigned int cc;\n      unsigned int val;\n      if (!enabled) {\n               // program the performance-counter control-register:\n             asm volatile(\"msr pmcr_el0, %0\" : : \"r\" (17));\n             //enable all counters\n             asm volatile(\"msr PMCNTENSET_EL0, %0\" : : \"r\" (0x8000000f));\n            //clear the overflow \n            asm volatile(\"msr PMOVSCLR_EL0, %0\" : : \"r\" (0x8000000f));\n             enabled = 1;\n      }\n      //read the coutner value\n      asm volatile(\"mrs %0, PMCCNTR_EL0\" : \"=r\" (cc));\n      gettimeofday(&amp;t,(struct timezone *) 0);\n      result[0] = cc;\n      result[1] = t.tv_usec;\n      result[2] = t.tv_sec;\n    }\n</code></pre>\n\n<p>and here is my user space application:</p>\n\n<pre><code>#include &lt;stio.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;time.h&gt;\n\nint main(){\nunsigned int init[3] = {0};\nunsigned int start[3] = {0};\nunsigned int end[3] = {0};\nunsigned int overhead = 0;\n\nreadticks(init, 0);\nreadticks(start, 1);\nreadticks(end, 1);\n\noverhead = end[0] - start[0];\nreadticks(init, 0);\nreadticks(start, 1);\nfoo(); //This is my function \nreadticks(end, 1);\n\nend[0] = end[0] - start[0] - overhead;\nprintf(\"clock cycles= %d\\n\", end[0]);\nreturn 0;\n\n}\n</code></pre>\n\n<p>When I run my code for several times, I have got different clock cycles with relatively high variation (almost 5000). My code should be run around 4000 clock cycles, but I have got 4500 - 9500 clock cycles. Is there any way around that gives me more accurate clock cycles count?  </p>\n"}, {"tags": ["c", "operators"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1455133592, "post_id": 35324484, "comment_id": 58357891, "body": "Did you try to step through using a debugger? Which part you don;t understand?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1455133598, "post_id": 35324484, "comment_id": 58357894, "body": "What exactly don&#39;t you understand?"}, {"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1455133706, "post_id": 35324484, "comment_id": 58357954, "body": "How can you get as a second result 120. Isnt x * (3+2) = 10?"}, {"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1455133775, "post_id": 35324484, "comment_id": 58357999, "body": "The code is  x = x * (3 + 2);"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1455133822, "post_id": 35324484, "comment_id": 58358029, "body": "No, x == 6 at that point. You multiplied 2 * 3. Then 6 * (3 + 2) == 30."}, {"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1455134024, "post_id": 35324484, "comment_id": 58358142, "body": "Aha i didnt know it remembered the value from the previous statement."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1455134281, "post_id": 35324484, "comment_id": 58358320, "body": "It is not a matter of &quot;remembering&quot; it is a matter of the definition of assignment. You explicitly set it."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1455133787, "post_id": 35324556, "comment_id": 58358007, "body": "How can you get as a second result 120. Isnt x * (3+2) = 10?"}, {"owner": {"reputation": 313, "user_id": 4363146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mEOLt.jpg?s=128&g=1", "display_name": "Mohammed Farag", "link": "https://stackoverflow.com/users/4363146/mohammed-farag"}, "reply_to_user": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1455133884, "post_id": 35324556, "comment_id": 58358059, "body": "x was modified in the previous statement x *= 3; this means x=x*3; and x initial value was 2, so after this it becomes 6.  6 * (3 +2) = 30 30 * 4 = 120"}, {"owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 0, "creation_date": 1455133975, "post_id": 35324556, "comment_id": 58358111, "body": "Aha this is what bothered me. So the fist x means the new walue, the second x is has already a value from past."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "edited": false, "score": 1, "creation_date": 1455133993, "post_id": 35324556, "comment_id": 58358122, "body": "@\u017digaGazvoda: Why do you think <code>x</code> would snap back to being 2 after you changed it to 6?"}], "tags": [], "owner": {"reputation": 313, "user_id": 4363146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mEOLt.jpg?s=128&g=1", "display_name": "Mohammed Farag", "link": "https://stackoverflow.com/users/4363146/mohammed-farag"}, "is_accepted": false, "score": 2, "last_activity_date": 1455133675, "creation_date": 1455133675, "answer_id": 35324556, "question_id": 35324484, "link": "https://stackoverflow.com/questions/35324484/calculating-numbers-with-operators/35324556#35324556", "title": "Calculating numbers with operators", "body": "<p><code>*=</code> multiplies left operand by right operand and assigns result to left.</p>\n\n<pre><code>x *= y = z = 4; \n</code></pre>\n\n<p>Works right to left, assigning 4 to z and y then multiplying x by 4.</p>\n\n<pre><code>x *= y += z; \n</code></pre>\n\n<p>z is added to y and result is assigned to y, then x is multiplied by y and result is assigned to x.</p>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 5468199, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff33f8a4d1cbc0da3ec742cb07a5199?s=128&d=identicon&r=PG", "display_name": "Revnic Robert-Nick", "link": "https://stackoverflow.com/users/5468199/revnic-robert-nick"}, "is_accepted": false, "score": 2, "last_activity_date": 1455134106, "last_edit_date": 1455134106, "creation_date": 1455133838, "answer_id": 35324601, "question_id": 35324484, "link": "https://stackoverflow.com/questions/35324484/calculating-numbers-with-operators/35324601#35324601", "title": "Calculating numbers with operators", "body": "<p><code>x*=3</code> means <code>x=x*3</code> => <code>x=2*3=6</code></p>\n\n<p><code>x*=(3+2)</code> means <code>x=x*(3+2)</code> => <code>x=6*5=30</code></p>\n\n<p><code>x*=y=z=4</code> means <code>z=4</code>, then <code>y=4</code>, then <code>x=x*y</code> => <code>x=30*4=120</code></p>\n\n<p><code>x*=y+=z</code> means <code>y=y+z</code> then <code>x=x*y</code> => <code>y=4+4=8</code> then <code>x=120*8=960</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1455134024, "creation_date": 1455134024, "answer_id": 35324664, "question_id": 35324484, "link": "https://stackoverflow.com/questions/35324484/calculating-numbers-with-operators/35324664#35324664", "title": "Calculating numbers with operators", "body": "<ul>\n<li>The first two assignments are straightforward: multiplying <code>x</code> by <code>3</code> gives you <code>6</code>, and then by <code>(3+2)</code> gives you <code>30</code>.</li>\n<li>The third assignment features a chain of assignments, with <code>4</code> assigned to <code>y</code> and <code>z</code>. Since the value of an assignment is always the value of its left side after the assignment, the final multiplication <code>x *= y</code> multiplies <code>x</code> by <code>4</code>, giving you <code>120</code>.</li>\n<li>The last line is the trickiest, because it features two side effects. First, <code>y += z</code> is evaluated, producing <code>8</code>. After that <code>x</code> is multiplied by <code>8</code>, producing its final value of <code>960</code>.</li>\n</ul>\n\n<p>Note that in the last line <code>x</code> is multiplied by <code>8</code>, which may or may not be the value of <code>y</code> at the time the multiplication is performed.</p>\n"}, {"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": true, "score": 3, "last_activity_date": 1455135700, "last_edit_date": 1455135700, "creation_date": 1455134083, "answer_id": 35324674, "question_id": 35324484, "link": "https://stackoverflow.com/questions/35324484/calculating-numbers-with-operators/35324674#35324674", "title": "Calculating numbers with operators", "body": "<p>The operator followed by an equal sign means that the operator is applied to the variable on the left and the variable on the right, followed by an assignment to the variable on the left. You also follow the precedence operations. I have expanded the meaning below.</p>\n\n<pre><code>x *= 3;\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>x = x * 3;  // 6 = 2*3\n</code></pre>\n\n<p>The parentheses shows order of precedence</p>\n\n<pre><code>x = x * (3+2) // x was 6 from the previous line\n</code></pre>\n\n<p>this is </p>\n\n<pre><code>x = x * 5 // which gives 30\n</code></pre>\n\n<p>next</p>\n\n<pre><code>x *= y = z = 4;\n</code></pre>\n\n<p>means</p>\n\n<pre><code>z = 4;\ny = z; //which is 4\nx = x *y; // which is 120 = 30 *4\n</code></pre>\n\n<p>next</p>\n\n<pre><code>x *= y += z;\n</code></pre>\n\n<p>means</p>\n\n<pre><code>y = y + z ; // y = 4 + 4 (8)\nx = x * y; // x = 120 * 8 (960)\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 5879027, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f3ad3a805d456c0ef69ddd8a681e0184?s=128&d=identicon&r=PG&f=1", "display_name": "\u017diga Gazvoda", "link": "https://stackoverflow.com/users/5879027/%c5%bdiga-gazvoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1455917226, "accepted_answer_id": 35324674, "answer_count": 4, "score": -4, "last_activity_date": 1455135700, "creation_date": 1455133411, "last_edit_date": 1455134457, "question_id": 35324484, "link": "https://stackoverflow.com/questions/35324484/calculating-numbers-with-operators", "closed_reason": "Needs details or clarity", "title": "Calculating numbers with operators", "body": "<p>Can anyone explain to me how this code is being calculated using operators.</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n\n  int main(void)\n  {\n\n   int x = 2, y , z;\n\n   x *= 3;\n   printf(\"%d\\n\", x);\n   x = x * (3 + 2);\n   printf(\"%d\\n\", x);\n   x *= y = z = 4;\n   printf(\"%d\\n\", x);\n   x *= y += z;\n   printf(\"%d %d %d\\n\", x, y, z);\n\n   return 0;\n  }\n</code></pre>\n\n<p>As a result, I got the following output:</p>\n\n<blockquote>\n  <p>6,<br>\n  30,<br>\n  120,<br>\n  960, 8, 4,</p>\n</blockquote>\n"}, {"tags": ["c", "linux", "fifo"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1455134403, "post_id": 35324467, "comment_id": 58358390, "body": "You are using <code>select</code> incorrectly. It should not be called for each fd. The main point of <code>select</code> is that it can monitor multiple fds in a single call. You should fill <code>set</code> with all the fds and make a single <code>select</code> call for all of them."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1455136054, "post_id": 35324467, "comment_id": 58359302, "body": "You should not normally open fifos this way, you should open for reading or for writing, not reading and writing on the same descriptor."}, {"owner": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "edited": false, "score": 0, "creation_date": 1455136377, "post_id": 35324467, "comment_id": 58359500, "body": "with blocking mode? I dont think that is the reason?"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1455146641, "post_id": 35324467, "comment_id": 58364471, "body": "You must reset the non-blocking mode on the file descriptor after each read."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1455148238, "post_id": 35324467, "comment_id": 58365030, "body": "Opening a fifo for O_RDWR makes no sense. It is either read or write. BTW: what is <code>demon1</code> ? BTW: select() returning -1 is <b>not an error</b>. Check errno, it could be EAGAIN, or a timer."}, {"owner": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "edited": false, "score": 0, "creation_date": 1455148447, "post_id": 35324467, "comment_id": 58365103, "body": "how to reset non-blocking mode on file descriptor?"}, {"owner": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "edited": false, "score": 0, "creation_date": 1455174211, "post_id": 35324467, "comment_id": 58373280, "body": "It still seems to have the same problem.. Whats funny it seems to work on ubuntu virtual machine but on linux mint laptop no. Communication is blocked and nothing pops out (on ocassions sometimes one fifo is working and its always a diffrent one).."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "edited": false, "score": 0, "creation_date": 1455135128, "post_id": 35324803, "comment_id": 58358798, "body": "I think it should be if (select(max_fd+1, &amp;set, NULL, NULL, NULL)!=-1), anyway it doesn&#39;t work. Now it reads only from last descriptor"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "edited": false, "score": 0, "creation_date": 1455135668, "post_id": 35324803, "comment_id": 58359086, "body": "Something&#39;s wrong somewhere else. Observe the value of set before and after select. If something is incoherent find the problem accordingly. If values are coherent something may goes wrong on the sending part..."}, {"owner": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "edited": false, "score": 0, "creation_date": 1455139947, "post_id": 35324803, "comment_id": 58361497, "body": "The set value is 0 before the select, is that right?"}, {"owner": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "edited": false, "score": 0, "creation_date": 1455146386, "post_id": 35324803, "comment_id": 58364364, "body": "I actually can&#39;t belive it but I think it works! Thanks man! check edit"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1455135175, "last_edit_date": 1455135175, "creation_date": 1455134605, "answer_id": 35324803, "question_id": 35324467, "link": "https://stackoverflow.com/questions/35324467/select-blocks-fifo-from-reading/35324803#35324803", "title": "select blocks fifo from reading", "body": "<p>No you should build a reading set and then make a select call:</p>\n\n<pre><code>// Create the set of descriptor to select on\nFD_ZERO(&amp;set);\nmax_fd = 0;\nfor (i=0; i&lt;n; i++) {\n    FD_SET(fd[i], &amp;set);              // add the descriptor to the set\n    if (fd[i]&gt;max_fd) max_fd = fd[i]; // register the highest descriptor\n}\n\n// Then select on the set of descriptors\nif (select(max_fd+1, &amp;set, NULL, NULL, NULL)!=-1) {\n    // extract which descriptors are available for reading\n    for (int d=0; d&lt;FD_SETSIZE; d++) {\n        if (FD_ISSET(d,&amp;set)) {\n            // something to read in descriptor d\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5775231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b2e40b9b2e151fbfbc18778356be287f?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/5775231/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455174260, "creation_date": 1455133362, "last_edit_date": 1455174260, "question_id": 35324467, "link": "https://stackoverflow.com/questions/35324467/select-blocks-fifo-from-reading", "title": "select blocks fifo from reading", "body": "<p>I have a problem with read() blocking mine program while trying to read from fifo. I want my program to read from multiple file descriptors and while one has information in it, it will write it on standard output. </p>\n\n<p>I tried to use select but it seems not to work.</p>\n\n<p>main.c (there is n number of the second program)</p>\n\n<pre><code>for(i=0;i&lt;n;i++)\n{\n    fd[i] = open(myfifo[i], O_RDWR);\n    printf(\"%s\\n\",myfifo[i]);\n}\nwhile(1)\n{\n        for(i=0;i&lt;n;i++)\n        {\n            FD_ZERO(&amp;set);\n            FD_SET(fd[i], &amp;set);\n            n = select(fd[i]+1, &amp;set, NULL, NULL, NULL);\n            if (n &gt; 0)\n            {   \n                r = read(fd[i], &amp;demon1, sizeof(demon1));\n                if(r !=-1)\n                {\n                    /*READ DATA*/\n                }\n            }\n        }      \n}\n</code></pre>\n\n<p>second program (there is n number of this program)</p>\n\n<pre><code>void signal_handler(int signum)\n{\nif (signum == SIGUSR1)\n{\n    /*STAFF*/\n    mkfifo(myfifo, 0666);\n    fd = open(myfifo, O_RDWR);\n    write(fd, &amp;demon1 , sizeof(demon1));\n    close(fd);\n}\n}\n</code></pre>\n\n<p>every program has fifo named myfifo1 ,myfifo2.. and so on. \nPlease help.</p>\n\n<p>EDIT: Now i have this:</p>\n\n<pre><code>int max_fd;\nwhile(1)\n{\nFD_ZERO(&amp;set);\nfor(i=0;i&lt;n;i++)\n{\n    FD_SET(fd[i], &amp;set);\n    if (fd[i]&gt;max_fd) max_fd = fd[i];\n}\nn = select(max_fd+1, &amp;set, NULL, NULL, NULL);\nif (n != 0)\n{   \n    int d;\n    for (d = 0; d&lt;FD_SETSIZE; d++) \n    {\n        if (FD_ISSET(d,&amp;set))\n        {\n            r = read(d, &amp;demon1, sizeof(demon1));\n            if(r !=-1)\n            {\n               /*CODE*/\n            }\n        }\n    }\n}\n}\n</code></pre>\n\n<p>Reads only correct on first try, later on it reads only the first filedescriptor</p>\n\n<p>apparently there is a diffrence between</p>\n\n<pre><code> //n = select(max_fd+1, &amp;set, NULL, NULL, NULL);\n //if (n != -1)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>    if (select(max_fd+1, &amp;set, NULL, NULL, NULL) != -1)\n</code></pre>\n\n<p>EDIT: It seems to work only on ubuntu virutal machine.. linux mint laptop does not.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1455132971, "post_id": 35324349, "comment_id": 58357494, "body": "what if I enter 100 the very first time?"}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 0, "creation_date": 1455133091, "post_id": 35324349, "comment_id": 58357566, "body": "<code>&quot;it took me like 10 minutes to just pass all the errors and stuffs&quot;</code> - What does this even mean?  Errors in your code?  What are they?"}, {"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455133092, "post_id": 35324349, "comment_id": 58357570, "body": "link to the question <a href=\"https://www.codechef.com/problems/TSORT\" rel=\"nofollow noreferrer\">codechef.com/problems/TSORT</a>"}, {"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455133489, "post_id": 35324349, "comment_id": 58357826, "body": "it&#39;s nothing it&#39;s not related to code"}, {"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455133665, "post_id": 35324349, "comment_id": 58357926, "body": ". you can&#39;t enter 100 since it can only take values upto 20."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "reply_to_user": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 0, "creation_date": 1455134049, "post_id": 35324349, "comment_id": 58358162, "body": "@David He is probably referring to the fact that stackoverflow kept throwing errors (i.e. &quot;too much code, not enough words&quot;) and is lamenting that he had to burn 10 minutes of his precious time getting his question up to minimum standards."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1455134051, "post_id": 35324349, "comment_id": 58358164, "body": "It looks to me like when the variable i = 19 in your loops, then you will be trying to access a[20] which is an array out of bounds error."}, {"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455134755, "post_id": 35324349, "comment_id": 58358589, "body": "They give only 50000 bytes per program and if i go by their rules of 10^6 then i have to replace 20 with 10^6 which will be more than 50000."}, {"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1455134813, "post_id": 35324349, "comment_id": 58358627, "body": "@bruceg No, when you will keep 19 then the condition will get wrong and the loop will terminate. so i don&#39;t think outofbounds is a problem??"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1455135079, "post_id": 35324349, "comment_id": 58358775, "body": "@user5910213 That&#39;s not what that means.  It means the size of your .c file can be a maximum of 50000 bytes in size, not that you can&#39;t use numbers larger than that in your program."}, {"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455135218, "post_id": 35324349, "comment_id": 58358858, "body": "I did that buddy but it&#39;s still showing the same error.. And i thank you all guys for taking your time to resolving this doubt.."}, {"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455197612, "post_id": 35324349, "comment_id": 58388607, "body": "Guys please help if you could I am stuck really bad it is working on my pc fine but in codechef the same runtime error pops up"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455634352, "post_id": 35330550, "comment_id": 58569401, "body": "It further gives time limit exceeded"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1455163255, "creation_date": 1455163255, "answer_id": 35330550, "question_id": 35324349, "link": "https://stackoverflow.com/questions/35324349/heres-the-code-for-arranging-given-numbers-in-ascending-order-but-when-i-subm/35330550#35330550", "title": "Here&#39;s the code for arranging given numbers in ascending order . But when I submit it in Codechef it gives runtime(SIGSEGV) error?", "body": "<p>the problem states that there can be up to 10^6 (1000000) entries.  </p>\n\n<p>Your code is only allowing for 20 entries.<br>\nThe code seems to work for small numbers of numbers.  </p>\n\n<p>Suggest just change <code>a[20]</code> to <code>a[1000000]</code></p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455987748, "post_id": 35438860, "comment_id": 58741874, "body": "I have noticed that codechef often lists some answer as wrong (sadly codechef never says what was wrong about the answer, so, effectively, there is no feedback.)  However, the code does do what the criteria in the question requires.  It is up to you to &#39;guess&#39; what the difference between what codechef wants and what the answer code outputs."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "edited": false, "score": 0, "creation_date": 1455997282, "post_id": 35438860, "comment_id": 58745585, "body": "the first EDIT shows how to eliminate any sorting time taken during execution.  the second EDIT2 shows a much faster way to read and write integers,   I have no idea why CodeChef is saying it gives the wrong answer"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1455997100, "last_edit_date": 1455997100, "creation_date": 1455642784, "answer_id": 35438860, "question_id": 35324349, "link": "https://stackoverflow.com/questions/35324349/heres-the-code-for-arranging-given-numbers-in-ascending-order-but-when-i-subm/35438860#35438860", "title": "Here&#39;s the code for arranging given numbers in ascending order . But when I submit it in Codechef it gives runtime(SIGSEGV) error?", "body": "<p>the main problem with the latest posted code from the OP is the sorting algorithm.</p>\n\n<p><code>bubble</code>, <code>insertion</code> and similar sorting algorithms take massive amounts of time when the number of entries gets beyond ~10 due to the number of comparisons that need to be made.</p>\n\n<p>The following code meets the criteria about the number of entries and the range of valid values for each entry</p>\n\n<p>It uses the <code>qsort</code> function as that is orders of magnitude faster than a bubble or insertion sort when the number of numbers gets large</p>\n\n<p>the following code does not print duplicate numbers, (the codechef problem indicates (but does not specifically say) that duplicate numbers are to only be printed once.</p>\n\n<p>caveat: if the count of number of numbers (the first thing read) is &lt;=0 then this code fails.</p>\n\n<p>caveat: if all the data numbers are INT_MAX then this code fails.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n\nsize_t values[1000000];\n\n\nint cmpfunc (const void * a, const void * b)\n{\n   return (int)( *(size_t*)a - *(size_t*)b );\n}\n\n\nint main(void)\n{\n    size_t i;\n    size_t numberCount; // number of numbers\n\n    // get count of numbers\n    scanf(\"%lu\",&amp;numberCount);\n\n\n    //takes the input and stores in the array\n    for( i=0; i&lt;numberCount; i++)\n    {\n        scanf (\"%lu\",&amp;values[i]);\n    }\n\n    qsort(values, numberCount, sizeof(size_t), cmpfunc);\n\n    //print only the unique sorted elements\n    size_t oldValue = INT_MAX;\n    for( i=0; i&lt;numberCount; i++ )\n    {\n        if( oldValue != values[i] )\n        {\n            printf(\"%ld\\n\", values[i]);\n            oldValue = values[i];\n        }\n    }\n}\n</code></pre>\n\n<p>I have tried this code with several modest sized sets of data, but have not submitted it to codechef.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The following code is MUCH faster and sorts the numbers as they are input.  and works with all the corner cases I was able to come up with.</p>\n\n<p>Corner cases like a 't' value of 0, 1 and values of 0 through 1000000 (10^6)</p>\n\n<pre><code>/*\n * criteria 1\n * Given the list of numbers, you are to sort them in non decreasing order.\n *\n * critiera 2\n * t \u2013 the number of numbers in list, then t lines follow [t &lt;= 10^6].\n *\n * criteria 3\n * Each line contains one integer: N [0 &lt;= N &lt;= 10^6]\n *\n * implied criteria 4\n * duplicate input numbers are to be output only once\n */\n\n\n#include &lt;stdio.h&gt;\n\n\n#define MAX_VALUE (1000000)\n\nint array[ MAX_VALUE +1 ];\n\nint main( void )\n{\n    // get number of test cases\n    size_t  numInputs;\n    scanf( \"%lu\", &amp;numInputs );\n\n    // accumulate test cases, sorted\n    for( size_t i=0; i&lt;numInputs; i++ )\n    {\n        int value;\n        scanf( \"%d\", &amp;value );\n        array[value]++;\n    }\n\n    // output the unique values, assending\n    for( size_t i=0; i&lt;MAX_VALUE; i++ )\n    {\n        if( array[i] )\n        {\n            printf( \"%d\\n\", array[i] );\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>All the accepted submissions are available for this codechef exercise.</p>\n\n<p>Strongly suggest looking at the presented solutions for 'C'</p>\n\n<p>Then use the methods for reading/writing a integer value, because it is much faster than using <code>scanf()</code> and <code>printf()</code> and does not have any possibility of failing like <code>scanf()</code> does.</p>\n\n<p>(I also noticed that many of the accepted solutions look like one submission got accepted, then everyone else copied that solution, even across languages, the same variable names, etc are used.</p>\n\n<p>If you incorporate the method of reading/writing an integer as shown in the accepted solutions, it may help with getting your own solution to be accepted.  Strongly suggest, do not copy the 'guts' of their code for the solution,  But I have seen the same method of reading/writing integers used on several of the different problem sets.</p>\n\n<p><strong>EDIT2</strong></p>\n\n<p>here are the fast read and write functions that I mentioned above:</p>\n\n<p>They replace the calls to <code>scanf()</code> and <code>printf()</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid fastRead( size_t *a );\nvoid fastWrite( size_t a );\n\ninline void fastRead(size_t *a)\n{\n    int c=0;\n    // note: 32 is space character\n    while (c&lt;33) c=getchar_unlocked();\n\n    // initialize result value\n    *a=0;\n\n    // punctuation parens, etc are show stoppers\n    while (c&gt;47 &amp;&amp; c&lt;58)\n    {\n        *a = (*a)*10 + (size_t)(c-48);\n        c=getchar_unlocked();\n    }\n    //printf( \"%s, value: %lu\\n\", __func__, *a );\n} // end function: fastRead\n\n\ninline void fastWrite(size_t a)\n{\n    char snum[20];\n    //printf( \"%s, %lu\\n\", __func__, a );\n\n    int i=0;\n    do\n    {\n        // 48 is numeric character 0\n        snum[i++] = (char)((a%10)+(size_t)48);\n        a=a/10;\n    }while(a&gt;0);\n\n    i=i-1; // correction for overincrement from prior 'while' loop\n\n    while(i&gt;=0)\n    {\n        putchar_unlocked(snum[i--]);\n    }\n    putchar_unlocked('\\n');\n} // end function: fastWrite\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "is_accepted": false, "score": 0, "last_activity_date": 1455941183, "creation_date": 1455941183, "answer_id": 35518982, "question_id": 35324349, "link": "https://stackoverflow.com/questions/35324349/heres-the-code-for-arranging-given-numbers-in-ascending-order-but-when-i-subm/35518982#35518982", "title": "Here&#39;s the code for arranging given numbers in ascending order . But when I submit it in Codechef it gives runtime(SIGSEGV) error?", "body": "<p>Guys one of the answers regarding this is not to use Bubble sort. Because it can't handle large data. And i have used bubble sort. The problem can only be sorted by Merge Sort. This works fine even for large datas. </p>\n"}], "owner": {"reputation": 9, "user_id": 5910213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86e8de829430865567de7febf5e2006c?s=128&d=identicon&r=PG&f=1", "display_name": "user5910213", "link": "https://stackoverflow.com/users/5910213/user5910213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1455997100, "creation_date": 1455132932, "last_edit_date": 1455475807, "question_id": 35324349, "link": "https://stackoverflow.com/questions/35324349/heres-the-code-for-arranging-given-numbers-in-ascending-order-but-when-i-subm", "title": "Here&#39;s the code for arranging given numbers in ascending order . But when I submit it in Codechef it gives runtime(SIGSEGV) error?", "body": "<p>thanks in advance for the help .....\nthought this was my first post on stackoverflow . but i must say it took me like 10 minutes to just pass all the errors and stuffs. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint a[1000000];\n\nint main()\n{\n    long int i,temp,n,j,k;\n    scanf(\"%ld\",&amp;n);\n    k=n-1;\n    //takes the input and stores in the array\n    for(i=0;i&lt;n;i++){\n        scanf (\"%ld\",&amp;a[i]);\n    }\n    //swaps the element\n    for(j=n-1;j&gt;=n-k;j--){\n        for(i=0;i&lt;n-1;i++){\n            if(a[i]&gt;a[i+1]){\n                temp=a[i];\n                a[i]=a[i+1];\n                a[i+1]=temp;\n            }\n        }\n    }\n    //prints the swapped elements\n    for(i=0;i&lt;n;i++) {\n        printf(\"%ld\\n\",a[i]);\n    }\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["python", "c", "arduino", "pyserial"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1455132966, "post_id": 35324295, "comment_id": 58357487, "body": "Do you want <code>else if (wordoftheday == &quot;0&quot;)</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455133240, "post_id": 35324295, "comment_id": 58357668, "body": "@TristanT it is unclear what you want the LED to do when the third textual message type is received."}, {"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455133508, "post_id": 35324295, "comment_id": 58357832, "body": "@Weather when the third textual message type is received. the led needs to do nothing. If it is on it needs to stay on. If it is off it needs to stay off"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455133032, "post_id": 35324360, "comment_id": 58357533, "body": "There is another logic flaw: as @chux mentioned, there is a missing <code>else</code>."}, {"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1455134132, "post_id": 35324360, "comment_id": 58358214, "body": "This was very helpfull. But it does raise an error. <code>cannot convert &#39;String&#39; to &#39;const char*&#39; for argument &#39;1&#39; to &#39;int strcmp(const char*, const char*)&#39; </code> I know what it says. But why does it say it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1455134286, "post_id": 35324360, "comment_id": 58358325, "body": "@TristanT are you writing in Python or in C? Seeing as your program worked, apart from your question <i>why is there a value on the LCD?</i> Which is solved by adding the <code>else</code>"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1455134314, "post_id": 35324360, "comment_id": 58358337, "body": "Ok, I didn&#39;t see the <code>python</code> tag,  <code>wordoftheday</code> is declared as string? then change to <code>if (!strcmp(wordoftheday.c_str(), &quot;1&quot;))</code>"}, {"owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "edited": false, "score": 0, "creation_date": 1455135001, "post_id": 35324360, "comment_id": 58358732, "body": "It worked <code>if (strcmp(wordoftheday.c_str(), &quot;1&quot;) == 0)</code>"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 5, "last_activity_date": 1455133303, "last_edit_date": 1455133303, "creation_date": 1455132959, "answer_id": 35324360, "question_id": 35324295, "link": "https://stackoverflow.com/questions/35324295/check-string-to-be-1-0-else-print-string/35324360#35324360", "title": "check string to be 1, 0 else print string", "body": "<p>You can't compare strings using <code>==</code></p>\n\n<pre><code>if (wordoftheday == \"1\"){email = true;}\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if (strcmp(wordoftheday, \"1\") == 0){email = true;}\n</code></pre>\n\n<p>And (as pointed out by @chux), it seems that you forget an <code>else</code>:</p>\n\n<pre><code> if (strcmp(wordoftheday, \"1\") == 0)\n     email = true;\n else\n if (strcmp(wordoftheday, \"0\") == 0)\n     email = false;\n else { \n     lcd.clear();\n     lcd.print(wordoftheday);\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 2, "last_activity_date": 1455133410, "creation_date": 1455133410, "answer_id": 35324483, "question_id": 35324295, "link": "https://stackoverflow.com/questions/35324295/check-string-to-be-1-0-else-print-string/35324483#35324483", "title": "check string to be 1, 0 else print string", "body": "<p>Besides the previous answer about the compare, you are setting up the ifs incorrectly. When the first if is true, you fall into the else of the second if.</p>\n\n<pre><code>if (Serial.available())\n{\n    wordoftheday = Serial.readString();\n    if (strcmp(wordoftheday, \"1\")) {email = true;}\n    else if ((strcmp(wordoftheday, \"0\")){email = false;}\n    else { \n        // Enters here only if both of the above are false\n        lcd.clear();\n        lcd.print(wordoftheday);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1593, "user_id": 5519975, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6946952cc7f81bfe08d4c286a9563d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/5519975/tristan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 35324360, "answer_count": 2, "score": 4, "last_activity_date": 1455133410, "creation_date": 1455132774, "question_id": 35324295, "link": "https://stackoverflow.com/questions/35324295/check-string-to-be-1-0-else-print-string", "title": "check string to be 1, 0 else print string", "body": "<p>I have an arduino connected to my computer (COM9) and I have 3 python scripts. The first sends a \"1\" over serial.\nThe second sends a \"0\" over serial.\nThe third sends a word that you give it. </p>\n\n<pre><code>ser.write(\"1\")\n</code></pre>\n\n<p>Then on my arduino I have some code. \nIf the python script 1 is launched it would turn on a led. If the 2 second script is launched it would turn off a led. If python script 3 is launched it would print the word to an lcd. </p>\n\n<p>All hardware is configured correctly.\nThe problem is that when I run script 1 not only the led would turn on but there will also be a 1 on the lcd. The other 2 scripts work as expected.</p>\n\n<p>This is a part of the code on my arduino.</p>\n\n<pre><code> if (Serial.available())\n  {\n     wordoftheday = Serial.readString();\n     if (wordoftheday == \"1\"){email = true;}\n     if (wordoftheday == \"0\"){email = false;}\n     else { \n      lcd.clear();\n      lcd.print(wordoftheday);\n      }\n  }\n\n  if (email == true){digitalWrite(9, HIGH);}\n  if (email == false){digitalWrite(9, LOW);}\n</code></pre>\n"}, {"tags": ["c", "linux", "multithreading", "shared-libraries"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455131590, "post_id": 35323884, "comment_id": 58356557, "body": "Does the term thread <b>local</b> ring a bell?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1455144162, "post_id": 35323884, "comment_id": 58363437, "body": "Have each thread store its TLS addresses as pointeters somewhere (e.g global array) that the main thread can access. The main thread can then dereference those pointers."}, {"owner": {"reputation": 83, "user_id": 3761728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba620671f972a605f5140eb4688f6736?s=128&d=identicon&r=PG&f=1", "display_name": "user3761728", "link": "https://stackoverflow.com/users/3761728/user3761728"}, "edited": false, "score": 0, "creation_date": 1455216448, "post_id": 35323884, "comment_id": 58402277, "body": "Hi, yes but the local libraries cannot be modified. I was wondering if there is anything I can do using the __tls_get_addr or other ways to manipulate the TLS variables. I have been thinking maybe a callback function but doesn&#39;t know exactly where to start look at."}], "owner": {"reputation": 83, "user_id": 3761728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba620671f972a605f5140eb4688f6736?s=128&d=identicon&r=PG&f=1", "display_name": "user3761728", "link": "https://stackoverflow.com/users/3761728/user3761728"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455131399, "creation_date": 1455131399, "question_id": 35323884, "link": "https://stackoverflow.com/questions/35323884/access-thread-local-global-variable-from-another-thread-in-dynamic-loaded-librar", "title": "Access Thread local global variable from another thread in dynamic loaded library &amp; C &amp; Linux?", "body": "<p>So I currently have some dynamic library loaded in my main program.\nThere are some thread local variables in the dynamic library which my main thread wants to find out the values of those local variables for each of the thread spawned.</p>\n\n<p>However, as far as I know, dlopen()/dlsym()/dlclose() combination only returns the address of the variables in the current thread, but I need the variables from all the threads.</p>\n\n<p>I was wondering if there is any pointers I can look up in order to achieve this? </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "output", "character", "variable-assignment"], "comments": [{"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1455132150, "post_id": 35323853, "comment_id": 58356925, "body": "Check your types. <code>char</code> rolls over to 0 once it reaches 255."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 1, "creation_date": 1455132180, "post_id": 35323853, "comment_id": 58356945, "body": "@RPGillespie and what if <code>char</code> is signed?"}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 5468199, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff33f8a4d1cbc0da3ec742cb07a5199?s=128&d=identicon&r=PG", "display_name": "Revnic Robert-Nick", "link": "https://stackoverflow.com/users/5468199/revnic-robert-nick"}, "edited": false, "score": 0, "creation_date": 1455131715, "post_id": 35323898, "comment_id": 58356647, "body": "Ok.I got it.Thank you very much!"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 5, "last_activity_date": 1455131434, "creation_date": 1455131434, "answer_id": 35323898, "question_id": 35323853, "link": "https://stackoverflow.com/questions/35323853/my-c-programs-output-is-not-the-expected-one/35323898#35323898", "title": "My C program&#39;s output is not the expected one", "body": "<p><code>char</code> can take values from 0 to 255 because it's 8 bit.</p>\n\n<p>97 + 259 = 356 and 356 modulo 256 is 100.</p>\n"}, {"comments": [{"owner": {"reputation": 448, "user_id": 5468199, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff33f8a4d1cbc0da3ec742cb07a5199?s=128&d=identicon&r=PG", "display_name": "Revnic Robert-Nick", "link": "https://stackoverflow.com/users/5468199/revnic-robert-nick"}, "edited": false, "score": 0, "creation_date": 1455131892, "post_id": 35323907, "comment_id": 58356757, "body": "Thanks a lot for your detailed explanation!.And I think 356 &amp; 0xFF -&gt; 100."}], "tags": [], "owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "is_accepted": true, "score": 5, "last_activity_date": 1455132159, "last_edit_date": 1455132159, "creation_date": 1455131467, "answer_id": 35323907, "question_id": 35323853, "link": "https://stackoverflow.com/questions/35323853/my-c-programs-output-is-not-the-expected-one/35323907#35323907", "title": "My C program&#39;s output is not the expected one", "body": "<p><code>char</code> is an 8bit data type, and you greatly exceeded its max representation:</p>\n\n<pre><code>a -&gt; ascii 97\n97 + 259 -&gt; 356\n356 &amp; 0xFF -&gt; 100 - overflowed, strip off \"high bit\" which can't be stored.\n100 -&gt; ascii 'd'\n</code></pre>\n"}], "owner": {"reputation": 448, "user_id": 5468199, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fff33f8a4d1cbc0da3ec742cb07a5199?s=128&d=identicon&r=PG", "display_name": "Revnic Robert-Nick", "link": "https://stackoverflow.com/users/5468199/revnic-robert-nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 35323907, "answer_count": 2, "score": 1, "last_activity_date": 1455133005, "creation_date": 1455131294, "last_edit_date": 1455133005, "question_id": 35323853, "link": "https://stackoverflow.com/questions/35323853/my-c-programs-output-is-not-the-expected-one", "title": "My C program&#39;s output is not the expected one", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nint main()\n{\n   char c, p;\n   p=getchar();\n   int n=p+259;\n   c=n;\n   putchar(c);\n   return 0;\n}\n</code></pre>\n\n<p>If I input the 'a' character, could someone tell me why this program's output is the 'd' character?</p>\n\n<p>If p='a', then n=97+259=356.\nHow is it possible to assign to c the value 100(ASCII code for 'd') if my n variable is 356?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 1118, "user_id": 5385625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CKfR0.jpg?s=128&g=1", "display_name": "Sam Orozco", "link": "https://stackoverflow.com/users/5385625/sam-orozco"}, "edited": false, "score": 3, "creation_date": 1455130756, "post_id": 35323593, "comment_id": 58356028, "body": "Show us output. What can&#39;t you understand"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5895288, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2b34e07ebaf5fca4749dc871e9561dc?s=128&d=identicon&r=PG&f=1", "display_name": "atiesh", "link": "https://stackoverflow.com/users/5895288/atiesh"}, "edited": false, "score": 0, "creation_date": 1455131542, "post_id": 35323751, "comment_id": 58356518, "body": "This might be a stupid question, but how is the next 4 then - when j = 3?"}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 97, "user_id": 5895288, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2b34e07ebaf5fca4749dc871e9561dc?s=128&d=identicon&r=PG&f=1", "display_name": "atiesh", "link": "https://stackoverflow.com/users/5895288/atiesh"}, "edited": false, "score": 0, "creation_date": 1455131671, "post_id": 35323751, "comment_id": 58356621, "body": "Because second loop iterates trough array and when <code>j = 3</code> you will change value of <code>array[3]</code>, you will change it with second loop: <code>array[0] + array[1] + ...</code> and so it will sum you <code>1 + 1 + 2</code> which is 4."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "reply_to_user": {"reputation": 97, "user_id": 5895288, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2b34e07ebaf5fca4749dc871e9561dc?s=128&d=identicon&r=PG&f=1", "display_name": "atiesh", "link": "https://stackoverflow.com/users/5895288/atiesh"}, "edited": false, "score": 0, "creation_date": 1455131808, "post_id": 35323751, "comment_id": 58356705, "body": "In first iteration: <code>array[3] = array[3] + array[0]</code>, and in next iteration of second for loop <code>array[3] = array[3] + array[1]</code> etc."}, {"owner": {"reputation": 97, "user_id": 5895288, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2b34e07ebaf5fca4749dc871e9561dc?s=128&d=identicon&r=PG&f=1", "display_name": "atiesh", "link": "https://stackoverflow.com/users/5895288/atiesh"}, "edited": false, "score": 0, "creation_date": 1455131914, "post_id": 35323751, "comment_id": 58356767, "body": "Thank you! This was helpful :)"}], "tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": true, "score": 0, "last_activity_date": 1455130998, "creation_date": 1455130998, "answer_id": 35323751, "question_id": 35323593, "link": "https://stackoverflow.com/questions/35323593/c-array-in-two-for-loops/35323751#35323751", "title": "C - Array in two for-loops", "body": "<p>You have one loop that will iterate trough array and modify each element as a sum of all others. Only catch is that sum changes as <code>j</code> changes.</p>\n\n<ul>\n<li>On start array is: <code>1, 0, 0, 0, 0, 0, 0, 0, 0, 0</code></li>\n<li>After first iteration: <code>1, 0, 0, 0, 0, 0, 0, 0, 0, 0</code> when <code>j = 0</code> </li>\n<li>After second iteration: <code>1,1, 0, 0, 0, 0, 0, 0, 0, 0</code>  when <code>j = 1</code></li>\n<li>After third iteration: <code>1, 1, 2, 0, 0, 0,0, 0, 0, 0</code> when <code>j = 2</code>\netc.</li>\n</ul>\n\n<p>Please read more about <a href=\"http://www.tutorialspoint.com/cprogramming/c_for_loop.htm\" rel=\"nofollow\">for</a> loops. </p>\n"}], "owner": {"reputation": 97, "user_id": 5895288, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2b34e07ebaf5fca4749dc871e9561dc?s=128&d=identicon&r=PG&f=1", "display_name": "atiesh", "link": "https://stackoverflow.com/users/5895288/atiesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 35323751, "answer_count": 1, "score": -3, "last_activity_date": 1455130998, "creation_date": 1455130512, "question_id": 35323593, "link": "https://stackoverflow.com/questions/35323593/c-array-in-two-for-loops", "title": "C - Array in two for-loops", "body": "<p>Why does this code print as it does? I am trying to understand why this code with arrays prints as it does, but I am not quite sure. Can anyone try to help me understand? Thanks!</p>\n\n<pre><code>int main (void)\n{\n  int numbers[10] = {1, 0, 0, 0, 0, 0, 0, 0, 0, 0};\n  int i, j;\n\n  for (j = 0; j &lt; 10; j++)\n  {\n    for (i = 0; i &lt; j; i++)\n    {\n      numbers[j] += numbers[i];\n    }\n  }\n\n  for (j = 0; j &lt; 10; j++)\n  {\n    printf (\"%d \", numbers[j]);\n    printf (\"\\n\");\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "queue", "push", "valgrind"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455129670, "post_id": 35323251, "comment_id": 58355377, "body": "TL;DR! Learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <b><a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a></b>."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5632572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0583682f8973c148efbeae6a9f75ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Ellis", "link": "https://stackoverflow.com/users/5632572/michael-ellis"}, "edited": false, "score": 0, "creation_date": 1455133895, "post_id": 35323425, "comment_id": 58358065, "body": "That makes sense, thank you! I have now fully completed the assignment"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 0, "last_activity_date": 1455129951, "creation_date": 1455129951, "answer_id": 35323425, "question_id": 35323251, "link": "https://stackoverflow.com/questions/35323251/error-allocating-memory-for-temp-in-queue-push-in-c-invalid-write-size-of-8-from/35323425#35323425", "title": "Error allocating memory for temp in queue push in c invalid write size of 8 from valgrind", "body": "<p>When the <code>Map</code> is empty, both <code>front</code> and <code>rear</code> are NULL.  So <code>temp-&gt;loc</code> is dereferencing a NULL pointer.</p>\n\n<p>You need to <code>malloc</code> the new node and add that to the list.  Additionally, you don't want to <code>free</code> here, as that deallocates the memory that you just added to the list.</p>\n\n<pre><code>void push(struct Map *map, struct Location location){\n    struct Node *temp = malloc(sizeof(struct Node));\n    temp-&gt;loc = location;\n    temp-&gt;next = NULL;\n\n    if(map-&gt;rear == NULL) { // if queue empty\n        map-&gt;front = temp; // First NODE \n        map-&gt;rear = map-&gt;front;\n    }else{// if there is stuff in the queue\n        map-&gt;rear-&gt;next = temp; \n        map-&gt;rear = temp;\n        // Insert End \n    }\n}\n</code></pre>\n\n<p>In <code>pop</code> is where you want to deallocate the memory:</p>\n\n<pre><code>void pop(struct Map *map){\n    struct Node *temp = map-&gt;front;\n\n    if (map-&gt;front != NULL){//if not empty\n        if (map-&gt;front == map-&gt;rear){\n            map-&gt;rear = NULL;//if the line length is 1, empty it\n            map-&gt;front = NULL;\n        }else{\n            map-&gt;front = map-&gt;front-&gt;next;//next in line\n        }\n        free(temp);\n    }else{\n        map-&gt;rear = NULL;//empty out the queue\n        map-&gt;front = NULL;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5632572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0583682f8973c148efbeae6a9f75ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Ellis", "link": "https://stackoverflow.com/users/5632572/michael-ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 35323425, "answer_count": 1, "score": 0, "last_activity_date": 1455129951, "creation_date": 1455129297, "question_id": 35323251, "link": "https://stackoverflow.com/questions/35323251/error-allocating-memory-for-temp-in-queue-push-in-c-invalid-write-size-of-8-from", "title": "Error allocating memory for temp in queue push in c invalid write size of 8 from valgrind", "body": "<p>This is my push function</p>\n\n<pre><code>void push(struct Map *map, struct Location location){\n    struct Node *temp = map-&gt;front;\n    temp-&gt;loc = location; //this line causes the error\n    temp-&gt;next = NULL;\n\n    if(map-&gt;rear == NULL) { // if queue empty\n        map-&gt;front = temp; // First NODE \n        map-&gt;rear = map-&gt;front;\n    }else{// if there is stuff in the queue\n        map-&gt;rear-&gt;next = temp; \n        map-&gt;rear = temp;\n        // Insert End \n    }\n    free(temp);\n}\n</code></pre>\n\n<p>and I am getting this error</p>\n\n<pre><code>==2301== Invalid write of size 8\n==2301==    at 0x401148: push (3146.c:239)\n==2301==    by 0x400DE7: findEntrance (3146.c:164)\n==2301==    by 0x400820: main (3146.c:55)\n==2301==  Address 0x0 is not stack'd, malloc'd or (recently) free'd\n==2301== \n</code></pre>\n\n<p>I am doing a breadth first search on a grid of characters arranged to be a maze. I have been having trouble getting no memory leaks so I have finally found that using malloc helps, but I don't understand why I cannot do this data assignment without a segfault</p>\n\n<p>The alternative is to not free it and have memory leaks, which I don't think is an acceptable solution. Where is my logic wrong?</p>\n\n<p>Below this is the whole program </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Location;\nstruct Map;\nstruct Node;\n\n//function names seem to self describe\nvoid pathFinder(struct Map*);\nvoid findEntrance(struct Map*);\nvoid readInMap(struct Map*);\nvoid printMap(struct Map*);//to screen\n/* Q funcs */\nvoid pop(struct Map*);\nvoid push(struct Map*, struct Location);\n\n\nstruct Location {// simple location type \n    int x;\n    int y;\n};\nstruct Node {//standard linked list node\n    struct Location loc;\n    struct Node *next;\n};\nstruct Map { //variable size encompassing array, and dimension variables\n    char arr[100][100];\n    int xLength;//dimensions\n    int yLength;\n    int complete;\n    struct Node *rear;//Q pointers\n    struct Node *front;\n    struct Node *currLoc; //temp for BFS\n    struct Location entrance;\n};\n\n\nint main(){\n    struct Map map;//the one map to rule them all\n    map.xLength = 0;//map dimensions\n    map.yLength = 0;\n    map.front = NULL; // queue pointers init\n    map.rear = NULL;\n    map.currLoc = NULL;\n    map.entrance.x = 0;\n    map.entrance.y = 0;\n    map.complete = 0;\n\n    readInMap(&amp;map);\n    findEntrance(&amp;map);//start off by finding where to start\n    pathFinder(&amp;map); // problem solver method \n    printMap(&amp;map);\n\n    free(map.front);\n    free(map.rear);\n    free(map.currLoc);\n    return 0;\n\n}\n\nvoid pathFinder(struct Map *map){\n    int x;//should be the entrance already pushed from findEntrance\n    int y;\n    int done = 0;\n    struct Location temp;\n    temp.x = 0;// temp for pushing locations that are adjacent 0's\n    temp.y = 0;\n\n    while(map-&gt;front != NULL){\n        map-&gt;currLoc = map-&gt;front;//currLoc is just a copy so that we can pop the map location of currLoc from Q\n        pop(map);// pop so it cant be used twice in this loop\n        x = map-&gt;currLoc-&gt;loc.x;\n        y = map-&gt;currLoc-&gt;loc.y;\n        temp.x = 0;\n        temp.y = 0;\n\n        if(map-&gt;arr[y][x] == '0'){//protection of 1 values from replacement\n            map-&gt;arr[y][x] = 'X';//replace the array position loc w x\n        }\n\n        if(map-&gt;arr[y][x] == '0'){//protection of 1 values from replacement\n            map-&gt;arr[y][x] = 'X';//replace the array position loc w x\n            printf(\"test\\n\");\n        }\n            /* find adjacent 0's */\n        if((y &lt; map-&gt;xLength)&amp;&amp;(map-&gt;arr[y+1][x] == '0')){\n            temp.x = x;\n            temp.y = y+1;\n            push(map, temp);\n        }\n        if((x &lt; map-&gt;xLength)&amp;&amp;(map-&gt;arr[y][x+1] == '0')){\n            temp.x = x+1;\n            temp.y = y;\n            push(map, temp);\n        }\n        if((y &gt; 0)&amp;&amp;(map-&gt;arr[y-1][x] == '0')){\n            temp.x = x;\n            temp.y = y-1;\n            push(map, temp);\n        }\n        if((x &gt; 0)&amp;&amp;(map-&gt;arr[y][x-1] == '0')){\n            temp.x = x-1;\n            temp.y = y;\n            push(map, temp);\n        }\n        if((x == 0)||(x == map-&gt;xLength)||(y == 0)||(y == map-&gt;yLength)){  //then its not on the edge\n            if((x != map-&gt;entrance.x)&amp;&amp;(y != map-&gt;entrance.y)){\n               map-&gt;front = NULL;\n               map-&gt;complete++;\n            }\n        }\n    } \n}\n\nvoid findEntrance(struct Map *map){\n    struct Location entrance;\n    int done = 0;\n    int y=0;//index of current row depth\n    int x=0;//index of current column depth\n    if (done == 0){\n        for (x=0;x&lt;=map-&gt;xLength;x++){ // top row\n            if (map-&gt;arr[y][x] == '0') {\n                entrance.x = x;\n                entrance.y = y;\n                done = 1;\n            }\n        }\n    }\n    if (done == 0){\n        for(y=0;y&lt;=map-&gt;yLength;y++){//down the right side\n            if (map-&gt;arr[y][map-&gt;xLength] == '0') {\n                entrance.x = x;\n                entrance.y = y;\n                done = 1;\n            }\n        }\n    }\n    if (done == 0){\n        for(x;x&gt;=0;x--){//bottom row RtoL\n            if (map-&gt;arr[map-&gt;yLength][x] == '0') {\n                entrance.x = x;\n                entrance.y = y;\n                done = 1;\n            }\n        }\n    }\n    if (done == 0){\n        for(y;y&gt;=0;y--){//up the left side\n            if (map-&gt;arr[y][0] == '0') {\n                entrance.x = x;\n                entrance.y = y;\n                done = 1;\n            }\n        }\n    }\n\n    map-&gt;entrance = entrance;\n    push(map, map-&gt;entrance);\n}\n\nvoid readInMap(struct Map *map){\n    FILE *fptr;\n    char c;\n    char file_name[20];\n    int i,j;\n    int rows;\n    int cols;\n    int x,y;\n    printf(\"Size\\n\");\n    printf(\"Rows:\");\n    scanf(\"%i\", &amp;rows);\n    printf(\"Columns:\");\n    scanf(\"%i\", &amp;cols);\n\n    map-&gt;xLength = cols-1; //[y][xLength]\n    map-&gt;yLength = rows-1; //[yLength][x]\n    for (x=0;x&lt;100;x++){\n        for (y=0;y&lt;100;y++){\n            map-&gt;arr[x][y] = '1';//whole array is 1\n        }\n    }\n\n    printf(\"Type in the name of the file containing the Field\\n\");\n    scanf(\"%s\",file_name);\n    fptr=fopen(file_name, \"r\");\n    for (i = 0; i &lt;= map-&gt;xLength; i++){\n        for (j = 0; j &lt;= map-&gt;yLength; j++){\n            c=fgetc(fptr); //handles new line character and spaces\n            while ( !((c == '1') || (c =='0')) ) {\n                c=fgetc(fptr);\n            }\n            map-&gt;arr[i][j] = c;\n        }\n    }\n    printf(\"\\n\");\n    fclose(fptr);\n}\n\nvoid printMap(struct Map *map){\n    int y;//index of current row depth\n    int x;//index of current column depth\n    for (x=0;x&lt;=map-&gt;xLength;x++){\n        for (y=0;y&lt;=map-&gt;yLength;y++){//current pos (x,y)\n            printf(\"%c\", map-&gt;arr[x][y]);\n        }\n        printf(\"\\n\");\n    }\n    if(map-&gt;complete != 0){\n        printf(\"\\n An exit to the maze was found that is not the entrance\\n\");\n    }else{\n        printf(\"\\n No exit was found  \\n\");\n    }\n}\n\n\nvoid pop(struct Map *map){\n    if (map-&gt;front != NULL){//if not empty\n        if (map-&gt;front == map-&gt;rear){\n            map-&gt;rear = NULL;//if the line length is 1, empty it\n            map-&gt;front = NULL;\n        }else{\n            map-&gt;front = map-&gt;front-&gt;next;//next in line\n        }\n    }else{\n        map-&gt;rear = NULL;//empty out the queue\n        map-&gt;front = NULL;\n    }\n}\n\nvoid push(struct Map *map, struct Location location){\n    struct Node *temp = (struct Node*)malloc(sizeof(struct Node));\n    temp-&gt;loc = location;\n    temp-&gt;next = NULL;\n\n    if(map-&gt;rear == NULL) { // if queue empty\n        map-&gt;front = temp; // First NODE \n        map-&gt;rear = map-&gt;front;\n    }else{// if there is stuff in the queue\n        map-&gt;rear-&gt;next = temp; \n        map-&gt;rear = temp;\n        // Insert End \n    }\n    free(temp);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 9, "creation_date": 1455129232, "post_id": 35323195, "comment_id": 58355109, "body": "<code>int i = 0, j; j = i-ABC</code>."}, {"owner": {"reputation": 1686, "user_id": 2052947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vaBKe.jpg?s=128&g=1", "display_name": "Forhad Ahmed", "link": "https://stackoverflow.com/users/2052947/forhad-ahmed"}, "edited": false, "score": 4, "creation_date": 1455129325, "post_id": 35323195, "comment_id": 58355163, "body": "<a href=\"http://stackoverflow.com/questions/9081479/is-there-a-good-reason-for-always-enclosing-a-define-in-parentheses-in-c\" title=\"is there a good reason for always enclosing a define in parentheses in c\">stackoverflow.com/questions/9081479/&hellip;</a>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1455129330, "post_id": 35323195, "comment_id": 58355167, "body": "@Olaf Very interesting, I would never think of it because <code>i-ABC</code> is impossible for me to write, I would write <code>i - ABC</code> so the problem wouldn&#39;t happen, but it&#39;s really nice that you gave this example as it clearly justifies the parentheses."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455129387, "post_id": 35323195, "comment_id": 58355196, "body": "@iharob: Yeah, I also would use spaces, of course. But just have a look at the code shown here ..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455132251, "post_id": 35323195, "comment_id": 58356998, "body": "@Olaf Interestingly gcc (Cygwin C Compiler 4.9.3 -std=c1x) compiled <code>#define ABC -1 int i = 0, j; j = i-ABC</code> just like <code>#define ABC (-1)</code>.  Perhaps not all compilers are so behaved."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455133431, "post_id": 35323195, "comment_id": 58357786, "body": "@chux: I did not intend to dig deeply in the standard for this question. AFAIK the more recent versions of the standard are more clear about how to match tokens (greedy, i.e. match the longest sequence). IIRC C99 added an artificial seperator between preprocessor tokens which changed the preprocessor semantics exactly for such cases, so the compiler will not join the <code>-</code>. However, older C variants definitively left that to the compiler. It was just a short example; maybe there are better ones with operator preceedence and or wrong syntax that will be caught by the parenthesis."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455139616, "post_id": 35323195, "comment_id": 58361292, "body": "@Olaf  Agreed, Credit to <a href=\"http://stackoverflow.com/a/35325235/2410359\">you</a>"}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1455129452, "post_id": 35323282, "comment_id": 58355230, "body": "I would say almost necessary not <i>always helpful</i>. It&#39;s weird but I have seen like 3 questions today related to this very issue"}], "tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": true, "score": 4, "last_activity_date": 1455130378, "last_edit_date": 1455130378, "creation_date": 1455129426, "answer_id": 35323282, "question_id": 35323195, "link": "https://stackoverflow.com/questions/35323195/why-define-eof-1-and-not-just-define-eof-1/35323282#35323282", "title": "Why &quot;#define EOF (-1)&quot; and not just &quot;#define EOF -1&quot;", "body": "<p>It is always helpful, if not necessary, to add the necessary numbers of parentheses to a defined macro.</p>\n\n<p>For example, if you do</p>\n\n<pre><code>#define SUM(a,b) a + b\n#define MUL(a,b) a * b\n\nint a = MUL(4+5, 2+3); // you get 4+5*2+3 = 17 instead of 45.\nint b = 4 * SUM(1,1); // you get 4*1+1 = 5 instead of 8.\n</code></pre>\n\n<p>So you better write</p>\n\n<pre><code>#define SUM(a,b) ((a) + (b))\n#define MUL(a,b) ((a) * (b))\n</code></pre>\n\n<p>And as it is a good habit, always use <code>()</code> in macros.</p>\n\n<p>Another good reason is the example shown in the comments to your question.</p>\n"}], "owner": {"reputation": 167, "user_id": 3245224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d014cb212d332bf1efd82a865621250?s=128&d=identicon&r=PG&f=1", "display_name": "T555", "link": "https://stackoverflow.com/users/3245224/t555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 35323282, "answer_count": 1, "score": 0, "last_activity_date": 1455130378, "creation_date": 1455129103, "question_id": 35323195, "link": "https://stackoverflow.com/questions/35323195/why-define-eof-1-and-not-just-define-eof-1", "title": "Why &quot;#define EOF (-1)&quot; and not just &quot;#define EOF -1&quot;", "body": "<p>I am using Visual Studio 2015 to learn some basic C. While experimenting with the EOF symbolic constant, I decided to lookup its definition and this is what I found:</p>\n\n<pre><code>#define EOF (-1)\n</code></pre>\n\n<p>I though it was kind of weird that the -1 was enclosed in parenthesis so I decided to create my own -1 symbolic constant so I did the following:</p>\n\n<pre><code>#define ABC -1\n</code></pre>\n\n<p>In the debugger, both EOF and ABC show as value -1 so I started wondering, why does the EOF definition uses <code>(-1)</code> to represent <code>-1</code> when the parenthesis do not appear to be needed?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "macos", "shell"], "answers": [{"comments": [{"owner": {"reputation": 1601, "user_id": 2883597, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a5f4170eac4ceac1f8420d92f9ede6ba?s=128&d=identicon&r=PG&f=1", "display_name": "Salivan", "link": "https://stackoverflow.com/users/2883597/salivan"}, "edited": false, "score": 0, "creation_date": 1615653213, "post_id": 35323276, "comment_id": 117760467, "body": "^H alone worked for me in a regular Ubuntu shell, but ^V^H seems to have the same effect."}], "tags": [], "owner": {"reputation": 16538, "user_id": 1227152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4hr5l.jpg?s=128&g=1", "display_name": "mustaccio", "link": "https://stackoverflow.com/users/1227152/mustaccio"}, "is_accepted": false, "score": 4, "last_activity_date": 1455129412, "creation_date": 1455129412, "answer_id": 35323276, "question_id": 35323065, "link": "https://stackoverflow.com/questions/35323065/how-to-enter-a-backspace-character-on-a-shell-command-line/35323276#35323276", "title": "How to enter a backspace character on a shell command line?", "body": "<p>Not sure what you mean by \"cooked with the operating system\". I guess you're asking how to enter a backspace character on the shell command line without it being interpreted as a backspace, that is, without actually erasing the previous character.</p>\n\n<p>The key combination for the ASCII backspace control character is ^H (hold down <kbd>Ctrl</kbd> and press <kbd>H</kbd>. However, pressing this combination on the shell command line simply performs the \"backspace\" operation. To quote a control character in Bash, which is the OS X default shell, and in Zsh you type a combination of two characters: ^V^H.</p>\n"}, {"comments": [{"owner": {"reputation": 1167, "user_id": 4410922, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DI6E9.jpg?s=128&g=1", "display_name": "yash", "link": "https://stackoverflow.com/users/4410922/yash"}, "edited": false, "score": 0, "creation_date": 1455130237, "post_id": 35323481, "comment_id": 58355748, "body": "thank you. i appreciate it. but i am trying to do everything by using putchar()"}], "tags": [], "owner": {"reputation": 4887, "user_id": 897295, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kql9J.png?s=128&g=1", "display_name": "mauro", "link": "https://stackoverflow.com/users/897295/mauro"}, "is_accepted": false, "score": 1, "last_activity_date": 1455130504, "last_edit_date": 1455130504, "creation_date": 1455130145, "answer_id": 35323481, "question_id": 35323065, "link": "https://stackoverflow.com/questions/35323065/how-to-enter-a-backspace-character-on-a-shell-command-line/35323481#35323481", "title": "How to enter a backspace character on a shell command line?", "body": "<p>You can use (non destructive) backspace <code>\\b</code> in printf and re-write. This way:</p>\n\n<pre><code>$ cat w.c\n#include &lt;stdio.h&gt;\n\nint main () \n{\n    printf(\"abcd\\n\");\n    printf(\"abc\\bd\\n\");\n}\n$ ./w\nabcd\nabd\n</code></pre>\n\n<p><strong>UPDATE</strong>\nSame story using putchar():</p>\n\n<pre><code>$ cat w.c\n#include &lt;stdio.h&gt;\n\nint main () \n{\n    printf(\"abcd\\n\");\n    putchar('a');\n    putchar('b');\n    putchar('c');\n    putchar('\\b');\n    putchar('d');\n    putchar('\\n');\n}\n</code></pre>\n\n<p>Same output...</p>\n"}], "owner": {"reputation": 1167, "user_id": 4410922, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DI6E9.jpg?s=128&g=1", "display_name": "yash", "link": "https://stackoverflow.com/users/4410922/yash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3389, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1455130504, "creation_date": 1455128709, "last_edit_date": 1455129513, "question_id": 35323065, "link": "https://stackoverflow.com/questions/35323065/how-to-enter-a-backspace-character-on-a-shell-command-line", "title": "How to enter a backspace character on a shell command line?", "body": "<p>I am trying to do Exercise 1-10 in K&amp;R. I've got the program working and running. So far I've come to know that the backspace character is cooked with the operating system. How can I input the backspace character in Mac OS X?</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1455128026, "post_id": 35322833, "comment_id": 58354358, "body": "What do you want to accomplish. Please specify."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1455128035, "post_id": 35322833, "comment_id": 58354364, "body": "Being a 3-star programmer is not a compliment in C! That looks awful, if the prototype really was supplied by the teacher, instantly get a new teacher!"}, {"owner": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1455128159, "post_id": 35322833, "comment_id": 58354439, "body": "Any idea? @Bathsheba"}, {"owner": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "reply_to_user": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1455128261, "post_id": 35322833, "comment_id": 58354504, "body": "I want just to allocate the matrix and to assign a value @AhmedAkhtar"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455128276, "post_id": 35322833, "comment_id": 58354513, "body": "Not really.  Requires guessing at the parameters and functionality."}, {"owner": {"reputation": 4163, "user_id": 4606130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/343d4fbd72bc47b7ca8db0947a45b122?s=128&d=identicon&r=PG&f=1", "display_name": "micstr", "link": "https://stackoverflow.com/users/4606130/micstr"}, "edited": false, "score": 0, "creation_date": 1455128376, "post_id": 35322833, "comment_id": 58354576, "body": "Welcome to Stack Overflow Andrew - Please read <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. This post needs a clearer title."}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1455128381, "post_id": 35322833, "comment_id": 58354579, "body": "Are you going for a 2D matrix or a 3D one?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455128470, "post_id": 35322833, "comment_id": 58354647, "body": "What is wrong with some typedefs?  I don&#39;t care about cargo-cult &#39;no typedefs for pointers&#39;, anything is better than three stars."}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1455129309, "post_id": 35322833, "comment_id": 58355154, "body": "@Andrew You did not answer my question about the matrix being 2D or 3D. Anyways, I posted an answer assuming that you want 2D. Please specify if you want otherwise."}, {"owner": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "reply_to_user": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1455129963, "post_id": 35322833, "comment_id": 58355560, "body": "@AhmedAkhtar i want a 2D matrix"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455129977, "post_id": 35322833, "comment_id": 58355571, "body": "@Olaf - sometimes higher levels of indirection are unavoidable; given what this code is obviously meant to do, it&#39;s not too egregious.  I would rather it return the pointer than write it to a parameter, but hey..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455130084, "post_id": 35322833, "comment_id": 58355638, "body": "@MartinJames: A <code>typedef</code> does not change the underlying semantics. Likely still awfull."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1455130248, "post_id": 35322833, "comment_id": 58355753, "body": "@JohnBode: A 3-level indirect is very rarely of use. And here it is useless, as you already wrote. Why use another indirection just to &quot;return&quot; a pointer, but have the function <code>void</code>? That is just bad style."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1455128127, "post_id": 35322890, "comment_id": 58354423, "body": "and there&#39;s a missing sizeof(int) in that galaxy of stars somewhere."}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1455128164, "post_id": 35322890, "comment_id": 58354444, "body": "Both lines are the same."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 1, "creation_date": 1455128224, "post_id": 35322890, "comment_id": 58354480, "body": "@AhmedAkhtar Examine closer.."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1455128346, "post_id": 35322890, "comment_id": 58354556, "body": "@Bathsheba; <code>sizeof(**matr)</code> is ultimately <code>sizeof(int *)</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455128389, "post_id": 35322890, "comment_id": 58354583, "body": "Only if you&#39;re star-blinded."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455128398, "post_id": 35322890, "comment_id": 58354591, "body": "Yes, code is more robust when you refer to the size of the variable, not its presumed type."}, {"owner": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "edited": false, "score": 0, "creation_date": 1455128424, "post_id": 35322890, "comment_id": 58354614, "body": "this implementation doesn&#39;t work. In the second for, it allocates just one coloumn, as if the variable c was 1, but it is 3"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455128852, "post_id": 35322890, "comment_id": 58354883, "body": "@MartinJames; Was <a href=\"http://stackoverflow.com/questions/35322833/malloc-with-3-star-ptr/35322890#comment58354583_35322890\">that</a> for me?"}, {"owner": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "edited": false, "score": 0, "creation_date": 1455128953, "post_id": 35322890, "comment_id": 58354943, "body": "I tried this version too, but nothing to do @haccks"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "edited": false, "score": 0, "creation_date": 1455130489, "post_id": 35322890, "comment_id": 58355873, "body": "@Andrew; This will work 100%. I added link of working code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1455132155, "post_id": 35322890, "comment_id": 58356929, "body": "@haccks I was hoping someone would show how OP&#39;s function should be called, but although you sidestepped that +1."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455133664, "post_id": 35322890, "comment_id": 58357924, "body": "@haccks nah - Ahmed.  TBH, anyone looking at a question like this is likely to suffer from star-blindness:("}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 1, "last_activity_date": 1455130365, "last_edit_date": 1455130365, "creation_date": 1455128095, "answer_id": 35322890, "question_id": 35322833, "link": "https://stackoverflow.com/questions/35322833/malloc-with-3-star-ptr/35322890#35322890", "title": "Malloc with 3 star ptr", "body": "<p>Assuming <code>matr</code> is initialized, the statement   </p>\n\n<pre><code>*matr=malloc(r*sizeof(***matr)); // ***matr is of \"int\" type   \n</code></pre>\n\n<p>should be  </p>\n\n<pre><code>*matr = malloc(r*sizeof(int *));   // Allocate an array of \"r\" int *\n//matr[0] = malloc(r*sizeof(int *));\n</code></pre>\n\n<p>and in <code>for</code> loop, the statement   </p>\n\n<pre><code>*matr[i]=malloc(c*sizeof(**matr));  // **mtr is of \"int *\" type\n</code></pre>\n\n<p>should be   </p>\n\n<pre><code>(*matr)[i] = malloc(c*sizeof(int)); // Allocate an array of \"c\" int\n//matr[0][i] = malloc(c*sizeof(int));   \n</code></pre>\n\n<p>and then chage <code>*matr[i][j]=12;</code> to <code>(*matr)[i][j]=12;</code> or <code>matr[0][i][j]=12;</code></p>\n\n<p>See an example of working code: <a href=\"https://ideone.com/hboLKV\" rel=\"nofollow\">https://ideone.com/hboLKV</a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "edited": false, "score": 0, "creation_date": 1455129263, "post_id": 35323140, "comment_id": 58355126, "body": "It doesn&#39;t work. I receive also this warning: assignment makes integer from pointer without a cast [-Wint-conversion] , refered to line 7 @AhmedAkhtar"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "reply_to_user": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "edited": false, "score": 0, "creation_date": 1455130615, "post_id": 35323140, "comment_id": 58355951, "body": "@Andrew Yeah right. Now I ran your code. I am editing the correct version."}], "tags": [], "owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "is_accepted": false, "score": 0, "last_activity_date": 1455130665, "last_edit_date": 1455130665, "creation_date": 1455128962, "answer_id": 35323140, "question_id": 35322833, "link": "https://stackoverflow.com/questions/35322833/malloc-with-3-star-ptr/35323140#35323140", "title": "Malloc with 3 star ptr", "body": "<p>Here is the corrected code, if you want to implement a 2D Matrix using a triple pointer:</p>\n\n<pre><code>void alloc (int*** matr, int r, int c)\n{\n int i, j;\n *matr = malloc(r*sizeof(int*));\n for (i=0; i&lt;r; i++)\n  (*matr)[i] = malloc(c*sizeof(int));\n\n for (i = 0; i &lt; r; i++)\n  for (j = 0; j &lt; c; j++)\n   (*matr)[i][j] = 12;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5909888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94ea33215ed68b04555b30c5071e1eec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/5909888/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1455129181, "accepted_answer_id": 35322890, "answer_count": 2, "score": -1, "last_activity_date": 1455130665, "creation_date": 1455127931, "last_edit_date": 1455128528, "question_id": 35322833, "link": "https://stackoverflow.com/questions/35322833/malloc-with-3-star-ptr", "closed_reason": "Not suitable for this site", "title": "Malloc with 3 star ptr", "body": "<pre><code>void alloc (int*** matr, int r, int c)\n{\nint i, j;\n*matr=malloc(r*sizeof(***matr));\nfor (i=0; i&lt;r; i++)\n    *matr[i]=malloc(c*sizeof(**matr));\n\nfor (i=0; i&lt;r; i++)\n    for (j=0; j&lt;c; j++)\n        *matr[i][j]=12;\n}\n</code></pre>\n\n<p>The function prototype is given by the teacher. The error i receive is segmentation fault. Thanks for the answers!</p>\n"}, {"tags": ["html", "c", "sockets", "http", "webserver"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 6, "creation_date": 1455127058, "post_id": 35322551, "comment_id": 58353763, "body": "Are you sending http headers? Specially <code>Content-Type: text&#47;html</code>?"}, {"owner": {"reputation": 808, "user_id": 3867500, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CusjO.png?s=128&g=1", "display_name": "Abhishek Choubey", "link": "https://stackoverflow.com/users/3867500/abhishek-choubey"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455127153, "post_id": 35322551, "comment_id": 58353824, "body": "@iharob: No I am just writing the a string made of some html tags."}, {"owner": {"reputation": 1589, "user_id": 2770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2321a7b8ee2a179e16b50242ecb21c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilio Pardo", "link": "https://stackoverflow.com/users/2770092/cecilio-pardo"}, "edited": false, "score": 3, "creation_date": 1455127248, "post_id": 35322551, "comment_id": 58353870, "body": "The HTTP protocol is not THAT simple. You should investigate it a little."}, {"owner": {"reputation": 808, "user_id": 3867500, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CusjO.png?s=128&g=1", "display_name": "Abhishek Choubey", "link": "https://stackoverflow.com/users/3867500/abhishek-choubey"}, "edited": false, "score": 0, "creation_date": 1455127584, "post_id": 35322551, "comment_id": 58354070, "body": "I got it... At this point of time, the browser cant make any sense of my data...thus it dumps it, as it is. Thanks guys."}], "answers": [{"comments": [{"owner": {"reputation": 35134, "user_id": 50543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCFWL.jpg?s=128&g=1", "display_name": "Julian Reschke", "link": "https://stackoverflow.com/users/50543/julian-reschke"}, "edited": false, "score": 0, "creation_date": 1455132335, "post_id": 35322927, "comment_id": 58357054, "body": "Correct, good explanation, but link to outdated HTTP specification."}], "tags": [], "owner": {"reputation": 8571, "user_id": 1307166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3a10ed3ebf00cf0f9dc70a014a703e?s=128&d=identicon&r=PG", "display_name": "b4hand", "link": "https://stackoverflow.com/users/1307166/b4hand"}, "is_accepted": true, "score": 5, "last_activity_date": 1455135171, "last_edit_date": 1455135171, "creation_date": 1455128247, "answer_id": 35322927, "question_id": 35322551, "link": "https://stackoverflow.com/questions/35322551/browser-displays-html-code-as-it-is-written-by-a-c-program-to-a-socket/35322927#35322927", "title": "Browser displays HTML code as it is, written by a C program to a socket", "body": "<p>When you type \"127.0.0.1:5010\" into your browser bar, it assumes the server on the other side is speaking the HTTP protocol. Your browser will automatically change your URL to <code>http://127.0.0.1:5010/</code>. This means the server on the other side must respond with a valid HTTP response.</p>\n\n<p>The HTTP protocol requires you to pass more than just the data that you want to display. For example, here's a server response for a very simple web page:</p>\n\n<pre><code>HTTP/1.1 200 OK\nContent-Type: text/html; charset=utf-8\nConnection: close\nContent-Length: 89\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;&lt;head&gt;&lt;title&gt;page 1&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hello World!&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>Furthermore, your browser cannot know to display the content as HTML unless you actually send it a <code>Content-Type</code> header with an appropriate value.</p>\n\n<p>For more details on the HTTP protocol, you may want to read the <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" rel=\"nofollow\">corresponding Wikipedia article</a> or the following 6 RFCs which actually define the current HTTP 1.1 specification:</p>\n\n<ul>\n<li><a href=\"https://tools.ietf.org/html/rfc7230\" rel=\"nofollow\">RFC 7230</a></li>\n<li><a href=\"https://tools.ietf.org/html/rfc7231\" rel=\"nofollow\">RFC 7231</a></li>\n<li><a href=\"https://tools.ietf.org/html/rfc7232\" rel=\"nofollow\">RFC 7232</a></li>\n<li><a href=\"https://tools.ietf.org/html/rfc7233\" rel=\"nofollow\">RFC 7233</a></li>\n<li><a href=\"https://tools.ietf.org/html/rfc7234\" rel=\"nofollow\">RFC 7234</a></li>\n<li><a href=\"https://tools.ietf.org/html/rfc7235\" rel=\"nofollow\">RFC 7235</a></li>\n</ul>\n"}], "owner": {"reputation": 808, "user_id": 3867500, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CusjO.png?s=128&g=1", "display_name": "Abhishek Choubey", "link": "https://stackoverflow.com/users/3867500/abhishek-choubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "accepted_answer_id": 35322927, "answer_count": 1, "score": 2, "last_activity_date": 1455156963, "creation_date": 1455127026, "last_edit_date": 1455156963, "question_id": 35322551, "link": "https://stackoverflow.com/questions/35322551/browser-displays-html-code-as-it-is-written-by-a-c-program-to-a-socket", "title": "Browser displays HTML code as it is, written by a C program to a socket", "body": "<p>I have the following C program, that writes text in HTML syntax to port 5010.</p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;time.h&gt; \n\nint main(int argc, char *argv[])\n{\n    int listenfd = 0, connfd = 0;\n    struct sockaddr_in serv_addr; \n\n    char* sendBuff=\"&lt;html&gt;&lt;head&gt;&lt;title&gt;page 1&lt;/title&gt;&lt;/head&gt;&lt;/html&gt;\";\n    time_t ticks; \n    uint32_t ip = 0;\n    listenfd = socket(AF_INET, SOCK_STREAM, 0);\n    memset(&amp;serv_addr, '0', sizeof(serv_addr));\n    //memset(sendBuff, '0', sizeof(sendBuff)); \n    inet_aton(\"127.0.0.1\", (struct in_addr*)&amp;ip);\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = htonl(ip);\n    serv_addr.sin_port = htons(5010); \n\n    bind(listenfd, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)); \n\n    listen(listenfd, 10); \n\n    while(1)\n    {\n        connfd = accept(listenfd, (struct sockaddr*)NULL, NULL); \n    fprintf(stderr, \"New connection \\n\");\n        ticks = time(NULL);\n        //snprintf(sendBuff, sizeof(sendBuff), \"%.24s\\r\\n\", ctime(&amp;ticks));\n        write(connfd, sendBuff, strlen(sendBuff)); \n\n        close(connfd);\n        sleep(1);\n     }\n}\n</code></pre>\n\n<p>And then I issue the following request in my browser's address bar:    </p>\n\n<pre><code>127.0.0.1:5010\n</code></pre>\n\n<p>I was expecting my browser to show the title of page as \"page1\", but instead it rendered the HTML code as it is.\n<a href=\"https://i.stack.imgur.com/o7hqP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o7hqP.png\" alt=\"Browser Output\"></a></p>\n"}, {"tags": ["c", "sockets", "recv", "winsockets"], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1455126826, "creation_date": 1455126826, "answer_id": 35322490, "question_id": 35322375, "link": "https://stackoverflow.com/questions/35322375/recv-stalls-or-does-not-return-all-data-c-code/35322490#35322490", "title": "recv stalls or does not return all data (C code)", "body": "<p>Where does it say it fills the buffer? Read the <em>man</em> image. It blocks until at least one byte of data can be transferred, then transfers whatever data has arrived.</p>\n"}, {"comments": [{"owner": {"reputation": 886, "user_id": 854279, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f3c83c51b9ddd70cbf317ec33d44d162?s=128&d=identicon&r=PG", "display_name": "Perry", "link": "https://stackoverflow.com/users/854279/perry"}, "edited": false, "score": 0, "creation_date": 1455130580, "post_id": 35323513, "comment_id": 58355935, "body": "in this way it receives only READSIZE bytes, I want it download all stream until connection closed, but It never return 0."}, {"owner": {"reputation": 1989, "user_id": 1040315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/RKlgf.jpg?s=128&g=1", "display_name": "theWalker", "link": "https://stackoverflow.com/users/1040315/thewalker"}, "reply_to_user": {"reputation": 886, "user_id": 854279, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f3c83c51b9ddd70cbf317ec33d44d162?s=128&d=identicon&r=PG", "display_name": "Perry", "link": "https://stackoverflow.com/users/854279/perry"}, "edited": false, "score": 0, "creation_date": 1455130702, "post_id": 35323513, "comment_id": 58356004, "body": "&quot;in this way it receives only READSIZE bytes&quot; - not, we probe read all, but not always socket return all and we must read more"}, {"owner": {"reputation": 1989, "user_id": 1040315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/RKlgf.jpg?s=128&g=1", "display_name": "theWalker", "link": "https://stackoverflow.com/users/1040315/thewalker"}, "reply_to_user": {"reputation": 886, "user_id": 854279, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f3c83c51b9ddd70cbf317ec33d44d162?s=128&d=identicon&r=PG", "display_name": "Perry", "link": "https://stackoverflow.com/users/854279/perry"}, "edited": false, "score": 0, "creation_date": 1455130857, "post_id": 35323513, "comment_id": 58356080, "body": "in my answer, without errors you read all automatically and go out from loop without probe read 0 bytes. if rByte==0 and you not read all (nByte&gt;0) - conection is closed by the remote side while communication, its incomplete connection."}, {"owner": {"reputation": 1989, "user_id": 1040315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/RKlgf.jpg?s=128&g=1", "display_name": "theWalker", "link": "https://stackoverflow.com/users/1040315/thewalker"}, "reply_to_user": {"reputation": 886, "user_id": 854279, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f3c83c51b9ddd70cbf317ec33d44d162?s=128&d=identicon&r=PG", "display_name": "Perry", "link": "https://stackoverflow.com/users/854279/perry"}, "edited": false, "score": 0, "creation_date": 1455132025, "post_id": 35323513, "comment_id": 58356851, "body": "I&#39;v rename READSIZE to BUFFERSIZE"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1455139588, "post_id": 35323513, "comment_id": 58361278, "body": "The state you label as impossible is indeed impossible. It is therefore unnecessary to check for it."}, {"owner": {"reputation": 1989, "user_id": 1040315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/RKlgf.jpg?s=128&g=1", "display_name": "theWalker", "link": "https://stackoverflow.com/users/1040315/thewalker"}, "edited": false, "score": 0, "creation_date": 1455139703, "post_id": 35323513, "comment_id": 58361344, "body": "programmer must check all paths, no bad data only bad alghoritms exists"}], "tags": [], "owner": {"reputation": 1989, "user_id": 1040315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/RKlgf.jpg?s=128&g=1", "display_name": "theWalker", "link": "https://stackoverflow.com/users/1040315/thewalker"}, "is_accepted": false, "score": 3, "last_activity_date": 1455135804, "last_edit_date": 1455135804, "creation_date": 1455130251, "answer_id": 35323513, "question_id": 35322375, "link": "https://stackoverflow.com/questions/35322375/recv-stalls-or-does-not-return-all-data-c-code/35323513#35323513", "title": "recv stalls or does not return all data (C code)", "body": "<pre><code>#define BUFFERSIZE 512  \n\nbyte buffer[BUFFERSIZE];\nint nByte = BUFFERSIZE;\nint rByte;  \n\nwhile(nByte!=0)\n{\n   rByte = recv(sockfd, &amp;buffer[BUFFERSIZE-nByte], nByte, 0);\n   if( rByte &lt; 0 )\n   {\n      // socket error\n      break;\n   }\n   if( rByte == 0)\n   {\n      // connection closed by remote side or network breakdown, buffer is incomplete\n      break;\n   }\n   if(rByte&gt;nByte)\n   {\n     // impossible but you must check it: memory crash, system error\n     break;\n   }\n   nByte -= rByte;  // rByte&gt;0 all is ok\n   // if nByte==0 automatically end of loop, you read all\n   // if nByte &gt;0 goto next recv, you need read more bytes, recv is prtialy in this case\n} \n\n//**EDIT**   \n\nif(nByte!=0) return false;\n\n// TO DO - buffer complete\n</code></pre>\n"}], "owner": {"reputation": 886, "user_id": 854279, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f3c83c51b9ddd70cbf317ec33d44d162?s=128&d=identicon&r=PG", "display_name": "Perry", "link": "https://stackoverflow.com/users/854279/perry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1455180437, "creation_date": 1455126465, "last_edit_date": 1455180437, "question_id": 35322375, "link": "https://stackoverflow.com/questions/35322375/recv-stalls-or-does-not-return-all-data-c-code", "title": "recv stalls or does not return all data (C code)", "body": "<p>I have a web service written in .net on a remote computer with IIS, I am trying to connect to it with a C program using socker to do a SOAP request.</p>\n\n<p>My problem is that I have some probem receiving the data:</p>\n\n<p>The receiving data loop does not work in a way or in another.</p>\n\n<p>If I write:</p>\n\n<pre><code>nByte = 1;\nwhile(nByte!=512)\n{\n   nByte = recv(sockfd,buffer,512, 0);\n   if( nByte &lt; 0 )\n   {\n      // check the error\n   }\n   if( nByte &gt; 0)\n   {\n      // append buffer to received data\n   }\n}\n</code></pre>\n\n<p>sometime does not return all data, if it run without debugger and breackpoints.</p>\n\n<p>If I try: <code>while(nByte!=0)</code> at the end of data it stalls and go in error.</p>\n\n<p>How is it supposed to be done?\nThanks,\nAntonino</p>\n\n<p>** <strong><em>EDIT</em></strong> **\nI resolved my situation in another way, I check the returned value for soap xml end:</p>\n\n<pre><code>nByte = 1;\nwhile(nByte!=0)\n{\n   nByte = recv(sockfd,buffer,512, 0);\n   if( nByte &lt; 0 )\n   {\n      // check the error\n   }\n   if( nByte &gt; 0)\n   {\n      // append nByte buffer to received data\n      if( strstr(\"&lt;/soap:Envelope&gt;\", buffer) != NULL)\n        break;\n   }\n}\n</code></pre>\n\n<p>It is very sad...</p>\n"}, {"tags": ["python", "c", "segmentation-fault", "fortran", "f2py"], "comments": [{"owner": {"reputation": 4258, "user_id": 2532275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFBUh.png?s=128&g=1", "display_name": "innoSPG", "link": "https://stackoverflow.com/users/2532275/innospg"}, "edited": false, "score": 0, "creation_date": 1455127566, "post_id": 35322345, "comment_id": 58354056, "body": "Please provide a minimal code with reproducible behavior! We are not here to read all your long code. An example with a single subroutine is the best."}, {"owner": {"reputation": 75, "user_id": 5904127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74571af46186d763b672c81f124219a9?s=128&d=identicon&r=PG&f=1", "display_name": "ivanarnold", "link": "https://stackoverflow.com/users/5904127/ivanarnold"}, "reply_to_user": {"reputation": 4258, "user_id": 2532275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFBUh.png?s=128&g=1", "display_name": "innoSPG", "link": "https://stackoverflow.com/users/2532275/innospg"}, "edited": false, "score": 0, "creation_date": 1455131455, "post_id": 35322345, "comment_id": 58356461, "body": "Not sure why that deserved a down vote? If you had read my original post (which is linked in this one) you would know that there is no such thing as a minimal code in this case. The original fortran code(s) are lengthy, and my python script is available in the original posted question. In any case this is primarily a question about how to interpret the debugging output from f2py, which I&#39;ve provided. I was simply trying to avoid the inevitable &quot;please post the entire output&quot; comments I see so frequently here. Sorry for wasting your time, but you were always free to simply stop reading."}, {"owner": {"reputation": 4258, "user_id": 2532275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFBUh.png?s=128&g=1", "display_name": "innoSPG", "link": "https://stackoverflow.com/users/2532275/innospg"}, "edited": false, "score": 0, "creation_date": 1455133350, "post_id": 35322345, "comment_id": 58357741, "body": "I did not downvote.  It is not my nature to downvote! Even if I found your comment more judging while only guessing that I, the commenter is also the downvoter, I am still not going to downvote. That is because your question, despite being difficult to follow seems very reasonable. I usually comment to let OP give more details or improve their questions. That was the case here. And just to assure you, I am not an f2py expert, so even with the clearer question I will certainly not have the knowledge to answer."}, {"owner": {"reputation": 75, "user_id": 5904127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74571af46186d763b672c81f124219a9?s=128&d=identicon&r=PG&f=1", "display_name": "ivanarnold", "link": "https://stackoverflow.com/users/5904127/ivanarnold"}, "reply_to_user": {"reputation": 4258, "user_id": 2532275, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFBUh.png?s=128&g=1", "display_name": "innoSPG", "link": "https://stackoverflow.com/users/2532275/innospg"}, "edited": false, "score": 0, "creation_date": 1455135933, "post_id": 35322345, "comment_id": 58359235, "body": "Fair enough. Not trying to pass judgement. And in hindsight my question was way to long and not very clear. I&#39;ve edited it accordingly. However, in this case posting a minimal version of the code isn&#39;t really possible. Thanks for your reply."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 5904127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74571af46186d763b672c81f124219a9?s=128&d=identicon&r=PG&f=1", "display_name": "ivanarnold", "link": "https://stackoverflow.com/users/5904127/ivanarnold"}, "is_accepted": false, "score": 1, "last_activity_date": 1455127686, "creation_date": 1455127686, "answer_id": 35322754, "question_id": 35322345, "link": "https://stackoverflow.com/questions/35322345/segmentation-faults-using-f2py/35322754#35322754", "title": "Segmentation faults using f2py", "body": "<p>No sure if I'm supposed to be answering my own questions like this. If this is against protocol then I beg forgiveness from the stack exchange powers that be.</p>\n\n<p>All the information IS (so far) contained in the debug output. After allocating the 'scef' variabale as a numpy array of the proper size/shape/type the segfault went away. </p>\n\n<p>I am still getting further errors, but so far going through the terminal output using <code>--debug-capi</code> and carefully resizing anything that is not the correct shape/size/type seems to be fixing them.</p>\n\n<p>If any one else is experiencing these issues, I hope this helps.</p>\n"}], "owner": {"reputation": 75, "user_id": 5904127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74571af46186d763b672c81f124219a9?s=128&d=identicon&r=PG&f=1", "display_name": "ivanarnold", "link": "https://stackoverflow.com/users/5904127/ivanarnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1455135685, "creation_date": 1455126406, "last_edit_date": 1495535302, "question_id": 35322345, "link": "https://stackoverflow.com/questions/35322345/segmentation-faults-using-f2py", "title": "Segmentation faults using f2py", "body": "<p>This is a follow up to a question I asked here...\n<a href=\"https://stackoverflow.com/questions/35298786/how-do-i-allocate-input-arrays-with-f2py/35301882#35301882\">How do I allocate input arrays with f2py?</a></p>\n\n<p>I've reworked the question in response to comments. The original question was unclear and too lengthy. See comment 1 below.</p>\n\n<p>I am trying to use f2py to wrap various fortran subroutines/functions for reading the data output from a variety of atomic physics codes written in fortran 77. I am using the Anaconda python distribution (python 3.4 64 bit) on Ubuntu 14.04 (64 bit) with the gnu compiler suite (gcc, gfortran, etc.)</p>\n\n<p>I am having issues trying to preallocate the arrays in python. My original question dealt with allocating a character array. Turns out I had the wrong shape. I've fixed that (I think), and am now dealing with a segmentation fault. I've compiled the fortran subroutine with f2py using the <code>--debug-capi</code> flag to enable verbose error reporting. </p>\n\n<p>Here is the relevant portion of the terminal output I get when I run my python script.</p>\n\n<pre><code>debug-capi:Python C/API function adf04_2py.xxdata_04(iunit,titled,iz,iz0,iz1,bwno,npl,bwnoa,lbseta,prtwta,cprta,il,qdorb,lqdorb,qdn,iorb,ia,cstrga,isa,ila,xja,wa,cpla,npla,ipla,zpla,nv,scef,itran,maxlev,tcode,i1a,i2a,aval,scom,beth,iadftyp,lprn,lcpl,lorb,lbeth,letyp,lptyp,lrtyp,lhtyp,lityp,lstyp,lltyp,itieactn,ltied,ndlev=len(ia),ndtrn=shape(tcode,0),ndmet=len(bwnoa),ndqdn=len(qdn),nvmax=len(scef))\ndebug-capi:int lltyp=:input,required,scalar\ndebug-capi:lltyp=0\n\n        ####### omitted ##########\n\ndebug-capi:int ndmet=len(bwnoa):input,optional,scalar\ndebug-capi:ndmet=1\ndebug-capi:Checking `len(bwnoa)&gt;=ndmet'\ndebug-capi:int ndqdn=len(qdn):input,optional,scalar\ndebug-capi:ndqdn=1\ndebug-capi:Checking `len(qdn)&gt;=ndqdn'\ndebug-capi:int ndlev=len(ia):input,optional,scalar\ndebug-capi:ndlev=1\ndebug-capi:Checking `len(ia)&gt;=ndlev'\ndebug-capi:int lqdorb=:input,required,array,dims((ndqdn*(ndqdn+1))/2|(ndqdn*(ndqdn+1))/2)\ndebug-capi:string cprta=:input,required,array,string array,dims(ndmet|ndmet,9|9)\ndebug-capi:double prtwta=:input,required,array,dims(ndmet|ndmet)\ndebug-capi:double beth=:input,required,array,dims(ndtrn|ndtrn)\ndebug-capi:string cstrga=:input,required,array,string array,dims(ndlev|ndlev,(*)|(*))\ndebug-capi:double zpla=:input,required,array,dims(ndmet|ndmet,ndlev|ndlev)\ndebug-capi:int ltied=:input,required,array,dims(ndlev|ndlev)\ndebug-capi:int npla=:input,required,array,dims(ndlev|ndlev)\ndebug-capi:int i2a=:input,required,array,dims(ndtrn|ndtrn)\ndebug-capi:int lbseta=:input,required,array,dims(ndmet|ndmet)\ndebug-capi:int i1a=:input,required,array,dims(ndtrn|ndtrn)\ndebug-capi:int ila=:input,required,array,dims(ndlev|ndlev)\ndebug-capi:double scom=:input,required,array,dims(nvmax|nvmax,ndtrn|ndtrn)\ndebug-capi:double qdorb=:input,required,array,dims((ndqdn*(ndqdn+1))/2|(ndqdn*(ndqdn+1))/2)\ndebug-capi:string cpla=:input,required,array,string array,dims(ndlev|ndlev,1|1)\ndebug-capi:int isa=:input,required,array,dims(ndlev|ndlev)\ndebug-capi:double wa=:input,required,array,dims(ndlev|ndlev)\ndebug-capi:int ipla=:input,required,array,dims(ndmet|ndmet,ndlev|ndlev)\ndebug-capi:double xja=:input,required,array,dims(ndlev|ndlev)\ndebug-capi:Fortran subroutine `xxdata_04(&amp;iunit,&amp;ndlev,&amp;ndtrn,&amp;ndmet,&amp;ndqdn,&amp;nvmax,titled,&amp;iz,&amp;iz0,&amp;iz1,&amp;bwno,&amp;npl,bwnoa,lbseta,prtwta,cprta,&amp;il,qdorb,lqdorb,qdn,&amp;iorb,ia,cstrga,isa,ila,xja,wa,cpla,npla,ipla,zpla,&amp;nv,scef,&amp;itran,&amp;maxlev,tcode,i1a,i2a,aval,scom,beth,&amp;iadftyp,&amp;lprn,&amp;lcpl,&amp;lorb,&amp;lbeth,&amp;letyp,&amp;lptyp,&amp;lrtyp,&amp;lhtyp,&amp;lityp,&amp;lstyp,&amp;lltyp,&amp;itieactn,ltied,slen(titled),flen(cstrga))'\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>My first question is this. Is it possible to tell from the debug output exactly what segfaulted?  I don't see how.</p>\n\n<p>As a second question, if you look at the beginning of the debug output, you will see something that looks like a function call, which I believe is python calling the function from the shared object. At the end of the debug output you see something almost identical, but is labelled as a 'fortran sub-routine'. The variables in the fortran subroutine are not in the same order as the python function. The shared object was automatically created by f2py from the original fortran code. Any one know why these variables are in a different order?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "types", "fortran"], "comments": [{"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 2, "creation_date": 1455126535, "post_id": 35322254, "comment_id": 58353416, "body": "See, for example, <a href=\"http://stackoverflow.com/q/838310\">stackoverflow.com/q/838310</a> or a language/compiler reference guide."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "reply_to_user": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 1, "creation_date": 1455147281, "post_id": 35322254, "comment_id": 58364708, "body": "It wasn&#39;t clear at all. Notice the first answer which also answers about the <code>selected_int_kind()</code> function. I tried to make your problem more clear. Please do not misuse the edit as a discussion, you can place comments to your question and to the answers. If you have a problem with some code, you have to post it, otherwise the question may be closed again, for another reason. Especially, notice the comment by @francescalus about the nonexistant specification of unformated format. There will be record markers present in the file."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1455148507, "post_id": 35322254, "comment_id": 58365116, "body": "Actually, this recent question is very much connected, if about Python and not C. <a href=\"http://stackoverflow.com/questions/35319366/reading-fortran-unformatted-arrays-with-python-without-numpy\" title=\"reading fortran unformatted arrays with python without numpy\">stackoverflow.com/questions/35319366/&hellip;</a>"}, {"owner": {"reputation": 27595, "user_id": 187997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67861c90e07dfaa852c4b95615c9183?s=128&d=identicon&r=PG", "display_name": "M. S. B.", "link": "https://stackoverflow.com/users/187997/m-s-b"}, "edited": false, "score": 1, "creation_date": 1455165375, "post_id": 35322254, "comment_id": 58369796, "body": "Another answer about why you are seeing extra bytes at the start (and likely at the end) of each Fortran record: <a href=\"http://stackoverflow.com/questions/8751185/fortran-unformatted-file-format\" title=\"fortran unformatted file format\">stackoverflow.com/questions/8751185/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 3164856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1524969771/picture?type=large", "display_name": "Karandash8", "link": "https://stackoverflow.com/users/3164856/karandash8"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1455179323, "post_id": 35322254, "comment_id": 58376060, "body": "@VladimirF thank you very much for your help!"}, {"owner": {"reputation": 31, "user_id": 3164856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1524969771/picture?type=large", "display_name": "Karandash8", "link": "https://stackoverflow.com/users/3164856/karandash8"}, "reply_to_user": {"reputation": 27595, "user_id": 187997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67861c90e07dfaa852c4b95615c9183?s=128&d=identicon&r=PG", "display_name": "M. S. B.", "link": "https://stackoverflow.com/users/187997/m-s-b"}, "edited": false, "score": 0, "creation_date": 1455179439, "post_id": 35322254, "comment_id": 58376142, "body": "@M.S.B. thank you! It precisely explains why I have that problem"}], "answers": [{"comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1455127821, "post_id": 35322405, "comment_id": 58354215, "body": "Much simpler a signed integer than can be written with 9 digits max."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1455128289, "post_id": 35322405, "comment_id": 58354526, "body": "<code>int32_t</code> seems closer, int can be 16 bit or even 64 bit."}], "tags": [], "owner": {"reputation": 6199, "user_id": 2560053, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/64aacb2c26ae0bb85730da51291d0b9b?s=128&d=identicon&r=PG", "display_name": "Thomas Baruchel", "link": "https://stackoverflow.com/users/2560053/thomas-baruchel"}, "is_accepted": false, "score": 1, "last_activity_date": 1455127865, "last_edit_date": 1455127865, "creation_date": 1455126558, "answer_id": 35322405, "question_id": 35322254, "link": "https://stackoverflow.com/questions/35322254/fortran-to-c-translation-of-reading-unformatted-files/35322405#35322405", "title": "Fortran to C translation of reading unformatted files", "body": "<p>Types in Fortran have a KIND because the same type (INTEGER in your case) may have different \"flavors\" (a little like short, long, signed, unsigned, etc. in C). These kinds are integer numbers: see a list <a href=\"http://earth.uni-muenster.de/~joergs/doc/f90/unix-um/dfum_034.html\" rel=\"nofollow\">here</a> for instance. Your expression <code>selected_int_kind(9)</code> means: what is the kind-number of the smallest integer kind that can contain values between -1e9 and 1e9 (see explanations <a href=\"https://gcc.gnu.org/onlinedocs/gfortran/SELECTED_005fINT_005fKIND.html\" rel=\"nofollow\">here</a>).</p>\n\n<p>In C, I guess <code>signed int</code> should be OK because even 4 bytes (32 bits) goes from <code>-2^31</code> up to <code>2^31-1</code> which is a little wider than required.</p>\n"}, {"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1455128663, "post_id": 35322964, "comment_id": 58354759, "body": "@VladimirF: was updating my answer as you left your comment."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1455129038, "post_id": 35322964, "comment_id": 58354992, "body": "The problem is that if one is to preserve the exact format of the binary file being read, <code>long</code> will be too large on Linux as <code>selected_int_kind()</code> returns the smallest integer type that can represent the requested range."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 1, "creation_date": 1455129254, "post_id": 35322964, "comment_id": 58355120, "body": "A 1-1 translation would require knowledge of the Fortran runtime that created the file.  Unformatted output in Fortran does not have a single specification."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1455128636, "last_edit_date": 1455128636, "creation_date": 1455128367, "answer_id": 35322964, "question_id": 35322254, "link": "https://stackoverflow.com/questions/35322254/fortran-to-c-translation-of-reading-unformatted-files/35322964#35322964", "title": "Fortran to C translation of reading unformatted files", "body": "<p>This is close to a 1:1 translation.</p>\n\n<pre><code>const char *filename = \"file\"; // or const char filename[] = \"file\";\nlong nn;\n\nFILE *input = fopen( filename, \"rb\" ); // open as binary\nif ( !input ) // or if ( input == NULL )\n{\n  fprintf( stderr, \"FILE ERROR: %s\\n\", filename );\n  exit(0);\n}\n\nif ( fread( &amp;nn, sizeof nn, 1, input ) &lt; 1 )\n{\n  fprintf( stderr, \"Error while reading input\\n\" );\n}\n\nfclose( input );  \n</code></pre>\n\n<p>C doesn't have an equivalent to the \"selected_int_kind\" as above; instead, you would pick the appropriate type to represent the expected range of values (i.e., <code>short</code>, <code>int</code>, <code>long</code>, <code>long long</code>, etc.).  If you need to be able to represent 9 decimal digits, a plain <code>int</code> might not be wide enough (although in practice it should be), so you should probably use <code>long</code> instead.  </p>\n"}], "owner": {"reputation": 31, "user_id": 3164856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1524969771/picture?type=large", "display_name": "Karandash8", "link": "https://stackoverflow.com/users/3164856/karandash8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455183279, "creation_date": 1455126150, "last_edit_date": 1455183279, "question_id": 35322254, "link": "https://stackoverflow.com/questions/35322254/fortran-to-c-translation-of-reading-unformatted-files", "title": "Fortran to C translation of reading unformatted files", "body": "<p>I am struggling with translating a small piece of Fortran code to C. I have a file written in a binary format and a Fortran program that reads that format. My goal is to have a C program that is able to read the same format. I am completely new to Fortran and I do not have the original specification of the format. So, it is kind of a reverse-engineering process.</p>\n\n<pre><code>filename = 'file'\ninteger :: status\ninteger, parameter :: di=selected_int_kind(9)\ninteger(di) :: nn\n\nOPEN(11,file = filename, status = 'old', action = 'read', form = 'unformatted', iostat = status)\nif(status /= 0) then\n   write(*,*) 'FILE ERROR: '//filename\n   stop\nendif\nread(11) nn\nCLOSE(11)\n</code></pre>\n\n<p>One thing that really confuses me is the <code>selected_int_kind()</code> statement. What exactly it does? What would be the equivalent in C?</p>\n\n<p>Actually, my first attempt to translate was pretty much the same as the answer by @JohnBode and it did not work. It reads a totally incorrect value. </p>\n\n<p>After a few more attempts I found a working solution, however, I do not understand why it is so. For some reason the correct value is written in the 5th-8th bytes. So, I can either read two <code>int</code> values (where the second one will be the correct one), or I can read a <code>long</code> value and then make a right shift for 32 bits. Any idea why Fortran can so easily retrieve the right value?</p>\n"}, {"tags": ["java", "c", "for-loop"], "comments": [{"owner": {"reputation": 501, "user_id": 3358328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22034381c7e0f9616978fdeb157ad9ef?s=128&d=identicon&r=PG&f=1", "display_name": "tokamak", "link": "https://stackoverflow.com/users/3358328/tokamak"}, "edited": false, "score": 6, "creation_date": 1455125920, "post_id": 35322100, "comment_id": 58353017, "body": "You have too much time on your hands if you&#39;re worried about this :)"}, {"owner": {"reputation": 34744, "user_id": 2193767, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tr7wR.jpg?s=128&g=1", "display_name": "TheLostMind", "link": "https://stackoverflow.com/users/2193767/thelostmind"}, "edited": false, "score": 1, "creation_date": 1455126060, "post_id": 35322100, "comment_id": 58353130, "body": "Interstingly,  both <code>for(;;)</code> and <code>while(true)</code> ae replaced with only one <code>goto 0</code> instruction :P"}, {"owner": {"reputation": 2045, "user_id": 2916005, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ad9599ae7939859c0ae330fdcd698e36?s=128&d=identicon&r=PG&f=1", "display_name": "osanger", "link": "https://stackoverflow.com/users/2916005/osanger"}, "reply_to_user": {"reputation": 501, "user_id": 3358328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22034381c7e0f9616978fdeb157ad9ef?s=128&d=identicon&r=PG&f=1", "display_name": "tokamak", "link": "https://stackoverflow.com/users/3358328/tokamak"}, "edited": false, "score": 0, "creation_date": 1455126103, "post_id": 35322100, "comment_id": 58353147, "body": "@tokamak made my day :D"}, {"owner": {"reputation": 5289, "user_id": 906523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JwvAX.jpg?s=128&g=1", "display_name": "Walery Strauch", "link": "https://stackoverflow.com/users/906523/walery-strauch"}, "reply_to_user": {"reputation": 34744, "user_id": 2193767, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tr7wR.jpg?s=128&g=1", "display_name": "TheLostMind", "link": "https://stackoverflow.com/users/2193767/thelostmind"}, "edited": false, "score": 0, "creation_date": 1455126255, "post_id": 35322100, "comment_id": 58353248, "body": "@TheLostMind yes I saw it. I took a look into bytecode with javap :)"}, {"owner": {"reputation": 34744, "user_id": 2193767, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tr7wR.jpg?s=128&g=1", "display_name": "TheLostMind", "link": "https://stackoverflow.com/users/2193767/thelostmind"}, "edited": false, "score": 1, "creation_date": 1455126374, "post_id": 35322100, "comment_id": 58353332, "body": "@WaleryStrauch - Yes. Same here."}, {"owner": {"reputation": 3840, "user_id": 3680045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/21bacf881a89ca04db7db5172d49e9c4?s=128&d=identicon&r=PG&f=1", "display_name": "OPK", "link": "https://stackoverflow.com/users/3680045/opk"}, "edited": false, "score": 0, "creation_date": 1455127119, "post_id": 35322100, "comment_id": 58353802, "body": "<a href=\"http://stackoverflow.com/questions/20299914/iffalse-vs-whilefalse-unreachable-code-vs-dead-code\" title=\"iffalse vs whilefalse unreachable code vs dead code\">stackoverflow.com/questions/20299914/&hellip;</a>"}, {"owner": {"reputation": 5289, "user_id": 906523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JwvAX.jpg?s=128&g=1", "display_name": "Walery Strauch", "link": "https://stackoverflow.com/users/906523/walery-strauch"}, "reply_to_user": {"reputation": 3840, "user_id": 3680045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/21bacf881a89ca04db7db5172d49e9c4?s=128&d=identicon&r=PG&f=1", "display_name": "OPK", "link": "https://stackoverflow.com/users/3680045/opk"}, "edited": false, "score": 0, "creation_date": 1455127276, "post_id": 35322100, "comment_id": 58353885, "body": "@JasonZ this is completely different question"}, {"owner": {"reputation": 3840, "user_id": 3680045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/21bacf881a89ca04db7db5172d49e9c4?s=128&d=identicon&r=PG&f=1", "display_name": "OPK", "link": "https://stackoverflow.com/users/3680045/opk"}, "edited": false, "score": 0, "creation_date": 1455127472, "post_id": 35322100, "comment_id": 58353995, "body": "@WaleryStrauch It&#39;s the same question to me, you are asking why expression can be omitted in the for loop, that question was asking the same thing."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 3840, "user_id": 3680045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/21bacf881a89ca04db7db5172d49e9c4?s=128&d=identicon&r=PG&f=1", "display_name": "OPK", "link": "https://stackoverflow.com/users/3680045/opk"}, "edited": false, "score": 1, "creation_date": 1455127653, "post_id": 35322100, "comment_id": 58354112, "body": "@JasonZ:  Those two questions are <i>worlds</i> apart.  This is asking about the lexical structure, <i>not</i> why one statement compiles with a specific expression and another doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 5289, "user_id": 906523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JwvAX.jpg?s=128&g=1", "display_name": "Walery Strauch", "link": "https://stackoverflow.com/users/906523/walery-strauch"}, "edited": false, "score": 1, "creation_date": 1455126523, "post_id": 35322207, "comment_id": 58353412, "body": "Yes... I saw JLS already also. But my question was &#39;why&#39; is it so?"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 5289, "user_id": 906523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JwvAX.jpg?s=128&g=1", "display_name": "Walery Strauch", "link": "https://stackoverflow.com/users/906523/walery-strauch"}, "edited": false, "score": 1, "creation_date": 1455126657, "post_id": 35322207, "comment_id": 58353506, "body": "&quot;Because Oracle said so&quot; is about the best thing you can go on from here.  It&#39;s also consistent with C, which Java is mostly based off of."}, {"owner": {"reputation": 5289, "user_id": 906523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JwvAX.jpg?s=128&g=1", "display_name": "Walery Strauch", "link": "https://stackoverflow.com/users/906523/walery-strauch"}, "edited": false, "score": 2, "creation_date": 1455127145, "post_id": 35322207, "comment_id": 58353818, "body": "I wrote this question because I hope someone has better answer than &quot;Because Oracle said so&quot;. Sure, I believe java makes it to be consistent with C. But what are the initial reason for this decision? Maybe there are historical reasons like &#39;it was easier to implement compiler in that way&#39; or &#39;just mistake - but for compatibility reason it wasn&#39;t change afterwards&#39;. Maybe there are other reason... My question aims to find this out."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "reply_to_user": {"reputation": 5289, "user_id": 906523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JwvAX.jpg?s=128&g=1", "display_name": "Walery Strauch", "link": "https://stackoverflow.com/users/906523/walery-strauch"}, "edited": false, "score": 0, "creation_date": 1455127602, "post_id": 35322207, "comment_id": 58354076, "body": "@WaleryStrauch:  I&#39;ve added another resource, but the ultimate answer is <i>still</i> &quot;because Oracle/Sun said so&quot;.  There&#39;s strong evidence to suggest it took inspiration from C, which makes sense, but that decision was still made by the original language framers."}], "tags": [], "owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "is_accepted": false, "score": 3, "last_activity_date": 1455127548, "last_edit_date": 1592644375, "creation_date": 1455126036, "answer_id": 35322207, "question_id": 35322100, "link": "https://stackoverflow.com/questions/35322100/syntax-with-missed-expression-for-basic-for-loop/35322207#35322207", "title": "Syntax with missed Expression for basic for-loop", "body": "<p>The rationale starts <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.1.1\" rel=\"nofollow noreferrer\">in JLS 14.14.1.1</a> and continues into 14.14.1.2, emphasis mine.</p>\n<blockquote>\n<p>If the <code>ForInit</code> part <strong>is not present</strong>, no action is taken.</p>\n<p>If the <code>Expression</code> <strong>is not present</strong>, or it is present and the value resulting from its evaluation (including any possible unboxing) is true, then the contained <code>Statement</code> is executed...</p>\n</blockquote>\n<p>The JLS permits the blank <code>ForInit</code>, <code>Expression</code> and <code>ForUpdate</code> statements and has conditions to deal with their absence, so omitting them is acceptable.</p>\n<p>It is <em><strong>not</strong></em> permissible to do so with <code>while</code> loops, <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.12\" rel=\"nofollow noreferrer\">per JLS 14.12</a>.</p>\n<blockquote>\n<p>The <code>Expression</code> must have type <code>boolean</code> or <code>Boolean</code>, or a compile-time error occurs.</p>\n</blockquote>\n<p>From this, the specification is <em>not</em> permitting a blank expression to be passed through, since that would result in a compile-time error per above.</p>\n<hr />\n<p>If you're looking for a slightly more historical reason, the <a href=\"http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">C specification mandates this as well</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/21a06.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/21a06.png\" alt=\"enter image description here\" /></a></p>\n<p>Since Java took heavy inspiration from C (and is mostly implemented in it), it makes perfect sense for Java's loops to behave similarly to C's loops, and this is how they behave:  expressions are optional in C's <code>for</code>  statement, and mandatory in its <code>while</code> statement.</p>\n"}], "owner": {"reputation": 5289, "user_id": 906523, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JwvAX.jpg?s=128&g=1", "display_name": "Walery Strauch", "link": "https://stackoverflow.com/users/906523/walery-strauch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1455128140, "creation_date": 1455125747, "last_edit_date": 1455128140, "question_id": 35322100, "link": "https://stackoverflow.com/questions/35322100/syntax-with-missed-expression-for-basic-for-loop", "title": "Syntax with missed Expression for basic for-loop", "body": "<p>Some days ago I was talking with my colleagues about this code in Java:</p>\n\n<pre><code>for( ; ; ) { }\n</code></pre>\n\n<p>Nothing special here, just an infinite loop.</p>\n\n<p>But we wonder why this is syntactically correct. If you take a look to <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.1\" rel=\"nofollow\">JLS \u00a714.14.1</a> you'll see this:</p>\n\n<pre><code>for ( [ForInit] ; [Expression] ; [ForUpdate] ) Statement\n</code></pre>\n\n<p>I understand that <code>ForInit</code> and <code>ForUpdate</code> can be omitted. But at least I would expect that <code>Expression</code> is mandatory, like in while-loop:</p>\n\n<pre><code>while() {} // compile error, Expression is missed\n</code></pre>\n\n<p>So why can Expression be omitted on a for-loop? And even one think more - why is missed Expression resolved to <code>true</code>? My expectation would be that empty Expression is resolved to <code>false</code>.</p>\n\n<p>The same think is valid for other languages (I've try it with C and JavaScript, but I believe every language with for-loops behaves in that way).</p>\n\n<p>Why is an Expression clause not mandatory in for-loop (but in while-loop)? Why does empty Expression resolve to <code>true</code> and not to <code>false</code>?</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 438, "user_id": 2104351, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/954486ac01356280a599142c7aa86ad7?s=128&d=identicon&r=PG", "display_name": "Achim Schmitz", "link": "https://stackoverflow.com/users/2104351/achim-schmitz"}, "edited": false, "score": 0, "creation_date": 1455124985, "post_id": 35321675, "comment_id": 58352390, "body": "What exactly is the &quot;issue&quot; you speak of?"}, {"owner": {"reputation": 11, "user_id": 5909568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8522af0ff8e3db6549a88dfe99feffd8?s=128&d=identicon&r=PG&f=1", "display_name": "Joh", "link": "https://stackoverflow.com/users/5909568/joh"}, "reply_to_user": {"reputation": 438, "user_id": 2104351, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/954486ac01356280a599142c7aa86ad7?s=128&d=identicon&r=PG", "display_name": "Achim Schmitz", "link": "https://stackoverflow.com/users/2104351/achim-schmitz"}, "edited": false, "score": 0, "creation_date": 1455125107, "post_id": 35321675, "comment_id": 58352458, "body": "I&#39;m trying to sort the second array according to the first array order"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "edited": false, "score": 0, "creation_date": 1455127690, "post_id": 35321675, "comment_id": 58354144, "body": "@Joh Please see this post on <a href=\"http://meta.stackexchange.com/q/5234/179419\">How does accepting an answer work?</a>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455136535, "post_id": 35321675, "comment_id": 58359599, "body": "void main(){}....you have more problems than you think."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1455124869, "creation_date": 1455124869, "answer_id": 35321806, "question_id": 35321675, "link": "https://stackoverflow.com/questions/35321675/array-sorting-based-on-another-array-order/35321806#35321806", "title": "Array sorting based on another array order", "body": "<p>One way to get what you need:</p>\n\n<ol>\n<li>Create a <code>struct</code> that has two members.</li>\n<li>Create an array of the <code>struct</code>.</li>\n<li>Fill the <code>struct</code> array such that the first half the original array are stored in the first member of the elements of <code>struct</code> array and the the second half of the original array are stored in the second member of the elements of the <code>struct</code> array.</li>\n<li>Sort the <code>struct</code> array using the first member of the elements.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5909568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8522af0ff8e3db6549a88dfe99feffd8?s=128&d=identicon&r=PG&f=1", "display_name": "Joh", "link": "https://stackoverflow.com/users/5909568/joh"}, "edited": false, "score": 0, "creation_date": 1455127000, "post_id": 35322366, "comment_id": 58353730, "body": "Thank you! It&#39;s helpful!"}, {"owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "reply_to_user": {"reputation": 11, "user_id": 5909568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8522af0ff8e3db6549a88dfe99feffd8?s=128&d=identicon&r=PG&f=1", "display_name": "Joh", "link": "https://stackoverflow.com/users/5909568/joh"}, "edited": false, "score": 0, "creation_date": 1455127214, "post_id": 35322366, "comment_id": 58353853, "body": "Happy to help, and welcome to Stack Overflow. If this answer or any other one solved your issue, please mark it as accepted."}], "tags": [], "owner": {"reputation": 1360, "user_id": 5463883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7838cba44980354335c2ed650d89f17f?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Akhtar", "link": "https://stackoverflow.com/users/5463883/ahmed-akhtar"}, "is_accepted": false, "score": 0, "last_activity_date": 1455126847, "last_edit_date": 1455126847, "creation_date": 1455126449, "answer_id": 35322366, "question_id": 35321675, "link": "https://stackoverflow.com/questions/35321675/array-sorting-based-on-another-array-order/35322366#35322366", "title": "Array sorting based on another array order", "body": "<p>Just add this code after your last <code>memcpy</code> function:</p>\n\n<pre><code>int j, temp;\nfor(i = 0; i &lt; n/2; i++)\n{\n for( j = 0; j &lt; n/2 - 1; j++ )\n {\n  if( firstHalf[j] &gt; firstHalf[j+1] )\n  {\n   temp = firstHalf[j];\n   firstHalf[j] = firstHalf[j+1];\n   firstHalf[j+1] = temp;\n\n   temp = secondHalf[j];\n   secondHalf[j] = secondHalf[j+1];\n   secondHalf[j+1] = temp;\n  }\n }\n}\n</code></pre>\n\n<p>I have used basic <strong>bubble sort</strong>, but you can use any of the advanced sorting algorithms.</p>\n\n<p>The trick, is that you just have to use the <code>firstHalf</code> array when doing the comparison, but when swapping, you swap elements in both the arrays.</p>\n"}], "owner": {"reputation": 11, "user_id": 5909568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8522af0ff8e3db6549a88dfe99feffd8?s=128&d=identicon&r=PG&f=1", "display_name": "Joh", "link": "https://stackoverflow.com/users/5909568/joh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1455129900, "creation_date": 1455124455, "last_edit_date": 1455129900, "question_id": 35321675, "link": "https://stackoverflow.com/questions/35321675/array-sorting-based-on-another-array-order", "title": "Array sorting based on another array order", "body": "<p>I am new to C and am having some issues with this code.</p>\n\n<p>I need to split an array into two different arrays and sort the second array in whatever order the first one is.</p>\n\n<p>Any thought please?</p>\n\n<p>Below is where I got so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main ()\n{\n    int currentN;\n    int i, n;\n    int array[20];\n    printf(\"Enter the value of n\\n\");\n    scanf(\"%d\", &amp;n);\n\n    if (n%2 !=0)\n    {\n     printf(\"sequence would not be equ. please enter Odd \\n\");\n     printf(\"Please Enter even number\\n\");\n     scanf(\"%d\", &amp;n);\n    }\n    //add\n    printf(\"enter the numbers\\n\");\n\n    for (i = 0; i &lt; n; ++i)\n    {\n     scanf(\"%d\", &amp;array[i]);\n     //  scanf(\"%d\", &amp;currentN);\n     // seq[i]= currentN;\n    }\n    n++;\n    //add\n    int *firstHalf = malloc(n/2 * sizeof(int));\n    if (!firstHalf)\n    {\n     /* handle error */\n    }\n\n    int *secondHalf = malloc(n/2 * sizeof(int));\n    if (!secondHalf)\n    {\n     /* handle error */\n    }\n\n    memcpy(firstHalf, array, n/2 * sizeof(int));\n    memcpy(secondHalf, array + n/2, n/2 * sizeof(int));\n\n    for (i = 0; i &lt; n/2; i++)\n    {\n     printf( \"%d\\t\", firstHalf[i]);\n     //printf( \"%d\\n\", secondHalf[i]);\n     //printf( \"\\n************************\");\n    }\n    printf(\"\\n*********************\\n\");\n    for (i = 0; i &lt; n/2; i++)\n    {\n     printf( \"%d\\t\", secondHalf[i]);\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c", "r", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 1552, "user_id": 2757612, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7730a80467959e6d02d531c891727ff2?s=128&d=identicon&r=PG&f=1", "display_name": "zabolekar", "link": "https://stackoverflow.com/users/2757612/zabolekar"}, "is_accepted": true, "score": 0, "last_activity_date": 1455281353, "creation_date": 1455281353, "answer_id": 35363092, "question_id": 35321671, "link": "https://stackoverflow.com/questions/35321671/compiling-c-code-that-uses-both-r-and-numpy-on-linux/35363092#35363092", "title": "Compiling C code that uses both R and numpy on Linux", "body": "<p>A solution that works (with this example as well as with the real code) is to load libpythonX.Y.so with dlopen:</p>\n\n<pre><code> #include &lt;Python.h&gt;\n #include &lt;Rinternals.h&gt;\n #include &lt;numpy/arrayobject.h&gt;\n\n #ifndef _WIN32\n #include &lt;dlfcn.h&gt;\n #endif\n\n SEXP main() {\n #ifndef _WIN32\n    dlopen(\"libpython2.6.so\", RTLD_NOW | RTLD_GLOBAL);\n #endif\n    Py_Initialize();\n    import_array();\n\n    SEXP one = PROTECT(allocVector(INTSXP, 1));\n    INTEGER(one)[0] = 1;\n    npy_intp dims[1] = {1};\n    int data[1] = {1};\n    PyObject *another = PyArray_SimpleNewFromData(1, dims, NPY_INT, data);\n\n    Rprintf(\"Hello, %d \", INTEGER(one)[0] + *(int*)PyArray_DATA(another));\n    PyRun_SimpleString(\"print('worlds')\");\n\n    UNPROTECT(1);\n    return one;\n}\n</code></pre>\n\n<p>I do not, however, fully understand why it is needed.</p>\n"}], "owner": {"reputation": 1552, "user_id": 2757612, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7730a80467959e6d02d531c891727ff2?s=128&d=identicon&r=PG&f=1", "display_name": "zabolekar", "link": "https://stackoverflow.com/users/2757612/zabolekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 35363092, "answer_count": 1, "score": 8, "last_activity_date": 1455281353, "creation_date": 1455124444, "last_edit_date": 1455215825, "question_id": 35321671, "link": "https://stackoverflow.com/questions/35321671/compiling-c-code-that-uses-both-r-and-numpy-on-linux", "title": "Compiling C code that uses both R and numpy on Linux", "body": "<p>I have some C code that uses both numpy and R. On Windows, it compiles with MSVC to a .dll which can be dynamically loaded from R and passes all the tests. However, I fail to make it work on Debian.</p>\n\n<p>To investigate the problem I created the following minimal-ish example:\n</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;Rinternals.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n\nSEXP main() {\n   Py_Initialize();\n   import_array();\n\n   SEXP one = PROTECT(allocVector(INTSXP, 1));\n   INTEGER(one)[0] = 1;\n   npy_intp dims[1] = {1};\n   int data[1] = {1};\n   PyObject *another = PyArray_SimpleNewFromData(1, dims, NPY_INT, data);\n\n   Rprintf(\"Hello, %d \", INTEGER(one)[0] + *(int*)PyArray_DATA(another));\n   PyRun_SimpleString(\"print('worlds')\");\n\n   UNPROTECT(1);\n   return one;\n}\n</code></pre>\n\n<p>I can compile it with\n</p>\n\n<pre><code>cl /I \"C:\\Program Files\\R\\R-3.2.0\\include\" /I \"C:\\Python34\\include\" /I \"C:\\Python34\\Lib\\site-packages\\numpy\\core\\include\" /c hello.c\nlink /dll /export:main hello.obj Rdll.lib C:/Python34/libs/python34.lib\n</code></pre>\n\n<p>where <code>Rdll.lib</code> was created from <code>%R_HOME%\\bin\\x64\\R.dll</code> with\n</p>\n\n<pre><code>pexports R.dll &gt; R.exp\nlink /lib /def:R.exp /machine:x64 /out:Rdll.lib\n</code></pre>\n\n<p>Then it can be used from R:\n</p>\n\n<pre><code>&gt; dyn.load(paste0(\"hello\", .Platform$dynlib.ext))\n&gt; .Call(\"main\")\nHello, 2 worlds\n[1] 1\n</code></pre>\n\n<p>When, however, I compile it on Debian with\n</p>\n\n<pre><code>gcc -shared -fPIC -I/usr/share/R/include -I/usr/include/python2.6 -lpython2.6 -L/usr/lib64/R/lib -lR hello.c -o hello.so\n</code></pre>\n\n<p>and import it from R the following happens:\n</p>\n\n<pre><code>&gt; dyn.load(\"hello.so\")\n&gt; .Call(\"main\")\nTraceback (most recent call last):\n  File \"/usr/lib/pymodules/python2.6/numpy/__init__.py\", line 132, in &lt;module&gt;\n    import add_newdocs\n  File \"/usr/lib/pymodules/python2.6/numpy/add_newdocs.py\", line 9, in &lt;module&gt;\n    from lib import add_newdoc\n  File \"/usr/lib/pymodules/python2.6/numpy/lib/__init__.py\", line 4, in &lt;module&gt;\n    from type_check import *\n  File \"/usr/lib/pymodules/python2.6/numpy/lib/type_check.py\", line 8, in &lt;module&gt;\n    import numpy.core.numeric as _nx\n  File \"/usr/lib/pymodules/python2.6/numpy/core/__init__.py\", line 5, in &lt;module&gt;\n    import multiarray\nImportError: /usr/lib/pymodules/python2.6/numpy/core/multiarray.so: undefined symbol: _Py_ZeroStruct\n\n *** caught segfault ***\naddress 0x4, cause 'memory not mapped'\n</code></pre>\n\n<p>It does produce segmentation faults unless everything related to numpy is commented out. Interacting with pure Python from R seems to be OK. But as soon as <code>import_array()</code> is called there is a segfault. I added <code>-I/usr/share/pyshared/numpy/core/include/</code> out of desperation and it didn't change anything.</p>\n\n<p>Finally, if I compile the following (similar to the previous, but slightly changed) code\n</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;Rinternals.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n\nint main() {\n   char *localArgs[] = {\"R\", \"--silent\"};\n   Rf_initEmbeddedR(2, localArgs);\n   Py_Initialize();\n   import_array();\n\n   SEXP one = PROTECT(allocVector(INTSXP, 1));\n   INTEGER(one)[0] = 1;\n   npy_intp dims[1] = {1};\n   int data[1] = {1};\n   PyObject *another = PyArray_SimpleNewFromData(1, dims, NPY_INT, data);\n\n   Rprintf(\"Hello, %d \", INTEGER(one)[0] + *(int*)PyArray_DATA(another));\n   PyRun_SimpleString(\"print('worlds')\");\n\n   UNPROTECT(1);\n}\n</code></pre>\n\n<p>on the same Debian machine with\n</p>\n\n<pre><code> gcc -I/usr/share/R/include -I/usr/include/python2.6 -lpython2.6 -L/usr/lib64/R/lib -lR hello.c -o hello\n</code></pre>\n\n<p>and call it with\n</p>\n\n<pre><code>LD_LIBRARY_PATH=/usr/lib64/R/lib R_HOME=/usr/lib64/R ./hello\n</code></pre>\n\n<p>it suddenly doesn't crash, works well and produces \"Hello, 2 worlds\", as expected.</p>\n\n<p>The versions are:\nWindows: Compiler Version 19.00.23506 for x64, Python 3.4.4, numpy 1.9.3, R 3.2.0\nDebian: gcc version 4.4.5 (target: x68_64-linux-gnu), Python 2.6.6, numpy 1.4.1, R 3.2.1</p>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>Update:</strong> Tested on Ubuntu with both Python 3.2 and Python 2.7 with both gcc and clang. The problem persists.</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1455124519, "post_id": 35321663, "comment_id": 58352066, "body": "<code>PARAT(x - 1)</code> expands to <code>x - 1*x - 1 + x - 1</code> since <code>x = 104</code> this is <code>104 - 104 - 1 + 104 - 1</code> or <code>102</code> For <code>z</code> it&#39;s undefined behavior."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1455124541, "post_id": 35321663, "comment_id": 58352080, "body": "What specifically don&#39;t you understand?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1455124640, "post_id": 35321663, "comment_id": 58352161, "body": "Realize that <code>PATRAT</code> is <i>not</i> a true function.  It&#39;s a preprocessor macro, and those only do textual substitution.  Try writing out what the body of <code>main()</code> would look like if you expanded the macro invocations."}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "edited": false, "score": 0, "creation_date": 1455124657, "post_id": 35321663, "comment_id": 58352172, "body": "I understood the first part with y why it becomes 102. But the result should be 103 since we have y++."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1455124666, "post_id": 35321663, "comment_id": 58352181, "body": "Where did this code come from? Is it just an exercise? <code>t = ++PATRAT(x);</code> is a monstrosity."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1455124777, "post_id": 35321663, "comment_id": 58352252, "body": "It is not a function (as your title claims) but a macro"}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "edited": false, "score": 0, "creation_date": 1455124783, "post_id": 35321663, "comment_id": 58352258, "body": "z should be PATRAT(103) which is 10712 and t should be PATRAT(104) + 1 which is 10921 but the result is diffrent"}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1455124861, "post_id": 35321663, "comment_id": 58352309, "body": "@lurker Yes, it is an exercise and i need to find what it returns. But what i am trying to do is to understand why it returns that"}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455125143, "post_id": 35321663, "comment_id": 58352482, "body": "@iharob The return value for y is 105, not 102"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1455125249, "post_id": 35321663, "comment_id": 58352557, "body": "@CiobyAndrei It&#39;s UNDEFINED BEHAVIOR."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1455125318, "post_id": 35321663, "comment_id": 58352603, "body": "Why do you say <i><code>z</code> should be <code>PATRAT(103)</code></i>? You don&#39;t know that because of the side effects of <code>y++</code> inside of the macro. As others have suggested, to understand the behavior of <code>PATRAT(y++)</code> you need to expand the macro, which occurs in line in the code. It&#39;s not like a function call at all. You&#39;ll find that <code>y++</code> occurs multiple times. So it&#39;s not the same result as, <code>w = y++; z = PATRAT(w);</code>. The expression <code>PATRAT(y++)</code> expands to, <code>y++*y+++y++</code> which the C compiler then compiles and which, among other things, is a mess."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455125563, "post_id": 35321663, "comment_id": 58352766, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior\">Why are these constructs (using ++) undefined behavior?</a>"}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1455125639, "post_id": 35321663, "comment_id": 58352820, "body": "@lurker I didn`t know how the fuction expands and i assumed it was that way but i understand now. So z should be 103 * 104 + 105 right?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1455125787, "post_id": 35321663, "comment_id": 58352931, "body": "Not to belabor the point, but it&#39;s <b>not</b> a <i>function</i>. It&#39;s a <i>macro</i>. Big difference. And whether <code>z</code> <i>should be</i> <code>103 * 104 + 105</code> is not well-defined due to dependency when <code>++</code> occurs. This is the undefined behavior everyone is trying to explain."}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1455125852, "post_id": 35321663, "comment_id": 58352975, "body": "@lurker I understand now, Thank you!"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1455125947, "post_id": 35321663, "comment_id": 58353036, "body": "Cool. That&#39;s the important part. :)"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "edited": false, "score": 0, "creation_date": 1455125034, "post_id": 35321709, "comment_id": 58352419, "body": "I am using codeblocks, but i don<code>t know how to compile with -E. And i don</code>t need that, I need to understand why given that code, i get those results. I don`t know how that function works"}, {"owner": {"reputation": 241, "user_id": 5731628, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VjD-gt13QCQ/AAAAAAAAAAI/AAAAAAAAAHs/fb3YMM5Ta_c/photo.jpg?sz=128", "display_name": "c_mnon", "link": "https://stackoverflow.com/users/5731628/c-mnon"}, "reply_to_user": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "edited": false, "score": 0, "creation_date": 1455125925, "post_id": 35321709, "comment_id": 58353022, "body": "@CiobyAndrei What zan is suggesting is a method to expand the Macro and see the C pre processor output after that(not the final results).This would be the best method to see how the function actually works."}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 241, "user_id": 5731628, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VjD-gt13QCQ/AAAAAAAAAAI/AAAAAAAAAHs/fb3YMM5Ta_c/photo.jpg?sz=128", "display_name": "c_mnon", "link": "https://stackoverflow.com/users/5731628/c-mnon"}, "edited": false, "score": 0, "creation_date": 1455126014, "post_id": 35321709, "comment_id": 58353093, "body": "@c_mnon How do i use that method?"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "edited": false, "score": 0, "creation_date": 1455126096, "post_id": 35321709, "comment_id": 58353144, "body": "@CiobyAndrei: Something like <code>gcc -E my-c-source-file.c</code> in a terminal window."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 3, "last_activity_date": 1455124561, "creation_date": 1455124561, "answer_id": 35321709, "question_id": 35321663, "link": "https://stackoverflow.com/questions/35321663/a-function-defined-in-c-with-define/35321709#35321709", "title": "A function defined in c with #Define", "body": "<p>Macro expansion.</p>\n\n<p>If using GCC compile with -E to see the output after all includes and macros. Then it will become clear.</p>\n"}, {"comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1455125355, "post_id": 35321733, "comment_id": 58352635, "body": "Using <code>#define PATRAT(x) ((x)*(x)+(x));</code> will help with the first, by wrapping the argument and the whole expression in parentheses, but you <b>cannot</b> pass a pre- or post-increment parameter in to a macro and get reliable results."}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "edited": false, "score": 0, "creation_date": 1455125427, "post_id": 35321733, "comment_id": 58352674, "body": "Thank you! This is what i needed. But for z = PATRAT(y++) it would mean z = 103 * 104 + 105 and this result it is diffrent from 10506. @zenith"}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1455125533, "post_id": 35321733, "comment_id": 58352740, "body": "I need to use the function the way it is @TripeHound"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "edited": false, "score": 0, "creation_date": 1455126467, "post_id": 35321733, "comment_id": 58353383, "body": "@CiobyAndrei: The undefined behavior of incrementing more than once in an expression means that <code>y</code> might be the same value during all the operations, then have 3 added at the end. Or it might be y, y+1, y+2, or it might be y then have only 1 added at the end. It is UNDEFINED."}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1455126714, "post_id": 35321733, "comment_id": 58353541, "body": "Sorry, but you cannot do that. Because it is a MACRO, not a function, it just expands the argument-TEXT as shown in the answer, giving something that is BY DEFINITION undefined. One compiler might give 103*103+103, another might give 105*105+105 <i>or any combination inbetween</i>. In fact, the same compiler might do it differently at different times. If you NEED to pass a ++ parameter, you MUST use a real function."}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1455126731, "post_id": 35321733, "comment_id": 58353560, "body": "@ZanLynx I got it! Thank you!"}, {"owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1455126804, "post_id": 35321733, "comment_id": 58353602, "body": "@TripeHound I was not trying to solve a problem with this Macro, this was an exercise and i had to tell what the result was and i didn`t know that that was a macro and how it works."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 3, "last_activity_date": 1455124965, "last_edit_date": 1495535437, "creation_date": 1455124646, "answer_id": 35321733, "question_id": 35321663, "link": "https://stackoverflow.com/questions/35321663/a-function-defined-in-c-with-define/35321733#35321733", "title": "A function defined in c with #Define", "body": "<p>The preprocessor expands it as follows:</p>\n\n<pre><code>y = x - 1*x - 1+x - 1;;\nz = y++*y+++y++;;\nt = ++x*x+x;;\n</code></pre>\n\n<p>After we make that human-readable, it says:</p>\n\n<pre><code>y = x - (1 * x) - 1 + x - 1;\nz = (y++ * y++) + y++;\nt = (++x * x) + x;\n</code></pre>\n\n<p>Which is <strong>undefined behavior</strong> <a href=\"https://stackoverflow.com/q/949433/3425536\">because we're modifying <code>y</code> without sequence points in between</a>, so any output is possible.</p>\n"}], "owner": {"reputation": 67, "user_id": 4709344, "user_type": "registered", "profile_image": "https://graph.facebook.com/880031958730362/picture?type=large", "display_name": "Cioby Andrei", "link": "https://stackoverflow.com/users/4709344/cioby-andrei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 35321733, "answer_count": 2, "score": -2, "last_activity_date": 1455124965, "creation_date": 1455124426, "last_edit_date": 1455124913, "question_id": 35321663, "link": "https://stackoverflow.com/questions/35321663/a-function-defined-in-c-with-define", "title": "A function defined in c with #Define", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define PATRAT(x) x*x+x;\n\nint main()\n{\n    int x,y,z,t;\n\n    x = 104;\n    y = PATRAT(x - 1);\n    z = PATRAT(y++);\n    t = ++PATRAT(x);\n\n     printf (\"%d %d %d\", y, z, t);\n\n    return 1;\n}\n</code></pre>\n\n<p>Given this code, the results are y = 105, z = 10506, t = 11130 and i can`t understand why. Can you please explain?</p>\n"}, {"tags": ["c", "malloc", "ld-preload"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1455126479, "post_id": 35321158, "comment_id": 58353389, "body": "You need to post a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>.  In short, post your code."}], "owner": {"reputation": 21, "user_id": 5499397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb634bab689575f9ceaf86f733c4bba9?s=128&d=identicon&r=PG&f=1", "display_name": "charle", "link": "https://stackoverflow.com/users/5499397/charle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455124185, "creation_date": 1455123007, "last_edit_date": 1455124185, "question_id": 35321158, "link": "https://stackoverflow.com/questions/35321158/error-with-shared-library-recoding-malloc", "title": "Error with shared library recoding malloc", "body": "<p>I'm trying to implement my own version of <code>malloc</code> making a shared library but I'm facing a problem.\nWhen I run my <code>malloc</code> with <code>LD_PRELOAD</code> this message appear:</p>\n\n<blockquote>\n  <p>Inconsistency detected by ld.so: dl-load.c: 2325: _dl_map_object: Assertion nsid &lt; _rtld_local._dl_nns failed!</p>\n</blockquote>\n\n<p>This appear when I launch the command <code>ls -lRa /home</code><br>\nMy <code>LD_PRELOAD</code> path is ok because the command ls works.\nThanks for helping me!</p>\n"}, {"tags": ["c", "dynamic-memory-allocation", "file-handling", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455123133, "post_id": 35321124, "comment_id": 58351137, "body": "<code>sprintf(stringed, &quot;%X %d %c %d %[^\\n]s&quot;, &amp;i, &amp;j, &amp;c, &amp;k, s);</code> certainly is a problem as are many other parts of code.  Enable all warnings or consider a new compiler.  You will save time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455123978, "post_id": 35321124, "comment_id": 58351733, "body": "<code>while(!feof(fp))</code> is wrong. Read the documentation."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1455127147, "post_id": 35321124, "comment_id": 58353820, "body": "Indeed, instead of <code>while(!feof(fp))</code> base the loop on the return value from <code>fscanf</code> with <code>while(fscanf(...) == 5)</code> and you don&#39;t need the <code>memset(stringed, &#39;\\0&#39;, sizeof(stringed))</code> just before you <code>sprintf</code> your data into that buffer. However, a buffer size of 20 seems inadequate."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1455127573, "post_id": 35321124, "comment_id": 58354061, "body": "<code>sprintf(stringed, &quot;%X %d %c %d %[^\\n]s&quot;, &amp;i, &amp;j, &amp;c, &amp;k, s);</code> is wrong. The <code>&amp;</code> was correct for <code>fscanf</code> but not for <code>sprintf</code>. Try <code>sprintf(stringed, &quot;%X %d %c %d %s&quot;, i, j, c, k, s);</code> and make the buffer larger than 20 bytes too. You can check this: <code>sprintf</code> returns the number of bytes it output to the string."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1455127993, "post_id": 35321124, "comment_id": 58354327, "body": "<code>ptext = argv[2];</code> --&gt; <code>ptext = argv[1];</code> in C array indexing is 0-based."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455169385, "post_id": 35321124, "comment_id": 58371144, "body": "the lines: <code>sprintf(stringed, &quot;%X %d %c %d %s&quot;, i, j, c, k, s);         fwrite(stringed, 1, strlen(stringed), fb);</code> will produce a human readable file, with all fields separated by a blank.   Not what your question states you want to do."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455169413, "post_id": 35321124, "comment_id": 58371157, "body": "please post some example input from the original file."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1455173721, "post_id": 35331846, "comment_id": 58373054, "body": "I&#39;ll leave the implementation of the code to produce, in memory, of a table containing the contents of the binary file to you."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 0, "last_activity_date": 1455173567, "last_edit_date": 1455173567, "creation_date": 1455170288, "answer_id": 35331846, "question_id": 35321124, "link": "https://stackoverflow.com/questions/35321124/sscanf-till-end-of-file-in-c/35331846#35331846", "title": "sscanf till end of file in c", "body": "<p>the following code</p>\n\n<ol>\n<li>properly handles error conditions</li>\n<li>actually produces a binary file, rather than just another text file</li>\n<li>uses the returned value from <code>fscanf()</code> rather than the faulty <code>feof()</code></li>\n<li>uses <code>perror()</code> so system error message is displayed on stderr</li>\n<li>follows the axiom: <em>only one statement per line and (at most) one variable declaration per statement</em></li>\n</ol>\n\n<p>error checking for the calls to fwrite(), fclose() could be added but they are VERY unlikely to produce an error</p>\n\n<p>and now the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n    struct record\n    {\n        unsigned int hv;\n        int fv;\n        int kv;\n        char c;\n        char s[8];\n    };\n\nint main(int argc, char *argv[])\n{\n    char *ptext, *btext=\"file.bin\";\n    if(argc != 2)\n    {\n        printf(\"Using default \\\"text.txt\\\" file to create mnemonics table\\n\");\n        ptext = \"text.txt\";\n    }\n\n    else\n    {\n        ptext = argv[1];\n    }\n\n    FILE *fp;\n    FILE *fb;\n\n    if(!(fp=fopen(ptext, \"r\")))\n    {\n        perror( \"fopen for read of text file failed\" );\n        fprintf(stdout, \"Error: File %s is not available\\n\", ptext);\n        exit(1);\n    }\n\n    if(!(fb = fopen(btext, \"wb\")))\n    {\n        perror( \"fopen for write of binary file failed\" );\n        fprintf(stdout, \"Error: File %s is cannot be opened to write\\n\", btext);\n        fclose( fp ); // cleanup\n        exit(1);\n    }\n\n    struct record myRecord;\n\n    // produce binary file from text input\n    // note: leading space in format string, to consume any left over newline, etc\n    while(5 == fscanf(fp, \" %X %d %c %d %7[^\\n]\",\n                      &amp;myRecord.hv,\n                      &amp;myRecord.fv,\n                      &amp;myRecord.c,\n                      &amp;myRecord.kv,\n                      myRecord.s) )\n    {\n        fwrite( &amp;myRecord, sizeof myRecord, 1, fb );\n    }\n\n    fprintf(stdout, \"Success: %s file successfully created\\n\", btext);\n\n    fclose(fp);\n    fclose(fb);\n    return 0;\n}\n\n\n\n/*mainProg.c*/\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n//#include &lt;malloc.h&gt;\n#include &lt;string.h&gt;\n\n//typedef struct opStruct\n//{\n//    int hexv, fv, kv;\n//    char str[8], key;\n//} node;\n\nstruct record\n{\n    unsigned int hv;\n    int fv;\n    int kv;\n    char c;\n    char s[8];\n};\n\n//node* makeTable(char *filename)\nvoid makeTable( char *filename )\n{\n    FILE *fp;\n    if(!(fp = fopen(filename, \"rb\")))\n    {\n        fprintf(stdout, \"Error: Unable to open file %s\\n\", filename);\n        exit(1);\n    }\n\n    // implied else, fopen successful\n\n    struct record myRecord;\n\n    // use fscanf() not sscanf()\n    while( fread( &amp;myRecord, sizeof myRecord, 1, fp) )\n    {\n        //sprintf( , \"%X %d %c %d %s\\n\" hv, fv, c, kv, s );\n        //fprintf(stdout, \"%s\", str );\n        fprintf( stdout, \"\\n%X\",   myRecord.hv  );\n        fprintf( stdout, \" %d\",    myRecord.fv  );\n        fprintf( stdout, \" %c\",    myRecord.c   );\n        fprintf( stdout, \" %d\",    myRecord.kv  );\n        fprintf( stdout, \" %8.8s\", myRecord.s   );\n    }\n    fprintf( stdout, \"\\n\" ); // force flush\n\n\n    fclose(fp);\n    //return NULL;\n} // end function: makeTable\n\n\nint main( void )\n{\n    //int i;\n    char *filename = \"file.bin\";\n    //node *t_table = makeTable(filename); // raises compiler warning about unused variable\n    makeTable(filename);\n    return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3211321, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7a426ea076e869314704dcd94e66fdfa?s=128&d=identicon&r=PG&f=1", "display_name": "Pacu", "link": "https://stackoverflow.com/users/3211321/pacu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 35331846, "answer_count": 1, "score": -1, "last_activity_date": 1455173567, "creation_date": 1455122926, "question_id": 35321124, "link": "https://stackoverflow.com/questions/35321124/sscanf-till-end-of-file-in-c", "title": "sscanf till end of file in c", "body": "<p>I have a C program that creates a binary file from a text file.</p>\n\n<pre><code>/*makeBinry.c*/\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nint main(int argc, char *argv[]){\n    char *ptext, *btext=\"file.bin\";\n    if(argc != 2){\n        printf(\"Using default \\\"text.txt\\\" file to create mnemonics table\\n\");\n        ptext = \"text.txt\";\n    }else{\n        ptext = argv[2];\n    }\n\n    FILE *fp, *fb;\n    if(!(fp=fopen(ptext, \"r\"))){\n        fprintf(stdout, \"Error: File %s is not available\\n\", ptext);\n        exit(1);\n    }\n\n    if(!(fb = fopen(btext, \"wb\"))){\n        fprintf(stdout, \"Error: File %s is cannot be opened to write\\n\", btext);\n        exit(1);\n    }\n\n    int i, j, k;\n    char s[8], c, stringed[20];\n\n    while(!feof(fp)){\n        memset(stringed, '\\0', sizeof(stringed));\n        fscanf(fp, \"%X %d %c %d %[^\\n]s\", &amp;i, &amp;j, &amp;c, &amp;k, s);\n        sprintf(stringed, \"%X %d %c %d %[^\\n]s\", &amp;i, &amp;j, &amp;c, &amp;k, s);\n        fwrite(stringed, 1, strlen(stringed), fb);\n    }\n    fprintf(stdout, \"Success: %s file successfully created\\n\", btext);\n\n    fclose(fp);\n    fclose(fb);\n    return 0;\n}\n</code></pre>\n\n<p>I have another program that reads the data in the binary file and stores into an array.</p>\n\n<pre><code>/*mainProg.c*/\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;malloc.h&gt;\n#include&lt;string.h&gt;\n\ntypedef struct opStruct{\n    int hexv, fv, kv;\n    char str[8], key;\n} node;\n\nnode* makeTable(char *filename){\n    FILE *fp;\n    if(!(fp = fopen(filename, \"rb\"))){\n        fprintf(stdout, \"Error: Unable to open file %s\\n\", filename);\n        exit(1);\n    }\n    int hv, fv, kv;\n    char s[8], c, str[20];\n\n    while(!(feof(fp))){\n        sscanf(fp,\"%X %d %c %d %[^\\n]s\", &amp;hv, &amp;fv, &amp;c, &amp;kv, str);\n        fprintf(stdout, \"%X %d %c %d %s\", hv, fv, c, kv, str);\n    }\n    fclose(fp);\n    return NULL;\n}\n\nint main(){\n    int i;\n    char *filename = \"file.bin\";\n    node *t_table = makeTable(filename);\n    return 0;\n}\n</code></pre>\n\n<p>When I run the <code>mainProg.c</code> the program goes into an infinite loop. I figured it is because <code>fp</code> is never increased. How could I increase the file pointer and still use <code>sscanf</code> to read the binary file in the formatted manner? I'm not allowed to use <code>fread()</code>. Since currently, I'm not creating the table the function <code>makeTable</code> returns <code>NULL</code>.</p>\n\n<p>Also, since the number of lines in the binary file would be unknown, how can I create the array dynamically using <code>realloc</code>?</p>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 3, "creation_date": 1455122797, "post_id": 35321054, "comment_id": 58350884, "body": "Did you <code>cd</code> to your desktop before typing that?"}, {"owner": {"reputation": 241, "user_id": 5731628, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VjD-gt13QCQ/AAAAAAAAAAI/AAAAAAAAAHs/fb3YMM5Ta_c/photo.jpg?sz=128", "display_name": "c_mnon", "link": "https://stackoverflow.com/users/5731628/c-mnon"}, "edited": false, "score": 0, "creation_date": 1455123720, "post_id": 35321054, "comment_id": 58351562, "body": "cd - change directory. Invoke gcc after you get to the directory(Desktop in your case) where your .c file is."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1455124612, "post_id": 35321470, "comment_id": 58352135, "body": "Why do you use the &quot;kernel&quot; word in your answer? It does not look appropriate"}], "tags": [], "owner": {"reputation": 856, "user_id": 5536751, "user_type": "registered", "profile_image": "https://graph.facebook.com/420809028113173/picture?type=large", "display_name": "Kevin Pandya", "link": "https://stackoverflow.com/users/5536751/kevin-pandya"}, "is_accepted": true, "score": 1, "last_activity_date": 1455124999, "last_edit_date": 1455124999, "creation_date": 1455123879, "answer_id": 35321470, "question_id": 35321054, "link": "https://stackoverflow.com/questions/35321054/gcc-compiler-errors-with-no-such-file-or-directory/35321470#35321470", "title": "GCC compiler errors with \u201cNo such file or directory\u201d", "body": "<p>please do the following.\nOn terminal check the present directory by 'pwd' command and then check the directory in which your programme is there and see if they are same or not. And while writing gcc yourfile it's case sensitive. Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8662697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c341657158efba3ab583289c7a8cc84?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Rajbhar", "link": "https://stackoverflow.com/users/8662697/vinay-rajbhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1506221072, "last_edit_date": 1506221072, "creation_date": 1506208546, "answer_id": 46385117, "question_id": 35321054, "link": "https://stackoverflow.com/questions/35321054/gcc-compiler-errors-with-no-such-file-or-directory/46385117#46385117", "title": "GCC compiler errors with \u201cNo such file or directory\u201d", "body": "<p>There are 2 reasons for such errors.</p>\n\n<ol>\n<li><p>You said you copied your <code>C</code> programs in your desktop folder. </p>\n\n<ul>\n<li>This means you may have only copied <code>sendRawEth.c</code>. file format not the executable file.</li>\n<li>You should ensure you copy the <code>.exe</code> files as well.</li>\n</ul></li>\n<li><p>You need to change the directory to the same folder that you copied your programs into.</p></li>\n</ol>\n\n<p>First, check your current folder by typing <code>pwd</code>.</p>\n\n<p>Then change it to your required folder with:</p>\n\n<pre><code>cd /outerfolder/your program folder\n</code></pre>\n\n<p>Then compile it with:</p>\n\n<pre><code>gcc -o programname programname.c\n</code></pre>\n\n<p>And finally execute it with:</p>\n\n<pre><code>./programname\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5019487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-k6ly80fityI/AAAAAAAAAAI/AAAAAAAAABY/zq6p9k0eomY/photo.jpg?sz=128", "display_name": "Amrinder Brar", "link": "https://stackoverflow.com/users/5019487/amrinder-brar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6075, "favorite_count": 0, "accepted_answer_id": 35321470, "answer_count": 2, "score": -7, "last_activity_date": 1506221072, "creation_date": 1455122739, "last_edit_date": 1455122761, "question_id": 35321054, "link": "https://stackoverflow.com/questions/35321054/gcc-compiler-errors-with-no-such-file-or-directory", "title": "GCC compiler errors with \u201cNo such file or directory\u201d", "body": "<p>My Ubuntu version is 14.04 LTS. I have a C program copied on the desktop by the name sendRawEth.c. When I write:</p>\n\n<pre><code>gcc sendRawEth.c -o sendRawEth\n</code></pre>\n\n<p>The compiler complains:</p>\n\n<pre><code>gcc: error: sendRawEth.c: No such file or directory\ngcc: fatal error: no input files\n</code></pre>\n\n<p>I have no idea how to solve this error.</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 4, "creation_date": 1455123219, "post_id": 35321049, "comment_id": 58351197, "body": "I don&#39;t know about <i>necessary</i>, but I&#39;d still call it good practice. What if someone (say) adds a correction factor to the <code>F</code> macro to (whatever) normalize the output of <code>foo</code>, and forgets to add the parenthesis? You&#39;ll be spending a lot of time trying to figure out what went wrong."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 2, "creation_date": 1455123327, "post_id": 35321049, "comment_id": 58351281, "body": "Also worth noting that the table of precedence you reference <i>isn&#39;t actually the language standard</i>, but is rather an easier-to-use representation of more complicated rules in the standard. I&#39;m no C expert or language lawyer, but those rules might change things."}], "answers": [{"comments": [{"owner": {"reputation": 538, "user_id": 5107610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc3bd5ece3dbea22ed939a1696c0874?s=128&d=identicon&r=PG&f=1", "display_name": "ZzetT", "link": "https://stackoverflow.com/users/5107610/zzett"}, "edited": false, "score": 0, "creation_date": 1458246281, "post_id": 35321585, "comment_id": 59788117, "body": "My question was when it is <i>necessary</i> to put parenthesis around a macro. Of course, if the operator has a low precedence e.g. &quot;+&quot; then parentheses are always required (like in the SUM example). But what about expressions with high precedence like &quot;-&gt;&quot;, &quot;++&quot;, &quot;[]&quot;, &quot;.&quot; ?"}, {"owner": {"reputation": 538, "user_id": 5107610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc3bd5ece3dbea22ed939a1696c0874?s=128&d=identicon&r=PG&f=1", "display_name": "ZzetT", "link": "https://stackoverflow.com/users/5107610/zzett"}, "edited": false, "score": 0, "creation_date": 1464951448, "post_id": 35321585, "comment_id": 62707965, "body": "I think I found a good example which shows why &quot;It&#39;s a good practice to use parenthesis to avoid some big blunders.&quot; is not always right! Imagine you have a <code>#define foo()</code> and <code>foo</code> is defined as <code>do{  } while(0)</code> then this won&#39;t compile anymore!"}], "tags": [], "owner": {"reputation": 856, "user_id": 5536751, "user_type": "registered", "profile_image": "https://graph.facebook.com/420809028113173/picture?type=large", "display_name": "Kevin Pandya", "link": "https://stackoverflow.com/users/5536751/kevin-pandya"}, "is_accepted": false, "score": 2, "last_activity_date": 1455124232, "last_edit_date": 1455124232, "creation_date": 1455124184, "answer_id": 35321585, "question_id": 35321049, "link": "https://stackoverflow.com/questions/35321049/parenthesis-in-define-macros/35321585#35321585", "title": "Parenthesis in define macros", "body": "<p>It's a good practice to use parenthesis to avoid some big blunders. Currently you might think that your operator is having high precedence but suppose you're making the header file of your code and give it to your friend who uses macro from that file with the function having even higher precedence so at that time it will be a great pain to debug the code. You can save this time as a programmer by putting parenthesis.</p>\n"}, {"comments": [{"owner": {"reputation": 538, "user_id": 5107610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc3bd5ece3dbea22ed939a1696c0874?s=128&d=identicon&r=PG&f=1", "display_name": "ZzetT", "link": "https://stackoverflow.com/users/5107610/zzett"}, "edited": false, "score": 0, "creation_date": 1458246147, "post_id": 36022463, "comment_id": 59788056, "body": "I think this does not answer my question, you just explained how macros are evaluated in C."}, {"owner": {"reputation": 3013, "user_id": 501673, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9206fb9ad237350ad4f0b6885c52cfd7?s=128&d=identicon&r=PG", "display_name": "Olof Forshell", "link": "https://stackoverflow.com/users/501673/olof-forshell"}, "reply_to_user": {"reputation": 538, "user_id": 5107610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc3bd5ece3dbea22ed939a1696c0874?s=128&d=identicon&r=PG&f=1", "display_name": "ZzetT", "link": "https://stackoverflow.com/users/5107610/zzett"}, "edited": false, "score": 0, "creation_date": 1458248368, "post_id": 36022463, "comment_id": 59789218, "body": "Yes that is what i just did. Did you think parentheses in macros are evaluated differently than in other C statements."}], "tags": [], "owner": {"reputation": 3013, "user_id": 501673, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9206fb9ad237350ad4f0b6885c52cfd7?s=128&d=identicon&r=PG", "display_name": "Olof Forshell", "link": "https://stackoverflow.com/users/501673/olof-forshell"}, "is_accepted": false, "score": 0, "last_activity_date": 1458077061, "creation_date": 1458077061, "answer_id": 36022463, "question_id": 35321049, "link": "https://stackoverflow.com/questions/35321049/parenthesis-in-define-macros/36022463#36022463", "title": "Parenthesis in define macros", "body": "<p>Some programmers using simple #defines will write</p>\n\n<pre><code>#define ZERO (0)\n</code></pre>\n\n<p>which is of no use other than complicating things.</p>\n\n<p>Actually the macro is wysiwyg so with that in mind you can decide what parentheses are needed:</p>\n\n<pre><code>SUM(3,4) =&gt; ((3)+(4))    // parentheses around 3 and 4 are not necessary\n\nRATIO(3+4,4+5) =&gt; ((3+4)/(4+5))    // probably necessary here due to operator precedence\n</code></pre>\n\n<p>Its not rocket science to figure this out, it's actually quite straightforward.</p>\n"}], "owner": {"reputation": 538, "user_id": 5107610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7dc3bd5ece3dbea22ed939a1696c0874?s=128&d=identicon&r=PG&f=1", "display_name": "ZzetT", "link": "https://stackoverflow.com/users/5107610/zzett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1458077061, "creation_date": 1455122723, "last_edit_date": 1458074923, "question_id": 35321049, "link": "https://stackoverflow.com/questions/35321049/parenthesis-in-define-macros", "title": "Parenthesis in define macros", "body": "<p>When is it is <strong>necessary</strong> to put the whole (right) expression of a define macro in parenthesis?</p>\n\n<p>If I do something like</p>\n\n<pre><code>#define SUM(x, y) ((x)+(y))\n</code></pre>\n\n<p>I have to put the right expression into parenthesis, because \"+\" has a low precedence in C (and it wouldn't work if I would use it in the following context <code>SUM(x, y) * 5U</code>)</p>\n\n<p>Are these parenthesis still required if I use an operator of the highest precedence e.g.</p>\n\n<pre><code>#define F foo()\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>#define ACCESS(x, y) (x)-&gt;(y)\n</code></pre>\n\n<p>Does an expression exist that  that would break the actual meaning as it would do for the <code>SUM()</code> example?)</p>\n\n<p>For the precedence rules  I used <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">http://en.cppreference.com/w/c/language/operator_precedence</a></p>\n"}, {"tags": ["c", "glib", "dbus"], "answers": [{"tags": [], "owner": {"reputation": 1580, "user_id": 5979854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/006148a3926039507c4e2cc538bc47df?s=128&d=identicon&r=PG", "display_name": "Marcin Kajzler", "link": "https://stackoverflow.com/users/5979854/marcin-kajzler"}, "is_accepted": false, "score": 0, "last_activity_date": 1463740888, "creation_date": 1463740888, "answer_id": 37344592, "question_id": 35321019, "link": "https://stackoverflow.com/questions/35321019/g-bus-get-sync-returns-null-but-dbus-g-bus-get-private-works/37344592#37344592", "title": "g_bus_get_sync returns NULL but dbus_g_bus_get_private works", "body": "<p>Do you run it with root privileges? In my experience with dbus access to system bus is restricted. Session bus is owned by user, so there never should be problems with access.</p>\n\n<p>According to this <a href=\"https://developer.gnome.org/gio/stable/GDBusConnection.html#g-bus-get-sync\" rel=\"nofollow\">documentation</a> you should use <a href=\"https://developer.gnome.org/gio/stable/gio-D-Bus-Addresses.html#g-dbus-address-get-for-bus-sync\" rel=\"nofollow\">dbus-address-get-for-bus-sync</a> and <a href=\"https://developer.gnome.org/gio/stable/GDBusConnection.html#g-dbus-connection-new-for-address\" rel=\"nofollow\">g-dbus-connection-new-for-address</a> when you want to establish private connection.</p>\n"}], "owner": {"reputation": 5857, "user_id": 297373, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/lwUTS.png?s=128&g=1", "display_name": "lornova", "link": "https://stackoverflow.com/users/297373/lornova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 749, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1463740888, "creation_date": 1455122640, "last_edit_date": 1455124277, "question_id": 35321019, "link": "https://stackoverflow.com/questions/35321019/g-bus-get-sync-returns-null-but-dbus-g-bus-get-private-works", "title": "g_bus_get_sync returns NULL but dbus_g_bus_get_private works", "body": "<p>I'm working on legacy embedded code that uses the deprecated library dbus-glib.</p>\n\n<p>In the legacy code, this code fragment works well:</p>\n\n<pre><code>GError* error = NULL;\nDBusGConnection *systemBus = dbus_g_bus_get_private(DBUS_BUS_SYSTEM, NULL, &amp;error);\n</code></pre>\n\n<p>Now, I tried to get the system bus with the GDBus equivalent:</p>\n\n<pre><code>GError* error = NULL;\nGDBusConnection *systemBus = g_bus_get_sync(G_BUS_TYPE_SYSTEM, NULL, &amp;error);\n</code></pre>\n\n<p>This one fails, and <code>error-&gt;message</code> returns <code>Could not connect: No such file or directory</code>.</p>\n\n<p>What's the difference?</p>\n\n<p>By the way, the same call works on session bus:</p>\n\n<pre><code>GError* error = NULL;\nDBusConnection *sessionBus = g_bus_get_sync(G_BUS_TYPE_SESSION, NULL, &amp;error);\n</code></pre>\n"}, {"tags": ["c", "struct", "header", "extern"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1455122011, "post_id": 35320522, "comment_id": 58350251, "body": "The <code>extern</code> keyword before the <code>typedef</code> doesn&#39;t make sense. What are you trying to achieve ?"}, {"owner": {"reputation": 105, "user_id": 5882940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qNXXli6kxOQ/AAAAAAAAAAI/AAAAAAAAC08/e6uvWTIfvBo/photo.jpg?sz=128", "display_name": "Rafael Botas", "link": "https://stackoverflow.com/users/5882940/rafael-botas"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455122737, "post_id": 35320522, "comment_id": 58350833, "body": "Just what i told before. Create the structure in a file and an array variable using that structure in another file."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455131637, "post_id": 35320522, "comment_id": 58356592, "body": "Remove the <code>extern</code> keyword and include <code>structures.h</code>in your c. file. That&#39;s all."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1455138931, "post_id": 35320522, "comment_id": 58360918, "body": "@Rafael Botas: In C language the concept of linkage (controlled by such keywords as <code>static</code> or <code>extern</code>) is only applicable to <i>objects and functions.</i> In your code sample above you are declaring a type. Types by themselves have no linkage in C and cannot be declared with <code>extern</code> (or, more precisely, formally you can declare a type with <code>extern</code>, but it will simply make no sense). But specifying two storage class specifiers - <code>extern</code> and <code>typedef</code> - is illegal. What are you trying to do?"}], "answers": [{"tags": [], "owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "is_accepted": false, "score": 0, "last_activity_date": 1455121957, "creation_date": 1455121957, "answer_id": 35320754, "question_id": 35320522, "link": "https://stackoverflow.com/questions/35320522/how-to-use-a-struct-from-another-file/35320754#35320754", "title": "How to use a struct from another file?", "body": "<p>Perfect use for header files</p>\n\n<pre><code>/* put this in clube.h */\nstruct Clubes{\n char *codClube;\n char *nome;\n char *estadio;\n};\n\n/* put this in clube.c */\n#include \"clube.h\"\n\nstruct Clubes myarray[5];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 5882940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qNXXli6kxOQ/AAAAAAAAAAI/AAAAAAAAC08/e6uvWTIfvBo/photo.jpg?sz=128", "display_name": "Rafael Botas", "link": "https://stackoverflow.com/users/5882940/rafael-botas"}, "edited": false, "score": 0, "creation_date": 1455128644, "post_id": 35321708, "comment_id": 58354749, "body": "That is what i am looking for. And i already got to that but the problem is that i want the array size to be the number of lines the file i will access has."}], "tags": [], "owner": {"reputation": 571, "user_id": 1876138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aab20ca9fb37356f1ef174132f9b26?s=128&d=identicon&r=PG", "display_name": "hanumantmk", "link": "https://stackoverflow.com/users/1876138/hanumantmk"}, "is_accepted": false, "score": 0, "last_activity_date": 1455124560, "creation_date": 1455124560, "answer_id": 35321708, "question_id": 35320522, "link": "https://stackoverflow.com/questions/35320522/how-to-use-a-struct-from-another-file/35321708#35321708", "title": "How to use a struct from another file?", "body": "<p>I think you're confusing what some of these keywords do.</p>\n\n<p>struct creates a new type.  This doesn't create any instances of a type.</p>\n\n<p>extern is for providing linkage for a global variable.</p>\n\n<p>typedef is giving a new global name to an existing type.</p>\n\n<pre><code>/* clube.h */\n\n/* define and declare the Clubes struct */\nstruct Clubes {\n    char* codClube;\n    char* nome;\n    char* estadio;\n}\n\n/* typedef the Clubes struct.\n * Now you can say struct Clubes or Clubes_t in your code.\n */\ntypedef struct Clubes Clubes_t;\n\n/* Now you've created global linkage for my_clubes.\n * I.e. two cpp files could both modify it\n */\nextern struct Clubes my_clubes[2];\n\n\n\n/* clube.c */\n\n#include \"clube.h\"\n\n/* Now you've got storage for my_clubes */\nClubes_t my_clubes[2];\n\n\n/* some_other.c */\n\n#include \"clube.h\"\n\nvoid fun() {\n    my_clubes[0].codClube = \"foo\";\n    /* etc... */\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": true, "score": 3, "last_activity_date": 1516109934, "last_edit_date": 1516109934, "creation_date": 1455130267, "answer_id": 35323521, "question_id": 35320522, "link": "https://stackoverflow.com/questions/35320522/how-to-use-a-struct-from-another-file/35323521#35323521", "title": "How to use a struct from another file?", "body": "<p>Keyword <code>typedef</code> just lets you define type, for example, <code>typedef int whole_number</code> this will create type <code>whole_number</code> and now you can use it as you would use <code>int</code>, <code>whole_number x = 5;</code> Same thing with structures. People use typedef on structures so they don't need to write <code>struct Clubes</code>:</p>\n\n<pre><code>typedef struct Clubes{\n char *codClube;\n char *nome;\n char *estadio;\n} clubes;\n</code></pre>\n\n<p>And now you don't have to use <code>struct Clubes x;</code>, you can use <code>clubes x;</code> which is shorter and easier to write.</p>\n\n<p><code>Extern</code> keyword is giving you global linkage, and in this case it doesn't do anything.</p>\n\n<p>Your question is a little bit confusing. If you want to create this structure, and then use it in other files you need to create header file:</p>\n\n<pre><code>#ifndef __CLUBES_H_\n#define __CLUBES_H_ 1\n\nstruct Clubes{\n char *codClube;\n char *nome;\n char *estadio;\n} clubes;\n\n#endif\n</code></pre>\n\n<p>Save this in one header file, for example <code>clubes.h</code> and then in some other <code>c</code> code where you want to use this structure you just include header with <code>#include \"clubes.h\"</code> </p>\n"}], "owner": {"reputation": 105, "user_id": 5882940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qNXXli6kxOQ/AAAAAAAAAAI/AAAAAAAAC08/e6uvWTIfvBo/photo.jpg?sz=128", "display_name": "Rafael Botas", "link": "https://stackoverflow.com/users/5882940/rafael-botas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6461, "favorite_count": 1, "accepted_answer_id": 35323521, "answer_count": 3, "score": 1, "last_activity_date": 1516109934, "creation_date": 1455121418, "last_edit_date": 1455139694, "question_id": 35320522, "link": "https://stackoverflow.com/questions/35320522/how-to-use-a-struct-from-another-file", "title": "How to use a struct from another file?", "body": "<p>I am trying to use an *.h named structures in other files like clube.c which will create an array from the struct defined as Clubes.</p>\n\n<p>structures.h:</p>\n\n<pre><code>extern typedef struct Clubes{\n char *codClube;\n char *nome;\n char *estadio;\n};\n</code></pre>\n\n<p>no matter what I do it just doesn't appear in my clubes.c</p>\n\n<p>Note: already did the include \"structures.h\"</p>\n\n<p>Once again thanks in advance,\nand if theres any info that I can give to help you help me just ask.</p>\n"}, {"tags": ["c", "pointers", "struct"], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1455121025, "last_edit_date": 1455121025, "creation_date": 1455120699, "answer_id": 35320255, "question_id": 35320189, "link": "https://stackoverflow.com/questions/35320189/how-to-reassign-a-struct-pointer/35320255#35320255", "title": "How to reassign a struct pointer", "body": "<p>The problem here, is <code>rick</code> is local to the <code>nameChanger</code> function. Once the function finshes execution, <code>rick</code> will cease to exist. So, the returned pointer and any reference will be invalid.</p>\n\n<p>You can make <code>rick</code> a pointer, and allocate memory using <a href=\"http://linux.die.net/man/3/malloc\" rel=\"nofollow\"><code>malloc()</code></a> and family. In that way, the lifetime of the allocated memory will be until the memory is <code>free()</code>-d, so after returning, the access will be valid.</p>\n"}, {"tags": [], "owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "is_accepted": false, "score": 2, "last_activity_date": 1455120990, "creation_date": 1455120990, "answer_id": 35320368, "question_id": 35320189, "link": "https://stackoverflow.com/questions/35320189/how-to-reassign-a-struct-pointer/35320368#35320368", "title": "How to reassign a struct pointer", "body": "<p>You need to be aware that your local variable <code>rick</code> is allocated on the stack frame of function <code>nameChanger()</code>, when the function returns, the memory is not valid any more, you should not use that address outside the function.</p>\n\n<p>If you need to do that, use <code>malloc()</code> instead, or declare the variable as global variable outside of any function.</p>\n\n<p>Try understand memory layout of a process, especial about stack &amp; function in your case.</p>\n"}], "owner": {"reputation": 1815, "user_id": 1666393, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jD7aX.jpg?s=128&g=1", "display_name": "Brian Joseph Spinos", "link": "https://stackoverflow.com/users/1666393/brian-joseph-spinos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455121025, "creation_date": 1455120541, "last_edit_date": 1455120994, "question_id": 35320189, "link": "https://stackoverflow.com/questions/35320189/how-to-reassign-a-struct-pointer", "title": "How to reassign a struct pointer", "body": "<p>I am trying to reassign a Person pointer in a function called 'nameChanger', what am I doing wrong? how can I reassign a <code>Person</code> pointer, to point to another <code>Person</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;  \n#include &lt;string.h&gt; \n\ntypedef struct {\n    int age;\n    char name[50];\n} Person;\n\nvoid nameChanger(Person ** person);\n\nint main() {\n    Person brian;\n    brian.age = 27;\n    strcpy(brian.name, \"brian\");\n\n    Person * brian_pointer = &amp;brian;\n\n    nameChanger(&amp;brian_pointer);\n    printf(\"changing name to 'rick' :  %s\\n\", brian_pointer-&gt;name); // should be 'rick'\n\n    return 0;\n}\n\nvoid nameChanger(Person ** person){\n    Person rick;\n    rick.age = 50;\n    strcpy(rick.name, \"rick\");\n\n    Person * rick_p = &amp;rick;\n    *person = &amp;rick;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "clang", "constants"], "comments": [{"owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "edited": false, "score": 0, "creation_date": 1455119911, "post_id": 35319842, "comment_id": 58348627, "body": "Warnings that aren&#39;t useful can be suppressed, with <code>-Wno-incompatible-pointer-types</code> (for gcc) and <code>-Wno-incompatible-pointer-types-discards-qualifiers</code> (for clang) in this case (that&#39;s why the warning message shows the warning flag that activates it: so you can suppress it if it isn&#39;t useful to you). Then you can continue with <code>-Werror</code> without problems."}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "reply_to_user": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "edited": false, "score": 2, "creation_date": 1455120171, "post_id": 35319842, "comment_id": 58348832, "body": "@chrisjester-young That&#39;s not his question how to suppress warning."}, {"owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1455120275, "post_id": 35319842, "comment_id": 58348915, "body": "@texasbruce I&#39;m aware. I can&#39;t tell the OP why the warning is shown by default in C but not in C++, since I&#39;m not a gcc or clang developer and I didn&#39;t implement the warning criteria."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1455120385, "post_id": 35319842, "comment_id": 58349002, "body": "C has a simpler, less flexible type system. C++ has a more powerful type system. That&#39;s all. There&#39;s no technical reason why C <i>cannot</i> allow this conversion. It can. It simply does not."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1455120831, "post_id": 35319842, "comment_id": 58349357, "body": "@Olaf No, C++ allows cast from <code>Foo**</code> to <code>const Foo* const*</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1455123277, "post_id": 35319842, "comment_id": 58351236, "body": "@user2079303: I hate to appologise, but I do if I was on the wrong track. I somehow added an <code>f</code> in my mind to the <code>print</code> call, thus read <code>printfd(argv);</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1455123317, "post_id": 35319842, "comment_id": 58351272, "body": "@rici: Thanks, I somehow mess it up."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1455130081, "post_id": 35319842, "comment_id": 58355635, "body": "@nert: The question of &quot;why?&quot; has been around for a very long time. I&#39;ve been searching for the answer too, but it appears that the only answer here is &quot;It just so happened historically, and no one cares to correct this issue&quot;. I don&#39;t know why C does not want to adopt the C++ approach to const-correctness in such conversions. It would break no legacy code."}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 17, "creation_date": 1455120940, "post_id": 35320292, "comment_id": 58349449, "body": "@Olaf: The question asks for a comparison. I&#39;m comparing. You don&#39;t have to like the comparison."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 19, "creation_date": 1455121258, "post_id": 35320292, "comment_id": 58349714, "body": "@Olaf: Oranges have more vitamin C than apples. Apples have more fibre."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1455123995, "post_id": 35320292, "comment_id": 58351746, "body": "The reason for the recursive C++ definition is likely that due to the special properties of const references the situation is much more likely in C++, so it needed treating there."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 1, "creation_date": 1455124088, "post_id": 35320292, "comment_id": 58351808, "body": "C and C++ are different languages, but they are still closely related, because C++ was designed to be able to directly include standard C library headers and call the functions defined therein."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1455127105, "post_id": 35320292, "comment_id": 58353788, "body": "@JanHudec: The problem with prototypes and C is noted in the Posix standard as a &quot;limitation of the ISO C standard&quot;; it affects the prototypes for the <code>exec*</code> system interfaces (which is where the note is) and possibly others. So the issue has been considered problematic for some time, but evidently not so problematic that the standard was updated."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 762, "user_id": 2959763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnsXN.png?s=128&g=1", "display_name": "nert", "link": "https://stackoverflow.com/users/2959763/nert"}, "edited": false, "score": 1, "creation_date": 1455134034, "post_id": 35320292, "comment_id": 58358153, "body": "@nert: That&#39;s award enough for me :) The standards themselves are paywalled, but the committees make drafts available for free; the closest draft to the standard generally differs only in small editorial corrections, and that&#39;s what you will see quoted here. For C: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/standards\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/standards</a> (link says: WG14 N1570)  For C++: <a href=\"https://isocpp.org/std/the-standard\" rel=\"nofollow noreferrer\">isocpp.org/std/the-standard</a>"}, {"owner": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490615175, "post_id": 35320292, "comment_id": 73175191, "body": "Is it possible to write in C a function whose prototype affirms &quot;I guarantee not a single bit, nested or not, of this <code>char **</code> pointer will be modified&quot;? Or is it impossible and it&#39;s better to just write the function as <code>char **</code> ?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490624001, "post_id": 35320292, "comment_id": 73181850, "body": "@cesss: you can easily write the prototype. The problem is that you make it really annoying for the caller, so much so that it&#39;s not worth the effort. That is really what this discussion is about."}, {"owner": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490629861, "post_id": 35320292, "comment_id": 73186113, "body": "@rici: I meant writing a function prototype in a way that it won&#39;t issue a warning on current C compilers if you call it with a <code>char **</code>argument. I tried everything with clang, even with <code>char const *const *const</code> (which to my knowledge shouldn&#39;t issue a warning, as any cast from <code>char **</code> to <code>char const *const *const</code> is obviously safe, no matter how picky you are, as you are affirming that neither the pointed to data, nor the final pointer, nor any intermediate pointers, shall be modified), but, however, clang (when compiling C code) still issues a warning when casting from <code>char **</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 579, "user_id": 5394746, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8bb8432bfdfa5edf2c5c8b4e7f3a2ca6?s=128&d=identicon&r=PG&f=1", "display_name": "cesss", "link": "https://stackoverflow.com/users/5394746/cesss"}, "edited": false, "score": 0, "creation_date": 1490630132, "post_id": 35320292, "comment_id": 73186307, "body": "@cesss: yes, that is exactly what my answer says. No, there is no solution in C although it works fine in C++. If there were a C solution, Posix would use it; they are people with a lot more experience in C than either of us so I think they can be trusted when they say there is no solution."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 13, "last_activity_date": 1455158840, "last_edit_date": 1592644375, "creation_date": 1455120778, "answer_id": 35320292, "question_id": 35319842, "link": "https://stackoverflow.com/questions/35319842/why-c-doesnt-allow-implicit-conversion-from-char-to-const-char-const-and/35320292#35320292", "title": "Why C doesn&#39;t allow implicit conversion from char ** to const char *const * (and C++ does)?", "body": "<p>C and C++ are different in this respect. I don't have an answer to why C++ is more generous, other than that the C++ behaviour seems to me to be correct.</p>\n<p>C simply doesn't allow indirect <code>const</code> conversion. That is a conservative, easy-to-implement restriction, with the unfortunate consequence that you cannot provide <code>char*[]</code> to a function expecting <code>char const* const*</code>. The restriction is in \u00a76.3.2.3, paragraph 2, and it is simply not recursive:</p>\n<blockquote>\n<p>For any qualifier <code>q</code>, a pointer to a non-<code>q</code>-qualified type may be converted to a pointer to the <code>q</code>-qualified version of the type; the values stored in the original and converted pointers shall compare equal.</p>\n</blockquote>\n<p>C++ allows conversions according to a somewhat complex formulation in \u00a74.4 [conv.qual], paragraph 3. It is permitted to convert</p>\n<p><code>T cv<sub>n</sub> P<sub>n-1</sub>cv<sub>n-1</sub> \u2026 P<sub>1</sub>cv<sub>1</sub> P<sub>0</sub>cv<sub>0</sub></code>\n\u21d2\n<code>T cv'<sub>n</sub> P<sub>n-1</sub>cv'<sub>n-1</sub> \u2026 P<sub>1</sub>cv'<sub>1</sub> P<sub>0</sub>cv'<sub>0</sub></code></p>\n<p>(where <code>T</code> is a type; <code>P<sub>1</sub>\u2026P<sub>n</sub></code> are pointer/array type constructors, and each <code>cv<sub>0</sub>\u2026cv<sub>n</sub></code> is some possibly empty subset of <code>const</code> and <code>volatile</code>)</p>\n<p>provided that:</p>\n<ol>\n<li><p>For every <code>k &gt; 0</code>, <code>cv<sub>k</sub></code> is a subset of <code>cv'<sub>k</sub></code> (so you can't remove a <code>const</code> or a <code>volatile</code>), and</p>\n</li>\n<li><p>If <code>cv<sub>k</sub></code> and <code>cv'<sub>k</sub></code> differ for some <code>k &gt; 0</code>, all the following <code>cv'<sub>i&gt;k</sub></code> include <code>const</code>.</p>\n</li>\n</ol>\n<p>In the actual standard, that expression is reversed; I put it in the order of declaration, whereas in the standard it is in order of application of the pointer/array constructors. I didn't change the direction of the numbering, though, which is why they are numbered right to left. I also left out some details -- for example, it's not strictly necessary for the two <code>T</code>s to be identical -- but I think it gives an idea of the intention.</p>\n<p>The explanation for the first restriction is reasonably obvious. The second restriction prevents the problem described in the C FAQ, where a <code>const</code> pointer might be stored into a non-<code>const</code> pointer object, and then subsequently used to mutate the <code>const</code> object it points to.</p>\n<p>The bottom line is that in C++, your prototype <code>const char *const * param</code> will work with arguments of type <code>char**</code>, <code>const char**</code>, or even <code>char*const*</code>, but in C only the last one will work without warning, and it is the least useful. The only workaround I know of (other than switching to C++) is to ignore the warning.</p>\n<p>For what it's worth, there is a note in the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/environ.html#tag_16_111_08\" rel=\"noreferrer\">Rationale section of the Posix specification of the <code>exec*</code> interfaces</a> about the problem this causes for these prototypes, and the workaround selected by Posix, which is to use <code>char*[]</code> as the prototype and textually note that these are constant: (emphasis added)</p>\n<blockquote>\n<p>The statement about <code>argv[]</code> and <code>envp[]</code> being constants is included to make explicit to future writers of language bindings that these objects are completely constant. <strong>Due to a limitation of the ISO C standard, it is not possible to state that idea in standard C.</strong> Specifying two levels of <code>const</code>-qualification for the <code>argv[]</code> and <code>envp[]</code> parameters for the exec functions may seem to be the natural choice, given that these functions do not modify either the array of pointers or the characters to which the function points, but this would disallow existing correct code. Instead, only the array of pointers is noted as constant.</p>\n</blockquote>\n<p>There's a useful compatibility chart following that paragraph, which I didn't quote because of the formatting limitations of this site.</p>\n"}], "owner": {"reputation": 762, "user_id": 2959763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnsXN.png?s=128&g=1", "display_name": "nert", "link": "https://stackoverflow.com/users/2959763/nert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 3, "accepted_answer_id": 35320292, "answer_count": 1, "score": 15, "last_activity_date": 1455159186, "creation_date": 1455119710, "question_id": 35319842, "link": "https://stackoverflow.com/questions/35319842/why-c-doesnt-allow-implicit-conversion-from-char-to-const-char-const-and", "title": "Why C doesn&#39;t allow implicit conversion from char ** to const char *const * (and C++ does)?", "body": "<p>I know implicit conversion from <code>char **</code> to <code>const char **</code> cannot be done and why, and that the conversion to <code>char *const *</code> works.  See bottom for links to explanation on that.</p>\n\n<p>It all makes sense apart from one particular thing.  So I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid\nprint(const char *const*param)\n{\n    printf(\"%s\\n\", param[0]);\n}\n\nint\nmain(int argc, char **argv)\n{\n    print(argv);\n    return 0;\n}\n</code></pre>\n\n<p>If I compile this as a C++ code, it compiles quite fine.  However, if the same code is compiled as a C code only, I get an error (well, a warning, but let's suppose <code>-Werror</code>, i.e. treat warnings as errors).</p>\n\n<p>gcc:</p>\n\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:12:11: warning: passing argument 1 of \u2018print\u2019 from incompatible pointer type [-Wincompatible-pointer-types]\n     print(argv);\n           ^\ntest.c:4:1: note: expected \u2018const char * const*\u2019 but argument is of type \u2018char **\u2019\n print(const char *const*param)\n ^\n</code></pre>\n\n<p>clang:</p>\n\n<pre><code>test.c:12:11: warning: passing 'char **' to parameter of type 'const char *const *' discards qualifiers in nested pointer types [-Wincompatible-pointer-types-discards-qualifiers]\n    print(argv);\n          ^~~~\ntest.c:4:25: note: passing argument to parameter 'param' here\nprint(const char *const*param)\n                        ^\n</code></pre>\n\n<p>Both behaviours are standard-independent and also compiler-independent.  I tried various standards with both <code>gcc</code> and <code>clang</code>.</p>\n\n<p>There are two reasons for this inquiry.  Firstly, I want to understand whether there is a difference and, secondly, I have a function that does nothing with any layer of the pointers and I need it to be able to work with <code>const char **</code> as well as <code>char *const *</code> and <code>char **</code>.  Explicitly casting each call is not maintainable.  And I have no idea how should the function prototype look like.</p>\n\n<hr>\n\n<p>This is the question that started my curiosity:\n<a href=\"https://stackoverflow.com/questions/7016098/implicit-conversion-from-char-to-const-char\">Implicit conversion from char** to const char**</a></p>\n\n<p>And here is another nice explanation for the <code>char ** =&gt; const char**</code> problem:\n<a href=\"http://c-faq.com/ansi/constmismatch.html\">http://c-faq.com/ansi/constmismatch.html</a></p>\n\n<p>If the links are confusing related to this question, feel free to edit them out.</p>\n"}, {"tags": ["c", "windows", "gcc", "cygwin"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 4, "creation_date": 1455119014, "post_id": 35319569, "comment_id": 58347905, "body": "Show the command you use to compile and the command you use to run; it is likely there is something wrong with one of those two as the code itself looks fine."}, {"owner": {"reputation": 429, "user_id": 2500798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DWndH.jpg?s=128&g=1", "display_name": "Djee", "link": "https://stackoverflow.com/users/2500798/djee"}, "edited": false, "score": 0, "creation_date": 1455119806, "post_id": 35319569, "comment_id": 58348545, "body": "try this as first instruction in your <code>main</code> function: <code>setvbuf(stdout, NULL, _IONBF, 0);</code>"}, {"owner": {"reputation": 1, "user_id": 5909038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb6a67039a6a73cd05f78ebf33958?s=128&d=identicon&r=PG&f=1", "display_name": "Brecchs", "link": "https://stackoverflow.com/users/5909038/brecchs"}, "edited": false, "score": 0, "creation_date": 1455120898, "post_id": 35319569, "comment_id": 58349407, "body": "The command I use to compile is <code>gcc HelloWorld.c</code> then I run <code>a.exe</code> in Command Line or <code>.&#47;a.exe</code> in Cygwin. I tried <code>setvbuf(stdout, NULL, _IONBF, 0);</code> but it didn&#39;t work either."}, {"owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "edited": false, "score": 0, "creation_date": 1455121556, "post_id": 35319569, "comment_id": 58349911, "body": "Can it be that you edit one source file, but compile and run another? Try to do a syntax error whether it breaks the compilation."}, {"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1455122222, "post_id": 35319569, "comment_id": 58350397, "body": "Hmm. I think you have something pretty strange going on. Try this from bash (in cygwin): <code>gcc -oa.exe &amp;&amp; .&#47;a.exe</code>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455122362, "post_id": 35319569, "comment_id": 58350513, "body": "I don&#39;t get it. Where did &#39;a.exe&#39; come from?"}, {"owner": {"reputation": 1, "user_id": 5909038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb6a67039a6a73cd05f78ebf33958?s=128&d=identicon&r=PG&f=1", "display_name": "Brecchs", "link": "https://stackoverflow.com/users/5909038/brecchs"}, "edited": false, "score": 0, "creation_date": 1455122810, "post_id": 35319569, "comment_id": 58350890, "body": "Tried the syntax error, didn&#39;t work. Tried <code>gcc HelloWorld.c -oa.exe &amp;&amp; .&#47;a.exe</code>, didn&#39;t work. a.exe is basically the default compiled file (I think)."}, {"owner": {"reputation": 111, "user_id": 5811999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5625a02354e06e7a96b29b484e9f3a7?s=128&d=identicon&r=PG&f=1", "display_name": "Melis", "link": "https://stackoverflow.com/users/5811999/melis"}, "edited": false, "score": 0, "creation_date": 1455138880, "post_id": 35319569, "comment_id": 58360884, "body": "usually you specify the output file with the -o parameter, could I suggest you try the following to see the full debug information; gcc -Wall -o b.exe HelloWorld.c and then ./b.exe"}], "answers": [{"tags": [], "owner": {"reputation": 2080, "user_id": 4157487, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d14df3ab7cb8c9e793b7d30ec3d740e?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/4157487/george"}, "is_accepted": false, "score": 1, "last_activity_date": 1455135632, "creation_date": 1455135632, "answer_id": 35325117, "question_id": 35319569, "link": "https://stackoverflow.com/questions/35319569/cygwin-gcc-compiling-and-running-but-doesnt-printf-anything/35325117#35325117", "title": "Cygwin gcc compiling and running, but doesn&#39;t printf anything", "body": "<p>Name your source code file <strong>hello.c</strong>. In Cygwin bash shell, go to the directory where the source file hello.c is. Run <code>gcc -o hello.exe hello.c</code>. This will produce the executable <strong>hello.exe</strong> in the same directory. Then run <code>./hello</code>.</p>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 0, "creation_date": 1591467151, "post_id": 58743343, "comment_id": 110069460, "body": "Correct. It is either the <b>absence</b> or <b>presence</b> of one of Cygwin&#39;s DLLs. In my case, i run the <code>gcc</code> command in a directory where I had some of Cygwin&#39;s DLLs copied over because I was trying to debug a <code>JNI</code> issue and I had to copy the DLLs into the folder for <code>Intellij IDE</code> to partially work. Thanks to this answer. I simply <code>mkdir xxx; cp app.c xxx;</code> and then do my <code>gcc</code> in that new folder."}], "tags": [], "owner": {"reputation": 975, "user_id": 5203458, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6soA.png?s=128&g=1", "display_name": "LinconFive", "link": "https://stackoverflow.com/users/5203458/linconfive"}, "is_accepted": false, "score": 1, "last_activity_date": 1573109393, "creation_date": 1573109393, "answer_id": 58743343, "question_id": 35319569, "link": "https://stackoverflow.com/questions/35319569/cygwin-gcc-compiling-and-running-but-doesnt-printf-anything/58743343#58743343", "title": "Cygwin gcc compiling and running, but doesn&#39;t printf anything", "body": "<p>this may be due to dll missing</p>\n\n<p>add the cygwin dlls in your path, i.e.</p>\n\n<pre><code>d:\\cygwin1.7.9[1]\\cygwin\\bin\\\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5909038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb6a67039a6a73cd05f78ebf33958?s=128&d=identicon&r=PG&f=1", "display_name": "Brecchs", "link": "https://stackoverflow.com/users/5909038/brecchs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573109393, "creation_date": 1455118930, "question_id": 35319569, "link": "https://stackoverflow.com/questions/35319569/cygwin-gcc-compiling-and-running-but-doesnt-printf-anything", "title": "Cygwin gcc compiling and running, but doesn&#39;t printf anything", "body": "<p>I'm just starting with C and installed Cygwin with GCC compiler on Windows. I tried running this Hello World program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n\n    //fflush(stdout);\n    //setlinebuf(stdout);\n    //setbuf(stdout, 0);\n    printf(\"Hello World!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>The code compiles fine but when I try running it with <code>./</code> there is no output. I have tried to fix it using the commented lines (obviously I uncommented before running) but still had no output.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 7, "creation_date": 1455118804, "post_id": 35319502, "comment_id": 58347731, "body": "Yes, they are equivalent."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1455118871, "post_id": 35319502, "comment_id": 58347781, "body": "Before you get the answer, let me ask you, did you try to write a sample code and check the output? What did you get? Which part you din&#39;t understand?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1455118881, "post_id": 35319502, "comment_id": 58347790, "body": "Please show your research effort till time. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455118941, "post_id": 35319502, "comment_id": 58347829, "body": "What makes you believe that could be different?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1455118992, "post_id": 35319502, "comment_id": 58347877, "body": "@MichaelWalz I think OP haven&#39;t demonstrated <i>any</i> though or belief about it..."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1455119042, "post_id": 35319502, "comment_id": 58347933, "body": "Smart ass job interview answer added below."}, {"owner": {"reputation": 157, "user_id": 4851157, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fc6716450118d379abfac05e664e3cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Rtucan", "link": "https://stackoverflow.com/users/4851157/rtucan"}, "edited": false, "score": 1, "creation_date": 1455119094, "post_id": 35319502, "comment_id": 58347976, "body": "i&#39;m new to c programming, just trying to learn"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1455119200, "post_id": 35319502, "comment_id": 58348067, "body": "Get your favourite debugger out. That&#39;s a much better way to learn. Plus read a book. C is full of tricky corner cases."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 7, "creation_date": 1455119230, "post_id": 35319502, "comment_id": 58348089, "body": "@SouravGhosh If there are concerns about undefined behavior, which a novice might expect, trying it is not a good way to figure that out."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1455119363, "post_id": 35319502, "comment_id": 58348206, "body": "@dbush sorry, can&#39;t agree. 1) &quot;Novice&quot; is most likely to be unaware of UB 2) in case, UB is known, question should come in a form &quot;why it does (not) work?&quot;"}, {"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1455119599, "post_id": 35319502, "comment_id": 58348400, "body": "@SouravGhosh: The idea is that he (she) doesn&#39;t know if it is UB and is asking if it is. Coding a simple example doesn&#39;t answer the question of UB because it may very well appear to work."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1455119714, "post_id": 35319502, "comment_id": 58348472, "body": "@R_Kapp Right, but that does not excuse the <i>lack of attempt</i>. Why it should (not) be UB, should be the first job of OP to find out. SO is not just &quot;throw a q and enjoy the answer&quot; <i>forum</i>, right? :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455119937, "post_id": 35319502, "comment_id": 58348655, "body": "Another minor difference is the first is 1 statement and the other is 3.  This makes a difference if the preceding was conditional/loop code like <code>if(foo)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1455119253, "post_id": 35319589, "comment_id": 58348115, "body": "That&#39;s a pity. I&#39;ve just downvoted every answer to <a href=\"http://stackoverflow.com/questions/35318980/java-how-to-create-an-arraylist-of-integer-arrays?noredirect=1\" title=\"java how to create an arraylist of integer arrays\">stackoverflow.com/questions/35318980/&hellip;</a> and so need some karma."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1455119332, "post_id": 35319589, "comment_id": 58348175, "body": "Oh well, that&#39;s from me"}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 1, "creation_date": 1455121406, "post_id": 35319589, "comment_id": 58349807, "body": "... and not both defines :)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1455119674, "last_edit_date": 1455119674, "creation_date": 1455118981, "answer_id": 35319589, "question_id": 35319502, "link": "https://stackoverflow.com/questions/35319502/increment-two-indices-at-once/35319589#35319589", "title": "increment two indices at once", "body": "<p>Yes they are equivalent, <em>unless</em> you've written <code>#DEFINE i j</code> or <code>#DEFINE j i</code>, in which case the behaviour of the first snippet is <em>undefined</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1455123457, "post_id": 35319635, "comment_id": 58351378, "body": "I can&#39;t agree that the second example is &quot;fine&quot;!  It might not be undefined, but it&#39;s unrealistic and confusing..."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1455119534, "last_edit_date": 1455119534, "creation_date": 1455119097, "answer_id": 35319635, "question_id": 35319502, "link": "https://stackoverflow.com/questions/35319502/increment-two-indices-at-once/35319635#35319635", "title": "increment two indices at once", "body": "<p>Yes, this is allowed.  You're not modifying the same variable twice in one statement without a sequence point, so you're fine.</p>\n\n<p>If you did this however, you'd invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>:</p>\n\n<pre><code>array1[i++] = array2[i++];\n</code></pre>\n\n<p>But this would be fine, since the comma operator introduces a sequence point:</p>\n\n<pre><code>array1[i++] = (j++,j++);\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 4851157, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fc6716450118d379abfac05e664e3cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Rtucan", "link": "https://stackoverflow.com/users/4851157/rtucan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 35319589, "answer_count": 2, "score": 2, "last_activity_date": 1455119733, "creation_date": 1455118764, "question_id": 35319502, "link": "https://stackoverflow.com/questions/35319502/increment-two-indices-at-once", "title": "increment two indices at once", "body": "<p>lets say I have two int arrays, array1 and array2.</p>\n\n<p>Is this line:</p>\n\n<pre><code>array1[i++] = array2[j++];\n</code></pre>\n\n<p>equal to this:</p>\n\n<pre><code>array1[i] = array2[j];\ni++;\nj++;\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455117288, "post_id": 35318859, "comment_id": 58346491, "body": "Where did you find the code?  Link?"}, {"owner": {"reputation": 29, "user_id": 3566140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NyTZi.jpg?s=128&g=1", "display_name": "Akade", "link": "https://stackoverflow.com/users/3566140/akade"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455117402, "post_id": 35318859, "comment_id": 58346583, "body": "Found it here <a href=\"http://www.techcrashcourse.com/2014/11/c-program-find-characters-frequency-string.html\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1455117420, "post_id": 35318859, "comment_id": 58346599, "body": "&#39;I do not understand this&#39; - it&#39;s adding 1 to something.  What it is you don&#39;t understand?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1455117446, "post_id": 35318859, "comment_id": 58346616, "body": "Beware of any code that is so old or so clueless as to use <code>gets()</code> instead of a safe(r) alternative, such as <code>fgets()</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455117537, "post_id": 35318859, "comment_id": 58346707, "body": "Original code has &#39;frequency[inputString[index]]++;&#39;  Your line is different."}, {"owner": {"reputation": 29, "user_id": 3566140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NyTZi.jpg?s=128&g=1", "display_name": "Akade", "link": "https://stackoverflow.com/users/3566140/akade"}, "edited": false, "score": 0, "creation_date": 1455117578, "post_id": 35318859, "comment_id": 58346744, "body": "True, but since it is the same I was trying to rewrite it so I can try to understand it. But, I can&#39;t"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1455117745, "post_id": 35318859, "comment_id": 58346884, "body": "@Akade I would be very wary with code from a site that suggests to use <code>gets</code>. Probably means that the programmer has been living underneath a rock for over 17 years. Given the use of conio.h, I would be guessing they&#39;ve been under said rock far longer though, maybe 25 years. Now if this was a doctor teaching 25 year old methods, he would lose his job and the site would be taken down..."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1455117802, "post_id": 35318859, "comment_id": 58346929, "body": "Here is an easy example. Suppose <code>string[i]</code> has <code>&#39;A&#39;</code>. So, the expression will be <code>frequency[&#39;A&#39;]=frequency[&#39;A&#39;]+1;</code> which is the same as <code>frequency[65]=frequency[65]+1;</code> (Character literals are <code>int</code>s in C). See <a href=\"http://www.asciitable.com/index/asciifull.gif\" rel=\"nofollow noreferrer\">the ASCII table</a> to know where the 65 came from."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3566140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NyTZi.jpg?s=128&g=1", "display_name": "Akade", "link": "https://stackoverflow.com/users/3566140/akade"}, "edited": false, "score": 0, "creation_date": 1455117651, "post_id": 35318914, "comment_id": 58346803, "body": "Thanks, is it possible for you to give me an example of one iteration?  Like how does this line of code work to count the frequency of a character"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 29, "user_id": 3566140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NyTZi.jpg?s=128&g=1", "display_name": "Akade", "link": "https://stackoverflow.com/users/3566140/akade"}, "edited": false, "score": 0, "creation_date": 1455117731, "post_id": 35318914, "comment_id": 58346868, "body": "@Akade Suppose, the <code>string[i]</code> contains <code>a</code>, then, the <code>frequency[&#39;a&#39;]</code> or <code>frequency[97]</code> will be increased by 1 to indicate the increase."}, {"owner": {"reputation": 29, "user_id": 3566140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NyTZi.jpg?s=128&g=1", "display_name": "Akade", "link": "https://stackoverflow.com/users/3566140/akade"}, "edited": false, "score": 1, "creation_date": 1455117924, "post_id": 35318914, "comment_id": 58347040, "body": "Thank you so much! I understand it now!"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 6, "last_activity_date": 1455118127, "last_edit_date": 1455118127, "creation_date": 1455117298, "answer_id": 35318914, "question_id": 35318859, "link": "https://stackoverflow.com/questions/35318859/explanation-with-arrays-and-strings/35318914#35318914", "title": "Explanation with arrays and strings", "body": "<p>Here, the <em>value</em> of <code>string[i]</code> serves as the <em>index</em> for the array <code>frequency</code>.</p>\n\n<p>By saying </p>\n\n<pre><code> frequency[string[i]]=frequency[string[i]]+1;\n</code></pre>\n\n<p>you're trying to increment the value of the <code>frequency[string[i]]</code> element by 1.</p>\n\n<p>This can also be re-written as</p>\n\n<pre><code> frequency[string[i]]++;\n</code></pre>\n\n<p>Having said that,</p>\n\n<ul>\n<li><p><strong>Never use <code>gets()</code></strong>, it seriously suffers from buffer overflow issues. Use <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\"><code>fgets()</code></a> instead.</p></li>\n<li><p><code>int main()</code> should be <code>int main(void)</code> at least to conform to the standard.</p></li>\n<li><p>It is a good practice to always initialize your local variables, like <code>char string[100] = {0};</code></p></li>\n<li><p><a href=\"http://www.asciitable.com/\" rel=\"nofollow\">Link to the ASCII table</a>, for your reference. </p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1455117702, "last_edit_date": 1455117702, "creation_date": 1455117386, "answer_id": 35318957, "question_id": 35318859, "link": "https://stackoverflow.com/questions/35318859/explanation-with-arrays-and-strings/35318957#35318957", "title": "Explanation with arrays and strings", "body": "<p><code>char</code> values can be used as array index. <code>string[i]</code> is a <code>char</code> and it is being used as array index in the statement  </p>\n\n<pre><code>frequency[string[i]]=frequency[string[i]]+1;  \n</code></pre>\n\n<p>So, if <code>string[i] = 'c'</code> and it's occurrence in the string for <code>i</code><sup>th</sup> iteration is <code>1</code>, then the above expression will increment frequency of character <code>'c'</code>, i.e. <code>frequency[string[i]]</code> by <code>1</code>.<br>\nIn this case <code>frequency[string[i]]</code> is equivalent to <code>frequency['c']</code> which in turn equivalent to <code>frequency[99]</code>, where <code>99</code> is <a href=\"http://www.asciitable.com/\" rel=\"nofollow\">ASCII</a> equivalent of character <code>'c'</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 3566140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NyTZi.jpg?s=128&g=1", "display_name": "Akade", "link": "https://stackoverflow.com/users/3566140/akade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 35318914, "answer_count": 2, "score": 0, "last_activity_date": 1455118127, "creation_date": 1455117172, "last_edit_date": 1455117438, "question_id": 35318859, "link": "https://stackoverflow.com/questions/35318859/explanation-with-arrays-and-strings", "title": "Explanation with arrays and strings", "body": "<p>I have found a code that shows the frequency of a character in a string. Specifically,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    char string[100];\n    int i, frequency[256] = {0};\n\n\n    printf(\"Enter a String\\n\");\n    gets(string);\n\n    for(i=0; string[i]!=0; i++){\n\n\n\n    frequency[string[i]]=frequency[string[i]]+1;\n\n    }\n\n    printf(\"\\nCharacter   Frequency\\n\");\n    for(i=0; i &lt; 256; i++){\n        if(frequency[i] != 0){\n            printf(\"%5c%10d\\n\", i, frequency[i]);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>However, I do not understand this:</p>\n\n<pre><code> frequency[string[i]]=frequency[string[i]]+1;\n</code></pre>\n\n<p>What does it do? How does it behave? I believe that <code>string[i]</code> is the length of <code>frequency</code>? But I am not sure. </p>\n"}, {"tags": ["c", "linux", "segmentation-fault", "aix"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455117114, "post_id": 35318827, "comment_id": 58346352, "body": "Always check <code>strtok()</code> for <code>NULL</code>. Also, note that your <code>while</code> loop is absurd."}, {"owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1455117300, "post_id": 35318827, "comment_id": 58346500, "body": "Would you please elaborate?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1455117386, "post_id": 35318827, "comment_id": 58346567, "body": "I think my comment is very clear, you have to check that <code>temp</code> is not <code>NULL</code> after <code>strtok()</code> and the absurd loop thing I think is quite evident. You loop to get the second line only, what I would is <code>fgets()</code> once to skip the first and then <code>fgets()</code> again to get the second, didn&#39;t you think of that? and in general if you want to skip <code>n</code> lines do <code>for (int i = 0 ; ((i &lt; n) &amp;&amp; (fgets(line, sizeof(line), file) != NULL)) ; ++i) ;</code>."}, {"owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455117800, "post_id": 35318827, "comment_id": 58346924, "body": "I know about the while loop, I just copied everything from the previous projec. Don&#39;t worry about that I will take care of it. For temp I think since the line is &#39;real&#39; shouldn&#39;t temp also be &#39;real&#39;. In any case how do I check if temp is NULL other than printf."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1455117884, "post_id": 35318827, "comment_id": 58347002, "body": "No point in using <code>strtok()</code> (which has a pretty bad reputation) for this, consider using <code>sscanf()</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455117917, "post_id": 35318827, "comment_id": 58347033, "body": "DO NOT ASSUME ANYTHING EVER WHEN WRITING A PROGRAM. !!!!! The input file might be corrupted and the line you read doesn&#39;t have any <code>&quot; &quot;</code> character thus <code>strtok()</code> is failing and since you assume it&#39;s not you try to read from a <code>NULL</code> pointer."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1455118049, "post_id": 35318827, "comment_id": 58347140, "body": "<code>strtok()</code> is fine if you understand what it does and how to use it.  It is suitable for some tasks that are a bit tricky for <code>sscanf()</code>.  On the other hand, this is not one of those tasks."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455118437, "post_id": 35318827, "comment_id": 58347448, "body": "@iharob, absence of any of the delimiter characters in the string does not cause <code>strtok()</code> to fail.  <code>strtok()</code> does return <code>NULL</code> when there are no more tokens, but it is debatable whether that should be characterized as a failure.  That will happen on the first call only in the event that the string contains no characters that are not in the delimiter list, but indeed it will happen in that case, so yes, it is important to check for that."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1455123334, "post_id": 35318827, "comment_id": 58351285, "body": "Couldn&#39;t compile your program, it is incomplete. <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4464506"}, "is_accepted": true, "score": 2, "last_activity_date": 1455118513, "last_edit_date": 1455118513, "creation_date": 1455118335, "answer_id": 35319332, "question_id": 35318827, "link": "https://stackoverflow.com/questions/35318827/strtok-segmentation-fault-just-gives-a-segmentation-fault-when-the-first-line-o/35319332#35319332", "title": "strtok segmentation fault, just gives a segmentation fault when the first line of input file is blank", "body": "<p>Please use <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow\"><code>sscanf()</code></a> instead. Try to avoid <code>strtok()</code> at all costs unless otherwise absolutely neccessary. </p>\n\n<p><a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_sscanf.htm\" rel=\"nofollow\">Here is a link to source you might find useful</a></p>\n"}], "owner": {"reputation": 635, "user_id": 5503203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b8fc16849bdc2cf90674e4cc38f02e6f?s=128&d=identicon&r=PG&f=1", "display_name": "ITguy", "link": "https://stackoverflow.com/users/5503203/itguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 35319332, "answer_count": 1, "score": 2, "last_activity_date": 1455118513, "creation_date": 1455117082, "question_id": 35318827, "link": "https://stackoverflow.com/questions/35318827/strtok-segmentation-fault-just-gives-a-segmentation-fault-when-the-first-line-o", "title": "strtok segmentation fault, just gives a segmentation fault when the first line of input file is blank", "body": "<p>I am using AIX. There are several posts of Segmentation fault with strtok but I could not find any to help me.</p>\n\n<p>I am writing a c program and I want to read a file in the program and then sort this line (I just need the minutes and the seconds at the end of the second line).</p>\n\n<p>here is a snippet from my code:</p>\n\n<pre><code>   FILE *timeFile;\n   int x, timeElapsed;\n   char line[1000], *temp;\n\n  int main()\n  {\n        x = 0; \n        timeFile= fopen(\"time.txt\", \"r\");\n\n        if(timeFile==NULL)\n        {\n            printf(\"\\nerror opening file time.txt\\n\");\n            printf(\"\\nPlease update system time manually\\n\");\n            return 1;//error\n        }\n\n        while( x&lt;10 &amp;&amp; fgets(line, sizeof(line), timeFile)!= NULL)\n\n        {\n\n            if( x==1 )//we need data from the second line\n            {\n\n                temp        =   strtok(line, \"  \");\n\n                printf(\"\\nline: %s\",line);//the Output here is as expected 'line: real'\n                printf(\"\\ntemp: %s\",temp);//the error occurs here at temp\n\n\n                break;\n             }\n            x++;\n\n        }\n}\n</code></pre>\n\n<p>The file I am trying to read is has this inside:</p>\n\n<pre><code>real    0m1.25s\nuser    0m0.09s\nsys 0m0.02s\n</code></pre>\n\n<p>The first line is blank (only a return character I think) and 'real 0m1.25s\n' is the second line. I want to read only the second line. The error occurs when I try to read the temp variable. </p>\n\n<p>The funny thing is I have used nearly the same code for the same job in another program and it worked. The only difference was that in the input file of the previous project there were no blank lines or tabs. So I am confused please help. </p>\n\n<p>PS: I am using a German keyboard so it capitalizes words on its own, sorry about that.</p>\n"}, {"tags": ["c", "function", "prototype", "declaration"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1455117044, "post_id": 35318801, "comment_id": 58346307, "body": "It depends, can you show the specific situation you are talking about?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1455117339, "post_id": 35318801, "comment_id": 58346529, "body": "IMHO it&#39;s useless, but it doesn&#39;t harm either. But if the second declaration is different from the first one (in terms of number and types of parameters), then you&#39;ll get a compilation error."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1455117615, "post_id": 35318801, "comment_id": 58346779, "body": "Prolly an editing/copypasta error by author."}, {"owner": {"reputation": 303, "user_id": 4764204, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59681742d9cd285c1d3564a9b4fdb789?s=128&d=identicon&r=PG&f=1", "display_name": "floquet22", "link": "https://stackoverflow.com/users/4764204/floquet22"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1455117686, "post_id": 35318801, "comment_id": 58346835, "body": "@iharob - actually I cannot give an example as i cannot see any pattern. I&#39;m working on a new project and all function declarations of the header files are repeated in the c-files. For every module the same. All headers of the modules are summarized in one header file which is included in every module. So I would like to strictly move all global function declarations to the headers and have the module function declarations in the c-file"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1455118492, "creation_date": 1455118492, "answer_id": 35319394, "question_id": 35318801, "link": "https://stackoverflow.com/questions/35318801/what-sense-does-it-make-to-declare-a-function-more-than-one-time-in-c/35319394#35319394", "title": "What sense does it make to declare a function more than one time in C?", "body": "<p>It is possible. It doesn't make any sense.</p>\n\n<p>But it does not cause any harm either. You can declare a function as many times as you like, but each such declaration must be identical to the others. So it is pointless to do so. As someone suggested, maybe it is a copy/paste error.</p>\n\n<p>You can only have one function <em>definition</em> though, which should always be in the c file.</p>\n\n<hr>\n\n<p>This is how you <em>should</em> do it:</p>\n\n<ul>\n<li><p>Function declarations which is part of the caller's interface should be in the h file, and there only.</p></li>\n<li><p>Function declarations of local (private) functions that are only available from inside the c file itself, should be in the c file, and there only. Such functions should be declared and defined as <code>static</code>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1455119258, "creation_date": 1455119258, "answer_id": 35319699, "question_id": 35318801, "link": "https://stackoverflow.com/questions/35318801/what-sense-does-it-make-to-declare-a-function-more-than-one-time-in-c/35319699#35319699", "title": "What sense does it make to declare a function more than one time in C?", "body": "<p>Duplicate function declarations serve no useful <em>semantic</em> purpose, but they may arise for historical reasons, because of local coding conventions, or for some other reason.</p>\n\n<p>For example, it may be a local coding convention that every function in each source file is prototyped at the beginning of that file.  That has some minor practical utility, such as serving as a manifest of the functions defined in each file, and making the functions inside each file able to ignore any concern about whether other functions in the same file are declared in a header.</p>\n\n<p>Additionally, multiple declarations of the same function or object don't necessarily have to be <em>identical</em>, they only need to be <em>compatible</em>.  Under some circumstances it may makes sense to provide a less specific prototype in a header and a more specific one in the source file containing the function definition (which itself serves as yet another declaration).</p>\n"}], "owner": {"reputation": 303, "user_id": 4764204, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59681742d9cd285c1d3564a9b4fdb789?s=128&d=identicon&r=PG&f=1", "display_name": "floquet22", "link": "https://stackoverflow.com/users/4764204/floquet22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 35319394, "answer_count": 2, "score": 2, "last_activity_date": 1455119258, "creation_date": 1455117001, "question_id": 35318801, "link": "https://stackoverflow.com/questions/35318801/what-sense-does-it-make-to-declare-a-function-more-than-one-time-in-c", "title": "What sense does it make to declare a function more than one time in C?", "body": "<p>I've seen a couple of times that the prototype declaration of a function in the header was literally repeated in the c-file.</p>\n\n<p>It is possible to declare a function more than one time in C - but what sense does it make? Is it just for better readability or is there some deeper insight which I am missing?</p>\n"}, {"tags": ["c++", "c", "gcc", "assembly"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1455116346, "post_id": 35318428, "comment_id": 58345768, "body": "Things are far more complicated than you think. A executable file contains more than machine code. For executing an executable file (binary) the operating systems loads the file into memory and does a lot of complicated things before the actual execution of the code takes place."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1455121654, "post_id": 35318477, "comment_id": 58349989, "body": "Please clarify &quot;file prefix&quot;.  What OSes use a file prefix?"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1455139096, "post_id": 35318477, "comment_id": 58361012, "body": "@ThomasMatthews Read about ELF (Linux) or PE (Windows) file format. There is structure with executable info in the beginning in addition to real executable instructions. In short it can be called &quot;prefix&quot;. Do you agree?"}], "tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 0, "last_activity_date": 1455116142, "creation_date": 1455116142, "answer_id": 35318477, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c/35318477#35318477", "title": "Trying to execute any binary from c", "body": "<p>You can run such hex code but you cannot get an executable file without modifications. There is file prefix which is for the OS and is not assembly opcodes.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1455135295, "last_edit_date": 1455135295, "creation_date": 1455116413, "answer_id": 35318576, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c/35318576#35318576", "title": "Trying to execute any binary from c", "body": "<p>It is certainly implementation specific, practically dependent upon your <a href=\"https://en.wikipedia.org/wiki/Operating_system\" rel=\"nofollow\">operating system</a> and processor <a href=\"https://en.wikipedia.org/wiki/Instruction_set\" rel=\"nofollow\">instruction set</a> (and <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow\">ABI</a> &amp; <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow\">calling conventions</a>).</p>\n\n<p><sup>(I guess and hope you are on Linux; but your question is unclear)</sup></p>\n\n<p>On Linux/x86_64, most of the memory in your <a href=\"https://en.wikipedia.org/wiki/Virtual_address_space\" rel=\"nofollow\">virtual address space</a> is <em>not</em> executable (for security reasons). Try running your program with <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow\">strace(1)</a> to understand the relevant system calls. Also use the debugger <code>gdb</code>. You may need to make the segment containing your binary code executable, e.g. with <a href=\"http://man7.org/linux/man-pages/man2/mprotect.2.html\" rel=\"nofollow\">mprotect(2)</a>. If your process is 1234, try <code>cat /proc/1234/maps</code> in some other terminal (to query its virtual address space). Read more about <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow\">proc(5)</a> for details.</p>\n\n<p>Perhaps you should consider <a href=\"https://en.wikipedia.org/wiki/Just-in-time_compilation\" rel=\"nofollow\">JIT compilation</a> techniques and libraries like <a href=\"https://github.com/kobalicek/asmjit\" rel=\"nofollow\">asmjit</a>, <a href=\"https://gcc.gnu.org/onlinedocs/jit/\" rel=\"nofollow\">GCCJIT</a>, etc...</p>\n\n<p>BTW, an <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow\">ELF</a> executable file is quite complex, and does not start with executable <a href=\"https://en.wikipedia.org/wiki/Machine_code\" rel=\"nofollow\">machine code</a>. Read also <a href=\"http://man7.org/linux/man-pages/man5/elf.5.html\" rel=\"nofollow\">elf(5)</a>. Use <a href=\"http://man7.org/linux/man-pages/man1/objdump.1.html\" rel=\"nofollow\">objdump(1)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man1/readelf.1.html\" rel=\"nofollow\">readelf(1)</a> to explore and understand ELF executables. This might explain why your experiment failed (but we don't know how did you come with <code>char code[] = {0x7f,0x45,0x4c,0x46</code> .... these few bytes look like some ELF header)</p>\n\n<p>You probably should <em>carefully</em> extract some functions (i.e. their machine code &amp; data) from your ELF executable and deal with <a href=\"https://en.wikipedia.org/wiki/Relocation_%28computing%29\" rel=\"nofollow\">relocations</a> (and <a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow\">name mangling</a>, for C++), if you want to continue your experiment. Reading Levine's book on <a href=\"http://www.iecc.com/linker/\" rel=\"nofollow\"><em>Linkers &amp; Loaders</em></a> will be helpful.</p>\n"}, {"comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1455116559, "post_id": 35318598, "comment_id": 58345947, "body": "if running bare metal on a microcontroller for example, then you can simply branch to the array of instructions and it should work just fine (well so long as they are aligned right and are actually instructions that terminate properly or end in a loop."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 0, "last_activity_date": 1455116484, "creation_date": 1455116484, "answer_id": 35318598, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c/35318598#35318598", "title": "Trying to execute any binary from c", "body": "<p>I assume this is on your pc or laptop or whatever computer you are reading this webpage on.   Each program is prevented from running arbitrary code in memory, or even accessing code outside its space.   you have a program and you have data in an array, which you may know to be instructions but the operating system and the compiler, etc know to be data.  So you have to talk to the operating system to ask it to allow you to execute that code.  Search for self modifying code here at stackoverflow or on the net.  probably want to use mmap() if running on linux.</p>\n"}], "owner": {"reputation": 11, "user_id": 5908874, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153233487316090/picture?type=large", "display_name": "Sergio Mancera", "link": "https://stackoverflow.com/users/5908874/sergio-mancera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "closed_date": 1455116772, "answer_count": 3, "score": -4, "last_activity_date": 1455135295, "creation_date": 1455115967, "last_edit_date": 1495539912, "question_id": 35318428, "link": "https://stackoverflow.com/questions/35318428/trying-to-execute-any-binary-from-c", "closed_reason": "Needs details or clarity", "title": "Trying to execute any binary from c", "body": "<p>I followed this <a href=\"https://stackoverflow.com/questions/18476002/execute-binary-machine-code-from-c\">thread</a> in order to execute some binary code.</p>\n\n<p>The tinky_winky's answer, while worked when I did try to execute another binary file didn't worked.</p>\n\n<p>For example I wrote this program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main ()\n{\n   printf(\"Prueba\\n\");\n   return(0);\n}\n</code></pre>\n\n<p>compiled with gcc (without any parameters) and then put the generated binary on the code variable</p>\n\n<pre><code>char code[] = {0x7f,0x45,0x4c,0x46,0x02,0x01,0x01,0x00,0x00,...};\n</code></pre>\n\n<p>and then tried to compile the new file, but got segmentation fault error.</p>\n\n<p>It is possible to actually run any kind of arbitrary code within c (or c++) or it is only possible to run functions in bare asm code (like in the original thread)? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1455115589, "post_id": 35318199, "comment_id": 58345217, "body": "Any error messages you want us to consider go <i>in the question itself</i>, not in an external service.  And text form is far preferred to images.  Copy&amp;paste is your friend."}, {"owner": {"reputation": 3572, "user_id": 412044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WZZOJ.png?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/412044/martin"}, "edited": false, "score": 3, "creation_date": 1455115613, "post_id": 35318199, "comment_id": 58345244, "body": "Post the error here, not in a picture. When the picture goes down eventually, your question becomes useless for everyone."}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 1, "creation_date": 1455115631, "post_id": 35318199, "comment_id": 58345251, "body": "Maybe u need to add some <code>-lxxx</code> options to link with a dynamic library required by your program."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1455115632, "post_id": 35318199, "comment_id": 58345252, "body": "Do not post links to outside sources of images of code &amp; error messages.  Just post your code &amp; errors here, in the question."}, {"owner": {"reputation": 6220, "user_id": 961781, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/H9EgK.jpg?s=128&g=1", "display_name": "djf", "link": "https://stackoverflow.com/users/961781/djf"}, "edited": false, "score": 2, "creation_date": 1455115779, "post_id": 35318199, "comment_id": 58345367, "body": "Please also show the whole compiler invocation, not just the error"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455133313, "post_id": 35318199, "comment_id": 58357716, "body": "To me the errors don&#39;t seem to indicate that the library is not found. I can not see it in the gcc invocation at all (you had it in the manual command line which worked). The linker just complains about symbols it cannot resolve, which would be consistent with that (not instructed to link against it). Of course I may be missing something. Another possibility is a mismatch between header version and binary library version (compiling works, but the definitions are not in the library); but such errors usually don&#39;t concern so many functions."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1455176155, "creation_date": 1455176155, "answer_id": 35333309, "question_id": 35318199, "link": "https://stackoverflow.com/questions/35318199/library-not-found-when-compiling/35333309#35333309", "title": "Library not found when compiling", "body": "<p>these two lines are the main problems:</p>\n\n<pre><code>gcc -Wall -Werror -Wextra -ggdb -I includes -c srcs/**/*.c\nar rc libmt_framework.a *.o\n</code></pre>\n\n<p>Suggest:</p>\n\n<pre><code>SRCS := $(WILDCARD srcs/*.c)\nOBJS := $(SRCS.o:.c)\n\nCFLAGS := -Wall -Wextra -Werror -ggdb \n\nNAME := libmt_framework.a\n\n.PHONY: all\nall: $(NAME)\n\n*.o: *.c\n&lt;tab&gt;gcc $(CFLAGS)  $&lt; -o $@ -I./includes\n\n$(NAME): $(OBJS)\n&lt;tab&gt;ar -rcs $@ $^\n</code></pre>\n\n<p>any libraries should be referenced when creating the executable.</p>\n\n<p>with something like: </p>\n\n<pre><code>$(EXECNAME): $(NEW_OBJS)\n&lt;tab&gt;gcc -static -o $@ $^ $(LFLAGS) -LpathtoLibrary -lshortlibraryName \n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5629763, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5ce54484c00d4f605e83efd6a9b64196?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#225;s Cottier", "link": "https://stackoverflow.com/users/5629763/andr%c3%a1s-cottier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1455176155, "creation_date": 1455115344, "last_edit_date": 1455116963, "question_id": 35318199, "link": "https://stackoverflow.com/questions/35318199/library-not-found-when-compiling", "title": "Library not found when compiling", "body": "<p>I'm encountering an issue when trying to compile a C project. \nMy folder contains one .c, one .h, my library directory and a few text files.</p>\n\n<p>When manually compiling with my own main.c (<code>gcc get_next_line.c main.c Libft/libft.a</code>), everyone works fine.\nI use a script to pass the unit-tests though, which gives me this type of error when I launch it (the functions appearing are the ones in my library which are used in my .c).</p>\n\n<p>When running the same script on a friend's computer, compilation works fine.\nI didn't put everything here (there's tons of code in the Makefile I use for this script), but if anyone needs some precisions I'll be glad to try and provide them.</p>\n\n<p><a href=\"http://imgur.com/hKcQNMP\" rel=\"nofollow\">http://imgur.com/hKcQNMP</a></p>\n\n<p>EDIT: I'll copy all the text what I got when trying to get the compilation:</p>\n\n<pre><code>make gnl\nfind: /nfs/zfs-student-2/users/acottier/Taf/GNL/includes: No such file or directory\nfind: /nfs/zfs-student-2/users/acottier/Taf/GNL/srcs: No such file or directory\nmake exec_tests\nfind: /nfs/zfs-student-2/users/acottier/Taf/GNL/includes: No such file or directory\nfind: /nfs/zfs-student-2/users/acottier/Taf/GNL/srcs: No such file or  directory\necho \"tests/01_test_simple.spec.c \n      tests/02_test_eof_with_close.spec.c \n      tests/03_test_medium_string.spec.c \n      tests/04_test_return_values.spec.c   \n      tests/05_test_error_handling.spec.c \n      tests/06_test_line_of_08.spec.c \n      tests/07_test_two_lines_of_08.spec.c \n      tests/08_test_few_lines_of_08.spec.c \n      tests/09_test_line_of_16.spec.c \n      tests/10_test_two_lines_of_16.spec.c  \n      tests/11_test_few_lines_of_16.spec.c \n      tests/12_test_line_of_4.spec.c \n      tests/13_test_two_lines_of_4.spec.c \n      tests/14_test_few_lines_of_4.spec.c\n      tests/15_test_line_without_nl.spec.c \n      tests/16_test_line_of_8_without_nl.spec.c \n      tests/17_test_line_of_16_without_nl.spec.c \n      tests/30_bonus_multiple_fd.spec.c \n      tests/40_hard_test_medium_string.spec.c \n      tests/41_hard_test_large_file.spec.c \n      tests/42_hard_test_one_big_fat_line.spec.c\"\n      tests/01_test_simple.spec.c \n      tests/02_test_eof_with_close.spec.c \n      tests/03_test_medium_string.spec.c \n      tests/04_test_return_values.spec.c \n      tests/05_test_error_handling.spec.c \n      tests/06_test_line_of_08.spec.c \n      tests/07_test_two_lines_of_08.spec.c  \n      tests/08_test_few_lines_of_08.spec.c \n      tests/09_test_line_of_16.spec.c \n      tests/10_test_two_lines_of_16.spec.c \n      tests/11_test_few_lines_of_16.spec.c \n      tests/12_test_line_of_4.spec.c \n      tests/13_test_two_lines_of_4.spec.c \n      tests/14_test_few_lines_of_4.spec.c \n      tests/15_test_line_without_nl.spec.c \n      tests/16_test_line_of_8_without_nl.spec.c \n      tests/17_test_line_of_16_without_nl.spec.c \n      tests/30_bonus_multiple_fd.spec.c \n      tests/40_hard_test_medium_string.spec.c \n      tests/41_hard_test_large_file.spec.c \n      tests/42_hard_test_one_big_fat_line.spec.c\nmake re -k -C /nfs/zfs-student-2/users/acottier/Taf/GNL/libft\nObject files deleted.\nLibrary deleted.\nCompilation finished.\nmake -k -C ../testframework/v3/\nrm -f *.o\ngcc -Wall -Werror -Wextra -ggdb -I includes -c srcs/**/*.c\nar rc libmt_framework.a *.o\ngcc -g -I . -I ../testframework/v3//includes \n      -I /nfs/zfs-student-2/users/acottier/Taf/GNL \n      -I /nfs/zfs-student-2/users/acottier/Taf/GNL/includes \n      -I /nfs/zfs-student-2/users/acottier/Taf/GNL/includes/builtin \n      -I /nfs/zfs-student-2/users/acottier/Taf/GNL/libs/libtowel/includes -D__MOULITEST__ -DPROTOTYPES=\n      \"MT_ADD_PROTO(01_test_simple); \n      MT_ADD_PROTO(02_test_eof_with_close); \n      MT_ADD_PROTO(03_test_medium_string); \n      MT_ADD_PROTO(04_test_return_values); \n      MT_ADD_PROTO(05_test_error_handling); \n      MT_ADD_PROTO(06_test_line_of_08); \n      MT_ADD_PROTO(07_test_two_lines_of_08); \n      MT_ADD_PROTO(08_test_few_lines_of_08); \n      MT_ADD_PROTO(09_test_line_of_16); \n      MT_ADD_PROTO(10_test_two_lines_of_16); \n      MT_ADD_PROTO(11_test_few_lines_of_16); \n      MT_ADD_PROTO(12_test_line_of_4); \n      MT_ADD_PROTO(13_test_two_lines_of_4); \n      MT_ADD_PROTO(14_test_few_lines_of_4); \n      MT_ADD_PROTO(15_test_line_without_nl); \n      MT_ADD_PROTO(16_test_line_of_8_without_nl); \n      MT_ADD_PROTO(17_test_line_of_16_without_nl); \n      MT_ADD_PROTO(30_bonus_multiple_fd); \n      MT_ADD_PROTO(40_hard_test_medium_string); \n      MT_ADD_PROTO(41_hard_test_large_file); \n      MT_ADD_PROTO(42_hard_test_one_big_fat_line); \"\n      -DADD_TESTS=\n      \"MT_ADD_SUITE(mt, 01_test_simple, suite_01_test_simple); \n      MT_ADD_SUITE(mt, 02_test_eof_with_close, suite_02_test_eof_with_close); \n      MT_ADD_SUITE(mt, 03_test_medium_string, suite_03_test_medium_string); \n      MT_ADD_SUITE(mt, 04_test_return_values, suite_04_test_return_values); \n      MT_ADD_SUITE(mt, 05_test_error_handling, suite_05_test_error_handling);\n      MT_ADD_SUITE(mt, 06_test_line_of_08, suite_06_test_line_of_08); \n      MT_ADD_SUITE(mt, 07_test_two_lines_of_08, suite_07_test_two_lines_of_08);\n      MT_ADD_SUITE(mt, 08_test_few_lines_of_08, suite_08_test_few_lines_of_08); \n      MT_ADD_SUITE(mt, 09_test_line_of_16, suite_09_test_line_of_16); \n      MT_ADD_SUITE(mt, 10_test_two_lines_of_16, suite_10_test_two_lines_of_16); \n      MT_ADD_SUITE(mt, 11_test_few_lines_of_16, suite_11_test_few_lines_of_16); \n      MT_ADD_SUITE(mt, 12_test_line_of_4, suite_12_test_line_of_4);\n       MT_ADD_SUITE(mt, 13_test_two_lines_of_4, suite_13_test_two_lines_of_4); \n      MT_ADD_SUITE(mt, 14_test_few_lines_of_4, suite_14_test_few_lines_of_4);\n      MT_ADD_SUITE(mt, 15_test_line_without_nl, suite_15_test_line_without_nl); \n      MT_ADD_SUITE(mt, 16_test_line_of_8_without_nl, suite_16_test_line_of_8_without_nl); \n      MT_ADD_SUITE(mt, 17_test_line_of_16_without_nl, suite_17_test_line_of_16_without_nl); \n      MT_ADD_SUITE(mt, 30_bonus_multiple_fd, suite_30_bonus_multiple_fd); \n      MT_ADD_SUITE(mt, 40_hard_test_medium_string, suite_40_hard_test_medium_string); \n      MT_ADD_SUITE(mt, 41_hard_test_large_file, suite_41_hard_test_large_file); \n      MT_ADD_SUITE(mt, 42_hard_test_one_big_fat_line, suite_42_hard_test_one_big_fat_line); \n      \" -DRENDU_PATH=\"\\\"/nfs/zfs-student-2/users/acottier/Taf/GNL\\\"\n      \" tests/01_test_simple.spec.c \n      tests/02_test_eof_with_close.spec.c \n      tests/03_test_medium_string.spec.c \n      tests/04_test_return_values.spec.c \n      tests/05_test_error_handling.spec.c \n      tests/06_test_line_of_08.spec.c \n      tests/07_test_two_lines_of_08.spec.c \n      tests/08_test_few_lines_of_08.spec.c \n      tests/09_test_line_of_16.spec.c \n      tests/10_test_two_lines_of_16.spec.c \n      tests/11_test_few_lines_of_16.spec.c \n      tests/12_test_line_of_4.spec.c \n      tests/13_test_two_lines_of_4.spec.c \n      tests/14_test_few_lines_of_4.spec.c \n      tests/15_test_line_without_nl.spec.c \n      tests/16_test_line_of_8_without_nl.spec.c \n      tests/17_test_line_of_16_without_nl.spec.c \n      tests/30_bonus_multiple_fd.spec.c \n      tests/40_hard_test_medium_string.spec.c \n      tests/41_hard_test_large_file.spec.c \n      tests/42_hard_test_one_big_fat_line.spec.c \n      main.c utils.c /nfs/zfs-student-2/users/acottier/Taf/GNL/get_next_line.c  -o get_next_line_tests -L../testframework/v3/ -lmt_framework\nUndefined symbols for architecture x86_64:\n  \"_ft_strclr\", referenced from:\n        _get_next_line in get_next_line-b43645.o\n  \"_ft_strdupchr\", referenced from:\n       _ft_traitement in get_next_line-b43645.o\n       _ft_nettoyage in get_next_line-b43645.o\n  \"_ft_strjoin\", referenced from:\n       _ft_traitement in get_next_line-b43645.o\n  \"_ft_strlen\", referenced from:\n       _ft_traitement in get_next_line-b43645.o\n  \"_ft_strlenchr\", referenced from:\n       _ft_traitement in get_next_line-b43645.o\n       _ft_nettoyage in get_next_line-b43645.o\n  \"_ft_strnew\", referenced from:\n       _get_next_line in get_next_line-b43645.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n\nmake[2]: *** [exec_tests] Error 1\nmake[1]: *** [all] Error 2\nmake: *** [get_next_line] Error 2\n</code></pre>\n\n<p>(I made some editing, the output in the shell juste isn't readable)</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["c", "gcc", "clion", "jetbrains-ide"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455115128, "post_id": 35318008, "comment_id": 58344885, "body": "Have you seen <a href=\"http://stackoverflow.com/questions/33599067/clion-command-line-program-arguments\">this</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 9, "last_activity_date": 1455115119, "creation_date": 1455115119, "answer_id": 35318124, "question_id": 35318008, "link": "https://stackoverflow.com/questions/35318008/how-do-i-properly-pass-command-line-arguments-to-a-c-program-in-clion/35318124#35318124", "title": "How do I properly pass command line arguments to a C program in CLion?", "body": "<p>If you click on <code>Run</code>-<code>Edit Configurations</code> you can create an \"Application\" configuration that allows you to provide the Program arguments - either in a single line, or in a separate window one argument per line.</p>\n"}], "owner": {"reputation": 477, "user_id": 5136646, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FYR25a-s-K4/AAAAAAAAAAI/AAAAAAAAA28/DXJZyEvQYoA/photo.jpg?sz=128", "display_name": "Kevin Cianfarini", "link": "https://stackoverflow.com/users/5136646/kevin-cianfarini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12405, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1455115119, "creation_date": 1455114853, "last_edit_date": 1455115068, "question_id": 35318008, "link": "https://stackoverflow.com/questions/35318008/how-do-i-properly-pass-command-line-arguments-to-a-c-program-in-clion", "title": "How do I properly pass command line arguments to a C program in CLion?", "body": "<p>I need someone to outline how to pass command line arguments to CLion. What I've found so far hasn't worked for me. Specifically I need to know how to pass multiple arguments to the program from the command line. </p>\n"}, {"tags": ["c", "dynamic-linking", "autoconf"], "comments": [{"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 0, "creation_date": 1455116743, "post_id": 35317339, "comment_id": 58346074, "body": "Search in google with error tips, then you will find a page about which library is missing."}, {"owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "reply_to_user": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "edited": false, "score": 0, "creation_date": 1455146786, "post_id": 35317339, "comment_id": 58364530, "body": "Since I&#39;m looking for a deterministic way, like a cooking recipe, and already mentioned contacting the developers and asking, I don&#39;t think that&#39;s a solution."}], "owner": {"reputation": 6201, "user_id": 1797006, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b1a413ea490f70dc5d27f3d7eba6b4f6?s=128&d=identicon&r=PG", "display_name": "Karl Richter", "link": "https://stackoverflow.com/users/1797006/karl-richter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455113067, "creation_date": 1455113067, "question_id": 35317339, "link": "https://stackoverflow.com/questions/35317339/how-to-figure-out-which-function-of-a-shared-library-is-used-if-linking-fails-du", "title": "How to figure out which function of a shared library is used if linking fails due to missing -lX fails?", "body": "<p>Expanding a bit: given a project that you didn't see before and a linking failure like <code>/usr/bin/ld.bfd.real: cannot find -lperl</code> caused by <code>gcc -shared  -o PERLUAFS/ukernel.so -fPIC -Wl,-E -fstack-protector -L/usr/local/lib -L/usr/lib/x86_64-linux-gnu/perl/5.20/CORE -lperl -ldl -lm -lpthread -lc -lcrypt PERLUAFS/ukernel_swig_perl.o .libs/libuafs_pic.a /home/richter/openafs/lib/libcmd_pic.a /home/richter/openafs/lib/libafsutil_pic.a /home/richter/openafs/lib/libopr_pic.a -L/home/richter/openafs/lib -L/home/richter/openafs/lib -lafshcrypto -lrokenafs -lcrypt -lresolv</code></p>\n\n<p>How would I figure out the functions which are used for linking to be passed to <code>autoconf</code>'s <code>AC_CHECK_LIB</code> which doesn't allow omitting the function name and even if it would I'd still prefer to know exactly which functions are used.</p>\n\n<p>The most trivial answer: ask the author(s) of the code which I would always do, but I'm interested in a theoretical solution as well.</p>\n\n<p>Steps to resolv are imo:</p>\n\n<ul>\n<li>determine the implementation source file which creates the <code>.a</code> files -> Assuming you have a <code>configure.ac</code> and <code>Makefile.am</code> which create <code>Makefile.in</code> and <code>Makefile</code> with thousands of lines what's the best proceedure here</li>\n<li>check the source and findout where functions of the library <code>X</code> used by <code>-lX</code> are used</li>\n</ul>\n\n<p>I have no idea how to do any of those. I would also be happy with a listing of complications which can be solved infinitely faster by the original author(s) than me so that I will really no ever try to solve this task.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1455113609, "post_id": 35317311, "comment_id": 58343729, "body": "How exactly do you think it makes sense to call <code>realloc</code> on the very same variable, over and over from a loop?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455113640, "post_id": 35317311, "comment_id": 58343757, "body": "You code like that and you don&#39;t know that <code>int *array</code> is a pointer and not an <code>Array</code> ?"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1455114946, "post_id": 35317311, "comment_id": 58344764, "body": "This question sounds <i>very</i> familiar..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1455115499, "post_id": 35317311, "comment_id": 58345160, "body": "&quot; create a new array with the number of zeros in it from the old array, and then &quot;append&quot; the rest of the non-zero integers onto this array.&quot;  You realize this is pretty much the very same thing as sorting the original array? Also do you realize that the new array will always have the same size as the original array? So dynamic allocation is not need in the first place."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455113681, "post_id": 35317509, "comment_id": 58343790, "body": "True, but that&#39;s not related to the problem."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455113736, "post_id": 35317509, "comment_id": 58343830, "body": "<code>The count is known before defining the array</code> which Array.... this =&gt;&gt;&gt; <code>int *array</code> ?"}, {"owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "edited": false, "score": 0, "creation_date": 1455113935, "post_id": 35317509, "comment_id": 58343988, "body": "I agree. To answer your Q, in this specific example the array a is predefined and there is loop to count. so the 2nd array is allocated using that count. When you see an address at a very lower range like 40, 30, 20... then that indicates a ptr has become NULL."}, {"owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "edited": false, "score": 0, "creation_date": 1455114334, "post_id": 35317509, "comment_id": 58344295, "body": "Why address 0x40 is printed in the error? That indicates array is NULL and count is 10. ptr+10 moves the pointer to 40 bytes for integer. so the address is 0x40."}], "tags": [], "owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1455113621, "creation_date": 1455113621, "answer_id": 35317509, "question_id": 35317311, "link": "https://stackoverflow.com/questions/35317311/c-array-not-allocating-more-memory-correctly/35317509#35317509", "title": "C: Array not allocating more memory correctly", "body": "<p>The count is known before defining the array. You can allocate memory using malloc as shown below.</p>\n\n<pre><code>array = malloc( count * sizeof(int)).\n</code></pre>\n\n<p>The error indicates you are trying to access address 0x40. This indicates one of the pointer has become NULL and you are trying to dereference ptr+0x40. </p>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455113796, "post_id": 35317518, "comment_id": 58343872, "body": "<code>This accesses array beyond its size</code> int *array is a pointer not an Array ."}, {"owner": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455113881, "post_id": 35317518, "comment_id": 58343942, "body": "@Michi Technically you are correct. It accesses the memory region pointed to by <code>array</code> beyond the size it has been given by <code>realloc</code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1455113965, "post_id": 35317518, "comment_id": 58344012, "body": "There&#39;s still not enough memory being allocated.  You need space for one more: <code>realloc(array, (l + 1) * sizeof(int));</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1455114424, "post_id": 35317518, "comment_id": 58344369, "body": "How does this code make any sense though? This still has the same problem as the original code, namely muddled purpose and work flow. The OP needs to do <code>Understand problem -&gt; Come up with a solution -&gt; Write the code</code> rather than <code>Write the code-&gt; Understand the solution -&gt; Come up with a problem</code>. Assisting him in writing the code for the latter work flow is not to help him."}, {"owner": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1455115935, "post_id": 35317518, "comment_id": 58345473, "body": "@Lundin: I aggree that the problem could be handled differently and the realloc in a loop is not necessary at all in this use case. Anyway, since there are legit cases where one has to use realloc, I didn&#39;t want to give an answer that simply rewrites the solution so it comes without realloc, thus possibly leaving the impression that realloc doesn&#39;t work correctly (as the title suggests)"}], "tags": [], "owner": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "is_accepted": true, "score": 7, "last_activity_date": 1455114007, "last_edit_date": 1455114007, "creation_date": 1455113640, "answer_id": 35317518, "question_id": 35317311, "link": "https://stackoverflow.com/questions/35317311/c-array-not-allocating-more-memory-correctly/35317518#35317518", "title": "C: Array not allocating more memory correctly", "body": "<pre><code>array[l+count] = a[l];\n</code></pre>\n\n<p>This accesses the memory block that <code>array</code> points at beyond its allocated size. You have to do it differently, using a second index:</p>\n\n<pre><code>// adds the nonzero elements of the array to the new array\nint l = count;\n\nfor (int j=0; j &lt; n; ++j)\n{\n    if (a[j] != 0)\n    {\n        array = realloc(array, (l+1) * sizeof(int));\n        array[l] = a[j];\n        ++l;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455113865, "post_id": 35317582, "comment_id": 58343928, "body": "You don&#39;t allocate memory <code>for a fixed size array</code> ..you create a block of memory and use a pointer to point there. How does/can an Array point there?"}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455113922, "post_id": 35317582, "comment_id": 58343977, "body": "@Michi Isn&#39;t that what I said?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455114041, "post_id": 35317582, "comment_id": 58344060, "body": "I&#39;m sorry i can&#39;t help you here if you don&#39;t understand my Comment."}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455114088, "post_id": 35317582, "comment_id": 58344095, "body": "@Michi I think that&#39;s ok, all c programmers see what I mean."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1455115136, "post_id": 35317582, "comment_id": 58344892, "body": "<b>About spelling</b>: it&#39;s &quot;you&quot;, not &quot;u&quot;. :)"}, {"owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1455115420, "post_id": 35317582, "comment_id": 58345097, "body": "@unwind Sure, u are right, I see many people use similar formats, so I use that sometimes, sometimes it makes things shorter :)"}], "tags": [], "owner": {"reputation": 16010, "user_id": 1568658, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FPSGe.jpg?s=128&g=1", "display_name": "user218867", "link": "https://stackoverflow.com/users/1568658/user218867"}, "is_accepted": false, "score": 1, "last_activity_date": 1455114971, "last_edit_date": 1455114971, "creation_date": 1455113801, "answer_id": 35317582, "question_id": 35317311, "link": "https://stackoverflow.com/questions/35317311/c-array-not-allocating-more-memory-correctly/35317582#35317582", "title": "C: Array not allocating more memory correctly", "body": "<h2>About your algorithm:</h2>\n\n<p>I think u don't need to create a new array, just use a <code>int tmp</code> as swap area, and a <code>int foundZeroCount</code> as index, u swap 2 numbers at a time. </p>\n\n<h2>About memory allocation:</h2>\n\n<p>If u want to allocate memory for a fixed size array, just use <code>malloc()</code> to allocate array once, later when u need to extend the array, just call <code>realloc()</code> once.</p>\n\n<h2>About memory reset:</h2>\n\n<p>Just use <code>memset()</code>, and don't need a loop.</p>\n\n<h2>Suggestion - about c programming</h2>\n\n<p>Try improve your c basic, especially about <code>array</code> / <code>pointer</code> / <code>memory</code>, and try to know more functions from <code>glibc</code>.</p>\n\n<p>Books like <code>&lt;The c programming language 2nd&gt;</code>, <code>GNU c library document</code>, and <code>&lt;The linux programming interface&gt;</code> would be useful, I guess.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1455115453, "last_edit_date": 1455115453, "creation_date": 1455114989, "answer_id": 35318069, "question_id": 35317311, "link": "https://stackoverflow.com/questions/35317311/c-array-not-allocating-more-memory-correctly/35318069#35318069", "title": "C: Array not allocating more memory correctly", "body": "<p>Other answers address your immediate issue, that</p>\n\n<pre><code>            array[l+count] = a[l];\n</code></pre>\n\n<p>attempts to access outside the bounds of the allocated space to which <code>array</code> points.  I'll focus instead on your approach to the problem, which is flawed.</p>\n\n<p>Dynamic memory allocation is comparatively expensive.  You do not want to do any more than necessary, and it is particularly poor form to reallocate many times to increase by small increments each time, as you do.</p>\n\n<p>Since you know at compile time how many elements you will need, dynamic allocation is altogether unnecessary here.  You could instead do this:</p>\n\n<pre><code>int a[10] = {3, 0, 1, 4, 0, 0, 7, 20, 1, 5};\nint array[10] = { 0 };\n</code></pre>\n\n<p>(Note also here that when an array initializer is provided, any array elements it does not explicitly initialize are initialized to <code>0</code>.)</p>\n\n<p>Even if you did not know at compile time how many elements you would need, it would be far better to perform the whole allocation in one chunk.  Moreover, if you did that via <code>calloc()</code> then you would get automatic initialization of the allocated space to all-zeroes.</p>\n"}, {"tags": [], "owner": {"reputation": 1514, "user_id": 2396264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/423ea1e7faf341fbc2a08cc48c1d5886?s=128&d=identicon&r=PG", "display_name": "MarengoHue", "link": "https://stackoverflow.com/users/2396264/marengohue"}, "is_accepted": false, "score": 1, "last_activity_date": 1455115235, "creation_date": 1455115235, "answer_id": 35318163, "question_id": 35317311, "link": "https://stackoverflow.com/questions/35317311/c-array-not-allocating-more-memory-correctly/35318163#35318163", "title": "C: Array not allocating more memory correctly", "body": "<p>The problem is with <code>array[l+count] = a[l];</code> right when you are done allocating your 'zero-array' it's size is <strong>3</strong> and then you try to access <code>(l + count)</code>'th position which is <strong>6</strong>.</p>\n\n<p>And even if you have fixed those issues with memory it still wouldn't work because <strong>a[l] and further may still be zeros.</strong> (Your initial array is doesn't have zeroes in the beggining, remember?)</p>\n\n<p>And there is a couple of suggestions:\nuse calloc() to build your initial array of zeros because as <strong>man</strong> states:</p>\n\n<blockquote>\n  <p>The calloc() function allocates memory for an array of nmemb elements\n  of size bytes each and returns a pointer to the allocated memory. The\n  memory is set to zero</p>\n</blockquote>\n\n<p>First allocate then set because operations with memory are quite taxing for performance. It would be better for you to first allocate some  memory and work with it instead of reallocating it each step. It would be much easier to keep track of as well.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1455117424, "last_edit_date": 1455117424, "creation_date": 1455116543, "answer_id": 35318632, "question_id": 35317311, "link": "https://stackoverflow.com/questions/35317311/c-array-not-allocating-more-memory-correctly/35318632#35318632", "title": "C: Array not allocating more memory correctly", "body": "<p>Before you start to hack away, take your time to consider the actual problem, which you have described as:</p>\n\n<blockquote>\n  <p>count the number of zeros in the array, create a new array with the number of zeros in it from the old array, and then \"append\" the rest of the non-zero integers onto this array.</p>\n</blockquote>\n\n<p>Your comments say what the code should do, yet the code does something entirely different. Your algorithm to solve the problem is wrong - this, and nothing else, is the cause of the bugs.</p>\n\n<p>To begin with, if the new array should contain all zeroes of the old array plus all non-zeroes, then common sense says that the new array will always have the same size as the old array. You don't even need to use dynamic memory allocation.</p>\n\n<p>The code you have creates a new array and discards the old one, in the same memory location, over and over. This doesn't make any sense. On top of that, it is very ineffective to call realloc repeatedly in a loop.</p>\n\n<p>You should do something like this instead:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n\nint main(int argc, const char * argv[]) {\n    int a[10] = {3, 0, 1, 4, 0, 0, 7, 20, 1, 5};\n    const int n = 10; \n\n    // counts the number of 0's in the original array\n    int zeroes = 0;\n    for (int i = 0; i &lt; n; ++i)\n    {\n        if (a[i] == 0)\n        {\n            ++zeroes;\n        }\n    }\n\n    // creates a new array and makes each element 0\n    // there's actually no need to allocate this dynamically at all...\n    int *array = calloc(1, sizeof(int[n]) ); \n    assert(array != NULL);\n\n    // skip zeroes, ie \"move the zeroes from the original array\"\n    int* not_zeroes = array + zeroes; // point at first item to contain \"not zeroes\"\n\n    // adds the non-zero elements of the original array to the new array\n    for (int i = 0; i &lt; n; ++i)\n    {\n      if(a[i] != 0)\n      {\n        *not_zeroes = a[i]; \n        not_zeroes++;\n      }\n    }\n\n    // prints the array out in a nice format\n    printf(\"%s\", \"{\");\n    for (int i = 0; i &lt; n; ++i)\n    {\n        printf(\"%d,\", array[i]);\n    }\n    printf(\"}\\n\");\n\n\n    free(array);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 5811059, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a851027498b5cc205c5cc25c03be42c7?s=128&d=identicon&r=PG&f=1", "display_name": "TyCharm", "link": "https://stackoverflow.com/users/5811059/tycharm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 35317518, "answer_count": 6, "score": 3, "last_activity_date": 1455117424, "creation_date": 1455112985, "question_id": 35317311, "link": "https://stackoverflow.com/questions/35317311/c-array-not-allocating-more-memory-correctly", "title": "C: Array not allocating more memory correctly", "body": "<p>I'm fairly new to C and I'm working on a project. Given an integer array, I want to move all the zeros in it to the left of the array with the rest of the elements in any order to the right of all the zeros. The basic idea of my algorithm is to count the number of zeros in the array, create a new array with the number of zeros in it from the old array, and then \"append\" the rest of the non-zero integers onto this array. And then of course I print finished product.</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    int a[10] = {3, 0, 1, 4, 0, 0, 7, 20, 1, 5};\n    int n = 10, count = 0;\n\n    // counts the number of 0's in the original array\n    for (int i = 0; i &lt; n; ++i)\n    {\n        if (a[i] == 0)\n        {\n            ++count;\n        }\n    }\n\n    // creates a new array and makes each element 0\n    int *array = NULL;\n    for (int j = 0; j &lt; count; ++j)\n    {\n        array = realloc(array, (j + 1) * sizeof(int));\n        array[j] = 0;\n    }\n\n    // adds the nonzero elements of the array to the new array\n    for (int l = count; l &lt; n; ++l)\n    {\n        array = realloc(array, l * sizeof(int)); // getting an error here\n        if (a[l] != 0)\n        {\n            array[l+count] = a[l];\n        }\n    }\n\n    // prints the array out in a nice format\n    printf(\"%s\", \"{\");\n    for (int k = 0; k &lt; n-1; ++k)\n    {\n        printf(\"%d%s\", array[k], \",\");\n    }\n\n    printf(\"%d\", array[n-1]);\n    printf(\"%s\", \"}\\n\");\n\n\n    free(array);\n    return 0;\n}\n</code></pre>\n\n<p>I'm getting a \"Thread 1: EXC_BAD_ACCESS (code=1, address=0x40)\" error when I run this code. I think it's got to do something with invalid pointers to the new array, but I'm not sure how to fix it.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "driver"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 3, "creation_date": 1455112083, "post_id": 35316920, "comment_id": 58342669, "body": "I belive there&#39;s a pretty well-established API for drivers to use, you &quot;can&#39;t&quot; just add random functions willy-nilly but should stick to the proper driver family&#39;s interface."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1455112785, "post_id": 35316920, "comment_id": 58343145, "body": "You cannot do it the way you are trying to do it. One solution is to have your module set a function pointer variable in the kernel to point to a function in your module, and have the kernel call your function through the pointer. I don&#39;t really know what you are trying to achieve, but it seems really messy and dangerous."}, {"owner": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "edited": false, "score": 1, "creation_date": 1455114227, "post_id": 35316920, "comment_id": 58344199, "body": "If you&#39;re changing some memory management code to use your routine, then you would have to compile your module as part of the kernel every time. It doesn&#39;t really make much sense doing it. The modules are supposed to use the symbols exported from the core subsystems, not the other way around ..."}, {"owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 0, "creation_date": 1455119336, "post_id": 35316920, "comment_id": 58348180, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/34977233/how-to-invoke-any-kernel-function\">How to invoke any kernel function?</a>"}, {"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1455180643, "post_id": 35316920, "comment_id": 58376884, "body": "@unwind,I hope there&#39;s a API to solve the problem.But I still can&#39;t find it now,thx!"}, {"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1455180823, "post_id": 35316920, "comment_id": 58376994, "body": "@Ian,thanks for your advise.I will try that way."}, {"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "reply_to_user": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "edited": false, "score": 0, "creation_date": 1455181336, "post_id": 35316920, "comment_id": 58377281, "body": "@dragosht, yeh I think the worst way is to compile driver into part of linux kernel.But I don&#39;t know whether it&#39;s illegal or not?"}, {"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "reply_to_user": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "edited": false, "score": 0, "creation_date": 1455182265, "post_id": 35316920, "comment_id": 58377870, "body": "@Jeyaram, thanks for your link. I have read it. But there is a little different with my problem. The point is that my source is part of linux kernel, not a module."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455182663, "post_id": 35332603, "comment_id": 58378164, "body": "Yes, I think the worst way is to rewrite driver into part of linux kernel. But I don&#39;t know whether it&#39;s illegal or not."}, {"owner": {"reputation": 1172, "user_id": 5247040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QjBkAmuJPUc/AAAAAAAAAAI/AAAAAAAAAEc/XOBs1syZFqI/photo.jpg?sz=128", "display_name": "Roman Zaitsev", "link": "https://stackoverflow.com/users/5247040/roman-zaitsev"}, "reply_to_user": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455183278, "post_id": 35332603, "comment_id": 58378547, "body": "@wayne I think ( can be wrong ), that for your own usage and experimentations on home PC - it&#39;s not illegal, but if we are talking about something, that will be distributed, than I&#39;m not sure. You can consult a lawyer."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1455188233, "post_id": 35332603, "comment_id": 58382091, "body": "If it will be distributed, then legally, you need to offer the kernel source code under the terms of the GPLv2. Loadable kernel modules also technically fall under the GPL since they link to the kernel, but some people argue about that."}], "tags": [], "owner": {"reputation": 1172, "user_id": 5247040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QjBkAmuJPUc/AAAAAAAAAAI/AAAAAAAAAEc/XOBs1syZFqI/photo.jpg?sz=128", "display_name": "Roman Zaitsev", "link": "https://stackoverflow.com/users/5247040/roman-zaitsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1455173362, "last_edit_date": 1495540347, "creation_date": 1455173362, "answer_id": 35332603, "question_id": 35316920, "link": "https://stackoverflow.com/questions/35316920/can-a-linux-kernel-source-use-a-function-from-driver/35332603#35332603", "title": "Can a linux kernel source use a function from driver?", "body": "<p>Problem in nutshell: consider this example</p>\n\n<pre><code>extern int test_module_function();\n\nint teste_function() {\n    return test_module_function();\n}\n</code></pre>\n\n<p>When you compile this source - compiler doesn't need body of <code>test_module_function()</code>, declaration is enough. But when we are linking - we need definition of function. For more information please read <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">this</a> and <a href=\"https://stackoverflow.com/questions/856636/effects-of-the-extern-keyword-on-c-functions\">this</a>.</p>\n\n<p>In your case you provided only declaration, because <code>EXPORT_SYMBOL_GPL()</code> just makes your function callable from modules ( provides <code>extern</code> declaration of function ). It doesn't copy body of function in kernel sources ( see <a href=\"https://stackoverflow.com/questions/22712114/what-is-export-symbol-gpl-in-linux-kernel-code\">this</a> ). And body of function is in your module and that module ( I presume ) wasn't builtin into kernel. So linker can't find it.</p>\n\n<p>Possible solution - make module builtin into kernel ( as mentioned by <em>dragosht</em> ).</p>\n\n<p>Side note:<br>\nI agree with <em>unwind</em> and <em>Ian Abbott</em> - search for a better solution, kernel provides API. For example look at other modules.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455202254, "post_id": 35336179, "comment_id": 58392121, "body": "I&#39;m appreciated for your completely explain. I will try it this way. Hope it works!"}, {"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455627984, "post_id": 35336179, "comment_id": 58564829, "body": "sorry, may I ask a stupid question. How can I use that variable defined in LKM. Shared memory ?"}, {"owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "reply_to_user": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455703252, "post_id": 35336179, "comment_id": 58603396, "body": "Simple.. Write a function in LKM which fills up variable&#39;s value and returns a structure. If you already implemented to call functions from LKM then this task is very easy."}, {"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455706829, "post_id": 35336179, "comment_id": 58606077, "body": "Yes, I had already done what you sad. Declare a struct variable in LKM and fills up function to the function pointer. But I don&#39;t know linux-3.16.1/mm/fileX.c how to use that struct variable declared in LKM. They don&#39;t compile together right? So the scope between them is defferent."}, {"owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "reply_to_user": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455709894, "post_id": 35336179, "comment_id": 58608240, "body": "@wayne, try to imitate file_operations structure. <a href=\"http://lxr.free-electrons.com/source/include/linux/fs.h#L1600\" rel=\"nofollow noreferrer\">lxr.free-electrons.com/source/include/linux/fs.h#L1600</a> This is part of kernel, but every char drivers(LKM) uses it to publish it&#39;s APIs."}, {"owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "edited": false, "score": 0, "creation_date": 1455714961, "post_id": 35336179, "comment_id": 58611853, "body": "Thanks, I&#39;m a junior in progrmming linux kernel. I will try it."}], "tags": [], "owner": {"reputation": 8257, "user_id": 1030018, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/65f9ef2a64f6231f7a074afd04f17e27?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyaram", "link": "https://stackoverflow.com/users/1030018/jeyaram"}, "is_accepted": false, "score": 2, "last_activity_date": 1455187092, "last_edit_date": 1455187092, "creation_date": 1455185169, "answer_id": 35336179, "question_id": 35316920, "link": "https://stackoverflow.com/questions/35316920/can-a-linux-kernel-source-use-a-function-from-driver/35336179#35336179", "title": "Can a linux kernel source use a function from driver?", "body": "<blockquote>\n  <p>I have a loadable module(driver) function that linux kernel source\n  need to use.</p>\n</blockquote>\n\n<p>Yes. This is possible. But Not in straight forward way you looking for.\nMost of the drivers works in the same way being as a loadable kernel module(LKM). </p>\n\n<p>Consider a sample GPIO driver(CONFIG_ATH79).</p>\n\n<p>In the following link, we can see the functions are assigned to a structure of function pointers. <br/>\n<a href=\"http://lxr.free-electrons.com/source/drivers/gpio/gpio-ath79.c#L124\" rel=\"nofollow\">http://lxr.free-electrons.com/source/drivers/gpio/gpio-ath79.c#L124</a><br/></p>\n\n<p>Structure is defined here<br/>\n<a href=\"http://lxr.free-electrons.com/source/include/linux/gpio/driver.h#L90\" rel=\"nofollow\">http://lxr.free-electrons.com/source/include/linux/gpio/driver.h#L90</a> <br/></p>\n\n<p>Similar way, it can be done. Declare a structure in corresponding header file which should be included in LKM.</p>\n\n<p>Fill that structure from LKM and use it on linux-3.16.1/mm/fileX.c</p>\n"}], "owner": {"reputation": 33, "user_id": 5584705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ad80bff71d90a0d57f43c5a9cd5738?s=128&d=identicon&r=PG&f=1", "display_name": "wayne", "link": "https://stackoverflow.com/users/5584705/wayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1455187121, "creation_date": 1455111877, "last_edit_date": 1455187121, "question_id": 35316920, "link": "https://stackoverflow.com/questions/35316920/can-a-linux-kernel-source-use-a-function-from-driver", "title": "Can a linux kernel source use a function from driver?", "body": "<p>I have a loadable module(driver) function that linux kernel source need to use.</p>\n\n<p>The function has already opened by <code>EXPORT_SYMBOL_GPL()</code>.</p>\n\n<p>The linux kernel source is one of c file in <code>linux-3.16.1/mm</code>.</p>\n\n<p>However, I add <code>extern function</code> in c file and recompile entire Linux kernel source.</p>\n\n<p>The error message print <code>undefined reference to fun</code>.</p>\n\n<p>I think the error is occured at <strong>link time</strong>.</p>\n\n<p>It could not find the function reference from the driver.</p>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1455111169, "post_id": 35316664, "comment_id": 58342031, "body": "pLEASE use lower-caps <code>p</code>..hope you got the point...:)"}, {"owner": {"reputation": 3967, "user_id": 3853711, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/SwXly.png?s=128&g=1", "display_name": "Rahn", "link": "https://stackoverflow.com/users/3853711/rahn"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1455111660, "post_id": 35316664, "comment_id": 58342396, "body": "@SouravGhosh I see and now the program works. But at the beginning I saw <code>Pthread_create</code> in this book <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/intro.pdf\" rel=\"nofollow noreferrer\">pages.cs.wisc.edu/~remzi/OSTEP/intro.pdf</a>. Is it a mistake?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1455111785, "post_id": 35316664, "comment_id": 58342477, "body": "Not likely, it may be correct. Notice the <code>#include &quot;common.h&quot;</code> part?"}, {"owner": {"reputation": 3967, "user_id": 3853711, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/SwXly.png?s=128&g=1", "display_name": "Rahn", "link": "https://stackoverflow.com/users/3853711/rahn"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1455111975, "post_id": 35316664, "comment_id": 58342599, "body": "@SouravGhosh Oh, okay"}], "answers": [{"comments": [{"owner": {"reputation": 3967, "user_id": 3853711, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/SwXly.png?s=128&g=1", "display_name": "Rahn", "link": "https://stackoverflow.com/users/3853711/rahn"}, "edited": false, "score": 0, "creation_date": 1455112213, "post_id": 35316799, "comment_id": 58342755, "body": "<code>-lpthread </code> is not required"}, {"owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "reply_to_user": {"reputation": 3967, "user_id": 3853711, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/SwXly.png?s=128&g=1", "display_name": "Rahn", "link": "https://stackoverflow.com/users/3853711/rahn"}, "edited": false, "score": 0, "creation_date": 1455113026, "post_id": 35316799, "comment_id": 58343295, "body": "you mean -pthread is sufficient when using clang? &quot;-l&quot; option is normally used with many compilers, particularly on many UNIX/LINUX flavours.."}], "tags": [], "owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "is_accepted": true, "score": 2, "last_activity_date": 1455111444, "creation_date": 1455111444, "answer_id": 35316799, "question_id": 35316664, "link": "https://stackoverflow.com/questions/35316664/pthread-create-function-in-c11/35316799#35316799", "title": "Pthread_create function in C11", "body": "<p>The error indicates the linker is not able to find the symbol Pthread_create. is this pthread_create  or Pthread_create? You also need to link the library with \"-lpthread\".</p>\n"}], "owner": {"reputation": 3967, "user_id": 3853711, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/SwXly.png?s=128&g=1", "display_name": "Rahn", "link": "https://stackoverflow.com/users/3853711/rahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "closed_date": 1455112847, "accepted_answer_id": 35316799, "answer_count": 1, "score": -4, "last_activity_date": 1455111444, "creation_date": 1455111103, "question_id": 35316664, "link": "https://stackoverflow.com/questions/35316664/pthread-create-function-in-c11", "closed_reason": "Not suitable for this site", "title": "Pthread_create function in C11", "body": "<p>I'm trying to create a <code>pthread</code> with <code>Pthread_create</code> :</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n\nvoid *worker(void *arg) {\n    return NULL;\n}\n\nint main(int argc, char *argv[])\n{\n    pthread_t p1, p2;\n\n    Pthread_create(&amp;p1, NULL, worker, NULL);\n    Pthread_create(&amp;p2, NULL, worker, NULL);\n\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>clang -Wall -std=c11 -pthread thread.c -o thread</p>\n</blockquote>\n\n<p>Undefined symbols for architecture x86_64: <code>\"_Pthread_create\"</code>:</p>\n\n<pre><code>thread.c:13:2: warning: implicit declaration of function 'Pthread_create' is\n      invalid in C99 [-Wimplicit-function-declaration]\n        Pthread_create(&amp;p1, NULL, worker, NULL);\n        ^\n1 warning generated.\nUndefined symbols for architecture x86_64:\n  \"_Pthread_create\", referenced from:\n      _main in thread-3223a1.o\nld: symbol(s) not found for architecture x86_64\nclang-3.8: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Nothing changes after altering to <code>-std=c99</code></p>\n\n<p>What's wrong with my code?</p>\n\n<blockquote>\n  <p>clang --version</p>\n</blockquote>\n\n<pre><code>clang version 3.8.0 (http://llvm.org/git/clang.git 68170291648f0112957a8b3d6912a1a1fed81965) (http://llvm.org/git/llvm.git 92ca4a0cd38e8f17e62ecf6e93a44c8ecf098b12)\nTarget: x86_64-apple-darwin15.3.0\nThread model: posix\n</code></pre>\n\n<p>PS: <strong>I don't want to change to C++</strong> since I'm doing exercise on a book of operating system(UNIX C environment).</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1455110637, "post_id": 35316486, "comment_id": 58341601, "body": "<code>fflush(stdin);</code> is undefined behaviour."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455110767, "post_id": 35316486, "comment_id": 58341708, "body": "Don&#39;t use <i>magic numbers</i>!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1455110826, "post_id": 35316486, "comment_id": 58341752, "body": "<code>char</code> --&gt; <code>unsigned char</code>. Then second loop, <code>for(index=&#39;a&#39;; index &lt; &#39;z&#39;; index++){</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455116853, "post_id": 35316486, "comment_id": 58346154, "body": "Why does code contain <code>if(frequency[index] != 0){</code>?"}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1455118395, "post_id": 35316486, "comment_id": 58347421, "body": "even if fflush(stdin) worked, - which it doesn&#39;t - fgets already has cleared stdin for you."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1455118741, "post_id": 35316486, "comment_id": 58347684, "body": "check out the function isalpha() to determine whether a character is A-Z/a-z use toupper() to convert to upper case then add to your frequency array, seems no point in adding characters outside that range."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1455119236, "post_id": 35316486, "comment_id": 58348094, "body": "@AndersK. &quot;<i>fgets already has cleared stdin for you.</i>&quot; -- What if the input is  greater than 99 characters?"}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1455173491, "post_id": 35316486, "comment_id": 58372940, "body": "@CoolGuy well then it is not cleared but since he doesnt do any additional reading from the keyboard it is still unnecessary."}], "answers": [{"tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": false, "score": 0, "last_activity_date": 1455111293, "creation_date": 1455111293, "answer_id": 35316736, "question_id": 35316486, "link": "https://stackoverflow.com/questions/35316486/frequency-of-characters-in-a-string-that-are-not-part-of-the-string/35316736#35316736", "title": "Frequency of characters in a string that are not part of the string.", "body": "<pre><code>if(frequency[index] != 0){\n        printf(\"%5c%10d\\n\", index, frequency[index]);\n    }\n</code></pre>\n\n<p>You are specifically only printing the counts of characters that appear in your string at least once.  If you don't want to do that, then don't do that.</p>\n"}, {"tags": [], "owner": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "is_accepted": false, "score": 1, "last_activity_date": 1455117981, "creation_date": 1455117981, "answer_id": 35319196, "question_id": 35316486, "link": "https://stackoverflow.com/questions/35316486/frequency-of-characters-in-a-string-that-are-not-part-of-the-string/35319196#35319196", "title": "Frequency of characters in a string that are not part of the string.", "body": "<p>First of all, if you want to print the frequency for every character (including 0-frequency characters), you should not do this: <code>if(frequency[index] != 0)</code>.</p>\n\n<p>If you take that line out, your code will print <em>every</em> character in the extended ASCII code, along with its frequency. As you have asked, you only need to know the frequencies for all the characters between <em>a</em> and <em>z</em>, and probably from <em>A</em> and <em>Z</em> also (I guess you do not need to know how many <em>TABs</em> are in your string, for instance).</p>\n\n<p>To do this, you should replace the conditional statement in your final <code>for</code> loop with something like this:</p>\n\n<pre><code>if(('A' &lt;= index &amp;&amp; index &lt;= 'Z') || ('a' &lt;= index &amp;&amp; index &lt;='z'))\n    printf(\"%5c%10d\\n\", index, frequency[index]);\n</code></pre>\n\n<p>As Sourav Ghosh pointed out, you should also replace <code>char</code> with <code>unsigned char</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1079, "user_id": 1884351, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0ccc73c4be038f1bb08243adc61f5550?s=128&d=identicon&r=PG&f=1", "display_name": "fnisi", "link": "https://stackoverflow.com/users/1884351/fnisi"}, "is_accepted": false, "score": 0, "last_activity_date": 1455702342, "creation_date": 1455702342, "answer_id": 35453045, "question_id": 35316486, "link": "https://stackoverflow.com/questions/35316486/frequency-of-characters-in-a-string-that-are-not-part-of-the-string/35453045#35453045", "title": "Frequency of characters in a string that are not part of the string.", "body": "<p>This question is so similar to what is asked in Exercise 1.14 of KnR C. Below is a slightly modified version of my Exercise1.14 answer, which would the trick for you.</p>\n\n<p>Output of the code is</p>\n\n<pre><code>~/code/KnR/Exercise/Chapter1 % clang a.c             \n~/code/KnR/Exercise/Chapter1 % echo \"hello\" | ./a.out\n'a' -   0.00% - \n'b' -   0.00% - \n'c' -   0.00% - \n'd' -   0.00% - \n'e' -  20.00% - ####################\n'f' -   0.00% - \n'g' -   0.00% - \n'h' -  20.00% - ####################\n'i' -   0.00% - \n'j' -   0.00% - \n'k' -   0.00% - \n'l' -  40.00% - ########################################\n'm' -   0.00% - \n'n' -   0.00% - \n'o' -  20.00% - ####################\n'p' -   0.00% - \n'q' -   0.00% - \n'r' -   0.00% - \n's' -   0.00% - \n't' -   0.00% - \n'u' -   0.00% - \n'v' -   0.00% - \n'w' -   0.00% - \n'x' -   0.00% - \n'y' -   0.00% - \n~/code/KnR/Exercise/Chapter1 % \n</code></pre>\n\n<p>Below is the code. It exploits the fact that each character is an int, and makes use of this fact. The code works for lowercase characters though (can be modified)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/* modified version of KnR Exercise 1.14 */\n#define LOCHAR  97  /* first lowercase character */\n#define HICHAR  122 /* last lowercase character */\n#define SYM     '#' /* symbol to be used in the histogram */\n#define MAX     50  /* value that corresponds to 100% */\n\nint main(){\n    int c, i;\n    float nc, freq;\n    int chars[HICHAR - LOCHAR];\n\n    /* Initialize the array */\n    for (i = 0; i &lt; (HICHAR - LOCHAR); ++i)\n        chars[i]=0;\n\n    nc = freq = 0.0; /* total number of characters */\n\n    /* read the input */\n    while ((c=getchar()) != EOF ){\n        if (c &gt;= LOCHAR &amp;&amp; c &lt;= HICHAR){\n            ++chars[c - LOCHAR];\n            ++nc;\n        }\n    }\n\n    /* print the histogram */\n    for (c = 0; c &lt; (HICHAR - LOCHAR); ++c){\n        freq = ((chars[c] / nc) * 100.0);\n        printf(\"'%c' - %6.2f%% - \",(c + LOCHAR), freq);\n\n        for (i = 0; i &lt; freq; i++)\n            putchar(SYM);\n\n        putchar('\\n');\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13369, "user_id": 1579327, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2672419fe5e9e6d5ce4d03c2e7aae7a2?s=128&d=identicon&r=PG", "display_name": "Paolo", "link": "https://stackoverflow.com/users/1579327/paolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1455703042, "creation_date": 1455703042, "answer_id": 35453323, "question_id": 35316486, "link": "https://stackoverflow.com/questions/35316486/frequency-of-characters-in-a-string-that-are-not-part-of-the-string/35453323#35453323", "title": "Frequency of characters in a string that are not part of the string.", "body": "<p>Just remove the <code>if</code> statement</p>\n\n<pre><code>    if(frequency[index] != 0){\n</code></pre>\n\n<p>As it <strong>excludes</strong> characters that are not part of the string.</p>\n\n<p>Note that the subsequent <code>printf()</code> will print also non-printable characters (ex. the ones in the range 0..31)</p>\n"}], "owner": {"reputation": 29, "user_id": 3566140, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NyTZi.jpg?s=128&g=1", "display_name": "Akade", "link": "https://stackoverflow.com/users/3566140/akade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1455703042, "creation_date": 1455110606, "question_id": 35316486, "link": "https://stackoverflow.com/questions/35316486/frequency-of-characters-in-a-string-that-are-not-part-of-the-string", "title": "Frequency of characters in a string that are not part of the string.", "body": "<p>I am required to print the frequency of characters in a string, and I have developed a code for it. However, my code will just display the characters that are part of the string. But I want it to display all of the characters from a to z\nfor example:</p>\n\n<pre><code>hello.\nA    0\nB    0\nC    0\nD    0\nE    1 \n</code></pre>\n\n<p>and so on. </p>\n\n<p>Anyhow, this is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    char string[100];\n    int index, frequency[256] = {0};\n    printf(\"Enter a String\\n\");\n    fgets(string,99,stdin);\n    fflush(stdin);\n    for(index=0; string[index] != '\\0'; index++){\n        frequency[string[index]]++;\n    }\n\n    printf(\"\\nCharacter   Frequency\\n\");\n    for(index=0; index &lt; 256; index++){\n        if(frequency[index] != 0){\n            printf(\"%5c%10d\\n\", index, frequency[index]);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1455113052, "post_id": 35316455, "comment_id": 58343325, "body": "When you use a GUI toolkit like GTK+, you would be using events, timeouts, and idle callbacks, not writing code that runs straight through like you would in a console application. What do <code>packet</code> and <code>LookForWin()</code> do?"}, {"owner": {"reputation": 29, "user_id": 3805155, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6fc7fdda57b517681394e47ca0089ca4?s=128&d=identicon&r=PG&f=1", "display_name": "Darknez", "link": "https://stackoverflow.com/users/3805155/darknez"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1455114740, "post_id": 35316455, "comment_id": 58344623, "body": "@andlabs Packet is a structure that contains informations about game state etc.  LookForWin() is simply a function checking if bot have already won. I managed to do this other way already, but i cannot make it refresh by every iteration of loop. Instead it refreshes randomly."}], "answers": [{"tags": [], "owner": {"reputation": 912, "user_id": 3700391, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e333f3e468da8013cd17b908d4d675f0?s=128&d=identicon&r=PG&f=1", "display_name": "mame98", "link": "https://stackoverflow.com/users/3700391/mame98"}, "is_accepted": false, "score": 0, "last_activity_date": 1455291554, "last_edit_date": 1455291554, "creation_date": 1455284187, "answer_id": 35364010, "question_id": 35316455, "link": "https://stackoverflow.com/questions/35316455/gtk-after-main-loop/35364010#35364010", "title": "GTK after main loop", "body": "<p>So in GTK you have events,signals and timeouts.</p>\n\n<p>So if you want to call a function every x milliseconds, you should use </p>\n\n<pre><code>g_timeout_add (guint interval,\n               GSourceFunc function,\n               gpointer data);\n</code></pre>\n\n<p>Just look into the <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-timeout-add\" rel=\"nofollow\" title=\"official documentation\">official documentation</a> for more details about this function.</p>\n\n<p><code>gtk_main</code> will run until you call <code>gtk_main_quit();</code> but you should only do this at the end of your application.</p>\n"}, {"tags": [], "owner": {"reputation": 102099, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": false, "score": 1, "last_activity_date": 1455388328, "creation_date": 1455388328, "answer_id": 35383727, "question_id": 35316455, "link": "https://stackoverflow.com/questions/35316455/gtk-after-main-loop/35383727#35383727", "title": "GTK after main loop", "body": "<p>As andlabs and mame98 pointed out, GUI toolkits expect your logic to be executed from callbacks that carry out a small amount of work and quickly relinquish control to the main loop. There is no \"work after main loop\", because the end of the main loop typically coincides application's exit.</p>\n\n<p>Restructuring existing code to an event-driven style can be very hard when working with a large legacy code base. Fortunately, there is another option.</p>\n\n<p>You can launch a thread (<a href=\"https://developer.gnome.org/glib/stable/glib-Threads.html#g-thread-new\" rel=\"nofollow\">using glib</a> to do it portably) and run your game logic in that thread, separate from the GUI thread. Inside the game thread, use <code>gdk_threads_add_idle()</code> to occasionally inform your GUI of changes. That should allow both the game code and the GUI thinking each runs the show.</p>\n"}], "owner": {"reputation": 29, "user_id": 3805155, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6fc7fdda57b517681394e47ca0089ca4?s=128&d=identicon&r=PG&f=1", "display_name": "Darknez", "link": "https://stackoverflow.com/users/3805155/darknez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455388328, "creation_date": 1455110513, "question_id": 35316455, "link": "https://stackoverflow.com/questions/35316455/gtk-after-main-loop", "title": "GTK after main loop", "body": "<p>I have a problem as i cannot find proper solution in reference for making something happen after gtk_main(). This is my function for a simple bot that solves game but it won't run because it's not even starting. If i place gtk_main() after bot is done i will get a solved game so it works. Is there a function in gtk that lets me operate as i want in the gtk main loop? Here is the code:</p>\n\n<pre><code>void RunBot(struct Packet *packet){\ngtk_main();\nwhile(LookForWin(packet)==0){\n    packet-&gt;data-&gt;color_number=ColorPredictor(packet);\n    CheckColors(packet);\n    RefreshBoard(packet-&gt;essentials,board,colors,BoardButtons,Board);\n    printf(\"Running..\\n\");\n}   }\n</code></pre>\n\n<p>Thanks in advance :)</p>\n"}, {"tags": ["c", "linux", "wait", "system-calls", "waitpid"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1455110463, "post_id": 35316374, "comment_id": 58341470, "body": "Performance perhaps? Sometimes you do not want to get resource usage. Also better to have a function just do one thing."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1455110625, "post_id": 35316374, "comment_id": 58341597, "body": "@EdHeal, But there is a way to use <code>wait4()</code> without getting <code>rusage</code>. One has to make the last parameter <code>NULL</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1455123235, "post_id": 35319934, "comment_id": 58351211, "body": "I think the reasons mentioned can also be achieved using <code>wait()</code> variants."}], "tags": [], "owner": {"reputation": 735, "user_id": 2568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/2aDtk.jpg?s=128&g=1", "display_name": "dear_tzvi", "link": "https://stackoverflow.com/users/2568434/dear-tzvi"}, "is_accepted": false, "score": 1, "last_activity_date": 1455119952, "creation_date": 1455119952, "answer_id": 35319934, "question_id": 35316374, "link": "https://stackoverflow.com/questions/35316374/why-did-wait4-get-replaced-by-waitpid/35319934#35319934", "title": "why did wait4() get replaced by waitpid()", "body": "<p>Taken from <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/wait.html\" rel=\"nofollow\">http://pubs.opengroup.org/onlinepubs/009695399/functions/wait.html</a>:</p>\n\n<pre><code>The waitpid() function shall be equivalent to wait() if the pid argument is \n(pid_t)-1 and the options argument is 0. Otherwise, its behavior shall be \nmodified by the values of the pid and options arguments\n</code></pre>\n\n<p>so the waitpid() function is provided for three reasons:</p>\n\n<pre><code>To support job control\n\nTo permit a non-blocking version of the wait() function\n\nTo permit a library routine, such as system() or pclose(), to wait for its \nchildren without interfering with other terminated children for which the \nprocess has not waited\n</code></pre>\n\n<p>And it also include all previous abilities of wait() as explained</p>\n"}, {"comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1455194954, "post_id": 35323028, "comment_id": 58386754, "body": "retained? Is <code>waitpid()</code> also an old system call or was it introduced later?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1455203214, "post_id": 35323028, "comment_id": 58392861, "body": "Can&#39;t remember exactly but both are old. If think waitpid is a litlle bit more recent than wait3/wait4??? It was very common at this time that BSD leads innovation, POSIX standardization was a difficult task..."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 3, "last_activity_date": 1455128551, "creation_date": 1455128551, "answer_id": 35323028, "question_id": 35316374, "link": "https://stackoverflow.com/questions/35316374/why-did-wait4-get-replaced-by-waitpid/35323028#35323028", "title": "why did wait4() get replaced by waitpid()", "body": "<p>It is a matter of standardization and history. <code>wait4</code> is a 4.3BSD system call, but POSIX.1 retained <code>waitpid</code>.</p>\n"}], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1455128551, "creation_date": 1455110300, "last_edit_date": 1455110948, "question_id": 35316374, "link": "https://stackoverflow.com/questions/35316374/why-did-wait4-get-replaced-by-waitpid", "title": "why did wait4() get replaced by waitpid()", "body": "<p>I was going through the documentation of the system call <a href=\"http://man7.org/linux/man-pages/man2/wait4.2.html\" rel=\"noreferrer\"><code>wait4()</code></a> and in its man page it is written</p>\n\n<blockquote>\n  <p>These functions are obsolete; use <code>waitpid(2)</code> or <code>waitid(2)</code> in new programs.</p>\n</blockquote>\n\n<p>So, I went through the documentation of <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"noreferrer\"><code>waitpid()</code></a> and I saw that there is a difference between the two.</p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"noreferrer\"><code>waitpid()</code></a> does the same things as <a href=\"http://man7.org/linux/man-pages/man2/wait4.2.html\" rel=\"noreferrer\"><code>wait4()</code></a>, but <a href=\"http://man7.org/linux/man-pages/man2/wait4.2.html\" rel=\"noreferrer\"><code>wait4()</code></a>, according to the man page,</p>\n\n<blockquote>\n  <p>additionally return resource usage information about the child in the structure pointed to by <code>rusage</code>.</p>\n</blockquote>\n\n<p>The two system calls are defined as follows</p>\n\n<pre><code>pid_t wait4(pid_t pid, int *status, int options, struct rusage *rusage);\n\npid_t waitpid(pid_t pid, int *status, int options);\n</code></pre>\n\n<p>Now, I also read that there is a another system call that does that extra job of getting the <code>rusage</code> of the child and that is <a href=\"http://man7.org/linux/man-pages/man2/getrusage.2.html\" rel=\"noreferrer\"><code>getrusage()</code></a>.</p>\n\n<p>So, I can understand that what <code>wait4()</code> could do, one can do the same thing by using a combination of <code>waitpid()</code> and <code>getrusage()</code>.</p>\n\n<hr>\n\n<p>But, what I am not understanding is, there is always a strong reason for making a system call obsolete. But in this case it feels that the functionality has been split.</p>\n\n<ul>\n<li>If I want to use the combination of <code>waitpid()</code> and <code>getrusage()</code>, I\nhave to check the return values twice, which was not the case for\n<code>wait4()</code>.</li>\n<li>Additionally one can use <code>wait4()</code> to get <code>rusage</code> of a specific\nchild, but <code>waitpid()</code> would gives <code>rusage</code> of all its children\ntogether (if used with <code>RUSAGE_CHILDREN</code>). That sounds like extra overhead if there are more then few child processes.</li>\n</ul>\n\n<p>Why was <code>wait4()</code> made obsolete? It seems like it made things harder.</p>\n"}, {"tags": ["c", "input", "scanf"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1455110217, "post_id": 35316219, "comment_id": 58341299, "body": "If your input format is line-oriented, it&#39;s usually way better to read in entire lines (using <code>fgets()</code>), then parse that once in memory. This removes hidden complexity due to the <code>FILE *</code> stream&#39;s state."}], "answers": [{"comments": [{"owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "edited": false, "score": 0, "creation_date": 1455111507, "post_id": 35316290, "comment_id": 58342268, "body": "That modification doesn&#39;t work, because now it allows for input like <code>a 1 a 2</code>. However, <code>fgets()</code> did the trick."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "edited": false, "score": 1, "creation_date": 1455111601, "post_id": 35316290, "comment_id": 58342358, "body": "@Dunno 1) that is why <code>scanf()</code> returns a value 2) Always try to stick to <code>fgets()</code>, much, much better."}, {"owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "edited": false, "score": 0, "creation_date": 1455111894, "post_id": 35316290, "comment_id": 58342549, "body": "Will do from now on, didn&#39;t even know it was there."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1455110056, "creation_date": 1455110056, "answer_id": 35316290, "question_id": 35316219, "link": "https://stackoverflow.com/questions/35316219/how-to-read-data-of-this-format/35316290#35316290", "title": "How to read data of this format?", "body": "<p>As I can see, you need to remove the <code>\\n</code> from the <code>scanf()</code> format string, like</p>\n\n<pre><code> scanf(\"%d\", &amp;args[0]);\n</code></pre>\n\n<p>to read only a single <code>int</code>.</p>\n\n<p>That said, in the second case, you need to modify like</p>\n\n<pre><code>filled = scanf(\"%d %d %d\", &amp;args[0], &amp;args[1], &amp;args[2]);\n</code></pre>\n\n<p>However, a more elegant and robust solution would be to use <code>fgets()</code> to read a complete line at a time and then tokenize as per the requirement.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455116563, "post_id": 35316703, "comment_id": 58345949, "body": "This approach will not work well.  On the next iteration of <code>scanf(&quot;%c&quot;, &amp;cmd);</code>, that will make <code>cmd</code> --&gt; <code>&#39;\\n&#39;</code>."}], "tags": [], "owner": {"reputation": 9, "user_id": 5903060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1081d3cacf21ff4db179906ddd74c35f?s=128&d=identicon&r=PG&f=1", "display_name": "RussK2txb", "link": "https://stackoverflow.com/users/5903060/russk2txb"}, "is_accepted": false, "score": 0, "last_activity_date": 1455115577, "last_edit_date": 1455115577, "creation_date": 1455111206, "answer_id": 35316703, "question_id": 35316219, "link": "https://stackoverflow.com/questions/35316219/how-to-read-data-of-this-format/35316703#35316703", "title": "How to read data of this format?", "body": "<pre><code>scanf(\"%d %d %d\\n\", args, args+1, args+2);\n</code></pre>\n\n<p>Remove the <code>\\n</code> and it will work as you expect. When you put the <code>\\n</code> in the format specification that tells the program to read in a <code>\\n</code>. Thus the program does not see the enter key that you must enter at the end of the data.  If you don't type the enter key at the end scanf will continue to read input indefinitely, but not store anything past the given format specifier.</p>\n\n<p>Russ</p>\n\n<p>Edit: The previous answer is correct that a more standard way is to use <code>&amp;args[0]</code>, <code>&amp;args[1]</code>, etc, but the way you wrote it will work because c treats an array name as a pointer.</p>\n"}], "owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 35316290, "answer_count": 2, "score": 1, "last_activity_date": 1455115577, "creation_date": 1455109796, "last_edit_date": 1455111285, "question_id": 35316219, "link": "https://stackoverflow.com/questions/35316219/how-to-read-data-of-this-format", "title": "How to read data of this format?", "body": "<p>Each line in my input starts with a letter and then depending on the letter I have to either read exactly 1 number, or any amount of numbers between 0 and 3. Here's how I tried to do this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int args[3] = { 0, 0, 0 };\n    char cmd;\n    int filled;\n\n    for(;;)\n    {\n        scanf(\"%c\", &amp;cmd);\n        switch(cmd)\n        {\n            case 'a':\n                scanf(\"%d\\n\", args);\n                break;\n            case 'b':\n                filled = scanf(\"%d %d %d\\n\", args, args+1, args+2);\n                printf(\"Read %d\\n\", filled);\n                break;\n        }\n        printf(\"Args is: %d %d %d\\n\", args[0], args[1], args[2]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The problem with <code>a</code> is, after I write <code>a 1</code>, for some reason it waits for 1 more character, for example <code>a 1 2</code> outputs \"Args is: 1 0 0\", and it does so twice. I'm completely confused as to what's happening here.</p>\n\n<p>The option <code>b</code> doesn't work either, my program is waiting for exactly 4 numbers (4, not 3, same problem as above).</p>\n"}, {"tags": ["c++", "c", "linux", "root", "administrator"], "comments": [{"owner": {"reputation": 686, "user_id": 2277221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cc7076b6e53b6d512b61ba2acd59eb?s=128&d=identicon&r=PG", "display_name": "TNW", "link": "https://stackoverflow.com/users/2277221/tnw"}, "edited": false, "score": 3, "creation_date": 1455108757, "post_id": 35315772, "comment_id": 58340251, "body": "There&#39;s <code>su -c</code>. If there&#39;s no <code>su</code>, sit down and cry."}, {"owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "reply_to_user": {"reputation": 686, "user_id": 2277221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89cc7076b6e53b6d512b61ba2acd59eb?s=128&d=identicon&r=PG", "display_name": "TNW", "link": "https://stackoverflow.com/users/2277221/tnw"}, "edited": false, "score": 0, "creation_date": 1455109860, "post_id": 35315772, "comment_id": 58341033, "body": "Phew, I didn&#39;t realise that duplicates would get downvoted."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1455109994, "post_id": 35315772, "comment_id": 58341132, "body": "I didn&#39;t downvote but some others maybe did ..."}], "answers": [{"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 0, "last_activity_date": 1455109743, "last_edit_date": 1495541416, "creation_date": 1455109743, "answer_id": 35316193, "question_id": 35315772, "link": "https://stackoverflow.com/questions/35315772/how-do-i-programmatically-launch-a-program-and-run-it-with-root-privileges-on-li/35316193#35316193", "title": "How do I programmatically launch a program and run it with root privileges on Linux?", "body": "<p>As the <a href=\"https://stackoverflow.com/questions/2483755/how-to-programmatically-gain-root-privileges\">How to programmatically gain root privileges?</a> answers state, this is commonly done in Linux by using sticky bit and calls to setuid/setgid. In general one possibility is to run the process initially under root and then change the privileges by setuid/setgid as needed.</p>\n"}], "owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 0, "closed_date": 1455109787, "answer_count": 1, "score": -2, "last_activity_date": 1455109743, "creation_date": 1455108561, "last_edit_date": 1495540463, "question_id": 35315772, "link": "https://stackoverflow.com/questions/35315772/how-do-i-programmatically-launch-a-program-and-run-it-with-root-privileges-on-li", "closed_reason": "Duplicate", "title": "How do I programmatically launch a program and run it with root privileges on Linux?", "body": "<p>I'm working on an installer program which potentially asks the user for the right to perform administrative actions (e.g. writing to the global program files directory and changing registry keys).</p>\n\n<p>Windows <a href=\"https://stackoverflow.com/questions/11586139/how-to-run-application-which-requires-admin-rights-from-one-that-doesnt-have-th\">allows using <code>runas</code></a> and OS X has <a href=\"https://developer.apple.com/library/mac/documentation/Security/Reference/authorization_ref/index.html#//apple_ref/c/func/AuthorizationExecuteWithPrivileges\" rel=\"nofollow noreferrer\"><code>AuthorizationExecuteWithPrivileges</code></a>. Linux doesn't seem to feature anything like this.</p>\n\n<p>I considered implementing this functionality by calling out to <code>sudo</code>, but that has a number of downsides:</p>\n\n<ul>\n<li>It's not always installed by default.</li>\n<li>Even if it's installed, it may fail if the current user is not part of the 'sudoers' group.</li>\n<li>The password prompt differs between <code>sudo</code> versions (sometimes the <code>p</code> in <code>password:</code> is upper case).</li>\n<li><code>sudo</code> output is affected by the system language.</li>\n</ul>\n\n<p>I could overcome the last two items, but the first two are kind of showstoppers. I wonder - are there other common approaches to implement this for Linux?</p>\n"}, {"tags": ["c", "gcc", "clang"], "comments": [{"owner": {"reputation": 580, "user_id": 2693890, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/821b5e56bae1667f62a200936e878b9e?s=128&d=identicon&r=PG&f=1", "display_name": "kpdev", "link": "https://stackoverflow.com/users/2693890/kpdev"}, "edited": false, "score": 0, "creation_date": 1455107885, "post_id": 35315442, "comment_id": 58339603, "body": "I got &#39;minus&#39; for this question. Could you please comment it - it is very simple question, or something else? I really don&#39;t know how to change my compiler from gcc to clang, just remove this option and thats it?"}], "answers": [{"comments": [{"owner": {"reputation": 580, "user_id": 2693890, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/821b5e56bae1667f62a200936e878b9e?s=128&d=identicon&r=PG&f=1", "display_name": "kpdev", "link": "https://stackoverflow.com/users/2693890/kpdev"}, "edited": false, "score": 0, "creation_date": 1455231890, "post_id": 35345243, "comment_id": 58410921, "body": "Seems to be yes, just removing, it is kind a &quot;target-specific flag&quot; <a href=\"https://gcc.gnu.org/ml/gcc-patches/2014-09/msg02515.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/ml/gcc-patches/2014-09/msg02515.html</a>"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1455209341, "creation_date": 1455209341, "answer_id": 35345243, "question_id": 35315442, "link": "https://stackoverflow.com/questions/35315442/analog-gcc-ffshort-double-in-clang/35345243#35345243", "title": "Analog GCC &#39;-ffshort-double&#39; in Clang", "body": "<p>in looking at the web page: <code>https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html#Option-Summary</code>, </p>\n\n<p>there is no <code>-fshort-double</code> option in <code>gcc</code>. </p>\n\n<p>therefore, the option is not valid to begin with.</p>\n\n<p>suggest removing that option when changing to <code>clang</code></p>\n"}], "owner": {"reputation": 580, "user_id": 2693890, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/821b5e56bae1667f62a200936e878b9e?s=128&d=identicon&r=PG&f=1", "display_name": "kpdev", "link": "https://stackoverflow.com/users/2693890/kpdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 35345243, "answer_count": 1, "score": 3, "last_activity_date": 1455209341, "creation_date": 1455107603, "question_id": 35315442, "link": "https://stackoverflow.com/questions/35315442/analog-gcc-ffshort-double-in-clang", "title": "Analog GCC &#39;-ffshort-double&#39; in Clang", "body": "<p>There is an option '-fshort-double' in GCC, Clang does not understand it. Is there some analog of this option for Clang 3.7 ?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 532, "user_id": 1835951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b6a1bc568a2e7da75c55447b84f897f?s=128&d=identicon&r=PG", "display_name": "NiBZ", "link": "https://stackoverflow.com/users/1835951/nibz"}, "edited": false, "score": 1, "creation_date": 1455106387, "post_id": 35314871, "comment_id": 58338490, "body": "Did you take a look at the <code>sched_setaffinity()</code> function ? (<a href=\"http://man7.org/linux/man-pages/man2/sched_setaffinity.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/sched_setaffinity.2.html</a>)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1455106421, "post_id": 35314871, "comment_id": 58338506, "body": "XY problem. A typical Linux system has some 100 to 1000 processes times their threads. Your few threads will not make much difference, but might mess up your system even more. What is your actual problem? What do you mean with &quot;accurate timing&quot; here? (And don&#39;t just provide external links - a question has to be self-contained)."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1455107412, "post_id": 35314871, "comment_id": 58339253, "body": "Why try this test in such a sterile condition that any results you obtain cannot be used to predict anything in the real world?"}, {"owner": {"reputation": 365, "user_id": 4323989, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/73ba2321b3b11ce0f10a4dcfa0236619?s=128&d=identicon&r=PG&f=1", "display_name": "QweryBot", "link": "https://stackoverflow.com/users/4323989/qwerybot"}, "edited": false, "score": 0, "creation_date": 1455108170, "post_id": 35314871, "comment_id": 58339825, "body": "Surely, I&#39;m going to get the same speedup/slowdown percentage no matter how sterile the environment. This way I&#39;m just going to reduce the noise I get in any results. It&#39;s not a point I have considered before, so thanks for asking it."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5069935"}, "is_accepted": true, "score": 1, "last_activity_date": 1455137880, "last_edit_date": 1455137880, "creation_date": 1455136812, "answer_id": 35325455, "question_id": 35314871, "link": "https://stackoverflow.com/questions/35314871/forking-and-running-on-specific-set-of-cpus/35325455#35325455", "title": "Fork()ing and running on specific set of CPUs", "body": "<p>Asking the kernel to associate CPU cores with threads or processes is also known as setting the \"affinity\" between the core and the process/thread.</p>\n\n<p>Under linux, there exists a set of functions that provide this capability.  Take a look at the <a href=\"http://man7.org/linux/man-pages/man3/pthread_setaffinity_np.3.html\" rel=\"nofollow\">manual page</a> for one of the functions...</p>\n\n<pre><code>man pthread_setaffinity_np\n</code></pre>\n\n<p>This family of API calls might be able to give you what you need.\nThat man page has a \"see also\" section that links to the other functions in this family.</p>\n\n<p>Typically with features such as these that deal with kernel process and thread scheduling, it is entirely dependent on what mood the kernel is in at the time as to whether your requests are met or ignored.  Your mileage may very due to system load or the number of available cores.  Even if a system has 16 cores, these features may be disabled in the kernel compilation settings (think virtual machines).  Equally, you may find that there are some additional options that you may be able to add to your kernel to get better results than the defaults.</p>\n"}], "owner": {"reputation": 365, "user_id": 4323989, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/73ba2321b3b11ce0f10a4dcfa0236619?s=128&d=identicon&r=PG&f=1", "display_name": "QweryBot", "link": "https://stackoverflow.com/users/4323989/qwerybot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1437, "favorite_count": 0, "accepted_answer_id": 35325455, "answer_count": 1, "score": 1, "last_activity_date": 1455137880, "creation_date": 1455106182, "last_edit_date": 1455106654, "question_id": 35314871, "link": "https://stackoverflow.com/questions/35314871/forking-and-running-on-specific-set-of-cpus", "title": "Fork()ing and running on specific set of CPUs", "body": "<p>I have a parent process, which I use to spawn a series of child processes, which each run their own program sequentially. Each of these programs change a file over time, I want to read the data from this file and see how it changes as each program runs.</p>\n\n<p>I need two sets of data for this to work, the value of the file at some set interval (I haven't decided on the interval yet), and the time each program takes to run, there are other variables which can influence the execution times of these programs, which I want to see also.</p>\n\n<p>So I figured to get more accurate timing of the child process while still reading from a file I could run them on different cores. I have 8 cores, I would like to run the parent process on 0-3, then fork the child to run on 4-7. I'm not sure if this is possible though within C, and a search around hasn't yielded any answers, which makes me think it isn't.</p>\n\n<p>Within Linux, outside of a program, I can use <code>taskset</code> to do this.</p>\n\n<p>I plan on setting aside 4 of the cores using the kernel parameter isolcpus(). I want as little noise as possible while running the child programs.</p>\n"}, {"tags": ["c", "embedded", "protothread"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 6, "creation_date": 1455105555, "post_id": 35314585, "comment_id": 58337931, "body": "You&#39;re not showing how <code>LC_RESUME(s)</code> is used, which seems to be the root cause (it&#39;s <code>switch</code>ing on an 8-bit value, with <code>case</code> labels that exceed this range)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1455105693, "post_id": 35314585, "comment_id": 58338039, "body": "Please make an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1455105757, "post_id": 35314585, "comment_id": 58338085, "body": "There should never be a reason to write code like this. Use functions instead."}, {"owner": {"reputation": 65, "user_id": 5592536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745ae8b5220ee36f0fa3792d109a777d?s=128&d=identicon&r=PG&f=1", "display_name": "Tweepy", "link": "https://stackoverflow.com/users/5592536/tweepy"}, "edited": false, "score": 3, "creation_date": 1455106632, "post_id": 35314585, "comment_id": 58338667, "body": "Protothread, <a href=\"http://dunkels.com/adam/pt/\" rel=\"nofollow noreferrer\">dunkels.com/adam/pt</a>, by Adam Dunkels, not exactly student&#39;s poor job."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1455107275, "post_id": 35314585, "comment_id": 58339145, "body": "maybe <code>PT_BEGIN(&amp;main_pt);</code> ? BTW: Why not check the preprocessor output?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1455107823, "post_id": 35314585, "comment_id": 58339566, "body": "@Tweepy Sorry, but it looks exactly like a student&#39;s failed job. The whole library is very poorly written. And it reeks of pre-mature optimization by someone who doesn&#39;t understand how compiler function inlining works. The absence of functions doesn&#39;t mean that the stack isn&#39;t used, and the presence of functions doesn&#39;t mean that the stack will be used, that&#39;s nonsense assumptions. This should have been written with compiler switches in a common header, to enforce inlining of all functions that need to be inlined etc."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1455138433, "post_id": 35314585, "comment_id": 58360639, "body": "I&#39;d rather use FreRTOS than this macro overkill. An STM32 has enough resources to run a true multitasking system; stacks are not that large and the Cotex-M is exactly designed to support this kind of OS."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1455226931, "post_id": 35314585, "comment_id": 58408484, "body": "<a href=\"http://www1.coocox.org/index.html\" rel=\"nofollow noreferrer\">CoOS</a> is nice too.  And <a href=\"https://www.micrium.com/downloadcenter/micrium-source-code/\" rel=\"nofollow noreferrer\">uC/OS-ii</a> is free for educational use."}], "owner": {"reputation": 65, "user_id": 5592536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/745ae8b5220ee36f0fa3792d109a777d?s=128&d=identicon&r=PG&f=1", "display_name": "Tweepy", "link": "https://stackoverflow.com/users/5592536/tweepy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455107179, "creation_date": 1455105404, "last_edit_date": 1455107179, "question_id": 35314585, "link": "https://stackoverflow.com/questions/35314585/protothread-call-on-line-greater-than-256-error-case-label-value-exceeds", "title": "Protothread call on __LINE__ greater than 256: error: case label value exceeds", "body": "<p>I use <a href=\"http://dunkels.com/adam/pt/\" rel=\"nofollow\">protothreads</a> on my embedded device (STM32, GCC) as it's lightweight, and saves me to handle a complex state machine by myself.</p>\n\n<p>As my main program grows, a PT_* function is called on a line number greater than 256</p>\n\n<pre><code>struct pt main_pt;\nint main(void)\n{\n    PT_BEGIN(pt);\n    while(true)\n    {\n        /*... 256 lines further*/\n        PT_WAIT_UNTIL(pt, flag);\n        PT_YIELD(pt);\n    }\n    PT_END(pt);\n}\n</code></pre>\n\n<p>And at compile, it throws this error:</p>\n\n<pre><code>main.c: In function 'main':    \nmain.c:256:4: error: case label value exceeds maximum value for type [-Werror]\n    PT_WAIT_UNTIL(pt, flag);\nmain.c:257:4: error: case label value exceeds maximum value for type [-Werror]\n    PT_YIELD(pt);\n</code></pre>\n\n<p>If PT_YIELD or PT_WAIT_UNTIL is placed on a line number lower than 256 it does compile.</p>\n\n<p>Here is snippet for PT_YIELD, PT_WAIT_UNTIL, LC_SET and struct pt:</p>\n\n<pre><code>typedef uint32_t lc_t;\nstruct pt {\n  lc_t lc;\n};\n#define LC_RESUME(s) switch(s) { case 0:\n#define LC_SET(s) s = __LINE__; case __LINE__:\n#define PT_BEGIN(pt) { unsigned int PT_YIELD_FLAG = 1; LC_RESUME((pt)-&gt;lc)\n#define PT_WAIT_UNTIL(pt, condition)            \\\n  do {                      \\\n    LC_SET((pt)-&gt;lc);               \\\n    if(!(condition)) {              \\\n      return PT_WAITING;            \\\n    }                       \\\n  } while(0)\n#define PT_YIELD(pt)                \\\n  do {                      \\\n    PT_YIELD_FLAG = 0;              \\\n    LC_SET((pt)-&gt;lc);               \\\n    if(PT_YIELD_FLAG == 0) {            \\\n      return PT_YIELDED;            \\\n    }                       \\\n  } while(0)\n</code></pre>\n\n<p>Why can't \"case __LINE__:\" exceed 256 as it's store on uint32_t?</p>\n"}, {"tags": ["c", "typedef"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1455105271, "post_id": 35314385, "comment_id": 58337743, "body": "See e.g. <a href=\"http://en.cppreference.com/w/c/language/conversion#Function_to_pointer_conversion\" rel=\"nofollow noreferrer\">this function to pointer conversion reference</a>."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1455105370, "post_id": 35314385, "comment_id": 58337802, "body": "@JoachimPileborg The reference seems incorrect. Surely, a function designator which is operand to the function call operator (<code>()</code>) also does not undergo conversion."}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1455105567, "post_id": 35314385, "comment_id": 58337940, "body": "@FUZxxl: Are you sure? The postfix operator <code>()</code> expects a &quot;pointer to function&quot; as its operand in my version of the C standard."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1455105596, "post_id": 35314385, "comment_id": 58337961, "body": "@undur_gongor Interesting. You never stop learning."}], "answers": [{"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 3, "last_activity_date": 1455105019, "creation_date": 1455105019, "answer_id": 35314434, "question_id": 35314385, "link": "https://stackoverflow.com/questions/35314385/typedef-function-pointer-differences-between-use-or-not-use-it/35314434#35314434", "title": "Typedef function pointer - differences between use &amp; or not use it", "body": "<p>In the C language, functions are implicitly converted to function pointers in most contexts. Thus you see no difference between <code>f[0] = foo</code> and <code>f[1] = &amp;foo</code>. I prefer the latter convention, but really, both are equally fine.</p>\n"}], "owner": {"reputation": 369, "user_id": 5769865, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/baded7dfc328b549f7756638b83f5da8?s=128&d=identicon&r=PG&f=1", "display_name": "untitled", "link": "https://stackoverflow.com/users/5769865/untitled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1455105435, "accepted_answer_id": 35314434, "answer_count": 1, "score": 1, "last_activity_date": 1455105019, "creation_date": 1455104869, "question_id": 35314385, "link": "https://stackoverflow.com/questions/35314385/typedef-function-pointer-differences-between-use-or-not-use-it", "closed_reason": "Duplicate", "title": "Typedef function pointer - differences between use &amp; or not use it", "body": "<p>Using typedef for functions, like in the following example, are there any differences between using the address of the function or only the function?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint foo(int i){return i+1;}\n\ntypedef int(*mytype[2])(int);\n\nint main(void)\n{\n    mytype f;\n\n    f[0] = foo;\n    f[1] = &amp;foo;\n    printf(\"%d %d\", f[0](5), f[0](6));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c", "jna"], "answers": [{"tags": [], "owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "is_accepted": true, "score": 3, "last_activity_date": 1455117659, "creation_date": 1455117659, "answer_id": 35319066, "question_id": 35314075, "link": "https://stackoverflow.com/questions/35314075/how-do-i-properly-initialize-array-fields-within-a-structure-in-jna/35319066#35319066", "title": "How do I properly initialize array fields within a `Structure` in JNA?", "body": "<p>When defining <code>Structure</code> fields, JNA defaults to by value semantics, so you can just use <code>Structure</code>.  </p>\n\n<p>It is up to you to initialize any array fields within your <code>Structure</code>, since JNA has no way of knowing how big you want them to be.</p>\n\n<pre><code>public class SmallStruct extends Structure {\n   public int a[] = new int[128];\n}\n</code></pre>\n\n<p>Note that the contents of those arrays will not by synched with native memory until you call <code>Structure.read()</code> or <code>Structure.write()</code> (these calls are performed automatically by JNA when you call a native method which uses a <code>Structure</code> argument).</p>\n"}], "owner": {"reputation": 91, "user_id": 5740790, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10153942547409925/picture?type=large", "display_name": "Saar Arbel", "link": "https://stackoverflow.com/users/5740790/saar-arbel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 35319066, "answer_count": 1, "score": 2, "last_activity_date": 1455117701, "creation_date": 1455104069, "last_edit_date": 1455117701, "question_id": 35314075, "link": "https://stackoverflow.com/questions/35314075/how-do-i-properly-initialize-array-fields-within-a-structure-in-jna", "title": "How do I properly initialize array fields within a `Structure` in JNA?", "body": "<p>I have a Struct in C i want to represent in java with JNA:</p>\n\n<pre><code>typedef struct SmallStrcut {\n     unit32_t a[128];\n}\n\ntypedef struct BigStruct {\n     SmallStruct b;\n     SmallStruct c;\n}\n</code></pre>\n\n<p>And the following function:</p>\n\n<pre><code>void getBigStruct(BigStruct bigStruct);\n</code></pre>\n\n<p>I have the following Structs in Java: <br> SmallStruct:</p>\n\n<pre><code>public class SmallStruct extends Structure {\n      public static ByValue extends SmallStruct implements Structure.ByValue {\n           public int a[];\n           public ByValue() {}\n      }\n}\n</code></pre>\n\n<p>BigStruct:</p>\n\n<pre><code>public class BigStruct extends Structure {\n        public static ByValue extends BigStruct implements Structure.ByValue {\n               public SmallStruct b;\n               public SmallStruct c;\n               public ByValue() {}\n          }\n</code></pre>\n\n<p>This is my main:</p>\n\n<pre><code>BigStruct.ByValue big = new BigStruct.ByValue();\nSmallStruct.ByValue x1 = new SmallStruct.ByValue();\nx1.a = new int[128];\nx1.a[0] = 123;\nSmallStruct.ByValue x2 = new SmallStruct.ByValue();\nx2.a = new int[128];\nx2.a[0] = 456;\n\nbig.b = x1;\nbig.c = x2;\n</code></pre>\n\n<p>And when i debug this code i watched the BigStruct object and only the\nb member is initialized. c array is all zero. <br>\nIts like the first SmallStruct ovverides the second SmallStruct memory area. <br> <br></p>\n\n<p>How can i transfer the two SmallStruct to construct the BigStruct properly ?</p>\n"}, {"tags": ["c", "gcc", "include", "linker-errors", "undefined-reference"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 10, "creation_date": 1455102830, "post_id": 35313574, "comment_id": 58336057, "body": "It&#39;s a <b>linker</b> error and not a <b>compilation</b> error, you don&#39;t link with the flowcloud library."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455103623, "post_id": 35313574, "comment_id": 58336617, "body": "Show how you compile your code."}, {"owner": {"reputation": 168, "user_id": 5907840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c56b437ac7eeb0ba33f554fb660a9646?s=128&d=identicon&r=PG&f=1", "display_name": "uhsl_m", "link": "https://stackoverflow.com/users/5907840/uhsl-m"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455103714, "post_id": 35313574, "comment_id": 58336675, "body": "<code>gcc -Wall test.c -o hello</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1455103872, "post_id": 35313574, "comment_id": 58336774, "body": "You probably need something as &#39;gcc -Wall <b>-lflow\\flow.a</b> test.c -o hello&#39;, where <b>flow.a</b> is your library (not sure about the flow.a filename, look in the flow directory and/or read the documentation of the flow library."}, {"owner": {"reputation": 168, "user_id": 5907840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c56b437ac7eeb0ba33f554fb660a9646?s=128&d=identicon&r=PG&f=1", "display_name": "uhsl_m", "link": "https://stackoverflow.com/users/5907840/uhsl-m"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455104473, "post_id": 35313574, "comment_id": 58337184, "body": "Thank you, I linked the .so file"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1455121304, "post_id": 35313574, "comment_id": 58349743, "body": "@MichaelWalz: The library needs to be specified <i>after</i> the object needing it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1455121874, "post_id": 35313574, "comment_id": 58350147, "body": "@alk, right, I&#39;m not used to Linux, therefore I wrote &quot;something as&quot;. But apparently the OP understood what to do."}], "answers": [{"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": true, "score": 2, "last_activity_date": 1455104970, "creation_date": 1455104970, "answer_id": 35314419, "question_id": 35313574, "link": "https://stackoverflow.com/questions/35313574/undefined-reference-to-function-yet-the-header-is-included/35314419#35314419", "title": "Undefined reference to &#39;function&#39; yet the header is included", "body": "<p>You are getting a linker error. When compiling with gcc, you need to also specifiy the library you want to link to in addition to just using the proper #include 's.</p>\n\n<p>The syntax for compiling with gcc is</p>\n\n<pre><code>$ gcc [options] [source files] [object files] [-Ldir] -llibname [-o outfile]\n</code></pre>\n\n<p>As you can see you can link the library by adding <code>-l&lt;name&gt;</code> to your command string.</p>\n"}], "owner": {"reputation": 168, "user_id": 5907840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c56b437ac7eeb0ba33f554fb660a9646?s=128&d=identicon&r=PG&f=1", "display_name": "uhsl_m", "link": "https://stackoverflow.com/users/5907840/uhsl-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "closed_date": 1455121246, "accepted_answer_id": 35314419, "answer_count": 1, "score": -1, "last_activity_date": 1455120965, "creation_date": 1455102699, "last_edit_date": 1455120965, "question_id": 35313574, "link": "https://stackoverflow.com/questions/35313574/undefined-reference-to-function-yet-the-header-is-included", "closed_reason": "Duplicate", "title": "Undefined reference to &#39;function&#39; yet the header is included", "body": "<p>I am playing around with the ci20 and <a href=\"http://flow.imgtec.com/developers/\" rel=\"nofollow\">flowcloud</a>. I have downloaded their c library/sdk and have included the header.</p>\n\n<p>The program is simply:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;flow/flowcore.h&gt;\n\nint main (int argc, char*argv[])\n{\n    printf(\"hello\");\n    if(FlowCore_Initialise()) printf(\"init\");\n    return (0);\n}\n</code></pre>\n\n<p>but on compilation <code>gcc -Wall test.c -o hello</code> I get this error: </p>\n\n<pre><code>/tmp/cch4kocL.o: In function `main':\ntest.c:(.text+0x40): undefined reference to `FlowCore_Initialise'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I am not 100% sure what is going on here.</p>\n"}, {"tags": ["c", "function", "ascii", "uart"], "comments": [{"owner": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "edited": false, "score": 1, "creation_date": 1455104752, "post_id": 35313491, "comment_id": 58337345, "body": "You&#39;re not checking the return code of getch(), are you sure its not returning -1? Is there a way to debug that, maybe toggle an LED?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455105701, "post_id": 35313491, "comment_id": 58338047, "body": "<code>return ((int) c);</code> - the cast is useless, as you already return <code>int</code>. Every cast weakens the alread weak type checking in C. So general advise is to cast only iff 1) The cast is necessary 2) You understand <b>all</b> implications of the cast and 3) accept them <b>fully</b>."}], "answers": [{"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 1, "last_activity_date": 1455104501, "creation_date": 1455104501, "answer_id": 35314237, "question_id": 35313491, "link": "https://stackoverflow.com/questions/35313491/do-i-need-to-convert-ascii-to-uint8-t-to-write-and-display-over-uart-putty/35314237#35314237", "title": "Do I need to convert ascii to uint8_t to write and display over uart (putty)", "body": "<p>The type <code>uint8_t</code> is a typedef of <code>unsigned char</code>, and it is required to have the same layout as a <code>signed char</code> or a plain <code>char</code>.</p>\n\n<p>So, you can freely cast between <code>uint8_t</code> and <code>char</code> or between <code>uint8_t*</code> and <code>char*</code>, and everything will just work.</p>\n\n<p>However, you cannot cast between <code>int*</code> and <code>uint8_t*</code>, because the base types will be of different size.</p>\n\n<p>My advice would be to write something like:</p>\n\n<pre><code>void putcchar(uint8_t c) {\n  ti_uart_write_buffer(TI_UART_0, &amp;c, 1);\n}\n</code></pre>\n\n<p>And then call it directly:</p>\n\n<pre><code>int l = getch();\nputcchar(l);\n</code></pre>\n\n<p>Note that <code>getch()</code> returns an <code>int</code> instead of a <code>char</code> just to be able to return <code>EOF</code>, so the cast to <code>char</code> will be safe <em>unless</em> it is <code>EOF</code>. You may want to add:</p>\n\n<pre><code>int l = getch();\nif (l == EOF) break;\nputcchar(l);\n</code></pre>\n\n<p>This is true as long as you consider your <code>char/uint8_t</code> values as binary bytes or ASCII characters. If you happen to have a non ASCII characters (e.g. <code>'\u00e9'</code>) then you'd need to consider the character encoding.</p>\n\n<p><strong>PS</strong>: I'm assuming you are using a <em>normal</em> architecture for your program, that is the byte is 8 bits long and the character encoding is ASCII based. Since you are using Putty, you are probably on MS-Windows, so I'm pretty safe here.</p>\n"}], "owner": {"reputation": 153, "user_id": 5649409, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/24e9bf9925ce1fa296dd037cbb117edc?s=128&d=identicon&r=PG&f=1", "display_name": "ultrasonic bananna", "link": "https://stackoverflow.com/users/5649409/ultrasonic-bananna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1232, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455123482, "creation_date": 1455102438, "last_edit_date": 1455123482, "question_id": 35313491, "link": "https://stackoverflow.com/questions/35313491/do-i-need-to-convert-ascii-to-uint8-t-to-write-and-display-over-uart-putty", "title": "Do I need to convert ascii to uint8_t to write and display over uart (putty)", "body": "<p>I've a sensor connected on UART to an mcu. The sensor outputs ascii characters. Below are my functions to read from the uart (the sensor) and write from the uart (to my computer over putty). </p>\n\n<p>My question is, do I need to convert the ascii characters to be of type <code>uint8_t</code> to write over the uart as that is what putchar() requires? There is noting being displayed in putty. </p>\n"}, {"tags": ["c", "linux", "bash"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455101694, "post_id": 35313179, "comment_id": 58335324, "body": "What permissions are on the file?"}, {"owner": {"reputation": 33, "user_id": 5907743, "user_type": "registered", "profile_image": "https://graph.facebook.com/376308885889134/picture?type=large", "display_name": "Talha", "link": "https://stackoverflow.com/users/5907743/talha"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455101852, "post_id": 35313179, "comment_id": 58335429, "body": "@MartinJames really, i don&#39;t know ,what can i type to know??"}, {"owner": {"reputation": 33, "user_id": 5907743, "user_type": "registered", "profile_image": "https://graph.facebook.com/376308885889134/picture?type=large", "display_name": "Talha", "link": "https://stackoverflow.com/users/5907743/talha"}, "reply_to_user": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "edited": false, "score": 0, "creation_date": 1455101941, "post_id": 35313179, "comment_id": 58335495, "body": "@robin.koch I&#39;ve tried it before but nothing!!"}, {"owner": {"reputation": 1233, "user_id": 2560990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b42b19b1b40ef800b3f0ded4adde9de?s=128&d=identicon&r=PG", "display_name": "robin.koch", "link": "https://stackoverflow.com/users/2560990/robin-koch"}, "edited": false, "score": 0, "creation_date": 1455102082, "post_id": 35313179, "comment_id": 58335603, "body": "if you still get permission denied, you are running the terminal with a user different from the user that compiled the program. adjust the owner or use chmod a+x ./demo to grant execution permission to everyone on your system."}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1455102418, "post_id": 35313179, "comment_id": 58335787, "body": "Post the output of <code>file .&#47;demo</code> after you&#39;ve successfully compiled <code>demo.c</code>."}, {"owner": {"reputation": 33, "user_id": 5907743, "user_type": "registered", "profile_image": "https://graph.facebook.com/376308885889134/picture?type=large", "display_name": "Talha", "link": "https://stackoverflow.com/users/5907743/talha"}, "edited": false, "score": 0, "creation_date": 1455102865, "post_id": 35313179, "comment_id": 58336082, "body": "but i used to get a green executable file after typing <code>gcc demo.c -o demo</code> but now i get a normal file. When i try to execute this file i get <code>bash: .&#47;dem: Permission denied</code> when i type  <code>chmod a+x .&#47;demo</code> i got nothing (i should get <code>Hello! This is a test prgoram.</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455105817, "post_id": 35313179, "comment_id": 58338133, "body": "Don ot add tags for unrelated languages! C++ and C are <b>different</b> languages!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455105979, "post_id": 35313179, "comment_id": 58338221, "body": "Don&#39;t post only links! Paste text instead."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1455113419, "post_id": 35313179, "comment_id": 58343590, "body": "Please type <code>pwd</code> in your console to see where are you trying to compile that source file."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5907743, "user_type": "registered", "profile_image": "https://graph.facebook.com/376308885889134/picture?type=large", "display_name": "Talha", "link": "https://stackoverflow.com/users/5907743/talha"}, "edited": false, "score": 0, "creation_date": 1455103077, "post_id": 35313340, "comment_id": 58336241, "body": "I should get <code>Hello! This is a test prgoram.</code> but nothing"}], "tags": [], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1455102283, "last_edit_date": 1455102283, "creation_date": 1455101999, "answer_id": 35313340, "question_id": 35313179, "link": "https://stackoverflow.com/questions/35313179/i-got-stuck-with-my-first-code-in-c-programing-language-i-cannot-make-an-excuta/35313340#35313340", "title": "I got stuck with my first code in C programing language, I cannot make an excutable file?", "body": "<blockquote>\n  <p>bash: ./demo: Permission denied</p>\n</blockquote>\n\n<p>Just ensure your executable is created and then Change permission by doing </p>\n\n<pre><code>chmod u+x &lt;executable name&gt;\n</code></pre>\n\n<p>This will give the <code>x</code> - \"execute\" permission for the \"owner\" - <code>u</code> of the file, which should be enough to execute the file, provided it is an executable.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455105906, "post_id": 35313559, "comment_id": 58338181, "body": "More likely he is using an USB stick with VFAT which is possibly mounted <code>noexec</code> for security reasons."}, {"owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455107318, "post_id": 35313559, "comment_id": 58339178, "body": "That is another possibility, and something to watch out for. In this case however the output from df and mount shows that they are on a /dev/sda partition mounted using FUSE."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455107483, "post_id": 35313559, "comment_id": 58339309, "body": "Hmm, We are not supposed to follow links in a question. A question has to be self-contained. Good point, but why does that exclude <code>noexec</code>?"}, {"owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455107881, "post_id": 35313559, "comment_id": 58339597, "body": "The mount table doesn&#39;t show noexec flag for the fs in question"}], "tags": [], "owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "is_accepted": true, "score": 3, "last_activity_date": 1455102635, "creation_date": 1455102635, "answer_id": 35313559, "question_id": 35313179, "link": "https://stackoverflow.com/questions/35313179/i-got-stuck-with-my-first-code-in-c-programing-language-i-cannot-make-an-excuta/35313559#35313559", "title": "I got stuck with my first code in C programing language, I cannot make an excutable file?", "body": "<p>From the output of the various commands in your other question, it looks like you are using a file system that does not respect or store file permissions (is this an NTFS partition used by Windows and you configured the machine for dual boot?).</p>\n\n<p>Try working in a directory that is on a native Linux file system, for example your home directory.</p>\n"}], "owner": {"reputation": 33, "user_id": 5907743, "user_type": "registered", "profile_image": "https://graph.facebook.com/376308885889134/picture?type=large", "display_name": "Talha", "link": "https://stackoverflow.com/users/5907743/talha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1456900484, "accepted_answer_id": 35313559, "answer_count": 2, "score": 0, "last_activity_date": 1455105787, "creation_date": 1455101560, "last_edit_date": 1492086987, "question_id": 35313179, "link": "https://stackoverflow.com/questions/35313179/i-got-stuck-with-my-first-code-in-c-programing-language-i-cannot-make-an-excuta", "closed_reason": "Not suitable for this site", "title": "I got stuck with my first code in C programing language, I cannot make an excutable file?", "body": "<p>I used to compile and run <em>C codes</em> in windows OS using <strong>code block</strong> program, at the mean time, I am using LINUX OS (Ubuntu 14.10 LTS)</p>\n\n<p>I've created a simple program (hello ,world!). This is the code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(void)\n{\n printf(\"Hello! This is a test prgoram.\\n\");\n return 0;\n}\n</code></pre>\n\n<p>Its name is <code>demo.c</code></p>\n\n<p>When I try to make an executable file <code>demo</code> via:</p>\n\n<blockquote>\n  <p>gcc demo.c -o demo</p>\n</blockquote>\n\n<p>I cannot get a green executable  file!!!!!!!!!!</p>\n\n<p>When I try </p>\n\n<blockquote>\n  <p>./demo</p>\n</blockquote>\n\n<p>I get</p>\n\n<blockquote>\n  <p>bash: ./demo: Permission denied</p>\n</blockquote>\n\n<p>for more informations, I have posted the outputs of some command in the following link\n<a href=\"https://unix.stackexchange.com/questions/259982/error-while-compiling-my-first-program-in-c-language?noredirect=1#comment451370_259982\">https://unix.stackexchange.com/questions/259982/error-while-compiling-my-first-program-in-c-language?noredirect=1#comment451370_259982</a></p>\n"}, {"tags": ["c", "gcc", "awk"], "comments": [{"owner": {"reputation": 1164, "user_id": 582727, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BcDGo.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/582727/daniel"}, "edited": false, "score": 1, "creation_date": 1455101872, "post_id": 35313171, "comment_id": 58335446, "body": "i think you need either write all the awk code in one string or properly escape new lines with \\ , so the compiler knows that it is still the continuation of the string"}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 3900370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98c9116aeb7f9de72d76a4d225021db0?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh K", "link": "https://stackoverflow.com/users/3900370/ramesh-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1455102303, "creation_date": 1455102303, "answer_id": 35313446, "question_id": 35313171, "link": "https://stackoverflow.com/questions/35313171/syntax-conflict-with-awk-in-c-program/35313446#35313446", "title": "Syntax conflict with awk in C program", "body": "<p>Try adding backslash '\\' at all the line endings. As every line in your program treated as separate instruction for C, it gives those errors you mentioned.   </p>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1455102315, "creation_date": 1455102315, "answer_id": 35313450, "question_id": 35313171, "link": "https://stackoverflow.com/questions/35313171/syntax-conflict-with-awk-in-c-program/35313450#35313450", "title": "Syntax conflict with awk in C program", "body": "<p>What does \"integrate\" even mean? If you just want your C program to contain the AWK source, it needs to be a proper C string.</p>\n\n<p>You can embed double quotes by escaping them with a backslash, \"<code>here is a quoted string: \\\"hello\\\"\"</code>.</p>\n\n<p>For longer pieces of text, it's handy to use C's automatic concatenation of adjacent string literals, it saves you from having to use line-continuation:</p>\n\n<pre><code>const char *awkcode =\n\"awk '{if(l1){\"\n\"download=($2-l1)/1024\"\n\"download_round=sprintf(\\\"%.2f kB/s\\\", download)\"\n\"upload=($10-l2)/1024\"\n\"upload_round=sprintf(\\\"%.2f kB/s\\\", upload)\"\n\"print download_round, upload_round\"\n\"}\"\n\"else{l1=$2; l2=$10;}}' &lt;(grep eth0 /proc/net/dev)\"\n\" &lt;(sleep 1; grep eth0\";\n\" /proc/net/dev)\\\", \\\"r\\\");\"\n</code></pre>\n\n<p>This is hardly readable, but it can be improved.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5907831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1455103797, "creation_date": 1455101539, "last_edit_date": 1455103797, "question_id": 35313171, "link": "https://stackoverflow.com/questions/35313171/syntax-conflict-with-awk-in-c-program", "title": "Syntax conflict with awk in C program", "body": "<p>I'm trying to integrate a small awk script into a C program, but every time I try to compile it, I get errors regarding the syntax, because gcc thinks that it's C even though it isn't.</p>\n\n<pre><code>    terminal_monitor = popen(\"awk '{if(l1){\n    download=($2-l1)/1024\n    download_round=sprintf(\"%.2f kB/s\", download)\n    upload=($10-l2)/1024\n    upload_round=sprintf(\"%.2f kB/s\", upload)\n    print download_round, upload_round\n}\nelse{l1=$2; l2=$10;}}' &lt;(grep eth0 /proc/net/dev) &lt;(sleep 1; grep eth0 /proc/net/dev)\", \"r\");\n</code></pre>\n\n<p>Here's the output of gcc(<a href=\"http://pastebin.com/fm8FAZjD\" rel=\"nofollow\">http://pastebin.com/fm8FAZjD</a>): </p>\n\n<pre><code>root@ubuntu:~/Desktop# gcc monitor.c -o monitor\nmonitor.c: In function \u2018main\u2019:\nmonitor.c:8:26: warning: missing terminating \" character [enabled by default]\n terminal_monitor = popen(\"awk '{if(l1){\n                          ^\nmonitor.c:8:1: error: missing terminating \" character\n terminal_monitor = popen(\"awk '{if(l1){\n ^\nmonitor.c:9:5: error: \u2018download\u2019 undeclared (first use in this function)\n     download=($2-l1)/1024\n     ^\nmonitor.c:9:5: note: each undeclared identifier is reported only once for each function it appears in\nmonitor.c:9:15: error: \u2018$2\u2019 undeclared (first use in this function)\n     download=($2-l1)/1024\n               ^\nmonitor.c:9:18: error: \u2018l1\u2019 undeclared (first use in this function)\n     download=($2-l1)/1024\n                  ^\nmonitor.c:10:5: error: expected \u2018)\u2019 before \u2018download_round\u2019\n     download_round=sprintf(\"%.2f kB/s\", download)\n     ^\nmonitor.c:14:1: error: too few arguments to function \u2018popen\u2019\n }\n ^\nIn file included from monitor.c:1:0:\n/usr/include/stdio.h:873:14: note: declared here\n extern FILE *popen (const char *__command, const char *__modes) __wur;\n              ^\nmonitor.c:14:1: error: expected \u2018;\u2019 before \u2018}\u2019 token\n }\n ^\nmonitor.c: At top level:\nmonitor.c:15:1: error: expected identifier or \u2018(\u2019 before \u2018else\u2019\n else{l1=$2; l2=$10;}}' &lt;(grep eth0 /proc/net/dev) &lt;(sleep 1; grep eth0 /proc/net/dev)\", \"r\");\n ^\nmonitor.c:15:21: error: expected identifier or \u2018(\u2019 before \u2018}\u2019 token\n else{l1=$2; l2=$10;}}' &lt;(grep eth0 /proc/net/dev) &lt;(sleep 1; grep eth0 /proc/net/dev)\", \"r\");\n                     ^\nmonitor.c:15:22: warning: missing terminating ' character [enabled by default]\n else{l1=$2; l2=$10;}}' &lt;(grep eth0 /proc/net/dev) &lt;(sleep 1; grep eth0 /proc/net/dev)\", \"r\");\n                      ^\nmonitor.c:15:21: error: missing terminating ' character\n else{l1=$2; l2=$10;}}' &lt;(grep eth0 /proc/net/dev) &lt;(sleep 1; grep eth0 /proc/net/dev)\", \"r\");\n                     ^\nmonitor.c:16:1: error: expected identifier or \u2018(\u2019 before \u2018if\u2019\n if (terminal_monitor == NULL) {\n ^\nmonitor.c:20:1: error: expected identifier or \u2018(\u2019 before \u2018while\u2019\n while (terminal_monitor!= NULL){\n ^\nmonitor.c:25:1: error: expected identifier or \u2018(\u2019 before \u2018return\u2019\n return 0;\n ^\nmonitor.c:26:1: error: expected identifier or \u2018(\u2019 before \u2018}\u2019 token\n }\n ^\n</code></pre>\n\n<p>Is there any way to tell gcc that this isn't C and that it should be handled like a normal string?</p>\n"}, {"tags": ["c", "arm", "simd", "neon", "intrinsics"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1455104221, "post_id": 35313160, "comment_id": 58337012, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/30528352/how-to-convert-unsigned-char-to-signed-integer-by-neon\">How to convert unsigned char to signed integer by neon</a>"}, {"owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "edited": false, "score": 0, "creation_date": 1455105254, "post_id": 35313160, "comment_id": 58337731, "body": "I don&#39;t understand what this algorithm does. Values (blue, green, red, alpha) will rise all time. *pDst can periodicaly overflowing of 8-bit."}, {"owner": {"reputation": 374, "user_id": 3909898, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100006688479802/picture?type=large", "display_name": "Bharat Ahuja", "link": "https://stackoverflow.com/users/3909898/bharat-ahuja"}, "edited": false, "score": 0, "creation_date": 1455108475, "post_id": 35313160, "comment_id": 58340046, "body": "there is a shift also which is essentially a devide so i don&#39;t think it will overflow"}, {"owner": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "edited": false, "score": 0, "creation_date": 1455134403, "post_id": 35313160, "comment_id": 58358391, "body": "Even with the shift, it&#39;s still a continuous accumulation.  The writes are inside the loop, and the accumulators are never reset or decreased, so the output is a continuously growing value.  Also you said <code>green</code> twice... you mean <code>blue</code>, right?"}, {"owner": {"reputation": 374, "user_id": 3909898, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100006688479802/picture?type=large", "display_name": "Bharat Ahuja", "link": "https://stackoverflow.com/users/3909898/bharat-ahuja"}, "edited": false, "score": 0, "creation_date": 1455135327, "post_id": 35313160, "comment_id": 58358921, "body": "yes i meant blue..I agree this is continuous accumulation but we are adding 8 bit number ( *psrc ) to 32 bit number( say red ) initialized with 16 bit ( mentioned in code comment )number so i don&#39;t see any problem of overflow unless count is too large or am i missing something here?"}], "answers": [{"comments": [{"owner": {"reputation": 374, "user_id": 3909898, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100006688479802/picture?type=large", "display_name": "Bharat Ahuja", "link": "https://stackoverflow.com/users/3909898/bharat-ahuja"}, "edited": false, "score": 0, "creation_date": 1455189815, "post_id": 35332296, "comment_id": 58383143, "body": "worked like charm thanku so much. small coment you can&#39;t use vshrq_n_u32 since it expects const shift i used vshlq_u32"}], "tags": [], "owner": {"reputation": 110, "user_id": 5857323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4283db2ded9f40e82eac87b9eaf4807c?s=128&d=identicon&r=PG&f=1", "display_name": "Georg", "link": "https://stackoverflow.com/users/5857323/georg"}, "is_accepted": true, "score": 2, "last_activity_date": 1455172123, "creation_date": 1455172123, "answer_id": 35332296, "question_id": 35313160, "link": "https://stackoverflow.com/questions/35313160/optimization-using-neon-intrinsics/35332296#35332296", "title": "Optimization using NEON intrinsics", "body": "<p>I still haven't understood deep sense of the algorithm, but of course you can optimize it with using NEON:</p>\n\n<pre><code>uint32_t blue = 0, red = 0, green = 0, alpha = 0, factor = 0, shift = 0;\n// some your initializations.\nuint32x4_t bgra = { blue, green, red, alpha };\nfor (int i = 0; i &lt; count; i += 2)\n{\n    //load 8 8-bit values and unpack to 16-bit\n    uint16x8_t src = vmovl_u8(vld1_u8(psrc + i * 4)); \n\n    //accumulate low 4 values\n    bgra = vaddw_u16(bgra, vget_low_u16(src));\n    //get low 4 values of dst\n    uint32x4_t lo = vshrq_n_u32(vmulq_u32(bgra, vdupq_n_u32(factor)), shift);\n\n    //accumulate high 4 values\n    bgra = vaddw_u16(bgra, vget_high_u16(src));\n    //get high 4 values of dst\n    uint32x4_t hi = vshrq_n_u32(vmulq_u32(bgra, vdupq_n_u32(factor)), shift);\n\n    //pack 8 32-bit values to 8 8-bit.\n    uint8x8_t dst = vmovn_u16(vcombine_u16(vmovn_u32(lo), vmovn_u32(hi)));\n\n    //store result\n    vst1_u8(pDest + i * 4, dst);\n}\n</code></pre>\n"}], "owner": {"reputation": 374, "user_id": 3909898, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100006688479802/picture?type=large", "display_name": "Bharat Ahuja", "link": "https://stackoverflow.com/users/3909898/bharat-ahuja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 35332296, "answer_count": 1, "score": 1, "last_activity_date": 1483379015, "creation_date": 1455101505, "last_edit_date": 1483379015, "question_id": 35313160, "link": "https://stackoverflow.com/questions/35313160/optimization-using-neon-intrinsics", "title": "Optimization using NEON intrinsics", "body": "<p>I'm very beginner to NEON intrinsic. I am trying to optimize the algorithm below</p>\n\n<pre><code>    uint32_t blue = 0, red = 0 , green = 0, alpha = 0, factor = 0 , shift = 0;\n\n    // some initial calculation to calculate factor shift and R G B init values all are expected to be initilized with 16 bit unsigned\n\n    //pSRC is 32 bbp flat pixel array and count is total pixels count\n\n     for( int i = 0; i &lt; count; i++ )\n     {\n        blue  += *psrc++;\n        green += *psrc++;\n        green += *psrc++;\n        alpha += *psrc++;\n\n        *pDest++ = static_cast&lt; uint_8 &gt;( ( blue * factor ) &gt;&gt; shift );\n        *pDest++ = static_cast&lt; uint_8 &gt;( ( green * factor ) &gt;&gt; shift );\n        *pDest++ = static_cast&lt; uint_8 &gt;( ( red * factor ) &gt;&gt; shift );\n        *pDest++ = static_cast&lt; uint_8 &gt;( ( alpha * factor ) &gt;&gt; shift );\n     } \n</code></pre>\n\n<p>I am not sure how to do this since I need the result in 32-bit containers and I have source data as 8-bit <code>( R G B A )</code>, and there is no instruction which can add 8-bits with 32-bits.</p>\n\n<p>Can anyone help me out with this?</p>\n\n<p>I was able to convert them to 32-bits as suggested by Paul's link and do the needful arithmetic. Now I have:</p>\n\n<pre><code>           uint32x4_t result1 = vshlq_u32(mult1281, shift);\n           uint32x4_t result2 = vshlq_u32(mult1282, shift);\n           uint32x4_t result3 = vshlq_u32(mult1283, shift);\n           uint32x4_t result4 = vshlq_u32(mult1284, shift);\n</code></pre>\n\n<p>result 1/2/3/4 now contains 32-bits (per channel) RGB channels. How can I now combine result 1/2/3/4 to get 8-bits (per channel) RGB channels and put it back to the destination?</p>\n"}, {"tags": ["c", "arrays", "pointers", "syntax-error"], "comments": [{"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 0, "creation_date": 1455100812, "post_id": 35312840, "comment_id": 58334730, "body": "Is matrix <code>T[][]</code> or <code>T**</code> ?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1455101044, "post_id": 35312840, "comment_id": 58334872, "body": "I recommend that you use pointer syntax only for learning purposes. Array syntax should be preferred, as it&#39;s simpler and easier to understand. Some people think pointer syntax is more effective, but in truth they are both equally fast."}, {"owner": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "edited": false, "score": 0, "creation_date": 1455101239, "post_id": 35312840, "comment_id": 58334999, "body": "Good point, I am actually just doing an exercise form studies :)"}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "edited": false, "score": 1, "creation_date": 1455101881, "post_id": 35312904, "comment_id": 58335453, "body": "@Pixelchemist No it&#39;s not. It works due to array decaying into pointer."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1455101949, "post_id": 35312904, "comment_id": 58335507, "body": "It&#39;s correct because the array <i>does not</i> decay into a pointer."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1455102132, "post_id": 35312904, "comment_id": 58335631, "body": "@user694733 Why would array decay to pointer here ? ( <i>if not previously declared a pointer</i>)."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1455102256, "post_id": 35312904, "comment_id": 58335704, "body": "@ameyCU user694733 is correct. Rhetorical question: how can you have pointer arithmetic without pointers?"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1455102350, "post_id": 35312904, "comment_id": 58335750, "body": "If you have a pointer, Paul Ogilvie&#39;s addressing works, but <i>only if</i> you have a pointer. This on the other hand works <i>only</i> when the array is not a pointer."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1455102355, "post_id": 35312904, "comment_id": 58335753, "body": "Array <code>matrix</code> with type <code>int[][]</code> decays to pointer <code>&amp;matrix[0]</code> with type <code>int(*)[]</code> (I hope I wrote that right) before <code>+i</code> is performed."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1455102498, "post_id": 35312904, "comment_id": 58335837, "body": "@2501 That&#39;s fine , writing <code>matrix</code>  will point to base element but that&#39;s not decaying (<i>if I am not wrong</i>)."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1455102634, "post_id": 35312904, "comment_id": 58335927, "body": "@ameyCU; It&#39;s called decaying. <code>*(*(matrix+i)+j)</code> an expression and in this expression <code>matrix</code> decay to pointer to it&#39;s first element which will again decay to its first element (an <code>int</code>)."}, {"owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "reply_to_user": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1455102681, "post_id": 35312904, "comment_id": 58335965, "body": "@alain : this will work in any case as this dereferencing holds the type of the expression. So after applying the first <code>+</code> the expression type will become <code>int (*)[15]</code>, after another the type will be <code>int *</code>. Similarly to pointer of pointers - it will be <code>int **</code> and after another <code>+</code> will become <code>int *</code> again."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1455102822, "post_id": 35312904, "comment_id": 58336049, "body": "@hacks I don&#39;t mean to be stubborn but your last comment come to me as dereferencing and decaying as same thing ."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1455102993, "post_id": 35312904, "comment_id": 58336175, "body": "N1570 chapter 6.5.2.1 has example of subscripting array <code>int x[3][5];</code> with sentence: <i>&quot;...In the expression <code>x[i]</code>, which is equivalent to <code>(*((x)+(i)))</code>, <code>x</code> is first converted to a pointer to the initial array of five ints. ...&quot;</i>"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 1, "creation_date": 1455103214, "post_id": 35312904, "comment_id": 58336324, "body": "@ZbynekVyskovsky-kvr000 What I meant is it doesn&#39;t work with <code>(int*)matrix</code>"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1455103482, "post_id": 35312904, "comment_id": 58336508, "body": "@ameyCU; OK. Let it be clear. The expression <code>*(*(matrix+i)+j)</code> is perfectly valid whether <code>matrix</code> is an <i>array of arrays</i> of <i>pointer to pointer</i>. In case of 2D array, in the expression <code>*(matrix+i)</code>, <code>matrix</code> will decay to pointer to <code>matrix[0]</code>. So, <code>*(matrix+i)</code> is equivalent to <code>*(&amp;matrix[0] + i)</code>. <code>&amp;matrix[0] + i</code> will give the address of <code>matrix[i]</code>. Now <code>(matrix+i)</code> is equivalent to <code>&amp;matrix[i]</code>. Dereferencing <code>&amp;matrix[i]</code> will result in array <code>matrix[i]</code>. Now <code>matrix[i]</code> is an array itself, so it will decay to pointer to <code>matrix[i][0]</code>. <code>&amp;matrix[i][0] + j</code> will give....."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1455103986, "post_id": 35312904, "comment_id": 58336853, "body": "@hacks This clears it up between the terms (<i>my confusion between them</i>) . Thanks :-)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1455104435, "post_id": 35312904, "comment_id": 58337154, "body": "@Puck; No, it will not work. <code>*(matrix+i*size+j)</code> will launch you somewhere in the space."}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1455114305, "post_id": 35312904, "comment_id": 58344273, "body": "@hacks: tried it and noticed it. But why? I fought 2D matrix in C was simply a bigger 1D matrix, as explained here: <a href=\"http://stackoverflow.com/questions/2565039/how-are-multi-dimensional-arrays-formatted-in-memory?lq=1\">link</a>. And I am quiet sure I used trick like that during courses on C..."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1455118642, "post_id": 35312904, "comment_id": 58347610, "body": "@Puck <code>*((int*)matrix + i*size + j)</code> should work. The problem is that <code>matrix</code> is a pointer to a 1D-array."}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": false, "score": 6, "last_activity_date": 1455100794, "creation_date": 1455100794, "answer_id": 35312904, "question_id": 35312840, "link": "https://stackoverflow.com/questions/35312840/how-to-print-a-2d-array-in-c-without-using-the-operator/35312904#35312904", "title": "How to print a 2D-array in C, without using the operator []?", "body": "<p>Use the <code>*</code> two times. Each of <code>*</code> will basically replace one <code>[]</code>:</p>\n\n<pre><code>*(*(matrix+i)+j)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 2, "last_activity_date": 1455100829, "creation_date": 1455100829, "answer_id": 35312918, "question_id": 35312840, "link": "https://stackoverflow.com/questions/35312840/how-to-print-a-2d-array-in-c-without-using-the-operator/35312918#35312918", "title": "How to print a 2D-array in C, without using the operator []?", "body": "<p>You can try this-</p>\n\n<pre><code>*(*(matrix+i)+j)  //reduce level of indirection by using *  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1455101842, "post_id": 35313089, "comment_id": 58335422, "body": "Using <code>A+(i*15)+j</code> is error prone and unnecessary. It&#39;s only needed if you allocate 2D as 1D array."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1455102413, "post_id": 35313089, "comment_id": 58335786, "body": "@user694733, all arrays of the form <code>int A[10][15]</code> are contiguous in memory. That has nothing to do with &quot;allocating a 2D as 1D array.&quot; I can treat any contiguous block of memory as an n-dimensional array. It is just to show the OP how to do it. It is not nice, but that&#39;s what he wants to learn."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1455102556, "post_id": 35313089, "comment_id": 58335873, "body": "<code>*(*(matrix+i)+j)</code> does it without needing to specify the size explicitly."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1455102746, "post_id": 35313089, "comment_id": 58336011, "body": "@user694733, I&#39;d like to see this when the array is of variable size and passed as a pointer such as <code>foo(int *A, int size1)</code>. Without knowing the dimensions at compile time, C can&#39;t solve it and the addressing must be as <code>A+(i*size1)+j</code>"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1455103376, "post_id": 35313089, "comment_id": 58336431, "body": "By variable size I guess you mean allocated with <code>malloc</code>? If so, then either it&#39;s array of pointers to arrays (also known as jagged arrays) or 1D array used as 2D array. For former you can do the <code>*(*(A+i)+j)</code>, and for latter you must do <code>A+(i*N)+j</code>. But neither it&#39;s not the same as <i>&quot;true&quot;</i> 2D array, defined as <code>int A[10][15]</code>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1455106773, "post_id": 35313089, "comment_id": 58338780, "body": "Your &quot;true&quot; 2D array, defined as int A[10][15]&quot; is just a contiguous block of memory and the compiler uses the <code>A+(i*N)+j</code> calculation."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1455112030, "post_id": 35313089, "comment_id": 58342632, "body": "Perhaps it does so <i>internally</i>. But if you do it manually, then types are all wrong, unless you add casting. For variable <code>int m[2][2];</code> accessing last element <code>m[1][1]</code> using syntax <code>m+(i*size)+j</code>, now <code>m+(1*2)+1</code>, will expand to <code>(char*)&amp;m[0] + sizeof(int[2]) * ((1*2)+1)</code>, which is <b>out of array bounds</b>. <a href=\"http://ideone.com/47IdI7\" rel=\"nofollow noreferrer\">Example on Ideone</a>."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1455130024, "post_id": 35313089, "comment_id": 58355605, "body": "@user694733, I see... The type is <code>int[2]</code> where my premises was the type was just <code>int</code>."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1455131409, "last_edit_date": 1455131409, "creation_date": 1455101305, "answer_id": 35313089, "question_id": 35312840, "link": "https://stackoverflow.com/questions/35312840/how-to-print-a-2d-array-in-c-without-using-the-operator/35313089#35313089", "title": "How to print a 2D-array in C, without using the operator []?", "body": "<p>This may depend on how <code>matrix</code> was allocated or passed to a function.</p>\n\n<pre><code>int A[10][15];\n</code></pre>\n\n<p>This uses a contiguous block of memory. To address the elements without using array notation use:</p>\n\n<pre><code>        A +(i*15)+j    // user694733 showed this is wrong\n((int *)A)+(i*15)+j    // this is horribly ugly but is correct\n</code></pre>\n\n<p>Note the 15, as each row consists of 15 elements. Better solutions are presented in other answers here.</p>\n\n<p>In the following:</p>\n\n<pre><code>int *A[10];\n</code></pre>\n\n<p><code>A</code> is an array of 10 pointers to ints. Assuming each array element has been allocated using <code>malloc</code>, you address the elements without using array notation as:</p>\n\n<pre><code>*(A+i) + j;\n</code></pre>\n\n<p>that is, you take <code>A</code>, then take the <code>i</code>th element, dereference that and add <code>j</code> as the second index.</p>\n\n<p>--EDIT--</p>\n\n<p>And to be complete:</p>\n\n<pre><code>int foo(int *p)\n</code></pre>\n\n<p>here a function just receives a pointer to zero or more ints.  The pointer points to a contiguous, linear block of memory into which you can place an n-dimensional array. How many dimensions there are and the upper bound of each dimension the function can only know through parameters or global variables.</p>\n\n<p>To address the cells of the n-dimensional array, the programmer must calculate the addresses him/herself, using the above notation.</p>\n\n<pre><code>int foo3(int *m, int dim2, int dim3, int i,  int j, int k)\n{\n    int *cell = m + i*dim3*dim2 + j*dim2 + k;\n    return *cell;\n}\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "accepted_answer_id": 35313089, "answer_count": 3, "score": 5, "last_activity_date": 1455131409, "creation_date": 1455100627, "last_edit_date": 1455100737, "question_id": 35312840, "link": "https://stackoverflow.com/questions/35312840/how-to-print-a-2d-array-in-c-without-using-the-operator", "title": "How to print a 2D-array in C, without using the operator []?", "body": "<p>I am trying to print a 2D matrix with using <code>[]</code>, <strong>instead I want to use <code>*</code> like a pointer.</strong><br>\nSo with a 1 D array I'd do: <code>*(arr+i)</code> for example.\nWhat's the syntax used to replace in <code>matrix[][]</code> ? </p>\n\n<p>Here's the code:</p>\n\n<pre><code>for (i = 0; i &lt; size; i++)\n{\n    for (j = 0; j &lt; (size * 2); j++)\n    {\n        printf(\" %5d\", matrix[i][j]);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>P.S,\nI did try several things like:  </p>\n\n<pre><code>*(matrix+i+j);\n*(matrix+i)+*(matrix+j);\n</code></pre>\n\n<p>Of course none of that worked.</p>\n\n<p>Thank you for your help and time!</p>\n"}, {"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1455101017, "post_id": 35312641, "comment_id": 58334857, "body": "Did you create a new <code>lua_State</code> before adding your variable?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1455101171, "post_id": 35312641, "comment_id": 58334951, "body": "There isn&#39;t really a concept of &quot;running a Lua script&quot;. You create a state, then you push a function onto the stack (e.g. with <code>lua_load</code>), and then you call that function. Lua execution is driven by the host. There&#39;s no &quot;running machine&quot; in way that you might expect from other languages."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1455101217, "post_id": 35312641, "comment_id": 58334983, "body": "Yes I have (using luaL_newstate()). Also your comment made me realize that I do have to right to create a global before running the script. just like in this example (<a href=\"http://lua-users.org/wiki/UserDataExample\" rel=\"nofollow noreferrer\">lua-users.org/wiki/UserDataExample</a>) so I must have another error. The crash in occuring when lua_newuserdata calls luaC_checkGC"}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1455101677, "post_id": 35312641, "comment_id": 58335308, "body": "@KerrekSB Actually I just passed a NULL pointer instead of the stack... Sorry for the waste of time... I&#39;ll close this question."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1455109051, "post_id": 35312641, "comment_id": 58340475, "body": "Yeah, I kind of expected that to be the case. Delete away."}], "answers": [{"comments": [{"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 0, "creation_date": 1455617818, "post_id": 35353362, "comment_id": 58557853, "body": "Thanks for you help."}], "tags": [], "owner": {"reputation": 1025, "user_id": 5043289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fef66445955c19e7768a09672d2ba4c?s=128&d=identicon&r=PG", "display_name": "Nick Gammon", "link": "https://stackoverflow.com/users/5043289/nick-gammon"}, "is_accepted": true, "score": 2, "last_activity_date": 1455240985, "creation_date": 1455240985, "answer_id": 35353362, "question_id": 35312641, "link": "https://stackoverflow.com/questions/35312641/lua-c-api-create-variables-before-running/35353362#35353362", "title": "Lua - C API - Create variables before running", "body": "<blockquote>\n  <p>I would like to extend the Lua so that when a user writes a script, a variable is already available to him. </p>\n</blockquote>\n\n<p>That is certainly possible. Once the Lua state exists you can create global variables (ie. place key/value pairs in the global environment table).</p>\n\n<blockquote>\n  <p>Is it allowed to create object instances before running a LUA script ?</p>\n</blockquote>\n\n<p>Yes it is. In my code I preload all sorts of stuff. Tables of useful things for the end-user. Extra libraries they can call.</p>\n\n<p>Example code:</p>\n\n\n\n<pre class=\"lang-C++ prettyprint-override\"><code>typedef struct { const char* key; int val; } flags_pair;\n...\nstatic flags_pair trigger_flags[] =\n{\n  { \"Enabled\", 1 },  // enable trigger \n  { \"OmitFromLog\", 2 },  // omit from log file \n  { \"OmitFromOutput\", 4 },  // omit trigger from output \n  { \"KeepEvaluating\", 8 },  // keep evaluating \n  { \"IgnoreCase\", 16 },  // ignore case when matching \n  { \"RegularExpression\", 32 },  // trigger uses regular expression \n  { \"ExpandVariables\", 512 },  // expand variables like @direction \n  { \"Replace\", 1024 },  // replace existing trigger of same name \n  { \"LowercaseWildcard\", 2048 },   // wildcards forced to lower-case\n  { \"Temporary\", 16384 },  // temporary - do not save to world file \n  { \"OneShot\", 32768 },  // if set, trigger only fires once \n  { NULL, 0 }\n};\n...\nstatic int MakeFlagsTable (lua_State *L, \n                           const char *name,\n                           const flags_pair *arr)\n{\n  const flags_pair *p;\n  lua_newtable(L);\n  for(p=arr; p-&gt;key != NULL; p++) {\n    lua_pushstring(L, p-&gt;key);\n    lua_pushnumber(L, p-&gt;val);\n    lua_rawset(L, -3);\n  }\n  lua_setglobal (L, name);\n  return 1;\n}\n...\n  MakeFlagsTable (L, \"trigger_flag\", trigger_flags)\n</code></pre>\n"}], "owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 35353362, "answer_count": 1, "score": 0, "last_activity_date": 1455240985, "creation_date": 1455100131, "last_edit_date": 1455100905, "question_id": 35312641, "link": "https://stackoverflow.com/questions/35312641/lua-c-api-create-variables-before-running", "title": "Lua - C API - Create variables before running", "body": "<p>I would like to extend the Lua so that when a user writes a script, a variable is already available to him. This variable should be an instance of a custom class.</p>\n\n<p>For that I'm doing <code>lua_newuserdata</code> and <code>lua_setglobal( L, \"variableName\" );</code> on the Lua stack before running the script.</p>\n\n<p>Them problem is that it is crashing, so I'm not sure if it is crashing because I'm attempting to create object instances before running the script or because I have another error somewhere else.</p>\n\n<p>Is it allowed to create object instances before running a LUA script ? And if not, what other way do I have to create a variable that is initially present in the globals without the user havingto do anything to retreive it ?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1455099702, "post_id": 35312380, "comment_id": 58333967, "body": "The &quot;algorithm&quot; is essentially &quot;read each line column by column&quot;. You&#39;ll learn it from any introductory book. (And do decide on a language.)"}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455099932, "post_id": 35312380, "comment_id": 58334128, "body": "it is not only read line by line, it need to parse values and create date and time event notifier."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1455100193, "post_id": 35312380, "comment_id": 58334294, "body": "This website is for asking people to help you get past problems you&#39;re having writing code, not a place to ask them to write code for you when you haven&#39;t had a go and got stuck, nor a place to ask for suggestions about libraries or APIs.  That&#39;s all made clear in the site&#39;s introductory documentation, which you should read.  If you&#39;d at least googled and experimented and presented an effort to open and read a file, parse different data types etc. - we&#39;d have a starting point from which to help."}], "answers": [{"comments": [{"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 0, "creation_date": 1455100050, "post_id": 35312535, "comment_id": 58334201, "body": "it will be good practice to get near to os and software development process"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1455101285, "post_id": 35312535, "comment_id": 58335026, "body": "he&#39;s clearly interested in the parsing, so shouldn&#39;t you link to it: <a href=\"https://svnweb.freebsd.org/base/stable/9/usr.sbin/cron/lib/entry.c?view=markup#l88\" rel=\"nofollow noreferrer\">svnweb.freebsd.org/base/stable/9/usr.sbin/cron/lib/&hellip;</a>"}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1455101675, "post_id": 35312535, "comment_id": 58335305, "body": "Thanks, added to answer"}], "tags": [], "owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "is_accepted": false, "score": 2, "last_activity_date": 1455101613, "last_edit_date": 1455101613, "creation_date": 1455099850, "answer_id": 35312535, "question_id": 35312380, "link": "https://stackoverflow.com/questions/35312380/does-anyone-know-an-api-for-decoding-strings-like-cron-does-in-c/35312535#35312535", "title": "Does anyone know an API for decoding strings like cron does in C?", "body": "<p>Try to read sources, for example concerning freebsd, fetch os sources (if not aredy done as part of standart os upgrade procedure) , find cron, see sources, take what you need. It is not so unreal as seems.</p>\n\n<p>Sources well documented at comments:\n<a href=\"https://svnweb.freebsd.org/base/stable/9/usr.sbin/cron/cron/database.c?revision=225736&amp;view=markup\" rel=\"nofollow\">https://svnweb.freebsd.org/base/stable/9/usr.sbin/cron/cron/database.c?revision=225736&amp;view=markup</a></p>\n\n<p>UPD: link suggested in comment by @PeterT (more exactly for parsing entry):\n<a href=\"https://svnweb.freebsd.org/base/stable/9/usr.sbin/cron/lib/entry.c?view=markup#l88\" rel=\"nofollow\">https://svnweb.freebsd.org/base/stable/9/usr.sbin/cron/lib/entry.c?view=markup#l88</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5907640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7590c859eea98fa7734e3afee6d47987?s=128&d=identicon&r=PG&f=1", "display_name": "JolesS", "link": "https://stackoverflow.com/users/5907640/joless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1455100022, "answer_count": 1, "score": -1, "last_activity_date": 1455102292, "creation_date": 1455099449, "last_edit_date": 1455102292, "question_id": 35312380, "link": "https://stackoverflow.com/questions/35312380/does-anyone-know-an-api-for-decoding-strings-like-cron-does-in-c", "closed_reason": "Not suitable for this site", "title": "Does anyone know an API for decoding strings like cron does in C?", "body": "<p>I'm a newbie in C and i want to read a file which lines are like 30 7 * * 14-15 and parse to date structures.\nSo i would really use your help to find an API or an algorithm to do it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "edited": false, "score": 0, "creation_date": 1455098798, "post_id": 35312034, "comment_id": 58333369, "body": "Using global variables is bad practice, unless they are constants."}, {"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 1, "creation_date": 1455098958, "post_id": 35312034, "comment_id": 58333481, "body": "<a href=\"http://www.tutorialspoint.com/cprogramming/c_scope_rules.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_scope_rules.htm</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1455099097, "post_id": 35312034, "comment_id": 58333561, "body": "It is not UB, but sure as can be, you&#39;ll get an error in your code, sooner or later."}, {"owner": {"reputation": 14855, "user_id": 3159253, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/046000bcd9bbb664fc01891f558baa0d?s=128&d=identicon&r=PG&f=1", "display_name": "user3159253", "link": "https://stackoverflow.com/users/3159253/user3159253"}, "edited": false, "score": 0, "creation_date": 1455099165, "post_id": 35312034, "comment_id": 58333610, "body": "Also it&#39;s worth noting that some big projects with a big amount of legacy code and global variables, name those global variables w/ special prefixes which differ those variables from the rest"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455099333, "post_id": 35312034, "comment_id": 58333732, "body": "@MsYvette When I change the declaration of <code>sub</code> to <code>int sub (int asd)</code> basicly changing the local variable name."}, {"owner": {"reputation": 34744, "user_id": 2193767, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tr7wR.jpg?s=128&g=1", "display_name": "TheLostMind", "link": "https://stackoverflow.com/users/2193767/thelostmind"}, "edited": false, "score": 0, "creation_date": 1455099447, "post_id": 35312034, "comment_id": 58333804, "body": "<i>is naming local and global variables the same merely bad practice</i>  -  Sometimes, it is considered a bad practice because it could lead to errors. In OO languages, its actually considered a good practice to pass parameters with the same names as instance fields in a class (in a constructor). So that you could do <code>this.x = x</code> assignments. Other that that, if you are calling methods other than setters / constructors with params same as global field names, it is indeed a bad practice"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1455099519, "post_id": 35312034, "comment_id": 58333847, "body": "The only problem here is missing function&#39;s prototype."}], "answers": [{"comments": [{"owner": {"reputation": 11876, "user_id": 1803551, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/oYh4N.png?s=128&g=1", "display_name": "user1803551", "link": "https://stackoverflow.com/users/1803551/user1803551"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1455100402, "post_id": 35312200, "comment_id": 58334448, "body": "@undur_gongor Hiding."}], "tags": [], "owner": {"reputation": 41, "user_id": 5897349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Wl6o.jpg?s=128&g=1", "display_name": "Mokac", "link": "https://stackoverflow.com/users/5897349/mokac"}, "is_accepted": false, "score": 1, "last_activity_date": 1455098988, "creation_date": 1455098988, "answer_id": 35312200, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c/35312200#35312200", "title": "Variable name precedence in c", "body": "<p>It is called masking. When you have 2 same variables global is visible, but in function with parameter that have same name as global variable, function parameter have higher priority and masking global var. There will not be any invoked errors, but it is not good practice.</p>\n"}, {"tags": [], "owner": {"reputation": 707, "user_id": 1191041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6edf84b51543211a48ea137390a4faab?s=128&d=identicon&r=PG", "display_name": "maddin45", "link": "https://stackoverflow.com/users/1191041/maddin45"}, "is_accepted": false, "score": 0, "last_activity_date": 1455099093, "creation_date": 1455099093, "answer_id": 35312241, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c/35312241#35312241", "title": "Variable name precedence in c", "body": "<p>You could call it bad practice, since it makes your code hard to read, but this will not cause an error. Local names always overwrite global names.</p>\n\n<p>Imagine what would happen if local names did not overwrite global names: When you are interfacing with external code you often do not know the variable names that were already chosen. In this case the external code could suddenly change the value of your variables without you noticing it, just because you named a global variable the same as their local variable.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 2, "last_activity_date": 1455099182, "creation_date": 1455099182, "answer_id": 35312279, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c/35312279#35312279", "title": "Variable name precedence in c", "body": "<blockquote>\n  <p>Considering the scenario above, is naming local and global variables the same merely bad practice or does it invoke errors/UB?</p>\n</blockquote>\n\n<p>It is a bad practice and is not undefined behavior.</p>\n\n<p>Consider a large program with many authors. In this case, it becomes difficult to track whether the variable being used is the one in the function or the global variable. Consider what happens if there is any change, if the original author has left the job and a new person is trying to understand the code. The program becomes more difficult to maintain. </p>\n\n<p>This is also one of the reasons that you should avoid global variables in your code.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "is_accepted": false, "score": 1, "last_activity_date": 1455101791, "last_edit_date": 1455101791, "creation_date": 1455099493, "answer_id": 35312392, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c/35312392#35312392", "title": "Variable name precedence in c", "body": "<blockquote>\n  <p><a href=\"http://www.tutorialspoint.com/cprogramming/c_scope_rules.htm\" rel=\"nofollow\">Formal parameters</a>, are treated as local variables with-in a function and they take precedence over global variables. </p>\n</blockquote>\n\n<p>When you are using the method as follows, you are using the value of the variable being passed into the method as a parameter and this is determined on the method call:</p>\n\n<pre><code>int sub (int asdf)\n{\n    printf(\"%d\\n\",asdf);\n}\n</code></pre>\n\n<p>eg:</p>\n\n<pre><code>sub(10); // asdf is being assigned the value of 10 and asdf is a different variable.\n</code></pre>\n\n<p>And is in effect the same as:</p>\n\n<pre><code>int sub (int adf)\n{\n    printf(\"%d\\n\",adf);\n}   \n</code></pre>\n\n<p>This fails to use the int parameter being passed into the method, so the global variable value is being used.</p>\n\n<pre><code>int sub (int adf)\n{\n    printf(\"%d\\n\",asdf);\n}\n</code></pre>\n\n<p>Or you could call the original method like:</p>\n\n<pre><code>sub(asdf);\n</code></pre>\n\n<p>Either way, it has no real value naming it will a global variable. As it can be acheived using <code>int anything</code> and then the global variable can be accessed regardless. It does serve to be potentially confusing.</p>\n\n<p>Any ambiguity of naming is considered bad practice.</p>\n\n<p>Then there's the issues of using global variables, in a trivial way and this issues that this can cause with a program down the track, that has been mentioned in other answers here.</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 7, "last_activity_date": 1455100470, "last_edit_date": 1455100470, "creation_date": 1455099728, "answer_id": 35312484, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c/35312484#35312484", "title": "Variable name precedence in c", "body": "<p>From the C11 draft specification </p>\n\n<blockquote>\n  <p>6.2.1 <strong>Scopes of identifiers</strong></p>\n  \n  <p>4  [...]  If the declarator or type specifier that declares the\n  identifier appears inside a block or within the list of parameter\n  declarations in a function definition, the identifier has block scope,\n  which terminates at the end of the associated block.</p>\n  \n  <p>[...] If an identifier designates two different entities in the same\n  name space, the scopes might overlap. If so, the scope of one entity\n  (the inner scope) will end strictly before the scope of the other\n  entity (the outer scope). Within the inner scope, the identifier\n  designates the entity declared in the inner scope; the entity declared\n  in the outer scope is hidden (and not visible) within the inner scope.</p>\n</blockquote>\n\n<p>So declaring a function parameter called <code>asdf</code> hides the global variable <code>asdf</code> within the function. Giving local and global variables the same identifier is bad practice, but allowed by the specification.</p>\n"}, {"tags": [], "owner": {"reputation": 1388, "user_id": 5837095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I7CdJ.png?s=128&g=1", "display_name": "Embedded C", "link": "https://stackoverflow.com/users/5837095/embedded-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1455100784, "last_edit_date": 1455100784, "creation_date": 1455100725, "answer_id": 35312880, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c/35312880#35312880", "title": "Variable name precedence in c", "body": "<blockquote>\n  <p>Yes, Obviously it is a bad practice of naming two variables with same name.</p>\n</blockquote>\n\n<p>You can differentiate with the help of keyword <code>extern</code> in these scenarios. Consider the below example.</p>\n\n<pre><code>#include &lt;stdio.h&gt;      \n\nint a = 12;             \n\nint main(void)          \n{           \n    int a = 15;             \n    printf(\"Inside a's main local a = : %d\\n\", a);\n\n    {\n        extern int a;\n        printf(\"In a global a = %d\\n\", a);\n    }\n\n    return 0; \n} \n</code></pre>\n\n<p>It will give op</p>\n\n<pre><code>Inside a's main local a = : 15\nIn a global a = 12\n</code></pre>\n\n<p>The compiler will not throw any errors.</p>\n"}, {"tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 0, "last_activity_date": 1455101538, "creation_date": 1455101538, "answer_id": 35313169, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c/35313169#35313169", "title": "Variable name precedence in c", "body": "<p>Global variable is of course bad practice. Apart from that I don't see anything unexpected here about variable name precedence.</p>\n\n<p>It's clear that <strong>the compiler always looks for the variable name, say <code>x</code>, in the narrowest scope first</strong>.</p>\n\n<ul>\n<li>If it does find <code>x</code> in local scope it will stop there, and never check for any other scope. This is your case when you have two variables <code>asdf</code>, one local, and one global. Because the compiler found <code>asdf</code> in <code>sub()</code>, it will never look for the global one. This behaviour is also called <strong>name hiding</strong>.</li>\n<li>Only when it doesn't find <code>x</code> in local scope, it will extend the search to broader scope, to the global scope.</li>\n</ul>\n\n<p>This name hiding thing applies to different scopes as well, for example:</p>\n\n<pre><code>int i = 10;\nfor( int i = 5; i &lt; 9; i++ )\n{\n    printf( \"i = %d (inside for loop)\\n\", i );   // &lt;-- i = 10 is hidden in this loop\n}\nprintf( \"i = %d (outside for loop)\\n\", i );\n</code></pre>\n\n<p>Btw, your prototype is incorrect, the return type should be <code>void</code>, not <s><code>int</code></s>.</p>\n\n<pre><code>void sub (int asdf);\n</code></pre>\n"}], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1446, "favorite_count": 0, "accepted_answer_id": 35312484, "answer_count": 7, "score": 1, "last_activity_date": 1455101791, "creation_date": 1455098576, "last_edit_date": 1495541959, "question_id": 35312034, "link": "https://stackoverflow.com/questions/35312034/variable-name-precedence-in-c", "title": "Variable name precedence in c", "body": "<p>This is <a href=\"https://stackoverflow.com/questions/35309562/is-passing-a-global-variable-to-functions-anyways-problematic\">a follow up question</a></p>\n\n<p>Consider following example code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint asdf = 5;\nint main(void) {\n    sub(10);\n    return 0;\n}\nint sub (int asdf)\n{\n    printf(\"%d\\n\",asdf);\n}\n</code></pre>\n\n<p>In this case both the global variable and the local argument use the same name, <code>asdf</code>. The code outputs <code>10</code>, so the local variable is used. No compilation error or warning is thrown.</p>\n\n<p>The global variable is still accessible from within <code>sub()</code>, as evidenced by when I change <code>sub</code>'s declaration to</p>\n\n<pre><code>int sub (int asd)\n</code></pre>\n\n<p>the code outputs 5. So I know <code>sub()</code> can access the global variable, yet it does not. </p>\n\n<p>I was unable to find a clear definition about scope precedence in the c standard, so my question is:</p>\n\n<p>Considering the scenario above, is naming local and global variables the same merely bad practice or does it invoke errors/UB?</p>\n"}, {"tags": ["c", "switch-statement", "counting", "case-statement"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 3, "creation_date": 1455098703, "post_id": 35312014, "comment_id": 58333300, "body": "You mean count the number of &#39;case&#39; statements that you&#39;ve written or macro-generated? I don&#39;t think you could use a counter for that - they wouldn&#39;t execute unless you went through each code path. I&#39;m curious what you&#39;d need this for?"}, {"owner": {"reputation": 508, "user_id": 1659500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dc77cc2498bea2b49cab73be68bd0?s=128&d=identicon&r=PG", "display_name": "&#216;ystein Sch&#248;nning-Johansen", "link": "https://stackoverflow.com/users/1659500/%c3%98ystein-sch%c3%b8nning-johansen"}, "edited": false, "score": 2, "creation_date": 1455099397, "post_id": 35312014, "comment_id": 58333769, "body": "I would say the short answer is &quot;No, you can&#39;t&quot;. However, it sounds to me that your problem is better solvable with a dispatch table rather that switch statement. (At least think about it.)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1455099514, "post_id": 35312014, "comment_id": 58333844, "body": "Your question is possibly an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. What is it you are really trying to achieve?"}, {"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1455100857, "post_id": 35312014, "comment_id": 58334765, "body": "ugly fall-truh-cases without <code>break</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1455102823, "post_id": 35312014, "comment_id": 58336050, "body": "@PeterMiehle that occurred to me too, but I was too afraid to post it:)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5069935"}, "edited": false, "score": 0, "creation_date": 1455103362, "post_id": 35312014, "comment_id": 58336425, "body": "This can be done easily if each case value is taken from an enumeration where all the values are contiguous, and ALL of them are used in the switch block.  But in general this kind of thing isn&#39;t normally useful to know.  Are you using an enum in this manner?"}, {"owner": {"reputation": 303, "user_id": 4764204, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59681742d9cd285c1d3564a9b4fdb789?s=128&d=identicon&r=PG&f=1", "display_name": "floquet22", "link": "https://stackoverflow.com/users/4764204/floquet22"}, "edited": false, "score": 0, "creation_date": 1455106640, "post_id": 35312014, "comment_id": 58338673, "body": "of course the counter incremented in each case was nonsense."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1457095894, "post_id": 35312014, "comment_id": 59262520, "body": "Plese <b>edit your question</b> to motivate it and explain exactly <b>why</b> you are asking that. Smells like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>."}], "answers": [{"comments": [{"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 1, "creation_date": 1455104397, "post_id": 35313677, "comment_id": 58337126, "body": "was es nicht alles gibt!"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 6, "last_activity_date": 1455103009, "creation_date": 1455103009, "answer_id": 35313677, "question_id": 35312014, "link": "https://stackoverflow.com/questions/35312014/getting-the-number-of-cases-in-a-switch-case-in-c/35313677#35313677", "title": "Getting the number of cases in a switch-case in C", "body": "<p>This is horrible, but if you are under gcc you can use the <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html\">COUNTER</a> macro:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define ncase (void)__COUNTER__; case\n\nint main(void)\n{\n    int n = __COUNTER__ + 1;\n\n    switch (1 + 1) {\n        ncase 0: break;\n        ncase 1: break;\n        ncase 2: break;\n    }\n    n = __COUNTER__ - n;\n    printf(\"%d cases\\n\", n);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3 cases\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1457096406, "post_id": 35314827, "comment_id": 59262891, "body": "Notice that on some processors, a dispatch table with indirect function calls can be quite slow. <i>computed gotos</i> might be faster. See <a href=\"http://stackoverflow.com/a/35796522/841108\">my</a> answer."}], "tags": [], "owner": {"reputation": 508, "user_id": 1659500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/800dc77cc2498bea2b49cab73be68bd0?s=128&d=identicon&r=PG", "display_name": "&#216;ystein Sch&#248;nning-Johansen", "link": "https://stackoverflow.com/users/1659500/%c3%98ystein-sch%c3%b8nning-johansen"}, "is_accepted": true, "score": 7, "last_activity_date": 1455110333, "last_edit_date": 1455110333, "creation_date": 1455106060, "answer_id": 35314827, "question_id": 35312014, "link": "https://stackoverflow.com/questions/35312014/getting-the-number-of-cases-in-a-switch-case-in-c/35314827#35314827", "title": "Getting the number of cases in a switch-case in C", "body": "<p>As I commented earlier, I think you want a dispatch table rather than a switch statement. Here's a little example.</p>\n\n<p>Say you got this:</p>\n\n<pre><code>int find_the_case();\nvoid do_something();\nvoid do_something_different();\nvoid do_something_completly_different();\nvoid do_default();\n\nint main(int argc, char *argv[])\n{\n    int c = find_the_case();\n    switch(c){\n        case 0:\n           do_something();\n           break;\n        case 1:\n           do_something_different();\n           break;\n        case 5:\n           do_something_completly_different();\n           break;\n        default:\n           do_default();\n           break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Now this ca be rewritten to this:</p>\n\n<pre><code>#define MAX_NUMBER_OF_CASES 6\nint main_dispatchtable()\n{\n    void (*table[MAX_NUMBER_OF_CASES])(void)  = {\n            [0] = do_something,\n            [1] = do_something_different,\n            [5] = do_something_completly_different\n    };\n\n    int c = find_the_case();\n    if( table[c] )\n            table[c]();\n    else\n            do_default();\n\n    /* for the counting */\n    int count = 0;\n    for (int i = 0; i &lt; MAX_NUMBER_OF_CASES; i++ )\n            if( table[i] ) count++;\n\n    return 0;\n}\n</code></pre>\n\n<p>This is usually a much better way than using switch statements. Not only does it make it simpler to add more cases, but it also allows counting of cases. If you have a huge table and sparse cases you can use a hash table instead of a plain array.</p>\n\n<p>EDIT:\nOf course there are even more advantages with the dispatch table than the switch case, as you can add and remove and change the dispatch table dynamically. That may be the greatest advantage.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1457096116, "last_edit_date": 1495541266, "creation_date": 1457095750, "answer_id": 35796522, "question_id": 35312014, "link": "https://stackoverflow.com/questions/35312014/getting-the-number-of-cases-in-a-switch-case-in-c/35796522#35796522", "title": "Getting the number of cases in a switch-case in C", "body": "<p><sup>(I hope you are on Linux and using a <em>recent</em> <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> compiler)</sup></p>\n\n<p>If you want to count the <em>actual</em> number of cases as seen by the compiler (think of <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Case-Ranges.html\" rel=\"nofollow noreferrer\">case ranges</a>), you need to know the compiler internal representations, and you could, if compiling with a recent <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>, customize your compiler using <a href=\"http://gcc-melt.org/\" rel=\"nofollow noreferrer\">GCC MELT</a> and coding our own MELT extension.</p>\n\n<p>BTW, the complexity or efficiency of a <code>switch</code> statement is not only (or mostly) related to the number of cases (since the <em>distribution</em> of cases matters a big lot). See the references <a href=\"https://stackoverflow.com/a/35416290/841108\">here</a>.</p>\n\n<p>Perhaps you might simply use the <a href=\"http://gcc-melt.org/tutousemelt.html\" rel=\"nofollow noreferrer\"><code>findgimple</code> mode</a> of  <a href=\"http://gcc-melt.org/\" rel=\"nofollow noreferrer\">GCC MELT</a> to find <code>switch</code> gimple statements which are wide enough.</p>\n\n<p>Maybe you want <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Labels-as-Values.html\" rel=\"nofollow noreferrer\">computed gotos</a> for <a href=\"https://en.wikipedia.org/wiki/Threaded_code\" rel=\"nofollow noreferrer\">threaded code</a>...</p>\n"}], "owner": {"reputation": 303, "user_id": 4764204, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59681742d9cd285c1d3564a9b4fdb789?s=128&d=identicon&r=PG&f=1", "display_name": "floquet22", "link": "https://stackoverflow.com/users/4764204/floquet22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1446, "favorite_count": 1, "accepted_answer_id": 35314827, "answer_count": 3, "score": 2, "last_activity_date": 1457096116, "creation_date": 1455098519, "question_id": 35312014, "link": "https://stackoverflow.com/questions/35312014/getting-the-number-of-cases-in-a-switch-case-in-c", "title": "Getting the number of cases in a switch-case in C", "body": "<p>Is it possible to get the number of cases in a switch case in C without manually adding a counter variable which is incremented in each case?</p>\n"}, {"tags": ["javascript", "c", "hardware-interface"], "answers": [{"comments": [{"owner": {"reputation": 19168, "user_id": 48067, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c4ae44b728231749396d79e7823a9461?s=128&d=identicon&r=PG", "display_name": "pedalpete", "link": "https://stackoverflow.com/users/48067/pedalpete"}, "edited": false, "score": 0, "creation_date": 1455102644, "post_id": 35311853, "comment_id": 58335938, "body": "unfortunately, that won&#39;t work. The blinkm chip expects the format provided as per the datasheet <code>{\u2018n\u2019,R,G,B}</code> I understand it is not valid javascript, which is why I&#39;m trying to figure out how to encode it to be accepted."}, {"owner": {"reputation": 398, "user_id": 5871187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hu64h.jpg?s=128&g=1", "display_name": "S Dao", "link": "https://stackoverflow.com/users/5871187/s-dao"}, "reply_to_user": {"reputation": 19168, "user_id": 48067, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c4ae44b728231749396d79e7823a9461?s=128&d=identicon&r=PG", "display_name": "pedalpete", "link": "https://stackoverflow.com/users/48067/pedalpete"}, "edited": false, "score": 1, "creation_date": 1455103857, "post_id": 35311853, "comment_id": 58336765, "body": "The blinkm datasheet said: <b>Each command below is listed with its \u201cformat\u201d overview.  This \u201cformat\u201d is similar to how byte  arrays are defined in Java (e.g. Processing) and C (e.g. Arduino).</b> Maybe you should try [ 0x6e, val.r , val.g, val.b ]"}, {"owner": {"reputation": 19168, "user_id": 48067, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c4ae44b728231749396d79e7823a9461?s=128&d=identicon&r=PG", "display_name": "pedalpete", "link": "https://stackoverflow.com/users/48067/pedalpete"}, "edited": false, "score": 0, "creation_date": 1455134401, "post_id": 35311853, "comment_id": 58358387, "body": "my apologies, I missed that statement. I will try later when I&#39;m with the hardware again."}, {"owner": {"reputation": 19168, "user_id": 48067, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c4ae44b728231749396d79e7823a9461?s=128&d=identicon&r=PG", "display_name": "pedalpete", "link": "https://stackoverflow.com/users/48067/pedalpete"}, "edited": false, "score": 0, "creation_date": 1455343246, "post_id": 35311853, "comment_id": 58458947, "body": "though I still haven&#39;t got this working, it has resolved the error, so I&#39;m going to assume you are correct."}], "tags": [], "owner": {"reputation": 398, "user_id": 5871187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hu64h.jpg?s=128&g=1", "display_name": "S Dao", "link": "https://stackoverflow.com/users/5871187/s-dao"}, "is_accepted": true, "score": 1, "last_activity_date": 1455104941, "last_edit_date": 1455104941, "creation_date": 1455098090, "answer_id": 35311853, "question_id": 35311040, "link": "https://stackoverflow.com/questions/35311040/passing-c-format-to-nodejs-buffer/35311853#35311853", "title": "passing C format to nodejs buffer", "body": "<p>Because the <code>{ 'n', val.r , val.g, val.b }</code> is not object format (lack of key). Change to array <code>[0x6e, val.r , val.g, val.b]</code> or <code>{ 'key1': 0x6e, 'key2': val.r , 'key3': val.g, 'key4': val.b }</code></p>\n"}], "owner": {"reputation": 19168, "user_id": 48067, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/c4ae44b728231749396d79e7823a9461?s=128&d=identicon&r=PG", "display_name": "pedalpete", "link": "https://stackoverflow.com/users/48067/pedalpete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 35311853, "answer_count": 1, "score": 2, "last_activity_date": 1455104941, "creation_date": 1455095917, "question_id": 35311040, "link": "https://stackoverflow.com/questions/35311040/passing-c-format-to-nodejs-buffer", "title": "passing C format to nodejs buffer", "body": "<p>I'm trying to use a blinkm led from node.js using the node i2c-bus package.</p>\n\n<p>The problem I'm having is that the blinkm expects the color of the led to be set using the format\n<code>{'n',R,G,B}</code>, which will actually be <code>{'n',0xff,0xee,0x30}</code>.</p>\n\n<p>Using the i2c-bus, I am passing the above format as a buffer, so in node, I have written this function to take an rgb object and return it as a buffer in the correct format</p>\n\n<pre><code>function formatBuffer(val) {\n   return new Buffer({'n', val.r , val.g, val.b});\n}\n</code></pre>\n\n<p>and then call it with </p>\n\n<pre><code>formatBuffer({r:0xff, g:0xee, b:0x30});\n</code></pre>\n\n<p>unfortunately, this returns an error <code>unexpected token ,</code> which I'm assuming is the first comma after then 'n'.</p>\n\n<p>I've tried wrapping the value in a string, which doesn't through the error, but also doesn't seem to work. </p>\n\n<p>Any suggestions on how I can get around this and pass the right format through javascript to the blinkm led?</p>\n"}, {"tags": ["c", "conditional-statements", "c-preprocessor"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1455097669, "post_id": 35311017, "comment_id": 58332620, "body": "I assume you mean <code>#if defined(A) || (defined(B) &amp;&amp; defined(C))</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 5854072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-8_Cazot77qg/AAAAAAAAAAI/AAAAAAAAKV4/Tcd89LNnMno/photo.jpg?sz=128", "display_name": "Shahar Lahav", "link": "https://stackoverflow.com/users/5854072/shahar-lahav"}, "is_accepted": false, "score": 0, "last_activity_date": 1455096261, "creation_date": 1455096261, "answer_id": 35311141, "question_id": 35311017, "link": "https://stackoverflow.com/questions/35311017/multiple-defined-conditions-in-preprocessing/35311141#35311141", "title": "Multiple defined conditions in preprocessing", "body": "<p>Yes it should work because the preprocessor will check first the parentheses.</p>\n"}, {"tags": [], "owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "is_accepted": true, "score": 2, "last_activity_date": 1455100182, "last_edit_date": 1592644375, "creation_date": 1455100182, "answer_id": 35312663, "question_id": 35311017, "link": "https://stackoverflow.com/questions/35311017/multiple-defined-conditions-in-preprocessing/35312663#35312663", "title": "Multiple defined conditions in preprocessing", "body": "<p>In C99 standard</p>\n<blockquote>\n<h1>6.10 Preprocessing directives</h1>\n<p><em>if-group:</em></p>\n<p><strong>#if</strong> <em>constant-expression new-line group<sub>opt</sub></em></p>\n<h1>6.6.3</h1>\n<p>Constant expressions shall not contain assignment, increment, decrement, function-call, or comma operators, except when they are contained within a subexpression that is not evaluated</p>\n</blockquote>\n<p><code>defined(A) || (defined(B) &amp;&amp; defined(C))</code> is of course a valid constant expression, so it must work</p>\n"}], "owner": {"reputation": 795, "user_id": 432679, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/22247bc17938a2d8b666b708d1a67e5d?s=128&d=identicon&r=PG", "display_name": "or.nomore", "link": "https://stackoverflow.com/users/432679/or-nomore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 35312663, "answer_count": 2, "score": 1, "last_activity_date": 1455103863, "creation_date": 1455095853, "last_edit_date": 1455098233, "question_id": 35311017, "link": "https://stackoverflow.com/questions/35311017/multiple-defined-conditions-in-preprocessing", "title": "Multiple defined conditions in preprocessing", "body": "<p>I know that I can make some complex conditions like:</p>\n\n<pre><code>#if defined(A) || defined(B) || defined(C)\n</code></pre>\n\n<p>But, if I want a condition like:</p>\n\n<pre><code>A || (B &amp;&amp; C)\n</code></pre>\n\n<p>Can I use parentheses or the preprocessor will ignore it and force me to write some nested condition?</p>\n\n<p>I have tried:</p>\n\n<pre><code>#if defined(A) || (defined(B) &amp;&amp; defined(C))\n</code></pre>\n\n<p>and it works. But just for making sure it isn't platform/compiler dependent or anything else because I couldn't find any example like that.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455095859, "post_id": 35310910, "comment_id": 58331374, "body": "The error generates because during your program you are declaring <code>extern YYSTYPE yylval;</code> more then once."}, {"owner": {"reputation": 3, "user_id": 5705384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5292371645a841f1cb7ce23d690ef52?s=128&d=identicon&r=PG&f=1", "display_name": "Paco Lilzz", "link": "https://stackoverflow.com/users/5705384/paco-lilzz"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455096627, "post_id": 35310910, "comment_id": 58331911, "body": "Yes, there are numerous independent folders. And each folder has a makefile and contain extern YYSTYPE yylval; The very top level has a makefile too.    I don&#39;t think I can get rid of  extern YYSTYPE yylval, there are too many of them.  50 independent folders."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455096778, "post_id": 35310910, "comment_id": 58332003, "body": "What makes you think you can declare an extern more then once? Name them differently."}, {"owner": {"reputation": 5027, "user_id": 2158495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X1NAz.jpg?s=128&g=1", "display_name": "Bryan Olivier", "link": "https://stackoverflow.com/users/2158495/bryan-olivier"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455099494, "post_id": 35310910, "comment_id": 58333828, "body": "@Magisch: actually you can declare an extern more than once, it should be declared without extern exactly once in one of the linked modules. Assuming &#39;gcc&#39; is used, the error says that the keyword &#39;extern&#39; is used twice on the same variable (yylval). Look into y.tab.c. It is possible that YYSTYPE is a #define with &#39;extern&#39; in it also."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1455100656, "post_id": 35310910, "comment_id": 58334621, "body": "Why do you have extern <code>yylval</code> in <code>y.tab.c</code> file? <code>yylval</code> is variable generated by <code>Yacc</code>, not extern variable.  Also, edit your question, explain your problem little bit more."}, {"owner": {"reputation": 3, "user_id": 5705384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5292371645a841f1cb7ce23d690ef52?s=128&d=identicon&r=PG&f=1", "display_name": "Paco Lilzz", "link": "https://stackoverflow.com/users/5705384/paco-lilzz"}, "edited": false, "score": 0, "creation_date": 1455231709, "post_id": 35310910, "comment_id": 58410840, "body": "OK,  still throw me an error after I added the // which is a comment                                                                               .y.tab.c:557:1: error: duplicate \u2018extern\u2019  //extern YYSTYPE yylval;  ^ make[1]: *** [pat_decl_y.lo] Error 1 make[1]: Leaving directory `/home/lilzz/alliance-5.0/ppt/src&#39; make: *** [all-recursive] Error 1 lilzz@lilzz-Latitude-E6400:~/alliance-5.0/ppt$"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8798489, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8cae173be02c6a7d5c554a394941de56?s=128&d=identicon&r=PG", "display_name": "user8798489", "link": "https://stackoverflow.com/users/8798489/user8798489"}, "is_accepted": false, "score": 1, "last_activity_date": 1508371865, "last_edit_date": 1508371865, "creation_date": 1508368983, "answer_id": 46820672, "question_id": 35310910, "link": "https://stackoverflow.com/questions/35310910/duplicate-extern-in-a-yacc-like-parsers-in-c/46820672#46820672", "title": "duplicate \u2018extern\u2019 in a Yacc-like parsers in C", "body": "<p>You will get that error when you run it in alliance/src directory. </p>\n\n<p>Build it in a separate directory like this:</p>\n\n<pre><code>mkdir your_alliance_top_directory/build\ncd your_alliance_top_directory/build\n../alliance/configure\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5705384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5292371645a841f1cb7ce23d690ef52?s=128&d=identicon&r=PG&f=1", "display_name": "Paco Lilzz", "link": "https://stackoverflow.com/users/5705384/paco-lilzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508371865, "creation_date": 1455095555, "question_id": 35310910, "link": "https://stackoverflow.com/questions/35310910/duplicate-extern-in-a-yacc-like-parsers-in-c", "title": "duplicate \u2018extern\u2019 in a Yacc-like parsers in C", "body": "<pre><code>#Bison implementation for Yacc-like parsers in C\n\ny.tab.c:557:1: error: duplicate \u2018extern\u2019\n extern YYSTYPE yylval;\n ^\nmake[2]: *** [pat_decl_y.lo] Error 1\nmake[2]: Leaving directory `/alliance-5.0/ppt/src'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/alliance-5.0/ppt'\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>how do I fix this?\nThis is standard file. I don't know why generate an error like that.</p>\n"}, {"tags": ["c", "linux", "multithreading", "sockets", "software-design"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1455096234, "post_id": 35310878, "comment_id": 58331651, "body": "What you mean by <code>linux threads - 1 process</code>? Are they POSIX threads mapped to single kernel thread associated with single user-space process? So, they are actually <b>user-level threads</b>, scheduled in user space only. In that case, any system call, performed by one of the threads, blocks all threads until it returns."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1455097976, "post_id": 35310878, "comment_id": 58332818, "body": "Rather than having your thread <code>read(ALOT)</code>, have it <code>while(!done) { read(A_LITTLE_BIT); sleep(0); }</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455103001, "post_id": 35310878, "comment_id": 58336184, "body": "Yes - don&#39;t understand how it&#39;s scheduled.  Normally, I would suggest lowering the priority of the logger thread, but with your design, I&#39;m not sure that&#39;s possible."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455103118, "post_id": 35310878, "comment_id": 58336257, "body": "Also, this is SO.  We don&#39;t pat watchdogs here, we kick them:)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455103383, "post_id": 35310878, "comment_id": 58336437, "body": "The usefulness of watchdogs in a mutithreaded system is itself somewhat dubious.  A hardware watchdog that is kicked by some idle thread every second is still fine for detecting total failures, but monitoring each thread in watchdog-manner is much less useful."}], "owner": {"reputation": 5654, "user_id": 2735434, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78c287cbf5caae399b4f1ad45d9178b6?s=128&d=identicon&r=PG&f=1", "display_name": "dexterous", "link": "https://stackoverflow.com/users/2735434/dexterous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455095488, "creation_date": 1455095488, "question_id": 35310878, "link": "https://stackoverflow.com/questions/35310878/how-to-avoid-a-task-to-do-time-consuming-processing", "title": "How to avoid a task to do time consuming processing?", "body": "<p>I have an old embedded system model having linux threads - 1 process. Each thread or tasks speaks to each other by posting events. Once the event is posted, the thread reads the data from the sockbuffer. Sometime, this data may be too much. Thus, the task will be busy handling reading that sockbuffer. Also, there is one special task - that logs the entire user input history onto a RAM disk file. However, this comes into the action only one user clicks save button.</p>\n\n<p>Condition - We don't have any control on the amount of data to be processed. This can be small or too large. Secondly, this is an embedded system, so we keep checking the health by checking whether the task is able to pat the watchdog or not.</p>\n\n<p>Observation - </p>\n\n<ol>\n<li><p>If the data is too much, then sock buffer read will take some time. Thus, it can cause other tasks to starve and hence it will cause a crash.</p></li>\n<li><p>If the user history is too much, then writing the entire history(max) even on a ram-disk will consume time. Thus, all these will lead other tasks to starve i.e. not able to pat the wd. Thus, it will lead to a crash.</p></li>\n</ol>\n\n<p>Problem - I can't redesign this software since it is ages old. Only, I can do some surgery or intelligent code to avoid these issues. What is the best way to fix these design issues?</p>\n\n<p>-> I am using C, Linux. </p>\n"}, {"tags": ["c", "arrays", "pointers", "multidimensional-array", "segmentation-fault"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455095522, "post_id": 35310798, "comment_id": 58331147, "body": "What stops you from allocating 100 for a 10x10 array and just using it as a 10x10 array?"}, {"owner": {"reputation": 21, "user_id": 4933127, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965ad4451c8a7e56bfdf7d5f27114652?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smirnov", "link": "https://stackoverflow.com/users/4933127/alex-smirnov"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455095598, "post_id": 35310798, "comment_id": 58331182, "body": "The fact that I would later dynamically relocate space for chosen string arrays."}, {"owner": {"reputation": 21, "user_id": 4933127, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965ad4451c8a7e56bfdf7d5f27114652?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smirnov", "link": "https://stackoverflow.com/users/4933127/alex-smirnov"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455095752, "post_id": 35310798, "comment_id": 58331294, "body": "example with 3x3: initially it would look like that: {{hi, my, name}, {one, two, three}, {red, green, blue}}. but later I might need to change it something like: {{hi, my, name, is, Alex}, {one, two}, {cyan, magenta, yellow, key}}"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1455101812, "post_id": 35310798, "comment_id": 58335408, "body": "char **array is not a multidimensional array, this =&gt;&gt; char array[SIZE][SIZE] is a multidimensional array."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1455095649, "creation_date": 1455095649, "answer_id": 35310941, "question_id": 35310798, "link": "https://stackoverflow.com/questions/35310798/multidimensional-array-on-the-heap-c/35310941#35310941", "title": "Multidimensional array on the heap - C", "body": "<p>You never dereference <code>aoa</code> inside the function, so you just overwrite the argument's local value. Function arguments are passed by value in C. You also shouldn't need to alllocate <em>two</em> string arrays, that doesn't seem right.</p>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1455095760, "creation_date": 1455095760, "answer_id": 35310983, "question_id": 35310798, "link": "https://stackoverflow.com/questions/35310798/multidimensional-array-on-the-heap-c/35310983#35310983", "title": "Multidimensional array on the heap - C", "body": "<p>You reserve space for a local variable in <code>parse()</code>, you need to pass a pointer to <code>array</code> from <code>main</code> and then dereference inside the function:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid parse(char ****aoa)\n{\n    char *string = calloc(9, sizeof(char));        //create a string of size 8+1\n    strcpy(string, \"hi world\");                   // put text in that array\n    char **array = calloc(10, sizeof(char *));    //create an array of strings\n    *aoa = calloc(10, sizeof(char *));             //create and array of arrays\n    *(aoa[0]) = array;                               //assign string array to the 0th elements of new array\n    array[0] = string;                            //assign our string to 0th element of string carry\n    printf(\"%s\\n\", *(aoa[0][0]));                    //print 0th element of 0th array. \n}\n\n\nint main()\n{\n    char ***array = NULL;\n    parse(&amp;array);\n    printf(\"%s\\n\", array[0][0]);\n    return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1280, "user_id": 4932403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uLzID.jpg?s=128&g=1", "display_name": "KeylorSanchez", "link": "https://stackoverflow.com/users/4932403/keylorsanchez"}, "is_accepted": false, "score": 1, "last_activity_date": 1455098851, "last_edit_date": 1455098851, "creation_date": 1455095895, "answer_id": 35311032, "question_id": 35310798, "link": "https://stackoverflow.com/questions/35310798/multidimensional-array-on-the-heap-c/35311032#35311032", "title": "Multidimensional array on the heap - C", "body": "<p>The problem tragically lies in your main. You send your variable array to the parse function as a value, hence, it is not changed by parse and stays NULL in the MAIN. The prototype of your function parse should be </p>\n\n<pre><code>void parse(char ****aoa)\n</code></pre>\n\n<p>and you should send it to the main like this : </p>\n\n<pre><code>parse(&amp;array)\n</code></pre>\n\n<p>But you are overcomplicating the code. Try to initiate your array of arrays elsewhere instead of passing a pointer to it in the function. for example :</p>\n\n<pre><code>char ***getArray(void)\n{\nchar ***ret;                                   //the array you return\nchar *string = calloc(9, sizeof(char));        //create a string of size 8+1\nstrcpy(string, \"hi world\");                   // put text in that array\nchar **array = calloc(10, sizeof(char **));    //create an array of strings\nret = calloc(10, sizeof(char ***));             //create and array of arrays\nret[0] = array;                               //assign string array to the 0th elements of new array\narray[0] = string;                            //assign our string to 0th element of string carry\nreturn (ret);\n}\n\n\nint main()\n{\nchar ***array = getArray();\nprintf(\"%s\\n\", array[0][0]);\nreturn (0);\n}\n</code></pre>\n\n<p>And by the way, always verify that your allocations did not fail.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1455101769, "last_edit_date": 1455101769, "creation_date": 1455101321, "answer_id": 35313096, "question_id": 35310798, "link": "https://stackoverflow.com/questions/35310798/multidimensional-array-on-the-heap-c/35313096#35313096", "title": "Multidimensional array on the heap - C", "body": "<p>There is a sound rule of thumb saying that if you ever find yourself in need of more than two levels of indirection, then your program design is bad. (\"Three star programming\")</p>\n\n<p>You are also using pointer-based lookup-tables rather than arrays. This causes segmentation and prevents you to regard the allocated result as a chunk of contiguous memory. </p>\n\n<p>On top of that, your code has several other issues. \nI would consider rewriting it from scratch and actually use multi-dimensional arrays instead. Here is a working example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nbool create_string_array2d (size_t x, \n                            size_t y, \n                            size_t max_length, \n                            char (**string_array)[x][y][max_length]);\n\nvoid print_string_array2d (size_t x,\n                           size_t y,\n                           size_t max_length,\n                           char string_array[x][y][max_length]);\n\nstatic void fill_with_junk (size_t x,\n                            size_t y,\n                            size_t max_length,\n                            char string_array[x][y][max_length]);\n\nint main()\n{\n  const size_t X = 9;\n  const size_t Y = 10;\n  const size_t MAX_CHARS = sizeof(\"hi world xx yy\");\n\n  char (*array)[X][Y][MAX_CHARS];\n  bool result;\n\n  result = create_string_array2d(X, Y, MAX_CHARS, &amp;array);\n\n  if(result == false)\n  {\n    printf(\"out of memory, halt &amp; catch fire\");\n    return 0;\n  }\n\n  fill_with_junk(X, Y, MAX_CHARS, *array);\n\n  print_string_array2d(X, Y, MAX_CHARS, *array);\n\n  free(array);\n\n  return 0;\n}\n\n\nbool create_string_array2d (size_t x, \n                            size_t y, \n                            size_t max_length, \n                            char (**string_array)[x][y][max_length])\n{\n  *string_array = calloc(1, sizeof(char[x][y][max_length]));\n\n  return string_array != NULL;\n}\n\nvoid print_string_array2d (size_t x,\n                           size_t y,\n                           size_t max_length,\n                           char string_array[x][y][max_length])\n{\n  for(size_t i=0; i&lt;x; i++)\n  {\n    for(size_t j=0; j&lt;y; j++)\n    {\n      printf(\"%s\\n\", string_array[i][j] );\n    }\n    printf(\"\\n\");\n  }\n}\n\nstatic void fill_with_junk (size_t x,\n                            size_t y,\n                            size_t max_length,\n                            char string_array [x][y][max_length])\n{\n  for(size_t i=0; i&lt;x; i++)\n  {\n    for(size_t j=0; j&lt;y; j++)\n    {\n      char junk [sizeof(\"hi world xx yy \")] = \"hi world \";\n      char num  [sizeof(\"xx \")];\n      sprintf(num, \"%.2d \", (int)i);\n      strcat(junk, num);\n      sprintf(num, \"%.2d\", (int)j);\n      strcat(junk, num);\n\n      strcpy(string_array[i][j], junk);\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4933127, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/965ad4451c8a7e56bfdf7d5f27114652?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Smirnov", "link": "https://stackoverflow.com/users/4933127/alex-smirnov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1455101769, "creation_date": 1455095233, "last_edit_date": 1455095526, "question_id": 35310798, "link": "https://stackoverflow.com/questions/35310798/multidimensional-array-on-the-heap-c", "title": "Multidimensional array on the heap - C", "body": "<p>I am learning C and trying to make a function that would create an array of arrays of strings.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid parse(char ***aoa)\n{\nchar *string = calloc(9, sizeof(char));        //create a string of size 8+1\nstrcpy(string, \"hi world\");                   // put text in that array\nchar **array = calloc(10, sizeof(char *));    //create an array of strings\naoa = calloc(10, sizeof(char *));             //create and array of arrays\naoa[0] = array;                               //assign string array to the 0th elements of new array\narray[0] = string;                            //assign our string to 0th element of string carry\nprintf(\"%s\\n\", aoa[0][0]);                    //print 0th element of 0th array. \n}\n\n\nint main()\n{\nchar ***array = NULL;\nparse(array);\nprintf(\"%s\\n\", array[0][0]);\nreturn 1;\n}\n</code></pre>\n\n<p>The aoa (array of arrays) is on the heap so it should be the same for both methods. It does print \"hi world\" in the parse function, but gives Segmentation Fault in main, what is the problem with my code?</p>\n\n<p>Obviously I need to free() everything and do error checking, but I removed it to show the gist of the problem</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 1, "creation_date": 1455094551, "post_id": 35310536, "comment_id": 58330556, "body": "What should this program do? Do not try to fool us, as I don&#39;t think this is the actual code. It does not compile, it does not have a semicolon in the function call. You have just handwritten the code. Copy paste the code."}], "answers": [{"tags": [], "owner": {"reputation": 2337, "user_id": 829788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375c28070fc47d17c1bae8ad5396c8e0?s=128&d=identicon&r=PG", "display_name": "Muhammad Usama", "link": "https://stackoverflow.com/users/829788/muhammad-usama"}, "is_accepted": true, "score": 1, "last_activity_date": 1455095034, "creation_date": 1455095034, "answer_id": 35310733, "question_id": 35310536, "link": "https://stackoverflow.com/questions/35310536/segmentation-fault-in-ubuntu/35310733#35310733", "title": "Segmentation Fault in Ubuntu", "body": "<p>You are passing the value of an environment variable $gjdvc1A as an argument. And your program does not have any argument checking, it will always crash when the value for the environment variable is not set</p>\n"}, {"tags": [], "owner": {"reputation": 806, "user_id": 1482201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/536d19e96ddde3c04777185e4e418957?s=128&d=identicon&r=PG", "display_name": "tano", "link": "https://stackoverflow.com/users/1482201/tano"}, "is_accepted": false, "score": 0, "last_activity_date": 1455095528, "last_edit_date": 1455095528, "creation_date": 1455095103, "answer_id": 35310758, "question_id": 35310536, "link": "https://stackoverflow.com/questions/35310536/segmentation-fault-in-ubuntu/35310758#35310758", "title": "Segmentation Fault in Ubuntu", "body": "<p>First you have to make some fixes to compile the program.</p>\n\n<pre><code># include &lt;stdio.h&gt;\nint lcount(char str[]) {\n  int i=0;\n  while(str[i]!='\\0')\n  {\n    i++;\n  }\n  if (i&lt;5||i&gt;15)\n    printf(\"0\");\n  else\n   printf(\"1\");\n}\n\nint main(int argc , char *argv[])\n{\n  lcount( argv[1]);\n}\n</code></pre>\n\n<p>Then, the problem is not in your code (even if it should be heavily improved!). The problem is that you are calling it with an empty argument because <code>$gjdvc1A</code> is evaluated as an empty variable by the shell, and since you do not have any safety check in your code it will result in a segmentation fault.</p>\n\n<p><strong>Solution</strong></p>\n\n<ul>\n<li>Wrap program arguments in single quotes if you don't want them to be evaluated by the shell</li>\n<li>Always perform safety check on program arguments! </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "is_accepted": false, "score": 0, "last_activity_date": 1455095579, "last_edit_date": 1455095579, "creation_date": 1455095278, "answer_id": 35310810, "question_id": 35310536, "link": "https://stackoverflow.com/questions/35310536/segmentation-fault-in-ubuntu/35310810#35310810", "title": "Segmentation Fault in Ubuntu", "body": "<p>Well, I don't know about this problem very well, but I think I got the answer.</p>\n\n<p>Basically, <code>argv[]</code> is an array hat holds your command line parameters, <code>argv[1]</code> is the first one (other than the command representation itself in <code>argv[0]</code>, of course).</p>\n\n<p>Well, when executing the program, when you pass the argument <code>$gjdvc1A</code>, the shell is evaluating it as an empty variable because of the symbol <code>$</code>. </p>\n\n<p>Also, your program has a mistake:</p>\n\n<p>Change <code>lcount( argv[1])</code> to <code>lcount( argv[1]);</code></p>\n\n<p>To pass an argument with <code>$</code> in the front, just put a <code>\\</code> which escapes the character.</p>\n\n<p>This program you have written is bad, and you should do error checking, and of course, safety checks on arguments.</p>\n\n<p>To make this program be better, use <code>int main</code> and put a <code>return 0</code> at the end of the <code>main</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 43502, "user_id": 377953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hm9UN.jpg?s=128&g=1", "display_name": "taskinoor", "link": "https://stackoverflow.com/users/377953/taskinoor"}, "is_accepted": false, "score": 0, "last_activity_date": 1455095401, "creation_date": 1455095401, "answer_id": 35310845, "question_id": 35310536, "link": "https://stackoverflow.com/questions/35310536/segmentation-fault-in-ubuntu/35310845#35310845", "title": "Segmentation Fault in Ubuntu", "body": "<p>When you pass an argument started with <code>$</code> symbol in bash, bash treats it as a variable and try to get the value of that variable before passing that to the program. So when you are running <code>./a.out $gjdvc1A</code> bash actually looks for variable <code>gjdvc1A</code> and since there is no variable with that name it passes nothing as <code>argv[1]</code>. In other words this is equivalent to running <code>./a.out</code> without any argument. So when you try to access <code>str[0]</code> inside <code>lcount</code> function, you are trying to access a garbage address and thus getting the segmentation fault. </p>\n\n<p>To solve the issue you need to escape <code>$</code> or use quote while calling to tell bash not to treat it as a variable.</p>\n\n<pre><code>./a.out \\$gjdvc1A\n</code></pre>\n\n<p>or</p>\n\n<pre><code>./a.out '$gjdvc1A'\n</code></pre>\n\n<p>In addition to this issue there are other problems too:</p>\n\n<ul>\n<li>You should use <code>int</code> as return type of <code>main</code> and call <code>return 0;</code> at end of main.</li>\n<li>There is a missing semicolon at line <code>lcount( argv[1])</code>.</li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 5907260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1015836181819720/picture?type=large", "display_name": "Mayank Agrawal", "link": "https://stackoverflow.com/users/5907260/mayank-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 35310733, "answer_count": 4, "score": 1, "last_activity_date": 1455102126, "creation_date": 1455094378, "last_edit_date": 1455102126, "question_id": 35310536, "link": "https://stackoverflow.com/questions/35310536/segmentation-fault-in-ubuntu", "title": "Segmentation Fault in Ubuntu", "body": "<p>I keep getting Segmentation Fault Error when provided with the following arguments in Ubuntu</p>\n\n<pre><code>gcc program.c\n./a.out $gjdvc1A\n</code></pre>\n\n<p>In the following code </p>\n\n<pre><code># include &lt;stdio.h&gt;\n int lcount(char str[])\n { int i=0;\n     while(str[i]!='\\0')\n     {\n         i++;\n     }\n     if (i&lt;5||i&gt;15)\n        printf(\"0\");\n     else\n        printf(\"1\");\n }\nmain(int argc , char *argv[])\n\n{\n\n\n    lcount( argv[1]);\n\n\n}\n</code></pre>\n\n<p>Can any body help me and tell that why is this happening</p>\n"}, {"tags": ["c++", "c", "windows", "usb", "hid"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1455106438, "post_id": 35310292, "comment_id": 58338520, "body": "Needs more code, what&#39;s <code>pHidFuncs</code> ? Remember: there&#39;s a significant stack of drivers between your application and any USB device. You can&#39;t just send raw bytes from your app to an USB port on your computer, like you&#39;d do with RS232."}], "owner": {"reputation": 33, "user_id": 5678228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42dc0639687694649a113d5e535ab193?s=128&d=identicon&r=PG&f=1", "display_name": "Jiggy", "link": "https://stackoverflow.com/users/5678228/jiggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455099378, "creation_date": 1455093663, "last_edit_date": 1455099378, "question_id": 35310292, "link": "https://stackoverflow.com/questions/35310292/restarting-usb-touchscreen-device-from-the-touchscreen-driver", "title": "Restarting USB Touchscreen Device from the Touchscreen Driver", "body": "<p>I have a Touchscreen Device which passes the X- and Y-Coordinates over Interrupts (USB) to my Touchscreen Driver.\nWhen using more than one finger the Touchscreen Device gets stuck. In this scenario I want to restart the Touchscreen Device from the Driver.</p>\n\n<p>Is this possible with the following function?\nIf yes, how do I have to fill the pbHidPacket?</p>\n\n<pre><code>pbHidPacket[0] = 0x05; // Report ID\npbHidPacket[1] = 0x00; // Interface No. Lower\npbHidPacket[2] = 0x00; // Interface No. Upper\n\ndwErr = pHidFuncs-&gt;lpSetReport(\n    hDevice,\n    HidP_Feature,\n    pbHidPacket,\n    cbMaxHidPacket,\n    INFINITE);\n</code></pre>\n"}, {"tags": ["c", "linked-list", "nodes", "traversal"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5907203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uaSuXgx2AcA/AAAAAAAAAAI/AAAAAAAAQrA/_lRlClrs11E/photo.jpg?sz=128", "display_name": "Jigish Parikh", "link": "https://stackoverflow.com/users/5907203/jigish-parikh"}, "edited": false, "score": 0, "creation_date": 1455094458, "post_id": 35310335, "comment_id": 58330489, "body": "Hi, Thank you for prompt response. Sorry I am not following. When you say accessing the member, are you referring to 3 assignment statements? Even in the second function I am not accessing member UNTIL I reach the end and exit the while loop. I am wondering why I cannot reach up to the last element the same way and then assign whatever value required... Pardon my slow learning please!"}, {"owner": {"reputation": 1589, "user_id": 2770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2321a7b8ee2a179e16b50242ecb21c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilio Pardo", "link": "https://stackoverflow.com/users/2770092/cecilio-pardo"}, "reply_to_user": {"reputation": 75, "user_id": 5907203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uaSuXgx2AcA/AAAAAAAAAAI/AAAAAAAAQrA/_lRlClrs11E/photo.jpg?sz=128", "display_name": "Jigish Parikh", "link": "https://stackoverflow.com/users/5907203/jigish-parikh"}, "edited": false, "score": 0, "creation_date": 1455094823, "post_id": 35310335, "comment_id": 58330723, "body": "When you &quot;reach the end&quot;, you can&#39;t use <code>current</code> anymore, because now it is NULL. In the first function, it is ok, because you don&#39;t use it. In the second you need to use it, so you have to make the change an test <code>current-&gt;next</code> instead of <code>current</code>."}, {"owner": {"reputation": 75, "user_id": 5907203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uaSuXgx2AcA/AAAAAAAAAAI/AAAAAAAAQrA/_lRlClrs11E/photo.jpg?sz=128", "display_name": "Jigish Parikh", "link": "https://stackoverflow.com/users/5907203/jigish-parikh"}, "edited": false, "score": 0, "creation_date": 1455095444, "post_id": 35310335, "comment_id": 58331099, "body": "Ah! Understood! Thanks a ton."}], "tags": [], "owner": {"reputation": 1589, "user_id": 2770092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2321a7b8ee2a179e16b50242ecb21c4f?s=128&d=identicon&r=PG&f=1", "display_name": "Cecilio Pardo", "link": "https://stackoverflow.com/users/2770092/cecilio-pardo"}, "is_accepted": false, "score": 2, "last_activity_date": 1455093778, "creation_date": 1455093778, "answer_id": 35310335, "question_id": 35310222, "link": "https://stackoverflow.com/questions/35310222/linked-list-traversing-with-and-without-the-next-field/35310335#35310335", "title": "Linked list traversing with and without the next field", "body": "<p>In the second function your are accessing <code>current-&gt;MEMBER</code> after you changed it to <code>current-&gt;next</code>, while in the first one you are not. That is, in the first one you just run to end, and end up with a <code>NULL</code> pointer, but you don't use it, so it's ok. In the second one, you do use it.</p>\n"}, {"tags": [], "owner": {"reputation": 906, "user_id": 5017179, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/DfIeu.jpg?s=128&g=1", "display_name": "ReshaD", "link": "https://stackoverflow.com/users/5017179/reshad"}, "is_accepted": false, "score": 0, "last_activity_date": 1455095061, "last_edit_date": 1455095061, "creation_date": 1455094226, "answer_id": 35310487, "question_id": 35310222, "link": "https://stackoverflow.com/questions/35310222/linked-list-traversing-with-and-without-the-next-field/35310487#35310487", "title": "Linked list traversing with and without the next field", "body": "<p>In order not to mess up with your original linked-list you copy the head to the current, and then you can do what you want with that current node.\nLinked lists are generated like:</p>\n\n<pre><code>typedef struct e\n{\n   int data;\n   struct e *next;\n} node;\n</code></pre>\n\n<p>which means each node (in my example) has a data of type integer and a pointer to the next node. Let's suppose that our list has 4 objects:</p>\n\n<pre><code> 1-&gt;2-&gt;3-&gt;4-&gt;NULL\n</code></pre>\n\n<p>the first node (data=1) point to its next node (data=2) and so on till last node (data=4) which the next node does not exist so will point to NULL.</p>\n\n<p>in the function \"addatend\" in order to add new node to the end of the linked-list you should travel through the last element of the list (data=4 in my example), which the node next to it will point to NULL, so you should go through the list till the end and when you arrive there, you can add the \"newnode\".</p>\n"}], "owner": {"reputation": 75, "user_id": 5907203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uaSuXgx2AcA/AAAAAAAAAAI/AAAAAAAAQrA/_lRlClrs11E/photo.jpg?sz=128", "display_name": "Jigish Parikh", "link": "https://stackoverflow.com/users/5907203/jigish-parikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1455095061, "creation_date": 1455093385, "last_edit_date": 1455094193, "question_id": 35310222, "link": "https://stackoverflow.com/questions/35310222/linked-list-traversing-with-and-without-the-next-field", "title": "Linked list traversing with and without the next field", "body": "<p>I have written two functions while learning Linked list. First counts and returns number of nodes in the list. Second adds new node towards the end of the list. Can you please help me understand why I need to use \"current->next\" to check for NULL in my code below in the addatend function? I did not have to use it for first function. Without that my exe crashes with bad pointer...</p>\n\n<p>Thank you very much for your time and help.</p>\n\n<pre><code>int length(node * head) {\n    node * current = head;\n    int count = 0;\n\n    while(current != NULL){  // This line works as expected....\n        count ++;\n        current = current-&gt;next;\n    }\n    return count;\n}\n\nvoid addatend (node * head, int value){\n    node * newnode = (struct node *) malloc(sizeof(struct node));\n    node * current = head;\n\n    while (current != NULL){   // This line would not work?? If I use current-&gt;next != NULL it works.....\n        current = current-&gt;next;\n    }\n    current-&gt;next = newnode;\n    newnode-&gt;data = value;\n    newnode-&gt;next = NULL;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 19, "creation_date": 1455090867, "post_id": 35309562, "comment_id": 58328619, "body": "The function does not care where the parameter comes from."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1455090918, "post_id": 35309562, "comment_id": 58328645, "body": "A pointer is a pointer. It doesn&#39;t matter what is the scope of the pointed variable. BTW I&#39;d suggest to make the global static: <code>static char str[300] = {0};</code>"}, {"owner": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "edited": false, "score": 1, "creation_date": 1455091020, "post_id": 35309562, "comment_id": 58328709, "body": "What do you mean with &quot;problematic&quot;? If you mean unnecessary or possibly bad design then the answer is yes. If you mean that it won&#39;t work, then no, it will indeed work."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 4970, "user_id": 2140449, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97251fac343628ee1aad92cc3da39d99?s=128&d=identicon&r=PG", "display_name": "DarioP", "link": "https://stackoverflow.com/users/2140449/dariop"}, "edited": false, "score": 0, "creation_date": 1455091060, "post_id": 35309562, "comment_id": 58328737, "body": "@DarioP Things that could go wrong, like UB and the like, in this case."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1455092117, "post_id": 35309562, "comment_id": 58329238, "body": "@Magisch: your mention of UB should go into the question, not in comments"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1455092245, "post_id": 35309562, "comment_id": 58329300, "body": "@BasileStarynkevitch I put it in the question, thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1455117534, "post_id": 35309562, "comment_id": 58346700, "body": "Side issue: calling <code>abmeld(char *strsend)</code> with <code>char str[300]</code> is in itself a potential issue as <code>abmeld()</code>, which can change <code>str[]</code>, does not know the size of the array.  I would expect <code>abmeld(const char *strsend)</code> or <code>abmeld(char *strsend, size_t size)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455090980, "post_id": 35309610, "comment_id": 58328683, "body": "The program in question has no threading and only one program file, but thanks for pointing that out anyways."}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": false, "score": 8, "last_activity_date": 1455142466, "last_edit_date": 1455142466, "creation_date": 1455090941, "answer_id": 35309610, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic/35309610#35309610", "title": "Is passing global variables to functions problematic?", "body": "<blockquote>\n  <p>Now I already know this is unnecessary code (you can access and modify\n  the char array from within any function without passing it anyways),\n  but is this actually otherwise problematic?</p>\n</blockquote>\n\n<p>It doesn't matter to the function whether it receives locally or globally defined variable. Issues with global variables are related sometimes to the fact that you might not know from which parts of the program you are accessing/changing its value. Thread safety maybe also relevant.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 4, "creation_date": 1455107364, "post_id": 35309615, "comment_id": 58339215, "body": "Global constants are much less harmful in this respect - they don&#39;t affect reentrancy, for instance."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 29, "last_activity_date": 1455117684, "last_edit_date": 1455117684, "creation_date": 1455090966, "answer_id": 35309615, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic/35309615#35309615", "title": "Is passing global variables to functions problematic?", "body": "<p>I would say the opposite, it is almost never problematic to pass a global to a function (and it is usually dirty to use a lot of globals, the code becoming unreadable).</p>\n\n<p>A function which depends lightly (or not at all) on the global state is often <em>more readable</em> and more understandable than a function using a lot of global (or even static) variables. A global variable changed in many functions makes your program messy to understand.</p>\n\n<p><sup>(never forget that you code not only for the computer, but also for your colleagues -perhaps even yourself in a few months- who would have to improve your source code)</sup></p>\n\n<p>Also, functions using global state are typically not <a href=\"https://en.wikipedia.org/wiki/Reentrancy_%28computing%29\">reentrant</a>.</p>\n\n<p>At last, <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\">undefined behavior</a> is mostly orthogonal to global vs argument data. In particular, a <a href=\"https://en.wikipedia.org/wiki/Buffer_overflow\">buffer overflow</a> can occur both with a global variable, or with a pointer to some array  (such as an argument or some local variable) .</p>\n\n<p><sup>A very crude rule of thumb would be to avoid loading the developer's brain with more than 7 items (<a href=\"https://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two\">magical number 7, + or - 2</a>); hence the folklore rule to avoid more than 7 arguments or more than 7 globals.</sup></p>\n"}, {"comments": [{"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1455093606, "post_id": 35309658, "comment_id": 58329996, "body": "Could you complete the code to demonstrate when we have to &quot;comply with the function syntax&quot; better?"}], "tags": [], "owner": {"reputation": 5001, "user_id": 1182192, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/J6JgX.jpg?s=128&g=1", "display_name": "Abhineet", "link": "https://stackoverflow.com/users/1182192/abhineet"}, "is_accepted": false, "score": 6, "last_activity_date": 1455106976, "last_edit_date": 1455106976, "creation_date": 1455091197, "answer_id": 35309658, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic/35309658#35309658", "title": "Is passing global variables to functions problematic?", "body": "<p>No, not at all.</p>\n\n<blockquote>\n  <p>Now I already know this is unnecessary code</p>\n</blockquote>\n\n<p>Not always. In the case when your function does not have a default argument, then you have to comply with the function prototype and pass the global variable. The function won't care, whether the pointer points to local or global variable, though.</p>\n\n<pre><code>/* main.c */\nchar str[300] = {0};\nint abmeld(char *strsend)\n{\n  /* Do something...process strsend */\n  return 0;\n}\n\nint main( void )\n{\n  abmeld(str); /*Cannot pass void here as abmeld expects a char* */\n\n  char localstr[10] = {0};\n  abmeld(localstr);\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "is_accepted": false, "score": 3, "last_activity_date": 1455091221, "creation_date": 1455091221, "answer_id": 35309668, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic/35309668#35309668", "title": "Is passing global variables to functions problematic?", "body": "<p>You want to pass global variable to the function. It's simple that function you are using, requires parameter then you have to pass the parameters of the type of the argument that is required in the function.  </p>\n\n<p>Here, there is no concern or issue for passing a global variable or a local variable. You have to take care of the datatype of the argument that is to be passed.</p>\n"}, {"comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455101631, "post_id": 35313170, "comment_id": 58335278, "body": "This question is not in any way about c++ though."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1455101810, "post_id": 35313170, "comment_id": 58335404, "body": "@Magisch: Overlooked that bit, but the principle still applies to C as well. Edited."}, {"owner": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 0, "creation_date": 1455142559, "post_id": 35313170, "comment_id": 58362717, "body": "The difference to the question is: 1. the global is const 2. the global is not passed as argument to the function."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 197, "user_id": 4776414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff42db88649eeb2eabacc725ac628e7c?s=128&d=identicon&r=PG&f=1", "display_name": "StefanW", "link": "https://stackoverflow.com/users/4776414/stefanw"}, "edited": false, "score": 0, "creation_date": 1455150127, "post_id": 35313170, "comment_id": 58365632, "body": "@StefanW: In case you missed it, it&#39;s being passed to <code>printf</code>. I had to add <code>foo</code> because you can&#39;t have that <code>printf</code> statement outside a function. That said, this code also would work with <code>char global[] = </code>"}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 7, "last_activity_date": 1455107244, "last_edit_date": 1455107244, "creation_date": 1455101538, "answer_id": 35313170, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic/35313170#35313170", "title": "Is passing global variables to functions problematic?", "body": "<p>It's very, VERY common to pass globals to functions. Example:</p>\n\n<pre><code>const char* global = \"Example\";\n\nvoid foo() {\n  printf(\"%s\\n\",  global );\n}\n</code></pre>\n\n<p>Obviously this passes a global to <code>printf</code>. The C language <em>by design</em> makes this usage safe. A buggy implementation that trips over this would quickly be called out.</p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 10, "last_activity_date": 1455202567, "last_edit_date": 1455202567, "creation_date": 1455114179, "answer_id": 35317732, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic/35317732#35317732", "title": "Is passing global variables to functions problematic?", "body": "<p>There <em>is</em> a case where this could be problematic: if <code>abmeld</code> already does something with the <code>str</code> global.  As a trivial example:</p>\n\n<pre><code>extern char str[300];\n\nvoid abmeld(const char *s)\n{\n    snprintf(str, 300, \"abmeld: %s\\n\", s);\n}\n</code></pre>\n\n<p>then <code>abmeld(str)</code> has undefined behavior, because <code>snprintf</code> has undefined behavior when its destination buffer overlaps any of its inputs.</p>\n\n<p>This demonstrates one of the reasons global variables are troublesome: in order to know what's safe to pass as an argument to <code>abmeld</code>, you have to know not only that it writes to <code>str</code> (which would surely be documented), but <em>how it does that</em> \u2014 it could have been written</p>\n\n<pre><code>void abmeld(const char *s)\n{\n    size_t n = strlen(s);\n    size_t maxcopy = min(n, 300 - sizeof \"abmeld: \\n\");\n    size_t after = maxcopy + sizeof \"abmeld: \" - 1;\n\n    memmove(str + sizeof \"abmeld: \" - 1, s, maxcopy);\n    memcpy(str, \"abmeld: \", sizeof \"abmeld: \" - 1);\n    str[after] = '\\n';\n    str[after+1] = 0;\n}\n</code></pre>\n\n<p>and then it would have well-defined behavior no matter what <code>s</code> points to, as long as it's a valid C-string.</p>\n"}, {"tags": [], "owner": {"reputation": 12523, "user_id": 1835769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kannS.jpg?s=128&g=1", "display_name": "displayName", "link": "https://stackoverflow.com/users/1835769/displayname"}, "is_accepted": false, "score": 2, "last_activity_date": 1455138810, "creation_date": 1455138810, "answer_id": 35326007, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic/35326007#35326007", "title": "Is passing global variables to functions problematic?", "body": "<ol>\n<li><p>The method <code>abmeld(char *)</code> is only supposed to modify/work with the argument provided to it. While it may be bad to pass a global variable to this method, yet that doesn't prohibit anyone from calling this method with any other char *.</p>\n\n<ul>\n<li>For example, if this method checks whether the string pointed to is palindrome, then writing this method exemplifies good coding. Now anyone can call it every time he/she wants to know whether the string is palindrome or not.</li>\n</ul></li>\n<li><blockquote>\n  <p>Now I already know this is unnecessary code (you can access and modify the char array from within any function without passing it anyways), but is this actually otherwise problematic?</p>\n</blockquote>\n\n<ul>\n<li><p>It may not be unnecessary code as explained above. The purpose of writing a new method is to compartmentalize one piece of work. In other words, <em>a method should do only <strong>one thing.</em></strong> Unless the method <code>abmeld(char *)</code> has been written to exclusively modify that particular global variable (and even that may be a good thing), the code is perfectly ok the way it has been written as long as it is doing <em>one thing</em> with the argument provided to it.</p></li>\n<li><p>There are numerous examples where this code may be problematic and the problems are intuitive. For example, there may be more methods which may be modifying/working on the global string. But, those problems are the problems which arise whenever you use a global variable. To get rid of those issues, you have to get rid of the global var and not the method because it isn't the method's fault that it is being used with a global var.</p></li>\n</ul></li>\n<li><blockquote>\n  <p>Are there consequences (like hard error possibilities, or undefined behavior) that can happen as the result of passing an already globally scoped variable to a function?</p>\n</blockquote>\n\n<ul>\n<li>Cannot say this authoritatively but I don't know of any. Didn't read any book either which advised against passing global vars to functions.</li>\n</ul></li>\n</ol>\n"}], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10404, "favorite_count": 0, "accepted_answer_id": 35309615, "answer_count": 7, "score": 22, "last_activity_date": 1455202567, "creation_date": 1455090707, "last_edit_date": 1455101272, "question_id": 35309562, "link": "https://stackoverflow.com/questions/35309562/is-passing-global-variables-to-functions-problematic", "title": "Is passing global variables to functions problematic?", "body": "<p>Consider following function declaration:</p>\n\n<pre><code>int abmeld(char *strsend)\n</code></pre>\n\n<p>which is called like this</p>\n\n<pre><code>abmeld(str);\n</code></pre>\n\n<p>where <strong>str</strong> is a global variable declared and initialised at the start of the program file (after the includes) like this:</p>\n\n<pre><code>char str[300] = \"\";\n</code></pre>\n\n<p>Now I already know this is unnecessary code (you can access and modify the char array from within any function without passing it anyways), but is this actually otherwise problematic? </p>\n\n<p>Are there consequences (like hard error possibilities, or undefined behavior) that can happen as the result of passing an already globally scoped variable to a function?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1455089083, "post_id": 35309086, "comment_id": 58327769, "body": "And it&#39;s a pointer :)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1455089201, "post_id": 35309086, "comment_id": 58327823, "body": "@LogicStuff; His question is legit. Not a dupe with the question you provided a link for."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1455089213, "post_id": 35309086, "comment_id": 58327833, "body": "I think the real reason would be hard to determine, but I guess people started using that definition because it kind of worked, and then it stuck."}, {"owner": {"reputation": 4070, "user_id": 2006333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/140d350dfc5e8e5d587c220dc153c04a?s=128&d=identicon&r=PG&f=1", "display_name": "Keshava GN", "link": "https://stackoverflow.com/users/2006333/keshava-gn"}, "edited": false, "score": 0, "creation_date": 1455089364, "post_id": 35309086, "comment_id": 58327906, "body": "<a href=\"https://gist.github.com/andyli/b4107c8910208fe54764\" rel=\"nofollow noreferrer\"><code>const char *</code> a does not mean that the pointed data is constant and immutable. It means just that the pointer cannot write to it.</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1455089461, "post_id": 35309086, "comment_id": 58327941, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10091825/constant-pointer-vs-pointer-on-a-constant-value\">constant pointer vs pointer on a constant value</a>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 4070, "user_id": 2006333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/140d350dfc5e8e5d587c220dc153c04a?s=128&d=identicon&r=PG&f=1", "display_name": "Keshava GN", "link": "https://stackoverflow.com/users/2006333/keshava-gn"}, "edited": false, "score": 3, "creation_date": 1455089644, "post_id": 35309086, "comment_id": 58328028, "body": "@GNKeshava Why are you repeating what OP is stating in the question?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1455093751, "post_id": 35309086, "comment_id": 58330072, "body": "Google &quot;const correctness&quot;. If you have no intention to modify a variable, why make it possible?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1565865620, "post_id": 35309086, "comment_id": 101484543, "body": "The type of something doesn&#39;t tell you much of anything about its value and what a pointer points to is its value. The type of <code>const int *p</code> is &quot;pointer to const int&quot; because when you dereference it, you get a thing of type <code>const int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1455089589, "post_id": 35309213, "comment_id": 58327994, "body": "Not my down-vote (I don&#39;t know enough C), but this makes me realise this is the kind of question that should only be tagged C or C++, but not both."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1455107119, "post_id": 35309213, "comment_id": 58339036, "body": "There is <code>const int* const ptr = &amp;obj</code> which cannot be changed to point at other objects. If <code>obj</code> is <code>const int</code>, then <code>ptr</code> absolutely points to a <code>const int</code>. Still, this is a result of the instruction sequence. It is absolutely true that the <b>C type system</b> cannot express &quot;pointer to const int&quot;."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 2, "last_activity_date": 1455089589, "last_edit_date": 1455089589, "creation_date": 1455089377, "answer_id": 35309213, "question_id": 35309086, "link": "https://stackoverflow.com/questions/35309086/why-const-int-p-is-a-pointer-to-a-const-int-is-a-wrong-explanation-but-used-w/35309213#35309213", "title": "Why &quot;const int *p is a pointer to a const int&quot; is a wrong explanation but used widely?", "body": "<p>There is not really any such thing as references/pointers to constant objects in C, only read-only references to objects.  This is confusing, because the qualifier for read-only objects is <code>const</code>.  Many textbooks and tutorials seem to gloss over this fact, as you've observed.</p>\n\n<p>The closest you can come is <code>const X *restrict p</code>, which declares <code>p</code> as pointing to an object which cannot be changed through <code>p</code> (because <code>const</code>) and must <em>only</em> be accessed through <code>p</code> (because <code>restrict</code>).  However, the compiler does not enforce <code>restrict</code>, it just might give you the wrong code if you use <code>restrict</code> incorrectly.</p>\n\n<p>So you are back to square one.  There is not really any such thing as a \"reference to a constant object\" in C, and it is somewhat unfortunate that we use <code>const</code> to mean something else.</p>\n"}, {"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1455089758, "post_id": 35309299, "comment_id": 58328085, "body": "You&#39;re not answering the question. OP already knows what <code>const int* p</code> really means."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1455089809, "post_id": 35309299, "comment_id": 58328103, "body": "I&#39;m not sure this answers the question.  I think OP is asking why <code>const int *</code> can point to an <code>int</code>."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1455090052, "post_id": 35309299, "comment_id": 58328218, "body": "@DietrichEpp; <i>why <code>const int *</code> can point to an <code>int</code></i>: that&#39;s because <code>const int *</code> only promise that the object this pointer points can&#39;t be modified using this pointer."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 1, "creation_date": 1455090229, "post_id": 35309299, "comment_id": 58328306, "body": "Yeah, I don&#39;t think the OP is confused about what <code>const int *</code> means, but rather the question is about the underlying rationale / logic / reasoning in the C standard for not supporting pointers to constant objects (which is not what a <code>const int *</code> is)."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1565865228, "last_edit_date": 1565865228, "creation_date": 1455089671, "answer_id": 35309299, "question_id": 35309086, "link": "https://stackoverflow.com/questions/35309086/why-const-int-p-is-a-pointer-to-a-const-int-is-a-wrong-explanation-but-used-w/35309299#35309299", "title": "Why &quot;const int *p is a pointer to a const int&quot; is a wrong explanation but used widely?", "body": "<blockquote>\n  <p>This code is totally valid and we don't need <code>const int a = 5</code>  </p>\n</blockquote>\n\n<p>Actually we need. In the snippet  </p>\n\n<pre><code>int a = 5;\nconst int *p = &amp;a;  \n</code></pre>\n\n<p>you shall not modify <code>a</code> by using <code>*p</code> but <code>a</code>  </p>\n\n<pre><code>a = 10;  \n</code></pre>\n\n<p>Here <code>const int *p</code> only meant that program can\u2019t use the expression <code>*p</code> to alter the value of any objects that <code>*p</code> might designate.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 3586395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5473a74ea4256efaf0e9c0cfe5d33039?s=128&d=identicon&r=PG&f=1", "display_name": "user3586395", "link": "https://stackoverflow.com/users/3586395/user3586395"}, "is_accepted": false, "score": -3, "last_activity_date": 1455090007, "creation_date": 1455090007, "answer_id": 35309409, "question_id": 35309086, "link": "https://stackoverflow.com/questions/35309086/why-const-int-p-is-a-pointer-to-a-const-int-is-a-wrong-explanation-but-used-w/35309409#35309409", "title": "Why &quot;const int *p is a pointer to a const int&quot; is a wrong explanation but used widely?", "body": "<p>When you have const int * a it means that the value stored at address \"a\" it cannot be change .</p>\n\n<pre><code>int a = 5;\nconst int *p = &amp;a;\n*p=10; /* When you try this you will raise an error because you try to change\nthe value of a read only location*/\n</code></pre>\n"}], "owner": {"reputation": 5024, "user_id": 4439794, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/ogyE1.png?s=128&g=1", "display_name": "Trevor", "link": "https://stackoverflow.com/users/4439794/trevor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "closed_date": 1455090051, "answer_count": 3, "score": 3, "last_activity_date": 1565865228, "creation_date": 1455088842, "last_edit_date": 1455115955, "question_id": 35309086, "link": "https://stackoverflow.com/questions/35309086/why-const-int-p-is-a-pointer-to-a-const-int-is-a-wrong-explanation-but-used-w", "closed_reason": "Opinion-based", "title": "Why &quot;const int *p is a pointer to a const int&quot; is a wrong explanation but used widely?", "body": "<p>Many materials mention that </p>\n\n<blockquote>\n  <p><code>const int *p</code> is a pointer to a const int.</p>\n</blockquote>\n\n<p>I really don't think so and don't get this point because <code>const int *p</code> just means that:</p>\n\n<p><strong>the value of the object p point to cannot be changed by dereferencing p</strong>.</p>\n\n<p>It does not mean:</p>\n\n<p><strong>the object p points to need to be a const.</strong></p>\n\n<p>Example:</p>\n\n<pre><code>int a = 5;\nconst int *p = &amp;a;\n</code></pre>\n\n<p>This code is totally valid and we don't need <code>const int a = 5</code></p>\n\n<p>So Why that wrong explanation is used widely?</p>\n"}, {"tags": ["c", "emacs"], "comments": [{"owner": {"reputation": 48119, "user_id": 76051, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AGDxz.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/76051/carsten"}, "edited": false, "score": 1, "creation_date": 1455088838, "post_id": 35308967, "comment_id": 58327651, "body": "maybe <a href=\"https://www.emacswiki.org/emacs/SmartTabs\" rel=\"nofollow noreferrer\">Smart Tabs</a> will help you ... btw: 23.4.1 is not really new ;)"}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 3938923, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7869e47ef194829636a91d5832b3d36b?s=128&d=identicon&r=PG&f=1", "display_name": "user62177541", "link": "https://stackoverflow.com/users/3938923/user62177541"}, "edited": false, "score": 0, "creation_date": 1455123633, "post_id": 35314432, "comment_id": 58351510, "body": "Hmm, this answer sounds great, but I&#39;ve tried this now on three systems - Emacs v25.x on Windows 7, v24.x on Ubuntu 12.x, and v23.x on Xubuntu 15.x and all of them are doing 2-space soft tabbing when I&#39;m in &quot;c-mode.&quot; My question is more about the defaults and how they&#39;ve changed over the last 5 years let&#39;s say."}], "tags": [], "owner": {"reputation": 36762, "user_id": 113848, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3d4212415bc280a21ad85d8022791fe?s=128&d=identicon&r=PG", "display_name": "legoscia", "link": "https://stackoverflow.com/users/113848/legoscia"}, "is_accepted": true, "score": 2, "last_activity_date": 1455105016, "creation_date": 1455105016, "answer_id": 35314432, "question_id": 35308967, "link": "https://stackoverflow.com/questions/35308967/emacs-now-defaults-to-2-space-soft-tabs/35314432#35314432", "title": "Emacs now defaults to 2-space soft tabs?", "body": "<p>That's still what Emacs does by default: each level of indentation is 4 spaces, tabs are considered to be 8 spaces wide, and Emacs uses the minimum amount of tabs and spaces to make up the indentation for each line.</p>\n\n<p>This is affected by the following variables:</p>\n\n<ul>\n<li><code>indent-tabs-mode</code>: this defaults to <code>t</code>.  If it is <code>nil</code>, Emacs uses only spaces to indent to the desired depth.</li>\n<li><code>tab-width</code>: this defaults to 8.  This affects how wide Emacs thinks a tab is.</li>\n<li><code>c-basic-offset</code> et al.  This determines the indentation step for each level in C files (also C++, Java and other languages using modes based on <code>cc-mode</code>). Often you'll want to type <code>C-c .</code> to use a set of settings for a particular indentation style instead.</li>\n</ul>\n\n<p>Usually you want to set these variables individually for a certain file or for a certain project.  To set them for a single file, you can include a magic comment to <a href=\"https://www.gnu.org/software/emacs/manual/html_node/emacs/Specifying-File-Variables.html#Specifying-File-Variables\" rel=\"nofollow\">set \"file variables\"</a>.  To set variables for every file in a directory and its sub-directories, place a <code>.dir-locals.el</code> file in the root directory of the project, and specify <a href=\"https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html#Directory-Variables\" rel=\"nofollow\">per-directory local variables</a>.</p>\n\n<p>One thing that Emacs doesn't directly support is the notion of using tabs exclusively for indentation. You could emulate this by setting <code>c-basic-offset</code> (or the corresponding variable for other languages) and <code>tab-width</code> to the same value, but you might be better served by <a href=\"https://www.emacswiki.org/emacs/SmartTabs\" rel=\"nofollow\">Smart Tabs</a>, as Carsten suggested in the comments.</p>\n"}], "owner": {"reputation": 188, "user_id": 3938923, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7869e47ef194829636a91d5832b3d36b?s=128&d=identicon&r=PG&f=1", "display_name": "user62177541", "link": "https://stackoverflow.com/users/3938923/user62177541"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 35314432, "answer_count": 1, "score": 0, "last_activity_date": 1455390126, "creation_date": 1455088442, "last_edit_date": 1455390126, "question_id": 35308967, "link": "https://stackoverflow.com/questions/35308967/emacs-now-defaults-to-2-space-soft-tabs", "title": "Emacs now defaults to 2-space soft tabs?", "body": "<p>I haven't used Emacs in years, and trying a fairly new one (23.4.1 on Linux) I notice that the mixed tab style I remember seems to no longer be the default indentation. It used to have 4 spaces as the first tab level, then a tab as the next tab level, then a tab plus four spaces, etc etc. I am editing a .c file.</p>\n\n<p>Does Emacs still do this <em>by default</em> at all or are such defaults a thing of the past and is it now much easier to use Emacs for those of us who use hard tabs or soft tabs but never mixed tabs and who use 2-space tabs in some cases and 4-space in others?</p>\n\n<p>UPDATE 2: Actually it's not doing 2-space soft tabs exactly, but rather once I get to the magic number of 8 spaces, then it sticks in a tab just as it always did before. So no big change and this mixed tab business is apparently still in full effect just as @legoscia says!</p>\n\n<p>UPDATE: I've tried this now on three systems - Emacs v25.x on Windows 7, v24.x on Ubuntu 12.x, and v23.x on Xubuntu 15.x and all of them are doing 2-space soft tabbing when I'm in \"c-mode.\" My question is about the defaults and how they've changed over the last let's say 5 years.</p>\n"}, {"tags": ["c", "string", "bit-manipulation"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1455086898, "post_id": 35308493, "comment_id": 58326719, "body": "You should print the values of <code>j</code> and <code>k</code> before the <code>if(j&amp;k)</code>, and I think you&#39;ll see the problem. Or learn to use a debugger, so you can step through the code and see what&#39;s going on."}], "answers": [{"comments": [{"owner": {"reputation": 1624, "user_id": 5889270, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/WP9Wo.png?s=128&g=1", "display_name": "asad_hussain", "link": "https://stackoverflow.com/users/5889270/asad-hussain"}, "edited": false, "score": 0, "creation_date": 1455087825, "post_id": 35308632, "comment_id": 58327135, "body": "Thanks. I was wrong with my logic to put inside the code.Now it&#39;s fine"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 8, "last_activity_date": 1455094099, "last_edit_date": 1455094099, "creation_date": 1455087039, "answer_id": 35308632, "question_id": 35308493, "link": "https://stackoverflow.com/questions/35308493/why-is-the-output-of-this-code-blank/35308632#35308632", "title": "Why is the output of this code blank", "body": "<p><code>j &amp; k</code> always evaluates to <code>0</code>.   </p>\n\n<pre><code>j =  0, k =    1     ==&gt; j &amp; K = 0\nj =  1, k =   10     ==&gt; j &amp; K = 0 \nj = 10, k =  100     ==&gt; j &amp; K = 0\nj = 11, k = 1000     ==&gt; j &amp; K = 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": false, "score": 1, "last_activity_date": 1455112805, "creation_date": 1455112805, "answer_id": 35317239, "question_id": 35308493, "link": "https://stackoverflow.com/questions/35308493/why-is-the-output-of-this-code-blank/35317239#35317239", "title": "Why is the output of this code blank", "body": "<p>This code works as you want:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n        char s[] = \"abcd\";\n        int i,j;\n        int y = strlen(s);\n        int z = 1 &lt;&lt; y;\n        for(i = 0; i &lt; z; i++)\n        {\n                for(j = 0; j &lt; y; j++)\n                {\n                        if(i &amp; 1 &lt;&lt; j)\n                                printf(\" %c\",s[j]);\n                }\n                putchar('\\n');\n        }\n        return 0;\n}\n</code></pre>\n\n<p>I admit that I've made extra changes in your code, which are irrelevant to your question.</p>\n\n<p>What actually matters is <code>i &amp; 1 &lt;&lt; j</code>. This checks the <code>j</code>th bit of <code>i</code>. You can also write <code>i &amp; (1 &lt;&lt; j)</code> for the sake of readability.</p>\n"}], "owner": {"reputation": 1624, "user_id": 5889270, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/WP9Wo.png?s=128&g=1", "display_name": "asad_hussain", "link": "https://stackoverflow.com/users/5889270/asad-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 35308632, "answer_count": 2, "score": 3, "last_activity_date": 1455112805, "creation_date": 1455086536, "last_edit_date": 1455095060, "question_id": 35308493, "link": "https://stackoverflow.com/questions/35308493/why-is-the-output-of-this-code-blank", "title": "Why is the output of this code blank", "body": "<p>I am trying to print the power set of a string.</p>\n\n<p>The code gets compiled successfully, but, when executed, nothing gets printed on the screen.</p>\n\n<p>I am unable to understand the reason behind this.</p>\n\n<p>Below is the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;math.h&gt;\nvoid main()\n{\n    char s[]=\"abcd\";\n    int i,j,k=1;\n    int y=strlen(s);\n    int z=pow(2,y);\n    for(i=0;i&lt;z;i++)\n    {\n        k=1;\n        for(j=0;j&lt;y;j++)\n        {\n            if(j &amp; k)\n                printf(\" %c\",s[j]);\n            k=k&lt;&lt;1;\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1006, "user_id": 1627585, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71e0036ad69d81de092d2b1aa528e684?s=128&d=identicon&r=PG", "display_name": "Matthias W.", "link": "https://stackoverflow.com/users/1627585/matthias-w"}, "edited": false, "score": 0, "creation_date": 1455087597, "post_id": 35308462, "comment_id": 58327020, "body": "Welcome to SO! Please read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask?</a> (again). Why would you want to do that? You could simply put a function call at the beginning of your main function. What are you trying to accomplish?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1006, "user_id": 1627585, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/71e0036ad69d81de092d2b1aa528e684?s=128&d=identicon&r=PG", "display_name": "Matthias W.", "link": "https://stackoverflow.com/users/1627585/matthias-w"}, "edited": false, "score": 0, "creation_date": 1455116353, "post_id": 35308462, "comment_id": 58345776, "body": "@MatthiasW.: On bare-metal embedded systems that can be required to initialise memory controller, CPU, etc. But that is implementation specific."}], "answers": [{"tags": [], "owner": {"reputation": 1210, "user_id": 5862726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dyBzTE1yNyc/AAAAAAAAAAI/AAAAAAAAAUs/xIiSMA7_Gko/photo.jpg?sz=128", "display_name": "Todd Knarr", "link": "https://stackoverflow.com/users/5862726/todd-knarr"}, "is_accepted": false, "score": 4, "last_activity_date": 1455093153, "last_edit_date": 1455093153, "creation_date": 1455087002, "answer_id": 35308620, "question_id": 35308462, "link": "https://stackoverflow.com/questions/35308462/can-we-run-any-user-defined-function-before-the-main-function/35308620#35308620", "title": "Can we run any user defined function before the main function?", "body": "<p>In general, the answer is no.</p>\n\n<p>For an application there is normally no reason to, you simply run any initialization functions, at the top of <code>main()</code> before going into the real application code.</p>\n\n<p>The exceptions usually involve shared libraries. Those can have initialization and termination functions defined that execute after the <code>libc</code> initialization is done but before <code>main()</code> is called, or after <code>main()</code> has returned (or the program is otherwise exited) and before the process terminates.</p>\n\n<p>It is going to be heavily dependent on the OS and <code>libc</code> implementation. On Linux for <code>glibc</code> this <a href=\"http://tldp.org/HOWTO/Program-Library-HOWTO/miscellaneous.html\" rel=\"nofollow\">link</a> has some info.</p>\n"}], "owner": {"reputation": 11, "user_id": 5906809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7be7c6d46258d46c17fe8b8375eb1bcd?s=128&d=identicon&r=PG", "display_name": "user5906809", "link": "https://stackoverflow.com/users/5906809/user5906809"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1455094685, "answer_count": 1, "score": -2, "last_activity_date": 1455093153, "creation_date": 1455086403, "question_id": 35308462, "link": "https://stackoverflow.com/questions/35308462/can-we-run-any-user-defined-function-before-the-main-function", "closed_reason": "Duplicate", "title": "Can we run any user defined function before the main function?", "body": "<p>I want to run a user defined function before the main function in C. But I don't know how to do that. Is that possible?</p>\n"}, {"tags": ["c", "linux", "bash", "sh"], "comments": [{"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1455087437, "post_id": 35308376, "comment_id": 58326946, "body": "Not sure what you need explained. In example 1, your code exits so fast that <code>ps -l</code> doesn&#39;t catch the running process. In #2, the only thing that catches it is the <code>ps -l</code> running inside the program (aka while it&#39;s still running)."}, {"owner": {"reputation": 953, "user_id": 6354442, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-KMuWD0kfOTE/AAAAAAAAAAI/AAAAAAAAAbU/cp1nHpR7jlY/photo.jpg?sz=128", "display_name": "MysticForce", "link": "https://stackoverflow.com/users/6354442/mysticforce"}, "reply_to_user": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1455087615, "post_id": 35308376, "comment_id": 58327026, "body": "IN first case Why is the pid of ps changed after compilation or execution ? IN second case , what exactly happens when using system(command) ?"}, {"owner": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1455087719, "post_id": 35308376, "comment_id": 58327087, "body": "Each time you run <code>ps -l</code>, it&#39;s a short lived new process with a new pid."}, {"owner": {"reputation": 953, "user_id": 6354442, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-KMuWD0kfOTE/AAAAAAAAAAI/AAAAAAAAAbU/cp1nHpR7jlY/photo.jpg?sz=128", "display_name": "MysticForce", "link": "https://stackoverflow.com/users/6354442/mysticforce"}, "reply_to_user": {"reputation": 163028, "user_id": 477878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qounX.jpg?s=128&g=1", "display_name": "Joachim Isaksson", "link": "https://stackoverflow.com/users/477878/joachim-isaksson"}, "edited": false, "score": 0, "creation_date": 1455089900, "post_id": 35308376, "comment_id": 58328142, "body": "But pid of ps changed when gcc is used .. What exactly does the process ps do ? Also what happens when terminal is started .."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1455096038, "post_id": 35308376, "comment_id": 58331510, "body": "@MysticForce It&#39;s not clear what kind of answer you&#39;re looking for... Here is the documentation for what ps does: <a href=\"http://linux.die.net/man/1/ps\" rel=\"nofollow noreferrer\">linux.die.net/man/1/ps</a>  Here, <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow noreferrer\">linusakesson.net/programming/tty</a> is the explanation for how a terminal works, here: <a href=\"https://en.wikipedia.org/wiki/Process_identifier\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Process_identifier</a> is the explanation of what a pid is, but it&#39;s rather unknown to anyone if that&#39;s explaining anything you&#39;re asking about."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455115454, "post_id": 35308376, "comment_id": 58345127, "body": "There is enough information available for the system commands. stack overflow is no tutorial site. See the man pages and other documentation. Read a book about Linux system administration."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 5662780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d5f57ed12fd798e56523eaf94acc14?s=128&d=identicon&r=PG&f=1", "display_name": "qRayner", "link": "https://stackoverflow.com/users/5662780/qrayner"}, "is_accepted": false, "score": 0, "last_activity_date": 1455095659, "creation_date": 1455095659, "answer_id": 35310945, "question_id": 35308376, "link": "https://stackoverflow.com/questions/35308376/how-does-bash-sh-ps-work-in-linux/35310945#35310945", "title": "How does bash,sh,ps work in linux?", "body": "<p>Every time you run a program a new process with unique pid is created.\nThat's the reason why in your examples the pid of bash stays the same all the time, because it is still the same process, and all the consecutive calls of ps have different ones.</p>\n\n<p>You although can see the parent pid (ppid) with \"ps -l\" which shows you the pid of the process which created it (forked).</p>\n\n<p>Maybe you want to try the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main()\n{\n     int i;\n     printf(\"before fork() ps -l\\n\");\n     system(\"ps -l\");\n     pid_t pid=fork();\n     if (pid &lt; 0) {\n          printf(\"fork-error.\");\n     } else if (pid == 0) {\n          printf(\"child ps -l\\n\");\n          system(\"ps -l\");\n     } else {\n          int status;\n          pid_t finished = wait(&amp;status);\n          printf(\"parent with child %i finished %i ps -l\\n\", pid, finished);\n          system(\"ps -l\");\n     }\n     return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 953, "user_id": 6354442, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-KMuWD0kfOTE/AAAAAAAAAAI/AAAAAAAAAbU/cp1nHpR7jlY/photo.jpg?sz=128", "display_name": "MysticForce", "link": "https://stackoverflow.com/users/6354442/mysticforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1455095659, "creation_date": 1455086051, "last_edit_date": 1455086354, "question_id": 35308376, "link": "https://stackoverflow.com/questions/35308376/how-does-bash-sh-ps-work-in-linux", "title": "How does bash,sh,ps work in linux?", "body": "<p>Here is the sample program I wrote to understand the working of execution in terminal\nprogram1.c</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n     int i;\n     printf(\"Checking out linux working details 2\\n\");\n     pid_t pid=fork();\n     return 0;\n\n}\n</code></pre>\n\n<p>Now can you please explain the status of bash,ps,sh processes(i.e their pid's etc). Here is the sample run</p>\n\n<p>running:</p>\n\n<pre><code>$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4496  4488  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 R  1000  4506  4496  0  80   0 -  3561 -      pts/2    00:00:00 ps\n\n$ gcc program1.c\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4496  4488  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 R  1000  4513  4496  0  80   0 -  3561 -      pts/2    00:00:00 ps\n\n$ ./a.out\nChecking out linux working details 2\n\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4496  4488  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 R  1000  4516  4496  0  80   0 -  3561 -      pts/2    00:00:00 ps\n\n$ ./a.out\nChecking out linux working details 2\n\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4496  4488  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 R  1000  4519  4496  0  80   0 -  3561 -      pts/2    00:00:00 ps\n</code></pre>\n\n<hr>\n\n<p>program2.c</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n     system(\"ps -l\");\n     return 0;\n}\n</code></pre>\n\n<p>sample run:</p>\n\n<pre><code>$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4592  4584  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 R  1000  4602  4592  0  80   0 -  3561 -      pts/2    00:00:00 ps\n\n$ gcc program2.c\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4592  4584  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 R  1000  4609  4592  0  80   0 -  3561 -      pts/2    00:00:00 ps\n\n$ ./a.out\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4592  4584  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 S  1000  4610  4592  0  80   0 -  1055 wait   pts/2    00:00:00 a.out\n0 S  1000  4611  4610  0  80   0 -  1119 wait   pts/2    00:00:00 sh\n0 R  1000  4612  4611  0  80   0 -  3561 -      pts/2    00:00:00 ps\n\n$ ps -l\nF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD\n0 S  1000  4592  4584  0  80   0 -  6730 wait   pts/2    00:00:00 bash\n0 R  1000  4613  4592  0  80   0 -  3561 -      pts/2    00:00:00 ps\n</code></pre>\n\n<p>ps : A detailed answer would be highly appreciated</p>\n"}, {"tags": ["c", "gcc-warning"], "answers": [{"comments": [{"owner": {"reputation": 3838, "user_id": 276195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6a1bdc05ab5819e791cd04a41d9dcb5?s=128&d=identicon&r=PG", "display_name": "swestrup", "link": "https://stackoverflow.com/users/276195/swestrup"}, "edited": false, "score": 0, "creation_date": 1574719702, "post_id": 35308713, "comment_id": 104324087, "body": "So, what do you do when the value is manifestly safe to cast to an int, so a test is unnecessary? I&#39;m getting the error for something like: int x = ceil((int)y * sine(r)); This is an integer multiplied by a value less than or equal to 1. I shouldn&#39;t have to prove to the compiler that this is valid."}, {"owner": {"reputation": 10729, "user_id": 2038264, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/fGGK5.jpg?s=128&g=1", "display_name": "congusbongus", "link": "https://stackoverflow.com/users/2038264/congusbongus"}, "reply_to_user": {"reputation": 3838, "user_id": 276195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6a1bdc05ab5819e791cd04a41d9dcb5?s=128&d=identicon&r=PG", "display_name": "swestrup", "link": "https://stackoverflow.com/users/276195/swestrup"}, "edited": false, "score": 0, "creation_date": 1574722241, "post_id": 35308713, "comment_id": 104324866, "body": "@swestrup The C language isn&#39;t sophisticated enough to recognise that functions return values within a fixed range, so it would be impossible for a standards-compliant compiler to know this too."}, {"owner": {"reputation": 3838, "user_id": 276195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6a1bdc05ab5819e791cd04a41d9dcb5?s=128&d=identicon&r=PG", "display_name": "swestrup", "link": "https://stackoverflow.com/users/276195/swestrup"}, "edited": false, "score": 0, "creation_date": 1577486366, "post_id": 35308713, "comment_id": 105185966, "body": "Yes, so the diagnostic then MUST produce false positives. Since that is so, why have it?"}], "tags": [], "owner": {"reputation": 10729, "user_id": 2038264, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/fGGK5.jpg?s=128&g=1", "display_name": "congusbongus", "link": "https://stackoverflow.com/users/2038264/congusbongus"}, "is_accepted": false, "score": 8, "last_activity_date": 1455087376, "last_edit_date": 1592644375, "creation_date": 1455087376, "answer_id": 35308713, "question_id": 35308315, "link": "https://stackoverflow.com/questions/35308315/whats-the-purpose-of-wbad-function-cast-why-does-it-only-apply-to-the-direct/35308713#35308713", "title": "What&#39;s the purpose of -Wbad-function-cast, why does it only apply to the direct return value?", "body": "<blockquote>\n<p><code>-Wbad-function-cast</code> (C and Objective-C only)</p>\n<p>Warn when a function call is cast to a non-matching type. For example, warn if a call to a function returning an integer type is cast to a pointer type.</p>\n</blockquote>\n<p>As its name suggests, <code>-Wbad-function-cast</code> only warns when you are casting <strong>function calls</strong> to a non-matching type. It doesn't warn on all casts. This explains why you are not getting that warning for your last two examples:</p>\n<ul>\n<li><code>(int)(d = round(M_PI));</code> doesn't trigger a warning because it is casting <code>double d</code> to <code>int</code> <a href=\"https://stackoverflow.com/q/9514569/2038264\">after it has been assigned a value</a>.</li>\n<li><code>(int)M_PI;</code> doesn't trigger a warning because <a href=\"https://stackoverflow.com/a/15231836/2038264\"><code>M_PI</code> is usually implemented as <code>#define M_PI 3.14159...</code></a>; it is simply a numeric token and not a function call.</li>\n</ul>\n<p>You are right that it could be bad to cast from <code>double</code> to <code>int</code> as you are potentially losing information. You could avoid the GCC warning by simply assigning the function return value to a matching type, then casting later, as in your two examples that don't trigger the warning.</p>\n<p>Of course, the point of the warning is not to force you to write extra code to do the same thing. Even for functions that &quot;return an integral value&quot; like <code>round()</code>, <a href=\"https://stackoverflow.com/q/1253670/2038264\">the return value may be too big to fit in an <code>int</code></a>. What you should be doing is <strong>checking to see if the value is safe to cast first</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 3973301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ee3e3358caa5856973f9744ed8aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Britton Kerin", "link": "https://stackoverflow.com/users/3973301/britton-kerin"}, "is_accepted": false, "score": 0, "last_activity_date": 1580252637, "creation_date": 1580252637, "answer_id": 59958408, "question_id": 35308315, "link": "https://stackoverflow.com/questions/35308315/whats-the-purpose-of-wbad-function-cast-why-does-it-only-apply-to-the-direct/59958408#59958408", "title": "What&#39;s the purpose of -Wbad-function-cast, why does it only apply to the direct return value?", "body": "<p>If you like the warning generally but are annoyed that there's no way to write an explicit cast that suppresses it, on GCC you can do this:</p>\n\n<pre><code>_Pragma (\"GCC diagnostic push\");                            \n_Pragma (\"GCC diagnostic ignored \\\"-Wbad-function-cast\\\"\");\nOCR1A = ((uint16_t) (function_returning_double));          \n_Pragma (\"GCC diagnostic pop\");   \n</code></pre>\n\n<p>I would only resort to this in contexts where you don't want to introduce an intermediate value (i.e. in a macro).  As others have noted (in here: <a href=\"https://stackoverflow.com/questions/19306784/what-is-the-purpose-of-gccs-wbad-function-cast\">What is the purpose of gcc&#39;s -Wbad-function-cast?</a>), a gratuitous lrint()/lround() might not get optimized away.  And inserting an intermediate value in a macro is unhygienic. </p>\n"}], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3162, "favorite_count": 1, "answer_count": 2, "score": 9, "last_activity_date": 1580252637, "creation_date": 1455085743, "last_edit_date": 1495542876, "question_id": 35308315, "link": "https://stackoverflow.com/questions/35308315/whats-the-purpose-of-wbad-function-cast-why-does-it-only-apply-to-the-direct", "title": "What&#39;s the purpose of -Wbad-function-cast, why does it only apply to the direct return value?", "body": "<p>There's a rationale for the warning <a href=\"https://stackoverflow.com/questions/19306784/what-is-the-purpose-of-gccs-wbad-function-cast\">here</a>, but that fails to answer the whole picture. For example the following code triggers the warning:</p>\n\n<pre><code>(int)round(M_PI);\n</code></pre>\n\n<p>but on the other hand the following code doesn't:</p>\n\n<pre><code>double d;\n(int)(d = round(M_PI));\n</code></pre>\n\n<p>this doesn't either:</p>\n\n<pre><code>(int)M_PI;\n</code></pre>\n\n<p>the rationale was that you shouldn't convert to int by simply casting, but you should use <code>round</code>, <code>floor</code> or similar function. However using <code>round</code> will still trigger the warning, but as seen above typecasting a constant or assigned variable doesn't.</p>\n\n<p>So if it's that bad to cast from <code>double</code> to <code>int</code>, then why doesn't the warning trigger when you write <code>(int)d</code> or <code>(int)M_PI</code>? In what way is one supposed to circumvent the warning in case you want to convert the return value? Is there a warning that would handle these perilous conversions in a more correct/reasonable way?</p>\n"}, {"tags": ["c", "macos", "valgrind"], "comments": [{"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1483950786, "post_id": 35308274, "comment_id": 70292269, "body": "This false positive is suppressed on my machine with latest Valgrind (v3.12.0) and El Capitan."}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 2594161, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f10e75cf39e72bc6de2e81725264d9d1?s=128&d=identicon&r=PG&f=1", "display_name": "jntme", "link": "https://stackoverflow.com/users/2594161/jntme"}, "edited": false, "score": 0, "creation_date": 1455103224, "post_id": 35309860, "comment_id": 58336328, "body": "Thank you! Question: The leak summary sums up the lost anyway - no matter I suppresed the errors or not. Is that the normal behaviour?"}, {"owner": {"reputation": 22187, "user_id": 193892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6178b59305359920a922edd061a55e7a?s=128&d=identicon&r=PG", "display_name": "Prof. Falken", "link": "https://stackoverflow.com/users/193892/prof-falken"}, "reply_to_user": {"reputation": 542, "user_id": 2594161, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f10e75cf39e72bc6de2e81725264d9d1?s=128&d=identicon&r=PG&f=1", "display_name": "jntme", "link": "https://stackoverflow.com/users/2594161/jntme"}, "edited": false, "score": 0, "creation_date": 1455107569, "post_id": 35309860, "comment_id": 58339372, "body": "@bananatreedad, your code does not allocate anything, so I would have to guess &quot;yes, normal behaviour&quot;. Note that it mentions objc runtime, i.e. objective C. If you really wanted to, you could look into compiling and linking your code without the Objective C runtime libraries. That might cut down on the error. Valgrind is really good anyway though, you can still look at <i>additional</i> errors that appear to come from your own code and not from libraries."}], "tags": [], "owner": {"reputation": 22187, "user_id": 193892, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6178b59305359920a922edd061a55e7a?s=128&d=identicon&r=PG", "display_name": "Prof. Falken", "link": "https://stackoverflow.com/users/193892/prof-falken"}, "is_accepted": true, "score": 2, "last_activity_date": 1455093061, "last_edit_date": 1455093061, "creation_date": 1455091998, "answer_id": 35309860, "question_id": 35308274, "link": "https://stackoverflow.com/questions/35308274/valgrind-errors-on-mac-os-x-for-printf-a-double/35309860#35309860", "title": "Valgrind Errors on Mac OS X for printf a double", "body": "<p>Unfortunately, the libraries that <code>printf</code> uses, do not always behave in an ideal way. Valgrind will notice all errors - not only the ones you made, but every error made in the standard C library implementation on OSX, for instance.</p>\n\n<p>Some of those \"errors\" may be actual bugs (which is pretty rare), others are likely little shortcuts the library developers took, which may not look completely correct to Valgrind. One such thing is to rely on the <em>operating system</em> to clear and free all left over memory when a program exits - when in a pedantic world, the program should free all of its memory before exit. However, this stopped being strictly necessary somewhere around the days of <a href=\"http://www.drdobbs.com/architecture-and-design/mapping-dos-memory-allocation/184408026\" rel=\"nofollow\">DOS</a> and <a href=\"http://wiki.amigaos.net/wiki/Obsolete_Exec_Memory_Allocation\" rel=\"nofollow\">AmigaOS</a>.</p>\n\n<p>I am not saying this is necessarily what you are seeing in that error, but that you need to be mindful of what Valgrind says.</p>\n\n<p>To use Valgrind in practice, you may want a suppression file, which removes error messages related to system libraries. Here is a somewhat recent (January 2015) <a href=\"http://ranf.tl/2014/11/28/valgrind-on-mac-os-x-10-10-yosemite/\" rel=\"nofollow\">blog post about this issue</a> which came about exactly because of \"learning C the hard way\" on OSX.</p>\n"}], "owner": {"reputation": 542, "user_id": 2594161, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f10e75cf39e72bc6de2e81725264d9d1?s=128&d=identicon&r=PG&f=1", "display_name": "jntme", "link": "https://stackoverflow.com/users/2594161/jntme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 0, "accepted_answer_id": 35309860, "answer_count": 1, "score": 3, "last_activity_date": 1455093061, "creation_date": 1455085553, "question_id": 35308274, "link": "https://stackoverflow.com/questions/35308274/valgrind-errors-on-mac-os-x-for-printf-a-double", "title": "Valgrind Errors on Mac OS X for printf a double", "body": "<p>At the moment I am learning C with the awesome <a href=\"http://c.learncodethehardway.org/\" rel=\"nofollow\">learncodethehardway series</a>.\nI encountered the following:</p>\n\n<p>I compile the following code and everything looks totally fine to me:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\n\n    int bugs = 100;\n    double bug_rate = 1.2;\n\n    printf(\"You have %d bugs a the imaginary rate of %f!\\n\", bugs, bug_rate);\n\n    return 0;\n}\n</code></pre>\n\n<p>It works also correctly.</p>\n\n<p>When I run now Valgrind (3.11.0; <a href=\"http://valgrind.org/downloads/current.html\" rel=\"nofollow\">should be updated for OS X El Capitan</a>) I get following messages:</p>\n\n<pre><code>==18896== Memcheck, a memory error detector\n==18896== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==18896== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==18896== Command: ./ex7\n==18896==\nYou have 100 bugs a the imaginary rate of 1.200000!\n==18896==\n==18896== HEAP SUMMARY:\n==18896==     in use at exit: 26,081 bytes in 188 blocks\n==18896==   total heap usage: 272 allocs, 84 frees, 32,321 bytes allocated\n==18896==\n==18896== 148 (80 direct, 68 indirect) bytes in 1 blocks are definitely lost in loss record 42 of 65\n==18896==    at 0x100007EA1: malloc (vg_replace_malloc.c:303)\n==18896==    by 0x1001C58D6: __Balloc_D2A (in /usr/lib/system/libsystem_c.dylib)\n==18896==    by 0x1001C621F: __d2b_D2A (in /usr/lib/system/libsystem_c.dylib)\n==18896==    by 0x1001C2877: __dtoa (in /usr/lib/system/libsystem_c.dylib)\n==18896==    by 0x1001EB3E6: __vfprintf (in /usr/lib/system/libsystem_c.dylib)\n==18896==    by 0x1002146C8: __v2printf (in /usr/lib/system/libsystem_c.dylib)\n==18896==    by 0x1001EA389: vfprintf_l (in /usr/lib/system/libsystem_c.dylib)\n==18896==    by 0x1001E8223: printf (in /usr/lib/system/libsystem_c.dylib)\n==18896==    by 0x100000F32: main (ex7.c:10)\n==18896==\n==18896== 2,064 bytes in 1 blocks are possibly lost in loss record 59 of 65\n==18896==    at 0x10000821C: malloc_zone_malloc (vg_replace_malloc.c:305)\n==18896==    by 0x1004F6EFD: _objc_copyClassNamesForImage (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EA182: protocols() (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EA093: readClass(objc_class*, bool, bool) (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004E7C13: gc_init (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EF24E: objc_initializeClassPair_internal(objc_class*, char const*, objc_class*, objc_class*) (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004FC132: layout_string_create (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EA83C: realizeClass(objc_class*) (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EA300: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EA2E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EA2E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==18896==    by 0x1004EA2E9: copySwiftV1MangledName(char const*, bool) (in /usr/lib/libobjc.A.dylib)\n==18896==\n==18896== LEAK SUMMARY:\n==18896==    definitely lost: 80 bytes in 1 blocks\n==18896==    indirectly lost: 68 bytes in 2 blocks\n==18896==      possibly lost: 2,064 bytes in 1 blocks\n==18896==    still reachable: 0 bytes in 0 blocks\n==18896==         suppressed: 23,869 bytes in 184 blocks\n==18896==\n==18896== For counts of detected and suppressed errors, rerun with: -v\n==18896== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 18 from 18)\n</code></pre>\n\n<p>I don't get it. There is nothing wrong with my <em>line:10</em> isn't it?</p>\n\n<p>THX a lot.</p>\n"}]