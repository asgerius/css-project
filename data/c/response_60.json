[{"tags": ["c", "gcc", "compilation"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456967208, "post_id": 35760373, "comment_id": 59195660, "body": "C does not support <i>methods</i>, only <i>functions</i>!"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 1831263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a3cc78b8fc785a929c43e4d300f405?s=128&d=identicon&r=PG", "display_name": "xflltw xflltw", "link": "https://stackoverflow.com/users/1831263/xflltw-xflltw"}, "edited": false, "score": 0, "creation_date": 1456963414, "post_id": 35760473, "comment_id": 59194516, "body": "Great thanks. So &quot;static libraries&quot; compiled will have no public symbols, is this right? It&#39;s just commonly compiled, it&#39;s usage is to &quot;statically linked&quot; into the final program. Because it has already been linked to the target program, it&#39;s unnecessary to deliver a static library to the client who want to use the target program, is this right?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 15, "user_id": 1831263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a3cc78b8fc785a929c43e4d300f405?s=128&d=identicon&r=PG", "display_name": "xflltw xflltw", "link": "https://stackoverflow.com/users/1831263/xflltw-xflltw"}, "edited": false, "score": 0, "creation_date": 1456967897, "post_id": 35760473, "comment_id": 59195862, "body": "Yes - once a static library has been linked in, the executable contains its code. Distributing the static library is therefore unnecessary."}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": true, "score": 2, "last_activity_date": 1456962158, "creation_date": 1456962158, "answer_id": 35760473, "question_id": 35760373, "link": "https://stackoverflow.com/questions/35760373/underhook-of-creating-a-library-of-c-language/35760473#35760473", "title": "underhook of creating a library of c language", "body": "<p>You're conflating three kinds of compiler output: <em>static libraries</em>, <em>dynamic libraries</em> and <em>executables</em>.</p>\n\n<p><em>static libraries</em> consist basically of archives of <code>.o</code> object files, which can be added at link time to your program and are included (\"statically linked\") into the final program. This is the \"library\" you are referring to with <code>-c</code>. Typically, these have <code>.lib</code> (Windows) or <code>.a</code> (Linux) file extensions.</p>\n\n<p><em>dynamic libraries</em> consist of compiled code that has been linked together with a special option (e.g. <code>-shared</code> for GCC). Dynamic libraries retain <em>public</em> symbols, making them usable by other programs. If you compile your program against a dynamic library, the final program includes only <em>references</em> to the library - the actual code will be included at runtime dynamically. This is the meaning of the extension <code>.dll</code> on Windows - \"Dynamic Link Library\". Typically, these have <code>.dll</code> (Windows), <code>.so</code> (Linux) or <code>.dylib</code> (OS X) file extensions.</p>\n\n<p><em>executables</em> consist of compiled code that has been linked together in the usual way to make them directly runnable. Although some executables retain symbol information for debugging purposes, they are usually not dynamically loadable and their code can't usually be used by other programs (this is what you meant by \"final production code\" in your question).</p>\n\n<p>Hope that clears up the confusion.</p>\n"}], "owner": {"reputation": 15, "user_id": 1831263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a3cc78b8fc785a929c43e4d300f405?s=128&d=identicon&r=PG", "display_name": "xflltw xflltw", "link": "https://stackoverflow.com/users/1831263/xflltw-xflltw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1456990166, "accepted_answer_id": 35760473, "answer_count": 1, "score": -1, "last_activity_date": 1456962158, "creation_date": 1456961575, "question_id": 35760373, "link": "https://stackoverflow.com/questions/35760373/underhook-of-creating-a-library-of-c-language", "closed_reason": "Needs details or clarity", "title": "underhook of creating a library of c language", "body": "<p>After c language is compiled, linked, the final production code has no method name left, as a result, this code can't be used as an api by the others, is this right?</p>\n\n<p>After some search work, I found if you want to build a library, you just need to add -c switch to gcc, and then use the command ar. As a result, it means when compile using gcc with -c switch, the compiled code is keeping method names, then does it mean all api provided by windows is after compile but before linking? But, according to my understanding, the code can't run or be linked as a library before linking, so the guessing above is wrong. Then how to understand these questions?</p>\n"}, {"tags": ["c", "parsing", "segmentation-fault", "strtok", "strcpy"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1456961846, "post_id": 35760355, "comment_id": 59193933, "body": "That&#39;s not how to structure the loop.  Change while (buffer != NULL) to while (strtok(NULL, delims))"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1456962169, "post_id": 35760355, "comment_id": 59194058, "body": "<code>strcpy(arguments[++i], buffer);</code> --&gt;&gt; <code>strcpy(arguments[i++], buffer);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1456963100, "post_id": 35760355, "comment_id": 59194400, "body": "<code>while (buffer != NULL)     {         buffer = strtok(NULL, delims);          strcpy(arguments[++i], buffer);     }      buffer = strtok(NULL, delims);</code> --&gt; <code>while ((buffer = strtok(NULL, delims)) != NULL)  { strcpy(arguments[i++], buffer); }</code>"}, {"owner": {"reputation": 139, "user_id": 1727580, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/AodhP.jpg?s=128&g=1", "display_name": "TheNotoriousWMB", "link": "https://stackoverflow.com/users/1727580/thenotoriouswmb"}, "edited": false, "score": 0, "creation_date": 1456963819, "post_id": 35760355, "comment_id": 59194646, "body": "BLUEPIXY, that worked 100%. Thanks so much."}], "answers": [{"tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": false, "score": 3, "last_activity_date": 1456963265, "creation_date": 1456963265, "answer_id": 35760667, "question_id": 35760355, "link": "https://stackoverflow.com/questions/35760355/segmentation-fault-11-while-trying-to-parse-string/35760667#35760667", "title": "Segmentation fault: 11 while trying to parse string", "body": "<p>Your problem likely revolves around the line <code>strcpy(arguments[++i], buffer);</code>.  You are incrementing <code>i</code>, and <em>then</em> using it as an array index.  The first round through the loop will copy into array index 1.  When you print from the loop, you start at index 0.  Since you don't initialize the arrays, they're full of garbage and bad things happen when you try to print index 0 (full of garbage) as a string.</p>\n\n<p>Two suggestions to fix this:  First, move expressions with side effects (like <code>++i</code>) to a line of their own.  This makes things simpler and eliminates any order-of-operations gotchas.  Second, print out the arguments as soon as you read them instead of looping back through everything a second time.  Since you're just printing the values, this would mean you wouldn't need an entire array to store all of the arguments.  You'd only need enough buffer to store the current argument long enough to print it.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1456964868, "creation_date": 1456964868, "answer_id": 35760904, "question_id": 35760355, "link": "https://stackoverflow.com/questions/35760355/segmentation-fault-11-while-trying-to-parse-string/35760904#35760904", "title": "Segmentation fault: 11 while trying to parse string", "body": "<p>the following code:</p>\n\n<ol>\n<li>compiles cleanly</li>\n<li>removes unneeded local variables</li>\n<li>outputs the proper items, then quits</li>\n<li>defines magic numbers with meaningful names</li>\n<li>uses NUL terminated array for the delimiters for strtok()</li>\n<li>used the 'typical' name for the returned value of strtok()</li>\n<li>always checks the returned value from strtok()</li>\n</ol>\n\n<p>and now the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\n#define MAX_CMD_LEN (256)\n#define MAX_ARGS    (256)\n#define MAX_ARG_LEN (256)\n\nint main( void )\n{\n    char input[] = \"ls -a -f\";\n    char *token;\n    char command[ MAX_CMD_LEN ] = {'\\0'};\n    char arguments[ MAX_ARGS ][ MAX_ARG_LEN ] = {{'\\0'}};\n\n    if ( NULL != (token = strtok(input, \" \\t\\r\\n\" )) )\n        strcpy(command, token);\n\n    printf(\"Command: %s\\n\\r\", command);\n\n    size_t i = 0;\n    while (i&lt;MAX_ARGS &amp;&amp; NULL != (token = strtok( NULL, \" \\t\\r\\n\" ) ) )\n    {\n        strcpy(arguments[ i ], token);\n        i++;\n    }\n\n\n    for( i=0; *arguments[i]; i++ )\n    {\n        printf(\"Argument[%lu]: %s\\n\", i, arguments[i]);\n    }\n\n    return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 1727580, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/AodhP.jpg?s=128&g=1", "display_name": "TheNotoriousWMB", "link": "https://stackoverflow.com/users/1727580/thenotoriouswmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1522946569, "creation_date": 1456961509, "last_edit_date": 1522946569, "question_id": 35760355, "link": "https://stackoverflow.com/questions/35760355/segmentation-fault-11-while-trying-to-parse-string", "title": "Segmentation fault: 11 while trying to parse string", "body": "<p>I'm trying to parse an input string into a <em>command</em> string and an array of <em>arguments</em> strings.</p>\n\n<p>I'm having some issue using strtok and strcpy, I think that my <em>command</em> string is not being null terminated properly which is leading to the seg fault.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define delims \" \\t\\r\\n\"\n\nint main() {\n    char input[] = \"ls -a -f\";\n    char *buffer;\n    char command[256];\n    char arguments[256][256];\n    int i = 0, j;\n\n    buffer = strtok(input, delims);\n\n    strcpy(command, buffer);\n\n    printf(\"Command: %s\\n\\r\", command);\n\n    while (buffer != NULL)\n    {\n        buffer = strtok(NULL, delims);\n\n        strcpy(arguments[++i], buffer);\n    }\n\n    buffer = strtok(NULL, delims);\n\n    for (j = 0; j &lt; i; ++i)\n    {\n        printf(\"Argument[%d]: %s\", j, arguments[j]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Current Output:</p>\n\n<pre><code>Command: ls\nSegmentation fault: 11\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>Command: ls\nArgument[0]: -a\nArgument[1]: -f\n</code></pre>\n\n<p>I don't pretend to be very good with C, so any pointers in the right direction would be extremely helpful.</p>\n"}, {"tags": ["c", "sdl", "keyboard-events", "sdl-2"], "comments": [{"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1456987997, "post_id": 35760351, "comment_id": 59202418, "body": "Probably you don&#39;t have english keyboard and your scancodes are different. Try <code>SDL_GetScancodeFromKey()</code> to get scancode from keycodes. Reference: <a href=\"https://wiki.libsdl.org/SDL_GetScancodeFromKey?highlight=%28%5CbCategoryKeyboard%5Cb%29%7C%28CategoryEnum%29%7C%28CategoryStruct%29\" rel=\"nofollow noreferrer\">wiki.libsdl.org/&hellip;</a>"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1457023330, "post_id": 35760351, "comment_id": 59227610, "body": "Event type is certainly incorrect, but anyway - <a href=\"https://wiki.libsdl.org/SDL_PushEvent\" rel=\"nofollow noreferrer\">documentation</a> explicitly states <code>Note: Pushing device input events onto the queue doesn&#39;t modify the state of the device within SDL.</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "is_accepted": true, "score": 3, "last_activity_date": 1457022597, "creation_date": 1457022597, "answer_id": 35777725, "question_id": 35760351, "link": "https://stackoverflow.com/questions/35760351/simulate-keyboard-button-press-sdl-library/35777725#35777725", "title": "Simulate Keyboard Button Press [SDL Library]", "body": "<p>I don't think it works like that. The state array returned by <code>SDL_GetKeyboardState()</code> represents the state of the raw keyboard, and pushing events would not affect that (even though the keyboard input generates events).</p>\n\n<p>But I think it is possible to do what you want, if you can use <code>SDL_PollEvent()</code> instead of <code>SDL_PumpEvents()</code> and checking the keyboard state array,</p>\n\n<pre><code>/* Push a single left key event. */\nSDL_Event sdlevent = {};\nsdlevent.type = SDL_KEYDOWN;\nsdlevent.key.keysym.sym = SDLK_LEFT;\nSDL_PushEvent(&amp;sdlevent);\n\nwhile (1) {\n    SDL_Event ev;\n    if (SDL_PollEvent(&amp;ev)) {\n        if(ev.type == SDL_KEYDOWN) {\n            if (ev.key.keysym.sym == SDLK_LEFT) {\n                printf(\"LEFT PRESSED\\n\");\n            }\n            if (ev.key.keysym.sym == SDLK_RIGHT) {\n                printf(\"RIGHT PRESSED\\n\");\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 237, "user_id": 1947987, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1907c870a34be5227b8e8e4c134aca5e?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/1947987/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1914, "favorite_count": 0, "accepted_answer_id": 35777725, "answer_count": 1, "score": 1, "last_activity_date": 1457022597, "creation_date": 1456961490, "question_id": 35760351, "link": "https://stackoverflow.com/questions/35760351/simulate-keyboard-button-press-sdl-library", "title": "Simulate Keyboard Button Press [SDL Library]", "body": "<p>I am trying to simulate an SDL keyboard button press (using C). I have looked up the SDL info pages online but I still don't have anything that consistently works. </p>\n\n<p>I have the following (removed the interrupt handling, creation of windows etc.)</p>\n\n<pre><code>while(1){\n    SDL_Event user_event;\n    user_event.type = SDL_SCANCODE_LEFT;\n\n    SDL_PushEvent(&amp;user_event);\n    SDL_PumpEvents();\n\n    const Uint8 *state = SDL_GetKeyboardState(NULL);\n\n    if (state[SDL_SCANCODE_LEFT]) {\n        printf(\"LEFT PRESSED\");\n    }\n    if (state[SDL_SCANCODE_RIGHT]) {\n        printf(\"RIGHT PRESSED\");\n    }\n}\n</code></pre>\n\n<p>I never see the 'LEFT PRESSED' string printed out, although when I press the right arrow key (from keyboard) I see the respective output generated. It appears like the left key press is never being pushed on the state var.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456967373, "post_id": 35760331, "comment_id": 59195710, "body": "The term &quot;vector&quot; is not used by the C standard. You mean &quot;array&quot;. But <code>vetor *</code> is not an array, but a - well - pointer. And you cannot get along without pointers in C once you deal with arrays. Whoever told you you can has no knowledege about C."}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 4917117, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-o0jqFIMrX9c/AAAAAAAAAAI/AAAAAAAAABY/pPx9FN7YMO8/photo.jpg?sz=128", "display_name": "AmiguelS", "link": "https://stackoverflow.com/users/4917117/amiguels"}, "edited": false, "score": 0, "creation_date": 1456962232, "post_id": 35760432, "comment_id": 59194085, "body": "I understand the swaping, no problem there. I&#39;m confused about it copying the contents. I would swear you could not do that with structs (non native types), and that you had to use memcpy."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 673, "user_id": 4917117, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-o0jqFIMrX9c/AAAAAAAAAAI/AAAAAAAAABY/pPx9FN7YMO8/photo.jpg?sz=128", "display_name": "AmiguelS", "link": "https://stackoverflow.com/users/4917117/amiguels"}, "edited": false, "score": 0, "creation_date": 1456962454, "post_id": 35760432, "comment_id": 59194164, "body": "@AmiguelS Assigning one struct to another does a field-by-field copy.  The fact that some of those fields are pointers isn&#39;t relevant in this case because you&#39;re doing a swap as opposed to a copy.  In the case of a copy, this would leave two copies of a struct holding pointers to the same piece of memory, and freeing the pointer in one would leave the other pointing to invalid memory."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456967484, "post_id": 35760432, "comment_id": 59195732, "body": "Strictily speaking you cannot even access an array element without using a pointer. Because the array decays to a pointer before the index operator is applied. There is little you can actually do with an array itself."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1456961965, "creation_date": 1456961965, "answer_id": 35760432, "question_id": 35760331, "link": "https://stackoverflow.com/questions/35760331/why-dont-i-have-to-use-pointers/35760432#35760432", "title": "Why don&#39;t I have to use pointers?", "body": "<p>Assuming that the <code>elementos</code> field of <code>vector</code> is an array of <code>elemento</code>, what you're doing is fine.  You're swapping the first with the last, then the second with the second-to-last, and so forth.  </p>\n\n<p>When you do the swap, it does a copy of each field of the <code>elemento</code> struct.</p>\n\n<p>I don't see a need to involve pointers in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 673, "user_id": 4917117, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-o0jqFIMrX9c/AAAAAAAAAAI/AAAAAAAAABY/pPx9FN7YMO8/photo.jpg?sz=128", "display_name": "AmiguelS", "link": "https://stackoverflow.com/users/4917117/amiguels"}, "edited": false, "score": 0, "creation_date": 1456963513, "post_id": 35760634, "comment_id": 59194559, "body": "You are correct. That is what I would have done. But these structures are imposed by the exercise specification. The confusion probability originated exactly from expecting an array of pointers but having an array of structs."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 0, "last_activity_date": 1456963062, "creation_date": 1456963062, "answer_id": 35760634, "question_id": 35760331, "link": "https://stackoverflow.com/questions/35760331/why-dont-i-have-to-use-pointers/35760634#35760634", "title": "Why don&#39;t I have to use pointers?", "body": "<p>You're doing a lot more work than necessary, but it works.</p>\n\n<p>Let's say, for example, that your structure were a really big one with 1000 bytes, and that you had 100 of them. Your array <code>elementos</code> would then be 100,000 bytes of contiguous memory in 1000-byte chunks. Your swap function would copy a whole 1000-byte structure to <code>aux</code>, then copy 1000 bytes from the far end of the array to the near end, then copy 1000 bytes of <code>aux</code> to the far end. That's copying 3000 bytes per swap, 50 times.</p>\n\n<p>If instead <code>elementos</code> were an array of pointers to the 100 structures (each allocated elsewhere, with <code>malloc()</code>), your swap function would only be moving 24 bytes 50 times, the structures themselves would stay put in memory and only the pointers to them would move. This is much more efficient, at the cost of the memory for the pointer array.</p>\n"}], "owner": {"reputation": 673, "user_id": 4917117, "user_type": "registered", "accept_rate": 63, "profile_image": "https://lh6.googleusercontent.com/-o0jqFIMrX9c/AAAAAAAAAAI/AAAAAAAAABY/pPx9FN7YMO8/photo.jpg?sz=128", "display_name": "AmiguelS", "link": "https://stackoverflow.com/users/4917117/amiguels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456963062, "creation_date": 1456961397, "last_edit_date": 1456962012, "question_id": 35760331, "link": "https://stackoverflow.com/questions/35760331/why-dont-i-have-to-use-pointers", "title": "Why don&#39;t I have to use pointers?", "body": "<p>On the exercise we have a vector of structures, and we need to invert the order of the vector. I have solved the problem without h using pointers, but my gut tells my I should have used then, and I'm  not understanding how is it possible to solve this without using them. I am a bit confused because I have not coded C for a while now. I apologize for the variable/structures names not being in English, but they s are very close and understandable by any English speaking person.</p>\n\n<pre><code>typedef struct{\n   char *str;    \n} elemento;\n\ntypedef struct{\n    int tamanho;\n    int capacidade;\n    elemento* elementos;   \n} vetor;\n\n\nvoid vetor_inverte(vetor *vec){\n\n    elemento aux;\n    int i=0;\n\n    for(i=0; i&lt;(vec-&gt;tamanho)/2; i++){\n        aux = vec-&gt;elementos[i];\n        vec-&gt;elementos[i] = vec-&gt;elementos[ vec-&gt;tamanho -1-i ];\n        vec-&gt;elementos[ vec-&gt;tamanho -1-i ] = aux;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "recursion", "binary-tree", "doubly-linked-list"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1456962975, "creation_date": 1456962975, "answer_id": 35760620, "question_id": 35760330, "link": "https://stackoverflow.com/questions/35760330/how-to-convert-doubly-linked-list-to-binary-tree/35760620#35760620", "title": "How to convert Doubly linked list to Binary tree", "body": "<p>I think I understand; you're making a balanced binary tree from <strong>cnodes</strong> with the <strong>previous</strong> and <strong>next</strong> pointers being reused for the left and right sub-trees.</p>\n\n<p>... so that's your algorithm.</p>\n\n<ul>\n<li>Find the middle node of the binary tree (which you've already done).</li>\n<li>Turn the left half into a binary tree.  The left half is the original head, with the last element (middle->previous) now having a <strong>next</strong> pointer of NULL.</li>\n<li>Link this left half to <strong>middle->previous</strong> (hijacked as the left sub-tree).</li>\n<li><p>Turn the right half into a binary tree; this is headed by <strong>middle->next</strong>.  Make it the new value of <strong>middle->next</strong>.</p></li>\n<li><p>You have to keep the original head as the pointer to the left sub-tree.</p></li>\n<li>You'll want your routine to return the binary tree's root, so the previous call can link it into the level above.</li>\n<li>You still have to pick a termination condition, such as the head pointer being <strong>NULL</strong>.</li>\n</ul>\n\n<p>Does that get you moving to a solution?</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 7312380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4d3bcb057c19b12c480f5b881f49f5?s=128&d=identicon&r=PG&f=1", "display_name": "shiwang", "link": "https://stackoverflow.com/users/7312380/shiwang"}, "is_accepted": false, "score": 0, "last_activity_date": 1517380236, "last_edit_date": 1517380236, "creation_date": 1517244982, "answer_id": 48506300, "question_id": 35760330, "link": "https://stackoverflow.com/questions/35760330/how-to-convert-doubly-linked-list-to-binary-tree/48506300#48506300", "title": "How to convert Doubly linked list to Binary tree", "body": "<p>Firstly, You are trying to convert DLL to binary tree assuming the DLL is given as in-order of the binary tree you have to make. Note that there isn't a unique tree you can make from only inorder traversal.Even if you have to make BST, you can't make it with only inorder traversal. What I actually think you are trying to do is to convert it into a balanced BST. Even though, it will also not be unique.<br/>\nHere's the algorithm..<br/>\n1) Get the Middle of the linked list and make it root.<br/>\n2) Recursively do same for left half and right half.<br/>\n       &emsp; a) Get the middle of left half and make it left child of the root\n          created in step 1.<br/>\n       &emsp; b) Get the middle of right half and make it right child of the\n          root created in step 1.<br/>\nTime complexity: O(nLogn) where n is the number of nodes in Linked List.<br/>\nAlthough,it can be solved in O(n) if you insert nodes in BST in the same order as the appear in Doubly Linked List.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10406524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZa0Y.jpg?s=128&g=1", "display_name": "sgeeks", "link": "https://stackoverflow.com/users/10406524/sgeeks"}, "is_accepted": false, "score": 1, "last_activity_date": 1560412894, "creation_date": 1560412894, "answer_id": 56575946, "question_id": 35760330, "link": "https://stackoverflow.com/questions/35760330/how-to-convert-doubly-linked-list-to-binary-tree/56575946#56575946", "title": "How to convert Doubly linked list to Binary tree", "body": "<p>I hope this code will help you. call the DLL2BT method with head of the doubly linked list which return the root node of the tree created.</p>\n\n<pre><code>class box\n{\n    int data;\n    box left=null,right=null;\n    box(int a)\n    {\n        data=a;\n    }\n}\n\npublic static box DLL2BT(box head)// head = linked list head\n{       \n    if(head!=null)\n    {\n        box node=null;\n        try \n        {\n            node = findMid(head);\n            node.left.right=null;\n            node.left=DLL2BT(head);\n            node.right.left=null;\n            node.right=DLL2BT(node.right);\n        }\n        catch( Exception e){ }\n        return node;\n    }\n    return null;\n}\n\npublic static box findMid(box head)\n{\n    box slow=head,fast=head.right;\n    try\n    {\n        while(fast!=null)\n        {\n            slow=slow.right;\n            fast=fast.right.right;\n        }\n    }\n    catch(Exception e){ }\n    return slow;\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5859124, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fece78dcdfa9ccbe56f402420c561879?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/5859124/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2198, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1560412894, "creation_date": 1456961388, "question_id": 35760330, "link": "https://stackoverflow.com/questions/35760330/how-to-convert-doubly-linked-list-to-binary-tree", "title": "How to convert Doubly linked list to Binary tree", "body": "<pre><code>    struct cnode\n{\n  int info;\n  struct cnode *next;\n  struct cnode *previous;\n};\ntypedef struct cnode cnode;\n</code></pre>\n\n<p>pre-made DOUBLY LINKED LIST: <code>1&lt;-&gt;2&lt;-&gt;3&lt;-&gt;4&lt;-&gt;5&lt;-&gt;6&lt;-&gt;7</code> </p>\n\n<p>So I'm trying to make a recursive function that grabs the mid of the doubly linked list (root = 4) and convert it into a the remaining into a binary tree. I'm still new to recursion so an explanation along with code would be GREATLY appreciated!</p>\n\n<pre><code>EX.     4\n      /  \\\n     2    6\n    / \\  / \\\n   1   3 5  7\n</code></pre>\n\n<p>This is the code I have thus far (which isn't much due to difficulties with recursion)</p>\n\n<pre><code>void *convert(cnode *head){\n  if(head == NULL)\n    return;\n  int count = 0;\n  cnode *tempHead = head;\n  while(tempHead != NULL){\n    count++;\n    tempHead = tempHead-&gt;next;\n  }\n  int move = (count/2) + (count%2);\n  int i;\n  for(i=1; i&lt;move; i++){\n    head = head-&gt;next;\n  }\n}\n</code></pre>\n\n<p>Pretty much just sets the head pointer to the mid info (4)</p>\n"}, {"tags": ["c", "list", "loops", "object"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1456960286, "post_id": 35760038, "comment_id": 59193327, "body": "Use a <code>struct</code> to contain the needed data. Classes are just <code>struct</code>s with automatic constructors/destructors and associated functions."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456960391, "post_id": 35760038, "comment_id": 59193375, "body": "&quot;checking for list length of A will return 2&quot;. Why? You have added 1 item and the length is 2? Anyway, why can&#39;t you just add a counter field inside the <code>List</code> structure? And add more fields for whatever other things you need to keep track of."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456960418, "post_id": 35760038, "comment_id": 59193386, "body": "Too broad. But do some searching yourself. Keywords might be &quot;object oriented programming in C&quot;"}, {"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "edited": false, "score": 0, "creation_date": 1456960462, "post_id": 35760038, "comment_id": 59193404, "body": "ctor creates a new list with meaning a new node is added, and another resriction is not having more than value field and next/previous"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456960563, "post_id": 35760038, "comment_id": 59193447, "body": "@Yarden. That doesn&#39;t really make sense. The default <code>ctor</code> should create a new list with no items."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1456960773, "post_id": 35760038, "comment_id": 59193526, "body": "Ehm. No loops, no recursion and no goto? Good luck with that."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1456960789, "post_id": 35760038, "comment_id": 59193534, "body": "You have <code>next</code>. If you really want to count the number of items then just traverse all the <code>next</code> pointers. But that requires loops. I&#39;m suspecting either you have misunderstood the requirements or your assignment problem is not well formed."}, {"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456961177, "post_id": 35760038, "comment_id": 59193680, "body": "@kaylum It is the right requirements though i think i will try adding more fields to the structure, though seems a pretty hard work to synchronize all nodes inside the list (e.g when adding a node all other nodes should add + 1 to their count)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456961273, "post_id": 35760038, "comment_id": 59193716, "body": "You told us the other requirement is that you can&#39;t add any fields to the struct. Aren&#39;t you beginning to see why the requirements as stated by you do not make sense?"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1456961316, "post_id": 35760038, "comment_id": 59193732, "body": "I&#39;m with kaylum on this. Can you provide the literal project requirements? It feels like something is being lost in translation here."}, {"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "edited": false, "score": 0, "creation_date": 1456961534, "post_id": 35760038, "comment_id": 59193813, "body": "edited the requirements in the qustion"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1456961554, "post_id": 35760038, "comment_id": 59193820, "body": "Now your two edits are contradictory. Anyway, it still makes no sense. There is no point in having a chain of <code>next&#47;prev</code> unless the code will traverse them somewhere. And you cannot traverse a variable length linked list without loops, gotos, recursions, etc. As suggested, it would be better if you pasted the <i>exact</i> assignment wording."}, {"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "edited": false, "score": 0, "creation_date": 1456961714, "post_id": 35760038, "comment_id": 59193882, "body": "Its not supposed to be easy, those are the definite restrictions. But i&#39;ve tried coming up with a way to do this and found none, thats why im here."}, {"owner": {"reputation": 497, "user_id": 1812249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d126f269c17f870e5378f38942b1e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jigglypuff", "link": "https://stackoverflow.com/users/1812249/jigglypuff"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456961728, "post_id": 35760038, "comment_id": 59193883, "body": "@kaylum Unless you store that information in the struct of each List. So you&#39;d have a field for the length of the list which you increment every time you add a node. And you have a field for the last element, which you use to append the next node to insert and then update after doing so. This shouldn&#39;t use any loops, gotos or recursion."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 497, "user_id": 1812249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d126f269c17f870e5378f38942b1e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jigglypuff", "link": "https://stackoverflow.com/users/1812249/jigglypuff"}, "edited": false, "score": 1, "creation_date": 1456961938, "post_id": 35760038, "comment_id": 59193963, "body": "@Martinn What you are saying may be true if the requirement was worded more narrowly. Like &quot;no loops when creating a new list node&quot;. But a blanket &quot;no loops&quot; requirement does not make sense. How would one find a node in the middle? The point is that the requirements are unclear. We will never reach the right solution if we start with the wrong requirements. Is it really that unreasonable to ask the OP to paste in the exact wording of the assignment in context?"}, {"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "reply_to_user": {"reputation": 497, "user_id": 1812249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d126f269c17f870e5378f38942b1e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jigglypuff", "link": "https://stackoverflow.com/users/1812249/jigglypuff"}, "edited": false, "score": 0, "creation_date": 1456961982, "post_id": 35760038, "comment_id": 59193979, "body": "@Martinn Incrementing the counter on one node still won&#39;t update the field on other nodes and without loops I don&#39;t know how to update all of them"}, {"owner": {"reputation": 497, "user_id": 1812249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d126f269c17f870e5378f38942b1e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jigglypuff", "link": "https://stackoverflow.com/users/1812249/jigglypuff"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456962219, "post_id": 35760038, "comment_id": 59194078, "body": "@kaylum Of course we don&#39;t have the exact requirements in front of us, but I suspect that there is no requirement to access information from nodes in the middle of the List, or to insert/delete them. The OP has just mentioned that the length of the list has to be returned, which can be done in the method I described above. If that&#39;s not the case then either it&#39;s not possible, or there is something else that we&#39;re not aware of."}, {"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456962288, "post_id": 35760038, "comment_id": 59194104, "body": "@kaylum im not trying to interfere people who try to help me Those are the exact words No loops - excluding destructor No goto No recuresion That&#39;s it, nothing more."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456962485, "post_id": 35760038, "comment_id": 59194178, "body": "@Yarden Perhaps there&#39;s nothing more in that one sentence. But how about all the sentences that go around it? That is, the full context."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1456962648, "post_id": 35760038, "comment_id": 59194255, "body": "As asked above, can we have the EXACT (I assume homework) assignment? Scan it? Take a picture with a smartphone while wearing a mask in case we can see your face in a reflective surface? Copy/paste it?"}, {"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "edited": false, "score": 0, "creation_date": 1456962788, "post_id": 35760038, "comment_id": 59194313, "body": "Thought about trying to save count as a pointer i think that should do it. And i will translate the other instructions"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456963967, "post_id": 35760038, "comment_id": 59194694, "body": "Ok, that is clearer. Can you declare your own structures or not? If you can then suggest you have seperate structures for <code>List</code> and for <code>ListNode</code>. <code>List</code> will contain: count, current_average, head, tail. <code>ListNode</code> will contain: value, next, prev."}], "answers": [{"comments": [{"owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "edited": false, "score": 0, "creation_date": 1457099993, "post_id": 35760940, "comment_id": 59265403, "body": "I took a different approach but thank you for your time! It did help me"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "edited": false, "score": 0, "creation_date": 1457101777, "post_id": 35760940, "comment_id": 59266621, "body": "@Yarden if you want you can share your approach by posting it as an answer. (Answering your item question is OK here)"}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1456965073, "creation_date": 1456965073, "answer_id": 35760940, "question_id": 35760038, "link": "https://stackoverflow.com/questions/35760038/c-list-class-like-progeram/35760940#35760940", "title": "C list class like progeram", "body": "<p><em>Disclaimer: I was assuming that your functions shall only operate with nodes, which is why I hid the list structure from the caller, resulting in this mess of an API.</em></p>\n\n<hr>\n\n<p>OK, this is going to win the prize for the worst API, but here's a possible solution:</p>\n\n<pre><code>struct node;\n\nstruct list {\n  int sum;\n  size_t count;\n  struct node * head, * end;\n\nstruct node {\n  struct node * next, * previous;\n  struct list * list;\n  int value;\n};\n\nstruct node * allocate_list(void) {\n  struct node * sentinel = malloc(sizeof(*sentinel));\n  struct list * list = malloc(sizeof(*list));\n  sentinel-&gt;previous = sentinel-&gt;next = NULL;\n  list-&gt;head = list-&gt;end = sentinel;\n  list-&gt;sum = 0;\n  list-&gt;count = 0;\n  sentinel-&gt;list = list;\n  return sentinel;\n}\n\nvoid free_list(struct node * n) {\n  struct list * list = n-&gt;list;\n  n = list-&gt;head;\n  while (n != list-&gt;end) {\n    n = n-&gt;next;\n    free(n-&gt;previous);\n  }\n  free(n);\n  free(list);\n}\n\nvoid add_item(struct node * n, int value) {\n  struct node * new = malloc(sizeof(*new));\n  new-&gt;previous = n-&gt;previous;\n  n-&gt;previous = new;\n  new-&gt;next = n;\n  new-&gt;value = value;\n  new-&gt;list = n-&gt;list;\n  if (new-&gt;previous == NULL) {\n    new-&gt;list-&gt;head = new;\n  }\n  ++(new-&gt;list-&gt;count);\n  new-&gt;list-&gt;sum += value;\n}\n</code></pre>\n\n<p>The rest of the functions should be trivial, and won't definitely not need any loops or recursions.</p>\n\n<p>The key idea is storing a pointer to data shared for the whole list to each node. This shared data can thus be accessed and modified from any node.</p>\n"}], "owner": {"reputation": 374, "user_id": 2723242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a76ac150167a44573b4b2ea5fdd6b892?s=128&d=identicon&r=PG&f=1", "display_name": "Yarden", "link": "https://stackoverflow.com/users/2723242/yarden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1456999417, "answer_count": 1, "score": -1, "last_activity_date": 1456965073, "creation_date": 1456960111, "last_edit_date": 1456963094, "question_id": 35760038, "link": "https://stackoverflow.com/questions/35760038/c-list-class-like-progeram", "closed_reason": "Needs more focus", "title": "C list class like progeram", "body": "<p>I need to simulate a class of Linked list in C.\nMy problem is with saving information like list length, head, last node and average with each \"object\" created.\nMeaning </p>\n\n<pre><code>List *A = ctor()\naddItem(A, 0)\n</code></pre>\n\n<p>and checking for list length of A will return 2.\nbut if I do another list named B, and add two other items it will show 3.\nI'm not allowed to use loops in any function (excluding the destructor - no recursion and goto also)\nand honestly i cant think of a way to save that information for each \"object\" (lacking another word for it right now)\nAny suggestions?\nEverything is in C\nI don't want to use simple global variables because I still need to save different information for each instance (found the word)</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Struct contains: </p>\n\n<pre><code>int value\nList *next\nList *previous\n</code></pre>\n\n<p>and can not contain any more values</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>I can add more fields to the struct</p>\n\n<p>Requirements are:\nDo not use loops, recursion, goto</p>\n\n<p>List functions:</p>\n\n<p>1) Construct -create a new list</p>\n\n<p>2) Destruct - delete all nodes (can use loop in that function)</p>\n\n<p>3) Adding a node</p>\n\n<p>4) Deleting a node - given a pointer to that node</p>\n\n<p>5) Returning the length of the list</p>\n\n<p>6) Return a pointer to the first node</p>\n\n<p>7) Return a pointer to the last node</p>\n\n<p>8) Return a pointer to the next node (given pointer to current one)</p>\n\n<p>9) Return a pointer to the previous node (given pointer to current one)</p>\n\n<p>10) Return value of a node (given a pointer to that node)</p>\n\n<p>11) Return average of values in list</p>\n\n<p>Thats it, the functions are very basic when the instructions are not so </p>\n\n<p>restrictive</p>\n\n<p>I dont know if it helps a lot</p>\n"}, {"tags": ["c", "casting"], "comments": [{"owner": {"reputation": 8909, "user_id": 1159604, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZNjba.png?s=128&g=1", "display_name": "Foggzie", "link": "https://stackoverflow.com/users/1159604/foggzie"}, "edited": false, "score": 1, "creation_date": 1456958482, "post_id": 35759592, "comment_id": 59192587, "body": "You&#39;re trying to assign an <code>int</code> to a pointer.  If you want <code>ptr</code> to point at <code>ival</code>, you would need <code>ptr = &amp;ival;</code>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456958549, "post_id": 35759592, "comment_id": 59192616, "body": "I don&#39;t know what you mean by &quot;indirect cast&quot;.  The reason this doesn&#39;t work is you&#39;re trying to assign an <code>int</code> to an <code>int *</code>, which generally doesn&#39;t make sense.  If you want to force it to happen, you need to cast the <code>int</code> to <code>int *</code> before making the assignment.  But normally you would take the address of the <code>int</code>, obtaining an <code>int *</code>, then assign that to the pointer."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1456958600, "post_id": 35759592, "comment_id": 59192645, "body": "<code>ptr = ival;</code> eh ... do you mean this? As it stands you&#39;re assigning some (uninitialised, hello UB) integer value as address of a pointer. That&#39;s not how pointer arithmetic is supposed to be done."}, {"owner": {"reputation": 1232, "user_id": 2608572, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fNEd6.jpg?s=128&g=1", "display_name": "yemerra", "link": "https://stackoverflow.com/users/2608572/yemerra"}, "edited": false, "score": 0, "creation_date": 1456959242, "post_id": 35759592, "comment_id": 59192928, "body": "If I have <code>double d = 2.0; int i = d;</code> It works, why It shouldnt work for <code>int</code>and <code>int *</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456959245, "post_id": 35759592, "comment_id": 59192930, "body": "&quot;Can someone explain me why I cannot do this?&quot; - Because it is undefined behaviour? Beacuse it is nonsense? What do you <b>think</b> it does? What do you want to accomplish? Why do you think it should do anything useful? It is not a bit better with <code>double</code>, btw. There is a reason a modern compiler warns about this (if not: enable warnings as you <b>always</b> should)"}, {"owner": {"reputation": 1232, "user_id": 2608572, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fNEd6.jpg?s=128&g=1", "display_name": "yemerra", "link": "https://stackoverflow.com/users/2608572/yemerra"}, "edited": false, "score": 0, "creation_date": 1456959527, "post_id": 35759592, "comment_id": 59193056, "body": "I don&#39;t think it is usefull, I just would like to understand why it doesn&#39;t work. One could argue that you can find out the adress and just copy it in an integer and asign it like that. so I can write an address like 228045 or something as an integer and it will be seen as an <code>int *</code> like the example with int and double."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456959898, "post_id": 35759592, "comment_id": 59193190, "body": "<code>I just would like to understand why it doesn&#39;t work.</code> Then you need to read more about the difference between <code>int</code> and <code>int*</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456960522, "post_id": 35759592, "comment_id": 59193429, "body": "Just read the standard. <a href=\"http://port70.net/~nsz/c/c11/n1570.html\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html</a>"}, {"owner": {"reputation": 452, "user_id": 5898372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s33No.gif?s=128&g=1", "display_name": "John Forkosh", "link": "https://stackoverflow.com/users/5898372/john-forkosh"}, "edited": false, "score": 0, "creation_date": 1456967841, "post_id": 35759592, "comment_id": 59195844, "body": "I see you don&#39;t want int ival, *ptr=&amp;ival; as most others sensibly assumed. Then TomKarzes&#39;s comment above and bta&#39;s answer below are indeed what you&#39;re looking for. Just write int ival=1234, *ptr=(int *)ival; But now, executing that *ptr=255 statement is almost certain to segfault. As I&#39;ve written it, with ival=1234 initialized, *ptr=255 tries to store the value 255 at the (likely sizeof(int)=4) bytes at absolute physical address 1234, which is likely not in your address space. To execute *ptr=255, you&#39;d <b>have</b> to want ptr=&amp;ival, and <b>not</b> ptr=(int *)ival."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 452, "user_id": 5898372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s33No.gif?s=128&g=1", "display_name": "John Forkosh", "link": "https://stackoverflow.com/users/5898372/john-forkosh"}, "edited": false, "score": 0, "creation_date": 1456968169, "post_id": 35759592, "comment_id": 59195927, "body": "@JohnForkosh: The C standard does not even mention &quot;segmentation fault&quot;. It is just undefined behaviour. Another problem is the conversion of an <code>int</code> to a pointer type is not guaranteed to yield any reasonable result either (and on typical 64 bit systems it very likely will not). Anyway, it is just wrong."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1456959198, "creation_date": 1456959198, "answer_id": 35759831, "question_id": 35759592, "link": "https://stackoverflow.com/questions/35759592/indirect-cast-from-int-to-int/35759831#35759831", "title": "Indirect cast from int to int *", "body": "<p>When you write</p>\n\n<pre><code>ptr = ival;\n</code></pre>\n\n<p>it means you want to copy the <strong>value</strong> of <code>ival</code> to the value of <code>ptr</code>. If you want <code>ptr</code> to point to the location where <code>ival</code> is stored, you have to use the address-of operator <code>&amp;</code>:</p>\n\n<pre><code>ptr = &amp;ival;\n</code></pre>\n\n<p>I suspect you may be confused because you don't need to do this when the right-hand side of the assignment is an array, e.g. you can write. </p>\n\n<pre><code>char *ptr;\nchar cvar[10];\nptr = cvar;\n</code></pre>\n\n<p>That's a special case becaue arrays can't be assigned as values in C, and when you try to use them in that context they automatically decay to a pointer to their first element. So the last line is treated as if you'd written:</p>\n\n<pre><code>ptr = &amp;cvar[0];\n</code></pre>\n\n<p>This special behavior only happens for arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": false, "score": 0, "last_activity_date": 1456960423, "last_edit_date": 1456960423, "creation_date": 1456960021, "answer_id": 35760018, "question_id": 35759592, "link": "https://stackoverflow.com/questions/35759592/indirect-cast-from-int-to-int/35760018#35760018", "title": "Indirect cast from int to int *", "body": "<p>What are you trying to do here?  If you're wanting to store a pointer to the variable <code>ival</code>, then you need to use <code>ptr = &amp;ival;</code>.  If you want to use the numerical value stored in <code>ival</code> as a memory address and set the pointer to that, then you need to do <code>ptr = (int*)ival;</code>.</p>\n\n<p>The reason you can't do <code>ptr = ival;</code> is because the compiler - like those of us reading the question - can't tell which of these two things you're trying to do.  Never make the compiler figure out what you mean; always be explicit.</p>\n\n<p>You can do this with a <code>double</code> and an <code>int</code> because the language defines procedures for converting between numeric data types.  The language specifically does <em>not</em> define procedures for converting between numeric types and pointer types.  Different platforms can have different ways of formatting pointers, and there's no guarantee that it's even <em>possible</em> to represent a pointer as a numeric value (this was more of a problem when C was first standardized than it is today).  When you add the manual typecast, you're telling the compiler that you know what you're doing and that it's safe to attempt to make a conversion that it wouldn't try to do on its own.</p>\n"}], "owner": {"reputation": 1232, "user_id": 2608572, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fNEd6.jpg?s=128&g=1", "display_name": "yemerra", "link": "https://stackoverflow.com/users/2608572/yemerra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 35759831, "answer_count": 2, "score": -2, "last_activity_date": 1456960423, "creation_date": 1456958220, "question_id": 35759592, "link": "https://stackoverflow.com/questions/35759592/indirect-cast-from-int-to-int", "title": "Indirect cast from int to int *", "body": "<p>Can someone explain me why I cannot do this?</p>\n\n<pre><code>int *ptr;\nint ival;\nptr = ival;\n*ptr = 255;\n</code></pre>\n\n<p>When I do the same with <code>double</code> and <code>int</code> values instead of <code>int</code> and <code>int *</code> values I will just have an indirekt cast, why can't it work for the last pair?</p>\n"}, {"tags": ["c", "linked-list", "stack", "stack-overflow", "buffer-overflow"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1456956456, "post_id": 35759001, "comment_id": 59191568, "body": "&quot;I do not think that copying the code will help anyone&quot;. That&#39;s a very wrong thinking. The problem is almost certainly bugs in your code causing Undefined Behaviour. Please post the code in the question itself (not as an external link). What do you think happens to the memory <code>top</code> is pointing to after this code runs: <code>top=newNode; free(newNode);</code>? And then what do yo think happens later when you try to access the data pointed to by <code>top</code>?"}, {"owner": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 0, "creation_date": 1456956531, "post_id": 35759001, "comment_id": 59191606, "body": "Hmm I wonder what happens if you try to put more items in an array than the array has items, hmmm I wonder why that would give you issues..."}, {"owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456956661, "post_id": 35759001, "comment_id": 59191663, "body": "@kaylum top=newNode; means that the top points to newNode so I do not need newNode anymore, and thus i free it! Correct?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456956720, "post_id": 35759001, "comment_id": 59191688, "body": "Absolutely incorrect. If I give you the address of my house and then physically destroy my house can you still access my house? A pointer, <code>top</code> in this case, is just an address to some memory. If you <code>free</code> the memory then the pointer becomes invalid and dereferencing it is Undefined Behaviour."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456956739, "post_id": 35759001, "comment_id": 59191699, "body": "I can assure that actual code is a thousand times better than a text description of the code .  Not sure what you do for a job but try to imagine a similar situation in your line of work"}, {"owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456956847, "post_id": 35759001, "comment_id": 59191752, "body": "But @kaylum by freeing a pointer I am destroying the address, not the house right? And dont forget it was running correctly!"}, {"owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456956893, "post_id": 35759001, "comment_id": 59191779, "body": "@M.M I am putting the code!"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1456956903, "post_id": 35759001, "comment_id": 59191784, "body": "No. You destroyed the house. The pointer is just an address to the physical house. Look up &quot;Undefined Behaviour&quot;. It means you can not predict what will be the result - it may crash immediately, not crash but produce wrong results, appear to work sometimes, etc. And the behaviour may change on recompilation, or different runs of the same program, etc. So totally unpredictable."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456956918, "post_id": 35759001, "comment_id": 59191799, "body": "What is your question exactly?   As far as I can tell it seems like you are saying &quot;I overflowed my buffer on purpose and it prints weird things&quot;, and you haven&#39;t asked a question anywhere."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456956927, "post_id": 35759001, "comment_id": 59191805, "body": "Why <code>#include &quot;stdio.h&quot;</code> and not <code>#include &lt;stdio.h&gt;</code>? and also you call <code>malloc</code> but <code>stdlib.h</code> is missing. is this a JOKE?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456957005, "post_id": 35759001, "comment_id": 59191848, "body": "@M.M OP is saying he overflowed the buffer once. And now his program does not work anymore even on seperate runs. OP basically does not know about Undefined Behaviour."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456957058, "post_id": 35759001, "comment_id": 59191887, "body": "There is not possible way that this code compiles even with the worst compiler."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456957272, "post_id": 35759001, "comment_id": 59192004, "body": "@Michi it compiles in <code>gcc -std=c11 -pedantic</code>  (with warnings, which OP obviously should fix)"}, {"owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456957317, "post_id": 35759001, "comment_id": 59192026, "body": "I compiled it with microsoft&#39;s windows compiler! @kaylum thanks!"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456957364, "post_id": 35759001, "comment_id": 59192051, "body": "<code>printf(&quot;Den anagnwristike to %s, input_string=(P|K)*\\n&quot;);</code> What should be exactly printed with <code>%s</code> here?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456957458, "post_id": 35759001, "comment_id": 59192099, "body": "@M.M I hope not. This code has <a href=\"http://pastebin.com/raw/Ag7G5Ezi\" rel=\"nofollow noreferrer\">tooooo</a> many problems."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456957515, "post_id": 35759001, "comment_id": 59192127, "body": "The <i>undefined behaviour</i> perhaps assured that when you overflowed the buffer <b><i>once</i></b> the program will never run correctly again, on any planet."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1456957634, "post_id": 35759001, "comment_id": 59192189, "body": "@M.M <a href=\"http://pastebin.com/raw/4UcMWz5u\" rel=\"nofollow noreferrer\">How is that possible</a> ?"}, {"owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456957701, "post_id": 35759001, "comment_id": 59192214, "body": "@kaylum My friend you where right!!! Thanks a lot! M.M thanks for the effort! I should delete that question now right?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456957756, "post_id": 35759001, "comment_id": 59192242, "body": "You should ask him to post the solution as an answer."}, {"owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456957884, "post_id": 35759001, "comment_id": 59192311, "body": "@kaylum can you post that thing with the addresses as an answer? So I can tick it!"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456957919, "post_id": 35759001, "comment_id": 59192328, "body": "@Skemelio Do you have your own <code>stdio.h</code> header file ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456958107, "post_id": 35759001, "comment_id": 59192425, "body": "@Michi gcc tries very hard to be friendly, apparently"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456958358, "post_id": 35759001, "comment_id": 59192521, "body": "@M.M could be, but OP&#39;s code has to many problems which aren&#39;t actually just warnings. and if that piece of code does compiled, well I&#39;m a happy guy, because I gave up on Microsoft from more than 10 Years :D."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456958697, "post_id": 35759001, "comment_id": 59192681, "body": "@Michi it compiled in GCC (as you showed). I don&#39;t see any reason to target MS.  Most people expect the compiler to help them make a program, rather than fight every step of the way"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456959000, "post_id": 35759001, "comment_id": 59192827, "body": "@M.M I meant something else and I deleted my comment :) . Any way this is wrong I think :D I tough that <code>-pedantic</code> should be avoided ?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456959182, "post_id": 35759001, "comment_id": 59192900, "body": "@Michi <code>-std=c11 -pedantic</code> means to comply with C11 standard as much as possible  (the standard requires that the compiler output a diagnostic message, which it did)."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456959280, "post_id": 35759001, "comment_id": 59192947, "body": "@M.M Thank you for your explanation, I learn every day something new. Any way i use <code>GCC-5.3</code> which I think that has included default <code>c11</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456962188, "post_id": 35759001, "comment_id": 59194062, "body": "I highly doubt that you broke your computer. If your linked list program doesn&#39;t work, then that&#39;s probably just because your linked list program is broken too."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456965048, "post_id": 35759001, "comment_id": 59195021, "body": "I stopped at &#39; I need your attention please!&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456958047, "post_id": 35759512, "comment_id": 59192394, "body": "If the OP&#39;s code is the whole code then Microsoft&#39;s compiler should be avoided."}, {"owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "edited": false, "score": 0, "creation_date": 1456958310, "post_id": 35759512, "comment_id": 59192494, "body": "@M.M thanks for your effort. I know that overflowing the buffer is a problem too but sometimes its working. My problem was that I could not understand how free() works. I thought it frees the memory space of a pointer, not where a pointer points to. Unfortunately I can mark only one question correct!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1456958409, "post_id": 35759512, "comment_id": 59192550, "body": "@Michi: As MSVC is not standard compliant anyway, this is good advice in general."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456958494, "post_id": 35759512, "comment_id": 59192592, "body": "@Olaf Alles klar :)). I will never use Microsoft products this mean that I will never know something about it ."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1456957935, "last_edit_date": 1495540227, "creation_date": 1456957935, "answer_id": 35759512, "question_id": 35759001, "link": "https://stackoverflow.com/questions/35759001/undefined-computer-behavior-after-running-a-c-program/35759512#35759512", "title": "Undefined computer behavior after running a C program", "body": "<p>Your code starts off with:</p>\n\n<pre><code>#define STR_LENGTH 50\n\n// ...  in main\nchar input_string[STR_LENGTH];\nscanf(\"%s\", input_string);\n</code></pre>\n\n<p>In your question you talk about a buffer of length <code>500</code>. But there is no such buffer in your code, the length is <code>50</code>.</p>\n\n<p>If you type in 50 or more characters then you cause <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">undefined behaviour</a>. This means that <em>anything can happen</em>. There is no possible way you can control what happens in this case and you should not expect any particular behaviour.</p>\n\n<p>The <strong>only</strong> way to fix the problem is to stop overflowing the buffer. You must change your code so that there is no overflow.</p>\n\n<p>Your program description is that it should support up to 500 characters in the string. One way to achieve this would be: </p>\n\n<pre><code>char input_string[501];   // +1 for terminator\nscanf(\"%500s\", input_string);   // IMPORTANT: 500 limiter\n</code></pre>\n\n<p>If you wanted to report an error if they typed too much, instead of just ignoring it, you could then write:</p>\n\n<pre><code>if ( !isspace(getchar()) )    // requires #include &lt;ctype.h&gt;\n{\n    fprintf(stderr, \"Too many characters entered - aborting program\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>for example.</p>\n\n<p>If you actually want to support an arbitrary length of input then you would need to switch to a more complicated memory strategy (e.g. a linked list, or reallocating a buffer as the input grows). </p>\n\n<hr>\n\n<p>Other notes on your code:</p>\n\n<ul>\n<li>You use functions from <code>#include &lt;stdlib.h&gt;</code> so you must have that line</li>\n<li><code>printf(\"Den anagnwristike to %s, input_string=(P|K)*\\n\")</code> has a <code>%s</code> but no corresponding argument, this also causes undefined behaviour</li>\n<li>Use <code>exit(EXIT_FAILURE)</code> instead of <code>_exit(-1);</code></li>\n</ul>\n\n<p>NB. There may be other issues as well, I didn't check your whole program.</p>\n"}, {"tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 4, "last_activity_date": 1456958140, "creation_date": 1456958140, "answer_id": 35759565, "question_id": 35759001, "link": "https://stackoverflow.com/questions/35759001/undefined-computer-behavior-after-running-a-c-program/35759565#35759565", "title": "Undefined computer behavior after running a C program", "body": "<p>Your code has Undefined Behaviour (UB). The result of running code with UB is unpredictable. It can sometimes appear to work but there is no guarantee that the same result will occur each and every time.</p>\n\n<p>At least one source of your UB is this code:</p>\n\n<pre><code>top=newNode;\nfree(newNode);\n</code></pre>\n\n<p>Once <code>newNode</code> is freed the <code>top</code> pointer becomes invalid and any dereferencing of that pointer will result in UB.</p>\n"}], "owner": {"reputation": 457, "user_id": 3486475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uuvCX.jpg?s=128&g=1", "display_name": "Mr T", "link": "https://stackoverflow.com/users/3486475/mr-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 35759565, "answer_count": 2, "score": -4, "last_activity_date": 1456958140, "creation_date": 1456956053, "last_edit_date": 1456957935, "question_id": 35759001, "link": "https://stackoverflow.com/questions/35759001/undefined-computer-behavior-after-running-a-c-program", "title": "Undefined computer behavior after running a C program", "body": "<p>I am getting right to the point because I cannot explain the situation that I am going to describe. I need your attention please!</p>\n\n<p>Yesterday I wrote a program in C. The program takes as input a string and if that string is in this form \"PKPKKKPPPKKKP\", namely consists <strong>only 'P' and 'K'</strong> character it prints you YES or NO. YES if for a single 'P' character there is a match with a 'K' character. Exactly as we do with parenthesis characters problem '(', ')', only instead of '(' I had to use 'P' and instead of ')', 'K'.</p>\n\n<p>With a little help from here I managed to finish the program and it was running correctly. I do not think that copying the code will help anyone, but I will explain how it works. </p>\n\n<p><strong>Program Description</strong>:\n The program takes a string (<strong>the string can be up to 500 length</strong>) as input, if the string consists only 'P' and 'K' characters it prints YES or NO, as I described above, otherwise it rejects it. Then it reads the input, character by character, and when it finds 'P' it is pushed in a stack, else pop. (I implemented the stack with linked list, so the user will be able to give as big a string he wants (or I thought so...)).\n Before the user typed a string, the symbol 'A' was in the stack. So the input was analyzing by the program, character by character and if it found a 'P' it was pushed to the stack, else pop the stack. If the top of the stack at the end was the 'A' character, the program was printing YES, else NO.</p>\n\n<p><strong>Problem Description</strong>:\n So I am with a friend of mine today,performing the program. Everything was ok. Until I pass as an input a really big string, like 300'P's and 300'K's (and remember my string is a char string[500]). It printed yes. Then I typed a string like 800'P's+800'K's. It didn't run correctly. \n Here is the problem, after that incident whatever if I type a string, a normal one \"PKPKPK\", it prints millions of weird symbols ( x \u2514 X \u2568 x \u2514 X \u2568 x ). I haven't touch the code, I swear! I compiled again, run again, the same! Its like something is wrong with my pc (Windows 10). \n And the problem continues to another program...I tried to make a a simple program just to function a stack implemented with linked list. I pushed the character 'a' and print it. It prints '\u00e1'. I pushed the 'b'. It prints 'h'. I pushed the 'd'. It prints 'L'.</p>\n\n<p>Obviously I should not have typed such a huge string because the limit of its length was 500. But the problem still exists! I cannot write a program with linked list anymore. I am desperate! </p>\n\n<p><strong>The code:</strong></p>\n\n<pre><code>#include \"stdio.h\"\n#define FIRST_SYMBOL_IN_STACK 'A'\n#define TRUE 1\n#define FALSE 0\n#define STR_LENGTH 50\n#define YES \"YES\"\n#define NO \"NO\"\n#define PLA 'P'\n#define KAL 'K'\n\ntypedef struct node {\n    char simvolo_eisodou;\n    struct node *next;\n} node; \n\nnode *top = NULL; // the top of the stack\n\nvoid push(char simvolo_eisodou); //stack function\nint isStackEmpty(); //stack function\nvoid pop(); //stack function\nvoid printStack(); //print the current stack elements\nint isInputValid(char *string); \nvoid printWelcome();\n\nint main() {\n    char input_string[STR_LENGTH], apantisi = 'G';  //O xristis mporei na dwsei input_string mikous ews 500 xaraktires\n    push(FIRST_SYMBOL_IN_STACK);\n    int i = 0;\n    scanf(\"%s\", input_string);\n\n    if (isInputValid(input_string)) {\n        while (input_string[i] != '\\0') {\n            if (input_string[i] == PLA) {\n                push(PLA);\n                printStack();\n            } else {\n                pop();\n                printStack();;\n            }\n            i++;\n        }\n    } else {\n        printf(\"Den anagnwristike to %s, input_string=(P|K)*\\n\");\n        _exit(-1);\n    }\n\n    if (top-&gt;simvolo_eisodou == FIRST_SYMBOL_IN_STACK) {\n        printf(\"%s\\n\", YES);\n    } else {\n        printf(\"%s\\n\", NO);\n    }\n\n    return 0;\n}\n\nvoid push(char simvolo_eisodou) {\n    node *newNode = (node*)malloc(sizeof(node));\n    newNode-&gt;simvolo_eisodou = simvolo_eisodou;\n    newNode-&gt;next = top;\n    top = newNode;\n    free(newNode);\n}\n\nint isStackEmpty() { //Thewrw oti i stoiva einai adeia otan i korifi einai to arhiko simvolo\n    if (top-&gt;simvolo_eisodou == FIRST_SYMBOL_IN_STACK) {\n        return TRUE;\n    }\n    return FALSE;\n}\n\nvoid pop( ){\n    if (isStackEmpty()) {\n        printf(\"KENO\\n\");\n        printf(\"%s\\n\", NO);\n        _exit(-1);\n    }\n    node *temp = top;\n    top = top-&gt;next;\n    free(temp);\n}\n\nvoid printStack() {\n    node *current = top;\n    while (current != NULL) {\n        printf(\"%c \", current-&gt;simvolo_eisodou);\n        current = current-&gt;next;\n    }\n    free(current);\n    printf(\"\\n\");\n}\n\nint isInputValid(char *string) {\n    int i = 0;\n    while (*(string + i) != '\\0') {\n        if (!(*(string + i) == 'P' || *(string + i) == 'K')) {\n            return 0;\n        }\n        ++i;\n    }\n    return 1;\n}\n\nvoid printWelcome() {\n    printf(\"\\n====================================================================\\n\");\n    printf(\"Welcome\\n\");\n    printf(\"====================================================================\\n\");\n    printf(\"\\n\\n\\n Plz type input_string=(P|K)*\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "blocking", "nonblocking", "mbed"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1456959060, "post_id": 35758969, "comment_id": 59192848, "body": "Threading and callbacks?"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 2667626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d0e1fc106a6920410f01f9fd80a8c348?s=128&d=identicon&r=PG&f=1", "display_name": "UniqueName", "link": "https://stackoverflow.com/users/2667626/uniquename"}, "edited": false, "score": 0, "creation_date": 1456999601, "post_id": 35760297, "comment_id": 59209718, "body": "Do you mean polling it with say an if statement instead of a while loop? so if data is available else sleep. Then have another callback?"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 83, "user_id": 2667626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d0e1fc106a6920410f01f9fd80a8c348?s=128&d=identicon&r=PG&f=1", "display_name": "UniqueName", "link": "https://stackoverflow.com/users/2667626/uniquename"}, "edited": false, "score": 0, "creation_date": 1457026477, "post_id": 35760297, "comment_id": 59229789, "body": "@UniqueName- Keep the while loop, just add something inside of it that relinquishes control of the CPU for a short while.  On some OSes, you can do that with something like <code>while (!isRxData()) { usleep(10); }</code>."}], "tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": false, "score": 0, "last_activity_date": 1456961235, "creation_date": 1456961235, "answer_id": 35760297, "question_id": 35758969, "link": "https://stackoverflow.com/questions/35758969/alternative-to-blocking-code/35760297#35760297", "title": "Alternative to blocking code", "body": "<p>Instead of looping until data is available, you'll want to poll for data.  If RX data is not available, exit the function and set a timer to go off after a short interval.  When the timer goes off, check for data again.  Repeat until data is available.  I'm not familiar with your OS so I can't offer any specific code.  This may be as simple as adding a short \"sleep\" call inside the <code>while</code> loop, or may involve creating another callback from the scheduler.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 2667626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d0e1fc106a6920410f01f9fd80a8c348?s=128&d=identicon&r=PG&f=1", "display_name": "UniqueName", "link": "https://stackoverflow.com/users/2667626/uniquename"}, "edited": false, "score": 0, "creation_date": 1457031763, "post_id": 35780108, "comment_id": 59232910, "body": "I am currently using that at the minute,unfortunately it means it doesn&#39;t pick up every message"}, {"owner": {"reputation": 58, "user_id": 1493711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef726f24ce7497b412a42ac112561e2?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1493711/brian"}, "reply_to_user": {"reputation": 83, "user_id": 2667626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d0e1fc106a6920410f01f9fd80a8c348?s=128&d=identicon&r=PG&f=1", "display_name": "UniqueName", "link": "https://stackoverflow.com/users/2667626/uniquename"}, "edited": false, "score": 0, "creation_date": 1457043390, "post_id": 35780108, "comment_id": 59239703, "body": "In that case, I would try doing <code>while(wireless.isRxData())</code> instead of <code>if (wireless.isRxData())</code>. Also, you could try decreasing your period and tolerance when you post the <code>listen</code> callback."}, {"owner": {"reputation": 83, "user_id": 2667626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d0e1fc106a6920410f01f9fd80a8c348?s=128&d=identicon&r=PG&f=1", "display_name": "UniqueName", "link": "https://stackoverflow.com/users/2667626/uniquename"}, "edited": false, "score": 0, "creation_date": 1457043953, "post_id": 35780108, "comment_id": 59239951, "body": "Thanks, I am using that approach now just need to do some experimenting with the period and tolerance to get the responsiveness of the system right."}], "tags": [], "owner": {"reputation": 58, "user_id": 1493711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aef726f24ce7497b412a42ac112561e2?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1493711/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1457029709, "creation_date": 1457029709, "answer_id": 35780108, "question_id": 35758969, "link": "https://stackoverflow.com/questions/35758969/alternative-to-blocking-code/35780108#35780108", "title": "Alternative to blocking code", "body": "<p>You should remove the <code>while (!(wireless.isRxData()));</code> loop in your <code>listen</code> function. Replace it with:</p>\n\n<pre><code>if (wireless.isRxData()) {\n    len = wireless.getRxData(msg);\n    // Process data\n}\n</code></pre>\n\n<p>Then, you can process your data in that if statement, or you can call <code>postCallback</code> on another function that will do your processing.</p>\n"}], "owner": {"reputation": 83, "user_id": 2667626, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d0e1fc106a6920410f01f9fd80a8c348?s=128&d=identicon&r=PG&f=1", "display_name": "UniqueName", "link": "https://stackoverflow.com/users/2667626/uniquename"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1457029709, "creation_date": 1456955943, "last_edit_date": 1456958272, "question_id": 35758969, "link": "https://stackoverflow.com/questions/35758969/alternative-to-blocking-code", "title": "Alternative to blocking code", "body": "<p>Attempting to use mbed OS scheduler for a small project.</p>\n\n<p>As mbed os is Asynchronous I need to avoid blocking code.</p>\n\n<p>However the library for my wireless receiver uses a blocking line of:</p>\n\n<pre><code>while (!(wireless.isRxData()));\n</code></pre>\n\n<p>Is there an alternative way to do this that won't block all the code until a message is received?</p>\n\n<pre><code>static void listen(void) {\n    wireless.quickRxSetup(channel, addr1);\n    sprintf(ackData,\"Ack data \\r\\n\");\n    wireless.acknowledgeData(ackData, strlen(ackData), 1);\n    while (!(wireless.isRxData()));\n    len = wireless.getRxData(msg);  \n}\n\nstatic void motor(void) {\n    pc.printf(\"Motor\\n\");\n    m.speed(1);\n    n.speed(1);\n    led1 = 1;\n    wait(0.5);\n    m.speed(0);\n    n.speed(0);\n}\n\nstatic void sendData() {\n    wireless.quickTxSetup(channel, addr1);\n    strcpy(accelData, \"Robot\");\n    wireless.transmitData(accelData ,strlen(accelData));\n}\n\nvoid app_start(int, char**) { \n    minar::Scheduler::postCallback(listen).period(minar::milliseconds(500)).tolerance(minar::milliseconds(1000));   \n    minar::Scheduler::postCallback(motor).period(minar::milliseconds(500));\n    minar::Scheduler::postCallback(sendData).period(minar::milliseconds(500)).delay(minar::milliseconds(3000));\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "memory-management", "fork"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1456956237, "post_id": 35758889, "comment_id": 59191470, "body": "This is generally unnecessary, as Linux uses a copy-on-write fork implementation so that the parent and child share the &quot;copied&quot; memory until the child modifies it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1456956656, "post_id": 35758889, "comment_id": 59191660, "body": "What you want isn&#39;t really feasible. For instance, suppose the library uses stdio, and stdio has some allocated memory, you wouldn&#39;t want your &quot;free all allocated memory&quot; to free that. So what you really want is &quot;free everything that&#39;s not needed any more&quot;, but how can a general-purpose function know what&#39;s not needed?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1456956713, "post_id": 35758889, "comment_id": 59191685, "body": "@RossRidge But you&#39;d like to remove your reference to the copy, so it will all go away when the parent exits."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1456958341, "post_id": 35758889, "comment_id": 59192512, "body": "@RossRidge Also, &quot;modifying&quot; here also possibly means stuff like allocating new memory. This will change internal state of the user space allocator, possibly dirtying many pages with stuff allocated by the &quot;calling&quot; process."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1456961118, "post_id": 35758889, "comment_id": 59193660, "body": "@DanielJour Meh.  Any reasonably efficient allocator isn&#39;t going to modify &quot;many pages&quot; when allocating new memory."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1456961514, "post_id": 35758889, "comment_id": 59193807, "body": "@RosdRidge That greatly depends on the fragmentation when doing the fork. I&#39;m also not talking about a single allocation, but rather many (done by the service). Due to possible fragmentation, they could end up in a lot of different pages, which contain (possibly a lot) of the data the &quot;calling&quot; process allocated."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1456965245, "post_id": 35758889, "comment_id": 59195078, "body": "@RossRidge It becomes unshared when either the parent or the child modifies it. In the extreme case, where the parent goes on to modify everything and the child just does its own stuff, you wind up with a copy of every page of memory the parent had allocated before the call to <code>fork</code>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456965312, "post_id": 35758889, "comment_id": 59195095, "body": "Your question is internally inconsistent. Either you can easily separate what is a parameter from what isn&#39;t or you can&#39;t. If you can&#39;t, then it&#39;s hopeless. How could you know what needs to be freed and what doesn&#39;t? If you can, then what&#39;s the problem with using <code>exec(&#47;proc&#47;self&#47;exe)</code>? Just separate all the stuff you want to keep first (using shared memory, for example)."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1456966515, "post_id": 35758889, "comment_id": 59195446, "body": "@DavidSchwartz The problem with that would be that you&#39;d execute the library&#39;s client program and not the library&#39;s server executable."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1456966890, "post_id": 35758889, "comment_id": 59195571, "body": "@thatotherguy True. You&#39;d need the library API to include a function the application must call early in <code>main</code> that decides whether to return or not based on how the library was invoked, doing nothing if it&#39;s a normal invocation of the application. You can probably hook stuff before <code>main</code> if you must, but that&#39;s kind of ugly."}], "answers": [{"comments": [{"owner": {"reputation": 4782, "user_id": 829568, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1bca76875ee9066171d5e2acb8a06a26?s=128&d=identicon&r=PG", "display_name": "Heinzi", "link": "https://stackoverflow.com/users/829568/heinzi"}, "edited": false, "score": 0, "creation_date": 1457000869, "post_id": 35761471, "comment_id": 59210645, "body": "Thanks. I don&#39;t want to rely on the PATH, because it is a security critical application and who knows where in the path an attacker might be able to place an alternative executable (e.g. ~/bin). One of the other points might work though. About the <i>exec</i> call, I&#39;d be passing sensitive data into the executable (e.g. passwords). Will they then be visible in a call to <i>ps</i> if I pass them to <i>exec</i>?"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 4782, "user_id": 829568, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1bca76875ee9066171d5e2acb8a06a26?s=128&d=identicon&r=PG", "display_name": "Heinzi", "link": "https://stackoverflow.com/users/829568/heinzi"}, "edited": false, "score": 1, "creation_date": 1457029010, "post_id": 35761471, "comment_id": 59231353, "body": "You could always sanitize your path, people with write access to <code>&#47;sbin</code> and <code>&#47;usr&#47;sbin</code> already have the system pwned. Any data you pass by key through <code>shm_open</code> will have the permissions you specify in that call. Other users can not use <code>ps</code> or anything else to read it, even if they have the key."}], "tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 3, "last_activity_date": 1456968632, "creation_date": 1456968632, "answer_id": 35761471, "question_id": 35758889, "link": "https://stackoverflow.com/questions/35758889/fork-and-free-all-allocated-memory/35761471#35761471", "title": "fork() and free all allocated memory", "body": "<p>This is an interesting question that I sadly don't have a good answer for. I doubt any cleanup strategies like sbrk+close+munmap will reliably allow any libc based code to continue to function, so I'd try to make exec'ing better:</p>\n\n<p>For any kind of exec based solution, you should be able to deep-copy data into shm to pass non-strings. This should take care of your second problem. </p>\n\n<p>Here are some wild suggestions for your first issue:</p>\n\n<ol>\n<li><p>Don't: just require that an executable is in PATH or a compile-time directory.</p>\n\n<p>This is transparent and follows the UNIX philosophy. An error message <code>Can't find myhelper in PATH</code> will not slow anyone down. Most tools depending on helper executables do this, and it's fine.</p></li>\n<li><p><a href=\"https://gcc.gnu.org/ml/gcc-help/2003-07/msg00232.html\" rel=\"nofollow\">Make your library executable</a>, and use that as your exec target. You can try finding its name with some kind of introspection, perhaps <code>/proc/self/maps</code> or whatever glibc offers. </p></li>\n<li><p>Like above, but exec <code>python</code> or something you can be reasonably sure exists, and use a foreign pointer interface to run a function on your library.</p></li>\n<li><p>As part of your build process, compile a tiny executable and include it as binary data in your library. Write it to <code>/tmp</code> and execute.</p></li>\n</ol>\n\n<p>Out of these, I prefer the simplicity and transparency of #1, even if that's the most boring solution.</p>\n"}], "owner": {"reputation": 4782, "user_id": 829568, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1bca76875ee9066171d5e2acb8a06a26?s=128&d=identicon&r=PG", "display_name": "Heinzi", "link": "https://stackoverflow.com/users/829568/heinzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 35761471, "answer_count": 1, "score": 0, "last_activity_date": 1456968632, "creation_date": 1456955705, "question_id": 35758889, "link": "https://stackoverflow.com/questions/35758889/fork-and-free-all-allocated-memory", "title": "fork() and free all allocated memory", "body": "<p>I'm writing a service (i.e. background process) and want to offer starting it via a shared library. That is, someone wanting to use the service would link to the shared library, call it's <em>start()</em> method, which would fork and return. The fork would then run the service.</p>\n\n<p>The problem with this approach is that the service process now might have a lot of legacy allocated memory it actually doesn't need. Is there a way to get rid of that and have the forked process allocate its own stuff? I know about <em>exec()</em> of course, but the problem with that is</p>\n\n<ul>\n<li>that I need an executable which might not be in the location I expect it to be due to different operating system folder layouts</li>\n<li>that I'd have to cast all potential parameters to string to pass it as program arguments to <em>exec()</em>.</li>\n</ul>\n\n<p>So basically, I'm looking for a way to call an arbitrary function <em>func()</em>  with some parameters that should run in a new process, and everything not passed into that function shouldn't be in the new process. Is there a way to achieve this or something similar?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 2, "creation_date": 1456955889, "post_id": 35758870, "comment_id": 59191266, "body": "<code>%8.d</code> should be <code>%8.f</code>, because you&#39;re printing float values, not integer ones"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1456955932, "post_id": 35758870, "comment_id": 59191299, "body": "You  mix <code>int</code> and <code>floats</code> and you use the wrong format specifiers <code>%d</code> instead of <code>%f</code>."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456962835, "post_id": 35759042, "comment_id": 59194325, "body": "Good catch on the <code>&quot;%3.1d&quot;</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1457003132, "last_edit_date": 1457003132, "creation_date": 1456956153, "answer_id": 35759042, "question_id": 35758870, "link": "https://stackoverflow.com/questions/35758870/why-it-does-not-print-the-value-of-fahrenheight-and-equivalent-celsius-in-revers/35759042#35759042", "title": "why it does not print the value of fahrenheight and equivalent celsius in reverse order from 300 to -40?", "body": "<p>The expression that converts to Celsius uses constants of type <code>double</code> so the expression is of type <code>double</code>.  Because you're using the <code>%d</code> format specifier with a <code>double</code> value, you get undefined behavior.</p>\n\n<p>Change the second format specifier to <code>%8.f</code> and you'll get the expected output.  Also, change the first format specifier to <code>%3.1d</code> so that when <code>fahr</code> is <code>0</code> it will print the value instead of just blanks.</p>\n\n<pre><code>printf(\"%3.1d %8.f\\n \",fahr,(5.0/9.0) * (fahr - 32.0));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456962634, "post_id": 35759147, "comment_id": 59194248, "body": "This answer&#39;s code  does not use <code>float</code> anywhere as suggested with &quot;you need to use float&quot;."}], "tags": [], "owner": {"reputation": 112, "user_id": 4807513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZWj1.jpg?s=128&g=1", "display_name": "Md. Shohan Hossain", "link": "https://stackoverflow.com/users/4807513/md-shohan-hossain"}, "is_accepted": false, "score": 1, "last_activity_date": 1456956566, "creation_date": 1456956566, "answer_id": 35759147, "question_id": 35758870, "link": "https://stackoverflow.com/questions/35758870/why-it-does-not-print-the-value-of-fahrenheight-and-equivalent-celsius-in-revers/35759147#35759147", "title": "why it does not print the value of fahrenheight and equivalent celsius in reverse order from 300 to -40?", "body": "<p>Because you trying to use double, where you need to use float. Try this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nmain()\n{\nint fahr;\nfor(fahr = 300; fahr &gt;= -40; fahr = fahr - 20)\n    printf(\"%3.d %8.f\\n \",fahr,((fahr - 32) * .5556));\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5260957, "user_type": "registered", "profile_image": "https://graph.facebook.com/703498669784757/picture?type=large", "display_name": "Debarati Banerjee", "link": "https://stackoverflow.com/users/5260957/debarati-banerjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 35759042, "answer_count": 2, "score": 3, "last_activity_date": 1457003132, "creation_date": 1456955634, "last_edit_date": 1456992523, "question_id": 35758870, "link": "https://stackoverflow.com/questions/35758870/why-it-does-not-print-the-value-of-fahrenheight-and-equivalent-celsius-in-revers", "title": "why it does not print the value of fahrenheight and equivalent celsius in reverse order from 300 to -40?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n    int fahr;\n    for(fahr = 300; fahr &gt;= -40; fahr = fahr - 20)\n        printf(\"%3.d %8.d\\n \",fahr,(5.0/9.0) * (fahr - 32.0));\n}\n</code></pre>\n\n<p>It prints the equivalent values but all wrong. Why is it happening?</p>\n"}, {"tags": ["c", "struct", "memory-layout"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1456955770, "post_id": 35758820, "comment_id": 59191197, "body": "Consider to types - apples and oranges. Are they the same? Both could be defined in terms of juice content and volume. i.e. two values. But would you compare them?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1456956003, "post_id": 35758820, "comment_id": 59191341, "body": "A decision was made to base the comparison on structure name (tag), not on structure.  This works to your advantage in the long run."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1456957300, "post_id": 35758820, "comment_id": 59192020, "body": "@JonathanLeffler How exactly?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456962022, "post_id": 35758820, "comment_id": 59194000, "body": "<code>static_assert(sizeof a == sizeof b); memcpy(&amp;a, &amp;b, sizeof a);</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456963881, "post_id": 35758820, "comment_id": 59194664, "body": "Re. your edit: you can write <code>typedef struct { int a, b; } A, B;</code> and then you can indeed write <code>void func(A a, B b) { a = b; }</code>  . The language feature you are asking for already exists.  You can use <code>typedef</code> if you don&#39;t want the names to matter, and you can make two different structs if you do want the names to matter."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1456963971, "post_id": 35758820, "comment_id": 59194697, "body": "My question is for the reason. Firstly I thought it could be possible different  alignment and I asked this question. Now I see that this is not the reason - it&#39;s simply a design choice am I right?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456964032, "post_id": 35758820, "comment_id": 59194717, "body": "It&#39;s called &quot;having a type system&quot;, not any technical reason."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1456964134, "post_id": 35758820, "comment_id": 59194750, "body": "If we would have that argument I would replay with a single word &quot;typedef&quot;. But I mainly wanted to know if it&#39;s actually a technical reason because I&#39;ve heard a lot about C strange things (like possible different alignment for pointers). And not only technical but also what does the standard says."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1456964274, "post_id": 35758820, "comment_id": 59194788, "body": "Your title doesn&#39;t match the question either. The answer to the title is &quot;every time&quot;:<code>struct A</code> is a different type to <code>struct B</code>. (That&#39;s what the standard says, too). But then your text  asks a range of vague questions that can be summed up as &quot;why are two structs with the same members not the same type?&quot;"}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1456964428, "post_id": 35758820, "comment_id": 59194826, "body": "I clarified myself that I was talking about memory layout."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456964549, "post_id": 35758820, "comment_id": 59194858, "body": "Your title says &quot;In c when can two different structures with the same context really create different types?&quot;  .  <code>struct A</code> and <code>struct B</code> are different types, even if they have the same memory layout.  And that has nothing at all to do with most of the stuff in your question body about assignment and whatever."}, {"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456967124, "post_id": 35758820, "comment_id": 59195637, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105206/discussion-between-fisocpp-and-m-m\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1456963613, "post_id": 35760390, "comment_id": 59194590, "body": "What if I typedef <code>JustLikeFILE</code>? Why does it works with typedefs and not with structures."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "edited": false, "score": 0, "creation_date": 1456972344, "post_id": 35760390, "comment_id": 59197070, "body": "FISOCPP <code>typedef struct JustLikeFILE F_type;</code> creates an alias <code>F_type</code> that is the same as <code>struct JustLikeFILE</code>.  Not a new type."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1456961669, "creation_date": 1456961669, "answer_id": 35760390, "question_id": 35758820, "link": "https://stackoverflow.com/questions/35758820/is-the-reason-that-each-structure-have-different-types-explainable/35760390#35760390", "title": "Is the reason that each structure have different types explainable?", "body": "<blockquote>\n  <p>In c when can two different structures with the same context really create different types?</p>\n</blockquote>\n\n<p>They always do.  <code>struct A</code> and <code>struct B</code> are different types.</p>\n\n<pre><code>struct A {\n    int a, b;\n} ;\n\nstruct B {\n    int a, b;\n} ;\n</code></pre>\n\n<blockquote>\n  <p>Is the reason why this is forbidden purely the fact that it would be too complex for the compiler or is it something else?</p>\n</blockquote>\n\n<p>It is not too complex for the compiler.  It is preferable to keep them separate.  If there is a need to be the same, code can use <code>typedef</code>.</p>\n\n<pre><code>typedef struct A foo;\ntypedef struct A bar;\n\nint main(void) {\n  foo1 x;\n  bar1 y = x;\n  struct B z = x; // does not compile\n}\n</code></pre>\n\n<p>Why disallow <code>struct B z = x;</code>?  That is the language design.  If prevents foolish code like below.  Even though <code>struct JustLikeFILE</code> has the same fields as <code>FILE</code>, conceptually it is <em>not</em> a <code>FILE</code>.</p>\n\n<pre><code>void f(void) {\n  FILE *f = fopen(\"abc\",\"r\");\n  struct JustLikeFILE g = *f;  // does not compile\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1456965853, "last_edit_date": 1592644375, "creation_date": 1456965853, "answer_id": 35761067, "question_id": 35758820, "link": "https://stackoverflow.com/questions/35758820/is-the-reason-that-each-structure-have-different-types-explainable/35761067#35761067", "title": "Is the reason that each structure have different types explainable?", "body": "<p>The C standard defines 'type compatibility' and for structure types to be compatible, amongst other criteria, they must use the same tag.  You structures use different tags \u2014 they are inherently different types.</p>\n<p>You can find the sordid details in some complexly worded specifications in the standard:</p>\n<blockquote>\n<h3>ISO/IEC 9899:2011 \u00a76.2.7 Compatible type and composite type</h3>\n<p>Two types have <em>compatible type</em> if their types are the same. Additional rules for determining whether two types are compatible are described in 6.7.2 for type specifiers, in 6.7.3 for type qualifiers, and in 6.7.6 for declarators.<sup>55)</sup> Moreover, two structure, union, or enumerated types declared in separate translation units are compatible if their tags and members satisfy the following requirements: If one is declared with a tag, the other shall be declared with the same tag. If both are completed anywhere within their respective translation units, then the following additional requirements apply: there shall be a one-to-one correspondence between their members such that each pair of corresponding members are declared with compatible types; if one member of the pair is declared with an alignment specifier, the other is declared with an equivalent alignment specifier; and if one member of the pair is declared with a name, the other is declared with the same name. For two structures, corresponding members shall be declared in the same order. For two structures or unions, corresponding bit-fields shall have the same widths. For two enumerations, corresponding members shall have the same values.</p>\n<p><sup>55)</sup> Two types need not be identical to be compatible.</p>\n</blockquote>\n<p>Since your two sample structures have different tags (<code>struct A</code>, <code>struct B</code>), they are manifestly not the compatible types.</p>\n<p>Your second example uses two anonymous <code>struct</code> types:</p>\n<pre><code>struct { int a, b; } func1();\n\nvoid func2()\n{\n    struct { int a, b; } var = func1(); //not allowed\n}\n</code></pre>\n<p>A different part of the standard applies to this:</p>\n<blockquote>\n<h3>6.7.2.1 Structure and union specifiers</h3>\n<p>\u00b68 The presence of a struct-declaration-list in a struct-or-union-specifier declares a new type, within a translation unit. The struct-declaration-list is a sequence of declarations for the members of the structure or union.</p>\n</blockquote>\n<p>The <em>struct-declaration-list</em> that refers to is the part in braces <code>{</code> \u2026 <code>}</code>.  Since you have two of those in a single translation unit, they declare (define) two types, and hence are not compatible.</p>\n<p>Your final example, with <code>typedef int myOrangeInt;</code> and <code>typedef int myAppleInt;</code> illustrates that <code>typedef</code> in C does not introduce a new type; it merely introduces a synonym for another type.  In this case, <code>myOrangeInt</code> is a synonym for <code>int</code>, and so is <code>myAppleInt</code>, and since they're synonyms for the same type, the types are the same type.</p>\n<blockquote>\n<h3>\u00a76.7.8 Type definitions</h3>\n<p>\u00b63 \u2026 A <code>typedef</code> declaration does not introduce a new type, only a synonym for the type so specified. \u2026</p>\n</blockquote>\n"}], "owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1456999113, "answer_count": 2, "score": -1, "last_activity_date": 1490192575, "creation_date": 1456955487, "last_edit_date": 1456965920, "question_id": 35758820, "link": "https://stackoverflow.com/questions/35758820/is-the-reason-that-each-structure-have-different-types-explainable", "closed_reason": "Needs details or clarity", "title": "Is the reason that each structure have different types explainable?", "body": "<p>For example pointer to different types can't be directly converted one another because of possible alignment (maybe not totally correct statement but you don't got my idea anyway). Is there similar technical reason that you can't do something like this:</p>\n\n<pre><code>struct A\n{\n    int a, b;\n} ;\n\nstruct B\n{\n    int a, b;\n} ;\n\nvoid func(struct A a, struct B b)\n{\n    a = b;\n}\n</code></pre>\n\n<p>Now delete me and edit this question if you understand it (in some weird case) and translate it to the public.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456955358, "post_id": 35758649, "comment_id": 59190968, "body": "What&#39;s wrong with <code>fgets</code> or <code>getline</code>?"}, {"owner": {"reputation": 69, "user_id": 6009975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebccb74a5164c734af2d762a5b71832?s=128&d=identicon&r=PG&f=1", "display_name": "iNukeLaPeste", "link": "https://stackoverflow.com/users/6009975/inukelapeste"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456955440, "post_id": 35758649, "comment_id": 59191017, "body": "@Olaf I have to recode it. It&#39;s a work. ;)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456955521, "post_id": 35758649, "comment_id": 59191076, "body": "&quot;I will come to check here and update on my progress really often.&quot;. Please don&#39;t do that. Stackoverflow is not Facebook. If you have a <i>specific</i> question then we are happy to help. If you then have further issues then they should be asked seperately in a new question. We don&#39;t really want FB update style commentary on your progress."}, {"owner": {"reputation": 69, "user_id": 6009975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebccb74a5164c734af2d762a5b71832?s=128&d=identicon&r=PG&f=1", "display_name": "iNukeLaPeste", "link": "https://stackoverflow.com/users/6009975/inukelapeste"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456955599, "post_id": 35758649, "comment_id": 59191108, "body": "@kaylum oh alright sorry. So this question is fine, but if I do some progress and then I have another question, I create a new post?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456955832, "post_id": 35758649, "comment_id": 59191237, "body": "Well, I don&#39;t actually think your question is fine. Because &quot;where do I start&quot; is not a very specific question. So I won&#39;t be answering it personally. But perhaps someone else may. SO works best if your question is specific. See <a href=\"https://meta.stackexchange.com/questions/10811/how-do-i-ask-and-answer-homework-questions\">How do I ask and answer homework questions?</a> for some guidelines. In particular: &quot;Ask about specific problems with your existing implementation&quot;"}, {"owner": {"reputation": 69, "user_id": 6009975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebccb74a5164c734af2d762a5b71832?s=128&d=identicon&r=PG&f=1", "display_name": "iNukeLaPeste", "link": "https://stackoverflow.com/users/6009975/inukelapeste"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456957058, "post_id": 35758649, "comment_id": 59191886, "body": "@kaylum alright thanks a lot I will!"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "edited": false, "score": 0, "creation_date": 1456962025, "post_id": 35758649, "comment_id": 59194002, "body": "Also, don&#39;t remove part of your question &quot;before pushing your code&quot;.  Doing so will make this question useless for anyone who comes across it in the future.  If there&#39;s a problem leaving your code attached to the question, then you shouldn&#39;t be posting it here in the first place."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456965880, "post_id": 35758649, "comment_id": 59195256, "body": "Suggest google for readline.c,  copy the code into your new function, modify the code for your needs,"}, {"owner": {"reputation": 69, "user_id": 6009975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebccb74a5164c734af2d762a5b71832?s=128&d=identicon&r=PG&f=1", "display_name": "iNukeLaPeste", "link": "https://stackoverflow.com/users/6009975/inukelapeste"}, "reply_to_user": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "edited": false, "score": 0, "creation_date": 1456969130, "post_id": 35758649, "comment_id": 59196207, "body": "@bta No, I wanted to say &quot;I will remove the main file&quot; from the repo, cause I cannot push my main file. I just use the main file to test my function. I won&#39;t remove the code of this post, no worries ;)"}], "owner": {"reputation": 69, "user_id": 6009975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebccb74a5164c734af2d762a5b71832?s=128&d=identicon&r=PG&f=1", "display_name": "iNukeLaPeste", "link": "https://stackoverflow.com/users/6009975/inukelapeste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1292, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456955441, "creation_date": 1456954847, "last_edit_date": 1456955441, "question_id": 35758649, "link": "https://stackoverflow.com/questions/35758649/creating-a-get-next-line-function-in-c", "title": "Creating a Get_Next_Line function in C", "body": "<p>I have to create a C function that returns a line read from a file descriptor. I have to define a macro <code>READ_SIZE</code> (that can be editable). This <code>READ_SIZE</code> indicates the number of characters to read at each call of read(). The number can only be positive. I also have to use one or several static variables to save the characters that were read but not sent back to the calling function. One .C file (5 functions max, 25 lines max per fonction) and one .h file ONLY. My function GNL shall return its return without the '\\n'. If there is nothing more to read on the file descriptor, or if an error occur while reading, the function returns NULL.</p>\n\n<p>Here is the prototype of the function:</p>\n\n<pre><code>char *get_next_line(const int fd)\n</code></pre>\n\n<p>FUNCTIONS ALLOWED: <code>malloc</code>, <code>free</code>, <code>read</code>, <code>write</code> (to use with <code>my_putchar</code>, <code>my_putstr</code>, etc).</p>\n\n<p>Here is what I did so far, but really I don't have any ideas how to start it. If you have any clues to get me started, I'd really appreciate. I will be working on it for the next ten hours if I have to. I will come to check here and update on my progress really often. If you have any questions, ask me!</p>\n\n<p>Here is the main file (that I'll remove before pushing my work):</p>\n\n<pre><code>#include \"get_next_line.h\"\n\nvoid my_putchar(char c)\n{\n  write(1, &amp;c, 1);\n}\n\nint my_strlen(char *str)\n{\n  int i;\n\n  i = 0;\n  while (str[i] != '\\0')\n    i++;\n  return (i);\n}\n\nchar *my_putstr(char *str)\n{\n  if (str == NULL)\n    write(1, \"(null)\", 6);\n  else\n    write(1, str, my_strlen(str));\n  return (str);\n}\n\nint main()\n{\n  char *s;\n\n  while ((s = get_next_line(0)))\n  {\n    my_putstr(s);\n    my_putchar('\\n');\n    free(s);\n  }\n  return (0);\n}\n</code></pre>\n\n<p>And here is my get_next_line.c file so far:</p>\n\n<pre><code>int check_backslash(char *buff)\n{\n  int n;\n\n  n = 0;\n  while (buff[n])\n  {\n    if (buff[n] == '\\n')\n      return (n);\n    n++;\n  }\n  return (0);\n}\n\nchar *get_next_line(const int fd)\n{\n  int n;\n  char *str_to_return;\n  static int i = 0;\n  static char buff[READ_SIZE];\n\n  n = 0;\n  while (n = 0)\n  {\n    if ((read(fd, buff, READ_SIZE)) == -1)\n      return (NULL);\n    n = check_backslash(buff);\n  }\n  return (str_to_return);\n}\n</code></pre>\n\n<p>I already did some different things that I won't put on this subject, because I would like to start it fresh. I just need some clues to help me get started. Thanks a lot again!</p>\n"}, {"tags": ["c", "visual-c++", "gcc", "assembly", "avx"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1456955040, "post_id": 35758644, "comment_id": 59190795, "body": "Try removing the <code>-masm=intel</code> option."}, {"owner": {"reputation": 23, "user_id": 512638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4a0f5137048ab83003ec66bab3dd70?s=128&d=identicon&r=PG", "display_name": "colekas", "link": "https://stackoverflow.com/users/512638/colekas"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1456959611, "post_id": 35758644, "comment_id": 59193087, "body": "That worked. But why? The new asm is <code>vpbroadcastw\t-216(%ebp), %xmm0</code>"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1456959957, "post_id": 35758644, "comment_id": 59193207, "body": "Upgrading to gcc 5.x also fixes the issue for intel syntax."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1456961108, "post_id": 35758644, "comment_id": 59193656, "body": "It fixes the issue because apparently there&#39;s a bug in the code that puts the size modifier <code>xmmword ptr</code> on the memory operand.  That code isn&#39;t needed for AT&amp;T syntax, so it doesn&#39;t manifest.  (It doesn&#39;t actually need it for Intel syntax either, since <code>vpbroadcastw</code> does imply the memory operand size, unlike for example <code>movzx</code>)  Using gcc 5 anyway is a good idea, because it generally makes nicer code at -O3."}, {"owner": {"reputation": 23, "user_id": 512638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4a0f5137048ab83003ec66bab3dd70?s=128&d=identicon&r=PG", "display_name": "colekas", "link": "https://stackoverflow.com/users/512638/colekas"}, "edited": false, "score": 0, "creation_date": 1457122239, "post_id": 35758644, "comment_id": 59279780, "body": "I&#39;m guessing that as part of the work for Skylake in GCC 5.x the fix somewhere came in?  <i>New ISA extensions support AVX-512{BW,DQ,VL,IFMA,VBMI} of Intel&#39;s CPU codenamed Skylake Server was added to GCC. That includes inline assembly support, new intrinsics, and basic autovectorization.</i>"}], "owner": {"reputation": 23, "user_id": 512638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4a0f5137048ab83003ec66bab3dd70?s=128&d=identicon&r=PG", "display_name": "colekas", "link": "https://stackoverflow.com/users/512638/colekas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456954832, "creation_date": 1456954832, "question_id": 35758644, "link": "https://stackoverflow.com/questions/35758644/gcc4-8-3-generating-invalid-asm-from-intrinsics-operand-size-mismatch", "title": "GCC4.8.3 generating invalid asm from intrinsics (operand size mismatch)", "body": "<p>I'm working on migrating a MSVC application to Red-Hat Linux and have run into some issues with an intrinsic that was used. I'm using GCC 4.8.3 with the following command line. </p>\n\n<pre><code>gcc -c file.c -o file.o -O2 -g -masm=intel -m32 -mavx -mavx2 -D_MMX_ -D_LARGEFILE64_SOURCE=1 -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -pthread -fno-omit-frame-pointer -fno-tree-pre -fno-builtin-printf -Werror\n</code></pre>\n\n<p>The pseudo-code is something like this</p>\n\n<pre><code>#include &lt;immintrin.h&gt;    // AVX/AVX2\n\nvoid func_with_intrins(int x, int y, int h)\n{\n  short ddx;\n  short ddy;\n  int yh;\n  ddx = xpos &amp; 7;\n  ddy = ypos &amp; 7;\n  ...\n\n  for (yh = 0; yh &lt; (h&gt;&gt;2); yh++)\n  {\n    if ((ddx + ddy) != 0)\n    {\n      __m128i ddxw = _mm_set1_epi16(ddx);\n      ...\n    }\n    ...\n  }\n}\n</code></pre>\n\n<p>I've read that the _mm_set1_epi16 intrinsic can be expanded to a vpbroadcastw and I've confirmed this by looking at the resulting assembly file.S</p>\n\n<pre><code>vpbroadcastw    xmm0, XMMWORD PTR [ebp-216]\n</code></pre>\n\n<p>With a definition from <a href=\"http://www.felixcloutier.com/x86/VPBROADCAST.html\" rel=\"nofollow\">here</a></p>\n\n<pre><code>VPBROADCASTW xmm1, xmm2/m16\nVPBROADCASTB/W/D/Q is supported in both 128-bit and 256-bit wide versions.\n</code></pre>\n\n<p>The error GCC gives me is</p>\n\n<pre><code>Error: operand size mismatch for `vpbroadcastw'\n</code></pre>\n\n<p>When I change the optimization level from <code>O2</code> to <code>O0</code> the assembly is much different and doesn't use the <code>vpbroadcastw</code> instruction. </p>\n\n<p>Since I'm using intrinsics I'm at a loss as to what to do. Compiling the file as O0 is not an option. If I move the <code>__m128i ddxw</code> declaration to outside the loop that seems to compile but I think I would change the underlying functionality. When moved to before the for loop, the <code>vpbroadcastw</code> code takes two <code>xmm</code> registers (the stack variable is vmovdqa'd into an xmm register) so I figure gcc is running out of registers and therefore tries to invoke <code>vpbroadcastw</code> with the second operand being a stack offset.</p>\n"}, {"tags": ["python", "c", "gcc"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456955059, "post_id": 35758412, "comment_id": 59190814, "body": "Why do you want that? Is gcc compiled module not enough?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1456956409, "post_id": 35758412, "comment_id": 59191549, "body": "For python 3.4, you will need to use VS2010. If you are using VS2015 you&#39;ll need to use python 3.5. Unfortunately it&#39;s required to use the same VS version that python itself is compiled with, when compiling extensions."}], "owner": {"reputation": 11, "user_id": 5974997, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207763826509686/picture?type=large", "display_name": "f_foldage", "link": "https://stackoverflow.com/users/5974997/f-foldage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456954280, "creation_date": 1456954031, "last_edit_date": 1456954280, "question_id": 35758412, "link": "https://stackoverflow.com/questions/35758412/compile-a-c-extension-to-python-with-a-visual-compiler", "title": "Compile a C extension to Python with a Visual compiler", "body": "<p>I have written an extension module for Python in C. </p>\n\n<p>So far I have compiled the module with a gcc compiler. My task is now to compile my code with a MS Visual compiler from the Developer Command Prompt for VS 2015.</p>\n\n<p>To compile my program with the gcc compiler I have used the following commands in the command window:</p>\n\n<pre><code>gcc -c  extmodule.c -I/Python34/include\ngcc -shared extmodule.o -L/Python34/libs -lpython34 -o ext.dll\n</code></pre>\n\n<p>The project is then build with a setup.py file with the following command:</p>\n\n<pre><code>setup.py build -cmingw32\n</code></pre>\n\n<p>This works perfectly fine with the gcc compiler. </p>\n\n<p>Is there anyone who can help me to translate the above lines so I can compile my code with a Visual compiler ? </p>\n"}, {"tags": ["c", "ipc", "named-pipes", "fifo"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 5875165, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/068688e2d656df2fff4cfe826b2c82bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/5875165/dylan"}, "edited": false, "score": 0, "creation_date": 1456953528, "post_id": 35758161, "comment_id": 59189913, "body": "how can I get only the top level parent and bottom level child to have a private FIFO?"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 89, "user_id": 5875165, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/068688e2d656df2fff4cfe826b2c82bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/5875165/dylan"}, "edited": false, "score": 0, "creation_date": 1456953806, "post_id": 35758161, "comment_id": 59190082, "body": "In each loop iteration, create a new FIFO with a unique name (e.g. add the loop counter to the end of the name) and have the parent/child use that.  Each iteration will then only know the name for it&#39;s private FIFO and won&#39;t be able to access anyone else&#39;s."}], "tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": false, "score": 0, "last_activity_date": 1456953166, "creation_date": 1456953166, "answer_id": 35758161, "question_id": 35758024, "link": "https://stackoverflow.com/questions/35758024/fifo-reading-from-top-level-process-writing-from-bottom-level-process/35758161#35758161", "title": "FIFO - reading from top level process, writing from bottom level process", "body": "<blockquote>\n  <p>If I try to read during the loop, in the parent section of the code,\n  other parents can read it as well.</p>\n</blockquote>\n\n<p>They can all read from the FIFO because you are creating the FIFO before forking any processes; thus, they're all using the same one.  If you want each parent/child pair to have a private FIFO that only they can use, then you'll need to move your <code>mkfifo()</code> call inside the loop and create a FIFO (with a unique name) for each <code>fork()</code>.</p>\n"}], "owner": {"reputation": 89, "user_id": 5875165, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/068688e2d656df2fff4cfe826b2c82bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/5875165/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456953166, "creation_date": 1456952741, "question_id": 35758024, "link": "https://stackoverflow.com/questions/35758024/fifo-reading-from-top-level-process-writing-from-bottom-level-process", "title": "FIFO - reading from top level process, writing from bottom level process", "body": "<p>I'm trying to communicate between the top and bottom level processes of my program. First I create the FIFO, then I have a for loop to fork n processes. Inside the for loop, I check if a process is a bottom level process and if it is, I write to the FIFO.</p>\n\n<p>I'm confused on how I can read from the FIFO after the bottom level process writes to it. If I try to read before the loop, the loop never executes because nothing was written. If I try to read during the loop, in the parent section of the code, other parents can read it as well. If I try to read after the for loop, the code loop never finishes because it gets stuck when the last child tries to write. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n#define MAX_BUF 1024\n\nint main(int argc, char **argv){\n\n    int numprocs = atoi(argv[1]);\n    int lev = numprocs;\n    fprintf(stdout,\"ALIVE: Level %d process with pid=%d, child of ppid=%d.\\n\", lev, getpid(), getppid());\n    int currpid = getpid();\n\n    //create shared memory\n    const int SIZE = numprocs * sizeof(int);\n    const char *name = \"dleggio1OS\";\n    int shm_fd;\n    int *ptr;\n    shm_fd = shm_open(name, O_CREAT | O_RDWR, 0666);\n    ftruncate(shm_fd, SIZE);\n    ptr = mmap(0, SIZE, PROT_WRITE, MAP_SHARED, shm_fd, 0);\n    *ptr = getpid();\n\n    //create fifo\n    int fd;\n    char *myfifo = \"/tmp/dleggio1fifo\";\n    mkfifo(myfifo, 0666);\n    //read fifo\n    /*char buff[MAX_BUF];\n    fd = open(myfifo,O_RDONLY);\n    read(fd,buff,MAX_BUF);\n    printf(\"process %d received %s message.\\n\",getpid(),buff);\n    close(fd);*/\n\n\n    //spawn procs\n    int i;\n    for(i = 1; i &lt; numprocs; i++){\n        lev--;\n        int pfds[2];\n        char buf[30];\n        if(pipe(pfds) == -1){\n            perror(\"pipe\");\n            exit(1);\n        }\n        pid_t pid;\n\n\n        if((pid = fork()) &lt; 0){\n            perror(\"fork\");\n            exit(1);\n        }\n\n        if(pid == 0){ //child\n\n            ptr[i] = getpid();\n\n            close(pfds[1]);\n            if(read(pfds[0], buf, 3) &lt;= 0){\n                perror(\"child\");\n                exit(1);\n            }\n            int check = atoi(buf);\n            fprintf(stdout,\"ALIVE: Level %d process with pid=%d, child of ppid=%d.\\n\", check, ptr[i], ptr[i-1]);\n\n            if(check == 1){ //leaf\n                //write to fifo\n                fd = open(myfifo, O_WRONLY);\n                write(fd,\"leaf\",sizeof(\"leaf\"));\n                close(fd);\n                return 0;\n            }\n\n        }\n        else{ //parent\n            close(pfds[0]);\n            char hold[3];\n            sprintf(hold,\"%d\",lev);\n            if(write(pfds[1], hold, 3) &lt;= 0){\n                perror(\"parent\");\n                exit(1);\n            }\n            //read fifo\n            /*char buff[MAX_BUF];\n            fd = open(myfifo,O_RDONLY);\n            read(fd,buff,MAX_BUF);\n            printf(\"process %d received %s message.\\n\",getpid(),buff);\n            close(fd);*/\n\n            wait(NULL);\n            return 0;\n        }\n    }\n\n    //read fifo\n\n    /*char buff[MAX_BUF];\n    fd = open(myfifo,O_RDONLY);\n    read(fd,buff,MAX_BUF);\n    printf(\"received %s message.\\n\",buff);\n    close(fd);*/\n\n    shm_unlink(name);\n    unlink(myfifo);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 4, "creation_date": 1456952709, "post_id": 35757924, "comment_id": 59189443, "body": "The initializer for <code>struct data all_key_arrays[] = </code> is ill-formed. Your compiler should tell you about this. If you don&#39;t see any compiler messages then you need to figure out how to stop disabling your compiler&#39;s output messages .  You need to fix the compiler messages before trying to run the program."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1456952819, "post_id": 35757924, "comment_id": 59189513, "body": "The fix will be that <code>struct key **key_array;</code> should be <code>struct key *key_array;</code>, although this design has a problem that if you go in via <code>all_key_arrays</code> then there is no way of checking you don&#39;t access past the end of wherever it is pointing"}], "answers": [{"tags": [], "owner": {"reputation": 1854, "user_id": 224935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/59h0o.jpg?s=128&g=1", "display_name": "Jay Elston", "link": "https://stackoverflow.com/users/224935/jay-elston"}, "is_accepted": false, "score": 1, "last_activity_date": 1456952873, "creation_date": 1456952873, "answer_id": 35758064, "question_id": 35757924, "link": "https://stackoverflow.com/questions/35757924/struct-arrays-pointers-issue/35758064#35758064", "title": "Struct arrays pointers issue", "body": "<p>Try changing the initializer for <em>all_key_arrays</em> to:</p>\n\n<pre><code>struct data all_key_arrays[] = {\n    first_key_array,\n    second_key_array\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct data all_key_arrays[] = {\n    &amp;first_key_array[0],\n    &amp;second_key_array[0]\n};\n</code></pre>\n\n<p>Explanation -- <em>all_key_arrays</em> is an array pointers, so the values you initialize the array to should be, well, pointers.</p>\n"}], "owner": {"reputation": 11, "user_id": 6009922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/243ac6ce73390e87d20c017f306e1e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Unmasked", "link": "https://stackoverflow.com/users/6009922/unmasked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456953336, "creation_date": 1456952412, "question_id": 35757924, "link": "https://stackoverflow.com/questions/35757924/struct-arrays-pointers-issue", "title": "Struct arrays pointers issue", "body": "<p>could somedoby clarify some basic C language moments.</p>\n\n<pre><code>struct key {\n    char *name;\n    int value;\n};\n\nstruct key first_key_array[] = {\n    {\"abc\", 5},\n    {\"xyz\", 6},\n    {\"def\", 7}\n};\n\nstruct key second_key_array[] = {\n    {\"what\", 200},\n    {\"when\", 300}\n};\n\nstruct data {\n    struct key **key_array;\n};\n\nstruct data all_key_arrays[] = {\n    {first_key_array},\n    {second_key_array}\n};\n</code></pre>\n\n<p>I could directly access first_key_array[0]:</p>\n\n<pre><code>printf(\"%s %d\", first_key_array[0].name, first_key_array[0].value);\n</code></pre>\n\n<p>But access via all_key_arrays does not work:</p>\n\n<pre><code>printf(\"%s %d\", all_key_arrays[0].key_array[0].name, all_key_arrays[0].key_array[0].value); \n</code></pre>\n\n<p>Could somebody share any ideas?</p>\n"}, {"tags": ["c", "arrays", "2d"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456952503, "post_id": 35757922, "comment_id": 59189313, "body": "<code>char **</code> is <b>not</b> a 2D array. A pointer is not an array (and vice-versa)."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1456952538, "post_id": 35757922, "comment_id": 59189336, "body": "@Elizabeth A It depends on what argv[count] stores."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456952561, "post_id": 35757922, "comment_id": 59189350, "body": "I strongly suspect, it is meant to add <code>2</code> to <code>argv[count]</code>."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456952698, "post_id": 35757922, "comment_id": 59189432, "body": "usually such code means <code>ignore first 2 symbols from string during copy</code>, for example command line arguments usually pre-pended with <code>--</code>, but you need only actual argument name"}, {"owner": {"reputation": 1, "user_id": 5244075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GkUBp.jpg?s=128&g=1", "display_name": "Elizabeth A", "link": "https://stackoverflow.com/users/5244075/elizabeth-a"}, "edited": false, "score": 0, "creation_date": 1456953579, "post_id": 35757922, "comment_id": 59189935, "body": "@Lasane I believe you are right because just before that it is checkign for the first 2 symbols   if ((argv[count][0] == &#39;-&#39;) &amp;&amp;((argv[count][1] == &#39;b&#39;)....   So it makes sense to copy anything after the first 2 symbols are checked. I just have never see it before. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1456966520, "creation_date": 1456966520, "answer_id": 35761160, "question_id": 35757922, "link": "https://stackoverflow.com/questions/35757922/c-argvcount2/35761160#35761160", "title": "c argv[count]+2", "body": "<p>the line: <code>strncpy(szOutput, argv[count]+2, sizeof(szOutput) - 1);</code></p>\n\n<p>the second parameter: <code>argv[count]+2</code></p>\n\n<p>the meaning of the second parameter.</p>\n\n<ol>\n<li>`argv[count] it is a pointer to some NUL terminated array of char passed in from the command line</li>\n<li>the <code>+2</code> means the address of the 3rd char in the array selected by <code>count</code></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 5244075, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GkUBp.jpg?s=128&g=1", "display_name": "Elizabeth A", "link": "https://stackoverflow.com/users/5244075/elizabeth-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1456966520, "creation_date": 1456952409, "last_edit_date": 1456953513, "question_id": 35757922, "link": "https://stackoverflow.com/questions/35757922/c-argvcount2", "title": "c argv[count]+2", "body": "<p>I have this code <code>strncpy(szOutput, argv[count]+2, sizeof(szOutput) - 1);</code></p>\n\n<p>The arvg is a char **argv. What I was wondering is what does the +2 stand for. </p>\n\n<p>Thank you. </p>\n"}, {"tags": ["c", "null-terminated"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 5870497, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/UVDZd.jpg?s=128&g=1", "display_name": "s.gang", "link": "https://stackoverflow.com/users/5870497/s-gang"}, "edited": false, "score": 0, "creation_date": 1456952773, "post_id": 35757853, "comment_id": 59189482, "body": "What we&#39;re trying to do is split farray and copy the individual strings into sarray as individual elements. We&#39;re not replacing any characters in farray with null characters."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1456956049, "last_edit_date": 1456956049, "creation_date": 1456952158, "answer_id": 35757853, "question_id": 35757736, "link": "https://stackoverflow.com/questions/35757736/splitting-string-in-c-by-null-terminator/35757853#35757853", "title": "Splitting string in C by null terminator", "body": "<ol>\n<li><p>Keep the number of characters <code>length</code> for further use.</p></li>\n<li><p>What characters do you want to replace by the null characters? Based on that, walk through <code>farray</code>, replace the appropriate characters by the null character. While doing that, count the number of characters that were replaced by the null characters.</p></li>\n<li><p>If the number of characters that were replaced by the null character is N, then the array of pointers needs to be of size <code>N+1</code>.</p></li>\n<li><p>Allocate memory for the array of pointers.</p></li>\n<li><p>Walk through <code>farray</code> again and make sure the elements in the array of pointers point to the right location in <code>farray</code>.</p></li>\n</ol>\n\n<p><strong>Update, in response to OP's comment</strong></p>\n\n<p>In step (2) above, don't replace anything, just compute N.</p>\n\n<p>In step (5), use <code>strdup</code> and assign the returned value to the elements of the array of pointers instead pointing to <code>farray</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 5870497, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/UVDZd.jpg?s=128&g=1", "display_name": "s.gang", "link": "https://stackoverflow.com/users/5870497/s-gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456956049, "creation_date": 1456951699, "question_id": 35757736, "link": "https://stackoverflow.com/questions/35757736/splitting-string-in-c-by-null-terminator", "title": "Splitting string in C by null terminator", "body": "<p>I am currently trying to implement a program that intakes a file, reads the file and copies its contents to an array (farray). After this we copy the contents of farray as strings separated by null terminators into a string array called sarray.</p>\n\n<p>For example, say farray contains \"ua\\0\\0Z3q\\066\\0\", then sarray[0] should contain \"ua\", sarray[1] should contain \"\\0\", sarray[2] should contain \"Z3q\", and finally sarray[3] should contain \"66\"</p>\n\n<p>However I cannot figure out how to separate the string by the null terminators. I currently can only use the system calls like fread, fopen, fclose, fwrite...etc. Can someone please help me?</p>\n\n<p>src code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]){\n\n    char *farray;\n    const char *sarray;\n    long length;\n    int i;\n\n    //Open the input file\n    FILE *input = fopen(argv[1], \"rb\");\n    if(!input){\n        perror(\"INPUT FILE ERROR\");\n        exit(EXIT_FAILURE);\n    }\n\n    //Find the length\n    fseek(input, 0, SEEK_END);\n    length = ftell(input);\n    fseek(input, 0, SEEK_SET);\n\n    //Allocate memory for farray and sarray\n    farray = malloc(length + 1);\n\n    //Read the file contents to farray then close the file\n    fread(farray, 1, length, input);\n    fclose(input);\n\n    //Do string splitting here\n\n    //Free the memory\n    free(farray);\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456951526, "post_id": 35757648, "comment_id": 59188732, "body": "Start with reading <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Then format this mess properly. And having <code>typedef</code> after the type specifier is deprecated."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456951533, "post_id": 35757648, "comment_id": 59188733, "body": "<code>instruction_list.opcode</code> should be <code>get_inst.opcode</code> shouldn&#39;t it? Same for <code>instruction_list.mnemonic</code>."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1456951936, "post_id": 35757648, "comment_id": 59188960, "body": "<code>struct _Instruction {...} typedef Instruction;</code> --&gt; <code>typedef struct _Instruction {...} Instruction;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5696676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe825f276c969cfbff2b68671897597?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5696676/jim"}, "edited": false, "score": 0, "creation_date": 1456952369, "post_id": 35757820, "comment_id": 59189232, "body": "Hi thanks alot for your help but a quick question is how would i print opcode then? would you suggest %c?"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 109, "user_id": 5696676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe825f276c969cfbff2b68671897597?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5696676/jim"}, "edited": false, "score": 0, "creation_date": 1456952705, "post_id": 35757820, "comment_id": 59189440, "body": "@Jim- &quot;<code>%c</code>&quot; will print a single character, but you aren&#39;t using ASCII characters here so you&#39;re likely to get something unprintable.  Use &quot;<code>0x%02x</code>&quot; to print a one-byte number in hex format."}, {"owner": {"reputation": 109, "user_id": 5696676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe825f276c969cfbff2b68671897597?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5696676/jim"}, "edited": false, "score": 0, "creation_date": 1456952969, "post_id": 35757820, "comment_id": 59189599, "body": "unfortunately in getting an &quot;undefined reference to WinMain@16&quot; error but there isnt much anybody can do about that so thank for your help anyway!"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "reply_to_user": {"reputation": 109, "user_id": 5696676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe825f276c969cfbff2b68671897597?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5696676/jim"}, "edited": false, "score": 1, "creation_date": 1456953264, "post_id": 35757820, "comment_id": 59189769, "body": "@Jim- make sure you have <i>all</i> of your compiler warnings enabled.  It will help when debugging things like that."}], "tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": true, "score": 1, "last_activity_date": 1456952047, "creation_date": 1456952047, "answer_id": 35757820, "question_id": 35757648, "link": "https://stackoverflow.com/questions/35757648/converting-individual-pieces-of-assembly-to-machine-code/35757820#35757820", "title": "Converting individual pieces of assembly to machine code", "body": "<p>For one thing, your structure is declared incorrectly.  You should format it like this instead:</p>\n\n<pre><code>typedef struct _Instruction {\n    ....\n} Instruction;\n</code></pre>\n\n<p>I'm not sure why that's not triggering syntax errors, but it's certainly not helping.</p>\n\n<p>Also, you have both a variable and a function named <code>get_inst</code>.  You call a non-existent function named <code>get_Instruction()</code>.  You probably meant to name your function <code>get_Instruction()</code>.</p>\n\n<p>Also, the <code>.opcode</code> member of your structure is a single <code>char</code>.  Your <code>printf</code> statement uses the \"<code>%s</code>\" format specifier to print it.  This expects a string, which will cause <code>printf</code> to continue reading past the end of the <code>.opcode</code> member, displaying unpredictable garbage and accessing memory it shouldn't be touching.</p>\n"}], "owner": {"reputation": 109, "user_id": 5696676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe825f276c969cfbff2b68671897597?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/5696676/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1456966351, "accepted_answer_id": 35757820, "answer_count": 1, "score": -3, "last_activity_date": 1456952047, "creation_date": 1456951306, "question_id": 35757648, "link": "https://stackoverflow.com/questions/35757648/converting-individual-pieces-of-assembly-to-machine-code", "closed_reason": "Not suitable for this site", "title": "Converting individual pieces of assembly to machine code", "body": "<p>I am trying to convert assembly to machine code. I have a MINGW compiler where if i type ./convert.exe mov %a  then it should output  0x01 0xc0. I am thinking of using a struct listing each assembly code with its corresponding machine value. At the moment i keep getting errors like \"request for member opcode in something not a structure\". Any help would be appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct _Instruction {\nchar mnemonic[10];\nunsigned char opcode;} typedef Instruction;\n\nInstruction instruction_list[] = {\n{\"mov\", 0x01},\n{\"add\", 0x04},\n{\"sub\", 0x05},\n{\"mul\",0x06},\n{\"div\", 0x07},\n{\"and\",0x08},\n{\"or\",0x09},\n{\"xor\",0x0a},\n{\"cmp\",0x0b},\n{\"\",-1},\n};\n\nInstruction get_inst(char mnemonic[]);\n\nint main2(int argc, char *argv[])\n{\n\nchar* instruction = argv[1];\nInstruction get_inst = get_Instruction(instruction);\n\nprintf(\"%s  ;  %s\",instruction_list.mnemonic,instruction_list.opcode);\nreturn 0;\n}\n\nInstruction get_inst(char mnemonic[])\n{\nint i;\n\nfor(i=0; instruction_list[i].opcode != -1; i++)\n{\n  if(!strcmp(instruction_list[i].mnemonic, mnemonic))\n  {\n    return instruction_list[i];\n  }\n}\nreturn instruction_list[i]; \n}\n</code></pre>\n"}, {"tags": ["c", "algorithm", "performance"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 2, "creation_date": 1456949037, "post_id": 35756976, "comment_id": 59187274, "body": "That&#39;s an interesting problem; how did you try to solve it?"}, {"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "edited": false, "score": 0, "creation_date": 1456949058, "post_id": 35756976, "comment_id": 59187285, "body": "You can just try each subarray."}, {"owner": {"reputation": 15147, "user_id": 2947592, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q6DU8.jpg?s=128&g=1", "display_name": "wvdz", "link": "https://stackoverflow.com/users/2947592/wvdz"}, "edited": false, "score": 1, "creation_date": 1456949145, "post_id": 35756976, "comment_id": 59187330, "body": "It would be more interesting without a given k, and with allowing negative numbers."}, {"owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1456949867, "post_id": 35756976, "comment_id": 59187778, "body": "@templatetypedef This is not a duplicate, the other question is about a subarray of <i>at least</i> length L, not <i>exactly</i> length L."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1456951234, "post_id": 35756976, "comment_id": 59188566, "body": "@Mitsos101: Which just makes it easier. Anyway, it is <b>your</b> homework, so you are supposed to provide at least some reasonable code."}, {"owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456952108, "post_id": 35756976, "comment_id": 59189076, "body": "@Olaf It&#39;s not homework. Also, I came up with a solution on my own, but I wanted to see if I could optimize it somehow."}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1456953228, "post_id": 35756976, "comment_id": 59189746, "body": "@Mitsos101 I believe the linked question also asks about subarrays of length at least L rather than exactly L. Am I mistaken?"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1456994815, "post_id": 35756976, "comment_id": 59206332, "body": "@Mitsos101 Yes, you can optimize - there is no need to sum all numbers in range again at every step. Just make a little modification of sum."}, {"owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1456999847, "post_id": 35756976, "comment_id": 59209912, "body": "@templatetypedef This question asks about subarrays of exactly length L."}, {"owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "reply_to_user": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1456999857, "post_id": 35756976, "comment_id": 59209917, "body": "@MBo How can I do that?"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 1, "creation_date": 1457001528, "post_id": 35756976, "comment_id": 59211164, "body": "@Mitsos101  Array <code>(a b c d e f g)</code>, k=4. The first sum is <code>S1=a+b+c+d</code>.  The second sum is <code>S2=b+c+d+e</code>. How to make S2 from the last sum S1? Think about this."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1457072783, "post_id": 35756976, "comment_id": 59249135, "body": "The trick you&#39;re looking for is called &quot;sliding window&quot;.  Take that as a hint, or google it.  To speed this up even more than that, there might be a SIMD-vector way to do it.  If you computed prefix-sums of the whole array, you could quickly answer queries for different <code>k</code>.  SIMD packed operations (including packed max) can be used to check multiple windows in parallel.  SIMD prefix-sums are possible, but not easy.  Google will give good results for any of these terms."}], "owner": {"reputation": 561, "user_id": 4108929, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/34ce934551dd49eeebb4a47f7b57d9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Mitsos101", "link": "https://stackoverflow.com/users/4108929/mitsos101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457024499, "creation_date": 1456948896, "last_edit_date": 1456952070, "question_id": 35756976, "link": "https://stackoverflow.com/questions/35756976/find-sum-of-largest-contiguous-subarray-of-size-k-in-an-array-of-natural-numbers", "title": "Find sum of largest contiguous subarray of size k in an array of natural numbers", "body": "<p>Given an array of natural numbers, find the sum of the largest contiguous subarray of a given size k. \nExample:  </p>\n\n<pre><code>int array = {3, 6, 90, 23, 7, 1, 8, 3};\nint k = 3;\n</code></pre>\n\n<p>The sum should be 120 (90+23+7). </p>\n\n<p>Example code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n    int arraysize = 9;\n    int array[9] = {3, 6, 9, 20, 40, 60, 1, 2, 3};\n    int k = 3;\n    int max = 0;\n    int maxcurrent = 0;\n    for (int i = 0; i &lt; (arraysize - k); i++) {\n        for (int j = 0; j &lt; k; j++) {\n            maxcurrent += array[i + j]; \n        }\n        if (maxcurrent &gt; max) { max = maxcurrent; }\n        maxcurrent = 0;\n    }\n    printf(\"%d\\n\", max);\n}\n</code></pre>\n"}, {"tags": ["c", "matlab", "mex"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1456950024, "post_id": 35756908, "comment_id": 59187892, "body": "Use correct function declarators. The ones you use are outdated since 1989."}, {"owner": {"reputation": 761, "user_id": 5130078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PPNLC.png?s=128&g=1", "display_name": "Mark_Anderson", "link": "https://stackoverflow.com/users/5130078/mark-anderson"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456956298, "post_id": 35756908, "comment_id": 59191499, "body": "@Olaf - I didn&#39;t write the C model unfortunately.  What is the problem with them?"}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 2, "creation_date": 1456956319, "post_id": 35756908, "comment_id": 59191511, "body": "If you are not going to pass any variables into or out of the mex function from MATLAB variables, there is no point to compiling the code with mex.  Just use &quot;system&quot; to call your executable built the normal way."}], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 5130078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PPNLC.png?s=128&g=1", "display_name": "Mark_Anderson", "link": "https://stackoverflow.com/users/5130078/mark-anderson"}, "edited": false, "score": 0, "creation_date": 1457022802, "post_id": 35759121, "comment_id": 59227237, "body": "Perfect.  I can use that to get exactly the functionality I need.  Thanks for noticing the problem in my approach - I did not know about the system command."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2271770"}, "is_accepted": true, "score": 2, "last_activity_date": 1456959927, "last_edit_date": 1456959927, "creation_date": 1456956479, "answer_id": 35759121, "question_id": 35756908, "link": "https://stackoverflow.com/questions/35756908/large-c-code-not-compiling-with-matlabs-mex/35759121#35759121", "title": "Large C code not compiling with MATLAB&#39;s mex", "body": "<p>You cannot call an executable like a function; the name of the executable is not \"exported\" the way you might think.</p>\n\n<p>How about a simple solution? build your executable outside MATLAB and ask MATLAB to just run it; here's a piece of code that would do that (assuming that the <code>cModel.x</code> is in the same folder as the script/function that calls it):</p>\n\n<pre><code>system('./cModel.x startingfile.inp');\n</code></pre>\n"}], "owner": {"reputation": 761, "user_id": 5130078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PPNLC.png?s=128&g=1", "display_name": "Mark_Anderson", "link": "https://stackoverflow.com/users/5130078/mark-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 35759121, "answer_count": 1, "score": 0, "last_activity_date": 1456959927, "creation_date": 1456948691, "question_id": 35756908, "link": "https://stackoverflow.com/questions/35756908/large-c-code-not-compiling-with-matlabs-mex", "title": "Large C code not compiling with MATLAB&#39;s mex", "body": "<p>My overall goal is to use a C model inside my MATLAB code.  The C model is large (over a dozen .c files, which are all run from cModel.c) and can be successfully compiled then run in the terminal by</p>\n\n<pre><code>make cModel\ncModel.x startingfile.inp\n</code></pre>\n\n<p>as the C model is correctly built for normal C compilers.</p>\n\n<p>However, MATLAB's mex function is not compiling this C code.  I'm a total novice with mex and I am pulling my hair out trying to understand what the problem is.</p>\n\n<p>I think (and reading some similar problems on stackoverflow backs this up) that the problem is around creating a mexFunction.  My attempt currently is</p>\n\n<pre><code>/*function AA_mexWrapper.c*/\n/*Include the MATLAB mex header*/\n#include \"mex.h\"\n\n/* The gateway function */\nvoid mexFunction( )\n{\n/* Main() of the C Model*/\ncModel(); /* cModel writes files.  We don't care about the nonexistant returned variables*/\n}\n</code></pre>\n\n<p>This generates the error (using mex AA_mexWrapper cModel) :</p>\n\n<pre><code>Error using mex\n/Users/Filepath/ cModel.c:215:5: warning:\nimplicit declaration of function 'main' is invalid in C99 [-Wimplicit-    function-declaration]\nmain(int argc, char **argv);\n^\n/Users/Filepath/ cModel.c:215:10: error:\nexpected expression\nmain(int argc, char **argv);\n     ^\n1 warning and 1 error generated.\n</code></pre>\n\n<p>What is MATLAB doing and how do I fix it?  I really just need it to treat cModel.c like a normal C compiler would.</p>\n\n<p>PS.  I have no idea what (int argc, char **argv) are in the C code.  They are totally undefined, presumably they come from the optional user input of a filename containing non-default parameters for the model.</p>\n\n<p>PPS.  I will need to run the C model inside matlab by pointing it to a text file containing various model options.  I hope that MATLAB can deal with this, but I'm starting to have my doubts...</p>\n"}, {"tags": ["c", "mplab", "xc8"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456948747, "post_id": 35756799, "comment_id": 59187101, "body": "By the way, have you called <code>srand()</code>?"}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456948821, "post_id": 35756799, "comment_id": 59187141, "body": "i called srand but did not seem to make much difference as I&#39;m currently getting different random variables each time the code runs through so I took it out. Thanks"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456949216, "post_id": 35756799, "comment_id": 59187377, "body": "As you are calling <code>rand()</code> in a loop, you should call <code>srand()</code> once before to <i><a href=\"http://stackoverflow.com/a/16569330/645128\">seed the pseudo random values</a></i>."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1456949725, "post_id": 35756799, "comment_id": 59187689, "body": "<i>is being seeded by system...</i> I am not sure how, if this is an ANSI C call that it is being seeded by the system?  Does it say this in the <code>xc8</code> compiler documentation then?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1456950027, "post_id": 35756799, "comment_id": 59187894, "body": "&quot;trying to compare a single value to an array&quot; - this, I think, is the heart of the problem. What are you really trying to compare to? You can&#39;t compare a single value to an entire array, they are two different things. If you want to compare it to each element of the array, you need to code that explicitly (with another loop)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456950785, "post_id": 35756799, "comment_id": 59188318, "body": "Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your code has various problems. It is not even close to what you describe."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456952612, "post_id": 35756799, "comment_id": 59189384, "body": "@Olaf - I&#39;m not sure how I could be more complete without printing my entire program?  How to ask, here&#39;s my one sentence question:  How does one compare a single integer to an array of ten integers to find if the single integer is contained within the array using C language?  I&#39;m sorry but I don&#39;t know how to be more clear."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456952729, "post_id": 35756799, "comment_id": 59189458, "body": "5Did you even follow the links? What is not to be understood about <b>Minimal Complete and Verifyable</b>? And, no, posting the <b>whole</b> program code very likely contradicts the first requirement."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456953235, "post_id": 35756799, "comment_id": 59189753, "body": "I read your links and I&#39;m not here to waste anyone&#39;s time, I don&#39;t understand if you&#39;re telling me you don&#39;t understand the question or what?  Is my question not clear enough?  I am generating a random code because I don&#39;t have an actual card reader or cards to swipe."}], "answers": [{"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1456948971, "post_id": 35756888, "comment_id": 59187235, "body": "Right. I suspect in this instance that <code>swipe</code> is being allocated storage just past the end of the array, which is why the comparison is always returning true - it&#39;s effectively comparing <code>swipe</code> with itself. Of course as you say the behaviour is undefined."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456949007, "post_id": 35756888, "comment_id": 59187260, "body": "Oh wow, I thought I had written that statement correctly earlier and was getting the same output values but when I say i=0; i&lt;9; i++ in my for loop I appear to be getting the correct values out now.  Thanks so much!!"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456949294, "post_id": 35756888, "comment_id": 59187427, "body": "@NewMC That&#39;s not the right solution. Leave that loop as it was. Otherwise it will leave one element of <code>array</code> unitialised. And the result will still be undefined behavior as <code>array[9]</code> would be unintialised. Instead, change the check to be <code>if(swipe == a[9])</code>. Or whatever index you are intending to compare."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456950139, "post_id": 35756888, "comment_id": 59187953, "body": "I thought I had written that statement correctly earlier and was getting the same output values but now when I say for(i=0; i&lt;9; i++) it outputs as false every time.  It is still not actually comparing the swipe value against the array values correct?  It will only be true if swipe=9 as it&#39;s currently written?  FWIW, I can see the value of swipe changing each time the program runs.  Sorry, tried to go back and edit my last comment but it&#39;s not letting me change it now."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": false, "score": 0, "last_activity_date": 1456948636, "creation_date": 1456948636, "answer_id": 35756888, "question_id": 35756799, "link": "https://stackoverflow.com/questions/35756799/compare-a-single-integer-against-an-array-of-integers-in-c/35756888#35756888", "title": "Compare a single integer against an array of integers in C?", "body": "<p><code>if(swipe == a[i])</code>. That invokes Undefined Behaviour as <code>i</code> is 10 and 10 is an out of bounds index. The valid indexes are from 0 to 9.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456950416, "post_id": 35756903, "comment_id": 59188116, "body": "ok, will do, thank you."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456951149, "post_id": 35756903, "comment_id": 59188530, "body": "This checks swipe against array[i] ten times but while swipe=18 it still comes out as false.  Sorry all, I know there is something fairly simple I&#39;m not connecting but just not experienced with this."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456951553, "post_id": 35756903, "comment_id": 59188746, "body": "@NewMC - That is true.  I assume that because you specified this was a <i>Simulated code read from card swipe</i>, that you want to test against both legal and illegal passcode choices.  You have an array of 10 <i>legal</i> passcodes.  If you have a <i>pseudo random</i> generator that creates from 0 to 20, it is only to be expected that 1/2 the time the value will be illegal.  Please explain (in your original post above) clearly what it is that you want."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456952987, "post_id": 35756903, "comment_id": 59189608, "body": "@ Ryyker - Do you want me to change the entire question?  The code has changed due to the assistance that you good people have kindly offered.  It is working as it is written, however; when any of the values of array[i] are equal to the current value of swipe I need to exit under the if statement (exit as PORTD=0b10000000).  Currently, if swipe=18 the iteration of the if statement where array[i]=18 is true, but then it evaluates array[i]=19 and passes as false.  So in this case, even though I have a swiped code that matches a legal passcode it has not sent the signal to unlock the latch."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456953287, "post_id": 35756903, "comment_id": 59189779, "body": "I don&#39;t think you need to change the whole question.  Just clarify a few points.  It has not been clear on what your exit criteria is.  Or even is the code snippet you provided was just a test to see if your rand() generator was working to throw legal and illegal pass codes at the ports.  This in part was why I edited my example code to loop in the while (i.e. get a new simulated pass code), then test that new pass code against the array.  Each time, exiting the loop with whether it passed or failed.  In any case, I believe all of the answers provided have given some help."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456953810, "post_id": 35756903, "comment_id": 59190085, "body": "yes, I agree, all of the provided answers have helped me to make the code more effective, thank you.  Now I just need it to exit the for loop while swipe is equal to any number in the array."}, {"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456955550, "post_id": 35756903, "comment_id": 59191089, "body": "I must not have saw your break command originally or I&#39;d have had fixed after your first post.  Thanks for all the help!"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456956023, "post_id": 35756903, "comment_id": 59191357, "body": "@NewMC -   I may not have had the break in there.  I changed the post once you explained what you were after.  You are welcome"}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1456952260, "last_edit_date": 1456952260, "creation_date": 1456948670, "answer_id": 35756903, "question_id": 35756799, "link": "https://stackoverflow.com/questions/35756799/compare-a-single-integer-against-an-array-of-integers-in-c/35756903#35756903", "title": "Compare a single integer against an array of integers in C?", "body": "<p>In addition to @kaylum's answer...  </p>\n\n<p>Because you are calling <code>rand()</code> in a loop, you need to call <code>srand()</code> first before entering the loop,   </p>\n\n<pre><code>srand(clock());//for example\nwhile(1){\n    LATD=0x00;\n    int swipe=rand() % 20;\n    ...   \n</code></pre>\n\n<p>If you do not, the <em>random</em> numbers you get will be the same sequence of values every time you execute.</p>\n\n<p>Additionally, if <code>i</code> is not reinitialized before being used to compare, it is == 10.  It needs to be reset before using as your array index...</p>\n\n<p>Also, in your code, it appears you want to check the latest random number against the 10 accepted passwords.  If that is correct, you must compare  all 10 of them:</p>\n\n<pre><code>int main(void)\n{\n    srand(clock());//for example\n    j = 0;\n    while(1)\n    {\n        int swipe=rand() % 20;\n        PORTD=0b00000000;\n        for(i=0;i&lt;10;i++)\n        {\n            j++;\n            if(swipe == array[i]) \n            {\n                PORTD=0b10000000;\n                break;\n            } \n\n        }\n        //to show ratio of legal to illegal passcodes...\n        printf(\"times through: %d  Value of PORTD %d\\n\", j, PORTD);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456951371, "post_id": 35757074, "comment_id": 59188640, "body": "When I do this it evaluates as false even though I can see that swipe is one of the values in the array.  PORTD=0b10000000 is the output that I want to see, this is setting one pin of a microcontroller to high (5V)."}], "tags": [], "owner": {"reputation": 506, "user_id": 3359833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xGSN.jpg?s=128&g=1", "display_name": "pboedker", "link": "https://stackoverflow.com/users/3359833/pboedker"}, "is_accepted": false, "score": 1, "last_activity_date": 1456949226, "creation_date": 1456949226, "answer_id": 35757074, "question_id": 35756799, "link": "https://stackoverflow.com/questions/35756799/compare-a-single-integer-against-an-array-of-integers-in-c/35757074#35757074", "title": "Compare a single integer against an array of integers in C?", "body": "<p>You need to test your swipe value against ALL ten values in your array of accepted passwords.</p>\n\n<p>e.g. like below</p>\n\n<pre><code>for(i=0; i&lt;10; i++)\n  if(swipe == array[i]) {\n    set a true flag (and maybe exit the for loop)\n  }\nDepending on the flag, set the output\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "edited": false, "score": 0, "creation_date": 1456953915, "post_id": 35757916, "comment_id": 59190149, "body": "@ Seshu - Yes, as of now more than 50% of the time it will  fail the if statement and pass the else, but what I need it to do is pass the if statement as soon as it becomes true."}], "tags": [], "owner": {"reputation": 121, "user_id": 5988402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907da4a4a5d481318cd77768db80e78?s=128&d=identicon&r=PG&f=1", "display_name": "seshu", "link": "https://stackoverflow.com/users/5988402/seshu"}, "is_accepted": false, "score": 0, "last_activity_date": 1456952400, "creation_date": 1456952400, "answer_id": 35757916, "question_id": 35756799, "link": "https://stackoverflow.com/questions/35756799/compare-a-single-integer-against-an-array-of-integers-in-c/35757916#35757916", "title": "Compare a single integer against an array of integers in C?", "body": "<p>You are trying to simulate random card-reading actions &amp; get both Pass/Fail at different instances. With swipe values between 1 to 20 and passwords only in the range 10, 19, you'd like to see if some instances fail. Is that correct?</p>\n\n<p>If so, considering your rand() function returns only integer, set a breakpoint and probe for value of swipe. It seems to always has same value. Make rand() function better for wider statistical distribution. There are many sources to generate random integers like Linear Congruential Method etc. </p>\n\n<p>Also that comparison should be looped for every value of array.</p>\n"}], "owner": {"reputation": 3, "user_id": 3075879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03f54a80b997466cf70b4326d5e8974e?s=128&d=identicon&r=PG&f=1", "display_name": "NewMC", "link": "https://stackoverflow.com/users/3075879/newmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1915, "favorite_count": 0, "closed_date": 1456967926, "accepted_answer_id": 35756903, "answer_count": 4, "score": 0, "last_activity_date": 1456954502, "creation_date": 1456948348, "last_edit_date": 1456954502, "question_id": 35756799, "link": "https://stackoverflow.com/questions/35756799/compare-a-single-integer-against-an-array-of-integers-in-c", "closed_reason": "Not suitable for this site", "title": "Compare a single integer against an array of integers in C?", "body": "<p>How does one compare a single integer to an array of ten integers to find if the single integer is contained within the array using C language?  My apologies if original question was unclear, while swipe is equal to any number within the array I want to output PORTD=0b10000000.  Thank you!</p>\n\n<pre><code>short a[10]={10, 11, 12, 13, 14, 15, 16, 17, 18, 19}; //Array of accepted passwords.\nshort array[10];\nint i;\nfor(i=0; i&lt;10; i++){\n    array[i]=a[i];\n}\n\nsrand(clock());\n\nwhile(1){\nint swipe=rand() % 20; /* Simulated code read from card swipe, in this\n                        * instance we used a random number between\n                        * 1 and 20.*/\nfor(i=0; i&lt;10; i++){    \n    if(swipe == array[i]) {\n        PORTD=0b10000000;\n    } else {\n        PORTD=0b00001000;\n    } //If swiped code evaluates as one of the approved codes then set PORTD RD7 as high.\n}\n\nchar Master=PORTDbits.RD7;\n</code></pre>\n\n<p>This seems to have solved it...thanks for all of your help!</p>\n\n<pre><code>for(i=0; i&lt;10; i++){    \nif(swipe == array[i]) {\n    PORTD=0b10000000;\n    break;\n} else {\n    PORTD=0b00001000;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "mpi"], "answers": [{"tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": false, "score": 2, "last_activity_date": 1456949092, "creation_date": 1456949092, "answer_id": 35757027, "question_id": 35756719, "link": "https://stackoverflow.com/questions/35756719/how-to-break-a-loop-in-all-process-with-a-flag-in-mpi/35757027#35757027", "title": "How to break a loop in all process with a flag in MPI?", "body": "<p>The simplest way to do this is to use <code>MPI_Allreduce</code> with a variable that stores <code>1</code> if the process has found the space and <code>0</code> otherwise. That is, have a variable <code>int foundSpace = 0;</code> set to <code>0</code> (not found) by default. If the process finds what you're looking for, set <code>foundSpace = 1</code>. When you're checking to see if any process has found <code>foundSpace</code>, do</p>\n\n<pre><code>int foundSpaceAny;\nMPI_Allreduce(&amp;foundSpace, &amp;foundSpaceAny, 1, MPI_INT, MPI_SUM, MPI_COMM_WORLD);\n</code></pre>\n\n<p>Note the <code>MPI_SUM</code> reduction operation. With this, if any of your processes found a space, <code>foundSpaceAny</code> will contain a non-zero value. If none of them did, <code>foundSpaceAny</code> will contain a 0. Use this check to break your loop.</p>\n"}], "owner": {"reputation": 316, "user_id": 5431704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207650762528057/picture?type=large", "display_name": "Zero23ku", "link": "https://stackoverflow.com/users/5431704/zero23ku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456949092, "creation_date": 1456948059, "question_id": 35756719, "link": "https://stackoverflow.com/questions/35756719/how-to-break-a-loop-in-all-process-with-a-flag-in-mpi", "title": "How to break a loop in all process with a flag in MPI?", "body": "<p>Well, I can't really figure how to fix this.</p>\n\n<p>I have this array of ints, and lets say anywhere there is a \"-1\" in it is a free space to add a new number.</p>\n\n<pre><code>    aux=atoi(argv[2]);\n    for(i=0;i&lt;ctotal &amp;&amp; f;i++){\n        if(rank==liste[i]){\n            if(list[i]==-1){\n                list[i]=aux;\n                f=0;\n            }\n        }\n    }\n</code></pre>\n\n<p>Basically that is the piece of code.</p>\n\n<p>There are two \"lists\" (In fact, they are just two arrays).</p>\n\n<p>list is an array with numbers, the liste is an array with the same lenght as list but it contain the number of process in charge of the number in list.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>list[5] = {1,1,2,2,3};\nliste[5] = {0,0,1,1,2};\n</code></pre>\n\n<p>So that menas es process 0 is in charge of {1,1}, the process 1 is in charge of {2,2} and the process 2 is in charge of {3}.</p>\n\n<p>Anyway, it actually works, but my problem is  I want to \"break\" the loop in all process when some process find the first free space (-1 in this case) and add the number to that space but I can't figure how.</p>\n\n<p>I think I can't just use Bcast because I dont know what process found the first free space.</p>\n\n<p>So what actually need is the first process to change f value to 0, share it with all process so all process break que loop</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1456948137, "post_id": 35756704, "comment_id": 59186726, "body": "Maybe <code>opendir</code> or <code>scandir</code> is what you are looking for? If you want to prevent opening a dir in your list, then you can use <code>stat</code> to check the type."}, {"owner": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1456948253, "post_id": 35756704, "comment_id": 59186786, "body": "fd = open(av[1], O_RDONLY | O_SCANDIR); does not work at all"}, {"owner": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1456948285, "post_id": 35756704, "comment_id": 59186807, "body": "I would like a flag from the open function"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1456948367, "post_id": 35756704, "comment_id": 59186876, "body": "Also look at <code>access ( d, F_OK )</code> or <code>fd = open (name, O_DIRECTORY | O_RDONLY, S_IRUSR | S_IWUSR);</code>"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 1, "creation_date": 1456948546, "post_id": 35756704, "comment_id": 59186994, "body": "Instead of checking whether it <i>isn&#39;t</i> a directory, check if it <i>is</i> a (properly formatted) file: fix <code>get_next_line</code> and/or <code>get_map</code> so they don&#39;t crash on unexpected data from the &#39;file&#39; being <code>open</code>ed. The segfault probably comes from <code>get_next_line</code> or <code>get_map</code> which fail on unexpected data. Even if you make sure to not <code>open</code> a directory, it could still be a character device, or socket or just an improperly formatted file. Protect against that instead."}, {"owner": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "edited": false, "score": 0, "creation_date": 1456948708, "post_id": 35756704, "comment_id": 59187077, "body": "how do I check if fd is a file or a directory ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1456948934, "post_id": 35756704, "comment_id": 59187215, "body": "@zakk8889: with <code>fstat</code> as I have answered"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456950434, "post_id": 35756704, "comment_id": 59188123, "body": "Always check for errors!"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "edited": false, "score": 0, "creation_date": 1456948353, "post_id": 35756790, "comment_id": 59186860, "body": "Sorry but I want to make it protected with a flag from the open function. Like the O_RDONLY flag"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "edited": false, "score": 0, "creation_date": 1456948379, "post_id": 35756790, "comment_id": 59186881, "body": "@zakk8889 Then you&#39;re out of luck, because there&#39;s no such flag."}, {"owner": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "edited": false, "score": 0, "creation_date": 1456948727, "post_id": 35756790, "comment_id": 59187087, "body": "I have been told there is, I will let you know if I find out :)"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "edited": false, "score": 1, "creation_date": 1456948879, "post_id": 35756790, "comment_id": 59187180, "body": "@zakk8889 If there is, it&#39;s very OS specific.  Linux doesn&#39;t define such a flag.  Using <code>lstat</code> or <code>fstat</code> is the way it is done."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456950371, "post_id": 35756790, "comment_id": 59188092, "body": "That introduces a race condition."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1456948307, "creation_date": 1456948307, "answer_id": 35756790, "question_id": 35756704, "link": "https://stackoverflow.com/questions/35756704/open-function-how-to-protect-against-directory-opening/35756790#35756790", "title": "Open function : how to protect against directory opening?", "body": "<p>You need to use the <code>lstat</code> function to tell you whether the given file name represents a regular file or a directory.</p>\n\n<pre><code>struct stat statbuf;\nint rval;\n\nrval = lstat(argv[1], &amp;statbuf);\nif (rval == -1) {\n    perror(\"error getting file status\");\n    exit(1);\n}\n\nif (S_ISREG(statbuf.st_mode)) {\n    printf(\"%s is a regular file\\n\", argv[1]);\n} else if (S_ISDIR(statbuf.st_mode)) {\n    printf(\"%s is a directory\\n\", argv[1]);\n} else {\n    printf(\"%s is something else\\n\", argv[1]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1456949538, "post_id": 35756811, "comment_id": 59187581, "body": "&quot;PS. The race conditions I am suggesting here are so improbable that we can ignore them...&quot; - yes, normally. But if you allow them, then someone will cause one deliberately to make your program crash."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 1, "last_activity_date": 1456950394, "last_edit_date": 1495539902, "creation_date": 1456948387, "answer_id": 35756811, "question_id": 35756704, "link": "https://stackoverflow.com/questions/35756704/open-function-how-to-protect-against-directory-opening/35756811#35756811", "title": "Open function : how to protect against directory opening?", "body": "<p>I would suggest to <code>open</code>  the file (which could be a directory) so get a file descriptor, then use <a href=\"http://man7.org/linux/man-pages/man2/fstat.2.html\" rel=\"nofollow noreferrer\">fstat(2)</a> on that file descriptor (and check the result of <code>fstat</code> by using  <code>statresult.st_mode &amp; S_IFMT == S_IFDIR</code> ...)</p>\n\n<p>This would avoid an (improbable) race condition with the <code>lstat</code> (or <code>stat</code>) then <code>open</code> approach (suggested in <a href=\"https://stackoverflow.com/a/35756790/841108\">Dbush's answer</a>): some other process might (with very bad luck) remove or rename the file between these two system calls. You might also <a href=\"http://man7.org/linux/man-pages/man3/opendir.3.html\" rel=\"nofollow noreferrer\">opendir</a> or else <code>open</code>  (but that also suffers from a similar race condition).</p>\n\n<p><sup>PS. The race conditions I am suggesting here are so improbable that we can normally ignore them... But they might be a security flaw (than an attacker could use)</sup></p>\n"}], "owner": {"reputation": 87, "user_id": 5754168, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0946895ed1c1964cb895490eb343ffe7?s=128&d=identicon&r=PG&f=1", "display_name": "zakk8889", "link": "https://stackoverflow.com/users/5754168/zakk8889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456950394, "creation_date": 1456948000, "question_id": 35756704, "link": "https://stackoverflow.com/questions/35756704/open-function-how-to-protect-against-directory-opening", "title": "Open function : how to protect against directory opening?", "body": "<p>I am using the open function like this in my file to get some coordinates from a file :</p>\n\n<pre><code>t_coo       *get_buffer(char **av, t_coo **head)\n{\n    int     ret;\n    int     fd;\n    char    *line;\n    int     y;\n    t_coo   *cur;\n\n    cur = NULL;\n    *head = NULL;\n    y = 0;\n    ret = 0;\n    fd = open(av[1], O_RDONLY);\n    while ((ret = get_next_line(fd, &amp;line) &gt; 0))\n    {\n        head = get_map(line, head, y);\n        y++;\n    }\n    close(fd);\n    cur = *head;\n    return (cur);\n}\n</code></pre>\n\n<p>It is working perfectly but the problem is when I try to make it open a directory, my program segfault. I want to protect it against directory opening so that I dont segault anymore. I tried to look at the flags on the internet and tried many of them but I could not find this one. Can anybody tell me which one it is? Thank you.</p>\n"}, {"tags": ["c", "arrays", "string", "multidimensional-array"], "comments": [{"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 1, "creation_date": 1456947917, "post_id": 35756596, "comment_id": 59186583, "body": "Just a hint use nested for loop!"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456948247, "post_id": 35756596, "comment_id": 59186784, "body": "<code>void arrayToString(char string[])</code> that only accepts a single string and thus can only ever operate on a single string. You need to change it to be something like this: <code>void arrayToString(char *strings[], size_t len)</code>. Note that it is very important to pass in the <code>len</code> of the array as that cannot be derived from the array itself within the function. After you do that then use the hint give by @ch3rub7. Also, don&#39;t forget to <code>free</code> the allocated <code>finalString.</code>"}, {"owner": {"reputation": 9, "user_id": 6003735, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZVByQ1CTRRA/AAAAAAAAAAI/AAAAAAAAAEA/vg8rwuYRVX4/photo.jpg?sz=128", "display_name": "Amir Sankar", "link": "https://stackoverflow.com/users/6003735/amir-sankar"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456950742, "post_id": 35756596, "comment_id": 59188294, "body": "thank you @kaylum and @ch3rub7!"}], "answers": [{"comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456948359, "post_id": 35756781, "comment_id": 59186868, "body": "Minor nit. OP said &quot;not allowed to use any string manipulation functions from string.h&quot;. So no <code>strcpy</code>, <code>strlen</code> and <code>strcat</code> calls allowed."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456948406, "post_id": 35756781, "comment_id": 59186900, "body": "@kaylum oh, missed it, will fix"}], "tags": [], "owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "is_accepted": false, "score": 0, "last_activity_date": 1456948789, "last_edit_date": 1456948789, "creation_date": 1456948271, "answer_id": 35756781, "question_id": 35756596, "link": "https://stackoverflow.com/questions/35756596/how-to-create-a-string-from-an-array-of-strings-c/35756781#35756781", "title": "how to create a string from an array of strings C", "body": "<p>you have several problems in your code, here is the fixed version with comments:</p>\n\n<pre><code>size_t findLength(char* array[]) {\n    size_t l = 0;\n    while (char *t = *array++)\n        while (*t++)\n            l++;\n    return l;\n}\n\nvoid copyAll(char* array[], char* out) {\n    while (char *t = *array++)\n        while (*t)\n            *out++ = *t++; // copy every symbol from every line into out string\n    *out = '\\0'; // append last null-terminator\n}\n\nvoid arrayToString(char* array[]) {\n    char* finalString = malloc((findLength(array) + 1) * sizeof(char)); // allocate + 1 symbol for null terminator\n    copyAll(array, finalString);\n    printf(\"%s\", finalString);\n    free(finalString); // don't forget to release memory\n}\n\nint main(int argc, char* argv[]) {\n    char* color[] = { \"red\", \"blue\", \"red\", 0 }; // you should add array terminator as well\n    arrayToString(color);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 9, "user_id": 6003735, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZVByQ1CTRRA/AAAAAAAAAAI/AAAAAAAAAEA/vg8rwuYRVX4/photo.jpg?sz=128", "display_name": "Amir Sankar", "link": "https://stackoverflow.com/users/6003735/amir-sankar"}, "edited": false, "score": 0, "creation_date": 1456951495, "post_id": 35756901, "comment_id": 59188708, "body": "@AmirSankar I improved formatting of your code in your post.Please accept the edit,to look clearer"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1456956151, "post_id": 35756901, "comment_id": 59191427, "body": "Inside <code>char* arrayToString(char **string, size_t size)</code> you have <a href=\"http://pastebin.com/raw/LT9pnjtQ\" rel=\"nofollow noreferrer\">a lot of conversions problems</a> which should be fixed. Turn your compiler warnings ON and please don&#39;t cast <code>malloc()</code> . <a href=\"http://ideone.com/nhUW8G\" rel=\"nofollow noreferrer\">Suggestion</a>"}], "tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": true, "score": 0, "last_activity_date": 1456949598, "last_edit_date": 1456949598, "creation_date": 1456948669, "answer_id": 35756901, "question_id": 35756596, "link": "https://stackoverflow.com/questions/35756596/how-to-create-a-string-from-an-array-of-strings-c/35756901#35756901", "title": "how to create a string from an array of strings C", "body": "<p>Change your function <code>arrayToString</code> to have two arguments.one of type <code>char **</code> and the second of type <code>size_t</code> defining the number of strings.Also let its return value to be <code>char *</code> to return a pointer to the allocated memory.finally don't forget to free this memory.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint findLength(char array[]) {\n    int i = 0;\n    for (i = 0; array[i] != '\\0'; i++) {\n    }\n    return i;\n}\n\nchar* arrayToString(char **string, size_t size) {\n    int bigSize = 0, len;\n    int i = 0, j, k;\n    for (j = 0; j &lt; size; j++) {\n        bigSize += findLength(string[j]);\n    }\n    char *bigstring = (char *)malloc(bigSize + 1);\n    for (j = 0; j &lt; size; j++) {\n        len = findLength(string[j]);\n        for (k = 0; k &lt; len; k++) {\n            bigstring[i++] = string[j][k];\n        }\n    }\n    bigstring[i] = '\\0';\n    return bigstring;\n}\n\nint main(int argc, const char * argv[])\n{\n    char *color[] = { \"red\", \"blue\", \"red\" };\n    char *bigstring = arrayToString(color, 3);\n    printf(\"%s\\n\", bigstring);\n    free(bigstring);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6003735, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZVByQ1CTRRA/AAAAAAAAAAI/AAAAAAAAAEA/vg8rwuYRVX4/photo.jpg?sz=128", "display_name": "Amir Sankar", "link": "https://stackoverflow.com/users/6003735/amir-sankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 35756901, "answer_count": 2, "score": 0, "last_activity_date": 1456952013, "creation_date": 1456947671, "last_edit_date": 1456952013, "question_id": 35756596, "link": "https://stackoverflow.com/questions/35756596/how-to-create-a-string-from-an-array-of-strings-c", "title": "how to create a string from an array of strings C", "body": "<p>I am learning about arrays and was wondering if someone can help me out.  I have an array of strings and need to create a new string which is a concatenation of all the array elements.  The problem I'm having is I'm only able to print the first string in my array, not all of them.  I understand there is a null at the end of each string in my array so how would I work around that issue?  Maybe 2d array? By the way I'm not allowed to use any string manipulation functions from string.h.  Thank you.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint findLength(char array[])\n{\n    int i = 0;\n    for (i = 0; array[i] != '\\0'; i++)\n    {\n    }\n    return i;\n}\n\nvoid arrayToString(char string[])\n{\n    int n = 0;\n    int i = 0;\n    int l = findLength(string);\n    char *finalString;\n    finalString = malloc(l * sizeof(char));\n    for (i = 0; string[i] != '\\0'; i++) {\n        finalString[n] = string[i];\n        n++;\n    }\n    for (i = 0; finalString[i] != '\\0'; i++) {\n        printf(\"%c\", finalString[i]);\n    }\n}\n\nint main(int argc, const char * argv[])\n{\n    char *color[] = { \"red\", \"blue\", \"red\" };\n    arrayToString(*color);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "io", "char", "file-writing"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1456947093, "post_id": 35756345, "comment_id": 59186108, "body": "You are always trying to output 100 bytes (skipping whitespaces). But you should break out of the for loop when the <code>\\0</code> is encountered in the input as that marks the end of what <code>fgets</code> read. Otherwise you are outputting past valid input and hence garbage results."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1456947195, "post_id": 35756345, "comment_id": 59186171, "body": "extending @kaylum comment, <code>i &lt; sizeof a</code> should be <code>i &lt; sizeof(a) &amp;&amp; a[i]</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456949614, "post_id": 35756345, "comment_id": 59187628, "body": "<code>for (int i = 0; i &lt; sizeof a; i++) {</code> --&gt; <code>for (size_t i = 0; a[i]; i++) {</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456949865, "post_id": 35756345, "comment_id": 59187776, "body": "&quot;weird black nul&quot; is like the <code>&#39;\\0&#39;</code> character"}], "answers": [{"comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1456948358, "post_id": 35756591, "comment_id": 59186867, "body": "Writing a character at a time isn&#39;t really a problem, since it&#39;s being buffered (and the output is being filtered to remove some characters).  There is no advantage to storing the filtered sequence in yet another buffer (as you imply would be better)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456953127, "post_id": 35756591, "comment_id": 59189687, "body": "Streams in C actually are designed to be written or read one character at a time. <code>fgetc</code> and <code>fputc</code> are the primitives and you will find that the other stream functions are implemented by calling one-character primitives  (or you used to, anyway)"}], "tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": -1, "last_activity_date": 1456947651, "creation_date": 1456947651, "answer_id": 35756591, "question_id": 35756345, "link": "https://stackoverflow.com/questions/35756345/printing-char-to-file-gives-weird-result/35756591#35756591", "title": "Printing char to file gives weird result", "body": "<p><code>sizeof a</code> is the size of the variable <code>a</code> in bytes, which is always 100. You want to cap your loop with the length of the string held in <code>a</code>, which is <code>strlen(a)</code>. </p>\n\n<p>Also, you shouldn't write to file streams character by character. That's not how file I/O is designed to work.</p>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": true, "score": 0, "last_activity_date": 1456993608, "creation_date": 1456993608, "answer_id": 35766831, "question_id": 35756345, "link": "https://stackoverflow.com/questions/35756345/printing-char-to-file-gives-weird-result/35766831#35766831", "title": "Printing char to file gives weird result", "body": "<p>Change</p>\n\n<pre><code>for (int i = 0; i &lt; sizeof a; i++) {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for (int i = 0; a[i] != '\\0' &amp;&amp; i &lt; sizeof a; i++) {\n</code></pre>\n\n<p>In your case, in the first call of <code>fgets()</code> gives array <code>a</code> these values: '#', 'i', 'n', 'c', ..., 'o', '.', 'h', '>' and a '\\0'. However, the rest of <code>a</code> still contains garbages like <code>\u00cc</code>, because <code>a</code> is never initialised.</p>\n\n<p>The '\\0' is just the \"weird black nul\" you mentioned. A '\\0' is the signal of the end of a C-style string, but it does not stand for the end of a file, so it shouldn't be written to \"Disc.c\" using <code>fputc()</code></p>\n"}], "owner": {"reputation": 694, "user_id": 3680672, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kEVyp.png?s=128&g=1", "display_name": "Martacus", "link": "https://stackoverflow.com/users/3680672/martacus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 35766831, "answer_count": 2, "score": 0, "last_activity_date": 1456996060, "creation_date": 1456946829, "last_edit_date": 1456996060, "question_id": 35756345, "link": "https://stackoverflow.com/questions/35756345/printing-char-to-file-gives-weird-result", "title": "Printing char to file gives weird result", "body": "<p>So I am printing char's to a file and whenever the line ends it just does something weird. </p>\n\n<p>This is the code I use:</p>\n\n<pre><code>void opdracht43() {\n    FILE *file;\n    FILE *file2;\n    file = fopen(\"opdracht1.1.cpp\", \"r\");\n    file2 = fopen(\"Disc.c\", \"w\");\n    int p;\n    char a[100];\n    while (fgets(a, 100, file)) {\n        for (int i = 0; i &lt; sizeof a; i++) {\n            if (a[i] == '\\n' || a[i] == ' ' || a[i] == '\\t') {\n                printf(\"TRUE\");\n            }\n            else {\n                printf(\"FALSE\");\n                fputc(a[i], file2);\n            }\n        }\n        return 0; //So it only prints the 1st line for now.\n    }\n    fclose(file);\n    fclose(file2);\n}\n</code></pre>\n\n<p>And when this runs this is the text it gives:</p>\n\n<pre><code>#include&lt;stdio.h&gt; \u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\n</code></pre>\n\n<p>The space between > and \u00cc gives me a weird black nul in notepad++</p>\n\n<p>The first line of the file is:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n</code></pre>\n\n<p>I hope I can find some help here :)</p>\n"}, {"tags": ["c", "arrays", "dynamic", "data-structures"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456947458, "post_id": 35756336, "comment_id": 59186329, "body": "You need to show how <code>v</code> was allocated. If it was allocated via <code>malloc</code> or is a stack variable then it is not initialised automatically and contains garbage as you have found. So just initialise its <code>array</code> field to be NULL (probably best to just <code>memset</code> the whole struct to be 0 or use <code>calloc</code> instead of <code>malloc</code> which does that zeroing for you). And checking that field would tell you whether you need to <code>malloc</code> the array or not."}, {"owner": {"reputation": 27, "user_id": 5425173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce1f3e7188c5cedba1cf21e2baa98d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tripper", "link": "https://stackoverflow.com/users/5425173/tripper"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456947636, "post_id": 35756336, "comment_id": 59186432, "body": "My &quot;v&quot; is in the main.c as: Vector v;"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1456947676, "post_id": 35756336, "comment_id": 59186462, "body": "Then it is a stack variable and is not initialised automatically. So just explicitly intialise it as described."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5425173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce1f3e7188c5cedba1cf21e2baa98d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tripper", "link": "https://stackoverflow.com/users/5425173/tripper"}, "edited": false, "score": 0, "creation_date": 1456948418, "post_id": 35756597, "comment_id": 59186910, "body": "Ok, thanks, but what if the user wants the first element to be 0? Because if I understand, then NULL = 0? At least that&#39;s what it seems to be for me.  OR should I maybe make another struct, which would had a *HEAD in it? And the head would have NULL, unless it shows to the first array?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 27, "user_id": 5425173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce1f3e7188c5cedba1cf21e2baa98d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tripper", "link": "https://stackoverflow.com/users/5425173/tripper"}, "edited": false, "score": 0, "creation_date": 1456948723, "post_id": 35756597, "comment_id": 59187085, "body": "@Tripper: it is a little unclear what you are asking. By &quot;<i>first element</i>&quot; are you referring to the <code>array</code> field itself in the struct?  An array can be allocated with 0 elements and thus have a non-NULL pointer to it.  But it doesn&#39;t really make sense to allocate a 0-element array, that is just a waste of memory.  Setting the <code>array</code> field to NULL makes it pretty clear that the array is empty since it is not even allocated. Beyond that, you can certainly set the <b>value</b> of the first element <i>inside the array</i> to 0, but the <code>size</code> would have to be &gt;0 in order to access that element."}, {"owner": {"reputation": 27, "user_id": 5425173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce1f3e7188c5cedba1cf21e2baa98d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tripper", "link": "https://stackoverflow.com/users/5425173/tripper"}, "edited": false, "score": 0, "creation_date": 1456948841, "post_id": 35756597, "comment_id": 59187157, "body": "Yes, I ment the array. And yeah, that&#39;s what I wanted to know. So allocating 0 is just waste of memory. Thank you! :)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1456947674, "creation_date": 1456947674, "answer_id": 35756597, "question_id": 35756336, "link": "https://stackoverflow.com/questions/35756336/how-to-check-if-my-dynamic-array-is-empty-in-c/35756597#35756597", "title": "How to check if my dynamic array is empty in C", "body": "<p>You have to initialize a <code>Vector</code> variable before you can use it.  You can't assume it is initialized automatically, you have to do it explicitly.</p>\n\n<p>When it has no elements, you should set its <code>size</code> and <code>used</code> fields to 0 and its <code>array</code> field to <code>NULL</code>.</p>\n\n<p>If you want <code>createVector()</code> to perform the initialization then you can't make any assumptions about the current state of the <code>Vector</code>, just initialize it unconditionally, and hope the user never passes in a initialized <code>Vector</code> that already has elements in it:</p>\n\n<pre><code>int createVector(Vector *v, size_t initialSize)\n{\n    v-&gt;array = NULL;\n    v-&gt;used = 0;\n    v-&gt;size = 0;\n\n    if (initialSize &gt; 0)\n    {\n        v-&gt;array = (int*) malloc(initialSize * sizeof(int));\n        if (!v-&gt;array)\n            return 0;\n        v-&gt;size = initialSize;\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>Vector v;\nint i = createVector(&amp;v, 10);\n</code></pre>\n\n<p>On the other hand, if you want <code>createVector()</code> to ignore a <code>Vector</code> that has elements in it, you have to initialize it beforehand so it has a valid state you can check for:</p>\n\n<pre><code>void initVector(Vector *v)\n{\n    v-&gt;array = NULL;\n    v-&gt;used = 0;\n    v-&gt;size = 0;\n}\n\nint createVector(Vector *v, size_t initialSize)\n{\n    if ((v-&gt;array) || (v-&gt;size != 0))\n        return 0;\n\n    v-&gt;used = 0;\n\n    if (initialSize &gt; 0)\n    {\n        v-&gt;array = (int*) malloc(initialSize * sizeof(int));\n        if (!v-&gt;array)\n            return 0;\n        v-&gt;size = initialSize;\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>Vector v;\nint i;\n\ninitVector(&amp;v);\ni = createVector(&amp;v, 10); // OK\ni = createVector(&amp;v, 20); // error, already created\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5425173, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce1f3e7188c5cedba1cf21e2baa98d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Tripper", "link": "https://stackoverflow.com/users/5425173/tripper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1991, "favorite_count": 0, "accepted_answer_id": 35756597, "answer_count": 1, "score": -1, "last_activity_date": 1456947674, "creation_date": 1456946786, "question_id": 35756336, "link": "https://stackoverflow.com/questions/35756336/how-to-check-if-my-dynamic-array-is-empty-in-c", "title": "How to check if my dynamic array is empty in C", "body": "<p>I've a dynamic array like this one:</p>\n\n<pre><code>typedef struct\n{\n    int *array;\n    size_t used;\n    size_t size;\n} Vector;\n</code></pre>\n\n<p>and I need to check if it's empty. At first, I thought, if I didn't initiate it, then the size should be = 0, but it seems like it's a random number. When I initiate it, all the initiates arrays are = 0, but then, it doesn't mean it's empty, because it has be initiated... Any ideas what should I do?</p>\n\n<p>Here's also my initiation function:</p>\n\n<pre><code>int createVector(Vector *v, size_t initialSize)\n{\n    if (v-&gt;size != 0)\n        return 0;\n    else\n    {\n        int i;\n        v-&gt;array = (int*)malloc(initialSize * sizeof(int));\n        v-&gt;used = 0;\n        v-&gt;size = initialSize;\n        return 1;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "binary", "expression", "operands"], "comments": [{"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456946773, "post_id": 35756285, "comment_id": 59185917, "body": "probably <code>G-&gt;adj[v][w]</code> should be <code>G-&gt;adj[v]-&gt;w</code>"}, {"owner": {"reputation": 1091, "user_id": 3260052, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d64a1589780cbabed86e3076c4a21621?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Guimaraes", "link": "https://stackoverflow.com/users/3260052/marcos-guimaraes"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456947060, "post_id": 35756285, "comment_id": 59186091, "body": "I tried to replace with the one you suggested and the compiler said to use G-&gt;adj[v]-&gt;w Is it the same thing?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456947105, "post_id": 35756285, "comment_id": 59186117, "body": "I haven&#39;t noticed that adj is array of pointers, you should use <code>-&gt;</code>"}, {"owner": {"reputation": 1091, "user_id": 3260052, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d64a1589780cbabed86e3076c4a21621?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Guimaraes", "link": "https://stackoverflow.com/users/3260052/marcos-guimaraes"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456947486, "post_id": 35756285, "comment_id": 59186346, "body": "Thanks for the correction. I tried to run the code but it gave me another error message on that line. It says &quot;Thread 1: EXC_BAD_ACCESS (code=1, address=0x2)&quot; and it doesn&#39;t run.  Do you have any idea of what does that mean?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456947526, "post_id": 35756285, "comment_id": 59186372, "body": "it means that you&#39;re accessing unallocated memory, use debugger"}, {"owner": {"reputation": 1091, "user_id": 3260052, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d64a1589780cbabed86e3076c4a21621?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Guimaraes", "link": "https://stackoverflow.com/users/3260052/marcos-guimaraes"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456947771, "post_id": 35756285, "comment_id": 59186515, "body": "Is there any error in the malloc&#39;s that I am using?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456948098, "post_id": 35756285, "comment_id": 59186689, "body": "I don&#39;t know, <code>Digraph G = malloc( sizeof *G);</code> looks suspicions though"}, {"owner": {"reputation": 1091, "user_id": 3260052, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d64a1589780cbabed86e3076c4a21621?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Guimaraes", "link": "https://stackoverflow.com/users/3260052/marcos-guimaraes"}, "reply_to_user": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1456948427, "post_id": 35756285, "comment_id": 59186917, "body": "Thank you very much, I&#39;ll take a look at this. Really thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "is_accepted": true, "score": 0, "last_activity_date": 1456946922, "creation_date": 1456946922, "answer_id": 35756380, "question_id": 35756285, "link": "https://stackoverflow.com/questions/35756285/invalid-operands-to-binary-expressions-error/35756380#35756380", "title": "\u201cInvalid operands to binary expressions\u201d Error", "body": "<p>You are trying to compare a <code>struct</code> with an <code>int</code>. Obviously cannot be done.  The equals operator (<code>==</code>) is a binary one, and it requires two compare-able objects on both sides.<br>\nYou can access the value of the <code>Vertex</code> (an <code>int</code>) like mentioned in the comments by performing<br>\n <code>G-&gt;adj[v]-&gt;w</code></p>\n"}], "owner": {"reputation": 1091, "user_id": 3260052, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d64a1589780cbabed86e3076c4a21621?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Guimaraes", "link": "https://stackoverflow.com/users/3260052/marcos-guimaraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2295, "favorite_count": 0, "accepted_answer_id": 35756380, "answer_count": 1, "score": -1, "last_activity_date": 1616464305, "creation_date": 1456946605, "last_edit_date": 1456989157, "question_id": 35756285, "link": "https://stackoverflow.com/questions/35756285/invalid-operands-to-binary-expressions-error", "title": "\u201cInvalid operands to binary expressions\u201d Error", "body": "<p>I keep getting this error:</p>\n\n<blockquote>\n  <p>Invalid operands to binary expressions ('struct node'and 'int')</p>\n</blockquote>\n\n<p>on two lines that I've marked below with ** in the function \"reachR\". Whats wrong and how can I fix it? The code is for a data structure assignment.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define Vertex int\n#define maxV 10000\n\ntypedef struct digraph *Digraph;\ntypedef struct node *teste;\nstatic int lbl[maxV];\n\ntypedef struct {\n    Vertex v, w;\n} Arc;\n\nstruct digraph {\n    int V;\n    int A;\n    teste *adj;\n};\n\nstruct node {\n    Vertex w;\n    teste next;\n};\n\n\nteste NEWnode( Vertex w, teste next) {\n    teste a = malloc( sizeof (struct node));\n    a-&gt;w = w;\n    a-&gt;next = next;\n    return a;\n}\n\nArc ARC( Vertex v, Vertex w) {\n    Arc a;\n    a.v = v, a.w = w;\n    return a;\n}\n\nvoid reachR( Digraph G, Vertex v) {\n    Vertex w;\n    lbl[v] = 1;\n    for (w = 0; w &lt; G-&gt;V; w++)\n        **if (G-&gt;adj[v][w] == 1 &amp;&amp; lbl[w] == 0)**\n            reachR( G, w);\n}\n\nint DIGRAPHreach( Digraph G, Vertex s, Vertex t) {\n    Vertex v;\n    for (v = 0; v &lt; G-&gt;V; v++)\n        lbl[v] = 0;\n    reachR( G, s);\n    if (lbl[t] == 0) return 0;\n    else return 1;\n}\n\nint digraphcycle( Digraph G) {\n    Vertex v; teste a; int output;\n    for (v = 0; v &lt; G-&gt;V; v++)\n        for (a = G-&gt;adj[v]; a != NULL; a = a-&gt;next) {\n            output = DIGRAPHreach( G, a-&gt;w, v);\n            if (output == 1) return 1;\n        }\n    return 0;\n}\n\nDigraph DIGRAPHinit( int V) {\n    Vertex v;\n    Digraph G = malloc( sizeof *G);\n    G-&gt;V = V;\n    G-&gt;A = 0;\n    G-&gt;adj = malloc( V * sizeof (teste));\n    for (v = 0; v &lt; V; v++)\n        G-&gt;adj[v] = NULL;\n    return G;\n}\n\nvoid DIGRAPHinsertA( Digraph G, Vertex v, Vertex w) {\n    teste a;\n    for (a = G-&gt;adj[v]; a != NULL; a = a-&gt;next)\n        if (a-&gt;w == w) return;\n    G-&gt;adj[v] = NEWnode( w, G-&gt;adj[v]);\n    G-&gt;A++;\n}\n\nint main (){\n    Digraph G = DIGRAPHinit(4);\n    DIGRAPHinsertA(G, 1, 2);\n    DIGRAPHinsertA(G, 1, 3);\n    DIGRAPHinsertA(G, 2, 3);\n    DIGRAPHinsertA(G, 3, 4);\n    if (digraphcycle(G)==1){ \n        printf(\"SIM!\"); \n    } \n}\n</code></pre>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1456949407, "post_id": 35756160, "comment_id": 59187502, "body": "<i>&quot;same essentially applies to all collective operations in general&quot;</i> - this is a widespread misconception (even the <a href=\"http://mpitutorial.com/tutorials/mpi-broadcast-and-collective-communication/\" rel=\"nofollow noreferrer\">MPI Tutorial</a> is wrong on it). <code>MPI_BARRIER</code> is <b>the only</b> synchronising MPI collective operation. All the other ones are allowed to exit as early as once the rank&#39;s participation is no longer needed. It also means that a given rank may enter and then exit certain implementation-dependent collective calls even before all other ranks have entered the call."}, {"owner": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1456949761, "post_id": 35756160, "comment_id": 59187708, "body": "@HristoIliev: but the synchronizing aspect of MPI_Barrier was not the point of my question. I&#39;m aware of what you are saying, and it is valid to point it out. But my question basically was about the notion of &quot;all group members&quot; (participating in a collective operation), and what this entails. And in this sense, the question basically applies to all collectives. So the point is not so much about wondering whether process A hangs cause B does not call MPI_Barrier (this IS specific to its synchronizing property), but whether the collective call is executed by the correct &quot;group of all members&quot;."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1456949888, "post_id": 35756160, "comment_id": 59187799, "body": "Then delete the second sentence of the citation to prevent confusion. Otherwise, a consequence of what I said is that a rank might go happily through a collective call even if some members of the communicator&#39;s group are gone if that rank does not have to communicate with those members. It is only <code>MPI_BARRIER</code> that would <b>reliably</b> block or result in an error."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1456950379, "post_id": 35756160, "comment_id": 59188101, "body": "Also, note that communicator groups are immutable once created, no matter what happens with the ranks afterwards. If you use <code>MPI_COMM_WORLD</code>, it is expected that <b>all</b> initially started ranks should participate (at least until fault tolerance becomes an integral part of the MPI standard)"}], "answers": [{"comments": [{"owner": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "edited": false, "score": 0, "creation_date": 1456948101, "post_id": 35756645, "comment_id": 59186694, "body": "Thanks! I implicitly assumed that B calls MPI_Finalize. I will edit my question accordingly. So your answer would in essence be that the program violates MPI&#39;s demand that all MPI processes (in the same communication context) execute the same sequence of collective operations (MPI_Finalize being one of them)?!"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "edited": false, "score": 0, "creation_date": 1456948395, "post_id": 35756645, "comment_id": 59186891, "body": "Yes. And if the standard says, your program is not correct - anything could happen. In practice it will most likely deadlock/hang."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 4, "last_activity_date": 1456948203, "last_edit_date": 1456948203, "creation_date": 1456947812, "answer_id": 35756645, "question_id": 35756160, "link": "https://stackoverflow.com/questions/35756160/mpi-collective-operations-and-process-lifetime-c-c/35756645#35756645", "title": "MPI collective operations and process lifetime (C/C++)", "body": "<blockquote>\n  <p>If B exits right at program start and only A calls MPI_Barrier, is A blocked for eternity?</p>\n</blockquote>\n\n<p>Basically yes. But actually, you are not allowed to do that.</p>\n\n<p>Simply speaking, you must call <code>MPI_Finalize</code> on all processes before exiting. And <code>MPI_Finalize</code> acts like a collective (on <code>MPI_COMM_WORLD</code>), so it usually does not complete before every process calls <code>MPI_Finalize</code>. So in your example, process B didn't exit (at least not correctly).</p>\n\n<p>But I guess the MPI 3.1 standard at 8.7 explains it more clearly:</p>\n\n<blockquote>\n  <p><code>MPI_Finalize</code> [...] This routine cleans up all MPI state. If an MPI\n  program terminates normally (i.e., not due to a call to <code>MPI_ABORT</code> or\n  an unrecoverable error) then each process must call <code>MPI_FINALIZE</code>\n  before it exits. Before an MPI process invokes <code>MPI_FINALIZE</code>, the\n  process must perform all MPI calls needed to complete its involvement\n  in MPI communications: It must locally complete all MPI operations\n  that it initiated and must execute matching calls needed to complete\n  MPI communications initiated by other processes.</p>\n</blockquote>\n\n<p>Note how the last sentence also requires you to complete the barrier in your question.</p>\n\n<p>The standard says, your program is not correct. In practice it will most likely deadlock/hang.</p>\n"}], "owner": {"reputation": 619, "user_id": 3910671, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/KtjIl.png?s=128&g=1", "display_name": "sperber", "link": "https://stackoverflow.com/users/3910671/sperber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 35756645, "answer_count": 1, "score": 2, "last_activity_date": 1456950474, "creation_date": 1456946154, "last_edit_date": 1456950474, "question_id": 35756160, "link": "https://stackoverflow.com/questions/35756160/mpi-collective-operations-and-process-lifetime-c-c", "title": "MPI collective operations and process lifetime (C/C++)", "body": "<p>For the problem I'd like to discuss, let's take <code>MPI_Barrier</code> as an example. The MPI3 standard states</p>\n\n<blockquote>\n  <p>If comm is an intracommunicator, MPI_BARRIER blocks the caller until\n  all group members have called it. The call returns at any process only\n  after all group members have entered the call.</p>\n</blockquote>\n\n<p>So I was wondering - same essentially applies to all collective operations in general - how this assertion has to be interpreted in cases where some processes of the communication context just exited (successfully) prior to execution of <code>MPI_Barrier</code>: For example, let's assume we have two processes A and B and use <code>MPI_COMM_WORLD</code> as communicator and argument <code>comm</code> to <code>MPI_Barrier</code>. After A and B call <code>MPI_Init</code>, if B immediately calls <code>MPI_Finalize</code> and exits, and if only A calls <code>MPI_Barrier</code> before calling <code>MPI_Finalize</code>, is A blocked for eternity? Or is the set of \"all group members\" defined as the set of all original group members which have not exited, yet? I'm pretty sure A is blocked forever, but maybe the MPI standard has more to say about this?</p>\n\n<p>REMARK: This is not a question about the synchronizing properties of <code>MPI_Barrier</code>, the reference to <code>MPI_Barrier</code> is merely meant to be a concrete example. It is a question about MPI program correctness if collective operations are performed. See the comments.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1456944840, "post_id": 35755714, "comment_id": 59184698, "body": "No Ds or Fs? An optimist, I see."}, {"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1456944947, "post_id": 35755714, "comment_id": 59184767, "body": "<code>grade</code> should be an <code>int</code>, since <code>getchar()</code> is returning one. But there might be more problems within your code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1456945075, "post_id": 35755714, "comment_id": 59184856, "body": "It is probably consuming the newline character. There are hundreds of related questions."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1456945173, "post_id": 35755714, "comment_id": 59184928, "body": "<code>getchar()</code> reads all characters including spaces and newlines. If you enter your grades line by line or with spaces in between, those will be treated like grades. Treat them specially."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1456945250, "post_id": 35755714, "comment_id": 59184975, "body": "<code>printf(&quot;\\nSorry you have entered a wrong value please try again\\n&quot;);</code> It would be informative for the user (and the programmer) of the program to actually <b>show</b> the offending character."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456945336, "post_id": 35755714, "comment_id": 59185014, "body": "Please consistently indent the code.  suggest 4 spaces after every opening brace &#39;{&#39; and unindent before every closing brace &#39;}&#39;.   Do not use tabs for indenting as every word processor/editor has the tab stops/tab width set differently."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456945677, "post_id": 35755714, "comment_id": 59185235, "body": "float literals always have a <code>.</code> and a trailing <code>f</code>.  Without out the <code>.</code> the value is an <code>integer</code>.  Without the trailing <code>f</code>, the value is a <code>double</code>"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1456945960, "post_id": 35755714, "comment_id": 59185399, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/28308319/getchar-and-scanf-skipped-in-c\">getchar() and scanf() skipped in C</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456945966, "post_id": 35755714, "comment_id": 59185402, "body": "if the user enters the grades as: <code>aaaaa</code> then the code will work.  However if the user enters the grades, on separate lines, separated by newline sequences or enters the grades separated by a space or tab, then the code will fail.  the <code>switch()</code> statement needs to be inside its&#39; own loop so a incorrect entry will not reduce the number of grades entered.  Also suggest the <code>default</code> case have a call to <code>getchar()</code> to get the next char from stdin.  The current problem is the newline (and similar trash) is not being consumed"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456946183, "post_id": 35755714, "comment_id": 59185557, "body": "(cont)  a newline is NOT a <code>wrong value</code>,  Rather it will be in the stream stdin for every grade entered by the user"}], "answers": [{"tags": [], "owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "is_accepted": false, "score": 2, "last_activity_date": 1456945047, "creation_date": 1456945047, "answer_id": 35755820, "question_id": 35755714, "link": "https://stackoverflow.com/questions/35755714/c-loop-skipping-an-iteration-over-input/35755820#35755820", "title": "C loop skipping an iteration over input", "body": "<p>When you are calling <code>getchar()</code>, you are getting two chars from the command line (f.ex. <code>A\\n</code>), but you are only fetching one at a time. Thus you get the <code>\\n</code> the second time you are looping. Fix? Do <code>getchar()</code> again after your <code>switch</code>-case while omitting the result.</p>\n\n<p>Furthermore, <code>getchar()</code> returns an <code>int</code>-value, but you are making a <code>char</code> out of it, which can lead to strange behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "is_accepted": true, "score": 1, "last_activity_date": 1462759814, "last_edit_date": 1462759814, "creation_date": 1456946578, "answer_id": 35756276, "question_id": 35755714, "link": "https://stackoverflow.com/questions/35755714/c-loop-skipping-an-iteration-over-input/35756276#35756276", "title": "C loop skipping an iteration over input", "body": "<p>When you enter a character and hit enter, character gets accepted by <code>getchar()</code> and when the loop starts again <code>\\n</code> is accepted because of the enter key you have given in the previous iteration, so.... Everytime you enter a character and hit enter... two inputs are taken and thus, this behaviour is observed. To overcome this, use</p>\n\n<pre><code>   scanf(\" %c\",&amp;grade);\n</code></pre>\n\n<p>Note : <strong>Here a <code>space</code> is given in front of <code>%c</code> to omit empty spaces</strong></p>\n\n<p>Instead of:</p>\n\n<pre><code>    grade=getchar()\n</code></pre>\n\n<p>In the loop.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1456947366, "creation_date": 1456947366, "answer_id": 35756521, "question_id": 35755714, "link": "https://stackoverflow.com/questions/35755714/c-loop-skipping-an-iteration-over-input/35756521#35756521", "title": "C loop skipping an iteration over input", "body": "<p>the following code compiles cleanly, and properly performs the desired algorithm and handles white space, like newlines and invalid grade values.</p>\n\n<p>Notice the ease of readability when appropriate indenting and code block separation are implemented</p>\n\n<pre><code>#include &lt;stdio.h&gt; // printf(), getchar()\n#include &lt;ctype.h&gt; // toupper()\n\n// MAX_GRADES makes it easy to adjust number of 'grade' inputs\n#define MAX_GRADES (5)\n\nint main()\n{\n\n    // list variables one per line\n    // and it would be better if these were #defines\n    // instead of taking up stack space\n    float A=4.0f;\n    float b=3.50f;\n    float B=3.0f;\n    float c=2.50f;\n    float C=2.0f;\n\n    float cgpa=0.0f;\n    int grade;  // &lt;&lt; getchar() returns an integer not a character\n\n    for (int i=0; i&lt;MAX_GRADES; i++)\n    {\n\n        printf(\"\\nEnter grade of your subject:\\n\");\n        grade = getchar( );\n\n        if( 'A' &lt;= toupper(grade) &amp;&amp; 'Z' &gt;= toupper(grade) )\n        {\n            switch(grade)\n            {\n\n                case 'A':\n                    cgpa=cgpa+A;\n                    break;\n\n                case 'b':\n                    cgpa=cgpa+b;\n                    break;\n\n                case 'B':\n                    cgpa=cgpa+B;\n                    break;\n\n                case 'c':\n                    cgpa=cgpa+c;\n                    break;\n\n                case 'C':\n                    cgpa=cgpa+C;\n                    break;\n\n                default:\n                    printf(\"\\nSorry you have entered a wrong value please try again\\n\");\n                    i--; // adjust to not count bad input\n                    break;\n            } // end switch\n        }\n\n        else\n        {\n            i--; // adjust to not count newline, non-alpha inputs, etc\n        }\n    } // end for\n\n    printf(\"\\n Your cgpa is:%f\", cgpa/MAX_GRADES);\n\n    return 0;\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 5861502, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/48495359726b771f2e9f9b4b91c30202?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Khalid", "link": "https://stackoverflow.com/users/5861502/maria-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "accepted_answer_id": 35756276, "answer_count": 3, "score": 3, "last_activity_date": 1462759814, "creation_date": 1456944730, "last_edit_date": 1456945323, "question_id": 35755714, "link": "https://stackoverflow.com/questions/35755714/c-loop-skipping-an-iteration-over-input", "title": "C loop skipping an iteration over input", "body": "<p>It is a very simple program, for calculating the cgpa. But loop is skipping an iteration over input and call default for every that skipped iteration.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n\n    float A=4.0, b=3.50, B=3.0, c=2.50,C=2.0;\n    float cgpa=0;\n    char grade;\n\nfor (int i=0; i&lt;5;i++){\n\n        printf(\"\\nEnter grade of your subject:\\n\");\n        grade = getchar( );\n\n        switch(grade){\n\n            case 'A':\n            cgpa=cgpa+A;\n            break;\n            case 'b':\n            cgpa=cgpa+b;\n            break;\n            case 'B':\n            cgpa=cgpa+B;\n            break;\n            case 'c':\n            cgpa=cgpa+c;\n            break;\n            case 'C':\n            cgpa=cgpa+C;\n            break;\n            default:\n            printf(\"\\nSorry you have entered a wrong value please try again\\n\");\n        }}\n    printf(\"\\n Your cgpa is:%f\", cgpa/5);\n\nreturn 0;   \n    }\n</code></pre>\n"}, {"tags": ["c", "dns", "gethostbyname"], "answers": [{"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 1, "last_activity_date": 1456945768, "creation_date": 1456945768, "answer_id": 35756036, "question_id": 35755607, "link": "https://stackoverflow.com/questions/35755607/dns-using-gethostbyname/35756036#35756036", "title": "DNS using gethostbyname", "body": "<p>You are assuming that it returns a string (which is <strong>not</strong> the case).</p>\n\n<p><a href=\"http://www.gta.ufrj.br/ensino/eel878/sockets/gethostbynameman.html\" rel=\"nofollow\">gethostbyname()</a> </p>\n\n<blockquote>\n  <p>char **h_addr_list</p>\n  \n  <p>A list of IP addresses for this host. Although this is a char**, it's\n  really an array of struct in_addr*s in disguise. The last array\n  element is NULL.</p>\n</blockquote>\n\n<p>You need to use <a href=\"http://beej.us/guide/bgnet/output/html/multipage/inet_ntoaman.html\" rel=\"nofollow\">inet_ntoa(), inet_aton(), inet_addr</a> in order to convert the value to the proper output format.</p>\n"}], "owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456945768, "creation_date": 1456944413, "question_id": 35755607, "link": "https://stackoverflow.com/questions/35755607/dns-using-gethostbyname", "title": "DNS using gethostbyname", "body": "<p>I'm doing the following in C to get the ip address from a hostname. It prints IP is ? *?, so it's not working. What am I doing wrong?</p>\n\n<pre><code> char * targetHostName = server_proxy_hostname;\n char * targetPort = server_proxy_port;\n struct hostent *info;\n info = gethostbyname(targetHostName);\n char ** ipAddresslist;\n ipAddresslist =info -&gt; h_addr_list;\n char * ipAddress = ipAddresslist[0];\n\n printf(\"IP is %s\\n\", ipAddress);\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct", "destructor", "dynamic-allocation"], "comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 4, "creation_date": 1456944496, "post_id": 35755602, "comment_id": 59184499, "body": "You have to call the appropriate <code>free</code> or <code>clean</code> or similarly called function yourself when the object is not needed. Documenting which function takes the ownership of an object (if it takes it at all) helps while doing that. That&#39;s C, it&#39;s all there is to it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1456944794, "post_id": 35755602, "comment_id": 59184681, "body": "As well as writing a destructor function (that calls <code>free()</code>), you should also consider writing a &#39;copy constructor&#39; (which will do the <code>malloc()</code> and <code>memmove()</code> or <code>memcpy()</code> operation \u2014 and validate that the allocation was successful).  And you make sure that after you&#39;ve successfully called the constructor, you call the destructor before returning from your function. In context, that means you have to compute the median and save it in a local variable, destruct your sorted copy of the vector, and then return the saved value."}, {"owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1456945165, "post_id": 35755602, "comment_id": 59184922, "body": "@JonathanLeffler that&#39;s what I was thinking for the first  time but then decided to ask for any less dirty solution that this..."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1456945730, "post_id": 35755602, "comment_id": 59185261, "body": "The &quot;old school&quot; C programmers did not think in terms of constructors and destructors. &quot;Old school&quot; C had a different structure, where not the object was responsible for creation / deletion, but the <i>caller</i>. You create an object, operate on it bz passing it to worker functions, and delete it again. The object itself is &quot;dumb&quot;. Take <code>FILE *</code> as an example. You <code>fopen()</code>, <code>fread()</code> / <code>fwrite()</code>, and <code>fclose()</code>. The <code>FILE</code> object itself is just passed around, it doesn&#39;t do things, it gets things done to it."}], "answers": [{"comments": [{"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 0, "creation_date": 1456947735, "post_id": 35755988, "comment_id": 59186495, "body": "Basically you&#39;re right, at least if there is no <code>return</code>, <code>continue</code>, <code>break</code> or <code>goto</code>in between. But even then, it is much more complicated than it looks when your data structures and control flows get more complex. Actually I should downvote this answer because it conveys a false impression of simplicity :)"}], "tags": [], "owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1456945616, "creation_date": 1456945616, "answer_id": 35755988, "question_id": 35755602, "link": "https://stackoverflow.com/questions/35755602/what-is-the-best-way-to-destruct-the-structure-in-c/35755988#35755988", "title": "What is the best way to destruct the structure in C", "body": "<p>At beginning:  <code>n.stack=\u2026malloc();</code></p>\n\n<p>At end:  <code>free(n.stack);</code></p>\n\n<p>Every  <strong>malloc()</strong>  near beginning of block, should have a matching  <strong>free();</strong>  near end of block.</p>\n"}, {"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 1, "last_activity_date": 1456946410, "creation_date": 1456946410, "answer_id": 35756227, "question_id": 35755602, "link": "https://stackoverflow.com/questions/35755602/what-is-the-best-way-to-destruct-the-structure-in-c/35756227#35756227", "title": "What is the best way to destruct the structure in C", "body": "<p>If you want to free an object that uses some kind of hierarchical storage (i.e., internal pointers to other object) in C, I usually write a free function specific to that object.  For instance:</p>\n\n<pre><code>void free_my_obj(my_obj_t *my_obj)\n{\n    free(my_obj-&gt;a);\n    free_my_obj2(my_obj-&gt;my_obj2);\n    free(my_obj);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1456948164, "creation_date": 1456948164, "answer_id": 35756750, "question_id": 35755602, "link": "https://stackoverflow.com/questions/35755602/what-is-the-best-way-to-destruct-the-structure-in-c/35756750#35756750", "title": "What is the best way to destruct the structure in C", "body": "<p>A simple pointer needs a <code>*alloc()</code> and lastly a <code>free()</code>.</p>\n\n<p>A structure with dynamic fields deserves a crafted <code>vector_alloc()</code> and <code>vector_free()</code>.</p>\n\n<p>An old school flavored result:</p>\n\n<pre><code>// Return non-0 on error\nint vector_alloc(vector *ptr, size_t size) {\n  assert(ptr);\n  ptr-&gt;stack = calloc(size, sizeof *(ptr-&gt;stack));\n  if (ptr-&gt;stack) {\n    ptr-&gt;size = size;\n    return 0;\n  }\n  ptr-&gt;size = 0;\n  return 1;\n}\n\nvoid vector_free(vector *ptr) {\n  assert(ptr);\n  free(ptr-&gt;stack);\n  ptr-&gt;stack = NULL;\n  ptr-&gt;size = 0;\n}\n\n\ndouble median_(const vector* v) {\n    vector n;\n    if (vector_alloc(&amp;n, v-&gt;size)) return 0.0/0.0;\n    memcpy(n, v-&gt;stack, sizeof *n-&gt;stack *n.size);\n    sort(&amp;n);  \n    double y;   \n    if(v-&gt;size%2) \n        y = n.stack[(v-&gt;size/2+1)];\n    else\n        y = (n.stack[(v-&gt;size/2)]+n.stack[(v-&gt;size/2+1)])/2;\n    vector_free(&amp;n);\n    return y;\n}\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 4798925, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ZzXc_J2jsVw/AAAAAAAAAAI/AAAAAAAABvs/EpYh-ESgB1A/photo.jpg?sz=128", "display_name": "Kaspar Siricenko", "link": "https://stackoverflow.com/users/4798925/kaspar-siricenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 35756750, "answer_count": 3, "score": 4, "last_activity_date": 1456948164, "creation_date": 1456944391, "last_edit_date": 1456944790, "question_id": 35755602, "link": "https://stackoverflow.com/questions/35755602/what-is-the-best-way-to-destruct-the-structure-in-c", "title": "What is the best way to destruct the structure in C", "body": "<p>In C++ we have structures which have a constructor and the destructor. It makes life much easier especially when it going to have the pointers, therefore dynamically allocated memory in the structure. You can even use std::shared_pointer library to deal with the pointers.</p>\n\n<pre><code>class A{\nprivate:\n    int size;\n    double* stack;\n\npublic:    \n   A(int size) : this-&gt;size(size){}\n   ~A(){free(stack);}\n};\n</code></pre>\n\n<p>But my maths lecturer doesn't like C++ and prefers everything in C. So I had to use C instead and came up with the following structure:</p>\n\n<pre><code>typedef struct vectorOfDoubles{\n    double* stack;\n    int size;\n} vector;\n</code></pre>\n\n<p>I made up function that calculate the median of the vector of doubles.</p>\n\n<pre><code>double median_(const vector* v) {\n    vector n;  // creates vector class object\n    n.stack = (double*)malloc(sizeof(double)*(n.size = v-&gt;size));  // takes double ptr and allocates the right amount of memory for it\n    memcpy(n.stack, v-&gt;stack, sizeof(double)*n.size);  // copies the array of doubles.\n    sort(&amp;n);  // sorts the array of doubles \n    if(v-&gt;size%2)  // checks for odd size\n        return n.stack[(v-&gt;size/2+1)];  // return median for odd size\n    else\n        return (n.stack[(v-&gt;size/2)]+n.stack[(v-&gt;size/2+1)])/2;  // return median for even size\n}\n</code></pre>\n\n<p>As an example of the bad practices I didn't free the memory. When the function returns its value it destructs the local variables and structures. But my structure has a pointer that holds the allocated memory. Unlikely after some research on the internet I didn't find any good destruction method solution for these situations.</p>\n\n<p><strong>My question</strong> is how the old-school C programmers dealt with those situations when they want to free the pointers in the structure but they do not have the destructor for structure that would execute itself to do a certain job?</p>\n"}, {"tags": ["c++", "c", "gcc", "cygwin"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456966628, "post_id": 35755479, "comment_id": 59195487, "body": "you really should NOT have placed the ioping project files in your <code>home</code> directory.   rather,  create a sub directory.  Then place the project files in that sub directory."}, {"owner": {"reputation": 1, "user_id": 5689204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b86539f03ea791b4d0eba45cc596216?s=128&d=identicon&r=PG&f=1", "display_name": "mmmlll lis", "link": "https://stackoverflow.com/users/5689204/mmmlll-lis"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457040771, "post_id": 35755479, "comment_id": 59238321, "body": "I was terse for simplicity at the time, but I actually put it in it&#39;s own dir, just didn&#39;t show it above, just wanted to point out what seemed like was the most relevant base dir. But yes for posterity, it should be located in a sub dir for organizational reason. Some may see as nitpicking, but a good point none the less."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5689204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b86539f03ea791b4d0eba45cc596216?s=128&d=identicon&r=PG&f=1", "display_name": "mmmlll lis", "link": "https://stackoverflow.com/users/5689204/mmmlll-lis"}, "edited": false, "score": 0, "creation_date": 1457040544, "post_id": 35761747, "comment_id": 59238188, "body": "Simplest solution for me was installing standalone &#39;MinGW&#39;. From what I read it would have taken some work to get it working with Cygwin(Didn&#39;t want to take chance of messing up Cygwin environment settings as I use it for other things) Thanks for the attempt."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 1, "user_id": 5689204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b86539f03ea791b4d0eba45cc596216?s=128&d=identicon&r=PG&f=1", "display_name": "mmmlll lis", "link": "https://stackoverflow.com/users/5689204/mmmlll-lis"}, "edited": false, "score": 0, "creation_date": 1457041910, "post_id": 35761747, "comment_id": 59238954, "body": "the utility <code>MinGW</code> is for windows, not a unix like environment.   The only changes would be within the oping.c file not in the cygwin environment.  however, if you do not want to change the *.c file, then in your .bashrc file add statements similar to <code>set __linux__ </code>  and <code>export __linux__</code>"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1456970340, "creation_date": 1456970340, "answer_id": 35761747, "question_id": 35755479, "link": "https://stackoverflow.com/questions/35755479/how-to-compile-ioping-with-cygwin/35761747#35761747", "title": "How to compile ioping with cygwin", "body": "<p>the function: <code>get_device_size()</code>  selects certain `ioctl() depending on the underlying OS.  </p>\n\n<p>which <code>ioctl()</code> depends on which of the following are defined at <code>make</code> time</p>\n\n<ol>\n<li><code>__linux__</code></li>\n<li><code>__gnu_hurd__</code></li>\n<li><code>__FreeBSD__</code></li>\n<li><code>__FreeBSD_kernel__</code></li>\n<li><code>__DragonFly__</code></li>\n<li><code>__OpenBSD__</code></li>\n<li><code>__APPLE__</code></li>\n<li><code>__sun__</code></li>\n<li><code>__MINGW32__</code></li>\n</ol>\n\n<p>Browse your environment variables</p>\n\n<p>I would expect some environment variable like <code>__cygwin__</code></p>\n\n<p>Which ever environment variable seems most likely to be the appropriate one, add the name of the environment variable to the sets of preprocessor blocks near the top of the <code>ioping.c</code> file and again in the <code>get_device_size()</code> function.</p>\n"}], "owner": {"reputation": 1, "user_id": 5689204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b86539f03ea791b4d0eba45cc596216?s=128&d=identicon&r=PG&f=1", "display_name": "mmmlll lis", "link": "https://stackoverflow.com/users/5689204/mmmlll-lis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457041041, "creation_date": 1456943977, "last_edit_date": 1457041041, "question_id": 35755479, "link": "https://stackoverflow.com/questions/35755479/how-to-compile-ioping-with-cygwin", "title": "How to compile ioping with cygwin", "body": "<p>Using Cygwin on Windows 7 x64. Extracted 'ioping' source into '/home'</p>\n\n<p>This is the result:</p>\n\n<pre><code>$ make\ntest ! -d .git || git describe --tags --dirty=+ | sed 's/^v//;s/-/./g' &gt; version\ncc -std=gnu99 -g -Wall -Wextra -pedantic -DVERSION=\\\"0.8\\\" -c -o ioping.o ioping.c\nioping.c: In function \u2018get_device_size\u2019:\nioping.c:602:3: error: #error no get disk size method\n # error no get disk size method\n   ^\nMakefile:46: recipe for target 'ioping.o' failed\nmake: *** [ioping.o] Error 1\n</code></pre>\n\n<p>Trying to compile a Windows executable. I'm new to Cygwin. Seems like a preprocessor is missing when looking at the code.</p>\n\n<p>Source: <a href=\"https://github.com/koct9i/ioping\" rel=\"nofollow\">https://github.com/koct9i/ioping</a></p>\n\n<p>Edit:\nSee accepted asnwer user, 'user3629249' and my comments for full answer.</p>\n\n<p>Note of the linked source. 'Readme' says it works on windows, Tried running it on Win 7 Ultimate 64-bit with SSD and it errors out with \"preparation write failed: no error\".</p>\n"}, {"tags": ["c", "process", "fork", "parent-child"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1456943093, "post_id": 35755155, "comment_id": 59183619, "body": "Related: <a href=\"http://stackoverflow.com/questions/32901590/is-data-shared-between-processes-when-we-use-fork-in-c\">Is data shared between processes when we use fork in C</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": true, "score": 2, "last_activity_date": 1456943193, "creation_date": 1456943193, "answer_id": 35755256, "question_id": 35755155, "link": "https://stackoverflow.com/questions/35755155/why-is-this-global-counter-not-decrementing-in-the-child-process/35755256#35755256", "title": "Why is this global counter not decrementing in the child process?", "body": "<p>From the Linux man page for <code>fork</code>:</p>\n\n<blockquote>\n  <p>Under  Linux,  fork() is implemented using copy-on-write pages, so the only penalty that it incurs is the time and memory required to duplicate the parent's page tables, and to create  a  unique  task  structure  for  the child.</p>\n</blockquote>\n\n<p>This means that any time you write to memory in either the parent or child process, the page being written is copied and the two processes end up with independent copies.</p>\n"}], "owner": {"reputation": 49, "user_id": 5956841, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/80873b3ba68755b1e66e9639c57bfe96?s=128&d=identicon&r=PG&f=1", "display_name": "moomin", "link": "https://stackoverflow.com/users/5956841/moomin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 35755256, "answer_count": 1, "score": 1, "last_activity_date": 1456943193, "creation_date": 1456942866, "question_id": 35755155, "link": "https://stackoverflow.com/questions/35755155/why-is-this-global-counter-not-decrementing-in-the-child-process", "title": "Why is this global counter not decrementing in the child process?", "body": "<p>In this snippet, (ignoring all the <code>printf</code>s besides second last), I expect the <code>counter</code> to be at 1 by the end. </p>\n\n<pre><code>int counter = 1; //GLOBAL!\n\nint main() \n{\n    if (fork() == 0) {\n        printf(\"child has spoken!\\n\");\n        counter--; \n        printf(\"and counter is now: %d\\n\", counter);    \n        exit(0);\n    }\n    else {\n        printf(\"what is counter here?: %d\\n\", counter);\n        printf(\"now we'll wait\\n\");\n        wait(NULL);\n        printf(\"we've waited long enough!\\n\");\n        printf(\"counter = %d\\n\", ++counter);\n        printf(\"counter is 2????: %d\\n\", counter);\n    }\n    exit(0);\n}\n</code></pre>\n\n<p>The process can be seen in what is printed to output. </p>\n\n<pre><code>what is counter here?: 1\nnow we'll wait\nchild has spoken!\nand counter is now: 0\nwe've waited long enough!\ncounter = 2\ncounter is 2????: 2\n</code></pre>\n\n<p>The <code>else</code> is entered first, <code>counter</code> is still at 1, we <code>wait(NULL)</code> for the <code>child</code> to die. Back up in the <code>if</code>, <code>fork()</code> creates the child, but seeing as <code>fork() == 0</code>, only the <code>child</code> decrements the <code>counter</code> by 1. Now the <code>counter</code> is 0, and the <code>child</code> terminates at <code>exit(0)</code>. The wait is over, <code>child</code> is dead, and <code>parent</code> prints <code>++counter</code> which should be 0 + 1 = 1, but suddenly it's 2, not 1! Why is this so?</p>\n"}, {"tags": ["c", "function-pointers"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1456942410, "post_id": 35754910, "comment_id": 59183166, "body": "Normally you should use <code>&amp;cmp</code>, but <code>cmp</code> is also accepted. Function identifier decays to pointer to the function."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1456942809, "post_id": 35754910, "comment_id": 59183431, "body": "@Jean-BaptisteYun&#232;s: &quot;Normally you should use <code>&amp;cmp</code>&quot; - Why that? using just the name is very well accepted."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1456989082, "post_id": 35754910, "comment_id": 59202956, "body": "This is what I said. If you want the address of something you must use <code>&amp;something</code> for any thing, but for some special things (arrays, functions) the name of the object by itself represents an address..."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1456942408, "creation_date": 1456942408, "answer_id": 35754988, "question_id": 35754910, "link": "https://stackoverflow.com/questions/35754910/what-is-happening-here-with-this-function-pointer/35754988#35754988", "title": "What is happening here with this function pointer", "body": "<p>In C, functions are converted to pointer to the function when used in expressions.<br>\n<code>cmp</code> and <code>&amp;cmp</code> both here represents the address of function, therefore both are equivalent as a function argument to <code>bst_get</code>.  </p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456942892, "post_id": 35755009, "comment_id": 59183491, "body": "Using just the name of a function is exactly as explicit as using the <code>&amp;</code> operator. A function call requires an <i>explicit</i> parenthesis postfix operator."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456943412, "post_id": 35755009, "comment_id": 59183825, "body": "@Olaf I don&#39;t really understand what you&#39;re trying to tell me. What I&#39;m about is that <code>cmp</code> is an expression with function type, that (almost always) is (implicitly) converted to an expression with pointer to function type, as is done explicitly when using operator <code>&amp;</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456949313, "post_id": 35755009, "comment_id": 59187438, "body": "&quot; that (almost always) is&quot; - when is it not? It is not like arrays. It is <b>only</b> called as a function if an <b>explicit</b> <code>(</code> follows."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456949760, "post_id": 35755009, "comment_id": 59187707, "body": "Btw. <code>sizeof</code> and <code>_Alignof</code> are illegal for functions."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456956835, "post_id": 35755009, "comment_id": 59191743, "body": "@Olaf The implicit conversion isn&#39;t happening when using the address of operator (which is then doing an explicit conversion), as be seen in the quote from the standard. That&#39;s why I put these parentheses, in all practical cases the conversion happens. Even in the case when calling a function: Actually, we&#39;re always calling (through) function pointers. The &quot;like arrays&quot; part is there because the conversion is similar, thus hopefully showing parallels to the reader."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456956932, "post_id": 35755009, "comment_id": 59191809, "body": "No, they are <b>not</b> similar. <code>&amp;func</code> yields <b>exactly</b> the same as <code>func</code> for a function. <code>&amp;array</code> does not! And - as I wrote <code>sizeof(func)</code> and <code>_alingof(func)</code> are illegal, so only <code>&amp;</code> is left. And - as I clarified - yields <b>exactly</b> the same as <code>func</code>. Actually, your statement &quot;Actually, we&#39;re always calling (through) function pointers&quot; is correct. So according to your logic, the &quot;correct way was to call a function through <code>(&amp;func)(...)</code> and use <code>funcPtr(...)</code> only for function pointers,"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456957197, "post_id": 35755009, "comment_id": 59191963, "body": "@Olaf Ah, is that what it&#39;s been about? What I mean with &quot;similar&quot; is that when using the expression <code>array</code> an implicit conversion (to a pointer to its first element) is done. The similarity is the implicit conversion, not that the resulting types of the plain expression and the expression prefixed with the address of operator would yield the same result (which, as you said, it doesn&#39;t for arrays, <code>&amp;array</code> is a pointer to an array, not to its first element)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456957280, "post_id": 35755009, "comment_id": 59192010, "body": "Remember this is read by beginners who take such laxness serious. There is already enough confusion about arrays and pointers. So we should be very precise about the terminology."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456957323, "post_id": 35755009, "comment_id": 59192028, "body": "I&#39;ll try to make it more precise."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 1, "last_activity_date": 1456957989, "last_edit_date": 1456957989, "creation_date": 1456942484, "answer_id": 35755009, "question_id": 35754910, "link": "https://stackoverflow.com/questions/35754910/what-is-happening-here-with-this-function-pointer/35755009#35755009", "title": "What is happening here with this function pointer", "body": "<p><code>cmp</code> is an expression with \"function type\". Expressions with these types are (almost) always implicitly converted to an expression with the corresponding function <em>pointer</em> type, <em>similar</em> (*see note at end) to how expressions with array type are implicitly converted to pointers to the first array element. This implicit conversion is often called <strong>decaying</strong>, though this is not a term used by the C language standard (but by C++).</p>\n\n<p><code>&amp;cmp</code> on the other hand makes the conversion explicit: Here you're taking the address of a function, thus receiving a function pointer.</p>\n\n<p>So, bottom line: They're equivalent, and at least in C there's no practical difference between using one over the other.</p>\n\n<p>The relevant part in the standard:</p>\n\n<blockquote>\n  <p>A <em>function designator</em> is an expression that has function type. Except when it is the operand of the <code>sizeof</code> operator, the <code>_Alignof</code> operator, or the unary <code>&amp;</code> operator, a function designator with type \"function returning <em>type</em>\" is converted to an expression that has type \"pointer to function returning <em>type</em>\".</p>\n  \n  <p>[N1570 \u00a76.3.2.1/4]</p>\n</blockquote>\n\n<p>Note: That means, being \"explicit\" all the times would mean writing function calls like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid foo(void) {\n  printf(\"Awesome\\n\");\n}\n\nint main() {\n  (&amp;foo)();\n  return 0;\n}\n</code></pre>\n\n<p>*) <em>Important</em>: The similarity mentioned is that there's an implicit conversion happening. While <code>func</code> and <code>&amp;func</code> yield the <strong>exact</strong> same result (value and type), <code>array</code> and <code>&amp;array</code> yield <strong>different</strong> results (different pointer types). The reason is that <code>array</code> is implicitly converted to <code>&amp;(array[0])</code>. So, repeat, the similarity is that there are implicit conversions happening. The actual conversions are different.</p>\n"}], "owner": {"reputation": 1075, "user_id": 740521, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e724ef960b60005ddfdf845d82e358de?s=128&d=identicon&r=PG", "display_name": "user740521", "link": "https://stackoverflow.com/users/740521/user740521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1456942734, "accepted_answer_id": 35755009, "answer_count": 2, "score": 1, "last_activity_date": 1456957989, "creation_date": 1456942175, "question_id": 35754910, "link": "https://stackoverflow.com/questions/35754910/what-is-happening-here-with-this-function-pointer", "closed_reason": "Duplicate", "title": "What is happening here with this function pointer", "body": "<p>I have a function being passed to another function but I'm not sure why both of these work and don't produce any warnings.</p>\n\n<pre><code>typedef short (*COMP)(char  *, char *);\n\nDATA *bst_get(BST *, char *, COMP);\n\nshort cmp(char *a, char *b)\n{\n    if (strstr(a, b))\n        return 0;\n    return strcmp(a, b);\n}\n\n// Both of these produce the same results\n//     the difference is '&amp;cmp' vs 'cmp'\ndata = bst_get(bst, \"textA\", &amp;cmp);\ndata = bst_get(bst, \"textA\", cmp);\n</code></pre>\n\n<p>So which is the correct usage? Does it matter?</p>\n"}, {"tags": ["c", "linux", "sockets", "networking"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1456942074, "post_id": 35754754, "comment_id": 59182978, "body": "I&#39;m not positive but I suspect you could simply <code>close()</code> the socket that <code>accept()</code> is on. Perhaps <code>shutdown()</code> does that. What happened when you tried?"}, {"owner": {"reputation": 2013, "user_id": 70405, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b3885b5364a53cb8bbdaf498a32d0d3?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/70405/alex"}, "edited": false, "score": 0, "creation_date": 1592040746, "post_id": 35754754, "comment_id": 110285512, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/11191028/boostasio-how-to-interrupt-a-blocked-tcp-server-thread\">Boost::asio - how to interrupt a blocked tcp server thread?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2013, "user_id": 70405, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0b3885b5364a53cb8bbdaf498a32d0d3?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/70405/alex"}, "edited": false, "score": 0, "creation_date": 1592040725, "post_id": 35754919, "comment_id": 110285502, "body": "Should be slightly corrected: instead of close() do shutdown() for portable solution. More details here <a href=\"https://stackoverflow.com/a/62356967/70405\">stackoverflow.com/a/62356967/70405</a> . Don&#39;t mind the boost involvement, solution is at socket API level."}], "tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": false, "score": 3, "last_activity_date": 1456945365, "last_edit_date": 1456945365, "creation_date": 1456942203, "answer_id": 35754919, "question_id": 35754754, "link": "https://stackoverflow.com/questions/35754754/how-to-terminate-a-socket-accept-blocking/35754919#35754919", "title": "How to terminate a socket accept blocking", "body": "<p>Classically, closing the socket from another thread causes the accept() call to return with an error.  I have been told that this does not work on some releases of Linux, but have seen no evidence of that myself - every time, on Windows/Linux, the accept() returns with an error/exception.</p>\n\n<p>The other common solution is to check some 'shutdown' atomic boolean after every accept() return.  When you want to stop it, set the boolean and perform a connect() on the localhost stack, so causing the accept() to return in the 'normal' way.</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 4, "last_activity_date": 1603901205, "last_edit_date": 1603901205, "creation_date": 1456943513, "answer_id": 35755340, "question_id": 35754754, "link": "https://stackoverflow.com/questions/35754754/how-to-terminate-a-socket-accept-blocking/35755340#35755340", "title": "How to terminate a socket accept blocking", "body": "<p>[This does not work on Windows]</p>\n<ul>\n<li><p>Use <a href=\"http://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"nofollow noreferrer\"><code>sigaction()</code></a> to install a signal handler for let's say <code>SIGUSR1</code> doing nothing, but having the <code>SA_RESTART</code> option unset (also see section &quot;<em>Interruption of system calls and library functions by signal handlers</em>&quot; on this <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man-page</a>).</p>\n</li>\n<li><p>Then send the blocking process a <code>SIGUSR1</code> signal.</p>\n</li>\n</ul>\n<p><code>accept()</code> will then return <code>-1</code> and set <code>errno</code> to <code>EINTR</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1365, "user_id": 507970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/598fe86b1351a16d76eb66e4df0a3b1d?s=128&d=identicon&r=PG", "display_name": "Algoman", "link": "https://stackoverflow.com/users/507970/algoman"}, "is_accepted": false, "score": 0, "last_activity_date": 1551050546, "creation_date": 1551050546, "answer_id": 54857549, "question_id": 35754754, "link": "https://stackoverflow.com/questions/35754754/how-to-terminate-a-socket-accept-blocking/54857549#54857549", "title": "How to terminate a socket accept blocking", "body": "<p>I was having trouble with <code>accept</code> not terminating after I only called <code>close</code> on the socket under Linux Mint 18.3. I solved it by also calling <code>shutdown(socket_fd, SHUT_RD);</code> before the <code>close</code></p>\n\n<p>mah already mentioned it, but I wanted to highlight this, because this is the first SO result in a google search for \"socket stop accept\".</p>\n"}], "owner": {"reputation": 35623, "user_id": 1003575, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cceded39fb12d936211b56afc86dcb04?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMED", "link": "https://stackoverflow.com/users/1003575/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4803, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1603901205, "creation_date": 1456941620, "last_edit_date": 1544769821, "question_id": 35754754, "link": "https://stackoverflow.com/questions/35754754/how-to-terminate-a-socket-accept-blocking", "title": "How to terminate a socket accept blocking", "body": "<p>I developed a server with C code.</p>\n\n<p>I used the <code>accept()</code> function to keep my server listening on a giving socket.</p>\n\n<p>My server is launched in a thread.</p>\n\n<p>Now in other thread and for some condition I want to stop the <code>accept()</code> blocking and then close the related socket.</p>\n\n<p>How I can do that? Could <code>shutdown()</code> do that?</p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1456941124, "post_id": 35754547, "comment_id": 59182369, "body": "TL;DR. Don&#39;t write a novel. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 1, "creation_date": 1456942237, "post_id": 35754547, "comment_id": 59183069, "body": "Looks like the question is &quot;why is output different between server and laptop?&quot; 99% of the rest is fluff."}, {"owner": {"reputation": 3107, "user_id": 3423234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49Nfn.gif?s=128&g=1", "display_name": "mfro", "link": "https://stackoverflow.com/users/3423234/mfro"}, "edited": false, "score": 3, "creation_date": 1456942829, "post_id": 35754547, "comment_id": 59183448, "body": "honestly, I enjoyed the read."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1456943357, "post_id": 35754547, "comment_id": 59183778, "body": "I enjoyed it, too, and if you take the time to understand it, it is <i>not</i> &quot;why is output different between server and laptop?&quot;."}, {"owner": {"reputation": 10700, "user_id": 2102457, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/m3spO.png?s=128&g=1", "display_name": "mattst", "link": "https://stackoverflow.com/users/2102457/mattst"}, "edited": false, "score": 0, "creation_date": 1456944353, "post_id": 35754547, "comment_id": 59184392, "body": "Edited down to be much shorter after getting lots of negative votes. I thought it was a fun post about a trivial experiment and that the background was worth reading. Oh well."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1456944965, "post_id": 35754547, "comment_id": 59184778, "body": "<code>rand()</code> does not have a defined implementation spec, so implementations are all over the map.  Many implementations are low performance linear congruential generators.  Use of <code>rand()</code> is almost certainly an issue, I&#39;d suggest trying a better generator such as <a href=\"https://en.wikipedia.org/wiki/Mersenne_Twister\" rel=\"nofollow noreferrer\">Mersenne Twister</a> or <a href=\"https://en.wikipedia.org/wiki/Well_equidistributed_long-period_linear\" rel=\"nofollow noreferrer\">WELL</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456953870, "post_id": 35754547, "comment_id": 59190121, "body": "&quot;I know that the C standard library&#39;s pseudo-random number generator is not considered adequate for cryptography. Surely that could not be a factor&quot;   - famous last words"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456956727, "post_id": 35754547, "comment_id": 59191692, "body": "This is relevant: <a href=\"http://stackoverflow.com/a/14679656/1566221\">stackoverflow.com/a/14679656/1566221</a>"}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1456943878, "post_id": 35754849, "comment_id": 59184094, "body": "Optimization settings will not affect random number generation."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1456951916, "post_id": 35754849, "comment_id": 59188948, "body": "<code>rand() % 2</code> is uniform enough for all practical purposes.  If <code>RAND_MAX</code> is even then <code>rand() % 2</code> will be perfectly uniform, if not it will off by one part in RAND_MAX.  (Now, it&#39;s true that <code>rand() % 2</code> might have a problem with <i>distribution</i>, but that doesn&#39;t seem to be the problem here, either.)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1456952905, "post_id": 35754849, "comment_id": 59189563, "body": "@steve: but here we are not just looking at frequency. A PRNG which alternated even and odd numbers could be perfectly unbiased in frequency, but it would be very biased if you were counting repeated r%2 values. Which is precisely the subject."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456953762, "post_id": 35754849, "comment_id": 59190053, "body": "@rici: I think we&#39;re saying the same thing.  But it&#39;s clear the OP is <i>not</i> having the problem that his system&#39;s <code>rand()</code> implementation is alternating even and odd, because if it did, he&#39;d never get <i>any</i> runs of all-heads or all-tails."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1456954048, "post_id": 35754849, "comment_id": 59190232, "body": "@steve: that&#39;s correct. The problem is with the gnu trinomial generator which has a strong correlation with the 31st previous value. The example was just an example; much subtler sequence biases exist in unbiased (by frequency) rngs"}], "tags": [], "owner": {"reputation": 586, "user_id": 1248712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/998c79524a9e318bc4aad293f5bca105?s=128&d=identicon&r=PG", "display_name": "Danilo Gasques", "link": "https://stackoverflow.com/users/1248712/danilo-gasques"}, "is_accepted": false, "score": 2, "last_activity_date": 1456950884, "last_edit_date": 1495540298, "creation_date": 1456941942, "answer_id": 35754849, "question_id": 35754547, "link": "https://stackoverflow.com/questions/35754547/18-trillion-coin-tosses-where-did-i-go-wrong/35754849#35754849", "title": "18 trillion coin tosses, where did I go wrong?", "body": "<p>Your code seems to be fine. The problem might be the RNG your are using.</p>\n\n<p>I don't think that rand() % 2 is uniform. Take a look here:\n<a href=\"https://stackoverflow.com/questions/13104478/uniformity-of-random-numbers-taken-modulo-n\">Uniformity of random numbers taken modulo N</a></p>\n\n<p>Why not C++11 Random Number Generators?<a href=\"http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution</a></p>\n\n<p>Last but not least, could -O3 be messing up with something?</p>\n\n<blockquote>\n  <p>-O3\n  Optimize yet more. -O3 turns on all optimizations specified by -O2 and also turns on the -finline-functions, -funswitch-loops, -fpredictive-commoning, -fgcse-after-reload, -ftree-loop-vectorize, -ftree-loop-distribute-patterns, -fsplit-paths -ftree-slp-vectorize, -fvect-cost-model, -ftree-partial-pre and -fipa-cp-clone options. </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456942808, "post_id": 35755020, "comment_id": 59183429, "body": "Which 65,538 values didn&#39;t get generated?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456943378, "post_id": 35755020, "comment_id": 59183795, "body": "@rici it was probably 65,536 since I was testing for a sequence of three values repeating. When I checked for a sequence of four values repeating there was one less iteration of the loop."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1456943814, "post_id": 35755020, "comment_id": 59184059, "body": "It&#39;s still curious, don&#39;t you think? Are you using the GNU trinomial generator, or some linear congruential variant? The GNU generator has quite a large state, so it <i>should</i> have a cycle length larger than RANDMAX, not that I&#39;ve ever tested it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456944813, "post_id": 35755020, "comment_id": 59184687, "body": "@rici yes, I was not counting correctly since I was repeating <code>rand()</code> within the loop when <code>a</code> matched. I&#39;ve re-written and posted it FWIW."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 4, "last_activity_date": 1456944722, "last_edit_date": 1456944722, "creation_date": 1456942511, "answer_id": 35755020, "question_id": 35754547, "link": "https://stackoverflow.com/questions/35754547/18-trillion-coin-tosses-where-did-i-go-wrong/35755020#35755020", "title": "18 trillion coin tosses, where did I go wrong?", "body": "<p>Even though your \"random\" bit 0 had equal zeros and ones, the pseudo random generator function <code>rand()</code> sequence repeats relatively often. In my test it repeated after 2147483648 (2**31) iterations of the loop. So there is no point going to 18 trillion. I ran the test several times, always the same result.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\n    unsigned long long n = 0;\n    int a, b, c, d;\n    int e, f, g, h;\n\n    srand((unsigned)time(NULL));\n    e = a = rand();\n    f = b = rand();\n    g = c = rand();\n    h = d = rand();\n    do {\n        n++;\n        e = f;\n        f = g;\n        g = h;\n        h = rand();\n    } while (e != a || f != b || g != c || h != d);\n    printf(\"%llu\\n\", n);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 6, "last_activity_date": 1456946074, "last_edit_date": 1456946074, "creation_date": 1456942835, "answer_id": 35755139, "question_id": 35754547, "link": "https://stackoverflow.com/questions/35754547/18-trillion-coin-tosses-where-did-i-go-wrong/35755139#35755139", "title": "18 trillion coin tosses, where did I go wrong?", "body": "<p>Your random number generator is probably repeating after 2^32 = 4294967296 calls, so you're not really simulating 18 trillion trials.  You need a better RNG, one that keeps more than 32 bits of internal state.  On many systems, you can access a better RNG by simply calling <code>random()</code> instead of <code>rand()</code>.  (On my system, <code>man random</code> says \"random -- better random number generator\" and \"The period of this random number generator is very large, approximately 16*((2**31)-1)\".  Although that's \"only\" 34,359,738,352, which is still short of your 18 trillion.)</p>\n\n<p>Also, as a side point, <code>rand() % 2</code> is risky, although most RNGs these days don't have the problem that will burn you there (and if you did have that problem, you'd know it, because among other things you'd get 0 in a row no matter what).</p>\n\n<hr>\n\n<p>Addendum: You can find references to some other, better random-number generators at question 13.15 in the C FAQ list: <a href=\"http://c-faq.com/lib/rand.html\">http://c-faq.com/lib/rand.html</a> .</p>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1456949939, "post_id": 35757102, "comment_id": 59187833, "body": "It&#39;s true that many <code>rand()</code> implementations are poor, and it&#39;s true that a too-short repetition cycle is likely the OP&#39;s actual problem.  But I want to point out that <code>RAND_MAX</code> has nothing to do with an RNG&#39;s period.  It&#39;s possible for any old <code>rand()</code> implementation to repeat with a period much, much longer than <code>RAND_MAX</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1456950892, "post_id": 35757102, "comment_id": 59188388, "body": "@SteveSummit indeed, in my answer MSVC&#39;s <code>RAND_MAX</code> is <code>32767</code> but the sequence repeated more slowly."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1456951237, "post_id": 35757102, "comment_id": 59188567, "body": "@SteveSummit You&#39;re right! I confused the size of the returned value with the period it might repeat."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1456951590, "post_id": 35757102, "comment_id": 59188767, "body": "I&#39;d also point out that, in one sense, the right answer here is also the wrong answer.  Yes, the OP has an RNG that isn&#39;t good enough for his needs, and will need to use a better one.  But it&#39;s a crying shame that he&#39;ll have to change his code to call something other than <code>rand()</code>! The whole point of modularity is so you can slip in a better implementation  behind the same interface!  No, the C Standard doesn&#39;t guarantee a high-quality <code>rand()</code>, but it certainly doesn&#39;t mandate a low-quality one, either!  Why can&#39;t more libc authors write high-quality RNG&#39;s <i>and call them plain old <code>rand()</code>?</i>"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1456957384, "post_id": 35757102, "comment_id": 59192061, "body": "@SteveSummit I hear you. Lamenting the choices of language standards and implementations and their tendency to favor bad, even dangerous, but compatible, behavior is a full time job. ;)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1456958224, "post_id": 35757102, "comment_id": 59192464, "body": "@Schwern: Thanks, and I&#39;m a sucker for backwards compatibility, too, but what makes this particular lament all the more poignant is of course that a mo&#39; betta <code>rand()</code> would be 100% absotively, posilutely compatible! (Though I have heard, at least once, a sober argument put forward with a straight face that a certain bad <code>rand()</code> implementation had to be retained because Existing Code Depended On It.)"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1456950987, "last_edit_date": 1495540866, "creation_date": 1456949301, "answer_id": 35757102, "question_id": 35754547, "link": "https://stackoverflow.com/questions/35754547/18-trillion-coin-tosses-where-did-i-go-wrong/35757102#35757102", "title": "18 trillion coin tosses, where did I go wrong?", "body": "<p>As others have pointed out, <code>rand</code> is not a reliable source of randomness. It's right there in <a href=\"https://www.freebsd.org/cgi/man.cgi?query=rand&amp;sektion=3\" rel=\"nofollow noreferrer\">the man page</a>:</p>\n\n<pre><code>NAME\n     rand, rand_r, srand, sranddev -- bad random number generator\n\n...\n\nDESCRIPTION\n     These interfaces are obsoleted by arc4random(3).\n</code></pre>\n\n<p>For good randomness you'll have to go outside the standard C libraries.</p>\n\n<ul>\n<li><a href=\"http://arc4random.com/\" rel=\"nofollow noreferrer\">arc4random</a>, the suggested replacement.</li>\n<li><a href=\"http://pubs.opengroup.org/onlinepubs/007908799/xsh/drand48.html\" rel=\"nofollow noreferrer\">drand48</a></li>\n<li>OpenSSL's <a href=\"http://www.openssl.org/docs/manmaster/crypto/RAND_bytes.html\" rel=\"nofollow noreferrer\">RAND_bytes</a> is cryptographically secure, but can be hard to use.  <a href=\"https://stackoverflow.com/a/31282121/14660\">Here is a good example of how to use it</a>.</li>\n<li><a href=\"http://www.pcg-random.org/\" rel=\"nofollow noreferrer\">PCG</a>, a replacement for the <a href=\"https://www.cs.hmc.edu/~geoff/mtwist.html\" rel=\"nofollow noreferrer\">Mersenne Twist</a></li>\n</ul>\n\n<p>Note that if you're on a Mac it will complain that <code>RAND_bytes()</code> is deprecated.  Don't worry, OpenSSL isn't going anywhere and is fine to use.  <a href=\"https://stackoverflow.com/questions/7406946/why-is-apple-deprecating-openssl-in-macos-10-7-lion\">The deprecation has to do with binary compatibility issues when upgrading Apple products</a>.</p>\n"}], "owner": {"reputation": 10700, "user_id": 2102457, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/m3spO.png?s=128&g=1", "display_name": "mattst", "link": "https://stackoverflow.com/users/2102457/mattst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 1, "closed_date": 1457138308, "answer_count": 4, "score": 3, "last_activity_date": 1457167809, "creation_date": 1456940957, "last_edit_date": 1457167809, "question_id": 35754547, "link": "https://stackoverflow.com/questions/35754547/18-trillion-coin-tosses-where-did-i-go-wrong", "closed_reason": "Needs details or clarity", "title": "18 trillion coin tosses, where did I go wrong?", "body": "<p>Why does the following C code gives me different results on my desktop and server, both running similar versions of Linux?</p>\n\n<p>It finds the longest same side in a row sequence in 18 trillion coin tosses. [See Iain M. Banks' science fiction novel <em>Consider Phlebas</em>.]</p>\n\n<p>On the server, after 15.7 trillion coin tosses (it's still running), the longest same side in a row sequence so far is only 29. Since <code>2^44 = 17,592,186,044,416</code>, I'd expect the longest same side sequence to be somewhere in the low to mid 40's, and probably 44 after all 18 trillion have been completed.</p>\n\n<p>On the desktop after only 4.7 billion coin tosses the longest sequence was already 31, since <code>2^31 = 2,147,483,648</code>, and that sounded about right.</p>\n\n<p>So why have I got a sequence of only 29 on the server after 15.7 trillion coin tosses but a sequence of 31 after only 4.7 billion on my desktop?</p>\n\n<p>Modulo bias was my first thought. <code>RAND_MAX</code> is the same on both desktop and server, 2,147,483,647 (a 32 bit signed long). So the <code>rand()</code> function will give me a number <code>0 &lt;= rand() &lt;= 2,147,483,647</code>. 0 is even and 2,147,483,647 is odd, so unless I'm very much mistaken there's no modulo bias introduced by my <code>int rand_num = (rand() % 2);</code> line of code.</p>\n\n<p>I know that the C standard library's pseudo-random number generator is not considered adequate for cryptography. Surely that could not be a factor when generating, admittedly really rather long, sequences of zeros and ones. Could it?</p>\n\n<p>Here's the source:</p>\n\n<p>Compiled on both machines using: <code>gcc -O3 -o 18TCT 18TrillionCoinTosses.c</code></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char* argv[])\n{\n    srand(time(NULL));\n\n    int current_seq = 0;\n    int longest_seq = 0;\n    int prev_rand_num = -1;\n\n    long long i = 0;\n    long long total = 18000000000000;\n\n    // To serve as a rudimentary progress indicator.\n    long billion_counter = 0;\n    long billion = 1000000000;\n\n    while (i &lt; total)\n    {\n        int rand_num = (rand() % 2);\n\n        if (rand_num == prev_rand_num)\n        {\n            current_seq++;\n\n            if (current_seq &gt;= longest_seq)\n            {\n                longest_seq = current_seq;\n                printf(\"Longest sequence so far: %d (on iteration %lli)\\n\", longest_seq, i);\n            }\n        }\n        else\n            current_seq = 1;\n\n        if (billion_counter == billion)\n        {\n            billion_counter = 0;\n            printf(\"Progress report, current iteration: %lli\\n\", i);\n        }\n\n        prev_rand_num = rand_num;\n\n        i++;\n        billion_counter++;\n    }\n\n    printf(\"\\nTotal coins tossed: %lli\\n\", i);\n    printf(\"Longest sequence: %d\\n\", longest_seq);\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "malloc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456941044, "post_id": 35754436, "comment_id": 59182315, "body": "If your&#39;r up to using a 2D array for <code>moves</code>, better use one, not a pointer to pointer."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456941330, "post_id": 35754436, "comment_id": 59182511, "body": "so why not move the 0th dimension of <code>moves</code> into <code>block</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2223, "user_id": 1181482, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f46110a9db0161da1a602f2779e2932a?s=128&d=identicon&r=PG", "display_name": "lowtech", "link": "https://stackoverflow.com/users/1181482/lowtech"}, "edited": false, "score": 0, "creation_date": 1456940967, "post_id": 35754520, "comment_id": 59182257, "body": "also the same problem in main: malloc(10 * sizeof(struct block))"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456940973, "post_id": 35754520, "comment_id": 59182263, "body": "You should elaborate a bit more. Just providing some code will result in a question about a similar problem sooner or later."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1456941016, "post_id": 35754520, "comment_id": 59182291, "body": "You dropped <code>block_no</code>."}, {"owner": {"reputation": 15, "user_id": 5127235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b7e550bded8f720eb17db9412d115e?s=128&d=identicon&r=PG&f=1", "display_name": "van", "link": "https://stackoverflow.com/users/5127235/van"}, "edited": false, "score": 0, "creation_date": 1456944430, "post_id": 35754520, "comment_id": 59184452, "body": "Thanks for your help, it seems I didn&#39;t properly understand the dynamic memory handling."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1456947897, "post_id": 35754520, "comment_id": 59186574, "body": "Sure, no problem, everybody has to learn it once. It was bewildering to me at one time also."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1456941792, "last_edit_date": 1495541269, "creation_date": 1456940887, "answer_id": 35754520, "question_id": 35754436, "link": "https://stackoverflow.com/questions/35754436/memory-allocation-in-structures/35754520#35754520", "title": "memory allocation in structures", "body": "<p>When you are allocating memory for anything, you need to analyze, closely -- \"<em>What is it that I'm allocating memory for?</em>\"</p>\n\n<p>Below, you incorrectly assume a <em>cast</em> of an arbitrary number <code>block_no</code> will adequately size the memory needed for both <code>new_layout.blocks</code> and <code>new_layout.moves</code> -- it won't:</p>\n\n<pre><code>new_layout.blocks = (struct block *)malloc(block_no);\nnew_layout.moves = (short int **)malloc(block_no);\n</code></pre>\n\n<p>What you are allocating for <code>new_layout.blocks</code> is actually space for <code>struct block *blocks;</code> (a <em>pointer-to-struct-block</em>), while you can <code>malloc (block_no * sizeof (struct block));</code> to allocate space for <code>block_no</code> struct block, it is far better to allocate based upon what you are creating (i.e. space for an array <code>new_layout.blocks</code> (again a <em>pointer-to-struct-block</em>) which needs <code>block_no * sizeof *new_layout.blocks</code> bytes of memory to hold <code>block_no</code> of type <code>struct block</code>, e.g.:</p>\n\n<pre><code>new_layout.blocks = malloc(sizeof *new_layout.blocks * block_no);\nnew_layout.moves = malloc(sizeof *new_layout.moves * block_no);\n</code></pre>\n\n<p>(simply dereferencing the object you are allocating an array of, will accurate allow you to use <code>sizeof</code> to get the object (element) size for the array. (e.g. <code>sizeof *new_layout.blocks</code>) which you multiply by how many you need (e.g. <code>sizeof *new_layout.blocks * block_no)</code></p>\n\n<p>The same applies to:</p>\n\n<pre><code>    new_layout.moves[i] = malloc(**new_layout.moves * 2);\n</code></pre>\n\n<p>(<em>note:</em> here you are allocating for 2 shorts, so you will need to dereference you <em>pointer-to-pointer-to-short</em> twice to be allocating for <code>sizeof (short)</code>)</p>\n\n<p><em>See Also:</em> <a href=\"https://stackoverflow.com/q/605845/995714\"><strong>Do I cast the result of malloc?</strong></a> for thorough explanation.</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 1, "last_activity_date": 1457072400, "last_edit_date": 1457072400, "creation_date": 1456940980, "answer_id": 35754557, "question_id": 35754436, "link": "https://stackoverflow.com/questions/35754436/memory-allocation-in-structures/35754557#35754557", "title": "memory allocation in structures", "body": "<p>For starters, this</p>\n\n<pre><code>  new_layout.blocks = (struct block *)malloc(block_no);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>  new_layout.blocks = malloc(block_no * sizeof *new_layout.blocks);\n</code></pre>\n\n<p>For the <code>moves</code> this is a bit more complicated.</p>\n\n<p>Assuming <code>short int **moves;</code> should reference a certain number of <code>int[2]</code> the declaration is not optimal and better should be:</p>\n\n<pre><code>   short int (*moves)[2]; /* Define a pointer to \n                              an array with two elements of type short int. */\n</code></pre>\n\n<p>And allocation then should look like this:</p>\n\n<pre><code>  new_layout.moves = malloc(block_no * sizeof *new_layout.moves);\n</code></pre>\n\n<p>Finally initialisation goes like this:</p>\n\n<pre><code>  for(i = 0; i &lt; block_no; i++){\n    new_layout.blocks[i] = blocks[i];\n    for(j = 0; j &lt; sizeof new_layout.moves[0]/sizeof new_layout.moves[0][0]; j++)\n        new_layout.moves[i][j] = 0;\n  }\n</code></pre>\n\n<p>You might have noticed: </p>\n\n<ul>\n<li>No memory allocation in the loop any more.</li>\n<li>The magic number <code>2</code> only appears once.</li>\n</ul>\n\n<p>:-)</p>\n"}], "owner": {"reputation": 15, "user_id": 5127235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35b7e550bded8f720eb17db9412d115e?s=128&d=identicon&r=PG&f=1", "display_name": "van", "link": "https://stackoverflow.com/users/5127235/van"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 35754520, "answer_count": 2, "score": 0, "last_activity_date": 1457072400, "creation_date": 1456940592, "last_edit_date": 1456940872, "question_id": 35754436, "link": "https://stackoverflow.com/questions/35754436/memory-allocation-in-structures", "title": "memory allocation in structures", "body": "<p>My code uses two structures, block and layout (which is a collection of an arbitrary number of blocks).</p>\n\n<pre><code>struct block{\n    char type;\n    unsigned short int loc;\n    unsigned short int size[2];\n};\nstruct layout{\n    unsigned short int no;\n    struct block *blocks;\n    short int **moves;\n};\n</code></pre>\n\n<p>I am using this function to quickly initialize (and partly fill) the structure layout, based a set of blocks:</p>\n\n<pre><code>struct layout init_layout(int block_no, struct block *blocks){\n    struct layout new_layout;\n    int i, j;\n\n    new_layout.no = (unsigned short int)block_no;\n    // the following two lines cause an memory corruption error\n    new_layout.blocks = (struct block *)malloc(block_no);\n    new_layout.moves = (short int **)malloc(block_no);\n    for(i = 0; i &lt; block_no; i++){\n        new_layout.blocks[i] = blocks[i];\n        new_layout.moves[i] = (short int *)malloc(2);\n        for(j = 0; j &lt; 2; j++)\n            new_layout.moves[i][j] = 0;\n    }\n\n    return new_layout;\n}\n</code></pre>\n\n<p>So far, I do not see, that there is something wrong with it. However, when I call function like this</p>\n\n<pre><code>int main(int argc, char** argv){\n    // just some arbitrary values for 10 blocks\n    int size[2] = {2, 2};\n    struct block *blocks = (struct block *)malloc(10);\n    for(length = 0; length &lt; 10; length++){\n        blocks[length] = init_block('R', 1, size);\n    }\n\n    struct layout puzzle;\n    puzzle = init_layout(10, blocks);\n    return 0;\n}\n</code></pre>\n\n<p>I end up with an memory corruption error, as marked by the comment in init_layout().\nWhat do I miss in my implementation?</p>\n"}, {"tags": ["c", "mpi"], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 1, "last_activity_date": 1456946996, "creation_date": 1456946996, "answer_id": 35756405, "question_id": 35754224, "link": "https://stackoverflow.com/questions/35754224/mpi-send-and-receive-deadlock/35756405#35756405", "title": "MPI send and receive deadlock", "body": "<p><em>First:</em> You violate one of the basic rules of MPI, there you must match one send with one receive.</p>\n\n<p>In your example run, you run with 5 processors (ranks) and as you can see rank 0 sends 3 messages to ranks 0 and 1 and 2 messages to the remaining ranks. However, each rank posts 13 receives. So they will naturally get stuck waiting for a messages that are never sent. Remember, that the code in the loop around <code>MPI_Recv</code> is executed by all ranks. So there will be a total of 5 * 13 receives.</p>\n\n<p>You can fix that by filtering inside the loop if it is <em>your turn</em> to receive. But it depends if you actually know beforehand how many messages the rank 0 is going to send - you may need more complicated mechanisms.</p>\n\n<p><em>Second:</em> You rank 0 sends a blocking message to itself (without posting a non-blocking receive first). That can already cause a deadlock. Remember that a <code>MPI_Send</code> is never guaranteed to return before the matching receive was posted, even though it sometimes may in practice.</p>\n\n<p><em>Third:</em> That loop <code>for(int n=0;n&lt;=p;n++)</code> runs 13 times. You most certainly didn't want that, even though it isn't correct if you run it 12 times.</p>\n\n<p><em>Finally:</em> For the specific example, the preferred solution would be to save the months inside an array and spread it around all processes using <a href=\"http://www.mpich.org/static/docs/v3.1/www3/MPI_Scatterv.html\" rel=\"nofollow\"><code>MPI_Scatterv</code></a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 5984008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4d2e9b498bc674e5bb4dc1c5f876e2?s=128&d=identicon&r=PG", "display_name": "Pri", "link": "https://stackoverflow.com/users/5984008/pri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 35756405, "answer_count": 1, "score": 1, "last_activity_date": 1456946996, "creation_date": 1456939954, "question_id": 35754224, "link": "https://stackoverflow.com/questions/35754224/mpi-send-and-receive-deadlock", "title": "MPI send and receive deadlock", "body": "<p>I'm very new to MPI and I'm just writing a basic send and receive module in which I'm sending 12 months to n number of processors and receiving each Month and printing its values. So I'm able to send the values correctly and also able to receive all of them but my program is stuck i.e It is not printing \"After program is complete\" at the last. Can you please help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"mpi.h\"\n#include&lt;math.h&gt;\n\nint main(int argc, char* argv[]){\nint  my_rank; /* rank of process */\nint  p;       /* number of processes */\n\nint tag=0;    /* tag for messages */\n\nMPI_Status status ;   /* return status for receive */\nint i;\nint pro;\n/* start up MPI */\n\nMPI_Init(&amp;argc, &amp;argv);\n\n// find out process rank\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank); \n\n//find out number of processes\nMPI_Comm_size(MPI_COMM_WORLD, &amp;p); \nif (my_rank==0)\n{\n    for(i=1;i&lt;=12;i++)\n    {\n        pro = (i-1)%p;\n        MPI_Send(&amp;i, 1, MPI_INT,pro, tag, MPI_COMM_WORLD);\n        printf(\"Value of Processor is %d Month %d\\n\",pro,i);\n    }\n}\n\n//else{\nfor(int n=0;n&lt;=p;n++)\n{\n\n    MPI_Recv(&amp;i, 1, MPI_INT, 0, tag, MPI_COMM_WORLD, &amp;status);\n    printf(\"My Month is %d and rank is %d\\n\",i,my_rank);\n\n}\n//}\nMPI_Barrier(MPI_COMM_WORLD);\nif(my_rank==0)\n{\n    printf(\"After program is complete\\n\");\n}\n/* shut down MPI */\n\nMPI_Finalize(); \nreturn 0;\n}\n\nBelow is the output:\nValue of Processor is 0 Month 1\nValue of Processor is 1 Month 2\nValue of Processor is 2 Month 3\nValue of Processor is 3 Month 4\nValue of Processor is 4 Month 5\nValue of Processor is 0 Month 6\nValue of Processor is 1 Month 7\nValue of Processor is 2 Month 8\nValue of Processor is 3 Month 9\nValue of Processor is 4 Month 10\nValue of Processor is 0 Month 11\nMy Month is 2 and rank is 1\nMy Month is 7 and rank is 1\nMy Month is 3 and rank is 2\nMy Month is 8 and rank is 2\nValue of Processor is 1 Month 12\nMy Month is 1 and rank is 0\nMy Month is 6 and rank is 0\nMy Month is 11 and rank is 0\nMy Month is 12 and rank is 1\nMy Month is 4 and rank is 3\nMy Month is 9 and rank is 3\nMy Month is 5 and rank is 4\nMy Month is 10 and rank is 4\n</code></pre>\n"}, {"tags": ["c", "gcc", "linker", "ld"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456941390, "post_id": 35754092, "comment_id": 59182547, "body": "If you swap the order or have both with newline, what do you get?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 2, "creation_date": 1456941552, "post_id": 35754092, "comment_id": 59182650, "body": "Have you tried turning off optimization?  gcc might have changed your printf to something else, like puts."}, {"owner": {"reputation": 1992, "user_id": 1486074, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3997074174cc14081602e4f3c76091a5?s=128&d=identicon&r=PG", "display_name": "awelkie", "link": "https://stackoverflow.com/users/1486074/awelkie"}, "edited": false, "score": 0, "creation_date": 1456941596, "post_id": 35754092, "comment_id": 59182677, "body": "If I swap the order in source, the order of the printing is swapped. Also, if I have both a newline and a variable (e.g. `printf(&quot;printing: %d\\n&quot;, 1);&#39;), then it is wrapped correctly"}, {"owner": {"reputation": 1992, "user_id": 1486074, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3997074174cc14081602e4f3c76091a5?s=128&d=identicon&r=PG", "display_name": "awelkie", "link": "https://stackoverflow.com/users/1486074/awelkie"}, "edited": false, "score": 0, "creation_date": 1456941659, "post_id": 35754092, "comment_id": 59182719, "body": "Compiling with -O0 gives the same result as omitting the optimization flag."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1456941662, "post_id": 35754092, "comment_id": 59182721, "body": "Look at using the -fno-builtin options"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1456941680, "post_id": 35754092, "comment_id": 59182729, "body": "like -fno-builtin-printf"}, {"owner": {"reputation": 1992, "user_id": 1486074, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3997074174cc14081602e4f3c76091a5?s=128&d=identicon&r=PG", "display_name": "awelkie", "link": "https://stackoverflow.com/users/1486074/awelkie"}, "edited": false, "score": 1, "creation_date": 1456941729, "post_id": 35754092, "comment_id": 59182756, "body": "That did it. Compiling with -fno-builtin or -fno-builtin-printf gave the expected behavior (printing WRAPPED twice)."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 3, "creation_date": 1456942954, "post_id": 35754092, "comment_id": 59183534, "body": "GCC will convert <code>printf(&quot;somestring\\n&quot;)</code> to a call to <code>puts(&quot;somestring&quot;)</code> - even with optimization disabled (<code>-O0</code>) .  The <code>-fno-builtin-printf</code> option controls this behavior."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456943539, "post_id": 35754092, "comment_id": 59183896, "body": "Suggest adding [gcc] tag"}], "answers": [{"tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": true, "score": 2, "last_activity_date": 1456942010, "creation_date": 1456942010, "answer_id": 35754867, "question_id": 35754092, "link": "https://stackoverflow.com/questions/35754092/why-does-wrapping-printf-with-ld-fail-when-theres-a-newline/35754867#35754867", "title": "Why does wrapping printf with ld fail when there&#39;s a newline?", "body": "<p>Use the -fno-builtin option to tell gcc not to mess around with some specified functions.  So, if you added -fno-builtin-printf it should work.  In general it may cause some problems that would have been caught by the compiler to be missed.  See the gcc docs for details, e.g. <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.2.2/gcc/C-Dialect-Options.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc-4.2.2/gcc/C-Dialect-Options.html</a></p>\n"}], "owner": {"reputation": 1992, "user_id": 1486074, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3997074174cc14081602e4f3c76091a5?s=128&d=identicon&r=PG", "display_name": "awelkie", "link": "https://stackoverflow.com/users/1486074/awelkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 35754867, "answer_count": 1, "score": 4, "last_activity_date": 1456943928, "creation_date": 1456939566, "last_edit_date": 1456943928, "question_id": 35754092, "link": "https://stackoverflow.com/questions/35754092/why-does-wrapping-printf-with-ld-fail-when-theres-a-newline", "title": "Why does wrapping printf with ld fail when there&#39;s a newline?", "body": "<p>I'm trying to intercept calls to <code>printf</code> using <code>ld</code>'s <code>-wrap</code> option. I have the two files:</p>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    printf(\"printing\\n\");\n    printf(\"printing\");\n}\n</code></pre>\n\n<p>printf_wrapper.c:</p>\n\n<pre><code>int __real_printf(const char *format, ...);\n\nint __wrap_printf(const char *format, ...) {\n    (void)format;\n    return __real_printf(\"WRAPPED\\n\");\n}\n</code></pre>\n\n<p>And I compile with the following command:</p>\n\n<pre><code>gcc -Wl,-wrap,printf *.c\n</code></pre>\n\n<p>When I run the resulting <code>a.out</code> binary, I get this output:</p>\n\n<pre><code>printing\nWRAPPED\n</code></pre>\n\n<p>Why does the wrapping fail if there's a newline in the string? I checked my system's <code>stdio.h</code> and printf isn't a macro. This is with gcc 5.3.0</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1456938058, "post_id": 35753494, "comment_id": 59180323, "body": "Why do you need the <code>buf_sz</code> element at all if it&#39;s just the length of the string that <code>buf</code> points to? Is it being accessed enough to justify avoiding computing it on demand? Normally if you&#39;re creating an array of static strings, you&#39;d just use <code>char *string_list[]</code> (perhaps with <code>const</code>). But if you really feel you need to, then I just initialize the strings as you show in your second example, but use <code>NULL</code> for the <code>buf_sz</code> value (temporarily). Then write a <code>for</code> loop in the code: <code>for ( i = 0; i &lt; size_of_list; i++ ) list[i].buf_sz = strlen(list[i].buf);</code>"}, {"owner": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1456938341, "post_id": 35753494, "comment_id": 59180520, "body": "the <code>foo</code> struct is part of the API I&#39;m using. I only happen to be passing in a character string. I could be passing in any data of arbitrary length."}, {"owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "edited": false, "score": 0, "creation_date": 1456938478, "post_id": 35753494, "comment_id": 59180628, "body": "Use a   <b>for</b> loop"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1456938687, "post_id": 35753494, "comment_id": 59180792, "body": "@PaulH then you could use the <code>for</code> loop I suggested. And I meant <code>0</code> not <code>NULL</code> in my comment since we&#39;re talking about a <code>size_t</code> type."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456940380, "post_id": 35753494, "comment_id": 59181868, "body": "IMO, <code>buf_sz</code> should be the <i>size</i> of the buffer needed: 1 more than the length.  <b>or</b> change field name to <code>bf_length</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "edited": false, "score": 0, "creation_date": 1456938252, "post_id": 35753593, "comment_id": 59180458, "body": "Is putting the string in a <code>#define</code> treated differently than putting it directly in the code as in the second half of my question?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "edited": false, "score": 0, "creation_date": 1456938369, "post_id": 35753593, "comment_id": 59180541, "body": "@PaulH Yes, because the size can be determined at compile time."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "edited": false, "score": 1, "creation_date": 1456938376, "post_id": 35753593, "comment_id": 59180545, "body": "@PaulH: No. But I tried to follow the DRY-principal: <a href=\"https://en.wikipedia.org/wiki/Don&#39;t_repeat_yourself\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Don&#39;t_repeat_yourself</a> However, please note, that it is not possible to use <code>strlen()</code> as an initialiser requires a compile time value. Anyways for <code>#define STR1 &quot;foo&quot;</code>  this <code>{STR1, sizeof STR1},</code> is equivalent to <code>{&quot;foo&quot;, sizeof &quot;foo&quot;}</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456939563, "post_id": 35753593, "comment_id": 59181349, "body": "Not the DVer, but your code contains a lot of redundancy."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456939705, "post_id": 35753593, "comment_id": 59181457, "body": "@Olaf: You just got my upvote for your lovely macro soup. ;-)"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 3, "last_activity_date": 1456938264, "last_edit_date": 1456938264, "creation_date": 1456938062, "answer_id": 35753593, "question_id": 35753494, "link": "https://stackoverflow.com/questions/35753494/can-i-reduce-a-long-array-initialization-to-a-short-initializer-list-in-c/35753593#35753593", "title": "can I reduce a long array initialization to a short initializer list in C?", "body": "<p>Try</p>\n\n<pre><code>#define STR1 \"The first entry\"\n\nstruct foo list[] = {\n  {STR1, sizeof STR1},\n  ...\n</code></pre>\n\n<p>Please note that the size is set to <code>strlen(STR1) + 1</code>, due to the \"string\"'s <code>0</code>-terminator. To adjust this do</p>\n\n<pre><code>struct foo list[] = {\n  {STR1, sizeof STR1 - 1},\n  ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1456940083, "post_id": 35753946, "comment_id": 59181686, "body": "@alk:; Thanks. I added a more detailed explanation why I <code>#undef</code> actually. Hopefully a reader will keep that in mind for other applications."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 5, "last_activity_date": 1456940010, "last_edit_date": 1456940010, "creation_date": 1456939093, "answer_id": 35753946, "question_id": 35753494, "link": "https://stackoverflow.com/questions/35753494/can-i-reduce-a-long-array-initialization-to-a-short-initializer-list-in-c/35753946#35753946", "title": "can I reduce a long array initialization to a short initializer list in C?", "body": "<p>How about this one:</p>\n\n<pre><code>#define S(str)  { str, sizeof(str) - 1 }\nstruct foo list[] = {\n    S(\"The first entry\"),\n    ...\n};\n#undef S\n</code></pre>\n\n<p>I <code>#undef</code>ed the macro right after the initialiser. Such short names should be used in a compact&amp;short piece of code only. If you want to use it elsewhere, use a self-explanatory name (it should include the name of the <code>struct</code> type) and remove the <code>#undef</code>.</p>\n\n<p>Note this only works with a string literal. But it works at file-level and does not introduce any run-time overhead. Thus it also works for <code>const struct list[]</code>, i.e. a constant array.</p>\n\n<p>Be cautious about the <code>sizeof(str) - 1</code>. This is the same as <code>strlen</code> yields, but the allocated memory is actually <code>sizeof(str)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "edited": false, "score": 1, "creation_date": 1456939769, "post_id": 35753950, "comment_id": 59181496, "body": "@PaulH: I disagree. It has the initialisation at two places and does not work for a <code>const</code> array. But admittedly I&#39;m biased, too :-)"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "edited": false, "score": 2, "creation_date": 1456939794, "post_id": 35753950, "comment_id": 59181509, "body": "@PaulH thanks. Olaf and alk have the solutions that handle everything at compile time rather than having code do the loading of the string sizes. It&#39;s a trade. And as Olaf says: it does break the initialization of the data up into two different places, which is fine when using <code>...</code> but maybe not so much when this is spread across a module."}, {"owner": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456939847, "post_id": 35753950, "comment_id": 59181545, "body": "@olaf. It&#39;s a tough call between yours and this. I did +1 yours."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "edited": false, "score": 1, "creation_date": 1456940177, "post_id": 35753950, "comment_id": 59181745, "body": "@PaulH: Belive me or not, but I commented not for acceptance. :-)"}], "tags": [], "owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "is_accepted": true, "score": 3, "last_activity_date": 1457018634, "last_edit_date": 1457018634, "creation_date": 1456939103, "answer_id": 35753950, "question_id": 35753494, "link": "https://stackoverflow.com/questions/35753494/can-i-reduce-a-long-array-initialization-to-a-short-initializer-list-in-c/35753950#35753950", "title": "can I reduce a long array initialization to a short initializer list in C?", "body": "<p>One alternative would be:</p>\n\n<pre><code>struct foo {\n    char* buf;\n    size_t buf_sz;\n};\n\n...\n\nstruct foo list[] = {\n    { \"The first entry\" },\n    { \"The second entry\" },\n    { \"The third entry\" }\n};\n\n...\n\nfor ( int i = 0; i &lt; sizeof(foo)/sizeof(foo[0]); i++ )\n    list[i].buf_sz = strlen(list[i].buf); // number of chars in string\n</code></pre>\n\n<p>If you need to put in the number of actual bytes consumed by the string, then you'd need a <code>+1</code> on your <code>strlen</code>. I don't know what the API requires.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456940542, "post_id": 35754359, "comment_id": 59181979, "body": "Note: A string literal could be <code>&quot;abc\\0xyz&quot;</code> and <code>strlen()</code> would report the same as for  <code>&quot;abc&quot;</code>.  Yet I suspect OP is not using such literals."}, {"owner": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "edited": false, "score": 0, "creation_date": 1456953452, "post_id": 35754359, "comment_id": 59189873, "body": "Thank you for quoting the relevant parts of the standard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456956571, "post_id": 35754359, "comment_id": 59191624, "body": "(Note: please cite the C standard. C99 is not valid standard since ca. 5 years now.) &quot;Even for automatic (block scope) foo arrays it is unspecified&quot; - Ehm ... no, it is not. An initialiser list for a <code>struct</code> (or <code>union</code>) always has to use constant-expressions. The only exception is using another object of a compatible type as initialiser. It is just a gcc extension which allows <code>auto struct</code> variable initialisers to have non-constant expressions. (btw. <code>auto</code> is not the same as &quot;block scope&quot;)."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 3, "last_activity_date": 1456940361, "creation_date": 1456940361, "answer_id": 35754359, "question_id": 35753494, "link": "https://stackoverflow.com/questions/35753494/can-i-reduce-a-long-array-initialization-to-a-short-initializer-list-in-c/35754359#35754359", "title": "can I reduce a long array initialization to a short initializer list in C?", "body": "<p>You cannot use your second definition for a static duration <code>foo</code> array, because initializer lists for static duration objects are required to be constant. Draft n1256 for C99 states in 6.7.8 Initialization \u00a74</p>\n\n<blockquote>\n  <p>4 All the expressions in an initializer for an object that has static storage duration shall be constant expressions or string literals.</p>\n</blockquote>\n\n<p>Even for automatic (block scope) <code>foo</code> arrays it is unspecified by the standard whether your second syntax is valid or undefined behaviour. Item \u00a723 of same paragraph says</p>\n\n<blockquote>\n  <p>23 The order in which any side effects occur among the initialization list expressions is\n  unspecified.133)</p>\n</blockquote>\n\n<p>and note 133 precises:</p>\n\n<blockquote>\n  <p>In particular, the evaluation order need not be the same as the order of subobject initialization</p>\n</blockquote>\n\n<p>That means that if would be acceptable for a compiler implementation to initialize the <code>buf_sz</code> members before the <code>buf</code> members which would lead to UB (even if it gives correct result without any warning on my old MSVC2008).</p>\n\n<p>For that reasons my advice is to initialize only the <code>buf</code> members, and then use a loop to set the <code>buf_sz</code> members that require the structs to be already initialized - as a side effect, if can be used the same for static or dynamic storage duration:</p>\n\n<pre><code>struct foo list[] = {\n    { \"The first entry\" },\n    { \"The second entry\" },\n    { \"The third entry\" }\n};\n</code></pre>\n\n<p>and later in code:</p>\n\n<pre><code>int i;\nfor(i=0; i&lt;sizeof(foo)/sizeof(foo[0]); i++) {\n    foo[i].buf_sz = strlen(foo[i].buf);\n}\n</code></pre>\n"}], "owner": {"reputation": 7453, "user_id": 57185, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c7c0bd3b1c62185784ed1d715352d7e1?s=128&d=identicon&r=PG", "display_name": "PaulH", "link": "https://stackoverflow.com/users/57185/paulh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 35753950, "answer_count": 4, "score": 1, "last_activity_date": 1457018634, "creation_date": 1456937790, "question_id": 35753494, "link": "https://stackoverflow.com/questions/35753494/can-i-reduce-a-long-array-initialization-to-a-short-initializer-list-in-c", "title": "can I reduce a long array initialization to a short initializer list in C?", "body": "<p>I have some C99 code that looks like this:</p>\n\n<pre><code>struct foo {\n    char* buf;\n    size_t buf_sz;\n};\n\nstruct foo list[3];\nlist[0].buf = \"The first entry\";\nlist[0].buf_sz = strlen(list[0].buf);\nlist[1].buf = \"The second entry\";\nlist[1].buf_sz = strlen(list[1].buf);\nlist[2].buf = \"The third entry\";\nlist[2].buf_sz = strlen(list[2].buf);\n</code></pre>\n\n<p>Is there a shorthand way of writing this in an initializer list? Is something like this safe?</p>\n\n<pre><code>struct foo list[] = {\n    { \"The first entry\", strlen(list[0].buf) },\n    { \"The second entry\", strlen(list[1].buf) },\n    { \"The third entry\", strlen(list[2].buf) }\n};\n</code></pre>\n"}, {"tags": ["c", "algorithm", "math", "gmp"], "comments": [{"owner": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1456943682, "post_id": 35753405, "comment_id": 59183984, "body": "The second variant lacks the x^n term."}, {"owner": {"reputation": 243, "user_id": 4607234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c9c04d0047153813380f02a6ff737ff5?s=128&d=identicon&r=PG&f=1", "display_name": "magrif", "link": "https://stackoverflow.com/users/4607234/magrif"}, "reply_to_user": {"reputation": 20428, "user_id": 1847592, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OvYt2.png?s=128&g=1", "display_name": "Egor Skriptunoff", "link": "https://stackoverflow.com/users/1847592/egor-skriptunoff"}, "edited": false, "score": 0, "creation_date": 1457095271, "post_id": 35753405, "comment_id": 59262121, "body": "Main question: why use <a href=\"https://en.wikipedia.org/wiki/Monic_polynomial\" rel=\"nofollow noreferrer\">Monic polynomial</a> in the <a href=\"https://www.math10.com/en/algebra/horner.html\" rel=\"nofollow noreferrer\">Horner&#39;s rule</a> in this case (<a href=\"https://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing\" rel=\"nofollow noreferrer\">Shamir&#39;s Secret Sharing</a>)?"}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 4607234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c9c04d0047153813380f02a6ff737ff5?s=128&d=identicon&r=PG&f=1", "display_name": "magrif", "link": "https://stackoverflow.com/users/4607234/magrif"}, "edited": false, "score": 0, "creation_date": 1456947678, "post_id": 35755701, "comment_id": 59186463, "body": "&quot;Because the highest-order coefficient is 1 this multiplication is then completely removed.&quot; Why then in the formula above we need &#39;x^n&#39;, if it removed? And as with coefficient 1 it is removed? Is something I can not understand ... n=3: y=((1x+C[2])x+C[1])x+C[0]=x^3+C[2]x^2+C[1]x+C[0]. What is happening with &#39;x^3&#39;? Thanks."}, {"owner": {"reputation": 243, "user_id": 4607234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c9c04d0047153813380f02a6ff737ff5?s=128&d=identicon&r=PG&f=1", "display_name": "magrif", "link": "https://stackoverflow.com/users/4607234/magrif"}, "edited": false, "score": 0, "creation_date": 1456949366, "post_id": 35755701, "comment_id": 59187476, "body": "yes, understood: mpz_set_ui(y,1) instead mpz_set(y,x)  I meant: <a href=\"https://www.math10.com/en/algebra/horner.html\" rel=\"nofollow noreferrer\">polynomial is expressed</a> as: f(x) = a0 + a1x + a2x2 + ... + akxk = sum a[k]x^k. Whence appeared x^n? n=3: y=((x+C[2])x+C[1])x+C[0]=**x^3**+C[2]x^2+C[1]x+C[0]. x=2: **8**+4C[2]+2C[1]+C[0]  not the same 4C[2]+2C[1]+C[0]."}, {"owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "reply_to_user": {"reputation": 243, "user_id": 4607234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c9c04d0047153813380f02a6ff737ff5?s=128&d=identicon&r=PG&f=1", "display_name": "magrif", "link": "https://stackoverflow.com/users/4607234/magrif"}, "edited": false, "score": 0, "creation_date": 1456950008, "post_id": 35755701, "comment_id": 59187878, "body": "Your expression works in the general case. In this specific implementation, you are looking at a function that returns a polynomial where a[n] = 1, always."}, {"owner": {"reputation": 243, "user_id": 4607234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c9c04d0047153813380f02a6ff737ff5?s=128&d=identicon&r=PG&f=1", "display_name": "magrif", "link": "https://stackoverflow.com/users/4607234/magrif"}, "edited": false, "score": 0, "creation_date": 1456952945, "post_id": 35755701, "comment_id": 59189584, "body": "Sorry, I still can not understand why In this implementation x^n without coefficient c[n], i.e. x^n + sum c[i]x^i, 0..n-1 instead of sum c[i]x^i 0..n."}, {"owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "reply_to_user": {"reputation": 243, "user_id": 4607234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c9c04d0047153813380f02a6ff737ff5?s=128&d=identicon&r=PG&f=1", "display_name": "magrif", "link": "https://stackoverflow.com/users/4607234/magrif"}, "edited": false, "score": 0, "creation_date": 1456953622, "post_id": 35755701, "comment_id": 59189963, "body": "There is no why if you look at the function, it is what the function does. Why was it written that way? Because the programmer needed <a href=\"https://en.wikipedia.org/wiki/Monic_polynomial\" rel=\"nofollow noreferrer\">Monic Polynomials</a>. Why does he need that? Well, you&#39;ll have to ask him or look at the rest of the algorithm. But now, you know what the function does exactly."}], "tags": [], "owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "is_accepted": true, "score": 1, "last_activity_date": 1456953762, "last_edit_date": 1456953762, "creation_date": 1456944683, "answer_id": 35755701, "question_id": 35753405, "link": "https://stackoverflow.com/questions/35753405/i-cant-understand-this-horners-rule-implementation-in-extended-fields-gfpn/35755701#35755701", "title": "I can&#39;t understand this Horner&#39;s rule implementation in extended fields GF(p^n)", "body": "<p>Translating this <code>horner</code> function with normal addition and multiplication symbols, we get:</p>\n\n<pre><code>y = x;                     // mpz_set(y, x);\nfor(i = n - 1; i; i--) {\n    y = y + coeff[i];      // field_add(y, y, coeff[i]);\n    y = y * x              // field_mult(y, y, x);\n}\ny = y + coeff[0]           // field_add(y, y, coeff[0]);\n</code></pre>\n\n<p>Hence this computes the following:<br />\n<a href=\"https://i.stack.imgur.com/SwatY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SwatY.png\" alt=\"Horner&#39;s algorithm computation of degree n monic polynomial with coefficients (cn-1, .., c0)\"></a></p>\n\n<p>You can see it does not compute any polynomial, but it is a variant of Horner's algorithm to compute a <a href=\"https://en.wikipedia.org/wiki/Monic_polynomial\" rel=\"nofollow noreferrer\">monic polynomial</a>.</p>\n\n<p>Now what you propose:</p>\n\n<pre><code>y = coeff[n-1];               // mpz_set(y,coeff[n-1]);\nfor(i = n - 2; i!=-1; i--) {\n    y = y * x;                // field_mult(y, y, x);\n    y = y + coeff[i];         // field_add(y,y,coeff[i]);\n}\n</code></pre>\n\n<p>Thus you compute the following:<br />\n<a href=\"https://i.stack.imgur.com/G3Our.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G3Our.png\" alt=\"Horner&#39;s algorithm to compute degree n-1 polynomial with coefficients (cn-1, .., 0)\"></a><br />\nYou can see the highest-order term is missing.</p>\n\n<p>If you want to have all the operations inside the body of the loop, you can.\nAfter all, it's only two ways of decomposing a series of alternating instructions differently:</p>\n\n<pre><code>operation    value of y                                    loop iteration\n                                                 add-mult loop      mult-add loop\n                x                               initialization         n-1\nadd       x + coeff[n-1]                             n-1               n-1\nmult     (x + coeff[n-1]) * x                        n-1               n-2\nadd      (x + coeff[n-1]) * x + coeff[n-2]           n-2               n-2\nmult    ((x + coeff[n-1]) * x + coeff[n-2]) * x      n-2               n-3\n          ...etc...\n</code></pre>\n\n<p>But you need to explicitly initialize <code>y</code> to the value <code>1</code> (which is the implicit <code>coeff[n]</code>) so that you can start by multiplying by <code>x</code> and get the correct highest-order term.</p>\n\n<pre><code>y = 1;                        // mpz_set(y,1);\nfor(i = n - 1; i!=-1; i--) {  // NOTICE n - 1 NOT n - 2\n    y = y * x;                // field_mult(y, y, x);\n    y = y + coeff[i];         // field_add(y,y,coeff[i]);\n}\n</code></pre>\n\n<p>You can count that you now perform one more multiplication, and it is multiplying <code>1 * x</code>. On a finite field this is typically done with log and antilog tables, so you might as well avoid such a useless multiplication, especially if you're going to evaluate polynomials a lot.</p>\n\n<p><strong>TL;DR: This way of writing Horner's algorithm puts the last addition and the first multiplication outside of the loop's body. Because the highest-order coefficient is <code>1</code> this multiplication is then completely removed.</strong></p>\n\n<p>To clarify: the highest-order term is kept, but is then <code>x^n</code> instead of being <code>1 * x^n</code>. You spare one multiplication for the exact same result.</p>\n"}], "owner": {"reputation": 243, "user_id": 4607234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c9c04d0047153813380f02a6ff737ff5?s=128&d=identicon&r=PG&f=1", "display_name": "magrif", "link": "https://stackoverflow.com/users/4607234/magrif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 35755701, "answer_count": 1, "score": 1, "last_activity_date": 1456953762, "creation_date": 1456937564, "last_edit_date": 1456945337, "question_id": 35753405, "link": "https://stackoverflow.com/questions/35753405/i-cant-understand-this-horners-rule-implementation-in-extended-fields-gfpn", "title": "I can&#39;t understand this Horner&#39;s rule implementation in extended fields GF(p^n)", "body": "<p>I'm trying to understand the implementation of the Shamir's Secret Sharing Scheme from <a href=\"https://github.com/aseidlitz/ssss-win32/blob/master/src/ssss_rk/ssss.c\" rel=\"nofollow\">this (old) implementation on github</a>, and I'm struggling with Horner's rule in extended fields GF(p^n):</p>\n\n<pre><code>void horner(int n, mpz_t y, const mpz_t x, const mpz_t coeff[])\n{\n  int i;\n  mpz_set(y, x);\n  for(i = n - 1; i; i--) {\n    field_add(y, y, coeff[i]);\n    field_mult(y, y, x);\n  }\n  field_add(y, y, coeff[0]);\n}\n</code></pre>\n\n<p>Why does <code>add</code> come first and only then <code>mult</code>? What's the algorithm? Why not something like:</p>\n\n<pre><code>  mpz_set(y,coeff[n-1]);\n  for(i = n - 2; i!=-1; i--) {\n    field_mult(y, y, x);\n    field_add(y,y,coeff[i]);\n  }\n</code></pre>\n"}, {"tags": ["c", "recursion", "matrix"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456937345, "post_id": 35753296, "comment_id": 59179874, "body": "Calling <code>maxInRow</code> twice is quite inefficient. Use a variable to receive the result."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456937403, "post_id": 35753296, "comment_id": 59179913, "body": "@PaulOgilvie I&#39;ve edited."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456937434, "post_id": 35753296, "comment_id": 59179935, "body": "You&#39;re still doing it. I edited your code."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456937550, "post_id": 35753296, "comment_id": 59180002, "body": "@PaulOgilvie Well, that is how I know how to do it. Got a better idea?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456937742, "post_id": 35753296, "comment_id": 59180104, "body": "You are only checking the first row, not the entire matrix."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456937761, "post_id": 35753296, "comment_id": 59180119, "body": "@PaulOgilvie I want to check a certain row only. suddenly the edit you made, made it work. and its kinda weird to me that it works :/ my logic was correct."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1456937809, "post_id": 35753296, "comment_id": 59180154, "body": "Then adapt your title: the title wants to search the whole matrix."}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456938150, "post_id": 35753296, "comment_id": 59180396, "body": "@PaulOgilvie Okay thanks, I understood now with the debugger how it all works."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 4, "creation_date": 1456938391, "post_id": 35753296, "comment_id": 59180556, "body": "@PaulOgilvie: I rolled back to the previous version. Your edit did not just correct minor flaws. If you have an answer, write one. We are not supposed to edit the question to answer."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 1, "last_activity_date": 1456940649, "creation_date": 1456940649, "answer_id": 35754458, "question_id": 35753296, "link": "https://stackoverflow.com/questions/35753296/find-the-maximum-value-in-a-2d-matrix-recursively/35754458#35754458", "title": "Find the maximum value in a 2D matrix (recursively)", "body": "<p>You're doing the recursion termination case in the wrong order.  You're also do two recursions instead of one.  Simplifying your code:</p>\n\n<pre><code>int maxInRow(int mtx[][N], int row, int cols)\n{\n    if (cols == 0) return mtx[row][cols];\n\n    int possibleMax = mtx[row][cols - 1];\n\n    int sublistMax = maxInRow(mtx, row, cols - 1);\n\n    int max = (sublistMax &gt; possibleMax) ? sublistMax : possibleMax;\n\n    return max;\n}\n\nint main()\n{\n    int mtx[][N] = {{8,1,2,6,7}, {1,8,3,9,6}, {4,5,-5,1,8}, {1,2,3,4,5}, {5,4,3,5,3}};\n\n    printf(\"%d\\n\", maxInRow(mtx, 1, N));\n}\n</code></pre>\n"}], "owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "accepted_answer_id": 35754458, "answer_count": 1, "score": 0, "last_activity_date": 1545542355, "creation_date": 1456937265, "last_edit_date": 1545542355, "question_id": 35753296, "link": "https://stackoverflow.com/questions/35753296/find-the-maximum-value-in-a-2d-matrix-recursively", "title": "Find the maximum value in a 2D matrix (recursively)", "body": "<p>I'm struggling to find the error in my code, I'm trying to find the maximum value in my 2D matrix, in a certain row. Can you help me locate where my logic fails?</p>\n\n<pre><code>int maxInRowmaxInRow(int mtx[][N], int row, int cols);\nint main()\n{\n    int mtx[][N] = { {8,1,2,6,7},{1,8,3,9,6},{4,5,-5,1,8},{1,2,3,4,5},{5,4,3,5,3} };\n    printf(\"%d\", maxInRow(mtx, 1,N));\n    getch();\n}\n\nint maxInRow(int mtx[][N], int row, int cols)\n{\n    int possibleMax = maxInRow(mtx, row, cols - 1);\n    if (cols == 0) return mtx[row][cols];\n\n    int max = mtx[row][cols - 1];\n    max = (max &lt; maxInRow(mtx, row, cols - 1)) ? possibleMax : max;\n    return max;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 0, "creation_date": 1456937517, "post_id": 35753194, "comment_id": 59179985, "body": "You can not use a regex like expression e.g. <code>&quot;%[^\\n]&quot;</code> within your <code>scanf</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 1, "creation_date": 1456937540, "post_id": 35753194, "comment_id": 59180001, "body": "@cwschmidt Yes. You can."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1456937967, "post_id": 35753194, "comment_id": 59180253, "body": "Your code should work as expected. Are you sure you can reproduce this? BTW, your input consist of 7 characters, not 8."}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456937991, "post_id": 35753194, "comment_id": 59180272, "body": "@Cool Guy AFAIK it only has support to <a href=\"http://www.regular-expressions.info/charclass.html\" rel=\"nofollow noreferrer\">character classes</a> not complete regex expressions."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 1, "creation_date": 1456938078, "post_id": 35753194, "comment_id": 59180337, "body": "@cwschmidt Yes. There is no complete regex support, but <code>%[^\\n]</code> is valid."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1456938794, "post_id": 35753194, "comment_id": 59180859, "body": "Your program works fine for me (after I fixed the printf format to <code>&quot;%zd\\n&quot;</code>). This suggests that you either mistyped the program or your input is not what you think it is."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456939168, "post_id": 35753194, "comment_id": 59181100, "body": "Is the above the <i>true</i> code in which you are entering <code>2 spaces &quot;aa&quot; 2 spaces  &quot;bb&quot;</code>?"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456939311, "post_id": 35753194, "comment_id": 59181196, "body": "@chux yes that is what i&#39;m entering"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456939454, "post_id": 35753194, "comment_id": 59181284, "body": "@ch3rub7 Not asking about what you are entering, asking if the code posted here is <b>exactly</b> the same as the code you are compiling and running? as in <code>#include &lt;stdio.h&gt; ... printf(&quot;%d&quot;,strlen(a));     return 0;      }</code>"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456939570, "post_id": 35753194, "comment_id": 59181357, "body": "@rici Isn&#39;t the right format specifier <code>%zu</code>?"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456939638, "post_id": 35753194, "comment_id": 59181408, "body": "yes.. <code>scanf(&quot; %[^\\n]&quot;,a); printf(&quot;%d&quot;,strlen(a)); </code> this is what I&#39;ve written in my code"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456939693, "post_id": 35753194, "comment_id": 59181445, "body": "@ch3rub7 Remove the space before <code>%[^\\n]</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456939718, "post_id": 35753194, "comment_id": 59181462, "body": "<code>scanf(&quot; %[^\\n]&quot;,a);</code> (from your comment)  is not the same as the posted code of <code>scanf(&quot;%[^\\n]&quot;,a);</code>!  (space vs no-space)"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456939836, "post_id": 35753194, "comment_id": 59181541, "body": "@chux oh yes space exists... sorry about that"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456940130, "post_id": 35753194, "comment_id": 59181718, "body": "@CoolGuy: True. Anyway, voting to close as a typo (and consequently a waste of everyone&#39;s time.)"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456940265, "post_id": 35753194, "comment_id": 59181801, "body": "@rici but the problem still persists"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456940732, "post_id": 35753194, "comment_id": 59182094, "body": "@CoolGuy after scanning an integer I follow the same code but now I get 6... I think problem starts then"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1456940743, "post_id": 35753194, "comment_id": 59182105, "body": "@ch3rub7: The problem is the fact that you ask <code>scanf</code> to skip leading spaces, and then you complain when it does that."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456940817, "post_id": 35753194, "comment_id": 59182157, "body": "@rici now I get it...but if I avoid space... garbage gets printed"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456940972, "post_id": 35753194, "comment_id": 59182260, "body": "@ch3rub7: That&#39;s a completely different question. You seem to want to use SO as an interactive debugging session, where you post random buggy code, attract answers which may or may not help you, and then modify the question to present completely new bugs, rendering the previous answers irrelevant. That&#39;s not what SO is about (imho) and it is not the way to learn how to debug, either. Start by reading <code>man scanf</code> and thinking through what happens with each call."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456941007, "post_id": 35753194, "comment_id": 59182286, "body": "ah! thanks @rici figured it out... I&#39;ve used get char to take in &#39;\\n&#39; and now code works fine .... thank you all"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456941530, "post_id": 35753194, "comment_id": 59182635, "body": "@rici sorry about it! I&#39;ve thought about not posting and I know it&#39;s my fault to not to know the workings of functions better.... surely next time I&#39;ll not post such questions.. anyway thanks for your enlightment"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1456983915, "post_id": 35753194, "comment_id": 59200710, "body": "@rici Agreed. I&#39;ve also voted to close. But why does <a href=\"http://rextester.com/ESPLN5741\" rel=\"nofollow noreferrer\"><code>%zd</code> give out no warning</a>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456984993, "post_id": 35753194, "comment_id": 59201112, "body": "@CoolGuy: Excellent question. With gcc-5, you can supply <code>-Wformat-signedness</code> to get that warning, but I don&#39;t see a way to get it with gcc-4.9. I suppose gcc knows that it&#39;s not a fatal error."}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456937602, "post_id": 35753354, "comment_id": 59180033, "body": "@CoolGuy sorry about that, mixed up my languages. fixed for c."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456937866, "post_id": 35753354, "comment_id": 59180186, "body": "Why not use <code>strlen</code> directly?"}, {"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456938007, "post_id": 35753354, "comment_id": 59180287, "body": "Because if you don&#39;t deference it you are getting length of an address i believe."}, {"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456938309, "post_id": 35753354, "comment_id": 59180497, "body": "Oh sorry I missunderstood, thought you were asking about why the <code>char*</code>. You mean why not just call <code>strlen(a)</code>? And there may be a good reason for it but that&#39;s just how i wrote the code."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456938458, "post_id": 35753354, "comment_id": 59180616, "body": "Nope bro it didn&#39;t work I&#39;m using eclipse Ide... Is it any issue with my ide?"}, {"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 0, "creation_date": 1456938813, "post_id": 35753354, "comment_id": 59180871, "body": "I think it might be. I tried running your code as given on Ideoone.com and given the string &quot;  aa  bb&quot; 2 spaces before a and 2 before b returns the desired 8. My code works fine there also."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456939033, "post_id": 35753354, "comment_id": 59181016, "body": "ya even I tried... and even I tried running exe file generated but it too gives 6"}, {"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 0, "creation_date": 1456939266, "post_id": 35753354, "comment_id": 59181169, "body": "That&#39;s odd. I tried running it on the online compiler at <a href=\"https://www.remoteinterview.io/online-c-compiler\" rel=\"nofollow noreferrer\">remoteinterview.io/online-c-compiler</a> and once again it gives 8."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456939376, "post_id": 35753354, "comment_id": 59181240, "body": "actually it&#39;s a part of a larger program should I paste it in question?"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456940667, "post_id": 35753354, "comment_id": 59182044, "body": "ya I&#39;ve and... now the problem is even apparent on ideone.... i&#39;m scanning an int before string"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456941591, "post_id": 35753354, "comment_id": 59182675, "body": "thanks man... I&#39;ve figured my mistake... silly one. nothing to bother about... anyway thanks once again"}, {"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 1, "creation_date": 1456942073, "post_id": 35753354, "comment_id": 59182975, "body": "Yea I noticed. Glad you were able to solve the issue."}], "tags": [], "owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "is_accepted": false, "score": 1, "last_activity_date": 1456937586, "last_edit_date": 1456937586, "creation_date": 1456937412, "answer_id": 35753354, "question_id": 35753194, "link": "https://stackoverflow.com/questions/35753194/how-to-scan-initial-spaces-in-c/35753354#35753354", "title": "How to scan initial spaces in C", "body": "<p>The issue i believe is that you need to be getting length from a Pointer to the array not the array itself. \nTry this, this code worked for me. </p>\n\n<pre><code>int ArrayLength(char* stringArray) \n{\n   return strlen(stringArray);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456939231, "post_id": 35753847, "comment_id": 59181152, "body": "ya even when I tried on ideone... it gives me 8, but when I run it on my eclipse IDE it gives 6"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456939315, "post_id": 35753847, "comment_id": 59181203, "body": "@ch3rub7 &quot;when I run it&quot;, is the &quot;it&quot; the posted code or something close it &quot;it&quot;?"}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 1, "creation_date": 1456939427, "post_id": 35753847, "comment_id": 59181272, "body": "actually it&#39;s a part of a larger program that I&#39;ve written should I paste it in question?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 1, "creation_date": 1456939637, "post_id": 35753847, "comment_id": 59181406, "body": "@ch3rub7 I am certain that other parts of your code are consuming the leading spaces.  Report the code that involved the previous input."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1456940206, "post_id": 35753847, "comment_id": 59181761, "body": "I&#39;ve added simply what happens in the code... first I scan an integer and then the string"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1456939899, "last_edit_date": 1456939899, "creation_date": 1456938772, "answer_id": 35753847, "question_id": 35753194, "link": "https://stackoverflow.com/questions/35753194/how-to-scan-initial-spaces-in-c/35753847#35753847", "title": "How to scan initial spaces in C", "body": "<p>OP code <em>should</em> work as posted.  </p>\n\n<p>OP comments true code is using <code>scanf(\" %[^\\n]\",a);</code> which fully explains the problem: the space in the format is consuming leading white-space.</p>\n\n<p>To address other issues with <code>scanf()</code>, see following.</p>\n\n<hr>\n\n<p><code>fgets()</code> is the right tool.</p>\n\n<p>Yet if OP insists on <code>scanf()</code></p>\n\n<blockquote>\n  <p>how can I scan spaces using scanf but how to scan the initial spaces entered in a string?</p>\n</blockquote>\n\n<pre><code>char buf[100];\n\n// Scan up to 99 non\\n characters and form a string in `buf`\nswitch (scanf(\"%99[^\\n]\", buf)) {\n  case 0: buf[0] = '\\0'; break;   // line begins with `'\\n`\n\n  //  May want to check if strlen(buf)==99 to detect a long line\n  case 1: break;                  // Success.\n\n  case EOF: buf[0] = '\\0'; break; // stdin is closed.\n}\nfgetc(stdin); // throw away the \\n still in stdin.\n</code></pre>\n"}], "owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 35753847, "answer_count": 2, "score": 1, "last_activity_date": 1456941296, "creation_date": 1456936986, "last_edit_date": 1456940522, "question_id": 35753194, "link": "https://stackoverflow.com/questions/35753194/how-to-scan-initial-spaces-in-c", "title": "How to scan initial spaces in C", "body": "<p>I have a typical question it's not that how can I scan spaces using <strong>scanf</strong> but how to scan the initial spaces entered in a string</p>\n\n<p>This is what I've done:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n    int main()\n    {\n       int n;\n       char a[10];\n       scanf(\"%d\",&amp;n);\n       scanf(\" %[^\\n]\",a);\n       printf(\"%d\",strlen(a));\n       return 0;\n     }\n</code></pre>\n\n<p>and when I run the program with following input:</p>\n\n<blockquote>\n<pre><code>   aa bb//note there are two spaces before initial a\n</code></pre>\n</blockquote>\n\n<p>and the output is <code>6</code> but there are 8 characters i.e, 2 <code>spaces</code> followed by 2 <code>a</code>'s followed by 2 <code>spaces</code> and then lastly 2 <code>b</code>'s </p>\n\n<p>I eve tried an own function.. but alas! the length is <code>6</code>. Here's my function:</p>\n\n<pre><code>int len(char a[101])\n{\n    int i;\n    for(i=0;a[i];i++);\n    return i;\n}\n</code></pre>\n\n<p><strong>What I think is that the initial 2 spaces are being ignored...or I might be wrong. It'd be great if someone could explain why the length of string is <code>6</code> and how can I make it <code>8</code> or accept all the <code>8</code> characters I mentioned above.</strong></p>\n\n<p>EDIT: this is my actual code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int i,N,j,k;\n    char **ans,s[101];\n\n    scanf(\"%d\",&amp;N);\n    ans=(char **)calloc(N,sizeof(char*));\n\n    for(j=0,i=0;i&lt;N;i++)\n    {\n        scanf(\" %[^\\n]\",s);\n        printf(\"%d\",strlen(s));\n        ans[i]=(char*)calloc(strlen(s),sizeof(char));\n        for(k=0,j=((strlen(s)/2)-1);j&gt;=0;j--,k++)\n        {\n            ans[i][k]=s[j];\n        }\n        for(j=strlen(s)-1;j&gt;=strlen(s)/2;k++,j--)\n        {\n            ans[i][k]=s[j];\n        }\n    }\n\n    for(i=0;i&lt;N;i++)\n    {\n        printf(\"%s\\n\",ans[i]);\n    }\n\n    scanf(\"%d\",&amp;i);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1456937124, "post_id": 35753145, "comment_id": 59179701, "body": "Don&#39;t malloc <code>sizeof(char *)</code> for <code>words[i]</code>: malloc <code>sizeof(char)</code>, which is always 1."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1456937248, "post_id": 35753145, "comment_id": 59179802, "body": "A linked list will be &quot;absolutely dynamic&quot;. An array is bound by its upper bound, unless you <code>realloc</code>."}, {"owner": {"reputation": 2903, "user_id": 5597017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d7810b63d43831af264555f0ab6abfa?s=128&d=identicon&r=PG&f=1", "display_name": "Jax-p", "link": "https://stackoverflow.com/users/5597017/jax-p"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456937762, "post_id": 35753145, "comment_id": 59180122, "body": "@PaulOgilvie Thank you, for tips. I didn&#39;t know about realloc. I think the linked list would be the best solution for this."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456943584, "post_id": 35753145, "comment_id": 59183931, "body": "Detail: <code>LENGHT</code> --&gt; <code>LENGTH</code>."}, {"owner": {"reputation": 2903, "user_id": 5597017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d7810b63d43831af264555f0ab6abfa?s=128&d=identicon&r=PG&f=1", "display_name": "Jax-p", "link": "https://stackoverflow.com/users/5597017/jax-p"}, "edited": false, "score": 0, "creation_date": 1471467805, "post_id": 35753145, "comment_id": 65364095, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2903, "user_id": 5597017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d7810b63d43831af264555f0ab6abfa?s=128&d=identicon&r=PG&f=1", "display_name": "Jax-p", "link": "https://stackoverflow.com/users/5597017/jax-p"}, "edited": false, "score": 0, "creation_date": 1456937594, "post_id": 35753351, "comment_id": 59180026, "body": "VS2015 doesn&#39;t let me compile &quot; malloc ( MAX_WORDS * sizeof( char* )) &quot; but &quot;(char*)  malloc ( MAX_WORDS * sizeof( char* )) &quot; seems ok. Even it is still now absolutly dynamical, it is limited by the &quot;max&quot; constant..."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2903, "user_id": 5597017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d7810b63d43831af264555f0ab6abfa?s=128&d=identicon&r=PG&f=1", "display_name": "Jax-p", "link": "https://stackoverflow.com/users/5597017/jax-p"}, "edited": false, "score": 3, "creation_date": 1456937856, "post_id": 35753351, "comment_id": 59180182, "body": "If you are compiling the file as a C++ program, then you need the explicit cast."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1456937403, "last_edit_date": 1495541696, "creation_date": 1456937403, "answer_id": 35753351, "question_id": 35753145, "link": "https://stackoverflow.com/questions/35753145/the-best-way-to-make-dynamic-structure-for-strings/35753351#35753351", "title": "the best way to make dynamic structure for strings?", "body": "<p>See <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a></p>\n\n<pre><code>words = ( char* ) malloc ( MAX_LENGHT_OF_WORD + 1 * sizeof( char* ));\n                           ^^^^^ Does not seem right.\n        ^^^^^^^^^ Definitely wrong since type of words is char**.\n</code></pre>\n\n<p>You can use</p>\n\n<pre><code>words = malloc ( MAX_WORDS * sizeof( char* ));\n</code></pre>\n\n<p>A better and more idiomatic method would be to use:</p>\n\n<pre><code>words = malloc ( MAX_WORDS * sizeof(*words));\n</code></pre>\n\n<p>And then...</p>\n\n<pre><code>for ( i = 0; i &lt; MAX_WORDS; i++ ) {\n    words[i] = ( char* ) malloc ( MAX_LENGHT_OF_WORD + 1 *sizeof( char* ));\n                                                          ^^^^ Wrong\n}\n</code></pre>\n\n<p>You need <code>sizeof(char)</code> there. You can use</p>\n\n<pre><code>    words[i] = malloc ( MAX_LENGHT_OF_WORD + 1 * sizeof(*words[i]));\n</code></pre>\n\n<p>Since <code>sizeof(char)</code> is <code>1</code>, you can simplify that to:</p>\n\n<pre><code>    words[i] = malloc ( MAX_LENGHT_OF_WORD + 1);\n</code></pre>\n"}], "owner": {"reputation": 2903, "user_id": 5597017, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d7810b63d43831af264555f0ab6abfa?s=128&d=identicon&r=PG&f=1", "display_name": "Jax-p", "link": "https://stackoverflow.com/users/5597017/jax-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456937403, "creation_date": 1456936865, "question_id": 35753145, "link": "https://stackoverflow.com/questions/35753145/the-best-way-to-make-dynamic-structure-for-strings", "title": "the best way to make dynamic structure for strings?", "body": "<p>I would like to ask how should I make absolutly dynamic strcuture of strings. Actualy I am using dynamic array with allocation of \"MAX\" values</p>\n\n<p>Example:</p>\n\n<pre><code>const enum { MAX_WORDS = 20, MAX_LENGHT_OF_WORD = 50 }\n...\nchar **words\nwords = ( char* ) malloc ( MAX_LENGHT_OF_WORD + 1 * sizeof( char* ));\nfor ( i = 0; i &lt; MAX_WORDS; i++ ) {\n    words[i] = ( char* ) malloc ( MAX_LENGHT_OF_WORD + 1 *sizeof( char* ));\n}\n</code></pre>\n\n<p>Should I do it without the constats somehow? Maybe with Linked Lists? </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "string", "sqlite", "printf"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456936752, "post_id": 35753019, "comment_id": 59179430, "body": "C does not support <i>methods</i>, only <i>functions</i>."}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1456936904, "post_id": 35753066, "comment_id": 59179527, "body": "Sourav, since <code>mat</code> is a string and the database field also a string, you must use the single quote to surround the field in the SQL query. I added that to your solution as an edit."}, {"owner": {"reputation": 61, "user_id": 5027790, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7d1fe0e286fadc739c2373c88a728892?s=128&d=identicon&r=PG&f=1", "display_name": "apeiron", "link": "https://stackoverflow.com/users/5027790/apeiron"}, "edited": false, "score": 0, "creation_date": 1456942568, "post_id": 35753066, "comment_id": 59183284, "body": "Thanks, it worked, but the second parameter of <code>sqlite3_exec</code> should be <code>argument</code> instead of <code>mat</code>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1456946195, "last_edit_date": 1456946195, "creation_date": 1456936644, "answer_id": 35753066, "question_id": 35753019, "link": "https://stackoverflow.com/questions/35753019/execute-sqlite-statement-with-a-parameter/35753066#35753066", "title": "Execute SQLite statement with a parameter", "body": "<p>You cannot do this directly. You need to first take an array, populate the required string and <em>print</em> it into the array using <a href=\"http://linux.die.net/man/3/sprintf\" rel=\"nofollow\"><code>sprintf()/snprintf()</code></a> and use the array as the argument to <code>sqlite3_exec()</code>.</p>\n\n<p>Something like</p>\n\n<pre><code>char argument[128] = {0};   //make sure the final array fits in here\nsprintf(argument, \"delete from alumnos WHERE matricula='%s'\", mat);\nerror = sqlite3_exec(conexion, argument, 0, 0, &amp;msjError);\n</code></pre>\n\n<p>should do the job.</p>\n"}], "owner": {"reputation": 61, "user_id": 5027790, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7d1fe0e286fadc739c2373c88a728892?s=128&d=identicon&r=PG&f=1", "display_name": "apeiron", "link": "https://stackoverflow.com/users/5027790/apeiron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 35753066, "answer_count": 1, "score": 1, "last_activity_date": 1456946195, "creation_date": 1456936520, "last_edit_date": 1456937172, "question_id": 35753019, "link": "https://stackoverflow.com/questions/35753019/execute-sqlite-statement-with-a-parameter", "title": "Execute SQLite statement with a parameter", "body": "<p>I have this method in C, where I delete a row from a table. I want to pass a parameter which is the primary key and then delete that row.</p>\n\n<p>Here is my method:</p>\n\n<pre><code>void eliminarAlumno(char *mat) {\n    abrirBD();\n    error = sqlite3_exec(conexion, \"delete from alumnos WHERE matricula='&lt;mat&gt;'\", 0, 0, &amp;msjError);\n    comprobarError(error, msjError);\n    cerrarBD();\n}\n</code></pre>\n\n<p>Where <code>&lt;mat&gt;</code> is the parameter. How can I do this?</p>\n"}, {"tags": ["c", "bash", "shell"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1456937421, "post_id": 35752909, "comment_id": 59179927, "body": "Don&#39;t hard-code terminal escapes in strings, until you know what terminal type you are writing to.  Not all the world is a VT100!  I suggest you use <code>tput</code> or similar - that&#39;s what it&#39;s for."}, {"owner": {"reputation": 75, "user_id": 2824218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/725083bebbade5fde129d54f8dcf3bce?s=128&d=identicon&r=PG", "display_name": "Alex Mikhaelson", "link": "https://stackoverflow.com/users/2824218/alex-mikhaelson"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1456937722, "post_id": 35752909, "comment_id": 59180095, "body": "@TobySpeight I will take a look at <code>tput</code>. Cheers"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 2824218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/725083bebbade5fde129d54f8dcf3bce?s=128&d=identicon&r=PG", "display_name": "Alex Mikhaelson", "link": "https://stackoverflow.com/users/2824218/alex-mikhaelson"}, "edited": false, "score": 0, "creation_date": 1456937649, "post_id": 35753341, "comment_id": 59180056, "body": "Thanks! I didn&#39;t know about <code>%b</code>, this solved the issue."}], "tags": [], "owner": {"reputation": 248, "user_id": 5175612, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db1ca78c9df176c2e8422cd3c17deb4c?s=128&d=identicon&r=PG&f=1", "display_name": "barefly", "link": "https://stackoverflow.com/users/5175612/barefly"}, "is_accepted": true, "score": 3, "last_activity_date": 1456938022, "last_edit_date": 1456938022, "creation_date": 1456937386, "answer_id": 35753341, "question_id": 35752909, "link": "https://stackoverflow.com/questions/35752909/bash-script-printf-colors-from-variable/35753341#35753341", "title": "Bash Script printf colors from variable?", "body": "<p>You want bash to interpret the backslash characters. Use %b instead of %s in your printf. So instead you should have the following.</p>\n\n<pre><code>printf \"[ %b ] %s distribution detected. Validated as supported by this script.\\n\" $PASSED $LINUX_DISTRO\n</code></pre>\n\n<p>Also, I modified your variable.</p>\n\n<pre><code>PASSED=\"\\e[00;32mPASSED\\e[0m\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1456940227, "last_edit_date": 1456940227, "creation_date": 1456939680, "answer_id": 35754134, "question_id": 35752909, "link": "https://stackoverflow.com/questions/35752909/bash-script-printf-colors-from-variable/35754134#35754134", "title": "Bash Script printf colors from variable?", "body": "<p>Another (non-standard) solution is to put the escape character directly in the original string, rather than <code>\\e</code> for <code>printf</code> to interpret.</p>\n\n<pre><code>PASSED=$'\\e[32mPASSED\\e[0m'\nprintf '[ %s ] some test\\n' \"$PASSED\"\n</code></pre>\n\n<p>However, this assumes that your script is run by <code>/bin/bash</code>, not <code>/bin/sh</code> (which might <em>be</em> <code>bash</code>, but run in POSIX-compliant mode).</p>\n\n<p>Using <code>%b</code> has the same problem: it is specific to <code>bash</code>, and you may not want to assume that <code>bash</code> is the shell executing your script.</p>\n\n<p>A fully POSIX-compliant solution is to use <code>printf</code> itself to create the value of <code>PASSED</code>.</p>\n\n<pre><code># \\e not supported by POSIX; use \\033 (octal) instead.\nPASSED=$(printf '\\033[32mPASSED\\033[0m')\nprintf '[ %s ] some test\\n' \"$PASSED\"\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 2824218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/725083bebbade5fde129d54f8dcf3bce?s=128&d=identicon&r=PG", "display_name": "Alex Mikhaelson", "link": "https://stackoverflow.com/users/2824218/alex-mikhaelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1449, "favorite_count": 0, "accepted_answer_id": 35753341, "answer_count": 2, "score": 6, "last_activity_date": 1456940227, "creation_date": 1456936147, "question_id": 35752909, "link": "https://stackoverflow.com/questions/35752909/bash-script-printf-colors-from-variable", "title": "Bash Script printf colors from variable?", "body": "<p>I was hoping to see if someone can point out what I am doing wrong because I am stumped. I am trying to learn bash scripting to deploy a dev test server. One of the things I am trying to achieve is outputting status outputs when a part of the script completes or an action completes. As an example: </p>\n\n<pre><code>    printf \"[ %s ] %s distribution detected. Validated as supported by this script.\\n\" \"$PASSED\" \"$LINUX_DISTRO\"\n</code></pre>\n\n<p>The problem I am having is formatting the value of the first string, <code>%s</code>, which is <code>$PASSED</code>. In the beginning of the script I have defined <code>$PASSED</code> as </p>\n\n<pre><code>PASSED=\"\\e[32mPASSED\\e[0m\"\n</code></pre>\n\n<p>However, when I go to execute the script, the output looks like the following:</p>\n\n<pre><code>[ \\e[32mPASSED\\e[0m ] CENTOS distribution detected. Validated as supported by this script.\n</code></pre>\n\n<p>Instead of the correct output which looks like:</p>\n\n<pre><code>[ PASSED ] CENTOS distribution detected. Validated as supported by this script.\n</code></pre>\n\n<p>Where \"PASSED\" is written in green coloring. </p>\n\n<p>However, I did notice that if I do the following:</p>\n\n<pre><code>printf \"[ $PASSED ] %s distribution detected. Validated as supported by this script.\\n\" \"$LINUX_DISTRO\"\n</code></pre>\n\n<p>The above behaves correctly, but I believe isn't the correct way of doing it. Any ideas?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1456935727, "post_id": 35752627, "comment_id": 59178617, "body": "If you want to access <code>pn</code> in <code>sortedArr</code>, you need to pass it as an argument."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1456945128, "post_id": 35752627, "comment_id": 59184890, "body": "Do you want the words sorted or to print out which of the words in the array have all character sorted? Like: &quot;abcd&quot; is sorted, print it, no matter if it is before or after the word &quot;rst&quot;."}, {"owner": {"reputation": 133, "user_id": 5717087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8704ab97c169d7807598f10c470cb6e3?s=128&d=identicon&r=PG&f=1", "display_name": "user300048", "link": "https://stackoverflow.com/users/5717087/user300048"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1456945792, "post_id": 35752627, "comment_id": 59185303, "body": "@Bob__ Output should be all strings that are sorted lexicographically, no matter where they appear. Example: 1. &quot;abcd&quot; 2. &quot;rst&quot; 3. &quot;stack&quot; Output is 1. &quot;abcd&quot; 2. &quot;rst&quot;. It doesn&#39;t matter if &quot;rst&quot; is first and &quot;abcd&quot; is second"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457035415, "post_id": 35752627, "comment_id": 59235090, "body": "in C, when calling any of the memory allocation functions: (malloc, calloc, realloc) do not cast the returned value. the returned value has type  <code>void*</code> so can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, maintain. 2) always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457036537, "post_id": 35752627, "comment_id": 59235802, "body": "when calling any of the <code>scanf()</code> family of functions, 1) always check the returned value (not the parameter value) to assure the operation was successful.  2) when using the &#39;%s&quot; format specifier, always include a max length modifier.  Otherwise the user can overrun the input buffer (which is undefined behaviour and can lead to a seg fault event) 3) the max length modifier must be 1 less that the length of the input buffer because the &#39;%s&#39; format specifier will always append a NUL byte."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457037575, "post_id": 35752627, "comment_id": 59236411, "body": "the function: <code>isSorted()</code>  does not check if the array is sorted.  rather it checks if any 2 character, regardless of their location in the array, are in ascending order.  This is probably not what you want."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457038188, "post_id": 35752627, "comment_id": 59236801, "body": "in the <code>isSorted()</code> function there can be hundreds of calls to <code>strlen()</code>  Calls to strlen() are expensive in CPU cycles.  Strongly suggest just checking if the current <code>str[i+1]</code> (similar with <code>str[j]</code>) is other than NUL.  I.E. <code>for(size_t i=0; str[i+1]; i++) for(size_t j=i+1; j&lt;str[j]; j++)</code>  Note: use <code>size_t</code> rather than <code>int</code> because i and j should never be &lt;0"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457038535, "post_id": 35752627, "comment_id": 59237017, "body": "at the end of the <code>sortedArr()</code> function, this call: <code>printf(&quot;%d. word: %s&quot;,sortArr+i);</code> is not correct:  it should be: <code>printf(&quot;%d. word: %s&quot;,i, *(sortArr+i));</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1457038733, "post_id": 35752627, "comment_id": 59237127, "body": "when #define&#39;ing a numeric value, always wrap it in parens to avoid <code>text replacement</code> errors.   That will not be a problem with the current code, but is a best practice that will save you hours and hours of debugging when it happens.  I.E <code>#define MAX (30)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5717087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8704ab97c169d7807598f10c470cb6e3?s=128&d=identicon&r=PG&f=1", "display_name": "user300048", "link": "https://stackoverflow.com/users/5717087/user300048"}, "edited": false, "score": 0, "creation_date": 1456942177, "post_id": 35754146, "comment_id": 59183036, "body": "The program crashes in function sortedArr(). Could you point out what is the possible problem? I have edited the post."}, {"owner": {"reputation": 11, "user_id": 610100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacb5d85f2c883223667230c3c97bbcd?s=128&d=identicon&r=PG", "display_name": "luis", "link": "https://stackoverflow.com/users/610100/luis"}, "reply_to_user": {"reputation": 133, "user_id": 5717087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8704ab97c169d7807598f10c470cb6e3?s=128&d=identicon&r=PG&f=1", "display_name": "user300048", "link": "https://stackoverflow.com/users/5717087/user300048"}, "edited": false, "score": 0, "creation_date": 1456943345, "post_id": 35754146, "comment_id": 59183770, "body": "Notice this: in sortedArr function, you are doing: if(isSorted(sortArr[i])), before sortArr[i] has been initialized, which you do on the next line...sortArr[i]=(char *)malloc(MAX+1);. So you are getting an invalid pointer access."}], "tags": [], "owner": {"reputation": 11, "user_id": 610100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacb5d85f2c883223667230c3c97bbcd?s=128&d=identicon&r=PG", "display_name": "luis", "link": "https://stackoverflow.com/users/610100/luis"}, "is_accepted": false, "score": 1, "last_activity_date": 1456939706, "creation_date": 1456939706, "answer_id": 35754146, "question_id": 35752627, "link": "https://stackoverflow.com/questions/35752627/print-sorted-strings-from-array-of-strings/35754146#35754146", "title": "Print sorted strings from array of strings", "body": "<p>Change the sortedArr function, so that it takes <strong>pn</strong> as an argument:\nchar** sortedArr(char **str, int pn)...</p>\n\n<p>Then, in your main(), change the sortArr=sortedArr(arr) to sortArr=sortedArr(arr, pn), to pass the value to the function. Then you can use the <strong>pn</strong> value inside the sortedArr function.</p>\n"}, {"comments": [{"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1456954127, "post_id": 35755496, "comment_id": 59190278, "body": "Nice, but it seems the OP doesn&#39;t want to sort all the words, he (she) only needs to find out the words with characters alphabetically sorted."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1457026559, "last_edit_date": 1457026559, "creation_date": 1456944043, "answer_id": 35755496, "question_id": 35752627, "link": "https://stackoverflow.com/questions/35752627/print-sorted-strings-from-array-of-strings/35755496#35755496", "title": "Print sorted strings from array of strings", "body": "<p>One head-scratcher is:</p>\n\n<pre><code>for(i=0; i&lt;*pn;i++)\n    arr[i]=(char *)malloc(strlen(arr+i)+1);\n\nfor(i=0; i&lt;*pn; i++)\n{\n    printf(\"%d. word: \",i+1);\n    scanf(\"%s\",arr[i]);\n}\n</code></pre>\n\n<p>You should combine both because you cannot allocate properly until you know the length of <code>word</code>. Allocating some <code>strlen(arr+i)+1</code> for who knows what is at <code>arr+i</code> is meaningless (and unless <code>arr+i</code> just happens to be a <em>nul-terminated</em> string, undefined behavior). When you are taking input, you can/should use a temprory buffer to hold the input until you can validate it is what you want it to be. At minimum, test the return to scanf to insure you actually had a sucessful conversion to the type of input you are expecting. For instance:</p>\n\n<pre><code>for (i = 0; i &lt; *pn; i++)\n{\n    char buf[64] = \"\";          /* however long is sufficient for word */\n\n    printf (\"%d. word: \",i+1);\n\n    if (scanf (\"%63[^\\n']%*c\",buf) == 1)\n        arr[i] = strdup (buf);  /* allocates/copies buf for arr[i]  */\n    else {\n        fprintf (stderr, \"error: invalid input for word[%d].\\n\", i);\n    }\n}\n</code></pre>\n\n<p>(<em>note:</em> you have similar allocation issues in <code>sortedArr</code>)</p>\n\n<p>For your sort, you need to pass <code>pn</code> as a parameter to <code>sortedArr</code> so you at least know how many strings you are dealing with. Rather than looping and attempting to compare adjacent elements, why not have your <code>sortedArr</code> function simply call <code>qsort</code> and sort the array you create in <code>read</code>. If you want to preserve both the original and sorted arrays, then have <code>sortedArr</code> call <code>memcpy</code> and create a copy of <code>arr</code> and then call <code>qsort</code> on the copy. All you need to do is create a string comparison <code>compare</code> function for <code>qsort</code> to compare <code>arr</code> or the copy, e.g.:</p>\n\n<pre><code>/* comparison function for qsort (char **) */\nint cmp_str (const void *a, const void *b)\n{\n    /*  The actual arguments to this function are \"pointers to\n        pointers to char\", but strcmp(3) arguments are \"pointers\n        to char\", hence the following cast plus dereference \n\n        note: to reverse sort order, swap a and b, below  */\n\n    return strcmp (* (char * const *) a, * (char * const *) b);\n}\n</code></pre>\n\n<p>Which you can then use to sort your <code>arr</code> (or copy) with</p>\n\n<pre><code>qsort (arr, pn, sizeof *arr, cmp_str);\n</code></pre>\n\n<p>Much less error-prone then a one-off loop and index attempt. Give it a try and let me know if you have questions.</p>\n"}, {"tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1456949068, "last_edit_date": 1456949068, "creation_date": 1456948680, "answer_id": 35756905, "question_id": 35752627, "link": "https://stackoverflow.com/questions/35752627/print-sorted-strings-from-array-of-strings/35756905#35756905", "title": "Print sorted strings from array of strings", "body": "<p>Your program has several issues, I'll try to address the most part of them.</p>\n\n<p>Let's start from the <code>isSorted</code> function, if your goal is to check if a word has all the character sorted, you don't need to use strcmp or a nested loop. All what you need is something like this:</p>\n\n<pre><code>// check if  all the character in the string are sorted\nint isSorted( char *str )\n{\n    int i, length = strlen(str) - 1;\n\n    for ( i=0; i &lt; length; i++ )\n        if ( str[i] &gt; str[i+1] )\n            return 0;\n    return 1;\n}\n</code></pre>\n\n<p>I'll separate the printing function from the input one and copy ones, so to have:</p>\n\n<pre><code>void print( char **str, int n )\n{\n    int i;\n    for ( i = 0; i &lt; n; i++ ) {\n        printf(\"word %d: %s\\n\", i + 1, str[i]);\n    }\n}\n</code></pre>\n\n<p>There are several methods to read some words from stdin and some are presented in other answers. I'll use this, but you should check all the pointers returned from malloc:</p>\n\n<pre><code>char** read(int *pn)\n{\n    char buffer[BUFSIZE];\n\n    printf(\"Please, enter number of words: \");\n    while ( *pn &lt; 1  &amp;&amp; fgets(buffer, BUFSIZE, stdin) ) {\n        sscanf(buffer, \"%d\", pn);\n    }\n\n    int i = 0, length;\n    printf(\"\\nPlease, enter the words: \\n\");\n    char **arr = malloc(*pn * sizeof(char *));\n    while ( i &lt; *pn ) {\n        // read words one line at a time\n        if ( !fgets(buffer, BUFSIZE, stdin) )\n            break;\n\n        length = strlen(buffer);\n        // ignore empty lines\n        if ( length &lt; 2 )\n            continue;\n\n        arr[i] = malloc(length);\n        memcpy(arr[i],buffer,length);\n        // add the null terminator\n        arr[i][length - 1] = '\\0';\n\n        ++i;\n    }\n    *pn = i;\n    return arr;\n}\n</code></pre>\n\n<p>Then, I'm not really sure if you want only to print the words that are \"sorted\" or you actually need to copy them (and print later). I'll show you the latter:</p>\n\n<pre><code>// return an array of string containing only the sorted ones\nchar** sortedArr( char **str, int n, int *m)\n{\n    char **sortArr = NULL;\n    char *sorted = calloc(n,1);\n    int i;\n    *m = 0;\n    // first find (and count) the sorted strings\n    for ( i = 0; i &lt; n; i++ ) {\n        if ( isSorted(str[i]) ) {\n            // maybe you need only to print str[i] now...\n            sorted[i] = 1;\n            ++(*m);\n        }\n    }\n    // then copy the sorted. I'm not sure if you need this\n    int j = 0, length = 0;\n    if ( *m ) {\n        sortArr = malloc(*m * sizeof(char *));\n        for ( i = 0; i &lt; n; i++ ) {\n            if ( !sorted[i] )\n                continue;\n            length = strlen(str[i]) + 1;\n            sortArr[j] = malloc(length);\n            memcpy(sortArr[j],str[i],length);\n        }\n    }\n    free(sorted);\n    return sortArr;\n}\n</code></pre>\n\n<p>Finally the main function (and the one to free allocated memory):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\n#define BUFSIZE 128\n\nchar** read( int *pn );\nint isSorted( char *str );\nchar** sortedArr( char **str, int n, int *m );\nvoid print( char **str, int n );\nvoid freeArr( char **str, int n );\n\nvoid freeArr( char **str, int n )\n{\n    if ( !str ) return;\n    int i;\n    for ( i = 0; i &lt; n; i++ ) {\n        free(str[i]);\n    }\n    free(str);\n}\n\nint main()\n{\n    char **arr = NULL;\n    char **sortArr = NULL;\n    int n = 0, m = 0;\n\n    arr = read(&amp;n);\n    print(arr, n);\n    printf(\"\\nSorted: \\n\");\n    sortArr = sortedArr(arr,n,&amp;m);\n    print(sortArr, m);\n\n    freeArr(sortArr, m);\n    freeArr(arr, n);\n    return 0;\n}\n</code></pre>\n\n<p>Hope it helped. Tell me if there is something wrong or I have misunderstood your task.</p>\n"}], "owner": {"reputation": 133, "user_id": 5717087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8704ab97c169d7807598f10c470cb6e3?s=128&d=identicon&r=PG&f=1", "display_name": "user300048", "link": "https://stackoverflow.com/users/5717087/user300048"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 35756905, "answer_count": 3, "score": 0, "last_activity_date": 1457026559, "creation_date": 1456935439, "last_edit_date": 1456942288, "question_id": 35752627, "link": "https://stackoverflow.com/questions/35752627/print-sorted-strings-from-array-of-strings", "title": "Print sorted strings from array of strings", "body": "<p>I need help with the following program:</p>\n\n<p>Print all sorted strings from the input array of strings.\nAssume that strings are sorted if characters are in lexicographic order (also assume that the only characters in strings are letters).</p>\n\n<pre><code>Example:\nINPUT:\nn=2\n1. string: stack\n2. string: exchange\nOUTPUT:\nNo sorted strings\n</code></pre>\n\n<p>I am having a problem with accessing some variables in the following program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#define MAX 30\n\nchar** read(int *pn);\nint isSorted(char *str);\nchar** sortedArr(char **str,int pn);\n\nchar** read(int *pn)\n{\n   do\n   {\n       printf(\"n = \");\n       scanf(\"%d\",pn);\n   }\n   while(*pn &lt; 1);\n\n   char **arr;\n   arr=(char **)malloc(*pn * sizeof(char *));\n   int i;\n   for(i=0; i&lt;*pn;i++)\n       arr[i]=(char *)malloc(MAX+1);\n\n   for(i=0; i&lt;*pn; i++)\n   {\n       printf(\"%d. word: \",i+1);\n       scanf(\"%s\",arr[i]);\n   }\n\n   return arr;\n}\n\nint isSorted(char *str)\n{\n    int i,j;\n    for(i=0; i&lt;strlen(str)-1;i++)\n        for(j=i+1; j&lt;strlen(str); j++)\n            if(strcmp(str+i,str+j) &gt; 0)\n                return 1;\n    return 0;\n}\n\nchar** sortedArr(char **str,int pn)\n{\n    char **sortArr;\n    sortArr=(char **)malloc(pn * sizeof(char *));\n\n    int i;\n    for(i=0; i&lt;pn; i++)\n    {\n        if(isSorted(sortArr[i]))\n            sortArr[i]=(char *)malloc(MAX+1);\n    }\n\n    for(i=0; i&lt;pn; i++)\n    {\n        if(isSorted(sortArr[i]))\n            printf(\"%d. word: %s\",sortArr+i);\n    }\n\n    return sortArr;\n}\n\nint main()\n{\n    char **arr;\n    char **sortArr;\n    int pn;\n\n    arr=read(&amp;pn);\n\n    sortArr=sortedArr(arr,pn);\n\n    int i;\n    for(i=0; i&lt;pn; i++)\n        free(arr[i]);\n    free(arr);\n    return 0;\n}\n</code></pre>\n\n<p>The problem is how to access the variable <strong>pn</strong> in function <strong>sortedArr()</strong>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1456932944, "post_id": 35751408, "comment_id": 59176409, "body": "Btw, indexing starts at 0."}, {"owner": {"reputation": 9, "user_id": 6008537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143856155633600/picture?type=large", "display_name": "smooth", "link": "https://stackoverflow.com/users/6008537/smooth"}, "reply_to_user": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1456933159, "post_id": 35751408, "comment_id": 59176567, "body": "yes ik can use i=0;i&lt;5;i++"}, {"owner": {"reputation": 4268, "user_id": 5897829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7105808cb099e98f04fe464af68c6?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Verjans", "link": "https://stackoverflow.com/users/5897829/martin-verjans"}, "reply_to_user": {"reputation": 7369, "user_id": 2436655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f13e1ea8bbf6506462623c85acb8e32?s=128&d=identicon&r=PG&f=1", "display_name": "pzaenger", "link": "https://stackoverflow.com/users/2436655/pzaenger"}, "edited": false, "score": 0, "creation_date": 1456933173, "post_id": 35751408, "comment_id": 59176578, "body": "@pzaenger Yes but he is doing it the VB way, the 0 index is never used. Array is 6 units length so he can reach a[5]..."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1456933186, "post_id": 35751408, "comment_id": 59176587, "body": "You should always check the return code from scanf. Do not just assume it will work."}, {"owner": {"reputation": 4268, "user_id": 5897829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7105808cb099e98f04fe464af68c6?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Verjans", "link": "https://stackoverflow.com/users/5897829/martin-verjans"}, "edited": false, "score": 0, "creation_date": 1456933228, "post_id": 35751408, "comment_id": 59176617, "body": "Isn&#39;t there a thing about flushing the input between two scanfs ?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 2, "creation_date": 1456933279, "post_id": 35751408, "comment_id": 59176654, "body": "<code>gets()</code> shouldn&#39;t be used because it has unavoidable risk of buffer overrun."}, {"owner": {"reputation": 9, "user_id": 6008537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143856155633600/picture?type=large", "display_name": "smooth", "link": "https://stackoverflow.com/users/6008537/smooth"}, "edited": false, "score": 0, "creation_date": 1456933500, "post_id": 35751408, "comment_id": 59176858, "body": "so what should i use to get user input ?, i need to get space, normal scanf will not read it"}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 2, "creation_date": 1456933540, "post_id": 35751408, "comment_id": 59176896, "body": "The simplest approach here is probably <code>fgets</code>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1456933793, "post_id": 35751408, "comment_id": 59177105, "body": "<a href=\"http://ideone.com/szgXqg\" rel=\"nofollow noreferrer\">Works for me</a> - are you sure you didn&#39;t enter a long string (&gt; 49 chars) for one of the inputs ?"}, {"owner": {"reputation": 9, "user_id": 6008537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143856155633600/picture?type=large", "display_name": "smooth", "link": "https://stackoverflow.com/users/6008537/smooth"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1456934049, "post_id": 35751408, "comment_id": 59177300, "body": "@PaulR im surely not, what makes me confused is all 1st to 4th output was okay. why the last one isnt working ?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1456934182, "post_id": 35751408, "comment_id": 59177398, "body": "Actually, <code>gets()</code> is no longer part of the language. As in, officially. Let&#39;s hope the compiler maintainers give it the toss soon."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1456935642, "post_id": 35751408, "comment_id": 59178532, "body": "The output is not in sync with the code."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6008537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143856155633600/picture?type=large", "display_name": "smooth", "link": "https://stackoverflow.com/users/6008537/smooth"}, "edited": false, "score": 0, "creation_date": 1456936557, "post_id": 35752841, "comment_id": 59179268, "body": "wow idk what inside unistd.h library, but why there is an extra line ?"}, {"owner": {"reputation": 716, "user_id": 2031180, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jkKlR.jpg?s=128&g=1", "display_name": "campescassiano", "link": "https://stackoverflow.com/users/2031180/campescassiano"}, "reply_to_user": {"reputation": 9, "user_id": 6008537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143856155633600/picture?type=large", "display_name": "smooth", "link": "https://stackoverflow.com/users/6008537/smooth"}, "edited": false, "score": 0, "creation_date": 1456936965, "post_id": 35752841, "comment_id": 59179570, "body": "unistd in this case was included to to allow to use the read funcion, as well as the STDIN_FILENO symbol.   You can get more information in <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/unistd.h.html\" rel=\"nofollow noreferrer\">link</a>  If you mean this extra line: a[i][r] = &#39;\\0&#39;;   It is to ensure you are putting the null terminator in your string."}, {"owner": {"reputation": 9, "user_id": 6008537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143856155633600/picture?type=large", "display_name": "smooth", "link": "https://stackoverflow.com/users/6008537/smooth"}, "edited": false, "score": 0, "creation_date": 1456936994, "post_id": 35752841, "comment_id": 59179589, "body": "i mean like there is total 10 line as output with extra blank line. actually this is a school task using autograder, so output needs to be exactly the same. TY anyway, this works. well ill check whats inside unistd.h though"}], "tags": [], "owner": {"reputation": 716, "user_id": 2031180, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jkKlR.jpg?s=128&g=1", "display_name": "campescassiano", "link": "https://stackoverflow.com/users/2031180/campescassiano"}, "is_accepted": true, "score": -1, "last_activity_date": 1456935962, "creation_date": 1456935962, "answer_id": 35752841, "question_id": 35751408, "link": "https://stackoverflow.com/questions/35751408/array-of-string-output-is-a-clover-symbol/35752841#35752841", "title": "array of string output is a clover symbol", "body": "<p>Using your code, I got strange chars on output as you mentioned.</p>\n\n<p>So, I made some fixes on your code and now I think it works properly.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\nint main(void)\n{\n    char a[6][50];\n    int i, r;\n    for (i = 1; i &lt;= 5; i++) {\n        printf(\"insert name%d :\\n\", i);\n        r = read(STDIN_FILENO, a[i], 49);\n        a[i][r] = '\\0';\n    }\n    for (i = 1; i &lt;= 5; i++) {\n        printf(\"%d%25s\\n\", i, a[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Avoid to use deprecated functions in your code.</p>\n\n<p>You need to ensure that after reading from <code>stdin</code>, your buffer is going to get the <code>null</code> terminator right after the last position written in buffer.</p>\n"}], "owner": {"reputation": 9, "user_id": 6008537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143856155633600/picture?type=large", "display_name": "smooth", "link": "https://stackoverflow.com/users/6008537/smooth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 35752841, "answer_count": 1, "score": -3, "last_activity_date": 1456936052, "creation_date": 1456932423, "last_edit_date": 1456936052, "question_id": 35751408, "link": "https://stackoverflow.com/questions/35751408/array-of-string-output-is-a-clover-symbol", "title": "array of string output is a clover symbol", "body": "<p>No matter what the 5th input the output was clover symbol, program purpose was to align right the inputs:\nEDIT\nim not using scanf(%[\\^n],a[i]), the output was horrible, using gets instead</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char a[6][50];\n    int i;\n    for (i=1;i&lt;=5;i++)\n    {\n        printf(\"insert name%d :\\n\",i);\n        gets(a[i]);\n    }\n    for (i=1;i&lt;=5;i++)\n    {\n        printf(\"%d%25s\\n\",i,a[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>1         far cry\n2        iron man\n3 new super mario\n4         program\n5        \"clover\"\n</code></pre>\n"}, {"tags": ["c", "struct", "typedef"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5936831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-De7qqBcEOF0/AAAAAAAAAAI/AAAAAAAAAMk/KaKzFI5hVAs/photo.jpg?sz=128", "display_name": "Kaiac", "link": "https://stackoverflow.com/users/5936831/kaiac"}, "edited": false, "score": 0, "creation_date": 1456932331, "post_id": 35751199, "comment_id": 59175956, "body": "And, how can I implement date in this function: <code>Offer create(char* type, char* destination, float price, DATE);</code> ?"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "reply_to_user": {"reputation": 31, "user_id": 5936831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-De7qqBcEOF0/AAAAAAAAAAI/AAAAAAAAAMk/KaKzFI5hVAs/photo.jpg?sz=128", "display_name": "Kaiac", "link": "https://stackoverflow.com/users/5936831/kaiac"}, "edited": false, "score": 0, "creation_date": 1456932399, "post_id": 35751199, "comment_id": 59176016, "body": "<code>Offer create(char* type, char* destination, float price, OfferDate date);</code> @CristianTimar like this."}, {"owner": {"reputation": 31, "user_id": 5936831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-De7qqBcEOF0/AAAAAAAAAAI/AAAAAAAAAMk/KaKzFI5hVAs/photo.jpg?sz=128", "display_name": "Kaiac", "link": "https://stackoverflow.com/users/5936831/kaiac"}, "edited": false, "score": 0, "creation_date": 1456932613, "post_id": 35751199, "comment_id": 59176168, "body": "I readed a part from c book, but I needed this instruction urgently . Thanks  !"}], "tags": [], "owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "is_accepted": true, "score": 1, "last_activity_date": 1456931864, "creation_date": 1456931864, "answer_id": 35751199, "question_id": 35751151, "link": "https://stackoverflow.com/questions/35751151/typedef-struct-format-in-another-typedef-struct/35751199#35751199", "title": "typedef struct format in another typedef struct", "body": "<p>Instead of what you wrote, let's try something like this:</p>\n\n<pre><code>typedef struct {\n    int date;\n    int month;\n    int year;\n} OfferDate;\n\n\ntypedef struct {\nchar* type;\nchar* destination;\nfloat price;\nOfferDate date; \n} Offer;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1456931962, "post_id": 35751241, "comment_id": 59175656, "body": "was just about to add that to my answer as an alternative. :)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 31, "user_id": 5936831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-De7qqBcEOF0/AAAAAAAAAAI/AAAAAAAAAMk/KaKzFI5hVAs/photo.jpg?sz=128", "display_name": "Kaiac", "link": "https://stackoverflow.com/users/5936831/kaiac"}, "edited": false, "score": 0, "creation_date": 1456932523, "post_id": 35751241, "comment_id": 59176120, "body": "@CristianTimar: <code>Offer create(char* type, char* destination, float price, int day, int month, int year);</code>?"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1456932975, "post_id": 35751241, "comment_id": 59176437, "body": "He&#39;s actually asking how to construct the object, to use that method signature - you require to tell him how to assign the <code>day</code>, <code>month</code>, and <code>year</code> to the struct to be returned. And since it&#39;s anonymous, it can&#39;t be passed around as a argument. that&#39;s the part he&#39;s not getting, how to do <code>Offer.date.day = &lt;myDay&gt;;</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1456934844, "post_id": 35751241, "comment_id": 59177875, "body": "&quot;<i>He&#39;s actually asking how to construct the object</i>&quot; well, not in the question. @Shark"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1456935032, "post_id": 35751241, "comment_id": 59178038, "body": "True, he&#39;s a bit ambiguous and unclear but I still suspect that&#39;s his trouble point. In any case, it doesn&#39;t matter much anymore, does it."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 2, "last_activity_date": 1456932125, "last_edit_date": 1495539902, "creation_date": 1456931945, "answer_id": 35751241, "question_id": 35751151, "link": "https://stackoverflow.com/questions/35751151/typedef-struct-format-in-another-typedef-struct/35751241#35751241", "title": "typedef struct format in another typedef struct", "body": "<p>Try this:</p>\n\n<pre><code>typedef struct {\n  char* type;\n  char* destination;\n  float price;\n  struct {\n    int day;\n    int month;\n    int year;\n  } date;\n} Offer;\n</code></pre>\n\n<p>This defines <code>date</code> as being of an anonymous struct. If you need to have this struct available elsewhere use <a href=\"https://stackoverflow.com/a/35751199/694576\"><em>Shark</em>'s approach</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 0, "last_activity_date": 1456932052, "last_edit_date": 1456932052, "creation_date": 1456931995, "answer_id": 35751272, "question_id": 35751151, "link": "https://stackoverflow.com/questions/35751151/typedef-struct-format-in-another-typedef-struct/35751272#35751272", "title": "typedef struct format in another typedef struct", "body": "<p>Thats incorrect syntax. If you want to define a struct using another struct, you can do it like this:</p>\n\n<pre><code>typedef struct {\n    int a1;\n    int a2;\n} ExampleStruct1;\n\ntypedef struct {\n    int b1;\n    ExampleStruct1 b2;\n} ExampleStruct2;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5936831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-De7qqBcEOF0/AAAAAAAAAAI/AAAAAAAAAMk/KaKzFI5hVAs/photo.jpg?sz=128", "display_name": "Kaiac", "link": "https://stackoverflow.com/users/5936831/kaiac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 35751199, "answer_count": 3, "score": -2, "last_activity_date": 1456935712, "creation_date": 1456931721, "last_edit_date": 1456935712, "question_id": 35751151, "link": "https://stackoverflow.com/questions/35751151/typedef-struct-format-in-another-typedef-struct", "title": "typedef struct format in another typedef struct", "body": "<p>How can I declare a <code>typedef struct</code> in other <code>typedef struct</code>?</p>\n\n<pre><code>typedef struct {\n    char* type;\n    char* destination;\n    float price;\n    typedef struct {\n        int date;\n        int month;\n        int year;\n    }date;\n}Offer;\n</code></pre>\n\n<p>I tried something like this but I don't know if its correctly. I want to declare in typedef struct another typedef struct for date format.</p>\n"}, {"tags": ["c", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456931680, "post_id": 35751121, "comment_id": 59175455, "body": "Note that they say <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">you shouldn&#39;t cast the result of <code>malloc()</code> in C</a>."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456931982, "post_id": 35751121, "comment_id": 59175663, "body": "You shouldn&#39;t use <code>gets()</code>, which has unavoidable rsik of buffer overrun."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456931999, "post_id": 35751121, "comment_id": 59175681, "body": "You should make it the first time you used your debugger."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456932092, "post_id": 35751121, "comment_id": 59175749, "body": "Passing data having wrong type to <code>%s</code> for <code>printf()</code> invokes <i>undefined behavior</i>."}, {"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1456932124, "post_id": 35751121, "comment_id": 59175773, "body": "It doesn&#39;t work w/o that. I&#39;m using Kdevelop."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456932159, "post_id": 35751121, "comment_id": 59175792, "body": "Using value in buffer allocated via <code>malloc()</code> and uninitialized also invokes <i>undefined behavior</i>. The output <i>happened</i> to be <code>(null)</code>."}, {"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456932397, "post_id": 35751121, "comment_id": 59176015, "body": "@MikeCAT, what do you suggest me to do? Can you please correct the code, so I can see where I was wrong."}], "answers": [{"comments": [{"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1456997671, "post_id": 35751377, "comment_id": 59208260, "body": "Thank you! Both of you helped me a lot."}, {"owner": {"reputation": 3273, "user_id": 818827, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/OsGL0.png?s=128&g=1", "display_name": "peter_the_oak", "link": "https://stackoverflow.com/users/818827/peter-the-oak"}, "reply_to_user": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1457028099, "post_id": 35751377, "comment_id": 59230804, "body": "Glad to help :-) have fun."}], "tags": [], "owner": {"reputation": 3273, "user_id": 818827, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/OsGL0.png?s=128&g=1", "display_name": "peter_the_oak", "link": "https://stackoverflow.com/users/818827/peter-the-oak"}, "is_accepted": false, "score": 0, "last_activity_date": 1456988032, "last_edit_date": 1495540730, "creation_date": 1456932318, "answer_id": 35751377, "question_id": 35751121, "link": "https://stackoverflow.com/questions/35751121/singly-linked-list-c-printing/35751377#35751377", "title": "Singly linked list C, printing", "body": "<p>Inside <code>createlist()</code>, you are iterating to the end of the list. There, you are adding a new node and setting a new text entered. By doing so, you are missing that you have already a first node. Because you are iterating to the end in every call of <code>createlist()</code>, you are jumping over your first node every time, so it remains without text and delivers <code>NULL</code>.</p>\n\n<p>In order not to jump over the first initial node, you could alter <code>createlist()</code> like this: </p>\n\n<pre><code>char createlist(node *pointer, char data[100])\n{\n   while (pointer-&gt;data != NULL &amp;&amp; pointer-&gt;next != NULL)\n   {\n     pointer = pointer-&gt;next;\n   }\n   ...\n   ... \n}\n</code></pre>\n\n<p>Or you could create the first node not initially, but only after the first line of text was entered.</p>\n\n<hr>\n\n<p><strong>edit</strong>: Here are two additional style hints:</p>\n\n<ul>\n<li><p>What happens if somebody enters 120 characters? The text will outrun your <code>char[100]</code> array and will fill RAM that is used otherwise. This is a buffer overflow. You could try to grab only the first 100 chars, get the <a href=\"https://stackoverflow.com/questions/2114377/strings-in-c-how-to-get-substring\">substring</a>. Alternatively, use the length argument of <a href=\"https://stackoverflow.com/questions/7709452/how-to-read-string-from-keyboard-using-c\"><code>fgets()</code></a></p></li>\n<li><p>Create a constant for 100, like <code>#define MAX_BUFFER_LENGTH 100</code>, and use it every time.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1456933496, "post_id": 35751691, "comment_id": 59176855, "body": "Thank you for trying to help.   I get these errors: main.cpp:18:35: error: invalid conversion from \u2018void*\u2019 to \u2018node* {aka Node*}\u2019 [-fpermissive]   <i>pointer = malloc(sizeof(node));  main.cpp:24:47: error: invalid conversion from \u2018void</i>\u2019 to \u2018char*\u2019 [-fpermissive]      (*pointer)-&gt;data = malloc(strlen(data) + 1);"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1456933541, "post_id": 35751691, "comment_id": 59176901, "body": "@Mirakurun Use C compiler, not C++ compiler. This question is marked as C in both the title and the tag, and the code is C. Why on earth you did compile this code as C++?"}, {"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1456935689, "post_id": 35751691, "comment_id": 59178576, "body": "Yeah, that was my bad, didn&#39;t even see that my extension is cpp. I just configured C on Kdevelop and it works flawless. Thank you again."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 3, "last_activity_date": 1456933119, "creation_date": 1456933119, "answer_id": 35751691, "question_id": 35751121, "link": "https://stackoverflow.com/questions/35751121/singly-linked-list-c-printing/35751691#35751691", "title": "Singly linked list C, printing", "body": "<ul>\n<li>You should format your code properly.</li>\n<li><code>first-&gt;data</code> is allocated via <code>malloc()</code> and isn't initialized, so using its value invokes <em>undefined behavior</em>.</li>\n<li>In order not to deal the first element specially, you should use pointer to pointer to have <code>createlist()</code> modify <code>first</code>.</li>\n<li>Since <code>createlist()</code> won't return anything, type of its return value should be <code>void</code>.</li>\n<li>I guess you wanted to copy the strings instead of assigning the first character of each strings.</li>\n<li>To print all of what you entered, code to do so have to be written.</li>\n<li>You shouldn't use <code>gets()</code>, which has unavoidable risk of buffer overrun.</li>\n<li>You should <code>free()</code> whatever you allocated via <code>malloc()</code>.</li>\n</ul>\n\n<p>improved code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct Node\n{\n    char *data;\n    struct Node *next;\n} node;\n\nvoid createlist(node **pointer, char data[100])\n{\n    while (*pointer != NULL)\n    {\n        pointer = &amp;(*pointer)-&gt;next;\n    }\n\n    *pointer = malloc(sizeof(node));\n    if (*pointer == NULL)\n    {\n        perror(\"malloc 1\");\n        exit(1);\n    }\n    (*pointer)-&gt;data = malloc(strlen(data) + 1);\n    if ((*pointer)-&gt;data == NULL)\n    {\n        perror(\"malloc 2\");\n        exit(1);\n    }\n    strcpy((*pointer)-&gt;data, data);\n    (*pointer)-&gt;next = NULL;\n}\n\nint main(void)\n{\n    node *first = NULL;\n\n    printf(\"Enter the lines\\n\");\n    while (1)\n    { \n        char data[100], *lf;\n        if (fgets(data, sizeof(data), stdin) == NULL) strcpy(data, \"quit\");\n        if ((lf = strchr(data, '\\n')) != NULL) *lf = '\\0'; /* remove newline character */\n        createlist(&amp;first, data);\n        if (strcmp(data, \"print\") == 0)\n        {\n            node *elem = first;\n            while (elem != NULL)\n            {\n                printf(\"%s\\n\", elem -&gt; data);\n                elem = elem-&gt;next;\n            }\n        }\n        else if (strcmp(data, \"quit\") == 0)\n        {\n            while (first != NULL)\n            {\n                node *next = first-&gt;next;\n                free(first-&gt;data);\n                free(first);\n                first = next;\n            }\n            return(0);\n        }\n\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "accepted_answer_id": 35751691, "answer_count": 2, "score": 1, "last_activity_date": 1456988032, "creation_date": 1456931638, "last_edit_date": 1456943189, "question_id": 35751121, "link": "https://stackoverflow.com/questions/35751121/singly-linked-list-c-printing", "title": "Singly linked list C, printing", "body": "<p>I'm a beginner in developing, so my sensei gave me a task to complete in which I need to enter a couple of strings in linked lists and after I enter print, they need to be printed in the correct order, from the first to last. </p>\n\n<p>Here is what I got: </p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;string.h&gt;\n\n    typedef struct Node {\n        char data;\n        struct Node *next;\n    }node;\n\nchar createlist(node *pointer, char data[100]) {\n    while (pointer-&gt;next != NULL) {\n        pointer = pointer-&gt;next;\n    }\n\n    pointer-&gt;next = (node*) malloc(sizeof(node));\n    pointer = pointer-&gt; next;\n    pointer-&gt;data = *data;\n    pointer-&gt;next = NULL;\n}\n\nint main() {\n    node *first, *temp;\n    first = (node*) malloc(sizeof(node));\n    temp = first;\n    temp-&gt;next = NULL;\n\n    printf(\"Enter the lines\\n\");\n    while (1) {\n        char data[100];\n        gets(data);\n        createlist(first, data);\n        if (strcmp(data, \"print\") == 0)\n            printf(\"%s\\n\", first-&gt;data);\n        else if (strcmp(data, \"quit\") == 0)\n            return (0);\n\n    };\n\n}\n</code></pre>\n\n<p>When I run it I get:\n    Enter the lines:\n    asdfasdf\n    print\n    (null)</p>\n\n<p>Any help would be appreciated since this is my first time using linked lists.</p>\n"}, {"tags": ["c", "opengl", "graphic"], "owner": {"reputation": 207, "user_id": 5455373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/56da1e8d4f95ee9ad852bef07588b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "NUO", "link": "https://stackoverflow.com/users/5455373/nuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1457115352, "creation_date": 1456930300, "last_edit_date": 1457115352, "question_id": 35750567, "link": "https://stackoverflow.com/questions/35750567/how-can-i-tilt-a-rotating-plane", "title": "How can I tilt a rotating plane?", "body": "<p>I am writing a simulation of solar system using OpenGL in C.\nThere's a body array which stores all the planets information.\nI want the planet orbit to tilt a certain angle, however from the result, the planet and the orbit are rotating around the (0,0,0) all the time. How could i fix that?\nHere's some of my code.</p>\n\n<p>Here's the definition of the array 'bodies'</p>\n\n<pre><code>typedef struct {\n    char    name[20];       /* name */\n    GLfloat r, g, b;        /* colour */\n    GLfloat orbital_radius; /* distance to parent body (km) */\n    GLfloat orbital_tilt;   /* angle of orbit wrt ecliptic (deg) */\n    GLfloat orbital_period; /* time taken to orbit (days) */\n    GLfloat radius;         /* radius of body (km) */\n    GLfloat axis_tilt;      /* tilt of axis wrt body's orbital plane (deg) */\n    GLfloat rot_period;     /* body's period of rotation (days) */\n    GLint   orbits_body;    /* identifier of parent body */\n    GLfloat spin;           /* current spin value (deg) */\n    GLfloat orbit;          /* current orbit value (deg) */\n} body;\n</code></pre>\n\n<p>The following is the function to draw exactly the planet. It needs to tilt around its axis to rotate, and the orbit needs to tilt as well.</p>\n\n<pre><code>void drawBody(int n)\n{\n    glRotatef(bodies[n].orbital_tilt,0,0,1); //toilet\n    drawOrbit(n);\n    glRotatef(bodies[n].orbit,0,1,0);//orb\n    glTranslatef(bodies[n].orbital_radius,0,0); \n    // self axis tilt\n    glRotatef(bodies[n].axis_tilt,0,0,1);//atilt\n\n    /* rotate on its own */\n    glPushMatrix();\n        glRotatef(bodies[n].spin,0,1,0); //self-spin\n        glRotatef(90,1,0,0); //vert\n        glColor3f(bodies[n].r,bodies[n].g,bodies[n].b);\n        glLineWidth(1.0);\n        glutWireSphere(bodies[n].radius,15,15);\n    glPopMatrix();\n}\n</code></pre>\n\n<p>and my draw orbit function:</p>\n\n<pre><code>void drawOrbit (int n)\n{ /* Draws a polygon to approximate the circular\n   orbit of body \"n\" */\n    float angle = 2*PI/ORBIT_POLY_SIDES;\n    float r = bodies[n].orbital_radius;\n    float i ;\n\n    glPushMatrix();\n    glPolygonMode(GL_FRONT_AND_BACK,GL_LINE);\n    glBegin(GL_POLYGON);\n        glColor3f(bodies[n].r,bodies[n].g,bodies[n].b);\n        for (i = 0; i &lt; 2*PI; i+=angle){\n            glVertex3f(r*sin(i),0,r*cos(i));\n        }\n    glEnd();\n    glPopMatrix();\n    /* This is for you to complete. */\n}\n</code></pre>\n"}, {"tags": ["c", "string", "char", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456935599, "post_id": 35750154, "comment_id": 59178496, "body": "&quot;if I give a string like hello as input in one line, it accepts correctly&quot; --&gt; How is this different that what you expected?"}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1456929912, "last_edit_date": 1456929912, "creation_date": 1456929418, "answer_id": 35750213, "question_id": 35750154, "link": "https://stackoverflow.com/questions/35750154/accepting-string-when-format-specified-is-character/35750213#35750213", "title": "Accepting String when format specified is character", "body": "<p>What's wrong here? It's accepting <em>one character at a time</em>, no matter how many characters there are and putting <em>one character at a time</em> into an array until a condition is met. This is just a (more complicated) way to input a string with an asterisk (<code>*</code>) acting like a null-terminator (<code>'\\0'</code>).</p>\n\n<p>By the way, you should check the bounds in your first loop. Add something like this or your program will crash with a segfault when the input string gets bigger than 100 characters. </p>\n\n<pre><code>do {\n    // your code here\n} while ((sourceString[index-1]!='*') &amp;&amp; (index &lt; 100));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1456929990, "last_edit_date": 1456929990, "creation_date": 1456929640, "answer_id": 35750303, "question_id": 35750154, "link": "https://stackoverflow.com/questions/35750154/accepting-string-when-format-specified-is-character/35750303#35750303", "title": "Accepting String when format specified is character", "body": "<p>When you enter a <em>string</em> and press ENTER, the whole string goes into the input buffer <code>stdin</code>.</p>\n\n<p>Next, as per the property of <code>%c</code> format specifier, as mentioned in the <code>C11</code> standard, chapter \u00a77.21.6.2, <em><code>fscanf()</code></em></p>\n\n<blockquote>\n  <p>Matches a sequence of characters of exactly the number specified by the field\n  width (1 if no field width is present in the directive).</p>\n</blockquote>\n\n<p>It will match (and scan and store) the first entry (<code>char</code>) in the buffer leaving the rest of the buffer content unchanged.</p>\n\n<p>As you're running the <code>scanf()</code> in a loop, the next call will again go and read from the input buffer ( and continue as long as their is content pending in the <code>stdin</code> buffer).</p>\n"}, {"tags": [], "owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1456929950, "creation_date": 1456929950, "answer_id": 35750444, "question_id": 35750154, "link": "https://stackoverflow.com/questions/35750154/accepting-string-when-format-specified-is-character/35750444#35750444", "title": "Accepting String when format specified is character", "body": "<p>When using scanf you need to terminate the input with a whitespace character(e.g. \\n). The scanf will finish reading input when you enter a newline. However since you have a loop it will keep reading input until you enter \"*\".</p>\n"}], "owner": {"reputation": 233, "user_id": 5375911, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/3a63cfd1908b25a60940e19e2878b1ad?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Wheelock", "link": "https://stackoverflow.com/users/5375911/jon-wheelock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 35750303, "answer_count": 3, "score": -1, "last_activity_date": 1456935634, "creation_date": 1456929282, "last_edit_date": 1456935634, "question_id": 35750154, "link": "https://stackoverflow.com/questions/35750154/accepting-string-when-format-specified-is-character", "title": "Accepting String when format specified is character", "body": "<p>I have the below code. I was thinking I should input only one character at a time. But even if I give a string like hello as input in one line, it accepts correctly. Why is this? Is it related to standard input buffer flushing issue?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;conio.h&gt;\n\n\nint main()\n{\n    char sourceString [100];\n    int index=0;\n    printf(\"Enter the characters one by one enter * to stop\\n\");\n    do\n    {\n        scanf(\"%c\",&amp;sourceString[index]);\n        index++;\n    } while (sourceString[index-1]!='*');\n\n    index=0;\n    while (sourceString[index]!='*')\n    {\n        printf(\"%c\",sourceString[index]);\n        index++;\n    }\n    printf(\"\\n\");\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "visual-studio-2015"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 5, "creation_date": 1456928809, "post_id": 35749874, "comment_id": 59173075, "body": "All conditions wrong...jackpot!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456929259, "post_id": 35749874, "comment_id": 59173442, "body": "<code>(10 &lt;= Num &amp;&amp; Num &gt;= 19)</code> do you think this can ever be true ?? You could have found out yourself  with some basic printf debugging."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1456930701, "post_id": 35749874, "comment_id": 59174626, "body": "You do not handle <code>0</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456930802, "post_id": 35749874, "comment_id": 59174720, "body": "See <a href=\"http://grammarist.com/spelling/forty-fourty/\" rel=\"nofollow noreferrer\">fourty</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1456928890, "post_id": 35749933, "comment_id": 59173140, "body": "...and <code>10 &lt;= Num</code> --&gt; <code>Num &gt;= 10</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1456931694, "post_id": 35749933, "comment_id": 59175463, "body": "There is a missing test: it would print <code>-One</code> for <code>1</code>, etc."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 3, "last_activity_date": 1456928789, "creation_date": 1456928789, "answer_id": 35749933, "question_id": 35749874, "link": "https://stackoverflow.com/questions/35749874/program-to-print-the-english-word-of-a-number/35749933#35749933", "title": "Program to print the English word of a number", "body": "<p>Your conditions are wrong and will always be false in normal execution.</p>\n\n<p>Try these modification:</p>\n\n<ul>\n<li><code>10 &lt;= Num &amp;&amp; Num &gt;= 19</code> -> <code>10 &lt;= Num &amp;&amp; Num &lt;= 19</code></li>\n<li><code>20 &lt;= Num &amp;&amp; Num &gt;= 99</code> -> <code>20 &lt;= Num &amp;&amp; Num &lt;= 99</code></li>\n<li><code>1 &lt;= Ones &amp;&amp; Ones &gt;= 9</code> -> <code>1 &lt;= Ones &amp;&amp; Ones &lt;= 9</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1456931363, "creation_date": 1456931363, "answer_id": 35750993, "question_id": 35749874, "link": "https://stackoverflow.com/questions/35749874/program-to-print-the-english-word-of-a-number/35750993#35750993", "title": "Program to print the English word of a number", "body": "<p>All your conditions are incorrect. As a matter of fact, you can simplify the code and remove most of the tests:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int Num, Tens, Ones;\n\n    printf(\"Enter a Two Digit Number: \");\n    scanf(\"%d\", &amp;Num);\n\n    printf(\"You entered the number: \");\n\n    switch (Num) {\n      case 0:   printf(\"Zero\\n\");       break;\n      case 10:  printf(\"Ten\\n\");        break;\n      case 11:  printf(\"Eleven\\n\");     break;\n      case 12:  printf(\"Twelve\\n\");     break;\n      case 13:  printf(\"Thirteen\\n\");   break;\n      case 14:  printf(\"Fourteen\\n\");   break;\n      case 15:  printf(\"Fifteen\\n\");    break;\n      case 16:  printf(\"Sixteen\\n\");    break;\n      case 17:  printf(\"Seventeen\\n\");  break;\n      case 18:  printf(\"Eighteen\\n\");   break;\n      case 19:  printf(\"Nineteen\\n\");   break;\n    }\n\n    Tens = Num / 10;\n    switch (Tens) {\n      case 2:   printf(\"Twenty\");   break;\n      case 3:   printf(\"Thirty\");   break;\n      case 4:   printf(\"Fourty\");   break;\n      case 5:   printf(\"Fifty\");    break;\n      case 6:   printf(\"Sixty\");    break;\n      case 7:   printf(\"Seventy\");  break;\n      case 8:   printf(\"Eighty\");   break;\n      case 9:   printf(\"Ninety\");   break;\n    }\n\n    Ones = Num % 10;\n\n    if (Ones &gt; 0) {\n        if (Tenths &gt; 2)\n            printf(\"-\");\n        switch (Ones) {\n          case 1:   printf(\"One\");      break;\n          case 2:   printf(\"Two\");      break;\n          case 3:   printf(\"Three\");    break;\n          case 4:   printf(\"Four\");     break;\n          case 5:   printf(\"Five\");     break;\n          case 6:   printf(\"Six\");      break;\n          case 7:   printf(\"Seven\");    break;\n          case 8:   printf(\"Eight\");    break;\n          case 9:   printf(\"Nine\");     break;\n        }\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1456932435, "post_id": 35751052, "comment_id": 59176048, "body": "You can simplify with a single array for <code>0</code> to <code>19</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1456990986, "post_id": 35751052, "comment_id": 59203987, "body": "@chqrlie I considered that but went with separate arrays, since the 0 to 9 one is used for two different purposes, so it seemed cleaner to keep them apart. There&#39;s likely even more effective ways to implement this btw, I just whipped something together as an alternative to the potentially far slower <code>switch</code>."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1456931510, "creation_date": 1456931510, "answer_id": 35751052, "question_id": 35749874, "link": "https://stackoverflow.com/questions/35749874/program-to-print-the-english-word-of-a-number/35751052#35751052", "title": "Program to print the English word of a number", "body": "<p>Besides the issues with the operators, consider replacing the <code>switch</code> with look-up tables, for the sake of performance:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid englishize (int n)\n{\n  static const char* const TEXTUAL_0_9 [] =\n  {\n    \"zero\",\n    \"one\",\n    \"two\",\n    \"three\",\n    \"four\",\n    \"five\",\n    \"six\",\n    \"seven\",\n    \"eight\",\n    \"nine\",\n  };\n\n  static const char* const TEXTUAL_10_19 [] =\n  {\n    \"ten\",\n    \"eleven\",\n    \"twelve\",\n    \"thirteen\",\n    \"fourteen\",\n    \"fifteen\",\n    \"sixteen\",\n    \"seventeen\",\n    \"eighteen\",\n    \"nineteen\",\n  };\n\n  static const char* const TENS [] =\n  {\n    \"zero\",\n    \"ten\",\n    \"twenty\",\n    \"thirty\",\n    \"forty\",\n    \"fifty\",\n    \"sixty\",\n    \"seventy\",\n    \"eighty\",\n    \"ninety\"\n  };\n\n  if((n % 10) == 0) // divisible by ten\n  {\n    printf(\"%s\\n\", TENS[n/10]);\n    return ;\n  }\n  else if(n &gt;= 20) // all numbers from 20 and above behave logically\n  {\n    printf(\"%s-%s\\n\", TENS[n/10], TEXTUAL_0_9[n%10]);\n  }\n  else if(n &gt;= 10) // special case for numbers between 10-19\n  {\n    printf(\"%s\\n\", TEXTUAL_10_19[n-10]);\n  }\n  else // n &lt; 10\n  {\n    printf(\"%s\\n\", TEXTUAL_0_9[n]);\n  }\n}\n\nint main ()\n{\n  for(int i=0; i&lt;100; i++)\n  {\n    englishize(i);\n  }\n\n  return 0; \n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5939658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aedc3c1d7437b58cccf60564b94edb6?s=128&d=identicon&r=PG&f=1", "display_name": "Moein IzadPanah", "link": "https://stackoverflow.com/users/5939658/moein-izadpanah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 35749933, "answer_count": 3, "score": -1, "last_activity_date": 1456931510, "creation_date": 1456928657, "last_edit_date": 1456930949, "question_id": 35749874, "link": "https://stackoverflow.com/questions/35749874/program-to-print-the-english-word-of-a-number", "title": "Program to print the English word of a number", "body": "<p>I've written a program which asks the user for a two-digit number and it prints out the English word for the number.\nExample:</p>\n\n<pre><code>Enter a two digit number: 45\nYou entered fourty-five\n</code></pre>\n\n<p>Basically, what I have done is I've put a <code>switch</code> case for numbers 10 to 19, then used another switch case for the Ten's and another for the One's.</p>\n\n<p>the problem is that after entering the number, for some reason it doesn't show anything after printing <code>You entered the number:</code></p>\n\n<p>here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int Num, Tens, Ones;\n\n    printf(\"Enter a Two Digit Number: \");\n    scanf(\"%d\", &amp;Num);\n\n    printf(\"You entered the number: \");\n\n    if (10 &lt;= Num &amp;&amp; Num &gt;= 19) {\n        switch (Num) {\n          case 10:  printf(\"Ten\\n\");        break;\n          case 11:  printf(\"Eleven\\n\");     break;\n          case 12:  printf(\"Twelve\\n\");     break;\n          case 13:  printf(\"Thirteen\\n\");   break;\n          case 14:  printf(\"Fourteen\\n\");   break;\n          case 15:  printf(\"Fifteen\\n\");    break;\n          case 16:  printf(\"Sixteen\\n\");    break;\n          case 17:  printf(\"Seventeen\\n\");  break;\n          case 18:  printf(\"Eighteen\\n\");   break;\n          case 19:  printf(\"Nineteen\\n\");   break;\n        }\n    }\n    if (20 &lt;= Num &amp;&amp; Num &gt;= 99) {\n        Tens = Num / 10;\n        switch (Tens) {\n          case 2:   printf(\"Twenty\");   break;\n          case 3:   printf(\"Thirty\");   break;\n          case 4:   printf(\"Fourty\");   break;\n          case 5:   printf(\"Fifty\");    break;\n          case 6:   printf(\"Sixty\");    break;\n          case 7:   printf(\"Seventy\");  break;\n          case 8:   printf(\"Eighty\");   break;\n          case 9:   printf(\"Ninety\");   break;\n        }\n    }\n    Ones = Num % 10;\n    if (Ones == 0)\n        printf(\"\\n\");\n    else\n    if (1 &lt;= Ones &amp;&amp; Ones &gt;= 9) {\n        printf(\"-\");\n        switch (Ones) {\n          case 1: printf(\"One\");        break;\n          case 2:   printf(\"Two\");      break;\n          case 3:   printf(\"Three\");    break;\n          case 4:   printf(\"Four\");     break;\n          case 5:   printf(\"Five\");     break;\n          case 6:   printf(\"Six\");      break;\n          case 7:   printf(\"Seven\");    break;\n          case 8:   printf(\"Eight\");    break;\n          case 9:   printf(\"Nine\");     break;\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "image", "sdl", "grayscale"], "comments": [{"owner": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "edited": false, "score": 0, "creation_date": 1457019225, "post_id": 35749831, "comment_id": 59224326, "body": "Hard to say without seeing a sample image. I tried your code using a stub version of <code>qscam_create_image()</code> that loads a fixed 16-bit little-endian grayscale image, and it looks fine. Are you certain the image data is using the full 16 bits? If its 12 bits, you could try a mask value of 0x0ff0."}, {"owner": {"reputation": 459, "user_id": 1869278, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/52e2f8c81b2630421249ce8fdb712724?s=128&d=identicon&r=PG", "display_name": "Kostrahb", "link": "https://stackoverflow.com/users/1869278/kostrahb"}, "reply_to_user": {"reputation": 1419, "user_id": 488095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ro1E0.jpg?s=128&g=1", "display_name": "jamieguinan", "link": "https://stackoverflow.com/users/488095/jamieguinan"}, "edited": false, "score": 1, "creation_date": 1457027267, "post_id": 35749831, "comment_id": 59230288, "body": "It&#39;s really 16-bit. For now I have solved it by function that recalculates image to 8-bits (just divides data by 256). Speed isn&#39;t that important. And also the second problem is solved. I had to play with call to SDL_CreateRGBSurfaceFrom() and swap widht and height and adjust other parameters in that function accordingly. Picture is rotated but it&#39;s ok."}], "owner": {"reputation": 459, "user_id": 1869278, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/52e2f8c81b2630421249ce8fdb712724?s=128&d=identicon&r=PG", "display_name": "Kostrahb", "link": "https://stackoverflow.com/users/1869278/kostrahb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456931611, "creation_date": 1456928563, "last_edit_date": 1456931611, "question_id": 35749831, "link": "https://stackoverflow.com/questions/35749831/how-can-i-print-16-bit-grayscale-image-in-sdl", "title": "How can I print 16-bit grayscale image in SDL?", "body": "<p>I have a structure which contains 16-bit grayscale image from scientific camera, structure is like this:</p>\n\n<pre><code>struct qscam_image {\n    int row;\n    int col;\n    int max_gray; // this should be 65535\n    unsigned short *data;\n};\n</code></pre>\n\n<p>Then I have program which should display updated grayscale image each second or so (depending on time which takes to transfer data from camera).</p>\n\n<pre><code>#include &lt;GL/gl.h&gt;\n#include &lt;GL/glu.h&gt;\n#include \"qscapi.h\" \n#include &lt;SDL/SDL.h&gt;\n\nstatic void render(SDL_Surface * sf)\n{\n    SDL_Surface * screen = SDL_GetVideoSurface();\n    if(SDL_BlitSurface(sf, NULL, screen, NULL) == 0)\n        SDL_UpdateRect(screen, 0, 0, 0, 0);\n}\n\nint main(int argc, char **argv) \n{\n//initialize camera\n    struct qscam_image *image = NULL;\n    qscam_create_image(&amp;image);\n    qscam_init();\n\n//initialize SDL\n    SDL_Event ev;\n    int active;\n    /* Initialize SDL */\n    if(SDL_Init(SDL_INIT_VIDEO) != 0)\n        fprintf(stderr,\"Could not initialize SDL: %s\\n\",SDL_GetError());\n    SDL_SetVideoMode(1900, 1080, 24, SDL_HWSURFACE);\n    /* Main loop */\n    active = 1;\n    while(active)\n    {\n        /* Handle events */\n        while(SDL_PollEvent(&amp;ev))\n        {\n            if(ev.type == SDL_QUIT)\n                active = 0; /* End */\n        }\n        qscam_get_image(0.030, &amp;image); //get image from camera\n\n        /* create the image variable */\n        Uint32 mask = 0xff00; // gray\n        SDL_Surface* print_image = SDL_CreateRGBSurfaceFrom\n            (image-&gt;data, image-&gt;col, image-&gt;row,\n            16, image-&gt;col*2, mask, mask, mask, 0);\n\n        render(print_image);\n    }\n    /* Exit */\n    qscam_disconnect();\n    qscam_destroy_image(&amp;image);\n    SDL_Quit();\n    return 0;\n}\n</code></pre>\n\n<p>It works to some extent, with <code>mask=0x00ff</code> it displays random noise but that is only 8-bit image. With <code>mask=0xffff</code> nothing is displayed and with <code>mask=0xff00</code> again image is displayed, but in a way that leads me to think that the image matrix should be transposed.</p>\n\n<p>First question: What is the proper way to display 16-bit grayscale image (which is in memory saved as <code>unsigned short[]</code>) using SDL and c?</p>\n\n<p>And second question: Is there any easy way to transpose image matrix with SDL or do I have to write separate function?</p>\n"}, {"tags": ["c", "arrays", "multithreading", "algorithm"], "comments": [{"owner": {"reputation": 235601, "user_id": 60761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bf43bae0431d8f4a062234b5e3a0cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Henk Holterman", "link": "https://stackoverflow.com/users/60761/henk-holterman"}, "edited": false, "score": 1, "creation_date": 1456928164, "post_id": 35749559, "comment_id": 59172496, "body": "Hard to say for sure but the array will suffer from non-locality, ie not efficiently using the cache. But how will you find the neighbours from a linked list?"}, {"owner": {"reputation": 11, "user_id": 5125525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374b8442350495c6b87045d1763a1640?s=128&d=identicon&r=PG&f=1", "display_name": "kenb", "link": "https://stackoverflow.com/users/5125525/kenb"}, "reply_to_user": {"reputation": 235601, "user_id": 60761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bf43bae0431d8f4a062234b5e3a0cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Henk Holterman", "link": "https://stackoverflow.com/users/60761/henk-holterman"}, "edited": false, "score": 0, "creation_date": 1456928625, "post_id": 35749559, "comment_id": 59172915, "body": "The program makes use of an nxmx2 array, the second lay of which stores the neighbours of each element. Since every live cell is referenced you can check the 2nd layer of the live cell and its neighbours co-ordinates to determine who lives and dies. The algorithm is currently 2x faster than a conventional algorithm"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1456928878, "post_id": 35749559, "comment_id": 59173132, "body": "Fast algorithm uses a bitmap (one 64 bit integer representing 64 cells) and implements the neighbour counting with hard-coded binary logic. (Can&#39;t remember who said: When in doubt, use brute force)."}], "answers": [{"tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1456928611, "creation_date": 1456928611, "answer_id": 35749853, "question_id": 35749559, "link": "https://stackoverflow.com/questions/35749559/using-linked-list-vs-large-array-for-searching/35749853#35749853", "title": "using linked list vs large array for searching", "body": "<p>Game Of Life and searching?????</p>\n\n<p>If you want a multithreaded Game Of Life, calculate line n/2 on its own but don't store it in the array, just in a buffer, run two threads that calculate and store lines 0 to n/2 - 1 resp. lines n/2 + 1 to n-1, then copy the line n/2 into the result. </p>\n\n<p>For four threads, calculate lines at n/4, n/2, 3n/4 first, give each thread a quarter of the job, then copy the three lines into the array. </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5125525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374b8442350495c6b87045d1763a1640?s=128&d=identicon&r=PG&f=1", "display_name": "kenb", "link": "https://stackoverflow.com/users/5125525/kenb"}, "edited": false, "score": 0, "creation_date": 1456929901, "post_id": 35750192, "comment_id": 59173979, "body": "the array which stores the pointers to structs containing live cell co-ordinates will remain largely empty and searching will be capped at the furthest non null element, and elements set to null in between that furthest element and the zeroth element will be reused using a stack, making the array search space much smaller. Would this change computing time at all? The amount of space allocated to that array is much more for redundancy than anything, which is why I am hypothesizing this would be a much faster implementation especially with multithreading, but as you mentioned it could be risky."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1456929393, "creation_date": 1456929393, "answer_id": 35750192, "question_id": 35749559, "link": "https://stackoverflow.com/questions/35749559/using-linked-list-vs-large-array-for-searching/35750192#35750192", "title": "using linked list vs large array for searching", "body": "<p>If your array is as sparse as most GOL boards, then the list will likely be <em>much, much</em> faster. Having a pointer to the next piece of data is way better than scanning for it. </p>\n\n<p>That said, the overall performance may not be better, as others have mentioned. </p>\n"}], "owner": {"reputation": 11, "user_id": 5125525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374b8442350495c6b87045d1763a1640?s=128&d=identicon&r=PG&f=1", "display_name": "kenb", "link": "https://stackoverflow.com/users/5125525/kenb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1456929991, "creation_date": 1456927838, "last_edit_date": 1456929991, "question_id": 35749559, "link": "https://stackoverflow.com/questions/35749559/using-linked-list-vs-large-array-for-searching", "title": "using linked list vs large array for searching", "body": "<p>I am implementing some algorithmic changes to the conventional game of life for an assignment. </p>\n\n<p>Essentially, I currently have two options for implementing a multithreaded searching algorithm that improves on the efficiency of a previous algorithm.</p>\n\n<ul>\n<li>Either search through a linked list using two threads and relay the data to two other threads to process(application is running on a quad core) </li>\n<li>To have a massive preallocated array which will remain largely empty containing only pointers to predefined structures, in which case the searching could be done much faster and there would be no issues in syncing the threads. </li>\n</ul>\n\n<p>Would a faster search outweigh memory requirements and reduce computing time? </p>\n\n<p>It should be mentioned that the array will remain largely empty, but the overall memory allocated to it would be far larger than the linked list, not to mention the index of the furthest most nonempty array element could also be stored so as to prevent the program from searching an entire array. </p>\n\n<p>I should also mention that the array stores pointers to live cell coordinates, and as such is only kept so large as a worst case measure. I am also planning on ignoring any <code>NULL</code> values in order to skip array elements who have been deleted.  </p>\n"}, {"tags": ["c", "arrays", "function", "pointers", "static"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 4, "creation_date": 1456927543, "post_id": 35749396, "comment_id": 59171998, "body": "It is a long question. I would suggest to read a good C programming book, compile your example with warnings &amp; debug info (<code>gcc -Wall -Wextra -g</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...) and run your example step by step in a debugger (<code>gdb</code>) and query the value of interesting variables"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1456932173, "post_id": 35749396, "comment_id": 59175814, "body": "As tutorials go, that one has a horrible mistake in it.  To see what I mean, call <code>getRandom()</code> at least three times in a row and compare the numbers it emits..."}], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1456928037, "post_id": 35749498, "comment_id": 59172387, "body": "I don&#39;t think quoting the standard is worth it or meaningful altogether in this case."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456928059, "post_id": 35749498, "comment_id": 59172405, "body": "So, the place where <code>static</code> variables are stored is not specified by the standard and it <i>could</i> be on the stack?"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 1, "last_activity_date": 1456927973, "last_edit_date": 1456927973, "creation_date": 1456927693, "answer_id": 35749498, "question_id": 35749396, "link": "https://stackoverflow.com/questions/35749396/returning-pointers-from-function-as-static-variable/35749498#35749498", "title": "Returning pointers from function as static variable", "body": "<p><code>getRandom()</code> returns pointer to the first element of <code>r[10]</code>.</p>\n\n<p>Quote from <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow\">N1256</a> 6.3.2.1 Lvalues, arrays, and function designators</p>\n\n<blockquote>\n  <p>3 Except when it is the operand of the sizeof operator or the unary &amp; operator, or is a\n  string literal used to initialize an array, an expression that has type \u2018\u2018array of type\u2019\u2019 is\n  converted to an expression with type \u2018\u2018pointer to type\u2019\u2019 that points to the initial element of\n  the array object and is not an lvalue. If the array object has register storage class, the\n  behavior is undefined.</p>\n</blockquote>\n\n<p>If <code>r[10]</code> is not <code>static</code>, the array wil vanish on returning from <code>getRandom()</code> and accessing after that will invoke <em>undefined behavior</em>.</p>\n\n<p>\"variables in any function declared without malloc would be stored as stack memory\" is not correct. Any variables in C need not be stored as stack memory. Typically, static variables are not stored on stack while variables with automatic storage duration are stored on stack.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1456927717, "creation_date": 1456927717, "answer_id": 35749509, "question_id": 35749396, "link": "https://stackoverflow.com/questions/35749396/returning-pointers-from-function-as-static-variable/35749509#35749509", "title": "Returning pointers from function as static variable", "body": "<blockquote>\n  <p><em>the function actually returns the address of the first member of r[10], or the pointer to the first address of r[10]?</em></p>\n</blockquote>\n\n<p>A: Address of the first member.</p>\n\n<blockquote>\n  <p><em>Eventhough r will poof as soon as getRandom() stops working,....</em></p>\n</blockquote>\n\n<p>A: No, <code>static</code> variables do not go into program stack memory (unlike local variables). They <em>live</em> entire time of the program execution.</p>\n\n<blockquote>\n  <p><em>Thirdly, is it correct that, variables in any function declared without malloc would be stored as stack memory?</em></p>\n</blockquote>\n\n<p>In short, yes. OTOH, <code>malloc()</code>-ed memory lifetime is not limited by the function scope.</p>\n"}, {"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1456927899, "creation_date": 1456927899, "answer_id": 35749586, "question_id": 35749396, "link": "https://stackoverflow.com/questions/35749396/returning-pointers-from-function-as-static-variable/35749586#35749586", "title": "Returning pointers from function as static variable", "body": "<blockquote>\n  <p>The article explains that, since a pointer declared in a function is a\n  local variable, hence it has to be defined as 'static'. (line 7,\n  variable r)</p>\n</blockquote>\n\n<p><code>r</code> is a array of integers, not a pointer. And local need not imply <code>static</code>, which infers another meaning.</p>\n\n<blockquote>\n  <p>the function actually returns the address of the first member of\n  r[10], or the pointer to the first address of r[10]?</p>\n</blockquote>\n\n<p>It returns the <em>address</em> of the first member: this happens automatically when you type <code>return r</code> which is equivalent to the more verbose <code>return &amp;r[0]</code>.</p>\n\n<p><code>static</code> variables exist from the beginning of the program and are destroyed at its end -- thus before <code>main</code> and after <code>main</code>. To return a pointer to local data, like from a function, it has to be <code>static</code>, otherwise -as you say- you would be accessing deallocated data, which is not allowed.</p>\n"}], "owner": {"reputation": 117, "user_id": 6008002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537edceb5d7477e85573a0eb2838f558?s=128&d=identicon&r=PG&f=1", "display_name": "C. Pave", "link": "https://stackoverflow.com/users/6008002/c-pave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 979, "favorite_count": 0, "accepted_answer_id": 35749498, "answer_count": 3, "score": 1, "last_activity_date": 1456929148, "creation_date": 1456927411, "last_edit_date": 1456929148, "question_id": 35749396, "link": "https://stackoverflow.com/questions/35749396/returning-pointers-from-function-as-static-variable", "title": "Returning pointers from function as static variable", "body": "<p>I'm studying C and reading <a href=\"http://www.tutorialspoint.com/cprogramming/c_return_pointer_from_functions.htm\" rel=\"nofollow\">this</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\n/* function to generate and retrun random numbers. */\nint * getRandom( ) {\n\n   static int  r[10];\n   int i;\n\n   /* set the seed */\n   srand( (unsigned)time( NULL ) );\n\n   for ( i = 0; i &lt; 10; ++i) {\n      r[i] = rand();\n      printf(\"%d\\n\", r[i] );\n   }\n\n   return r;\n}\n\n/* main function to call above defined function */\nint main () {\n\n   /* a pointer to an int */\n   int *p;\n   int i;\n\n   p = getRandom();\n\n   for ( i = 0; i &lt; 10; i++ ) {\n      printf(\"*(p + [%d]) : %d\\n\", i, *(p + i) );\n   }\n\n   return 0;\n}\n</code></pre>\n\n<p>The article explains that, since a pointer declared in a function is a local variable, hence it has to be defined as 'static'. (line 7, variable r)</p>\n\n<p>There are three points I'm concerned.</p>\n\n<ul>\n<li><p>Firstly, \"static int r[10]\" declares that they want to create an int array of size 10. When it's returned from the getRandom function with \"return r\", the function actually returns <strong>the address</strong> of the first member of r[10], or <strong>the pointer</strong> to the first address of r[10]?</p></li>\n<li><p>Secondly, in main function, p = getRandom() means the address or pointer returned from getRandom() is assign to pointer p. Eventhough r will poof as soon as getRandom() stops working, the address would have been already assigned to p. So, why is it needed to be declared as static? </p>\n\n<p>Or getRandom() returns address to the pointer pointing to r[10], hence when disappear, p would point to empty address not to r[10]?</p>\n\n<p>Or, not only pointer to r, but also r[10] array would disappear when getRandom() stops, so it's needed to be static?</p></li>\n<li><p>Thirdly, is it correct that, variables in any function declared without malloc would be stored as stack memory?</p></li>\n</ul>\n"}, {"tags": ["c", "arrays", "pointers", "reference"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 5, "creation_date": 1456926471, "post_id": 35748999, "comment_id": 59171124, "body": "use <code>%p</code> with a cast of the argument to <code>void *</code> to print address."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1456926613, "post_id": 35748999, "comment_id": 59171225, "body": "If an array was a pointer, it would be called &quot;pointer&quot;, not &quot;array&quot;! &amp;array is <b>not</b> the same as <code>array</code>. Even <b>iff</b> an array <i>decays</i> most time to a pointer, it is a different pointer. And you have more than this missconception: Your &quot;header&quot; is wrong. Please look around what a header has to contain and what the guard actually is meant for."}, {"owner": {"reputation": 103, "user_id": 4937730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1619865914922300/picture?type=large", "display_name": "Aleks ", "link": "https://stackoverflow.com/users/4937730/aleks"}, "edited": false, "score": 0, "creation_date": 1456927818, "post_id": 35748999, "comment_id": 59172212, "body": "I&#39;m pretty new to C and I&#39;ve read that &quot;public&quot; structs should be declared in a header."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456930505, "post_id": 35748999, "comment_id": 59174469, "body": "Note: Allocation problem: Use <code>Account *a1 = malloc(sizeof *Account);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4937730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1619865914922300/picture?type=large", "display_name": "Aleks ", "link": "https://stackoverflow.com/users/4937730/aleks"}, "edited": false, "score": 0, "creation_date": 1456932083, "post_id": 35749939, "comment_id": 59175743, "body": "Thank you a lot Vlad for your answer, since I began writing with C I visualize memory as a big array. This approach helps me understand about the correlation between mutability and references in higher-level languages."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1456930795, "last_edit_date": 1456930795, "creation_date": 1456928804, "answer_id": 35749939, "question_id": 35748999, "link": "https://stackoverflow.com/questions/35748999/array-array-what-about-structs/35749939#35749939", "title": "&amp;array == array, what about structs?", "body": "<p>An array is internally represented as a contiguous extent of memory. In the very beginning of the extent there is placed the first element of the array.</p>\n\n<p>If you have an array named for example the same way as in your question <code>accounts</code> then the address of the array and the address of the first element of the array have the same value.</p>\n\n<p>If to consider your example then you have</p>\n\n<pre><code>Account * accounts[2];\n</code></pre>\n\n<p>Arrays in expressions with rare exceptions as for example using them in the sizeof operator are converted to pointers to their first elements.</p>\n\n<p>Thus expression <code>accounts</code> has type <code>Account **</code> and the equation</p>\n\n<pre><code>accounts == &amp;accounts[0]\n</code></pre>\n\n<p>evaluates to true.</p>\n\n<p>Expression <code>&amp;accounts</code> has the same value because it is the address of the extent but a different type. Its type is</p>\n\n<pre><code>Account * ( * )[2]\n</code></pre>\n\n<p>That is if you write for example</p>\n\n<pre><code>Account *( *p )[2] = accounts;\n\nprintf( \"*p = %zu\\n\", sizeof( *p ) ); \n</code></pre>\n\n<p>then the output will be equal to 16 because in the environment where you run your own code the size of pointers is equal to 8 and the array consists from two elements that are pointers.</p>\n\n<p>You may not write condition</p>\n\n<pre><code>&amp;accounts == accounts\n</code></pre>\n\n<p>because the operands have different types. But if you write</p>\n\n<pre><code>( void *)&amp;accounts == ( void * ) accounts \n</code></pre>\n\n<p>then this condition evaluates to true.</p>\n\n<p>So the values of expressions</p>\n\n<p><code>&amp;accounts</code>, <code>accounts</code>, and <code>&amp;accounts[0]</code> are equal each other and are the address of the memory extent occupied by the array. </p>\n\n<p>As for structures then the address of a structure is equal to the address of its first member. However names of objects of a structure type are not implicitly converted to pointers to their first members.</p>\n\n<blockquote>\n  <p>If I replace &amp;accounts[i] by accounts[i], then by *accounts[i] I get :</p>\n</blockquote>\n\n<p><code>&amp;accounts[i]</code> gives the address of the element of the array. So you will get values</p>\n\n<pre><code>Account n\u00b01 is owned by David , its address is 1606416480\n\nAccount n\u00b02 is owned by Toto , its address is 1606416488\n</code></pre>\n\n<p>The difference between the values is equal to <code>8</code> that is the value of expression <code>sizeof( Account * )</code></p>\n\n<p><code>accounts[i]</code> gives the values stored in the elements of the array. They are addresses of the dynamically alllocated memory for each object of the structure type.</p>\n\n<p>*accounts[i] is an object of the structure type. As the format specifier in the call of printf does not corresponds to the object passed as an argument then the function behaviour is undefined.</p>\n\n<p>Take into account that to print pointers you have to use format specifier <code>%p</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1456935686, "creation_date": 1456935686, "answer_id": 35752720, "question_id": 35748999, "link": "https://stackoverflow.com/questions/35748999/array-array-what-about-structs/35752720#35752720", "title": "&amp;array == array, what about structs?", "body": "<p><strong>TL/DR version:</strong></p>\n\n<p>Arrays are special, and under most circumstances an array expression is treated as a pointer to the first element of the array.  <code>a</code> and <code>&amp;a</code> will yield the same value (address of the first element of the array <code>a</code>), although the types of the expressions will be different.</p>\n\n<p>This is not the case with <code>struct</code> types (or any other aggregate type).  </p>\n\n<p><strong>David Foster Wallace version:</strong></p>\n\n<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal being used to initialize another array in a declaration, an <em>expression</em> of type \"<code>N</code>-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element in the array.  </p>\n\n<p>Why is this the case?</p>\n\n<p>First of all, let's look at how an array is represented in memory.  Given the declaration</p>\n\n<pre><code>T a[N];\n</code></pre>\n\n<p>then you get something that looks like this:</p>\n\n<pre><code>   +---+\na: |   | a[0]\n   +---+\n   |   | a[1]\n   +---+\n    ...\n   +---+\n   |   | a[N-1]\n   +---+\n</code></pre>\n\n<p>Storage is set aside for the array elements and <em>nothing else</em>; there's no storage for any metadata, or for any pointer to the first element of the array.  Critically, there's no object <code>arr</code> apart from the array elements (said another way, the object <code>arr</code> <em>is</em> the array elements).  </p>\n\n<p>But the array subscript operation <code>a[i]</code> is <em>defined</em> as <code>*(a + i)</code>; that is, given an address <code>a</code>, we offset <code>i</code> elements (<em>not bytes!</em>) from that address and dereference the result.  </p>\n\n<p>But <code>a</code> is an <em>array</em>, not a pointer, so how can that work?  </p>\n\n<p>Like this - except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize another array in a declaration, an <em>expression</em> of type \"<code>N</code>-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array<sup>1</sup>.</p>\n\n<p>Thus, in code like</p>\n\n<pre><code>printf( \"a = %p\\n\", (void *) a ); // *always* use `%p` to print pointer values\n</code></pre>\n\n<p>the expression <code>a</code> is not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, so it is converted (\"decays\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression is the address of the first element.</p>\n\n<p>Here's a handy table to remember some of this:</p>\n\n<pre><code>\n  Expression        Type        \"Decays\" to        Value\n  ----------        ----        -----------        -----\n           a        T [N]       T *                Address of first element \n          &a        T (*)[N]    n/a                Same value as above, different type\n          *a        T           n/a                Value of first element\n        a[i]        T           n/a                Value of <code>i</code>'th element\n       &a[i]        T *         n/a                Address of <code>i</code>'th element\n    sizeof a        size_t      n/a                Number of bytes in array\n   sizeof *a        size_t      n/a                Number of bytes in single element\n sizeof a[i]        size_t      n/a                Same as above\n   sizeof &a        size_t      n/a                Number of bytes in pointer to array\nsizeof &a[i]        size_t      n/a                Number of bytes in pointer to single element\n</code></pre>\n\n<p>Thus, <code>sizeof a == sizeof (T [N])</code>, <code>sizeof *a == sizeof (T)</code>, <code>sizeof &amp;a == sizeof (T (*)[N])</code>, and <code>sizeof &amp;a[i] == sizeof (T *)</code>.  </p>\n\n<p>Notice that the expressions <code>a</code>, <code>&amp;a</code>, and <code>&amp;a[0]</code> all yield the same <em>value</em> (the address of the first element of the array), but the <em>types</em> of the expressions will be different.  <code>a</code> and <code>*&amp;a[0]</code> both have type <code>T *</code> (pointer to <code>T</code>), but <code>&amp;a</code> has type <code>T (*)[N]</code> (pointer to <code>N</code>-element array of <code>T</code>).  This matters for things like pointer arithmetic.  For example, assume the following code:</p>\n\n<pre><code>T a[N];\nT *p = a;\nT (*ap)[N] = &amp;a;\n\nprintf( \" p = %p,  p + 1 = %p\\n\", (void *) p, (void *) p + 1 );\nprintf( \"ap = %p, ap + 1 = %p\\n\", (void *) ap, (void *) ap + 1 );\n</code></pre>\n\n<p><code>p + 1</code> will yield the address of the next element of the array following <code>p</code>.  <code>ap + 1</code> will yield the address of the next <em><code>N</code>-element array of <code>T</code></em> following the current array.  </p>\n\n<p>There is no corresponding conversion rule for <code>struct</code> or other aggregate types, because there is no need to treat a <code>struct</code> expression as a pointer in some contexts vs. others.  The component selection operators <code>.</code> and <code>-&gt;</code> don't work the same way as the subscript operator. </p>\n\n<p><hr>\n<sup>1.  C was derived from an earlier programming language called B (go figure), and in B storage <em>was</em> set aside for a \"pointer\" to the first element of the array (in B, pointers were just integer offsets).  Ritchie kept B's array semantics when he started designing C, but ran into an issue when he started adding <code>struct</code> types; he didn't want to mix the array pointer metadata within the struct data.  He solved the problem by creating the conversion rule described above.\n</sup>  </p>\n"}], "owner": {"reputation": 103, "user_id": 4937730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1619865914922300/picture?type=large", "display_name": "Aleks ", "link": "https://stackoverflow.com/users/4937730/aleks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 35749939, "answer_count": 2, "score": -4, "last_activity_date": 1456935686, "creation_date": 1456926392, "last_edit_date": 1592644375, "question_id": 35748999, "link": "https://stackoverflow.com/questions/35748999/array-array-what-about-structs", "title": "&amp;array == array, what about structs?", "body": "<p>I just started messing with structs and pointers.</p>\n<p>Here's my .h :</p>\n<pre><code>#ifndef struct_struct_h\n#include &lt;string.h&gt;\n#define struct_struct_h\n\n\n\n#endif\n\n\nint count=0;\n\ntypedef struct\n{\n    int num;\n    double balance;\n    const char * name;\n    struct Account * acnt;\n    \n} Account;\n\nAccount* a = NULL;\n\nAccount* new_account(const char * n)\n{\n    Account *a1 = malloc(sizeof(Account));\n    \n    a1-&gt;num=++count;\n    a1-&gt;name = n;\n    return a1;\n}\n</code></pre>\n<p>Here's my main.c :</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &quot;struct.h&quot;\n\n\n\nint main(int argc, const char * argv[])\n{\n\n    // insert code here...\n    Account* accounts[2];\n    \n    for(int i=0; i&lt;2; i++)\n    {\n        accounts[i] = (i==0 ? new_account(&quot;David&quot;) : new_account(&quot;Toto&quot;) );\n    }\n    printf(&quot;Accounts array address is %i\\n&quot;,&amp;accounts);\n    \n    for(int i=0; i&lt;2;i++)\n    {\n        printf(&quot;Account n\u00b0%i is owned by %s \\n, its address is %i\\n&quot;,accounts[i]-&gt;num,accounts[i]-&gt;name,&amp;accounts[i]);\n    }\n    printf(&quot;There are %i accounts.\\n&quot;,count);\n    \n    return 0;\n}\n</code></pre>\n<p>If I replace &amp;accounts by accounts, I get the same result : @array, either is &amp;accounts[0], it's ok.</p>\n<blockquote>\n<p>Accounts array address is 1606416480</p>\n</blockquote>\n<p>If I do replace &amp;accounts by *accounts, I get this :</p>\n<blockquote>\n<p>Accounts array address is 1063600</p>\n</blockquote>\n<p>Second output is :</p>\n<blockquote>\n<p>Account n\u00b01 is owned by David\n, its address is 1606416480</p>\n<p>Account n\u00b02 is owned by Toto\n, its address is 1606416488</p>\n</blockquote>\n<p>Actually these are the @ of account pointers contained in accounts, these @ take 8B each selves in memory.</p>\n<p>If I replace &amp;accounts[i] by accounts[i], then by *accounts[i] I get :</p>\n<blockquote>\n<p>Account n\u00b01 is owned by David\n, its address is 1063600</p>\n<p>Account n\u00b02 is owned by Toto  , its address is 1063632</p>\n<p>Account n\u00b01 is owned by David\n, its address is 3874</p>\n<p>Account n\u00b02 is owned by Toto\n, its address is 3880</p>\n</blockquote>\n<p>In the first case I have 2 pointers, and in the second I have 2 *pointers.</p>\n<p>*STRUCT and STRUCT are different, why ?</p>\n"}, {"tags": ["c", "malloc", "free", "space-complexity"], "comments": [{"owner": {"reputation": 3883, "user_id": 1255826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1e606bef8a2d55a874baac87ae488a09?s=128&d=identicon&r=PG", "display_name": "Zorgatone", "link": "https://stackoverflow.com/users/1255826/zorgatone"}, "edited": false, "score": 2, "creation_date": 1456924670, "post_id": 35748240, "comment_id": 59169749, "body": "Malloc will allocate the memory, return the pointer and pass it to free() and it&#39;s then freed. It counts"}, {"owner": {"reputation": 3883, "user_id": 1255826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1e606bef8a2d55a874baac87ae488a09?s=128&d=identicon&r=PG", "display_name": "Zorgatone", "link": "https://stackoverflow.com/users/1255826/zorgatone"}, "edited": false, "score": 2, "creation_date": 1456924722, "post_id": 35748240, "comment_id": 59169780, "body": "IMO there&#39;s no reason to malloc and free like that"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456925870, "post_id": 35748240, "comment_id": 59170657, "body": "@Olaf The code compiles fine. What do you think is wrong with it?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1456926077, "post_id": 35748240, "comment_id": 59170813, "body": "@JeremyP: Sorry, I overlooked the declaration of <code>k</code> in the inner loop. The rest stands, however. And <code>arr</code> is not even used."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456926490, "post_id": 35748240, "comment_id": 59171138, "body": "@Olaf I suspect this is a homework question.Also,  I&#39;d be surprised if <code>free(malloc(n))</code> is ever optimised away because <code>malloc()</code> has side effects that the compiler doesn&#39;t know about."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1456927056, "post_id": 35748240, "comment_id": 59171606, "body": "@JeremyP: You might be surprised how much a modern compiler knows about the standard library functions. The combination of <code>feee(malloc())</code> has no <i>required</i> side-effects by the standard. They very well can cancel each other out. But I doubt it checks for this nonsense case, thats why I wrote &quot;... <b><i>effectively</i></b> a null statement&quot;. It still is useless, such tasks are why people leave answering to the question to others. A practically usabel example would increase motivation. But as most teachers can&#39;t/don&#39;t really program themselves ..."}, {"owner": {"reputation": 27, "user_id": 5711530, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/775a575547a7059e41c3621e66869150?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5711530/anna"}, "edited": false, "score": 0, "creation_date": 1456928332, "post_id": 35748240, "comment_id": 59172646, "body": "It is a question from an exam, they don&#39;t provide full answers and this way of using malloc seemed odd to me so I decided to ask about it. It&#39;s good to hear a confirmation that it is useless, I was rather confused as to why would anyone write such code anyway (now I understand it was just meant to confuse)."}], "answers": [{"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 0, "last_activity_date": 1456926289, "creation_date": 1456926289, "answer_id": 35748963, "question_id": 35748240, "link": "https://stackoverflow.com/questions/35748240/space-complexity-of-freemallocm/35748963#35748963", "title": "space complexity of free(malloc(m))", "body": "<p>The combined effect of the two loops seems to be to set m to <code>n*n-1</code> The malloc then allocates that number of bytes and frees it. Hence the space complexity of O(n^2).</p>\n"}], "owner": {"reputation": 27, "user_id": 5711530, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/775a575547a7059e41c3621e66869150?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5711530/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1456926289, "creation_date": 1456924418, "question_id": 35748240, "link": "https://stackoverflow.com/questions/35748240/space-complexity-of-freemallocm", "title": "space complexity of free(malloc(m))", "body": "<p>I was trying to find the space complexity of the following code:</p>\n\n<pre><code>void f(int arr[], int n){\n    int m=0; \n    for(int i=1; i&lt;n*n; ++i)\n        for(int k=0; k&lt;n*n; k+=i){\n            m=(m&gt;k)?m:k; \n            printf(\"1\");\n        }\n    free(malloc(m)); \n}\n</code></pre>\n\n<p>the answer is n^2, however I don't quite understand how the memory allocation works here. I mean, why do we put the malloc inside the free? Doesn't it mean that we don't allocate any memory at all (because we free it right away? Or does it still count?).</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "sockets", "udp", "recvfrom"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1456924623, "post_id": 35747966, "comment_id": 59169712, "body": "<i>&quot;ID shall be required in the UDP packets for the sequence because in multi-threading the order of incoming packets is not guaranteed.&quot;</i>  Actually, the order of incoming UDP packets is <i>never</i> guaranteed, regardless of whether multiple threads are involved or not.  So if the order of packets is important than you need some kind of sequence number anyway."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 2, "creation_date": 1456925003, "post_id": 35747966, "comment_id": 59169971, "body": "I don&#39;t buy the idea that <code>recvfrom</code> takes 10 milliseconds, that seems ridiculously long. Are you sure you are just measuring the time taken to execute the system call?"}, {"owner": {"reputation": 31, "user_id": 5714931, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d539350b0edbea30ccbfa03b0bad35b2?s=128&d=identicon&r=PG&f=1", "display_name": "sto_user", "link": "https://stackoverflow.com/users/5714931/sto-user"}, "edited": false, "score": 0, "creation_date": 1456925384, "post_id": 35747966, "comment_id": 59170281, "body": "Thank you. What percent chances that the packets will not be in order when the only sender hardware is in proximity , wired and there are no link congestions. Wireshark packet sniffer so far showed the packets were received in order."}, {"owner": {"reputation": 31, "user_id": 5714931, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d539350b0edbea30ccbfa03b0bad35b2?s=128&d=identicon&r=PG&f=1", "display_name": "sto_user", "link": "https://stackoverflow.com/users/5714931/sto-user"}, "edited": false, "score": 0, "creation_date": 1456925700, "post_id": 35747966, "comment_id": 59170528, "body": "I measure the time just before and after  calling recvfrom() and result durations varies greatly for every call."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1456926028, "post_id": 35747966, "comment_id": 59170772, "body": "You are performing 1K systemcalls/second. That won&#39;t change when you use java. And &quot;passing the packets to java&quot; will require <i>at least</i> another 2K packets per second. (plus context switches)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5714931, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d539350b0edbea30ccbfa03b0bad35b2?s=128&d=identicon&r=PG&f=1", "display_name": "sto_user", "link": "https://stackoverflow.com/users/5714931/sto-user"}, "edited": false, "score": 0, "creation_date": 1456924341, "post_id": 35748107, "comment_id": 59169520, "body": "Thank you. The burst would come every 5-10 minutes and last for may be 2-3 seconds depending on how much the data is. I have a question. What does it mean when you say reading all packets as fast as the lower levels can ? How can I control that ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 31, "user_id": 5714931, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d539350b0edbea30ccbfa03b0bad35b2?s=128&d=identicon&r=PG&f=1", "display_name": "sto_user", "link": "https://stackoverflow.com/users/5714931/sto-user"}, "edited": false, "score": 0, "creation_date": 1456924434, "post_id": 35748107, "comment_id": 59169579, "body": "@sto_user For example have a thread that only does <code>recvfrom</code> and puts them in a queue, then the Java code gets packets from the queue instead."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1456924043, "creation_date": 1456924043, "answer_id": 35748107, "question_id": 35747966, "link": "https://stackoverflow.com/questions/35747966/c-linux-sockets-recvfrom-too-slow-in-fetching-the-udp-packets/35748107#35748107", "title": "C : Linux Sockets: Recvfrom() too slow in fetching the UDP Packets", "body": "<p>How long is this burst going on? Is it continuous and will go on forever? Then you need beefier hardware that can handle the load. Possibly some load-balancing where multiple servers handle the incoming data.</p>\n\n<p>Does the burst only last a short wile, like in at most a second or two? Then have the lower levels read all packets as fast as it can, and put in a queue, and let the upper levels get the messages from the queue in its own time.</p>\n"}, {"tags": [], "owner": {"reputation": 3143, "user_id": 1139725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff02f9c61462e9e319f326423d09f50?s=128&d=identicon&r=PG", "display_name": "Seth Noble", "link": "https://stackoverflow.com/users/1139725/seth-noble"}, "is_accepted": false, "score": 0, "last_activity_date": 1456951573, "creation_date": 1456951573, "answer_id": 35757710, "question_id": 35747966, "link": "https://stackoverflow.com/questions/35747966/c-linux-sockets-recvfrom-too-slow-in-fetching-the-udp-packets/35757710#35757710", "title": "C : Linux Sockets: Recvfrom() too slow in fetching the UDP Packets", "body": "<p>It sounds like you may be calling <code>recvfrom()</code> with your socket in blocking mode, in which case it will not return until the next packet arrives.  If the packets are being sent at 10ms intervals, perhaps due to some delay on the sending side, then a loop of blocking <code>recvfrom()</code> calls would appear to take 10ms each.  Set the socket to non-blocking and use something like <code>select()</code> to decide when to call it.  Then profile everything to see where the real bottleneck lies.  My bet would be on one or more of the JNI passthroughs.</p>\n\n<p>Note that <code>recvfrom()</code> is not a \"C\" function, it is a system call.  Java's functions just add layers on top of it.</p>\n"}], "owner": {"reputation": 31, "user_id": 5714931, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d539350b0edbea30ccbfa03b0bad35b2?s=128&d=identicon&r=PG&f=1", "display_name": "sto_user", "link": "https://stackoverflow.com/users/5714931/sto-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1726, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1456953367, "creation_date": 1456923638, "last_edit_date": 1456953367, "question_id": 35747966, "link": "https://stackoverflow.com/questions/35747966/c-linux-sockets-recvfrom-too-slow-in-fetching-the-udp-packets", "title": "C : Linux Sockets: Recvfrom() too slow in fetching the UDP Packets", "body": "<p>I am receiving UDP packets at the rate of <strong>10Mbps</strong>. Each packet is formed of around <strong>1109 bytes</strong>.\nSo, it makes more than <strong>1pkt/ms</strong> that I am receving on <strong>eth0</strong>. The <code>recvfrom()</code> in C receives the packet and passes on the packet to Java. Java does the filtering of the packets and the necessary processing.</p>\n\n<p>The bottlenecks are:</p>\n\n<ol>\n<li><p><code>recvfrom()</code> is too slow:fetching takes more than 10ms possibly because it does not get the  CPU. </p></li>\n<li><p>Passing of the packet from C to Java through the interface(JNI) takes 1-2 ms. </p></li>\n<li><p>The processing of packet in Java itself takes 0.5 to 1 second depending on if database insertion  or image processing needs to be done.</p></li>\n</ol>\n\n<p>So, the problem is many delays add up and more than half of the packets are lost.</p>\n\n<p>The possible solutions could be:</p>\n\n<ol>\n<li><p>Exclude the need for C's <code>recvfrom()</code> completely and implement UDP fetching directly in Java (Note: On the first place, C's recvfrom() was implemented to receive raw packets and not UDP). This solution  may reduce the JNI transfer delay.</p></li>\n<li><p>Implement multi-threading on the UDP receive function in Java. But then an ID shall be required in the  UDP packets for the sequence because in multi-threading the order of incoming packets is not guaranteed.  (However, in this particular program, there is a need for packets to be ordered). This solution might be  helpful in receiving all packets but the protocol which sends the data needs to be modified to add a  sequence identifier. Due to multi-threading, the receiver might have higher chances to get the CPU and  packets can be quickly fetched.</p></li>\n<li><p>In Java, a blocking queue can be implemented as a huge buffer which stores the incoming packets. The  Java parser can then use the packets from this queue to process it. However, it is not sure if the receiver function will be fast enough and put all the received packets in the queue without dropping any packet.</p></li>\n</ol>\n\n<p>I would like to know which of the solutions could be optimal or a combination of the above solutions will work. Any help or suggestions would be greatly appreciated.</p>\n"}, {"tags": ["c", "linux", "fork", "parent-child"], "comments": [{"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1456923709, "post_id": 35747918, "comment_id": 59169079, "body": "Apparently, your third child is creating child1 and child2. But the parent does not have the same PID as your childrens&#39; parent."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456923737, "post_id": 35747918, "comment_id": 59169098, "body": "Have you heard about a programming construct called loop? It&#39;s a neat thing, it allows you to do the same thing several times without copying and pasting code."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1456923947, "post_id": 35747918, "comment_id": 59169254, "body": "If you fork processes, they run in <i>parallel</i>. You cannot except them to output in a particular order without some sort of explicit synchronisation or at least delaying the output of each by a successively larger amount."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1456924115, "post_id": 35747918, "comment_id": 59169369, "body": "(And if you want all children to have the same parent, then you must fork them all <i>from</i> that parent. The code as written has one child fork another)."}], "answers": [{"comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1456924578, "post_id": 35747975, "comment_id": 59169674, "body": "@davmac Thanks. Yes, but other things are screwed, like child creates other children. I hope this hint answer can help OP to better visualize correct the code."}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 3, "last_activity_date": 1456923673, "creation_date": 1456923673, "answer_id": 35747975, "question_id": 35747918, "link": "https://stackoverflow.com/questions/35747918/creating-three-children-in-c-that-have-the-same-parent/35747975#35747975", "title": "Creating three children in C that have the same parent", "body": "<p>From man fork:</p>\n\n<blockquote>\n  <p><strong>RETURN VALUE</strong><BR>\n         On success, the PID of the child process is returned in the parent, and 0 is returned in the child.  On failure, -1 is returned in\n  the parent, no child process is created,  and  errno  is  set\n         appropriately.</p>\n</blockquote>\n\n<p>Your <code>if</code>-<code>else</code> conditions are swapped.</p>\n"}], "owner": {"reputation": 848, "user_id": 3087555, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fe453dd9d1b38e7fcc19dc5f71e3cc4a?s=128&d=identicon&r=PG&f=1", "display_name": "ZeppRock", "link": "https://stackoverflow.com/users/3087555/zepprock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 35747975, "answer_count": 1, "score": 1, "last_activity_date": 1456923878, "creation_date": 1456923513, "last_edit_date": 1456923878, "question_id": 35747918, "link": "https://stackoverflow.com/questions/35747918/creating-three-children-in-c-that-have-the-same-parent", "title": "Creating three children in C that have the same parent", "body": "<p>My problem is that the children does not have the same parent and does not appear correctly, here is my code:</p>\n\n<pre><code>#include &lt;sys/wait.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n   pid_t pid[3];\n\n   pid[0] = fork();\n\n   if(pid[0] == 0)\n   {\n   /* First child */\n      pid[1] = fork();\n      if(pid[1] == 0)\n      {\n         /* First child continued */\n         printf(\"Hello, I'm the first child! My PID is : %d, My PPID is: %d\", getpid(), getppid());\n         sleep(1);\n       }\n       else\n       {\n          /* Second child */\n          pid[2] = fork();\n\n          if(pid[2] == 0)\n          {\n             /* Second child continued */\n             printf(\"Hello, I'm the second child! My PID is : %d, My PPID is: %d\", getpid(), getppid());\n             sleep(1);\n          }\n          else\n          {\n             /* Third child */\n             printf(\"Hello, I'm the first child! My PID is : %d, My PPID is: %d\", getpid(), getppid());\n             sleep(1);\n           }\n       }\n   }\n   else\n   {\n   /* Parent */\n      sleep(1);\n      wait(0);\n      printf(\"Hello, I'm the parent! My PID is : %d, My PPID is: %d\", getpid(), getppid());\n   }\n   return 0;\n}\n</code></pre>\n\n<p>As of right now when i run the program i will get this as output in bash, where bash has the PID of 11446:</p>\n\n<pre><code>&gt;Hello, I'm the third child! My PID is: 28738, My PPID is: 28735\n&gt;Hello, I'm the first child! My PID is: 28742, My PPID is: 28738\n&gt;Hello, I'm the second child! My PID is: 28743, My PPID is: 28738\n&gt;Hello, I'm the parent! My PID is: 28753, My PPID is: 11446\n</code></pre>\n\n<p>How do i get the first child to appear first, second child to appear second and the third child to appear last, and get all the children to have the PPID 28753</p>\n"}, {"tags": ["c++", "c", "null-terminated"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 6, "creation_date": 1456923206, "post_id": 35747707, "comment_id": 59168754, "body": "For C++, just use <code>std::string</code> and forget about C strings."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456926835, "post_id": 35747738, "comment_id": 59171400, "body": "Detail: In C, <code>&#39;\\0&#39;</code> is more properly called a <i>character constant</i>.  Only literals C specifies are <i>string literal</i> and <i>compound literal</i>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1456926964, "post_id": 35747738, "comment_id": 59171511, "body": "Note: In C, character constants like <code>&#39;\\0&#39;</code> are of type <code>int</code>, not <code>char</code>."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 8, "last_activity_date": 1456924484, "last_edit_date": 1456924484, "creation_date": 1456923033, "answer_id": 35747738, "question_id": 35747707, "link": "https://stackoverflow.com/questions/35747707/null-terminate-string-use-0-or-just-0/35747738#35747738", "title": "Null-terminate string: Use &#39;\\0&#39; or just 0?", "body": "<p><code>'\\0'</code> is exactly the same as <code>0</code> despite of the type. <code>'\\0'</code> is just a representation as a <code>char</code> literal. The type <code>char</code> can be initialized from plain <code>int</code> literals though.</p>\n\n<p>So it's actually impossible to tell what's better, just keep in mind to use it consistently in your code.</p>\n"}, {"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1456923347, "post_id": 35747746, "comment_id": 59168841, "body": "<i>&quot; Look at the ascii table.&quot;</i> What about EBCDIC character tables? Would that still be true?"}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": false, "score": 1, "last_activity_date": 1456923061, "creation_date": 1456923061, "answer_id": 35747746, "question_id": 35747707, "link": "https://stackoverflow.com/questions/35747707/null-terminate-string-use-0-or-just-0/35747746#35747746", "title": "Null-terminate string: Use &#39;\\0&#39; or just 0?", "body": "<p>It's the same thing. Look at the ascii table.</p>\n\n<p>It's better from my point of view to use '\\0' because you explicity say that the end of string.</p>\n\n<p>That help when you read your code (like using NULL for pointer instead of 0).</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 15, "last_activity_date": 1456923123, "last_edit_date": 1456923123, "creation_date": 1456923084, "answer_id": 35747754, "question_id": 35747707, "link": "https://stackoverflow.com/questions/35747707/null-terminate-string-use-0-or-just-0/35747754#35747754", "title": "Null-terminate string: Use &#39;\\0&#39; or just 0?", "body": "<p><code>'\\0'</code> is an <a href=\"http://en.cppreference.com/w/cpp/language/escape\">escape sequence</a> for an <a href=\"http://en.cppreference.com/w/cpp/language/integer_literal\">octal literal</a>  with the value of 0.  So there is no difference between them</p>\n\n<p>Side note: if you are dealing with strings than you should use a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\"><code>std::string</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1456927072, "post_id": 35747994, "comment_id": 59171621, "body": "Note: In C, character constants like <code>&#39;\\0&#39;</code> are of type <code>int</code>, not <code>char</code>."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 6, "last_activity_date": 1456923717, "creation_date": 1456923717, "answer_id": 35747994, "question_id": 35747707, "link": "https://stackoverflow.com/questions/35747707/null-terminate-string-use-0-or-just-0/35747994#35747994", "title": "Null-terminate string: Use &#39;\\0&#39; or just 0?", "body": "<p>Both will generate the same machine code, as <code>0</code> will be converted to the character value <code>0</code>, and <code>'\\0'</code> is just another way of writing the character value <code>0</code>. The latter is clearly a character, so it will show that you didn't accidentally mean to write <code>'0'</code> instead, but other than that, it's exactly the same thing in the end.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 10, "last_activity_date": 1456948755, "last_edit_date": 1456948755, "creation_date": 1456927079, "answer_id": 35749261, "question_id": 35747707, "link": "https://stackoverflow.com/questions/35747707/null-terminate-string-use-0-or-just-0/35749261#35749261", "title": "Null-terminate string: Use &#39;\\0&#39; or just 0?", "body": "<blockquote>\n  <p>Use '\\0' or just 0?</p>\n</blockquote>\n\n<p>There is no difference in value.<br>\nIn C, there is no difference in type: both are <code>int</code>.<br>\nIn C++ they have different types: <code>char</code> and <code>int</code>.  So the edge goes to <code>'\\0'</code> as there is no type conversion involved.</p>\n\n<p>Different style guides promote one over the other. <code>'\\0'</code> for clarity. <code>0</code> for lack of clutter.</p>\n\n<p><strong>Right answer:</strong> Use the style based on your group's coding standards/guidelines.  If you group does not have such guideline, make one.  Better to use one than have divergent styles.</p>\n"}], "owner": {"reputation": 1530, "user_id": 2264956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a7410a06675e9d42a06e2e3a74c3dae?s=128&d=identicon&r=PG", "display_name": "erg", "link": "https://stackoverflow.com/users/2264956/erg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 1, "accepted_answer_id": 35749261, "answer_count": 5, "score": 13, "last_activity_date": 1456983778, "creation_date": 1456922948, "last_edit_date": 1456927132, "question_id": 35747707, "link": "https://stackoverflow.com/questions/35747707/null-terminate-string-use-0-or-just-0", "title": "Null-terminate string: Use &#39;\\0&#39; or just 0?", "body": "<p>If I need to null-terminate a String, should I rather use <code>\\0</code> or is a simple <code>0</code> also enough?</p>\n\n<p>Is there any difference between using</p>\n\n<pre><code>char a[5];\na[0] = 0;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>char a[5];\na[0] = '\\0';\n</code></pre>\n\n<p>Or is <code>\\0</code> just preferred to make it clear that I'm null-terminating here, but for the compiler it is the same?</p>\n"}, {"tags": ["c", "arrays", "multithreading", "visual-studio", "openmp"], "comments": [{"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 1, "creation_date": 1456925471, "post_id": 35747585, "comment_id": 59170347, "body": "Can you please clean-up your code snippet a little bit. I just don&#39;t understand what is global, what does this <code>for</code> loop do in the middle of nowhere, etc. And are you seriously using K&amp;R style function declaration?"}, {"owner": {"reputation": 125, "user_id": 5357975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/164701397203156/picture?type=large", "display_name": "Yuriy Tigiev", "link": "https://stackoverflow.com/users/5357975/yuriy-tigiev"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1456926912, "post_id": 35747585, "comment_id": 59171467, "body": "K&amp;R style function used by owner of this library. I just trying modify source code. Provided code is example. I would like use this example to understand rules for choosing right  type of variables:  shared, private or threadprivate."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1456993459, "post_id": 35747585, "comment_id": 59205439, "body": "What or who is still using K&amp;R C except ancient functions such as <a href=\"https://github.com/Xilinx/eglibc/blob/master/stdlib/div.c\" rel=\"nofollow noreferrer\">div</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1456999529, "post_id": 35765652, "comment_id": 59209663, "body": "Note that the call to &quot;random()&quot; is also likely not to be thread-safe. (Or to serialize and destroy performance)."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1457004588, "post_id": 35765652, "comment_id": 59213310, "body": "@JimCownie I did some edit. I hope I didn&#39;t miss anything more this time"}], "tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 0, "last_activity_date": 1457004526, "last_edit_date": 1495541268, "creation_date": 1456989780, "answer_id": 35765652, "question_id": 35747585, "link": "https://stackoverflow.com/questions/35747585/how-to-declare-arrays-in-omp-pragma/35765652#35765652", "title": "How to declare arrays in omp pragma", "body": "<p>The problem I see in your code is in this line</p>\n\n<pre><code>array1[array2[j]] += z[j]+j;\n</code></pre>\n\n<p>This means that <code>array1</code> can potentially be modified by whichever <code>j</code> index. And <code>j</code> in the context of the function <code>myfunc()</code> corresponds to index <code>i</code> at the upper level. The trouble is that <code>i</code> is the index upon which the loop is parallelised, therefore, this means that <code>array1</code> can be modified concurrently at any moment by any thread.</p>\n\n<p>The crucial question now is to know if <code>array2</code> can have the same value for different indexes:</p>\n\n<ul>\n<li>If you are sure that for whatever <code>j1 != j2</code> you have <code>array2[j1] != array2[j2]</code>, then your code is trivially parallelisable.</li>\n<li>If there are values <code>j1 != j2</code> for which you have <code>array[j1] == array[j2]</code>, then you have dependencies across iterations for <code>array1</code> and the code is no longer (simply and/or effectively) parallelisable.</li>\n</ul>\n\n<p>So let's assume we are in the former case, then the OpenMP directives you have already in the code are sufficient:</p>\n\n<ul>\n<li><code>i</code> needs to be <code>private</code> but is implicitly already so as it is the index of the parallelised loop;</li>\n<li><code>x</code> and <code>y</code> should to be <code>shared</code> (which they are by default) since their access index is the one that is distributed in parallel (namely <code>i</code>) so their parallel updates do not overlap;</li>\n<li><code>array2</code> is only accessed in read mode so it's a no brainer <code>shared</code> (which it is by default again);</li>\n<li><code>array1</code> is read and written, but due to our initial assumption, there are no possible collisions between threads as their sets of indexes to access it are disjoin. Therefore, the default <code>shared</code> qualifier just works fine.</li>\n</ul>\n\n<p>But now, if we are in the case where <code>array2</code> allows for non-disjoin sets of indexes for accessing <code>array1</code>, we will have to preserve the ordering of these accesses / updates of <code>array1</code>. This can be done with the <code>ordered</code> clause / directive. And since we still want the parallelisation to be (somewhat) effective, we will have to add a <code>schedule(static,1)</code> clause to the <code>parallel</code> directive. For more details about this, please refer to <a href=\"https://stackoverflow.com/a/13230816/5239503\">this great answer</a>. Your code would now look like this:</p>\n\n<pre><code>//global variables\nstatic int array1[100000];\nstatic int array2[100000]; \n\n//part of program code from one of function. \nint i\nint x[1000000];\nint y[1000000];\n\n#pragma omp parallel for schedule(static,1) ordered\nfor(i=0; i&lt;100; i++)\n{\n  y[i] = i*i-3*i-10*random();\n  x[i] = myfunc(i, y[i])\n}\n\n//additional function\nint myfunc(j, z)\nint j,\nint z[]\n{\n  int tmp = z[j]+j;\n  #pragma omp ordered\n  array1[array2[j]] += tmp;\n  return array1[j];\n}\n</code></pre>\n\n<p>This would (I think) work and be in term of parallelism not too bad (for a limited number of threads), but this has a big (enormous) flaw: it generates tons of <a href=\"https://en.wikipedia.org/wiki/False_sharing\" rel=\"nofollow noreferrer\">false sharing</a> while updating <code>x</code> and <code>y</code>. Therefore, it might be more advantageous to use some per-thread copies of these and to only update the global arrays at the end. The central part of code snippet would then look something like this (not tested at all):</p>\n\n<pre><code>#pragma omp parallel\n#pragma omp single    \nint nbth = omp_get_num_threads();\n\nint *xm = malloc(1000000*nbth*sizeof(int));\nint *ym = malloc(1000000*nbth*sizeof(int));\n#pragma omp parallel\n{\n    int tid = omp_get_thread_num();\n    int *xx = xm+1000000*tid;\n    int *yy = ym+1000000*tid;\n    #pragma omp for schedule(static,1) ordered\n    for(i=0; i&lt;100; i++)\n    {\n        yy[i] = i*i-3*i-10*random();\n        xx[i] = myfunc(i, y[i])\n    }\n    #pragma omp for\n    for (i=0; i&lt;100; i++)\n    {\n        int j;\n        x[i] = 0;\n        y[i] = 0;\n        for (j=0; j&lt;nbth; j++)\n        {\n            x[i] += xm[j*1000000+i];\n            y[i] += ym[j*1000000+i];\n        }\n    }\n}\nfree(xm);\nfree(ym);\n</code></pre>\n\n<p>This will avoid the false sharing, but will increase the number of memory accesses and the overhead of parallelisation. So it might not be very beneficial after all. You'll have to see it for yourself in your actual code.</p>\n\n<p>BTW, the fact that <code>i</code> only loops until 100 looks suspicious to me when the corresponding arrays are declared to be 1000000 long. If 100 is truly the correct size for the loop, then probably the parallelisation isn't worth it anyway...</p>\n\n<hr>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>As Jim Cownie pointed it out in a comment, I missed the call to <code>random()</code> as source of dependency across iterations, preventing from proper parallelisation. I'm not sure how relevant this is in the context of your actual code (I doubt you truly fill your <code>y</code> array with random data) but in case you do, you'll have to change this part in order to do it in parallel (otherwise, the serialisation needed to have the random number series generated will just kill whichever gain from parallelisation). But generating non-correlated pseudo-random series in parallel is not as simple as it sounds. You can use <code>rand_r()</code> instead of <code>random()</code> as a thread-safe alternative for the RNG and initialise its seed per-thread to different values. However, you're not sure that one thread's series won't collide with another thread's one too soon (with a thread starting to generate the very same series than another one after a while, messing-up your expected asymptotic behaviour).</p>\n\n<p>As I'm pretty sure you're not truly interested in that, I won't develop any further (this is a whole question all by itself), but I will just use the (not so good) <code>rand_r()</code> trick. If you want more details on a possible alternative for generating good parallel random series, just ask another question.</p>\n\n<p>The case where no problem comes from <code>array2</code> (disjoin sets of indexes), the code would become:</p>\n\n<pre><code>// global variable\nunsigned int seed;\n#pragma omp threadprivate(seed)\n\n// done just once somewhere\n#pragma omp parallel\nseed = omp_get_thread_num(); //or something else, but different for each thread\n\n// then the parallelised loop\n#pragma omp parallel for  \nfor(i=0; i&lt;100; i++)\n{\n  y[i]  = i*i-3*i-10*rand_r(&amp;seed);\n  x[i] = myfunc(i, y[i])\n}\n</code></pre>\n\n<p>Then the other case would have to use the same trick in addition to what has already been described. But again, keep in mind that this isn't good enough for serious RNG based computation (like Monte-Carlo methods). Its does the job if all you want is generate some values for testing purpose, but it won't pass any serious statistical quality test.</p>\n"}], "owner": {"reputation": 125, "user_id": 5357975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/164701397203156/picture?type=large", "display_name": "Yuriy Tigiev", "link": "https://stackoverflow.com/users/5357975/yuriy-tigiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 35765652, "answer_count": 1, "score": 0, "last_activity_date": 1457004526, "creation_date": 1456922629, "last_edit_date": 1456926691, "question_id": 35747585, "link": "https://stackoverflow.com/questions/35747585/how-to-declare-arrays-in-omp-pragma", "title": "How to declare arrays in omp pragma", "body": "<p>I'm modifying existing library from single thread to multi threading. I have code like a provided below. I can't understand how to declare arrays x, y, array1, array2. Which of them I should declare as share or threadprivate. Do I need use flush. If yes in which case ? </p>\n\n<pre><code>//global variables\nstatic int array1[100000];\nstatic int array2[100000]; \n\n//part of program code from one of function. \nint i\nint x[1000000];\nint y[1000000];\n\n#pragma omp parallel for  \nfor(i=0, i&lt;100; i++)\n{\n  y[i]  = i*i-3*i-10*random();\n  x[i] = myfunc(i, y[i])\n}\n\n//additional function\nint myfunc(j, z)\nint j,\nint z[]\n{\n  array1[array2[j]] += z[j]+j;\n  return array1[j];\n}\n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "read-write"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1456922716, "post_id": 35747317, "comment_id": 59168389, "body": "Take a look <a href=\"http://people.ee.ethz.ch/~arkeller/linux/multi/kernel_user_space_howto-8.html\" rel=\"nofollow noreferrer\">HERE</a> and <a href=\"http://www.xml.com/ldd/chapter/book/ch13.html\" rel=\"nofollow noreferrer\">HERE</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1456923975, "post_id": 35747317, "comment_id": 59169279, "body": "Can&#39;t you use some existing file system for that (perhaps a <code>tmpfs</code>, or add your new entries in <code>&#47;proc&#47;</code> ...)? I would believe you should not patch the kernel for such things"}, {"owner": {"reputation": 61, "user_id": 3670049, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03f754a4904324a3c77554de72f1a65d?s=128&d=identicon&r=PG&f=1", "display_name": "Echren", "link": "https://stackoverflow.com/users/3670049/echren"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1456925470, "post_id": 35747317, "comment_id": 59170342, "body": "@BasileStarynkevitch I&#39;d like to try this way..."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1456925598, "post_id": 35747317, "comment_id": 59170438, "body": "You certainly don&#39;t use <code>malloc</code> in kernel land (but some flavor of <code>kalloc</code>) because you don&#39;t use the C standard library in kernel code (which is conceptually freestanding)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1456925881, "post_id": 35747317, "comment_id": 59170667, "body": "I strongly recommend to be <i>very</i> familiar with <a href=\"http://www.makelinux.net/alp/\" rel=\"nofollow noreferrer\">Advanced Linux Programming</a> -in user land- before attempting to write kernel code; BTW, how would you use your newly added kernel functions (in some driver, then which one? in some new syscall?...)?"}, {"owner": {"reputation": 61, "user_id": 3670049, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03f754a4904324a3c77554de72f1a65d?s=128&d=identicon&r=PG&f=1", "display_name": "Echren", "link": "https://stackoverflow.com/users/3670049/echren"}, "edited": false, "score": 0, "creation_date": 1456925943, "post_id": 35747317, "comment_id": 59170706, "body": "The only thing I did in the Linux source code was modifying the return value of a function (just to test something). So I don&#39;t know more. I found tutorials on how to add functions and now I want to learn more to modify it. There are other ways to achieve what I want to do but I want to try that."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1456926047, "post_id": 35747317, "comment_id": 59170787, "body": "<a href=\"http://kernelnewbies.org/\" rel=\"nofollow noreferrer\">kernelnewbies.org</a> has probably relevant information; however, my first hint about kernel patching is: don&#39;t patch the kernel, try to find a user-land approach..."}, {"owner": {"reputation": 61, "user_id": 3670049, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03f754a4904324a3c77554de72f1a65d?s=128&d=identicon&r=PG&f=1", "display_name": "Echren", "link": "https://stackoverflow.com/users/3670049/echren"}, "edited": false, "score": 0, "creation_date": 1456926287, "post_id": 35747317, "comment_id": 59170979, "body": "Why not patching ? Why ? It&#39;s an opportunity to learn."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1456926522, "post_id": 35747317, "comment_id": 59171159, "body": "Indeed, learning is a good motivation. But be prepared to break your system (so backup your important data on some external media)."}, {"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1456930983, "post_id": 35747317, "comment_id": 59174882, "body": "OP is clearly a beginner programmer in general and as such doing any kind of kernel work is not advisable. As such I can only recommend sticking to userspace. Just in case this was supposed to be used in the real world, the mechanism in question looks like an attempt to provide functionality equivalent to already existing mechanisms anyway (e.g. sysvipc)."}, {"owner": {"reputation": 61, "user_id": 3670049, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03f754a4904324a3c77554de72f1a65d?s=128&d=identicon&r=PG&f=1", "display_name": "Echren", "link": "https://stackoverflow.com/users/3670049/echren"}, "reply_to_user": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1458569368, "post_id": 35747317, "comment_id": 59905103, "body": "@employeeofthemonth What do you mean by &quot;in general&quot; ? I don&#39;t know a lot about kernel hacking but I started to code years ago. I have to create functions for a new security system and for several reasons I was told not to use existing functions. No read(), open() and stuff. And among other requirements the code mustn&#39;t be in user space. So please stop telling me to try writing UL code or using existing mechanisms."}], "answers": [{"tags": [], "owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "is_accepted": false, "score": 0, "last_activity_date": 1456938926, "creation_date": 1456938926, "answer_id": 35753905, "question_id": 35747317, "link": "https://stackoverflow.com/questions/35747317/reading-writing-in-linux-kernel-space/35753905#35753905", "title": "Reading/writing in Linux kernel space", "body": "<p>As pointed out by commentators to your question, achieving this in userspace would probably be much more safer. However, if you insist on achieving this by modifying kernel code, one way you can go is implementing a new device driver, which has functions such as read and write that you may implement according to your needs in order to have your processes access some memory space as you described. Your processes can then work, as you described, by reading from and writing onto the same space more or less as if they are reading from/writing to a regular file.</p>\n\n<p>I would recommend reading quite a bit of materials before diving into kernel code, though. A good resource on device drivers is <a href=\"http://lwn.net/Kernel/LDD3/\" rel=\"nofollow\">Linux Device Drivers</a>. Even though a significant portion of its information may not be up-to-date, you may find <a href=\"https://github.com/duxing2007/ldd3-examples-3.x\" rel=\"nofollow\">here</a> a version of the source code used in the book ported to linux 3.x. You may find what you are looking for under the directory <a href=\"https://github.com/duxing2007/ldd3-examples-3.x/tree/master/scull\" rel=\"nofollow\">scull</a>.</p>\n\n<p>Again, as pointed out by commentators to your question, I do not think you should jump right in with the kernel space. However, for educational purposes scull may serve as a good starting point to read kernel code and see how the results similar to what you described are achieved.</p>\n"}], "owner": {"reputation": 61, "user_id": 3670049, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/03f754a4904324a3c77554de72f1a65d?s=128&d=identicon&r=PG&f=1", "display_name": "Echren", "link": "https://stackoverflow.com/users/3670049/echren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 659, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456938926, "creation_date": 1456921824, "last_edit_date": 1456923609, "question_id": 35747317, "link": "https://stackoverflow.com/questions/35747317/reading-writing-in-linux-kernel-space", "title": "Reading/writing in Linux kernel space", "body": "<p>I want to add functions in the Linux kernel to write and read data. But I don't know how/where to store it so other programs can read/overwrite/delete it.</p>\n\n<p>Program A calls <code>uf_obj_add(param, param, param)</code> it stores information in memory.<br>\nProgram B does the same.<br>\nProgram C calls <code>uf_obj_get(param)</code> the kernel checks if operation is allowed and if it is, it returns data.</p>\n\n<p>Do I just need to <code>malloc()</code> memory or is it more difficult ?<br>\nAnd how <code>uf_obj_get()</code> can access memory where <code>uf_obj_add()</code> writes ?<br>\nWhere to store memory location information so both functions can access the same data ?</p>\n"}, {"tags": ["c", "keyboard", "x11", "inject"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456955371, "post_id": 35747077, "comment_id": 59190974, "body": "You can use XChangeKeyboardMapping and add extra keycodes. You would need to do that each time the mapping changes."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457008066, "post_id": 35747077, "comment_id": 59215612, "body": "Can I really add new keycodes? I thought you can just remap existing ones?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457083839, "post_id": 35747077, "comment_id": 59254706, "body": "Hmm, I don&#39;t see why not. Need to experiment."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457092670, "post_id": 35747077, "comment_id": 59260541, "body": "As the keycode is an <code>uint8_t</code> and there exist 256 (0 - 255) of them, I dont think that creating keycode 256 will be successful. First I tried to seek for an unset keycode, but I dont unerstand the mapping in X when multiple keyboard layouts are set (then one keycode has up to 15 fields, all reachable via layout + modifier)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1457109093, "post_id": 35747077, "comment_id": 59271844, "body": "Sorry my mistake, you cannot add keycodes."}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1596019788, "post_id": 63109998, "comment_id": 111673171, "body": "Its done with <code>xdotool</code> only if you do not want to incorporate it into your own program. As written in the question, the X11 C-Libraries are to be used. So this is not an answer to this question."}], "tags": [], "owner": {"reputation": 251, "user_id": 4928767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9921f000107259a0f672ee59bae8c757?s=128&d=identicon&r=PG&f=1", "display_name": "Juergen", "link": "https://stackoverflow.com/users/4928767/juergen"}, "is_accepted": false, "score": -1, "last_activity_date": 1595832339, "creation_date": 1595832339, "answer_id": 63109998, "question_id": 35747077, "link": "https://stackoverflow.com/questions/35747077/inject-keysym-not-keycode-into-x11-server/63109998#63109998", "title": "Inject Keysym (not keycode) into X11 Server", "body": "<p>Injecting keysyms is done with <code>xdotool</code>. To insert <code>XKB_KEY_Arabic_0</code> use</p>\n<pre><code>xdotool key Arabic_0\n</code></pre>\n<p>which is independent of the keyboard mapping.</p>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1595832339, "creation_date": 1456921188, "question_id": 35747077, "link": "https://stackoverflow.com/questions/35747077/inject-keysym-not-keycode-into-x11-server", "title": "Inject Keysym (not keycode) into X11 Server", "body": "<p>I need to know how to inject a <code>KeySym</code> into the X Server using <code>xcb</code>, <code>xtest</code> or <code>xlib</code>. I can inject keycodes, also get the keyboard mapping, search for a keysym there and press the according keycode, but i cannot inject a KeySym (e.g. <code>XKB_KEY_Arabic_0</code>) when its not mapped to the current layout.</p>\n\n<p>Is there a way I can do that?</p>\n\n<p>What I thought of is find an empty keycode and remap it to the desired keysym. Problem: My code doesnt find an empty key. This is my code:</p>\n\n<pre><code>uint32_t find_empty_key_for_remapping()\n{\n    int keycode_low;\n    int keycode_high;\n    KeySym * keysyms = 0;\n    int empty_key = 0;\n    int num_keysym;\n    XDisplayKeycodes(display_, &amp;keycode_low, &amp;keycode_high);\n    keysyms = XGetKeyboardMapping(display_, keycode_low, keycode_high - keycode_low, &amp;num_keysym);\n    for (int i = keycode_low; i &lt;= keycode_high &amp;&amp; !empty_key; ++i)\n    {\n        bool key_is_empty = true;\n        for (int j = 0; j &lt; num_keysym; ++j)\n        {\n            int symindex = ((i - keycode_low) * num_keysym) + j;\n            if (keysyms[symindex] != 0)\n            {\n                key_is_empty = false;\n            }\n        }\n        if (key_is_empty)\n        {\n            return i;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Any help will be appreciated!</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1456920747, "post_id": 35746761, "comment_id": 59166989, "body": "<code>if (isdigit(str[i]) || isupper(str[i]) || islower(str[i]))</code> will always be true. So, you set the first character of <code>word</code> to <code>\\0</code> many times and print it many times."}, {"owner": {"reputation": 133, "user_id": 5717087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8704ab97c169d7807598f10c470cb6e3?s=128&d=identicon&r=PG&f=1", "display_name": "user300048", "link": "https://stackoverflow.com/users/5717087/user300048"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456920967, "post_id": 35746761, "comment_id": 59167160, "body": "@Cool Guy Setting (str[i] == &#39; &#39;) in if statement would separate words from input string if the input string had blank spaces. Is it possible to only modify the if statement in the above program so that separation goes after every change in uppercase, lowercase or digit?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1456921305, "post_id": 35746761, "comment_id": 59167422, "body": "There is a need to examine the character type of changes."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1456921571, "post_id": 35746761, "comment_id": 59167616, "body": "You need to keep track of changes. Use a variable like <code>int flag;</code>. Set it to 1, when the current character is lowercase, 2 when the current character is uppercase, 3 when the current character is a digit. Then, you need to make some changes to your code."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1456921860, "post_id": 35746761, "comment_id": 59167803, "body": "While changing your code, consider there doesn&#39;t appear to be a need for a <code>word[]</code> buffer either. It may be more apparent what has to be done if you think about how this is doable without it."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 3, "creation_date": 1456921901, "post_id": 35746761, "comment_id": 59167839, "body": "Note: You shouldn&#39;t use <code>gets()</code>, which has unavoidable risk of buffer overrun."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456927100, "post_id": 35746761, "comment_id": 59171643, "body": "suggest implementing a state machine with <code>noState</code> <code>inlowerState</code> <code>inupperState</code> <code>indigitState</code>   then change state when the characteristic of the input char changes.At each state change, output a newline.  Start in the <code>noState</code> and on encountering the end of the string change to the <code>noState</code>"}], "answers": [{"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1456922390, "post_id": 35747419, "comment_id": 59168168, "body": "This doesn&#39;t work correctly, last character is missing in the output."}, {"owner": {"reputation": 719, "user_id": 3944257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6137f4fc597c673775e63728188088?s=128&d=identicon&r=PG&f=1", "display_name": "Frodo", "link": "https://stackoverflow.com/users/3944257/frodo"}, "reply_to_user": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1456922756, "post_id": 35747419, "comment_id": 59168422, "body": "Oh I see, thanks for your advice, I had to add a line in the end. I know this is not nice coded but is working."}], "tags": [], "owner": {"reputation": 719, "user_id": 3944257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6137f4fc597c673775e63728188088?s=128&d=identicon&r=PG&f=1", "display_name": "Frodo", "link": "https://stackoverflow.com/users/3944257/frodo"}, "is_accepted": true, "score": 2, "last_activity_date": 1456923324, "last_edit_date": 1456923324, "creation_date": 1456922109, "answer_id": 35747419, "question_id": 35746761, "link": "https://stackoverflow.com/questions/35746761/create-array-of-strings-from-an-input-string/35747419#35747419", "title": "Create array of strings from an input string", "body": "<p>Your solution went wrong as also written in the comments the statement <code>(isdigit(str[i]) || isupper(str[i]) || islower(str[i]))</code> is always true.</p>\n\n<p>If you want to stick to your solution using an <code>if</code> statement then you have to check the next following character. If the next charactertype differs from the actual character type, then you have to print out your word, because the next character is a different type.</p>\n\n<p>I adjusted your code to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include&lt;ctype.h&gt;\n\nint main() {\n    char str[512], word[256];\n    int i = 0, j = 0;\n\n    printf(\"Enter your input string:\");\n    gets(str);\n\n    while (str[i] != '\\0') {\n            //how to separate strings (words) when changed from \n\n            // Is the next character the end of the string?\n            if(str[i+1] != '\\0'){   // &lt;&lt;&lt;\n                //uppercase, lowercase or digit?\n                if (\n                    isdigit(str[i]) &amp;&amp; (isupper(str[i+1]) || islower(str[i+1])) // &lt;&lt;&lt;\n                    || isupper(str[i]) &amp;&amp; (isdigit(str[i+1]) || islower(str[i+1]))  // &lt;&lt;&lt;\n                    || islower(str[i]) &amp;&amp; (isupper(str[i+1]) || isdigit(str[i+1]))  // &lt;&lt;&lt;\n                ){\n                        word[j] = str[i];   // &lt;&lt;&lt;\n                        word[j+1] = '\\0';   // &lt;&lt;&lt;\n                        printf(\"%s\\n\", word);\n                        j = 0;\n                } else {\n                        word[j++] = str[i];\n                }   \n            }\n            else {\n                // End of the string, write last character in word\n                word[j] = str[i];   // &lt;&lt;&lt;\n                word[j+1] = '\\0';   // &lt;&lt;&lt;\n                printf(\"%s\\n\", word);\n            }\n            i++;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This would lead to the following output:</p>\n\n<pre><code>Enter your input string:this\nIS\n1\ninput\nSTRING\n</code></pre>\n\n<p>You can test it by your own <a href=\"http://ideone.com/LVV0QA\" rel=\"nofollow\">link[^]</a></p>\n"}], "owner": {"reputation": 133, "user_id": 5717087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8704ab97c169d7807598f10c470cb6e3?s=128&d=identicon&r=PG&f=1", "display_name": "user300048", "link": "https://stackoverflow.com/users/5717087/user300048"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 35747419, "answer_count": 1, "score": 0, "last_activity_date": 1456923324, "creation_date": 1456920368, "last_edit_date": 1456921842, "question_id": 35746761, "link": "https://stackoverflow.com/questions/35746761/create-array-of-strings-from-an-input-string", "title": "Create array of strings from an input string", "body": "<p>I need help with the following:</p>\n\n<p>Separate every consecutive array of uppercase, lowercase letters and digits into separate strings from the input string. Assume that the input string only contains uppercase, lowercase letters and digits. Input string doesn't have blank spaces.</p>\n\n<pre><code>Example:\nInput string: thisIS1inputSTRING\nOUTPUT:\n1. string: this\n2. string: IS\n3. string: 1\n4. string: input\n5. string: STRING\n</code></pre>\n\n<p>The following program doesn't give any output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include&lt;ctype.h&gt;\n\nint main() {\n    char str[512], word[256];\n    int i = 0, j = 0;\n\n    printf(\"Enter your input string:\");\n    gets(str);\n\n    while (str[i] != '\\0') {\n\n        //how to separate strings (words) when changed from \n        //uppercase, lowercase or digit?\n        if (isdigit(str[i]) || isupper(str[i]) || islower(str[i])) {\n            word[j] = '\\0';\n            printf(\"%s\\n\", word);\n            j = 0;\n        } else {\n            word[j++] = str[i];\n        }\n        i++;\n    }\n\n    word[j] = '\\0';\n    printf(\"%s\\n\", word);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1456920253, "post_id": 35746642, "comment_id": 59166626, "body": "You could use any type you want, it depends on what you need to do with it. Note though that <code>&#39;&#39;</code> is used for <code>char</code>s, not strings, and that strings can&#39;t be compared with <code>==</code>."}, {"owner": {"reputation": 172, "user_id": 5761585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba40fa21d9020ff484f1f2de622f3a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Manu", "link": "https://stackoverflow.com/users/5761585/manu"}, "edited": false, "score": 0, "creation_date": 1456920254, "post_id": 35746642, "comment_id": 59166629, "body": "use &quot;A-001&quot; indeed of &#39;A-001&#39;. &quot;string&quot; / &#39;char&#39;"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456920355, "post_id": 35746642, "comment_id": 59166703, "body": "How you coded using strings or what? Show a sample of your code."}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456920647, "post_id": 35746642, "comment_id": 59166913, "body": "Show your code! Also, don&#39;t just dump your code here and tell you&#39;ve posted it. Post an MCVE."}], "answers": [{"tags": [], "owner": {"reputation": 436078, "user_id": 31671, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xEJu4.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/31671/alex"}, "is_accepted": false, "score": 2, "last_activity_date": 1456920223, "creation_date": 1456920223, "answer_id": 35746689, "question_id": 35746642, "link": "https://stackoverflow.com/questions/35746642/c-if-else-about-variables/35746689#35746689", "title": "C : if-else about variables", "body": "<p>You would need to use double quotes for a string, not single quotes. Single quotes are only for single characters.</p>\n\n<p>You also can't compare strings like that. You would need to use something like <code>strcmp()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 81337, "user_id": 91757, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/afaf752cb41c3968dbd570c6f6fa0dc3?s=128&d=identicon&r=PG", "display_name": "Frerich Raabe", "link": "https://stackoverflow.com/users/91757/frerich-raabe"}, "is_accepted": false, "score": 0, "last_activity_date": 1456920235, "creation_date": 1456920235, "answer_id": 35746697, "question_id": 35746642, "link": "https://stackoverflow.com/questions/35746642/c-if-else-about-variables/35746697#35746697", "title": "C : if-else about variables", "body": "<p>For comparing strings in C, use the <code>strcmp</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1456920649, "last_edit_date": 1456920649, "creation_date": 1456920266, "answer_id": 35746711, "question_id": 35746642, "link": "https://stackoverflow.com/questions/35746642/c-if-else-about-variables/35746711#35746711", "title": "C : if-else about variables", "body": "<p><code>fruitcode</code> will probably end up being a C-style <em>string</em>; i.e. it will be a pointer (of type <code>char*</code>) to a null-terminated array of <code>char</code> elements.</p>\n\n<p>You'd then use something on the lines of <code>if (!strcmp(fruitcode, \"A-001\"))</code> to test for equality.</p>\n\n<p>Note that I've used <strong>double</strong> quotation characters to denote a <em>string literal</em>.</p>\n\n<p>(Using single quotation characters denotes something entirely different: if you enclose more than one character in single quotation characters then C interprets that as a <em>character array literal</em>. What this actually denotes is implementation defined; I think that your compiler is complaining about the length of your character array being in excess of <code>sizeof(int)</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "is_accepted": false, "score": 0, "last_activity_date": 1456920293, "creation_date": 1456920293, "answer_id": 35746722, "question_id": 35746642, "link": "https://stackoverflow.com/questions/35746642/c-if-else-about-variables/35746722#35746722", "title": "C : if-else about variables", "body": "<p>You need to use <code>strcmp</code>:</p>\n\n<pre><code>if (strcmp (fruitcode, \"A=001\") == 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2713, "user_id": 2295193, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Reinstate Monica", "link": "https://stackoverflow.com/users/2295193/reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1456920424, "creation_date": 1456920424, "answer_id": 35746791, "question_id": 35746642, "link": "https://stackoverflow.com/questions/35746642/c-if-else-about-variables/35746791#35746791", "title": "C : if-else about variables", "body": "<p>In C, you cannot compare <code>fruitcode</code> with <code>\"A-001\"</code>. C's <code>==</code> operator can only compare characters, not strings of characters (only single characters).</p>\n\n<p>If you want to compare them, do the following:</p>\n\n<p><code>strcmp(fruitcode,\"A-001\");</code></p>\n\n<p>Notice the <code>\" \"</code> in my answer; This implies a string. On your question, <code>' '</code> implies a character. You can't have more than one character inside <code>' '</code> (except special characters like <code>'\\n'</code> that seem like 2 characters, but are represented by 1 (the line feed character in this case).</p>\n"}], "owner": {"reputation": 29, "user_id": 6007571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LJx7Z.png?s=128&g=1", "display_name": "Nakagawa Yuuki", "link": "https://stackoverflow.com/users/6007571/nakagawa-yuuki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "answer_count": 5, "score": -6, "last_activity_date": 1456921648, "creation_date": 1456920098, "last_edit_date": 1456921648, "question_id": 35746642, "link": "https://stackoverflow.com/questions/35746642/c-if-else-about-variables", "title": "C : if-else about variables", "body": "<p>i'm new to programming and i am a beginner in C language, i want to ask about my problem when make if else:</p>\n\n<p>A code for every fruits..</p>\n\n<p>A-001 for Apple with $3</p>\n\n<p>A-002 for Grapes with $4</p>\n\n<p>B-001 for Avocado with $2</p>\n\n<p>B-002 for Orange with $1</p>\n\n<p>Then the input will be \nQuantity, Fruit Code</p>\n\n<p>And the output will be \nTotal (Qty * price )</p>\n\n<p>But when i make it like this :</p>\n\n<p><code>If (fruitcode=='A-001')</code></p>\n\n<p>It tells me the character constant too long.. what should i use for the fruit code? Is it just Integer or Characters or what?</p>\n\n<p>This is my Code: </p>\n\n<p>q for Qty\nh for Prices\nK for Fruit Code</p>\n\n<p>int main(){\n    int q,h,k,t;</p>\n\n<pre><code>printf(\"============================================\\n\");\nprintf(\"=                 Program                  =\\n\");\nprintf(\"============================================\\n\");\nprintf(\"     Fruit Code     Fruit       Prices \\n\");\nprintf(\"      A-001         Apple      Rp. 13.000 \\n\");\nprintf(\"      A-002         Grape      Rp. 16.000 \\n\");\nprintf(\"      B-001         Avocado    Rp. 10.000 \\n\");\nprintf(\"      B-002         orange     Rp. 12.000 \\n\");\nprintf(\"============================================\\n\");\nprintf(\"\\n\");\nprintf(\"  \\n\");\nprintf(\"============================================\\n\");\nprintf(\"=                    Form                  =\\n\");\nprintf(\"============================================\\n\");\nprintf(\"Transaction Time:  \");\nscanf(\"%s\", &amp;t);\nprintf(\"Fruit Code : \");\nscanf(\"%s\", &amp;k);\n\nif(k=='A-001')\n    printf(\"You Choose Apple\");\n}\nelse if(k='A-002'){\n    printf(\"You Choose Grape\");\n}\nelse if(k='B-001'){\n    printf(\"You Choose Avocado\");\n}\nelse{\n    printf(\"You Choose orange\");\n}\n\n\nprintf(\"Quantity: \");\nscanf(\"%s\", &amp;q);\n\ngetch();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456931609, "post_id": 35746620, "comment_id": 59175406, "body": "the posted makefile doesn&#39;t do anything.  Please post the rest of the makefile."}, {"owner": {"reputation": 1, "user_id": 5845432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c3b35b03ab32d427d98582d7f8d2f3?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/5845432/dinesh"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456988966, "post_id": 35746620, "comment_id": 59202905, "body": "Makefile contains only these lines.. There is no rest of the makefile.."}], "owner": {"reputation": 1, "user_id": 5845432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00c3b35b03ab32d427d98582d7f8d2f3?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/5845432/dinesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456920858, "creation_date": 1456920050, "last_edit_date": 1456920858, "question_id": 35746620, "link": "https://stackoverflow.com/questions/35746620/how-to-avoid-shipping-libtool-la-file-into-build-package", "title": "How to avoid shipping libtool .la file into build package?", "body": "<p>Below is makefile:</p>\n\n<pre><code>libdir=/usr/lib/test/\n\nlib_LTLIBRARIES = libmain.la\n\nlibmainla_SOURCES = main.c\nlibmain_la_LDFLAGS =  -avoid-version\n</code></pre>\n\n<p>When i built the package, <code>libmain.la</code>  file also shipped along with the <code>libmain.so</code> into the package. </p>\n\n<p>Could you please let me know how to avoid shipping of <code>.la</code> file?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "edited": false, "score": 1, "creation_date": 1456919652, "post_id": 35746449, "comment_id": 59166189, "body": "Was a debugger used?"}, {"owner": {"reputation": 1, "user_id": 6007494, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y5hAwnRtnBY/AAAAAAAAAAI/AAAAAAAAAcQ/ITnf4ehkY0U/photo.jpg?sz=128", "display_name": "anjanpatel", "link": "https://stackoverflow.com/users/6007494/anjanpatel"}, "reply_to_user": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "edited": false, "score": 0, "creation_date": 1456919874, "post_id": 35746449, "comment_id": 59166360, "body": "No... I went through stack overflow earlier and found out something called gdb... But I don&#39;t know how to debug with it"}, {"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "edited": false, "score": 1, "creation_date": 1456919906, "post_id": 35746449, "comment_id": 59166386, "body": "First Google result: <a href=\"http://www.thegeekstuff.com/2010/03/debug-c-program-using-gdb/\" rel=\"nofollow noreferrer\">thegeekstuff.com/2010/03/debug-c-program-using-gdb</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1456920241, "post_id": 35746449, "comment_id": 59166620, "body": "If you expect others to read your code, then please indent your code and use a conventional coding style."}, {"owner": {"reputation": 4224, "user_id": 3383213, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/91b489041a73ecbb02cc26af19b5f664?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/3383213/himanshu"}, "edited": false, "score": 2, "creation_date": 1456920313, "post_id": 35746449, "comment_id": 59166676, "body": "replace <code>k &gt; j;</code> with <code>k &lt; j;</code> in for loop. you need to run loop upto when <code>k</code> is less than <code>j</code> otherwise it will k will keep on increasing and go out of bound."}, {"owner": {"reputation": 378, "user_id": 4729580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6629e85c3dd81c577130295e7cd19c86?s=128&d=identicon&r=PG&f=1", "display_name": "Emil", "link": "https://stackoverflow.com/users/4729580/emil"}, "edited": false, "score": 2, "creation_date": 1456920321, "post_id": 35746449, "comment_id": 59166682, "body": "You can run gdb like this: Compile like this <code>gcc -Wall -g &lt;filename&gt;</code> then <code>gdb .&#47;a.out</code>. Then start the program by typing <code>r</code> and <code>Enter</code>. After you have entered all input and the program crashes you can type <code>bt full</code> to see where it crashed. I get this: <code>(gdb) bt full #0  0x0000000000400697 in main () at a.c:14         a = {1, 2, 3, 4, 5, 6, 7, 8, 9, 9}         i = 9         j = 0         k = 1128         temp = 0</code> In other words. The value of k is weird -&gt; This part of your code seems wrong <code>for(k=i;k&gt;j;k++)</code>"}, {"owner": {"reputation": 1, "user_id": 6007494, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y5hAwnRtnBY/AAAAAAAAAAI/AAAAAAAAAcQ/ITnf4ehkY0U/photo.jpg?sz=128", "display_name": "anjanpatel", "link": "https://stackoverflow.com/users/6007494/anjanpatel"}, "edited": false, "score": 0, "creation_date": 1456921604, "post_id": 35746449, "comment_id": 59167638, "body": "Used the debugger     Program received signal SIGSEGV, Segmentation fault 0x080485d8 in main () at insertsort.c:30 30                                        for(k=i;k&gt;j;k++) (gdb) c Program terminated with signal SIGSEGV, Segmentation fault The program no longer exists (gdb)"}, {"owner": {"reputation": 1, "user_id": 6007494, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y5hAwnRtnBY/AAAAAAAAAAI/AAAAAAAAAcQ/ITnf4ehkY0U/photo.jpg?sz=128", "display_name": "anjanpatel", "link": "https://stackoverflow.com/users/6007494/anjanpatel"}, "edited": false, "score": 0, "creation_date": 1456921786, "post_id": 35746449, "comment_id": 59167748, "body": "Thank-you guys... Solved the problem... My bad... Very silly... k-- not k++... In the loop.... But thanks a lot for teaching hour to work with debugger.... Thank-you"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6007494, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y5hAwnRtnBY/AAAAAAAAAAI/AAAAAAAAAcQ/ITnf4ehkY0U/photo.jpg?sz=128", "display_name": "anjanpatel", "link": "https://stackoverflow.com/users/6007494/anjanpatel"}, "is_accepted": false, "score": 0, "last_activity_date": 1456922383, "creation_date": 1456922383, "answer_id": 35747504, "question_id": 35746449, "link": "https://stackoverflow.com/questions/35746449/insertion-sort-snippet-in-c-aborts-with-segmentation-fault-core-dumped/35747504#35747504", "title": "Insertion sort snippet in c aborts with Segmentation fault (core dumped)", "body": "<p>Coding mistake</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int a[10], i = 0, j = 0, k = 0, temp;\n    printf(\"enter array elements\\n\");\n    for (i = 0; i &lt; 10; i++) {\n        scanf(\"%d\",&amp;a[i]);\n    }\n    for (i = 1; i &lt; 10; i++) {\n        for(j = 0; j &lt; i; j++) {\n            if(a[i] &lt; a[j]) {\n                temp = a[i];\n                for(k = i; k &gt; j; k--) {//insteadof k++\n                   a[k]=a[k-1];\n                }\n                a[j]=temp;\n                break;\n            }\n        }\n    }\n    printf (\"sorted array\\n\");\n    for (i = 0; i &lt; 10; i++) {\n        printf (\"%d \",a[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6007494, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-y5hAwnRtnBY/AAAAAAAAAAI/AAAAAAAAAcQ/ITnf4ehkY0U/photo.jpg?sz=128", "display_name": "anjanpatel", "link": "https://stackoverflow.com/users/6007494/anjanpatel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1456922383, "creation_date": 1456919554, "last_edit_date": 1456921890, "question_id": 35746449, "link": "https://stackoverflow.com/questions/35746449/insertion-sort-snippet-in-c-aborts-with-segmentation-fault-core-dumped", "title": "Insertion sort snippet in c aborts with Segmentation fault (core dumped)", "body": "<p>I tried a code in c to perform insertion sort(Ubuntu 14.04)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int a[10], i = 0, j = 0, k = 0, temp;\n    printf(\"enter array elements\\n\");\n    for (i = 0; i &lt; 10; i++) {\n        scanf(\"%d\",&amp;a[i]);\n    }\n    for (i = 1; i &lt; 10; i++) {\n        for(j = 0; j &lt; i; j++) {\n            if(a[i] &lt; a[j]) {\n                temp = a[i];\n                for(k = i; k &gt; j; k++) {\n                   a[k]=a[k-1];\n                }\n                a[j]=temp;\n                break;\n            }\n        }\n    }\n    printf (\"sorted array\\n\");\n    for (i = 0; i &lt; 10; i++) {\n        printf (\"%d \",a[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Then on terminal</p>\n\n<pre><code>~$gcc -Wall\n~$./a.out\n</code></pre>\n\n<p>The program stopped abruptly with Segmentation fault after taking the input</p>\n\n<p>I have tried a lot but failed miserably many times... I'm new to C so I need help...</p>\n\n<p>What should I do??</p>\n"}, {"tags": ["android", "c", "memory-leaks", "android-ndk", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1456919824, "creation_date": 1456919824, "answer_id": 35746547, "question_id": 35746149, "link": "https://stackoverflow.com/questions/35746149/android-ndk-memory-usage/35746547#35746547", "title": "Android NDK memory usage", "body": "<p>You do a double <code>GetByteArrayElements</code> for <code>arr</code> using <code>data</code> and <code>yuv</code>, then only release <code>yuv</code>. You also don't check if a copy was made using the last parameter, you just give in <code>JNI_FALSE</code>. You shouldn't do that, you should use a boolean parameter to <em>receive</em> the value, not try to tell the system whether to copy.</p>\n\n<p>You should therefore release both pointers in the end.</p>\n\n<p>Also if this code works, it means that copies are in fact made since you are reading and writing from the same memory area and that would cause corruption of the image.</p>\n"}], "owner": {"reputation": 151, "user_id": 4758315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02caccdfea03fa2b7ed76b8f32cf5939?s=128&d=identicon&r=PG&f=1", "display_name": "AinisSK", "link": "https://stackoverflow.com/users/4758315/ainissk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456919824, "creation_date": 1456918754, "last_edit_date": 1495541269, "question_id": 35746149, "link": "https://stackoverflow.com/questions/35746149/android-ndk-memory-usage", "title": "Android NDK memory usage", "body": "<p>I should rotate every yuv image buffer, which i receive from camera, on 90 degrees counterclockwise. I found this <a href=\"https://stackoverflow.com/a/15775173/4758315\">post</a> where using a java. This code works fine.\nBut I've tried to do a native method, because I wanted to do method which has the same logic but works faster.</p>\n\n<pre><code>JNIEXPORT jbyteArray JNICALL Java_com_ndk_example_utils_NativeUtils_rotateFrameBackward\n      (JNIEnv *env, jobject obj, jbyteArray arr, jint w, jint h){\n\n      jint arrSize = w*h*3/2;\n      jbyte *data,*yuv;\n\n      data = (*env)-&gt;GetByteArrayElements(env, arr, JNI_FALSE);\n\n      yuv = (*env)-&gt;GetByteArrayElements(env, arr, JNI_FALSE);\n\n      int x,y,i = 0;\n      for(x = 0; x &lt; w; x++){\n        for(y = h-1;y &gt;= 0;y--){\n          yuv[i] = data[y*w+x];\n          i++;\n        }\n      }\n\n      i = arrSize - 1;\n      for(x = w-1;x &gt; 0;x=x-2)\n      {\n        for(y = 0;y &lt; h/2;y++)\n        {\n          yuv[i] = data[(w*h)+(y*w)+x];\n          i--;\n          yuv[i] = data[(w*h)+(y*w)+(x-1)];\n          i--;\n        }\n      }\n      (*env)-&gt;ReleaseByteArrayElements(env, arr, yuv, JNI_ABORT);\n      yuv = 0;\n      data = 0;\n      return arr;\n    }\n</code></pre>\n\n<p>When i launched this method on my htc 816(v5.1) it works fine, but when I launched the app on Samsung S3(v4.3) and Lenovo P-70(v4.4.2), the app is crashes. And in Android monitor tab in Android Studio, i saw that \nmemory usage is always increasing until my app is crashes. In my htc i don't have problems with it. Any ideas?</p>\n"}, {"tags": ["c", "audio", "streaming", "gstreamer"], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 4665591, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006346325255/picture?type=large", "display_name": "matilda gl", "link": "https://stackoverflow.com/users/4665591/matilda-gl"}, "is_accepted": false, "score": 0, "last_activity_date": 1456927780, "creation_date": 1456927780, "answer_id": 35749532, "question_id": 35745737, "link": "https://stackoverflow.com/questions/35745737/gstreamer-client-server-audio-streaming/35749532#35749532", "title": "Gstreamer client server audio streaming", "body": "<p>Your client code is equal to below gst-launch command<br>\n<code>gst-launch-1.0 pulsesrc ! audioconvert ! audioresample ! audio/x-raw, format=S16LE, channels=1, rate=16000, layout=interleaved ! tcpclientsink host=127.0.0.1 port=5000</code></p>\n\n<p>It sends a raw audio, not a wav file like your runable example.</p>\n\n<p>To allow server works with this raw audio stream, remove <code>decodebin</code> put a capsfilter there to tell server the format/channels/rate ... of audio stream.</p>\n\n<p>P/s: <code>while(1)</code> in your client code is bad, should remove it</p>\n"}], "owner": {"reputation": 31, "user_id": 5519022, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fe88533e997b3da3648ccb6e8eacc80f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucian Georgescu", "link": "https://stackoverflow.com/users/5519022/lucian-georgescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 742, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456927780, "creation_date": 1456917604, "last_edit_date": 1456917926, "question_id": 35745737, "link": "https://stackoverflow.com/questions/35745737/gstreamer-client-server-audio-streaming", "title": "Gstreamer client server audio streaming", "body": "<p>I want to create a simple client-server application using Gstreamer in C. The client must capture audio from microphone (1 channel, 16Khz) and send the audio stream to a server that save it as a .wav file on disk.</p>\n\n<p>The actual code creates the file on disk, but it's empty. I think the server works ok, because it creates the file if I use this command as a client: gst-launch-1.0 filesrc location=audio.wav ! tcpclientsink host=127.0.0.1 port=5000</p>\n\n<p>I need a hint about what is wrong on the client side.</p>\n\n<p>Thanks!</p>\n\n<p>Here is my client code: <a href=\"https://drive.google.com/open?id=0B7umVbxKsF0GVWZ3b3J3QTN2T1k\" rel=\"nofollow\">https://drive.google.com/open?id=0B7umVbxKsF0GVWZ3b3J3QTN2T1k</a></p>\n\n<p>Here is my server code: <a href=\"https://drive.google.com/open?id=0B7umVbxKsF0GRDVKQXVKVXVGVnM\" rel=\"nofollow\">https://drive.google.com/open?id=0B7umVbxKsF0GRDVKQXVKVXVGVnM</a></p>\n"}, {"tags": ["c++", "c", "arm", "clang"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5109937, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh3.googleusercontent.com/-R_oWMYS2tJE/AAAAAAAAAAI/AAAAAAAAABU/KyvJRF8KOao/photo.jpg?sz=128", "display_name": "valiant wang", "link": "https://stackoverflow.com/users/5109937/valiant-wang"}, "edited": false, "score": 0, "creation_date": 1456975639, "post_id": 35746795, "comment_id": 59198081, "body": "Thanks, I have tried a new way to compile but it did not work too. I want to know how to generate the correct asm instructions . &#39;clang -emit-llvm -c hello.c -o hello.bc llc -march=arm hello.bc -o hello.s arm-linux-gnueabihf-gcc -o hello hello.s fialed in the last command: $ arm-linux-gnueabihf-gcc -o hello hello.s /usr/local/gcc-linaro-arm/bin/../lib/gcc/arm-linux-gnueabihf&zwnj;&#8203;/4.7.3/../../../../a&zwnj;&#8203;rm-linux-gnueabihf/b&zwnj;&#8203;in/ld: error: hello uses VFP register arguments, /tmp/cc65HjLb.o does not `"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 65, "user_id": 5109937, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh3.googleusercontent.com/-R_oWMYS2tJE/AAAAAAAAAAI/AAAAAAAAABU/KyvJRF8KOao/photo.jpg?sz=128", "display_name": "valiant wang", "link": "https://stackoverflow.com/users/5109937/valiant-wang"}, "edited": false, "score": 0, "creation_date": 1456994145, "post_id": 35746795, "comment_id": 59205884, "body": "So you are mixing calling conventions - VFP registers vs. no VFP registers. I&#39;m pretty sure you need <code>-mtriple=...</code>, but what should go into <code>...</code>, I&#39;m not sure - perhaps <code>arm-linux-gnueabihf</code>? I expect using <code>-v</code> on the gcc command will help a little bit."}, {"owner": {"reputation": 65, "user_id": 5109937, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh3.googleusercontent.com/-R_oWMYS2tJE/AAAAAAAAAAI/AAAAAAAAABU/KyvJRF8KOao/photo.jpg?sz=128", "display_name": "valiant wang", "link": "https://stackoverflow.com/users/5109937/valiant-wang"}, "edited": false, "score": 0, "creation_date": 1457602162, "post_id": 35746795, "comment_id": 59483751, "body": "I use arm-linux-gnueabihf-gcc -v to find this &quot;--target=arm-linux-gnueabihf&quot;,so I tried to use <code>llc -march=arm -mtriple=arm-linux-gnueabihf hello.bc -o hello.s</code>, but I get the same error with VFP registers."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": false, "score": 1, "last_activity_date": 1456920430, "creation_date": 1456920430, "answer_id": 35746795, "question_id": 35745517, "link": "https://stackoverflow.com/questions/35745517/using-clang-v3-4-to-compile-a-c-c-source-file-for-arm-on-ubuntu-x86-64/35746795#35746795", "title": "using clang v3.4 to compile a c/c++ source file for arm on ubuntu_x86-64", "body": "<p>This is not a matter of \"what targets the compiler supports\", but the tools you need to go along with your compiler. It's a bit like complaining at your tool shop that your socket set was able to get the wheel of your car, but it didn't come with a \"take tyre off the rim tool\".</p>\n\n<p>Clang can generate code for many different processors. But it will depend on external tools to produce binary code from assembly [although I think at least sometimes, it will do that via internal assembler] and to link the binary object files [always, no matter what]. </p>\n\n<p>You need <code>binutils</code> for your target architecture - at least <code>as</code> and <code>ld</code> that supports <code>arm-none-eabi</code>. Unless your code is also completely standalone, you will need a C-library and a C++ library built for that target. </p>\n"}], "owner": {"reputation": 65, "user_id": 5109937, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh3.googleusercontent.com/-R_oWMYS2tJE/AAAAAAAAAAI/AAAAAAAAABU/KyvJRF8KOao/photo.jpg?sz=128", "display_name": "valiant wang", "link": "https://stackoverflow.com/users/5109937/valiant-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1456976054, "creation_date": 1456916999, "last_edit_date": 1592644375, "question_id": 35745517, "link": "https://stackoverflow.com/questions/35745517/using-clang-v3-4-to-compile-a-c-c-source-file-for-arm-on-ubuntu-x86-64", "title": "using clang v3.4 to compile a c/c++ source file for arm on ubuntu_x86-64", "body": "<h1>platform:</h1>\n<p>ubuntu14.04_x86-64</p>\n<p>clang v3.4</p>\n<h1>problem</h1>\n<p>since I can use command <code>clang -target i386 hello.c </code>to compile hello.c, I tried to use</p>\n<p><code>clang -target arm hello.c</code> ,</p>\n<p><code> clang -target armv7 hello.c</code> ,</p>\n<p><code> clang -target armv7-a hello.c</code>,</p>\n<p><code>clang -target arm-eabi hello.c</code></p>\n<p>to compile hello.c for ARM but all failed.</p>\n<p>is there any information about the target types that clang supports?</p>\n<pre><code>$ clang -target arm-none-eabi hello.c\n/tmp/hello-c8aebe.s: Assembler messages:\n/tmp/hello-c8aebe.s:1: Error: unknown pseudo-op: `.syntax'\n/tmp/hello-c8aebe.s:2: Error: unknown pseudo-op: `.cpu'\n/tmp/hello-c8aebe.s:3: Error: unknown pseudo-op: `.eabi_attribute'\n/tmp/hello-c8aebe.s:4: Error: unknown pseudo-op: `.eabi_attribute'\n/tmp/hello-c8aebe.s:5: Error: unknown pseudo-op: `.eabi_attribute'\n/tmp/hello-c8aebe.s:6: Error: unknown pseudo-op: `.eabi_attribute'\n/tmp/hello-c8aebe.s:7: Error: unknown pseudo-op: `.eabi_attribute'\n/tmp/hello-c8aebe.s:8: Error: unknown pseudo-op: `.eabi_attribute'\n/tmp/hello-c8aebe.s:9: Error: unknown pseudo-op: `.eabi_attribute'\n/tmp/hello-c8aebe.s:16: Error: invalid char '{' beginning operand 1 `{r11'\n/tmp/hello-c8aebe.s:17: Error: too many memory references for `mov'\n/tmp/hello-c8aebe.s:18: Error: too many memory references for `sub'\n/tmp/hello-c8aebe.s:19: Error: expecting operand after ','; got nothing\n/tmp/hello-c8aebe.s:20: Error: invalid char '[' beginning operand 2 `[r11'\n/tmp/hello-c8aebe.s:21: Error: no such instruction: `ldr r1,.LCPI0_0'\n/tmp/hello-c8aebe.s:22: Error: invalid char '[' beginning operand 2 `[sp'\n/tmp/hello-c8aebe.s:23: Error: too many memory references for `mov'\n/tmp/hello-c8aebe.s:24: Error: no such instruction: `bl printf'\n/tmp/hello-c8aebe.s:25: Error: no such instruction: `ldr r1,[sp,'\n/tmp/hello-c8aebe.s:26: Error: invalid char '[' beginning operand 2 `[sp'\n/tmp/hello-c8aebe.s:27: Error: too many memory references for `mov'\n/tmp/hello-c8aebe.s:28: Error: too many memory references for `mov'\n/tmp/hello-c8aebe.s:29: Error: invalid char '{' beginning operand 1 `{r11'\n/tmp/hello-c8aebe.s:30: Error: no such instruction: `bx lr'\nclang: error: assembler (via gcc) command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n<hr />\n<h2>I have installed gcc-linaro-arm-linux-gnueabihf-4.7 and use the following way to compile, but the instruction dose not match.</h2>\n<pre><code>clang -emit-llvm -c hello.c -o hello.bc\nllc -march=arm hello.bc -o hello.s\narm-linux-gnueabihf-gcc -o hello hello.s\n</code></pre>\n<p>fialed in the last command</p>\n"}, {"tags": ["c", "arrays", "hardcoded"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 14, "creation_date": 1456916816, "post_id": 35745385, "comment_id": 59164161, "body": "C or C++? Make up your mind."}, {"owner": {"reputation": 309, "user_id": 5362690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX4bq.jpg?s=128&g=1", "display_name": "Jochen M&#252;ller", "link": "https://stackoverflow.com/users/5362690/jochen-m%c3%bcller"}, "edited": false, "score": 2, "creation_date": 1456917062, "post_id": 35745385, "comment_id": 59164368, "body": "What&#39;s wrong with creating a new variable (or rather a const)? What memcpy does is to copy from one memory address to another but a literal does not have a memory address, so i think what you are trying is just impossible."}, {"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "reply_to_user": {"reputation": 309, "user_id": 5362690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX4bq.jpg?s=128&g=1", "display_name": "Jochen M&#252;ller", "link": "https://stackoverflow.com/users/5362690/jochen-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1456917106, "post_id": 35745385, "comment_id": 59164405, "body": "@jomuel I&#39;m trying to write unreadable code :)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 18, "creation_date": 1456917184, "post_id": 35745385, "comment_id": 59164463, "body": "<code>memcpy(dest, &quot;\\xAB\\x13\\xF9\\x93\\xB5&quot;,5);</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1456917348, "post_id": 35745385, "comment_id": 59164581, "body": "To avoid misunderstanding, ask two separate questions about each language."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1456917561, "post_id": 35745385, "comment_id": 59164720, "body": "@fritzone Why do you not want to create a new variable to hold the array? Is there any specific reason?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 7, "creation_date": 1456917617, "post_id": 35745385, "comment_id": 59164757, "body": "@n.m. The title says C, so I guess C."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 11, "creation_date": 1456917731, "post_id": 35745385, "comment_id": 59164841, "body": "@fritzone We\u2019re asking you to clarify the language not to annoy you but because the answer will be different in C and C++. If you\u2019re interested in both, consider asking two separate questions."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 7, "creation_date": 1456917929, "post_id": 35745385, "comment_id": 59164987, "body": "<code>cccc.c</code> is my kind of filename. :)"}, {"owner": {"reputation": 4778, "user_id": 4688119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ajaGK.png?s=128&g=1", "display_name": "Ashish Ahuja", "link": "https://stackoverflow.com/users/4688119/ashish-ahuja"}, "edited": false, "score": 0, "creation_date": 1456918911, "post_id": 35745385, "comment_id": 59165684, "body": "@fritzone, it is actually different for <code>C</code> and <code>C++</code>. So can you specify the language you&#39;re talking about? Then the question will be more clear"}, {"owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "edited": false, "score": 2, "creation_date": 1456919044, "post_id": 35745385, "comment_id": 59165781, "body": "Sorry for the confusion, I have modified the question to be C only."}, {"owner": {"reputation": 47629, "user_id": 900873, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/704ea9ee0d9090f571599bdf5f95eb39?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/900873/kevin"}, "edited": false, "score": 2, "creation_date": 1456942458, "post_id": 35745385, "comment_id": 59183203, "body": "The <code>({...})</code> version isn&#39;t actually doing what you think. It&#39;s a GCC extension that runs its contents and returns the value of the last statement. There is one statement inside, with several comma operators. The whole block evaluates to <code>0xB5</code>."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "reply_to_user": {"reputation": 47629, "user_id": 900873, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/704ea9ee0d9090f571599bdf5f95eb39?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/900873/kevin"}, "edited": false, "score": 0, "creation_date": 1456955454, "post_id": 35745385, "comment_id": 59191029, "body": "@Kevin not quite, statement expressions require a closing semicolon."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 309, "user_id": 5362690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cX4bq.jpg?s=128&g=1", "display_name": "Jochen M&#252;ller", "link": "https://stackoverflow.com/users/5362690/jochen-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1457003748, "post_id": 35745385, "comment_id": 59212740, "body": "@jomuel: I&#39;m corious: if a literal has no adress where it is physically to find in my memory ;)"}], "answers": [{"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 5, "creation_date": 1456917826, "post_id": 35745703, "comment_id": 59164902, "body": "Funny enough OP seems to have tried this \u2014 but with a C++ compiler."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1456918446, "post_id": 35745703, "comment_id": 59165365, "body": "Your update made your answer incorrect: this is <b>illegal</b> in C++ (all versions). If your compiler allowed it, it\u2019s wrong."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1457003601, "post_id": 35745703, "comment_id": 59212646, "body": "If you make the source an <code>unsigned char const[]</code>, you don&#39;t need all those <code>(char)</code> casts."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 42, "last_activity_date": 1456928571, "last_edit_date": 1456928571, "creation_date": 1456917515, "answer_id": 35745703, "question_id": 35745385, "link": "https://stackoverflow.com/questions/35745385/c-hardcoded-array-as-memcpy-parameter/35745703#35745703", "title": "C hardcoded array as memcpy parameter", "body": "<p>If you use C99 or later, you can use compound literals. (<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\">N1256</a> 6.5.2.5)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main(void){\n    char dest[5] = {0};\n    memcpy(dest, (char[]){0xE3,0x83,0xA2,0xA4,0xCB} ,5);\n    for (int i = 0; i &lt; 5; i++) printf(\"%X \", (unsigned int)(unsigned char)dest[i]);\n    putchar('\\n');\n    return 0;\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong> This worked for C++03 and C++11 on GCC, but are rejected with <code>-pedantic-errors</code> option. This means this is not a valid solution for standard C++.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\nint main(void){\n    char dest[5] = {0};\n    memcpy(dest, (const char[]){(char)0xE3,(char)0x83,(char)0xA2,(char)0xA4,(char)0xCB} ,5);\n    for (int i = 0; i &lt; 5; i++) printf(\"%X \", (unsigned int)(unsigned char)dest[i]);\n    putchar('\\n');\n    return 0;\n}\n</code></pre>\n\n<p>points are:</p>\n\n<ul>\n<li>Make the array const, or taking address of temporary array will be rejected.</li>\n<li>Cast numbers to <code>char</code> explicitly, or the narrowing conversion will be rejected.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 11, "last_activity_date": 1456918008, "last_edit_date": 1456918008, "creation_date": 1456917644, "answer_id": 35745753, "question_id": 35745385, "link": "https://stackoverflow.com/questions/35745385/c-hardcoded-array-as-memcpy-parameter/35745753#35745753", "title": "C hardcoded array as memcpy parameter", "body": "<p>You can use <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3/gcc/Compound-Literals.html\">Compound Literals</a>.</p>\n\n<pre><code>int main()\n{\n    unsigned char dest[5];\n    size_t i;\n\n    memcpy(dest, (unsigned char[]){0xE3,0x83,0xA2,0xA4,0xCB} ,5);\n\n    printf(\"Test: \" );\n    for(i=0; i&lt;sizeof(dest)/sizeof(dest[0]); i++)\n        printf(\"%02X - \", dest[i] );\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 1, "creation_date": 1456918269, "post_id": 35745767, "comment_id": 59165225, "body": "If you must initialize <code>dest</code> at all (which is questionable), you should use <code>&#39;\\0&#39;</code> rather than <code>0</code>..."}, {"owner": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 1, "creation_date": 1456920525, "post_id": 35745767, "comment_id": 59166819, "body": "You are right. I copied the entire example from the OP ideone example. I just changed the <code>memcpy</code> line."}, {"owner": {"reputation": 1851, "user_id": 3215056, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ee1fb85d6043f0ab39e90d2f63d6c06d?s=128&d=identicon&r=PG&f=1", "display_name": "rev", "link": "https://stackoverflow.com/users/3215056/rev"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 3, "creation_date": 1456931935, "post_id": 35745767, "comment_id": 59175641, "body": "@MikhailT. where&#39;s the difference between <code>&#39;\\0&#39;</code> and <code>0</code>? They both compile to the same <code>0</code> value for me."}, {"owner": {"reputation": 379, "user_id": 4691346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PrchoZ9cf-c/AAAAAAAAAAI/AAAAAAAAABI/u5WgTPOa15g/photo.jpg?sz=128", "display_name": "Konstantin W", "link": "https://stackoverflow.com/users/4691346/konstantin-w"}, "reply_to_user": {"reputation": 1851, "user_id": 3215056, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ee1fb85d6043f0ab39e90d2f63d6c06d?s=128&d=identicon&r=PG&f=1", "display_name": "rev", "link": "https://stackoverflow.com/users/3215056/rev"}, "edited": false, "score": 0, "creation_date": 1456935607, "post_id": 35745767, "comment_id": 59178500, "body": "@AcidShout It&#39;s the same. Sometimes it is more understandable to use <code>&#39;\\0&#39;</code>. However I think everyone understands what the code is doing."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 2, "creation_date": 1456945719, "post_id": 35745767, "comment_id": 59185255, "body": "@NateEldredge: Wouldn&#39;t <code>strcpy</code> copy the trailing null?"}, {"owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "reply_to_user": {"reputation": 1851, "user_id": 3215056, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ee1fb85d6043f0ab39e90d2f63d6c06d?s=128&d=identicon&r=PG&f=1", "display_name": "rev", "link": "https://stackoverflow.com/users/3215056/rev"}, "edited": false, "score": 0, "creation_date": 1456948353, "post_id": 35745767, "comment_id": 59186863, "body": "@AcidShout, I&#39;m pretty sure, <code>&#39;\\0&#39;</code> might <i>not</i> equate to <code>0</code> on some esoteric platform. The same way <code>NULL</code> is not always the same as <code>0</code> either. @user2357112, yes, <code>strcpy</code> will copy the trailing <code>&#39;\\0&#39;</code> -- and so would <code>memcpy</code>, if the hard-coded length were bumped from 5 to 6. But the asker didn&#39;t say anything about <code>dest</code> needing to end up a proper C-string, so this is all uncalled for."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 0, "creation_date": 1456955824, "post_id": 35745767, "comment_id": 59191233, "body": "@MikhailT. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf#page=40\" rel=\"nofollow noreferrer\">C11 5.2.1</a> the null character is &quot;A byte with all bits set to 0&quot;. (to pre-empt the next question: <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf#page=63\" rel=\"nofollow noreferrer\">6.2.6.2</a>)"}, {"owner": {"reputation": 14194, "user_id": 732016, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d2eb40aff994d83e1d271a3543efb22?s=128&d=identicon&r=PG", "display_name": "wchargin", "link": "https://stackoverflow.com/users/732016/wchargin"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 1, "creation_date": 1456975713, "post_id": 35745767, "comment_id": 59198101, "body": "@MikhailT. By the way, <code>NULL</code> must always evaluate to a zero: &quot; An integer constant expression with the value 0, or such an expression cast to type <code>void *</code>, is called a null pointer constant&quot; (6.3.2.3:3); &quot;the [<code>stddef.h</code>] macros are: <code>NULL</code>, which expands to an implementation-defined null pointer constant\u2026&quot; (7.19:3). So the only bit that&#39;s implementation-defined is whether it&#39;s <code>0</code> or <code>((void *) 0)</code>."}, {"owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "reply_to_user": {"reputation": 14194, "user_id": 732016, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d2eb40aff994d83e1d271a3543efb22?s=128&d=identicon&r=PG", "display_name": "wchargin", "link": "https://stackoverflow.com/users/732016/wchargin"}, "edited": false, "score": 0, "creation_date": 1456980404, "post_id": 35745767, "comment_id": 59199549, "body": "@WChargin, is there any telling, what the casting to <code>void *</code> might do to an innocent integer <code>0</code>? @Leushenko, yes, you are right. Still, <code>\\0</code> seems clearer, when operating on <code>char</code>s..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 0, "creation_date": 1456991302, "post_id": 35745767, "comment_id": 59204200, "body": "@MikhailT. I believe you might be <a href=\"http://stackoverflow.com/questions/32136092/how-to-write-c-c-code-correctly-when-null-pointer-is-not-all-bits-zero/32136460#32136460\">mixing up null pointers with the NULL macro</a>."}, {"owner": {"reputation": 5764, "user_id": 2003898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/j2hnV.jpg?s=128&g=1", "display_name": "dhein", "link": "https://stackoverflow.com/users/2003898/dhein"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 0, "creation_date": 1457003630, "post_id": 35745767, "comment_id": 59212667, "body": "@MikhailT.: please don&#39;t give advices if you don&#39;t know what the ` = {0};` is actually doing. This is pretty much correct and also (while anyway doing the same) the correct version over doing <code>\\0</code>!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457465733, "post_id": 35745767, "comment_id": 59416266, "body": "Why do you need to initialize an array if you&#39;re just going to overwrite it on the next line with <code>memcpy</code>? And why did you change the size to <code>[6]</code>?"}, {"owner": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1457507441, "post_id": 35745767, "comment_id": 59432156, "body": "@Barmar - As I said before. You are all right, and there is no need to initialize the array at all. I copied the example as is from the original example of the OP. And just modified a single line of <code>memcpy</code> to show the correct answer the the question."}], "tags": [], "owner": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "is_accepted": false, "score": 25, "last_activity_date": 1456917720, "creation_date": 1456917720, "answer_id": 35745767, "question_id": 35745385, "link": "https://stackoverflow.com/questions/35745385/c-hardcoded-array-as-memcpy-parameter/35745767#35745767", "title": "C hardcoded array as memcpy parameter", "body": "<p>You can just send a string as parameter. It seems to compile just fine.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nint main() {\n    char dest[6] = {0};\n    memcpy(dest,\"\\XAB\\x13\\XF9\\X93\\XB5\", 5);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 1, "creation_date": 1456921829, "post_id": 35746852, "comment_id": 59167781, "body": "Of particular note -- if this is what the OP is worried about -- this uses no more memory than embedding the array in the <code>memcpy</code> call."}, {"owner": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "edited": false, "score": 3, "creation_date": 1456924635, "post_id": 35746852, "comment_id": 59169720, "body": "-1, OP explicitly said he does not want to do this in his original post.  Advising someone to do something the &quot;right&quot; way after they specifically said it would not work in their fringe case undermines the core problem."}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "reply_to_user": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "edited": false, "score": 10, "creation_date": 1456926000, "post_id": 35746852, "comment_id": 59170749, "body": "@user1717828 well, for argument&#39;s sake, I would say there&#39;s a difference between saying something won&#39;t work in a particular fringe case and saying they simply don&#39;t want to do it. As far as I can tell from the question, the latter is the case here. And it&#39;s often - not always, but often - the case that when someone says &quot;I don&#39;t want to do X&quot;, they really should be doing X anyway, they&#39;re just mistaken or misguided about the reason why they think they shouldn&#39;t be doing it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "edited": false, "score": 13, "creation_date": 1456927000, "post_id": 35746852, "comment_id": 59171547, "body": "@user1717828 One of the most important tasks in any form of engineering is to question the specification, particularly when it doesn&#39;t make any sense. In this case, the specification (OP) suggests that the poster may not be aware of how variables are allocated in memory or how compiler optimizations work. It is therefore important to post a &quot;counter-answer&quot;, or otherwise beginners might read this post and think that the &quot;no variable&quot; requirement in the question makes sense, then start to obfuscate their code accordingly, by spamming compound literals all over it."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "edited": false, "score": 4, "creation_date": 1456927034, "post_id": 35746852, "comment_id": 59171580, "body": "@DavidZ You are right but from a 13K user I&#39;d consider that &quot;I do not want to do X&quot; is a sentence we can trust."}, {"owner": {"reputation": 115587, "user_id": 56541, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Wm7Xg.png?s=128&g=1", "display_name": "David Z", "link": "https://stackoverflow.com/users/56541/david-z"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1456927603, "post_id": 35746852, "comment_id": 59172054, "body": "@LPs That&#39;s a reasonable point, but I don&#39;t really agree - I wouldn&#39;t suggest even trusting myself if I ask a question with a sentence like that. If there&#39;s an obvious solution and the asker doesn&#39;t want to use it, they should give some sort of justification in the question. (As little as &quot;educational purposes&quot; is fine, but just &quot;I don&#39;t want to&quot; is not, for me.) Otherwise I think it&#39;s legitimate to answer that they should just do the thing they don&#39;t want to do, if that&#39;s what you really think the right answer is."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456928303, "post_id": 35746852, "comment_id": 59172609, "body": "&quot;<i>because it contains no &quot;magic numbers&quot;, so it will not contain any missing array item or array-out-bounds bugs, like the compound literal version could</i>&quot; -- But the compound literal version doesn&#39;t use &#39;magic numbers&#39; as well. Also, how are compound literals prone to &#39;missing array item&#39; and &#39;array-out-of-bounds&#39; bugs?"}, {"owner": {"reputation": 533, "user_id": 1877143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15402cdd53d7a947cc863894ada3b88?s=128&d=identicon&r=PG&f=1", "display_name": "Hank Schultz", "link": "https://stackoverflow.com/users/1877143/hank-schultz"}, "edited": false, "score": 7, "creation_date": 1456928444, "post_id": 35746852, "comment_id": 59172752, "body": "Arguing that we should trust a statement because they&#39;re from a 13K user is the logical fallacy &quot;Argument from Authority&quot;.  Just because someone with a good reputation (in any field) makes a claim doesn&#39;t mean they&#39;re right."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 3, "creation_date": 1456928669, "post_id": 35746852, "comment_id": 59172952, "body": "@CoolGuy <code>memcpy(dest, (char[]){0xE3,0x83,0xA2,0xA4,0xCB} ,5);</code> &lt;-- Here&#39;s the magic number. You can&#39;t use <code>sizeof</code> on the compound literal. Well, you can, if you use a macro, which would perhaps be the worst option of all: <code>#define COMPOUND (char[]){0xE3,0x83,0xA2,0xA4,0xCB}</code> ...<code>memcpy(dest, &amp;COMPOUND , sizeof(COMPOUND));</code> which is just a completely brain-damaged solution, compared to using a plain const variable."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 1, "creation_date": 1456931082, "post_id": 35746852, "comment_id": 59174963, "body": "Doing some tests, it looks like you get better code by declaring <code>src</code> as <code>static</code>.  Without <code>static</code>, my compiler does things like hardcoding a bunch of single-byte immediate loads, or creating the array on the stack at every function call."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1456932146, "post_id": 35746852, "comment_id": 59175782, "body": "@NateEldredge A good compiler shouldn&#39;t do that. Optimizations enabled? The C standard does state that a compound literal should work like a local variable in terms of scope and storage, meaning that without optimizations it should be on the stack. But I would think that a good compiler would optimize that and replace it with a copy-down directly from <code>.rodata</code>."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1456932226, "post_id": 35746852, "comment_id": 59175869, "body": "@Lundin: It&#39;s gcc 5.2.1 on x86-64 with -O2 or -O3 or -Os.  The code in this post, or the same with a compound literal, compiles to 5 x <code>movb</code>.  Using <code>static</code>, we do get an array in <code>.rodata</code>, one <code>movl</code> and one <code>movb</code>."}, {"owner": {"reputation": 739, "user_id": 2524350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82c5412d8d551bc9585bba66fd0fc6e3?s=128&d=identicon&r=PG", "display_name": "minexew", "link": "https://stackoverflow.com/users/2524350/minexew"}, "reply_to_user": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 1, "creation_date": 1456946462, "post_id": 35746852, "comment_id": 59185725, "body": "@NateEldredge trivially solved by enclosing the parts between { and }"}, {"owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "edited": false, "score": 1, "creation_date": 1456951553, "post_id": 35746852, "comment_id": 59188747, "body": "Note that the OP mentioned in a comment (albeit one that&#39;s hidden by default) that he&#39;s <i>trying</i> to write unreadable code."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 20, "last_activity_date": 1456920585, "creation_date": 1456920585, "answer_id": 35746852, "question_id": 35745385, "link": "https://stackoverflow.com/questions/35745385/c-hardcoded-array-as-memcpy-parameter/35746852#35746852", "title": "C hardcoded array as memcpy parameter", "body": "<p>The best solution is not to do this at all, but to use a temporary variable:</p>\n\n<pre><code>const char src[] = {0xE3,0x83,0xA2,0xA4,0xCB};\nmemcpy(dest, src, sizeof(src));\n</code></pre>\n\n<p>This code is the most maintainable, because it contains no \"magic numbers\", so it will not contain any missing array item or array-out-bounds bugs, like the compound literal version could.</p>\n\n<p>This code is also compatible with C++ and C90.</p>\n\n<p>The most important thing here is to realize that the generated machine code will be identical anyway. Don't think you are doing any form of optimization by using compound literals.</p>\n"}], "owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4973, "favorite_count": 7, "accepted_answer_id": 35745703, "answer_count": 4, "score": 39, "last_activity_date": 1456928571, "creation_date": 1456916620, "last_edit_date": 1456919026, "question_id": 35745385, "link": "https://stackoverflow.com/questions/35745385/c-hardcoded-array-as-memcpy-parameter", "title": "C hardcoded array as memcpy parameter", "body": "<p>I want to pass in a hardcoded char array as the <code>source</code> parameter to memcpy ... Something like this:</p>\n\n<pre><code>memcpy(dest, {0xE3,0x83,0xA2,0xA4,0xCB} ,5);\n</code></pre>\n\n<p>This compiled with clang gives the following error:</p>\n\n<pre><code>cccc.c:28:14: error: expected expression\n</code></pre>\n\n<p>If i modify it to be (see the extra parenthesis ):</p>\n\n<pre><code>memcpy(dest,({0xAB,0x13,0xF9,0x93,0xB5}),5);\n</code></pre>\n\n<p>the error given by clang is:</p>\n\n<pre><code>cccc.c:26:14: warning: incompatible integer to pointer\n              conversion passing 'int' to parameter of\n              type 'const void *' [-Wint-conversion]\n\ncccc.c:28:40: error: expected ';' after expression\nmemcpy(c+110,({0xAB,0x13,0xF9,0x93,0xB5}),5);\n</code></pre>\n\n<p>So, the question:</p>\n\n<p>How do I pass in a <strong>hardcoded</strong> array as the source parameter of <code>memcpy</code> (<a href=\"http://www.cplusplus.com/reference/cstring/memcpy/\">http://www.cplusplus.com/reference/cstring/memcpy/</a>)</p>\n\n<p>I have tried:</p>\n\n<pre><code>(void*)(&amp;{0xAB,0x13,0xF9,0x93,0xB5}[0])  - syntax error\n{0xAB,0x13,0xF9,0x93,0xB5}               - syntax error\n({0xAB,0x13,0xF9,0x93,0xB5})             - see above\n(char[])({0xE3,0x83,0xA2,0xA4,0xCB})     - error: cast to incomplete type 'char []' (clang)\n</code></pre>\n\n<p>and some more insane combinations I'm shamed to write here ...</p>\n\n<p>Please remember: I do <strong>NOT</strong> want to create a new variable to hold the array.</p>\n"}, {"tags": ["c++", "c", "enums", "iterator"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1456915693, "post_id": 35744952, "comment_id": 59163300, "body": "Could it possibly be because the very purpose of <code>enum</code> is to be a textual integer constant?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1456915998, "post_id": 35744952, "comment_id": 59163544, "body": "C++ just lacks reflection. <i>&quot;Given an enum type, tell me how many enums are defined&quot;</i> and <i>&quot;What is the value of enum number n&quot;</i> are questions that could be answered at compile time, yet there is no way to express the question in C++. Read existing standards proposals, make a good case why this feature needs to be added and get it into C++17. It just seems it was not important enough for anyone to go through that painful process, so it hasn&#39;t been added."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 1, "creation_date": 1456916049, "post_id": 35744952, "comment_id": 59163585, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/261963/how-can-i-iterate-over-an-enum\">How can I iterate over an enum?</a>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456916208, "post_id": 35744952, "comment_id": 59163703, "body": "@Lundin: That may be so in practice, but doesn&#39;t the name &quot;enumeration&quot; suggest that items in an <code>enum</code> can be enumerated, or iterated over?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456932222, "post_id": 35744952, "comment_id": 59175865, "body": "@MOehm - only if you believe in design by pun. &lt;g&gt; &quot;Enumeration&quot; refers to the <b>definition</b> of the type, not its intended use."}, {"owner": {"reputation": 3431, "user_id": 2482998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd7c230e485da1a1ecfa351bd3744d9?s=128&d=identicon&r=PG", "display_name": "antron", "link": "https://stackoverflow.com/users/2482998/antron"}, "edited": false, "score": 0, "creation_date": 1456934307, "post_id": 35744952, "comment_id": 59177478, "body": "It <i>is</i> possible in standard C++, but not in a direct way, and takes a bunch of metaprogramming. See <a href=\"https://github.com/aantron/better-enums\" rel=\"nofollow noreferrer\">this library</a> (disclaimer: author). This <a href=\"http://stackoverflow.com/questions/28828957/enum-to-string-in-modern-c-and-future-c17/31362042#31362042\">answer</a> explains the technique and <a href=\"http://aantron.github.io/better-enums/demo/C++17ReflectionProposal.html\" rel=\"nofollow noreferrer\">this page</a> adapts it to emulate one of the C++17 <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4428.pdf\" rel=\"nofollow noreferrer\">proposals</a> for adding direct support to the standard."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456940963, "post_id": 35745109, "comment_id": 59182252, "body": "It&#39;s not necessarily a hack. If the design of your enum is such that you use only automatically enumerated values, putting a constant to define the number of possible values at the end is good practice, I think."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456992028, "post_id": 35745109, "comment_id": 59204603, "body": "My bad. I say it&#39;s a hack because I have in mind example such like errno, where you can&#39;t rely on value in the enum (ERANGE, EPIPE, etc etc) because you don&#39;t write this enum. of course, for enum you write yourself, I think you can do what I write (but adding a comment like &quot;Do not modify the value of this enumeration&quot; and &quot;add further value before this comment&quot; is needed, because if someone else mess with your enum, the program is doomed)."}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": false, "score": 1, "last_activity_date": 1456915924, "creation_date": 1456915924, "answer_id": 35745109, "question_id": 35744952, "link": "https://stackoverflow.com/questions/35744952/how-to-iterate-over-enums-by-standard/35745109#35745109", "title": "How to iterate over enums, by standard?", "body": "<p>C or C++ ? It's not the same thing.</p>\n\n<p>You can't iterate over enum in C, because enum is just switched by there number at the compilation time.\nhowever, if your sure of what's inside your enum, you can \"iterate\", like that :</p>\n\n<pre><code>enum color {\n  YELLOW,\n  GREEN,\n  BLUE,\n  RED,\n  /* Please, add new color BEFORE this comment */\n  NB_COLOR\n};\n\nfor (int i = 0; i &lt; NB_COLOR; ++i) {\n   /* Do something */\n}\n</code></pre>\n\n<p>But it's more like a hack as you say it, because you can't be sure that your enum start with 0 and you can't be sure that there is not \"empty slot\" between enum in C.</p>\n"}, {"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456916382, "post_id": 35745174, "comment_id": 59163831, "body": "You could use an X macro to define both enum and data consistently. You&#39;d then get <code>ENUM_ITEMS</code> via the size of your data table."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456916439, "post_id": 35745174, "comment_id": 59163872, "body": "@MOehm Yes, but I consider that an even worse solution than the above hack, because &quot;X macros&quot; always turn your code into an unreadable mess."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456916860, "post_id": 35745174, "comment_id": 59164202, "body": "Well, I&#39;m just saying. Agreed, X macros are uglier than a &quot;native&quot; syntax, but they have their uses."}, {"owner": {"reputation": 1924, "user_id": 3998319, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RFyfw.jpg?s=128&g=1", "display_name": "katang", "link": "https://stackoverflow.com/users/3998319/katang"}, "edited": false, "score": 0, "creation_date": 1456918249, "post_id": 35745174, "comment_id": 59165210, "body": "@ Lundin In my eyes, one of the the advantages of using enum-s is that they are typed. To my taste, the mentioned C++ solutions make the code at least less readable, and this C-style solution lacks typing. However, I like this trick with <b>LINE</b>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1924, "user_id": 3998319, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RFyfw.jpg?s=128&g=1", "display_name": "katang", "link": "https://stackoverflow.com/users/3998319/katang"}, "edited": false, "score": 0, "creation_date": 1456920150, "post_id": 35745174, "comment_id": 59166552, "body": "@katang C compatible means non-existent typing, at least as far as the compiler is concerned. Though good C compilers have an option to warn against implicit conversions between int and enum."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456920656, "post_id": 35745174, "comment_id": 59166919, "body": "Do you need the <code>__LINE__</code> hack at all? It just tells you how many enumerated items there are, but your <code>TABLE</code> could derive its length from the number of initialised items instead of having an explicit dimension. (I know you don&#39;t like X macros, but I find the use of <code>__LINE__</code> to count items a bit dangerous.)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1456920962, "post_id": 35745174, "comment_id": 59167153, "body": "@MOehm Ideally you could indeed declare the array as <code>const hello_t TABLE []</code> and then <code>_Static_assert(sizeof(TABLE)&#47;sizeof(*TABLE) == ENUM_ITEMS, &quot;bleh&quot;)</code>. That&#39;s how production quality code will look. However, you would still need the <code>ENUM_ITEMS</code> constant. Indeed the solution with <code>__LINE__</code> is questionable, someone could add blank lines. Hence the disclaimer &quot;hack-ish&quot;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456937050, "post_id": 35745174, "comment_id": 59179636, "body": "Why not <code>const hello_t TABLE [] = { hello, world }; #define ENUM_ITEMS (sizeof(TABLE)&#47;sizeof(*TABLE))</code>  to programatically define <code>ENUM_ITEMS</code>?"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1456916100, "creation_date": 1456916100, "answer_id": 35745174, "question_id": 35744952, "link": "https://stackoverflow.com/questions/35744952/how-to-iterate-over-enums-by-standard/35745174#35745174", "title": "How to iterate over enums, by standard?", "body": "<p>To iterate over a generic enum, portably between C and C++, simply use look-up tables:</p>\n\n<pre><code>typedef enum\n{\n  hello = 123,\n  world = 456\n} hello_t;\n\nconst hello_t TABLE [ENUM_ITEMS] =\n{\n  hello,\n  world\n};\n\nfor(size_t i=0; i&lt;ENUM_ITEMS; i++)\n{\n  printf(\"%d\", (int)TABLE[i]);\n}\n</code></pre>\n\n<p>Unfortunately there is no way to programatically get the constant <code>ENUM_ITEMS</code>, unless you have a non-specific enum with no values assigned, like <code>enum { hello, world, ENUM_ITEMS }</code>. If some enumeration constants are explicitly assigned numbers, then you can only do something hack-ish like this:</p>\n\n<pre><code>typedef enum\n{\n  ENUM_START = __LINE__,\n  hello = 123,\n  world = 456,\n  ENUM_ITEMS = __LINE__ - ENUM_START - 1\n} hello_t;\n</code></pre>\n"}], "owner": {"reputation": 1924, "user_id": 3998319, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RFyfw.jpg?s=128&g=1", "display_name": "katang", "link": "https://stackoverflow.com/users/3998319/katang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 35745174, "answer_count": 2, "score": 1, "last_activity_date": 1456916100, "creation_date": 1456915529, "last_edit_date": 1495541268, "question_id": 35744952, "link": "https://stackoverflow.com/questions/35744952/how-to-iterate-over-enums-by-standard", "title": "How to iterate over enums, by standard?", "body": "<p>I was googling around how to iterate over enums, and I found a variety of suggestions, like\n<a href=\"https://stackoverflow.com/questions/261963/how-can-i-iterate-over-an-enum/24982686#24982686\">How can I iterate over an enum?</a>\nAlthough it is OK, that all those methods must lead back to iterating over integers, I find the suggested solutions more or less a kind of hacking. Is there any deeper reason why this operation is not better supported; or from the other side, which one is more portable (including one between C and C++) and more standard-proof?</p>\n"}, {"tags": ["c++", "c", "optimization", "compilation", "compiler-optimization"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1456915575, "post_id": 35744832, "comment_id": 59163214, "body": "At least here <code>*p = 10;</code> you have undefined behavior. And no, it&#39;s not guaranteed that the freed address is reused by <code>malloc()</code>."}, {"owner": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456915877, "post_id": 35744832, "comment_id": 59163452, "body": "Right. Well, ok. It is undefined behavior, but why is it consistent between the two different optimization levels?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1456916124, "post_id": 35744832, "comment_id": 59163652, "body": "<i>&quot;but why is it consistent between the two different optimization levels? &quot;</i> Undefined behavior means <b>anything can happen</b>, including your observations."}, {"owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 0, "creation_date": 1456916383, "post_id": 35744832, "comment_id": 59163833, "body": "Nothing &quot;undefined&quot; about <code>*p = 10</code> -- <code>p</code> is equal to <code>q</code> at this point."}, {"owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 1, "creation_date": 1456916532, "post_id": 35744832, "comment_id": 59163937, "body": "Please, <i>do not</i> cast the result of <code>malloc</code> (nor <code>calloc</code>) in C-code. The functions return <code>void *</code>, which requires no casting in the language. C++ is different, but in C this is redundant and irksome."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 1, "creation_date": 1456916714, "post_id": 35744832, "comment_id": 59164083, "body": "@MikhailT. Whether or not <code>p==q</code> is irrelevant; <code>p</code> is no longer a valid pointer and the compiler is allowed to assume for optimization purposes that you do not use it in an undefined manner."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1456916729, "post_id": 35744832, "comment_id": 59164096, "body": "I&#39;ve re-added the C++ tag originally used by the author because the code is legal C++, differences between C and C++ may in theory be relevant, and the C++ standard has a lot to say about this topic."}, {"owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 0, "creation_date": 1456916880, "post_id": 35744832, "comment_id": 59164221, "body": "TartanLLama, if <code>p</code> is the same as <code>q</code>, then the two pointers are valid or invalid at the same time. So <code>p==q</code> is quite relevant. The assumptions you are referring to are invalid."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1456916901, "post_id": 35744832, "comment_id": 59164235, "body": "P.S.: And I&#39;m giving the author the benefit of doubt that he knows that these are two different languages :)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 3, "creation_date": 1456916963, "post_id": 35744832, "comment_id": 59164305, "body": "@MikhailT.: The result of <code>==</code> is implementation-defined. Nothing stops an implementation from returning <code>true</code> and then still treating the two as different."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 2, "creation_date": 1456917248, "post_id": 35744832, "comment_id": 59164505, "body": "@MikhailT. There&#39;s even a note in the standard which explicitly addresses this: <code>[basic.stc.dynamic.safety]:</code> &quot;[Note: the effect of using an invalid pointer value (including passing it to a deallocation function) is undefined. This is true even if the unsafely-derived pointer value might compare equal to some safely-derived pointer value. \u2014end note ]&quot;"}, {"owner": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1456917788, "post_id": 35744832, "comment_id": 59164879, "body": "@TartanLlama : very interesting. (yes, I&#39;m aware these are two different languages, but their compilers behave in the same way, every time). Note that we are not deallocating a dangling pointer, we are deferencing it with the indirection operator."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456918221, "post_id": 35744832, "comment_id": 59165186, "body": "Doesn&#39;t <code>if (p == q)</code> itself invoke UB? I mean, you access <code>p</code> which currently points to a memory location you aren&#39;t supposed to tamper with. NOTE: I&#39;m talking about C here."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456918286, "post_id": 35744832, "comment_id": 59165239, "body": "Please see: <a href=\"https://stackoverflow.com/questions/26704344/why-does-misra-c-state-that-a-copy-of-pointers-can-cause-a-memory-exception/26704433#26704433\" title=\"why does misra c state that a copy of pointers can cause a memory exception\">stackoverflow.com/questions/26704344/&hellip;</a> In that case the pointer is copied, not compared, but that doesn&#39;t matter because in both cases the object&#39;s value is accessed. The conclusion is the same, undefined behavior."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456918603, "post_id": 35744832, "comment_id": 59165463, "body": "@2501 My reading of that passage is that the lifetime of the pointee has ended, so referring to that would be undefined behaviour, but the pointer merely has an indeterminate value, which isn&#39;t necessarily undefined behaviour to access. Is that not correct?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 2, "creation_date": 1456919037, "post_id": 35744832, "comment_id": 59165779, "body": "@TartanLlama No, because an indeterminate value may be a trap representation and accessing it is undefined behavior. (This is true for C)"}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456919086, "post_id": 35744832, "comment_id": 59165810, "body": "@2501 Got it, thanks!"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1456919265, "post_id": 35744832, "comment_id": 59165936, "body": "@CoolGuy It does. @ TartanLlama No problem, note that my comment is only true for C, I don&#39;t know what is the situation in C++."}], "answers": [{"comments": [{"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "edited": false, "score": 1, "creation_date": 1456917928, "post_id": 35745355, "comment_id": 59164985, "body": "@Dave5545 because standard allows it to do it, it probably makes it easier to implement some optimizations."}, {"owner": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "edited": false, "score": 0, "creation_date": 1456918302, "post_id": 35745355, "comment_id": 59165256, "body": "So,I guess, dangling pointers can validate if statements, but still cause undefined behaviour when deferenced at any point."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456918365, "post_id": 35745355, "comment_id": 59165311, "body": "Comparison is undefined behavior in C. Please see: <a href=\"https://stackoverflow.com/questions/26704344/why-does-misra-c-state-that-a-copy-of-pointers-can-cause-a-memory-exception/26704433#26704433\" title=\"why does misra c state that a copy of pointers can cause a memory exception\">stackoverflow.com/questions/26704344/&hellip;</a>"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456918731, "post_id": 35745355, "comment_id": 59165544, "body": "@2501 standard says about it : [basic.stc.dynamic.safety]: <code>38) Some implementations might define that copying an invalid pointer value causes a system-generated runtime fault.</code>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456918957, "post_id": 35745355, "comment_id": 59165724, "body": "@marcinj That quote is not from C (I&#39;m pretty sure).. See the tags on the link and my comment. This question is (sadly) tagged with both."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456919878, "post_id": 35745355, "comment_id": 59166362, "body": "@2501 I am pretty sure it was originally tagged with C++. This quote is from c++ n4140 paper"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 0, "last_activity_date": 1456917892, "last_edit_date": 1456917892, "creation_date": 1456916548, "answer_id": 35745355, "question_id": 35744832, "link": "https://stackoverflow.com/questions/35744832/c-c-indeterminate-values-compiler-optimization-gives-different-output-exampl/35745355#35745355", "title": "C/C++ Indeterminate Values: Compiler optimization gives different output (example)", "body": "<blockquote>\n  <p>Is it certain that the execution will always get into the if statement? How do we know the addresses of the two pointers, p and q, will be the same?</p>\n</blockquote>\n\n<p>This is implementation defined, you cannot rely on this behaviour. <code>p</code> and <code>q</code> can indeed be equal, you have deallocated memory pointed by <code>p</code>, so <code>q</code> might get the same address as <code>p</code>. </p>\n\n<blockquote>\n  <p>Why does no-optimization has output 14, while -O3 has output 10 for the same instructions?</p>\n</blockquote>\n\n<p>this is how optimizer works, you can see here your version:</p>\n\n<p><a href=\"https://goo.gl/yRfjIv\" rel=\"nofollow\">https://goo.gl/yRfjIv</a></p>\n\n<p>where compiler optimizes out assignment of 14, and here version where it looks correct:</p>\n\n<p><a href=\"https://goo.gl/vSVV0E\" rel=\"nofollow\">https://goo.gl/vSVV0E</a></p>\n\n<p>value 14 is being assigned, and I have added only one line <code>p = q;</code></p>\n\n<p>I am not sure why exactly it works like that, I would say that compiler assumes your code is free from undefined behaviour code and does optimizations under such assumption.  </p>\n\n<p>[edit]</p>\n\n<p>The Undefined Behaviour is caused by the use of pointer value which compiler assumes is no longer valid, it does not matter if it is later on equal to some newly allocated memory block. The appropriate standard quote was given by TartanLlama :</p>\n\n<p>[basic.stc.dynamic.safety]</p>\n\n<blockquote>\n  <p>[ Note: the effect of using an invalid pointer value (including passing it to a\n  deallocation function) is undefined, see 3.7.4.2. This is true even if the unsafely-derived pointer value might\n  compare equal to some safely-derived pointer value. \u2014end note ]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 2, "creation_date": 1456918353, "post_id": 35745378, "comment_id": 59165302, "body": "Comparison is undefined behavior in C. Please see: <a href=\"https://stackoverflow.com/questions/26704344/why-does-misra-c-state-that-a-copy-of-pointers-can-cause-a-memory-exception/26704433#26704433\" title=\"why does misra c state that a copy of pointers can cause a memory exception\">stackoverflow.com/questions/26704344/&hellip;</a>"}, {"owner": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456919821, "post_id": 35745378, "comment_id": 59166319, "body": "@2501 just to clarify: a (rendered) invalid pointer has an &quot;indeterminate value&quot;, right? And accessing an indeterminate value always leads to undefined behaviour?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456919952, "post_id": 35745378, "comment_id": 59166424, "body": "@2501: I&#39;ve added something for C."}, {"owner": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "edited": false, "score": 0, "creation_date": 1456920695, "post_id": 35745378, "comment_id": 59166944, "body": "@ChristianHackl how would you describe the <i>value</i> of an invalid pointer? indeterminate or unspecified?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "edited": false, "score": 0, "creation_date": 1456920755, "post_id": 35745378, "comment_id": 59166997, "body": "@Dave5545 In this case undefined behavior happens at compile time. Compiler is allowed, due to the definition of UB, to default the if statement to false.."}, {"owner": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1456922000, "post_id": 35745378, "comment_id": 59167908, "body": "@2501 Right, thanks. So, as the same question to Christian, after freeing a pointer, its value is indeterminate or unspecified? (apparently, the first one is a superset)"}], "tags": [], "owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "is_accepted": true, "score": 4, "last_activity_date": 1456919909, "last_edit_date": 1495542758, "creation_date": 1456916599, "answer_id": 35745378, "question_id": 35744832, "link": "https://stackoverflow.com/questions/35744832/c-c-indeterminate-values-compiler-optimization-gives-different-output-exampl/35745378#35745378", "title": "C/C++ Indeterminate Values: Compiler optimization gives different output (example)", "body": "<blockquote>\n<pre><code>free(p);\n</code></pre>\n</blockquote>\n\n<p>This turns the contents of <code>p</code> into an invalid pointer value.</p>\n\n<blockquote>\n<pre><code>int *q = (int *)malloc(sizeof(int));\n</code></pre>\n</blockquote>\n\n<p>This line has no relevance for <code>p</code>.</p>\n\n<blockquote>\n<pre><code>if (p == q) {\n</code></pre>\n</blockquote>\n\n<p>This is <strong>implementation-defined</strong> behaviour because <code>p</code> has an invalid pointer value.</p>\n\n<blockquote>\n<pre><code>    *p = 10;\n</code></pre>\n</blockquote>\n\n<p>And finally, this is <strong>undefined</strong> behaviour, for the same reason as above.</p>\n\n<p>C++ standard \u00a73.7.4.2/4:</p>\n\n<blockquote>\n  <p>If the argument given to a deallocation function in the standard\n  library is a pointer that is not the null pointer value (4.10), the\n  deallocation function shall deallocate the storage referenced by the\n  pointer, <strong>rendering invalid</strong> all pointers referring to any part of the\n  deallocated storage. Indirection through an invalid pointer value and\n  passing an invalid pointer value to a deallocation function have\n  <strong>undefined behavior</strong>. Any other use of an invalid pointer value has\n  <strong>implementation-defined behavior.</strong></p>\n</blockquote>\n\n<p>Therefore, the answers to your questions are:</p>\n\n<blockquote>\n  <p>Is it certain that the execution will always get into the if statement?</p>\n</blockquote>\n\n<p>It depends on the implementation. The C++ language does not guarantee it.</p>\n\n<blockquote>\n  <p>Why does no-optimization has output 14, while -O3 has output 10 for the same instructions?</p>\n</blockquote>\n\n<p>Because the behaviour is undefined when you dereference an invalid pointer.</p>\n\n<hr>\n\n<p>In C, the comparison itself is undefined behaviour. Appendix J.2 in the C standard lists the circumstances in which the behaviour is undefined, and that list includes:</p>\n\n<blockquote>\n  <p>The value of a pointer to an object whose lifetime has ended is used.</p>\n</blockquote>\n\n<p>You may find the following question including all comments and answers interesting: <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\">Undefined, unspecified and implementation-defined behavior</a></p>\n"}, {"tags": [], "owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "is_accepted": false, "score": -3, "last_activity_date": 1456917414, "creation_date": 1456917414, "answer_id": 35745670, "question_id": 35744832, "link": "https://stackoverflow.com/questions/35744832/c-c-indeterminate-values-compiler-optimization-gives-different-output-exampl/35745670#35745670", "title": "C/C++ Indeterminate Values: Compiler optimization gives different output (example)", "body": "<p>The <code>if</code>-condition may be false -- depending on the particular implementation of <code>malloc()</code> it may return the just-freed block for reuse or a different one.</p>\n\n<p>But, if the program prints <em>anything</em> (because it so happened that <code>q</code> equals <code>p</code>), it must print <code>14</code>. A compiler producing anything else is buggy...</p>\n\n<p>Using clang 3.4.1 and 3.6.2 here I consistently get the right answer, whereas both gcc 4.2.1 and 5.3.0 manifest the bug. Unfortunately, so does clang 3.8.0.</p>\n"}], "owner": {"reputation": 129, "user_id": 6007189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576bb7861ba16464c8c0b9b919488c27?s=128&d=identicon&r=PG&f=1", "display_name": "Dave5545", "link": "https://stackoverflow.com/users/6007189/dave5545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 1, "accepted_answer_id": 35745378, "answer_count": 3, "score": 4, "last_activity_date": 1456919909, "creation_date": 1456915242, "last_edit_date": 1456916638, "question_id": 35744832, "link": "https://stackoverflow.com/questions/35744832/c-c-indeterminate-values-compiler-optimization-gives-different-output-exampl", "title": "C/C++ Indeterminate Values: Compiler optimization gives different output (example)", "body": "<p>It seems like the C/C++ compiler (clang, gcc, etc) produces <em>different</em> output related to the optimization level. You may as well check the online link included in this post. </p>\n\n<p><a href=\"http://cpp.sh/5vrmv\" rel=\"nofollow\">http://cpp.sh/5vrmv</a> (change output from none to -O3 to see the differences).</p>\n\n<p>Based on the following piece of code, could someone explain a few questions I have:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n\n    int *p = (int *)malloc(sizeof(int));\n    free(p);\n    int *q = (int *)malloc(sizeof(int));\n    if (p == q) {\n        *p = 10;\n        *q = 14;\n        printf(\"%d\", *p);\n    }\n    return 0;\n}\n</code></pre>\n\n<ol>\n<li>Is it certain that the execution will always get into the if statement? How do we know the addresses of the two pointers, p and q, will be the same?</li>\n<li>Why does no-optimization has output <strong>14</strong>, while -O3 has output <strong>10</strong> for the same instructions?</li>\n</ol>\n"}, {"tags": ["c", "pthreads", "global"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 1, "creation_date": 1456914679, "post_id": 35744589, "comment_id": 59162514, "body": "why a global ? why not a pointer to the array created in the main ?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1456914878, "post_id": 35744589, "comment_id": 59162677, "body": "static class variable can&#39;t use VLA."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1456915339, "post_id": 35744589, "comment_id": 59163042, "body": "You cannot create a global VLA. So, Use <code>int* amount; int main(int argc, char** argv){ amount = malloc(atoi(argv[1]) * sizeof(int)); </code> etc and <code>free</code> it at the end of <code>main</code>. I leave error checking upto you."}], "answers": [{"tags": [], "owner": {"reputation": 6177, "user_id": 4948889, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7f1b540c13a4b2663a9bf668f6a50145?s=128&d=identicon&r=PG", "display_name": "Jaffer Wilson", "link": "https://stackoverflow.com/users/4948889/jaffer-wilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1456915450, "creation_date": 1456915450, "answer_id": 35744910, "question_id": 35744589, "link": "https://stackoverflow.com/questions/35744589/how-to-create-a-global-variable-using-user-input/35744910#35744910", "title": "How to create a global variable using user input", "body": "<p>It's not possible to create global variables using the user input. See basically you can use global variables by defining them in the program code.</p>\n"}, {"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1456915794, "last_edit_date": 1456915794, "creation_date": 1456915461, "answer_id": 35744921, "question_id": 35744589, "link": "https://stackoverflow.com/questions/35744589/how-to-create-a-global-variable-using-user-input/35744921#35744921", "title": "How to create a global variable using user input", "body": "<p>You're trying to use a variable length array at global scope. This won't work (globals need to have a constant, known size, otherwise compilation would be difficult).</p>\n\n<p>IMHO, you shouldn't be using a global in the first place. Better use a local variable, and pass it via argument to the functions / parts of your program that need access to it.</p>\n\n<p>IMHO, you shouldn't be using VLA in the first place.</p>\n\n<p>I'd go with something like this:</p>\n\n<pre><code>int main(int argc, char ** argv) {\n  // check arguments, not done here!\n  int value = atoi(argv[1]);\n  // Check that it's actually usable as a size!\n  size_t count;\n  if (value &gt;= 0) {\n    count = value;\n  }\n  else {\n    // Fires of hell here\n    exit(1);\n  }\n  int * amount = malloc(sizeof(int) * count); // add error check, please!\n  // use at will\n  free(amount);\n  return 0;\n}\n</code></pre>\n\n<p>If you insist on using a global, then there's the possibility to make the (constant sized) pointer <code>amount</code> a global variable.</p>\n\n<p>Also: Using heap allocated data instead of stack allocated if you'd use a VLA is to be preferred when accessing the data from a detached thread, because the VLA could already be out of scope when the thread tries to access it!</p>\n"}, {"tags": [], "owner": {"reputation": 1214, "user_id": 2935508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525579321b8c3af42762ce6b288f8353?s=128&d=identicon&r=PG&f=1", "display_name": "Umamahesh P", "link": "https://stackoverflow.com/users/2935508/umamahesh-p"}, "is_accepted": true, "score": 4, "last_activity_date": 1456916106, "last_edit_date": 1456916106, "creation_date": 1456915513, "answer_id": 35744943, "question_id": 35744589, "link": "https://stackoverflow.com/questions/35744589/how-to-create-a-global-variable-using-user-input/35744943#35744943", "title": "How to create a global variable using user input", "body": "<p>You can use global pointer variable and then allocate memory based on argv[1].</p>\n\n<pre><code>int *amount;\n\nint main(int argc, char *argv[])\n{\n    int count = atoi(argv[1]);\n    amount = malloc(count * sizeof(int));\n\n    ...\n\n    free(amount);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 15361975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692a521f966458a820ad829b364b3d93?s=128&d=identicon&r=PG&f=1", "display_name": "Asish_Johney", "link": "https://stackoverflow.com/users/15361975/asish-johney"}, "is_accepted": false, "score": 1, "last_activity_date": 1615303171, "creation_date": 1615303171, "answer_id": 66549687, "question_id": 35744589, "link": "https://stackoverflow.com/questions/35744589/how-to-create-a-global-variable-using-user-input/66549687#66549687", "title": "How to create a global variable using user input", "body": "<p>Use <strong>constexpr</strong> keyword to make any non-const variable as constexpr. It will avoid the compiler errors, but be careful about the variable.</p>\n<p>For example:</p>\n<pre><code>#include&lt;iostream.h&gt;\n\nconstexpr int afun()\n{\n  return(3);\n}\n\nenum\n{\n\n  TOTAL_NO_OF_PACKETS = afun()                      // You can use for Enum also\n};\n\n\nunsigned packets[afun()]; // Using in Global array\n\nvoid main()\n{\n   // **\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5448913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3962, "favorite_count": 1, "accepted_answer_id": 35744943, "answer_count": 4, "score": 1, "last_activity_date": 1615303171, "creation_date": 1456914616, "question_id": 35744589, "link": "https://stackoverflow.com/questions/35744589/how-to-create-a-global-variable-using-user-input", "title": "How to create a global variable using user input", "body": "<p>I wish to create the following:</p>\n\n<pre><code>int amount[i];\n</code></pre>\n\n<p>As a global variable (to practice using threads and mutexes) but the variable <code>i</code> is defined at launch of the program:</p>\n\n<pre><code>./a.out 10\n</code></pre>\n\n<p>How may I take the value through the main (<code>argv[1]</code>) and create the global accordingly?</p>\n"}, {"tags": ["c", "bitwise-operators", "logical-operators"], "comments": [{"owner": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1456914614, "post_id": 35744510, "comment_id": 59162454, "body": "The answer partially depends on the specific language and how that language handles logical operators on integer values..."}, {"owner": {"reputation": 21, "user_id": 5646152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cb5cb0f633985eb7e91e64326ac743?s=128&d=identicon&r=PG&f=1", "display_name": "Vso", "link": "https://stackoverflow.com/users/5646152/vso"}, "reply_to_user": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1456914691, "post_id": 35744510, "comment_id": 59162524, "body": "@deceze Sorry about that, I am referring to C language."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1456915154, "last_edit_date": 1456915154, "creation_date": 1456914847, "answer_id": 35744667, "question_id": 35744510, "link": "https://stackoverflow.com/questions/35744510/logical-operators/35744667#35744667", "title": "Logical operators", "body": "<p>A boolean result is always true or false, and in C true is represented by <code>1</code> and false by <code>0</code>.</p>\n\n<p>The logical not operator <code>!</code> gives a boolean result, i.e. <code>1</code> or <code>0</code>. So if an expression is \"true\" (i.e. non-zero) then applying <code>!</code> on that expression will make it false, i.e. <code>0</code>.</p>\n\n<p>In your example you have <code>!x || !y</code>. First <code>!x</code> is evaluated, and it evaluates to false, leading to <code>!y</code> being evaluated, and it also evaluates to false, so the while expression becomes false, i.e. <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "is_accepted": false, "score": 0, "last_activity_date": 1456914857, "creation_date": 1456914857, "answer_id": 35744674, "question_id": 35744510, "link": "https://stackoverflow.com/questions/35744510/logical-operators/35744674#35744674", "title": "Logical operators", "body": "<p>Yes, <code>!</code> is different from the bitwise not <code>~</code>. It's a logical not. It yields either 0 or 1.</p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 5607380, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dclQVMrrhKU/AAAAAAAAAAI/AAAAAAAAAx4/dEMtp62EyWk/photo.jpg?sz=128", "display_name": "Rohit Magdum", "link": "https://stackoverflow.com/users/5607380/rohit-magdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1456915257, "creation_date": 1456915257, "answer_id": 35744841, "question_id": 35744510, "link": "https://stackoverflow.com/questions/35744510/logical-operators/35744841#35744841", "title": "Logical operators", "body": "<p>~(0x01) will 0x10 and\n!(0x01) will 0x00</p>\n\n<p>'~' is a bitwise operator. \n'!' is a logical operator.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 0, "last_activity_date": 1456915515, "creation_date": 1456915515, "answer_id": 35744945, "question_id": 35744510, "link": "https://stackoverflow.com/questions/35744510/logical-operators/35744945#35744945", "title": "Logical operators", "body": "<blockquote>\n  <p>From what I was thinking, I thought as long as an argument was not\n  zero it was considered true. So as long as x and y were some non-zero\n  value then &amp;&amp; operator would produce a 1, and of course as long as one\n  of them is true the || operator would produce a 1.</p>\n</blockquote>\n\n<p>This is all correct.</p>\n\n<pre><code>So why is the third question 0? Is the ! different from the bitwise ~ operator?\n</code></pre>\n\n<p>Yes. It is logical NOT. Just like the other logical operators <code>&amp;&amp;</code> and <code>||</code>, it only cares about if a variable has a non-zero value or not.</p>\n\n<p><code>!0</code> will yield <code>1</code>.</p>\n\n<p><code>!non_zero</code> will yield <code>0</code>.</p>\n\n<hr>\n\n<p>Note that all logical operators in C yield type <code>int</code> rather than <code>bool</code>, as an ugly, backwards-compatibility remain from the time before C had a boolean type. In C++ and other C-like languages, logical operators always yield type <code>bool</code>.</p>\n\n<p>Similarly, <code>true</code> and <code>false</code> in C are actually just macros that expand to the integers <code>1</code> and <code>0</code>. In other languages they are keywords and boolean constants.</p>\n"}], "owner": {"reputation": 21, "user_id": 5646152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8cb5cb0f633985eb7e91e64326ac743?s=128&d=identicon&r=PG&f=1", "display_name": "Vso", "link": "https://stackoverflow.com/users/5646152/vso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 35744945, "answer_count": 4, "score": 0, "last_activity_date": 1456915515, "creation_date": 1456914453, "last_edit_date": 1456914658, "question_id": 35744510, "link": "https://stackoverflow.com/questions/35744510/logical-operators", "title": "Logical operators", "body": "<p>I have come across an answer and I can't seem to figure out why it's right. </p>\n\n<p>So there are two int variables x and y and they represent 0x66 and 0x39 respectively. </p>\n\n<p>The question asked what is the result value based on the expression. </p>\n\n<pre><code>x &amp;&amp; y is apparently 0x01 (1)\nx || y is 1\n!x || !y is 0\nx &amp;&amp; ~y is 1\n</code></pre>\n\n<p>From what I was thinking, I thought as long as an argument was not zero it was considered true. So as long as x and y were some non-zero value then &amp;&amp; operator would produce a 1, and of course as long as one of them is true the || operator would produce a 1. </p>\n\n<p>So why is the third question 0? Is the ! different from the bitwise ~ operator? So originally x is 0101 0101 in binary since it's non zero it is true in the logical sense, but the ! of it would be false or would it do the one's complement of the number so its 1010 1010? </p>\n"}, {"tags": ["c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1456914549, "post_id": 35744472, "comment_id": 59162401, "body": "What are your expectation of persistence ( like cable disconnection, or access point goes down ), I think your issue has no solution."}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "reply_to_user": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1456914725, "post_id": 35744472, "comment_id": 59162552, "body": "@dvhh Issues are mainly during sending heartbeat which sometimes gets sigpipe or other problems. The server seems to think the connection isn&#39;t closed."}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1456914902, "post_id": 35744472, "comment_id": 59162694, "body": "isn&#39;t there some watchdog on the server closing the connection when it didn&#39;t receive the heartbeat ?"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1456914949, "post_id": 35744472, "comment_id": 59162725, "body": "Show some code, your question is too general... Anyway, program defined heartbeat is not a very good idea, yo&#39;d better use UTO TCP parameter."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456915192, "post_id": 35744472, "comment_id": 59162922, "body": "Are you asking how to fix the client or how to fix the server or how to sanely design a scheme where a TCP disconnect can be discovered by either side ... or what? Is the protocol you are using one that you designed?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1456915482, "post_id": 35744472, "comment_id": 59163157, "body": "You could always fix both. Make your server into a real one, (ie. can handle multiple, independent connections),  and use TCP keepalive to identify, and then close down, any left-over &#39;half-connections&#39;."}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456915874, "post_id": 35744472, "comment_id": 59163449, "body": "@DavidSchwartz I am asking If I can always make a close call to disconnect the server in my scenerio or equivalent."}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "reply_to_user": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1456915914, "post_id": 35744472, "comment_id": 59163485, "body": "@dvhh server connection closing detail in edit."}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1456916184, "post_id": 35744472, "comment_id": 59163690, "body": "@Jean-BaptisteYunes could you give me a detail on user timeout parameter option. I use apache tomcat server."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456916666, "post_id": 35744472, "comment_id": 59164047, "body": "Why not just have the server disconnect if it doesn&#39;t receive a heartbeat for, say, 30 seconds."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1456917286, "post_id": 35744472, "comment_id": 59164533, "body": "If the server doesn&#39;t detect the client disconnect there is something wrong with it."}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1456918315, "post_id": 35744472, "comment_id": 59165267, "body": "@DavidSchwartz it has been changed to 1min already. 30 seconds should work too."}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "edited": false, "score": 0, "creation_date": 1456918713, "post_id": 35744472, "comment_id": 59165540, "body": "Also I am not sure about the default sending timeout. So when will server be sure that the connection is closed?"}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1457348741, "post_id": 35744472, "comment_id": 59349928, "body": "@EJP As far as I can understand EPIPE is recieved while calling socket send not socket recieve. So the server is not probably understanding it while it is recieving."}], "answers": [{"comments": [{"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "edited": false, "score": 0, "creation_date": 1457348914, "post_id": 35744855, "comment_id": 59350028, "body": "Although this is a viable solution this will add vulnerability for DOS attack."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "edited": false, "score": 0, "creation_date": 1457350814, "post_id": 35744855, "comment_id": 59351094, "body": "@nomem How do you figure?"}, {"owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "edited": false, "score": 0, "creation_date": 1457352255, "post_id": 35744855, "comment_id": 59351931, "body": "If a connection always replaces old one then if multiple client try to connect with same username password my server will be busy doing that. Now If a connection is not replaced then other requests will be ignored."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "edited": false, "score": 0, "creation_date": 1457352935, "post_id": 35744855, "comment_id": 59352362, "body": "Well, you have to drop one connection or the other. I don&#39;t see why it makes a major difference which you drop when it comes to DOS attacks."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1456915301, "creation_date": 1456915301, "answer_id": 35744855, "question_id": 35744472, "link": "https://stackoverflow.com/questions/35744472/persistent-tcp-socket-connection-in-c/35744855#35744855", "title": "persistent tcp socket connection in c", "body": "<p>The simplest fix is probably for the server to allow a new connection to <em>replace</em> an old connection rather than rejecting it. That would still keep only one connection to each client at a time.</p>\n"}], "owner": {"reputation": 1438, "user_id": 2504754, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/pnwZ5.jpg?s=128&g=1", "display_name": "lnman", "link": "https://stackoverflow.com/users/2504754/lnman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456915689, "creation_date": 1456914366, "last_edit_date": 1456915689, "question_id": 35744472, "link": "https://stackoverflow.com/questions/35744472/persistent-tcp-socket-connection-in-c", "title": "persistent tcp socket connection in c", "body": "<p>I have a <code>C</code> service application that use <code>tcp socket</code> for connection to a server. The server sends data now and then. Also my application sends a hearbeat every 15 seconds. But sometimes it disconnects while server seems to think the connection is live. Now if I try to reconnect the server refuses as it holds only one connection for the client at a time.</p>\n\n<p>What is the best way to hold a persistent <code>tcp connection</code>?</p>\n\n<p>Edit:\nThe server usually disconnects after 2 min without heartbeat. So after I find my connection is closed it takes 2min for me to successfully reconnect. I want to minimize this time.</p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 1, "creation_date": 1456913571, "post_id": 35744066, "comment_id": 59161720, "body": "0x210000000 =&gt; more than 4 octets, not UL, but ULL"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1456914173, "post_id": 35744066, "comment_id": 59162161, "body": "The different integer types and their sizes are mentioned very early on in any decent beginner-level C programming book. And generally, using an <code>int</code> or any other signed type to store a hexadecimal number doesn&#39;t make any sense. What do you think strto<b>ul</b> does? Ensure that compiler warnings are enabled."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456937398, "post_id": 35744066, "comment_id": 59179908, "body": "BTW: <code>if ( *str_end != &#39;\\0&#39; || (errno == ERANGE))</code> fails to detect a no conversion as in <code>id = strtoul(&quot;&quot;, &amp;str_end, 16);</code>  Suggest <code>if ( str_end == idString || *str_end != &#39;\\0&#39; || (errno == ERANGE))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6344, "user_id": 2509081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LCRlV.jpg?s=128&g=1", "display_name": "alexbuisson", "link": "https://stackoverflow.com/users/2509081/alexbuisson"}, "edited": false, "score": 0, "creation_date": 1456916743, "post_id": 35744219, "comment_id": 59164109, "body": "downvoted, I mentionned that the EXPECTED result was error for &#39;0x210000000&#39;. I&#39;m not a beginner and if I wanted to get 64bit value I will have use the &#39;ull&#39; function... please re-read the question"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 6344, "user_id": 2509081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LCRlV.jpg?s=128&g=1", "display_name": "alexbuisson", "link": "https://stackoverflow.com/users/2509081/alexbuisson"}, "edited": false, "score": 2, "creation_date": 1456917977, "post_id": 35744219, "comment_id": 59165008, "body": "@alexbuisson Then I don&#39;t really get your question. If you expect the the to-big value to fail on 32 bit systems, you would of course expect it to succeed on 64 bit systems, right? For case 2 and 3, what result <i>did</i> you expect? I don&#39;t see what &quot;mistake&quot; you could possibly have made other than not expecting <code>long</code> to be 64 bits on 64 bit systems. The <code>long</code> type, just like all the other types, can have different sizes, and is <i>at least</i> 32 bits, but could be larger, and on e.g. Linux on a 64-bit system using GCC or Clang, then <code>long</code> is 64 bits."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 8, "last_activity_date": 1456918369, "last_edit_date": 1456918369, "creation_date": 1456913728, "answer_id": 35744219, "question_id": 35744066, "link": "https://stackoverflow.com/questions/35744066/why-strtoul-doesnt-work-as-expected/35744219#35744219", "title": "Why strtoul doesn&#39;t work as expected?", "body": "<p>The value <code>0x210000000</code> is larger than 32 bits, and on 32 bit systems <code>long</code> is usually 32 bits which means you can't use <code>strtoul</code> to convert the string correctly. You need to use <code>strtoull</code> and use <code>unsigned long long</code> which is guaranteed to be at least 64 bits.</p>\n\n<p>Of course, <code>long long</code> and <a href=\"http://en.cppreference.com/w/c/string/byte/strtoul\" rel=\"nofollow noreferrer\"><code>strtoull</code></a> was introduced in C99, so you might need to add e.g. <code>-std=c99</code> (or use a later standard like C11) to have it build correctly.</p>\n\n<hr>\n\n<p>The problem, it seems, is that you assume that <code>long</code> is <em>always</em> 32 bits, when in fact it's defined to be <em>at least</em> 32 bits. See e.g. <a href=\"http://en.cppreference.com/w/cpp/language/types#Properties\" rel=\"nofollow noreferrer\">this reference</a> for the minimum bit-size of the standard integer types.</p>\n\n<p>On some platforms and compilers, <code>long</code> can be bigger than 32 bits. Linux on 64-bit hardware is a typical such platform where <code>long</code> is bigger, namely 64 bits, which is of course well enough to fit <code>0x210000000</code>, which leads to <code>strtoul</code> not giving an error.</p>\n"}, {"comments": [{"owner": {"reputation": 6344, "user_id": 2509081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LCRlV.jpg?s=128&g=1", "display_name": "alexbuisson", "link": "https://stackoverflow.com/users/2509081/alexbuisson"}, "edited": false, "score": 0, "creation_date": 1456917214, "post_id": 35744701, "comment_id": 59164483, "body": "true, but adding check that &#39;id != ULONG_MAX&#39; will not help because in my case when &#39;strtoul&#39; process &#39;&#39;0x210000000&#39; in the cases (2) &amp; (3) I got: &#39;errno&#39; equal to 0, &#39;id&#39; equal to &#39;0x10000000&#39; so it&#39;s not &#39;ULONG_MAX&#39;"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 6344, "user_id": 2509081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LCRlV.jpg?s=128&g=1", "display_name": "alexbuisson", "link": "https://stackoverflow.com/users/2509081/alexbuisson"}, "edited": false, "score": 0, "creation_date": 1456928442, "post_id": 35744701, "comment_id": 59172749, "body": "@alexbuisson What do the <code>errno</code> and <code>strtoul</code> man pages say on your installation?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1456938120, "post_id": 35744701, "comment_id": 59180380, "body": "OP&#39;s use of <code>errno</code> appears correct per C11 7.5  3 &quot;The value of errno may be set to nonzero by a library function call whether or not there is an error, <b>provided the use of <code>errno</code> is not documented in the description of the function</b> in this International Standard.&quot; and &#167;7.22.1.4 8 &quot;If the correct value is outside the range of representable values, <code>LONG_MIN</code>, <code>LONG_MAX</code>, ...  is returned ..., and the value of the macro <code>ERANGE</code> is stored in errno.&quot;  Since <code>errno</code> is documented with <code>strtoul()</code>, it must follow that and not the general &quot;whether or not there is an error&quot;."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456941008, "post_id": 35744701, "comment_id": 59182287, "body": "@chux Yes.  Hence my parenthetical mention of POSIX in my answer.  But the OP states he&#39;s calling <code>strtoul</code> with a value that overflows, but it sets <code>errno</code> to <code>ERANGE</code> without returning <code>ULONG_MAX</code>.  Assuming it&#39;s Linux, it&#39;s not even following it&#39;s own documented behavior.  Saying <i>it must follow that [POSIX] and not the general &quot;whether or not there is an error&quot;</i> might be setting standards a bit too high..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1456942980, "post_id": 35744701, "comment_id": 59183551, "body": "Yes OP&#39;s code is problematic: code does not use <code>ULONG_MAX</code> but <code>0x1FFFFFFF</code> and assigns the return to <code>int id</code> which likely took on a negative value, thus failing to be detected in the &quot;Return error if converted Id is more than 29-bit&quot; test.  As <a href=\"http://stackoverflow.com/questions/35744066/why-strtoul-doesnt-work-as-expected/35744701?noredirect=1#comment59162161_35744066\">@Lundin</a> comments"}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1456914929, "creation_date": 1456914929, "answer_id": 35744701, "question_id": 35744066, "link": "https://stackoverflow.com/questions/35744066/why-strtoul-doesnt-work-as-expected/35744701#35744701", "title": "Why strtoul doesn&#39;t work as expected?", "body": "<p>Your code is also incorrect in assuming a successful call will not change the value of <code>errno</code>.  Per the <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow\">Linux <code>errno</code> man page</a>:</p>\n\n<blockquote>\n  <p>The <code>&lt;errno.h&gt;</code> header file defines the integer variable <code>errno</code>,\n  which is set by system calls and some library functions in the event\n  of an error to indicate what went wrong.  Its value is significant\n  only the return value of the call indicated an error (i.e., -1 from\n  most system calls; -1 or NULL from most library functions); <strong>a\n  function that succeeds is allowed to change <code>errno</code></strong>.</p>\n</blockquote>\n\n<p>(POSIX does place greater restrictions on <code>errno</code> modification by successful calls, but Linux doesn't strictly adhere to POSIX in many cases, and after all, <strong>G</strong>NU's <strong>N</strong>ot <strong>U</strong>nix...)</p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man3/strtoul.3.html\" rel=\"nofollow\">The <code>strtoul</code> man page states</a>:</p>\n\n<blockquote>\n  <p>The <code>strtoul()</code> function returns either the result of the conversion\n  or, if there was a leading minus sign, the negation of the result of\n  the conversion represented as an unsigned value, unless the original\n  (nonnegated) value would overflow; in the latter case, strtoul()\n  returns <code>ULONG_MAX</code> and sets errno to <code>ERANGE</code>.  Precisely the same\n  holds for strtoull() (with <code>ULLONG_MAX</code> instead of <code>ULONG_MAX</code>).</p>\n</blockquote>\n\n<p>Unless <code>strtoul</code> returned <code>ULONG_MAX</code>, the value of <code>errno</code> after a call to <code>strtoul</code> is indeterminate.</p>\n"}], "owner": {"reputation": 6344, "user_id": 2509081, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LCRlV.jpg?s=128&g=1", "display_name": "alexbuisson", "link": "https://stackoverflow.com/users/2509081/alexbuisson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 35744219, "answer_count": 2, "score": 0, "last_activity_date": 1456918369, "creation_date": 1456913329, "last_edit_date": 1456918035, "question_id": 35744066, "link": "https://stackoverflow.com/questions/35744066/why-strtoul-doesnt-work-as-expected", "title": "Why strtoul doesn&#39;t work as expected?", "body": "<p>Hi I wrote a small test program to check how the function I wrote to convert string (an hexadecimal number) into a unsigned integer and I found that the code behave differently depending on the compiler or system I use.</p>\n\n<p>I compiled the code below on:<br>\n(1) ideone C++4.3.2 <a href=\"https://ideone.com/LlcNWw\" rel=\"nofollow\">https://ideone.com/LlcNWw</a><br>\n(2) g++ 4.4.7 on a centos6 (64bits)<br>\n(3) g++ 4.6.3 on an ubuntu12 (64bits)<br>\n(4) g++ 4.9.3 in a cygwin (32bits) environment</p>\n\n<p>As expected (1) and (4) return AND IT'S exactly the correct result as the 1st value '0x210000000' is to big for a 32bit value....</p>\n\n<pre><code>Error while converting Id (0x210000000).\nsuccess\n</code></pre>\n\n<p>but (2) and (3) return </p>\n\n<pre><code>success\nsuccess\n</code></pre>\n\n<p>SO THE QUESTION is why the same simple C code build on different platform with different compiler return the same result... and Why 'strtoul(\"0x210000000\", ....)' doesn't set 'errno' to 'ERANGE' to said that the bit 33 to 37 are out of range.</p>\n\n<p>more trace on a the platform (3) give:</p>\n\n<pre><code>Id (0x210000000) as ul = 0x10000000  - str_end  - errno 0.\nsucess\nId (0x10000000) as ul = 0x10000000  - str_end  - errno 0.\nsucess\n\n\n\n\n   /* strtoul example */\n#include &lt;stdio.h&gt;      /* printf, NULL */\n#include &lt;stdlib.h&gt;     /* strtoul */\n#include &lt;errno.h&gt;\n\nsigned int GetIdentifier(const char* idString)\n{\n  char *str_end;\n  int id = -1;\n  errno = 0;\n  id = strtoul(idString, &amp;str_end, 16);\n  if ( *str_end != '\\0' || (errno == ERANGE))\n  {\n    printf(\"Error while converting Id (%s).\\n\", idString);\n    return -1;\n  }\n\n  // Return error if converted Id is more than 29-bit\n  if(id &gt; 0x1FFFFFFF)\n  {\n    printf(\"Error: Id (%s) should fit on 29 bits (maximum value: 0x1FFFFFFF).\\n\", idString);\n    return -1;\n  }\n  printf(\"sucess\\n\");\n  return id;\n}\n\n\nint main ()\n{\n  GetIdentifier(\"0x210000000\");\n  GetIdentifier(\"0x10000000\");\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "reference", "undefined", "cairo"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1456913375, "post_id": 35743948, "comment_id": 59161593, "body": "Its obvious that you&#39;re not linking your library properly. What is the command you are using to compile?"}, {"owner": {"reputation": 57, "user_id": 5738739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48f13f0dbaacc0e0203d7b93b791f61b?s=128&d=identicon&r=PG&f=1", "display_name": "JoAccount", "link": "https://stackoverflow.com/users/5738739/joaccount"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1456914488, "post_id": 35743948, "comment_id": 59162366, "body": "I tried gcc -o cairo cairo.c; gcc <code>pkg-config --cflags --libs cairo</code> -o cairo cairo.c; gcc -o cairo cairo.c <code>pkg-config --cflags cairo</code> -static <code>pkg-config --libs cairo</code>"}], "owner": {"reputation": 57, "user_id": 5738739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48f13f0dbaacc0e0203d7b93b791f61b?s=128&d=identicon&r=PG&f=1", "display_name": "JoAccount", "link": "https://stackoverflow.com/users/5738739/joaccount"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "closed_date": 1456914383, "answer_count": 0, "score": 0, "last_activity_date": 1456913021, "creation_date": 1456913021, "question_id": 35743948, "link": "https://stackoverflow.com/questions/35743948/cairo-compiling-error-undefined-reference", "closed_reason": "Duplicate", "title": "Cairo compiling error: undefined reference", "body": "<p>I begin learning about cairo for C, I previously installed the cairo library (libcairo2-dev) and I have the folder cairo in /usr/include.\nI tried to compile this in every way (also using pkg-config --cflags --libs cairo) and the static linking but nothing:</p>\n\n<pre><code>#include &lt;cairo/cairo.h&gt;\n\nint main(void)\n{\n  cairo_surface_t *surface;\n  cairo_t *cr;\n\n  surface = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, 390, 60);\n  cr = cairo_create(surface);\n\n  cairo_set_source_rgb(cr, 0, 0, 0);\n  cairo_select_font_face(cr, \"Sans\", CAIRO_FONT_SLANT_NORMAL,\n      CAIRO_FONT_WEIGHT_NORMAL);\n  cairo_set_font_size(cr, 50.0);\n\n  cairo_move_to(cr, 10.0, 50.0);\n  cairo_show_text(cr, \"Hi at all\");\n\n  cairo_surface_write_to_png(surface, \"image.png\");\n\n  cairo_destroy(cr);\n  cairo_surface_destroy(surface);\n\n  return 0;\n}\n</code></pre>\n\n<p>the compiling error is:</p>\n\n<pre><code>cairo.c:(.text+0x1e): undefined reference to `cairo_image_surface_create'\ncairo.c:(.text+0x2f): undefined reference to `cairo_create'\ncairo.c:(.text+0x5b): undefined reference to `cairo_set_source_rgb'\ncairo.c:(.text+0x6f): undefined reference to `cairo_select_font_face'\ncairo.c:(.text+0x8a): undefined reference to `cairo_set_font_size'\ncairo.c:(.text+0xb2): undefined reference to `cairo_move_to'\ncairo.c:(.text+0xc5): undefined reference to `cairo_show_text'\ncairo.c:(.text+0xd8): undefined reference to `cairo_surface_write_to_png'\ncairo.c:(.text+0xe6): undefined reference to `cairo_destroy'\ncairo.c:(.text+0xf4): undefined reference to `cairo_surface_destroy'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>How can I solve this problem???</p>\n"}, {"tags": ["c", "linux", "bash", "fork"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1456911787, "post_id": 35743330, "comment_id": 59160444, "body": "When you run <code>cd</code> the (incomplete) code as show will not invoke <code>execvp</code>. Instead it will do the <code>chdir</code> and then continue to run the next <code>for</code> loop iteration which will invoke <code>fork</code>. That&#39;s why the first child process does not exit for the <code>cd</code> case."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 4, "creation_date": 1456911826, "post_id": 35743330, "comment_id": 59160472, "body": "Welcome to Stack Overflow.  Please read the <a href=\"https://stackoverflow.com/tour\">About</a> page soon.  My immediate take is that there isn&#39;t enough information here for us to be able to answer \u2014 the devil is in the details, and the details are missing.  However, @kaylum is onto at least part of the problem, and probably has identified the main trouble. (I&#39;ll observe that the conditionals after <code>if (pid == 0)</code> petrify me \u2014 not enough braces, and no error handling if the <code>execvp()</code> or <code>chdir()</code> fails.)  Please read up on how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) and then provide one."}, {"owner": {"reputation": 185, "user_id": 1457487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0475aed199ddf1d0831b41be0db1b877?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Walker", "link": "https://stackoverflow.com/users/1457487/aaron-walker"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1456912206, "post_id": 35743330, "comment_id": 59160738, "body": "@kaylum I do not want <code>cd</code> to invoke <code>execvp()</code>. I want it to change the directory, loop back, then run the next line without the issues stated."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1456912282, "post_id": 35743330, "comment_id": 59160801, "body": "Fine, but your question is why does the child not exit. And that&#39;s an attempt at an explanation why. If you don&#39;t think that explanation is correct then do point out why. If you don&#39;t want it to fork again then the <code>cd</code> case should call <code>chdir</code> and then continue with parsing and execing the next command without another <code>fork</code>."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1456917807, "post_id": 35743330, "comment_id": 59164892, "body": "&quot;creating a bash program&quot; No, you&#39;re implementing a shell (possibly similar to bash)"}, {"owner": {"reputation": 185, "user_id": 1457487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0475aed199ddf1d0831b41be0db1b877?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Walker", "link": "https://stackoverflow.com/users/1457487/aaron-walker"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1456917981, "post_id": 35743330, "comment_id": 59165013, "body": "@DanielJour My apologies. Fixed."}, {"owner": {"reputation": 2073, "user_id": 357403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RpSGe.jpg?s=128&g=1", "display_name": "Koshinae", "link": "https://stackoverflow.com/users/357403/koshinae"}, "edited": false, "score": 0, "creation_date": 1456920714, "post_id": 35743330, "comment_id": 59166968, "body": "Your tabulation is incorrect, which misleads you/us/everyone. Please put all blocks in curly braces (<code>{}</code>) first."}], "answers": [{"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 5, "last_activity_date": 1456913185, "last_edit_date": 1456913185, "creation_date": 1456912499, "answer_id": 35743736, "question_id": 35743330, "link": "https://stackoverflow.com/questions/35743330/why-is-execvp-executing-twice-using-fork/35743736#35743736", "title": "Why is execvp() executing twice using fork()?", "body": "<p><code>cd</code> should not be invoked through a child process, the shell itself should change its current directory (that's the property of an internal command: modify the process of the shell itself).</p>\n\n<p>A (primitve) shell should looks like:</p>\n\n<pre><code>for(;;) {\n    printf(\"bash: \");\n    parse();\n\n    // realize internal commands (here \"cd\")\n    if (!strcmp(line[0], \"cd\")) {\n       if (!line[1]) (void) chdir(getenv(\"HOME\"));\n       else (void) chdir(line[1]);\n       continue; // jump back to read another command\n    }\n\n    // realize external commands\n    pid_t pid = fork()\n    if (pid == 0) {\n        execvp(line[0], line);\n        exit(EXIT_FAILURE); // wrong exec\n    }\n\n    // synchro on child\n    if (pid &gt; 0) {\n        while (pid == wait(NULL));\n        printf(\"%d terminated.\\n\", pid);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 1457487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0475aed199ddf1d0831b41be0db1b877?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Walker", "link": "https://stackoverflow.com/users/1457487/aaron-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 2, "accepted_answer_id": 35743736, "answer_count": 1, "score": 5, "last_activity_date": 1456917965, "creation_date": 1456911397, "last_edit_date": 1456917965, "question_id": 35743330, "link": "https://stackoverflow.com/questions/35743330/why-is-execvp-executing-twice-using-fork", "title": "Why is execvp() executing twice using fork()?", "body": "<p>I am implementing a shell.</p>\n\n<p>When attempting a command other than changing directories, <code>execvp()</code> runs, the child terminates and a new child is created. When I change directories, the child does not terminate and a new child is created. Here is a sample of my code:</p>\n\n<pre><code>for(;;) {\n    printf(\"bash: \");\n    parse();\n    ...\n    pid_t pid = fork()\n    if (pid == 0)\n        if (!strcmp(line[0], \"cd\"))\n            if (!line[1]) (void) chdir(getenv(\"HOME\"));\n            else (void) chdir(line[1]);\n        else execvp(line[0], line);\n    ...\n    if (pid &gt; 0) {\n        while (pid == wait(NULL));\n        printf(\"%d terminated.\\n\", pid);\n    }\n}\n</code></pre>\n\n<p><code>cd ../; ls;</code> runs correctly, except I have to <code>Ctrl+D</code> twice to end the program.</p>\n\n<p>Though, if I pipe the same information (ie. <code>mybash &lt; chdirtest</code>), it runs correctly once, terminates the child, runs again except in the original directly, then terminates the final child.</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1456911679, "post_id": 35743259, "comment_id": 59160360, "body": "if you assign an identifier (number) to each thread (ie. threads 0, 1 and 2 resp.), you can use <code>rand</code> just fine for selecting a thread. Placing the threads in an array will make this convenient, because the index in the array can be used as the identifier."}, {"owner": {"reputation": 134, "user_id": 3196613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4153b66bc806e3ee8ffd00a4c6f2c7a?s=128&d=identicon&r=PG&f=1", "display_name": "pranav", "link": "https://stackoverflow.com/users/3196613/pranav"}, "edited": false, "score": 0, "creation_date": 1456912103, "post_id": 35743259, "comment_id": 59160665, "body": "I would prefere using semaphores so that only two threads can be run parallely.And the loser will exit and winner and remaining threads can compete"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 134, "user_id": 3196613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4153b66bc806e3ee8ffd00a4c6f2c7a?s=128&d=identicon&r=PG&f=1", "display_name": "pranav", "link": "https://stackoverflow.com/users/3196613/pranav"}, "edited": false, "score": 0, "creation_date": 1456912372, "post_id": 35743259, "comment_id": 59160871, "body": "@pranav : but there&#39;s nothing (pseudo) random about acquiring a semaphore."}, {"owner": {"reputation": 134, "user_id": 3196613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4153b66bc806e3ee8ffd00a4c6f2c7a?s=128&d=identicon&r=PG&f=1", "display_name": "pranav", "link": "https://stackoverflow.com/users/3196613/pranav"}, "edited": false, "score": 0, "creation_date": 1456912628, "post_id": 35743259, "comment_id": 59161076, "body": "using semaphore you can allow number of threads to run in parallel,making other threads to wait in queue.Thus the threads that would run are random."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 134, "user_id": 3196613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4153b66bc806e3ee8ffd00a4c6f2c7a?s=128&d=identicon&r=PG&f=1", "display_name": "pranav", "link": "https://stackoverflow.com/users/3196613/pranav"}, "edited": false, "score": 0, "creation_date": 1456912743, "post_id": 35743259, "comment_id": 59161173, "body": "@pranav : you might want to read up on the meaning of <a href=\"https://en.wikipedia.org/wiki/Randomness\" rel=\"nofollow noreferrer\">randomness</a>"}], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 5607380, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dclQVMrrhKU/AAAAAAAAAAI/AAAAAAAAAx4/dEMtp62EyWk/photo.jpg?sz=128", "display_name": "Rohit Magdum", "link": "https://stackoverflow.com/users/5607380/rohit-magdum"}, "is_accepted": false, "score": 0, "last_activity_date": 1456911720, "creation_date": 1456911720, "answer_id": 35743440, "question_id": 35743259, "link": "https://stackoverflow.com/questions/35743259/selecting-a-random-thread-in-c/35743440#35743440", "title": "Selecting a random thread in c", "body": "<p>Array of thread ID should server your purpose. Use the rand() function to randomly select the index of the array. Whatever thread ID is stored at that index of your array should be your selected thread.</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 4385323, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/487b05aae7aa21e7aaca093514e9d5ce?s=128&d=identicon&r=PG&f=1", "display_name": "imaginedrragon", "link": "https://stackoverflow.com/users/4385323/imaginedrragon"}, "edited": false, "score": 0, "creation_date": 1456915130, "post_id": 35743492, "comment_id": 59162863, "body": "thank you so much for taking out the time, i&#39;ll try to understand how it works and maybe i&#39;ll even be able to use it! it does look much simpler than what i&#39;m trying to do."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1456914784, "last_edit_date": 1456914784, "creation_date": 1456911848, "answer_id": 35743492, "question_id": 35743259, "link": "https://stackoverflow.com/questions/35743259/selecting-a-random-thread-in-c/35743492#35743492", "title": "Selecting a random thread in c", "body": "<p>I'm assuming that you want 2 of 3 threads to perform some task, and that this selection should be random. I further assume that you want these 3 threads to do the selection \"in common\", i.e. not requiring a forth thread to do the selection (or to have one of the three doing a special selection procedure).</p>\n\n<p>A possible approach would be to use a counting semaphore to \"protect\" the task and only allow 2 threads to use it, i.e. initialize the semaphore to <code>2</code>. You can then have each thread sleep a random (small) delay, and try to acquire the semaphore.</p>\n\n<hr>\n\n<p>Without much comment, see this example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;unistd.h&gt;\n\nstruct data {\n    sem_t * semaphore;\n    int random;\n    char const * name;\n};\n\nvoid task(char const * name) {\n    printf(\"WOOOOO %s\\n\", name);\n}\n\nvoid * operation(void * d) {\n    struct data * data = d;\n    usleep(data-&gt;random % 1000);\n    if (sem_trywait(data-&gt;semaphore) == 0) {\n        task(data-&gt;name);\n    } else {\n        printf(\"FAILED, such a shame for %s\\n\", data-&gt;name);;\n    }\n    return NULL;\n}\n\nint main(void) { // NOTE: Demo, thus no error checking\n    srand(time(NULL));\n    sem_t * semaphore = malloc(sizeof(*semaphore));\n    struct data data[3] = {\n        {semaphore, rand(), \"John\"},\n        {semaphore, rand(), \"Marry\"},\n        {semaphore, rand(), \"Rupert\"}\n    };\n    pthread_t others[2];\n    sem_init(semaphore, 0, 2);\n    pthread_create(&amp;(others[0]), NULL, &amp;operation, &amp;(data[0]));\n    pthread_create(&amp;(others[1]), NULL, &amp;operation, &amp;(data[1]));\n    (void)operation(&amp;(data[2]));\n    pthread_join(others[0], NULL);\n    pthread_join(others[1], NULL);\n    sem_destroy(semaphore);\n    free(semaphore);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/e35SOF\" rel=\"nofollow\">(Live on ideone)</a></p>\n\n<p>Note that using <code>rand</code> makes this choice here actually pseudo-random. Getting rid of the sleeping part can lead to a real random selection, especially when the threads have been doing different things previously. (Although I can imagine a situation where one would be able to influence the threads from the outside to achieve a particular selection)</p>\n"}], "owner": {"reputation": 303, "user_id": 4385323, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/487b05aae7aa21e7aaca093514e9d5ce?s=128&d=identicon&r=PG&f=1", "display_name": "imaginedrragon", "link": "https://stackoverflow.com/users/4385323/imaginedrragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1456931787, "creation_date": 1456911212, "last_edit_date": 1456931787, "question_id": 35743259, "link": "https://stackoverflow.com/questions/35743259/selecting-a-random-thread-in-c", "title": "Selecting a random thread in c", "body": "<p>I need to randomly select two out of three threads, and I've come up with a few ideas but I'm not sure if they would work.</p>\n\n<p>Is it better to have an array of 3 threads and then have another thread choose from there, or to have three independent threads? And in both cases, how would you even write the function that would randomly select them? From what I understand, rand() can't be used because it's only for integers, and other than that I have no clue what to use.</p>\n\n<p>This is kind of a game project, and the winner of the two selected threads plays with the remaining thread. Can the same function be used for both instances then, or does there have to be a new one? I'm guessing the most useful thing would be the same thread using the same function, only with its choices narrowed down?</p>\n\n<p>I know this is probably simple but I'm only just starting out with threads, so excuse my poor skills. Any help is greatly appreciated!</p>\n\n<p>EDIT: Thank you everyone! However, since I'm already confused I really don't want to go into semaphores now. I've written some code based on one of the comments but it's not giving me the wanted output. Here's what I have:</p>\n\n<p>EDIT #2: I somehow managed to write it! The only thing left is for the function to call itself again but the pointers kind of confuse me so I don't know how to call it in the else part, and I don't know how else to stop the randomized values from repeating.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid *play (void *myvar);\nvoid *select (void *var);\n\npthread_t tid[3], th;\nint i, ra1, ra2;\n\nint main(int argc, char *argv[]) {\npthread_create(&amp;th, NULL, &amp;select, NULL);\n\nfor (i = 0; i &lt; 3; i++) {\n   pthread_create(&amp;tid[i], NULL, &amp;play, NULL);\n}\n\npthread_join(th, NULL);\n\nfor (i = 0; i &lt; 3; i++) {\n   pthread_join(tid[i], NULL);\n}\n\nreturn 0;\n}\n\nvoid *play (void *myvar) {\n\nprintf(\"Thread%i hits the ball!\\n\", i);\n\nreturn NULL;\n}\n\nvoid *select (void *var) {\nsrand ( time(NULL) );\nra1 = rand() % 3 + 1;\nra2 = rand() % 3 + 1;\n\nif (ra1 != ra2) {\nprintf(\"Threads have been chosen! Thread%i and Thread%i will start the game!\\n\", \nra1, ra2);\n}\nelse //what to do?;\n\nreturn NULL;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1456910708, "post_id": 35743051, "comment_id": 59159637, "body": "It&#39;s appreciated if you don&#39;t just tag every programming language that comes up when you type <code>c</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1456910802, "post_id": 35743051, "comment_id": 59159708, "body": "Shouldn&#39;t that be <code>fscanf(fp, &quot;%f&quot;, &amp;(student[a].average));</code>?"}, {"owner": {"reputation": 1268, "user_id": 3878996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/RE86U.jpg?s=128&g=1", "display_name": "Anbu.Sankar", "link": "https://stackoverflow.com/users/3878996/anbu-sankar"}, "edited": false, "score": 2, "creation_date": 1456910991, "post_id": 35743051, "comment_id": 59159854, "body": "You have to take care of file contents i.e in which format you are stored details, based on that you have to read."}, {"owner": {"reputation": 9, "user_id": 6006847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea1daccdda577150e443e645e205da3?s=128&d=identicon&r=PG&f=1", "display_name": "wjorjweoiflikwjgojpgne", "link": "https://stackoverflow.com/users/6006847/wjorjweoiflikwjgojpgne"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456911270, "post_id": 35743051, "comment_id": 59160065, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 It only displays 0.0000"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1456911332, "post_id": 35743051, "comment_id": 59160107, "body": "What&#39;s the content of StudentPUP.txt (the first 5-6 lines would be enolugh)."}, {"owner": {"reputation": 9, "user_id": 6006847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea1daccdda577150e443e645e205da3?s=128&d=identicon&r=PG&f=1", "display_name": "wjorjweoiflikwjgojpgne", "link": "https://stackoverflow.com/users/6006847/wjorjweoiflikwjgojpgne"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456911392, "post_id": 35743051, "comment_id": 59160141, "body": "@MichaelWalz  Student Name: Mark Benedict D. Lutab Gender: M Student Number: 2015-04711-MN-0 Course: BSIT Year: 1 Section: 2"}, {"owner": {"reputation": 1195, "user_id": 1865106, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15dc57110dac17f6bae8187c8a405b11?s=128&d=identicon&r=PG&f=1", "display_name": "SSC", "link": "https://stackoverflow.com/users/1865106/ssc"}, "edited": false, "score": 4, "creation_date": 1456911396, "post_id": 35743051, "comment_id": 59160148, "body": "You are not using <code>fscanf()</code> correctly. It won&#39;t magically read all the data your want. Please read <a href=\"http://www.cplusplus.com/reference/cstdio/fscanf/\" rel=\"nofollow noreferrer\"><code>fscanf()</code></a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456911417, "post_id": 35743051, "comment_id": 59160163, "body": "@BenedictLutab So in your <i>real</i> code you are passing the address to <code>fscanf()</code>?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1456911643, "post_id": 35743051, "comment_id": 59160336, "body": "@BenedictLutab please no screen dumps of text. Post the actual text."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1456911876, "post_id": 35743051, "comment_id": 59160502, "body": "The format of the file has not been considered"}, {"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 0, "creation_date": 1536809406, "post_id": 35743051, "comment_id": 91559721, "body": "Please don&#39;t make more work for people by vandalizing your posts. By posting on the Stack Exchange (SE) network, you&#39;ve granted a non-revocable right, under the <a href=\"//creativecommons.org/licenses/by-sa/3.0&quot;\" rel=\"nofollow noreferrer\">CC BY-SA 3.0 license</a>, for SE to distribute that content (i.e. regardless of your future choices). By SE policy, the non-vandalized version of the post is the one which is distributed. Thus, any vandalism will be reverted. If you want to know more about deleting a post please see: <a href=\"https://meta.stackexchange.com/q/5221/271271\">How does deleting work? ...</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1456911999, "last_edit_date": 1456911999, "creation_date": 1456911415, "answer_id": 35743336, "question_id": 35743051, "link": "https://stackoverflow.com/questions/35743051/cannot-read-my-written-file-c-programming-student-database/35743336#35743336", "title": "Cannot read my written file (C Programming Student Database)", "body": "<p>It should be</p>\n\n<pre><code>fscanf(fp, \"%f\", &amp;student[a].average);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>fscanf(fp, \"%f\", student[a].average);\n</code></pre>\n\n<p>But this allows you only to read a file containing numbers, for example:</p>\n\n<pre><code>1.5\n1.9\n2.7\n</code></pre>\n\n<p>The file you want to read is more compilcated.</p>\n\n<p>So in your <code>for</code> loop you need to read 10 lines, extract the relevant information from each line, store that information in the corresponding field of your record, and store the record somewhere.</p>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 3532367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff5bd296341f3a6ad61dc8ccad8371?s=128&d=identicon&r=PG&f=1", "display_name": "Mariusz", "link": "https://stackoverflow.com/users/3532367/mariusz"}, "is_accepted": false, "score": 0, "last_activity_date": 1456912006, "creation_date": 1456912006, "answer_id": 35743551, "question_id": 35743051, "link": "https://stackoverflow.com/questions/35743051/cannot-read-my-written-file-c-programming-student-database/35743551#35743551", "title": "Cannot read my written file (C Programming Student Database)", "body": "<p>Because it looks like your homework, I will not give you the solution but I tell you where is bug.</p>\n\n<p>You are using fscanf in the incorrect way. This line:</p>\n\n<pre><code>fscanf(fp, \"%f\", &amp;student[a].average);\n</code></pre>\n\n<p>is telling something like: \"take somevalue (float type) and write it to student[a].average\".\nIt can't work in your situation, because your data structure is more compilacted.</p>\n\n<p>What have you to do?\nFirst, try to write all data from the file on output.\nAfter that, you should try to parse the line which are you interest :)</p>\n\n<p>Read about getline, sscanf. It could be very helpful for you :)</p>\n"}, {"comments": [{"owner": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "reply_to_user": {"reputation": 9, "user_id": 6006847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea1daccdda577150e443e645e205da3?s=128&d=identicon&r=PG&f=1", "display_name": "wjorjweoiflikwjgojpgne", "link": "https://stackoverflow.com/users/6006847/wjorjweoiflikwjgojpgne"}, "edited": false, "score": 0, "creation_date": 1456923240, "post_id": 35745326, "comment_id": 59168773, "body": "Look for the desired line and store it in a string Search for a colon. Build a substring starting behind the colon and going till the end of your stored string. Information about substrings in C can be found with the help of your friend google"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 9, "user_id": 6006847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea1daccdda577150e443e645e205da3?s=128&d=identicon&r=PG&f=1", "display_name": "wjorjweoiflikwjgojpgne", "link": "https://stackoverflow.com/users/6006847/wjorjweoiflikwjgojpgne"}, "edited": false, "score": 0, "creation_date": 1456923323, "post_id": 35745326, "comment_id": 59168823, "body": "@BenedictLutab <i>if I try to get the name &quot;Mark Benedict D. Lutab&quot; it only gets &quot;Mark&quot;, how can I fix this</i> : This calls for a new question."}], "tags": [], "owner": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "is_accepted": false, "score": 1, "last_activity_date": 1587719848, "last_edit_date": 1587719848, "creation_date": 1456916497, "answer_id": 35745326, "question_id": 35743051, "link": "https://stackoverflow.com/questions/35743051/cannot-read-my-written-file-c-programming-student-database/35745326#35745326", "title": "Cannot read my written file (C Programming Student Database)", "body": "<p>You need to consider the input file format. \nWhen you're calling <code>fscanf</code> the 'cursor' is located at the first line of your file. What you need to to is to bring the cursor to the line you want to read. </p>\n\n<pre><code>Student Name: Andrea Zoelle Jacinto &lt;-- cursor is located at the beginning of this line \nGender: M\nStudent Number: 2015-04711-MN-0\nCourse: BSIT\nYear: 1\nSection: 2\nMidterm Grade: 2.00\nFinal Grade: 1.75\nAverage Grade: 1.8 &lt;-- you need the cursor here\n</code></pre>\n\n<p>To achieve that you can use <code>fgets</code> in an while loop to get rid of the lines before the desired line. </p>\n\n<pre><code>char line[256];\nwhile( fgets(line, 256, fp) &amp;&amp; line[0] != 'A'); // line[0] != 'A' makes the loop stop when it reached the desired line\n</code></pre>\n\n<p>Now your cursor is at the desired line, however you need to get rid of the text in front of the value you want to read.</p>\n\n<pre><code>Average Grade: 1.8 &lt;-- get rid of \"Average Grade: \"\n</code></pre>\n\n<p>The good thing is <code>line</code> already contains this line, so you can use <code>sscanf</code> to read formatted from this string.</p>\n\n<pre><code>sscanf(line, \"%*s %*s %f\", &amp;student[0].average); // note the ampersand in front of student[0].average to get its address\n</code></pre>\n\n<p>Using <code>%*s</code> makes <code>sscanf</code> ignore the words \"Average\" and \"Grades:\" so <code>%f</code> will read the desired value.</p>\n"}], "owner": {"reputation": 9, "user_id": 6006847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea1daccdda577150e443e645e205da3?s=128&d=identicon&r=PG&f=1", "display_name": "wjorjweoiflikwjgojpgne", "link": "https://stackoverflow.com/users/6006847/wjorjweoiflikwjgojpgne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "closed_date": 1456917105, "answer_count": 3, "score": -7, "last_activity_date": 1605606662, "creation_date": 1456910633, "last_edit_date": 1605606662, "question_id": 35743051, "link": "https://stackoverflow.com/questions/35743051/cannot-read-my-written-file-c-programming-student-database", "closed_reason": "Not suitable for this site", "title": "Cannot read my written file (C Programming Student Database)", "body": "<p>We got an assignment to make a program to read what is written inside our text file (name, student number, course, year, section, etc.. etc..) But I can't seem to make it work, can you tell me what's wrong?</p>\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n\nstruct record\n{\n       char name[50],number[50],course[50],gender;\n       int year, section;\n       float midterm,final,average,sum;\n};\n\nint main()\n{\n    int a=1,n;\n    int passed=0,failed=0;\n    \n    FILE *fp;\n    fp = fopen(&quot;BSU.txt&quot;,&quot;r&quot;);\n    \n    if(fp==NULL)\n    {\n           printf(&quot;ERROR!&quot;);\n           getch();\n    }\n    \n    struct record student[25];\n    \n    printf(&quot;Please input the number of students: &quot;);\n    scanf(&quot;%d&quot;, &amp;n);\n    \n    for(a=0;a&lt;n;a++)\n    {\n          fscanf(fp, &quot;%f&quot;, student[a].average);// I CANNOT MAKE THE FSCANF WORK!!//\n    }\n    \n    getch();        \n}\n</code></pre>\n"}, {"tags": ["python", "c", "average", "elements", "convolution"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456929567, "post_id": 35742750, "comment_id": 59173672, "body": "this is not about &#39;c&#39; so please remove the <code>c</code> tag"}], "answers": [{"tags": [], "owner": {"reputation": 2307, "user_id": 1692028, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bab5e1f87595aaea974d32b82187d3b9?s=128&d=identicon&r=PG", "display_name": "EelkeSpaak", "link": "https://stackoverflow.com/users/1692028/eelkespaak"}, "is_accepted": false, "score": 2, "last_activity_date": 1456911094, "last_edit_date": 1456911094, "creation_date": 1456910245, "answer_id": 35742901, "question_id": 35742750, "link": "https://stackoverflow.com/questions/35742750/moving-average-of-3-elements-by-c-or-python/35742901#35742901", "title": "moving average of 3 elements by C or Python", "body": "<p>The best (and fastest, by far) way to approach this is <a href=\"https://en.wikipedia.org/wiki/Convolution\" rel=\"nofollow noreferrer\">convolution</a>. Using <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.convolve.html\" rel=\"nofollow noreferrer\">numpy's convolve</a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\nx = np.asarray([7.0, 9.0, 5.0, 1.0, 3.0])\n\n# create what's known as the convolution 'kernel'\n# note that this sums to 1, which results in an average\nkernel = np.ones(3) / 3\n\n# do the convolution to compute the moving average\nmoving_avg = np.convolve(x, kernel, mode='valid')\n</code></pre>\n\n<p>You can view the convolution operation as the kernel \"sliding\" over the data sequence. Every point <code>moving_avg[k]</code> in the output of the convolution will be the area under the product between your data and the kernel, when the kernel is centered at that point <code>k</code>.</p>\n\n<p>This is an animation (from the wikipedia article linked above) illustrating the principle for the square kernel used in moving average computation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9truS.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9truS.gif\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 5444964, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0d77c4f70e42e99c1d8aca34b35324ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tofazzal", "link": "https://stackoverflow.com/users/5444964/tofazzal"}, "edited": false, "score": 0, "creation_date": 1456914541, "post_id": 35743046, "comment_id": 59162397, "body": "Thank you Evans. I have confirmed the results."}, {"owner": {"reputation": 71, "user_id": 5444964, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0d77c4f70e42e99c1d8aca34b35324ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tofazzal", "link": "https://stackoverflow.com/users/5444964/tofazzal"}, "edited": false, "score": 0, "creation_date": 1456917173, "post_id": 35743046, "comment_id": 59164453, "body": "Hello Evans,  I have another simple problem that explained in a new thread in the following link. Could you please take a look.  <a href=\"http://stackoverflow.com/questions/35745521/calculate-the-function-of-fi\" title=\"calculate the function of fi\">stackoverflow.com/questions/35745521/&hellip;</a>"}], "tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": true, "score": 1, "last_activity_date": 1456910963, "last_edit_date": 1456910963, "creation_date": 1456910626, "answer_id": 35743046, "question_id": 35742750, "link": "https://stackoverflow.com/questions/35742750/moving-average-of-3-elements-by-c-or-python/35743046#35743046", "title": "moving average of 3 elements by C or Python", "body": "<p>You could use a Python <a href=\"https://docs.python.org/2/library/collections.html?highlight=deque#collections.deque\" rel=\"nofollow\"><code>deque</code></a> for doing this as follows:</p>\n\n<pre><code>from collections import deque\n\nprices = [7.0, 9.0, 5.0, 1.0, 3.0]\nmoving_average = deque()\ntotal = 0.0\ndays = 3\naverages = []\n\nfor price in prices:\n    moving_average.append(price)\n    total += price\n\n    if len(moving_average) &gt; days:      # Length of moving average\n        total -= moving_average.popleft()\n\n    averages.append(total / float(len(moving_average)))\n\nprint averages\n</code></pre>\n\n<p>This would display the following output:</p>\n\n<pre><code>[7.0, 8.0, 7.0, 5.0, 3.0]\n</code></pre>\n\n<p>Or you could skip the initial entries as follows:</p>\n\n<pre><code>print averages[days-1:]\n</code></pre>\n\n<p>Giving:</p>\n\n<pre><code>[7.0, 5.0, 3.0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2307, "user_id": 1692028, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bab5e1f87595aaea974d32b82187d3b9?s=128&d=identicon&r=PG", "display_name": "EelkeSpaak", "link": "https://stackoverflow.com/users/1692028/eelkespaak"}, "edited": false, "score": 0, "creation_date": 1456910885, "post_id": 35743083, "comment_id": 59159771, "body": "This is an elegant and Pythonic way to do it, but will be extremely slow for large data sets. In those cases, the convolution approach which I outlined would be the only way to go. But apart from that, great answer :)"}], "tags": [], "owner": {"reputation": 7298, "user_id": 4838189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/MhY0S.jpg?s=128&g=1", "display_name": "DevShark", "link": "https://stackoverflow.com/users/4838189/devshark"}, "is_accepted": false, "score": 2, "last_activity_date": 1456915805, "last_edit_date": 1456915805, "creation_date": 1456910718, "answer_id": 35743083, "question_id": 35742750, "link": "https://stackoverflow.com/questions/35742750/moving-average-of-3-elements-by-c-or-python/35743083#35743083", "title": "moving average of 3 elements by C or Python", "body": "<p>A list comprehension is a pythonic way to do this, that does not require any import:</p>\n\n<pre><code>&gt;&gt;&gt; a\n[7, 9, 5, 1, 3]\n&gt;&gt;&gt; [(a[i]+a[i+1]+a[i+2])/3.0 for i in xrange(len(a)-2)]\n[7.0, 5.0, 3.0]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5444964, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0d77c4f70e42e99c1d8aca34b35324ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tofazzal", "link": "https://stackoverflow.com/users/5444964/tofazzal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 35743046, "answer_count": 3, "score": 1, "last_activity_date": 1456915805, "creation_date": 1456909811, "last_edit_date": 1456914469, "question_id": 35742750, "link": "https://stackoverflow.com/questions/35742750/moving-average-of-3-elements-by-c-or-python", "title": "moving average of 3 elements by C or Python", "body": "<p>I want to calculate the moving average of 3 elements. </p>\n\n<p>For example, I have a 25 elements of sales data. I need to calculate the moving average taken from averaging these 25 elements of data. </p>\n\n<p>When a real array is given as data, I want to write a program that will determines a 3 element moving average and creates an array. The number of elements in the array becomes 2 elements shorter than the given sequence. \nFor example, if I am given:</p>\n\n<pre><code>[7.0, 9.0, 5.0, 1.0, 3.0]\n</code></pre>\n\n<p>I want to get:</p>\n\n<pre><code>[7.0, 5.0, 3.0]\n</code></pre>\n"}, {"tags": ["python", "c", "html", "websocket", "autobahn"], "answers": [{"tags": [], "owner": {"reputation": 2259, "user_id": 1077987, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c9edc68b0fe5d59ff572a22940a5e40a?s=128&d=identicon&r=PG", "display_name": "gzost", "link": "https://stackoverflow.com/users/1077987/gzost"}, "is_accepted": false, "score": 1, "last_activity_date": 1457092717, "creation_date": 1457092717, "answer_id": 35795470, "question_id": 35742708, "link": "https://stackoverflow.com/questions/35742708/is-the-following-principle-the-right-for-autobahn-python/35795470#35795470", "title": "Is the following principle the right for autobahn python?", "body": "<p>Autobahn|Python provides both a WebSocket implementation for Python and an implementation for a client for the WAMP protocol on top of that.</p>\n\n<p>You can use the WebSocket part on its own to implement your WebSocket server.</p>\n"}], "owner": {"reputation": 79, "user_id": 5997442, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5e21408c52d2c9063e6ec8f60d17600a?s=128&d=identicon&r=PG&f=1", "display_name": "rele92", "link": "https://stackoverflow.com/users/5997442/rele92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457092717, "creation_date": 1456909712, "last_edit_date": 1456910845, "question_id": 35742708, "link": "https://stackoverflow.com/questions/35742708/is-the-following-principle-the-right-for-autobahn-python", "title": "Is the following principle the right for autobahn python?", "body": "<p>I'm researching about WebSockets atm and just found Autobahn with <code>Autobahn|Python</code>.\nI'm not sure that I understand the function of that toolset (?) correctly.</p>\n\n<p>My intention is to use a <code>WebSocket-Server</code> for communication between a <code>C</code> program and a HTML client. </p>\n\n<p>The idea is to let the <code>C</code> program connect via <code>WebSocket</code> to the Server and send the calculation progress of the <code>C</code> program to every HTML client that is connected to that <code>WebSocket-Server</code>.</p>\n\n<p>Am I able to write a <code>WebSocket</code> Server with <code>Autobahn|Python</code> and then connect with an <code>HTML5-client</code> and a <code>C</code> program client?</p>\n"}, {"tags": ["c", "string", "function", "malloc"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 3, "creation_date": 1456909493, "post_id": 35742580, "comment_id": 59158758, "body": "As a starter, <code>char * ListWord;</code> should be actually <code>char ** ListWord;</code> and if you want to pass this as an argument to function (and not get returned from function), argument type should be <code>char ***</code>. <code>free</code> would be complex."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1456910374, "post_id": 35742580, "comment_id": 59159397, "body": "Looks like you&#39;re passing <code>by value</code> and not <code>by reference</code>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1456910981, "post_id": 35742580, "comment_id": 59159844, "body": "@MisterMister If it is known that there are exactly 10 words then why did not you just declare a two-dimensional array of 10 character arrays?"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 5, "last_activity_date": 1456912893, "last_edit_date": 1456912893, "creation_date": 1456909613, "answer_id": 35742677, "question_id": 35742580, "link": "https://stackoverflow.com/questions/35742580/value-was-not-retained-outside-of-a-function/35742677#35742677", "title": "Value was not retained outside of a function", "body": "<p>Due to <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">*operator precedence</a> the expression <code>*ListWord[i]</code> doesn't do what you think it does. In fact you should be getting errors or warnings from the code you have.</p>\n\n<p>The compiler thinks that <code>*ListWord[i]</code> means <code>*(ListWord[i])</code>, which is not right. You need to use <code>(*ListWord)[i]</code>.</p>\n\n<hr>\n\n<p>Unfortunately that's only the start of your problems. A bigger problem is that the pointer you pass to the function <code>GetInput</code> is not a pointer to what could become an array of strings, but a pointer to a single string.</p>\n\n<p>For a dynamic allocated array of strings, you need a pointer to a pointer to begin with, and then emulate pass-by-reference on that, i.e. you need to become a <em>three star programmer</em> which is something you should avoid.</p>\n\n<p>Instead of trying to pass in the array to be allocated as an argument, have the <code>GetInput</code> <em>return</em> the array instead. Something like</p>\n\n<pre><code>char **GetInput(void)\n{\n    // Allocate ten pointers to char, each initialized to NULL\n    char **ListWords = calloc(10, sizeof(char *));\n    if (ListWords == NULL)\n        return NULL;\n\n    char word[31];\n    for (int i = 0; i &lt; 10 &amp;&amp; scanf(\"%30s\", word) == 1; ++i)\n    {\n        ListWords[i] = strdup(word);\n    }\n\n    return ListWords;\n}\n</code></pre>\n\n<p>The above code adds some security checks, so you will not go out of bounds of either the temporary array you read into, or the <code>ListWords</code> array. It also makes sure the <code>ListWords</code> array is initialized, so if you read less then 10 words, then the remaining pointers will be <code>NULL</code>.</p>\n\n<hr>\n\n<p>Of course you need to change your <code>main</code> function accordingly, and also your <code>Print</code> function, because now it only takes a single string as argument, not an array of strings. You also of course need to <code>free</code> every single string in the array because freeing the array.</p>\n"}], "owner": {"reputation": 23, "user_id": 6006705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63f589f0da28cd283cc0cfea762051dd?s=128&d=identicon&r=PG&f=1", "display_name": "MisterMister", "link": "https://stackoverflow.com/users/6006705/mistermister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 35742677, "answer_count": 1, "score": 2, "last_activity_date": 1456912893, "creation_date": 1456909326, "last_edit_date": 1456909499, "question_id": 35742580, "link": "https://stackoverflow.com/questions/35742580/value-was-not-retained-outside-of-a-function", "title": "Value was not retained outside of a function", "body": "<p>I'm writing a program that should get its inputs from a text file by using input redirection in a function called GetInput. (The text file contains 10 words.) The code should then be able to print the contents of ListWord in the Print function. </p>\n\n<p>This is what I have so far.<br>\nI keep on getting errors while trying to run this code. I tried to remove * before ListWord and the code works but it does not retain the word (string) that was stored in it. But removing * before ListWord does not make sense to me. What am I doing wrong? </p>\n\n<pre><code>void GetInput( char** ListWord)       \n{\n    int i=0;\n    char word[30]; //each word may contain 30 letters\n    *ListWord = malloc(sizeof(char*)*10); //there are 10 words that needs to be allocated\n\n    while(scanf(\"%s\", word)==1) //Get Input from file redirection\n    {\n        *ListWord[i]= (char *)malloc(30+1);\n        printf(\"%s\\n\", word); //for checking\n        strcpy(*ListWord[i], word);\n        printf(\"%s\\n\", *ListWord[i]); //for checking\n        i++;\n    }\n\n}\n\nvoid Print(char *ListWord)\n{\n    //print ListWord\n    int i;\n    for (i=0; i&lt;10; i++)\n    {\n        printf(\"%s\", ListWord[i]);\n    }\n}\n\nint  main()\n{\n  char * ListWord; \n\n  GetInput(&amp;ListWord); \n  printf(\"%s\\n\", ListWord[0]);\n  Print(ListWord);\n\n  free(ListWord);\n\n  return 0;\n}  \n</code></pre>\n\n<p>(Note: This is a homework. Thank you and sorry if it's unclear)</p>\n"}, {"tags": ["c", "windows", "time"], "comments": [{"owner": {"reputation": 267, "user_id": 4998931, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/522504466/picture?type=large", "display_name": "Michael Vaysman", "link": "https://stackoverflow.com/users/4998931/michael-vaysman"}, "edited": false, "score": 0, "creation_date": 1456909383, "post_id": 35742540, "comment_id": 59158691, "body": "It&#39;s less than picoseconds. I think it is impossible in windows..."}, {"owner": {"reputation": 134, "user_id": 3196613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4153b66bc806e3ee8ffd00a4c6f2c7a?s=128&d=identicon&r=PG&f=1", "display_name": "pranav", "link": "https://stackoverflow.com/users/3196613/pranav"}, "edited": false, "score": 1, "creation_date": 1456909633, "post_id": 35742540, "comment_id": 59158841, "body": "measuring execution time of single printf statement is pointless."}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 1, "creation_date": 1456909900, "post_id": 35742540, "comment_id": 59159036, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1083142/what-s-the-correct-way-to-use-printf-to-print-a-clock-t\">What\u2019s the correct way to use printf to print a clock_t?</a>"}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1456910142, "post_id": 35742540, "comment_id": 59159221, "body": "Test the approach by measuring the time it takes to calculate <code>for(int i = 1; i &lt; 5; i++) sqrt(i);</code> and check that. One of the reasons why execution time is almost 0 is because &quot;Hello world&quot; is a hardcoded literal, and it doesn&#39;t take that long to fetch it from the file&#39;s <code>.text</code> section."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1525049618, "post_id": 35742540, "comment_id": 87201675, "body": "You may be experiencing the <a href=\"http://www.userfriendly.org/cartoons/archives/99mar/19990318.html\" rel=\"nofollow noreferrer\">Microsoft Minute</a>."}], "answers": [{"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": true, "score": 6, "last_activity_date": 1456909575, "creation_date": 1456909575, "answer_id": 35742665, "question_id": 35742540, "link": "https://stackoverflow.com/questions/35742540/measureing-execution-time-with-c-in-windows/35742665#35742665", "title": "Measureing execution time with C in Windows", "body": "<p>%E needs floating point (<code>float</code> or <code>double</code>). You are sending integer values</p>\n\n<p>To divide ensure number is floating</p>\n\n<p>(end-begin+0.0)/CLOCKS_PER_SEC);</p>\n"}], "owner": {"reputation": 267, "user_id": 4998931, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/522504466/picture?type=large", "display_name": "Michael Vaysman", "link": "https://stackoverflow.com/users/4998931/michael-vaysman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 35742665, "answer_count": 1, "score": 1, "last_activity_date": 1525049643, "creation_date": 1456909217, "last_edit_date": 1525049643, "question_id": 35742540, "link": "https://stackoverflow.com/questions/35742540/measureing-execution-time-with-c-in-windows", "title": "Measureing execution time with C in Windows", "body": "<p>I want to measure the execution time of peace of code.<br>\nI'm doing it with clock() function.<br>\nHere the example:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\nint main(void) {\n    clock_t begin=0, end=0;\n\n    begin = clock();\n    printf(\"hello world!!\\n\");\n    end = clock();\n\n    printf(\"Begin %E\\n\",begin);\n    printf(\"End %E\\n\",end);\n    printf(\"Clocks %E\\n\",end-begin);\n    printf(\"Clocks per second %E\\n\", CLOCKS_PER_SEC);\n    printf(\"Time %E\\n\", (end-begin)/CLOCKS_PER_SEC);\n\n    return 0;\n}\n</code></pre>\n\n<p>Here the output:</p>\n\n<pre><code>hello world!!\nBegin 2.529616E-320\nEnd 2.535545E-320\nClocks 5.928788E-323\nClocks per second 4.940656E-318\nTime 0.000000E+00\n</code></pre>\n\n<p>Time is 0!<br>\nWhat I'm doing wrong?\nIs the output correct?  </p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["python", "c", "formula"], "comments": [{"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 2, "creation_date": 1456908589, "post_id": 35742289, "comment_id": 59158140, "body": "A good, old, search &amp; replace will do the work"}, {"owner": {"reputation": 232, "user_id": 3692905, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e845ebc57c74d3dafa4ac32ad7a1c37e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3692905/alex"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1456908752, "post_id": 35742289, "comment_id": 59158257, "body": "yeah, I was hoping there would be something a little more streamlined.  I often deal with a half-dozen equations of this order of magnitude per script and search&amp;replace gets tiresome."}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1456908789, "post_id": 35742289, "comment_id": 59158282, "body": "what abou using the <code>sed</code> utility ?"}, {"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1456908902, "post_id": 35742289, "comment_id": 59158361, "body": "You often deal with it? It being a lot of lines? Write a tool, give it a dictionary with C function as Key and corresponding Python function as value. Then replace all :)"}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 1, "creation_date": 1456909673, "post_id": 35742289, "comment_id": 59158881, "body": "Power() and Sqrt() are not standard C functions"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5497885"}, "is_accepted": false, "score": 0, "last_activity_date": 1456908651, "creation_date": 1456908651, "answer_id": 35742369, "question_id": 35742289, "link": "https://stackoverflow.com/questions/35742289/is-there-a-tool-to-convert-a-math-formula-written-in-c-to-python/35742369#35742369", "title": "Is there a tool to convert a math formula written in C to Python?", "body": "<p>You can use Sympy to derive your formula in python and execute in python after.</p>\n\n<p>This is the usual way</p>\n"}, {"tags": [], "owner": {"reputation": 1062, "user_id": 1235165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a00749a25d0ec2501ef174d92569?s=128&d=identicon&r=PG", "display_name": "hmijail mourns resignees", "link": "https://stackoverflow.com/users/1235165/hmijail-mourns-resignees"}, "is_accepted": false, "score": 1, "last_activity_date": 1456909559, "last_edit_date": 1456909559, "creation_date": 1456909203, "answer_id": 35742536, "question_id": 35742289, "link": "https://stackoverflow.com/questions/35742289/is-there-a-tool-to-convert-a-math-formula-written-in-c-to-python/35742536#35742536", "title": "Is there a tool to convert a math formula written in C to Python?", "body": "<p>You don't have to convert anything. Algebraic operators in Python and C have the same precedence order: *, /, +, -, all of them left-to-right. See for example <a href=\"https://montcs.bloomu.edu/Information/operator-precedence.C-Python-Pascal.shtml\" rel=\"nofollow\">https://montcs.bloomu.edu/Information/operator-precedence.C-Python-Pascal.shtml</a> .</p>\n\n<p>You will only have to define the functions used. In your example I see Power() and Sqrt(), which probably would map to Python's math.pow() and math.sqrt().</p>\n"}, {"tags": [], "owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1456909289, "creation_date": 1456909289, "answer_id": 35742565, "question_id": 35742289, "link": "https://stackoverflow.com/questions/35742289/is-there-a-tool-to-convert-a-math-formula-written-in-c-to-python/35742565#35742565", "title": "Is there a tool to convert a math formula written in C to Python?", "body": "<p>Assuming you trust the code you could use <code>exec</code></p>\n\n<pre><code>from math import sqrt\n\nformula_str = \"\"\"\ndef myfunc(a,r,rd,M):\n    return (Power(a,5)*M + 2*Power(a,3)*M*r*(-2*M + r) + a*M*Power(r,2)*Power(-2*M + r,2) - \n    Sqrt(-(Power(r,3)*Power(Power(a,2) + r*(-2*M + r),2)*(Power(a,4)*M*(-1 + Power(rd,2)) - \n    Power(a,2)*r*(2*M*r + Power(r,2)*Power(rd,2) + Power(M,2)*(-4 + Power(rd,2))) + \n    M*Power(r,2)*(-4*Power(M,2) + 4*M*r + Power(r,2)*(-1 + Power(rd,2)))))))/((Power(a,2)*M - Power(r,3))*Power(Power(a,2) + r*(-2*M + r),2))\n\"\"\".replace(\"Power\",\"pow\").replace(\"Sqrt\",\"sqrt\")\n\nmyfunc(5,4,3,2) #output:0.6288528754088698\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "is_accepted": false, "score": 0, "last_activity_date": 1456909685, "last_edit_date": 1456909685, "creation_date": 1456909358, "answer_id": 35742590, "question_id": 35742289, "link": "https://stackoverflow.com/questions/35742289/is-there-a-tool-to-convert-a-math-formula-written-in-c-to-python/35742590#35742590", "title": "Is there a tool to convert a math formula written in C to Python?", "body": "<p>You can use this, just add all the values you want to replace in the dictionary: </p>\n\n<pre><code>dict = {\n    'Power': 'pow', \n    'Sqrt' : 'sqrt'\n    };\ninput = '(Power(a,5)*M + 2*Power(a,3)*M*r*(-2*M + r) + a*M*Power(r,2)*Power(-2*M + r,2) - Sqrt(-(Power(r,3)*Power(Power(a,2) + r*(-2*M + r),2)*(Power(a,4)*M*(-1 + Power(rd,2)) - Power(a,2)*r*(2*M*r + Power(r,2)*Power(rd,2) + Power(M,2)*(-4 + Power(rd,2))) + M*Power(r,2)*(-4*Power(M,2) + 4*M*r + Power(r,2)*(-1 + Power(rd,2)))))))/((Power(a,2)*M - Power(r,3))*Power(Power(a,2) + r*(-2*M + r),2))'\n\nfor key, value in dict.items():\n    input = input.replace(key, value)\n\nprint(input)\n</code></pre>\n\n<p>This will output:</p>\n\n<blockquote>\n  <p>(pow(a,5) * M + 2 * pow(a,3) * M * r * (-2 * M + r) + a * M * pow(r,2) * pow(-2 * M + r,2) - sqrt(-(pow(r,3) * pow(pow(a,2) + r * (-2 * M + r),2) * (pow(a,4) * M * (-1 + pow(rd,2)) - pow(a,2) * r * (2 * M * r + pow(r,2) * pow(rd,2) + pow(M,2) * (-4 + pow(rd,2))) + M * pow(r,2) * (-4 * pow(M,2) + 4 * M * r + pow(r,2) * (-1 + pow(rd,2)))))))/((pow(a,2) * M - pow(r,3)) * pow(pow(a,2) + r * (-2 * M + r),2))</p>\n</blockquote>\n"}], "owner": {"reputation": 232, "user_id": 3692905, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e845ebc57c74d3dafa4ac32ad7a1c37e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3692905/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1456909685, "creation_date": 1456908418, "question_id": 35742289, "link": "https://stackoverflow.com/questions/35742289/is-there-a-tool-to-convert-a-math-formula-written-in-c-to-python", "title": "Is there a tool to convert a math formula written in C to Python?", "body": "<p>Sometimes I use Mathematica to derive a formula when the algebra is particularly awful, and then use <code>CForm[]</code> to convert the resulting expression to compilable C code.  Quite frequently, I would also like to have this formula in Python.  Is there an existing tool to do this?  As an example, here is a recent formula, and as you can see, it would not be pleasant to convert by hand:</p>\n\n<pre><code>(Power(a,5)*M + 2*Power(a,3)*M*r*(-2*M + r) + a*M*Power(r,2)*Power(-2*M + r,2) - \n Sqrt(-(Power(r,3)*Power(Power(a,2) + r*(-2*M + r),2)*(Power(a,4)*M*(-1 + Power(rd,2)) - \n       Power(a,2)*r*(2*M*r + Power(r,2)*Power(rd,2) + Power(M,2)*(-4 + Power(rd,2))) + \n       M*Power(r,2)*(-4*Power(M,2) + 4*M*r + Power(r,2)*(-1 + Power(rd,2)))))))/((Power(a,2)*M - Power(r,3))*Power(Power(a,2) + r*(-2*M + r),2))\n</code></pre>\n"}, {"tags": ["c", "image", "bitmap", "endianness", "bmp"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 9, "creation_date": 1456908375, "post_id": 35742242, "comment_id": 59157993, "body": "Read about <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\"><i>ednainness</i></a>."}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1456908472, "post_id": 35742242, "comment_id": 59158069, "body": "@JoachimPileborg beat me by 2 secs ;)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1456908473, "post_id": 35742242, "comment_id": 59158070, "body": "Also, it will be much simpler if you just create (or use an existing) structure for the header, and read the structure as a single entity."}, {"owner": {"reputation": 1666, "user_id": 5376187, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/629702de00106da82ec7fd1df0ef273c?s=128&d=identicon&r=PG&f=1", "display_name": "Strahinja Ajvaz", "link": "https://stackoverflow.com/users/5376187/strahinja-ajvaz"}, "edited": false, "score": 0, "creation_date": 1456908722, "post_id": 35742242, "comment_id": 59158233, "body": "Thank you. On to it now."}, {"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1456909046, "post_id": 35742242, "comment_id": 59158451, "body": "@JoachimPileborg should be answer."}], "owner": {"reputation": 1666, "user_id": 5376187, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/629702de00106da82ec7fd1df0ef273c?s=128&d=identicon&r=PG&f=1", "display_name": "Strahinja Ajvaz", "link": "https://stackoverflow.com/users/5376187/strahinja-ajvaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456913093, "creation_date": 1456908266, "last_edit_date": 1456913093, "question_id": 35742242, "link": "https://stackoverflow.com/questions/35742242/bitmapfileheader-how-are-the-bits-being-read", "title": "bitmapfileheader - how are the bits being read?", "body": "<p>My questions is with how the bits are organized in a BITMAPFILEHEADER.</p>\n\n<p>I have the following image below. </p>\n\n<p><a href=\"https://i.stack.imgur.com/GpwpI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GpwpI.png\" alt=\"smiley.bmp\"></a></p>\n\n<p>If I look at the header of the image I get the following sequence of bits.</p>\n\n<pre><code>424df6 000000 000000 003600 0000\n\n(2 bytes) 42 4d bftype - (BM) as expected.\n(4 bytes) f6 00 00 00 bfsize - the size is 246 bytes.\n(2 bytes) 00 00 bfReserved1 - must be 0.\n(2 bytes) 00 00 bfReserved2 - must be 0.\n(4 bytes) 36 00 00 00 bfOffBits - should be 56.\n</code></pre>\n\n<p>My question is how are those bits being read? If bfsize is a DWORD (32 bits - 4 bytes), shouldnt 246 be represented as 00 00 00 F6? The same could be said with bfOffBits.</p>\n"}, {"tags": ["c", "statements"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 9, "creation_date": 1456906738, "post_id": 35741699, "comment_id": 59157066, "body": "<i>Usually</i> the code is translated to <i>machine code</i> by the compiler, and then the CPU executes the machine code from top to bottom (not considering jumps). Local variables are commonly stored on the stack, CPU machine instructions are not. Just about all compilers have options to save the generated machine code as assembly code (which is machine code using &quot;nice&quot; names for the CPU instructions), you might want to take a look at that, and learn more about it. I also recommend you read more about the low-level architecture of a computer, and how they work internally."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1456908008, "post_id": 35741699, "comment_id": 59157756, "body": "CPUs don&#39;t understand statements. They only read <a href=\"https://en.wikipedia.org/wiki/Instruction_set\" rel=\"nofollow noreferrer\">instructions</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1456910015, "post_id": 35741699, "comment_id": 59159123, "body": "I would strongly recommend any would-be programmer to study basic assembler, to understand how programs and computers actually work. You are not really a programmer until you know this - for the same reasons as why you aren&#39;t a car mechanic just because you can drive a car."}, {"owner": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1456911551, "post_id": 35741699, "comment_id": 59160268, "body": "@Lundin Thanks for suggesting.....I really appreciate..."}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456907363, "post_id": 35741784, "comment_id": 59157407, "body": "I like your explanation but I would like to make myself more clear.Just in case of a recursive call,the statements after the recursive call in a method are stored in stack,isn&#39;t it possible that these statements execute the same way?Stored in stack and getting popped.....Please explain"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456907505, "post_id": 35741784, "comment_id": 59157481, "body": "It <i>might</i> do. On the other hand the compiler might unpick the recursion, particularly if it spots <i>tail recursion</i>."}, {"owner": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456907673, "post_id": 35741784, "comment_id": 59157573, "body": "Ya in case of tail recursion , it might as there is nothing after the recursive call.So in short , there is no guarantee as to how the compiler executes the above piece of code.Am I correct?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456907862, "post_id": 35741784, "comment_id": 59157663, "body": "Yup. No guarantee at all. Just the guarantee that the C standard is obeyed."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456907897, "post_id": 35741784, "comment_id": 59157680, "body": "@Reckoner Implementation is never guaranteed. The only thing you can count on is that your compiler follows c standard. Anything in between is up to the compiler."}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456912113, "post_id": 35741784, "comment_id": 59160670, "body": "@Reckoner: The statements are almost never stored in a stack and popped, in all implementations of C so far (if someone knows different feel free to give an example otherwise). Instead, variables are stored in the stack. Recursion does not require the statements (instructions) to be stored in a stack, only the variables."}, {"owner": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "reply_to_user": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1456912510, "post_id": 35741784, "comment_id": 59160990, "body": "@slebetman let&#39;s take this example:        recursiveFunction(int collect){                if(collect == 1) return;  collect--;     recursiveFunction(collect); printf(&quot;%d&quot;,collect); }  Well here all the print statements will be executed after the base condition is met(popped one by one from stack) . Does that mean only the variable &#39;collect&#39; is stored everytime at an address with a different value?"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456912826, "post_id": 35741784, "comment_id": 59161236, "body": "@Reckoner: Yes, that function is compiled only in one place in memory. It&#39;s not in any stack and there are no multiple copies. There is only one copy (which is why there is no need for a stack of instructions). When that function is called, that function call basically does: <code>goto address_of_recursiveFunction</code> then when you recurse it does a <code>goto address_of_recursiveFunction</code>. No stack."}, {"owner": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "reply_to_user": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1456913004, "post_id": 35741784, "comment_id": 59161364, "body": "@slebetman So no stack even for the variable &#39;collect&#39;?Are you sure?"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456914045, "post_id": 35741784, "comment_id": 59162079, "body": "@Reckoner: Like I said. The stack is only for the variables, not statements/instructions"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "edited": false, "score": 0, "creation_date": 1456914086, "post_id": 35741784, "comment_id": 59162102, "body": "@Reckoner: Would you like me to explain how the program stack work in an answer?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 6, "last_activity_date": 1456906737, "creation_date": 1456906737, "answer_id": 35741784, "question_id": 35741699, "link": "https://stackoverflow.com/questions/35741699/how-do-c-statements-execute-inside-memory/35741784#35741784", "title": "How do &#39;C&#39; statements execute inside memory", "body": "<p>Not really no. The C standard doesn't mention a <em>stack</em> so your notions are ill-conceived.</p>\n\n<p>A C compiler (or interpreter for that matter) can do anything it likes so long as it follows the C standard.</p>\n\n<p>In your case, that could mean, among other things, (i) the removal of <code>a</code> altogether, since it's only used to output 20 at the end of the function, and (ii) <code>someFunc()</code> could be removed if there are no side effects in doing so.</p>\n\n<p>What <em>normally</em> happens is that your code is converted to machine code suitable for the target architecture. These machine code instructions do tend to follow the code quite faithfully (C in this sense is quite \"low level\") although modern compilers will optimise aggressively.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1456907742, "creation_date": 1456907742, "answer_id": 35742055, "question_id": 35741699, "link": "https://stackoverflow.com/questions/35741699/how-do-c-statements-execute-inside-memory/35742055#35742055", "title": "How do &#39;C&#39; statements execute inside memory", "body": "<p>Whats worth noting is that the C standard does not mandate implementation. So as long as the output is correct according to the standard, the compiler is free to implement this as it choses.</p>\n\n<p>What most likely happens for you is that the compiler translates this bit of C into assembler code which is then executed top to bottom.</p>\n\n<pre><code>a = 20;\n</code></pre>\n\n<p>Is most likely optimised out unless you use it somewhere else. Good compilers also throw a warning for you like:</p>\n\n<blockquote>\n  <p>Warning: Unused Variable a</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1456910231, "last_edit_date": 1456910231, "creation_date": 1456909786, "answer_id": 35742742, "question_id": 35741699, "link": "https://stackoverflow.com/questions/35741699/how-do-c-statements-execute-inside-memory/35742742#35742742", "title": "How do &#39;C&#39; statements execute inside memory", "body": "<p>The C standard doesn't specify where things go in memory.</p>\n\n<p>However, computers work like this in general:</p>\n\n<ul>\n<li>Your program consists of various memory sections/segments, usually they are called <code>.data</code>, <code>.bss</code>, <code>.rodata</code>, <code>.stack</code>, <code>.text</code> and there is possibly also a <code>.heap</code>. The <code>.text</code> section is for storing the actual program code, the rest of the sections are for storing variables. <a href=\"https://en.wikipedia.org/wiki/Data_segment\" rel=\"nofollow\">More info on Wikipedia</a>.</li>\n<li>The C code is translated to machine code (assembler) by the compiler. All code is stored inside the <code>.text</code> section, which is read-only memory. </li>\n<li>Modern computers can \"mark\" memory as either code or data, and will be capable of generating hardware exceptions if you try to execute code in the data section, or treat the code section as data. This way the processor can assist in catching bugs like dangling pointers or run-away code.</li>\n<li>In theory you could execute code from any memory section, even on the stack, but because of the previously mentioned feature, this is not typically done. Most often, it wouldn't make any sense to do so anyhow. </li>\n</ul>\n\n<p>So for your specific code snippet, the only thing that is stored on the stack is the variable <code>a</code>. Or more likely, it is stored in a CPU register, for performance reasons.</p>\n\n<p>The string literals <code>\"test1\"</code>, <code>\"test2\"</code> and <code>\"%d\"</code> will be stored in the <code>.rodata</code> section.</p>\n\n<p>The literal <code>20</code> could either be stored in the <code>.rodata</code> section, or more likely, merged into the code and therefore stored in <code>.text</code> together with the rest of the code.</p>\n\n<p>The <em>program counter</em> determines which part of the code that is currently executed. The stack is not involved in that what-so-ever, it is only for storing data.</p>\n"}], "owner": {"reputation": 861, "user_id": 3972195, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/XqXD7.jpg?s=128&g=1", "display_name": "Reckoner", "link": "https://stackoverflow.com/users/3972195/reckoner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 35741784, "answer_count": 3, "score": 1, "last_activity_date": 1456910231, "creation_date": 1456906453, "last_edit_date": 1456907471, "question_id": 35741699, "link": "https://stackoverflow.com/questions/35741699/how-do-c-statements-execute-inside-memory", "title": "How do &#39;C&#39; statements execute inside memory", "body": "<p>Suppose I have this piece of <em>C</em> code here:</p>\n\n<pre><code>int main() {           \n    int a = 10;\n    printf(\"test1\");\n    printf(\"test2\");\n    someFunc();\n    a = 20;\n    printf(\"%d\",a);\n} \n</code></pre>\n\n<p>Well I think that all these statements are stored on the stack at a time and then popped one by one to get executed. Am I correct? If not, please correct me.</p>\n"}, {"tags": ["c", "timer", "counter", "atmega"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1456905869, "post_id": 35741474, "comment_id": 59156591, "body": "Your use of <code>clock_gettime</code> indicates a POSIX platform (like Linux or OSX), and if you&#39;re doing this on a 64-bit system then your type-alias <code>Uint32</code> is misleading, as <code>long</code> usually is 64 bits then. Instead use one of the <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\"><i>standard</i> fixed-width integers</a> like <code>uint32_t</code>."}, {"owner": {"reputation": 15322, "user_id": 291737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/432bda8139dee981e1411f40cab0a13e?s=128&d=identicon&r=PG", "display_name": "StilesCrisis", "link": "https://stackoverflow.com/users/291737/stilescrisis"}, "edited": false, "score": 1, "creation_date": 1456906098, "post_id": 35741474, "comment_id": 59156701, "body": "This line seems super suspicious: <code>scaled_clock = unscaled_clock * F_CPU  &#47; CLOCK_PRESCALER * 1&#47;1000 * 1&#47;1000;</code> I think the odds of integer overflow are high, and things like <code>* 1&#47;1000</code> are unclear in integer math (replace with <code>&#47;1000</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4346741"}, "edited": false, "score": 0, "creation_date": 1456906129, "post_id": 35741474, "comment_id": 59156717, "body": "You are absolutely right! Unfortunately, I&#39;m working on adjusting an existing code base so not my own code. I am planning on changing it in the future though (if I continue on this project), so thanks for the reminder!  Edit: Ah, didn&#39;t see your comment there! Did so, but did not change the problem. Good thing to keep in mind though, thanks"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4346741"}, "edited": false, "score": 0, "creation_date": 1456913116, "post_id": 35741849, "comment_id": 59161436, "body": "This works fabously, thanks. I kept it in my format but this does make sense.  As an addendum (this confused me for a second), qRayner appended the letter &#39;l&#39; to the return statement, this is not the number &#39;1&#39;!"}], "tags": [], "owner": {"reputation": 56, "user_id": 5662780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d5f57ed12fd798e56523eaf94acc14?s=128&d=identicon&r=PG&f=1", "display_name": "qRayner", "link": "https://stackoverflow.com/users/5662780/qrayner"}, "is_accepted": true, "score": 0, "last_activity_date": 1456909950, "last_edit_date": 1456909950, "creation_date": 1456906978, "answer_id": 35741849, "question_id": 35741474, "link": "https://stackoverflow.com/questions/35741474/implementing-simulating-16bit-counter-with-20mhz-clock-and-1024-prescaler-in-c/35741849#35741849", "title": "Implementing/simulating 16bit counter with 20Mhz clock and 1024 prescaler in C", "body": "<p>curr_clock_time_us = tv_nsec / 1000 is the time in micro seconds and will always &lt;= than 1.000.000 us = 1 s</p>\n\n<p>you although have to use tv_sec to calculate time differences over ones second.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\n#define F_CPU 16000000\n#define CLOCK_PRESCALER 1024\n\nusing namespace std;\n\ntime_t prev_clock_time_s;\nlong prev_clock_time_us;\n\nuint32_t getCounter(void){\n\n    long diff;\n\n    struct timespec temp;\n\n    clock_gettime(CLOCK_REALTIME, &amp;temp);\n\n    diff = ((temp.tv_sec - prev_clock_time_s) * 1000000) + ((temp.tv_nsec/1000) - prev_clock_time_us);\n\n    return (diff % 3355443l) * 65536l / 3355443l;\n}\n\nint main()\n{\n    struct timespec temp;\n\n    clock_gettime(CLOCK_REALTIME, &amp;temp);\n    prev_clock_time_s = temp.tv_sec;\n    prev_clock_time_us = temp.tv_nsec/1000;\n    for (int i = 0; i &lt; 20; i++)\n    {\n        uint32_t cnt = getCounter();\n        std::cout &lt;&lt; \"counter_value: \" &lt;&lt; cnt &lt;&lt; \" time: \" &lt;&lt; (cnt * 3.3554432 / 65536) &lt;&lt; std::endl;\n        usleep(300000);\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4346741"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 35741849, "answer_count": 1, "score": 1, "last_activity_date": 1456909950, "creation_date": 1456905549, "last_edit_date": 1456905588, "question_id": 35741474, "link": "https://stackoverflow.com/questions/35741474/implementing-simulating-16bit-counter-with-20mhz-clock-and-1024-prescaler-in-c", "title": "Implementing/simulating 16bit counter with 20Mhz clock and 1024 prescaler in C", "body": "<p>I'm looking to (roughly) simulate an Atmega128's Timer/Counter1 in C\nThis is a 16bit counter, with a clock running at 20MHz (F_CPU). I'd like a prescale  (CLOCK_PRESCALER) of 1024.</p>\n\n<p>My current implementation is the following:</p>\n\n<pre><code>// Simulate 16bit counter with a 16MHz clock and prescale of 1024 (as mega128)\n// The counter overflows every 65 536* 1024/20M= 3.3554432s or 3355.4432 ms or 3355443.2us or 3 355 443 200 ns\nUInt32 getClock(void){\n\n    UInt32 curr_clock_time_us;\n    UInt32 diff;\n    UInt32 unscaled_clock;\n    UInt32 scaled_clock;\n    struct timespec temp;\n\n    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &amp;temp);\n    curr_clock_time_us = temp.tv_nsec/1000;\n\n    diff = curr_clock_time_us - prev_clock_time_us;\n\n    //represents timer overflows, which happens every 4194304000 ns.\n    if(diff &gt; ((UInt32)3355443)){\n        prev_clock_time_us = curr_clock_time_us; // on overflow the counter (here the  diff) should be 0 if we asked it immediately again.\n        unscaled_clock = (diff % ((UInt32)3355443));\n    } else {\n        unscaled_clock = diff;\n    }\n\n    //Scale to count value: time\n    scaled_clock = unscaled_clock * F_CPU  / CLOCK_PRESCALER * 1/1000 * 1/1000;\n\n    return scaled_clock;\n}\n</code></pre>\n\n<p>Uint32 is a typedef unsigned long.</p>\n\n<p>prev_clock_time_us is initialized at board_init() as</p>\n\n<pre><code>    //Starts the clock by registering current time, down to microseconds\nstruct timespec temp;\n\nclock_gettime(CLOCK_MONOTONIC, &amp;temp);\nprev_clock_time_us = temp.tv_nsec/1000;\n</code></pre>\n\n<p>To test this code, I continuously print it out.\nWhat I expected or hoped to see is a clock going from 0 -> 65536 -> 0 in roughly 3.355s.</p>\n\n<p>Instead, what my printouts show is the clock going from 0 -> ~20000 -> 0.\nWhich is odd. Just printing, for example, the curr_clock_time_us seems that that value goes from 0 -> 1.000.000 -> 0.</p>\n\n<p>Looking at  reveals that \"CLOCKS_PER_SEC is required to be 1 million\" but I'm not sure if that is related.</p>\n\n<p>So any clue what I am doing wrong? I'm unsure exactly.</p>\n"}, {"tags": ["c", "sqlite"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1456904877, "post_id": 35741175, "comment_id": 59156029, "body": "Just because it <i>appears</i> to work without calling <code>reset()</code> every time, doesn&#39;t mean that is guaranteed."}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456904941, "post_id": 35741175, "comment_id": 59156073, "body": "I like it, when it does work and no question about this issue existed before, so I think it&#39;s a valid question."}], "answers": [{"comments": [{"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456907330, "post_id": 35741567, "comment_id": 59157386, "body": "There is a problem with this answer. I find, for example, I need to reset even <code>INSERT</code> prepared statements and I&#39;m not interested in stepping through the results at all, just in <code>SQLITE_DONE</code> result."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1456908396, "post_id": 35741567, "comment_id": 59158005, "body": "Just because this is an error that SQLite can automatically recover from does not imply that it does not remain an error."}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "edited": false, "score": 0, "creation_date": 1456908624, "post_id": 35741567, "comment_id": 59158170, "body": "No, please read again, It is not an error now, because it is an API change."}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 1, "creation_date": 1456910658, "post_id": 35741567, "comment_id": 59159593, "body": "@frast It is not true. I find my prepared INSERT and REMOVE statements did not autoreset. Failed to function without a reset, no error was returned."}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "reply_to_user": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456919762, "post_id": 35741567, "comment_id": 59166278, "body": "@user1095108 are you sure you are using version 3.7.0 or higher?"}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "reply_to_user": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456919950, "post_id": 35741567, "comment_id": 59166423, "body": "@user1095108 you are right. It is only true for sqlite3_step"}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456921868, "post_id": 35741567, "comment_id": 59167812, "body": "@frast could you be more clear in what I was right? Could you update your answer, if I was right? I am using version 3.10.0."}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "reply_to_user": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456989330, "post_id": 35741567, "comment_id": 59203090, "body": "@user1095108 may be you forgot to reset the bindings? If you execute your insert/remove using sqlite3_step() it should work without calling reset. What error code do you get?"}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456990476, "post_id": 35741567, "comment_id": 59203730, "body": "@frast That&#39;s the point. No error code, but the INSERT, REMOVE simply doesn&#39;t do what it should."}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "reply_to_user": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456990883, "post_id": 35741567, "comment_id": 59203937, "body": "@user1095108 this is strange. Do you commit your transaction or close your db before you open it to see if it was changed?"}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456991132, "post_id": 35741567, "comment_id": 59204086, "body": "@frast Yes, this is just one strange issue. For example, if I bind a finished prepared statement and the reset, it won&#39;t work, even though a reset should not affect the bindings. People are using sqlite like a flock of sheep according to the reset recipe and some bugs simply don&#39;t surface because of that, in my opinion."}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "reply_to_user": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456991755, "post_id": 35741567, "comment_id": 59204456, "body": "@user1095108 we are using sqlite quite a bit here and never had problems. Think a bit about your usage pattern or your wrapper if you use one. There must be something else wrong because the library is proved to work properly."}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456991890, "post_id": 35741567, "comment_id": 59204526, "body": "@frast Yes, but there are no saintly library without bugs. It is a good library to be sure, but not without bugs. Check out my wrapper, maybe: <a href=\"https://github.com/janezz55/sqliteutils.git\" rel=\"nofollow noreferrer\">github.com/janezz55/sqliteutils.git</a>"}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "reply_to_user": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456994437, "post_id": 35741567, "comment_id": 59206046, "body": "@user1095108 nice work. Some calls need error checks (reset, bind). If you use your library and step returned an error you need to reset the statement before using it again, Else I think your API wrapper is going to be great. May be you should think about throwing exceptions instead of returning error codes. But this is a matter of taste."}, {"owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "edited": false, "score": 0, "creation_date": 1456998408, "post_id": 35741567, "comment_id": 59208812, "body": "@frast I have strict performance requirements. This means I expect the user to check (assert) the return value. The assert will be compiled away in release mode. The binds need to be fast, so there are no checks there. If the binds are unsuccessful, the user will probably see for himself. The problem with binds is. If I bind/reset/step the prepared statement won&#39;t work, but if I reset/bind/step it will execute OK."}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "edited": false, "score": 0, "creation_date": 1457001234, "post_id": 35741567, "comment_id": 59210935, "body": "I think this can only happen if the previous statement failed. Then you have to call reset before bind again."}, {"owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "edited": false, "score": 0, "creation_date": 1457001382, "post_id": 35741567, "comment_id": 59211059, "body": "Even if performance matters, I think correctness trumps performance. You should at least consider to fail-fast in case of unexpected errors."}], "tags": [], "owner": {"reputation": 2631, "user_id": 21683, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8df93a4e0ba4bcc5c95563175e07d199?s=128&d=identicon&r=PG", "display_name": "frast", "link": "https://stackoverflow.com/users/21683/frast"}, "is_accepted": true, "score": 7, "last_activity_date": 1456907432, "last_edit_date": 1456907432, "creation_date": 1456905855, "answer_id": 35741567, "question_id": 35741175, "link": "https://stackoverflow.com/questions/35741175/sqlite3-reset-when-is-it-needed/35741567#35741567", "title": "sqlite3_reset() when is it needed?", "body": "<p>From the sqlite sources:</p>\n\n<pre><code>/* We used to require that sqlite3_reset() be called before retrying\n** sqlite3_step() after any error or after SQLITE_DONE.  But beginning\n** with version 3.7.0, we changed this so that sqlite3_reset() would\n** be called automatically instead of throwing the SQLITE_MISUSE error.\n** This \"automatic-reset\" change is not technically an incompatibility, \n** since any application that receives an SQLITE_MISUSE is broken by\n** definition.\n**\n** Nevertheless, some published applications that were originally written\n** for version 3.6.23 or earlier do in fact depend on SQLITE_MISUSE \n** returns, and those were broken by the automatic-reset change.  As a\n** a work-around, the SQLITE_OMIT_AUTORESET compile-time restores the\n** legacy behavior of returning SQLITE_MISUSE for cases where the \n** previous sqlite3_step() returned something other than a SQLITE_LOCKED\n** or SQLITE_BUSY error.\n*/\n</code></pre>\n\n<p>So with version 3.7.0 sqlite_reset is not needed if you reach SQLITE_DONE and want to step through again.</p>\n\n<p>You need to call sqlite3_finalize to free the statement when you are done with it.see <a href=\"https://www.sqlite.org/c3ref/finalize.html\" rel=\"noreferrer\">https://www.sqlite.org/c3ref/finalize.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 5358, "user_id": 23715, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e874cfe011eb4270c33edab17d1afdf?s=128&d=identicon&r=PG", "display_name": "Alex Che", "link": "https://stackoverflow.com/users/23715/alex-che"}, "is_accepted": false, "score": 0, "last_activity_date": 1601395103, "creation_date": 1601395103, "answer_id": 64123306, "question_id": 35741175, "link": "https://stackoverflow.com/questions/35741175/sqlite3-reset-when-is-it-needed/64123306#64123306", "title": "sqlite3_reset() when is it needed?", "body": "<p>One more issue with not resetting statement, that I stumbled upon, is that DB may remain locked until the prepared statement is reset. E.g. sqlite3_wal_checkpoint() would return SQL_LOCKED.</p>\n"}], "owner": {"reputation": 12625, "user_id": 1095108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f26c5fe39742b7be7d859c2ddc11b55b?s=128&d=identicon&r=PG", "display_name": "user1095108", "link": "https://stackoverflow.com/users/1095108/user1095108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4052, "favorite_count": 1, "accepted_answer_id": 35741567, "answer_count": 2, "score": 3, "last_activity_date": 1601395103, "creation_date": 1456904455, "last_edit_date": 1456910771, "question_id": 35741175, "link": "https://stackoverflow.com/questions/35741175/sqlite3-reset-when-is-it-needed", "title": "sqlite3_reset() when is it needed?", "body": "<p>Before you tell me to read the <a href=\"https://www.sqlite.org/c3ref/reset.html\" rel=\"nofollow\">docs</a>, yes I have read them. But my own tests tell me I can sometimes call repeatedly <code>sqlite3_step()</code> on some prepared statements without resetting them first. Examples are: <code>BEGIN</code> and <code>COMMIT</code>. Can you shed some light on when I need to reset a prepared statement, as I would like to avoid making the call whenever possible?</p>\n\n<p>EDIT: The docs say (my bold):</p>\n\n<blockquote>\n  <p>The life-cycle of a prepared statement object <strong>usually</strong> goes like this:</p>\n</blockquote>\n"}, {"tags": ["c", "arrays", "sorting", "median"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1456902654, "post_id": 35740651, "comment_id": 59154939, "body": "It appears to me you need not sort the array, only merge it. But then it is not median anymore. And array 1 in example 2 is not sorted."}, {"owner": {"reputation": 267, "user_id": 4115790, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e7fa8f187d28832daf564d7c8b0e7efa?s=128&d=identicon&r=PG&f=1", "display_name": "CK vir", "link": "https://stackoverflow.com/users/4115790/ck-vir"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1456903189, "post_id": 35740651, "comment_id": 59155179, "body": "Hi, if only merge , for example 2 array [1,5,6,7,8,9][2,3,4] only merge = [1,5,6,7,8,9,2,3,4] ,and the median = 8 But why &quot;Expected answer&quot; = 5"}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1456906482, "post_id": 35740651, "comment_id": 59156912, "body": "Just concatenate the two arrays and calculate the median. ie <code>[1,2,0,0] [3,4] =&gt; [1,2,0,0,3,4] =&gt; M=(0+0)&#47;2=0</code>, <code>[0,0,1] [0,1] =&gt; [0,0,1,0,1] =&gt; M=1</code>. Make any sense? Maybe not, but gives the expected answer..."}], "owner": {"reputation": 267, "user_id": 4115790, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e7fa8f187d28832daf564d7c8b0e7efa?s=128&d=identicon&r=PG&f=1", "display_name": "CK vir", "link": "https://stackoverflow.com/users/4115790/ck-vir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1456908780, "creation_date": 1456902571, "last_edit_date": 1456903542, "question_id": 35740651, "link": "https://stackoverflow.com/questions/35740651/leetcode-004-median-of-two-sorted-arrays-is-expected-answer-wrong", "title": "Leetcode 004 Median of Two Sorted Arrays. Is expected answer wrong?", "body": "<p>Base on the <a href=\"https://leetcode.com/problems/median-of-two-sorted-arrays/\" rel=\"nofollow\">question</a> that need to find the median of the two sorted arrays.</p>\n\n<p>So i test some sample :</p>\n\n<p>(1)</p>\n\n<p>[1,2] [3,4]</p>\n\n<p>-> Merge and sorted = [1,2,3,4] median is (2+3)/2 = 2.5</p>\n\n<p>Expected answer = 2.5, that correct</p>\n\n<p>(2)</p>\n\n<p>[1,2,0,0] [3,4]</p>\n\n<p>-> Merge and sorted = [0,0,1,2,3,4] median is (1+2)/2 = 1.5</p>\n\n<p>But why \"Expected answer\" = 0.0 ??</p>\n\n<p>(3)</p>\n\n<p>[0,0,1] [0,1]</p>\n\n<p>-> Merge and sorted = [0,0,0,1,1] median is just 0</p>\n\n<p>But why \"Expected answer\" = 1.0 ??</p>\n"}, {"tags": ["c", "zip", "zlib", "compression", "deflate"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1456902466, "post_id": 35740584, "comment_id": 59154845, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10440113/simple-way-to-unzip-a-zip-file-using-zlib\">Simple way to unzip a .zip file using zlib</a>"}, {"owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1456909801, "post_id": 35740584, "comment_id": 59158974, "body": "I want to know if the zlib library is capable of decompressing microsoft office files. I am not looking for how to do it."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1456910642, "post_id": 35740584, "comment_id": 59159579, "body": "Short answer is no. I would recommend 7-zip free library."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "edited": false, "score": 0, "creation_date": 1457001232, "post_id": 35754025, "comment_id": 59210931, "body": "Thanks for the answer. I think I have figured out how to do this now."}], "tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": true, "score": 0, "last_activity_date": 1456939360, "creation_date": 1456939360, "answer_id": 35754025, "question_id": 35740584, "link": "https://stackoverflow.com/questions/35740584/can-i-use-zlib-to-decompress-microsoft-office-files-which-are-actually-just-zip/35754025#35754025", "title": "Can I use zlib to decompress microsoft office files which are actually just zip files?", "body": "<p><a href=\"http://zlib.net/\" rel=\"nofollow\">zlib</a> provides the basic machinery needed to decompress deflate data and to compute CRCs, which is most of what you need to decode zip files. However zlib does not provide zip file format decoding, i.e. decoding the headers, which you would need to wrap around the zlib calls for decompression and check value computation.</p>\n\n<p>zlib does come with <a href=\"https://github.com/madler/zlib/tree/master/contrib/minizip\" rel=\"nofollow\">minizip</a>, which is in the contrib directory of the source distribution, to do that job. You can also look at <a href=\"http://www.nih.at/libzip/\" rel=\"nofollow\">libzip</a> or <a href=\"http://www.libarchive.org/\" rel=\"nofollow\">libarchive</a>, which use zlib and which provide zip file functions.</p>\n"}, {"tags": [], "owner": {"reputation": 2743, "user_id": 1592639, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/61c0I.png?s=128&g=1", "display_name": "Michael Haephrati", "link": "https://stackoverflow.com/users/1592639/michael-haephrati"}, "is_accepted": false, "score": 0, "last_activity_date": 1613597124, "creation_date": 1613597124, "answer_id": 66250176, "question_id": 35740584, "link": "https://stackoverflow.com/questions/35740584/can-i-use-zlib-to-decompress-microsoft-office-files-which-are-actually-just-zip/66250176#66250176", "title": "Can I use zlib to decompress microsoft office files which are actually just zip files?", "body": "<p>Indeed new office files are in fact .zip files. Not the old .doc and .xls but the new .docx and .xlsx. You can see that if you rename them to .zip and open them. You will then see the contents as .xml files.</p>\n<p>A sample code would be something like</p>\n<pre><code>    HZIP hz = OpenZip(AgentDLLZip, 0, ZIP_FILENAME);\n    ZIPENTRYW ze;\n    GetZipItemW(hz, 0, &amp;ze);\n    UnzipItem(hz, 0, ze.name, 0, ZIP_FILENAME);\n    CloseZip(hz);\n</code></pre>\n<p>and just use few files you can find <a href=\"https://github.com/ValveSoftware/source-sdk-2013/tree/master/sp/src/public/zip\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 431, "user_id": 1295872, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/37f5322d197bb5c388ea3a9b26d477e7?s=128&d=identicon&r=PG", "display_name": "user1295872", "link": "https://stackoverflow.com/users/1295872/user1295872"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 35754025, "answer_count": 2, "score": 0, "last_activity_date": 1613597124, "creation_date": 1456902336, "question_id": 35740584, "link": "https://stackoverflow.com/questions/35740584/can-i-use-zlib-to-decompress-microsoft-office-files-which-are-actually-just-zip", "title": "Can I use zlib to decompress microsoft office files which are actually just zip files?", "body": "<p>I want to inflate Microsoft office files using the zlib library. From what I have read, office files are just zip files with extensions like docx,xlsx etc. The unzip utility can actually decompress the files. Can I do the same with the zlib library?</p>\n"}, {"tags": ["html", "c", "http", "directory"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1456905900, "post_id": 35740507, "comment_id": 59156603, "body": "why do you do the printf inside of the loop ? also why build the string when it would be safer to just print the tag directly to the stream, It also seems like the proper way to print the output is <code>http_send_string</code>"}], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "edited": false, "score": 1, "creation_date": 1456914001, "post_id": 35742072, "comment_id": 59162052, "body": "This is honesty the best answer I have ever seen. Thanks!! This solved my problem and my code works now."}], "tags": [], "owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "is_accepted": true, "score": 2, "last_activity_date": 1456907776, "creation_date": 1456907776, "answer_id": 35742072, "question_id": 35740507, "link": "https://stackoverflow.com/questions/35740507/http-get-send-links-of-children-and-parent-of-the-requested-directory/35742072#35742072", "title": "HTTP GET: send links of children and parent of the requested directory", "body": "<p>I am sorry to say this but your code seems wrong on so many level :</p>\n\n<ul>\n<li><p>the while condition would be evaluated at every loop, meaning your directory <strong>will be open every time</strong> until it cannot be opened anymore.</p>\n\n<p>Write this instead :</p>\n\n<pre><code>if ((dir = opendir (fullPath)) == NULL) {\n    //error handling\n}\nwhile ((dp = readdir (dir)) != NULL) {\n    // print tag here\n}\n</code></pre></li>\n<li><p>you are building the tag wrong, your output would be</p>\n\n<pre><code>&lt;&lt;a href=\"filename\"&gt;filename&lt;/a&gt;&gt;\n</code></pre>\n\n<p>which I don't really know what different browser would display in that case</p></li>\n<li><p>try to avoid dynamic memory allocation unless needed, and you don't need it there ( plus check if the malloc result is not null, if malloc fail for whatever reason ) </p>\n\n<pre><code>// print each tag\nconst char* const filename=dp -&gt; d_name;\nhttp_send_string( fd, \"&lt;a href=\\\"\" ); // start tag open \nhttp_send_string( fd, filename ); // attribute value\nhttp_send_string( fd, \"\\\"&gt;\" ); // close start tag\nhttp_send_string( fd, filename ); // tag inner text \nhttp_send_string( fd, \"&lt;/a&gt;&lt;/br&gt;\" ); // closing tag ( with a line break )\n</code></pre></li>\n<li><p><em>Preferably</em> : put the link to the parent directory on top of the page ( that is before your print loop )</p></li>\n</ul>\n"}], "owner": {"reputation": 351, "user_id": 5570764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/81166bd56dc65e7ee350592c6cf0ea01?s=128&d=identicon&r=PG&f=1", "display_name": "ajfbiw.s", "link": "https://stackoverflow.com/users/5570764/ajfbiw-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 35742072, "answer_count": 1, "score": 0, "last_activity_date": 1456907776, "creation_date": 1456902047, "question_id": 35740507, "link": "https://stackoverflow.com/questions/35740507/http-get-send-links-of-children-and-parent-of-the-requested-directory", "title": "HTTP GET: send links of children and parent of the requested directory", "body": "<p>I am handling HTTP GET requests, and what I'm trying to do is as follows:</p>\n\n<p>If the request corresponds to a directory and the directory does not contain an index.html\nfile, respond with an HTML page containing links to all of the immediate children of the\ndirectory (similar to ls -1), as well as a link to the parent directory. (A link to the\nparent directory looks like Parent directory)</p>\n\n<p>note1: To list the contents of a directory, I use opendir() and readdir(). Note2:\n\u2013 Links in HTTP can use relative paths or absolute paths. </p>\n\n<p>It is not working. Two error examples are as follows:</p>\n\n<p>FAIL-1 Get the directory listing of the root:\n    I sent an HTTP request to the server, and I got back some HTML.\n    I looked for a link to '/test_directory1', but I could not find it.\n    (Note: Links containing relative paths in the HTML were resolved relative to '/'.)\n    However, I did find a link to '/test_file.txt'.\n    How to reproduce:\n        I created an empty directory and put a test_file.txt file and a test_directory1 inside it.\n        I started ./httpserver with the --files option.\n        I sent a HTTP request for / to the web server, in order to see all the files I created.</p>\n\n<p>FAIL-2 Get the directory listing of a subdirectory:\n    I sent an HTTP request to the server, and I got back some HTML.\n    I looked for a link to '/test_directory1', but I could not find it.\n    (Note: Links containing relative paths in the HTML were resolved relative to '/test_directory1/test_directory2/'.)\n    However, I did find a link to '/test_directory1/test_directory2'.\n    How to reproduce:\n        I created an empty directory and put a test_directory1 directory inside of it.\n        Then I put a test_directory2 inside test_directory1.\n        Then I started ./httpserver with the --files option.\n        I sent a HTTP request for /test_directory1/test_directory2 (with NO slash at the end of the path.\n        I look for a list of files inside test_directory2, which should include a link to the parent directory (/test_directory1/).</p>\n\n<pre><code>/*if is directory but doesn't contain index.html, send links instead*/\n  struct dirent *dp;\n  http_start_response(fd, 200);\n  http_send_header(fd, \"Content-Type\", \"text/html\");\n\n  http_end_headers(fd);\n  while( (dp = readdir(opendir(fullPath)))!= NULL){\n\n    char * filename = malloc(256+1);\n    strcpy(filename, dp -&gt; d_name);\n    char * linkString = malloc(256+256+18+1);\n    strcpy(linkString, \"&lt;&lt;a href=\\\"\");\n    strcat(linkString, filename);\n    strcat(linkString, \"\\\"&gt;\");\n    strcat(linkString, filename);\n    strcat(linkString, \"&lt;/a&gt;&lt;/\");\n    http_send_string(fd, linkString);\n    free(filename);\n\n    printf(\"Is directory but doesn't have index.html, so all links %s\\n\", linkString);\n    free(linkString);\n\n  }\n\n  http_send_string(fd, \"&lt;html&gt;&lt;a href=\\\"../\\\"&gt;Parent directory&lt;/a&gt;&lt;html&gt;\");\n</code></pre>\n"}, {"tags": ["c", "io", "scanf", "getchar"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1456901434, "post_id": 35740297, "comment_id": 59154350, "body": "<code>getchar</code> in the outer loop eats up the <code>q</code>. Add <code>putchar(ch)</code> just before the inner loop to fix the issue. On the other hand, <code>scanf(&quot;%d&quot;)</code> , on invalid input such as a character, will fail, and return 0, leaving the character (invalid input) in the <code>stdin</code> itself."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 7, "last_activity_date": 1456901535, "creation_date": 1456901535, "answer_id": 35740368, "question_id": 35740297, "link": "https://stackoverflow.com/questions/35740297/do-scanf-and-getchar-handle-stream-differently/35740368#35740368", "title": "Do scanf and getchar handle stream differently?", "body": "<p>When you use <code>scanf</code> to try and read an integer, and you give some input that is <em>not</em> an integer, then <code>scanf</code> will fail and not return <code>1</code>. It will however leave the input intact, it won't extract anything from the input, leaving it all for your inner loop to digest and print.</p>\n\n<p>If you use <code>getchar</code> in the outer loop, it will actually consume a single character, no matter what character it is, and the inner loop will then not see that character since it doesn't exist in the input buffer anymore.</p>\n"}], "owner": {"reputation": 387, "user_id": 4238247, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iAQwx.png?s=128&g=1", "display_name": "edhu", "link": "https://stackoverflow.com/users/4238247/edhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 35740368, "answer_count": 1, "score": 2, "last_activity_date": 1456901535, "creation_date": 1456901198, "question_id": 35740297, "link": "https://stackoverflow.com/questions/35740297/do-scanf-and-getchar-handle-stream-differently", "title": "Do scanf and getchar handle stream differently?", "body": "<p>I'm confused about how scanf and getchar handle stream differently, the following is a sample code:</p>\n\n<pre><code>while(scanf(\"%d\", &amp;input) != 1)\n{\n    while((ch = getchar()) != '\\n')\n    {\n        putchar(ch);\n    }\n    printf(\"\\nThis is wrong\\n\");\n}\n\nprintf(\"That is right\\n\");\n</code></pre>\n\n<p>It is a simple program used to test if the input is a integer. The inner while loop is used to display every wrong input value before click Enter. When I entered a random string such as:</p>\n\n<pre><code>qwert\n</code></pre>\n\n<p>putchar will print out the exact string. However, if I replaced</p>\n\n<pre><code>while(scanf(\"%d\", &amp;input) != 1)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while((ch = getchar()) != '\\n')\n</code></pre>\n\n<p>and print out the exact same string, the first letter \"q\" is dropped out.\nSo my question is how do scanf and getchar in the outer loop handle this situation differently?</p>\n"}, {"tags": ["c", "floating-point"], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 5620762, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/N2xaP.jpg?s=128&g=1", "display_name": "Nutan", "link": "https://stackoverflow.com/users/5620762/nutan"}, "is_accepted": true, "score": 2, "last_activity_date": 1456900301, "creation_date": 1456900301, "answer_id": 35740057, "question_id": 35739944, "link": "https://stackoverflow.com/questions/35739944/inconsistent-floating-point-output/35740057#35740057", "title": "Inconsistent Floating Point Output", "body": "<p>In first case you have defined variable as a float and in second case you directly given the number. </p>\n\n<p>System might be consider direct number as a double and not float. </p>\n\n<p>So,I think may be it is because of system definition of float and double.</p>\n"}, {"tags": [], "owner": {"reputation": 126, "user_id": 5629187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a5107ca0c722de83e57801d071fe2e?s=128&d=identicon&r=PG", "display_name": "kergma", "link": "https://stackoverflow.com/users/5629187/kergma"}, "is_accepted": false, "score": 2, "last_activity_date": 1456901820, "creation_date": 1456901820, "answer_id": 35740431, "question_id": 35739944, "link": "https://stackoverflow.com/questions/35739944/inconsistent-floating-point-output/35740431#35740431", "title": "Inconsistent Floating Point Output", "body": "<p>to get the consistent behaviour you can explicitly use floating point literal:</p>\n\n<pre><code>printf(\"%.100f\\n\", 12.59f);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 5452519, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67904f7c568ed246636ee296d0e2dac5?s=128&d=identicon&r=PG&f=1", "display_name": "Fadhil Abubaker", "link": "https://stackoverflow.com/users/5452519/fadhil-abubaker"}, "is_accepted": false, "score": 1, "last_activity_date": 1456902279, "creation_date": 1456902279, "answer_id": 35740566, "question_id": 35739944, "link": "https://stackoverflow.com/questions/35739944/inconsistent-floating-point-output/35740566#35740566", "title": "Inconsistent Floating Point Output", "body": "<p>In Snippet 1, your float gets cast into a double, and this casting causes a change in the value (due to the intricacies of floating point representation).</p>\n\n<p>In Snippet 2, this cast doesn't happen, it's printed directly as a double.</p>\n\n<p>To understand, try running the snippets below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    double a = 12.59;\n    printf(\"%.100f\\n\", a);  \n    return 0;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int main(void) {\n    float a = 12.59;\n    printf(\"%.100f\\n\", (double)a);  \n    return 0;\n}\n</code></pre>\n\n<p>Refer to this for more information: <a href=\"https://stackoverflow.com/questions/6395726/how-does-printf-and-co-differentiate-beetween-float-and-double\">How does printf and co differentiate beetween float and double</a></p>\n"}], "owner": {"reputation": 325, "user_id": 5962381, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ea180246665cdc8bef129295de0debc8?s=128&d=identicon&r=PG&f=1", "display_name": "Hells Guardian", "link": "https://stackoverflow.com/users/5962381/hells-guardian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 35740057, "answer_count": 3, "score": 0, "last_activity_date": 1456913782, "creation_date": 1456899839, "question_id": 35739944, "link": "https://stackoverflow.com/questions/35739944/inconsistent-floating-point-output", "title": "Inconsistent Floating Point Output", "body": "<p>I would like to better understand floating point values and the imprecisions associated.</p>\n\n<p>Following are two snippets with slight modifications </p>\n\n<p><strong>Snippet 1</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n   float a = 12.59;\n   printf(\"%.100f\\n\", a);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>12.5900001525878906250000000000000000000000000000000000000000000000000000000000000000000000000000000000</p>\n\n<p><strong>Snippet 2:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n   printf(\"%.100f\\n\", 12.59);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>12.589999999999999857891452847979962825775146484375000000000000000000000000000000000000000000000000000</p>\n\n<p>Why is there a difference in both the outputs? I'm unable to understand the catch. </p>\n"}, {"tags": ["c", "curl"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456900007, "post_id": 35739892, "comment_id": 59153643, "body": "Run the command-line curl in verbose mode and see what headers it sends."}, {"owner": {"reputation": 1, "user_id": 6006124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b62c27214480448e5508caa3b47de7?s=128&d=identicon&r=PG&f=1", "display_name": "Karunesh Mishra", "link": "https://stackoverflow.com/users/6006124/karunesh-mishra"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456901144, "post_id": 35739892, "comment_id": 59154188, "body": "&gt; POST /authservice/token?grant_type=client_credentials HTTP/1.1 &gt; User-Agent: curl/7.24.0 (x86_64-redhat-linux-gnu) libcurl/7.24.0 NSS/3.14.3.0 zlib/1.2.5 libidn/1.24 libssh2/1.4.1 &gt; Host: 159.99.186.245:8080 &gt; Accept: <i>/</i> &gt; Authorization: Basic dGVzdENsaWVudDp0ZXN0U2VjcmV0 &gt; &lt; HTTP/1.1 200 OK &lt; Server: Apache-Coyote/1.1 &lt; Content-Type: application/xml;charset=UTF-8 &lt; Content-Language: en-US &lt; Content-Length: 297 &lt; Date: Wed, 02 Mar 2016 11:13:42 GMT"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456904385, "post_id": 35739892, "comment_id": 59155754, "body": "<i>See</i> what it sends, don&#39;t <i>show</i>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456933346, "post_id": 35739892, "comment_id": 59176722, "body": "I hope your program #include&#39;s the appropriate header files.  Those statements should have been part of the post.   Then we do not have to guess."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456934907, "post_id": 35739892, "comment_id": 59177920, "body": "this line: <code>printf(&quot;http_code:%d\\n&quot;, http_code);</code> should be: <code>printf(&quot;http_code:%ld\\n&quot;, http_code);</code>  so the format specifier matches the type of the <code>http_code</code> parameter."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456935045, "post_id": 35739892, "comment_id": 59178048, "body": "I ran the posted code, using <code>localhost</code> and referencing port <code>80</code> rather than <code>8080</code> as I have my server very limited on which ports are allowed.  It ran with no crashes, but did indicate: <code>The requested URL &#47;authservice&#47;token was not found on this server</code>"}, {"owner": {"reputation": 1, "user_id": 6006124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b62c27214480448e5508caa3b47de7?s=128&d=identicon&r=PG&f=1", "display_name": "Karunesh Mishra", "link": "https://stackoverflow.com/users/6006124/karunesh-mishra"}, "edited": false, "score": 0, "creation_date": 1456986823, "post_id": 35739892, "comment_id": 59201867, "body": "After doing the below changes, now my request is start reaching server successfully and even server is sending the response. But now my program is getting stuck at curl_easy_perform."}, {"owner": {"reputation": 40954, "user_id": 3748349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMfdk.png?s=128&g=1", "display_name": "Hans Z.", "link": "https://stackoverflow.com/users/3748349/hans-z"}, "edited": false, "score": 0, "creation_date": 1456995708, "post_id": 35739892, "comment_id": 59206890, "body": "FWIW: <code>grant_type=client_credential</code> suggests OAuth 2.0 but the actual name of the grant and parameter is <code>client_credentials</code> with a trailing &quot;s&quot; so if your server is a standards compliant OAuth 2.0 Authorization Server you should probably change that"}, {"owner": {"reputation": 1, "user_id": 6006124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b62c27214480448e5508caa3b47de7?s=128&d=identicon&r=PG&f=1", "display_name": "Karunesh Mishra", "link": "https://stackoverflow.com/users/6006124/karunesh-mishra"}, "edited": false, "score": 0, "creation_date": 1457427993, "post_id": 35739892, "comment_id": 59390353, "body": "When I checked my program in <b>pstack</b>, then it was stuck at curl_easy_perform. After that I did CTRL+D, then my program is able to receive the output. What could be the reason? Any option I have to include in my program?"}], "owner": {"reputation": 1, "user_id": 6006124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4b62c27214480448e5508caa3b47de7?s=128&d=identicon&r=PG&f=1", "display_name": "Karunesh Mishra", "link": "https://stackoverflow.com/users/6006124/karunesh-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457428287, "creation_date": 1456899626, "last_edit_date": 1457428287, "question_id": 35739892, "link": "https://stackoverflow.com/questions/35739892/curl-easy-perform-program-in-c", "title": "curl_easy_perform program in C", "body": "<p>Now, after doing the changes in code I am able to send the POST resquest to SERVER and even server is sending the response. But now my program hangs at curl_easy_perform function. Do you have any idea?</p>\n\n<p>curl -H \"Authorization: Basic dGVzdENsaWVudDp0ZXN0U2VjcmV0\" -X POST \"<a href=\"http://x.x.x.x:8080/authservice/token?grant_type=client_credential\" rel=\"nofollow\">http://x.x.x.x:8080/authservice/token?grant_type=client_credential</a>\"</p>\n\n<p><strong>My program:</strong></p>\n\n<pre><code>struct url_data {\n    size_t size;\n    char* data;\n};\nstatic size_t write_data(char *buffer, size_t size, size_t nitems, void *userp)\n{\n    struct url_data *data = (struct url_data *)userp;\n    size_t index = data-&gt;size;\n    size_t n = (size * nitems);\n    data-&gt;size += (size * nitems);\n    char* tmp = realloc(data-&gt;data, data-&gt;size + 1);\n    if(tmp) {\n        data-&gt;data = tmp;\n    } else {\n        if(data-&gt;data) free(data-&gt;data);\n        fprintf(stderr, \"Failed to allocate memory.\\n\");\n        return EXIT_FAILURE;\n    }\n    memcpy(data-&gt;data + index, buffer, n);\n    data-&gt;data[data-&gt;size] = '\\0';\n    return size * nitems;\n}\n\nint main(void)\n{\n    int i = 0;\n    long http_code = 0;\n    CURL *curl;\n    CURLcode res;\n    struct curl_slist *slist=NULL;\n\n    struct url_data data;\n    data.size = 0;\n    data.data = (char*) malloc(4096); /* reasonable size initial buffer */\n    bzero(data.data, 4096);\n    //curl_global_init(CURL_GLOBAL_ALL);\n\n    curl = curl_easy_init();\n    if(curl) {\n        curl_easy_setopt(curl, CURLOPT_URL, \"http://x.x.x.x:8080/authservice/token?grant_type=client_credential\");\n        curl_easy_setopt(curl, CURLOPT_POST, 1L);\n        curl_easy_setopt(curl, CURLOPT_USERAGENT, \"libcurl-agent/1.0\");\n        curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);\n        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);\n        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;data);\n        curl_easy_setopt(curl, CURLOPT_TIMEOUT, 10);\n\n\n        slist = curl_slist_append(slist, \"Authorization: Basic dGVzdENsaWVudDp0ZXN0U2VjcmV0\");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, slist);\n        slist = curl_slist_append(slist, \"Content-Type:application/json\");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, slist);\n        slist = curl_slist_append(slist, \"Content-Length: 0\");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, slist);\n        slist = curl_slist_append(slist, \"Expect:\");\n        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, slist);\n\n        curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);\n\n        res = curl_easy_perform(curl);\n        /* Check for errors */\n        if(res != CURLE_OK) {\n            fprintf(stderr, \"curl_easy_perform() failed: %s\\n\",     curl_easy_strerror(res));\n        } else {\n            fprintf(stderr, \"Data:[%s] Ret:[%s]\\n\", data.data, curl_easy_strerror(res));\n        }\n        res = curl_easy_getinfo (curl, CURLINFO_HTTP_CODE, &amp;http_code);\n        printf(\"http_code:%ld\\n\", http_code);\n        /* always cleanup */\n        curl_easy_cleanup(curl);\n        if(data.data) free(data.data);\n\n        curl_slist_free_all(slist);\n    }\n    //curl_global_cleanup();\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>* About to connect() to x.x.x.x port 8080 (#0)\n*   Trying x.x.x.x...\n* connected\n* Connected to x.x.x.x (x.x.x.x) port 8080 (#0)\n&gt; POST /authservice/token?grant_type=client_credential HTTP/1.1\nUser-Agent: libcurl-agent/1.0\nHost: x.x.x.x:8080\nAccept: */*\nAuthorization: Basic dGVzdENsaWVudDp0ZXN0U2VjcmV0\nContent-Type:application/json\nContent-Length: 0\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1456899928, "post_id": 35739883, "comment_id": 59153592, "body": "You pretty-much hit it in your steps. Now all you need is the code. Error and boundary checking are always appreciated, btw."}, {"owner": {"reputation": 3795, "user_id": 2648826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QqhXq.png?s=128&g=1", "display_name": "Digital_Reality", "link": "https://stackoverflow.com/users/2648826/digital-reality"}, "edited": false, "score": 1, "creation_date": 1456899929, "post_id": 35739883, "comment_id": 59153593, "body": "Show us your efforts.."}, {"owner": {"reputation": 468, "user_id": 5579664, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d18a3a1920c968708f1e36d2f6e4ce4?s=128&d=identicon&r=PG&f=1", "display_name": "chickenninja565", "link": "https://stackoverflow.com/users/5579664/chickenninja565"}, "edited": false, "score": 0, "creation_date": 1456961456, "post_id": 35739883, "comment_id": 59193777, "body": "I have added code please take a look."}], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 4365192, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7EX8E.png?s=128&g=1", "display_name": "Ritz Arlekar", "link": "https://stackoverflow.com/users/4365192/ritz-arlekar"}, "is_accepted": false, "score": -1, "last_activity_date": 1456899896, "creation_date": 1456899896, "answer_id": 35739955, "question_id": 35739883, "link": "https://stackoverflow.com/questions/35739883/read-an-array-of-numbers-from-text-file-into-array-in-c/35739955#35739955", "title": "read an array of numbers from text file into array in C", "body": "<p>Just a general way. you can change it as per your need.</p>\n\n<pre><code>FILE *file = fopen(\"filename.txt\", \"r\");\n    int integers[100];\n\n    int i=0;\n    int num;\n    while(fscanf(file, \"%d\", &amp;num) &gt; 0) {\n        integers[i] = num;\n        i++;\n    }\n    fclose(file);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 5976242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc55e6959748d76a434fbe108b55efb5?s=128&d=identicon&r=PG&f=1", "display_name": "user5976242", "link": "https://stackoverflow.com/users/5976242/user5976242"}, "is_accepted": true, "score": 0, "last_activity_date": 1456900319, "creation_date": 1456900319, "answer_id": 35740065, "question_id": 35739883, "link": "https://stackoverflow.com/questions/35739883/read-an-array-of-numbers-from-text-file-into-array-in-c/35740065#35740065", "title": "read an array of numbers from text file into array in C", "body": "<p>scanf functions are generally pretty slow. I would use fread and strtok.</p>\n\n<pre><code>stat file get size\nallocate buffer\nfread to buffer\nwhile not end of buffer\nstrtok\narray[index] = strtoul(buf, 0, 10)\nloop\n</code></pre>\n\n<p>good example of strtok on man page link\n<a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man3/strtok.3.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 3195195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zmqyV.jpg?s=128&g=1", "display_name": "jeffry copps", "link": "https://stackoverflow.com/users/3195195/jeffry-copps"}, "edited": false, "score": 0, "creation_date": 1456910845, "post_id": 35740184, "comment_id": 59159739, "body": "The downvoter, please explain your concern about the code. Is this not working in your machine?"}], "tags": [], "owner": {"reputation": 245, "user_id": 3195195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zmqyV.jpg?s=128&g=1", "display_name": "jeffry copps", "link": "https://stackoverflow.com/users/3195195/jeffry-copps"}, "is_accepted": false, "score": -1, "last_activity_date": 1456900738, "creation_date": 1456900738, "answer_id": 35740184, "question_id": 35739883, "link": "https://stackoverflow.com/questions/35739883/read-an-array-of-numbers-from-text-file-into-array-in-c/35740184#35740184", "title": "read an array of numbers from text file into array in C", "body": "<p>Tried with redirecting the file to stdin. A weak code, still works.:p</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\nfreopen(\"fileName\",\"r\",stdin);\nchar arr[200];\nint result[10],i=0;\ndo\n{\n    scanf(\"%s\",arr);\n    if(arr[0]!='[' &amp;&amp; arr[0]!=']')\n    result[i++]=atoi(arr);\n}while(arr[0]!=']');\n\n}\n</code></pre>\n"}], "owner": {"reputation": 468, "user_id": 5579664, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1d18a3a1920c968708f1e36d2f6e4ce4?s=128&d=identicon&r=PG&f=1", "display_name": "chickenninja565", "link": "https://stackoverflow.com/users/5579664/chickenninja565"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 35740065, "answer_count": 3, "score": 0, "last_activity_date": 1456936199, "creation_date": 1456899602, "last_edit_date": 1456936199, "question_id": 35739883, "link": "https://stackoverflow.com/questions/35739883/read-an-array-of-numbers-from-text-file-into-array-in-c", "title": "read an array of numbers from text file into array in C", "body": "<p>This is what is written into a text file ex. \"123.txt\":</p>\n\n<pre><code>[ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ] \n</code></pre>\n\n<p>How do I go about pulling these numbers into an array? </p>\n\n<p>My thoughts:</p>\n\n<ol>\n<li><p>Open the file (of course)</p></li>\n<li><p>Use some form of fscanf</p></li>\n<li><p>Place that fscanf under a loop and assign numbers to the new array as the loop progresses</p></li>\n<li><p>Close File</p></li>\n</ol>\n\n<p>Any thoughts on how to do this is greatly appreciated. Thank you for your time.</p>\n\n<p>EDIT 1:</p>\n\n<p>Note I am factoring out the efficiency problem for strictly learning purposes on this question. Also, error detection is implied, but not included.</p>\n\n<pre><code>int* load( const char* filename ) {\n     int i;\n     len = 100; // How to find len of array?\n     array[len];\n     FILE* fp = fopen( filename, \"r\" )\n\n     while( !feof(fp) ) {\n        fscanf(fp,\"%d, \",&amp;array[i]);\n            i++;\n        }\n        fclose(f1);\n     return array;\n</code></pre>\n\n<p>My code here at the loop doesn't end.</p>\n"}]