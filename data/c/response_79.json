[{"tags": ["c", "linux", "code-injection", "shared-objects"], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 2835437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8312b390558ae470790498d5e5b102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Eytan Naim", "link": "https://stackoverflow.com/users/2835437/eytan-naim"}, "is_accepted": false, "score": 0, "last_activity_date": 1593461255, "creation_date": 1593461255, "answer_id": 62645918, "question_id": 38363529, "link": "https://stackoverflow.com/questions/38363529/linux-injected-shared-object-self-removal/62645918#62645918", "title": "Linux Injected Shared Object Self-Removal", "body": "<p>It not trivial, but you can do the following when you decide to unload your shared object:</p>\n<ul>\n<li>mmap() a new mapping with EXECUTE permissions</li>\n<li>Write machine instructions on this mapping that dlclose(your-shared-object)</li>\n<li>write machine instructions that call munmap() while making sure the return address of this invocation points to a thread termination call (possibly pthread_exit()), resulting the executing thread to never return</li>\n<li>Create new thread and call the mmap() address</li>\n</ul>\n"}], "owner": {"reputation": 77, "user_id": 4883291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec6dffa22c9aa972eaa698486dea6f0c?s=128&d=identicon&r=PG&f=1", "display_name": "incanus86", "link": "https://stackoverflow.com/users/4883291/incanus86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1593461255, "creation_date": 1468454379, "last_edit_date": 1495541290, "question_id": 38363529, "link": "https://stackoverflow.com/questions/38363529/linux-injected-shared-object-self-removal", "title": "Linux Injected Shared Object Self-Removal", "body": "<p>So I have been working on Injecting Linux Shared Objects into running processes following information from <a href=\"https://stackoverflow.com/questions/24355344/inject-shared-library-into-a-process\">Inject shared library into a process</a> and <a href=\"https://github.com/gaffe23/linux-inject\" rel=\"nofollow noreferrer\">https://github.com/gaffe23/linux-inject</a>.  I've gotten it up and running fairly well.  My question pertains to removing the shared object afterwards.  I know I can use the same method as for injection, but what I need to know is if I can remove the shared object using code within it.</p>\n\n<p>For example, I inject the .so and then remove the injector.  Now I need a way to remove the .so using functionality built into the .so itself.  I've thought about placing the injection code into the .so and then forking a process after a period of time just to test the idea.  Is this feasible or is there something else that would work better?</p>\n"}, {"tags": ["python", "c", "pointers", "structure", "swig"], "comments": [{"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1468869859, "post_id": 38363419, "comment_id": 64294331, "body": "use the <code>array_functions(struct _DRIVE, _DRIVEArray)</code> for generating functions for creating an array, setting and getting structures from the array. You need no fancy typemaps."}, {"owner": {"reputation": 13, "user_id": 1927913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db46001bd850ca63835248df7f28a913?s=128&d=identicon&r=PG", "display_name": "user1927913", "link": "https://stackoverflow.com/users/1927913/user1927913"}, "reply_to_user": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1468959819, "post_id": 38363419, "comment_id": 64339706, "body": "Would you mind giving an example? .i file, using it in python etc.?"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1468994075, "post_id": 38363419, "comment_id": 64349505, "body": "See e.g. <a href=\"http://stackoverflow.com/questions/11998369/swig-python-structure-array\" title=\"swig python structure array\">stackoverflow.com/questions/11998369/&hellip;</a>"}], "owner": {"reputation": 13, "user_id": 1927913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db46001bd850ca63835248df7f28a913?s=128&d=identicon&r=PG", "display_name": "user1927913", "link": "https://stackoverflow.com/users/1927913/user1927913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 652, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1468515198, "creation_date": 1468453409, "last_edit_date": 1468515198, "question_id": 38363419, "link": "https://stackoverflow.com/questions/38363419/swig-python-pointer-to-struct-array-as-method-argument", "title": "Swig Python pointer to struct array as method argument", "body": "<p>I've figured out how to handle pointer arguments to standard types like <code>int</code> using <code>%apply</code> in my interface file. I'm still having trouble using a function which takes a pointer to an array of structures as its argument.</p>\n\n<p>I've read the Swig 3.0 documentation about unbound arrays, structs, and making your own typemaps, but the documentation also says in most cases you shouldn't need to create a typemap.</p>\n\n<p>Could someone clear up for me if I really do need a typemap, or if there is another way of getting the below method working in python?</p>\n\n<p>Relevant C Code Being Wrapped</p>\n\n<pre><code>typedef struct _DRIVE\n{\n    int nDriveId;\n    DRIVE_TYPE nDriveType;\n    DEV_STATUS sStatus;\n    char strDriveName[64];\n    char strSerialNumber[24];\n    char strFirmwareRev[16];\n    char strModelNumber[48];\n    unsigned long long ullTotalCapacity;\n    int nSMARTEnabled;\n    DRIVERINFO Driver;\n\n    union\n    {\n        SMARTATTRIBUTE smartAttributes[MAX_SUPPORTED_ATTRIBUTES];\n        NVME_SMART_DATA sSmartData;\n        SAS_SMART_DATA sSASSmartData;\n    };\n\n    SMARTTHRESHOLD smartThresholds[MAX_SUPPORTED_ATTRIBUTES];\n\n    union\n    {\n        CLIENT_DRIVE_INFO ClientDriveInfo;\n        NVME_DRIVE_INFO NVMEDriveInfo;\n        SAS_DRIVE_INFO SASDriveInfo;\n    };\n} DRIVE, *PDRIVE;\n</code></pre>\n\n<p>The method with the pointer to an <strong>array</strong> of structures (<code>pDrives</code>).</p>\n\n<pre><code>STATUS GetAllDriveInfo(PDRIVE pDrives, int *nMaxDrives, DRIVE_TYPE type, STATUS *pDriveStatus);\n</code></pre>\n\n<p>Swig interface file:</p>\n\n<pre><code>%module api_python64\n%include \"typemaps.i\"\n\n%{\n/* Include the headers in the wrapper code */\n#include \"API-STATUS.h\"\n#include \"API.h\"\n%}\n\n/* Typemaps */\n%apply int *INOUT { int *nMaxDrives };\n\n/* Parse the header files to generate wrappers */\n%include \"STATUS.h\"\n%include \"API.h\"\n</code></pre>\n\n<p>Currently anything I try passing in Python as the first argument gives me:</p>\n\n<blockquote>\n  <p>TypeError: in method 'GetAllDriveInfo', argument 1 of type 'PDRIVE'</p>\n</blockquote>\n"}, {"tags": ["c", "types"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1468449232, "post_id": 38362704, "comment_id": 64137931, "body": "With <code>sprintf()</code>, something like <code>unsigned char res[5]; sprintf(res,&quot;\\\\x%02x&quot;,a &amp; 0xff);</code> (for just the low byte of <code>a</code>).  Maybe you were missing the <code>\\\\x</code> part of the format string?  There are other ways to do it, though..."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1468449407, "post_id": 38362815, "comment_id": 64137979, "body": "Hopefully <code>0 &lt;= x &lt; 256</code>, else <code>buf[]</code> overflow."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1468450258, "post_id": 38362815, "comment_id": 64138287, "body": "@chux: No, it gets truncated because I used the correct function, <code>snprintf</code>, rather than the deprecated <code>sprintf</code> OP suggested. From the context I took it that the integer was supposed to represent a byte value, but if that&#39;s not the case then by all means use a larger buffer."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1468450468, "post_id": 38362815, "comment_id": 64138361, "body": "Based on the other answer, though, I&#39;m not clear on whether this is even what OP wanted."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468451659, "post_id": 38362815, "comment_id": 64138672, "body": "Not sure the OP knows what s/he wants. The contents of <code>buf</code> in this answer will certainly not match the contents of <code>data</code> from the question."}, {"owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 0, "creation_date": 1468453838, "post_id": 38362815, "comment_id": 64139208, "body": "This is almost certainly wrong... the string <code>&quot;\\xdd&quot;</code> corresponds to the decimal value 221."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 1, "last_activity_date": 1468449254, "creation_date": 1468449254, "answer_id": 38362815, "question_id": 38362704, "link": "https://stackoverflow.com/questions/38362704/converting-integer-to-unsigned-char-int-221-to-xdd/38362815#38362815", "title": "Converting integer to unsigned char* (int 221 to &quot;\\xdd&quot;)", "body": "<p>As stated the question does not make sense and is not possible - you don't actually want to convert to <code>const char *</code>, which is a pointer type. Instead you want to convert into an array of <code>char</code>s and then take the address of that array by using its name.</p>\n\n<pre><code>int x = 221;\nchar buf[5];\nsnprintf(buf, sizeof buf, \"\\\\x%.2x\", x);\n/* now pass buf to whatever function you want, e.g.: */\nputs(buf);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1468450156, "last_edit_date": 1468450156, "creation_date": 1468449728, "answer_id": 38362911, "question_id": 38362704, "link": "https://stackoverflow.com/questions/38362704/converting-integer-to-unsigned-char-int-221-to-xdd/38362911#38362911", "title": "Converting integer to unsigned char* (int 221 to &quot;\\xdd&quot;)", "body": "<p>Since <code>221</code> is not guaranteed to be a valid value for a <code>char</code> type, the closest thing you can do is:</p>\n\n<pre><code> int a = 221;\n unsigned char buffer[10];\n sprintf((char*)buffer, \"%c\", a);\n</code></pre>\n\n<p>Here's an example program and its output:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    unsigned char* data = (unsigned char*) \"\\xdd\";\n    int a = 221;\n    unsigned char buffer[10];\n    sprintf((char*)buffer, \"%c\", a);\n    printf(\"%d\\n\", buffer[0] == data[0]);\n    printf(\"%d\\n\", buffer[0]);\n    printf(\"%d\\n\", data[0]);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n221\n221\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Perhaps I misunderstood your question. You can also use:</p>\n\n<pre><code> int a = 221;\n unsigned char buffer[10] = {0};\n buffer[0] = a;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6586742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1247b0770562dcc3245710b730e3bba?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Garb", "link": "https://stackoverflow.com/users/6586742/martin-garb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 38362911, "answer_count": 2, "score": 2, "last_activity_date": 1468450156, "creation_date": 1468448710, "question_id": 38362704, "link": "https://stackoverflow.com/questions/38362704/converting-integer-to-unsigned-char-int-221-to-xdd", "title": "Converting integer to unsigned char* (int 221 to &quot;\\xdd&quot;)", "body": "<p>I have a function which takes <code>unsigned char*</code> as input.</p>\n\n<p>Say for example that I have: </p>\n\n<pre><code>unsigned char* data = (unsigned char*) \"\\xdd\";\nint a = 221;\n</code></pre>\n\n<p>How can I convert my integer <code>a</code> to <code>unsigned char*</code> such that <code>data</code> and my converted <code>a</code> is indistinguishable? \nI have tried playing around with sprintf but without any luck, I'm not sure how to handle the \"\\x\" part. </p>\n"}, {"tags": ["c", "pointers", "operating-system"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1468447019, "post_id": 38362334, "comment_id": 64137110, "body": "How are you going to see if you can access the memory unless you&#39;ve already accessed the memory? And no, you can&#39;t check that a pointer is valid; you can check that it&#39;s not NULL, but you can&#39;t tell that the location it&#39;s pointing to is valid memory. It might appear to be a valid address and instead be just a random value. I don&#39;t think it&#39;s <i>most questions</i> that are answered &quot;No, you can&#39;t do that&quot;, but <i>all questions</i>. If you&#39;ve found one that doesn&#39;t say that, then you&#39;ve already got an answer to your question."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1468447083, "post_id": 38362334, "comment_id": 64137138, "body": "I don&#39;t care if it is valid or invalid, i care if it will crash the program or not. I don&#39;t mind corrupting memory or accessing memory that I haven&#39;t assigned yet, all I care about is if it can be accessed or not."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468447119, "post_id": 38362334, "comment_id": 64137156, "body": "what even. this is a question for your hardware architecture and OS, not C. the language can only compile to machine code that the former entities will either allow or reject at runtime. questions such as whether arbitrary numbered addresses are allowed are precisely none of C&#39;s business. besides, the mere act of trying to access a numbered address is not defined behaviour, more like implementation-defined <i>at best</i>. for most platforms, pointers are meant to point to objects, not specific addresses, and C regards the latter as just a necessary piece of happenstance."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1468447163, "post_id": 38362334, "comment_id": 64137171, "body": "I addressed that in my first sentence. You can do it like a debugger does, but how to do so would be far too broad a question here. There are books on writing debuggers, and there are already many debuggers available (including many free ones)."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1468447247, "post_id": 38362334, "comment_id": 64137212, "body": "So the only way to check if memory is legal or not is via system calls(platform dependant) if such calls exist in the first place? I really don&#39;t want to believe this is the case since the program is given the information what addresses it is mapped to and what is out of its&#39; virtual address space, I don&#39;t understand why this information wouldn&#39;t be available to C."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468447359, "post_id": 38362334, "comment_id": 64137252, "body": "...and the implementations that <i>do</i> specifically define attempts to access arbitrary locations are typically embedded systems with their own compilers, not general-purpose x86 or similar as it sounds like you&#39;re targeting here, and where specific addresses are actually meaningful and - again - defined in the hardware/OS manual as being allowed for access for particular purposes."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468447508, "post_id": 38362334, "comment_id": 64137310, "body": "@Dmitry Why <i>would</i> that info be available to C? All it is usually responsible for doing is generating instructions to manipulate data objects allocated within a relative stack frame or at arbitrary-but-inconsequential (read: numerical value effectively unobservable) addresses from the freestore. It can only deal with the addresses it&#39;s given; it can&#39;t deduce possible validity of others. Again, <i>unless</i> you have relevant OS calls to do that for you and/or are using a very specific embedded implementation."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468447766, "post_id": 38362334, "comment_id": 64137394, "body": "@underscore_d i was curious if it is possible to deduce as many of the addresses it is given to limit operations outside of them. I know that there are segment start addresses that in many cases are certain to be legal to address, but this information cannot be extracted in a standard way."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468448006, "post_id": 38362334, "comment_id": 64137493, "body": "@Dmitry Any such information would be a trait of the target platform/OS/executable format, not the language. The language is at a layer of abstraction above these things. (buffered by the compiler)"}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468448094, "post_id": 38362334, "comment_id": 64137528, "body": "@underscore_d so the way the system reacts to illegal memory addressing is system specific and may or may not be caught, so any such program must be platform-aware to behave correctly/at all?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468448274, "post_id": 38362334, "comment_id": 64137597, "body": "@Dmitry Absolutely. And that&#39;s only <i>iff</i> your program can recover from being caught-in-the-act asking questions it probably shouldn&#39;t be asking. It&#39;s not that people don&#39;t do this - but those who do are usually developing things like OSes or debuggers, rather than general-purpose &amp; crucially portable code, and have built complex implementations around the assumptions of the target system. Perhaps you&#39;d find it educational to take a look at some such projects and see how they deal with questions like this, be it interacting with specific OS/hardware calls or actually implementing those things."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468448467, "post_id": 38362334, "comment_id": 64137674, "body": "@underscore_d I think you are being perhaps less than helpful here. Dimitry wants to write a &quot;C shell&quot;, which we would call a debugger. This makes him one of those people who absolutely, legitimately should care about these things."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1468448583, "post_id": 38362334, "comment_id": 64137710, "body": "@jforberg I didn&#39;t say he wasn&#39;t, nor did I say it wasn&#39;t (in appropriate cases) legitimate... though I grant that my focus has shifted more as his intent has become clearer. But through it all, I said it&#39;s not the province of average or (easily) portable C. More recently, see the bit where I said it can be done but will probably need more platform-specific study, and suggested he review some similar projects to get some ideas. Is there something &quot;less than helpful&quot; about that? You&#39;re welcome to write a better answer or comments &amp; show me how it&#39;s done! But it&#39;s still not <i>really</i> a C question"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468448947, "post_id": 38362334, "comment_id": 64137832, "body": "...insofar as, yeah, it&#39;ll be used to debug C code, but much of the heavy lifting required to do so isn&#39;t specific or really known to C, and reconciling the two will almost certainly require some equally heavyweight code."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1468448961, "post_id": 38362334, "comment_id": 64137836, "body": "Perhaps it is possible by spawning a process, having it check the memory and check the result/whether it reported back or exploded. Sure there is process spawning overhead but the program spends most of its&#39; time waiting for input anyway. Then again it won&#39;t be the same memory space... awkward... but it&#39;s still going to have similar restrictions/virtual mappings(the illegal addresses tend to be overlapping). And if the process did survive, you only try accessing it then."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468449182, "post_id": 38362334, "comment_id": 64137914, "body": "@underscore_d OK, no harm done. I see &quot;C&quot; as a broader topic that definitely could include things such as virtual memory mappings. But you are correct in your point that this is not possible using only standard C, and since he didn&#39;t tag his question with an OS that should perhaps be the topic."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "edited": false, "score": 0, "creation_date": 1468449728, "post_id": 38362334, "comment_id": 64138096, "body": "@jforberg Yeah, I&#39;m sure the details of C implementations and how they interact with their target platforms are just as interesting, and I&#39;m looking forward to doing some embedded stuff with C/C++ in the future. But without some specific info/tags, I don&#39;t know if there&#39;s much we can say at the moment."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1468447794, "post_id": 38362475, "comment_id": 64137405, "body": "Detail: ... whose value compares equal to <code>NULL</code>"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1468448329, "post_id": 38362475, "comment_id": 64137616, "body": "FWIW, and that is my strong conviction: if code must check to see if a pointer is valid, it should be redesigned. It should <b>never</b> be necessary to perform such checks. How this can be avoided can not be easily told in a comment, however."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1468448408, "post_id": 38362475, "comment_id": 64137651, "body": "@RudyVelthuis, I agree. The only check that you should see is whether a pointer compares equal to <code>NULL</code>."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1468449218, "post_id": 38362475, "comment_id": 64137924, "body": "Actually, I generally try to avoid writing code that needs checks for NULL as well, but I know that not everyone agrees with that."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1468448110, "last_edit_date": 1468448110, "creation_date": 1468447462, "answer_id": 38362475, "question_id": 38362334, "link": "https://stackoverflow.com/questions/38362334/is-it-possible-to-check-if-dereferencing-arbitrary-memory-will-crash-the-program/38362475#38362475", "title": "Is it possible to check if dereferencing arbitrary memory will crash the program apriori in C?", "body": "<blockquote>\n  <p>I want to know if there is a standard way in C to check if the program is allowed to access the memory I am attempting to access, or if accessing this memory will cause the program to crash(before it actually crashes), and report information to the user that the program is not allowed to access that memory.</p>\n</blockquote>\n\n<p>No, there isn't.</p>\n\n<p>The standard only says that you can't dereference a null pointer. Beyond that, the range of pointer values that are valid is dependent on the platform. What you are hoping to pull off cannot be pulled off in platform independent code.</p>\n\n<p>From footnote 87 in the C99 Standard:</p>\n\n<blockquote>\n  <p>Among the invalid values for dereferencing a pointer by the unary * operator are a null pointer, an address inappropriately aligned for the type of object pointed to, and the address of an object after the end of its lifetime</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1468447830, "post_id": 38362480, "comment_id": 64137417, "body": "So one way would be to just do it and catch the exception from a system that supports them, otherwise report an error and recover(unless the system doesn&#39;t like you anyway and kills your process)?"}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 1, "creation_date": 1468448158, "post_id": 38362480, "comment_id": 64137555, "body": "There is no fail-proof way. But for most cases, ye, you can have an access violation handler and postpone the crash."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1468449058, "post_id": 38362480, "comment_id": 64137874, "body": "@Dmitry If you&#39;re interested in Windows specifically, check out the mmbbq project (I edited the answer)."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1468450652, "post_id": 38362480, "comment_id": 64138424, "body": "seems like a cool project, a bit old(some links don&#39;t work). Thanks for the link."}], "tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": false, "score": 2, "last_activity_date": 1468448896, "last_edit_date": 1495539850, "creation_date": 1468447474, "answer_id": 38362480, "question_id": 38362334, "link": "https://stackoverflow.com/questions/38362334/is-it-possible-to-check-if-dereferencing-arbitrary-memory-will-crash-the-program/38362480#38362480", "title": "Is it possible to check if dereferencing arbitrary memory will crash the program apriori in C?", "body": "<p>Standard way? No. What you experience as crash is a result of undefined behavior. The standard doesn't delve into such details.</p>\n\n<p>The Windows API provides a <code>IsBadReadPtr</code> function that seems to be what you are after. The <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366713(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a> is quite clear on that you shouldn't use it.</p>\n\n<p>The thing you overlooked is that some invalid accesses, you just can't recover from. If you touch a guard page, and catch the error without giving the guard page access handler a chance to run, you missed your chance. Next time you access the same address, you get an access violation and a core dump. Although on normal execution, this would have been fine. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366713%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">Raymond Chen's IsBadXxxPtr should really be called CrashProgramRandomly</a>.</p>\n\n<p>On Unix, you can have the kernel do the dirty work for you <a href=\"https://stackoverflow.com/a/4611930/1257035\">by passing the pointer to <code>write(2)</code></a>. If it returns <code>EFAULT</code>, it means you would have crashed your process.</p>\n\n<p>Note, that while it looks like you check a priori, you're really checking the aftermath. Checking in advance isn't reliable (The mapping might change, between the check and the actual access).</p>\n\n<p>If you want to get notified after the failure, write a signal handler for <code>SIGSEGV</code> On UNIX. On Windows, deal with the <code>EXCEPTION_ACCESS_VIOLATION</code> SEH exception.</p>\n\n<hr>\n\n<p>Addendum: What you want to do sounds a bit like what <a href=\"https://web.archive.org/web/20150507114635/http://duschkumpane.org/index.php/mmbbq\" rel=\"nofollow noreferrer\">mmbbq</a> did. It injected a lua interpreter into an external application and allowed calling and dereferencing addresses. If you fudge it up, only the thread that was started anew was affected and the program itself continued working (for a while at least..). The website isn't online anymore, but maybe you are successful in finding a mirror.</p>\n"}, {"comments": [{"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1468448330, "post_id": 38362512, "comment_id": 64137617, "body": "It is essentially a &quot;debugger-like&quot; application. Except instead of the intent of debugging, the intent is to expose C functionality into runtime interactive shell and &quot;play with it&quot; without a particular objective. Eg, in this case, I don&#39;t care if I corrupt memory, but I care if my program crashes and doesn&#39;t let me do anything about it and gives no information about what part of the code caused the crash(just a boring generic error). Essentially juggling chainsaws."}, {"owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "reply_to_user": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 1, "creation_date": 1468448689, "post_id": 38362512, "comment_id": 64137747, "body": "@Dmitry that sounds interesting. But you can&#39;t really write a cross-platform debugger in any real sense, so you will get better answers if you included your chosen OS as a tag in the question. If you just tag it as &quot;C&quot; here on this site, people will assume pure cross-platform and you tend to get answers where people quote the C standard and similar, which is of course proper and correct but not very helpful to you in this case."}, {"owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 0, "creation_date": 1468449284, "post_id": 38362512, "comment_id": 64137945, "body": "I think this is the best solution I can get for the time being. Essentially, there is no way to do this in C alone, some platform call or wrapper library is required to deal with it, which is possible but only as long as the program is platform aware. Platforms are not required to expose ways to handle such situations to C, so C has no way of universally checking if an address will crash or not."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "edited": false, "score": 1, "creation_date": 1468449401, "post_id": 38362512, "comment_id": 64137976, "body": "@Dmitry I think so. And you can <i>totally</i> make it effectively cross-platform via conditional compilation, but that&#39;s different from being portable in the sense of the (any) language itself. A wrapper library is a great idea, certainly beats endless <code>#ifdef</code>s! (though it might require at least one!) Then you can have the other layer being portable C code that&#39;s effectively agnostic of the underlying machinery that tells it about addresses and whatnot."}], "tags": [], "owner": {"reputation": 5748, "user_id": 767442, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d26ad3fe7caf43447e39cd2307b515d7?s=128&d=identicon&r=PG&f=1", "display_name": "jforberg", "link": "https://stackoverflow.com/users/767442/jforberg"}, "is_accepted": true, "score": 3, "last_activity_date": 1468450852, "last_edit_date": 1468450852, "creation_date": 1468447665, "answer_id": 38362512, "question_id": 38362334, "link": "https://stackoverflow.com/questions/38362334/is-it-possible-to-check-if-dereferencing-arbitrary-memory-will-crash-the-program/38362512#38362512", "title": "Is it possible to check if dereferencing arbitrary memory will crash the program apriori in C?", "body": "<p>I don't think there is any way to do this using just standard C.</p>\n\n<p>However you can use evil platform specific tricks to get an ides of how your memory mappings look. On Linux, the file <code>/proc/(pid)/maps</code> will list the memory maps of process <code>pid</code>, including read/write permission status. This is how it looks for a simple <code>cat</code> process on my machine:</p>\n\n<pre><code>00400000-0040c000 r-xp 00000000 00:13 1237228                            /usr/bin/cat\n0060b000-0060c000 r--p 0000b000 00:13 1237228                            /usr/bin/cat\n0060c000-0060d000 rw-p 0000c000 00:13 1237228                            /usr/bin/cat\n01864000-01885000 rw-p 00000000 00:00 0                                  [heap]\n7fe7a5e0b000-7fe7a6121000 r--p 00000000 00:13 1487092                    /usr/lib/locale/locale-archive\n7fe7a6123000-7fe7a62ba000 r-xp 00000000 00:13 1486770                    /usr/lib/libc-2.23.so\n7fe7a62ba000-7fe7a64ba000 ---p 00197000 00:13 1486770                    /usr/lib/libc-2.23.so\n7fe7a64ba000-7fe7a64be000 r--p 00197000 00:13 1486770                    /usr/lib/libc-2.23.so\n7fe7a64be000-7fe7a64c0000 rw-p 0019b000 00:13 1486770                    /usr/lib/libc-2.23.so\n7fe7a64c0000-7fe7a64c4000 rw-p 00000000 00:00 0 \n7fe7a64cb000-7fe7a64ee000 r-xp 00000000 00:13 1486769                    /usr/lib/ld-2.23.so\n7fe7a66cc000-7fe7a66ee000 rw-p 00000000 00:00 0 \n7fe7a66ee000-7fe7a66ef000 r--p 00023000 00:13 1486769                    /usr/lib/ld-2.23.so\n7fe7a66ef000-7fe7a66f0000 rw-p 00024000 00:13 1486769                    /usr/lib/ld-2.23.so\n7fe7a66f0000-7fe7a66f1000 rw-p 00000000 00:00 0 \n7fe7a66f5000-7fe7a66f8000 rw-p 00000000 00:00 0 \n7ffe398e8000-7ffe39909000 rw-p 00000000 00:00 0                          [stack]\n7ffe3999b000-7ffe3999e000 r--p 00000000 00:00 0                          [vvar]\n7ffe3999e000-7ffe399a0000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n</code></pre>\n\n<p>So from this you can see that the program image itself is mapped near the beginning of virtual memory, the heap is slightly higher up, the stack is mapped to <code>7ffe398e8000-7ffe39909000</code> and the C library and dynamic linker are also loaded into memory.</p>\n\n<p>Note that each file is mapped several times. For instance, /usr/bin/cat has both a read-only, executable and read-write segment. This is to prevent processes from writing to <code>const</code> memory and from executing data.</p>\n\n<p>From the mapping table you could get a fair idea of how your memory is laid out and what operations would be possible on these parts of memory.</p>\n\n<p><strong>Is this a good idea? NO</strong>.</p>\n\n<p>Most likely not unless you are writing a debugger or similar development tool.</p>\n\n<hr>\n\n<p>As an aside, the \"shell\" you are thinking about writing sounds very much like a debugger. Debuggers such as gdb can do the things you talk about, including evaluating C expressions and examining memory.</p>\n\n<hr>\n\n<p>As a second aside, and because I find this very interesting, here is a small exercise:</p>\n\n<p>As you can see there is some kernel memory mapped at <code>ffffffffff600000</code>. If this theory is correct, we should be able to read that memory even though in general we can't access the kernel's memory. Let's try:</p>\n\n<pre><code>int main(void)\n{\n  unsigned long *p = 0xffffffffff600000;\n\n  for (;;)\n    printf(\"0x%lx, \", *p++);\n}\n</code></pre>\n\n<p>We get</p>\n\n<p><code>0xf00000060c0c748, 0xccccccccccccc305, 0xcccccccccccccccc,</code> ... <code>Segmentation fault</code></p>\n\n<p>If you wonder why this memory is readable to a user space process, it is to accelerate certain syscalls such as gettimeofday and allow them to work without having to switch to kernel mode as other syscalls have to. See e.g. <a href=\"https://stackoverflow.com/questions/19938324/what-are-vdso-and-vsyscall\">this question</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 1, "last_activity_date": 1468454286, "creation_date": 1468454286, "answer_id": 38363523, "question_id": 38362334, "link": "https://stackoverflow.com/questions/38362334/is-it-possible-to-check-if-dereferencing-arbitrary-memory-will-crash-the-program/38363523#38363523", "title": "Is it possible to check if dereferencing arbitrary memory will crash the program apriori in C?", "body": "<p>As already said, we're far off from \"standard C\" here.</p>\n\n<p>Nonetheless, you can (somewhat) accomplish that by handling segmentation faults. Of course there's a library for that: <a href=\"https://www.gnu.org/software/libsigsegv/\" rel=\"nofollow\">GNU libsigsegv</a></p>\n"}], "owner": {"reputation": 4398, "user_id": 2012715, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/0a04a0851dba37de648917cf0abea9b8?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/2012715/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 38362512, "answer_count": 4, "score": 1, "last_activity_date": 1468454286, "creation_date": 1468446795, "last_edit_date": 1468448760, "question_id": 38362334, "link": "https://stackoverflow.com/questions/38362334/is-it-possible-to-check-if-dereferencing-arbitrary-memory-will-crash-the-program", "title": "Is it possible to check if dereferencing arbitrary memory will crash the program apriori in C?", "body": "<p>I want to write an interactive interpreted C shell that allows you to address arbitrary memory and perform commands on these memory addresses.</p>\n\n<p>e.g(running program shell):</p>\n\n<pre><code>prompt&gt; 10 bytes starting 0x400000 \n</code></pre>\n\n<p>This instruction would try to access address 0x400000 and show 10 bytes starting there. e.g. range [0x400000, 0x400009].</p>\n\n<p>and would produce output like:</p>\n\n<pre><code>{0x00, 0x01, 0x02, 0x03, 0x04, &lt;bad&gt;, &lt;bad&gt;, 0x07, 0x08, 0x09, 0x0a}\n</code></pre>\n\n<p>Where \"bad\" would indicate an attempt to address \"illegal\" memory.</p>\n\n<p>I want to know if there is a standard way in C to check if the program is allowed to access the memory I am attempting to access, or if accessing this memory will cause the program to crash(before it actually crashes), and report information to the user that the program is not allowed to access that memory.</p>\n\n<p>I ask this because most questions on this topic tend to be answered by \"you can't definitely check if a pointer is valid\", but I am sure that there must be some way to check if the pointer is at least \"definitely invalid and will crash\" or \"possibly invalid, but won't crash\", and unfortunately I can't find the answer to this question.</p>\n\n<p>Thanks ahead of time.</p>\n"}, {"tags": ["c", "multithreading", "profiling", "lock-free"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1468447111, "post_id": 38362243, "comment_id": 64137151, "body": "(depending on platform) You could try using <code>clock_gettime()</code> with <code>CLOCK_THREAD_CPUTIME_ID</code> if you&#39;re after CPU time used by each thread, or <code>CLOCK_PROCESS_CPUTIME_ID</code> for the total for whole process..."}, {"owner": {"reputation": 3312, "user_id": 177923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a9c082cd36b8148bf74a720e8e89c6?s=128&d=identicon&r=PG", "display_name": "tony", "link": "https://stackoverflow.com/users/177923/tony"}, "edited": false, "score": 0, "creation_date": 1468634237, "post_id": 38362243, "comment_id": 64222472, "body": "why do you think that it is not correct?"}], "owner": {"reputation": 57, "user_id": 6016326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee14d759f55f1d59aabde397f99b66b?s=128&d=identicon&r=PG&f=1", "display_name": "Sumant", "link": "https://stackoverflow.com/users/6016326/sumant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "closed_date": 1468447530, "answer_count": 0, "score": 1, "last_activity_date": 1468446389, "creation_date": 1468446389, "question_id": 38362243, "link": "https://stackoverflow.com/questions/38362243/how-to-measure-time-taken-by-a-multi-threaded-c-program", "closed_reason": "Duplicate", "title": "How to measure time taken by a multi threaded C program?", "body": "<p>I have implemented a lock free linked list data structure. I am trying to measure the time taken by the program. I have 4 threads. The threads are implemented using pthreads library. Currently I am measuring the time using the following method</p>\n\n<pre><code>#include &lt;time.h&gt;\n/*\nSome code\n.........\n*/\npthread_t t1,t2;\nclock_t begin = clock();\npthread_create (&amp;t1, NULL, thread1, (void *)mylist);\npthread_create (&amp;t2, NULL, thread2, (void *)mylist);\npthread_create (&amp;t3, NULL, thread3, (void *)mylist);\npthread_create (&amp;t4, NULL, thread4, (void *)mylist);\npthread_join (t1, NULL);\npthread_join (t2, NULL);\npthread_join (t3, NULL);\npthread_join (t4, NULL);\nclock_t end= clock();\ndouble time_s = (double)(end-begin)/ CLOCKS_PER_SEC;\n</code></pre>\n\n<p>I thought that this would give me correct result. However when I measured time taken to individual threads like this</p>\n\n<pre><code>void * thread1(void * args)\n{\n    clock_t begin = clock();\n    /* Some Code */\n    clock_t end= clock();\n    double time_s = (double)(end-begin)/ CLOCKS_PER_SEC;\n}\n</code></pre>\n\n<p>The timing was different. These are the reading that I got:</p>\n\n<pre><code>Total time: \n2.06341\n\nThread 1\nTime: 0.767887\n\nThread 2\nTime:1.20169\n\nThread 3\nTime:1.92999\n\nThread 4\nTime:2.0584\n</code></pre>\n\n<p>Why is this happening? Is this correct? Any help would be appreciated.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 1, "creation_date": 1468446285, "post_id": 38362076, "comment_id": 64136814, "body": "This works because the object pointed at by <code>b</code> isn&#39;t <code>const</code> itself. But had you tried the following: <code>*(b+1) = &#39;E&#39;;</code> instead,  you would have gotten a compiler error message, such as: <code>error: read-only variable is not assignable</code> (clang). You can access it, but can&#39;t modify it through <code>b</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1468447001, "post_id": 38362076, "comment_id": 64137102, "body": "I don&#39;t see what the issue is here.  You declared <code>b</code> as const, not <code>a</code>, and you&#39;re accessing the array using <code>a</code>, not <code>b</code>."}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 6, "last_activity_date": 1468445801, "creation_date": 1468445801, "answer_id": 38362118, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362118#38362118", "title": "const char* pointing to an array of char on the stack", "body": "<p><code>const char* b</code> means that you cannot modify the thing <code>b</code> points to <em>through</em> <code>b</code>. But you can modify it through some other means, provided the thing isn't <code>const</code> in the first place<sup>*</sup>.</p>\n\n<p>Here is a simplified example:</p>\n\n<pre><code>int a = 0;\nconst int* p = &amp;a;\na = 42;  // OK! a is not const.\n*p = 43; // ERROR! Cannot modify a through p.\n\nconst int b = 0;\np = &amp;b;\nb = 43;  // ERROR! b is const.\n</code></pre>\n\n<hr>\n\n<p><sup>* This holds for C++. The details may be slightly different in C</sup></p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1468445809, "creation_date": 1468445809, "answer_id": 38362121, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362121#38362121", "title": "const char* pointing to an array of char on the stack", "body": "<p>Declaration of <code>b</code> with type <code>const char *</code> means that you cannot modify data using pointer <code>b</code> itself, it does not affect memory <code>b</code> points to in any sense.</p>\n"}, {"tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": false, "score": 1, "last_activity_date": 1468445883, "creation_date": 1468445883, "answer_id": 38362132, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362132#38362132", "title": "const char* pointing to an array of char on the stack", "body": "<p><code>const char * b</code> just means that you cannot modify what <code>b</code> points to ... through <code>b</code>.  The place it points to is an ordinary memory location, though, and can be modified by anything else that points to it.</p>\n\n<p>The contract represented by <code>const</code> is only valid with respect to the variable or method the const is attached to.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1468446243, "creation_date": 1468446243, "answer_id": 38362213, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362213#38362213", "title": "const char* pointing to an array of char on the stack", "body": "<blockquote>\n  <p>How am I able to access the memory pointed by <code>'const char* b'</code> and modify it ? </p>\n</blockquote>\n\n<p>You are able to access memory pointed to by <code>b</code> regardless of whether it is declared as</p>\n\n<pre><code>const char* b;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char* b;\n</code></pre>\n\n<p>You won't be able to modify the value through <code>b</code>. The following is an error:</p>\n\n<pre><code>b[1] = 'E';\n</code></pre>\n\n<blockquote>\n  <p>Does it mean that for a shared memory const definition does not matter ?</p>\n</blockquote>\n\n<p>The <code>const</code> qualifier matters -- whether it is shared memory or not. Had you used:</p>\n\n<pre><code>const char a[] = \"ABCD\";\nconst char* b = a;\n</code></pre>\n\n<p>the following will be an error too.</p>\n\n<pre><code>a[1] = 'E';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3954, "user_id": 3137388, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/98f780bca09821cbd63d84b8d6e028df?s=128&d=identicon&r=PG&f=1", "display_name": "kadina", "link": "https://stackoverflow.com/users/3137388/kadina"}, "is_accepted": false, "score": 2, "last_activity_date": 1468447823, "last_edit_date": 1468447823, "creation_date": 1468447172, "answer_id": 38362406, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack/38362406#38362406", "title": "const char* pointing to an array of char on the stack", "body": "<p><code>char * p</code><br>\n<code>p</code> is a non-constant pointing to a non-constant character. We can change the character value using <code>p</code>, and change <code>p</code> to point at another character.</p>\n\n<p><code>char const * p</code><br>\n<code>const char * p</code><br>\n<code>p</code> is a non-constant pointer to a constant character. We can't change the character value using <code>p</code>, but can change <code>p</code> to point at another character.</p>\n\n<p><code>char * const p</code><br>\n<code>p</code> is a constant pointer to a non-constant character. We can change the character value using <code>p</code>, but can't change <code>p</code> to point at another character.</p>\n\n<p><code>char const * const p</code><br>\n<code>const char * const p</code><br>\n<code>p</code> is a constant pointer to a constant character. We can't change the character value using <code>p</code>, or change <code>p</code> to point at another character.</p>\n\n<p>In your question, <code>a</code> and <code>b</code> point at the same memory. <code>b</code> is declared as <code>const char *</code>, so it is a non-constant pointer to a constant character. That doesn't mean that anybody else can't modify the character. Only that you can't modify the character using <code>b</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 6586608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f7073406bd73030dc2779b989ab6f8?s=128&d=identicon&r=PG&f=1", "display_name": "anandkumarcr", "link": "https://stackoverflow.com/users/6586608/anandkumarcr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 38362118, "answer_count": 5, "score": 1, "last_activity_date": 1468447823, "creation_date": 1468445623, "question_id": 38362076, "link": "https://stackoverflow.com/questions/38362076/const-char-pointing-to-an-array-of-char-on-the-stack", "title": "const char* pointing to an array of char on the stack", "body": "<p>I wrote this piece of code</p>\n\n<pre><code>int main()\n{\n    char a[] = \"ABCD\";\n    const char* b = a;\n    a[1] = 'E';\n    printf(\"%s %s\", a, b);\n    getchar();\n}\n</code></pre>\n\n<p>The code compiled and ran successfully. </p>\n\n<p>How am I able to access the memory pointed by 'const char* b' and modify it ? Does it mean that for a shared memory const definition does not matter ? </p>\n\n<p>Thank you</p>\n"}, {"tags": ["c", "multithreading", "performance", "linked-list", "profiling"], "comments": [{"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 0, "creation_date": 1468445012, "post_id": 38361840, "comment_id": 64136224, "body": "<a href=\"http://stackoverflow.com/a/5249150/5058676\">dup</a>"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 6594959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ff688f64df2ba681c20e114cffc2a5a?s=128&d=identicon&r=PG&f=1", "display_name": "Javon", "link": "https://stackoverflow.com/users/6594959/javon"}, "is_accepted": true, "score": 2, "last_activity_date": 1468690542, "creation_date": 1468690542, "answer_id": 38413826, "question_id": 38361840, "link": "https://stackoverflow.com/questions/38361840/measuring-throughput-and-latency-of-a-code/38413826#38413826", "title": "Measuring Throughput and Latency of a Code", "body": "<p>My personal preference is something like this:</p>\n\n<pre><code>struct timespec start, end;\nclock_gettime(CLOCK_MONOTONIC_RAW, &amp;start);\nsleep(1);\nclock_gettime(CLOCK_MONOTONIC_RAW, &amp;end);\nconst uint64_t ns = (end.tv_sec * 1000000000 + end.tv_nsec) - (start.tv_sec * 1000000000 + start.tv_nsec);\nprintf(\"elapsed %7.02f ms (%lu ns)\\n\", ns / 1000000.0, ns);\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6448088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c07e51de39525cc2ca18728729f9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/6448088/ritesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 2, "accepted_answer_id": 38413826, "answer_count": 1, "score": 1, "last_activity_date": 1468690542, "creation_date": 1468444617, "question_id": 38361840, "link": "https://stackoverflow.com/questions/38361840/measuring-throughput-and-latency-of-a-code", "title": "Measuring Throughput and Latency of a Code", "body": "<p>I have written a multithreaded C code for LinkedList. I am trying to measure the throughput and latency of the code. For measuring throughput, here is my code</p>\n\n<pre><code>clock_t begin = clock();    \n    pthread_create (&amp;t1, NULL, thread1, (void *)head);\n    pthread_create (&amp;t2, NULL, thread2, (void *)head);\n    pthread_create (&amp;t3, NULL, thread3, (void *)head);\n    pthread_create (&amp;t4, NULL, thread4, (void *)head);\n    pthread_join (t1, NULL);\n    pthread_join (t2, NULL);\n    pthread_join (t3, NULL);\n    pthread_join (t4, NULL);\nclock_t end = clock();\n</code></pre>\n\n<p>And for latency it is as follows</p>\n\n<pre><code>void * thread1(void * args)\n\n{\n  clock_t begin = clock();\n\n /* LinkedList Operations */\n\n  clock_t begin = clock();\n}\n</code></pre>\n\n<p>Am I measuring this two parameters correctly or is there some other way to do it?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c", "eclipse", "path"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1468443637, "post_id": 38361477, "comment_id": 64135586, "body": "The error log does not tell you that PATH is empty, it says that g++ and gcc are not found.  Notice that every slash in your PATH above is a backslash except those for java - edit your PATH to the bare minimum.  Note too that you don&#39;t have <code>&quot;</code> around your space embedded PATH variables (maybe it should be &quot;c:/program files/java\\......&quot; not c:/program files/java/....)"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1468443894, "post_id": 38361477, "comment_id": 64135708, "body": "See <a href=\"http://stackoverflow.com/questions/11703432/eclipse-c-program-g-not-found-in-path\" title=\"eclipse c program g not found in path\">stackoverflow.com/questions/11703432/&hellip;</a>"}, {"owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1468447585, "post_id": 38361477, "comment_id": 64137341, "body": "@KevinDTimm I changed all the &#39;/&#39; to &#39;\\&#39; and that didn&#39;t work. I followed the link you provided, but none of the solutions there seemed to work. Do you think it might be a MinGW problem? Also, can you elaborate on &#39; Note too that you don&#39;t have &quot; around your space embedded PATH variables &#39;. Don&#39;t quite understand that part."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1468506230, "post_id": 38361477, "comment_id": 64163739, "body": "Embedded spaces in your path can screw things up, so instead of having <code>...;c:&#47;program files&#47;java&#47;jre1.8.0_91&#47;bin&#47;server;...</code> you would have <code>...;&quot;c:&#47;program files&#47;java&#47;jre1.8.0_91&#47;bin&#47;server&quot;;...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "is_accepted": false, "score": 0, "last_activity_date": 1468450647, "creation_date": 1468450647, "answer_id": 38363048, "question_id": 38361477, "link": "https://stackoverflow.com/questions/38361477/eclipse-4-4-luna-windows-7-program-gcc-not-found-in-path/38363048#38363048", "title": "Eclipse 4.4 Luna Windows 7 &#39;Program &quot;gcc&quot; not found in PATH&#39;", "body": "<p>I got the approval from my company to uninstall Eclipse and install the latest version, and everything worked flawlessly. May have had something to do with the way Eclipse was set up. </p>\n"}], "owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468450647, "creation_date": 1468443158, "question_id": 38361477, "link": "https://stackoverflow.com/questions/38361477/eclipse-4-4-luna-windows-7-program-gcc-not-found-in-path", "title": "Eclipse 4.4 Luna Windows 7 &#39;Program &quot;gcc&quot; not found in PATH&#39;", "body": "<p>Eclipse keeps telling me 'Program g++/gcc not found in PATH'. I've done at least an hour of internet research to try to fix the problem, from modifying my system path to include C:\\MinGW\\bin (where it's confirmed gcc and g++ exist) to Restoring default settings in several different preference menus, all to no avail. In Project Settings > C/C++ Build > Environemnt, my PATH variable looks like:</p>\n\n<pre><code>C:\\MinGW\\bin;${MSYS_HOME}\\bin;C:/Program Files/Java/jre1.8.0_91/bin/server;C:/Program Files/Java/jre1.8.0_91/bin;C:/Program Files/Java/jre1.8.0_91/lib/amd64;C:\\MinGW\\bin\\;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\apache-tomcat-7.0.21/bin;C:\\org.apache.ant_1.7.0.v200706080842\\bin;C:\\jdk6\\bin;C:\\Microsemi\\Libero_v8.5\\Model\\win32acoem;C:\\Microsemi\\Libero_v8.5\\Designer\\bin;C:\\Microsemi\\Libero_v9.1\\Model\\win32acoem;C:\\Microsemi\\Libero_v9.1\\Designer\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\TortoiseSVN\\bin;C:\\Program Files\\Hewlett-Packard\\SimplePass\\;C:\\Microsemi\\Libero_v8.5\\WFL/bin;C:\\Program Files\\Amazon\\AWSCLI\\;C:\\Eclipse\\eclipse-cpp-luna-R-win32-x86_64\\eclipse;C:\\MinGW\\bin\n</code></pre>\n\n<p>C:\\MinGW\\bin is at the beginning, although the \n<a href=\"http://i.stack.imgur.com/IZV7w.png\" rel=\"nofollow\">error log</a></p>\n\n<p>tells me that my PATH is empty. Any idea what could be going wrong?</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1468442049, "post_id": 38361176, "comment_id": 64134814, "body": "The string returned by <code>fgets()</code> has a newline at the end. The actual filename probably doesn&#39;tg."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1468442221, "creation_date": 1468442221, "answer_id": 38361259, "question_id": 38361176, "link": "https://stackoverflow.com/questions/38361176/fopen-cant-open-file-which-exists-unless-i-input-a-string/38361259#38361259", "title": "fopen can&#39;t open file which exists, unless I input a string", "body": "<p>You need to remove the newline from the end of <code>path</code>.</p>\n\n<pre><code>fgets(path, sizeof(path), fp);\nsize_t lastpos = strlen(path) - 1;\nif (path[lastpos] == '\\n') {\n    path[lastpos] = 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5241350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15abb37ab2bc660f7b09653796f8bcb8?s=128&d=identicon&r=PG&f=1", "display_name": "Monado_III", "link": "https://stackoverflow.com/users/5241350/monado-iii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 38361259, "answer_count": 1, "score": 1, "last_activity_date": 1468442221, "creation_date": 1468441905, "question_id": 38361176, "link": "https://stackoverflow.com/questions/38361176/fopen-cant-open-file-which-exists-unless-i-input-a-string", "title": "fopen can&#39;t open file which exists, unless I input a string", "body": "<p>I'm attempting to open a file by parsing the output from <code>zenity --file-selection</code> but I'm having a problem where the file will never open and I get <code>Error: 2 (No such file or directory)</code> from errno. However, if I simply copy the output from <code>printf(\"%s\", file_to_open);</code> and paste it between quotes and pass it to <code>fopen</code>, it works as intended, even though passing <code>file_to_open</code> itself never works. I'm running on linux so I shouldn't be having a problem with '\\'s. </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n\nchar * select_file(void)\n{\n    static char path[1024];\n    memset(path, 0, sizeof(path));\n\n    FILE *fp = popen(\"zenity --file-selection --title=\\\"Choose Gameboy Rom\\\"\", \"r\");\n\n    if(fp == NULL)\n    {\n        printf(\"Failed to run command, make sure you have zenity installed!\\n\" );\n        exit(EXIT_FAILURE);\n    }\n\n    fgets(path, sizeof(path), fp);\n    pclose(fp);\n\n    return path;\n}\n\nint main(void)\n{\n    FILE * fp;\n\n    char file_to_open[1024];\n    strcpy(file_to_open, select_file());\n    printf(\"%s\", file_to_open);\n\n    fp = fopen(file_to_open, \"r\");\n    if(fp == NULL)\n    {\n        printf(\"Error: %d (%s)\\n\", errno, strerror(errno));\n        exit(EXIT_FAILURE);\n    }\n\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n\n<p>(I posted this previously on programmers.stackexchange and I was told to post here) </p>\n"}, {"tags": ["c", "integration", "pow", "function-composition"], "comments": [{"owner": {"reputation": 463, "user_id": 6511094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRJfm.jpg?s=128&g=1", "display_name": "D Hydar", "link": "https://stackoverflow.com/users/6511094/d-hydar"}, "edited": false, "score": 0, "creation_date": 1468439277, "post_id": 38360373, "comment_id": 64133298, "body": "Unless I&#39;m counting the parens wrong on my tiny tablet screen, the enclosing pow() call is being passed 3 args."}, {"owner": {"reputation": 7961, "user_id": 329801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a738a21eabcad64d71d7aeea53d84891?s=128&d=identicon&r=PG", "display_name": "thelaws", "link": "https://stackoverflow.com/users/329801/thelaws"}, "edited": false, "score": 1, "creation_date": 1468439312, "post_id": 38360373, "comment_id": 64133322, "body": "Should the <code>-1,5</code> be <code>-1.5</code>? You can&#39;t have 3 arguments to the <code>pow</code> function."}, {"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468440059, "post_id": 38360373, "comment_id": 64133772, "body": "Yes indeed it was a typo error. Thx for your time"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468440000, "post_id": 38360504, "comment_id": 64133739, "body": "Oh i see... actually if you check the image i uploaded it was meant to be a 3/2=1.5    It was a typo error."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468444835, "post_id": 38360504, "comment_id": 64136123, "body": "@Gato Mazzei Do not expect the links to off-site URLs in a post are used.  Post relevant data here."}], "tags": [], "owner": {"reputation": 2020, "user_id": 1433712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2be98543dfefb8fbc4c9560de093c34c?s=128&d=identicon&r=PG", "display_name": "Alden", "link": "https://stackoverflow.com/users/1433712/alden"}, "is_accepted": true, "score": 0, "last_activity_date": 1468439413, "creation_date": 1468439413, "answer_id": 38360504, "question_id": 38360373, "link": "https://stackoverflow.com/questions/38360373/composition-of-pow-functions-in-c/38360504#38360504", "title": "Composition of &quot;pow&quot; functions in C", "body": "<p>It is ok to use the <code>pow</code> function in this case.</p>\n\n<p>You are receiving an error because your outer <code>pow</code> functions have three arguments each, when <code>pow</code> only accepts two arguments.</p>\n\n<pre><code>pow( (pow(v[0]-v[3], 2)+pow( v[1]-v[4], 2)+pow( v[2]-v[5], 2)), -1,5)\n</code></pre>\n\n<p>simplifies to </p>\n\n<pre><code>pow(some_number, -1, 5)\n</code></pre>\n\n<p>So this needs to be fixed so that <code>pow</code> has a base and an exponent only.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468439864, "post_id": 38360518, "comment_id": 64133658, "body": "That fixed it. Thanks! Stupid typo..."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1468440228, "post_id": 38360518, "comment_id": 64133859, "body": "Note that you can simplify <code>pow(n, 2)</code> as <code>double sqr(n) { return n * n; }</code>, and then you get <code>pow(sqr(v[0] - v[3]) + sqr(v[1] - v[4]) + sqr(v[2] - v[5])), -1.5)</code>. Also note that <code>pow(n, -1.5)</code>is equivalent to <code>1.0 &#47; (n * sqrt(n))</code>."}], "tags": [], "owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "is_accepted": false, "score": 2, "last_activity_date": 1468439468, "creation_date": 1468439468, "answer_id": 38360518, "question_id": 38360373, "link": "https://stackoverflow.com/questions/38360373/composition-of-pow-functions-in-c/38360518#38360518", "title": "Composition of &quot;pow&quot; functions in C", "body": "<p>Change all <code>-1,5</code> to <code>-1.5</code>. I assume you are trying to calculate powers to 3/2.</p>\n"}], "owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1468441767, "accepted_answer_id": 38360504, "answer_count": 2, "score": -1, "last_activity_date": 1489099675, "creation_date": 1468438974, "last_edit_date": 1489099675, "question_id": 38360373, "link": "https://stackoverflow.com/questions/38360373/composition-of-pow-functions-in-c", "closed_reason": "Not suitable for this site", "title": "Composition of &quot;pow&quot; functions in C", "body": "<p>I am trying to integrate a couple of equations, but the program fails to compile. The error message that appears says: \"too many arguments to function pow\" </p>\n\n<p>I will show the problematic part of the code and then make two specific questions.</p>\n\n<pre><code> #include &lt;stdio.h&gt; \n #include &lt;math.h&gt;\n\n\n struct Par{\n   double gamma1, gamma2;\n } aa;\n\n\n\n void ecuaciones(int n, double v[], double dv[], double t){\n dv[0]=v[6]   ; \n\n dv[1]=v[7]   ;\n\n dv[2]=v[8]   ;\n\n dv[3]=v[9]   ; \n\n dv[4]=v[10]   ; \n\n dv[5]=v[11]   ; \n\n dv[6]= aa.gamma1*(v[3]-v[0])*pow( (pow(v[0]-v[3], 2)+pow( v[1]-v[4], 2)+pow( v[2]-v[5], 2)), -1,5)  ; \n\n dv[7]= aa.gamma1*(v[4]-v[1])*pow( (pow(v[0]-v[3], 2)+pow( v[1]-v[4], 2)+pow( v[2]-v[5], 2)), -1,5)    ; \n\n dv[8]= aa.gamma1*(v[5]-v[2])*pow( (pow(v[0]-v[3], 2)+pow( v[1]-v[4], 2)+pow( v[2]-v[5], 2)), -1,5)   ; \n\n dv[9]=  -aa.gamma2*(v[3]-v[0])*pow( (pow(v[0]-v[3], 2)+pow( v[1]-v[4], 2)+pow( v[2]-v[5], 2)), -1,5)  ; \n\n dv[10]=  -aa.gamma2*(v[4]-v[1])*pow( (pow(v[0]-v[3], 2)+pow( v[1]-v[4], 2)+pow( v[2]-v[5], 2)), -1,5)  ; \n\n dv[11]=  -aa.gamma2*(v[5]-v[2])*pow( (pow(v[0]-v[3], 2)+pow( v[1]-v[4], 2)+pow( v[2]-v[5], 2)), -1,5) ; \n</code></pre>\n\n<p>So... the problem is in the dv\u00b4s from 6 to 11. The questions are the following:</p>\n\n<p>Is it ok to use the \"pow\" function in this case or is it just defined for constant bases? \nIn case the answer is yes (which im almost sure it is), then the following doubt appears:\nHow can i compose a pow function with another one?</p>\n\n<p>For the sake of clarity, this is what i want to express using a composition of \"pow\" functions: <img src=\"https://i.stack.imgur.com/o9B5I.gif\" alt=\"enter image description here\"></p>\n\n<p>Note that there\u00b4s at least one way to go around this problem: that is to write the squared terms from the base in the form A*A= A squared  instead of using pow. Given the fact that the base could be raised to a non-integer power, my opinion is that the general case solution is still very important.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1468435354, "post_id": 38359407, "comment_id": 64131266, "body": "<code>s1 != &#39;\\0&#39;</code> does not mean what you think it means.  It looks like you want <code>s1[i] != &#39;\\0&#39;</code>.  Similarly with s2."}, {"owner": {"reputation": 21, "user_id": 6110311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f598da25f1ba91acb3ab973ca7a117a?s=128&d=identicon&r=PG&f=1", "display_name": "Munchlaxx", "link": "https://stackoverflow.com/users/6110311/munchlaxx"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468435768, "post_id": 38359407, "comment_id": 64131520, "body": "What&#39;s the difference between the two? They look the same. I&#39;m trying to run the loop until it reaches the \\0 character at the end."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468435954, "post_id": 38359407, "comment_id": 64131624, "body": "The fact that yours does not depend on the iteration variable, <code>i</code>, should be a big red flag.  The difference is that yours compares the <i>pointer</i> <code>s1</code> with &#39;\\0&#39; whereas mine compares one of the characters in the array to which <code>s1</code> points."}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 1, "creation_date": 1468435958, "post_id": 38359407, "comment_id": 64131627, "body": "<code>s1</code> is a pointer to a <code>char</code>, <code>s1[i]</code> is a character in your string."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1468435390, "creation_date": 1468435390, "answer_id": 38359445, "question_id": 38359407, "link": "https://stackoverflow.com/questions/38359407/trouble-with-with-concatenating-two-strings-in-to-one/38359445#38359445", "title": "Trouble with with concatenating two strings in to one", "body": "<p>The problem is in these lines:</p>\n\n<pre><code>for (j = i; s2 != '\\0'; ++j)\n  s1[j] = s2[j];\n</code></pre>\n\n<p>Here <code>j</code> is not zero, so you start indexing in <code>s2</code> at a non-zero index, possible even running out of bounds.</p>\n\n<p>But that's only <em>one</em> problem. The second problem is the condition of the loop, it will <em>never</em> be false leading to an infinite loop.</p>\n\n<p>The first loop has the same problem with the loop condition.</p>\n\n<p>As for <em>why</em> the loop condition is wrong, the character <code>'\\0'</code> is equal to zero which is also on most systems equal to <code>NULL</code>. So you are effectively checking if e.g. <code>s1 != NULL</code>. Since both strings are compile-times arrays the pointers passed to the functions will never bel null pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 817, "user_id": 4526336, "user_type": "registered", "accept_rate": 48, "profile_image": "https://lh5.googleusercontent.com/-BO8B82i2_3s/AAAAAAAAAAI/AAAAAAAAADE/rFZk81Re8II/photo.jpg?sz=128", "display_name": "Brydon Gibson", "link": "https://stackoverflow.com/users/4526336/brydon-gibson"}, "is_accepted": false, "score": 0, "last_activity_date": 1468436546, "creation_date": 1468436546, "answer_id": 38359730, "question_id": 38359407, "link": "https://stackoverflow.com/questions/38359407/trouble-with-with-concatenating-two-strings-in-to-one/38359730#38359730", "title": "Trouble with with concatenating two strings in to one", "body": "<p>There are a few issues, mainly with the condition in the for loops:</p>\n\n<pre><code>for (i = 0; s1 != '\\0'; ++i)\n</code></pre>\n\n<p>unless the string is null, this will never be true.</p>\n\n<p>What you want to put instead is</p>\n\n<pre><code>for (i = 0; s1[i] != '\\0'; ++i)\n</code></pre>\n\n<p>this checks if the character you're looking at is the null terminating char, which is probably what you wanted.</p>\n\n<p>The second loop is also a problem.</p>\n\n<pre><code>for (j = i; s2 != '\\0'; ++j)\ns1[j] = s2[j];\n</code></pre>\n\n<p>You're starting s2 at j, not at zero</p>\n\n<pre><code>for (j = 0; s2[j] != '\\0'; ++j)\ns1[i + j] = s2[j];\n</code></pre>\n\n<p>This walks you through s2, adding s2[0] to s1[i], where s1[i] is the null character from your last for loop. Then you increment j, and then s1[i+1] becomes s2[1], and so on.</p>\n\n<p><strong>Additionally:</strong></p>\n\n<p>Appending the null character can (possibly) be done as :</p>\n\n<pre><code>for (j = 0; s2[j-1] != '\\0'; ++j)\ns1[i + j] = s2[j];\n</code></pre>\n\n<p>if you know FOR SURE that the character before s2 is not null, this can be done by declaring:</p>\n\n<pre><code>char array1[MAX_SZ * 2];\nchar placeholder = 0xff\nchar array2[MAX_SZ];\n</code></pre>\n\n<p>if that didn't make sense, ignore it too and append the null char the way you were doing it before</p>\n"}], "owner": {"reputation": 21, "user_id": 6110311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f598da25f1ba91acb3ab973ca7a117a?s=128&d=identicon&r=PG&f=1", "display_name": "Munchlaxx", "link": "https://stackoverflow.com/users/6110311/munchlaxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468440246, "creation_date": 1468435200, "last_edit_date": 1468440246, "question_id": 38359407, "link": "https://stackoverflow.com/questions/38359407/trouble-with-with-concatenating-two-strings-in-to-one", "title": "Trouble with with concatenating two strings in to one", "body": "<p>I need to write a program that concatenates two strings in to the first string. I can't use a third parameter to hold the new string. When I run the program I get no output, so I'm pretty sure the problem is in my function that concatenates the two strings.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_SZ 81\n\nint concatString(char s1[], char s2[]); // concatenates s2 onto s1, returns length of s1\nint getString(char c[], int len);\n\nmain(void)\n{\n    char array1[MAX_SZ * 2];\n    char array2[MAX_SZ];\n    int string1 = 0;\n    int string2 = 0;\n    int concat = 0;\n\n    printf(\"Please String # 1 up to 80 characters long:\\n\");\n    string1 = getString(array1, MAX_SZ);\n    printf(\"Please enter String #2 up to 80 characters long:\\n\");\n    string2 = getString(array2, MAX_SZ);\n\n    concat = concatString(array1, array2);\n\n    printf(\"You entered \\\"%s\\\" (length = %i)\\n\", array1, concat);\n\n    return 0;\n}\n\nint getString(char c[], int len)\n{\n    int i = 0;\n    char d = 0;\n    while (d != '\\n' &amp;&amp; i &lt; len)\n    {\n        d = getchar();\n        c[i++] = d;\n    }\n\n    c[--i] = '\\0';\n    return (i);\n}\n\nint concatString(char s1[], char s2[])\n{\n  int i, j;\n\n  for (i = 0; s1 != '\\0'; ++i)\n    s1[i] = s1[i];\n\n  for (j = i; s2 != '\\0'; ++j)\n    s1[j] = s2[j];\n\n  s1 [i + j] = '\\0';\n  return (i + j);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1468433348, "post_id": 38358830, "comment_id": 64130089, "body": "But you know that there are some things relevant to whole files, &quot;interactions&quot; between source files, and whole programs too, in the standard? Parts of source code files do not exist in their own vacuum."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1468433403, "post_id": 38358830, "comment_id": 64130122, "body": "What is the point of it?"}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1468433651, "post_id": 38358830, "comment_id": 64130272, "body": "@EugeneSh. -- the idea is to use the compiler to enforce standard compliance.  Even if it&#39;s not feasible to overhaul all of the file&#39;s dependencies to conform to C90 now, it would be useful to be able to assert that the source file under development doesn&#39;t use language constructs unsupported by the old standard."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1468434762, "post_id": 38358830, "comment_id": 64130930, "body": "If you require C90 compliance then it is in your best interest to get there completely and as soon as possible.  The headers used by a given source file are not a separable piece whose compliance you can ignore -- they affect the interpretation and possibly the language conformance of the rest of the file.  The sooner you bite the bullet and make everything conform, the less work that task will take."}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468434978, "post_id": 38358830, "comment_id": 64131059, "body": "Wouldn&#39;t source that is C99 compliant automagically be C90 compliant?"}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468435073, "post_id": 38358830, "comment_id": 64131103, "body": "@Great.And.Powerful.Oz -- I think you&#39;ve got that the other way around.  Code that&#39;s C99 compliant may use language constructs and features that aren&#39;t present or allowed in C90."}, {"owner": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468435168, "post_id": 38358830, "comment_id": 64131159, "body": "@JackO&#39;Reilly, of course. ahh, wait, durrrr. Of course. Got it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468436936, "post_id": 38358830, "comment_id": 64132162, "body": "Pay no attention to the man behind the curtain.  @Great.And.Powerful.Oz."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1738, "user_id": 5477536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14649f2805928d4ab23ab0dafa475553?s=128&d=identicon&r=PG&f=1", "display_name": "GreatAndPowerfulOz", "link": "https://stackoverflow.com/users/5477536/greatandpowerfuloz"}, "edited": false, "score": 0, "creation_date": 1468440747, "post_id": 38358830, "comment_id": 64134137, "body": "@Great.And.Powerful.Oz: There are incompatibilities, resp. clarifications in  C99 compared to mideval C (more for ancient C). And there might be problems arising from passing C99 constructs to the older version. Briefly: that cannot be answered without a full review."}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468433544, "post_id": 38358901, "comment_id": 64130204, "body": "An alternative solution would be to ensure all code compiles with the older language standard, and just use that.   That means converting the headers to avoid C99 features."}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468433562, "post_id": 38358901, "comment_id": 64130216, "body": "Thanks for the answer.  I considered splitting the file into two, but won&#39;t the file with the stricter compliance still need to include the same headers and run into the same problem?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468433688, "post_id": 38358901, "comment_id": 64130304, "body": "@Peter Sure, but if you have to edit the code to comply with either older or newer standard it seems counterproductive going forward to aim for the older."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468433839, "post_id": 38358901, "comment_id": 64130393, "body": "@Jack O&#39;Reilly Maybe. That depends on what headers are needed by either of the new files. I&#39;d say that going for making all the code compile with the same language standard is the most sane way forward that will cause the fewest headaches going forward. Including fixing your headers if you insist on the older standard."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1468433863, "post_id": 38358901, "comment_id": 64130404, "body": "@Jesper - if the requirement is to build compilation units as C90 (e.g. to maintain backward compatibility so it is possible to build on a system with no C99 compiler) then the requirement becomes &quot;avoid C99 features&quot;, not &quot;update to newer language standard&quot;."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468434059, "post_id": 38358901, "comment_id": 64130511, "body": "@Peter Right. But C90 is 26 years old by now, so maybe OP should reconsider that requirement and go for C99 (or even C11) instead ;-)"}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468434379, "post_id": 38358901, "comment_id": 64130704, "body": "@JesperJuhl if only!  This requirement wasn&#39;t my idea."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1468434462, "post_id": 38358901, "comment_id": 64130768, "body": "@Jesper - The OP has said he needs to maintain C90 compliance.   We don&#39;t know if that requirement is an arbitrary choice on his part, or something that is beyond his control.   If it is beyond his control, a suggestion to update to C99 is useless, and options to maintain C90 compatibility are needed."}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "edited": false, "score": 0, "creation_date": 1468434604, "post_id": 38358901, "comment_id": 64130843, "body": "The problem with splitting is when it comes to header files with class/method templates for which one cannot create separate compilation units..."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 3, "last_activity_date": 1468434696, "last_edit_date": 1468434696, "creation_date": 1468433350, "answer_id": 38358901, "question_id": 38358830, "link": "https://stackoverflow.com/questions/38358830/apply-language-standard-to-just-part-of-a-source-file/38358901#38358901", "title": "Apply language standard to just part of a source file?", "body": "<p>No. You cannot build a file (compilation unit) as partly one language standard and partly another.</p>\n\n<p>What you <em>can</em> do however is split the file into two files and compile each of them using different language standards (just be sure that it is then still well defined to link both object files afterwards).</p>\n\n<p>A better solution would be to ensure that <em>all</em> the code complies with the newer or older language standard and then just use that.</p>\n"}, {"comments": [{"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468436635, "post_id": 38359353, "comment_id": 64132001, "body": "Marked this as accepted since it solves my problem directly (to warn / error on compatibility issues for arbitrary sections of code).  Apologies to Jesper Juhl, whose answer technically addresses the question as asked more directly."}, {"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468436881, "post_id": 38359353, "comment_id": 64132128, "body": "An additional note: ironically, this only theoretically solves my problem, as the warning flag noted here is only present for GCC 5 and beyond -- sadly unavailable on my platform.  Still, one could enable the warning and assert compliance by testing a compile with a newer GCC."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1468438312, "post_id": 38359353, "comment_id": 64132838, "body": "@JackO&#39;Reilly: GCC 5 will probably arrive on your platform pretty soon."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 3, "last_activity_date": 1468434987, "creation_date": 1468434987, "answer_id": 38359353, "question_id": 38358830, "link": "https://stackoverflow.com/questions/38358830/apply-language-standard-to-just-part-of-a-source-file/38359353#38359353", "title": "Apply language standard to just part of a source file?", "body": "<p>If you want to make sure your code is C90 compatible while still relying on headers that use C99, you can enable the GCC warning flag <code>-Wc90-c99-compat</code>.  This allows you to use C99 features, but emits a warning wherever you use features not available in C90.  To avoid generating these warnings in your header files (which are presumably correct), enable the warning using a pragma, after you include the files.</p>\n\n<p>This will basically achieve what you want.  The warnings will only be emitted for the code you specify.</p>\n\n<pre><code>#include \"myheader.h\"\n\n#pragma GCC diagnostic warning \"-Wc90-c99-compat\"\n\nvoid func(void) { ... }\n</code></pre>\n\n<p>A stricter version would be to use:</p>\n\n<pre><code>#pragma GCC diagnostic error \"-Wc90-c99-compat\"\n</code></pre>\n\n<p>As far as I know, Clang is mostly compatible, but MSVC doesn't really support C99 that well to begin with so you're on your own.</p>\n"}], "owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 38359353, "answer_count": 2, "score": 1, "last_activity_date": 1468434987, "creation_date": 1468433079, "question_id": 38358830, "link": "https://stackoverflow.com/questions/38358830/apply-language-standard-to-just-part-of-a-source-file", "title": "Apply language standard to just part of a source file?", "body": "<p>Is it possible to enforce a C or C++ language standard for just part of a source file?  I want to ensure that my source file is C90 compliant, but it depends on some headers that require C99.  The compliance of those headers isn't important to me right now (I can compile with C99 for the time being), but I want to minimize effort required to port my code to a more restrictive platform in the future.</p>\n\n<p>In short, I want a language standard to apply to the entire file except for the included headers.  Given how header inclusion works in C and C++, I figure that the general problem is to apply a language standard to an arbitrary portion of a given source file.</p>\n\n<p>I'm working with GCC in particular, but I'm also curious if this is possible with other compilers (msvc, clang).</p>\n"}, {"tags": ["c", "user-interface", "command-line-interface", "ncurses", "curses"], "answers": [{"tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 1, "last_activity_date": 1468513232, "last_edit_date": 1468513232, "creation_date": 1468443728, "answer_id": 38361650, "question_id": 38358810, "link": "https://stackoverflow.com/questions/38358810/simple-text-gui-tui-using-ncurses-and-c-to-display-system-info/38361650#38361650", "title": "Simple Text GUI (TUI) Using NCurses and C to Display System Info", "body": "<p>The idea with the pipe is good and simple, anything else would lack at least one of \"good and simple\", most likely both. But your other question is about the availability of certain system informations. Well, these informations are wildly dispersed and the exact place depends on the operating system actually in use.</p>\n\n<p>For the common, non-specialized Linux system: for the filesystem it is <code>/etc/mtab</code> (and use <code>statfs()</code> for the details) and many system informations are in <code>/proc</code>. If you need more, it gets complicated.</p>\n\n<p>It is already quite complicated even if you want to build a simplified version of <code>df</code> for example (original code of <code>df</code> in <code>$COREUTILS/src/df.c</code>). Instead of just running <code>df</code> and read from a pipe, you have to do</p>\n\n<ul>\n<li>read <code>/etc/mtab</code> and find the mount points (system might not have <code>/etc/mtab</code> although it should)</li>\n<li>run <code>statfs()</code> on every mountpoint and print the result</li>\n</ul>\n\n<p>you'll need over 100 error-prone lines of C-code for this, even if you skip everything fancy. And that for printing the filesystem alone.</p>\n\n<p>No, just read the output of the old and well tested programs from a pipe, it's the easiest way.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>You use the full shell if you use the pipe. That means that you can use all other tools, too.</p>\n\n<p>To make it simpler to test, here is a simplified version without ncurses (making it much more complicated ;-) ), just for playing at the commandline.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define BUF_SIZE 256\n\n// ALL CHECKS OMMITTED!\n\nchar *sub_exec(const char *command)\n{\n  char buf[BUF_SIZE];\n  char *ret;\n  size_t mem_alloc, mem_needed;\n\n  ret = malloc(4 * BUF_SIZE * sizeof(char));\n  // or use calloc or set \\0 manually\n  memset(ret, '\\0', 4 * BUF_SIZE);\n  // memory allocated\n  mem_alloc = 4 * BUF_SIZE;\n  // memory needed\n  mem_needed = 0;\n  // open the pipe read-only\n  FILE *out_pipe = popen(command, \"r\");\n  // until end of the output of the pipe (EOF)\n  while (!feof(out_pipe)) {\n    // read a chunk of the output\n    if (fgets(buf, BUF_SIZE, out_pipe) != NULL) {\n      mem_needed += BUF_SIZE;\n      if (mem_alloc &lt; mem_needed) {\n    // no fancy algorithms\n    ret = realloc(ret, mem_needed + 4 * BUF_SIZE);\n    mem_alloc = mem_needed * 2;\n      }\n      // and conatenate it to the result\n      strncat(ret, buf, BUF_SIZE);\n    }\n  }\n  pclose(out_pipe);\n  // You may or may not readjust the memory used\n  // ret = realloc(ret, strlen(ret) + 1);\n  return ret;\n}\n\nint main(int argc, char **argv)\n{\n  char *str_from_pipe;\n  if (argc &lt; 2)\n    fprintf(stderr, \"Usage: %s command\\n\", argv[0]);\n\n  str_from_pipe = sub_exec(argv[1]);\n  printf(\"%s\\n\", str_from_pipe);\n\n  free(str_from_pipe);\n\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>You can do simple things here, like</p>\n\n<pre><code>./readpipe \"cat win*c | tr -d '\\015' | perl -0777 -pe 's{/\\*.*?\\*/}{}gs' | indent -\"\n</code></pre>\n\n<p>(concatenate all C-files, strip the <code>\\r</code>s, strip most comments and run it through <code>indent(1)</code>)</p>\n\n<p>Or with <code>df</code>. Say you want the file systems with actual data in it, not <code>tempfs</code> or alike, so:</p>\n\n<pre><code>./readpipe \"df -P -h -t ext4\"\n</code></pre>\n\n<p>That prints here:</p>\n\n<pre><code>Filesystem      Size  Used Avail Use% Mounted on\n/dev/sda2        48G   33G   14G  71% /\n/dev/sda3       861G  761G   56G  94% /home\n</code></pre>\n\n<p>(quite full, as it seems)</p>\n\n<p>You can use it as it is or massage it further:</p>\n\n<pre><code>./readpipe \"df -h -t ext4 --output=target,fstype,size,used,avail|awk '{if(NR&gt;1)print}'\"\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>/          ext4   48G   33G   14G\n/home      ext4  861G  761G   56G\n</code></pre>\n\n<p>Caveat: </p>\n\n<pre><code>./readpipe \"df -h -t ext4 --output=target,fstype,size,used,avail|  sed -n '1!p'\"\n</code></pre>\n\n<p>does not work, you need to exchange the kind of quotes (but it is not always that simple)</p>\n\n<pre><code>./readpipe 'df -h -t ext4 --output=target,fstype,size,used,avail |  sed -n \"1!p\"'\n</code></pre>\n\n<p>To be able to split the entries with e.g.: <code>strtok(3)</code> replace all whitespace with single tabs</p>\n\n<pre><code>./readpipe 'df -h -t ext4 --output=target,fstype,size,used,avail |  sed -n \"1!p\" | sed -e \"s/[ ]\\+/\\t/g\"'\n</code></pre>\n\n<p>(yes, there are much more elegant ways to do it, but it is good enough)</p>\n\n<p>More useful information in the files/directories about the CPU(s)</p>\n\n<pre><code>/sys/devices/system/cpu/cpu*/cpufreq/\n/sys/devices/system/cpu/cpu*/cache/\n</code></pre>\n\n<p>Or by <code>lscpu</code>. There are many <code>ls*</code> programs that are useful, like <code>lspci</code>, <code>lsusb</code>, <code>lskat</code>&hellip;no, wait, that's something different, and not to forget <code>lsblk</code> (lists the block devices incl. partitions if avail.). A quite complete list of the installed hardware (some info need root-rights but it is already quite extensive without) is available with the help of <code>lshw</code> and <code>uname</code> is for information about the OS, also: <code>free</code> for the memory consumption, and many, many more. Most, if not all allow for some kind of formatting, see the respective manpages for the gory details.</p>\n\n<p>If you tell me what you you need, I can tell you where to find it (he says boldly ;-) ). Just ask in a comment below, I'll add it.</p>\n"}], "owner": {"reputation": 1525, "user_id": 3794944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/535b1fee1a0aa4a92c0c762d1c0d9628?s=128&d=identicon&r=PG&f=1", "display_name": "Funsaized", "link": "https://stackoverflow.com/users/3794944/funsaized"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "accepted_answer_id": 38361650, "answer_count": 1, "score": 0, "last_activity_date": 1468513232, "creation_date": 1468433019, "last_edit_date": 1468433312, "question_id": 38358810, "link": "https://stackoverflow.com/questions/38358810/simple-text-gui-tui-using-ncurses-and-c-to-display-system-info", "title": "Simple Text GUI (TUI) Using NCurses and C to Display System Info", "body": "<p>I am just beginning to toy around with combining ncurses and C to develop a very minimal TUI. The purpose of the TUI is to greet users with a basic login/welcome screen. The goal would be to display basic system information like the operating system, available memory, IP address, etc. Nothing beyond read-only. </p>\n\n<p>What would be the best way to go about doing this? The part I'm struggling with is interfacing the shell commands like <code>df</code>, <code>ls</code>, <code>ifconfig</code>, etc with variables that I can then display or print in ncurses and C. I know something like this can be done, as well as calling the system command with a string, but this seems somewhat bulky:</p>\n\n<pre><code>#include &lt;ncurses.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void) {\n    FILE *pp;\n\n    initscr();\n    cbreak();\n    if ((pp = popen(\"df\", \"r\")) != 0) {\n        char buffer[BUFSIZ];\n        while (fgets(buffer, sizeof(buffer), pp) != 0) {\n            addstr(buffer);\n        }\n        pclose(pp);\n    }\n    getch();\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Are there any methods to execute a command in the command line from within a C program and then selectively access the output of that command for later display? Or is this information generally stored somewhere in a parseable file on the machine? I'm new to trying to pull system information/use the command line in a \"TUI\" sense and any help would be appreciated. Thanks so much in advance!</p>\n"}, {"tags": ["c", "linux", "gcc", "header-files"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1468439394, "post_id": 38358700, "comment_id": 64133365, "body": "<code>man gcc</code>, search for <code>-I</code>"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468433101, "post_id": 38358778, "comment_id": 64129945, "body": "like this - gcc tst2.c -o tst2 -I/usr/src/linux-headers-3.13.0-32/include/linux"}, {"owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "reply_to_user": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468433136, "post_id": 38358778, "comment_id": 64129970, "body": "Put the location arguments before the source to be compiled."}, {"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468433506, "post_id": 38358778, "comment_id": 64130182, "body": "this - gcc -I/usr/src/linux-headers-3.13.0-32/include/linux tst2.c -o tst2"}], "tags": [], "owner": {"reputation": 695058, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 1, "last_activity_date": 1468432913, "creation_date": 1468432913, "answer_id": 38358778, "question_id": 38358700, "link": "https://stackoverflow.com/questions/38358700/how-to-add-a-new-header-file-location-in-the-compiler/38358778#38358778", "title": "How to add a new header file location in the compiler", "body": "<p>Just as the man page says, follow the argument directly with the path.</p>\n\n<pre><code>gcc ... -I/path/to/headers ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1468433955, "creation_date": 1468433955, "answer_id": 38359073, "question_id": 38358700, "link": "https://stackoverflow.com/questions/38358700/how-to-add-a-new-header-file-location-in-the-compiler/38359073#38359073", "title": "How to add a new header file location in the compiler", "body": "<p>You can use the <code>-I</code> option:</p>\n\n<pre><code>gcc -o foobar -I/path/to/headers -I/path/to/other foobar.c\n</code></pre>\n\n<p>You can also use the <code>C_INCLUDE_PATH</code> environment variable. You could set this up in your makefile:</p>\n\n<pre><code>C_INCLUDE_PATH = /path/to/headers:/path/to/other\n\nfoobar: foobar.c\n    gcc -o foobar foobar.c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 0, "last_activity_date": 1468439291, "last_edit_date": 1495540286, "creation_date": 1468434133, "answer_id": 38359131, "question_id": 38358700, "link": "https://stackoverflow.com/questions/38358700/how-to-add-a-new-header-file-location-in-the-compiler/38359131#38359131", "title": "How to add a new header file location in the compiler", "body": "<p>You can either add a <code>-I</code> option to the command line to tell the compiler to look there for header files. If you have header files in include/ directory, then this command should work for you.</p>\n\n<pre><code>gcc -Iinclude/\n</code></pre>\n\n<p>There shouldn't be any space between <code>-I</code> compiler option and directory location.</p>\n\n<p>If, you are using makefile, you can include this option in CFLAGS macro in your makefile.</p>\n\n<pre><code>CFLAGS = -Iinclude/ -c -Wall\n</code></pre>\n\n<p>OR</p>\n\n<p>You can include header files using #include \"../include/header.h\".</p>\n\n<p>Have a look at this <a href=\"https://stackoverflow.com/questions/38162070/include-header-file-in-different-directory-in-c/38162515#38162515\">answer</a>.</p>\n"}], "owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1501410540, "creation_date": 1468432675, "last_edit_date": 1501410540, "question_id": 38358700, "link": "https://stackoverflow.com/questions/38358700/how-to-add-a-new-header-file-location-in-the-compiler", "title": "How to add a new header file location in the compiler", "body": "<p>Various resources have mentioned about the <code>-I</code> option of gcc , but have not mentioned its syntax. I want to add a header file which is not present in the  default directory which are taken into consideration by the compiler for adding the header files at the compile time. How can I achieve it?</p>\n"}, {"tags": ["c", "gcc", "x86", "branch-prediction", "likely-unlikely"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1468431895, "post_id": 38358401, "comment_id": 64129156, "body": "I think the start of the this question distracts from what you&#39;re really asking, because you want to know how branch prediction works in the case that a speculatively executed branch gets flushed, right?"}, {"owner": {"reputation": 79, "user_id": 3224083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e5671877d682235606c3b792d1e5769?s=128&d=identicon&r=PG&f=1", "display_name": "user3224083", "link": "https://stackoverflow.com/users/3224083/user3224083"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1468432207, "post_id": 38358401, "comment_id": 64129345, "body": "Not really. The decision to whether or not to flush the would depend on the evaluation, isn&#39;t that correct ? My question was what if the evaluation couldn&#39;t be completed. What is the state of the system in that case ?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1468434340, "post_id": 38358401, "comment_id": 64130681, "body": "Yes that&#39;s what I meant. If the entire branch has the be flushed, not just code after it. It&#39;s not at all related to likely/unlikely, and not even really to exceptions either (you could just corrupt the predictors, an exception is so expensive that taking a hit to bp accuracy doesn&#39;t matter) - when this really matters is when you&#39;re speculating past several branches and you mispredict the first one. There are several solutions for that."}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 4, "last_activity_date": 1468444187, "last_edit_date": 1495535648, "creation_date": 1468443807, "answer_id": 38361669, "question_id": 38358401, "link": "https://stackoverflow.com/questions/38358401/likely-unlikely-macros-in-the-linux-kernel-with-a-segmentation-fault/38361669#38361669", "title": "likely()/unlikely() macros in the Linux kernel with a segmentation fault", "body": "<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\"><code>__builtin_expect</code></a> (used in <a href=\"https://stackoverflow.com/a/18589638/224132\">the definition of the likely/unlikely macros</a>) doesn't generate actual code to evaluate either of its arguments.  All it does is tell the compiler what result to expect <em>if</em> it were evaluated.</p>\n\n<p>It might confuse the optimizer if you tell it that <code>*(int*)NULL</code> is usually <code>13</code>, but (barring compiler bugs) it won't segfault the compiler, or produce code which segfaults at run-time.</p>\n\n<p><a href=\"https://stackoverflow.com/a/31133787/224132\">Another answer on the old question</a> has actual asm with/without the macro, showing that their effect is in how gcc lays out the code (e.g. putting the unlikely case off by itself, and the likely case in the fall-through not-taken side of a conditional branch where instruction-cache misses are less likely).</p>\n\n<hr>\n\n<p>This isn't quite a duplicate of <a href=\"https://stackoverflow.com/questions/109710/likely-unlikely-macros-in-the-linux-kernel-how-do-they-work-whats-their\">likely()/unlikely() macros in the Linux kernel - how do they work? What&#39;s their benefit?</a>, but you will find much more info about how these macros work and what their effect is on that Q&amp;A.</p>\n"}], "owner": {"reputation": 79, "user_id": 3224083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e5671877d682235606c3b792d1e5769?s=128&d=identicon&r=PG&f=1", "display_name": "user3224083", "link": "https://stackoverflow.com/users/3224083/user3224083"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "accepted_answer_id": 38361669, "answer_count": 1, "score": 1, "last_activity_date": 1475030565, "creation_date": 1468431667, "last_edit_date": 1475030565, "question_id": 38358401, "link": "https://stackoverflow.com/questions/38358401/likely-unlikely-macros-in-the-linux-kernel-with-a-segmentation-fault", "title": "likely()/unlikely() macros in the Linux kernel with a segmentation fault", "body": "<p>I have an understanding of how the likely()/unlikely() macros work and I also have an understanding of branch prediction. Unfortunately, I did not learn branch prediction in the context of high level programming.</p>\n\n<p>What I want to know is if the evaluation within the likely/unlikely macro results in a segmentation fault, how does that impact the branch prediction history or even the current outcome/pipeline.</p>\n\n<p>I fail to understand that if the validation of the prediction didn't complete, how do we know if it was a success or a failure ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1468430714, "post_id": 38358084, "comment_id": 64128468, "body": "Dereferencing by itself like <code>*p;</code> doesn&#39;t really do anything. What exactly are you going to do with the dereferenced pointer? Assign it to something else? Assign something else to it? The compiler needs to know the type to generate appropriate code."}, {"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 2, "creation_date": 1468430827, "post_id": 38358084, "comment_id": 64128539, "body": "You could <code>memcpy</code> the data wherever your void pointer is pointing into a variable. Not sure if that helps..."}, {"owner": {"reputation": 458, "user_id": 6344097, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b2ebf3bff8daa46caade2388685c8413?s=128&d=identicon&r=PG&f=1", "display_name": "Noam Rodrik", "link": "https://stackoverflow.com/users/6344097/noam-rodrik"}, "edited": false, "score": 0, "creation_date": 1468430838, "post_id": 38358084, "comment_id": 64128541, "body": "What will help you to dereference a void pointer? You usually can&#39;t tell how big it is unless its a char pointer and it ends with a \\0.  You can tell the system to extract n bytes with the memcpy and memset actions, but you don&#39;t need to dereference to do that."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1468431609, "post_id": 38358084, "comment_id": 64128997, "body": "You can use the fixed-size datatypes defined in <code>&lt;stdint.h&gt;</code>. E.g. the four byte datatype is <code>uint32_t</code>."}, {"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1468440214, "post_id": 38358084, "comment_id": 64133852, "body": "I don&#39;t think it is possible to give a meaningful answer to this question without knowing what you want to <i>do</i> with the data."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1468436293, "post_id": 38358270, "comment_id": 64131831, "body": "<code>unsigned char</code> would have some advantages with unknown data of an unknown source type.."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1468437634, "post_id": 38358270, "comment_id": 64132536, "body": "@chux, I tend to agree with you. Some think that it makes no difference for all practical purposes."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1468437678, "last_edit_date": 1468437678, "creation_date": 1468431185, "answer_id": 38358270, "question_id": 38358084, "link": "https://stackoverflow.com/questions/38358084/dereferencing-a-void-pointer-using-its-size-in-c/38358270#38358270", "title": "Dereferencing a void pointer using its size in C", "body": "<blockquote>\n  <p>Suppose I dont know the final datatype, however I know the size of datatype. Can I still dereference it using only the size(4 bytes) and not the datatype(not using int)??</p>\n</blockquote>\n\n<p>Since you cannot deduce or assume the data type, you can't dereference the pointer once to get the complete object. However, you can extract each byte and use it anyway you want.</p>\n\n<pre><code>void *ptr = call_a_function();\nunsigned char* cptr = (unsigned char*)ptr;\nfor (int i = 0; i &lt; num_bytes; ++i )\n{\n   unsigned char c = cptr[i];\n   // Use c\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 6566675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lDqPG.png?s=128&g=1", "display_name": "clarasoft-it", "link": "https://stackoverflow.com/users/6566675/clarasoft-it"}, "is_accepted": false, "score": 1, "last_activity_date": 1468445338, "creation_date": 1468445338, "answer_id": 38362007, "question_id": 38358084, "link": "https://stackoverflow.com/questions/38358084/dereferencing-a-void-pointer-using-its-size-in-c/38362007#38362007", "title": "Dereferencing a void pointer using its size in C", "body": "<p>In this case, the whole is not the sum of its parts. Casting not only provides the compiler with the size of the data but also how that data is to be interpreted. Suppose you get 4 bytes, this could be a string of three characters with a NULL byte or a signed integer, which could be encoded in big-endian or little-endian depending on the platform. So knowing the size is not sufficient to properly handle the data even if you could tell the compiler how many bytes to read/dereference. </p>\n"}], "owner": {"reputation": 31, "user_id": 6585680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UObTTYLHrlY/AAAAAAAAAAI/AAAAAAAAAOI/EavXUAPljow/photo.jpg?sz=128", "display_name": "Souradip Guha", "link": "https://stackoverflow.com/users/6585680/souradip-guha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "closed_date": 1468453309, "answer_count": 2, "score": 0, "last_activity_date": 1468483918, "creation_date": 1468430632, "last_edit_date": 1468483918, "question_id": 38358084, "link": "https://stackoverflow.com/questions/38358084/dereferencing-a-void-pointer-using-its-size-in-c", "closed_reason": "Needs details or clarity", "title": "Dereferencing a void pointer using its size in C", "body": "<p>I know that we cannot dereference a void pointer until and unless we typecast it.</p>\n\n<pre><code>void *ptr = call_a_function();\nprintf(\"%d\",*(int *)ptr);\n</code></pre>\n\n<p>This informs the datatype of element(in this case its integer) to the compiler so that it can dereference the amount of space required for it(in this case  its 4 bytes).</p>\n\n<p>Suppose I dont know the final datatype, however I know the size of datatype. Can I still dereference it using only the size(4 bytes) and not the datatype(not using int)??</p>\n\n<p>In other words is there a way to tell the compiler how many bytes of memory to read by providing the number of bytes to extract and not the datatype??</p>\n\n<p><strong>EDIT</strong> -  </p>\n\n<p>I needed to swap the contents of two void * pointers.  </p>\n\n<p>Got influenced by the regular way of swapping two values i.e storing the value of one pointer in a temporary variable and then proceed with swapping.  </p>\n\n<p>Was trying to attempt the same thing without knowing the datatype but only its size( since the function with this swap code accepts size of variable as one parameter ). However after reading the answers and comments, got to realize that I really dont need to dereference it. Probably <code>memcpy</code> is the correct way to go.</p>\n"}, {"tags": ["c", "arrays", "gcc", "multidimensional-array"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1468430486, "post_id": 38357987, "comment_id": 64128320, "body": "You&#39;ll be much better off using a fixed size array: <code>char shape[2][4]</code>"}, {"owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468430653, "post_id": 38357987, "comment_id": 64128433, "body": "I understand that works. But I am interested to know what I did wrong."}, {"owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468430727, "post_id": 38357987, "comment_id": 64128476, "body": "Also it would be more elegant this way."}, {"owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "edited": false, "score": 0, "creation_date": 1468431253, "post_id": 38357987, "comment_id": 64128775, "body": "BTW, I cannot make that happen, because at rotation I will be cycling the array backwards."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468432762, "post_id": 38357987, "comment_id": 64129724, "body": "Ok then: <code>char shape[4][4]</code>"}, {"owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468441817, "post_id": 38357987, "comment_id": 64134690, "body": "Sure nothing is impossible but would make the code more complex for no reason. I am just setting memory and using only that memory with pointers and height/width indexes, so no need for that."}, {"owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468441869, "post_id": 38357987, "comment_id": 64134718, "body": "I would need to make rotatory function and boundary checks more complicated since it matters where you start reading the array."}, {"owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468441968, "post_id": 38357987, "comment_id": 64134780, "body": "Maybe I will post the code below, I aim at making it as short as possible"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1468444564, "post_id": 38357987, "comment_id": 64135999, "body": "It&#39;ll be interesting to see your final result, but it&#39;s best not to post it here. If the code works, you can post it on <a href=\"http://codereview.stackexchange.com/\">code review</a> and ask for a review. OTOH, if you encounter difficulties while trying to implement it, you can start another question here on stack overflow. Best of luck!"}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "edited": false, "score": 1, "creation_date": 1468431451, "post_id": 38358291, "comment_id": 64128890, "body": "Aha! Thanks very much, I didn&#39;t know about this. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html</a>"}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "reply_to_user": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "edited": false, "score": 0, "creation_date": 1468431503, "post_id": 38358291, "comment_id": 64128930, "body": "@NajibGhadri yw :)"}], "tags": [], "owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "is_accepted": true, "score": 4, "last_activity_date": 1468433044, "last_edit_date": 1468433044, "creation_date": 1468431274, "answer_id": 38358291, "question_id": 38357987, "link": "https://stackoverflow.com/questions/38357987/initialization-of-multidimensional-pointers-with-different-dimensional-anonym-ar/38358291#38358291", "title": "Initialization of multidimensional pointers with different dimensional anonym arrays inline", "body": "<p>You're missing some <code>compound literals</code> and using the wrong type in the one you're using. Here is a small example of what you might want:</p>\n\n<pre><code>const Shape S_shape = {\n        2, /* height */\n        2, /* width */\n        (char *[]) { /* Compound literals, declaring an anonymous array of `char *` with static storage duration */\n                (char []) {0, 1}, /* Another compound literal, declaring a static storage duration for a `char []` that will be pointed by `char *[]` */\n                (char []) {1, 1} /* Same as above, this one the next (and last) element of `char *[]` */\n        }\n};\n</code></pre>\n\n<p>Without the comments (for readability):</p>\n\n<pre><code>const Shape S_shape = {\n        2,\n        2,\n        (char *[]) {\n                (char []) {0, 1},\n                (char []) {1, 1}\n        }\n};\n</code></pre>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html</a></p>\n"}], "owner": {"reputation": 154, "user_id": 6585695, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gVuaHwk_YCQ/AAAAAAAAAAI/AAAAAAAACVE/bbCku3ZW4JI/photo.jpg?sz=128", "display_name": "Najib", "link": "https://stackoverflow.com/users/6585695/najib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 38358291, "answer_count": 1, "score": 0, "last_activity_date": 1468433044, "creation_date": 1468430279, "last_edit_date": 1468431844, "question_id": 38357987, "link": "https://stackoverflow.com/questions/38357987/initialization-of-multidimensional-pointers-with-different-dimensional-anonym-ar", "title": "Initialization of multidimensional pointers with different dimensional anonym arrays inline", "body": "<p>I am having a noob problem.\nI am making tetris in c.\nI want to initialize a double pointer in a struct inline for every instance.\nThe width of the array differs, but it is defined in another variable.\nCode:</p>\n\n<pre><code>typedef struct {\n    char height, width;\n    char **shape;\n} Shape;\n\nconst Shape S_shape = {2,3, (char [][3]){{0,1,1},{1,1,0}}};\nconst Shape Z_shape = {2,3, (char [][3]){{1,1,0},{0,1,1}}};\nconst Shape T_shape = {2,3, (char [][3]){{0,1,0},{1,1,1}}};\nconst Shape L_shape = {2,3, (char [][3]){{0,0,1},{1,1,1}}};\nconst Shape ML_shape = {2,3, (char [][3]){{1,0,0},{1,1,1}}};\nconst Shape SQ_shape = {2,2, (char [][2]){{1,1},{1,1}}};\nconst Shape R_shape = {1,4, (char [][4]){{1,1,1,1}}};\n\nint main() {\n    return 0;\n}\n</code></pre>\n\n<p>It does not work. Here is the gcc error code:</p>\n\n<pre><code>    tetris.c:11:1: warning: initialization from incompatible pointer type [enabled by default]\n const Shape S_shape = {2,3, (char [][3]){{0,1,1},{1,1,0}}};\n ^\ntetris.c:11:1: warning: (near initialization for \u2018S_shape.shape\u2019) [enabled by default]\ntetris.c:12:1: warning: initialization from incompatible pointer type [enabled by default]\n const Shape Z_shape = {2,3, (char [][3]){{1,1,0},{0,1,1}}};\n ^\ntetris.c:12:1: warning: (near initialization for \u2018Z_shape.shape\u2019) [enabled by default]\ntetris.c:13:1: warning: initialization from incompatible pointer type [enabled by default]\n const Shape T_shape = {2,3, (char [][3]){{0,1,0},{1,1,1}}};\n ^\ntetris.c:13:1: warning: (near initialization for \u2018T_shape.shape\u2019) [enabled by default]\ntetris.c:14:1: warning: initialization from incompatible pointer type [enabled by default]\n const Shape L_shape = {2,3, (char [][3]){{0,0,1},{1,1,1}}};\n ^\ntetris.c:14:1: warning: (near initialization for \u2018L_shape.shape\u2019) [enabled by default]\ntetris.c:15:1: warning: initialization from incompatible pointer type [enabled by default]\n const Shape ML_shape = {2,3, (char [][3]){{1,0,0},{1,1,1}}};\n ^\ntetris.c:15:1: warning: (near initialization for \u2018ML_shape.shape\u2019) [enabled by default]\ntetris.c:16:1: warning: initialization from incompatible pointer type [enabled by default]\n const Shape SQ_shape = {2,2, (char [][2]){{1,1},{1,1}}};\n ^\ntetris.c:16:1: warning: (near initialization for \u2018SQ_shape.shape\u2019) [enabled by default]\ntetris.c:17:1: warning: initialization from incompatible pointer type [enabled by default]\n const Shape R_shape = {1,4, (char [][4]){{1,1,1,1}}};\n ^\ntetris.c:17:1: warning: (near initialization for \u2018R_shape.shape\u2019) [enabled by default]\n</code></pre>\n\n<p>Gcc: (Ubuntu 4.8.4-2ubuntu1~14.04.3) 4.8.4\nThanks!</p>\n\n<p><strong>SOLVED</strong>\n<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html</a></p>\n"}, {"tags": ["c", "physics", "differential-equations", "runge-kutta", "orbital-mechanics"], "comments": [{"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 1, "creation_date": 1468432733, "post_id": 38357974, "comment_id": 64129704, "body": "would doing <code>E = (...) &#47; (2 * pow(h, 2));</code> help?  Note the extra brackets"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 1, "creation_date": 1468432794, "post_id": 38357974, "comment_id": 64129747, "body": "Other than that, I recommend you learn to use a debugger, and step through the program execution yourself to see where the numbers are going wrong"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1468433804, "post_id": 38357974, "comment_id": 64130368, "body": "It&#39;s wasteful to use <code>pow()</code> to square numbers.  It&#39;s clearer and simpler to write <code>h * h</code> than to write <code>pow(h, 2)</code>.  Reserve <code>pow()</code> for large, non-integral, and / or variable exponents."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1468433993, "post_id": 38357974, "comment_id": 64130484, "body": "The first time you call <code>f()</code>, it returns the square root of a negative number, on subsequent calls the argument for <code>sqrt</code> is not a number."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1468438031, "post_id": 38357974, "comment_id": 64132702, "body": "Weather Vane called it; the first time through, <code>E</code> is  -2.11695e+105, and you&#39;re attempting to take the square root of  -7.08959e+80.  Either you need to be using complex numbers, or you need to review your equations."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1468438245, "post_id": 38357974, "comment_id": 64132802, "body": "Also, John Bollinger&#39;s advice is sound.  Instead of calls to <code>pow</code> everywhere, set up some temporary variables like <code>double h2 = h*h; double mu2 = mu * mu; double mu3 = mu2 * mu;</code>, etc., and use those in your equations.  Don&#39;t know about you, but I find <code>E = (mu3 * (e2 - 1))&#47;2*h2;</code> a <i>bit</i> easier to read.  Your code will also be a skosh faster without all those calls to <code>pow</code>."}], "owner": {"user_type": "does_not_exist", "display_name": "user6585605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468430223, "creation_date": 1468430223, "question_id": 38357974, "link": "https://stackoverflow.com/questions/38357974/integrating-differential-equations-of-motion-for-orbit-in-runge-kutta-in-c", "title": "Integrating differential equations of motion for orbit in Runge Kutta in C", "body": "<p>I'm attempting to integrate the differential equations for planetary orbit using fourth order runge-kutta in C. The first equation that I attempted to integrate was for the position, dr/dt = sqrt((2/mu)*(E-(k/r)) - pow(l, 2)/(pow(mu, 2)*pow(r, 2))). The program compiles correctly but keeps on returning nan, I'm fairly new to C so I'm wondering why that could be.\nThe source code that I'm using is the following:</p>\n\n<pre><code>    double rk4 ( double t0, double u0, double dt, double f ( double t, double u ) ) \n    {\n\n\n    /* Parameters:\n\n    Input, double T0, the current time.\n\n    Input, double U0, the solution estimate at the current time.\n\n    Input, double DT, the time step.\n\n    Input, double F ( double T, double U ), a function which evaluates\n    the derivative, or right hand side of the problem.\n\n    Output, double RK4, the fourth-order Runge-Kutta solution estimate\n    at time T0+DT.\n*/\n    double f0;\n    double f1;\n    double f2;\n    double f3;\n    double t1;\n    double t2;\n    double t3;\n    double u;\n    double u1;\n    double u2;\n    double u3;\n     /*\n  Get four sample values of the derivative.\n*/\n  f0 = f ( t0, u0 );\n\n  t1 = t0 + dt / 2.0;\n  u1 = u0 + dt * f0 / 2.0;\n  f1 = f ( t1, u1 );\n\n  t2 = t0 + dt / 2.0;\n  u2 = u0 + dt * f1 / 2.0;\n  f2 = f ( t2, u2 );\n\n  t3 = t0 + dt;\n  u3 = u0 + dt * f2;\n  f3 = f ( t3, u3 );\n/*\n  Combine them to estimate the solution.\n*/\n  u = u0 + dt * ( f0 + 2.0 * f1 + 2.0 * f2 + f3 ) / 6.0;\n\n  return u;\n}\n</code></pre>\n\n<p>And my code is as follows:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;math.h&gt;\n    #include \"rk4.c\"\n\n    double f ( double t, double u );\n    double rk4 ( double t0, double u0, double dt, double f ( double t, double u ));\n\n    int main(void)\n    {\n    double t0 = 0, u0 = 1.0167103, dt = 0.01, E, l = 2.663e40, k = -1.32754125e20, mu = 5.9719821e24, G = 6.67408e-11, M = 1.989e30, h, e, u, t; \n\n    printf(\"%lf\\n\", rk4 ( t0, u0, dt, f));\n\n    return 0;\n    }\n\n    double f ( double t, double u ) \n    {\n    double E, l = 2.663e40, k = -1.32754125e20, u0 = 1.0167103, mu = 5.9719821e24, e = 0.0167, h;\n\n    h = l/mu;\n    E = ((pow(e, 2)*pow(mu, 3) - pow(mu, 3))/2*pow(h, 2));\n\n    return sqrt((2/mu)*(E-(k/u)) - pow(l, 2)/((pow(mu, 2))*(pow(u, 2))));\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468430548, "post_id": 38357899, "comment_id": 64128359, "body": "A description of what the code is supposed to achieve would be helpful (&quot;matrix rotation&quot; could mean many different things).  Sample input and expected vs. observed output would be very valuable.  An explanation of how the algorithm is intended to work, either in code comments or in prose, would be nice, too."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468432856, "post_id": 38357899, "comment_id": 64129782, "body": "As Jonathan has said, C doesn&#39;t support array assignment. But that&#39;s not really the issue. You&#39;re not assigning arrays. You&#39;re assigning pointers. That only copies the address of the allocated memory, not the data that you&#39;ve since stored there."}, {"owner": {"reputation": 1, "user_id": 6585665, "user_type": "registered", "profile_image": "https://graph.facebook.com/302967230036104/picture?type=large", "display_name": "Aditi Binnani", "link": "https://stackoverflow.com/users/6585665/aditi-binnani"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1468437151, "post_id": 38357899, "comment_id": 64132268, "body": "rotation in anti-clockwise direction such that a[0][0] becomes a[1][0] , a[0][1] becomes a[0][0] and so on @JohnBollinger"}, {"owner": {"reputation": 1, "user_id": 6585665, "user_type": "registered", "profile_image": "https://graph.facebook.com/302967230036104/picture?type=large", "display_name": "Aditi Binnani", "link": "https://stackoverflow.com/users/6585665/aditi-binnani"}, "edited": false, "score": 0, "creation_date": 1468437381, "post_id": 38357899, "comment_id": 64132389, "body": "m assigning the address that  arr1 is storing to arr ..And because it has access to the all the values using address of array, it must easily print the values ..The values are same , the address is same , just the pointer which is storing it has now a different name ..so, i dont think there is anything wrong in that ..@underscore_d"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6585665, "user_type": "registered", "profile_image": "https://graph.facebook.com/302967230036104/picture?type=large", "display_name": "Aditi Binnani", "link": "https://stackoverflow.com/users/6585665/aditi-binnani"}, "edited": false, "score": 0, "creation_date": 1468437573, "post_id": 38358134, "comment_id": 64132499, "body": "m assigning addresses of arrays rather than array itself..arr and arr1 are two pointers which are storing the addresses of two different arrays and m just making arr point to the same array as that of arr1 @Jonathan Leffler"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1, "user_id": 6585665, "user_type": "registered", "profile_image": "https://graph.facebook.com/302967230036104/picture?type=large", "display_name": "Aditi Binnani", "link": "https://stackoverflow.com/users/6585665/aditi-binnani"}, "edited": false, "score": 1, "creation_date": 1468437894, "post_id": 38358134, "comment_id": 64132632, "body": "OK.  You can do that \u2014 indeed, the code shown is working with the two pointers and switching the assignment.  You have to track and free the memory originally allocated to <code>arr</code> before you change it to point to where <code>arr1</code> points to \u2014 otherwise, you leak the memory originally allocated to <code>arr</code>.  And, at the end, you need to free the memory <code>arr</code> points to. It isn&#39;t actually crucial if you&#39;re about to exit the program, but it is good to release the allocated memory where it is simple to do so, as it is in this code. With C, you must track all allocated memory and know which code will free it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1, "user_id": 6585665, "user_type": "registered", "profile_image": "https://graph.facebook.com/302967230036104/picture?type=large", "display_name": "Aditi Binnani", "link": "https://stackoverflow.com/users/6585665/aditi-binnani"}, "edited": false, "score": 1, "creation_date": 1468438200, "post_id": 38358134, "comment_id": 64132771, "body": "What you can&#39;t do safely, but the code in the question does it anyway, is copy the value of the pointer <code>arr1</code> over the pointer <code>arr</code>, then free <code>arr1</code>, and then reference the array again.  Once the array is freed, whether it&#39;s freed via the name <code>arr</code> or <code>arr1</code>, any further access to the data is invalid \u2014 undefined behaviour \u2014 whether it&#39;s accessed via the name <code>arr</code> or <code>arr1</code>."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1468432379, "last_edit_date": 1468432379, "creation_date": 1468430760, "answer_id": 38358134, "question_id": 38357899, "link": "https://stackoverflow.com/questions/38357899/matrix-rotation-for-loop-changes-the-value-of-pointer/38358134#38358134", "title": "matrix rotation..for loop changes the value of pointer", "body": "<p>C doesn't support array assignment.  You have:</p>\n\n<pre><code>    int *arr = malloc (sizeof(int) * a * b);\n    \u2026\n        int *arr1 = malloc (sizeof(int) * a * b);\n        \u2026\n        arr = arr1;\n        \u2026\n        free(arr1);\n</code></pre>\n\n<p>The assignment  means you've lost your original array (memory leak) and you then invalidate your new array with the <code>free()</code>.</p>\n\n<p>Array copying requires more code \u2014 usually a function call such as <code>memmove()</code> or <code>memcpy()</code>, possibly wrapped in a function.</p>\n\n<p>For example, add <code>#include &lt;string.h&gt;</code> and use this in place of the <code>arr = arr1;</code> assignment:</p>\n\n<pre><code>    memmove(arr, arr1, sizeof(int) * a * b);\n    free(arr1);   // No longer needed\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>    free(arr);\n    arr = arr1;\n</code></pre>\n\n<p>This code runs cleanly under <a href=\"http://valgrind.org/\" rel=\"nofollow\"><code>valgrind</code></a> on Mac OS X 10.11.5 with GCC 6.1.0 with the 'Either' or the 'Or' options for handling the array assignments.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstatic void dump_matrix(const char *tag, int *arr, int a, int b)\n{\n    printf(\"Matrix: %s\\n\", tag);\n    for (int i = 0; i &lt; a; i++)\n    {\n        for (int j = 0; j &lt; b; j++)\n            printf(\" %3d\", arr[i * b + j]);\n        putchar('\\n');\n    }\n}\n\nint main(void)\n{\n    int a, b, c;\n    printf(\"enter the size of matrix: \");\n    scanf(\"%d%d\", &amp;a, &amp;b);\n    printf(\"enter the number of rotations: \");\n    scanf(\"%d\", &amp;c);\n    int *arr = malloc(sizeof(int) * a * b);\n\n    int x = (a &gt;= b) ? a : b;\n    printf(\"enter the values of matrix: \");\n    // scanning the values\n\n    for (int i = 0; i &lt; a; i++)\n    {\n        for (int j = 0; j &lt; b; j++)\n        {\n            if (scanf(\"%d\", (arr + i * b + j)) != 1)\n            {\n                fprintf(stderr, \"failed to read value arr[%d][%d]\\n\", i, j);\n                return EXIT_FAILURE;\n            }\n        }\n        printf(\"\\n\");\n    }\n\n    dump_matrix(\"Initial input\", arr, a, b);\n\n    // main code starts\n\n    for (int y = 0; y &lt; c; y++)\n    {\n        // declared a new array\n        int *arr1 = malloc(sizeof(int) * a * b);\n        for (int k = 0; k &lt; x / 2; k++)\n        {\n            for (int i = k; i &lt; a - k; i++)\n            {\n                for (int j = k; j &lt; b - k; j++)\n                {\n                    if (i == k &amp;&amp; j &gt; k)\n                    {\n                        *(arr1 + i * b + j - 1) = *(arr + i * b + j);\n                    }\n                    else if (i == a - k - 1 &amp;&amp; j &lt; b - k - 1)\n                    {\n                        *(arr1 + i * b + j + 1) = *(arr + i * b + j);\n                    }\n                    else if (j == k &amp;&amp; i &lt; a - k - 1)\n                    {\n                        *(arr1 + i * b + j + b) = *(arr + i * b + j);\n                    }\n                    else if (j == b - k - 1 &amp;&amp; i &gt; k)\n                    {\n                        *(arr1 + i * b + j - b) = *(arr + i * b + j);\n                    }\n                }\n            }\n            if (x % 2 != 0 &amp;&amp; a == b)\n                *(arr1 + x / 2 * b + (b / 2)) = *(arr + x / 2 * b + (b / 2));\n        }\n\n        // Changing the old array to new array\n        // Either:\n        // memmove(arr, arr1, sizeof(int) * a * b);\n        // free(arr1);\n        // Or:\n        free(arr);\n        arr = arr1;\n\n        dump_matrix(\"After rotation\", arr, a, b);\n    }\n\n    dump_matrix(\"Finished\", arr, a, b);\n\n    free(arr);\n    return 0;\n}\n</code></pre>\n\n<p>Note the use of the <code>dump_matrix()</code> function.  Writing such a function once means it can be used multiple places in the code.  The <code>tag</code> argument simplifies the use.  The 'commercial grade' variant takes a <code>FILE *fp</code> argument too and writes to the specified file stream.</p>\n\n<p>Note the error checking on the main input loop <code>scanf()</code>.  I should also have checked the two other <code>scanf()</code> statements.  Errors are reported on standard error, of course.</p>\n\n<p>Example run:</p>\n\n<pre><code>$ ./mat31\nenter the size of matrix: 3 4\nenter the number of rotations: 2\nenter the values of matrix: 1 2 3 4 10 11 12 13 99 98 97 96\n\n\n\nMatrix: Initial input\n   1   2   3   4\n  10  11  12  13\n  99  98  97  96\nMatrix: After rotation\n   2   3   4  13\n   1  12  11  96\n  10  99  98  97\nMatrix: After rotation\n   3   4  13  96\n   2  11  12  97\n   1  10  99  98\nMatrix: Finished\n   3   4  13  96\n   2  11  12  97\n   1  10  99  98\n$\n</code></pre>\n\n<p>Whether the output is what you intended is a wholly separate discussion.  This is simply not abusing the memory.</p>\n"}], "owner": {"reputation": 1, "user_id": 6585665, "user_type": "registered", "profile_image": "https://graph.facebook.com/302967230036104/picture?type=large", "display_name": "Aditi Binnani", "link": "https://stackoverflow.com/users/6585665/aditi-binnani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1468432379, "creation_date": 1468429965, "question_id": 38357899, "link": "https://stackoverflow.com/questions/38357899/matrix-rotation-for-loop-changes-the-value-of-pointer", "title": "matrix rotation..for loop changes the value of pointer", "body": "<p>In the final value of array only first element becomes zero and that too when it again goes to the for loop(checked using gdb)..i have mentioned the problem using comments at the bottom of code.Help me out.. I have no clue of what is going wrong.</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n    int main()\n    {\n        int a, b, c;\n        printf(\"enter the size of matrix\");\n        scanf(\"%d%d\",&amp;a,&amp;b);\n        printf(\"enter the number of rotations\");\n        scanf(\"%d\",&amp;c);\n        int *arr = malloc (sizeof(int) * a * b);\n\n        int x = (a &gt;= b)? a : b;\n        printf(\"enter the values of matrix\");\n        // scanning the values\n\n        for(int i = 0; i &lt; a; i++)\n        {\n            for(int j = 0; j &lt; b; j++)\n            {\n                scanf(\"%d\",(arr + i * b + j));\n            }\n            printf(\"\\n\");\n        }\n\n        // main code starts\n\n        for(int y = 0; y &lt; c; y++)\n        {\n            // declared a new array\n\n            int *arr1 = malloc (sizeof(int) * a * b);\n            for(int k = 0; k &lt; x / 2; k++)\n            {\n                for(int i = k; i &lt; a - k; i++)\n                {\n                    for(int j = k; j &lt; b - k; j++)\n                    {\n                        if (i == k &amp;&amp; j &gt; k)\n                        {\n                            *(arr1 + i * b + j - 1) = *(arr + i * b + j);\n\n                        }\n\n                        else if (i == a - k - 1 &amp;&amp; j &lt; b - k - 1)\n                        {\n                            *(arr1 + i * b + j + 1) = *(arr + i * b + j); \n\n                        } \n\n                        else if (j == k &amp;&amp; i &lt; a - k - 1)\n                        {\n                            *(arr1 + i * b + j + b) = *(arr + i * b + j);\n\n                        }\n\n                        else if (j == b - k - 1 &amp;&amp; i &gt; k)\n                        {\n                            *(arr1 + i * b + j - b) = *(arr + i * b + j); \n\n                        }\n                    }\n                }\n                if (x % 2 != 0 &amp;&amp; a == b)\n                *(arr1 + x / 2 * b + (b / 2)) = *(arr + x / 2 * b + (b / 2));\n            }\n\n            // changing the old array to new array\n\n\n            arr = arr1;\n            // first value is getting printed correctly here\n            printf(\"%d\\n\",*(arr));\n            printf(\"%p\\n\",&amp;(*arr));\n            free(arr1);\n\n\n        }\n\n        // printing the output\n        for(int i = 0; i &lt; a; i++)\n        {\n            for(int j = 0; j &lt; b; j++)\n            {\n                printf(\"%d \",*(arr + i * b + j));\n            }\n            printf(\"\\n\");\n        }\n\n        // first value is getting printed incorrectly here, outside the loop\n            printf(\"\\n%d\\n\",*(arr));\n            printf(\"%p\",&amp;(*arr));\n\n    }\n</code></pre>\n"}, {"tags": ["c", "windows", "gcc", "recursion", "memory-leaks"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1468429890, "post_id": 38357873, "comment_id": 64127961, "body": "What were you expecting it to do?"}, {"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "edited": false, "score": 1, "creation_date": 1468429971, "post_id": 38357873, "comment_id": 64128024, "body": "Infinite loops tend to do that"}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 4, "creation_date": 1468429980, "post_id": 38357873, "comment_id": 64128032, "body": "I would rename <code>memory_leak()</code> to <code>stackoverflow()</code> :)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1468429980, "post_id": 38357873, "comment_id": 64128033, "body": "Why do you think that&#39;s a memory leak?  And where&#39;s the &quot;YHBT HAND&quot; close option?"}, {"owner": {"reputation": 16285, "user_id": 4860513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNzBp.jpg?s=128&g=1", "display_name": "W0rmH0le", "link": "https://stackoverflow.com/users/4860513/w0rmh0le"}, "edited": false, "score": 0, "creation_date": 1468430044, "post_id": 38357873, "comment_id": 64128066, "body": "It would be strange if a crash did not happen!"}, {"owner": {"reputation": 658, "user_id": 6177689, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/o5C91.jpg?s=128&g=1", "display_name": "Ingenioushax", "link": "https://stackoverflow.com/users/6177689/ingenioushax"}, "edited": false, "score": 0, "creation_date": 1468430060, "post_id": 38357873, "comment_id": 64128077, "body": "You have a recursive call to <code>memory_leak()</code>. That&#39;s going to eventually run in to a stack overflow. At least give it an exit condition. <code>void memory_leak(int i){ if(i &gt; 0) memory_leak(--i); else return; }</code>"}, {"owner": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1468430072, "post_id": 38357873, "comment_id": 64128091, "body": "@immibis i expected it to slowly rise memory usage i see in task manager."}, {"owner": {"reputation": 39095, "user_id": 398060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47073e025b05ee4d61d720f6424d0191?s=128&d=identicon&r=PG", "display_name": "GWW", "link": "https://stackoverflow.com/users/398060/gww"}, "edited": false, "score": 0, "creation_date": 1468430139, "post_id": 38357873, "comment_id": 64128126, "body": "Use a while loop to allocate an array without freeing it."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1468454617, "post_id": 38357873, "comment_id": 64139386, "body": "@Warix3 How about rising very <i>quickly</i>, then crashing once it hits a certain limit (I believe 1MB stack space by default)?"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468430560, "post_id": 38357904, "comment_id": 64128369, "body": "Thanks, that did what i actually wanted ."}, {"owner": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468430679, "post_id": 38357904, "comment_id": 64128447, "body": "But it stopped on 2,035.1 MB. Is that system limit for a program or something? Because i still have 4.3 GB available memory."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "reply_to_user": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468430787, "post_id": 38357904, "comment_id": 64128516, "body": "What operating system are you testing?"}, {"owner": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468430841, "post_id": 38357904, "comment_id": 64128544, "body": "i use Windows 10 64 bit"}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "reply_to_user": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468431061, "post_id": 38357904, "comment_id": 64128666, "body": "Is your app a 32-bit application? If it is, 2GB is max for process (if not using &quot;extensions&quot; like AWE/4GT).  (System uses upper 2GB).  If 64-bit, check compiler switch /LARGEADDRESSAWARE.  It can also depend on static or dynamic linkage to the CRT."}, {"owner": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468431226, "post_id": 38357904, "comment_id": 64128762, "body": "It&#39;s a 32 bit application , how do i compile it in 64 bit one ?"}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "reply_to_user": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468432031, "post_id": 38357904, "comment_id": 64129240, "body": "Are you using Visual studio? If so, find the configuration manager and select &#39;x64&#39; (you may have to create one... from the x86 version)."}, {"owner": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468432148, "post_id": 38357904, "comment_id": 64129311, "body": "No I use notepad++ and a c compiler from MinGW."}, {"owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "reply_to_user": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "edited": false, "score": 0, "creation_date": 1468433129, "post_id": 38357904, "comment_id": 64129968, "body": "Alas, I am not familiar with your compiler. This should be easy to solve though."}], "tags": [], "owner": {"reputation": 750, "user_id": 1212565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0cc2208baa8138cdb6fc898bd298500?s=128&d=identicon&r=PG", "display_name": "David Thomas", "link": "https://stackoverflow.com/users/1212565/david-thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1468430295, "last_edit_date": 1468430295, "creation_date": 1468429981, "answer_id": 38357904, "question_id": 38357873, "link": "https://stackoverflow.com/questions/38357873/simple-c-program-crashes-on-windows/38357904#38357904", "title": "Simple C program crashes on windows", "body": "<p>You are producing a stack overflow - by calling your function <code>memory leak</code> recursively. </p>\n\n<p>Your version of <code>memory_leak</code> allocates a local (\"stack\") variable that will be released/destroyed/deallocated when the function exits. </p>\n\n<p>To actually create a memory leak, you need to allocate memory from the heap (e.g. using <code>new</code> or <code>malloc</code>).  </p>\n\n<pre><code>void* memory_leak()\n{\n    return malloc(10);\n}\n</code></pre>\n\n<p>[Don't unconditionally call <code>memory_leak</code> within <code>memory_leak</code>.]</p>\n"}], "owner": {"reputation": 91, "user_id": 5021707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YVPO7.jpg?s=128&g=1", "display_name": "Warix3", "link": "https://stackoverflow.com/users/5021707/warix3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 38357904, "answer_count": 1, "score": -2, "last_activity_date": 1468430295, "creation_date": 1468429869, "question_id": 38357873, "link": "https://stackoverflow.com/questions/38357873/simple-c-program-crashes-on-windows", "title": "Simple C program crashes on windows", "body": "<p>I wrote a simple c program to simulate a memory leak. But it crashes when i try to run it. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid memory_leak(void);\n\nint main()\n{\n    memory_leak();\n    return EXIT_SUCCESS;\n}\n\nvoid memory_leak()\n{\n    int i = 100;\n    memory_leak();\n}\n</code></pre>\n\n<p>I use MinGW gcc compiler.</p>\n"}, {"tags": ["c", "filtering", "signal-processing", "pcm"], "answers": [{"tags": [], "owner": {"reputation": 1183, "user_id": 3860983, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3TmhD.jpg?s=128&g=1", "display_name": "yun", "link": "https://stackoverflow.com/users/3860983/yun"}, "is_accepted": false, "score": 0, "last_activity_date": 1468444098, "creation_date": 1468444098, "answer_id": 38361739, "question_id": 38357857, "link": "https://stackoverflow.com/questions/38357857/apply-audio-filters-in-parallel-and-merge-the-results-buffers/38361739#38361739", "title": "Apply audio filters in parallel and merge the results buffers", "body": "<p>I don't know the EQ10Q filter library so I'll write some pseudocode for you.</p>\n\n<p>Hopefully, the EQ10Q filter processing code returns its altered filtered sample and not need pointers to the input. With that in mind, this is how I usually do:</p>\n\n<p><code>yn = filterOne.process(xn) + filterTwo.process(xn) + ... + filterThirteen.process(xn)</code></p>\n\n<p>This adds up each filter output sample. HOWEVER, keep in mind you'll need to optimize it yourself... processing a sample 13 separate times can be intensive if you have other things going on.</p>\n"}], "owner": {"reputation": 924, "user_id": 3854327, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ZAsFk.jpg?s=128&g=1", "display_name": "DrCachetes", "link": "https://stackoverflow.com/users/3854327/drcachetes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468444098, "creation_date": 1468429830, "last_edit_date": 1468440521, "question_id": 38357857, "link": "https://stackoverflow.com/questions/38357857/apply-audio-filters-in-parallel-and-merge-the-results-buffers", "title": "Apply audio filters in parallel and merge the results buffers", "body": "<p>I've implemented an 13 band EQ using \n<a href=\"http://sourceforge.net/projects/eq10q/files/\" rel=\"nofollow\">EQ10Q</a>\nfilters. Doing some measurements with the smaartV7 software I realized that my bands were overlapping each other giving an extra undesired gain. I think this is because I was applying every filter over the same buffer (series). So the solution I was thinking is use 13 buffers in stereo 32 bit PCM format with same original data. I'm going to apply one filter to each buffer and then merge all the buffers (parallel). So I have some doubts. </p>\n\n<ol>\n<li><p>Is my approach correct?</p></li>\n<li><p>How should I merge the buffers? (I tried sum all the samples and then dividing the result by 13 but the filter gain is reduced a lot with this method).</p></li>\n</ol>\n\n<p><strong>NOTE:</strong> I don't want to modify the Q Factor of my filters. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1468429616, "post_id": 38357775, "comment_id": 64127781, "body": "If you don&#39;t use the return value the program stays defined. Compiler is doing you a favor by warning you, it doesn&#39;t have to."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1468429666, "post_id": 38357775, "comment_id": 64127816, "body": "Cannot reproduce, my installation of gcc (5.4.0) produces the expected warning."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1468429925, "post_id": 38357775, "comment_id": 64127995, "body": "Because the compiler isn&#39;t smart enough. You shouldn&#39;t rely on the compiler being smart enough."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1468430238, "post_id": 38357775, "comment_id": 64128182, "body": "As long as you don&#39;t use the return-value in order to access the pointed memory address, no harm is done."}, {"owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "edited": false, "score": 0, "creation_date": 1468432915, "post_id": 38357775, "comment_id": 64129818, "body": "Please look at my answer below. It does not show how to get a warning but it shows an interesting I would say issue with GCC."}], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 5055425, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29afabdb454bb1f93f07e153a4e249e9?s=128&d=identicon&r=PG&f=1", "display_name": "ram619", "link": "https://stackoverflow.com/users/5055425/ram619"}, "edited": false, "score": 0, "creation_date": 1468430114, "post_id": 38357862, "comment_id": 64128107, "body": "Okay, I got it now. Compiler doesn&#39;t check where the pointer is pointing to therefore no warning. But it sees the address while returning reference."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 2, "last_activity_date": 1468429842, "creation_date": 1468429842, "answer_id": 38357862, "question_id": 38357775, "link": "https://stackoverflow.com/questions/38357775/the-compiler-gives-no-warning-on-returning-local-pointer/38357862#38357862", "title": "The compiler gives no warning on returning local pointer", "body": "<p>First, because warnings are optional.</p>\n\n<p>Second, this code</p>\n\n<pre><code>int *q\n...\nreturn q;\n</code></pre>\n\n<p>doesn't return a the address of a local variable directly.  You wrote the explicit code that made the pointer point to an address that becomes invalid when the function returns.  No compiler can be expected to save you from that.</p>\n"}, {"tags": [], "owner": {"reputation": 619, "user_id": 1666733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d588c62cff899e45a7d9fe926b1a0c63?s=128&d=identicon&r=PG", "display_name": "arduic", "link": "https://stackoverflow.com/users/1666733/arduic"}, "is_accepted": false, "score": 1, "last_activity_date": 1468432879, "last_edit_date": 1468432879, "creation_date": 1468431143, "answer_id": 38358260, "question_id": 38357775, "link": "https://stackoverflow.com/questions/38357775/the-compiler-gives-no-warning-on-returning-local-pointer/38358260#38358260", "title": "The compiler gives no warning on returning local pointer", "body": "<p>Andrew I would have to disagree.\nAccording to <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html\" rel=\"nofollow\">gcc documentation</a></p>\n\n<blockquote>\n  <p>-Wno-return-local-addr\n  Do not warn about returning a pointer (or in C++, a reference) to a variable that goes out of scope after the function returns. </p>\n</blockquote>\n\n<p>Edit: I redact my earlier claim. Turns out GCC does disappoint me. Apparently that error only works if you directly return something that will be cleared from the stack. If you store it in a temporary variable GCC does not check that even though it has more then enough information to do so just my checking if the pointer leads to some address between <code>%EBP</code> and <code>%ESP</code></p>\n\n<p>Here is some code I made to test it real quick to confirm that GCC doesn't check. If you run this with <code>-Wall</code> it produces no error however if you return <code>&amp;val</code> it will produce two warnings (one for the return one for j not being used). I feel like GCC should recursively check that my returned pointer stays in scope rather then just checking the immediate value.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint * myFunc(int val){\n        int *j;\n        j=&amp;val;\n        return j;       //Should not work val goes out of scope\n}\n\nint someFuncToClearMyStack(int a, int b, int c){\n        int d;\n        int e;\n        d=a+b+c;\n        e=c-b-a;\n        d=d-e;\n        return d;\n}\n\nint main(){\n        int *i;\n        int j;\n        i=myFunc(10);\n        printf(\"%i\\n\",*i);\n        j=someFuncToClearMyStack(3,4,5);\n        printf(\"%i %i\",*i,j);\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 188, "user_id": 5055425, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/29afabdb454bb1f93f07e153a4e249e9?s=128&d=identicon&r=PG&f=1", "display_name": "ram619", "link": "https://stackoverflow.com/users/5055425/ram619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 38357862, "answer_count": 2, "score": 1, "last_activity_date": 1468432879, "creation_date": 1468429508, "question_id": 38357775, "link": "https://stackoverflow.com/questions/38357775/the-compiler-gives-no-warning-on-returning-local-pointer", "title": "The compiler gives no warning on returning local pointer", "body": "<p>I am using code blocks with GCC compiler. In the code below, compiler gives warning while returning local reference but no warning on returning local pointer though both are same thing. Why ?</p>\n\n<p>I understand these variables are local and will be destroyed as soon as control returns from the function. De-referencing these would result in undefined behavior.</p>\n\n<pre><code>int *check(int j)\n{\n    int *q;\n\n    q= &amp;j;\n    return q; // No warning\n    //return &amp;j; // Warning\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "segmentation-fault", "void-pointers", "timeval"], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468430787, "post_id": 38358030, "comment_id": 64128518, "body": "...meaning <code>&amp;tr</code> sends the address of <i>the pointer itself</i> to the function, and trying to treat that as an array is destined for failure. The address of the allocated array is stored in <code>tr</code>, so pass <code>tr</code>, not <code>&amp;tr</code>."}, {"owner": {"reputation": 103, "user_id": 6517473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df899e7a733a5f5263319a2ce477d65?s=128&d=identicon&r=PG&f=1", "display_name": "dr_times", "link": "https://stackoverflow.com/users/6517473/dr-times"}, "edited": false, "score": 0, "creation_date": 1468435902, "post_id": 38358030, "comment_id": 64131597, "body": "Thank you, that worked! I use <code>void *</code> because I&#39;m experimenting with an open source library and I use its <code>info_callback</code> function  for my own purposes without editing much. Depending on <code>msg</code> I make a decision about what <code>void *</code> actually points to and perform some actions."}], "tags": [], "owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "is_accepted": true, "score": 1, "last_activity_date": 1468430858, "last_edit_date": 1468430858, "creation_date": 1468430425, "answer_id": 38358030, "question_id": 38357743, "link": "https://stackoverflow.com/questions/38357743/pass-void-pointer-as-function-parameter-and-cast-it-to-timeval-array/38358030#38358030", "title": "Pass void pointer as function parameter and cast it to timeval array", "body": "<p>You should pass <code>tr</code> to <code>info_callback</code> instead of <code>&amp;tr</code>. <code>tr</code> points to the array you allocated; <code>&amp;tr</code> is a pointer to the pointer <code>tr</code>.</p>\n\n<p>By the way, any particular reason for using <code>void *</code> instead of the actual type? If you had used the actual type, the compiler would have flagged this.</p>\n"}], "owner": {"reputation": 103, "user_id": 6517473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df899e7a733a5f5263319a2ce477d65?s=128&d=identicon&r=PG&f=1", "display_name": "dr_times", "link": "https://stackoverflow.com/users/6517473/dr-times"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 38358030, "answer_count": 1, "score": 0, "last_activity_date": 1468436140, "creation_date": 1468429428, "last_edit_date": 1495540736, "question_id": 38357743, "link": "https://stackoverflow.com/questions/38357743/pass-void-pointer-as-function-parameter-and-cast-it-to-timeval-array", "title": "Pass void pointer as function parameter and cast it to timeval array", "body": "<p>Assume I have a function <code>calc_sum()</code> and I want to measure its execution time. I have a callback function <code>info_callback()</code> which prints a message and calculates execution time, it takes void pointer as parameter. I want to cast <code>void*</code> to <code>struct timeval *</code> to retrieve start/end of execution time and calculate the difference, but I can't understand how to pass the pointer to array <code>struct timeval *</code> so that I can access its elements from within <code>info_callback()</code> function.\nWhatever I try, I get segmentation fault...</p>\n\n<p>How should I pass and cast pointers to get it work?</p>\n\n<p><strong>EDIT: fixed error in code</strong> as <a href=\"https://stackoverflow.com/users/3068258/andy-schweig\">Andy Schweig</a> suggested</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/time.h&gt;\n\nvoid calc_sum(int a, int b)\n{\n    int k = a + b;\n    printf(\"sum = %d\\n\", k);\n}\n\nvoid info_callback(const char *msg, void *client_data)\n{\n    struct timeval *t = (struct timeval *) client_data;\n    double time = (t[1].tv_sec - t[0].tv_sec) * 1000.0; // !!!SEGMENTATION FAULT!!!\n    time += (t[1].tv_usec - t[0].tv_usec) / 1000.0; //\n\n    printf(\"[TIME] %s: %f, ms\", msg, time);\n}\n\nint main(int argc, char *argv[])\n{\n   struct timeval t1, t2;\n   gettimeofday(&amp;t1, NULL);\n\n   calc_sum(2, 3);\n\n   gettimeofday(&amp;t2, NULL);\n\n   struct timeval * tr = (struct timeval*) malloc(2 * sizeof(struct timeval));\n   tr[0] = t1;\n   tr[1] = t2;\n\n   double time = (tr[1].tv_sec - tr[0].tv_sec) * 1000.0; // sec to ms \n   time += (tr[1].tv_usec - tr[0].tv_usec) / 1000.0;   // us to ms\n\n   printf(\"time = %f, ms\\n\", time);\n\n   info_callback(\"Execution time\", tr);\n   free(tr);\n}  \n</code></pre>\n"}, {"tags": ["c", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1468428910, "post_id": 38357522, "comment_id": 64127370, "body": "Why do you think an out of bounds write is causing the problem?  What does tcpdump / wireshark show going across the network when this happens?"}, {"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1468429111, "post_id": 38357522, "comment_id": 64127495, "body": "@dbush it only seems to happen when the application processes a large number of events. For fewer events there is no disconnection. So I process &quot;batches&quot; and when several large batches are received, thats when the problem seems to occur."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468516401, "post_id": 38357522, "comment_id": 64170453, "body": "do you expect us to guess as to what your code is doing?   Strongly suggest post code that 1) cleanly compiles 2) exhibits the problem"}], "answers": [{"comments": [{"owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "edited": false, "score": 0, "creation_date": 1468429218, "post_id": 38357617, "comment_id": 64127549, "body": "Would love to use address sanitizer. See my other SO question: <a href=\"http://stackoverflow.com/questions/38357631/undefined-symbol-what-next\" title=\"undefined symbol what next\">stackoverflow.com/questions/38357631/undefined-symbol-what-n&zwnj;&#8203;ext</a>"}], "tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1468428970, "creation_date": 1468428970, "answer_id": 38357617, "question_id": 38357522, "link": "https://stackoverflow.com/questions/38357522/illegal-memory-write-causing-recv-to-return-zero/38357617#38357617", "title": "Illegal memory write causing recv() to return zero", "body": "<p>No, you find out what happened on that socket <strong>strictly</strong> by reading/writing from/to it. There is no other (reliable) way to find out.</p>\n\n<blockquote>\n  <p>Is it possible for recv() to return zero due to an illegal memory\n  write and yet the socket descriptor value remain unchanged?</p>\n</blockquote>\n\n<p>If something went wrong, <code>recv</code> returns <code>-1</code> and sets <code>errno</code> accordingly (in that case, to <code>EFAULT</code>) rather than <code>0</code>.</p>\n\n<p>You can analyze your side with a tool like AddressSanitizer or valgrind and Wireshark for the networking.</p>\n"}, {"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 2, "last_activity_date": 1468428984, "creation_date": 1468428984, "answer_id": 38357621, "question_id": 38357522, "link": "https://stackoverflow.com/questions/38357522/illegal-memory-write-causing-recv-to-return-zero/38357621#38357621", "title": "Illegal memory write causing recv() to return zero", "body": "<p>A return value of 0 from <code>recv</code> means EOF, i.e. the peer has closed its end of the connection (or at least shut it down for writing via <code>shutdown</code>). I don't see any reason to believe it should have something to do with memory clobbering on your side; with <code>recv</code> generally being a very thin syscall wrapper it would be very unlikely that anything you could do in userspace affects its behavior, even if your program has invoked undefined behavior.</p>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468429058, "creation_date": 1468428700, "last_edit_date": 1468429058, "question_id": 38357522, "link": "https://stackoverflow.com/questions/38357522/illegal-memory-write-causing-recv-to-return-zero", "title": "Illegal memory write causing recv() to return zero", "body": "<p>I am somehow getting disconnected from a socket, or at least the value returned from <code>recv()</code> is zero. From what seems to trigger the problem I think it is an out-of-bounds memory write. However, I am outputting the value of my socket and that hasn't been corrupted.</p>\n\n<p>Is there a way I can detect the \"disconnection\" without calling recv() (because I am already calling that to read the bytes, I am looking for something I can query throughout the code to detect exactly when the \"disconnection\" occurs)?</p>\n\n<p>Is it possible for <code>recv()</code> to return zero due to an illegal memory write and yet the socket descriptor value remain unchanged? </p>\n"}, {"tags": ["c", "memory", "memory-management", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1468426987, "post_id": 38356997, "comment_id": 64126284, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "is_accepted": true, "score": 10, "last_activity_date": 1468427307, "creation_date": 1468427307, "answer_id": 38357101, "question_id": 38356997, "link": "https://stackoverflow.com/questions/38356997/free-all-the-memory-allocated-by-malloc-realloc-in-c/38357101#38357101", "title": "Free all the memory allocated by malloc(), realloc() in C", "body": "<pre><code>for (cc = 0; cc &lt; il; cc++) {\n</code></pre>\n\n<p>If <code>il</code> is a valid index of <code>array</code> (and it is), the comparison in the loop should be:</p>\n\n<pre><code>for (cc = 0; cc &lt;= il; cc++) {\n</code></pre>\n\n<p>in order to trigger the very last element of <code>array</code> (and free its memory).</p>\n"}, {"tags": [], "owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "is_accepted": false, "score": 5, "last_activity_date": 1468427832, "last_edit_date": 1468427832, "creation_date": 1468427356, "answer_id": 38357119, "question_id": 38356997, "link": "https://stackoverflow.com/questions/38356997/free-all-the-memory-allocated-by-malloc-realloc-in-c/38357119#38357119", "title": "Free all the memory allocated by malloc(), realloc() in C", "body": "<p>Just replace</p>\n\n<pre><code>for (cc = 0; cc &lt; il; cc++)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>for (cc = 0; cc &lt;= il; cc++)\n</code></pre>\n\n<p>To figure that out, imagine what happens if allocating loop <code>for (il = 0; 1; il++)</code> iterates only once. In this case control does not reach <code>il++</code>, so <code>il</code> remains zero and <code>for (cc = 0; cc &lt; il; cc++)</code> iterates zero times. In general case the freeing loop makes one iteration less than allocating loop.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1468427741, "last_edit_date": 1468427741, "creation_date": 1468427373, "answer_id": 38357124, "question_id": 38356997, "link": "https://stackoverflow.com/questions/38356997/free-all-the-memory-allocated-by-malloc-realloc-in-c/38357124#38357124", "title": "Free all the memory allocated by malloc(), realloc() in C", "body": "<p>Your code leaks the last allocation, because <code>il</code> is never incremented when <code>fgets(array[il], max_line_len-1, file)</code> returns <code>NULL</code>.</p>\n\n<p>Moving <code>array[il] = malloc(max_line_len);</code> along with its <code>NULL</code> check to after <code>fgets</code> will fix this problem. An added benefit to this approach is that you can make your allocations of the exact size, rather than allocating at <code>max_line_len</code>.</p>\n\n<pre><code>// Check that we will need the allocation\nchar temp[max_line_len];\nif (fgets(temp, max_line_len-1, file)==NULL) {\n    break;\n}\n// Allocate only when we are sure that we are going to need it\ntemp[max_line_len-1] = '\\0';\nsize_t len = strlen(temp);\narray[il] = malloc(len+1);\nif (array[il]==NULL) {\n    fprintf(stderr,\"Out of memory (3).\\n\");\n    exit(4);\n}\n</code></pre>\n\n<p><strong>Note:</strong> assigning <code>realloc</code> back to the variable being reallocated could result in leaking the memory that has been previously allocated to that variable. It is not a problem in your code, because you call <code>exit(4)</code> right away, but you should be aware of the general problem with this assignment.</p>\n"}, {"tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 2, "last_activity_date": 1468444705, "last_edit_date": 1468444705, "creation_date": 1468435443, "answer_id": 38359454, "question_id": 38356997, "link": "https://stackoverflow.com/questions/38356997/free-all-the-memory-allocated-by-malloc-realloc-in-c/38359454#38359454", "title": "Free all the memory allocated by malloc(), realloc() in C", "body": "<p>If you're having miscellaneous problems, and intermixing calls to various allocators, and are awfully persnickety about things, then implement a <em>wrapper</em> for the various memory allocators (this can be done cleverly using macros) that caches the address of the newly allocated buffer somewhere (e.g., atop a stack) and then--at some point--navigates the stack and frees everybody.  <em>Don't</em> intermix random calls here and there to <code>free()</code> or its analogues.  When something is freed, overwrite the something with zero so you don't accidentally try to <code>free()</code> it a second time, which will upset <code>free()</code>.</p>\n\n<p>HOW TO CLEVERLY USE MACROS (I said it, so I'd better make it work now) and avoid recursive problems:</p>\n\n<p>Let's use <code>malloc()</code> as our first victim.</p>\n\n<p>In another source file, create a function <code>_malloc()</code> that calls <code>malloc()</code>.</p>\n\n<p>In the source file that contains all your memory allocation and deallocation, define <code>malloc()</code> as follows:</p>\n\n<pre><code>#define malloc( n )  ( *sp++ = _malloc( n ) )\n</code></pre>\n\n<p>There has to be code invoked as a preamble that sets up a stack and points <code>sp</code> at its base.  Make it nice and big: you'd be <em>surprised</em> how many times <code>malloc()</code> and its brethren may end up being called.  At various times\u2009\u2014\u2009when it's appropriate, actually\u2009\u2014\u2009call your own <code>free_all()</code> that does this:</p>\n\n<pre><code>void free_all() {  \n  while( --sp &gt;= base_of_malloc_buf_stack ) {  \n    free( *sp );   \n    *sp = 0; /* avoid future re-free() */    \n  }  \n}\n</code></pre>\n"}], "owner": {"reputation": 529, "user_id": 3425503, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/536d950ce68a2567393b45bac5a56694?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Rockefeller", "link": "https://stackoverflow.com/users/3425503/sebastian-rockefeller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1554, "favorite_count": 0, "accepted_answer_id": 38357101, "answer_count": 4, "score": 4, "last_activity_date": 1468444705, "creation_date": 1468426925, "last_edit_date": 1592644375, "question_id": 38356997, "link": "https://stackoverflow.com/questions/38356997/free-all-the-memory-allocated-by-malloc-realloc-in-c", "title": "Free all the memory allocated by malloc(), realloc() in C", "body": "<p>I'm trying to free() all the allocated memory by malloc(), realloc() but valgrind says that the is a memory leak.</p>\n<h1>The code:</h1>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(int argc, char *argv[]) {\n\n    int lines_allocated = 128;\n    int max_line_len = 50;\n\n    FILE *fp;\n\n    /* File allocate lines of text */\n    char **array = (char **)malloc(sizeof(char*)*lines_allocated);\n    if (array==NULL) {\n        fprintf(stderr,&quot;Out of memory (1).\\n&quot;);\n        exit(1);\n    }\n\n    FILE *file = fopen(&quot;file.txt&quot;, &quot;r&quot;);\n    if (file == NULL) {\n        fprintf(stderr,&quot;Error opening file.\\n&quot;);\n        exit(2);\n    }\n\n    int il;\n    for (il = 0; 1; il++) {\n        int j;\n\n        /* Have we gone over our line allocation? */\n        if (il &gt;= lines_allocated) {\n            int new_size;\n\n            /* Double our allocation and re-allocate */\n            new_size = lines_allocated*2;\n            array = (char **)realloc(array,sizeof(char*)*new_size);\n\n            if (array==NULL) {\n                fprintf(stderr,&quot;Out of memory.\\n&quot;);\n                exit(3);\n            }\n\n            lines_allocated = new_size;\n        }\n\n        /* Allocate space for the next line */\n        array[il] = malloc(max_line_len);\n        if (array[il]==NULL) {\n                fprintf(stderr,&quot;Out of memory (3).\\n&quot;);\n                exit(4);\n            }\n        if (fgets(array[il], max_line_len-1, file)==NULL)\n            break;\n\n        /* Get rid of CR or LF at end of line */\n        for (j=strlen(array[il])-1;j&gt;=0 &amp;&amp; (array[il][j]=='\\n' || array[il][j]=='\\r');j--)\n            ;\n\n        array[il][j+1]='\\0';\n    }\n\n    /* Close file */\n    fclose(file);\n\n    /* Print and free the every element of the array */\n    int cc;\n    for (cc = 0; cc &lt; il; cc++) {\n        printf(&quot;%s\\n&quot;, array[cc]);\n        \n        /* Free the every element of the array */\n        free(array[cc]);\n    }\n\n    /* Free hole array */\n    free(array);\n\n    return 0;\n}\n</code></pre>\n<p>valgrind ./main</p>\n<pre><code>valgrind --leak-check=full --show-reachable=yes ./main\n==4806== Memcheck, a memory error detector\n==4806== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==4806== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==4806== Command: ./main\n==4806== \n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n==4806== \n==4806== HEAP SUMMARY:\n==4806==     in use at exit: 50 bytes in 1 blocks\n==4806==   total heap usage: 14 allocs, 13 frees, 2,192 bytes allocated\n==4806== \n==4806== 50 bytes in 1 blocks are definitely lost in loss record 1 of 1\n==4806==    at 0x4C2AC3D: malloc (vg_replace_malloc.c:299)\n==4806==    by 0x40092E: main (in /var/www/mem/main)\n==4806== \n==4806== LEAK SUMMARY:\n==4806==    definitely lost: 50 bytes in 1 blocks\n==4806==    indirectly lost: 0 bytes in 0 blocks\n==4806==      possibly lost: 0 bytes in 0 blocks\n==4806==    still reachable: 0 bytes in 0 blocks\n==4806==         suppressed: 0 bytes in 0 blocks\n==4806== \n==4806== For counts of detected and suppressed errors, rerun with: -v\n==4806== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)\n</code></pre>\n<p>How to free the memory correctly? It says that there should one more block of memory to free but where is it?</p>\n"}, {"tags": ["c", "string", "random", "openssl", "base64"], "answers": [{"comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1468432692, "post_id": 38357264, "comment_id": 64129670, "body": "Thanks for the response. Can you tell me what is the difference between using <code>%44s</code> vs <code>%.44s</code>?"}, {"owner": {"reputation": 1366, "user_id": 5182731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228c4d28f5e1c29496788875c21031cd?s=128&d=identicon&r=PG&f=1", "display_name": "Alcaro", "link": "https://stackoverflow.com/users/5182731/alcaro"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1468437974, "post_id": 38357264, "comment_id": 64132671, "body": "%44s prints a minimum of 44 characters, while %.44s prints a maximum of 44. If the string is shorter than minimum, it pads with spaces; if longer than maximum, it&#39;s truncated."}], "tags": [], "owner": {"reputation": 1366, "user_id": 5182731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228c4d28f5e1c29496788875c21031cd?s=128&d=identicon&r=PG&f=1", "display_name": "Alcaro", "link": "https://stackoverflow.com/users/5182731/alcaro"}, "is_accepted": false, "score": 2, "last_activity_date": 1468427831, "creation_date": 1468427831, "answer_id": 38357264, "question_id": 38356835, "link": "https://stackoverflow.com/questions/38356835/non-printable-character-after-generating-random-n-byte-base64-string/38357264#38357264", "title": "Non-printable character after generating random n-byte Base64 string", "body": "<p><code>BIO_write(bio, buffer, strlen(buffer));</code></p>\n\n<p>NUL is a valid random byte, so that strlen will sometimes return less than the desired value (32).</p>\n\n<p>The `\u0010\ufffd is due to the base64 buffer not having a NUL terminator, so it's reading out some random garbage. I don't know of any way to force OpenSSL to add a NUL, but you can tell printf where to stop:</p>\n\n<p><code>(void)printf(\"Return value of the operation was: %d\\n%.44s\\n\", ret, base64EncodeOutput);</code></p>\n"}, {"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 2, "last_activity_date": 1468435964, "creation_date": 1468435964, "answer_id": 38359588, "question_id": 38356835, "link": "https://stackoverflow.com/questions/38356835/non-printable-character-after-generating-random-n-byte-base64-string/38359588#38359588", "title": "Non-printable character after generating random n-byte Base64 string", "body": "<blockquote>\n  <p>Compiling and running with gcc rand_str.c -lcrypto &amp;&amp; ./a.out | tail -1, sometimes produces something like:</p>\n\n<pre><code>I6YaDVSRPw5Ux+2paY4u4ToMKtZXQoBj`\u0010\ufffd\n</code></pre>\n</blockquote>\n\n<p>The <code>BIO's</code> do <em>not</em> produce C-strings. They are not NULL terminated.</p>\n\n<p>Perform one more <code>BIO_write</code> and write the NULL character after removing the <code>Base64</code> BIO from the chain.</p>\n"}, {"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": true, "score": 2, "last_activity_date": 1468463562, "last_edit_date": 1468463562, "creation_date": 1468442843, "answer_id": 38361396, "question_id": 38356835, "link": "https://stackoverflow.com/questions/38356835/non-printable-character-after-generating-random-n-byte-base64-string/38361396#38361396", "title": "Non-printable character after generating random n-byte Base64 string", "body": "<p>Thanks to the solutions posted above, I was able to fix this problem. Here is the result:</p>\n\n<pre><code>#include &lt;openssl/rand.h&gt;\n#include &lt;openssl/bio.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/buffer.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstatic char* base64_bytes(int size) {\n    char *buff = malloc(size + 1), *bytes = NULL;\n    int chunk;\n    BIO *b64, *out;\n    BUF_MEM *bptr;\n\n    // Create a base64 filter/sink\n    if ((b64 = BIO_new(BIO_f_base64())) == NULL) {\n        return NULL;\n    }\n\n    // Create a memory source\n    if ((out = BIO_new(BIO_s_mem())) == NULL) {\n        return NULL;\n    }\n\n    // Chain them\n    out = BIO_push(b64, out);\n    BIO_set_flags(out, BIO_FLAGS_BASE64_NO_NL);\n\n    // Generate random bytes\n    if (!RAND_bytes(buff, size)) {\n        return NULL;\n    }\n\n    // Write the bytes\n    BIO_write(out, buff, size);\n    BIO_flush(out);\n\n    // Now remove the base64 filter\n    out = BIO_pop(b64);\n\n    // Write the null terminating character\n    BIO_write(out, \"\\0\", 1);\n    BIO_get_mem_ptr(out, &amp;bptr);\n\n    // Allocate memory for the output and copy it to the new location\n    bytes = malloc(bptr-&gt;length);\n    strncpy(bytes, bptr-&gt;data, bptr-&gt;length);\n\n    // Cleanup\n    BIO_set_close(out, BIO_CLOSE);\n    BIO_free_all(out);\n    free(buff);\n\n    return bytes;\n}\n\nint main() {\n    char *b64 = base64_bytes(32);\n    puts(b64);\n\n    free(b64);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<hr>\n\n<p>The main issue with my original attempt was that when the null terminator is passed through the <code>base64</code> filter, it is not recognized as the end of the string, but rather it is converted to base64 which makes the string look the way it did in my original post.</p>\n\n<p>So the suggested solution is to remove the base64 filter from the <code>BIO</code> after writing the original string, this then leaves just the <code>out</code> BIO. Since the <code>out</code> BIO is simply a sink, we can write pretty much anything to it and it does not modify it's input. So this gives the opportunity to write a null terminator into the underlying buffer and retrieve the complete string later.</p>\n"}], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 38361396, "answer_count": 3, "score": 2, "last_activity_date": 1468463562, "creation_date": 1468426412, "last_edit_date": 1468436180, "question_id": 38356835, "link": "https://stackoverflow.com/questions/38356835/non-printable-character-after-generating-random-n-byte-base64-string", "title": "Non-printable character after generating random n-byte Base64 string", "body": "<p>I was trying to generate a 32byte base64 string using openssl, but it does not always produce 32 byte string and sometimes the output is garbled and not displayed correctly</p>\n\n<pre><code>#include &lt;openssl/rand.h&gt;\n#include &lt;openssl/bio.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/buffer.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint Base64Encode(const unsigned char* buffer, unsigned char** b64text) { //Encodes a binary safe base 64 string\n    BIO *bio, *b64;\n    BUF_MEM *bufferPtr;\n\n    b64 = BIO_new(BIO_f_base64());\n    bio = BIO_new(BIO_s_mem());\n    bio = BIO_push(b64, bio);\n\n    BIO_set_flags(bio, BIO_FLAGS_BASE64_NO_NL); //Ignore newlines - write everything in one line\n    BIO_write(bio, buffer, strlen(buffer));\n    BIO_flush(bio);\n    BIO_get_mem_ptr(bio, &amp;bufferPtr);\n    BIO_set_close(bio, BIO_NOCLOSE);\n    BIO_free_all(bio);\n\n    *b64text=bufferPtr-&gt;data;\n\n    return (0); //success\n}\n\nint main() {\n    unsigned char buffer[35], *base64EncodeOutput;\n    int ret = RAND_bytes(buffer, 32);\n    buffer[32]='\\0'; // Null terminate\n\n    (void)Base64Encode(buffer, &amp;base64EncodeOutput);\n    (void)printf(\"Return value of the operation was: %d\\n%s\\n\", ret, base64EncodeOutput);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Compiling and running with <code>gcc rand_str.c -lcrypto &amp;&amp; ./a.out | tail -1</code>, sometimes produces something like:</p>\n\n<p><code>I6YaDVSRPw5Ux+2paY4u4ToMKtZXQoBj`\ufffd</code></p>\n\n<p>And sometimes the output is not even 32 bytes in length.</p>\n\n<p>My goal is to replicate what this command does:\n<code>openssl rand -base64 32</code></p>\n\n<hr>\n\n<p>What do I need to do differently?</p>\n"}, {"tags": ["c", "undefined-reference"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1468425584, "post_id": 38356527, "comment_id": 64125384, "body": "1. Defining functions inside functions is GCC extension and it shouldn&#39;t be used unless it is necessary. 2. <code>&amp;*name</code> can simply be written as <code>name</code>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 4, "creation_date": 1468425590, "post_id": 38356527, "comment_id": 64125389, "body": "Your indentation is poor, so it&#39;s not visible here, but you just tried to declare a function <code>show_record()</code> <i>inside</i> of another function, <code>main</code>. You can&#39;t do that in standard C. (I just updated your indentation to make this more evident)."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1468425668, "post_id": 38356527, "comment_id": 64125445, "body": "Move the last curly brace to before <code>void show_record()</code> line. This should fix the problem."}], "answers": [{"tags": [], "owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "is_accepted": true, "score": 3, "last_activity_date": 1468425712, "creation_date": 1468425712, "answer_id": 38356601, "question_id": 38356527, "link": "https://stackoverflow.com/questions/38356527/c-programming-error-undefined-reference-to-show-record/38356601#38356601", "title": "C programming error: [undefined reference to: &#39;show_record&#39;]", "body": "<p>You've implemented <code>show_record()</code> inside <code>main</code>, which isn't allowed. <code>show_record()</code> needs to be implemented in the global scope where it was also declared, outside of <code>main</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 5824265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/018aab3800e473f7ea3179ebc79b00fa?s=128&d=identicon&r=PG&f=1", "display_name": "user1049876", "link": "https://stackoverflow.com/users/5824265/user1049876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 38356601, "answer_count": 1, "score": -1, "last_activity_date": 1468425869, "creation_date": 1468425460, "last_edit_date": 1468425666, "question_id": 38356527, "link": "https://stackoverflow.com/questions/38356527/c-programming-error-undefined-reference-to-show-record", "title": "C programming error: [undefined reference to: &#39;show_record&#39;]", "body": "<p>I took code from online <a href=\"http://www.codewithc.com/quiz-game-mini-project-in-c/\" rel=\"nofollow\">http://www.codewithc.com/quiz-game-mini-project-in-c/</a> and I was getting errors in the code, so I cut down the code. I am getting an error [undefined reference to: 'show_record'] I cannot solve. Any help or suggestions on how to solve this issue would be greatly appreciated. </p>\n\n<p><strong>Here is a snippet of the code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid show_record();\nvoid reset_score();\nvoid help();\nvoid edit_score(float, char[]);\nint main()\n{\n    int countr, r, r1, count, i, n;\n    float score;\n    char choice;\n    char playername[20];\n\n  mainhome:\n    system(\"clear\");\n    printf(\"\\n\\t\\t\\t   WELCOME \");\n    printf(\"\\n\\t\\t\\t    to \");\n    printf(\"\\n\\t\\t\\t   THE GAME \");\n    printf(\"\\n\\t\\t &gt; Press S to start the game\");\n    printf(\"\\n\\t\\t &gt; Press V to view the highest score  \");\n    printf(\"\\n\\t\\t &gt; Press R to reset score\");\n    printf(\"\\n\\t\\t &gt; press H for help           \");\n    printf(\"\\n\\t\\t &gt; press Q to quit            \");\n    printf(\"\\n\\t\\t________________________________________\\n\\n\");\n\n    choice = toupper(getchar());\n    if (choice == 'V')\n    {\n        show_record();\n        goto mainhome;\n    }\n\n    void show_record()\n    {\n        system(\"clear\");\n        char name[20];\n        float scr;\n        FILE *f;\n\n        f = fopen(\"score.txt\", \"r\");\n        fscanf(f, \"%s%f\", &amp;*name, &amp;scr);\n        printf(\"\\n\\n\\t\\t*************************************************************\");\n        printf(\"\\n\\n\\t\\t %s has secured the Highest Score %0.2f\", name, scr);\n        printf(\"\\n\\n\\t\\t*************************************************************\");\n        fclose(f);\n        getchar();\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "whitespace", "space"], "comments": [{"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1468425166, "post_id": 38356129, "comment_id": 64125059, "body": "scanf() will not handle that as the answer on <a href=\"http://stackoverflow.com/questions/6582322/what-does-space-in-scanf-mean\" title=\"what does space in scanf mean\">stackoverflow.com/questions/6582322/&hellip;</a> shows. try <a href=\"http://stackoverflow.com/questions/3765023/how-do-i-read-white-space-using-scanf-in-c?rq=1\" title=\"how do i read white space using scanf in c\">stackoverflow.com/questions/3765023/&hellip;</a>"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1468425198, "post_id": 38356129, "comment_id": 64125082, "body": "Read characters one-by-one via <code>scanf(&quot;%c&quot;, &amp;character)</code> and convert the string read to integer by yourself is one solution. If using <code>scanf()</code> is not required, <code>getchar()</code> should be better for this usage."}], "answers": [{"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1468426133, "post_id": 38356670, "comment_id": 64125743, "body": "The <code>scanf( &quot;%*s&quot; )</code> call is not undefined because of the presence of the assignment suppression character <code>*</code>; it will read, but not attempt to assign, the next input string."}, {"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1468426809, "post_id": 38356670, "comment_id": 64126165, "body": "my mistake... fixing"}, {"owner": {"reputation": 7, "user_id": 6584834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YwMoa.png?s=128&g=1", "display_name": "William Luisan", "link": "https://stackoverflow.com/users/6584834/william-luisan"}, "edited": false, "score": 0, "creation_date": 1468432189, "post_id": 38356670, "comment_id": 64129337, "body": "this is the answer what was i wish, exactly fix my curiosity problem. Thnx bro (y) !"}], "tags": [], "owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "is_accepted": true, "score": 0, "last_activity_date": 1468426825, "last_edit_date": 1468426825, "creation_date": 1468425918, "answer_id": 38356670, "question_id": 38356129, "link": "https://stackoverflow.com/questions/38356129/c-programming-allow-determine-check-space-32-input-in-integer/38356670#38356670", "title": "C Programming - Allow / determine / check &quot;space (&amp;#32)&quot; input in integer", "body": "<p><code>scanf</code> will ignore white spaces and keep looking until it finds a non-white space before trying to do a conversion. </p>\n\n<p>I would recommend using fgets to get a line of input and then process the with sscanf. Something like this: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {    \n    int number=-1;    \n    printf(\"Input a number : \");\n    do {\n        char line[80];\n        if(!fgets(line,sizeof(line),stdin)){\n            printf(\"line read error\\n\");\n            exit(1);\n        }\n        if (sscanf(line,\"%d\", &amp;number) !=1) {\n            printf(\"retry : \");\n        } else if (number &lt; 0) {\n            printf(\"retry : \");\n        }\n    } while ( number &lt; 0); \n    printf(\"%d\\n\", number);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1468426500, "last_edit_date": 1468426500, "creation_date": 1468426004, "answer_id": 38356700, "question_id": 38356129, "link": "https://stackoverflow.com/questions/38356129/c-programming-allow-determine-check-space-32-input-in-integer/38356700#38356700", "title": "C Programming - Allow / determine / check &quot;space (&amp;#32)&quot; input in integer", "body": "<p>the format specifier '%*s' will stop inputting characters when it encounters a white space (tab, space, newline) so if the user inputs any of those characters they will not be consumed.</p>\n\n<p>the '%d' will consume all such leading white space.</p>\n\n<p>when the user enters some 'valid' number, then the code will drop through to the 'else' statement</p>\n\n<p>when the user enters some ascii value, like 'a' then the '%d' will finish inputting and the code will drop through to the 'else' statement.\nAt that time, the 'number' variable will not have been set\nSo 'number' will contain what every trash that happened to be on the stack where the 'number variable is located.\nThat 'may' happen to be a integer greater than 0.</p>\n\n<p>The value returned from the call to 'scanf()' can be something other than 0 or 1, like EOF</p>\n\n<p>the 'backspace' will be consumed by the terminal driver, so never reach the program.</p>\n\n<p>so your program does exactly what is to be expected, but probably not what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 6584834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YwMoa.png?s=128&g=1", "display_name": "William Luisan", "link": "https://stackoverflow.com/users/6584834/william-luisan"}, "edited": false, "score": 0, "creation_date": 1468433019, "post_id": 38357564, "comment_id": 64129892, "body": "cool answer too bro, thnx for helping, gonna put this to my curiosity library (y) !"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1468428801, "creation_date": 1468428801, "answer_id": 38357564, "question_id": 38356129, "link": "https://stackoverflow.com/questions/38356129/c-programming-allow-determine-check-space-32-input-in-integer/38357564#38357564", "title": "C Programming - Allow / determine / check &quot;space (&amp;#32)&quot; input in integer", "body": "<p><code>%s</code> will skip over any leading whitespace, then read <em>non</em>-whitespace characters until it sees whitespace again.  So, that <code>scanf( \"*%s\" );</code> call will block until it sees at least one non-whitespace character.  </p>\n\n<p>The <code>%[</code> conversion specifier will <em>not</em> skip over any leading whitespace, so that may be an acceptable substitute:</p>\n\n<pre><code>scanf( \"%*[^\\n]\" );\n</code></pre>\n\n<p>This \"works\" in a quick and dirty test, although to be honest the better approach is to read all input as text, then use <code>strtol</code> to convert the text to the target type.  Here's a working example of what I mean:      </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\n#define BUF_SIZE 20\n\nint main( void )\n{\n  int value = -1;\n  char buf[BUF_SIZE];\n\n  do\n  {\n    printf( \"Gimme a non-negative value: \" );\n    if ( fgets( buf, sizeof buf, stdin ) )\n    {\n      char *newline = strchr( buf, '\\n' );\n      if ( !newline )\n      {\n        printf( \"Input too long for buffer, flushing...\" );\n        while ( fgets( buf, sizeof buf, stdin ) &amp;&amp; !strchr( buf, '\\n' ) )\n          ;\n        printf( \"try again\\n\" );\n      }\n      else\n      {\n        *newline = 0; // Remove the newline character from the buffer\n\n        char *chk;    // chk will point to the first character *not* converted\n                      // by strtol.  If that character is anything other\n                      // than 0 or whitespace, then the input string was\n                      // not a valid integer.\n\n        int tmp = (int) strtol( buf, &amp;chk, 0 );\n        if ( *chk != 0 &amp;&amp; !isspace( *chk ) )\n        {\n          printf( \"%s is not a valid integer, try again\\n\", buf );\n        }\n        else if ( tmp &lt; 0 )\n        {\n          printf( \"%d is negative, try again\\n\", tmp );\n        }\n        else\n        {\n          value = tmp;\n        }\n      }\n    }\n    else\n    {\n      printf( \"Input failure, bailing out completely\\n\" );\n      break;\n    }\n  } while ( value &lt; 0 );\n\n  printf( \"value is %d\\n\", value );\n  return 0;\n}\n</code></pre>\n\n<p>And, here is an example from a run, exercising each test case:</p>\n\n<pre><code>$ ./format2\nGimme a non-negative value: Supercalifragilisticexpealidocious\nInput too long for buffer, flushing...try again\nGimme a non-negative value: 123fgh\n123fgh is not a valid integer, try again\nGimme a non-negative value: -12345\n-12345 is negative, try again\nGimme a non-negative value: 1234\nvalue is 1234\n</code></pre>\n\n<p>And to test the <code>fgets</code> failure, I type <kbd>Ctrl</kbd>-<kbd>d</kbd> to send <code>EOF</code>:</p>\n\n<pre><code>$ ./format2\nGimme a non-negative value: Input failure, bailing out completely\nvalue is -1\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6584834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YwMoa.png?s=128&g=1", "display_name": "William Luisan", "link": "https://stackoverflow.com/users/6584834/william-luisan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1417, "favorite_count": 0, "accepted_answer_id": 38356670, "answer_count": 3, "score": 0, "last_activity_date": 1468428801, "creation_date": 1468424347, "question_id": 38356129, "link": "https://stackoverflow.com/questions/38356129/c-programming-allow-determine-check-space-32-input-in-integer", "title": "C Programming - Allow / determine / check &quot;space (&amp;#32)&quot; input in integer", "body": "<p>First, sorry for my bad english, okay go to this question above. I was surfing a lot for reference about this question on many websites, but i didn't find the right answer yet.</p>\n\n<p>I'm trying to make a C program which this program can determine if the user input an integer or not, if user didn't input an integer then the program retry prompt to user for input an integer and so on. Everything is ok when i use scanf() return value on conditional statement, but the problem is, when user input 'whitespace/blankspace/space' (on ascii code as &amp;#32) and press 'enter', my program just stay running to wait for user input some characters or integer. </p>\n\n<p>I just wish that if the input is 'whitespace/blackspace/space', the program will repeat prompt to user to input an integer or the program just stop.</p>\n\n<p>Here is the case code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    int number, isInt;\n\n    printf(\"Input a number : \");\n\n    do {\n        if ((isInt = scanf(\"%d\", &amp;number)) == 0) {\n            printf(\"retry : \");\n            scanf(\"%*s\");\n        } else if (number &lt; 0) {\n            printf(\"retry : \");\n        }\n    } while (isInt == 0 || number &lt; 0); \n\n    printf(\"%d\\n\", number);\n\n    return 0;\n}\n</code></pre>\n\n<p>I am a newbie in C, and curious about this. I know if i use %[^\\n] &lt;-- code format for scanf() string and convert it to integer, the program that i mean will run correctly. Is there another way to solve this using %d code format? or using scanf() ?</p>\n\n<p>Please help me to break my curiosity, Regards :D</p>\n"}, {"tags": ["c", "eof"], "comments": [{"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 1, "creation_date": 1468424620, "post_id": 38356023, "comment_id": 64124668, "body": "Note that condition is <code>&gt; 0</code> and <code>i</code> may be <code>== 0</code>, that&#39;s when loop breks..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1468427650, "post_id": 38356023, "comment_id": 64126650, "body": "<code>getline()</code> has a weakness.  What is the point of <code>if (c == &#39;\\n&#39;) {         s[i] = c;     }</code>?, the next line <code>s[i] = &#39;\\0&#39;;</code> overwrite <code>s[i]</code>.  BTW, do not only replace with <code>s[i++] = c;</code>, that makes another problem (potential buffer overrun)"}], "answers": [{"tags": [], "owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "is_accepted": false, "score": 0, "last_activity_date": 1468424214, "creation_date": 1468424214, "answer_id": 38356090, "question_id": 38356023, "link": "https://stackoverflow.com/questions/38356023/kr-section-1-9/38356090#38356090", "title": "K&amp;R section 1.9", "body": "<p>The while loop terminates as the condition is false (once EOF has been encountered all further getchar requests also return EOF)</p>\n"}, {"tags": [], "owner": {"reputation": 5801, "user_id": 2586392, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9d89d4072afb4457b0c49131d8d258f5?s=128&d=identicon&r=PG", "display_name": "rpadovani", "link": "https://stackoverflow.com/users/2586392/rpadovani"}, "is_accepted": false, "score": 0, "last_activity_date": 1468424576, "last_edit_date": 1468424576, "creation_date": 1468424223, "answer_id": 38356095, "question_id": 38356023, "link": "https://stackoverflow.com/questions/38356023/kr-section-1-9/38356095#38356095", "title": "K&amp;R section 1.9", "body": "<p>Let's look the <code>getline()</code> function.</p>\n\n<p>We have a <em>for</em> cycle which initialize the <code>i</code> to 0. Then, a condition is checked. One of the 3 conditions is <code>(c = getchar())!=EOF</code>.</p>\n\n<p>So, if EOF is inserted, the for body isn't executed.</p>\n\n<p>If <code>EOF</code> has been the first inserted char, the <code>i</code> is still <code>0</code>, so the <code>getline()</code> function returns 0.</p>\n\n<p>If <code>EOF</code> isn't the first inserted character, the code continues to run and doesn't end the cycle in the main because <code>i</code> became > 0.</p>\n\n<p>The check on the while in the <code>main()</code> is <code>while((len = getline(line, MAXLINE)) &gt; 0)</code>, so while the return value is <strong>strictly</strong> > 0.</p>\n\n<p><code>if (0 &gt; 0) printf(\"true\"); else printf(\"false\");</code> prints <code>false</code> in C (and in every language I'm aware of).</p>\n\n<p>Therefore the while body isn't executed, and the cycle ends.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6585222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/858aedfd2907dd4fc342c29b562d85be?s=128&d=identicon&r=PG&f=1", "display_name": "Hrushikesh HRK", "link": "https://stackoverflow.com/users/6585222/hrushikesh-hrk"}, "edited": false, "score": 0, "creation_date": 1468425464, "post_id": 38356312, "comment_id": 64125286, "body": "so when the first EOF is encountered current string is returned. and while loop is executed. During the next iteration since EOF occurred earlier current value of C is again EOF and getline() returns 0, is this correct?"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 0, "last_activity_date": 1468424849, "creation_date": 1468424849, "answer_id": 38356312, "question_id": 38356023, "link": "https://stackoverflow.com/questions/38356023/kr-section-1-9/38356312#38356312", "title": "K&amp;R section 1.9", "body": "<p>Simply put:</p>\n\n<p>if <code>EOF</code> is encountered, then <code>getline</code> returns whatever it has read up to the <code>EOF</code>.</p>\n\n<p>In any next call of <code>getline()</code> it reads <code>EOF</code> again and so will return zero.</p>\n"}], "owner": {"reputation": 15, "user_id": 6585222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/858aedfd2907dd4fc342c29b562d85be?s=128&d=identicon&r=PG&f=1", "display_name": "Hrushikesh HRK", "link": "https://stackoverflow.com/users/6585222/hrushikesh-hrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 38356312, "answer_count": 3, "score": 1, "last_activity_date": 1468424849, "creation_date": 1468424010, "question_id": 38356023, "link": "https://stackoverflow.com/questions/38356023/kr-section-1-9", "title": "K&amp;R section 1.9", "body": "<p>I am working through Ritchie's and Kernighan's The C programming language, and I don't understand how the following code works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAXLINE 1000\n\nint getline(char line[], int maxline);\nvoid copy(char to[], char from[]);\n\nint main()\n{\n    int len;\n    int max;\n    char line[MAXLINE];\n    char longest[MAXLINE];\n\n    max = 0;\n    while((len = getline(line, MAXLINE)) &gt; 0)\n        if (len &gt; max) {\n            max = len;\n            copy(longest, line);\n        }\n    if (max &gt; 0)\n        printf(\"%s\", longest);\n    return(0);\n}\n\nint getline(char s[], int lim)\n{\n    int c, i;\n\n    for (i=0; i&lt;lim-1 &amp;&amp; (c = getchar())!=EOF &amp;&amp; c!='\\n'; ++i)\n        s[i] = c;\n    if (c == '\\n') {\n        s[i] = c;\n    }\n    s[i] = '\\0';\n    return(i);\n}\n\nvoid copy(char to[], char from[])\n{\n    int i;\n\n    i = 0;\n    while ((to[i] = from[i]) != '\\0')\n        ++i;\n}    \n</code></pre>\n\n<p>In the code ABOVE \nThe getline() function returns value of i</p>\n\n<p>and the while loop in the main runs till the time getline returns a positive value of i.</p>\n\n<p>so how does the while loop terminates when EOF is encountered in the getline() function?</p>\n"}, {"tags": ["c", "arm", "embedded", "stm32f7"], "comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1468424779, "post_id": 38355831, "comment_id": 64124783, "body": "According to the Cortex-M7 TRM, <a href=\"http://infocenter.arm.com/help/topic/com.arm.doc.ddi0489c/BABJFFGJ.html\" rel=\"nofollow noreferrer\">DWT_LAR is a <i>write-only</i> register</a>..."}, {"owner": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1468425562, "post_id": 38355831, "comment_id": 64125365, "body": "Oh, my bad, I didn&#39;t notice that, still it seems like I am able to read from it sometimes. Anyways if we overlook my mistake, I still get 0 clock cycles when I: start the counter -&gt; call a function I want to measure -&gt; stop counter -&gt; read clock cycles.  I have tried without any read from the LAR register if that would ruin it and it still don&#39;t work."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468429135, "post_id": 38355831, "comment_id": 64127506, "body": "does your cortex-m7 have that feature implemented?  There are other timers (systick) which if implemented can also count the ARM core clocks."}, {"owner": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "edited": false, "score": 0, "creation_date": 1468433326, "post_id": 38355831, "comment_id": 64130076, "body": "When I read DWT_CTRL it says 0x40000000, according to <a href=\"https://web.eecs.umich.edu/~prabal/teaching/eecs373-f10/readings/ARMv7-M_ARM.pdf\" rel=\"nofollow noreferrer\">web.eecs.umich.edu/~prabal/teaching/eecs373-f10/readings/&hellip;</a> page C1-48 and C1-49 the 25th bit NOCYCCNT should be 1 if CYCCNT is not supported and it is 0 in this case. Hope I answered what you asked."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468443600, "post_id": 38355831, "comment_id": 64135569, "body": "hmm so far I get 0x00000000 when I read 0xE0001000, I do get 0xFFF02003 when I read 0xE00FF004"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468443728, "post_id": 38355831, "comment_id": 64135630, "body": "Table 11-1 shows the DWT registers. Depending on the implementation of your processor, some of these registers might not be present. Any register that is configured as not present reads as zero"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468443757, "post_id": 38355831, "comment_id": 64135643, "body": "I am using an stm32f7 discovery with the STM32F746NGH6 microcontroller"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468444689, "post_id": 38355831, "comment_id": 64136046, "body": "okay caught up, when setting TRCENA in DEMCR I also see 0x40000000 but no count in the DWT counter."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468445171, "post_id": 38355831, "comment_id": 64136311, "body": "trying to set the lower bits (including the cycle count enable) in DWT control, they read back as zeros.  so is it really writing to dwt control?"}, {"owner": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "edited": false, "score": 0, "creation_date": 1468448753, "post_id": 38355831, "comment_id": 64137768, "body": "No, it doesn&#39;t and that is the effect of the problem that I&#39;m trying to describe. I somehow need to be able to alter bit 0 in DWT_CTRL. I will try Notlikethat&#39;s answer below and get back with the result :)"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468467471, "post_id": 38355831, "comment_id": 64142049, "body": "From my own experiments it does appear that DWT_LAR and DWT_LSR are at 0xE0001FB0 and 0xE0001FB4.   The arm documentation is wrong, but the TRM table does look a bit fishy having only those two registers without the 0x1xxx"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1468485064, "post_id": 38355831, "comment_id": 64149445, "body": "If you have &quot;read in other posts&quot; it is useful to provide a link or citation so we can check that what you are reading is truly relevant.  CM7 has no FP_LAR register AFAIK, so it is unclear what you are referring to - though I make an educated guess in my answer, and it differs from the register you are accessing."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1468485921, "post_id": 38355831, "comment_id": 64149985, "body": "I have reported the documentation error to ARM via their online documentation feedback."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "edited": false, "score": 0, "creation_date": 1468447449, "post_id": 38360668, "comment_id": 64137284, "body": "Okay I will definitely try that when I get back on Monday and get back to you. I also read somewhere else that the reference was wrong but he suggested 0xe000<b>2</b>fb0 instead but I tried that and it didn&#39;t work."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "reply_to_user": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "edited": false, "score": 0, "creation_date": 1468447865, "post_id": 38360668, "comment_id": 64137431, "body": "Yeah, e0002fb0 would look to be the corresponding lock for the FPB unit, as I hinted at. Seems the guy in the middle is the only one nobody tried ;)"}, {"owner": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "edited": false, "score": 0, "creation_date": 1468448192, "post_id": 38360668, "comment_id": 64137565, "body": "Yes, also I guess I should change <code>FP_LAR_PTR</code> int the code to <code>DWT_LAR_PTR</code>, I got confused when researching this :)"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468467388, "post_id": 38360668, "comment_id": 64142034, "body": "@Notlikethat I edited your answer instead of adding my own this was your finding I just did the experiment a few days earlier than the OP.  Please re-edit to your liking (or remove my edit all together, whatever)."}, {"owner": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "edited": false, "score": 0, "creation_date": 1468835769, "post_id": 38360668, "comment_id": 64272833, "body": "0xe0001fb0 worked for me also! Only thing now is that it actually shows more clock cycles for a dft and fft operation compared to the m4, but that is a different problem :)"}], "tags": [], "owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "is_accepted": true, "score": 3, "last_activity_date": 1468467279, "last_edit_date": 1468467279, "creation_date": 1468439962, "answer_id": 38360668, "question_id": 38355831, "link": "https://stackoverflow.com/questions/38355831/measuring-clock-cycle-count-on-cortex-m7/38360668#38360668", "title": "Measuring clock cycle count on cortex m7", "body": "<p>Looking at the docs again, I'm now incredibly suspicious of a typo or copy-paste error in the ARM TRM. 0xe0000fb0 is given as the address of ITM_LAR, DWT_LAR <em>and</em> FP_LSR (and equivalently for *_LSR). Since all the other ITM registers <em>are</em> in page 0xe0000000, it looks an awful lot like whoever was responsible for that part of the Cortex-M7 documentation took the Cortex-M4 register definitions, added the new LAR and LSR to the ITM page, then copied them to the DWT and FPB pages updating the names but overlooking to update the addresses.</p>\n\n<p>I'd bet my dinner that you're unwittingly unlocking ITM_LAR (or the real FP_LAR), and DWT_LAR is actually at 0xe000<strong>1</strong>fb0.</p>\n\n<p>EDIT by dwelch</p>\n\n<p>Somebody owes somebody a dinner.</p>\n\n<pre><code>hexstring(GET32(0xE0001FB4));\nhexstring(GET32(0xE0001000));\nhexstring(GET32(0xE0001004));\nhexstring(GET32(0xE0001004));\n\nPUT32(0xE000EDFC,0x01000000);\n\nhexstring(GET32(0xE0001FB4));\nhexstring(GET32(0xE0001000));\nhexstring(GET32(0xE0001004));\nhexstring(GET32(0xE0001004));\n\nPUT32(0xE0001000,0x40000001);\n\nhexstring(GET32(0xE0001FB4));\nhexstring(GET32(0xE0001000));\nhexstring(GET32(0xE0001004));\nhexstring(GET32(0xE0001004));\n\nPUT32(0xE0001FB0,0xC5ACCE55);\nPUT32(0xE0001000,0x40000001);\n\nhexstring(GET32(0xE0001FB4));\nhexstring(GET32(0xE0001000));\nhexstring(GET32(0xE0001004));\nhexstring(GET32(0xE0001004));\n</code></pre>\n\n<p>output</p>\n\n<pre><code>00000000\n00000000\n00000000\n00000000\n00000003\n40000000\n00000000\n00000000\n00000003\n40000000\n00000000\n00000000\n00000001\n40000001\n0000774F\n0000B311\n</code></pre>\n\n<p>The table in the TRM is funny looking and as the other documentation shows you add the 0xFB0 and 0xFB4 to the base, the rest of the DWT for the Cortex-M7 is 0xE0001xxx and indeed it appears that the LAR and LSR are ate 0xE0001FB0 and 0xE0001FB4.</p>\n"}, {"comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468503352, "post_id": 38369112, "comment_id": 64161752, "body": "You are going on the assumption that CMSIS is correct.  Which is equally bad/good as assuming the docs are correct.  Someone wrote the CMSIS headers using some resource.  The wise thing to do for a company is have one database of information and generate the documentation addresses and header files from that.  I would bet that is the exception not the rule.  CMSIS has its own baggage, maybe cut and paste from it when in doubt, but dont assume it is any more correct than the docs."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468503414, "post_id": 38369112, "comment_id": 64161797, "body": "Likewise how do the docs get fixed if nobody reads them?  I already posted a ticket to arm on this one, will see where it goes but at least someone there has been notified."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468528521, "post_id": 38369112, "comment_id": 64177477, "body": "@dwelch : I am assuming nothing; I am simply saying that the CMSIS is amenable to automated unit testing and validation in a way that the documentation is not.  Even if the the CMSIS were to match the documentation, it would be no worse than user implemented code from the documentation - why reinvent it?  Moreover the core_cmX is fundamental to the entirety of the CMSIS and used by thousands of projects - many more developers than would probably have read the documentation to that level of detail.  In the CMSIS and DWT_LAR/LSR differ from the documentation (and ITM) which is more plausible."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1468529064, "post_id": 38369112, "comment_id": 64177758, "body": "@dwelch :  You still have to read the documentation to know what the registers are for and how they work - the CMSIS won&#39;t tell you that.  In this case it is certainly true that using the CMSIS would have avoided the problem.  Were I to use the CMSIS and find a problem I&#39;d cross-check the documentation in the same way (reversed), but starting with the CMSIS would be less work."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1468529150, "post_id": 38369112, "comment_id": 64177799, "body": "@Clifford FWIW, FP_LAR is the CoreSight LAR for the <a href=\"https://developer.arm.com/docs/ddi0489/latest/9-debug/93-about-the-fpb/932-fpb-programmers-model\" rel=\"nofollow noreferrer\">Flash Patch/Breakpoint Unit</a> (which doesn&#39;t actually support the thing it&#39;s primarily named after, go figure...)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1468529975, "post_id": 38369112, "comment_id": 64178223, "body": "@Notlikethat : Ah! FP = FlashPatch (not floating-point).  In thi scase however it seems more likely that DWT_LAR/LSR were intended.  The documentation is incorrect for the FP_LAR/LSR too.  The FPB is not defined in the CMSIS core_cm7.h - I would expect it to be of more use to debuggers rather then direct access from the code - moreover it is not implemented on all CM7 devices."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1611573808, "last_edit_date": 1611573808, "creation_date": 1468484781, "answer_id": 38369112, "question_id": 38355831, "link": "https://stackoverflow.com/questions/38355831/measuring-clock-cycle-count-on-cortex-m7/38369112#38369112", "title": "Measuring clock cycle count on cortex m7", "body": "<p>I would advise against creating your own register definitions when they are defined as part of the CMSIS - to do so requires that both the documentation and your interpretation of it are correct.  In this case it appears that the documentation is indeed incorrect, but that the CMSIS headers are correct.  It is a lot easier to validate the CMSIS headers automatically than it is to verify the documentation is correct, so I would trust the CMSIS every time.</p>\n<p>I am not sure what register <code>FP_LAR</code> might refer to, but your address assignment refers to <code>ITM_LAR</code>, but it seems more likely that you intended <code>DWT_LAR</code> which Cortex-M4 lacks.</p>\n<p>Despite my advice to trust it, CMSIS 4.00 omits to define masks for <code>DWT_LSR</code>/<code>SWT_LAR</code>, but I believe they are identical to the corresponding ITM masks.</p>\n<p>Note also that the <code>LAR</code> is a <em>write-only</em> register - any attempt to read it is meaningless.</p>\n<p>Your code using CMSIS would be:</p>\n<pre><code>#include &quot;core_cm7.h&quot;  // Applies to all Cortex-M7\n\nvoid reset_cnt()\n{\n    CoreDebug-&gt;DEMCR |= 0x01000000;\n    DWT-&gt;CYCCNT = 0; // reset the counter\n    DWT-&gt;CTRL = 0; \n}\n\nvoid start_cnt()\n{\n    DWT-&gt;CTRL |= 0x00000001 ; // enable the counter\n}\n\nvoid stop_cnt()\n{\n     DWT-&gt;CTRL &amp;= 0xFFFFFFFE ; // disable the counter    \n}\n\nunsigned int getCycles()\n{\n    return DWT-&gt;CYCCNT ;\n}\n\n// Not defined in CMSIS 4.00 headers - check if defined\n// to allow for possible correction in later versions\n#if !defined DWT_LSR_Present_Msk \n    #define DWT_LSR_Present_Msk ITM_LSR_Present_Msk\n#endif\n#if !defined DWT_LSR_Access_Msk \n    #define DWT_LSR_Access_Msk ITM_LSR_Access_Msk\n#endif\n#define DWT_LAR_KEY 0xC5ACCE55\n\nvoid dwt_access_enable( unsigned ena )\n{\n    uint32_t lsr = DWT-&gt;LSR;;\n\n    if( (lsr &amp; DWT_LSR_Present_Msk) != 0 ) \n    {\n        if( ena ) \n        {\n            if ((lsr &amp; DWT_LSR_Access_Msk) != 0) //locked: access need unlock\n            {    \n                DWT-&gt;LAR = DWT_LAR_KEY;\n            }\n        } \n        else \n        {\n            if ((lsr &amp; DWT_LSR_Access_Msk) == 0) //unlocked\n            {   \n                DWT-&gt;LAR = 0;\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6584943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2adf080ad02bce4ce01b4be355fdde18?s=128&d=identicon&r=PG&f=1", "display_name": "G. Johnsson", "link": "https://stackoverflow.com/users/6584943/g-johnsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2890, "favorite_count": 5, "accepted_answer_id": 38360668, "answer_count": 2, "score": 9, "last_activity_date": 1611573808, "creation_date": 1468423499, "last_edit_date": 1468447645, "question_id": 38355831, "link": "https://stackoverflow.com/questions/38355831/measuring-clock-cycle-count-on-cortex-m7", "title": "Measuring clock cycle count on cortex m7", "body": "<p>I have been measuring clock cycle count on the cortex m4 and would now like to do it on the cortex m7. The board I use is STM32F746ZG. </p>\n\n<p>For the m4 everything worked with:</p>\n\n<pre><code>volatile unsigned int *DWT_CYCCNT;\nvolatile unsigned int *DWT_CONTROL;\nvolatile unsigned int *SCB_DEMCR;\n\nvoid reset_cnt(){\n    DWT_CYCCNT   = (volatile unsigned int *)0xE0001004; //address of the register\n    DWT_CONTROL  = (volatile unsigned int *)0xE0001000; //address of the register\n    SCB_DEMCR    = (volatile unsigned int *)0xE000EDFC; //address of the register\n    *SCB_DEMCR   = *SCB_DEMCR | 0x01000000;\n    *DWT_CYCCNT  = 0; // reset the counter\n    *DWT_CONTROL = 0; \n}\n\nvoid start_cnt(){\n    *DWT_CONTROL = *DWT_CONTROL | 0x00000001 ; // enable the counter\n}\n\nvoid stop_cnt(){\n     *DWT_CONTROL = *DWT_CONTROL &amp; 0xFFFFFFFE ; // disable the counter    \n}\n\nunsigned int getCycles(){\n    return *DWT_CYCCNT;\n}\n</code></pre>\n\n<p>The problem is that the DWT_CTRL register isn't changed when I run on the m7 and remains 0x40000000 instead of changing to 0x40000001 so the cycle count is always zero. From what I have read in other posts it seems like you need to set the FP_LAR register to 0xC5ACCE55 to be able to change DWT_CTRL.</p>\n\n<p>I added these defines (have tried both FP_LAR_PTR addresses below):</p>\n\n<pre><code>#define FP_LAR_PTR ((volatile unsigned int *) 0xe0000fb0) //according to reference\n//#define FP_LAR_PTR ((volatile unsigned int *) 0xe0002fb0) //according to guy on the internet\n// Lock Status Register lock status bit\n#define DWT_LSR_SLK_Pos                1\n#define DWT_LSR_SLK_Msk                (1UL &lt;&lt; DWT_LSR_SLK_Pos)\n// Lock Status Register lock availability bit\n#define DWT_LSR_SLI_Pos                0\n#define DWT_LSR_SLI_Msk                (1UL &lt;&lt; DWT_LSR_SLI_Pos)\n// Lock Access key, common for all\n#define DWT_LAR_KEY                    0xC5ACCE55\n</code></pre>\n\n<p>and this function:</p>\n\n<pre><code>void dwt_access_enable(unsigned int ena){\n    volatile unsigned int *LSR;\n    LSR = (volatile unsigned int *) 0xe0000fb4;\n    uint32_t lsr = *LSR;;\n    //printf(\"LSR: %.8X - SLI MASK: %.8X\\n\", lsr, DWT_LSR_SLI_Msk);\n\n    if ((lsr &amp; DWT_LSR_SLI_Msk) != 0) {\n        if (ena) {\n            //printf(\"LSR: %.8X - SLKMASK: %.8X\\n\", lsr, DWT_LSR_SLK_Msk);\n            if ((lsr &amp; DWT_LSR_SLK_Msk) != 0) {    //locked: access need unlock\n                *FP_LAR_PTR = DWT_LAR_KEY;\n                printf(\"FP_LAR directly after change: 0x%.8X\\n\", *FP_LAR_PTR);\n            }\n        } else {\n            if ((lsr &amp; DWT_LSR_SLK_Msk) == 0) {   //unlocked\n                *FP_LAR_PTR = 0;\n                 //printf(\"FP_LAR directly after change: 0x%.8X\\n\", *FP_LAR_PTR);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When I call the uncommented print I get 0xC5ACCE55 but when I printed it after the return of the function I get 0x00000000 and I have no idea why. Am I on the right track or is this completely wrong?</p>\n\n<p>Edit: I think it also would be good to mention that I have tried without all the extra code in the function and only tried to change the LAR register.</p>\n\n<p>BR \nGustav</p>\n"}, {"tags": ["c", "sdl-2"], "comments": [{"owner": {"reputation": 458, "user_id": 2598455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10292c97171ec40cfe485635be47a22?s=128&d=identicon&r=PG", "display_name": "Artur Kink", "link": "https://stackoverflow.com/users/2598455/artur-kink"}, "edited": false, "score": 1, "creation_date": 1468427771, "post_id": 38355739, "comment_id": 64126724, "body": "Check for return value of SDL_Init?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1468442448, "post_id": 38355739, "comment_id": 64135011, "body": "Check all of the return values."}, {"owner": {"reputation": 1, "user_id": 6584257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57beca174b54af5a8a48e1871044bc21?s=128&d=identicon&r=PG&f=1", "display_name": "AnthonyF", "link": "https://stackoverflow.com/users/6584257/anthonyf"}, "edited": false, "score": 0, "creation_date": 1468517373, "post_id": 38355739, "comment_id": 64170978, "body": "Yes i ve tried to write in stderr but i cannot find it"}, {"owner": {"reputation": 1, "user_id": 6584257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57beca174b54af5a8a48e1871044bc21?s=128&d=identicon&r=PG&f=1", "display_name": "AnthonyF", "link": "https://stackoverflow.com/users/6584257/anthonyf"}, "edited": false, "score": 0, "creation_date": 1468517449, "post_id": 38355739, "comment_id": 64171019, "body": "I created a file* &quot;err.txt&quot;, but nothing written"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6593746, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wMM1gUY6IUI/AAAAAAAAAAI/AAAAAAAAAI4/AwLFxurM-RE/photo.jpg?sz=128", "display_name": "CrishNate", "link": "https://stackoverflow.com/users/6593746/crishnate"}, "is_accepted": false, "score": 0, "last_activity_date": 1468669967, "creation_date": 1468669967, "answer_id": 38410932, "question_id": 38355739, "link": "https://stackoverflow.com/questions/38355739/no-sdl2-window-shown-when-compile-and-run/38410932#38410932", "title": "No SDL2 window shown when compile and run", "body": "<p>Maybe your window just creates and immediately closing?. Try replace your <code>SDL_Delay</code> with:</p>\n\n<pre><code>bool quit = false;\nmainEvent = new SDL_Event();\n\nwhile (!quit &amp;&amp; mainEvent-&gt;type != SDL_QUIT) {\n    SDL_PollEvent(mainEvent);\n    //...\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6584257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57beca174b54af5a8a48e1871044bc21?s=128&d=identicon&r=PG&f=1", "display_name": "AnthonyF", "link": "https://stackoverflow.com/users/6584257/anthonyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468669967, "creation_date": 1468423196, "last_edit_date": 1468509236, "question_id": 38355739, "link": "https://stackoverflow.com/questions/38355739/no-sdl2-window-shown-when-compile-and-run", "title": "No SDL2 window shown when compile and run", "body": "<p>I use DevC++ on Windowss 10 but my problem is that I followed some tutorials about SDL2 in C but when I write the program they give, it compiles well, however I can't see my window.\nThe problem may come from the \"searched directories \" as I had issues to install SDL2 on DevC++</p>\n\n<pre><code>// Code :\n\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;SDL2\\SDL.h&gt;\n\n\nint main(int argc, char* argv[])\n{\n\n    SDL_Window *ecran = NULL;\n    SDL_Renderer *renderer;\n\n    SDL_Init(SDL_INIT_VIDEO);\n\necran = SDL_CreateWindow(\"DBZ\", 0, 0, 640, 480, SDL_WINDOW_SHOWN);\nrenderer = SDL_CreateRenderer(ecran, -1, SDL_RENDERER_ACCELERATED);\n\nSDL_RenderPresent(renderer);\n\nSDL_Delay(30000);\nSDL_Quit();\n\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<h2>Compiling project changes...</h2>\n\n<ul>\n<li>Project Filename: C:\\Users\\Anthony\\Desktop\\programmes\\SDL\\Premier essai\\Projet1.dev</li>\n<li>Compiler Name: TDM-GCC 4.9.2 64-bit Release</li>\n</ul>\n\n<h2>Building makefile...</h2>\n\n<ul>\n<li>Filename: C:\\Users\\Anthony\\Desktop\\programmes\\SDL\\Premier essai\\Makefile.win</li>\n</ul>\n\n<h2>Processing makefile...</h2>\n\n<ul>\n<li>Makefile Processor: C:\\Users\\Anthony\\Desktop\\Dev-Cpp\\MinGW64\\bin\\mingw32-make.exe</li>\n<li>Command: mingw32-make.exe -f \"C:\\Users\\Anthony\\Desktop\\programmes\\SDL\\Premier essai\\Makefile.win\" all</li>\n</ul>\n\n<p>mingw32-make.exe: Nothing to be done for 'all'.</p>\n\n<h2>Compilation results...</h2>\n\n<ul>\n<li>Errors: 0</li>\n<li>Warnings: 0</li>\n<li>Output Filename: C:\\Users\\Anthony\\Desktop\\programmes\\SDL\\Premier essai\\Projet1.exe</li>\n<li>Output Size: 298,20703125 KiB</li>\n<li>Compilation Time: 0,22s</li>\n</ul>\n"}, {"tags": ["c", "linux", "struct", "operating-system", "kernel"], "comments": [{"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1468423309, "post_id": 38355494, "comment_id": 64123775, "body": "What do you want to use the variable <code>temp</code> for, in your real program. I&#39;m asking because most probably there is better solution which doesn&#39;t need <code>struct task_struct</code> at all."}, {"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "reply_to_user": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1468423782, "post_id": 38355494, "comment_id": 64124108, "body": "@pts , Today I am learning about process and while going through it I came to know that operating systems internally uses task_struct for storing the information related to a process and I just want to see them working via a C code"}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1468424881, "post_id": 38355494, "comment_id": 64124859, "body": "Let&#39;s suppose you figure out what to <code>#include</code>. Your program will still not work as intended, because you didn&#39;t initialize the the <code>temp</code> variable, so <code>temp.pid</code> contains garbage."}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1468424986, "post_id": 38355494, "comment_id": 64124934, "body": "@Gaurav Joshi: The easiest way to see <code>struct task_struct</code> working in C code is writing a kernel module. Writing kernel modules is not easy at all for beginners, so you may want to find and read a tutorial first about writing Linux kernel modules, or ask somebody nearby (probably your professor) to walk you through the process on your laptop."}, {"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "reply_to_user": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "edited": false, "score": 0, "creation_date": 1468428088, "post_id": 38355494, "comment_id": 64126908, "body": "@pts , I thought that the instance of execution of my code (i.e my C code) would be the initialization for the task_struct because currently my process is being executed , I haven&#39;t thought of  garbage value , By the ways thanks for motivating me towards Kernal modules"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468423272, "post_id": 38355606, "comment_id": 64123755, "body": "Hey pts ! can you provide me a refernce link for the same"}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "reply_to_user": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468423389, "post_id": 38355606, "comment_id": 64123842, "body": "@GauravJoshi: I don&#39;t understand what you need a link for. Probably it&#39;s better to ask a separate StackOverflow question for that (e.g. how to find the <code>.h</code> file, how to install a package) if you aren&#39;t able to figure it out online."}, {"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468424046, "post_id": 38355606, "comment_id": 64124293, "body": "@ptr , see u have put me in a dilemma , on  the one hand you are saying that Ubuntu 14.04 does not support task_struct to be in user&#39;s control on the contrary you are saying  to download a  kernel header for the same , when I am having the header i.e sched.h  which has declared task_struct within it , then what is the need of any other header"}, {"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468424125, "post_id": 38355606, "comment_id": 64124354, "body": "kindly help me out of this because you being the only person responded"}, {"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468424217, "post_id": 38355606, "comment_id": 64124412, "body": "My problem is that I want to see task_struct working as a C code in a similar way as my OS does , if possible"}, {"owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 0, "creation_date": 1468424468, "post_id": 38355606, "comment_id": 64124578, "body": "Yes I know the getpid() function but since operating internally uses the data structure of task_struct structure , so can I also use this structure to do  the same"}, {"owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "reply_to_user": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "edited": false, "score": 1, "creation_date": 1468424712, "post_id": 38355606, "comment_id": 64124733, "body": "@Gaurav Joshi: If you are writing a kernel module (to be loaded with <code>insmod</code> or <code>modprobe</code>), then you can use <code>struct task_struct</code> (and <code>current</code>), otherwise you can&#39;t. If you are not sure whether you are writing a kernel module, then you aren&#39;t. If you are not writing a kernel module, but you want to write one, look for online tutorials about writing a Linux kernel module, and if you get stuck, ask a separate question on StackOverflow."}], "tags": [], "owner": {"reputation": 63648, "user_id": 97248, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d891ba8bd448f11617333f8642870262?s=128&d=identicon&r=PG", "display_name": "pts", "link": "https://stackoverflow.com/users/97248/pts"}, "is_accepted": false, "score": 2, "last_activity_date": 1468423497, "last_edit_date": 1468423497, "creation_date": 1468422837, "answer_id": 38355606, "question_id": 38355494, "link": "https://stackoverflow.com/questions/38355494/why-instead-of-adding-includelinux-sched-h-in-my-code-the-code-cannot-ident/38355606#38355606", "title": "Why instead of adding #include&lt;linux/sched.h&gt; in my code , the code cannot identify task_struct structure", "body": "<p>My Linux system (Ubuntu 14.04) doesn't make <code>struct task_struct</code> available to user code:</p>\n\n<pre><code>$ rgrep 'task_struct' /usr/include\n/usr/include/linux/hdreg.h:} task_struct_t;\n/usr/include/linux/capability.h:struct task_struct;\n</code></pre>\n\n<p>The 2nd match (<code>struct task_struct;</code>) is just a forward-declaration of the type. Without the <code>{ ... }</code> in the type declaration, it's just a forward-declaration, and in C (and C++) it's not possible to use a forward-declaration of a struct to create a variable of that type. That's why you are getting the <code>storage size of ... isn't known</code> error.</p>\n\n<p>If you want to create a variable of type <code>struct task_struct</code>, you need to get its type declaration from another <code>.h</code> file, which has it with <code>{ ... }</code>. You may have to install a package containing kernel headers for this. Please refer to your Linux distribution's documentation about finding and installing packages. Once the package is installed, you can use <code>gcc -I /usr/.../...</code> to specify directory names for <code>gcc</code> to look for <code>.h</code> files.</p>\n\n<p>Most programs (including all userland programs, excluding the kernel itself and excluding kernel modules) don't need to create a variable of type <code>struct task_struct</code> though. If you explain in your question what you want to use <code>struct task_struct</code> for, you'll probably get a recommendation to accomplish your goal without using <code>struct task_struct</code>.</p>\n\n<p>If you just want to print the PID of the current process, here is how to do it without <code>struct task_struct</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\nint main() {\n  printf(\"%lld\\n\", (long long)getpid());\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 2, "last_activity_date": 1468424070, "creation_date": 1468424070, "answer_id": 38356038, "question_id": 38355494, "link": "https://stackoverflow.com/questions/38355494/why-instead-of-adding-includelinux-sched-h-in-my-code-the-code-cannot-ident/38356038#38356038", "title": "Why instead of adding #include&lt;linux/sched.h&gt; in my code , the code cannot identify task_struct structure", "body": "<p>Linux kernel headers are not designed to be included directly by user space programs. Even when you do this, this doesn't mean all content of such header is accessible to your code because of <code>__KERNEL__</code> definitions which prevent this to happen. Linux kernel still tries to make it possible though for user code to use kernel headers so sometimes it is possible to do this, but you should stick to use kernel headers in kernel code and use C library otherwise.</p>\n\n<p><a href=\"https://lwn.net/Articles/113349/\" rel=\"nofollow\">This</a> article may help.</p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 2318126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd3641d30f42779b64500361242145de?s=128&d=identicon&r=PG", "display_name": "Neetesh Singh", "link": "https://stackoverflow.com/users/2318126/neetesh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1568731236, "last_edit_date": 1568731236, "creation_date": 1568725462, "answer_id": 57974877, "question_id": 38355494, "link": "https://stackoverflow.com/questions/38355494/why-instead-of-adding-includelinux-sched-h-in-my-code-the-code-cannot-ident/57974877#57974877", "title": "Why instead of adding #include&lt;linux/sched.h&gt; in my code , the code cannot identify task_struct structure", "body": "<p>Use it like this, <code>sched.h</code> is part of GNU</p>\n\n<p>You can use like this:</p>\n\n<pre><code>#define _GNU_SOURCE\n#ifndef __USE_GNU\n#define __USE_GNU\n#endif\n#include &lt;sched.h&gt;\n</code></pre>\n\n<p>Now you can use all functions of <code>sched.h</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12396588, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LolnYBDl-54/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfNmD18jN0_H0ZUoMYWW8nAeCOu7w/photo.jpg?sz=128", "display_name": "Shri hari Sharma", "link": "https://stackoverflow.com/users/12396588/shri-hari-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1602453918, "creation_date": 1602453918, "answer_id": 64309454, "question_id": 38355494, "link": "https://stackoverflow.com/questions/38355494/why-instead-of-adding-includelinux-sched-h-in-my-code-the-code-cannot-ident/64309454#64309454", "title": "Why instead of adding #include&lt;linux/sched.h&gt; in my code , the code cannot identify task_struct structure", "body": "<p>&quot;struct task_struct&quot; is undoubtedly present inside &quot;linux/sched.h&quot; . I suspect that you are building the module , in the wrong way , even your representational code looks like you are approaching the problem in user-space c programming style.\nyou should understand that Linux code is different from user space c programs in various aspects most basic being  that  it doesn't have  a conventional &quot;main&quot; function as an  entry point , but  registration based mechanisms.You can read about building kernel  modules from <a href=\"https://tldp.org/LDP/lkmpg/2.6/html/x181.html\" rel=\"nofollow noreferrer\">https://tldp.org/LDP/lkmpg/2.6/html/x181.html</a></p>\n"}], "owner": {"reputation": 67, "user_id": 5432984, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fHq6j.jpg?s=128&g=1", "display_name": "Gaurav Joshi", "link": "https://stackoverflow.com/users/5432984/gaurav-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3308, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1602453918, "creation_date": 1468422521, "last_edit_date": 1513233772, "question_id": 38355494, "link": "https://stackoverflow.com/questions/38355494/why-instead-of-adding-includelinux-sched-h-in-my-code-the-code-cannot-ident", "title": "Why instead of adding #include&lt;linux/sched.h&gt; in my code , the code cannot identify task_struct structure", "body": "<p>Below I have mentioned my small code and following are my queries regarding it -</p>\n\n<p>1.I have opened /usr/src/linux-headers-3.13.0-32/include/linux/sched.h and I found the declaration of struct task_struct there , but when I try to declare an instance i.e variable of task_struct in the main function which includes the sched.h header , then also it is not able to identify the task_struct , Why ? , Why it is so<br>\n2. Even when I copied the complete code of that header file within my code i.e my .c file outside main class then the compiler shows error to include many other header files which was not a problem when I haven't copied the code of sched.h in my .c file</p>\n\n<p>The Error being displayed by compiler in first case is - storage size of \u2018temp\u2019 isn\u2019t known</p>\n\n<p>My code is ( The code is just a representational view to tell my concept of Question)</p>\n\n<pre><code>#include&lt;linux/sched.h&gt;\nint main(void)\n{\n    struct task_struct temp;\n    printf(\"%d\",temp.pid);\n    return 0;\n}\n</code></pre>\n\n<p>Since the concepts are clear still something is lacking, Kindly share your suggestions.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1468421081, "post_id": 38354856, "comment_id": 64122089, "body": "It sounds like you have a solution to your problem (sign of delta), so what is the question?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1468422243, "post_id": 38354856, "comment_id": 64122971, "body": "You have made your own time subtraction without considering any &quot;borrow&quot;. If that was hundreds, tens and units, you would know how to subtract it. For the seconds you would &quot;borrow&quot; 60 seconds from the minutes, etc. Try it on paper."}, {"owner": {"reputation": 191, "user_id": 6456929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/M2AEG.jpg?s=128&g=1", "display_name": "maverick", "link": "https://stackoverflow.com/users/6456929/maverick"}, "edited": false, "score": 0, "creation_date": 1468423037, "post_id": 38354856, "comment_id": 64123577, "body": "Hi Scott, yes I was trying to see if that is the best way to handle this and if I had made any incorrect assumptions. Vane&#39;s comment helped."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 6456929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/M2AEG.jpg?s=128&g=1", "display_name": "maverick", "link": "https://stackoverflow.com/users/6456929/maverick"}, "edited": false, "score": 0, "creation_date": 1468423331, "post_id": 38355352, "comment_id": 64123796, "body": "@Davek- I ran both codes and they both spit out negative values for the delta intervals with midnight/noon. I am working on another source code to calculate elapsed days, and then I can combine all this together. Your advise was what I needed to address the time difference issue."}], "tags": [], "owner": {"reputation": 408, "user_id": 5075090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95fb75f48bd2edcf5d2989f7511aabf?s=128&d=identicon&r=PG&f=1", "display_name": "davek", "link": "https://stackoverflow.com/users/5075090/davek"}, "is_accepted": true, "score": 1, "last_activity_date": 1468422494, "last_edit_date": 1468422494, "creation_date": 1468422141, "answer_id": 38355352, "question_id": 38354856, "link": "https://stackoverflow.com/questions/38354856/calculating-time-difference-between-two-different-times-millitary-time/38355352#38355352", "title": "calculating time difference between two different times - millitary time", "body": "<p>The solution you found online does handle the problem fairly well, it would only need to handle the change in days by adding the number of seconds in a day to the difference when below 0. Your problem ends up a little bigger, because in your solution you have a negative problem when any of the new values are smaller than the old. So if you have something like <code>00:00:50 =&gt; 00:01:10</code> you'll get <code>00:01:-40</code>. By translating to seconds, the difference is easier to count.</p>\n\n<p>But, it sounds like you don't want to use the online solution, so the only way to get the elapsed time is to go through and add to the difference when necessary:</p>\n\n<pre><code>if (timeDiff.seconds &lt; 0) {\n    timeDiff.seconds += 60;\n    timeDiff.minutes -= 1;\n}\n</code></pre>\n\n<p>And similarly you'll have to handle minutes, then hours. It's also important that you do them in the order, to accumulate upwards. This stems from the fact that you're doing subtraction, but all of the values are connected so you're not carrying from minutes into seconds, hours into minutes, and then implicitly days into hours.</p>\n"}], "owner": {"reputation": 191, "user_id": 6456929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/M2AEG.jpg?s=128&g=1", "display_name": "maverick", "link": "https://stackoverflow.com/users/6456929/maverick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 38355352, "answer_count": 1, "score": -1, "last_activity_date": 1468422494, "creation_date": 1468420960, "question_id": 38354856, "link": "https://stackoverflow.com/questions/38354856/calculating-time-difference-between-two-different-times-millitary-time", "title": "calculating time difference between two different times - millitary time", "body": "<p>I have written the following code, which calculates the time difference between two given times. The task, however also asked for being cognizant of crossing the midnight. I can not think of a way to really deal with that in the code except for making sure the delta is reported as a positive value. I also searched online, and found some other code which does not seem to deal with it any better. Please note; I am asking about the algorithm. I am not looking for a function which does this. Here is my code: </p>\n\n<pre><code>struct time {\n   int hour;\n   int minutes;\n   int seconds;\n};\n\nint main (void)\n\n{\n  struct time timeDiff (struct time now, struct time later);\n  struct time result, one, two;\n  printf(\"Enter the first time (hh:mm:sec): \");\n  scanf(\"%i:%i:%i\", &amp;one.hour, &amp;one.minutes, &amp;one.seconds);\n  printf(\"Enter the second time (hh:mm:sec): \");\n  scanf(\"%i:%i:%i\", &amp;two.hour, &amp;two.minutes, &amp;two.seconds);\n  result = timeDiff(one, two);\n  printf(\"Time is:  %.2i:%.2i:%.2i\\n\", result.hour, result.minutes, result.seconds);\n  return 0;\n}\nstruct time timeDiff ( struct time now, struct time later)\n  {\n    struct time timeDiff;\n    timeDiff.hour = later.hour - now.hour;\n    timeDiff.minutes = later.minutes - now.minutes;\n    timeDiff.seconds = later.seconds - now.seconds;\n    return timeDiff;\n  }\n</code></pre>\n\n<p>Here is the code I found online: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct time\n{\n        int hour;\n        int minute;\n        int second;\n};\nint main(void)\n{\n        struct time  time3;\n        //struct time get_time(struct time d);\n        //struct time elapsed_time(struct time d, struct time e);\n        int  convert_to_seconds(struct time d);\n        int elapsed_time(int d, int e);\n        struct time conver_to_normal_time(int a);\n        struct time time1 =  { 3, 45,15};\n        struct time time2 = { 9,  44, 03};\n        int a, b, c;\n        a = convert_to_seconds(time1);\n        b = convert_to_seconds(time2);\n        c = elapsed_time(a, b);\n        time3 = conver_to_normal_time(c);\n        printf(\" %d:%d:%d\", time3.hour, time3.minute, time3.second);\n        return 0;\n}\nstruct time get_time(struct time d)\n{\n        printf(\"Give me the time\\n\");\n        scanf(\" %d:%d:%d\", &amp;d.hour, &amp;d.minute, &amp;d.second);\n}\nint  convert_to_seconds(struct time d)\n{\n        struct time time1_seconds;\n        int totalTime1_seconds;\n        time1_seconds.hour = d.hour * 3600;\n        time1_seconds.minute = d.second*60;\n        time1_seconds.second = d.second;\n        totalTime1_seconds = time1_seconds.hour + time1_seconds.minute + time1_seconds.second;\n        return totalTime1_seconds;\n        totalTime1_seconds = time1_seconds.hour + time1_seconds.minute + time1_seconds.second;\n        return totalTime1_seconds;\n}\nint elapsed_time(int d, int  e)\n{\n        int result;\n        result = d - e;\n        return result;\n}\nstruct time conver_to_normal_time(int a)\n{\n        struct time final_elapse_time;\n        final_elapse_time.hour = a / 3600;\n        final_elapse_time.minute = (a / 60) % 60;\n        final_elapse_time.second = a % 60;\n        return final_elapse_time;\n}\n</code></pre>\n"}, {"tags": ["c#", "c", "marshalling", "access-violation"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1468420336, "post_id": 38354039, "comment_id": 64121484, "body": "StringBuilder is not correct, the 4 &#39;characters&#39; you see are actually the const char* pointer value.  Using out string is not correct either, the pinvoke marshaller takes on the duty to release the string buffer again and that will fail with AVE because the string was not allocated from the interop heap.  You have use out IntPtr instead and recover the string with Marshal.PtrToStringAnsi().  And take on the duty to release the string buffer which you cannot do.  Very likely you&#39;ll have a permanent memory leak.  You&#39;ll have to use C++/CLI instead or fix the native code."}, {"owner": {"reputation": 1510, "user_id": 853678, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fa0a1d88d23cd0b74de80d4be16d2a99?s=128&d=identicon&r=PG", "display_name": "NickL", "link": "https://stackoverflow.com/users/853678/nickl"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1468421221, "post_id": 38354039, "comment_id": 64122187, "body": "Thanks @HansPassant. This is all new to me unfortunately...  Your suggestion does work, and they provide a function to release strings allocated by their API... Do you want to post your comment as an answer so I can accept it?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1468421525, "post_id": 38354039, "comment_id": 64122438, "body": "Pretty sure you now have everything you need to know to answer your question yourself."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468421353, "post_id": 38354984, "comment_id": 64122287, "body": "If you think that question answers the OP&#39;s question please mark this question as duplicate instead of answering."}, {"owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468421814, "post_id": 38354984, "comment_id": 64122662, "body": "@Gill Bates - I do not have the rep to mark as duplicate. I am just trying to assist here."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468421962, "post_id": 38354984, "comment_id": 64122769, "body": "You can always flag a question as a duplicate, there&#39;s no reputation limit on that."}, {"owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1468423221, "post_id": 38354984, "comment_id": 64123707, "body": "@Gill Bates - Well, I learn something new everyday. Thanks for pointing that out. I was under the assumption, quite wrongly, that it was 3000 rep points."}], "tags": [], "owner": {"reputation": 1008, "user_id": 261981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c602c66983841d31a8d2131c8428f1fb?s=128&d=identicon&r=PG", "display_name": "Neil", "link": "https://stackoverflow.com/users/261981/neil"}, "is_accepted": false, "score": -1, "last_activity_date": 1468421398, "last_edit_date": 1495542760, "creation_date": 1468421278, "answer_id": 38354984, "question_id": 38354039, "link": "https://stackoverflow.com/questions/38354039/what-is-the-difference-between-out-string-and-stringbuilder-for-net-native-mars/38354984#38354984", "title": "What is the difference between out string and StringBuilder for .net/native marshalling?", "body": "<p>Your problem has been answered here - </p>\n\n<p><a href=\"https://stackoverflow.com/questions/27011964/dllimport-c-functions-with-char-input-as-and-output-parameters\">DLLImport c++ functions with char* input as and output parameters</a></p>\n\n<p>I won't repeat information here - please read the above link and this will explain the process for calling your function.</p>\n\n<p>I feel explaining the difference between StringBuilder and String will not help you regarding your issue.</p>\n"}], "owner": {"reputation": 1510, "user_id": 853678, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fa0a1d88d23cd0b74de80d4be16d2a99?s=128&d=identicon&r=PG", "display_name": "NickL", "link": "https://stackoverflow.com/users/853678/nickl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468421398, "creation_date": 1468418909, "question_id": 38354039, "link": "https://stackoverflow.com/questions/38354039/what-is-the-difference-between-out-string-and-stringbuilder-for-net-native-mars", "title": "What is the difference between out string and StringBuilder for .net/native marshalling?", "body": "<p>I have a C library that I don't have the source code for that I need to call into from .NET. </p>\n\n<p>The signature of the <code>Query</code> function I need is:</p>\n\n<pre><code>typedef int LoginID;\ntypedef const char* XML;\ntypedef DSQUERYHANDLER* PDSQUERYHANDLER;\ntypedef ErrCode DSQUERYHANDLER (LoginID lh, void* tag, XML resXML, ErrCode retCode);\n\nQuery(LoginID lh, XML queryXML, XML* queryResultXML_out, void* tag, PDSQUERYHANDLER cb);\n</code></pre>\n\n<p>The C# that I've written to correspond to this is:</p>\n\n<pre><code>delegate ErrCode DSQUERYHANDLER(int lh, IntPtr tag, string resXML, ErrCode retCode);\n\n[DllImport(\"dllname.dll\")]\ninternal static extern ErrCode Query(int lh, string queryXML, out string queryResultXML_out, IntPtr tag, DSQUERYHANDLER cb);\n</code></pre>\n\n<p>I don't actually care about the last two parameters and pass <code>IntPtr.Zero</code> and <code>null</code>.</p>\n\n<p>When I call <code>Query</code>, it sets the string that I've given it with the value that I'd expect, but it also crashes with a System.AccessViolationException!</p>\n\n<p>If I change to using <code>StringBuilder</code> instead of <code>out string</code>:</p>\n\n<pre><code>[DllImport(\"dllname.dll\")]\ninternal static extern ErrCode Query(int lh, string queryXML, StringBuilder queryResultXML_out, IntPtr tag, DSQUERYHANDLER cb);\n</code></pre>\n\n<p>Then it doesn't crash, but the <code>StringBuilder</code> contains a length of 4, but with different values each time it's run, e.g  \u00c8f or p'F.</p>\n\n<h2>My Questions</h2>\n\n<p>What is the difference between using <code>out string</code> and <code>StringBuilder</code>? Also is it possible for me to debug this without access to the internals of the C library?</p>\n"}, {"tags": ["c", "memory", "variable-assignment", "assignment-operator"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1468418094, "post_id": 38353667, "comment_id": 64119745, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468418135, "post_id": 38353702, "comment_id": 64119774, "body": "That&#39;s not a bit specific to pointers! <code>int i,k; i = k = 1;</code> is exactly the same!"}, {"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1468418406, "post_id": 38353702, "comment_id": 64119977, "body": "No it&#39;s not. Your code declares two int variables and sets them equal to the same value. That&#39;s not the same thing as declaring two pointers to int and pointing them at the same int field in memory."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468418851, "post_id": 38353702, "comment_id": 64120299, "body": "A pointer is not a reference! Both snippets assign the <b>value</b> of the LHS of the inner assignment to the lvalue of the next-outer assignment! The semantics of the values is completely unrelated."}, {"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468419111, "post_id": 38353702, "comment_id": 64120493, "body": "You are correct when you say that the semantics of the values are not relevant to the functionality of the assignment operator. That&#39;s not what the OP is concerned about. The question was about the practical effect."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468419883, "post_id": 38353702, "comment_id": 64121144, "body": "Has common sense really diminished that much? It is a simple injection: <code>a-&gt;b-&gt;c =&gt; a-&gt;c</code>"}], "tags": [], "owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "is_accepted": false, "score": 1, "last_activity_date": 1468418026, "creation_date": 1468418026, "answer_id": 38353702, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c/38353702#38353702", "title": "Multiple one line assignments with malloc in c", "body": "<p>Yes, you are allocating a single block of memory. That's the magic of pointers!</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1468418136, "creation_date": 1468418136, "answer_id": 38353738, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c/38353738#38353738", "title": "Multiple one line assignments with malloc in c", "body": "<p>The first job is to drop the <code>(int*)</code> cast which is superfluous (and such a scheme can even be harmful if the type is not built-in). This is one of the differences between C and C++.</p>\n\n<p><code>malloc(n * sizeof(int));</code> returns a pointer of type <code>void*</code>.</p>\n\n<p>That pointer is assigned to <code>inverse</code>.</p>\n\n<p>But the <em>expression</em> <code>inverse = malloc(n * sizeof(int))</code> has type <code>int*</code>. This therefore can then be validly assigned to <code>numbers</code>.</p>\n\n<p>To be very clear, <code>malloc</code> is called exactly once, and therefore you should call <code>free</code> exactly once.</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 8, "last_activity_date": 1468426628, "last_edit_date": 1468426628, "creation_date": 1468418177, "answer_id": 38353757, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c/38353757#38353757", "title": "Multiple one line assignments with malloc in c", "body": "<p>You have:</p>\n\n<pre><code>int *numbers, *inverse;\nnumbers = inverse = (int *)malloc(n * sizeof(int));\n</code></pre>\n\n<p>That's the same as writing:</p>\n\n<pre><code>int *inverse = (int *)malloc(n * sizeof(int));\nint *numbers = inverse;\n</code></pre>\n\n<p>The variable <code>numbers</code> simply has a copy of the pointer that is in <code>inverse</code> \u2014 it points to the same place.  However, you might be about to iterate through the array with one pointer while returning the other from the function, which could be a good reason for having the two copies.</p>\n\n<p>There's a single memory allocation; there will need to be a single call to <code>free()</code> to release the allocated memory.  The value passed to <code>free()</code> will be the same as the original value assigned to either <code>inverse</code> or <code>numbers</code>.</p>\n\n<p>You also ask:</p>\n\n<blockquote>\n  <p>If I do something like <code>inverse[i] = 5</code> will that mean that <code>numbers[i] == 5</code>?</p>\n</blockquote>\n\n<p>If you've not changed the value stored in either <code>inverse</code> or <code>numbers</code>, and if <code>i</code> is in the range <code>0</code> .. <code>(n-1)</code>, then after the assignment, the equality will hold.  The pointers are the same (same type, same value), so indexing them produces the same result.  It also means <code>inverse[i] == numbers[i]</code> of course.</p>\n"}, {"tags": [], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": false, "score": 3, "last_activity_date": 1468418306, "creation_date": 1468418306, "answer_id": 38353802, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c/38353802#38353802", "title": "Multiple one line assignments with malloc in c", "body": "<p>Only one chunk of memory has been allocated, and both <code>inverse</code> and <code>numbers</code> point to the same chunk.</p>\n\n<p>We can verify this experimentally.</p>\n\n<pre><code>#include &lt;assert&gt;\n\nint main() {\n    int n = 100;\n    int *numbers, *inverse;\n    numbers = inverse = (int *)malloc(n * sizeof(int));\n\n    numbers[0] = 10;\n    inverse[0] = 20;\n\n    // If numbers and inverse point to the same memory, then we would expect\n    // that numbers[0] is now 20.\n    assert(inverse[0] == 20);\n    assert(numbers[0] == 20);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1468419514, "last_edit_date": 1495541329, "creation_date": 1468418325, "answer_id": 38353810, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c/38353810#38353810", "title": "Multiple one line assignments with malloc in c", "body": "<p>TL;DR, yes, both <code>inverse</code> and <code>numbers</code> point to same memory.</p>\n\n<hr>\n\n<p><strong>Long answer:</strong> On <em>why</em> part, quoting <code>C11</code>, chapter \u00a76.5.16, <em>Assignment operators</em> <sup>(emphasis mine)</sup></p>\n\n<blockquote>\n  <p>[...] An\n  assignment expression has the <strong>value of the left operand after the assignment</strong>, but is not\n  an lvalue. The type of an assignment expression is the <strong>type the left operand would have\n  after lvalue conversion</strong>.</p>\n</blockquote>\n\n<p>So, as you have mentioned correctly, <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">for right-to-left associativity of the assignment operator <code>=</code></a>, the evaluation looks like</p>\n\n<pre><code>numbers = ( inverse = (int *)malloc(n * sizeof(int)) );\n</code></pre>\n\n<p>so, once <code>inverse = (int *)malloc(n * sizeof(int))</code> is evaluated, </p>\n\n<ul>\n<li>The value of this expression is the value of <code>inverse</code> after the assignment</li>\n<li>Also, the type is as of the same type of <code>inverse</code></li>\n</ul>\n\n<p>(<em>and both are valid</em>) thus, the next evaluation is the same as</p>\n\n<pre><code> numbers = inverse;\n</code></pre>\n\n<p>So, (<em>if you want</em>), you can break down the statements like</p>\n\n<pre><code>if ( (inverse = malloc(n * sizeof*inverse )) )  //error check, just saying\n      numbers = inverse;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/605845/2173917\">and finally, if you're wondering why I removed the cast, see this discussion for more info on this.</a></p>\n"}, {"comments": [{"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 4, "creation_date": 1468418536, "post_id": 38353854, "comment_id": 64120074, "body": "It is the same principle in the sense that shooting someone with a foam dart gun is the same principle as shooting them with an AK-47. In practice they have very different effects."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 0, "creation_date": 1468418658, "post_id": 38353854, "comment_id": 64120172, "body": "@RobertColumbia: Please elaborate! The effect is exactly the same: the value from the LHS of the inner assignement is used as RHS of the next."}, {"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 1, "creation_date": 1468418964, "post_id": 38353854, "comment_id": 64120372, "body": "The OP&#39;s question was about whether the result of his code would be the creation of two memory blocks or one. The assignment operator works from right to left on pointers in the same way that it works on ints, but a pointer is not an int. If you set a pointer equal to another pointer, you end up with two pointers pointing to the same location. Changing the value pointed to by one will (by definition) change the value pointed to by the other one. If you set an int equal to another int, you end up with two ints that have the same value. Changing one will have no effect on the other."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 0, "creation_date": 1468419137, "post_id": 38353854, "comment_id": 64120513, "body": "It should be clear what the effect is,a s I clearly state that <code>number</code> gets the same value as <code>inverse</code>. You confuse the semantics with the operator. Don&#39;t try to make these two different, otherwise next time OP will ask if <code>i = k = f(x);</code> is different and call <code>f</code> twice."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": -2, "last_activity_date": 1468419501, "last_edit_date": 1468419501, "creation_date": 1468418433, "answer_id": 38353854, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c/38353854#38353854", "title": "Multiple one line assignments with malloc in c", "body": "<p>In C, an assignment (<code>=</code>, <code>+=</code>, ...) is an operator like <code>+</code>, <code>-</code>, etc. It yields the value of the left hand side of the operator. See the standard <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.16p3\" rel=\"nofollow\">6.5.16p3</a> They are right associative, evaluation order is:</p>\n\n<pre><code>numbers = ( inverse = malloc(n * sizeof(int)) );\n</code></pre>\n\n<p>(Don't cast the result of <code>malloc</code> &amp; friends or <code>void *</code> in general to pointers. It is not required in C and potentially harmful.)</p>\n\n<p>So <code>number</code> gets the same <strong>value</strong> as <code>inverse</code>. Which is whatever the  <code>malloc</code> returned for the right assignment. </p>\n\n<p>To emphasise: this is no way related to pointers:</p>\n\n<pre><code>int i, k;\ni = k = 4;\n</code></pre>\n\n<p>is exactly the same principle.</p>\n\n<p>Edit:</p>\n\n<p>To state it clear (once more): The right hand side of an assignment <strong>as for every operator</strong> is evaluated exactly <strong>once</strong>. You would not expect <code>f(x) + g(x) + h(x)</code> to have <code>h</code> called twice either.</p>\n\n<p>For the pointers: <code>malloc</code> returns a pointer to a memory block, both pointers have the same value, thus they point to the same memory block. As both have the same type, you may use both to access the memory block.</p>\n"}, {"tags": [], "owner": {"reputation": 484, "user_id": 6490242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26613036fd92e6ee9e1ce9b64037069d?s=128&d=identicon&r=PG&f=1", "display_name": "Twinkle", "link": "https://stackoverflow.com/users/6490242/twinkle"}, "is_accepted": false, "score": 0, "last_activity_date": 1468420112, "creation_date": 1468420112, "answer_id": 38354515, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c/38354515#38354515", "title": "Multiple one line assignments with malloc in c", "body": "<p>Here you are allocating a single block of memory And storing the address in two pointers. So both the pointers will point to the same address</p>\n"}], "owner": {"reputation": 9353, "user_id": 1887101, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b6840488291a0b81df1e6fd0f91f7929?s=128&d=identicon&r=PG&f=1", "display_name": "Adjit", "link": "https://stackoverflow.com/users/1887101/adjit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1315, "favorite_count": 0, "accepted_answer_id": 38353757, "answer_count": 7, "score": 1, "last_activity_date": 1468426628, "creation_date": 1468417925, "last_edit_date": 1468418999, "question_id": 38353667, "link": "https://stackoverflow.com/questions/38353667/multiple-one-line-assignments-with-malloc-in-c", "title": "Multiple one line assignments with malloc in c", "body": "<p>Suppose the below statement:</p>\n\n<pre><code>int *numbers, *inverse;\nnumbers = inverse = (int *)malloc(n * sizeof(int));\n</code></pre>\n\n<p>I am curious to know what is going on here - I know it is right to left, so first the memory for <code>inverse</code> is being allocated. Then I set <code>numbers</code> equal to <code>inverse</code>, will that mean that the memory location of <code>numbers</code> will be the same as <code>inverse</code>? Or does it allocate the same amount of memory at locations <code>&amp;numbers</code> and <code>&amp;inverse</code>?</p>\n\n<p>For example, if I do something like <code>inverse[i] = 5</code> will that mean that <code>numbers[i] == 5</code>?</p>\n"}, {"tags": ["c++", "c", "linux", "gcc"], "comments": [{"owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 0, "creation_date": 1468419469, "post_id": 38353005, "comment_id": 64120769, "body": "libtesseract.so \u2192 Available are : tesseract-3.02.02-3.5.x86_64.rpm , tesseract-devel-3.02.02-3.5.x86_64.rpm , for CentOS6 ... See <a href=\"http://rpm.pbone.net/\" rel=\"nofollow noreferrer\">rpm.pbone.net</a> ... <code>tesseract-devel</code> provides <code>&#47;usr&#47;lib64&#47;libtesseract.so</code> ."}, {"owner": {"reputation": 1, "user_id": 5804481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa4f4651d16f169a57454179cd8b79d?s=128&d=identicon&r=PG&f=1", "display_name": "Shiva", "link": "https://stackoverflow.com/users/5804481/shiva"}, "reply_to_user": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 0, "creation_date": 1468497702, "post_id": 38353005, "comment_id": 64157687, "body": "as per your suggestion i installed <code>tesseract-3.02.02-3.5.x86_64.rpm</code> <b>1)after running 1st time am getting this error</b> <code>javax.servlet.ServletException: java.lang.UnsupportedClassVersionError: net&#47;sourceforge&#47;lept4j&#47;Pix : Unsupported major.minor version 52.0 (unable to load class net.sourceforge.lept4j.Pix)</code> <b>2)after reloading same page am getting this error</b> <code>javax.servlet.ServletException: java.lang.NoClassDefFoundError: Could not initialize class net.sourceforge.tess4j.TessAPI</code> please Suggest..."}, {"owner": {"reputation": 1, "user_id": 5804481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa4f4651d16f169a57454179cd8b79d?s=128&d=identicon&r=PG&f=1", "display_name": "Shiva", "link": "https://stackoverflow.com/users/5804481/shiva"}, "reply_to_user": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 0, "creation_date": 1468498004, "post_id": 38353005, "comment_id": 64157879, "body": "After Installing <code>tesseract-3.02.02-3.5.x86_64.rpm</code> <b>1) command</b>  <code>tesseract &#47;tess&#47;abc.png out</code> getting this error <code>Tesseract Open Source OCR Engine v3.02.02 with Leptonica index &gt;= 0 &amp;&amp; index &lt; size_used_:Error:Assert failed:in file ..&#47;ccutil&#47;genericvector.h, line 512 Segmentation fault </code>"}], "owner": {"reputation": 1, "user_id": 5804481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa4f4651d16f169a57454179cd8b79d?s=128&d=identicon&r=PG&f=1", "display_name": "Shiva", "link": "https://stackoverflow.com/users/5804481/shiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 951, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1468425672, "creation_date": 1468416132, "last_edit_date": 1468425672, "question_id": 38353005, "link": "https://stackoverflow.com/questions/38353005/tesseract-tess4j-native-library-linux-x86-64-libtesseract-so-not-found-in-re", "title": "Tesseract Tess4J - Native library (linux-x86-64/libtesseract.so) not found in resource path", "body": "<p>I'm using Tess4J and trying to call <code>tess4j.doOCR(myFile)</code> and I am getting this error</p>\n\n<pre><code>java.lang.UnsatisfiedLinkError: Unable to load library 'tesseract': Native library (linux-x86-64/libtesseract.so) not found in resource path\n</code></pre>\n\n<p><em>which are the following configurations I have in my system</em></p>\n\n<p><strong>OS version</strong>:centos 6.8\n<strong>leptonica version</strong> : leptonica-1.69\n<strong>tesseract version</strong>: tesseract-3.00</p>\n\n<p><strong>GhostScript Version:</strong></p>\n\n<p>1.command: <strong><code>gs -v</code></strong> </p>\n\n<p>I am getting  <strong>GPL Ghostscript 9.16 (2015-03-30)</strong></p>\n\n<p>2.command: <strong><code>ghostscript -v</code></strong></p>\n\n<p>I am getting  <strong>GPL Ghostscript 8.70 (2009-07-31)</strong></p>\n\n<p><strong>gcc version</strong>:gcc (GCC) 4.8.2 20140120 (Red Hat 4.8.2-15)</p>\n\n<p>Any advice would be much appreciated.</p>\n"}, {"tags": ["c", "sorting", "counting"], "comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1468415705, "post_id": 38352757, "comment_id": 64117844, "body": "It means that the program has undefined behaviour.:)"}, {"owner": {"reputation": 17, "user_id": 6394740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16fe5a3f3684d2344fc9283a0f88fff?s=128&d=identicon&r=PG&f=1", "display_name": "Bazooka47", "link": "https://stackoverflow.com/users/6394740/bazooka47"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1468415882, "post_id": 38352757, "comment_id": 64117974, "body": "I am a beginner,can you tell me which line is causing it ???"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1468416006, "post_id": 38352757, "comment_id": 64118074, "body": "Compile the code in a Linux environment using gcc, then run it under <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a>.  If you&#39;re reading/writing memory you&#39;re not supposed to, it will tell you."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468511292, "post_id": 38352757, "comment_id": 64167510, "body": "for ease of readability and understanding: 1) please indent your code consistently.  NEVER use tabs for indenting.  Suggest 4 spaces for each indent level as that is wide enough to be visible even with variable width fonts.  Indent after every opening brace &#39;{&#39;&#39;.  Un indent before every closing brace &#39;}&#39;.  2) separate code blocks (for, if, else, while, do...while, switch, case, default) via a blank line.  3) use meaningful variable names.  A variable name should indicate <code>contents</code> or <code>usage</code> (or better, both)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468511395, "post_id": 38352757, "comment_id": 64167584, "body": "Please follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468511584, "post_id": 38352757, "comment_id": 64167708, "body": "when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter value) to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468511771, "post_id": 38352757, "comment_id": 64167833, "body": "this line: <code>while(i&lt;t)</code> would be much more clearly written as: <code>for(  i=0; i &lt; j; i++ )</code>  then the lonely line <code>i++;</code> can be eliminated"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468511847, "post_id": 38352757, "comment_id": 64167887, "body": "to minimize mis-understandings and maintenance errors, always insert the opening an closing braces around code block bodies"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468512173, "post_id": 38352757, "comment_id": 64168094, "body": "when asking a user to enter a value, always prompt the user, so they know what they are expected to do.  Otherwise the user is left with a blinking cursor and no idea what to do next"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468512768, "post_id": 38352757, "comment_id": 64168432, "body": "the variables <code>min</code> and <code>max</code> are integers, but the variable: <code>a[i]</code> is a long long integer, so errors can occur  due to the conversions necessary for the assignment.  Similar considerations exist for the variable <code>temp</code> and variable <code>j</code> and <code>pos</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468513468, "post_id": 38352757, "comment_id": 64168820, "body": "next time, when using <code>gdb</code>, check the actual values being input (by the user) to assure they are correct."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468513145, "post_id": 38353238, "comment_id": 64168637, "body": "if the posted code had checked the returned value (not the parameter value) from each of the calls to <code>scanf()</code>, then it would have found the problem of the codepad not allowing for user inputs.   This is just another prime example that system function return values must be checked for errors."}], "tags": [], "owner": {"reputation": 1068, "user_id": 57140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da10f3d496288a3eb7cf6ac03c225ed?s=128&d=identicon&r=PG", "display_name": "kwarnke", "link": "https://stackoverflow.com/users/57140/kwarnke"}, "is_accepted": false, "score": 0, "last_activity_date": 1468416713, "last_edit_date": 1495535330, "creation_date": 1468416713, "answer_id": 38353238, "question_id": 38352757, "link": "https://stackoverflow.com/questions/38352757/counting-sort-program-showing-error-in-specific-compilers-in-c/38353238#38353238", "title": "counting sort program showing error in specific compilers in c", "body": "<p>It looks like that codepad does not support reading user input:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(void)\n{\nlong long int t;\nscanf(\"%lld\",&amp;t);//enter total numbers to be sorted\nprintf(\"%lld\\n\",t );\nreturn 0;\n}\n</code></pre>\n\n<p>Produces</p>\n\n<pre><code>Output:\n134513968\n</code></pre>\n\n<p>No input is read, but a random number is there. With that number your program crash. Here is a <a href=\"https://stackoverflow.com/questions/7894930/online-c-compiler-with-input-stream\">solution</a> for c++.</p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468515185, "post_id": 38379932, "comment_id": 64169806, "body": "note: when run under a local computer, rather than on a web page, it works correctly"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468515953, "post_id": 38379932, "comment_id": 64170225, "body": "to avoid such problems in the future I suggest using: <code>http:&#47;&#47;ideone.com&#47;</code>  which allows you to &#39;pre define&#39; all the user inputs"}, {"owner": {"reputation": 17, "user_id": 6394740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16fe5a3f3684d2344fc9283a0f88fff?s=128&d=identicon&r=PG&f=1", "display_name": "Bazooka47", "link": "https://stackoverflow.com/users/6394740/bazooka47"}, "edited": false, "score": 0, "creation_date": 1468564600, "post_id": 38379932, "comment_id": 64187628, "body": "Should i use getchar to take the digits then transfer it to the required variable,if in this case scanf showing error ???"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 17, "user_id": 6394740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16fe5a3f3684d2344fc9283a0f88fff?s=128&d=identicon&r=PG&f=1", "display_name": "Bazooka47", "link": "https://stackoverflow.com/users/6394740/bazooka47"}, "edited": false, "score": 0, "creation_date": 1468568119, "post_id": 38379932, "comment_id": 64189572, "body": "the source of the problem is NOT the posted code, but rather the web page being used does not allow user input.  So what ever trash in on the stack at the location of the variables is what is being used."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1468515081, "creation_date": 1468515081, "answer_id": 38379932, "question_id": 38352757, "link": "https://stackoverflow.com/questions/38352757/counting-sort-program-showing-error-in-specific-compilers-in-c/38379932#38379932", "title": "counting sort program showing error in specific compilers in c", "body": "<p>after applying the changes listed in the comments to the question</p>\n\n<p>The following code results:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    long long int t;\n    int i=0;\n    long long int j;\n    long long int max;\n    long long int min;\n    long long int temp;\n    long long int pos;\n\n    printf( \"%s\", \"enter total numbers to be sorted\" );\n    if( 1 != scanf(\"%lld\",&amp;t) )\n    {\n        printf(\"%s\\n\",\"first scanf failed\");\n        exit( EXIT_FAILURE );\n    }\n\n    long long int a[t];\n\n    for(i=0; i&lt;t; i++)\n    {\n        printf( \"%s %d\", \"enter number: \", i );\n        if( 1 != scanf(\"%lld\",&amp;a[i]) )\n        {\n            printf( \"%s\\n\", \"second scanf failed\" );\n            exit( EXIT_FAILURE);\n        }\n\n        if(i==0)\n        {\n           max=min=a[i];\n        }\n\n        else\n        {\n            if(a[i]&gt;=max)\n            {\n                max=a[i];\n            }\n\n            if(a[i]&lt;min)\n            {\n                min=a[i];\n            }\n        }\n    }\n\n    temp=(max-min+1);\n\n    long long int b[temp];\n\n    for(i=0;i&lt;t;i++)\n    {\n        for(j=min;j&lt;=max;j++)\n        {\n             if(i==0)\n             {\n                 b[j-min]=0;\n             }\n\n             if(a[i]==j)\n             {\n                 ++b[j-min];\n             }\n        }\n    }\n\n    for(i=0;i&lt;temp;i++)\n    {\n        if(i!=0)\n        {\n            b[i]=b[i]+b[i-1];\n        }\n    }\n\n    long long int c[t];\n\n    for(i=0;i&lt;t;i++)\n    {\n        for(j=0;j&lt;temp;j++)\n        {\n            if(a[i]==(j+min))\n            {\n                pos=(b[j]-1);\n                c[pos]=j+min;\n                --b[j];\n            }\n        }\n    }\n\n    for(j=0;j&lt;t;j++)\n    {\n        printf(\"%lld\\n\",c[j]);\n    }\n\n\n    return(0);\n}\n</code></pre>\n\n<p>NOTE: It is better to use <code>perror()</code> rather than <code>printf()</code> for outputting error messages, but codepad will then fail to compile the code due to a call to <code>sys_dup()</code></p>\n\n<p>the output is: </p>\n\n<pre><code>enter total numbers to be sorted\nfirst scanf failed\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6394740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f16fe5a3f3684d2344fc9283a0f88fff?s=128&d=identicon&r=PG&f=1", "display_name": "Bazooka47", "link": "https://stackoverflow.com/users/6394740/bazooka47"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1501420488, "creation_date": 1468415517, "last_edit_date": 1501420488, "question_id": 38352757, "link": "https://stackoverflow.com/questions/38352757/counting-sort-program-showing-error-in-specific-compilers-in-c", "title": "counting sort program showing error in specific compilers in c", "body": "<p>i tried counting sort and complied in \"<a href=\"http://www.tutorialspoint.com/compile_c_online.php\" rel=\"nofollow\">http://www.tutorialspoint.com/compile_c_online.php</a>\" and it ran perfectly but when i tried to compile in \"<a href=\"http://codepad.org\" rel=\"nofollow\">http://codepad.org</a>\" ,it said segmentation fault.i tried using gdb but it didnot show any error.\nhere is the code can anyone find the line causing it.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(void)\n{\nlong long int t;\nint i=0,j,max,min,temp,pos;\nscanf(\"%lld\",&amp;t);//enter total numbers to be sorted\nlong long int a[t];\nwhile(i&lt;t)\n    {   \n        scanf(\"%lld\",&amp;a[i]);\n        if(i==0) max=min=a[i];\n        else\n        {\n            if(a[i]&gt;=max) max=a[i];\n            if(a[i]&lt;min) min=a[i];\n        }\n        ++i;\n    }\ntemp=(max-min+1);\nlong long int b[temp];\nfor(i=0;i&lt;t;i++) \n    for(j=min;j&lt;=max;j++)\n        {\n         if(i==0) b[j-min]=0;\n         if(a[i]==j) ++b[j-min];\n        }\nfor(i=0;i&lt;temp;i++) if(i!=0) b[i]=b[i]+b[i-1];\nlong long int c[t];\nfor(i=0;i&lt;t;i++)\n{\n    for(j=0;j&lt;temp;j++)\n        {\n            if(a[i]==(j+min))\n                {\n                    pos=(b[j]-1);\n                    c[pos]=j+min;\n                    --b[j];\n                }\n        }\n}\nfor(j=0;j&lt;t;j++) printf(\"%lld\\n\",c[j]);\nreturn(0);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1251, "user_id": 1875956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bca41438be539d1fcab5e3349f625f7?s=128&d=identicon&r=PG", "display_name": "Sabik", "link": "https://stackoverflow.com/users/1875956/sabik"}, "edited": false, "score": 0, "creation_date": 1468413624, "post_id": 38351918, "comment_id": 64116284, "body": "Please see <a href=\"http://www.fileformat.info/info/unicode/char/2022/index.htm\" rel=\"nofollow noreferrer\">fileformat.info/info/unicode/char/2022/index.htm</a>"}, {"owner": {"reputation": 4755, "user_id": 18665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXnTw.gif?s=128&g=1", "display_name": "jwpfox", "link": "https://stackoverflow.com/users/18665/jwpfox"}, "edited": false, "score": 2, "creation_date": 1468413631, "post_id": 38351918, "comment_id": 64116290, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/13050899/how-to-print-non-ascii-characters-in-c\">how to print non-ASCII characters in C</a>"}, {"owner": {"reputation": 14411, "user_id": 52724, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1e5bf4421007b7cfe4dba5ecb24f777?s=128&d=identicon&r=PG", "display_name": "Karl Nicoll", "link": "https://stackoverflow.com/users/52724/karl-nicoll"}, "edited": false, "score": 0, "creation_date": 1468414270, "post_id": 38351918, "comment_id": 64116773, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14430899/how-to-print-box-drawers-unicode-characters-in-c-linux-utf8-terminal\">How to print &quot;box drawers&quot; Unicode characters in C (Linux utf8 terminal)?</a>"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1468414288, "post_id": 38351918, "comment_id": 64116791, "body": "<code>printf(&quot;\\u2022Pizza\\u2022Movie\\u2022ice cream\\n&quot;);</code> is what you&#39;re looking for."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1468416516, "post_id": 38351918, "comment_id": 64118464, "body": "C does not provide any special functions for that. What is your console capable of?"}], "answers": [{"comments": [{"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 1, "creation_date": 1468415402, "post_id": 38352150, "comment_id": 64117605, "body": "Note, that compiler expands <code>\\u2022</code> to UTF-8 encoded data: <code>&quot;Tonight\\342\\200\\231s schedule is: \\342\\200\\242 Pizza \\342\\200\\242 Movie \\342\\200\\242 ice cream&quot;</code>. And probably old compilers doesn&#39;t understand \\u notation, so you should encode it by yourself."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1468417220, "post_id": 38352150, "comment_id": 64119029, "body": "@Serhio that expansion is compiler-dependent"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1468417444, "post_id": 38352150, "comment_id": 64119213, "body": "@M.M You&#39;re right. At least it should be the most popular approach."}], "tags": [], "owner": {"reputation": 434, "user_id": 6045154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BpvkV.jpg?s=128&g=1", "display_name": "AsheraH", "link": "https://stackoverflow.com/users/6045154/asherah"}, "is_accepted": false, "score": 2, "last_activity_date": 1468413925, "creation_date": 1468413925, "answer_id": 38352150, "question_id": 38351918, "link": "https://stackoverflow.com/questions/38351918/how-can-i-print-a-bullet-point-in-c/38352150#38352150", "title": "How can I print a bullet point in C?", "body": "<p>&#8226; search for html number <code>&amp;#8226;</code>\nThis <a href=\"http://www.fileformat.info/info/unicode/char/2022/index.htm\" rel=\"nofollow\">link</a> declares \"\\u2022\" as the C source code encoding.</p>\n"}, {"comments": [{"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1468450006, "post_id": 38352309, "comment_id": 64138208, "body": "Technically, that apostrophe should be <code>\\u</code>-encoded or replaced with an ASCII <code>&#39;</code>. Probably just the OP&#39;s browser replacing the character and you copied it, but this example might do something weird at the <code>\u2019</code> if someone copies and pastes it."}], "tags": [], "owner": {"reputation": 3916, "user_id": 6171361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6HzJh.jpg?s=128&g=1", "display_name": "sel-fish", "link": "https://stackoverflow.com/users/6171361/sel-fish"}, "is_accepted": false, "score": 3, "last_activity_date": 1468414291, "creation_date": 1468414291, "answer_id": 38352309, "question_id": 38351918, "link": "https://stackoverflow.com/questions/38351918/how-can-i-print-a-bullet-point-in-c/38352309#38352309", "title": "How can I print a bullet point in C?", "body": "<p>The code bellow can give you guide on this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char** argv)\n{\n  printf(\"Tonight\u2019s schedule is: \\u2022 Pizza \\u2022 Movie \\u2022 ice cream\\n\");\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 536, "user_id": 6328833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qLXX6kSL0y4/AAAAAAAAAAI/AAAAAAAABIg/lMactiuIKjI/photo.jpg?sz=128", "display_name": "Jees K Denny", "link": "https://stackoverflow.com/users/6328833/jees-k-denny"}, "is_accepted": false, "score": -1, "last_activity_date": 1468432374, "last_edit_date": 1468432374, "creation_date": 1468415679, "answer_id": 38352811, "question_id": 38351918, "link": "https://stackoverflow.com/questions/38351918/how-can-i-print-a-bullet-point-in-c/38352811#38352811", "title": "How can I print a bullet point in C?", "body": "<p>This is the conversion of ascii to character.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main(){\n   char a=atoi(\"149\");\n   printf(\"%c %s %c %s %c %s\",a,\"pizza\",a,\"movie\",a,\"ice cream\");   \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1468417391, "post_id": 38352999, "comment_id": 64119172, "body": "Output on a Win7 machine with English(Aus) as the language: <code>Tonight&#212;&#199;&#214;s schedule is: &#212;&#199;&#243; Pizza &#212;&#199;&#243; Movie &#212;&#199;&#243; ice cream</code>"}, {"owner": {"reputation": 3092, "user_id": 6330448, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/MeC1c.png?s=128&g=1", "display_name": "tryKuldeepTanwar", "link": "https://stackoverflow.com/users/6330448/trykuldeeptanwar"}, "reply_to_user": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 1, "creation_date": 1468417620, "post_id": 38352999, "comment_id": 64119357, "body": "Maybe you need English(United States)  as the language because its working perfect for me on window7 machine. @enhzflep"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1468417754, "post_id": 38352999, "comment_id": 64119464, "body": "Thanks for the suggestion, I&#39;ll give it a try."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1468419532, "post_id": 38352999, "comment_id": 64120822, "body": "It very much depends on the character set of the C source file, the character set the compiler assumes when compiling the source file, any conversions done by the text mode stream, and any conversions done by the host environment (including the terminal) on the emitted output bytes."}, {"owner": {"reputation": 3092, "user_id": 6330448, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/MeC1c.png?s=128&g=1", "display_name": "tryKuldeepTanwar", "link": "https://stackoverflow.com/users/6330448/trykuldeeptanwar"}, "edited": false, "score": 0, "creation_date": 1468467531, "post_id": 38352999, "comment_id": 64142061, "body": "hey if you find the answer helpful don&#39;t forget to mark it right."}], "tags": [], "owner": {"reputation": 3092, "user_id": 6330448, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/MeC1c.png?s=128&g=1", "display_name": "tryKuldeepTanwar", "link": "https://stackoverflow.com/users/6330448/trykuldeeptanwar"}, "is_accepted": false, "score": 1, "last_activity_date": 1468416114, "creation_date": 1468416114, "answer_id": 38352999, "question_id": 38351918, "link": "https://stackoverflow.com/questions/38351918/how-can-i-print-a-bullet-point-in-c/38352999#38352999", "title": "How can I print a bullet point in C?", "body": "<p>You can simply do this:-</p>\n\n<pre><code>puts(\"Tonight\u2019s schedule is: \u2022 Pizza \u2022 Movie \u2022 ice cream\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 3, "creation_date": 1468427181, "post_id": 38355193, "comment_id": 64126389, "body": "149 is not an ASCII value: the highest ASCII character is 127. But what you propose could work on Windows, if you&#39;re using <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">Windows-1252</a> or a similar encoding. (Also, you don&#39;t need to give the size of the arrays when declaring them and initializing them the way you did. The compiler will figure out the length.)"}, {"owner": {"reputation": 1130, "user_id": 6303768, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/gBTub.jpg?s=128&g=1", "display_name": "dulaj sanjaya", "link": "https://stackoverflow.com/users/6303768/dulaj-sanjaya"}, "reply_to_user": {"reputation": 1431, "user_id": 1258302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r06hH.jpg?s=128&g=1", "display_name": "yellowantphil", "link": "https://stackoverflow.com/users/1258302/yellowantphil"}, "edited": false, "score": 0, "creation_date": 1468427810, "post_id": 38355193, "comment_id": 64126747, "body": "Yes I agree with you. I will fix it"}], "tags": [], "owner": {"reputation": 1130, "user_id": 6303768, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/gBTub.jpg?s=128&g=1", "display_name": "dulaj sanjaya", "link": "https://stackoverflow.com/users/6303768/dulaj-sanjaya"}, "is_accepted": false, "score": 1, "last_activity_date": 1468427931, "last_edit_date": 1468427931, "creation_date": 1468421761, "answer_id": 38355193, "question_id": 38351918, "link": "https://stackoverflow.com/questions/38351918/how-can-i-print-a-bullet-point-in-c/38355193#38355193", "title": "How can I print a bullet point in C?", "body": "<p>You can do it using Extended ASCII values.If you run your program in cmd, sometimes this will not work. because your cmd code page doesn't support for those ASCII values.\npaste this code in to the codechef online ide(<a href=\"https://www.codechef.com/ide\" rel=\"nofollow\">https://www.codechef.com/ide</a>) and run it and see the out put. This is a working solution.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#include&lt;stdio.h&gt;\n\n\n\nint main(){\n\n    char list1[]=\"Pizza\";\n    char list2[]=\"Movie\";\n    char list3[]=\"ice cream\";\n    int a=149;\n\n\n   printf(\"%c %s %c %s %c %s\",a,list1,a,list2,a,list3);\n\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 6578349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e3785191b7c34a0e69418797e10fae?s=128&d=identicon&r=PG&f=1", "display_name": "EFenix", "link": "https://stackoverflow.com/users/6578349/efenix"}, "is_accepted": false, "score": 1, "last_activity_date": 1468422124, "creation_date": 1468422124, "answer_id": 38355339, "question_id": 38351918, "link": "https://stackoverflow.com/questions/38351918/how-can-i-print-a-bullet-point-in-c/38355339#38355339", "title": "How can I print a bullet point in C?", "body": "<p>it depends on the terminal where you want the characters to be shown.\nSend the characters according to the enconding of this terminal. For example, it is different for MS-windows (using, for example windows 1252) or linux (using, for example utf-8).</p>\n"}], "owner": {"reputation": 71, "user_id": 6584398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/626d63dec22797cb136a0686aff4521f?s=128&d=identicon&r=PG&f=1", "display_name": "F.leon", "link": "https://stackoverflow.com/users/6584398/f-leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2564, "favorite_count": 0, "answer_count": 6, "score": 5, "last_activity_date": 1469190797, "creation_date": 1468413330, "last_edit_date": 1469190797, "question_id": 38351918, "link": "https://stackoverflow.com/questions/38351918/how-can-i-print-a-bullet-point-in-c", "title": "How can I print a bullet point in C?", "body": "<p>I want to print the following in C.</p>\n\n<pre><code>Tonight\u2019s schedule is:\n\u2022   Pizza\n\u2022   Movie\n\u2022   ice cream\n</code></pre>\n\n<p>I do not know how to print the bullet point character.</p>\n"}, {"tags": ["c++", "c", "gcc", "msp430", "code-composer"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1468413341, "post_id": 38351804, "comment_id": 64116087, "body": "I would try it with a polite &quot;Hi. How are you?&quot;. sorry... it is not sooo clear what is your question."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1468422261, "post_id": 38351804, "comment_id": 64122987, "body": "code composer studio?"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 1, "creation_date": 1468511491, "post_id": 38351804, "comment_id": 64167652, "body": "You should find a copy of Code Composer Studio (CCS) which is a Texas Instruments&#39; (TI) IDE for embedded development. It&#39;s based on Eclipse. I have only used it commercially, but I think you can get free student/non-profit licenses for it, but am not sure."}], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 6511472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_vQARvDU68/AAAAAAAAAAI/AAAAAAAAANI/pxzY4DyBzo8/photo.jpg?sz=128", "display_name": "Rajesh Rajendran", "link": "https://stackoverflow.com/users/6511472/rajesh-rajendran"}, "edited": false, "score": 0, "creation_date": 1468569945, "post_id": 38378419, "comment_id": 64190643, "body": "Thank you for your response this gives me to an idea about the  files i have and how to approach those files."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": true, "score": 2, "last_activity_date": 1468510899, "last_edit_date": 1468510899, "creation_date": 1468510425, "answer_id": 38378419, "question_id": 38351804, "link": "https://stackoverflow.com/questions/38351804/for-msp430-controller-coding/38378419#38378419", "title": "For Msp430 controller coding", "body": "<p>Given the following list of files:</p>\n\n<pre><code>.x.c.swp .ccsproject .cdtbuild .cdtproject .project x.c x.h hardware.h .cmd readme.txt\n</code></pre>\n\n<p>I cannot be absolutely sure, as I do not have have the actual files infront of me. but here is my (based on experience) expectation:</p>\n\n<pre><code>x.c\na C source code file\nshows how to write a C source file for the MSP430\n\nx.h\na C header file for the `x.c` source file\nshows how to write a C header file for the MSP430\n\nhardware.h\na header file that contains: \nall the peripheral addresses\nnames for all the hardware registers the compiler will recognize\nfor the MSP430\n\n.x.c.swp\nThis is a file created by the editing of the `x.c` file\nyou can ignore this file\n\n.ccsproject\n.cdtbuild\n.cdtproject\n.project\nskeletons of files that the Code Composer Studio IDE \nwill create when a `project` for your program is created\nA project is a way to keep a list of the files (and related info) about a program in one place\n\n.cmd\nThis is a skeleton linker command file for any MSP430 program\nThe documentation will tell you how to write a `project.cmd` file\nfor your own program.\n\nreadme.txt\nThis is a text file that tells you some details about the files,\nthat were supplied by the manufacture of the IDE and the MSP430\n</code></pre>\n"}], "owner": {"reputation": 112, "user_id": 6511472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_vQARvDU68/AAAAAAAAAAI/AAAAAAAAANI/pxzY4DyBzo8/photo.jpg?sz=128", "display_name": "Rajesh Rajendran", "link": "https://stackoverflow.com/users/6511472/rajesh-rajendran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1469643918, "accepted_answer_id": 38378419, "answer_count": 1, "score": 1, "last_activity_date": 1468510899, "creation_date": 1468413052, "question_id": 38351804, "link": "https://stackoverflow.com/questions/38351804/for-msp430-controller-coding", "closed_reason": "Needs details or clarity", "title": "For Msp430 controller coding", "body": "<p>\".x.c.swp .ccsproject .cdtbuild .cdtproject .project x.c x.h hardware.h .cmd readme.txt\" these are the files given as a source file for my evaluation board.\nHow can i approach these files?</p>\n"}, {"tags": ["c", "numeric", "ieee-754", "zero"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1468411127, "post_id": 38350731, "comment_id": 64114485, "body": "Can we assume also that <code>y2 - y0</code> and <code>x2 - x0</code> will be finite?"}, {"owner": {"reputation": 1552, "user_id": 3145469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40ef74077e497553ad7a6ce20a1fc38b?s=128&d=identicon&r=PG&f=1", "display_name": "MrMobster", "link": "https://stackoverflow.com/users/3145469/mrmobster"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1468411280, "post_id": 38350731, "comment_id": 64114615, "body": "@OliverCharlesworth: yes. If its not, I am ok with the results being undefined."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468413972, "post_id": 38350731, "comment_id": 64116542, "body": "Which type are <code>a</code> and <code>b</code>? If they are not <code>uint32_t</code>, your code invokes undefined behaviour (violation of effective type rule). So anything is allowed by the standard. The same for <code>ZERO</code>"}, {"owner": {"reputation": 1552, "user_id": 3145469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40ef74077e497553ad7a6ce20a1fc38b?s=128&d=identicon&r=PG&f=1", "display_name": "MrMobster", "link": "https://stackoverflow.com/users/3145469/mrmobster"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468415003, "post_id": 38350731, "comment_id": 64117316, "body": "@Olaf: ok, then suppose that we have union {uint32_t ival, float fval} instead of type casting. Or a memcmp(&amp;a, &amp;b, sizeof(float))==0. The idea is to say that a and b contains exactly the same binary representation. I am editing the question to make this more clear."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468415527, "post_id": 38350731, "comment_id": 64117721, "body": "There is another problem: Are you asking about C floating point or about IEEE754 floating point?"}, {"owner": {"reputation": 1552, "user_id": 3145469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40ef74077e497553ad7a6ce20a1fc38b?s=128&d=identicon&r=PG&f=1", "display_name": "MrMobster", "link": "https://stackoverflow.com/users/3145469/mrmobster"}, "edited": false, "score": 0, "creation_date": 1468415847, "post_id": 38350731, "comment_id": 64117945, "body": "I am asking about possible guarantees in the behaviour I am describing. If IEEE754 gives me this guarantee, I am willing to restrict my code only to IEEE754-compliant targets. If a target is not  IEEE754-compliant, I can always build in additional safety checks."}], "answers": [{"comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1468411019, "post_id": 38351068, "comment_id": 64114423, "body": "Good catch with that &quot;negative zero&quot; thing. I would actually guess that the answer would be Yes (before reading yours)."}, {"owner": {"reputation": 1552, "user_id": 3145469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40ef74077e497553ad7a6ce20a1fc38b?s=128&d=identicon&r=PG&f=1", "display_name": "MrMobster", "link": "https://stackoverflow.com/users/3145469/mrmobster"}, "edited": false, "score": 0, "creation_date": 1468411482, "post_id": 38351068, "comment_id": 64114769, "body": "Thanks, Art! You are right of course that mention of IEEE standard is a bit misleading. What I am most interested in is knowing whether I should build in additional identity checks on common hardware, with common C11 compilers, or whether I can safely skip the checks. The signed zero comment is very helpful! I would be ok with doing FP comparison to 0 instead of &#39;zero bit-pattern&#39; zero. Would that be safe?"}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 1552, "user_id": 3145469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40ef74077e497553ad7a6ce20a1fc38b?s=128&d=identicon&r=PG&f=1", "display_name": "MrMobster", "link": "https://stackoverflow.com/users/3145469/mrmobster"}, "edited": false, "score": 0, "creation_date": 1468412164, "post_id": 38351068, "comment_id": 64115247, "body": "@MrMobster Your safest bet to compare a floating point number to zero is <code>a == 0.0</code>. This will work regardless if a is negative or positive."}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 0, "creation_date": 1468412411, "post_id": 38351068, "comment_id": 64115397, "body": "It&#39;s worth to note that according to C11 <code>&#167;6.10.8.3 Conditional feature macros - ... __STDC_IEC_559__ The integer constant 1, intended to indicate conformance to the specifications in annex F (IEC 60559 floating-point arithmetic).</code> and C11 <code>&#167;Annex F.2 ... The float type matches the IEC 60559 single format. ...</code>. The IEC 60559 specification is identical to IEEE 754-2008."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1468414133, "post_id": 38351068, "comment_id": 64116670, "body": "The cast-lines actually invoke UB. Anything can happen. From the standard&#39;s view, <b>any</b> behaviour is legal."}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 4, "last_activity_date": 1468412056, "last_edit_date": 1468412056, "creation_date": 1468410923, "answer_id": 38351068, "question_id": 38350731, "link": "https://stackoverflow.com/questions/38350731/floating-point-zero-in-c-implementations-ieee-754-invariants/38351068#38351068", "title": "Floating-point zero in C implementations (IEEE 754 invariants?)", "body": "<p>Mentioning C11 just confuses your question because IEEE 754 is not required by any C standard.</p>\n\n<p>That being said, just assuming IEEE 754 32 bit floating point numbers and making no assumptions on <code>x2</code> and <code>y2</code> (other than them not being infinite or NaN) you can't assume that all the bits of the result will be 0. IEEE 754 numbers have two zeroes, one negative and one positive and if the expression <code>(y2 - y0) - (x2 - x0)</code> is negative, the result of multiplying it with a zero will be a negative zero.</p>\n\n<p>We can test it with this short example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint\nmain(int argc, char **argv)\n{\n    union {\n        float f;\n        uint32_t i;\n    } foo;\n\n    float a = 0;\n    float b = -1;\n\n    foo.f = a * b;\n    printf(\"0x%x\\n\", foo.i);\n\n    return 0;\n}\n</code></pre>\n\n<p>The result (notice no optimizations since I don't want the compiler to be clever):</p>\n\n<pre><code>$ cc -o foo foo.c &amp;&amp; ./foo\n0x80000000\n</code></pre>\n\n<p>Oh, I just noticed that the second part of your question which you called \"in other words\" isn't actually in other words because it's a different question.</p>\n\n<p>To start with:</p>\n\n<pre><code>(*(uint32_t*)(&amp;a) == *(uint32_t*)(&amp;b))\n</code></pre>\n\n<p>isn't equivalent to <code>a == b</code> for floating point because <code>-0 == 0</code>. And with that, the other part of the assumption falls apart because <code>-0 - 0</code> gives you <code>-0</code>. I'm not able to make any other subtraction of equal numbers generate a negative zero, but that doesn't mean it's not possible, I'm pretty sure that the standards don't enforce the same algorithm for subtraction on all implementations so a sign bit could sneak in there somehow.</p>\n"}], "owner": {"reputation": 1552, "user_id": 3145469, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/40ef74077e497553ad7a6ce20a1fc38b?s=128&d=identicon&r=PG&f=1", "display_name": "MrMobster", "link": "https://stackoverflow.com/users/3145469/mrmobster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1468566830, "creation_date": 1468410023, "last_edit_date": 1468415161, "question_id": 38350731, "link": "https://stackoverflow.com/questions/38350731/floating-point-zero-in-c-implementations-ieee-754-invariants", "title": "Floating-point zero in C implementations (IEEE 754 invariants?)", "body": "<p>I have a following C expression (variables are 32-bit floats)</p>\n\n<pre><code>float result = (x1 - x0) * (y2 - y0) - (x2 - x0) * (y1 - y0)\n</code></pre>\n\n<p>Assuming that <code>x0==x1</code> and <code>y0==y1</code>, (and with <code>==</code> I mean binary representation identity), can I rely on the fact that the expression will necessarily evaluate to zero (as in, all bits of the float are set to 0)? In another words, can I assume that following invariants always hold?</p>\n\n<pre><code>memcmp(&amp;a, &amp;b, sizeof(float) == 0 =&gt; memcmp(a-b, (uint32_t)0, sizeof(float)) == 0\n0*a == 0.0\n</code></pre>\n\n<p>It is safe to assume that all values are finite numbers (no INFINITY or NaN). </p>\n\n<p>Edit: As pointed out in the answers, multiplications with 0 can produce signed zeros. Can I still rely on the fact that the result of the expression will be equal to 0.0 using FP-comparison rules, i.e.:</p>\n\n<pre><code>(result == 0.0) \n</code></pre>\n\n<p>Edit 1: Replaced type casts by memcmp calls to illustrate the question better. </p>\n\n<p>P.S. I am limiting my code to compliant C11 compilers only, in case it makes any difference. I am also willing to rely on <strong>STDC_IEC_559</strong> support if that will help my case. </p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "edited": false, "score": 1, "creation_date": 1468410364, "post_id": 38350728, "comment_id": 64113985, "body": "There is no single function that accomplishes this task in the standard library."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 5350624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/949ce5f14ccb1bcf75e4779b0542f4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Abhas", "link": "https://stackoverflow.com/users/5350624/abhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1468434821, "last_edit_date": 1495540286, "creation_date": 1468410425, "answer_id": 38350868, "question_id": 38350728, "link": "https://stackoverflow.com/questions/38350728/how-to-cut-out-a-substring-from-a-string-in-c/38350868#38350868", "title": "how to cut out a substring from a string in c", "body": "<p>Possible Duplicate :<a href=\"https://stackoverflow.com/questions/4833347/removing-substring-from-a-string\">Removing substring from a string?</a></p>\n\n<p>Find the position of starting and ending '$' in your string which seperates the name you need (or any other separator), then use strcpy to copy the string from starting '$' to ending '$' with string length (position of end - position of start +1) to the variable you wish to use.</p>\n\n<p>or use strtok as suggested. View this for documentation on the same: <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strtok.htm\" rel=\"nofollow noreferrer\">http://www.tutorialspoint.com/c_standard_library/c_function_strtok.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 553, "user_id": 4830306, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cIfRj.png?s=128&g=1", "display_name": "Nicolas Jean", "link": "https://stackoverflow.com/users/4830306/nicolas-jean"}, "is_accepted": false, "score": 2, "last_activity_date": 1468410505, "creation_date": 1468410505, "answer_id": 38350895, "question_id": 38350728, "link": "https://stackoverflow.com/questions/38350728/how-to-cut-out-a-substring-from-a-string-in-c/38350895#38350895", "title": "how to cut out a substring from a string in c", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow\">strtok</a> to split your string. Note that it modifies the string you pass as an argument.</p>\n"}], "owner": {"reputation": 19, "user_id": 6377289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1756190651283304/picture?type=large", "display_name": "Asaf Alcalay", "link": "https://stackoverflow.com/users/6377289/asaf-alcalay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1468411714, "answer_count": 2, "score": 0, "last_activity_date": 1468434821, "creation_date": 1468410021, "last_edit_date": 1468414501, "question_id": 38350728, "link": "https://stackoverflow.com/questions/38350728/how-to-cut-out-a-substring-from-a-string-in-c", "closed_reason": "Duplicate", "title": "how to cut out a substring from a string in c", "body": "<p>Is there any way which i can cut out a sub string of a given string?\nI mean, let's say that my string contains friend's names separated by <code>_$_</code> and I want to cut out a friend name from that string, is there any function to do so?<br>\nExample: <code>mike tull_$_tom cruise_$_noy elias</code> and i want to cut out <code>tome cruise</code>. </p>\n\n<p>P.S: I don't know the exact place of the sub string and of course I can use <code>strstr</code>, but is there a built function to do so?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1468411068, "post_id": 38350701, "comment_id": 64114446, "body": "not a duplicate: it is nonsense to add pointers, but substract them is useful to compute an offset if the pointer belongs the same array"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1468411142, "post_id": 38350701, "comment_id": 64114490, "body": "What is the type of <code>params</code>? I&#39;m guessing it&#39;s <code>char *</code>. If so that explains it. Pointer subtraction requires the pointers to be of the same type."}, {"owner": {"reputation": 109, "user_id": 3583842, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/848e1219b7246300ed96762cfcf11fab?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/3583842/abhinav"}, "edited": false, "score": 0, "creation_date": 1468413513, "post_id": 38350701, "comment_id": 64116191, "body": "Yes param is of char *."}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 3, "last_activity_date": 1468413875, "creation_date": 1468413875, "answer_id": 38352132, "question_id": 38350701, "link": "https://stackoverflow.com/questions/38350701/error-invalid-operands-to-binary/38352132#38352132", "title": "error: invalid operands to binary -", "body": "<p>When subtracting two pointers, they must be of the same type.  This is because pointer arithmetic in C is based on the size of the pointees, so for example if you subtract <code>char*</code> from <code>int*</code> you have a 1-byte object and a 4-byte object, and so there is no way for the compiler to know whether the result should be in 1-byte units or 4-byte units.</p>\n\n<p>I realize your two pointees are both single bytes, but it's still not allowed in standard C (which makes no assumptions that objects of different types would be stored in the same area, etc.).</p>\n"}], "owner": {"reputation": 109, "user_id": 3583842, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/848e1219b7246300ed96762cfcf11fab?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav", "link": "https://stackoverflow.com/users/3583842/abhinav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 38352132, "answer_count": 1, "score": 0, "last_activity_date": 1468413875, "creation_date": 1468409959, "last_edit_date": 1468413594, "question_id": 38350701, "link": "https://stackoverflow.com/questions/38350701/error-invalid-operands-to-binary", "title": "error: invalid operands to binary -", "body": "<p>This piece of code is giving the error <code>error: invalid operands to binary -</code>:</p>\n\n<pre><code>if(memcmp(params , DEV_SERVICE_DISCOVERY , strlen(DEV_SERVICE_DISCOVERY)) == 0)\n{\n    UINT8 *yes_no;\n\n    params = XSH_UtilFindNextToken(params);\n    yes_no = XSH_UtilFindNextToken(params);\n\n    params[yes_no - params - 1] = '\\0';\n\n    rc = AppTest_ServiceDiscovery(params, yes_no , strlen(yes_no), pOut);\n}\n</code></pre>\n\n<p>I changed <code>UINT8 *yes_no</code> to <code>char *yes_no</code> and it got resolved. But didn't get why error was coming and why it got resolved. Please explain the issue.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1468407632, "post_id": 38349746, "comment_id": 64112059, "body": "show us <code>struct student</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1468407656, "post_id": 38349746, "comment_id": 64112073, "body": "also, <code>prev-&gt;link!=n</code> what is that supposed to mean?"}, {"owner": {"reputation": 819, "user_id": 6086833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060138486ddeff3186d29262a5852c76?s=128&d=identicon&r=PG&f=1", "display_name": "T Johnson", "link": "https://stackoverflow.com/users/6086833/t-johnson"}, "edited": false, "score": 0, "creation_date": 1468408417, "post_id": 38349746, "comment_id": 64112593, "body": "n is a char * but prev-&gt;link is a student * so you want to compare student names such as strcmp( prev-&gt;link-&gt;name, n ) == 0"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6469868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9170187733148266b6cd3b007d9b9e88?s=128&d=identicon&r=PG&f=1", "display_name": "aish", "link": "https://stackoverflow.com/users/6469868/aish"}, "edited": false, "score": 0, "creation_date": 1468408453, "post_id": 38350033, "comment_id": 64112614, "body": "thank u so much.. the error is cleared. but instead of deleting the student record i am getting the output as linked list empty :("}], "tags": [], "owner": {"reputation": 1, "user_id": 6583969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/575830a637c118290d3f2d0579b862c0?s=128&d=identicon&r=PG&f=1", "display_name": "Yuan Jianzheng", "link": "https://stackoverflow.com/users/6583969/yuan-jianzheng"}, "is_accepted": false, "score": 0, "last_activity_date": 1468411086, "last_edit_date": 1468411086, "creation_date": 1468408267, "answer_id": 38350033, "question_id": 38349746, "link": "https://stackoverflow.com/questions/38349746/deleting-a-student-record-from-a-single-linked-list/38350033#38350033", "title": "deleting a student record from a single linked list", "body": "<p>I think the type of <code>prev-&gt;link</code> is <code>struct student *</code>, but the type of <code>n</code> is <code>char *</code>, those type is different, so you can use</p>\n\n<pre><code>static_cast&lt;char *&gt;(prev-&gt;link) != n\n</code></pre>\n\n<p>or </p>\n\n<pre><code>(char *)(prev-&gt;link) != n \n</code></pre>\n\n<p>to fix the warning.</p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 6523756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a472dd3d7c8943de1480ee6c7de4a299?s=128&d=identicon&r=PG&f=1", "display_name": "Damien Baldy", "link": "https://stackoverflow.com/users/6523756/damien-baldy"}, "is_accepted": true, "score": 0, "last_activity_date": 1468415078, "last_edit_date": 1468415078, "creation_date": 1468412415, "answer_id": 38351575, "question_id": 38349746, "link": "https://stackoverflow.com/questions/38349746/deleting-a-student-record-from-a-single-linked-list/38351575#38351575", "title": "deleting a student record from a single linked list", "body": "<p>There are many things not really working in your code.</p>\n\n<p>I think you want to remove the whole struct matching the char* n from the linked list.</p>\n\n<p>You cannot compare char*n and a struct, so this loop is incorrect:</p>\n\n<pre><code>while(prev-&gt;link!=NULL &amp;&amp; prev-&gt;link!=n)\n{\n    prev=prev-&gt;link;\n}\n</code></pre>\n\n<p>You need to check if the first one doesn't match with your string, otherwise it would remain. If the first one matches, you need to reallocate the beginning of the struct, so you would use a **q in the declaration of the function (be sure to properly impact it). The first check would look like:</p>\n\n<pre><code>struct student *prev = *q;\nif (strcmp(prev-&gt;name, n) == 0)\n{\n    *q = (*q)-&gt;link;\n    prev-&gt;link = NULL; //not compulsory, but a good habit to take\n    free(prev);\n}\n</code></pre>\n\n<p>I would write the loop this way :</p>\n\n<pre><code>while(prev-&gt;link != NULL &amp;&amp; strcmp(prev-&gt;link-&gt;name, n) != 0))\n    {\n        prev = prev-&gt;link;\n    }\n</code></pre>\n\n<p>In C, you need to use strcmp() to compare two strings. \nThe no-match \"if\" would then remain identical.</p>\n\n<p>Then, you have some issues with memory allocation. You cannot free fixed pointers (name[10] for instance), but only malloced memory.\nSo the end, after the no-match if, I advise a \"else\" that would look like:</p>\n\n<pre><code>else\n{\n     struct student matched_student = prev-&gt;link;\n     prev-&gt;link = prev-&gt;link-&gt;link; \n     matched_student-&gt;link = NULL;\n     free(matched_student);\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6469868, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9170187733148266b6cd3b007d9b9e88?s=128&d=identicon&r=PG&f=1", "display_name": "aish", "link": "https://stackoverflow.com/users/6469868/aish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 1, "accepted_answer_id": 38351575, "answer_count": 2, "score": -2, "last_activity_date": 1468415078, "creation_date": 1468407533, "last_edit_date": 1468409407, "question_id": 38349746, "link": "https://stackoverflow.com/questions/38349746/deleting-a-student-record-from-a-single-linked-list", "title": "deleting a student record from a single linked list", "body": "<p>This is the code i have written to delete a particular student record in a linked list: </p>\n\n<pre><code>int delete ( struct student **q, struct student s,char *n ) {\n    if(*q==NULL)\n    {\n        printf(\"The linked list is empty\\n\");\n        return 0;\n    }\n    struct student *prev=*q;\n    while(prev-&gt;link!=NULL &amp;&amp; prev-&gt;link!=n)\n    {\n        prev=prev-&gt;link;\n    }\n    if(prev-&gt;link==NULL)\n    {\n        printf(\"Student %s not found\\n\",n);\n        return 0;\n    }\n    prev-&gt;link=prev-&gt;link-&gt;link;\n    free(n);\n    return 1;\n}\n</code></pre>\n\n<p>but i am getting a warning message telling <code>comparison of distinct pointer types lacks a cast [enabled by default]</code> for the while statement <code>while(prev-&gt;link!=NULL &amp;&amp; prev-&gt;link!=n)</code></p>\n\n<p>This is the structure:</p>\n\n<pre><code>struct student\n{\n  int id;\n  char name[10];\n  char gender[10];\n  struct student * link;\n}*head;\n</code></pre>\n\n<p>and <code>n</code> stores the name of the student that has to be deleted.</p>\n"}, {"tags": ["c", "input", "scanf", "stdin", "fgets"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1468406994, "post_id": 38349452, "comment_id": 64111643, "body": "Welcome to Stack Overflow! You mind creating a <a href=\"http://stackoverflow.com/help/mcve\"><b><i>MCVE</i></b></a>?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1468407256, "post_id": 38349452, "comment_id": 64111811, "body": "<code>scanf(&quot;%d&quot;, &amp;studentVar.rollno);scanf(&quot;%*[^\\n]&quot;);scanf(&quot;%*c&quot;);scanf(&quot;%19&zwnj;&#8203;[^\\n]%*c&quot;, studentVar.full_name);scanf(&quot;%49[^\\n]%*c&quot;, studentVar.address);scanf(&quot;%49[^\\n]%*c&quot;, studentVar.birthmark);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468408223, "post_id": 38349452, "comment_id": 64112444, "body": "<a href=\"http://ideone.com/I5QGgR\" rel=\"nofollow noreferrer\">DEMO</a>"}, {"owner": {"reputation": 143, "user_id": 6571027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b5f7f8d98a239791c8cac2877a432?s=128&d=identicon&r=PG&f=1", "display_name": "ekaf", "link": "https://stackoverflow.com/users/6571027/ekaf"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468410195, "post_id": 38349452, "comment_id": 64113849, "body": "@BLUEPIXY thank you so much :)that helped"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 6571027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b5f7f8d98a239791c8cac2877a432?s=128&d=identicon&r=PG&f=1", "display_name": "ekaf", "link": "https://stackoverflow.com/users/6571027/ekaf"}, "edited": false, "score": 0, "creation_date": 1468407324, "post_id": 38349593, "comment_id": 64111861, "body": "thanks but there are some  error when fgets is followed by scanf(),in that case what to do .                                                                        for example scanf(&quot;%s&quot;,var);fgets(par1,par2,par3); in this case fgets eat the new line left by scanf .should i flush that ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 143, "user_id": 6571027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b5f7f8d98a239791c8cac2877a432?s=128&d=identicon&r=PG&f=1", "display_name": "ekaf", "link": "https://stackoverflow.com/users/6571027/ekaf"}, "edited": false, "score": 2, "creation_date": 1468407379, "post_id": 38349593, "comment_id": 64111900, "body": "@ekaf why don&#39;t you use <code>fgets()</code> all the time? (<i>Sorry, personally I&#39;m not a fan of <code>scanf()</code> family</i>)"}, {"owner": {"reputation": 143, "user_id": 6571027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b5f7f8d98a239791c8cac2877a432?s=128&d=identicon&r=PG&f=1", "display_name": "ekaf", "link": "https://stackoverflow.com/users/6571027/ekaf"}, "edited": false, "score": 2, "creation_date": 1468407513, "post_id": 38349593, "comment_id": 64111996, "body": "okay from now on words only fgets while dealing with string :) thanks for the help"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 143, "user_id": 6571027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b5f7f8d98a239791c8cac2877a432?s=128&d=identicon&r=PG&f=1", "display_name": "ekaf", "link": "https://stackoverflow.com/users/6571027/ekaf"}, "edited": false, "score": 1, "creation_date": 1468415930, "post_id": 38349593, "comment_id": 64118012, "body": "If all learners started with <code>fgets()</code> and not &quot;learned&quot; with <code>scanf()</code>, think of all the fewer SO posts there would be.  @ekaf Also review <a href=\"http://stackoverflow.com/q/2693776/2410359\">stackoverflow.com/q/2693776/2410359</a>"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1468407326, "last_edit_date": 1495542761, "creation_date": 1468407071, "answer_id": 38349593, "question_id": 38349452, "link": "https://stackoverflow.com/questions/38349452/how-to-take-string-input-simultaneously/38349593#38349593", "title": "How to take string input simultaneously?", "body": "<p>The best approach will be , reading a whole line from input by <code>fgets()</code> and then parse and validate before you populate the members of the structure. A flow chart can look like</p>\n\n<pre><code>fgets(into the buffer) and the return is not NULL\nif (integer)\nstore into rollno;\nelse \ncopy the input string into corresponding member variable.\n</code></pre>\n\n<p>And yes, <code>fflush(stdin)</code> invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>, <a href=\"https://stackoverflow.com/a/38325926/2173917\"><strong>don't use that</strong></a>.</p>\n\n<hr>\n\n<p>(<em>Without the code with error and <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>, that's all the help we can do</em>)</p>\n"}], "owner": {"reputation": 143, "user_id": 6571027, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b5f7f8d98a239791c8cac2877a432?s=128&d=identicon&r=PG&f=1", "display_name": "ekaf", "link": "https://stackoverflow.com/users/6571027/ekaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 38349593, "answer_count": 1, "score": 1, "last_activity_date": 1468415142, "creation_date": 1468406711, "last_edit_date": 1468415142, "question_id": 38349452, "link": "https://stackoverflow.com/questions/38349452/how-to-take-string-input-simultaneously", "title": "How to take string input simultaneously?", "body": "<p>i am working on a database basic project \nconsider a structure </p>\n\n<pre><code>struct student\n{ \nint rollno;\nchar full_name[20];\nchar address[50];\nchar birthmark[50];\n};\n</code></pre>\n\n<p>how to take this input </p>\n\n<blockquote>\n  <p>rollno 6 </p>\n  \n  <p>name john snow</p>\n  \n  <p>address winterfell of north</p>\n  \n  <p>birthmark swords wound all over</p>\n</blockquote>\n\n<p><strong>What I have tried:</strong></p>\n\n<p>i have tried </p>\n\n<p><code>scanf(\"%s\",stringname)</code>,<code>scanf(\"%[^\\n]s\",stringname)</code>,<code>gets(stringname)</code>,\n<code>fgets(buffer,size,stdin)</code> with <code>fflush(stdin)</code>.\nthere are always some error.\nso far fgets work perfectly but I have read <code>ffush(stdin)</code> is a wrong practice .</p>\n\n<p>so what should be the approach to take input of string (with spaces) simultaneously one after the another.</p>\n"}, {"tags": ["c", "load", "trie", "cs50"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1468406008, "post_id": 38349189, "comment_id": 64111034, "body": "Did not read the question, just a blind suggestion, did you check <a href=\"https://cs50.stackexchange.com\">CS50</a>?"}, {"owner": {"reputation": 9, "user_id": 6583875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5297c244bc60e3502a0b49dc748bb29c?s=128&d=identicon&r=PG&f=1", "display_name": "jamiej", "link": "https://stackoverflow.com/users/6583875/jamiej"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1468406246, "post_id": 38349189, "comment_id": 64111190, "body": "Yep, have watched all the videos and walkthroughs but still banging my head against the wall"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1468406307, "post_id": 38349189, "comment_id": 64111224, "body": "which video? I&#39;m talking about SE site..did you check the link in my comment?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1468406344, "post_id": 38349189, "comment_id": 64111246, "body": "1) <code>node* root = calloc(1, sizeof(root));</code> --&gt; <code>node* root = calloc(1, sizeof(*root));</code>"}, {"owner": {"reputation": 9, "user_id": 6583875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5297c244bc60e3502a0b49dc748bb29c?s=128&d=identicon&r=PG&f=1", "display_name": "jamiej", "link": "https://stackoverflow.com/users/6583875/jamiej"}, "edited": false, "score": 0, "creation_date": 1468406656, "post_id": 38349189, "comment_id": 64111427, "body": "Gah, that should have been sizeof(node) not (root).  At least that fixed the segmentation fault :-)  Have a different error now but I&#39;ll try and crack on.  Thanks BLUEPIXY"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6548975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xa3cw.png?s=128&g=1", "display_name": "Bobbybobbobbo", "link": "https://stackoverflow.com/users/6548975/bobbybobbobbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1469935005, "creation_date": 1469935005, "answer_id": 38680422, "question_id": 38349189, "link": "https://stackoverflow.com/questions/38349189/cs50-pset5-load-function/38680422#38680422", "title": "CS50 pset5 Load Function", "body": "<p>I'm assuming you set the size of array <code>children[]</code> to store 26 letters of the alphabet plus apostrophes. If so, when <code>fgetc(fp)</code> returns an apostrophe with an acsii code of 39 (I think), <code>index</code> will be set to -57, which is definitely not part of <code>trav-&gt;children</code>. That's probably where you're getting the segfault (or at least one of the places)\n.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 9, "user_id": 6583875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5297c244bc60e3502a0b49dc748bb29c?s=128&d=identicon&r=PG&f=1", "display_name": "jamiej", "link": "https://stackoverflow.com/users/6583875/jamiej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1347, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469935005, "creation_date": 1468405971, "last_edit_date": 1469847097, "question_id": 38349189, "link": "https://stackoverflow.com/questions/38349189/cs50-pset5-load-function", "title": "CS50 pset5 Load Function", "body": "<p>I'm having some trouble with the load section of pset5 on CS50, it would be great if someone could help. I'm trying to load a trie that reads from a dictionary (file fp below) and then iterates through the letters to create the trie.</p>\n\n<p>I understand the concept of building a trie but I think I'm missing something with how the struct pointers are set up (hopefully I'm not way off the track with the code below).  I've tried to set up 'trap' to navigate through each stage of the try.</p>\n\n<p>I'm currently getting a segmentation fault so not entirely sure where to go next.  Any help would be massively appreciated.</p>\n\n<pre><code>/** \n* Loads dictionary into memory.  Returns true if successful else false.\n*/\nbool load(const char* dictionary)\n{\n    //create word node and set root\n\n    typedef struct node {\n        bool is_word;\n        struct node* children[27];\n    } node;\n\n    node* root = calloc(1, sizeof(root));\n    root -&gt; is_word = false;\n    node* trav = root;\n\n    //open small dictionary\n\n    FILE* fp = fopen(dictionary, \"r\");\n    if (fp == NULL)\n    {\n        printf(\"Could not open %s.\\n\", dictionary);\n        return false;\n    } \n\n    //read characters one by one and write them to the trie\n\n        for (int c = fgetc(fp); c != EOF; c = fgetc(fp))\n        {\n\n            //set index using to lower.  Use a-1 to set ' to 0 and other letters 1-27\n\n            int index = tolower(c)-('a'-1);\n\n            //if new line (so end of word) set is_word to true and return trav to root)\n\n            if (index == '\\n')\n            {\n                trav-&gt;is_word = true;\n                trav = root;\n            }\n\n            //if trav-&gt; children is NULL then create a new node assign to next\n            //and move trav to that position\n\n            if (trav-&gt;children[index] == NULL)\n            {\n                node* next = calloc(1, sizeof(node));\n                trav-&gt;children[index] = next;\n                trav = next;\n            }\n\n            //else pointer must exist so move trav straight on\n\n            else {\n                trav = trav-&gt;children[index];\n            }\n\n    }\n\n    fclose(fp);\n\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "unix", "operating-system"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1468405644, "post_id": 38348720, "comment_id": 64110829, "body": "Why you cannot use <code>fprintf()</code>?"}, {"owner": {"reputation": 13, "user_id": 6583767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557de4de3c436fdaffaee12cd33b534?s=128&d=identicon&r=PG&f=1", "display_name": "Xeqtr", "link": "https://stackoverflow.com/users/6583767/xeqtr"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1468405853, "post_id": 38348720, "comment_id": 64110945, "body": "Thanks for your reply Sourav. I can use fprintf() but I was just trying things out and came across this."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1468406445, "post_id": 38348720, "comment_id": 64111305, "body": "You can use standard <code>freopen()</code> func to redirect <code>stdout</code> to whatever you want."}, {"owner": {"reputation": 13, "user_id": 6583767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557de4de3c436fdaffaee12cd33b534?s=128&d=identicon&r=PG&f=1", "display_name": "Xeqtr", "link": "https://stackoverflow.com/users/6583767/xeqtr"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1468406689, "post_id": 38348720, "comment_id": 64111455, "body": "Thanks @Serhio , will try it out ,never used it..and by the way the answer to my question is that &quot;/n&quot; is providing the fflush(stdout) which we have to explicitly mention if not using &quot;/n&quot;."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1468406907, "post_id": 38348720, "comment_id": 64111580, "body": "Oh, my comment is just a  small note about redirection approach, not about question itself."}, {"owner": {"reputation": 13, "user_id": 6583767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557de4de3c436fdaffaee12cd33b534?s=128&d=identicon&r=PG&f=1", "display_name": "Xeqtr", "link": "https://stackoverflow.com/users/6583767/xeqtr"}, "reply_to_user": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1468407282, "post_id": 38348720, "comment_id": 64111824, "body": "Thanks @Serhio,I learnt a new function  freopen() :)."}, {"owner": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "edited": false, "score": 0, "creation_date": 1468407324, "post_id": 38348720, "comment_id": 64111862, "body": "I don&#39;t think that this question is a duplicate. It is more about a specific problem with buffered streams wich could be explained in detail than the generic question about &quot;Why does <code>printf</code> not work?&quot;"}, {"owner": {"reputation": 13, "user_id": 6583767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557de4de3c436fdaffaee12cd33b534?s=128&d=identicon&r=PG&f=1", "display_name": "Xeqtr", "link": "https://stackoverflow.com/users/6583767/xeqtr"}, "reply_to_user": {"reputation": 2575, "user_id": 4711812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87100b6114369140256e64e7ebab7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "muXXmit2X", "link": "https://stackoverflow.com/users/4711812/muxxmit2x"}, "edited": false, "score": 0, "creation_date": 1468407671, "post_id": 38348720, "comment_id": 64112083, "body": "@muXXmit2X     I did try to search but couldn&#39;t really find answer and I am pretty new here ,maybe next time I shall dig little deeper."}], "owner": {"reputation": 13, "user_id": 6583767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8557de4de3c436fdaffaee12cd33b534?s=128&d=identicon&r=PG&f=1", "display_name": "Xeqtr", "link": "https://stackoverflow.com/users/6583767/xeqtr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1468405779, "answer_count": 0, "score": 0, "last_activity_date": 1468405584, "creation_date": 1468404711, "last_edit_date": 1468405584, "question_id": 38348720, "link": "https://stackoverflow.com/questions/38348720/n-trouble-print-standard-output-to-the-text-files-using-file-descriptors-in", "closed_reason": "Duplicate", "title": "&#39;\\n&#39; trouble: print standard output to the text files using FILE DESCRIPTORS in C", "body": "<p>I have a doubt regarding file descriptors used in C language.\nI am trying to redirect standard output to a text file so that printf(\"\") output goes in the file.</p>\n\n<p>Using dup2,I have written following code snippet. The code works fine and I get 2 strings \"sugar\" and \"spice\" on screen output and \"salt\" is stored in the file.</p>\n\n<p>But when I remove <code>\"\\n\"</code> from statements: <code>printf(\"sugar\\n\")</code>, <code>printf(\"salt\\n\")</code>, <code>printf(\"spice\\n\")</code>,then I only get screen output as: <code>\"sugarsaltspice\"</code> and nothing is stored in the file.</p>\n\n<p>Please help me regarding this as I am not able to figure out why <code>\"\\n\"</code> makes a difference here.</p>\n\n<p>Thanks a tonne.</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;errno.h&gt;\n\nint main()\n{\n    int fd;\n    int o = dup(1); //backup of STD_OUT\n    fd = open(\"/home/Desktop/Text2.txt\",O_CREAT|O_TRUNC|O_WRONLY,0);\n\n    printf(\"sugar\\n\");\n\n    dup2(fd,1);  //CHANGE STD_OUT to FILE\n    printf(\"salt\\n\");\n\n    dup2(o,1); //Restore STD_OUT\n    printf(\"spice\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "timer", "posix", "sigaction"], "comments": [{"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "edited": false, "score": 1, "creation_date": 1468409708, "post_id": 38348707, "comment_id": 64113496, "body": "I think the decision of choosing between threads or signals as the underlying notification interface for POSIX timers is entirely related to (opinion-based) whether you&#39;re willing to use threads (for whatever reason) on your application, or even if you don&#39;t, you&#39;re forced to use the thread notification system due to the signals interface not being an option for some reason (whatever that reason is... one good reason may be for the sake of simplicity)."}], "answers": [{"tags": [], "owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1486658702, "last_edit_date": 1486658702, "creation_date": 1468426908, "answer_id": 38356989, "question_id": 38348707, "link": "https://stackoverflow.com/questions/38348707/do-i-have-to-use-a-signal-handler-for-a-posix-timer/38356989#38356989", "title": "Do I have to use a signal handler for a Posix timer?", "body": "<p>It <em>seems</em> that I do not have to use a signal handler and can make the code much simpler, as shown here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\nstatic unsigned int pass_value_by_pointer = 42;\n\nvoid Timer_has_expired(union sigval timer_data)\n{\n    printf(\"Timer expiration handler function; %d\\n\", *(int *) timer_data.sival_ptr);\n}\n\nint main(void)\n{\n    struct sigevent timer_signal_event;\n    timer_t timer;\n\n    struct itimerspec timer_period;\n\n    printf(\"Create timer\\n\");\n    timer_signal_event.sigev_notify = SIGEV_THREAD;\n    timer_signal_event.sigev_notify_function = Timer_has_expired;       // This function will be called when timer expires\n    // Note that the following is a union. Assign one or the other (preferably by pointer)\n    //timer_signal_event.sigev_value.sival_int = 38;                        // This argument will be passed to the function\n    timer_signal_event.sigev_value.sival_ptr = (void *) &amp;pass_value_by_pointer;     // as will this (both in a structure)\n    timer_signal_event.sigev_notify_attributes = NULL;\n    timer_create(CLOCK_MONOTONIC, &amp;timer_signal_event, &amp;timer);\n\n    printf(\"Start timer\\n\");\n    timer_period.it_value.tv_sec = 1;                                   // 1 second timer\n    timer_period.it_value.tv_nsec = 0;                                  // no nano-seconds\n    timer_period.it_interval.tv_sec = 0;                                // non-repeating timer\n    timer_period.it_interval.tv_nsec = 0;\n\n    timer_settime(timer, 0, &amp;timer_period, NULL);\n    sleep(2);\n\n    printf(\"----------------------------\\n\");\n    printf(\"Start timer a second time\\n\");\n    timer_settime(timer, 0, &amp;timer_period, NULL);\n    sleep(2);\n\n    printf(\"----------------------------\\n\");\n    printf(\"Start timer a third time\\n\");\n    timer_settime(timer, 0, &amp;timer_period, NULL);\n\n    printf(\"Cancel timer\\n\");\n    timer_delete(timer);\n    sleep(2);\n    printf(\"The timer expiration handler function should not have been called\\n\");\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>when run, it gives this output:  </p>\n\n<pre><code>Create timer\nStart timer\nTimer expiration handler function; 42\n----------------------------\nStart timer a second time\nTimer expiration handler function; 42\n----------------------------\nStart timer a third time\nCancel timer\nThe timer expiration handler function should not have been called\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 3, "last_activity_date": 1486659372, "creation_date": 1486659372, "answer_id": 42142502, "question_id": 38348707, "link": "https://stackoverflow.com/questions/38348707/do-i-have-to-use-a-signal-handler-for-a-posix-timer/42142502#42142502", "title": "Do I have to use a signal handler for a Posix timer?", "body": "<p>Linux has timerfd. <a href=\"https://lwn.net/Articles/251413/\" rel=\"nofollow noreferrer\">https://lwn.net/Articles/251413/</a> . This will allows a waitable time to be used together with select/poll/epoll. Alternatively you can use the timeout on select/poll/epoll. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5164080"}, "is_accepted": false, "score": 3, "last_activity_date": 1496556450, "creation_date": 1496556450, "answer_id": 44351243, "question_id": 38348707, "link": "https://stackoverflow.com/questions/38348707/do-i-have-to-use-a-signal-handler-for-a-posix-timer/44351243#44351243", "title": "Do I have to use a signal handler for a Posix timer?", "body": "<p>Michael Kerrisk has a detailed example in his \"The Linux Programming Interface\" book:\n</p>\n\n<pre><code>/* ptmr_sigev_thread.c\n\n   This program demonstrates the use of threads as the notification mechanism\n   for expirations of a POSIX timer. Each of the program's command-line\n   arguments specifies the initial value and interval for a POSIX timer. The\n   format of these arguments is defined by the function itimerspecFromStr().\n\n   The program creates and arms one timer for each command-line argument.\n   The timer notification method is specified as SIGEV_THREAD, causing the\n   timer notifications to be delivered via a thread that invokes threadFunc()\n   as its start function. The threadFunc() function displays information\n   about the timer expiration, increments a global counter of timer expirations,\n   and signals a condition variable to indicate that the counter has changed.\n   In the main thread, a loop waits on the condition variable, and each time\n   the condition variable is signaled, the main thread prints the value of the\n   global variable that counts timer expirations.\n\n   Kernel support for Linux timers is provided since Linux 2.6. On older\n   systems, an incomplete user-space implementation of POSIX timers\n   was provided in glibc.\n*/\n#include &lt;signal.h&gt;\n#include &lt;time.h&gt;\n#include &lt;pthread.h&gt;\n#include \"curr_time.h\"              /* Declares currTime() */\n#include \"tlpi_hdr.h\"\n#include \"itimerspec_from_str.h\"    /* Declares itimerspecFromStr() */\n\nstatic pthread_mutex_t mtx = PTHREAD_MUTEX_INITIALIZER;\nstatic pthread_cond_t cond = PTHREAD_COND_INITIALIZER;\n\nstatic int expireCnt = 0;           /* Number of expirations of all timers */\nstatic void                         /* Thread notification function */\nthreadFunc(union sigval sv)\n{\n    timer_t *tidptr;\n    int s;\n\n    tidptr = sv.sival_ptr;\n\n    printf(\"[%s] Thread notify\\n\", currTime(\"%T\"));\n    printf(\"    timer ID=%ld\\n\", (long) *tidptr);\n    printf(\"    timer_getoverrun()=%d\\n\", timer_getoverrun(*tidptr));\n\n    /* Increment counter variable shared with main thread and signal\n       condition variable to notify main thread of the change. */\n\n    s = pthread_mutex_lock(&amp;mtx);\n    if (s != 0)\n        errExitEN(s, \"pthread_mutex_lock\");\n\n    expireCnt += 1 + timer_getoverrun(*tidptr);\n\n    s = pthread_mutex_unlock(&amp;mtx);\n    if (s != 0)\n        errExitEN(s, \"pthread_mutex_unlock\");\n\n    s = pthread_cond_signal(&amp;cond);\n    if (s != 0)\n        errExitEN(s, \"pthread_cond_signal\");\n}\nint\nmain(int argc, char *argv[])\n{\n    struct sigevent sev;\n    struct itimerspec ts;\n    timer_t *tidlist;\n    int s, j;\n\n    if (argc &lt; 2)\n        usageErr(\"%s secs[/nsecs][:int-secs[/int-nsecs]]...\\n\", argv[0]);\n\n    tidlist = calloc(argc - 1, sizeof(timer_t));\n    if (tidlist == NULL)\n        errExit(\"malloc\");\n\n    sev.sigev_notify = SIGEV_THREAD;            /* Notify via thread */\n    sev.sigev_notify_function = threadFunc;     /* Thread start function */\n    sev.sigev_notify_attributes = NULL;\n            /* Could be pointer to pthread_attr_t structure */\n\n    /* Create and start one timer for each command-line argument */\n\n    for (j = 0; j &lt; argc - 1; j++) {\n        itimerspecFromStr(argv[j + 1], &amp;ts);\n\n        sev.sigev_value.sival_ptr = &amp;tidlist[j];\n                /* Passed as argument to threadFunc() */\n\n        if (timer_create(CLOCK_REALTIME, &amp;sev, &amp;tidlist[j]) == -1)\n            errExit(\"timer_create\");\n        printf(\"Timer ID: %ld (%s)\\n\", (long) tidlist[j], argv[j + 1]);\n\n        if (timer_settime(tidlist[j], 0, &amp;ts, NULL) == -1)\n            errExit(\"timer_settime\");\n    }\n\n    /* The main thread waits on a condition variable that is signaled\n       on each invocation of the thread notification function. We\n       print a message so that the user can see that this occurred. */\n\n    s = pthread_mutex_lock(&amp;mtx);\n    if (s != 0)\n        errExitEN(s, \"pthread_mutex_lock\");\n\n    for (;;) {\n        s = pthread_cond_wait(&amp;cond, &amp;mtx);\n        if (s != 0)\n            errExitEN(s, \"pthread_cond_wait\");\n        printf(\"main(): expireCnt = %d\\n\", expireCnt);\n    }\n}\n</code></pre>\n\n<p>Taken from <a href=\"http://man7.org/tlpi/code/online/dist/timers/ptmr_sigev_thread.c.html\" rel=\"nofollow noreferrer\">online source code</a>.</p>\n\n<p>Also read the Chapter 23 of the book, this code is explained in great detail there.</p>\n\n<p>To test the code above, one would enter</p>\n\n<pre><code>$ ./ptmr_sigev_thread 5:5 10:10\n</code></pre>\n\n<p>This will set two timers: one with initial expiry of 5 seconds and an interval with 5 seconds, and the other with 10 respectively.</p>\n\n<p>The definitions for helper functions can be found by following the link on the book's source code above.</p>\n"}], "owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4017, "favorite_count": 1, "accepted_answer_id": 38356989, "answer_count": 3, "score": 3, "last_activity_date": 1538679928, "creation_date": 1468404685, "last_edit_date": 1538679928, "question_id": 38348707, "link": "https://stackoverflow.com/questions/38348707/do-i-have-to-use-a-signal-handler-for-a-posix-timer", "title": "Do I have to use a signal handler for a Posix timer?", "body": "<p>I want to start a timer and have a function called when it expires.</p>\n\n<p>Googling finds lots of examples, including the example in the manual, all of which use <code>sigaction()</code> to set a signal handler.</p>\n\n<p>However, @Patryk says in <a href=\"https://stackoverflow.com/questions/5740954/problem-in-timers-and-signal\">this question</a> that we can just  </p>\n\n<pre><code>void cbf(union sigval);\nstruct sigevent sev;\ntimer_t timer;\n\nsev.sigev_notify = SIGEV_THREAD;\nsev.sigev_notify_function = cbf; //this function will be called when timer expires\nsev.sigev_value.sival_ptr = (void*) arg;//this argument will be passed to cbf\ntimer_create(CLOCK_MONOTONIC, &amp;sev, &amp;timer);\n</code></pre>\n\n<p>which is shorter, simpler, cleaner, more maintainable ...</p>\n\n<p>What gives? Is this correct? Is it just a wrapper for <code>sigaction()</code>? Why do the examples explicitly set a signal handler?</p>\n\n<p>Also, if I start a timer either by this method, or by <code>timer_settime</code> and a signal handler, will cancelling the timer casue the system to remove the association between that timer and the callback, or do I have to do that explicitly?</p>\n\n<hr>\n\n<p>[Update]  You can choose <strong><em>either</em></strong> signals or the method I show in my answer below (or both, but that seems silly). It is a matter of taste. Singals might offer a little more fucntionality, at the cost of complciation. </p>\n\n<p>If all you want to do is start a timer and be notified when it expires, the method in my answer is simplest.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 1, "creation_date": 1468403556, "post_id": 38348158, "comment_id": 64109421, "body": "You allocate mul_3 with n, but you access mul_3 with i*n+j."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1468403581, "post_id": 38348158, "comment_id": 64109438, "body": "Because you&#39;re allocating space for <code>n</code> elements and then storing <code>n*n</code> elements in it?"}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1468404705, "post_id": 38348657, "comment_id": 64110196, "body": "&quot;valgring&quot; -&gt; &quot;valgrind&quot;"}, {"owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1468404803, "post_id": 38348657, "comment_id": 64110275, "body": "@IanAbbott Thanks for the review :)"}], "tags": [], "owner": {"reputation": 748, "user_id": 6256059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a0ddcf115c1b5f22ab58a4d48260068?s=128&d=identicon&r=PG&f=1", "display_name": "blatinox", "link": "https://stackoverflow.com/users/6256059/blatinox"}, "is_accepted": true, "score": 1, "last_activity_date": 1468404782, "last_edit_date": 1468404782, "creation_date": 1468404563, "answer_id": 38348657, "question_id": 38348158, "link": "https://stackoverflow.com/questions/38348158/last-element-of-one-array-overwritten-by-first-element-of-the-next-array/38348657#38348657", "title": "Last element of one array overwritten by first element of the next array", "body": "<p>You don't allocate enough space (<code>n</code>) for <code>mul_1</code>, <code>mul_2</code> and <code>mul_3</code> which seems to be <code>n*n</code> matrices.</p>\n\n<p>You can use <strong>valgrind</strong> to detect this kind of errors.</p>\n"}], "owner": {"reputation": 3, "user_id": 6583683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432e290b9e6d652ba9ced8afecfe3b57?s=128&d=identicon&r=PG&f=1", "display_name": "akash", "link": "https://stackoverflow.com/users/6583683/akash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 38348657, "answer_count": 1, "score": 0, "last_activity_date": 1468408424, "creation_date": 1468403336, "last_edit_date": 1468408424, "question_id": 38348158, "link": "https://stackoverflow.com/questions/38348158/last-element-of-one-array-overwritten-by-first-element-of-the-next-array", "title": "Last element of one array overwritten by first element of the next array", "body": "<p>I have been working on a problem that involves the multiplication of two matrices and I have to get the elements from the user. However, after getting the elements when I print them the last element of the fist matrix is equal to the first element of the second matrix. As a result I am not getting the correct results. I will be obliged if anyone could help. Thanks.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main(){\n    int i, j, k, n;\n    // get the size of the square matrices from user\n    scanf(\"%d\", &amp;n);\n\n    // allogate memory for the matrices\n    int * mul_1 = calloc(n, sizeof(int));\n    int * mul_2 = calloc(n, sizeof(int));\n    int * mul_3 = calloc(n, sizeof(int));\n\n    //get data from user\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;n; j++){\n            scanf(\"%d\", mul_1+n*i+j);\n        }\n    }\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;n; j++){\n            scanf(\"%d\", mul_2+n*i+j);\n        }\n    }\n    // display matrices\n    printf(\"Entered matrices are:\\n =First=\\n\");\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;n; j++){\n            printf(\"%d\\t\", *(mul_1+n*i+j));\n        }\n        printf(\"\\n\");\n    }\n    printf(\"=Second=\\n\");\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;n; j++){\n            printf(\"%d\\t\", *(mul_2+n*i+j));\n        }\n        printf(\"\\n\");\n    }\n\n    //begin matrix multiplicaition\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;n; j++){\n            int sum = 0;\n            for(k=0; k&lt;n; k++){\n                int a = *(mul_1 + n*i + k);\n                int b = *(mul_2 + n*k + j);\n                sum += a*b;\n            }\n            *(mul_3 + i*n + j) = sum;\n        }\n    }\n    //display results\n    printf(\"Result:\\n\");\n    for(i=0; i&lt;n; i++){\n        for(j=0; j&lt;n; j++){\n            printf(\"%d\\t\", *(mul_3+n*i+j));\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "language-lawyer", "strict-aliasing"], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1468405899, "post_id": 38348218, "comment_id": 64110974, "body": "You implicitly raise an interesting point that I hadn&#39;t thought of:  since the allocated memory isn&#39;t assigned to via an <code>int</code> lvalue, has it not yet &quot;become&quot; an <code>int</code> per 6.5 paragraph 6 when it&#39;s dereferenced via an <code>int *</code>, thus violating strict aliasing after all?  Parsing that paragraph is painful."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1468406477, "post_id": 38348218, "comment_id": 64111324, "body": "At that point only a character was written into the object and that didn&#39;t  set the effective type to the object. It becomes <code>int</code> when read, because of <i>For all other accesses to an object having no declared type, the effective type of the object is simply the type of the lvalue used for the access.</i>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1468406927, "post_id": 38348218, "comment_id": 64111596, "body": "If at that same point <code>int</code> was being written into the object, instead of read, the type would also become <code>int</code> because: <i>If a value is stored into an object having no declared type through an lvalue having a type that is not a character type, then the type of the lvalue becomes the effective type of the object for that access and for subsequent accesses that do not modify the stored value.</i>"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1468407639, "post_id": 38348218, "comment_id": 64112067, "body": "So, if code was changed to <code>char charbuf[5*sizeof(int)] ] = &quot;&quot;; void *buf = charbuf;</code>, and <i>calloc</i> removed, that would also break it?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1468407737, "post_id": 38348218, "comment_id": 64112119, "body": "@2501 I think the &quot;copied as an array of character type&quot; portion of paragraph 6 applies, though, because of the <code>for</code> loop in the question.  The &quot;a character type&quot; clause of paragraph 7 is necessary to avoid a violation of strict aliasing."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1468407842, "post_id": 38348218, "comment_id": 64112179, "body": "@hyde Yes definitely, automatic objects have declared type and effective type cannot be changed. Because of citation 4., <code>int</code> is not compatible with <code>char</code>."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1468407986, "post_id": 38348218, "comment_id": 64112267, "body": "@AndrewHenle But we didn&#39;t copy from any object: <i>then the effective type of the modified object for that access and for subsequent accesses that do not modify the value is the effective type of the object from which the value is copied, if it has one.</i>"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1468407992, "post_id": 38348218, "comment_id": 64112275, "body": "@AndrewHenle I think that &quot;copied as an array of character type&quot; is meant to imply that a value is copied <i>in whole</i> from another object, which isn&#39;t the case here (the int value is stored via the character pointer, but the representation is not copied). Unfortunately it is not clearly defined any further in the standard (one of many failings)."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1468409170, "post_id": 38348218, "comment_id": 64113120, "body": "@2501 But would the <code>for</code> loop be a copy of a <i>series</i> of individual <code>char</code> objects?  Thus leading to paragraph 7&#39;s &quot;a character type&quot;?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468416679, "post_id": 38348218, "comment_id": 64118596, "body": "The write of chars sets the object to effective type <code>char</code> only for the duration of the write, not permanently, unlike the float example."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 13, "last_activity_date": 1468748725, "last_edit_date": 1468748725, "creation_date": 1468403489, "answer_id": 38348218, "question_id": 38347994, "link": "https://stackoverflow.com/questions/38347994/does-this-code-violate-the-strict-aliasing-rule/38348218#38348218", "title": "Does this code violate the strict aliasing rule?", "body": "<p>No it doesn't, but this is only because the memory was allocated, and written into using a character type.</p>\n\n<p>Memory is allocated using malloc. That object doesn't have declared<sup>1</sup> type because it was allocated with malloc. Thus the object doesn't have any effective type.</p>\n\n<p>Then the code accesses and modifies the object using the type <code>char</code>. As the type is<sup>2</sup> <code>char</code> and no object having an effective type is copied<sup>5</sup>, copying doesn't set the effective type to <code>char</code> for this and subsequent accesses, but sets the effective type to <code>char</code>, only for the duration of the access<sup>3</sup>. After the access, the object doesn't have an effective type anymore.</p>\n\n<p>Then the type <code>int</code> is used to access and only read that object. As the object doesn't have an effective type, it becomes<sup>3</sup> <code>int</code>, for the duration of the read. After the access the object doesn't have an effective type anymore. As <code>int</code> was obviously compatible with the effective type <code>int</code>, the behavior is defined.</p>\n\n<p>(Assuming the values read are not trap representation for <code>int</code>.)</p>\n\n<hr>\n\n<p>Had you accessed and modified the object using a non-character type that is also not compatible with <code>int</code>, the behavior would be undefined.</p>\n\n<p>Let's say your example was (assuming <code>sizeof(float)==sizeof(int)</code>):</p>\n\n<pre><code>int i;\nvoid *buf = calloc(5, sizeof(float)); // buf initialized to 0\n\n{\n    float *ptr1 = buf;    \n    for(i = 0; i &lt; 5*sizeof(float); ++i)\n        ptr1[i] = (float)i;\n}\n\nint *ptr2 = buf;\nfor(i = 0; i &lt; 5; ++i)\n    printf(\"%d\", ptr2[i]);\n</code></pre>\n\n<p>The effective type of the object, when <code>float</code>s are being written into, becomes of type <code>float</code>, for the duration of the write and all subsequent accesses to the object that don't modify it<sup>2</sup>. When those objects are then accessed by <code>int</code> the effective type remains <code>float</code>, as the values are only being read not modified. The previous write using <code>float</code> set the effective type to <code>float</code> permanently until the next write into this object (which didn't happen in this case).  Types <code>int</code> and <code>float</code> are not compatible<sup>4</sup>, thus the behavior is undefined.</p>\n\n<hr>\n\n<p>(All text below is quoted from: ISO:IEC 9899:201x)</p>\n\n<p><sup>1</sup> (6.5 Expressions 6)<br>\nThe effective type of an object for an access to its stored value is the declared type of the object, if any. 87) Allocated objects have no declared type.</p>\n\n<p><sup>2</sup> (6.5 Expressions 6)<br>\nIf a value is stored into an object having no declared type through an lvalue having a type <em>that is not a character type</em>, then the type of the lvalue becomes the effective type of the object for that access and for subsequent accesses that do not modify the stored value.</p>\n\n<p><sup>3</sup> (6.5 Expressions 6)<br>\nFor all other accesses to an object having no declared type, the effective type of the object is simply the type of the lvalue used for the access.</p>\n\n<p><sup>4</sup> (6.5 Expressions 8)<br>\nAn object shall have its stored value accessed only by an lvalue expression that has one of\nthe following types: 88)\n\u2014 a type compatible with the effective type of the object,\n\u2014 a qualified version of a type compatible with the effective type of the object,\n\u2014 a type that is the signed or unsigned type corresponding to the effective type of the\nobject,\n\u2014 a type that is the signed or unsigned type corresponding to a qualified version of the\neffective type of the object,\n\u2014 an aggregate or union type that includes one of the aforementioned types among its\nmembers (including, recursively, a member of a subaggregate or contained union), or\n\u2014 a character type.</p>\n\n<p><sup>5</sup> (6.5 Expressions 6)<br>\nIf a value is copied into an object having no declared type using memcpy or memmove, or is copied as an array of character type, then the effective type of the modified object for that access and for subsequent accesses that do not modify the value <em>is the effective type of the object from which the value is copied, if it has one.</em></p>\n"}, {"comments": [{"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 6, "creation_date": 1468404140, "post_id": 38348356, "comment_id": 64109817, "body": "Strict aliasing is something else than alignment requirements and representation."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 1, "creation_date": 1468404473, "post_id": 38348356, "comment_id": 64110054, "body": "@JohannesSchaub-litb What the question is referring to is the same thing <code>memset()</code> does (<i>The <code>memset</code> function  copies  the  value  of <code>c</code> (converted  to  an <code>unsigned char</code> ) into each of the first <code>n</code> characters of the object pointed to by <code>s</code> .</i>)  If you think it&#39;s wrong, post your answer that also accounts for how <code>memset()</code> can set any type of memory to a repeated <code>char</code> value.  Are you saying <code>memset()</code> violates strict aliasing?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 3, "creation_date": 1468405682, "post_id": 38348356, "comment_id": 64110853, "body": "@AndrewHenle nobody&#39;s saying that the code in the question violates strict aliasing rules. However, the rationale for why this is the case given in your answer is not correct. Having the same alignment and representation does <i>not</i> imply that two types may alias."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1468406776, "post_id": 38348356, "comment_id": 64111501, "body": "@davmac But the fundamental reason for strict aliasing - to meet the requirement for &quot;a type compatible with the effective type of the object&quot; - is because of such alignment and representation.  <b>How</b> are objects &quot;compatible&quot;?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1468407399, "post_id": 38348356, "comment_id": 64111917, "body": "@AndrewHenle the fundamental reason for strict aliasing is to limit the lvalue types allowed to access an object (mainly to allow certain compiler optimisations, though the standard doesn&#39;t state this of course). &quot;compatible types&quot; are defined in 6.2.7 which doesn&#39;t claim that any two types with the same alignment and representation are compatible. It&#39;s not about whether the pointer is able to point to the object or not; strict aliasing is about whether such a pointer, assuming that it can be constructed, is allowed to be dereferenced."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1468407454, "post_id": 38348356, "comment_id": 64111956, "body": "@AndrewHenle If not fundamental, then at least an important reason for strict aliasing rule is to allow optimizations. Without strict aliasing rule, compiler would have to assume, that almost any assignment to any variable could alter even a non-volatile value a pointer points to (and would have to re-fetch it from memory), and vice versa almost any assignment through a pointer could alter value of any variable. Strict aliasing rule allows compiler to assume that values don&#39;t change like this, in the cases it applies."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1468407700, "post_id": 38348356, "comment_id": 64112101, "body": "(i.e. the &quot;strict aliasing rules&quot; are embodied mostly by 6.5 paragraph 7)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468452950, "post_id": 38348356, "comment_id": 64139011, "body": "...ever intended that the Standard be used as an excuse by compiler writers to go out of their way not to support useful features and guarantees that had historically been provided on platforms similar to the target, but the authors of gcc seem to believe that any code using behaviors not mandated by the Standard is &quot;broken&quot; even if the behaviors in question had been treated consistently for decades on all platforms even remotely similar to the target."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1468507922, "post_id": 38348356, "comment_id": 64164923, "body": "@hyde: That is indeed the purpose. though unless the authors of the standard were being disingenuous with the example given in the rationale I see no reason to believe they intended programmers to jump through hoops to make use of type punning where it was useful <i>and a non-obtuse compiler would recognize that it was likely</i>.  Given <code>foo(int *p, int *r, int *s) { float *fp; *r=1; fp = (float*)p; *fp= 0.0f; *s=2; *fp=0.0f; return *r+*s; }</code> I think they would have expected that a compiler might miss the that the second write to <code>*fp</code> might hit an <code>int</code>, but regard the <code>int*</code> to <code>float*</code> cast..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468508162, "post_id": 38348356, "comment_id": 64165123, "body": "...as indicating that any <code>int</code> values whose address might be exposed should be flushed from registers when the typecast occurs.  A compiler might not be sophisticated enough to recognize the fact that a cast pointer might continue to exist after subsequent uses of <code>int</code> values, but since the primary use of such typecasts would be to perform &quot;immediate&quot; type punning, a presumption that a cast indicates that immediate aliasing is likely should not be considered excessively pessimistic.  Unfortunately, the Standard presumes that compiler writers have enough common sense that..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468508230, "post_id": 38348356, "comment_id": 64165186, "body": "...they won&#39;t need the authors of the Standard to state the obvious."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 2, "last_activity_date": 1468403760, "creation_date": 1468403760, "answer_id": 38348356, "question_id": 38347994, "link": "https://stackoverflow.com/questions/38347994/does-this-code-violate-the-strict-aliasing-rule/38348356#38348356", "title": "Does this code violate the strict aliasing rule?", "body": "<p>No.  This does not violate strict aliasing.</p>\n\n<p>From <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">the C Standard</a>, <strong>6.2.5 Types</strong>, paragraph 28:</p>\n\n<blockquote>\n  <p>A pointer  to <code>void</code> shall  have  the  same  representation  and \n  alignment  requirements  as  a pointer  to  a  character  type. 48</p>\n</blockquote>\n\n<p>Note the 48.  That refers to footnote 48:</p>\n\n<blockquote>\n  <p>48)   The  same  representation  and  alignment  requirements  are \n  meant  to  imply  interchangeability  as arguments to functions,\n  return values from functions, and members of unions.</p>\n</blockquote>\n\n<p>So you can access the <code>calloc()</code>'d memory via a <code>char *</code> pointer (assuming your <code>ptr</code> is meant to be <code>ptr1</code>) with no problems.</p>\n\n<p>Although that's really extra, since <strong>7.22.3 Memory management functions</strong>, paragraph 1 states:</p>\n\n<blockquote>\n  <p>The pointer returned if the allocation succeeds is suitably aligned so\n  that it may be assigned to a pointer to any type of object with a\n  fundamental alignment requirement and then used to access such an\n  object or an array of such objects in the space allocated</p>\n</blockquote>\n\n<p>So you can safely access the <code>calloc()</code>'d memory via an <code>int</code> pointer too, as well as a <code>char</code> pointer.  And a <code>double</code> pointer to boot (assuming you stay within the bounds of the allocated memory).</p>\n"}], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1328, "favorite_count": 2, "accepted_answer_id": 38348218, "answer_count": 2, "score": 15, "last_activity_date": 1468748725, "creation_date": 1468402872, "last_edit_date": 1468406523, "question_id": 38347994, "link": "https://stackoverflow.com/questions/38347994/does-this-code-violate-the-strict-aliasing-rule", "title": "Does this code violate the strict aliasing rule?", "body": "<p>Questions:</p>\n\n<ol>\n<li><p>Does this code below violate strict aliasing rules? That is, would a smart compiler be allowed to print <code>00000</code> (or some other nasty effect), because a buffer first accessed as other type is then accessed via <code>int*</code>?</p></li>\n<li><p>If not, would moving just the definition and initializaton of <code>ptr2</code> before the braces (so <code>ptr2</code> would be defined already, when <code>ptr1</code> comes to scope) break it? </p></li>\n<li><p>If not, would removing the braces (so <code>ptr1</code> and <code>ptr2</code> were in the same scope) break it?</p></li>\n<li><p>If yes, how could the code be fixed?</p></li>\n</ol>\n\n<p>Bonus question: If the code is ok, and 2. or 3. don't break it either, how to change it so it would break strict aliasing rules (example, convert braced loop to use <code>int16_t</code>)?</p>\n\n<hr>\n\n<pre><code>int i;\nvoid *buf = calloc(5, sizeof(int)); // buf initialized to 0\n\n{\n    char *ptr1 = buf;    \n    for(i = 0; i &lt; 5*sizeof(int); ++i)\n        ptr1[i] = i;\n}\n\nint *ptr2 = buf;\nfor(i = 0; i &lt; 5; ++i)\n    printf(\"%d\", ptr2[i]);\n</code></pre>\n\n<hr>\n\n<p>Looking for confirmation, so short(ish), expert answer about this particular code, ideally with minimal standard quotes, is what I am after. I am not after long explanations of strict aliasing rules, only the parts that pertain to this code. And it would be great if an answer would explicitly enumerate the numbered questions above.</p>\n\n<p>Also assume a general-purpose CPU with no integer trap values, and let's also say <code>int</code> is 32 bits and two's complement.</p>\n"}, {"tags": ["c", "string", "dynamic"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468415615, "post_id": 38347742, "comment_id": 64117788, "body": "<code>This code is not working according to my need.</code> Did you consider explaining <i>why not</i>?"}, {"owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1468416864, "post_id": 38347742, "comment_id": 64118745, "body": "while reading first part of the input string, its entering in the if(!isspace( *string) ) and copying the characters to my new str array, then reading the blank space and entering in another if (*string == &#39;  &#39;) , putting nul character in string, incrementing Row, and making Col to 0 , but after that its not entering in the if(!isspace()) block, Sir, I have already placed the printf(), you can check if you want to.. thanks @underscore_d"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468418414, "post_id": 38347742, "comment_id": 64119983, "body": "you want <code>char (*str)[20];</code> instead of <code>char *str[20];</code>"}, {"owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468419932, "post_id": 38347742, "comment_id": 64121191, "body": "Its not printing, I have one function which is working for others 2D char array but for this its just running blank. Please help. @BLUEPIXY"}, {"owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468419992, "post_id": 38347742, "comment_id": 64121228, "body": "and what&#39;s the difference between <code>char (*str)[20];</code> and <code>char *str[20];</code> ??? @BLUEPIXY"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468420219, "post_id": 38347742, "comment_id": 64121403, "body": "<code>char (*str)[20];</code> : <code>str</code> is pointer to <code>char[20]</code>, <code>char *str[20];</code> : <code>str</code> is array of pointer. <code>str</code> has 20 element (pointer to char)."}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1468420310, "post_id": 38347742, "comment_id": 64121463, "body": "The first is a pointer to a 20 byte char array, the second is a array of 20 char pointers. But your whole script is buggy. If you allocate Row char pointer, you have only the pointers. You have to allocate also the memory for every one of this pointers."}, {"owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "reply_to_user": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 0, "creation_date": 1468421114, "post_id": 38347742, "comment_id": 64122118, "body": "I am using `malloc()&#39; , I believe, if its not allocating memory than what&#39;s it doing ? @Holger"}, {"owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468421170, "post_id": 38347742, "comment_id": 64122159, "body": "But why its running blank ?? @BLUEPIXY"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468422871, "post_id": 38347742, "comment_id": 64123441, "body": "@DeveshPratap You are not output anything."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "edited": false, "score": 0, "creation_date": 1468423438, "post_id": 38355372, "comment_id": 64123881, "body": "I got my error but one more question, why you are using temp, instead of str ?  any specific reasons for that ? thanks for help."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "edited": false, "score": 0, "creation_date": 1468423786, "post_id": 38355372, "comment_id": 64124111, "body": "<code>realloc</code> might not be able to secure a new area."}, {"owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "edited": false, "score": 0, "creation_date": 1468423810, "post_id": 38355372, "comment_id": 64124128, "body": "Got it I read it when your made it identical , its now pointer for realloc. THANKS.. cheers!!!"}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 0, "last_activity_date": 1468422947, "last_edit_date": 1468422947, "creation_date": 1468422219, "answer_id": 38355372, "question_id": 38347742, "link": "https://stackoverflow.com/questions/38347742/i-am-trying-to-create-nxm-character-array-in-which-n-would-be-dynamic-and-m/38355372#38355372", "title": "I am trying to create NxM character array in which &#39;N&#39; would be dynamic and &#39;M&#39; would be static", "body": "<p>you need <code>realloc</code> and char <code>(*str)[20]</code> instead of char <code>*str[20]</code><br>\nexample code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\n#define LINELEN   96\n#define COLMAXLEN 20\n\nvoid TransformString(char input[][LINELEN], size_t counter ) {\n    size_t Row = 0;\n    char (*str)[COLMAXLEN] = NULL;\n\n    for(size_t i = 0 ; i &lt; counter ; i++ ){\n        char *string = input[i];\n\n        while( *string != '\\0' ){\n            while(isspace(*string))\n                ++string;//skip spaces\n            if(!*string) break;\n\n            void *temp;//char (*temp)[COLMAXLEN];\n            if((temp = realloc(str, (Row+1) * sizeof(*str))) == NULL){//expand\n                fprintf(stderr, \"malloc error at %s\\n\", __func__);\n                free(str);\n                return ;\n            }\n            str = temp;//update if realloc is success\n\n            size_t Col = 0;\n            while(*string &amp;&amp; !isspace(*string) &amp;&amp; Col &lt; COLMAXLEN -1){\n                str[Row][Col++] = tolower(*string++);\n            }\n            str[Row++][Col] = '\\0';\n        }\n    }\n    for(size_t r = 0; r &lt; Row; ++r)\n        puts(str[r]);\n    free(str);\n}\n\nint main(void){\n    char input[100][LINELEN] = {\n        \"XDG LMN OPI\",\n        \"STOP\"\n    };\n    size_t count_line = 1;\n\n    TransformString(input, count_line );\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5786198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c59b827038eb5b068c832f2c2a906478?s=128&d=identicon&r=PG&f=1", "display_name": "Devesh Pratap ", "link": "https://stackoverflow.com/users/5786198/devesh-pratap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 38355372, "answer_count": 1, "score": -1, "last_activity_date": 1468422947, "creation_date": 1468402196, "last_edit_date": 1468405755, "question_id": 38347742, "link": "https://stackoverflow.com/questions/38347742/i-am-trying-to-create-nxm-character-array-in-which-n-would-be-dynamic-and-m", "title": "I am trying to create NxM character array in which &#39;N&#39; would be dynamic and &#39;M&#39; would be static", "body": "<p>I have this problem of anagrams, but my problem is kinda different. The problem is I am asking for input from user in a string form, its a 2D char array and breaking them in to word by word, for example :</p>\n\n<p>INPUT : </p>\n\n<pre><code>XDG LMN OPI\nSTOP                           //STOP to stop taking the input\n</code></pre>\n\n<p>and I want my output in this form :</p>\n\n<p>OUTPUT :</p>\n\n<pre><code>xdg\nlmn\nopi                        //converting into lowercase\n</code></pre>\n\n<p>Now, I can do this by looking up for space and when there is space put <code>'\\0'</code> and increase N and make M equals to 0 in static char array.</p>\n\n<p>Another solution is I'll create dynamic char array and do all the maths.</p>\n\n<p>But, here in my problem I am not sure about the number of rows but I am pretty sure about the length of columns, max 20. So, I wondered that if I can only create dynamic rows which grows till I'll not find NULL in my 2D array.</p>\n\n<p>Here is my Function :</p>\n\n<pre><code>void TransformString( char input[][LINELEN], size_t counter ) {\nsize_t Row = 0;\nsize_t Col = 0;\n char *str[20];\n  str =   malloc(Row * sizeof(char));\n    for(int i = 0 ; i &lt; counter ; i++ ){\n      char *string = input[i];\n\n        while( *string != '\\0' ){   \n          if( !(isspace(*string)) ){\n            *string = tolower(*string);\n            str[Row][Col++] = *string;printf(\"RR : %d C : %d\\n\",Row,Col);\n\n        } if(*string == ' ') { printf(\"C : %d\\n\",Col);\n              str[Row][Col] = '\\0' ;\n              Row++;\n              str = malloc(Row * sizeof(char)) ; printf(\"Row: %d\\n\",Row);\n              Col = 0;\n        }\n       string++;\n      } \n      str[Row][Col] = '\\0' ;\n      Row++;\n          *str = malloc (Row * sizeof(char) );\n          Col = 0;\n        }\n       } // end of function \n</code></pre>\n\n<p>As for dynamic we take <code>char ** str;</code> so for this I have taken <code>char *str[20];\n</code>\nThis code is not working according to my need. Please look in to this and give me the logic where I am wrong.  </p>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1468402066, "post_id": 38347645, "comment_id": 64108395, "body": "Nice moustache by the way."}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1468402144, "post_id": 38347645, "comment_id": 64108454, "body": "I am getting error becuase I have nice moustache? :)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1468402361, "post_id": 38347645, "comment_id": 64108613, "body": "&quot;Is it possible&quot; -- just think for a minute: Do you really believe that the answer is no, this is completely impossible?"}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1468402493, "post_id": 38347645, "comment_id": 64108706, "body": "yes, possible may be bit harsh to say. I changed."}], "answers": [{"comments": [{"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1468402708, "post_id": 38347731, "comment_id": 64108860, "body": "Why is it needed to have dereferencing at <code>n1.next</code>. As I understand first If I have <code>n1.next</code> I point to the address of next node then if I write <code>(n1.next).next</code> now I am pointing to next next node <code>n3</code>. Now I can use dereference Operator to Access the value."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 1, "creation_date": 1468403044, "post_id": 38347731, "comment_id": 64109088, "body": "@GulluButt No... you use a dereference operator to access the thing a pointer points to. <code>n1.next</code> is a pointer that points to n2, so <code>*n1.next</code> is n2."}, {"owner": {"reputation": 1699, "user_id": 4891815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niZw9.jpg?s=128&g=1", "display_name": "Gnqz", "link": "https://stackoverflow.com/users/4891815/gnqz"}, "edited": false, "score": 0, "creation_date": 1468403223, "post_id": 38347731, "comment_id": 64109217, "body": "damn, you write faster :D"}, {"owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "edited": false, "score": 0, "creation_date": 1468403894, "post_id": 38347731, "comment_id": 64109658, "body": "I got it now. pointer is just if you point your finger to some city let&#39;s say and <code>*pointer</code> is if you go into the City ?"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 6, "last_activity_date": 1468402165, "creation_date": 1468402165, "answer_id": 38347731, "question_id": 38347645, "link": "https://stackoverflow.com/questions/38347645/how-to-access-next-to-next-element-in-linked-list-in-c/38347731#38347731", "title": "How to access next to next element in linked list in C?", "body": "<p>Because you're missing a <code>*</code>. It should be:</p>\n\n<pre><code>(*(*n1.next).next).value\n    ^^                   first node\n  ^^^^^^^^^^             second node\n^^^^^^^^^^^^^^^^^^       third node\n^^^^^^^^^^^^^^^^^^^^^^^^ third node's value\n</code></pre>\n\n<p>Or <code>n1.next-&gt;next-&gt;value</code> for short.</p>\n"}], "owner": {"reputation": 799, "user_id": 3190389, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/3yFmN.png?s=128&g=1", "display_name": "Wafeeq", "link": "https://stackoverflow.com/users/3190389/wafeeq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1497, "favorite_count": 1, "accepted_answer_id": 38347731, "answer_count": 1, "score": 1, "last_activity_date": 1468402641, "creation_date": 1468401942, "last_edit_date": 1468402641, "question_id": 38347645, "link": "https://stackoverflow.com/questions/38347645/how-to-access-next-to-next-element-in-linked-list-in-c", "title": "How to access next to next element in linked list in C?", "body": "<p>I am learning C and got confusion. For example:</p>\n\n<pre><code>typedef struct entry\n{\n    int value;\n    struct entry *next;\n}entry;\n\nentry n1, n2, n3;\nint i;\n\nn1.value = 100;\nn2.value = 200;\nn3.value = 300;\n\nn1.next = &amp;n2;\nn2.next = &amp;n3;\n</code></pre>\n\n<p>the value of <code>n2</code> node can be accessible by <code>(*n1.next).value</code> or by <code>n1.next-&gt;value</code>. It works. But let's say I want to directly access the <code>n3</code> value by:</p>\n\n<pre><code>(n1.next).next -&gt; value\n\n(*(n1.next).next).value\n</code></pre>\n\n<p>The Compiler comlains </p>\n\n<pre><code>error: request for member `next' in something not a structure or union\n</code></pre>\n\n<p>Why so?</p>\n"}, {"tags": ["c", "crc32", "iar"], "comments": [{"owner": {"reputation": 337, "user_id": 1688663, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9a2fc37bff5b87bf3cc7fa7c3eafa363?s=128&d=identicon&r=PG", "display_name": "Fulgor3", "link": "https://stackoverflow.com/users/1688663/fulgor3"}, "edited": false, "score": 0, "creation_date": 1468402550, "post_id": 38346985, "comment_id": 64108758, "body": "I have also tried to implement the C code given by IAR in the following link <a href=\"https://www.iar.com/support/tech-notes/general/c-source-for-crc32/\" rel=\"nofollow noreferrer\">iar.com/support/tech-notes/general/c-source-for-crc32</a> But it doesn&#39;t work also."}, {"owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "edited": false, "score": 0, "creation_date": 1468425957, "post_id": 38346985, "comment_id": 64125630, "body": "Their <a href=\"https://www.iar.com/support/tech-notes/general/debugging-checksum-calculations/\" rel=\"nofollow noreferrer\">little CRC debugging tutorial</a> is actually very good. You should look at that."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468428289, "post_id": 38346985, "comment_id": 64127026, "body": "The most likely source of the problem (there are other possibilities) is the different codes are using different &#39;polynomials&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 78348, "user_id": 1180620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FXaAg.jpg?s=128&g=1", "display_name": "Mark Adler", "link": "https://stackoverflow.com/users/1180620/mark-adler"}, "is_accepted": false, "score": 0, "last_activity_date": 1468463099, "last_edit_date": 1468463099, "creation_date": 1468426914, "answer_id": 38356994, "question_id": 38346985, "link": "https://stackoverflow.com/questions/38346985/iar-linker-crc32-calculation-doesnt-match-with-the-one-calculated-in-c-and-in/38356994#38356994", "title": "IAR linker CRC32 calculation doesn&#39;t match with the one calculated in C (and in other webs)", "body": "<p>Why do you think that <a href=\"https://www.iar.com/support/tech-notes/general/c-source-for-crc32/\" rel=\"nofollow\">their code</a> is not working? What is your test case?</p>\n\n<p>It is a CRC-32 that uses the polynomial <code>0x04c11db7</code> in a forward direction, with the initial CRC equal to <code>0xc704dd7b</code> and no final exclusive-or'ing. So <code>fast_crc32(0xc704dd7b, data, length)</code> will return the CRC  of <code>data[0..length-1]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 1688663, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9a2fc37bff5b87bf3cc7fa7c3eafa363?s=128&d=identicon&r=PG", "display_name": "Fulgor3", "link": "https://stackoverflow.com/users/1688663/fulgor3"}, "is_accepted": false, "score": 1, "last_activity_date": 1468485444, "last_edit_date": 1592644375, "creation_date": 1468485444, "answer_id": 38369344, "question_id": 38346985, "link": "https://stackoverflow.com/questions/38346985/iar-linker-crc32-calculation-doesnt-match-with-the-one-calculated-in-c-and-in/38369344#38369344", "title": "IAR linker CRC32 calculation doesn&#39;t match with the one calculated in C (and in other webs)", "body": "<p>Finally I solved this. I used this CRC32 code adapted to my purpose:\n<a href=\"https://www.iar.com/support/tech-notes/general/c-source-for-crc32/\" rel=\"nofollow noreferrer\">https://www.iar.com/support/tech-notes/general/c-source-for-crc32/</a></p>\n<p>In all my other attempts I used the right Polynomial and tried all the configurations used with other boards in the IAR linker checksum configuration but those didn't work. So the configuration I used was with a init value of 0xFFFFFFFF and the following IAR linker configuration:</p>\n<p><a href=\"https://i.stack.imgur.com/6OJvH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6OJvH.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope this helps. It was very rare because of the problems I had implementing the other, I think valid, CRC32 implementations.</p>\n<p>Best regards,</p>\n<p>Iv\u00e1n</p>\n"}], "owner": {"reputation": 337, "user_id": 1688663, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/9a2fc37bff5b87bf3cc7fa7c3eafa363?s=128&d=identicon&r=PG", "display_name": "Fulgor3", "link": "https://stackoverflow.com/users/1688663/fulgor3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1468485444, "creation_date": 1468400140, "question_id": 38346985, "link": "https://stackoverflow.com/questions/38346985/iar-linker-crc32-calculation-doesnt-match-with-the-one-calculated-in-c-and-in", "title": "IAR linker CRC32 calculation doesn&#39;t match with the one calculated in C (and in other webs)", "body": "<p>The point is that I need to calculate a 32 bit CRC using the IAR in order to auto store this value into a known memory address but the result given by IAR and the one I calculate using a C function (checked using some online calculators) don't match. \nIn the next paragraphs I will try to go step by step following all the process I followed.</p>\n\n<p>I configured the IAR linker as it is recommended ( I think so at least ) in the following link:\n<a href=\"https://www.iar.com/support/tech-notes/general/checksum-calculation-with-ielftool-after-linking-with-ilink/\" rel=\"nofollow noreferrer\">IAR documentation CRC links</a>\nThe fact is that I have configured it as in the Calculate CRC32 as in STM32 hardware (v.5.50 and later) example (the first part of this, because I have IAR 6.5).\nAs I see there I tried to clone the configuration shown in the screenshot:\n<a href=\"https://www.iar.com/contentassets/d8bbf6cb53c44ac39f10798d3c086d67/64424-projectoptionslinkerchecksum_6_40.png\" rel=\"nofollow noreferrer\">CONFIGURATION PICTURE</a></p>\n\n<p>And this is the configuration I use in my C CRC file:</p>\n\n<pre><code>/* PARAMETERS EXPLANATION\n   * 'order' [1..32] is the CRC polynom order, counted without the leading\n   * '1' bit.\n   * 'polynom' is the CRC polynom without leading '1' bit.\n   * 'direct' [0,1] specifies the kind of algorithm: 1=direct, no augmented\n   * zero bits.\n   * 'crcinit' is the initial CRC value belonging to that algorithm.\n   * 'crcxor' is the final XOR value.\n   * 'refin' [0,1] specifies if a data byte is reflected before processing\n   * (UART) or not.\n   * 'refout' [0,1] specifies if the CRC will be reflected before XOR.\n   */\n\n  /* Init parameters for CRC 32 algorithm */\n  crcParams.order    = 32;\n  crcParams.polynom  = 0x4C11DB7;\n  crcParams.direct   = true;\n  crcParams.crcinit  = 0xffffffff;\n  crcParams.crcxor   = 0xffffffff;\n  crcParams.refin    = false;\n  crcParams.refout   = false;\n</code></pre>\n\n<p>I had a doubt about if the crcxor should be 0xFFFFFFFF or 0x00000000, but I tried with both without getting the expected result.</p>\n\n<p>In order to check that the C function was working I have used the following websites:</p>\n\n<p><a href=\"http://www.sunshine2k.de/coding/javascript/crc/crc_js.html\" rel=\"nofollow noreferrer\">FIRST CRC32 CALCULATOR</a></p>\n\n<p><a href=\"http://www.zorc.breitbandkatze.de/crc.html\" rel=\"nofollow noreferrer\">SECOND CRC32 CALCULATOR</a></p>\n\n<p>The C code I use to calculate the CRC is based in the one explained here:\n<a href=\"http://www.zorc.breitbandkatze.de/crctester.c\" rel=\"nofollow noreferrer\">CRC C code</a></p>\n\n<p>This is an example of the configuration used in one of the websites:\n<a href=\"https://i.stack.imgur.com/lVmwA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lVmwA.jpg\" alt=\"CRC CONFIGURATION BASED ON THE STM32 EXAMPLE\"></a></p>\n\n<p>Any help will be really appreciated.</p>\n\n<p>Thanks in advance.</p>\n\n<p>Best regrads.</p>\n\n<p>Iv\u00e1n</p>\n"}, {"tags": ["c", "gcc", "header", "include"], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1468399916, "creation_date": 1468399916, "answer_id": 38346914, "question_id": 38346866, "link": "https://stackoverflow.com/questions/38346866/how-to-tell-the-gcc-to-look-in-the-include-folder-for-the-header-files/38346914#38346914", "title": "How to tell the gcc to look in the include folder for the header files?", "body": "<p>You can use the <code>-I</code> option with <code>gcc</code> to tell the path where to look for the header files.</p>\n\n<p>From <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html#Directory-Options\" rel=\"nofollow\">online gcc manual</a></p>\n\n<blockquote>\n  <p><code>-Idir</code><br><br>\n  Add the directory <code>dir</code> to the head of the list of directories to be searched for header files. This can be used to override a system header file, substituting your own version, since these directories are searched before the system header file directories. [...]</p>\n</blockquote>\n\n<p>You can use this option multiple times,</p>\n\n<blockquote>\n  <p>[...] If you use more than one <code>-I</code> option, the directories are scanned in left-to-right order; the standard system directories come after.</p>\n</blockquote>\n"}], "owner": {"reputation": 132, "user_id": 6268910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02debee3d74e0bc619cdfcb0bbc92f9b?s=128&d=identicon&r=PG&f=1", "display_name": "DSDS", "link": "https://stackoverflow.com/users/6268910/dsds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "accepted_answer_id": 38346914, "answer_count": 1, "score": 1, "last_activity_date": 1468400074, "creation_date": 1468399805, "last_edit_date": 1468400074, "question_id": 38346866, "link": "https://stackoverflow.com/questions/38346866/how-to-tell-the-gcc-to-look-in-the-include-folder-for-the-header-files", "title": "How to tell the gcc to look in the include folder for the header files?", "body": "<p>I'm using c. And I have a <code>include</code> folder inside my project <code>myProject/include</code> and inside I have all the header files from the SDK I downloaded from the Internet. So my question is how can I tell the <code>gcc</code> to look for the header files inside the include folder?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "gdb", "android-kernel"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5912310, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/41e2a5a530b887b7b49e0a49983af64e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/5912310/donald-wu"}, "edited": false, "score": 0, "creation_date": 1468400245, "post_id": 38346717, "comment_id": 64107158, "body": "Thanks Kravchuk! I look into it not because something is wrong, but because I am debugging a CVE PoC program. It&#39;s not part of kernel. Can you give me some advice on how to get DWARF of /system/lib/ libraries?"}, {"owner": {"reputation": 99, "user_id": 5912310, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/41e2a5a530b887b7b49e0a49983af64e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/5912310/donald-wu"}, "edited": false, "score": 0, "creation_date": 1468402542, "post_id": 38346717, "comment_id": 64108747, "body": "I want to set a break point at inet_dgram_disconnect. But, I can&#39;t go straight into kernel, can I?"}, {"owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "reply_to_user": {"reputation": 99, "user_id": 5912310, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/41e2a5a530b887b7b49e0a49983af64e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/5912310/donald-wu"}, "edited": false, "score": 0, "creation_date": 1468404983, "post_id": 38346717, "comment_id": 64110401, "body": "@\u5434\u4e00\u660a No, you cannot just into the kernel space; you need to use kgdb instead."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "reply_to_user": {"reputation": 99, "user_id": 5912310, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/41e2a5a530b887b7b49e0a49983af64e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/5912310/donald-wu"}, "edited": false, "score": 0, "creation_date": 1468405784, "post_id": 38346717, "comment_id": 64110915, "body": "@\u5434\u4e00\u660a If you need to debug kernel -- the best option probably is to use JTAG debugger. With it you can add breakpoint in kernel code, and JTAG will stop CPU at that line for you, so you can investigate registers, variables, stack, etc."}, {"owner": {"reputation": 99, "user_id": 5912310, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/41e2a5a530b887b7b49e0a49983af64e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/5912310/donald-wu"}, "edited": false, "score": 1, "creation_date": 1468427790, "post_id": 38346717, "comment_id": 64126735, "body": "@OleksandrKravchuk Thank you! It works, though I struggled for quite a while because of the mismatch of gdbsever and gdb versions."}, {"owner": {"reputation": 99, "user_id": 5912310, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/41e2a5a530b887b7b49e0a49983af64e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/5912310/donald-wu"}, "reply_to_user": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 1, "creation_date": 1468428018, "post_id": 38346717, "comment_id": 64126868, "body": "@SamProtsenko  I found JTAG is usually used in real machines (If I&#39;m right). So I decide to put it aside. When I need to debug real machine, I will come back to it. Thanks, Sam."}], "tags": [], "owner": {"reputation": 5198, "user_id": 186580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51af0a007f1bdc7134c0f02d3a156abb?s=128&d=identicon&r=PG", "display_name": "Oleksandr Kravchuk", "link": "https://stackoverflow.com/users/186580/oleksandr-kravchuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1468399374, "creation_date": 1468399374, "answer_id": 38346717, "question_id": 38346571, "link": "https://stackoverflow.com/questions/38346571/how-do-i-debug-android-native-code-into-kernel/38346717#38346717", "title": "How do I debug Android native code into kernel?", "body": "<p>libc.so is not the Linux kernel. It is C standard library.</p>\n\n<p>It is extremely unlikely you'll need to look for a problem there. If your close() call doesn't work, it's almost certain something is wrong with you using it, not its implementation.</p>\n"}], "owner": {"reputation": 99, "user_id": 5912310, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/41e2a5a530b887b7b49e0a49983af64e?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Wu", "link": "https://stackoverflow.com/users/5912310/donald-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 38346717, "answer_count": 1, "score": 1, "last_activity_date": 1468399374, "creation_date": 1468398999, "question_id": 38346571, "link": "https://stackoverflow.com/questions/38346571/how-do-i-debug-android-native-code-into-kernel", "title": "How do I debug Android native code into kernel?", "body": "<p>I compiled goldfish kernel with:</p>\n\n<pre><code> [ ] Optimize for size,\n [*] Kernel hacking \n     [*] Compile the kernel with debug info \n     [*] KGDB: kernel debugging with remote gdb \u2014&gt;      \n     [*] Enable dynamic printk() call support \n</code></pre>\n\n<p>I started the AVD with the compiled kernel.</p>\n\n<p><code>emulator -kernel goldfish/arch/arm/boot/zImage -avd TestAVD</code></p>\n\n<p>I pushed a compiled c program onto AVD.</p>\n\n<p>And I downloaded the libs (I'm not sure if it's the proper way)</p>\n\n<pre><code>adb pull /system/lib ./debuginfo/lib\nadb pull /system/bin/linker ./debuginfo/lib\n</code></pre>\n\n<p>run gdbserver:</p>\n\n<pre><code>gdbserver 127.0.0.1:7777 ./a\n</code></pre>\n\n<p>forward port:</p>\n\n<pre><code>adb forward tcp:7777 tcp:7777\n</code></pre>\n\n<p>run gdb</p>\n\n<pre><code>gdb-multiarch ./a\n</code></pre>\n\n<p>specify the search directory:</p>\n\n<pre><code>set solib-search-path ./debuginfo/lib\n</code></pre>\n\n<p>connect to device</p>\n\n<pre><code>target remote :7777\n</code></pre>\n\n<p>I breaked at, for example, close.</p>\n\n<pre><code>0xaf0ae228 in close () from /home/wuyihao/android_sec/debuginfo/lib/libc.so\n1: x/i $pc\n=&gt; 0xaf0ae228 &lt;close+8&gt;:        svc     0x00000000\n(gdb) list\nNo symbol table is loaded.  Use the \"file\" command.\n</code></pre>\n\n<p>I couln'd get the source.\nSo I tried to recompile the kernel with variable CFLAG=\"-g\"</p>\n\n<p>Nothing different.</p>\n\n<p>Thank you!</p>\n\n<p>ps: I noticed the downloaded libs are all stripped.</p>\n"}, {"tags": ["c", "pcap"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1468399512, "post_id": 38346563, "comment_id": 64106616, "body": "Use <code>fopen (..., &quot;rb&quot;)</code> (b for binary)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1468399708, "post_id": 38346563, "comment_id": 64106772, "body": "Unrelated (1) <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast malloc result</a> (2) free what you malloc (3) you don&#39;t <i>need</i> to dynamically allocate all these headers, automatic variables would do just fine."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1468400820, "post_id": 38346563, "comment_id": 64107568, "body": "Indeed. The <code>b</code> in <code>&quot;rb&quot;</code> is likely to prevent CRLF translation to LF, which would eliminate the need for <code>fseek</code>. The <code>fseek</code> here seems like a dirty hack to achieve the same result as the <code>b</code>, except that it doesn&#39;t solve the whole problem and masks the part it doesn&#39;t solve. Did you happen to notice that your program was losing <code>\\n</code> characters?"}, {"owner": {"reputation": 7, "user_id": 4435956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHl4a.jpg?s=128&g=1", "display_name": "NX.Guo", "link": "https://stackoverflow.com/users/4435956/nx-guo"}, "edited": false, "score": 0, "creation_date": 1468405434, "post_id": 38346563, "comment_id": 64110697, "body": "thank you very much, the actual reason is &#39;rb&#39; , after I change &quot;r&quot; to &quot;rb&quot;, it works!"}], "answers": [{"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1468401745, "post_id": 38346868, "comment_id": 64108161, "body": "You do need <code>fseek</code> to skip portions of the file, which this code does."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1468402353, "post_id": 38346868, "comment_id": 64108605, "body": "The OP says <code>I am not sure whether some pointer is wrong.</code> So I guess he does not want to read 16 bytes and then skip 16 bytes."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1468402902, "post_id": 38346868, "comment_id": 64108991, "body": "He skips more than 16 bytes as the code shows, to read the packet header and skip the packet contents."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": -1, "last_activity_date": 1468399814, "creation_date": 1468399814, "answer_id": 38346868, "question_id": 38346563, "link": "https://stackoverflow.com/questions/38346563/a-simple-c-program-to-analyze-pcap-file-but-it-can-not-read-entire-pcap-file/38346868#38346868", "title": "A simple C program to analyze pcap file \uff0cbut it can not read entire pcap file", "body": "<p>You are using a <code>fseek</code> along with a <code>fread</code> in the same loop. Each time you call <code>fread</code> the file pointer increments by the value read. You do not need to call a <code>fseek</code> also to set the file pointer.</p>\n\n<p>Change the while loop like this</p>\n\n<pre><code>while(fread(ptk_header, 16, 1, fp) &gt; 0) //read pcap packet head\n{\n    i++;\n    //pcap_pkt_header 16 byte\n    pkt_offset += 16 + ptk_header-&gt;caplen;   \n    fprintf(testfile,\"%d-%ld-\",i,pkt_offset);\n    fprintf(testfile,\"%ld\",ptk_header-&gt;caplen);\n    fprintf(testfile,\"\\n\");\n\n    // further code below\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4435956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHl4a.jpg?s=128&g=1", "display_name": "NX.Guo", "link": "https://stackoverflow.com/users/4435956/nx-guo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 571, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1468399814, "creation_date": 1468398974, "question_id": 38346563, "link": "https://stackoverflow.com/questions/38346563/a-simple-c-program-to-analyze-pcap-file-but-it-can-not-read-entire-pcap-file", "title": "A simple C program to analyze pcap file \uff0cbut it can not read entire pcap file", "body": "<p>I post the main function, the struct header is normal. After I run this program, it often stops at some packet, different packet stops at different position,but the certain pcap always stops at certain position.  It prints \"read end of pcap file\", I am not sure whether some pointer is wrong.</p>\n\n<pre><code>    int main()\n{\n    struct pcap_file_header *file_header;\n    struct pcap_pkthdr *ptk_header;\n    IPHeader_t *ip_header;\n    TCPHeader_t *tcp_header;\n    FILE *fp, *output,*testfile;\n    int   i=0;\n    long pkt_offset;\n    long testtime;\n    int ip_len, http_len, ip_proto;\n    int src_port, dst_port, tcp_flags;\n    char buf[BUFSIZE], my_time[20],my_time1[20],my_time2[10];\n    char src_ip[STRSIZE], dst_ip[STRSIZE];\n    char  host[STRSIZE], uri[BUFSIZE];\n    file_header = (struct pcap_file_header *)malloc(sizeof(struct   pcap_file_header));\n    ptk_header  = (struct pcap_pkthdr *)malloc(sizeof(struct pcap_pkthdr));\n    ip_header = (IPHeader_t *)malloc(sizeof(IPHeader_t));\n    tcp_header = (TCPHeader_t *)malloc(sizeof(TCPHeader_t));\n    memset(buf, 0, sizeof(buf));\n\n    if((fp = fopen(\"f:\\\\1.pcap\",\"r\")) == NULL)\n    {\n        printf(\"error: can not open pcap file\\n\");\n        exit(0);\n    }\n    if((output = fopen(\"output.txt\",\"w+\")) == NULL)\n    {\n         printf(\"error: can not open output file\\n\");\n         exit(0);\n    }\n    if((testfile = fopen(\"test.txt\",\"w+\")) == NULL)\n    {\n        printf(\"error: can not open test file\\n\");\n        exit(0);\n    }\n\n    pkt_offset = 24; //pcap head \n    while(fseek(fp, pkt_offset, SEEK_SET) == 0) \n    {\n        i++;\n        //pcap_pkt_header 16 byte\n        if(fread(ptk_header, 16, 1, fp) == 0) //read pcap packet head\n        {   \n            fprintf(testfile,\"%d-%ld-\",i,pkt_offset);\n            fprintf(testfile,\"\\nread end of pcap file\\n\");\n            break;\n        }\n        pkt_offset += 16 + ptk_header-&gt;caplen;   \n        fprintf(testfile,\"%d-%ld-\",i,pkt_offset);\n        fprintf(testfile,\"%ld\",ptk_header-&gt;caplen);\n        fprintf(testfile,\"\\n\");\n\n        //extract timestamp\n        itoa(ptk_header-&gt;ts.tv_sec,my_time,10);\n        itoa(ptk_header-&gt;ts.tv_usec,my_time1,10);\n        strcat(my_time,\".\");\n        strncpy(my_time2,my_time1,4);\n        my_time2[4] = '\\0'; \n        strcat(my_time,my_time2);\n        printf(\"%d: %s\\n\", i, my_time);\n        fwrite(&amp;my_time[0],16,1,output);\n        fprintf(output,\"\\n\");\n    } // end while\n    fclose(fp);\n    fclose(output);\n    fclose(testfile);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "windows"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1468397942, "post_id": 38346166, "comment_id": 64105632, "body": "<code>pdw[0]</code> is the same as <code>*pdw</code>."}, {"owner": {"reputation": 323, "user_id": 2016712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749a2764e35dee5cd44e05c4feb371d2?s=128&d=identicon&r=PG", "display_name": "SnoozeTime", "link": "https://stackoverflow.com/users/2016712/snoozetime"}, "edited": false, "score": 0, "creation_date": 1468398011, "post_id": 38346166, "comment_id": 64105666, "body": "First element of a DWORD array. The byte array is casted in an array of DWORD.."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 2, "creation_date": 1468398092, "post_id": 38346166, "comment_id": 64105717, "body": "You have some terminology issues there, which possibly indicate you don&#39;t fully understand what is happening. Which I suppose is why you are asking in the first place :) For example, <code>arBytes</code> is array, and is never <code>NULL</code>, only a pointer can be <code>NULL</code>. You probably mean to say, <code>arBytes</code> is initialized, there."}, {"owner": {"reputation": 85, "user_id": 6583260, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b5f244d818c4cbed4a0fdcd0c1cdc2e0?s=128&d=identicon&r=PG&f=1", "display_name": "freedomwings", "link": "https://stackoverflow.com/users/6583260/freedomwings"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1468398926, "post_id": 38346166, "comment_id": 64106227, "body": "@hyde Yes,I mean that arBytes is initialized there."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468400754, "post_id": 38346166, "comment_id": 64107520, "body": "Note that your example is causing undefined behavior due to violation of strict aliasing."}], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 2, "last_activity_date": 1468398030, "creation_date": 1468398030, "answer_id": 38346235, "question_id": 38346166, "link": "https://stackoverflow.com/questions/38346166/what-do-this-meansit-s-about-dword-variable-in-c/38346235#38346235", "title": "What do this means?It &#39;s about DWORD variable in c++", "body": "<p>pdw[0] is reinterpreting the first 4 bytes of arBytes as a type DWORD.</p>\n\n<p>Since DWORD and BTYE are not compatible types, the behavior of your example isn't defined.</p>\n"}, {"tags": [], "owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "is_accepted": false, "score": 0, "last_activity_date": 1468399304, "creation_date": 1468399304, "answer_id": 38346691, "question_id": 38346166, "link": "https://stackoverflow.com/questions/38346166/what-do-this-meansit-s-about-dword-variable-in-c/38346691#38346691", "title": "What do this means?It &#39;s about DWORD variable in c++", "body": "<p>Lets say <code>sizeof(DWORD)=4</code> and <code>sizeof(BYTE)=1</code>.\nSo <code>4 BYTEs</code> = <code>1 DWORD</code></p>\n\n<p><code>&amp;arBytes[0]</code>. This means address of first BYTE in array <code>arBytes</code>.</p>\n\n<p><code>pdw=(DWORD*)&amp;arBytes[0];</code>. The typecasting <code>(DWORD*)</code> means now you can access the <code>BYTEs</code> of <code>arBytes</code> in chunks of 4 via <code>pdw</code>. That is, now you can access total of <code>4096/4=1024 DWORDs</code> via <code>pdw</code>. Which also means that, <code>pdw</code> is now an array of 1024 <code>DWORDs</code>.</p>\n\n<p><code>pdw[0]</code> means accessing the first i.e 0th element of <code>pwd</code>.</p>\n\n<p><code>if(pdw[0]==dwValue)</code> simply means that you are comparing <code>dwValue</code> with the value which is formed from combining first 4 elements of <code>arBytes</code>.</p>\n\n<p>Here <strong>combining</strong> means arranging the <code>BYTEs</code> such that it forms a <code>DWORD</code>.\nSince <code>1 DWORD</code> = <code>4 BYTEs</code> so lets say <code>1 DWORD</code> is forms as follows <code>[B0][B1][B2][B3]</code> where <code>[B0], [B1], [B2] and [B3]</code> are <code>BYTEs</code>.\nSimilarly <code>pdw[0]</code> is a <code>DWORD</code> which is a chunk of 4 <code>BYTES</code> such that the chunks's leftmost <code>BYTE</code> is <code>arBytes[0]</code> and rightmost <code>BYTE</code> is <code>arBytes[3]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": true, "score": 2, "last_activity_date": 1468400509, "last_edit_date": 1468400509, "creation_date": 1468399414, "answer_id": 38346736, "question_id": 38346166, "link": "https://stackoverflow.com/questions/38346166/what-do-this-meansit-s-about-dword-variable-in-c/38346736#38346736", "title": "What do this means?It &#39;s about DWORD variable in c++", "body": "<p>For :</p>\n\n<pre><code>type* identifier;\n</code></pre>\n\n<p>Dereferencing can be done in two ways:</p>\n\n<ul>\n<li>*identifier - pointer method</li>\n<li>identifier[0] - array method</li>\n</ul>\n\n<p>because array style operations are defined for pointers. So :</p>\n\n<blockquote>\n  <p><code>identifier[0]</code> is the same as <code>*(identifier+0)</code> which is indeed\n  <code>*identifier</code></p>\n</blockquote>\n\n<p>Coming to your question :</p>\n\n<p><code>pdw[0]</code> is nothing but <code>*pwd</code> which is a <code>DWORD value</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 6583260, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b5f244d818c4cbed4a0fdcd0c1cdc2e0?s=128&d=identicon&r=PG&f=1", "display_name": "freedomwings", "link": "https://stackoverflow.com/users/6583260/freedomwings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "accepted_answer_id": 38346736, "answer_count": 3, "score": -2, "last_activity_date": 1468400509, "creation_date": 1468397800, "last_edit_date": 1468398304, "question_id": 38346166, "link": "https://stackoverflow.com/questions/38346166/what-do-this-meansit-s-about-dword-variable-in-c", "title": "What do this means?It &#39;s about DWORD variable in c++", "body": "<p>The code:</p>\n\n<pre><code>BYTE arBytes[4096];\n\n//write to the arBytes,so the arBytes already not null,then read continue\n\nDWORD* pdw;\n\npdw=(DWORD*)&amp;arBytes[0];         \n\nif(pdw[0]==dwValue)             //here is what I what to ask\n//some operate\n}\n</code></pre>\n\n<p>My problem is: what does <code>pdw[0]</code> mean? It is a <code>DWORD*</code> variable, and <code>dwValue</code> is a <code>DWORD</code> value too. And it would be better if you indicate the meaning of the code. </p>\n"}, {"tags": ["c", "gcc", "compilation", "compiler-optimization", "default-value"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1468398552, "post_id": 38346069, "comment_id": 64105987, "body": "What do you expect to gain from turning off all the <code>-f...</code> options? Note that some of these options can&#39;t be \u201cturned off\u201d as they choose between two different choices, e.g. <code>-mlong-double-80</code> chooses between a 128 bit and 80 bit <code>long double</code>."}, {"owner": {"reputation": 1155, "user_id": 4689412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G3XRh.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/4689412/maximilian"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1468398810, "post_id": 38346069, "comment_id": 64106152, "body": "I would like to turn off all default compiler options that I am aware of. After that I want to set only the compiler options I actively set. This is necessary to really know what compiler options are activated to compile a certain code."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1468509585, "post_id": 38346069, "comment_id": 64166224, "body": "@FUZxxl: With all options disabled, gcc processes a dialect similar to that of popular 1990s, which includes many useful features and guarantees that were omitted from the Standard because there were or may have been platforms where their cost would exceed their benefits.  If, for example, code needs to scale a signed value by a positive integer, I think gcc will presently support <code>x&lt;&lt;=y;</code> rather than requiring e.g. <code>x=(int32)((uint32_t)x)&lt;&lt;y);</code>, but a programmer would have no way of knowing whether the next gcc release would require an extra <code>-fno-silly-signed-shift</code> to make it work."}], "answers": [{"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468510083, "post_id": 38346826, "comment_id": 64166618, "body": "Would there be any sane way to ensure that any &quot;optimization&quot; features added to new versions of gcc don&#39;t get turned on by default when the compiler is updated?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468572031, "post_id": 38346826, "comment_id": 64191915, "body": "@supercat Turning \u201coff\u201d feature flags is not guaranteed to make the compiler any more lenient. gcc is a compiler for standard C; if you want to compile traditional C, consider using a different compiler like pcc."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468593340, "post_id": 38346826, "comment_id": 64205916, "body": "&quot;Standard C&quot; is a myth. The One Program Rule makes abundantly clear that the authors of the Standard intended that implementations offer behaviors beyond those explicitly required, since it allows for the possibility (and the rationale acknowledges this) that an implementation could be fully compliant and yet totally useless.  Can you suggest any reason the authors of the Standard mentioned how the majority of existing implementations would treat something like <code>uint1=ushort1*ushort2;</code> in cases where the result was between INT_MAX+1u and UINT_MAX, if they didn&#39;t intend that implementations..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468593851, "post_id": 38346826, "comment_id": 64206269, "body": "...which had no compelling reason to do otherwise would continue to do so?  In the absence of the type-aliasing rules, the Common Initial Sequence rule, combined with rules about casting between union and member types, would imply that a pointer to a structure could be used to inspect the common initial sequence of another, and it is that ability which makes the Common Initial Sequence rule useful; I see no reason to believe the Standard was ever intended to eliminate that, but gcc provides no Standard-compliant way via which a function can accept a pointer to a structure..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468594236, "post_id": 38346826, "comment_id": 64206517, "body": "...and use it to examine members of the Common Initial Sequence of an arbitrary object, even though reading the Standard with the mindset mandated by the Single Program Rule would indicate that the Standard does define a way--gcc simply ignores it.  If the authors of gcc aren&#39;t willing to promise to do anything not mandated by the Standard, why should anyone trust the compiler for anything?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1468594352, "post_id": 38346826, "comment_id": 64206592, "body": "@supercat Send a bug report to the gcc team. Or use another compiler as I already suggested."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 2, "last_activity_date": 1468412780, "last_edit_date": 1468412780, "creation_date": 1468399668, "answer_id": 38346826, "question_id": 38346069, "link": "https://stackoverflow.com/questions/38346069/is-there-a-method-to-suppress-default-gcc-compiler-options/38346826#38346826", "title": "Is there a method to suppress default GCC compiler options?", "body": "<p>Use the following script to generate a list of all turned-off <code>-f</code> options:</p>\n\n<pre><code>gcc -Q --help=optimizers | sed -e '/^[^[]*$/d' -e 's/ *\\[.*$//' -e 's/^  -f/ -fno-/'\n</code></pre>\n\n<p>Save the result in a file named <code>options.txt</code> and pass it to gcc with the @-syntax:</p>\n\n<pre><code>gcc @options.txt ...\n</code></pre>\n\n<p>Note that this does not \u201cturn off\u201d other options such as <code>-m...</code> options. Most of them can't be \u201cturned off\u201d either because they aren't yes/no switches or because doing so would change the ABI. </p>\n"}], "owner": {"reputation": 1155, "user_id": 4689412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G3XRh.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/4689412/maximilian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 1, "accepted_answer_id": 38346826, "answer_count": 1, "score": 2, "last_activity_date": 1468412780, "creation_date": 1468397525, "question_id": 38346069, "link": "https://stackoverflow.com/questions/38346069/is-there-a-method-to-suppress-default-gcc-compiler-options", "title": "Is there a method to suppress default GCC compiler options?", "body": "<p>I want to compile a C-code with only the compiler options I specifically mention. Therefore I need to somehow disable all compiler options that are set automatically. How can I disable the default GCC options that are set during every compilation and are not visible. I am talking about the compiler options that are visible using the following command <code>gcc -Q -v example.c</code> leading to this output:</p>\n\n<pre><code>GNU C (Ubuntu 4.8.4-2ubuntu1~14.04.3) version 4.8.4 (x86_64-linux-gnu)\n    compiled by GNU C version 4.8.4, GMP version 5.1.3, MPFR version 3.1.2-p3, MPC version 1.0.1\nGGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072\noptions passed:  -v -imultiarch x86_64-linux-gnu example.c -mtune=generic\n -march=x86-64 -fstack-protector -Wformat -Wformat-security\noptions enabled:  -faggressive-loop-optimizations\n -fasynchronous-unwind-tables -fauto-inc-dec -fbranch-count-reg -fcommon\n -fdelete-null-pointer-checks -fdwarf2-cfi-asm -fearly-inlining\n -feliminate-unused-debug-types -ffunction-cse -fgcse-lm -fgnu-runtime\n -fgnu-unique -fident -finline-atomics -fira-hoist-pressure\n -fira-share-save-slots -fira-share-spill-slots -fivopts\n -fkeep-static-consts -fleading-underscore -fmath-errno\n -fmerge-debug-strings -fmove-loop-invariants -fpeephole\n -fprefetch-loop-arrays -freg-struct-return -fsched-critical-path-heuristic\n -fsched-dep-count-heuristic -fsched-group-heuristic -fsched-interblock\n -fsched-last-insn-heuristic -fsched-rank-heuristic -fsched-spec\n -fsched-spec-insn-heuristic -fsched-stalled-insns-dep -fshow-column\n -fsigned-zeros -fsplit-ivs-in-unroller -fstack-protector\n -fstrict-volatile-bitfields -fsync-libcalls -ftrapping-math\n -ftree-coalesce-vars -ftree-cselim -ftree-forwprop -ftree-loop-if-convert\n -ftree-loop-im -ftree-loop-ivcanon -ftree-loop-optimize\n -ftree-parallelize-loops= -ftree-phiprop -ftree-pta -ftree-reassoc\n -ftree-scev-cprop -ftree-slp-vectorize -ftree-vect-loop-version\n -funit-at-a-time -funwind-tables -fvar-tracking -fvar-tracking-assignments\n -fzero-initialized-in-bss -m128bit-long-double -m64 -m80387\n -maccumulate-outgoing-args -malign-stringops -mfancy-math-387\n -mfp-ret-in-387 -mfxsr -mglibc -mieee-fp -mlong-double-80 -mmmx -mno-sse4\n -mpush-args -mred-zone -msse -msse2 -mtls-direct-seg-refs\nCompiler executable checksum: a0a649d344b1ed798e33d30772d46437\n</code></pre>\n\n<p>Here the default compiler options can be seen as <code>options enabled</code>. How can I disable these options without using e.g. <code>-fno-...</code> for most of them. Is there an easy way to properly disable the default compiler options?</p>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1468398608, "post_id": 38345890, "comment_id": 64106029, "body": "Check value of argv[1] and maybe  you need to cast it to string"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1468400181, "post_id": 38345890, "comment_id": 64107117, "body": "<code>&quot;-w&quot;</code> is a constant. <code>argv[1]</code> is a variable. A pointer to a variable is not going to equal a pointer to a constant since they cannot possibly point to the same thing since something cannot be both a variable and a constant."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1468427204, "post_id": 38345890, "comment_id": 64126405, "body": "@David Schwartz Technically disagree with &quot;not going to equal&quot;.  Although not so applicable to <code>argv[]</code>, consider <code>char *s = &quot;-w&quot;; if (s == &quot;-w&quot;)...</code>.  In this case, the compare could be true as code could fold both <code>&quot;-w&quot;</code> to the same address - or it might not.  IAC, not a good programming practice."}], "answers": [{"tags": [], "owner": {"reputation": 120111, "user_id": 469935, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/14lYV.jpg?s=128&g=1", "display_name": "Armen Tsirunyan", "link": "https://stackoverflow.com/users/469935/armen-tsirunyan"}, "is_accepted": false, "score": 2, "last_activity_date": 1468397111, "creation_date": 1468397111, "answer_id": 38345925, "question_id": 38345890, "link": "https://stackoverflow.com/questions/38345890/string-comparison-with/38345925#38345925", "title": "String comparison with ==", "body": "<p>You can't compare C strings with ==. Use <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strcmp.htm\" rel=\"nofollow\"><code>strcmp</code></a>.</p>\n\n<pre><code>if(strcmp(argv[1],\"-w\") == 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2571, "user_id": 2149974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb21c41d027acd90bb86547189a7da7?s=128&d=identicon&r=PG", "display_name": "marcadian", "link": "https://stackoverflow.com/users/2149974/marcadian"}, "is_accepted": false, "score": 3, "last_activity_date": 1468397125, "creation_date": 1468397125, "answer_id": 38345929, "question_id": 38345890, "link": "https://stackoverflow.com/questions/38345890/string-comparison-with/38345929#38345929", "title": "String comparison with ==", "body": "<ol>\n<li>Compare string is done using <code>strcmp</code></li>\n<li>switch only works with ordinal type</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 0, "last_activity_date": 1468399782, "creation_date": 1468399782, "answer_id": 38346859, "question_id": 38345890, "link": "https://stackoverflow.com/questions/38345890/string-comparison-with/38346859#38346859", "title": "String comparison with ==", "body": "<p>You can't compare character arrays in C with == and C doesn't support <code>operator overloading</code>. You have to use <code>standard library function</code> <code>strcmp()</code> or make your own function.</p>\n\n<p>For Example,</p>\n\n<pre><code>if (!strcmp(argv[1],\"-w\"))\n</code></pre>\n\n<p>But you can compare two characters using <code>==</code> operator. You can try this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid infoCallback()\n{\n   printf(\"cheese\\n\");\n}\n\nvoid wgetCallback()\n{\n   printf(\"website\\n\");\n}\n\nint singleCharOpt(char *opt)\n{\n   if (*(opt+1) != '\\0') {\n       printf(\"Not a Valid Single Character Option\\n\");\n       return -1;\n   }\n   if(*opt == 'w') {\n       wgetCallback();\n    } else if(*opt == 'i') {\n        infoCallback();\n    } else {\n        printf(\"Unknown Option\\n\");\n    }\n    return 0;\n}\n\n\nint main(int argc, char *argv[])\n{\n   /* Do Something */\n   printf(\"Hello options\\n\");\n\n   if (argc &lt;= 1)\n       return 0;\n   int i;\n   for (i=1; i&lt;argc; i++ ) {\n       printf(\"Option: %s\\n\", argv[i]);\n       char *opt = argv[i];\n\n       int result = (*opt == '-') ? singleCharOpt(++opt) : -1;\n\n       if (result)\n           printf(\"Wrong Option\\n\");\n   }\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1468425907, "creation_date": 1468425907, "answer_id": 38356667, "question_id": 38345890, "link": "https://stackoverflow.com/questions/38345890/string-comparison-with/38356667#38356667", "title": "String comparison with ==", "body": "<p>Step back for a moment.  In C, what is a <em>string</em>?</p>\n\n<blockquote>\n  <p>A <em>string</em> is a contiguous sequence of characters terminated by and including the first null character.<br>\n  C11 \u00a77.1.1 1</p>\n</blockquote>\n\n<p>A <em>string</em> is not a pointer and not an address, but a sequence of characters such an an array or a <em>string literal</em>.</p>\n\n<p>To compare <em>strings</em>, code needs to compare the content of those arrays.  Use <code>strcmp()</code>.</p>\n\n<pre><code>// compares pointers - not a string compare\nif(argv[1] == \"-w\") {\n\n// compares content - a string compare\nif (strcmp(argv[1], \"-w\") == 0) {\n</code></pre>\n\n<p><code>argv[1] == \"-w\"</code> compares pointers, not the content they point to.</p>\n\n<p><code>strcmp(argv[1], \"-w\")</code> takes the value of <code>argv[1]</code>, a <code>char *</code> and the address of the <em>string literal</em> <code>\"-w\"</code>, also a <code>char *</code> and uses those 2 to beginning comparing <code>char</code>-by-<code>char</code> until a difference of a null character is encountered.</p>\n"}], "owner": {"reputation": 57, "user_id": 6330806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1280054555342563/picture?type=large", "display_name": "Andres Camilo Sierra Hormiga", "link": "https://stackoverflow.com/users/6330806/andres-camilo-sierra-hormiga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1468425947, "creation_date": 1468396998, "last_edit_date": 1468398827, "question_id": 38345890, "link": "https://stackoverflow.com/questions/38345890/string-comparison-with", "title": "String comparison with ==", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//CALLBACKS\nvoid infoCallback(){\n    system(\"cheese\");\n}\nvoid wgetCallback(char *website){\n    if(website == NULL)\n        printf(\"\\nSITIO WEB NO INGRESADO!\\n\");\n    else{\n        printf(\"%s \\n\", website);\n        system(\"echo making wget success\");\n    }\n}\n\nint main(int argc, char *argv[]){\n    printf(\"\\tAUTO-BASH\\n\");\n\n    printf(\"%s \\n\", argv[1]);\n\n    if(argv[1] == \"-w\"){\n        wgetCallback(argv[2]);\n    }\n    else if(argv[1] == \"-i\"){\n        infoCallback();\n    }\n    else{\n        printf(\"\\nsos un noob\\n\");\n    }\n}\n</code></pre>\n\n<p>It doesn't do what i want.... if i write -w, it goes to else.\n...\ni want to make a switch(any type){\ncase \"??\":\nbut i don't know why i couldn't do this.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25, "user_id": 6583190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O6V7y.jpg?s=128&g=1", "display_name": "\uc774\ub3d9\uc900", "link": "https://stackoverflow.com/users/6583190/%ec%9d%b4%eb%8f%99%ec%a4%80"}, "edited": false, "score": 0, "creation_date": 1468396657, "post_id": 38345705, "comment_id": 64104891, "body": "Thanks for all answers.. This is my first question.."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1468396785, "post_id": 38345705, "comment_id": 64104965, "body": "Before answering, please try to find duplicates for questions that have obviously been asked many times before."}, {"owner": {"reputation": 25, "user_id": 6583190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O6V7y.jpg?s=128&g=1", "display_name": "\uc774\ub3d9\uc900", "link": "https://stackoverflow.com/users/6583190/%ec%9d%b4%eb%8f%99%ec%a4%80"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468397029, "post_id": 38345705, "comment_id": 64105119, "body": "Okay, I&#39;ll heed your comment."}, {"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "edited": false, "score": 0, "creation_date": 1477707287, "post_id": 38345705, "comment_id": 67887851, "body": "Thank you for posting this question. Any novice programmer in C might look for this question. Google brought me here :)"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6583190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O6V7y.jpg?s=128&g=1", "display_name": "\uc774\ub3d9\uc900", "link": "https://stackoverflow.com/users/6583190/%ec%9d%b4%eb%8f%99%ec%a4%80"}, "edited": false, "score": 0, "creation_date": 1468396790, "post_id": 38345738, "comment_id": 64104972, "body": "thank you ! your answer is very fast."}], "tags": [], "owner": {"reputation": 3575, "user_id": 6081445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/005fd098b0fa87b368915187a4e588fd?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Wallis", "link": "https://stackoverflow.com/users/6081445/kevin-wallis"}, "is_accepted": false, "score": 2, "last_activity_date": 1468396538, "creation_date": 1468396538, "answer_id": 38345738, "question_id": 38345705, "link": "https://stackoverflow.com/questions/38345705/what-is-the-difference-between-char-p-and-char-p-in-c/38345738#38345738", "title": "What is the difference between &quot;char* p&quot; and &quot;char *p&quot; in C?", "body": "<p>There is no difference, it is only a matter of style.</p>\n\n<p>Like John Skeet wrote in a former comment (for another topic):  </p>\n\n<blockquote>\n  <p>Different people have different conventions for that.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "edited": false, "score": 0, "creation_date": 1477708107, "post_id": 38345742, "comment_id": 67887976, "body": "I feel declaring p and q on separate lines is a better deal - <code>char *p; char *q;</code> just to avoid any confusion related to placement of asterisk. But this is just a one time confusion it seems until one gets to know the basics of pointer declaration semantics."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1468396557, "creation_date": 1468396557, "answer_id": 38345742, "question_id": 38345705, "link": "https://stackoverflow.com/questions/38345705/what-is-the-difference-between-char-p-and-char-p-in-c/38345742#38345742", "title": "What is the difference between &quot;char* p&quot; and &quot;char *p&quot; in C?", "body": "<p><code>char* p</code> and <code>char *p</code> are <em>exactly</em> equivalent.</p>\n\n<p>In many ways, you ought to write <code>char *p</code> since, really, <code>p</code> is a <em>pointer</em> to <code>char</code>. But as the years have ticked by, most folk regard <code>char*</code> as the <em>type</em> for <code>p</code>, so <code>char* p</code> is possibly more common.</p>\n\n<p>But do note though that <code>char* p, q;</code> actually declares <code>p</code> as a <em>pointer</em> to a <code>char</code> and <code>q</code> as a <code>char</code>! If you wanted two pointers, you would have to write <code>char *p, *q;</code> or the incredibly obfuscated</p>\n\n<p><code>char* p, *q;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 17945, "user_id": 465053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mj3Xe.jpg?s=128&g=1", "display_name": "RBT", "link": "https://stackoverflow.com/users/465053/rbt"}, "edited": false, "score": 0, "creation_date": 1477707533, "post_id": 38345743, "comment_id": 67887888, "body": "Thank you for mentioning <code>char*p and char * p</code>. I&#39;ve never used them :). I&#39;ve always been using the other two."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1468396560, "creation_date": 1468396560, "answer_id": 38345743, "question_id": 38345705, "link": "https://stackoverflow.com/questions/38345705/what-is-the-difference-between-char-p-and-char-p-in-c/38345743#38345743", "title": "What is the difference between &quot;char* p&quot; and &quot;char *p&quot; in C?", "body": "<p><code>char* p</code> and <code>char *p</code> are the same. As is <code>char*p</code> and <code>char * p</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6583190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O6V7y.jpg?s=128&g=1", "display_name": "\uc774\ub3d9\uc900", "link": "https://stackoverflow.com/users/6583190/%ec%9d%b4%eb%8f%99%ec%a4%80"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2119, "favorite_count": 0, "closed_date": 1468396747, "answer_count": 3, "score": 0, "last_activity_date": 1468516785, "creation_date": 1468396431, "last_edit_date": 1468516785, "question_id": 38345705, "link": "https://stackoverflow.com/questions/38345705/what-is-the-difference-between-char-p-and-char-p-in-c", "closed_reason": "Duplicate", "title": "What is the difference between &quot;char* p&quot; and &quot;char *p&quot; in C?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\n#define KOREA \"\ub300\ud55c\ubbfc\uad6d\"\n\nchar* My_strcpy(char* dest, const char* src);\n</code></pre>\n\n<p>What is the difference between \"char* p\" and \"char *p\"?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1468394989, "post_id": 38345144, "comment_id": 64103882, "body": "Because one is read-only and the other is write-only, the circuitry is &quot;wired&quot; so that they appear at the same address. Why would you want to read the UART data that you have just sent? You know what you wrote!"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1468395229, "post_id": 38345144, "comment_id": 64104043, "body": "In other words, when you write to it you write to one register, when you read from it you read from the other register."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6583037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7ec45e2656005cf99bfde4491cf8b89?s=128&d=identicon&r=PG&f=1", "display_name": "SUNIL KUMAR", "link": "https://stackoverflow.com/users/6583037/sunil-kumar"}, "edited": false, "score": 0, "creation_date": 1468505239, "post_id": 38356919, "comment_id": 64163073, "body": "Thank you for my answers"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1468426687, "last_edit_date": 1495542757, "creation_date": 1468426687, "answer_id": 38356919, "question_id": 38345144, "link": "https://stackoverflow.com/questions/38345144/two-different-registers-having-the-same-address/38356919#38356919", "title": "Two different registers having the same address", "body": "<p>The two registers are not each readable and writable from code.  The UART transmit register is write-only.  The UART receive register is read-only. <a href=\"https://stackoverflow.com/questions/38345144/two-different-register-is-having-same-offset-address#comment64103882_38345144\">@Weather Vane</a>.  </p>\n\n<p>The hardware uses the read/write control as a bit, like an address bit, to distinguish register access.</p>\n\n<p>This means the code cannot directly read what was written.  Nor can code directly write to the receive register.</p>\n\n<hr>\n\n<p>In rare cases, should code need to read the contents of the UART transmit register, a copy in a shadow memory could be used.</p>\n\n<pre><code>static unsigned char UART_write_shadow;\n\nvoid UART_transmit_write(unsigned char x) {\n  *UART_transmit_register_address = x;\n  UART_write_shadow = x;\n}\n\nunsigned char UART_transmit_read(void) {\n  return UART_write_shadow;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6583037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7ec45e2656005cf99bfde4491cf8b89?s=128&d=identicon&r=PG&f=1", "display_name": "SUNIL KUMAR", "link": "https://stackoverflow.com/users/6583037/sunil-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1468426689, "creation_date": 1468394619, "last_edit_date": 1468426689, "question_id": 38345144, "link": "https://stackoverflow.com/questions/38345144/two-different-registers-having-the-same-address", "title": "Two different registers having the same address", "body": "<p>I am writing code to program a UART chip. The transmit and receive registers both have an address offset of 0x00. How then is it possible to access both registers?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1468395221, "post_id": 38345044, "comment_id": 64104040, "body": "<code>while(k=1)</code> --&gt; <code>while(k==1)</code> and <code>scanf(&quot;%c&quot;,ans)</code> --&gt; <code>scanf(&quot; %c&quot;,&amp;ans)</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468395683, "post_id": 38345044, "comment_id": 64104318, "body": "<code>i++; printf(&quot;\\n%d&quot;,i);</code> --&gt; <code>printf(&quot;\\n%d&quot;,i++);</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1468395219, "creation_date": 1468395219, "answer_id": 38345334, "question_id": 38345044, "link": "https://stackoverflow.com/questions/38345044/query-user-to-continue-printing-in-c/38345334#38345334", "title": "Query user to continue printing in C", "body": "<p>I tried changing your code so that it doesn't generate warnings, now it seems to \"work\" (but maybe it can be even more correct). </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n    int i=0,k=1;;\n    char c;\n    char ans[] = \"\";\n    while(k==1)\n    {\n        i++;\n        printf(\"\\n%d\",i);\n\n        if(i%15==0)\n        {\n            printf(\"\\nDo you want to continue?(y/n): \");\n            scanf(\" %c\",ans);\n            ans[0] = (char) toupper(ans[0]);\n            if(ans[0]=='Y') {\n                continue;\n            }\n            else if(ans[0]=='N') {\n                k=0;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1239, "user_id": 5209610, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/doSfi.jpg?s=128&g=1", "display_name": "Vladislav Martin", "link": "https://stackoverflow.com/users/5209610/vladislav-martin"}, "is_accepted": true, "score": 1, "last_activity_date": 1468410046, "last_edit_date": 1495541283, "creation_date": 1468408929, "answer_id": 38350301, "question_id": 38345044, "link": "https://stackoverflow.com/questions/38345044/query-user-to-continue-printing-in-c/38350301#38350301", "title": "Query user to continue printing in C", "body": "<p>I have provided a working C program below that performs the tasks you specified in your question. </p>\n\n<p>I have taken an effort to stay true to the functions that you used in your original code sample and I have also taken care to only make additions (not remove code). </p>\n\n<p>In the comments, I have explained lines of code that I have added that were not in your original code sample.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{ \n        int i = 0, k = 1;\n        char user_input;\n        char ans;\n\n        while(k == 1)\n        {\n                i++;\n                printf(\"%d\\n\", i);\n\n                if (i % 15 == 0)\n                {\n                        printf(\"Do you want to continue? (y/n/Y/N): \");\n                        scanf(\" %c\",&amp;user_input); // Keep the whitespace in front of the %c format specifier -- it's important!\n                        getchar(); // Consume the newline character left in the buffer by scanf()\n\n                        // Check if user input is already capitalized\n                        if (user_input &gt;= 65 &amp;&amp; user_input &lt;= 90)\n                                // If it is, keep it capitalized\n                                ans = user_input;\n                        else\n                                // If it isn't, capitalize it\n                                ans = toupper(user_input);\n\n                        if (ans=='Y')\n                        {\n                                // Allow the loop to continue\n                                continue;\n                        }\n                        else if (ans == 'N')\n                        {\n                                // Inform the user that execution is ending\n                                printf(\"Exiting loop... ending program.\\n\");\n                                // Consider removing 'k' entirely, just use a 'break' statement\n                                k = 0;\n                        }\n                        else\n                        {\n                            // Inform the user that the input was not recognized (if not y/n/Y/N...)    \n                            printf(\"User input not recognized... please provide input again.\\n\");\n                                // Decrement 'i' so that the user is forced to provide input again...\n                                i--;\n                                // Allow the loop to continue\n                                continue;\n                        }\n                }\n        }\n}\n</code></pre>\n\n<p><strong>Helpful notes</strong>:</p>\n\n<ol>\n<li><p><code>scanf</code> leaves a newline character in the buffer when you are reading user input with character formatters. Namely... </p>\n\n<blockquote>\n  <p><code>%c</code>, <code>%n</code>, and <code>%[]</code> are the 3 specified expectations that do not consume leading whitespace\n  -- From a comment on <a href=\"https://stackoverflow.com/a/5240807/5209610\">this StackOverflow answer</a>.</p>\n</blockquote></li>\n<li><p>Keep in mind that if you would like to exit your <code>while</code> loop, you could simply insert a <code>break</code> statement. This way, you don't have to change the value of <code>k</code> (which is rather ambiguous) to end the loop and the code is more readable because an explicit <code>break</code> statement is harder to misinterpret. In this <em>simple</em> case, the use of <code>k</code> is easily understood (so don't worry about it too much, for now).</p></li>\n<li><p>If you ever intend to read string input from a user (i.e., an array of characters), then I would recommend that you use <code>fgets()</code> instead of <code>scanf()</code>. A discussion of the merits of <code>fgets()</code> in comparison to <code>scanf()</code> is provided in <a href=\"https://stackoverflow.com/a/7709467/5209610\">this StackOverflow answer</a>. Further, it is important to recognize that even though you <em>can</em> use <code>gets()</code> to perform a similar operation it is highly dangerous and never advised. Check out the explanations provided by the <a href=\"https://stackoverflow.com/a/1694042/5209610\">top two answers to this StackOverflow question</a>.</p></li>\n</ol>\n"}], "owner": {"reputation": 25, "user_id": 6420079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/03e299db25037d5885a14170667c14c5?s=128&d=identicon&r=PG&f=1", "display_name": "Uttaran", "link": "https://stackoverflow.com/users/6420079/uttaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 38350301, "answer_count": 2, "score": 0, "last_activity_date": 1468410046, "creation_date": 1468394323, "last_edit_date": 1468396028, "question_id": 38345044, "link": "https://stackoverflow.com/questions/38345044/query-user-to-continue-printing-in-c", "title": "Query user to continue printing in C", "body": "<p>I am writing a program that starts printing at 0.<br>\nIt prints up to 15 and asks the user a <strong>y/n</strong> question.  </p>\n\n<ul>\n<li>if <strong>y</strong> that program prints next 15. </li>\n<li>if <strong>n</strong> program stops. </li>\n</ul>\n\n<p>The program I wrote does not work. </p>\n\n<p>Help solving this.</p>\n\n<pre><code>int main()\n{\nint i=0,k=1;\nchar ans;\n\nwhile(k=1)\n{\n    i++;\n    printf(\"\\n%d\",i);\n\n    if(i%15==0)\n    {\n        printf(\"\\nDo you want to continue?(y/n): \");\n        scanf(\"%c\",ans);\n        ans = toupper(ans);\n        if(ans=='Y') {\n            continue;\n        }\n        else if(ans=='N') {\n            k=0;\n        }\n    }\n}\n}\n</code></pre>\n\n<p>----------------------------------EDIT-------------------------------------\nchanged the code as @Programmer400.  Also 15-->3. Now my computer prints</p>\n\n<pre><code>1\n2\n3\nDo you want to continue?(y/n): y\n\n4\n5\n6\nDo you want to continue?(y/n): \n7\n8\n9\nDo you want to continue?(y/n): y\n</code></pre>\n\n<p>First it prints till 3 and asks. After Y, it prints till 6 and asks and then without any input prints till 9 and asks. Note the missing y in the 2nd question.</p>\n"}, {"tags": ["c", "wav", "textpad"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1468395674, "post_id": 38344950, "comment_id": 64104315, "body": "I&#39;m assuming when you say &quot;in textPad&quot;, you have a hex editor plugin? (or textPad has a hex editor built in)"}, {"owner": {"reputation": 45, "user_id": 6538198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6870583af75087f50a18a8ad6fbfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "Hanoun Fouad", "link": "https://stackoverflow.com/users/6538198/hanoun-fouad"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1468396358, "post_id": 38344950, "comment_id": 64104718, "body": "Yes it does have hex editor built in.."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6538198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6870583af75087f50a18a8ad6fbfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "Hanoun Fouad", "link": "https://stackoverflow.com/users/6538198/hanoun-fouad"}, "edited": false, "score": 1, "creation_date": 1468398273, "post_id": 38345744, "comment_id": 64105821, "body": "if it is encoded in 8-bit ITU-T what does that mean?"}, {"owner": {"reputation": 45, "user_id": 6538198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6870583af75087f50a18a8ad6fbfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "Hanoun Fouad", "link": "https://stackoverflow.com/users/6538198/hanoun-fouad"}, "edited": false, "score": 1, "creation_date": 1468398411, "post_id": 38345744, "comment_id": 64105912, "body": "and okay let&#39;s say it&#39;s at 54, then the first bytes are C6 37 01 00  how can they be interpreted as 3670016  1572864  -3670016 by sf_read_int"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1468396563, "creation_date": 1468396563, "answer_id": 38345744, "question_id": 38344950, "link": "https://stackoverflow.com/questions/38344950/open-a-wav-file-to-read-data-in-text-editor-vs-in-sndfile/38345744#38345744", "title": "Open a wav file to read data in text editor vs in sndfile", "body": "<p>You have some pattern to see in a .wav file:</p>\n\n<ul>\n<li>\"RIFF\" : <code>0x52 0x49 0x46 0x46</code></li>\n<li>\"WAVE\" : <code>0x57 0x41 0x56 0x45</code></li>\n<li>\"fmt \" : <code>0x66 0x6d 0x74 0x20</code></li>\n<li>\"data\" : <code>0x64 0x61 0x74 0x61</code></li>\n</ul>\n\n<p>We see <code>64 61 74 61</code> at offset <strong>50</strong>. So data begins only at offset 54 and not 46.</p>\n\n<p>You can find a <a href=\"http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/WAVE.html\" rel=\"nofollow\">wave specification</a> to understand how is encoded your file.</p>\n\n<p>Thanks to this spec, I can tell you that your file is encoded in <a href=\"https://en.wikipedia.org/wiki/G.711\" rel=\"nofollow\">\"8-bit ITU-T G.711 A-law\"</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 6538198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6870583af75087f50a18a8ad6fbfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "Hanoun Fouad", "link": "https://stackoverflow.com/users/6538198/hanoun-fouad"}, "is_accepted": true, "score": 1, "last_activity_date": 1468405941, "creation_date": 1468405941, "answer_id": 38349179, "question_id": 38344950, "link": "https://stackoverflow.com/questions/38344950/open-a-wav-file-to-read-data-in-text-editor-vs-in-sndfile/38349179#38349179", "title": "Open a wav file to read data in text editor vs in sndfile", "body": "<p>Okay so i found out that the wav file is encoded and libsndfile takes care of it without any intervention. That caused the \"unequal\" values.</p>\n"}], "owner": {"reputation": 45, "user_id": 6538198, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6870583af75087f50a18a8ad6fbfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "Hanoun Fouad", "link": "https://stackoverflow.com/users/6538198/hanoun-fouad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 38349179, "answer_count": 2, "score": 0, "last_activity_date": 1468405941, "creation_date": 1468394062, "last_edit_date": 1468396510, "question_id": 38344950, "link": "https://stackoverflow.com/questions/38344950/open-a-wav-file-to-read-data-in-text-editor-vs-in-sndfile", "title": "Open a wav file to read data in text editor vs in sndfile", "body": "<p>I want to read the data of an 8bit wav file using textPad, I know that the data is located at the 44/46th byte, but I am having problems reading it.</p>\n\n<p>I have that code:</p>\n\n<p>52 49 46 46 F8 37 01 00 57 41 56 45 66 6D 74 20<br>\n12 00 00 00 06 00 01 00 40 1F 00 00 40 1F 00 00<br>\n01 00 08 00 00 00 66 61 63 74 04 00 00 00 <strong>C6 37<br>\n01 00 64 61 74 61 C6 37 01 00 D6 D4 56 54 D5 56<br>\n56 51 D4 D3 D0 D6 54 57 D4 54 57 51 57 D0 D3 D1</strong><br>\netc.</p>\n\n<p>The part in bold is the data of it.</p>\n\n<p>The problem is when i read it in sndfile using <code>sf_read_int</code> I get in the buffer the following values:</p>\n\n<pre><code>3670016  1572864  -3670016   -1572864   524288   -3670016   -3670016 \n</code></pre>\n\n<p>etc</p>\n\n<p>How am I supposed to read the data in the wav file? What is the equation or 'relationship' between the numbers i got in sndfile and the data in textPad?</p>\n\n<p>Oh and one more thing, if i switch the reading to <code>sf_read_float</code> instead of int i get values between -0.0001 and +0.0001...</p>\n\n<p>Any idea what's happening, the writing and data processing is very good but I don't understand what's up with these values.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 4, "creation_date": 1468393632, "post_id": 38344777, "comment_id": 64103023, "body": "So you allocate a new array (freeing the old array in the process), then free the new array, then write data to the old array which is now freed?"}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1468393843, "post_id": 38344777, "comment_id": 64103157, "body": "If the allocation fails, free the memory pointed to by the pointer to the original array, if it succeeds, free the memory space you&#39;ve successfully allocated and write to it ??"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1468393894, "post_id": 38344777, "comment_id": 64103184, "body": "<code>if(!newarr){                 free(arr);return NULL;              }else{                 arr = newarr             }</code>"}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1468395089, "post_id": 38344777, "comment_id": 64103952, "body": "@BLUEPIXY Why free(arr)? It doesn&#39;t make sesne to free the old data in case of failure"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1468395254, "post_id": 38344777, "comment_id": 64104061, "body": "@OhadEytan <code>array = add_to_array(array, 5, 10);</code>"}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1468395451, "post_id": 38344777, "comment_id": 64104173, "body": "@BLUEPIXY Thats true, but should handled outside, perhaps by checking of the return value."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1468396014, "post_id": 38344777, "comment_id": 64104507, "body": "Use <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> and read <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">about <b>undefined behavior</b></a>"}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1468396487, "post_id": 38344777, "comment_id": 64104789, "body": "As I mentioned in the comment of my code the old array stays valid. If you used my code mark it as the solution."}], "answers": [{"comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1468397487, "post_id": 38344922, "comment_id": 64105383, "body": "If realloc fails then the old memory should be freed manually At this point the pgm may not continue and should be aborted."}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1468397825, "post_id": 38344922, "comment_id": 64105561, "body": "@sjsam Why free the old memory and lose the data? Maybe he want save it or do another thing"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1468398146, "post_id": 38344922, "comment_id": 64105742, "body": "The reason why <code>realloc</code> was called is because more data needed to be added to be added to the heap for the program to give the desired result. What is the point in continuing the program if the program ran out of memory. May be abort? Or  the op may write a fallback code."}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1468398940, "post_id": 38344922, "comment_id": 64106232, "body": "@sjsam sometimes you want to save the old data before you abort or free another memory and continue"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1468399699, "post_id": 38344922, "comment_id": 64106762, "body": "In that case, you have already metioned how to do it. ;) So take a ^ for that."}], "tags": [], "owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "is_accepted": true, "score": 1, "last_activity_date": 1468396078, "last_edit_date": 1468396078, "creation_date": 1468393969, "answer_id": 38344922, "question_id": 38344777, "link": "https://stackoverflow.com/questions/38344777/why-is-this-instance-of-realloc-giving-me-sigabrt/38344922#38344922", "title": "Why is this instance of realloc giving me SIGABRT?", "body": "<p>If realloc fails you probably want to save the old array and do nothing, so:</p>\n\n<pre><code>        if(!newarr){\n            free(arr);\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>        if(!newarr){\n            return NULL // Allocation fails, the old array saved. Check the return value outside the function \n        }\n</code></pre>\n\n<p>If realloc succeed, you sure don't want to free the new array, just update the last value in it, so:</p>\n\n<pre><code>        }else{\n            free(newarr);\n        }\n        arr[num] = newval;\n        return arr;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>        newarr[num] = newval;\n        return newarr;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1468394562, "post_id": 38345072, "comment_id": 64103607, "body": "Your last sentence is bogus \u2014 the address returned by <code>realloc()</code> is not always the address passed in, even when the allocation is successful.  In other words, <code>realloc()</code> may move the data."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1468394829, "post_id": 38345072, "comment_id": 64103785, "body": "@JonathanLeffler : Valid point, and <code>chance of moving</code> is the reason we used a new pointer <code>newarr</code>. Thankyou ;)"}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1468395240, "post_id": 38345072, "comment_id": 64104052, "body": "It&#39;s probably doesn&#39;t happen it reality, but you don&#39;t fix the code for the case realloc fails"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1468397346, "post_id": 38345072, "comment_id": 64105301, "body": "@OhadEytan : <code>it probably doesn&#39;t happen it reality</code>   Probably yes ! with the luxury of virtual memory MIPS assures each pgm. But neglecting <code>it</code> is a bad practice."}, {"owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "edited": false, "score": 0, "creation_date": 1468397707, "post_id": 38345072, "comment_id": 64105484, "body": "Of course. Thats why it&#39;s better if you treat the <code>if(!newarr){...}</code> in your answer"}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 2, "last_activity_date": 1468397108, "last_edit_date": 1468397108, "creation_date": 1468394422, "answer_id": 38345072, "question_id": 38344777, "link": "https://stackoverflow.com/questions/38344777/why-is-this-instance-of-realloc-giving-me-sigabrt/38345072#38345072", "title": "Why is this instance of realloc giving me SIGABRT?", "body": "<p>Not only doesn't</p>\n\n<pre><code>    else{\n           free(newarr); \n        }\n</code></pre>\n\n<p>make sense but also it defies the purpose of </p>\n\n<pre><code>int *newarr = realloc(arr, sizeof(int) * (num+1));\n</code></pre>\n\n<p>If <code>realloc</code> is successful, do <code>arr=newarr</code>.</p>\n\n<hr>\n\n<p><strong>Reference</strong></p>\n\n<p><a href=\"http://en.cppreference.com/w/c/memory/realloc\" rel=\"nofollow\">[ realloc ]</a> reference says:</p>\n\n<blockquote>\n  <p>On success, returns the pointer to the beginning of newly allocated\n  memory. The returned pointer must be deallocated with free() or\n  realloc(). The original pointer ptr is invalidated and any access to\n  it is undefined behavior (even if reallocation was in-place).</p>\n  \n  <p>On failure, returns a null pointer. The original pointer ptr remains\n  valid and may need to be deallocated with free() or realloc().</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 1, "last_activity_date": 1468395779, "creation_date": 1468395779, "answer_id": 38345518, "question_id": 38344777, "link": "https://stackoverflow.com/questions/38344777/why-is-this-instance-of-realloc-giving-me-sigabrt/38345518#38345518", "title": "Why is this instance of realloc giving me SIGABRT?", "body": "<p>Your code causes undefined behavior when you try to write to original block after reallocation. If reallocation fails - you free that block manually before writing, in other case you must not touch that block because <code>realloc()</code> has returned new one and original one bay be freed internally. And SIGABRT - is an implementation-specific notification about detected heap corruption or misusing of malloc-family API. Read about <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/realloc.html\" rel=\"nofollow\">realloc()</a> carefully.</p>\n"}], "owner": {"reputation": 209, "user_id": 2519193, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10cefc2bef0187a701a036e20f4b9320?s=128&d=identicon&r=PG", "display_name": "user2519193", "link": "https://stackoverflow.com/users/2519193/user2519193"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "accepted_answer_id": 38344922, "answer_count": 3, "score": 1, "last_activity_date": 1468397108, "creation_date": 1468393522, "last_edit_date": 1468396140, "question_id": 38344777, "link": "https://stackoverflow.com/questions/38344777/why-is-this-instance-of-realloc-giving-me-sigabrt", "title": "Why is this instance of realloc giving me SIGABRT?", "body": "<p>Here is the code in question, it's a function that reallocs a int array and adds a number to the end of it</p>\n\n<pre><code>int *add_to_array(int *arr, unsigned int num, int newval)\n{\n    if(arr != NULL){\n\n        int *newarr = realloc(arr, sizeof(int) * (num+1));\n            if(!newarr){\n                free(arr);\n\n            }else{\n                free(newarr);\n            }\n            arr[num] = newval;\n            return arr;\n   }\n   else{\n\n    return NULL;\n\n   }\n\n}\n</code></pre>\n\n<p>Problem is, when I call this function once, it works fine, but if I call it a second time, the debugger gives me a SIGABRT at the line</p>\n\n<pre><code>int *newarr = realloc(arr, sizeof(int) * (num+1));\n</code></pre>\n\n<p>Here is how I'm calling the function</p>\n\n<pre><code>array = add_to_array(array, 5, 10);\narray = add_to_array(array, 6, 100);\n</code></pre>\n\n<p>EDIT: I managed to solve this with this new code</p>\n\n<pre><code>int *add_to_array(int *arr, unsigned int num, int newval)\n{\nif(arr != NULL){\n\nint *newarr =realloc(arr, sizeof(int) * (num+1));\nif(!newarr){\n    return NULL;\n}else{\n newarr[num] = newval;\n return newarr;\n}\n}\nelse{\n\n    return NULL;\n\n}\n\n}\n</code></pre>\n\n<p>One more question, in the event whereby realloc fails to realloc the given pointer arr, does arr becomes null in that instance or is it still valid?</p>\n"}, {"tags": ["c", "multithreading", "performance", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 4, "creation_date": 1468391310, "post_id": 38343817, "comment_id": 64101724, "body": "You can bind the threads which tells OpenMP not to move the threads around but OpenMP, at least last time I looked into it (before OpenMP 4.0), provides no methods to assign a particular thread to a particle core.  If you bind the threads you&#39;re stuck with whatever topology was defined when you start your code. You have to use an non-OpenMP function to say which threads bind to a particular core."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1468391699, "post_id": 38343817, "comment_id": 64101898, "body": "With hyper-threading on Windows at least the default topology puts the first two threads on the same core which is obviously not ideal.  I think the same thing happens with AMD modules on Linux and Windows (first two threads on the first module). AMD modules are really only a single floating point core. If you just use the default number of threads with Intel &amp; AMD it&#39;s usually not a problem because all cores get filled up but if you use less threads then the number of logical processors it might not scale like you expect."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1468391714, "post_id": 38343817, "comment_id": 64101902, "body": "Why do you want to control the number of threads? Why not just use the default?"}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1468392675, "post_id": 38343817, "comment_id": 64102419, "body": "related <a href=\"http://stackoverflow.com/questions/8325566/openmp-and-cpu-affinity\" title=\"openmp and cpu affinity\">stackoverflow.com/questions/8325566/openmp-and-cpu-affinity</a>"}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1468401458, "post_id": 38343817, "comment_id": 64107971, "body": "Out of curiosity, how did you come to the conclusion that &quot;the execution time is increasing&quot;? How did you time it?"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1468414290, "post_id": 38343817, "comment_id": 64116792, "body": "Small correction, using the default number of threads on AMD actually may not be a good idea at least for floating point because for floating point operations with two threads for every core is actually less efficient.  I&#39;m looking forward to the Zen microarch and the end of the Bulldozer microarch (though XOP was a nice idea)."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 2, "creation_date": 1468425084, "post_id": 38343817, "comment_id": 64125003, "body": "The whole question is based on the completely unfounded assumption that your threads are running on the same CPU core. The first step can only be to show in detail how you came to that conclusion providing necessary information to reproduce or understand the issue. There is absolutely nothing in the question that can even serve as a starting point. All discussion here is completely hypothetical."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1468426385, "post_id": 38343817, "comment_id": 64125883, "body": "@Zulan completely agreed. Hence my question about the timing process. I wouldn&#39;t be surprise we are in a CPU time vs. Elapsed time issue."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1468427787, "post_id": 38343817, "comment_id": 64126732, "body": "I couldn&#39;t find the source but I remember reading about on Amazon EC2 machines, Linux loses the information of physical cores and performs sub-optimal scheduling, e.g. if the machine is 2-core and 4-thread, and the job uses 4 busy threads, then the 4 busy threads could be assigned to the same physical core."}], "answers": [{"comments": [{"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1468393539, "post_id": 38344692, "comment_id": 64102939, "body": "<a href=\"https://software.intel.com/en-us/node/522691\" rel=\"nofollow noreferrer\">software.intel.com/en-us/node/522691</a>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1468393624, "post_id": 38344692, "comment_id": 64103014, "body": "Yeah Intel has one, sure I forgot! Thanks @talonmies for the upvote and for the link. I will update my answer."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1468393662, "post_id": 38344692, "comment_id": 64103043, "body": "So does gcc. And I didn&#39;t upvote this"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1468396201, "post_id": 38344692, "comment_id": 64104623, "body": "@talonmies are you sure? I know about the Intel, but not about gcc. OK, sorry, I just saw the notifications together. :) <a href=\"https://stackoverflow.com/posts/38344692/edit\">edit</a>I checked your profile, you know what you are talking aboit.[/edit]"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1468414080, "post_id": 38344692, "comment_id": 64116622, "body": "&quot;With that said, assuming you have 2 cores, then having 4 threads ready for execution, will result in race conditions&quot;  I think this statement is misleading because most of the computers I use have hyper-treading which does exactly this (usually 8 threads and 4 cores).  Oversubscribing has benefits and hardware oversubscribing gives a boost most of the time because it&#39;s hard to squeeze the most out of a super-scalar core with one thread and having another thread do something different can make better usage of the instruction level parallelism of superscalar cores."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1468449228, "post_id": 38344692, "comment_id": 64137927, "body": "@Zboson thanks for your comment, I see your point...How do you suggest I should modify that statement to address the issue in a better way? I feel that you really disliked that, judging by the downvote."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1468482095, "post_id": 38344692, "comment_id": 64147720, "body": "I did not downvote you. I rarely downvote. My downvoate rate is 1.7% (I have 41 downvotes in total out of 2313 votes). A question/answer has to be really bad for me to downvote. I can&#39;t remember the last time I downvoted. It&#39;s been months."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1468502977, "post_id": 38344692, "comment_id": 64161472, "body": "I completely disagree with your answer. Thread binding is so important in most areas where OpenMP is used (HPC, engineering, etc.) that OpenMP 4.0 introduced the concept of <i>places</i>, which provides a vendor-neutral way of pinning specific threads to specific CPUs. Also, <i>&quot;thread affinity can have a dramatic effect on the application speed&quot;</i> is usually understood as positive effect due to stupid OS schedulers and the cost of reloading the caches when threads get migrated."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1468514970, "post_id": 38344692, "comment_id": 64169686, "body": "@HristoIliev I see, I did update the answer, is it better now? :) Z boson, OK, it&#39;s not the down vote I care about, but the improvement of the answer! :)"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 2, "creation_date": 1468565621, "post_id": 38344692, "comment_id": 64188165, "body": "I&#39;ve voted to close the question as missing vital information. I would rather wait for the OP to provide that information before even trying to comment on the issue as it could be something as embarrassing as using <code>clock()</code> to measure the wall time on Linux."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": -1, "last_activity_date": 1468514913, "last_edit_date": 1468514913, "creation_date": 1468393228, "answer_id": 38344692, "question_id": 38343817, "link": "https://stackoverflow.com/questions/38343817/i-would-like-to-know-if-there-is-any-way-to-assign-a-particular-thread-in-openmp/38344692#38344692", "title": "I would like to know if there is any way to assign a particular thread in OpenMP to a specific CPU core?", "body": "<p><strong>Yes you can determine which CPU gets a thread</strong>.</p>\n\n<p>By using for example the <a href=\"https://software.intel.com/en-us/node/522691\" rel=\"nofollow\">Thread Affinity Interface (Linux* and Windows*)</a>, as suggested by talonmies. However, notice what the article mentions though:</p>\n\n<blockquote>\n  <p>thread affinity can have a dramatic effect on the application speed.</p>\n</blockquote>\n\n<hr>\n\n<p>For getting slower execution, two main reasons may apply:</p>\n\n<p>1) <em>If you have more threads than your cores</em>, then the remaining threads will wait for the others, which reduces to serial execution.</p>\n\n<p>With that said, assuming you have 2 cores, then having 4 threads ready for execution, will result in race conditions, since all these threads will compete for the resources (i.e. the cores), so 2 of them will execute in parallel, but the other two will have to wait.</p>\n\n<p>2) <em>Small size of your problem</em>.</p>\n\n<p>Running in parallel doesn't come for free. You have to do much housekeeping and in general orchestrate the parallel execution. You have to bring OpenMP into play and the OS has to handle more threads/processes as well. </p>\n\n<p>So, unless the size of your problem is big enough, you won't see any speedup (even worse, you will see a slowdown as in your case), since the overhead of orchestrating the parallel execution will dominate the execution of your application.</p>\n"}], "owner": {"reputation": 19, "user_id": 6582671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r6SaD.jpg?s=128&g=1", "display_name": "Avipriyo Biswas", "link": "https://stackoverflow.com/users/6582671/avipriyo-biswas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "closed_date": 1470420879, "accepted_answer_id": 38344692, "answer_count": 1, "score": 0, "last_activity_date": 1468514913, "creation_date": 1468390146, "last_edit_date": 1468393400, "question_id": 38343817, "link": "https://stackoverflow.com/questions/38343817/i-would-like-to-know-if-there-is-any-way-to-assign-a-particular-thread-in-openmp", "closed_reason": "Needs more focus", "title": "I would like to know if there is any way to assign a particular thread in OpenMP to a specific CPU core?", "body": "<p>Using OpenMP I divided a simple algorithm in different threads but the execution time is increasing drastically. This may be due to all the threads running on same CPU core. I am aware that if my CPU is dual core or quad core then assigning number of threads more than number of CPU cores will not help much. but even with two threads the execution time is increasing.</p>\n"}, {"tags": ["c", "lexical-analysis"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1468389981, "post_id": 38343706, "comment_id": 64101153, "body": "What exactly is that long chain of logical-OR terms supposed to be accomplishing?  And why are you checking <code>int</code> values against a string you just (oddly) copied from your <code>symTable[]</code> ? I think <a href=\"http://en.cppreference.com/w/c/string/byte/isdigit\" rel=\"nofollow noreferrer\"><code>isdigit()</code></a> is on the menu for this task."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468393574, "post_id": 38343706, "comment_id": 64102967, "body": "For portable programs, do not use header files that are non-standard.  I.E. do not use <code>conio.h</code>   Instead of <code>_getch()</code>  use this: <code>int ch;     while( (ch = getchar()) != EOF &amp;&amp; &#39;\\n&#39; != ch);     getchar();</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468393789, "post_id": 38343706, "comment_id": 64103121, "body": "for ease of readability and understanding, 1) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>  2) variable names should indicate <code>content</code> or <code>usage</code> (or better, both).  3) when compiling, always enable all the warnings, then fix those warnings.  4) separate code blocks (for, if, else, while, do...while, switch, case, default ) via a blank line"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468395129, "post_id": 38343706, "comment_id": 64103976, "body": "@user3629249: I also often add _getch() and conio.h because on Windows, the console windows closes as soon as the program ends, if the program is started from the IDE. Later, I remove the non-portable stuff."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1468395336, "post_id": 38343706, "comment_id": 64104103, "body": "FWIW, I didn&#39;t read this through entirely, but ISTM that you first see if the token you have starts with a digit, and then start gathering digits until no more left, or you find an alpha char (or underscore), and start gathering for an identifier. If the identifier is in the keyword list, it is a keyword."}, {"owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "edited": false, "score": 0, "creation_date": 1468400460, "post_id": 38343706, "comment_id": 64107316, "body": "Do you want to figure out number tokens, or you want tokens + their values?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1500073695, "post_id": 38343706, "comment_id": 77197041, "body": "@ManojKandala: you can accept one of the answers by clicking on the grey checkmark below its score."}], "answers": [{"tags": [], "owner": {"reputation": 1831, "user_id": 4278074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/spNDb.jpg?s=128&g=1", "display_name": "Aleksandar Makragi\u0107", "link": "https://stackoverflow.com/users/4278074/aleksandar-makragi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1468401005, "creation_date": 1468401005, "answer_id": 38347299, "question_id": 38343706, "link": "https://stackoverflow.com/questions/38343706/lexical-analyzer-c-program-for-identifying-tokens/38347299#38347299", "title": "Lexical Analyzer C program for identifying tokens", "body": "<p>When you're writing lexer, always create specific function that finds your tokens  (name <code>yylex</code> is used for tool <em>System Lex</em>, that is why I used that name). Writing lexer in main is not smart idea, especially if you want to do syntax, semantic analysis later on. </p>\n\n<p>From your question it is not clear whether you just want to figure out what are number tokens, or whether you want token + fetch number value. I will assume first one. </p>\n\n<p>This is <em>example code</em>, that finds whole numbers:</p>\n\n<pre><code>int yylex(){\n\n    /* We read one char from standard input */\n    char c = getchar();\n\n    /* If we read new line, we will return end of input token */\n    if(c == '\\n')\n        return EOI;\n\n    /* If we see digit on input, we can not return number token at the moment. \n         For example input could be 123a and that is lexical error  */\n    if(isdigit(c)){\n\n        while(isdigit(c = getchar()))\n            ;\n\n        ungetc(c,stdin);\n        return NUM;\n    }\n\n    /* Additional code for keywords, identifiers, errors, etc. */\n}\n</code></pre>\n\n<p>Tokens <code>EOI</code>, <code>NUM</code>, etc. should be defined on top. Later on, when you want to write syntax analysis, you use these tokens to figure out whether code responds to language syntax or not. In lexical analysis, usually ASCII values are not defined at all, your lexer function would simply return <code>')'</code> for example. Knowing that, tokens should be defined above 255 value.  For example:</p>\n\n<pre><code>#define EOI 256\n#define NUM 257\n</code></pre>\n\n<p>If you have any futher questions, feel free to ask. </p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1498290993, "last_edit_date": 1498290993, "creation_date": 1498289945, "answer_id": 44734093, "question_id": 38343706, "link": "https://stackoverflow.com/questions/38343706/lexical-analyzer-c-program-for-identifying-tokens/44734093#44734093", "title": "Lexical Analyzer C program for identifying tokens", "body": "<blockquote>\n  <p><code>string[j]==1</code></p>\n</blockquote>\n\n<p><strong>This test is wrong</strong><sup>(1)</sup> (on all C implementations I heard of), since <code>string[j]</code> is some <strong><code>char</code></strong> e.g. using <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">ASCII</a> (or <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a>, or even the old <a href=\"https://en.wikipedia.org/wiki/EBCDIC\" rel=\"nofollow noreferrer\">EBCDIC</a> used on IBM mainframes) encoding  and the encoding of the <code>char</code> digit 1 is not the the number 1. On my Linux/x86-64 machine (and on most machines using ASCII or UTF-8, e.g. almost all of them) using UTF-8, the <em>character</em> <code>1</code> is encoded as the byte of code 48 (that is <code>(char)48 == '1'</code>)</p>\n\n<p>You probably want</p>\n\n<pre><code>string[j]=='1'\n</code></pre>\n\n<p>and you should consider using the standard <a href=\"http://en.cppreference.com/w/c/string/byte/isdigit\" rel=\"nofollow noreferrer\"><strong><code>isdigit</code></strong></a> (and related) function.</p>\n\n<p>Be aware that UTF-8 is practically used <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">everywhere</a> but is a <em>multi-byte</em> encoding (of displayable characters). See this <a href=\"https://stackoverflow.com/a/44726106/841108\">answer</a>.</p>\n\n<hr>\n\n<p>Note (1): the <code>string[j]==1</code> test is probably misplaced too! Perhaps you might test <code>isdigit(*ptr)</code> at some better place.</p>\n\n<p>PS. Please take the habit of compiling with all warnings and debug info (e.g. with <code>gcc -Wall -Wextra -g</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...)\n and <strong>use the debugger</strong> (e.g. <code>gdb</code>). You should have find out your bug in less time than it took you to get an answer here.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 4, "last_activity_date": 1499653108, "last_edit_date": 1499653108, "creation_date": 1499652313, "answer_id": 45002841, "question_id": 38343706, "link": "https://stackoverflow.com/questions/38343706/lexical-analyzer-c-program-for-identifying-tokens/45002841#45002841", "title": "Lexical Analyzer C program for identifying tokens", "body": "<p>Here are some problems in your parser:</p>\n\n<ul>\n<li><p>The test <code>string[j] == 0</code> does not test if <code>string[j]</code> is the digit <code>0</code>. The characters for digits are written <code>'0'</code> through <code>'9'</code>, their values are 48 to 57 in ASCII and UTF-8.  Furthermore, you should be comparing <code>*p</code> instead of <code>string[j]</code> to test if you have a digit in the string indicating the start of a number.</p></li>\n<li><p>Splitting the string with <code>strtok()</code> is not a good idea: it modifies the string and overwrites the first <em>separator</em> character with <code>'\\0'</code>: this will prevent matching operators such as <code>(</code>, <code>)</code>...</p></li>\n<li><p>The string <code>\" (){};\"\"\"</code> is exactly the same as <code>\" (){};\"</code>. In order to escape <code>\"</code> inside strings, you must use <code>\\\"</code>.</p></li>\n</ul>\n\n<p>To write a lexer for C, you should switch on the first character and check the following characters depending on the value of the first character:</p>\n\n<ul>\n<li>if you have white space, skip it</li>\n<li>if you have <code>//</code>, it is a line comment: skip all characters up to the newline.</li>\n<li>if you have <code>/*</code>, it is a block comment: skip all characters until you get the pair <code>*/</code>.</li>\n<li>if you have a <code>'</code>, you have a character constant: parse the characters, handling escape sequences until you get a closing <code>'</code>.</li>\n<li>if you have a <code>\"</code>, you have astring literal. do the same as for character constants.</li>\n<li>if you have a digit, consume all subsequent digits, you have an integer. Parsing the full number syntax requires much more code: leave that for later.</li>\n<li>if you have a letter or an underscore: consume all subsequent letters, digits and underscores, then compare the word with the set of predefined keywords. You have either a keyword or an identifier.</li>\n<li>otherwise, you have an operator: check if the next characters are part of a 2 or 3 character operator, such as <code>==</code> and <code>&gt;&gt;=</code>.</li>\n</ul>\n\n<p>That's about it for a simple C parser.  The full syntax requires more work, but you will get there one step at a time.</p>\n"}], "owner": {"reputation": 29, "user_id": 6582726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5IPjhFyCAO4/AAAAAAAAAAI/AAAAAAAABvI/7tpHPj-zxCM/photo.jpg?sz=128", "display_name": "Manoj Kandala", "link": "https://stackoverflow.com/users/6582726/manoj-kandala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31823, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1547026057, "creation_date": 1468389687, "last_edit_date": 1499652093, "question_id": 38343706, "link": "https://stackoverflow.com/questions/38343706/lexical-analyzer-c-program-for-identifying-tokens", "title": "Lexical Analyzer C program for identifying tokens", "body": "<p>I wrote a C program for lex analyzer (a small code) that will identify keywords, identifiers and constants. I am taking a string (C source code as a string) and then converting splitting it into words. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n\nchar symTable[5][7] = { \"int\", \"void\", \"float\", \"char\", \"string\" };\n\nint main() {\n    int i, j, k = 0, flag = 0;\n    char string[7];\n    char str[] = \"int main(){printf(\\\"Hello\\\");return 0;}\";\n    char *ptr;\n    printf(\"Splitting string \\\"%s\\\" into tokens:\\n\", str);\n    ptr = strtok(str, \" (){};\"\"\");\n    printf(\"\\n\\n\");\n    while (ptr != NULL) {\n        printf (\"%s\\n\", ptr);\n\n        for (i = k; i &lt; 5; i++) {\n            memset(&amp;string[0], 0, sizeof(string));\n            for (j = 0; j &lt; 7; j++) {\n                string[j] = symTable[i][j];\n            }\n\n            if (strcmp(ptr, string) == 0) {\n                printf(\"Keyword\\n\\n\");\n                break;\n            } else\n            if (string[j] == 0 || string[j] == 1 || string[j] == 2 ||\n                string[j] == 3 || string[j] == 4 || string[j] == 5 ||\n                string[j] == 6 || string[j] == 7 || string[j] == 8 ||\n                string[j] == 9) {\n                printf(\"Constant\\n\\n\");\n                break;\n            } else {\n                printf(\"Identifier\\n\\n\");\n                break;\n            }\n        }\n        ptr = strtok(NULL, \" (){};\"\"\");\n        k++;\n    }\n    _getch();\n    return 0;\n}\n</code></pre>\n\n<p>With the above code, I am able to identify keywords and identifiers but I couldn't obtain the result for numbers. I've tried using <code>strspn()</code> but of no avail. I even replaced <code>0,1,2...,9</code> to <code>'0','1',....,'9'</code>. </p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c", "multithreading", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 3794, "user_id": 289654, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/71401c0709151be97900ce20be622cdf?s=128&d=identicon&r=PG", "display_name": "Giuseppe Guerrini", "link": "https://stackoverflow.com/users/289654/giuseppe-guerrini"}, "edited": false, "score": 1, "creation_date": 1468391032, "post_id": 38343668, "comment_id": 64101597, "body": "How do you get new stack pointer? Maybe you are not using a good value."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1468397136, "post_id": 38343668, "comment_id": 64105177, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 547, "user_id": 4625086, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4f9fda5580d1f5303b5a2aae4f182a79?s=128&d=identicon&r=PG&f=1", "display_name": "pahan", "link": "https://stackoverflow.com/users/4625086/pahan"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1468397728, "post_id": 38343668, "comment_id": 64105502, "body": "@FUZxxl What I wanted to know is what I missed conceptually. Whether there is more to do when switching from one thread to another. The complete code is about 600 lines which is why I didn&#39;t post it."}, {"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1468397757, "post_id": 38343668, "comment_id": 64105519, "body": "pushing, changing sp and than popping require some kind of finesse. Are you doing it?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1468398015, "post_id": 38343668, "comment_id": 64105670, "body": "@pahan Conceptually, your code doesn&#39;t look wrong, but I need to see how you invoke it to be sure. It is possible that the bug is not in the code your showed us. Try to boil down your code until you can&#39;t remove anything without the bug going away."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1468398850, "post_id": 38343668, "comment_id": 64106176, "body": "Wait a second, I think I spotted your bug (not sure since I don&#39;t know very much about your code): after pushing, the old stack pointer has changed. Where do you store the final old stack pointer? It seems like that you save the wrong value for the old stack pointer."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1468410823, "post_id": 38343668, "comment_id": 64114294, "body": "The fault is unlikely to be at <code>movq %rdi, %rsp</code>, that instruction is just a register copy. You used the debugger wrong, or misunderstood its operation (people frequently mistake gdb errors for program errors)."}, {"owner": {"reputation": 547, "user_id": 4625086, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4f9fda5580d1f5303b5a2aae4f182a79?s=128&d=identicon&r=PG&f=1", "display_name": "pahan", "link": "https://stackoverflow.com/users/4625086/pahan"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1468417514, "post_id": 38343668, "comment_id": 64119265, "body": "@FUZxxl You&#39;re right. I&#39;m not updating the old stack pointer."}], "answers": [{"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 2, "last_activity_date": 1468429528, "creation_date": 1468429528, "answer_id": 38357778, "question_id": 38343668, "link": "https://stackoverflow.com/questions/38343668/switching-from-one-thread-to-another-giving-segmentation-fault/38357778#38357778", "title": "Switching from one thread to another giving segmentation fault", "body": "<p>Your problem is that you likely save the old stack pointer before calling <code>machine_switch</code>. However, <code>machine_switch</code> pushes values on the stack, causing the saved stack pointer to be invalid. To fix this you can pass a pointer to the location where you want to save the old stack pointer and store the pointer after pushing the registers:</p>\n\n<pre><code>machine_switch:\n    pushq %rbx\n    pushq %rbp\n    pushq %r12\n    pushq %r13\n    pushq %r14\n    pushq %r15\n\n    movq %rsp,(%rsi) # save old stack pointer\n    movq %rdi, %rsp\n\n    popq %r15\n    popq %r14\n    popq %r13\n    popq %r12\n    popq %rbp\n    popq %rbx\n\n    ret \n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 4625086, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4f9fda5580d1f5303b5a2aae4f182a79?s=128&d=identicon&r=PG&f=1", "display_name": "pahan", "link": "https://stackoverflow.com/users/4625086/pahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 2, "accepted_answer_id": 38357778, "answer_count": 1, "score": 0, "last_activity_date": 1468429528, "creation_date": 1468389468, "last_edit_date": 1468391644, "question_id": 38343668, "link": "https://stackoverflow.com/questions/38343668/switching-from-one-thread-to-another-giving-segmentation-fault", "title": "Switching from one thread to another giving segmentation fault", "body": "<p>I'm trying to develop a user-level thread library in C in x86_64.\nI have a function called <code>machine_switch</code> which takes the stack pointers of new thread and current thread as the arguments. This function is supposed to switch the threads by backing up the current register values and restoring new ones from the new stack pointer. This is what I have tried. </p>\n\n<pre><code>.text\n.global machine_switch\n\nmachine_switch:\n    # address of the new sp is arg1\n    # address of the current sp is arg2\n    # need to store all required registered for old tcb\n    # restore all required registred from the new tcb\n    # then when you return, you should get to the new thread \n\n    pushq %rbx\n    pushq %rbp\n    pushq %r12\n    pushq %r13\n    pushq %r14\n    pushq %r15\n\n    movq %rdi, %rsp\n\n    popq %r15\n    popq %r14\n    popq %r13\n    popq %r12\n    popq %rbp\n    popq %rbx\n\n    ret \n</code></pre>\n\n<p>This is the data structure I'm using to store threads.</p>\n\n<pre><code>struct tcb { \n  void *sp;  /* Address of stack pointer. \n          * Keep this as first element would ease switch.S \n          * You can do something else as well. \n          */  \n  int id;\n  int state; /* 1 - ready state\n          * 2 - running state\n          * 3 - blocked state\n          */\n};\n</code></pre>\n\n<p>I have a list of <code>tcb</code> s. I'm passing <code>sp</code> in new and old <code>tcb</code> as the arguments for <code>machine_switch</code> function. </p>\n\n<p>But this function gives a segmentation fault in when changing the stack pointer. (at <code>movq %rdi, %rsp</code>). I checked the arguments of the function, they are correct. Am I missing something?</p>\n"}, {"tags": ["c", "linux", "debian", "udev"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1468392859, "post_id": 38343625, "comment_id": 64102527, "body": "have you looked into the <code>&#47;proc&#47;</code> filesystem ?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4666766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a1de9c20f31ccba3e3e8a883bc1acaa?s=128&d=identicon&r=PG&f=1", "display_name": "Awadhesh Maurya", "link": "https://stackoverflow.com/users/4666766/awadhesh-maurya"}, "edited": false, "score": 0, "creation_date": 1468409097, "post_id": 38346988, "comment_id": 64113076, "body": "Thanks for your reply. I am getting it by fuser. My question is how to handle it after removed by user.  In my system hot plugging is managed by udev rules. Its show  Specified filename /media/pen-drive does not exist.   Remove action is ACTION==&quot;remove&quot;, ENV{dir_name}!=&quot;&quot;, RUN+=&quot;/bin/sh -c &#39;/bin/fuser -m /media/%E{dir_name&#39;&quot;, RUN+=&quot;/bin/umount -l /media/%E{dir_name}&quot;, RUN+=&quot;/bin/rmdir /media/%E{dir_name}&quot;"}], "tags": [], "owner": {"reputation": 1974, "user_id": 4507239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTs0A.png?s=128&g=1", "display_name": "Shubhangi", "link": "https://stackoverflow.com/users/4507239/shubhangi"}, "is_accepted": false, "score": 1, "last_activity_date": 1468400148, "creation_date": 1468400148, "answer_id": 38346988, "question_id": 38343625, "link": "https://stackoverflow.com/questions/38343625/how-to-get-pids-using-a-mount-point-before-removed-by-udev-on-plug-out/38346988#38346988", "title": "How to get PIDs using a mount point before removed by udev on plug out", "body": "<p>You may use <code>lsof</code> command. This command lists which process is using which file. output contains command, PID, USERID, file type, Device, side , file name etc. \nYou may grep for mount point to find who is using your device. </p>\n\n<p><p><strong>Syntax :</strong> </p>\n\n<pre><code>#lsof  | grep &lt;mount point&gt;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>#lsof  &lt;mount point&gt;\n</code></pre>\n\n<p><p> Other option is to use <code>fuser</code> command. It displays process IDs which are using given file/dir </p>\n\n<p><p><strong>Syntax :</strong> </p>\n\n<pre><code>#fuser &lt;mount point &gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4666766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a1de9c20f31ccba3e3e8a883bc1acaa?s=128&d=identicon&r=PG&f=1", "display_name": "Awadhesh Maurya", "link": "https://stackoverflow.com/users/4666766/awadhesh-maurya"}, "is_accepted": false, "score": 0, "last_activity_date": 1468581298, "creation_date": 1468581298, "answer_id": 38394763, "question_id": 38343625, "link": "https://stackoverflow.com/questions/38343625/how-to-get-pids-using-a-mount-point-before-removed-by-udev-on-plug-out/38394763#38394763", "title": "How to get PIDs using a mount point before removed by udev on plug out", "body": "<p>Thanks for your reply. I am getting it by fuser. My question is how to handle it after removed by user. In my system hot plugging is managed by udev rules. Its show Specified filename \n/media/pen-drive does not exist. Remove action is \nACTION==\"remove\", ENV{dir_name}!=\"\", RUN+=\"/bin/sh -c '/bin/fuser -m /media/%E{dir_name'\", RUN+=\"/bin/umount -l /media/%E{dir_name}\", RUN+=\"/bin/rmdir /media/%E{dir_name}\"</p>\n"}], "owner": {"reputation": 31, "user_id": 4666766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a1de9c20f31ccba3e3e8a883bc1acaa?s=128&d=identicon&r=PG&f=1", "display_name": "Awadhesh Maurya", "link": "https://stackoverflow.com/users/4666766/awadhesh-maurya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468581298, "creation_date": 1468389285, "question_id": 38343625, "link": "https://stackoverflow.com/questions/38343625/how-to-get-pids-using-a-mount-point-before-removed-by-udev-on-plug-out", "title": "How to get PIDs using a mount point before removed by udev on plug out", "body": "<p>I want to know mechanism to get processes using any mount point before unmounted and remove by udev on removing the storage device in Debian OS.</p>\n\n<p>When I skip remove directory in udev rule file it get a lot of processes including kernel etc.</p>\n\n<p>I want to implement an alert message on screen if some one remove pen drive from system while uploading or downloading in the pen drive. </p>\n\n<p>Please help me.</p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 1, "creation_date": 1468389492, "post_id": 38343600, "comment_id": 64100949, "body": "I think your function declaration is not what the teacher asked for a start"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1468389535, "post_id": 38343600, "comment_id": 64100972, "body": "Where are array declarations ? Are they global ?"}, {"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1468391157, "post_id": 38343600, "comment_id": 64101659, "body": "@ameyCU Yes, I&#39;m sorry. Forgot to through them in there. Edited"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1468391339, "post_id": 38343600, "comment_id": 64101732, "body": "@KyleSteward In your whole question there is nothing described about &quot;what problem are your facing?&quot;."}, {"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1468391559, "post_id": 38343600, "comment_id": 64101832, "body": "@ameyCU Adding the occurrences straight into the array after checking it&#39;s value. I had it done using separate functions before. Then I had to narrow it down to all in this function (professors orders) and I&#39;ve messed everything up and am completely stuck."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1468391743, "post_id": 38344174, "comment_id": 64101914, "body": "I appreciate the help but we aren&#39;t allowed to use anything we haven&#39;t gone over. I already got a 0% on an assignment because I used something I learned last year. Basically the only header files we can use are stdio and stdlib."}, {"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "reply_to_user": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1468391923, "post_id": 38344174, "comment_id": 64102008, "body": "Then skip the assert and make the array static."}], "tags": [], "owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "is_accepted": false, "score": 0, "last_activity_date": 1468391824, "last_edit_date": 1468391824, "creation_date": 1468391549, "answer_id": 38344174, "question_id": 38343600, "link": "https://stackoverflow.com/questions/38343600/creating-an-array-with-the-amount-of-occurrences-from-an-input-file-c/38344174#38344174", "title": "Creating an array with the amount of occurrences from an input file (C)", "body": "<p>I'm bored. From the spec you posted, I think your prof wants something like this: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\nvoid createVArray(FILE * fin, int *a, int len){\n    int i;\n    assert(len&gt;29);\n    while(1){\n    if(fscanf(fin,\"%d\",&amp;i) !=1){\n        perror(\"fscanf error\");\n        exit(1);\n    }\n    if(i&gt;=30)\n        return;\n    a[0]+=1;\n    a[i]+=1;\n    }\n}\n\n\nint main(){\n    int a[30];\n    memset(a,0,sizeof(a));\n    FILE *fin=fopen(\"test.txt\",\"r\");\n    createVArray(fin,a,30);\n    for(int i=0; i&lt;30; ++i){\n        printf(\"a[%d]=%d\\n\",i,a[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>test.txt:</p>\n\n<blockquote>\n  <p>12 15 7 1 19 18 16 15 2 8  5 4 16 7 1  19 4 16 15 3  13 9 12 4 6  9 2\n  19 13 15  18 20 17 17 4  3 12 2 18 18  10 14 1 14 1  7 10 18 17 18  30</p>\n</blockquote>\n\n<p>output: </p>\n\n<pre><code>a[0]=50\na[1]=4\na[2]=3\na[3]=2\na[4]=4\na[5]=1\na[6]=1\na[7]=3\na[8]=1\na[9]=2\na[10]=2\na[11]=0\na[12]=3\na[13]=2\na[14]=2\na[15]=4\na[16]=3\na[17]=3\na[18]=6\na[19]=3\na[20]=1\na[21]=0\na[22]=0\na[23]=0\na[24]=0\na[25]=0\na[26]=0\na[27]=0\na[28]=0\na[29]=0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1468393924, "post_id": 38344363, "comment_id": 64103209, "body": "This helped me so much. I was just about to submit it unfinished but you gave me hope! After a plugged that in I got on a roll and finished pretty quickly. Thanks!"}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "reply_to_user": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1468394115, "post_id": 38344363, "comment_id": 64103335, "body": "I though it was already past due, I was only helping you solve afterward, to help you understand, not to give you extra marks."}, {"owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1468395497, "post_id": 38344363, "comment_id": 64104202, "body": "It was due at 11:30pm (currently 3:35AM). We are allowed to give her a printed copy with commented code explaining what we were stuck on and why it was late."}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "reply_to_user": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "edited": false, "score": 0, "creation_date": 1468395624, "post_id": 38344363, "comment_id": 64104289, "body": "I hope you will say that stackoverflow helped you solve your problem"}], "tags": [], "owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "is_accepted": false, "score": 1, "last_activity_date": 1468392199, "creation_date": 1468392199, "answer_id": 38344363, "question_id": 38343600, "link": "https://stackoverflow.com/questions/38343600/creating-an-array-with-the-amount-of-occurrences-from-an-input-file-c/38344363#38344363", "title": "Creating an array with the amount of occurrences from an input file (C)", "body": "<p>let's start simple</p>\n\n<blockquote>\n  <p>createVArray: This is a void function that takes three parameters: a FILE * and an integer array and an integer indicating the length of the array</p>\n</blockquote>\n\n<pre><code>void createVArray(FILE* input, int counts[], const int length )\n</code></pre>\n\n<blockquote>\n  <p>Your function should read numbers from the file, one at a time, using the information collected to update the array</p>\n</blockquote>\n\n<pre><code>fscanf(input, \"%i\", &amp;number)\n</code></pre>\n\n<blockquote>\n  <p>The first index of the array will be used to store the total number of votes read while each subsequent index will store the number of votes for that t-shirt logo option</p>\n</blockquote>\n\n<pre><code>++counts[0];\n++counts[numbers];\n</code></pre>\n\n<blockquote>\n  <p>Your function should continue reading the file until the number 30 is encountered</p>\n</blockquote>\n\n<pre><code>if( number == 30 ) return; // or break if you want to\n</code></pre>\n\n<p>Appart from some loops, additional tests and check you should have the pieces to write your function already </p>\n\n<p>and if you are really desperate : <a href=\"http://pastebin.com/bfNTKVHq\" rel=\"nofollow\">http://pastebin.com/bfNTKVHq</a></p>\n\n<p>bonus : <a href=\"https://godbolt.org/g/F9GYI0\" rel=\"nofollow\">https://godbolt.org/g/F9GYI0</a></p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1468395425, "creation_date": 1468395425, "answer_id": 38345392, "question_id": 38343600, "link": "https://stackoverflow.com/questions/38343600/creating-an-array-with-the-amount-of-occurrences-from-an-input-file-c/38345392#38345392", "title": "Creating an array with the amount of occurrences from an input file (C)", "body": "<p>The problem presents the classic problem of accounting for the number of occurrences within a range. Any time you are presented with this type problem, you will capture the number of occurrences within an array having at least one element for each number in the range. (in your case <code>+1</code> since you are storing the total votes in the first element.</p>\n\n<p>The next part is to loop over all values reading all values between <code>1-20</code> representing votes cast for the corresponding tshirt design. So if you read <code>13</code> you need to increment <code>array[13]</code> to note that 1 vote has been recorded for tshirt <code>13</code> design. Since you are reading numbers within the range of your array, all you need to do is insure you start with an array initialized to all <code>0</code>'s. When each number is read, you simply increment the value at that index by one. e.g. you read <code>12</code> to increment the vote count for tshirt <code>12</code> it is simply <code>array[12]++;</code> (or you could do <code>array[12] = array[12] + 1;</code> or <code>array[12] += 1;</code>, they all do the same thing)</p>\n\n<p>During this time you are also keeping a running total of all votes, so every time your read a valid vote from the file, simply do <code>total++;</code> (or <code>total = total + 1;</code> or <code>total += 1;</code>)</p>\n\n<p>Putting it together, you could do something similar to the following, e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ARSZ 21   /* array size 0-total, 1-20 shirt votes */\n\nvoid createVArray (int *a, int n, FILE *fp);\n\nint main (int argc, char **argv) {\n\n    int array[ARSZ] = {0};\n    FILE *fp = argc &gt; 1 ? fopen (argv[1], \"r\") : stdin;\n\n    if (!fp) {  /* validate file open for reading */\n        fprintf (stderr, \"error: file open failed '%s'.\\n\", argv[1]);\n        return 1;\n    }\n\n    createVArray (array, ARSZ, fp);   /* read values from fp */\n\n    if (fp != stdin) fclose (fp);     /* close file if not stdin */\n\n    printf (\"\\n '%d' votes recorded.\\n\\n\", *array);\n    for (int i = 1; i &lt; ARSZ; i++)\n        printf (\"  tshirt[%2d] : %2d\\n\", i, array[i]);\n\n    return 0;\n}\n\n/* read integer values from 'fp' incrementing values in range `array`\n * for each value read and returning the total values considered in\n * array[0].\n */\nvoid createVArray (int *a, int n, FILE *fp)\n{\n    if (!a || !fp) {    /* validate array and FILE stream */\n        fprintf (stderr, \"error: invalid parameter in list.\\n\");\n        return;\n    }\n    if (!n) { *a = 0; return; } /* validate length */\n    int tmp = 0, total = 0;     /* read into tmp, increment total */\n\n    while (fscanf (fp, \" %d\", &amp;tmp) == 1) {  /* validate int read */\n        if (tmp == 30) break;                /* if 30, bail       */\n        if (0 &lt; tmp &amp;&amp; tmp &lt;= 20)            /* if vote increment */\n            total++, a[tmp]++;       /* total and value at a[tmp] */\n    }\n    a[0] = total;        /* set first element to hold total votes */\n}\n</code></pre>\n\n<p><strong>Input File</strong></p>\n\n<pre><code>$ cat dat/votes.dat\n12 15 7 1 19\n18 16 15 2 8\n5 4 16 7 1\n19 4 16 15 3\n13 9 12 4 6\n9 2 19 13 15\n18 20 17 17 4\n3 12 2 18 18\n10 14 1 14 1\n7 10 18 17 18  30\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/tshirtvote &lt;dat/votes.dat\n\n '50' votes recorded.\n\n  tshirt[ 1] :  4\n  tshirt[ 2] :  3\n  tshirt[ 3] :  2\n  tshirt[ 4] :  4\n  tshirt[ 5] :  1\n  tshirt[ 6] :  1\n  tshirt[ 7] :  3\n  tshirt[ 8] :  1\n  tshirt[ 9] :  2\n  tshirt[10] :  2\n  tshirt[11] :  0\n  tshirt[12] :  3\n  tshirt[13] :  2\n  tshirt[14] :  2\n  tshirt[15] :  4\n  tshirt[16] :  3\n  tshirt[17] :  3\n  tshirt[18] :  6\n  tshirt[19] :  3\n  tshirt[20] :  1\n</code></pre>\n\n<p>Easy to see, tshirt design <code>18</code> is the big winner with <code>6</code> votes out of a total of <code>50</code> cast.</p>\n"}], "owner": {"reputation": 73, "user_id": 5340304, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/MZ7eS.jpg?s=128&g=1", "display_name": "Kyle Steward", "link": "https://stackoverflow.com/users/5340304/kyle-steward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1468395425, "creation_date": 1468389174, "last_edit_date": 1468391116, "question_id": 38343600, "link": "https://stackoverflow.com/questions/38343600/creating-an-array-with-the-amount-of-occurrences-from-an-input-file-c", "title": "Creating an array with the amount of occurrences from an input file (C)", "body": "<p>I've been working tirelessly on this assignment, it's already past due and I cannot for the life of me find a solution. We are behind on lecture and the professor still decided it was okay for us to do homework that we haven't even covered yet. </p>\n\n<p>So this is the main function I've been having problems with. The goal is to read an input file full of integers:</p>\n\n<pre><code>12 15 7 1 19\n18 16 15 2 8 \n5 4 16 7 1 \n19 4 16 15 3 \n13 9 12 4 6 \n9 2 19 13 15 \n18 20 17 17 4 \n3 12 2 18 18 \n10 14 1 14 1 \n7 10 18 17 18  30\n</code></pre>\n\n<p>After it reads the file, it's suppose to input the occurrences of each value into an array. So in index 1, there would be however many 1's there are. index 2, there would be however many 2's and so on up until 20. Index 0 will hold the total amount of integers the file contains.  The loop continues to scan until it reaches the integer 30. </p>\n\n<p>The length I have set to 999 because the file will never be the same, so it will be kind of random and you'll never know the length. So once it counts through up until 30, I use 'amount' as a counter and then initialize length to equal amount.</p>\n\n<p>For more instruction, this is part of the directions for this function specifically that was given by the professor:</p>\n\n<blockquote>\n  <p>createVArray: This is a void function that takes three parameters: a FILE *  and an integer array and an integer indicating the length of the array.  Your function should read numbers from the file, one at a time, using the information collected to update the array. The first index of the array will be used to store the total number of votes read while each subsequent index will store the number of votes for that t-shirt logo option.  Your function should continue reading the file until the number 30 is encountered.</p>\n</blockquote>\n\n<pre><code>int array2[999], array[21]; //Global dec\n\nvoid createVArray(int amount, int length){\nint counter, i, j, m;\nlength = 999;\namount = 0;\n\nfor(counter = 1; counter &lt; length; counter++){\n    fscanf(votesFileptr, \"%d\", &amp;array[counter]);\n\n            if(array[counter] == 30){\n                for (i = 1, j = 0; i &lt; amount, j &lt; amount; i++, j++){\n                    array2[j] = array[i];\n                }\n                break;\n            }\n            for(m = 0; m &lt; length; m++){\n                if (array[m] &gt; 0){\n                    printf(\"Occurs %d\\n\", array[m]);\n                }\n            }\n    amount++;\n}\n\nlength = amount;\narray[0] = amount;\nfor(i = 0; i &lt; 21; i++){\n    printf(\"%d\\n\", array[i]);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "encoding", "ffmpeg"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 1, "creation_date": 1468392487, "post_id": 38343505, "comment_id": 64102330, "body": "can you post your code sample, as I think you should specify an encoding profile"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1468394046, "post_id": 38343505, "comment_id": 64103286, "body": "Alternatively you may trace how ffmpeg command line tool uses libavcodec / libavformat API and compare it with your own approach."}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1468423301, "post_id": 38343505, "comment_id": 64123772, "body": "Check the [H264 guide] (<a href=\"https://trac.ffmpeg.org/wiki/Encode/H.264\" rel=\"nofollow noreferrer\">trac.ffmpeg.org/wiki/Encode/H.264</a>). I guess the difference goes to the quantization factor and to the presets of libx264."}], "owner": {"reputation": 63, "user_id": 5961387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a929fa018eef599e6642b5e53bf0c7?s=128&d=identicon&r=PG&f=1", "display_name": "Muthu GM", "link": "https://stackoverflow.com/users/5961387/muthu-gm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1232, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1468388747, "creation_date": 1468388747, "question_id": 38343505, "link": "https://stackoverflow.com/questions/38343505/how-to-reduce-bitrate-with-out-change-video-quality-in-ffmpeg", "title": "How to reduce bitrate with out change video quality in FFMPEG", "body": "<p>I'm using FFMPEG C library. I'm use modified <a href=\"https://ffmpeg.org/doxygen/trunk/muxing_8c-source.html\" rel=\"nofollow\">muxing.c</a> example to encode video. Video quality is reduce frame by frame when I control bitrate (like 1080 x 720 - bitrate 680k ). But same image I using FFMPEG command line tool to encode same bitrate 680k image quality to not change. </p>\n\n<p>What is the reason for same image and bitrate encoded video quality reduce whan I encode using C API and reason why quality did not change command line tool.</p>\n\n<p>I use :</p>\n\n<p>Command line arg : </p>\n\n<ul>\n<li>ffmpeg -framerate 5 image%d.jpg  -c:v libx264 -b:v 64k -pix_fmt yuv420p\nout.mp4</li>\n</ul>\n\n<p>Muxing.c(modified) Codec setting : </p>\n\n<ul>\n<li>fps = 5 ;</li>\n<li>CODEC_ID = H264 (libx264) ; </li>\n<li>Pixel_fmt = yuv420 ;</li>\n<li>Image decoder = MJPEG ;</li>\n<li>bitrate = 64000 ; </li>\n</ul>\n\n<p>The video size are same but quality is reduce frame by frame in muxing.c\nbut same bitrate video quality is perfect.</p>\n\n<p>please provide how to I reduce bitrate with out change quality using FFMPEG C API.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 2, "creation_date": 1468388085, "post_id": 38343336, "comment_id": 64100373, "body": "It isn&#39;t a complete code fragment and the types of the arguments aren&#39;t specified."}, {"owner": {"reputation": 2771, "user_id": 4163321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZrgsU.gif?s=128&g=1", "display_name": "Lukas Thomsen", "link": "https://stackoverflow.com/users/4163321/lukas-thomsen"}, "edited": false, "score": 3, "creation_date": 1468388836, "post_id": 38343336, "comment_id": 64100672, "body": "Probably your compiler is missing the declaration of <code>node</code>."}, {"owner": {"reputation": 4232, "user_id": 5281962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a29ae5ecb74bea23afa60d940edc0282?s=128&d=identicon&r=PG&f=1", "display_name": "Cherubim", "link": "https://stackoverflow.com/users/5281962/cherubim"}, "edited": false, "score": 0, "creation_date": 1468417511, "post_id": 38343336, "comment_id": 64119262, "body": "there also is a typo : change  <code>nednode-&gt;next=NULL;</code> to  <code>newnode-&gt;next=NULL;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 6582642, "user_type": "registered", "profile_image": "https://graph.facebook.com/1032563010191994/picture?type=large", "display_name": "Raghu", "link": "https://stackoverflow.com/users/6582642/raghu"}, "edited": false, "score": 0, "creation_date": 1469518147, "post_id": 38344376, "comment_id": 64555638, "body": "I forgot to write the datatype. It gives the same error even when the above  mentioned code is executed."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1468392254, "creation_date": 1468392254, "answer_id": 38344376, "question_id": 38343336, "link": "https://stackoverflow.com/questions/38343336/how-do-i-return-head-from-structure/38344376#38344376", "title": "How do I return head from structure", "body": "<p>Your function prototype seems incomplete:</p>\n\n<pre><code>node insert(*head,num)\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>node insert(node *head, int num)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6224, "user_id": 3994824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hU1H.jpg?s=128&g=1", "display_name": "Thomas Pinetz", "link": "https://stackoverflow.com/users/3994824/thomas-pinetz"}, "is_accepted": false, "score": 1, "last_activity_date": 1469518453, "creation_date": 1469518453, "answer_id": 38583705, "question_id": 38343336, "link": "https://stackoverflow.com/questions/38343336/how-do-i-return-head-from-structure/38583705#38583705", "title": "How do I return head from structure", "body": "<p>Your return value should probably be node*. Therefore it should be node* insert(node* head, int num);</p>\n\n<p>Also you have a typo with newnode. I tried it and it worked for me after changing the return value.</p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 4536039, "user_type": "registered", "profile_image": "https://graph.facebook.com/1379935058986467/picture?type=large", "display_name": "halftrue", "link": "https://stackoverflow.com/users/4536039/halftrue"}, "is_accepted": false, "score": 0, "last_activity_date": 1469518966, "creation_date": 1469518966, "answer_id": 38583846, "question_id": 38343336, "link": "https://stackoverflow.com/questions/38343336/how-do-i-return-head-from-structure/38583846#38583846", "title": "How do I return head from structure", "body": "<p>You code should like this.</p>\n\n<p>change the nednode to newnode.</p>\n\n<p>when you make the node connect with the link, you need to find the link's tail, and connect the new node to the tail. </p>\n\n<p>And you should return the node* instead of node. So, change the func's return type to node*.</p>\n\n<pre><code>node* insert(node *head, int num){\n  node *newnode;\n  newnode=getnode();\n\n  newnode-&gt;data=num;\n  newnode-&gt;next=NULL;\n\n  if(head==NULL){\n     head=newnode;\n  } else {\n     node *p = head;\n     while(p) {\n       p = p-&gt;next;\n     }\n     p-&gt;next=newnode;\n  }\n  return head;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6582642, "user_type": "registered", "profile_image": "https://graph.facebook.com/1032563010191994/picture?type=large", "display_name": "Raghu", "link": "https://stackoverflow.com/users/6582642/raghu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1469518966, "creation_date": 1468387902, "last_edit_date": 1469518099, "question_id": 38343336, "link": "https://stackoverflow.com/questions/38343336/how-do-i-return-head-from-structure", "title": "How do I return head from structure", "body": "<p>Code I have tried to return head:  </p>\n\n<pre><code>node insert(node *head, int num){\n  node *newnode;\n  newnode=getnode();\n  newnode-&gt;data=num;\n  nednode-&gt;next=NULL;\n\n  if(head==NULL){\n     head=newnode;\n     newnode-&gt;next = NULL;\n  }\n  head-&gt;next=newnode;\n  return head;\n}\n</code></pre>\n\n<p>After compiling, I am getting this error:</p>\n\n<blockquote>\n  <p>\"error: expected declaration specifiers or '...' before '*' token\"</p>\n</blockquote>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "declaration", "turbo-c"], "comments": [{"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1468387858, "post_id": 38343283, "comment_id": 64100288, "body": "Have you tried changing the <code>?</code> operator to an <code>if else</code> block ?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1468387905, "post_id": 38343283, "comment_id": 64100303, "body": "TurboC probably has a macro called <code>min</code>. So try calling your function something else."}, {"owner": {"reputation": 17, "user_id": 6582617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfdGl.jpg?s=128&g=1", "display_name": "Indrasish Banerjee", "link": "https://stackoverflow.com/users/6582617/indrasish-banerjee"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1468389030, "post_id": 38343283, "comment_id": 64100732, "body": "Thanks @user3386109 The program works now. Thank you very much!"}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1468392752, "post_id": 38343283, "comment_id": 64102472, "body": "Me reading: <code>Please review this code as Turbo C is...</code> nope"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 0, "creation_date": 1468393979, "post_id": 38343283, "comment_id": 64103241, "body": "@dvhh: What for? The <code>?:</code> is being used correctly."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1468394045, "post_id": 38343283, "comment_id": 64103285, "body": "Off-topic. You really should <b>give up using Turbo C</b>, which is an old, unmaintained, non <i>standard conforming</i> compiler. Consider instead installing some Linux distribution on your PC, and (or) use free software standard conforming (to C99 or C11, and to C++11 or C++14) recent compilers like <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> or <a href=\"http://clang.llvm.org/\" rel=\"nofollow noreferrer\">Clang/LLVM</a>"}, {"owner": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1468394371, "post_id": 38343283, "comment_id": 64103489, "body": "@KeithThompson it was pointed that the issue came with the <code>min</code> function, I suspected that Turbo C is old enough to not understand that operator"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 4593, "user_id": 105104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b23920ac852e946b333d3f9d0d95c1?s=128&d=identicon&r=PG", "display_name": "dvhh", "link": "https://stackoverflow.com/users/105104/dvhh"}, "edited": false, "score": 2, "creation_date": 1468397119, "post_id": 38343283, "comment_id": 64105170, "body": "@dvhh: Not a bad guess, but not likely. The <code>?:</code> operator is older than C."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6582617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfdGl.jpg?s=128&g=1", "display_name": "Indrasish Banerjee", "link": "https://stackoverflow.com/users/6582617/indrasish-banerjee"}, "edited": false, "score": 0, "creation_date": 1468389226, "post_id": 38343542, "comment_id": 64100807, "body": "Thank you. I went on and changed the function name to minimum."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 4, "creation_date": 1468392749, "post_id": 38343542, "comment_id": 64102468, "body": "<code>min</code> and <code>max</code> are non-standard. Any implementation that defines them in <code>&lt;stdlib.h&gt;</code> is non-conforming ."}], "tags": [], "owner": {"reputation": 626, "user_id": 4358702, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4FIAY.jpg?s=128&g=1", "display_name": "padfoot", "link": "https://stackoverflow.com/users/4358702/padfoot"}, "is_accepted": false, "score": 4, "last_activity_date": 1468388906, "creation_date": 1468388906, "answer_id": 38343542, "question_id": 38343283, "link": "https://stackoverflow.com/questions/38343283/turbo-c-is-giving-me-declaration-terminated-incorrectly-when-i-believe-my-code/38343542#38343542", "title": "Turbo C is giving me &quot;Declaration Terminated Incorrectly&quot; when I believe my code is fine", "body": "<pre><code>#include&lt;stdlib.h&gt;\n</code></pre>\n\n<p>The above header is your culprit. Remove it and it should compile fine. This is because, in stdlib.h <code>min</code> and <code>max</code> are two different macros already defined for the same job and your definition is conflicting with it.</p>\n\n<ol>\n<li><p>You can either choose use your definition by removing the <code>include</code> or use <code>stdlib</code>'s. </p></li>\n<li><p>In case you need stdlib.h for any other functions and still want to use your own <code>min</code> function then simply undef the stdlib's declaration with <code>#undef min</code> immediately after <code>#include &lt;stdlib.h&gt;</code></p></li>\n</ol>\n\n<p>Any of these should help.</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 2, "last_activity_date": 1468393920, "creation_date": 1468393920, "answer_id": 38344904, "question_id": 38343283, "link": "https://stackoverflow.com/questions/38343283/turbo-c-is-giving-me-declaration-terminated-incorrectly-when-i-believe-my-code/38344904#38344904", "title": "Turbo C is giving me &quot;Declaration Terminated Incorrectly&quot; when I believe my code is fine", "body": "<p>In fact your code is valid C.  (I'd suggest <code>int main(void)</code> rather than <code>int main()</code>, but that's a very minor point, and not what Turbo C is complaining about.) It compiles without error using gcc with warnings enabled.</p>\n\n<p>Based on the other answer and comments, it appears that Turbo C defines macros <code>min</code> and <code>max</code> in the <code>&lt;stdlib.h&gt;</code> header. These macros are non-standard, an in fact those identifiers are available for use in user code, as you've done here. Any C implementation that defines <code>min</code> and <code>max</code> as macros in a standard header is non-conforming.</p>\n\n<p>It's Turbo C's fault, not yours.</p>\n\n<p>As I understand it, Turbo C is quite old and is no longer maintained, so there's probably no way to fix this error. (You could edit the header, assuming it's provided as a file, but messing around with implementation files is risky.) So renaming your <code>min</code> function is the simplest workaround.</p>\n\n<p>Aside from the compilation issues, when I ran your program it produced this output:</p>\n\n<pre><code>[{0}{2}{6}{12}{25}{45}{56}{59}{67}{67}{67}{71}{84}{108}]\n</code></pre>\n\n<p>The array being sorted had an element with the value <code>216</code>, which does not appear in the output. The problem is in your <code>print_arr</code> function. It assumes its second argument is the number of elements in the array (<code>15</code>), but you pass it the index of the last element (<code>14</code>), so it fails to print the last element.</p>\n\n<p>I haven't checked that the code is otherwise correct, but with <code>print_arr</code> fixed the output is correct at least for the input values you're using.</p>\n\n<p>Some style issues:</p>\n\n<p>You define <code>A</code> as an array of 15 elements, then use <code>14</code> as the index of the last element, repeating the information and making the program difficult to maintain if you want to change the length. Let the compiler count the elements for you (computers are <em>really</em> good at counting things):</p>\n\n<pre><code>int A[]={56,12,59,67,0,45,2,6,108,216,67,71,25,84,67};\nconst int len = sizeof A / sizeof A[0];\nmergesort(A, 0, len-1);\nprint_arr(A, len);\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6582617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfdGl.jpg?s=128&g=1", "display_name": "Indrasish Banerjee", "link": "https://stackoverflow.com/users/6582617/indrasish-banerjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1549, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1468397773, "creation_date": 1468387615, "last_edit_date": 1468397773, "question_id": 38343283, "link": "https://stackoverflow.com/questions/38343283/turbo-c-is-giving-me-declaration-terminated-incorrectly-when-i-believe-my-code", "title": "Turbo C is giving me &quot;Declaration Terminated Incorrectly&quot; when I believe my code is fine", "body": "<p>Here is the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint min(int a, int b);\nvoid mergesort(int arr[],int lb, int ub);\nvoid merge(int arr[],int lower1,int upper1,int lower2,int upper2);\nvoid print_arr(int arr[],int arr_size);\n\nint main()\n{\n int A[15]={56,12,59,67,0,45,2,6,108,216,67,71,25,84,67};\n int lower=0;\n int upper=14;\n mergesort(A,lower,upper);\n print_arr(A,upper);\n return 0;\n}\n\nint min(int a, int b)\n{\n return (a&lt;b)?a:b;\n}\n\nvoid mergesort(int arr[],int lb,int ub)\n{\n int i,m;\n for(m=1;m&lt;ub-lb;m++)\n {\n  for(i=lb;i&lt;ub;i+=2*m)\n  {\n   int from=i;\n   int mid=i+m-1;\n   int to=min(i+m+m-1,ub);\n   merge(arr,from,mid,mid+1,to);\n  }\n }\n}\n\nvoid merge(int arr[],int lower1,int upper1,int lower2,int upper2)\n{\n int p,q,j,n;\n int L[100];\n p=lower1;q=lower2;n=0;\n\n while((p&lt;=upper1)&amp;&amp;(q&lt;=upper2))\n {\n  L[n++]=((arr[p]&lt;arr[q])?arr[p++]:arr[q++]);\n }\n\n while(p&lt;=upper1)\n {\n  L[n++]=arr[p++];\n }\n\n while(q&lt;=upper2)\n {\n  L[n++]=arr[q++];\n }\n\n for(p=lower1,n=0;p&lt;=upper1;p++,n++)\n {\n  arr[p]=L[n];\n }\n\n for(q=lower2,j=n;q&lt;=upper2;q++,j++)\n {\n  arr[q]=L[j];\n }\n}\n\nvoid print_arr(int arr[],int arr_size)\n{\n int i=0;\n printf(\"[\");\n while(i&lt;arr_size)\n {\n  printf(\"{%d}\",arr[i]);\n  i++;\n }\n printf(\"]\\n\");\n}\n</code></pre>\n\n<p>As you can see I've programmed an iterative mergesort. Now this same code with a little tweak and without the \"min\" function worked perfectly for the recursive one. But after I added the \"min\" function the code won't run in Turbo C at all when it runs on most popular online IDEs.</p>\n\n<p>Example: Geeksforgeeks IDE run result: <a href=\"http://code.geeksforgeeks.org/GVDfs3\" rel=\"nofollow\">http://code.geeksforgeeks.org/GVDfs3</a></p>\n\n<p>The university computers run Turbo C too.</p>\n"}, {"tags": ["c", "documentation", "grouping", "doxygen"], "answers": [{"tags": [], "owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "is_accepted": true, "score": 1, "last_activity_date": 1468492073, "creation_date": 1468492073, "answer_id": 38371783, "question_id": 38343282, "link": "https://stackoverflow.com/questions/38343282/use-doxygen-file-header-as-module-description/38371783#38371783", "title": "Use doxygen file header as module description", "body": "<p>I found a solution myself.\nYou can use the doxy command @copydoc to copy the documentation.</p>\n\n<p>My code for test.h looks the following:</p>\n\n<pre><code>/**\n   \\file          test.h\n   \\brief         Some brief info\n   \\details       more Details\n*/\n/**\n   \\defgroup Views\n   @copydoc view.h\n*/\n</code></pre>\n"}], "owner": {"reputation": 1357, "user_id": 773102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/St5U2.gif?s=128&g=1", "display_name": "Jonny Schubert", "link": "https://stackoverflow.com/users/773102/jonny-schubert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "accepted_answer_id": 38371783, "answer_count": 1, "score": 1, "last_activity_date": 1468492073, "creation_date": 1468387610, "question_id": 38343282, "link": "https://stackoverflow.com/questions/38343282/use-doxygen-file-header-as-module-description", "title": "Use doxygen file header as module description", "body": "<p>I'm wondering if there is a possibility to reuse the doxygen file header description also for the module description. </p>\n\n<pre><code>/**\n   \\file               \n   \\brief         Some brief info\n   \\details       more Details\n*/\n/**\n   \\defgroup Views\n   \\brief (Same as header doxy)\n   \\details (Same as header doxy)\n*/\n</code></pre>\n\n<p>To avoid redundancy I will not copy the text. If I move the defgroup to top of the file I only get the file name mentioned in the module not the description. I tried already some combinations but I never achieved my goal. The detail and brief Text is either in the module documentation or in the file documentation. Does anyone have another idea how to reuse the text?</p>\n\n<p>Many Thanks,</p>\n\n<p>Jonny</p>\n"}, {"tags": ["c++", "c", "linux", "systems-programming"], "comments": [{"owner": {"reputation": 229, "user_id": 2093554, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8168380faa53f285811a0b9110814be5?s=128&d=identicon&r=PG&f=1", "display_name": "userXktape", "link": "https://stackoverflow.com/users/2093554/userxktape"}, "edited": false, "score": 0, "creation_date": 1468397642, "post_id": 38343182, "comment_id": 64105451, "body": "its not really a duplicate"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1615043095, "post_id": 38343182, "comment_id": 117571995, "body": "The real duplicate is the canonical <i><a href=\"https://stackoverflow.com/questions/19198332\">Compilation error: stray \u2018\\302\u2019 in program, etc.</a></i>."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1615061154, "post_id": 38343182, "comment_id": 117577274, "body": "A much more direct analysis is 342 210 222 (octal) \u2192 0xE2 0x88 0x92 (hexadecimal) \u2192 UTF-8 sequence for Unicode code point U+2212 (<a href=\"https://www.utf8-chartable.de/unicode-utf8-table.pl?start=8704&amp;number=128\" rel=\"nofollow noreferrer\">MINUS SIGN</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 2093554, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8168380faa53f285811a0b9110814be5?s=128&d=identicon&r=PG&f=1", "display_name": "userXktape", "link": "https://stackoverflow.com/users/2093554/userxktape"}, "edited": false, "score": 0, "creation_date": 1468387929, "post_id": 38343271, "comment_id": 64100312, "body": "Thanks bro.It works :)"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1615061047, "post_id": 38343271, "comment_id": 117577243, "body": "To be more precise, it is Unicode code point U+2212 (<a href=\"https://www.utf8-chartable.de/unicode-utf8-table.pl?start=8704&amp;number=128\" rel=\"nofollow noreferrer\">MINUS SIGN</a>). In most text editors it can be searched/replaced by a regular expression search for <code>\\x{2212}</code>."}], "tags": [], "owner": {"reputation": 2604, "user_id": 93763, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/0398272b3bacf46c360bc7f17bfcc500?s=128&d=identicon&r=PG", "display_name": "GMichael", "link": "https://stackoverflow.com/users/93763/gmichael"}, "is_accepted": true, "score": 2, "last_activity_date": 1468387556, "creation_date": 1468387556, "answer_id": 38343271, "question_id": 38343182, "link": "https://stackoverflow.com/questions/38343182/error-with-stray-342-stray-210-stray-222-in-c-program-in-linux-system-c/38343271#38343271", "title": "Error with stray \u2018\\342\u2019 stray \u2018\\210\u2019 stray \u2018\\222\u2019 in C program in Linux system call", "body": "<p>There is the unprintable <code>\u2212</code> on </p>\n\n<pre><code>if (ret == \u22121) {\n</code></pre>\n\n<p>Replace it with <code>-</code></p>\n"}], "owner": {"reputation": 229, "user_id": 2093554, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8168380faa53f285811a0b9110814be5?s=128&d=identicon&r=PG&f=1", "display_name": "userXktape", "link": "https://stackoverflow.com/users/2093554/userxktape"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1765, "favorite_count": 0, "closed_date": 1468388002, "accepted_answer_id": 38343271, "answer_count": 1, "score": 0, "last_activity_date": 1614924411, "creation_date": 1468387131, "last_edit_date": 1614924411, "question_id": 38343182, "link": "https://stackoverflow.com/questions/38343182/error-with-stray-342-stray-210-stray-222-in-c-program-in-linux-system-c", "closed_reason": "Duplicate", "title": "Error with stray \u2018\\342\u2019 stray \u2018\\210\u2019 stray \u2018\\222\u2019 in C program in Linux system call", "body": "<p>I am trying to do an example on a poll system call from Robert Love's book <em>Linux system programming, 2nd edition</em> (page 60-61). I copy pasted the example code in <a href=\"https://en.wikipedia.org/wiki/Code::Blocks\" rel=\"nofollow noreferrer\">Code::Blocks</a> on <a href=\"https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_14.04_LTS_.28Trusty_Tahr.29\" rel=\"nofollow noreferrer\">Ubuntu\u00a014.04</a> (Trusty Tahr) and tried compiling it, but I get errors related to stray '/342' '/210' and '/222' in my code.</p>\n<p>Following is the code: It throws error on line 18 where if(ret == -1) is checked</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;poll.h&gt;\n\n#define TIMEOUT 5\n\n/* Poll timeout, in seconds */\nint main (void)\n{\n  struct pollfd fds[2];\n  int ret;\n\n  /* Watch standard input for input */\n  fds[0].fd = STDIN_FILENO;\n  fds[0].events = POLLIN;\n\n  /* Watch standard output for ability to write (almost always true) */\n  fds[1].fd = STDOUT_FILENO;\n  fds[1].events = POLLOUT;\n\n  /* All set, block! */\n  ret = poll(fds, 2 , TIMEOUT*1000);\n\n  if (ret == \u22121) {\n    perror(&quot;poll&quot;);\n    return 1;\n  }\n\n  if (!ret) {\n    printf (&quot;%d seconds elapsed.\\n&quot;, TIMEOUT);\n    return 0;\n  }\n\n  if (fds[0].revents &amp; POLLIN)\n    printf (&quot;stdin is readable\\n&quot;);\n\n  if (fds[1].revents &amp; POLLOUT)\n    printf (&quot;stdout is writable\\n&quot;);\n\n  return 0;\n }\n</code></pre>\n<p>The errors are:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/home/eelab/sysprog/pollex/main.c|18| error: stray \u2018\\342\u2019 in program|\n/home/eelab/sysprog/pollex/main.c|18| error: stray \u2018\\210\u2019 in program|\n/home/eelab/sysprog/pollex/main.c|18| error: stray \u2018\\222\u2019 in program|\n</code></pre>\n<p>Now, I've gone through similar questions on Stack Overflow and they mention the possible problem being with conversion of ASCII characters like quotes &quot; &quot;. However, I have rewritten all quotes in the IDE again. But it still throws the same error on the line where if(ret == -1 ) is checked.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1468386983, "post_id": 38343113, "comment_id": 64099994, "body": "<code>&lt;malloc.h&gt;</code> is not a standard C header."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1468387029, "post_id": 38343113, "comment_id": 64100012, "body": "Did you try <code>scanf(&quot; %c%d&quot;,&amp;rot,&amp;a);</code>?  Note that space is placed before <code>&quot;%c&quot;</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1468387083, "post_id": 38343113, "comment_id": 64100028, "body": "This is probably a duplicate of every other question about input issues/<code>scanf</code>."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1468387250, "post_id": 38343113, "comment_id": 64100082, "body": "Off topic: Avoid <code>scanf</code>. If you use it anyway, remember to check the return code. And don&#39;t cast the return value from <code>malloc</code>. And please indent your code correctly"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1468387380, "post_id": 38343113, "comment_id": 64100126, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">Don&#39;t cast the result of <code>malloc</code> in C</a>"}, {"owner": {"reputation": 25, "user_id": 6582573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/abc7573f8592fa3fcf40d3420ddbde11?s=128&d=identicon&r=PG&f=1", "display_name": "user94", "link": "https://stackoverflow.com/users/6582573/user94"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1468389566, "post_id": 38343113, "comment_id": 64100981, "body": "@MohitJain , can you please tell why did you mentioned space before %c in scanf , When I am already using fflush so what is the mistake by not using space before %c ?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1468391265, "post_id": 38343113, "comment_id": 64101701, "body": "@user94 - if you want help with this question you must provide information about <b>all</b> the input. That is m, n, data (in the two loops). Currently we can only guess that m is 3 but we have know ideas about which data values you input and how many. You should also state your expected output. Currently we can&#39;t tell why <code>if(head1-&gt;data==head2-&gt;data &amp;&amp; rear1-&gt;data==rear2-&gt;data)</code> is true. It might not be a bug.... it depends on the data you input."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1468391835, "post_id": 38343113, "comment_id": 64101966, "body": "Hi @user94, I found a <a href=\"http://stackoverflow.com/questions/6582322/what-does-space-in-scanf-mean\">related question</a> for you. If you still don&#39;t understand, please shoot another comment, I would love to help you understand. <code>fflush(stdout);</code> is a <code>stdout</code> thing, <code>scanf</code> is <code>stdin</code> thing."}, {"owner": {"reputation": 25, "user_id": 6582573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/abc7573f8592fa3fcf40d3420ddbde11?s=128&d=identicon&r=PG&f=1", "display_name": "user94", "link": "https://stackoverflow.com/users/6582573/user94"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1468398467, "post_id": 38343113, "comment_id": 64105936, "body": "@MohitJain, I saw that fflush(stdin) has undefined behaviour , and even after changing to stdin , it is nt working , it works only when I give spaces before %c as u mentioned , now why is it so , I am not getting when I am flushing the buffer as well"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1468401043, "post_id": 38343113, "comment_id": 64107708, "body": "@user94 Yes you never <code>fflush</code> the <code>stdin</code> stream because it doesn&#39;t make sense. <code>&quot;%c&quot;</code> can be used to read a character. This character is just after the last read of the <code>scanf</code>. Last scanf may have been stopped reading for multiple reasons for example end of input marked with new line or a space. Now when you read a character you may end up reading this space. One solution is to skip characters explicitly as long as they are space characters <code>do { scanf(&quot;%c&quot;, &amp;rot); } while(rot != &#39;L&#39; &amp;&amp; rot != &#39;R&#39;);</code> or let <code>scanf</code> do it for you by adding an extra space. (Skip white spaces (<code>\\t\\n </code>) if any)"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6582573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/abc7573f8592fa3fcf40d3420ddbde11?s=128&d=identicon&r=PG&f=1", "display_name": "user94", "link": "https://stackoverflow.com/users/6582573/user94"}, "edited": false, "score": 0, "creation_date": 1468412781, "post_id": 38351371, "comment_id": 64115659, "body": "But I am giving space even during input of character and integer so I guess it should not be an issue ."}], "tags": [], "owner": {"reputation": 1, "user_id": 6584353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vzEDBJ8WnsM/AAAAAAAAAAI/AAAAAAAAAP4/kp3O8K3pjcY/photo.jpg?sz=128", "display_name": "Joms Mathew", "link": "https://stackoverflow.com/users/6584353/joms-mathew"}, "is_accepted": false, "score": -1, "last_activity_date": 1468413706, "last_edit_date": 1468413706, "creation_date": 1468411781, "answer_id": 38351371, "question_id": 38343113, "link": "https://stackoverflow.com/questions/38343113/why-is-the-below-code-not-scanning-all-inputs-properly/38351371#38351371", "title": "why is the below code not scanning all inputs properly?", "body": "<p>Try removing space after the format specifier in the scanf statement.\nIt will not give you correct final output.But,I think thats what you needed to know.</p>\n\n<p>Try this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;malloc.h&gt;\nstruct node\n{\n    unsigned long int data;\n    struct node *next, *prev;\n};\nint main()\n{\n    int n, m, a, count = 0, i, j;\n    char rot;\n    scanf(\"%d %d\", &amp;n, &amp;m);\n    struct node *head1 = NULL, *rear1 = NULL, *ptr = NULL, *temp = NULL, *head2 = NULL, *rear2 = NULL;\n    if (head1 == NULL)\n    {\n        temp = (struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld\", &amp;temp-&gt;data);\n        temp-&gt;next = NULL;\n        head1 = temp;\n        ptr = head1;\n        head1-&gt;prev = NULL;\n    }\n    for (i = 1; i &lt;= n - 1; i++)\n    {\n        temp = (struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld\", &amp;temp-&gt;data);\n        ptr-&gt;next = temp;\n        temp-&gt;prev = ptr;\n        ptr = temp;\n        temp-&gt;next = NULL;\n    }\n    ptr-&gt;next = head1;\n    head1-&gt;prev = ptr;\n    rear1 = ptr;\n    temp = NULL;\n    ptr = NULL;\n    fflush(stdout);\n    fflush(stdin);\n    if (head2 == NULL)\n    {\n        temp = (struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld\", &amp;temp-&gt;data);\n        temp-&gt;next = NULL;\n        head2 = temp;\n        ptr = head2;\n        head2-&gt;prev = NULL;\n    }\n    for (i = 1; i &lt;= n - 1; i++)\n    {\n\n        temp = (struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld\", &amp;temp-&gt;data);\n\n        ptr-&gt;next = temp;\n        temp-&gt;prev = ptr;\n        ptr = temp;\n        ptr-&gt;next = NULL;\n    }\n    ptr-&gt;next = head2;\n    head2-&gt;prev = ptr;\n    rear2 = ptr;\n    ptr = NULL; temp = NULL;\n    fflush(stdout);\n    fflush(stdin);\n    for (i = 0; i&lt;m; i++)\n    {\n        scanf(\"%c %d\", &amp;rot, &amp;a);\n        fflush(stdout);\n        fflush(stdin);\n        if (rot == 'L')\n        {\n            ptr = head1;\n            for (j = 0; j&lt;a; j++)\n            {\n                temp = ptr-&gt;next;\n                rear1-&gt;next = ptr;\n                ptr-&gt;prev = rear1;\n                rear1 = ptr;\n                head1 = temp;\n                ptr = head1;\n            }\n            count++;\n            ptr = NULL;\n            temp = NULL;\n            if (head1-&gt;data == head2-&gt;data &amp;&amp; rear1-&gt;data == rear2-&gt;data)\n            {\n                break;\n            }\n        }\n        else if (rot == 'R')\n        {\n            temp = head1;\n            ptr = rear1-&gt;prev;\n            for (j = 0; j&lt;a; j++)\n            {\n                temp-&gt;prev = rear1;\n                rear1-&gt;prev-&gt;next = NULL;\n                rear1-&gt;next = temp;\n                head1 = rear1;\n                temp = head1;\n                rear1 = ptr;\n                ptr = rear1-&gt;prev;\n            }\n            count++;\n            temp = NULL;\n            ptr = NULL;\n            if (head1-&gt;data == head2-&gt;data &amp;&amp; rear1-&gt;data == rear2-&gt;data)\n            {\n                break;\n            }\n        }\n    }\n    printf(\"%d\", count);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6582573, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/abc7573f8592fa3fcf40d3420ddbde11?s=128&d=identicon&r=PG&f=1", "display_name": "user94", "link": "https://stackoverflow.com/users/6582573/user94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468413706, "creation_date": 1468386720, "question_id": 38343113, "link": "https://stackoverflow.com/questions/38343113/why-is-the-below-code-not-scanning-all-inputs-properly", "title": "why is the below code not scanning all inputs properly?", "body": "<p>This code is a solution to the given problem :\n<a href=\"https://www.hackerearth.com/international-women-hackathon-2016/algorithm/jp-and-rotations/\" rel=\"nofollow\">https://www.hackerearth.com/international-women-hackathon-2016/algorithm/jp-and-rotations/</a></p>\n\n<p>Issue is after I give m operations as R 1 ,L 2 ,L 1 one below other as specified in the sample input , it doesn't take any further input and directly prints output as 2 , I am unable to get the mistake I am making here ,please help me out .</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;malloc.h&gt;\nstruct node\n{\nunsigned long int data ;\nstruct node *next,*prev;\n};\n\nint main()\n{\n    int n ,m,a,count=0,i,j;\n    char rot;\n    scanf(\"%d %d \", &amp;n ,&amp;m);\n    struct node *head1=NULL,*rear1,*ptr,*temp,*head2=NULL,*rear2;\n    if(head1==NULL)\n    {\n        temp=(struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld \",&amp;temp-&gt;data);\n        temp-&gt;next=NULL;\n        head1=temp;\n        ptr=head1;\n        head1-&gt;prev=NULL;\n    }\n\n    for(i=1;i&lt;=n-1;i++)\n    {\n        temp=(struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld \",&amp;temp-&gt;data);\n\n        ptr-&gt;next=temp;\n        temp-&gt;prev=ptr;\n        ptr=temp;\n        temp-&gt;next=NULL;\n\n    }\n\n    rear1=ptr;\n    temp=NULL;\n    ptr=NULL;\n    fflush(stdout);\n\n    if(head2==NULL)\n    {\n        temp=(struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld \",&amp;temp-&gt;data);\n        temp-&gt;next=NULL;\n        head2=temp;\n        ptr=head2;\n    }\n    for(i=1;i&lt;=n-1;i++)\n    {\n\n        temp=(struct node*)malloc(sizeof(struct node));\n        scanf(\"%ld \",&amp;temp-&gt;data);\n\n        ptr-&gt;next=temp;\n        ptr=temp;\n        ptr-&gt;next=NULL;\n\n    }\n\n    rear2=ptr;\n    ptr=NULL;temp=NULL;\n    fflush(stdout);\n\n    for(i=0;i&lt;m;i++)\n    {\n    scanf(\"%c %d\",&amp;rot,&amp;a);\n    fflush(stdout);\n\n    if(rot=='L')\n    {\n        ptr=head1;\n        for(j=0;j&lt;a;j++)\n        {\n            temp=ptr-&gt;next;\n            rear1-&gt;next=ptr;\n            ptr-&gt;prev=rear1;\n            rear1=ptr;\n            head1=temp;\n            ptr=head1;\n        }\n\n        count++;\n        ptr=NULL;\n        temp=NULL;\n\n        if(head1-&gt;data==head2-&gt;data &amp;&amp; rear1-&gt;data==rear2-&gt;data)\n        {\n            break;\n\n        }\n    }\n    else if(rot=='R')\n    {\n        temp=head1;\n        ptr=rear1-&gt;prev;\n\n        for(j=0;j&lt;a;j++)\n        {\n            temp-&gt;prev=rear1;\n            rear1-&gt;prev-&gt;next=NULL;\n            rear1-&gt;next=temp;\n            head1=rear1;\n            temp=head1;\n            rear1=ptr;\n            ptr=rear1-&gt;prev;\n\n        }\n\n        count++;\n        temp=NULL;\n        ptr=NULL;\n\n        if(head1-&gt;data==head2-&gt;data &amp;&amp; rear1-&gt;data==rear2-&gt;data)\n        {\n            break;\n\n        }\n\n    }\n    }\n    printf(\"%d\",count);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "winapi", "unicode-string", "wchar"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1468387140, "post_id": 38343022, "comment_id": 64100052, "body": "In which encoding is the unicode string?"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1468387837, "post_id": 38343022, "comment_id": 64100279, "body": "So you have a <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20091008-00/?p=16443\" rel=\"nofollow noreferrer\">double-null terminated string</a>. Not that unusual."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1468388289, "post_id": 38343022, "comment_id": 64100457, "body": "It works for any string system that uses <code>0</code> as a termination character."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1468389956, "post_id": 38343022, "comment_id": 64101136, "body": "IoW, you can&#39;t convert it to a <code>wchar_t *</code> because it contains more than one string.  You could convert it to an array of <code>wchar_ t *</code> if you wanted."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468422708, "post_id": 38343022, "comment_id": 64123333, "body": "@2501: The character encoding is not interesting. If you insist that it is, it&#39;s UTF-16LE. The same as <code>wchar_t</code> for any compiler targeting the Win32 platform."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1468422979, "post_id": 38343022, "comment_id": 64123531, "body": "@JonathanPotter: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380518.aspx\" rel=\"nofollow noreferrer\">UNICODE_STRING</a> is a <b>counted string</b>, not a double-null terminated string (although it can store one)."}], "answers": [{"tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": false, "score": 1, "last_activity_date": 1468424556, "last_edit_date": 1468424556, "creation_date": 1468424124, "answer_id": 38356058, "question_id": 38343022, "link": "https://stackoverflow.com/questions/38343022/unicode-string-to-wchar-t-null-terminated/38356058#38356058", "title": "UNICODE_STRING to wchar_t* null terminated", "body": "<p>A <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380518.aspx\" rel=\"nofollow\">UNICODE_STRING</a> is a structure, that stores both character data as well as its length. As such, it allows for embedded NUL characters, just like a <code>std::wstring</code>, for example.</p>\n\n<p>A C-style string (e.g. <code>wchar_t*</code>), on the other hand, does not store an explicit string length. By convention, it is terminated by a NUL character. It's length is implied. A corollary of this is, that it cannot contain embedded NUL characters.</p>\n\n<p>That means that you cannot convert from <code>UNICODE_STRING</code> to <code>wchar_t*</code> without losing the length information. You have to either store the length explicitly, alongside the <code>wchar_t*</code> pointer, or establish rules for interpretation, that allow to recalculate the length (e.g. by interpreting the character sequence as a double-null-terminated string)<sup>1)</sup>.</p>\n\n<p><hr/>\nAdditional information:</p>\n\n<ul>\n<li><a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20091008-00/?p=16443\" rel=\"nofollow\">What is the format of a double-null-terminated string with no strings?</a></li>\n<li><a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20110511-00/?p=10693\" rel=\"nofollow\">Why double-null-terminated strings instead of an array of pointers to strings?</a></li>\n</ul>\n\n<p><hr/>\n<sup>1)</sup> <em>The debugger will interpret a <code>wchar_t*</code> as a zero-terminated string. If you want to see the entire sequence, you need to explicitly provide the array size using a <a href=\"https://msdn.microsoft.com/en-us/library/75w45ekt.aspx\" rel=\"nofollow\">format specifier</a>.</em></p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1468443637, "post_id": 38360219, "comment_id": 64135585, "body": "<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\">std::string::c_str()</a> returns a pointer to <code>const</code>."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1468446880, "last_edit_date": 1468446880, "creation_date": 1468438316, "answer_id": 38360219, "question_id": 38343022, "link": "https://stackoverflow.com/questions/38343022/unicode-string-to-wchar-t-null-terminated/38360219#38360219", "title": "UNICODE_STRING to wchar_t* null terminated", "body": "<p>A <code>wchar_t*</code> is just a pointer.  Unless you tell the debugger (or any function you pass the <code>wchar_t*</code> to) exactly how many <code>wchar_t</code> characters are actually being pointed at, it has to stop somewhere, so it stops on the first null character it encounters.</p>\n\n<p><code>UNICODE_STRING::Buffer</code> is not guaranteed to be null-terminated, but it can contain embedded nulls.  You have to use the <code>UNICODE_STRING::Length</code> field to know how many <code>WCHAR</code> elements are in the <code>Buffer</code>, including embedded nulls but not counting a trailing null terminator if one is present.  If you need a null terminator, copy the <code>Buffer</code> data to your own buffer and append a terminator.</p>\n\n<p>The easiest way to do that is to use <code>std::wstring</code>, eg:</p>\n\n<pre><code>#include &lt;string&gt;\n\nUNICODE_STRING testStr;\n// fill testStr as needed...\n\nstd::wstring wStrBuf(testStr.Buffer, testStr.Length / sizeof(WCHAR));\nconst wchar_t *wStr = wStrBuf.c_str();\n</code></pre>\n\n<p>The embedded nulls will still be present, but <code>c_str()</code> will append the trailing null terminator for you.  The <em>debugger</em> will still display the data up to the first null only, unless you tell the debugger the actual number of <code>WCHAR</code> elements are in the data.</p>\n\n<p>Alternatively, if you know the <code>Buffer</code> data contains multiple substrings separated by nulls, you could optionally split the <code>Buffer</code> data into an array of strings instead, eg:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nUNICODE_STRING testStr;\n// fill testStr as needed...\n\nstd::vector&lt;std::wstring&gt; wStrArr;\n\nstd::wstring wStr(testStr.Buffer, testStr.Length / sizeof(WCHAR));\nstd::wstring::size_type startidx = 0;\ndo\n{\n    std::wstring::size_type idx = wStr.find(L'\\0', startidx);\n    if (idx == std::wstring::npos)\n    {\n        if (startidx &lt; wStr.size())\n        {\n            if (startidx &gt; 0)\n                wStrArr.push_back(wStr.substr(startidx));\n            else\n                wStrArr.push_back(wStr);\n        }\n        break;\n    }\n    wStrArr.push_back(wStr.substr(startidx, idx-startidx));\n    startidx = idx + 1;\n}\nwhile (true);\n\n// use wStrArr as needed...\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nUNICODE_STRING testStr;\n// fill testStr as needed...\n\nstd::vector&lt;std::wstring&gt; wStrArr;\n\nWCHAR *pStart = testStr.Buffer;\nWCHAR *pEnd = pStart + (testStr.Length / sizeof(WCHAR));\n\ndo\n{\n    WCHAR *pFound = std::find(pStart, pEnd, L'\\0');\n    if (pFound == pEnd)\n    {\n        if (pStart &lt; pEnd)\n            wStrArr.push_back(std::wstring(pStart, pEnd-pStart));\n        break;\n    }\n    wStrArr.push_back(std::wstring(pStart, pFound-pStart));\n    pStart = pFound + 1;\n}\nwhile (true);\n\n// use wStrArr as needed...\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 6548285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/067202d94212a1178546139addca1cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/6548285/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4484, "favorite_count": 0, "accepted_answer_id": 38360219, "answer_count": 2, "score": 1, "last_activity_date": 1468446880, "creation_date": 1468386232, "last_edit_date": 1468423024, "question_id": 38343022, "link": "https://stackoverflow.com/questions/38343022/unicode-string-to-wchar-t-null-terminated", "title": "UNICODE_STRING to wchar_t* null terminated", "body": "<p>I want to use the buffer from a <code>UNICODE_STRING</code>, but it seems I cannot just directly use it, by copying reference, because sometime I can see that there are null bytes in the middle of a string, and <code>Length</code> is greater than what I see in the debugger. So if I do this</p>\n\n<pre><code>UNICODE_STRING testStr;\n//after being used by some function it has data like this 'bad\u4e23\\0more_stuff\\0'\n\nwchar_t * wStr = testStr.Buffer;\n</code></pre>\n\n<p>I will end up with <code>wStr = \"bad\u4e23\";</code>\nIs there a way to convert this to the null terminated, valid <code>wchar_t*</code>?</p>\n"}, {"tags": ["android", "c++", "c", "gcc", "ssh"], "answers": [{"tags": [], "owner": {"reputation": 2725, "user_id": 300710, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ccd5866a37f7b3f76d92eec96ef73c2?s=128&d=identicon&r=PG", "display_name": "fornwall", "link": "https://stackoverflow.com/users/300710/fornwall"}, "is_accepted": false, "score": 0, "last_activity_date": 1469316087, "creation_date": 1469316087, "answer_id": 38547268, "question_id": 38342985, "link": "https://stackoverflow.com/questions/38342985/how-to-compile-and-run-a-c-program-on-my-android-device-through-my-pc-terminal/38547268#38547268", "title": "How to compile and run a C program on my android device through my PC terminal.?", "body": "<p>Try <a href=\"https://oliverse.ch/tech/2015/11/06/run-an-ssh-server-on-your-android-with-termux.html\" rel=\"nofollow\">running a native SSH server from Termux</a> and see if that works (you will run as the normal Termux app user, so it avoids permission problems due to being a different user).</p>\n"}], "owner": {"reputation": 329, "user_id": 5562814, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5b6d4832ddfa05158044c3b4d1a4177a?s=128&d=identicon&r=PG&f=1", "display_name": "samira", "link": "https://stackoverflow.com/users/5562814/samira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 737, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469316087, "creation_date": 1468386023, "question_id": 38342985, "link": "https://stackoverflow.com/questions/38342985/how-to-compile-and-run-a-c-program-on-my-android-device-through-my-pc-terminal", "title": "How to compile and run a C program on my android device through my PC terminal.?", "body": "<p>I want to compile and run a C program on my android device with my PC terminal through SSH. </p>\n\n<p>I've already been able to install gcc on my device by using 'termux' application.  I compiled and run a c file on my device successfully. </p>\n\n<p>I have rooted my device successfully. </p>\n\n<p>I'm using terminal to access my files on my device by using SSHdroid application. I've been able to access my gcc directory and add it to my PATH through my SSH connection. </p>\n\n<p>Although the 'gcc' command is being recognized by the system path but when I try to compile a c program I get this error:</p>\n\n<pre><code>cpp: error trying to exec '/data/data/com.termux/files/usr/libexec/gcc/aarch64-linux-android/6.1.0/cc1': execv: Permission denied\n</code></pre>\n\n<p>I've already logged in SSHDroid as the root. I also can't run 'su' because of the same permission issue. Any idea why this is happening?</p>\n\n<p>(I don't know how to install and run programs through SSHDroid)</p>\n"}, {"tags": ["c", "range", "ascii"], "comments": [{"owner": {"reputation": 3575, "user_id": 6081445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/005fd098b0fa87b368915187a4e588fd?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Wallis", "link": "https://stackoverflow.com/users/6081445/kevin-wallis"}, "edited": false, "score": 2, "creation_date": 1468385870, "post_id": 38342920, "comment_id": 64099624, "body": "One hint, it would also be possible to use instead of the numbers the ascii symbol"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1468386332, "post_id": 38342920, "comment_id": 64099781, "body": "Well, I would suggest you define a function <code>in_range(int min, int max)</code> and call this function."}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 0, "creation_date": 1468386359, "post_id": 38342920, "comment_id": 64099790, "body": "Interesting question.  I&#39;m not sure if there is an easier way to determine if something is in a particular range, but there might be an easier way to determine if something as ASCII as shown in <a href=\"http://stackoverflow.com/questions/9234886/check-if-a-char-is-ascii-using-bitmasks-and-bit-operators-in-c\">this question</a>"}, {"owner": {"reputation": 905, "user_id": 2638371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uZefP.png?s=128&g=1", "display_name": "imbearr", "link": "https://stackoverflow.com/users/2638371/imbearr"}, "edited": false, "score": 2, "creation_date": 1468386553, "post_id": 38342920, "comment_id": 64099855, "body": "I usually use masks: <code>if ((chr &amp; mask) == cond)</code> - it allows to select any ranges: all odd symbols (<code>mask = 0x01; cond = 0x01</code>), all symbols from fist line of <a href=\"http://ascii-table.com/index.php\" rel=\"nofollow noreferrer\">ASCII table</a> (<code>mask = 0x0F; cond = 0x00</code>). By combining this checks I can implement any filter."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 3, "creation_date": 1468387444, "post_id": 38342920, "comment_id": 64100144, "body": "if you want <code>! to @</code> then why don&#39;t use <code>&#39;!&#39;</code> and <code>&#39;@&#39;</code> instead of 32 and 64? Much more readable and precise"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 2, "creation_date": 1468388249, "post_id": 38342920, "comment_id": 64100441, "body": "I&#39;d rewrite your code as:  <code>((25 &lt; i &amp;&amp; i &lt; 50) || (100 &lt; i &amp;&amp; i &lt; 200))</code>. Consistently writing this kind of logic in an intuitively understandable way will reduce your cognitive load and make the code easier to read."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1468391759, "post_id": 38342920, "comment_id": 64101925, "body": "about ` inside code: <a href=\"http://meta.stackexchange.com/questions/82718/how-do-i-escape-a-backtick-in-markdown\" title=\"how do i escape a backtick in markdown\">meta.stackexchange.com/questions/82718/&hellip;</a>"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1468395520, "post_id": 38342920, "comment_id": 64104225, "body": "Does performance matters, or only readability?"}, {"owner": {"reputation": 109, "user_id": 3824847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ha199.jpg?s=128&g=1", "display_name": "Kagamin", "link": "https://stackoverflow.com/users/3824847/kagamin"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1468396961, "post_id": 38342920, "comment_id": 64105078, "body": "@MatthieuM. Actually this was not for work/business purpose, but I had some consideration of performance because it was about keyboard input automata for Korean Hangul with ascii characters. I believe using new header would take similar or more cost to do the same thing as code in the question, but since machines these days are too fast so I couldn&#39;t detect much difference. (Or do the selected answer actually reduces cost?)"}, {"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "edited": false, "score": 0, "creation_date": 1468424040, "post_id": 38342920, "comment_id": 64124286, "body": "Is it okay if you receive answers in C++?"}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1468388862, "post_id": 38343105, "comment_id": 64100679, "body": "Ah, there&#39;s the guaranteed downvote you get when talking about macros!"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468390482, "post_id": 38343105, "comment_id": 64101373, "body": "I think this is an example of macro abuse in C. Avoid it if you can. Here is a good modern approach: <a href=\"http://stackoverflow.com/a/38343152/4082723\">stackoverflow.com/a/38343152/4082723</a>"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468391052, "post_id": 38343105, "comment_id": 64101607, "body": "@2501: IMO that approach is way worse for the reasons I outlined in the comment above."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468391261, "post_id": 38343105, "comment_id": 64101696, "body": "Your macro will blow up spectacularly when, for example: <code>B(i++,2), B(i&amp;1,2) , B(i?2:3,1)</code>, etc..  This is so unsafe it&#39;s not even funny. This is macro abuse by definition: <code>#define B(l, h) ((l)&lt;i) &amp;&amp; (i&lt;(h)) ||</code> Code like this: <code>if(B(25,50) B(100,200) B(220, 240) 0)</code> will not pass code review in any serious firm."}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 0, "creation_date": 1468413473, "post_id": 38343105, "comment_id": 64116166, "body": "this is disgusting, never do this"}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 0, "last_activity_date": 1468389807, "last_edit_date": 1468389807, "creation_date": 1468386683, "answer_id": 38343105, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character/38343105#38343105", "title": "Is there a better way to determine multiple ranges of character?", "body": "<p>You can hide the duplication of <code>l&lt;x &amp;&amp; x&lt;h</code> in a macro or an inline function, but I found that it's rarely worth it - it's not as readable as Python <code>l&lt;x&lt;h</code> syntax, and quickly gets out of hand once you start to have macros for all the inclusive boundaries possibilities. Either you end up with a ridiculously long naming convention (<code>between_inc_inc</code>, <code>between_inc_exc</code>, ... which kinda defeats factoring out the check in first place) or you leave the reader wondering about your range checks (\"<code>between(i, 50, 100)</code>... is it a <code>[,)</code> range? a <code>[,]</code> one? (checks the code) nope it's a <code>(,)</code>\"), which is terrible if you are hunting off-by-one errors. </p>\n\n<p>OTOH, I'm known to abuse \"single letter macros\", which I define exactly where and how they are needed, and are undefined immediately after. Although they may look ugly, the point is that they are <em>extremely</em> local and do exactly what needs done, so there's no time wasted in looking them up, there are no cryptic parameters and they can factor out the bulk of repeated computation. </p>\n\n<p>In your case, if the list is significantly long I may do</p>\n\n<pre><code>#define B(l, h) ((l)&lt;i) &amp;&amp; (i&lt;(h)) ||\n\nif(B(25,50) B(100,200) B(220, 240) 0)\n... \n#undef B\n</code></pre>\n\n<p>(never do this in a header!) </p>\n\n<p>What instead is a good boost in readability is to use character literals instead of ASCII numbers: for example, if you want the a-z range, do <code>'a'&lt;=i &amp;&amp; i&lt;='z'</code>. </p>\n\n<p>You seem to want to exclude alphabetical and non printable characters: you can do that with </p>\n\n<pre><code>if((' '&lt;=i &amp;&amp; i&lt;'A') || (i&gt;'Z' &amp;&amp; i&lt;'a') || ('z'&lt;i &amp;&amp; i&lt;=126))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 3, "creation_date": 1468401382, "post_id": 38343110, "comment_id": 64107924, "body": "Booleans are plain values, not just things to be used if <code>if</code> guards. One can directly <code>return (num &gt; begin &amp;&amp; num &lt; end)</code>."}], "tags": [], "owner": {"reputation": 262, "user_id": 6549517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163a12886f415115c16d28ae8d9acd71?s=128&d=identicon&r=PG&f=1", "display_name": "hexiecs", "link": "https://stackoverflow.com/users/6549517/hexiecs"}, "is_accepted": false, "score": 0, "last_activity_date": 1468386704, "creation_date": 1468386704, "answer_id": 38343110, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character/38343110#38343110", "title": "Is there a better way to determine multiple ranges of character?", "body": "<p>You can write a function like:  </p>\n\n<pre><code>bool withinscope(int num, int begin, int end){\n    if(num &gt; begin &amp;&amp; num &lt; end)\n        return true;\n    return false;\n}\n</code></pre>\n\n<p>Then you can use this function and keep the code clean and simple.</p>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 3824847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ha199.jpg?s=128&g=1", "display_name": "Kagamin", "link": "https://stackoverflow.com/users/3824847/kagamin"}, "edited": false, "score": 0, "creation_date": 1468387318, "post_id": 38343150, "comment_id": 64100108, "body": "Hoped I could find the way to do that in other multiple-range required situation, but this is neat enough for now."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 6, "creation_date": 1468387805, "post_id": 38343150, "comment_id": 64100262, "body": "Careful, these are locale-dependent, which may or may not be what is actually needed (if I&#39;m parsing a programming language, for example, typically I don&#39;t want it to be locale-dependent). OTOH they work as expected in the &quot;C&quot; locale, which is the only one that you should be using anyway."}], "tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": true, "score": 14, "last_activity_date": 1468386924, "creation_date": 1468386924, "answer_id": 38343150, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character/38343150#38343150", "title": "Is there a better way to determine multiple ranges of character?", "body": "<p>For your specific case, the <a href=\"http://en.cppreference.com/w/Template:c/string/character_classes\"><code>&lt;ctype.h&gt;</code> collection of functions</a> would do </p>\n\n<pre><code>if (isprint(i) &amp;&amp; !isalpha(i))\n</code></pre>\n\n<p>Added bonus: It even works on non-ascii systems.</p>\n"}, {"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1468389295, "post_id": 38343152, "comment_id": 64100849, "body": "Honestly, besides being probably way less efficient, it doesn&#39;t look any more readable at all; most importantly, there&#39;s no indication whatsoever about whether the ranges are <code>[,]</code> (as usually are in common parlance), <code>[,)</code> (as usually are in programming) or <code>(,)</code> (which are rarely used, but are what is actually needed in this case). That&#39;s why I advocate for keeping this kind of logic either extremely explicit or extremely local - hunting off-by-ones is even more difficult if you need to continuously jump around in utility functions."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1468390894, "post_id": 38343152, "comment_id": 64101548, "body": "@MatteoItalia Debugging functions is easier than debugging macros. They are also unsafe: MACRO( i++ , j ), etc... Premature optimization is what...?  The code is also very readable and the intent is clear. The section about inclusive/exclusive ranges is a strawman argument. If it <i>were relevant</i> at all, you would simply add the suffix inclusive/exlusive to the function name."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468392156, "post_id": 38343152, "comment_id": 64102129, "body": "@2501: you are not getting it; the point is very simple: if you are not striving for generality <i>and</i> you want terseness, you can use the macro I wrote; it has all the kind of limitations <i>exactly</i> because it&#39;s extremely ad-hoc, but it&#39;s extremely concise and serves exactly that purpose. The <code>i++</code> argument applies to any macro, and any half decent C programmer knows better - especially since the fact that it&#39;s a macro and that its argument is evaluated multiple times is <i>extremely clear</i> because the definition is right there. If instead I&#39;m writing a function like yours, it&#39;s because ..."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1468392372, "post_id": 38343152, "comment_id": 64102266, "body": "I&#39;m going to leave these two things here: <a href=\"http://stackoverflow.com/q/652788/4082723\">stackoverflow.com/q/652788/4082723</a> and <code>#define B(l, h) ((l)&lt;i) &amp;&amp; (i&lt;(h)) || </code> ... <code>if(B(25,50) B(100,200) B(220, 240) 0)</code> and let the reader decide which is the worst."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468392385, "post_id": 38343152, "comment_id": 64102272, "body": "@2501 I&#39;m striving for generality - that is going to stay in some kind of shared header for me to use in future similar computations. Now, I refuse to believe that in your program you&#39;ll check only against <code>(,)</code> ranges (if anything, the most checked-against range type is <code>[,)</code>). So, you&#39;ll want to have <code>in_ranges_inc_inc</code>, <code>in_ranges_inc_exc</code>, <code>in_ranges_exc_exc</code> and <code>in_ranges_exc_inc</code> or something like that. But now, what are you gaining against typing out the expression in full? You lost in flexibility (the ranges that OP wants to check are actually more easily written with some ..."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1468392491, "post_id": 38343152, "comment_id": 64102335, "body": "@MatteoItalia As I have said this is a strawman argument, you macro suffers from the same problem."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1468392580, "post_id": 38343152, "comment_id": 64102376, "body": "@2501: mixed ranges), and you replaced familiar syntax (regular C expressions) with stuff that another programmer has to look up. To wrap it up: IMO this is just a false generalization that doesn&#39;t yield anything useful, it only adds clutter. If you do want to keep it extremely terse use an ad-hoc macro that does exactly what you need <i>here</i> without hoping to reuse it, otherwise just type out the expression in full (which is what I actually do at the bottom of my answer)."}], "tags": [], "owner": {"reputation": 7393, "user_id": 1690777, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/18ef5bab4c70735313d86c7240e4abed?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1690777/sergey"}, "is_accepted": false, "score": 2, "last_activity_date": 1468388964, "last_edit_date": 1468388964, "creation_date": 1468386932, "answer_id": 38343152, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character/38343152#38343152", "title": "Is there a better way to determine multiple ranges of character?", "body": "<p>You can write a function that checks if the value belongs to any of given ranges:</p>\n\n<pre><code>struct Range {\n        int min;\n        int max;\n};\n\nbool in_ranges(int character, struct Range *ranges, size_t num_ranges) {\n        for(size_t i = 0; i &lt; num_ranges; ++i) {\n                if(ranges[i].min &lt; character &amp;&amp; character &lt; ranges[i].max)\n                        return true;\n        }\n        return false;\n}\n\nint main() {\n        struct Range rngs[] = {{25,50}, {100,200}};\n        bool at_sign_si_in_range = in_ranges('@', rngs, 2);\n        return 0;\n}\n</code></pre>\n\n<p>It makes editing ranges much simpler and improves readability.\nAlso, if you continue to write all ranges in conditional clause as in your example, consider checking ranges like</p>\n\n<pre><code>lower_bound &lt; value &amp;&amp; value &lt; upper_bound\n</code></pre>\n\n<p>It looks like mathematical notation (<code>x &lt; a &lt; y</code>) and also seems easier to read.</p>\n"}, {"comments": [{"owner": {"reputation": 8040, "user_id": 517503, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e5d55dcf2495618e8b9f8778f8353ee0?s=128&d=identicon&r=PG", "display_name": "Guilherme Bernal", "link": "https://stackoverflow.com/users/517503/guilherme-bernal"}, "edited": false, "score": 0, "creation_date": 1468402777, "post_id": 38344108, "comment_id": 64108906, "body": "Should increment the loop 2 by 2. Or use std::pairs."}, {"owner": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "edited": false, "score": 0, "creation_date": 1468407979, "post_id": 38344108, "comment_id": 64112261, "body": "Using an explicit pair type would be better coding practice, since it makes explicit that these numbers go together and makes it harder to erroneously access numbers from separate pairs together."}, {"owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "reply_to_user": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "edited": false, "score": 0, "creation_date": 1468408254, "post_id": 38344108, "comment_id": 64112472, "body": "@zstewart sincerly this is what I thougt too, but i didn&#39;t took time to update this answer. Indeed making a type which explicitly take these numbers as pair is a net superior practice!"}, {"owner": {"reputation": 3392, "user_id": 4532996, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/uXkl2.png?s=128&g=1", "display_name": "cat", "link": "https://stackoverflow.com/users/4532996/cat"}, "edited": false, "score": 1, "creation_date": 1468413513, "post_id": 38344108, "comment_id": 64116190, "body": "Question asked about C not C++, -1"}], "tags": [], "owner": {"reputation": 4713, "user_id": 6357360, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aed7990245e27bcf868d514f3ad014ff?s=128&d=identicon&r=PG&f=1", "display_name": "meJustAndrew", "link": "https://stackoverflow.com/users/6357360/mejustandrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1468404538, "last_edit_date": 1468404538, "creation_date": 1468391267, "answer_id": 38344108, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character/38344108#38344108", "title": "Is there a better way to determine multiple ranges of character?", "body": "<pre><code>class RangeCollection\n{\n    std::vector&lt;int&gt; ranges;\npublic:\n    void AddRange(int lowerBound, int upperBound)\n    {\n        vector.push_back(lowerBound);\n        vector.push_back(upperBound);\n    }\n\n    bool IsInRange(int num)\n    {\n        for(int i=0; i&lt;ranges.size()-1; i+=2)\n        {\n            if(num&gt;ranges[i] &amp;&amp; num&lt;ranges[i+1])return true;\n        }\n     return false;\n    }\n};\n</code></pre>\n\n<p>You can call AddRange to add as many ranges as you want, then you can check if a number is in range.</p>\n\n<pre><code>RangeCollection rc;\nrc.AddRange(20,25);\nrc.IsInRange(22);//returns true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 5552471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qcxKbLah184/AAAAAAAAAAI/AAAAAAAABkI/_l42EYE29Vw/photo.jpg?sz=128", "display_name": "Simon Spero", "link": "https://stackoverflow.com/users/5552471/simon-spero"}, "is_accepted": false, "score": 1, "last_activity_date": 1468417643, "creation_date": 1468417643, "answer_id": 38353557, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character/38353557#38353557", "title": "Is there a better way to determine multiple ranges of character?", "body": "<p>If you are using single byte characters, you may be able to get better performance using an array of flags, setting  either individual bits or whole bytes to indicate character values that are in one of the ranges. </p>\n\n<p>If you are writing  code for an Intel processor that supports the SSE 4.2 instructions, you might want consider using  PCMPISTRI or similar, which can compare up to 16 single byte characters against up to 8 different ranges in a single instruction.  </p>\n"}, {"tags": [], "owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "is_accepted": false, "score": 1, "last_activity_date": 1468427741, "creation_date": 1468427741, "answer_id": 38357231, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character/38357231#38357231", "title": "Is there a better way to determine multiple ranges of character?", "body": "<p>My answer would be \"it depends\". :)</p>\n\n<p>If <code>isalpha()</code> and friends from <code>ctype.h</code> do what you want, then absolutely use them. </p>\n\n<p>But if not...</p>\n\n<p>If you only had two ranges, as in your example snippet, I don't think it looks too messy. If there are more, maybe put the range test in an (inline) function to reduce the number of booleans visible at a time:</p>\n\n<pre><code>if (in_range(val, a1, b1) || in_range(val, a2, b2) || ... )\n</code></pre>\n\n<p>(Or name it <code>B(n,a,b)</code> if you feel the need to save screen estate. )</p>\n\n<p>If the ranges might change in run-time, or there are lots of them, put the limits in a <code>struct</code> and loop through an array of those. If there truly are many, sort the list and do something smart with it, like a binary search over the lower limits (or whatever). But for a small number, I wouldn't bother.</p>\n\n<p>If the total range of allowed  values is small (like unsigned chars with values 0..255), but the number of separate \"ranges\" is large (\"all those with prime values\"), then make a table (bitmap) of the values, and test against that. Generate the table any way you like. (<code>isalpha()</code> is probably implemented like this)</p>\n\n<pre><code>unsigned char is_prime[256] = {0, 0, 1, 1, 0, 1, 0, 1, \n    ...};\n\nif (is_prime[val]) { ...\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 3824847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ha199.jpg?s=128&g=1", "display_name": "Kagamin", "link": "https://stackoverflow.com/users/3824847/kagamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 952, "favorite_count": 0, "accepted_answer_id": 38343150, "answer_count": 7, "score": 8, "last_activity_date": 1468427741, "creation_date": 1468385724, "last_edit_date": 1468410408, "question_id": 38342920, "link": "https://stackoverflow.com/questions/38342920/is-there-a-better-way-to-determine-multiple-ranges-of-character", "title": "Is there a better way to determine multiple ranges of character?", "body": "<p>I'm currently writing code in C, which selects symbols and numbers from whole ASCII-available characters.\nAs a beginner of programmer, I usually did</p>\n\n<pre><code>if ((i &gt; 25 &amp;&amp; i &lt; 50) || (i &gt; 100 &amp;&amp; i &lt; 200)) { contents } \n</code></pre>\n\n<p>for the variable <code>i</code> being between 25~50, 100~200 (exclusive) to fit the condition.</p>\n\n<p>If I want to set multiple ranges like 32~64(<code>! to @</code>) and 91~96(<code>[ to `</code>) and 123~126(<code>{ to ~</code>) then would there be any better (meaning shorter or simpler code) or should I stick with this method, keep adding each range as in the code above?</p>\n"}, {"tags": ["c", "assembly", "linker", "elf"], "comments": [{"owner": {"reputation": 12328, "user_id": 34426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3fyBN.jpg?s=128&g=1", "display_name": "Dan Fego", "link": "https://stackoverflow.com/users/34426/dan-fego"}, "edited": false, "score": 1, "creation_date": 1468383412, "post_id": 38342595, "comment_id": 64098896, "body": "&quot;Also this location is far from what foo or bar&#39;s address should be&quot; -- what &quot;should&quot; they be?"}, {"owner": {"reputation": 2418, "user_id": 1232832, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c492983af89b49d44250c79579a2641?s=128&d=identicon&r=PG", "display_name": "Shou Ya", "link": "https://stackoverflow.com/users/1232832/shou-ya"}, "reply_to_user": {"reputation": 12328, "user_id": 34426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3fyBN.jpg?s=128&g=1", "display_name": "Dan Fego", "link": "https://stackoverflow.com/users/34426/dan-fego"}, "edited": false, "score": 0, "creation_date": 1468383540, "post_id": 38342595, "comment_id": 64098940, "body": "@DanFego: I met this problem when compiling with -ffree-standing option, so I could know the exact location of a function."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1468383773, "post_id": 38342595, "comment_id": 64099019, "body": "Nor sure why you aren&#39;t just doing something like <code>extern void foo(void);</code> and <code>extern void bar(void)</code> ."}], "answers": [{"tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": true, "score": 2, "last_activity_date": 1468383823, "creation_date": 1468383823, "answer_id": 38342652, "question_id": 38342595, "link": "https://stackoverflow.com/questions/38342595/error-declaring-external-function-with-extern-pointer/38342652#38342652", "title": "error declaring external function with extern pointer", "body": "<p>You're not printing the address that the symbol <code>foo</code> and <code>bar</code> refer to, but the value at the address of <code>foo</code> and <code>bar</code>.</p>\n\n<p>To print the address of <code>foo</code> and <code>bar</code> you need to do something like this:</p>\n\n<pre><code>extern void *foo;\nextern void *bar;\n\nvoid main() {\n  printf(\"foo: %p, bar: %p\\n\", &amp;foo, &amp;bar);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 6566952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff5ab711763553a6324b481f72d1cd?s=128&d=identicon&r=PG&f=1", "display_name": "sneha maganahalli", "link": "https://stackoverflow.com/users/6566952/sneha-maganahalli"}, "is_accepted": false, "score": 0, "last_activity_date": 1468398420, "last_edit_date": 1468398420, "creation_date": 1468385475, "answer_id": 38342875, "question_id": 38342595, "link": "https://stackoverflow.com/questions/38342595/error-declaring-external-function-with-extern-pointer/38342875#38342875", "title": "error declaring external function with extern pointer", "body": "<p>First thing: the declaration should become </p>\n\n<pre><code>void foo(void);\nvoid bar(void);\n</code></pre>\n\n<p>Functions are already extern by default. so you don't need to add extern while declaring in another file. and <code>extern void *foo</code> means that you have declared the pointer foo in the other file and using it in this file. but you haven't declared a pointer in the other file as <code>void *foo</code>.</p>\n\n<p>And about getting the same address: 2 functions or variables or anything can have a same virtual address but they will be mapped in the different regions of memory(different physical address). wen you print from %p, you get the virtual address and not the physical address.</p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 2, "last_activity_date": 1468398313, "last_edit_date": 1468398313, "creation_date": 1468397925, "answer_id": 38346200, "question_id": 38342595, "link": "https://stackoverflow.com/questions/38342595/error-declaring-external-function-with-extern-pointer/38346200#38346200", "title": "error declaring external function with extern pointer", "body": "<p>Your code contains <em>undefined behaviour</em> because you declare <code>foo</code> and <code>bar</code> as identifiers of different type in different translation units. This is a violation of ISO 9899:2011 \u00a76.2.7 \u00b62:</p>\n\n<blockquote>\n  <p>All declarations that refer to the same object or function shall have compatible type;\n  otherwise, the behavior is undefined.</p>\n</blockquote>\n\n<p>What happens is that when you access a variable in static storage, it is dereferenced to get the value stored at the symbol (which is the content of the global variable). The symbol itself is only the address of the static variable. To get the value of the symbol, you need to use the <code>&amp;</code> operator to take the address of the variable, which is the value of the symbol.</p>\n\n<p>\u0139ikely being the source of your confusion, this isn't needed for functions, as an <code>&amp;</code> is automatically interspersed where needed, cf. ISO 9899:2011 \u00a76.3.2.1 \u00b64:</p>\n\n<blockquote>\n  <p>A <em>function designator</em> is an expression that has function type. Except when it is the\n  operand of the <code>sizeof</code> operator, the <code>_Alignof</code> operator,<sup>65)</sup> or the unary <code>&amp;</code> operator, a function designator with type \u201cfunction returning <em>type</em>\u201d is converted to an expression that has type \u201cpointer to function returning type\u201d.</p>\n  \n  <p><sup>65)</sup>&emsp;Because this conversion does not occur, the operand of the <code>sizeof</code> or <code>_Alignof</code> operator remains a function designator and violates the constraints in 6.5.3.4.</p>\n</blockquote>\n\n<p>I hope this clears up your questions.</p>\n"}], "owner": {"reputation": 2418, "user_id": 1232832, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c492983af89b49d44250c79579a2641?s=128&d=identicon&r=PG", "display_name": "Shou Ya", "link": "https://stackoverflow.com/users/1232832/shou-ya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38342652, "answer_count": 3, "score": -1, "last_activity_date": 1482729626, "creation_date": 1468383328, "last_edit_date": 1482729626, "question_id": 38342595, "link": "https://stackoverflow.com/questions/38342595/error-declaring-external-function-with-extern-pointer", "title": "error declaring external function with extern pointer", "body": "<p>In my understanding, a symbol in an ELF object file is just a name to a memory address. In other words, given a symbol name, a linker should always refer to the same address no matter what types they are declared in C.</p>\n\n<p>I figured out it wasn't the case. See the example below:</p>\n\n<pre><code>/* a.c */\nextern void *foo;\nextern void *bar;\nvoid main() {\n  printf(\"foo: %p, bar: %p\\n\", foo, bar)\n}\n\n/* b.c */\nvoid foo(void) {\n}\nvoid bar(void) {\n}\n</code></pre>\n\n<p>The output of above program says <code>foo</code> and <code>bar</code> point to the same location (1). Also this location is far from what <code>foo</code> or <code>bar</code>'s address should be. Note (1) indicates it can't be not a conversion mistake</p>\n\n<p>I tried modifying the type of <code>foo</code> and <code>bar</code> into function pointers (e.g. <code>extern void (*foo)(void)</code>), the output is still the same.</p>\n\n<p>It works, of course, with the correct declaration <code>extern void foo(void)</code>.</p>\n\n<p>What's mistake I have in my understanding? Thanks. (I'm trying to correct my understanding, not just to make things work)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 5, "creation_date": 1468382841, "post_id": 38342460, "comment_id": 64098760, "body": "We don&#39;t need all that background info as it is not relevant to the problem. What we do need is a clear question. &quot;can any one explain to me where I messed up &quot;. That&#39;s not how it works. You tell us how the program isn&#39;t working as you expect and we help you identify the problem."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1468382994, "post_id": 38342460, "comment_id": 64098794, "body": "<code>scanf(&quot;%.03d&quot;, &amp;gross_sales);</code>. That&#39;s one of your problems. <code>%d</code> is for <code>int</code> not <code>double</code>. Use <code>%lf</code> for <code>double</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1468383127, "post_id": 38342460, "comment_id": 64098835, "body": "And not very far to the next problem: <code>printf(&quot;Your salary for this week: %.03d\\n&quot;, &amp;salary);</code>. Firstly, <code>salary</code> is an uninitalised variable so printing it will give random garbage. Secondly, <code>printf</code> does not take a pointer to the values so should be just <code>salary</code> not <code>&amp;salary</code>."}, {"owner": {"reputation": 1, "user_id": 6582365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0fbd9b007df91174a268061d67c2d2?s=128&d=identicon&r=PG&f=1", "display_name": "S.say", "link": "https://stackoverflow.com/users/6582365/s-say"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1468437748, "post_id": 38342460, "comment_id": 64132579, "body": "You solved my problem by pointing out the &#39;random garbage&#39;, sorry for not clarifying my problem earlier as I was sure that it was a number of things."}], "answers": [{"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1468384216, "last_edit_date": 1468384216, "creation_date": 1468383229, "answer_id": 38342579, "question_id": 38342460, "link": "https://stackoverflow.com/questions/38342460/c-salary-commissions/38342579#38342579", "title": "C, salary commissions", "body": "<p>In</p>\n\n<pre><code>scanf(\"%.03d\", &amp;gross_sales); // gross_sales is double\n</code></pre>\n\n<p><code>d</code> specifier is meant for integers. It should be <code>lf</code> for <code>double</code></p>\n\n<p>For printing the content of a variable you need not prefix the <code>address of</code> operator, so</p>\n\n<pre><code>printf(\"Your salary for this week: %.03d\\n\", &amp;salary);\n</code></pre>\n\n<p>is wrong and it should have been</p>\n\n<pre><code>printf(\"Your salary for this week: %.03lf\\n\", salary);\n</code></pre>\n\n<p>But then, you might have realized by now that there is no need to print the salary at this point because you haven't read the variable yet. In fact the standard (6.7.9->10) says :</p>\n\n<blockquote>\n  <p>If an object that has automatic storage duration is not initialized\n  explicitly, its value is indeterminate</p>\n</blockquote>\n\n<p><code>scanf</code> at the end requires same modification as mentioned in the first point.</p>\n"}], "owner": {"reputation": 1, "user_id": 6582365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0fbd9b007df91174a268061d67c2d2?s=128&d=identicon&r=PG&f=1", "display_name": "S.say", "link": "https://stackoverflow.com/users/6582365/s-say"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1538180008, "creation_date": 1468382421, "last_edit_date": 1468385448, "question_id": 38342460, "link": "https://stackoverflow.com/questions/38342460/c-salary-commissions", "title": "C, salary commissions", "body": "<p>Yes, this is homework:</p>\n\n<blockquote>\n  <p>One chemical company pays its sales people on a commission basis.  The\n  sales people receive $200/ week plus 9% of their gross sales for that\n  week.  For example, a sales person who sells $5,000.00  worth of\n  chemicals will receive $200 plus the 9% of $5,000 for a total of $650.</p>\n  \n  <p>Develop a program that will input a sales person gross sales an will\n  calculate and display that person's earnings.</p>\n  \n  <p>Example of an output:</p>\n\n<pre><code>Salary is : $650.00\n</code></pre>\n  \n  <p>Be sure that in your program you consider the following:</p>\n  \n  <p>Your program includes:</p>\n  \n  <ol>\n  <li><p>proper case, variable names(meaningful and use conventions)</p></li>\n  <li><p>proper organization, indentation, white space, and comments</p></li>\n  <li><p>Has the right inputs and outputs, computes correct results, is efficient</p></li>\n  </ol>\n</blockquote>\n\n<p>My artwork;</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n\n    const double commission = 0.09;\n    double gross_sales, salary;\n\n    printf(\"Enter amount of gross sales\\n\");\n    scanf(\"%.03d\", &amp;gross_sales);\n\n    printf(\"Your salary for this week: %.03d\\n\", &amp;salary);\n    scanf(\"salary = gross_sales*commission + 200 %.03d\", &amp;salary);\n\n    system(\"pause\");   \n}\n</code></pre>\n\n<p>I'm not sure what I need to do \u2014 can you help?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1468382532, "post_id": 38342436, "comment_id": 64098684, "body": "Never name a variable <code>tempother</code>.  Or <code>e</code> when it is neither an exception nor the constant.  Name things after what they are, like &quot;row_index&quot; or &quot;inner_index&quot; or &quot;payroll_date&quot; or whatever.  Not e,d,x,k,j,z."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1468382564, "post_id": 38342436, "comment_id": 64098687, "body": "Another solution is to modify the ascending print loop: <code>printf(&quot;%d\\n&quot;, ascd[c]);</code> --&gt; <code>printf(&quot;%d\\n&quot;, ascd[x-c-1]);</code>"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1468382651, "post_id": 38342436, "comment_id": 64098708, "body": "If you really want to make a copy: <code>int descending[x]; memcpy(descending, ascd, sizeof(descending));</code>"}, {"owner": {"reputation": 33, "user_id": 6539370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iw1Sp0Mg98o/AAAAAAAAAAI/AAAAAAAAAVk/eXGiEmNks1s/photo.jpg?sz=128", "display_name": "ivyraveneve", "link": "https://stackoverflow.com/users/6539370/ivyraveneve"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1468383477, "post_id": 38342436, "comment_id": 64098921, "body": "@kaylum it prints the descending order is0 if i used ascd[x-c-1]. Why is that?"}, {"owner": {"reputation": 33, "user_id": 6539370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iw1Sp0Mg98o/AAAAAAAAAAI/AAAAAAAAAVk/eXGiEmNks1s/photo.jpg?sz=128", "display_name": "ivyraveneve", "link": "https://stackoverflow.com/users/6539370/ivyraveneve"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1468383614, "post_id": 38342436, "comment_id": 64098965, "body": "@kaylum Okay wait it works now. Thanks! But can you explain the logic behing x-c-1 please?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1468383646, "post_id": 38342436, "comment_id": 64098973, "body": "@ivyraveneve Just a note, as your arrays become larger, <code>qsort</code> is <i>orders of magnitude</i> faster than bubble sort, insertion sort, etc... It is well worth making friends with writing the comparison functions."}, {"owner": {"reputation": 33, "user_id": 6539370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iw1Sp0Mg98o/AAAAAAAAAAI/AAAAAAAAAVk/eXGiEmNks1s/photo.jpg?sz=128", "display_name": "ivyraveneve", "link": "https://stackoverflow.com/users/6539370/ivyraveneve"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1468383921, "post_id": 38342436, "comment_id": 64099056, "body": "@DavidC.Rankin Thanks! I&#39;ll be sure to read up on qsort"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1468390307, "post_id": 38342436, "comment_id": 64101281, "body": "I&#39;ll do you one better, I&#39;ll add an example to my answer."}], "answers": [{"tags": [], "owner": {"reputation": 262, "user_id": 6549517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163a12886f415115c16d28ae8d9acd71?s=128&d=identicon&r=PG&f=1", "display_name": "hexiecs", "link": "https://stackoverflow.com/users/6549517/hexiecs"}, "is_accepted": false, "score": 0, "last_activity_date": 1468383272, "creation_date": 1468383272, "answer_id": 38342580, "question_id": 38342436, "link": "https://stackoverflow.com/questions/38342436/how-to-make-a-copy-of-an-array-in-this-code-and-use-it/38342580#38342580", "title": "How to make a copy of an array in this code and use it", "body": "<p>You print the final array twice, you can have your ascending array output by printing the values of the array right after you have done the ascending operation. </p>\n"}, {"tags": [], "owner": {"reputation": 1130, "user_id": 6303768, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/gBTub.jpg?s=128&g=1", "display_name": "dulaj sanjaya", "link": "https://stackoverflow.com/users/6303768/dulaj-sanjaya"}, "is_accepted": false, "score": 0, "last_activity_date": 1468383894, "creation_date": 1468383894, "answer_id": 38342658, "question_id": 38342436, "link": "https://stackoverflow.com/questions/38342436/how-to-make-a-copy-of-an-array-in-this-code-and-use-it/38342658#38342658", "title": "How to make a copy of an array in this code and use it", "body": "<p>Create an another array to store descending items. You can reverse the ascending array to create the descending array. Try this code.\n    #include \n    #include \n    #include \n    #include \n    int main (){</p>\n\n<pre><code>int x;\nprintf(\"Enter the size of your array\\n\");//User is entering number of elements\nscanf(\"%d\", &amp;x);\nint ascd[x]; //Array\nint desc[x];\nint c;\nint d;\nint e;\nint kk = 0;\nint temp;\nint tempother;\nint turtle;\nint z=0;\n\nfor(c = 0; c&lt;x; c++){//Randomly generating elements\n    srand(time(0));\n    ascd[kk] = (rand() %100) + 1;\n}\n\nfor(c = 0; c&lt;x; c++){ //Ascending order\n    for(d = 0; d&lt;(x-c-1); d++){\n        if(ascd[d] &gt; ascd[d+1]){\n                temp = ascd[d];\n                ascd[d] = ascd[d+1];\n                ascd[d+1] = temp;\n                }\n\n                            }\n\n               }\n\n\n\n\nfor(turtle = x-1; turtle&gt;=0; turtle--){//Descending order\n        desc[z]=ascd[turtle];\n        z++;\n\n\n    }\n\n\n\n\nprintf(\"The ascending order is\\n\\n\");\n         for(c = 0; c&lt;x; c++){\n     printf(\"%d\\n\", ascd[c]);\n     }\n\n\nprintf(\"\\n\\nThe descending order is\\n\\n\");\n         for(turtle = 0; turtle&lt;x; turtle++){\n         printf(\"%d\\n\", desc[turtle]);\n         }\n\n\n\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 3, "last_activity_date": 1468392229, "last_edit_date": 1468392229, "creation_date": 1468385578, "answer_id": 38342893, "question_id": 38342436, "link": "https://stackoverflow.com/questions/38342436/how-to-make-a-copy-of-an-array-in-this-code-and-use-it/38342893#38342893", "title": "How to make a copy of an array in this code and use it", "body": "<p>There are a number of additional issues you need to consider. First always, <em>always</em>, validate user input. If nothing else, with the <code>scanf</code> family of functions, make sure the expected number of conversions were successfully performed. e.g.</p>\n\n<pre><code>int x = 0;\nprintf (\"\\n enter the number of elements for your array: \");\nif (scanf (\"%d\", &amp;x) != 1) {    /* always validate user input */\n    fprintf (stderr, \"error: invalid input, integer required.\\n\");\n    return 1;\n}\nint ascd[x], desc[x];\n</code></pre>\n\n<p>Next, you only need to seed the random number generator <em>once</em>. Move <code>srand (time (NULL));</code> out of the loop. </p>\n\n<p>While not a requirement, it is good practice to initialize your VLA's to all zero (or some number, since you cannot provide an initializer) to eliminate the chance of an inadvertent read from an uninitialized value when iterating over the array (you can consider your filling in this case an initialization, making the <code>memset</code> optional here, but you won't immediately loop and fill in all cases. Something as simple as the following is sufficient if you are not immediately filling the array, e.g.</p>\n\n<pre><code>memset (ascd, 0, x * sizeof *ascd); /* good idea to zero your VLA */\n</code></pre>\n\n<p>After filling your array, a simple <code>memcpy</code> will duplicate the array if you wish to preserve both ascending and descending sorts, e.g.</p>\n\n<pre><code>for (int i = 0; i &lt; x; i++)            /* x random values 1 - 100 */\n    ascd[i] = (rand () % 100) + 1;\n\nmemcpy (desc, ascd, x * sizeof *ascd);       /* copy ascd to desc */\n</code></pre>\n\n<p>The remainder is just a bit of cleanup. Resist the urge to create a (<em>variable next</em>) for every value in your code. That quickly becomes unreadable. While I prefer the C89 declarations, the C99/C11 declarations inside the <code>for</code> block are convenient, e.g.:</p>\n\n<pre><code>for (int i = 0; i &lt; x; i++)                    /* ascending order */\n    for (int j = 0; j &lt; (x - i - 1); j++)\n        if (ascd[j] &gt; ascd[j + 1]) {\n            int temp = ascd[j];\n            ascd[j] = ascd[j + 1];\n            ascd[j + 1] = temp;\n        }\n</code></pre>\n\n<p>Putting all the pieces together, and noting that <code>main()</code> is type <code>int</code> and therefore will <code>return</code> a value, you could tidy things up as follows. Your style is completely up to you, but the goal should be readability. e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\nint main (void) {\n\n    int x = 0;\n    printf (\"\\n enter the number of elements for your array: \");\n    if (scanf (\"%d\", &amp;x) != 1) {    /* always validate user input */\n        fprintf (stderr, \"error: invalid input, integer required.\\n\");\n        return 1;\n    }\n    int ascd[x], desc[x];\n\n    srand (time (NULL));                /* you only need do this once */\n    memset (ascd, 0, x * sizeof *ascd); /* good idea to zero your VLA */\n\n    for (int i = 0; i &lt; x; i++)            /* x random values 1 - 100 */\n        ascd[i] = (rand () % 100) + 1;\n\n    memcpy (desc, ascd, x * sizeof *ascd);       /* copy ascd to desc */\n\n    for (int i = 0; i &lt; x; i++)                    /* ascending order */\n        for (int j = 0; j &lt; (x - i - 1); j++)\n            if (ascd[j] &gt; ascd[j + 1]) {\n                int temp = ascd[j];\n                ascd[j] = ascd[j + 1];\n                ascd[j + 1] = temp;\n            }\n\n    for (int i = 0; i &lt; x; i++)                   /* descending order */\n        for (int j = 0; j &lt; (x - i - 1); j++)\n            if (desc[j] &lt; desc[j + 1]) {\n                int temp = desc[j];\n                desc[j] = desc[j + 1];\n                desc[j + 1] = temp;\n            }\n\n    printf (\"\\n the ascending order is\\n\\n\");\n    for (int i = 0; i &lt; x; i++) {\n        if (i &amp;&amp; !(i % 10)) putchar ('\\n');\n        printf (\" %3d\", ascd[i]);\n    }\n\n    printf (\"\\n\\n the descending order is\\n\\n\");\n    for (int i = 0; i &lt; x; i++) {\n        if (i &amp;&amp; !(i % 10)) putchar ('\\n');\n        printf (\" %3d\", desc[i]);\n    }\n    putchar ('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/sort_copy\n\n enter the number of elements for your array: 100\n\n the ascending order is\n\n   1   1   4   4   5   5   7   8   8   9\n  10  13  16  16  17  20  22  22  22  23\n  24  24  25  27  29  29  33  35  35  35\n  37  38  40  41  41  41  41  42  44  45\n  46  48  48  48  49  50  53  54  56  57\n  58  59  61  61  63  64  65  65  66  66\n  67  68  68  70  71  73  74  74  74  75\n  76  80  80  80  80  82  84  84  85  85\n  85  85  86  88  88  89  89  90  91  91\n  91  92  92  93  93  93  96  99 100 100\n\n the descending order is\n\n 100 100  99  96  93  93  93  92  92  91\n  91  91  90  89  89  88  88  86  85  85\n  85  85  84  84  82  80  80  80  80  76\n  75  74  74  74  73  71  70  68  68  67\n  66  66  65  65  64  63  61  61  59  58\n  57  56  54  53  50  49  48  48  48  46\n  45  44  42  41  41  41  41  40  38  37\n  35  35  35  33  29  29  27  25  24  24\n  23  22  22  22  20  17  16  16  13  10\n   9   8   8   7   5   5   4   4   1   1\n</code></pre>\n\n<p>Look things over and let me know if you have any questions.</p>\n\n<hr>\n\n<p><strong>Sorting with</strong> <code>qsort</code></p>\n\n<p>Continuing for the comment, <code>qsort</code> is an optimized sorting routine that is part of the C standard library (in <code>stdlib.h</code>) and is the go-to sort function regardless of the type of data you have to sort. The only requirement that generally catches new C programmers is the need to write a comparison function to pass to <code>qsort</code> so that <code>qsort</code> knows how you want the collection of objects sorted. <code>qsort</code> will compare two elements by passing a pointer to the values to the compare function you write. The declaration for the comparison is the same regardless of what you are sorting, e.g.</p>\n\n<pre><code>int compare (const void *a, const void *b);\n</code></pre>\n\n<p>You know you are sorting <em>integer</em> values, so all you need to do to sort ascending is to write a function that returns <em>a positive value</em> if <code>a &gt; b</code>, returns <em>zero</em> if they are equal, and finally returns <em>a negative value</em> if <code>b &gt; a</code>. The simple way, is to write</p>\n\n<pre><code>int compare (const void *a, const void *b) {\n    int x = *(int *)a;\n    int y = *(int *)b;\n    return x - y;\n}\n</code></pre>\n\n<p>That satisfies the sort requirement for ascending order, and to sort in descending order <code>return y - x;</code> -- <strong>but there is a problem</strong>. If <code>x</code> and <code>y</code> happen to be large positive and large negative values, there is a potential that <code>x - y</code> will exceed the maximum (or minimum) value for an integer (e.g. <em>overflow</em>, because the result will not fit in an integer value).</p>\n\n<p>The solution is simple. You can perform the same comparison, but using the results of an inequality, e.g. returning <code>(a &gt; b) - (a &lt; b)</code> for the ascending comparison, and <code>(a &lt; b) - (a &gt; b)</code> for the descending comparison. (this scheme will work for all numeric types, you just need to adjust the cast). Step though the inequality. In the ascending case, if <code>a &gt; b</code> the return is <code>1</code> (e.g. <code>return 1 - 0;</code>). If they are equal, the inequality returns <code>0</code> (<code>0 - 0</code> ), and finally if <code>a &lt; b</code>, the value returned is <code>-1</code> ( <code>0 - 1</code> ).</p>\n\n<p>While you are free to continue to explicitly declare the <code>x</code> and <code>y</code> variables, you will generally see it written with the cast in the comparison, eliminating the need for the <code>x</code> and <code>y</code> variables altogether, e.g.</p>\n\n<pre><code>/* integer comparison ascending (prevents overflow) */\nint cmpascd (const void *a, const void *b)\n{\n    /* (a &gt; b) - (a &lt; b) */\n    return (*(int *)a &gt; *(int *)b) - (*(int *)a &lt; *(int *)b);\n}\n</code></pre>\n\n<p>Putting those pieces together, the same program can be written using <code>qsort</code> instead of the inefficient nested loops (and moving the print array routine to a function of its own) as follows,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\n#define ROW 10\n\nint cmpascd (const void *a, const void *b);\nint cmpdesc (const void *a, const void *b);\nvoid prnarr (int *a, int n, int row);\n\nint main (void) {\n\n    int x = 0;\n    printf (\"\\n enter the number of elements for your array: \");\n    if (scanf (\"%d\", &amp;x) != 1) {    /* always validate user input */\n        fprintf (stderr, \"error: invalid input, integer required.\\n\");\n        return 1;\n    }\n    int ascd[x], desc[x];\n\n    srand (time (NULL));                /* you only need do this once */\n    memset (ascd, 0, x * sizeof *ascd); /* good idea to zero your VLA */\n\n    for (int i = 0; i &lt; x; i++)            /* x random values 1 - 100 */\n        ascd[i] = (rand () % 100) + 1;\n\n    memcpy (desc, ascd, x * sizeof *ascd);       /* copy ascd to desc */\n\n    qsort (ascd, x, sizeof *ascd, cmpascd);       /* qsort ascending */\n    qsort (desc, x, sizeof *desc, cmpdesc);      /* qsort descending */\n\n    printf (\"\\n the ascending order is\\n\\n\");\n    prnarr (ascd, x, ROW);\n\n    printf (\"\\n\\n the descending order is\\n\\n\");\n    prnarr (desc, x, ROW);\n\n    putchar ('\\n');\n\n    return 0;\n}\n\n/* integer comparison ascending (prevents overflow) */\nint cmpascd (const void *a, const void *b)\n{\n    /* (a &gt; b) - (a &lt; b) */\n    return (*(int *)a &gt; *(int *)b) - (*(int *)a &lt; *(int *)b);\n}\n\n/* integer comparison descending */\nint cmpdesc (const void *a, const void *b)\n{\n    /* (a &lt; b) - (a &gt; b) */\n    return (*(int *)a &lt; *(int *)b) - (*(int *)a &gt; *(int *)b);\n}\n\nvoid prnarr (int *a, int n, int row)\n{\n    for (int i = 0; i &lt; n; i++) {\n        printf (\" %3d\", a[i]);\n        if (i &amp;&amp; !((i + 1) % row))\n            putchar ('\\n');\n    }\n}\n</code></pre>\n\n<p>As with the first answer, give it a try and let me know if you have any questions. (And remember to always compile with a minimum <code>-Wall -Wextra</code> to enable most compiler warnings -- and fix any warnings generated before you consider your code reliable -- you won't run into any circumstance where warnings can be understood and safely ignored anytime soon) Add <code>-pedantic</code> to see virtually all warnings that can be generated. (if you look up <em>pedantic</em> in Websters, you will see why that name is apt.) Just FYI, the <code>gcc</code> compiler string I used to compile the code was:</p>\n\n<pre><code>$ gcc -Wall -Wextra -pedantic -std=c11 -Ofast -o bin/sort_copy sort_copy.c\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6539370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iw1Sp0Mg98o/AAAAAAAAAAI/AAAAAAAAAVk/eXGiEmNks1s/photo.jpg?sz=128", "display_name": "ivyraveneve", "link": "https://stackoverflow.com/users/6539370/ivyraveneve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 38342893, "answer_count": 3, "score": 0, "last_activity_date": 1468392229, "creation_date": 1468382266, "question_id": 38342436, "link": "https://stackoverflow.com/questions/38342436/how-to-make-a-copy-of-an-array-in-this-code-and-use-it", "title": "How to make a copy of an array in this code and use it", "body": "<p>So I have this code that randomly generates an integer array based on user input, and puts the elements in ascending and descending order. However, currently, the code only prints the descending order twice. So I would like to know how to make a copy of the array ascd and use the copy in the piece of code that organizes the descending order. I am just a beginner, so I apologize if this is a silly question, and appreciate all the guidance I can get. Here is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; \n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\nint main (){ \n\n\nint x; \nprintf(\"Enter the size of your array\\n\");//User is entering number of elements\nscanf(\"%d\", &amp;x); \nint ascd[x]; //Array \nint c; \nint d;\nint e; \nint kk = 0;\nint temp;\nint tempother;\nint turtle; \n\nfor(c = 0; c&lt;x; c++){//Randomly generating elements\n    srand(time(0)); \n    ascd[kk] = (rand() %100) + 1;\n}\n\nfor(c = 0; c&lt;x; c++){ //Ascending order\n    for(d = 0; d&lt;(x-c-1); d++){\n        if(ascd[d] &gt; ascd[d+1]){\n                temp = ascd[d]; \n                ascd[d] = ascd[d+1]; \n                ascd[d+1] = temp; \n                }\n\n                            }\n\n               }\n\n\n\n\nfor(turtle = 0; turtle&lt;x; turtle++){//Descending order\n    for(e = 0; e&lt;(x-turtle-1); e++){\n        if(ascd[e] &lt; ascd[e+1]){\n                tempother = ascd[e]; \n                ascd[e] = ascd[e+1]; \n                ascd[e+1] = tempother; \n                }\n\n                            }\n\n               }\n\n\n\n\nprintf(\"The ascending order is\\n\\n\"); \n         for(c = 0; c&lt;x; c++){\n     printf(\"%d\\n\", ascd[c]);\n     }\n\n\nprintf(\"\\n\\nThe descending order is\\n\\n\"); \n         for(turtle = 0; turtle&lt;x; turtle++){\n         printf(\"%d\\n\", ascd[turtle]);\n         }   \n\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "encryption", "aes"], "comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1468381942, "post_id": 38342326, "comment_id": 64098557, "body": "Funny combo, insecure ECB mode and over-the-top AES-256. Do not use ECB mode, it is insecure, see <a href=\"https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Electronic_Codebook_.28ECB.29\" rel=\"nofollow noreferrer\">ECB mode</a>, scroll down to the Penguin. But you know that and don&#39;t care?"}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 2, "creation_date": 1468382301, "post_id": 38342326, "comment_id": 64098639, "body": "The error message states that you pass 4 arguments to <code>EVP_EncryptInit_ex</code> when you should pass 5?"}, {"owner": {"reputation": 49, "user_id": 6576487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084cca95d6b11829f713ec216cea8162?s=128&d=identicon&r=PG&f=1", "display_name": "akfe79", "link": "https://stackoverflow.com/users/6576487/akfe79"}, "edited": false, "score": 0, "creation_date": 1468383413, "post_id": 38342326, "comment_id": 64098897, "body": "Yes iRove that fixed it.  I totally glossed over it, after I got  rid of the iv pointer I should have put a Null there.  Thanks.     Also, I am just doing this for learning purposes zaph.  I realize its flaws, but I would still like to learn more about all the modes ECB included."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1468383229, "post_id": 38342438, "comment_id": 64098858, "body": "Wait a minute --- wasn&#39;t that supposed to be <i>&quot;Trust your instinct?&quot;</i> That doesn&#39;t work with parameter lists?"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1468383367, "post_id": 38342438, "comment_id": 64098886, "body": "I found: &quot;As the old Jedi Master, Obi-Wan Kenobi, calmly instructs Luke to \u201ctrust the Force.\u201d :-)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1468383428, "post_id": 38342438, "comment_id": 64098906, "body": "Noted, I was recalling the training ball and helmet with blast shield down scene..."}, {"owner": {"reputation": 49, "user_id": 6576487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084cca95d6b11829f713ec216cea8162?s=128&d=identicon&r=PG&f=1", "display_name": "akfe79", "link": "https://stackoverflow.com/users/6576487/akfe79"}, "edited": false, "score": 0, "creation_date": 1468383564, "post_id": 38342438, "comment_id": 64098946, "body": "Yep, that fixed it and now it works great.  Thanks for the help; I should have known that when I removed the iv pointer I would have to put a placeholder."}], "tags": [], "owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "is_accepted": true, "score": 1, "last_activity_date": 1468382749, "last_edit_date": 1468382749, "creation_date": 1468382279, "answer_id": 38342438, "question_id": 38342326, "link": "https://stackoverflow.com/questions/38342326/aes-256-encryption-with-openssl-library-using-ecb-mode-of-operation/38342438#38342438", "title": "AES-256 Encryption with OpenSSL library using ECB mode of operation", "body": "<p>The function takes 5 arguments, pass <code>NULL</code> for the <code>iv</code> parameter.</p>\n\n<pre><code>if(1 != EVP_EncryptInit_ex(ctx, EVP_aes_256_ecb(), NULL, key, NULL))\n</code></pre>\n\n<p>From the <a href=\"https://www.openssl.org/docs/manmaster/crypto/EVP_EncryptInit.html\" rel=\"nofollow\">docs</a>:</p>\n\n<pre><code>int EVP_EncryptInit_ex( EVP_CIPHER_CTX *ctx,\n                        const EVP_CIPHER *type,\n                        ENGINE *impl,\n                        unsigned char *key,\n                        unsigned char *iv);\n</code></pre>\n\n<p>As the old Jedi Master, @zaph, calmly instructs @akfe79 to \u201cTrust the Error Messages\".</p>\n"}], "owner": {"reputation": 49, "user_id": 6576487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084cca95d6b11829f713ec216cea8162?s=128&d=identicon&r=PG&f=1", "display_name": "akfe79", "link": "https://stackoverflow.com/users/6576487/akfe79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8295, "favorite_count": 3, "accepted_answer_id": 38342438, "answer_count": 1, "score": 3, "last_activity_date": 1468382749, "creation_date": 1468381476, "question_id": 38342326, "link": "https://stackoverflow.com/questions/38342326/aes-256-encryption-with-openssl-library-using-ecb-mode-of-operation", "title": "AES-256 Encryption with OpenSSL library using ECB mode of operation", "body": "<p>I am trying to create an example of AES Encryption with the OpenSSL library using the ECB mode.  It has been hard to find any documentation especially on ECB so I took an example of code using the CBC mode and tried to modify it for ECB.  I got rid of things not included in ECB such as the initialization vector and tried to modify the code to the best I could.  Upon finishing I ran into some problems after compiling:</p>\n\n<pre><code>AES-256-ECB-Encryption.cpp: In function \u2018int encrypt(unsigned char*, int, unsigned char*, unsigned char*)\u2019:\nAES-256-ECB-Encryption.cpp:27:63: error: too few arguments to function \u2018int EVP_EncryptInit_ex(EVP_CIPHER_CTX*, const EVP_CIPHER*, ENGINE*, const unsigned char*, const unsigned char*)\u2019\nif(1 != EVP_EncryptInit_ex(ctx, EVP_aes_256_ecb(), NULL, key))\n</code></pre>\n\n<p>The error says I have too few arguments to function in the int encrypt function.  I also have this error  for the int decrypt function.  I was wondering if anyone here could help me clarify my problem.  I am aware of the vulnerabilities attached to the ECB mode, but I would still like to become familiar with it.  Also, I know that the key should not hard coded, but I just wanted to get an example running to make sure I had the right idea.  I am using EVP Symmetric Encryption and Decryption from the libcrypto library within OpenSSL.  I am on Ubuntu 16.0.4 if that matters.  If anyone could shed some light on my problem or provide more documentation on ECB that would be greatly appreciated.</p>\n\n<p>Thanks</p>\n\n<p>Here is the rest of the code: </p>\n\n<pre><code>#include &lt;openssl/conf.h&gt;\n#include &lt;openssl/evp.h&gt;\n#include &lt;openssl/err.h&gt;\n#include &lt;string.h&gt;\n\n\nvoid handleErrors(void)\n{\n  ERR_print_errors_fp(stderr);\n  abort();\n}\n\nint encrypt(unsigned char *plaintext, int plaintext_len, unsigned char *key, unsigned char *ciphertext)\n{\n  EVP_CIPHER_CTX *ctx;\n\n  int len;\n\n  int ciphertext_len;\n\n  /* Create and initialise the context */\n  if(!(ctx = EVP_CIPHER_CTX_new())) handleErrors();\n\n  /* Initialise the encryption operation. IMPORTANT - ensure you use a key\n   * In this example we are using 256 bit AES (i.e. a 256 bit key). \n  */\n  if(1 != EVP_EncryptInit_ex(ctx, EVP_aes_256_ecb(), NULL, key))\n    handleErrors();\n\n  /* Provide the message to be encrypted, and obtain the encrypted output.\n   * EVP_EncryptUpdate can be called multiple times if necessary\n   */\n  if(1 != EVP_EncryptUpdate(ctx, ciphertext, &amp;len, plaintext, plaintext_len))\n    handleErrors();\n  ciphertext_len = len;\n\n  /* Finalise the encryption. Further ciphertext bytes may be written at\n   * this stage.\n   */\n  if(1 != EVP_EncryptFinal_ex(ctx, ciphertext + len, &amp;len))  handleErrors();\n  ciphertext_len += len;\n\n  /* Clean up */\n  EVP_CIPHER_CTX_free(ctx);\n\n  return ciphertext_len;\n}\n\nint decrypt(unsigned char *ciphertext, int ciphertext_len, unsigned char  *key, unsigned char *plaintext)\n{\n  EVP_CIPHER_CTX *ctx;\n\n  int len;\n\n  int plaintext_len;\n\n  /* Create and initialise the context */\n  if(!(ctx = EVP_CIPHER_CTX_new())) handleErrors();\n\n  /* Initialise the decryption operation. IMPORTANT - ensure you use a key\n   * In this example we are using 256 bit AES (i.e. a 256 bit key). The\n  */\n  if(1 != EVP_DecryptInit_ex(ctx, EVP_aes_256_ecb(), NULL, key))\nhandleErrors();\n\n  /* Provide the message to be decrypted, and obtain the plaintext output.\n   * EVP_DecryptUpdate can be called multiple times if necessary\n   */\n  if(1 != EVP_DecryptUpdate(ctx, plaintext, &amp;len, ciphertext, ciphertext_len))\n    handleErrors();\n  plaintext_len = len;\n\n  /* Finalise the decryption. Further plaintext bytes may be written at\n   * this stage.\n   */\n  if(1 != EVP_DecryptFinal_ex(ctx, plaintext + len, &amp;len)) handleErrors();\n  plaintext_len += len;\n\n  /* Clean up */\n  EVP_CIPHER_CTX_free(ctx);\n\n  return plaintext_len;\n}\n\n\nint main (void)\n{\n  /* A 256 bit key */\n  unsigned char *key = (unsigned char *)\"01234567890123456789012345678901\";\n\n   /* Message to be encrypted */\n  unsigned char *plaintext =\n            (unsigned char *)\"This is a test.\";\n\n  /* Buffer for ciphertext. Ensure the buffer is long enough for the\n   * ciphertext which may be longer than the plaintext, dependant on the\n   * algorithm and mode\n   */\n  unsigned char ciphertext[128];\n\n   /* Buffer for the decrypted text */\n  unsigned char decryptedtext[128];\n\n  int decryptedtext_len, ciphertext_len;\n\n  /* Initialise the library */\n  ERR_load_crypto_strings();\n  OpenSSL_add_all_algorithms();\n  OPENSSL_config(NULL);\n\n  /* Encrypt the plaintext */\n  ciphertext_len = encrypt (plaintext, strlen ((char *)plaintext), key, ciphertext);\n\n  /* Do something useful with the ciphertext here */\n  printf(\"Ciphertext is:\\n\");\n  BIO_dump_fp (stdout, (const char *)ciphertext, ciphertext_len);\n\n  /* Decrypt the ciphertext */\n  decryptedtext_len = decrypt(ciphertext, ciphertext_len, key,\n  decryptedtext);\n\n  /* Add a NULL terminator. Expecting printable text */\n  decryptedtext[decryptedtext_len] = '\\0';\n\n  /* Show the decrypted text */\n  printf(\"Decrypted text is:\\n\");\n  printf(\"%s\\n\", decryptedtext);\n\n  /* Clean up */\n  EVP_cleanup();\n  ERR_free_strings();\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 47440, "user_id": 229410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0014fcc07d184018d3b8185a85a09?s=128&d=identicon&r=PG", "display_name": "Rohan", "link": "https://stackoverflow.com/users/229410/rohan"}, "is_accepted": true, "score": 0, "last_activity_date": 1468378695, "creation_date": 1468378695, "answer_id": 38341953, "question_id": 38341730, "link": "https://stackoverflow.com/questions/38341730/how-to-pass-a-reference-to-a-function-that-takes-references-as-argument/38341953#38341953", "title": "How to pass a reference to a function that takes references as argument", "body": "<p>In your <code>insert(head, current);</code> function you are passing the parameters but they are also output parameters. So you need to pass address of them and then change their value which will be reflected in <code>main()</code>. So change that call to</p>\n\n<pre><code>insert(&amp;head, &amp;current)\n</code></pre>\n\n<p>And update your function as </p>\n\n<pre><code>void insert(struct intNode **head, struct intNode **current)\n{\n    struct intNode *node;\n    node = (struct intNode *) malloc(sizeof(struct intNode));\n    printf(\"enter a number:\");\n    scanf(\"%d\",&amp;node-&gt;value);\n    //--v note * here and other places\n    if(*head == NULL)\n    {\n        *head = node;\n    }\n    else\n    {\n        if((*head)-&gt;next == NULL)\n        {\n            (*head)-&gt;next = node;\n            *current = node;\n        }else{\n            printf(\"%d \",(*current)-&gt;value);\n            (*current)-&gt;next = node;\n            (*current) = node;\n        }\n    }\n}//end of insert\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1468379566, "creation_date": 1468379566, "answer_id": 38342076, "question_id": 38341730, "link": "https://stackoverflow.com/questions/38341730/how-to-pass-a-reference-to-a-function-that-takes-references-as-argument/38342076#38342076", "title": "How to pass a reference to a function that takes references as argument", "body": "<p>I've created two versions of your code. One annotated with the [most of] the bugs and a cleaned up and working version [please pardon the gratuitous style cleanup].</p>\n\n<p>When you set <code>head</code> in insert, it didn't set this in <code>main</code>, only in <code>insert</code>. I solved this using the \"dummy\" node as list header approach.</p>\n\n<hr>\n\n<p>Here's the annotated version:</p>\n\n<pre><code>#ifndef STRUCTURE_H_\n#define STRUCTURE_H_\n\nstruct intNode {\n    int value;\n    struct intNode *next;\n};\n\n#endif\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"structure.h\"\n#define commandLength 6\n#define initSize 100\n\nvoid insert(struct intNode *head, struct intNode *current);\nvoid print(struct intNode *head);\n\nint\nmain()\n{\n    char command[commandLength];\n    struct intNode *head = NULL;\n    struct intNode *current = NULL;\n\n    printf(\"Enter a command from the following list of commands:\\n\\n\" \"insert - to add a number to the list;\\n\" \"print  - to print out the list;\\n\" \"exit   - to terminate the program;\\n\\n\" \"Enter your command:\\n\");\n\n    // NOTE/BUG: on the first time through the loop, command is invalid, so do\n    // this:\n#if 1\n    command[0] = 0;\n#endif\n    while (strcmp(command, \"exit\") != 0) {\n        scanf(\"%s\", command);\n\n        // NOTE/BUG: passing current serves no purpose\n        if (strcmp(command, \"insert\") == 0) {\n            insert(head, current);\n        }\n        else if (strcmp(command, \"print\") == 0) {\n            print(head);\n        }\n        else if (strcmp(command, \"exit\") == 0) {\n            printf(\"\\nThe program has been terminated.\");\n        }\n        else {\n            printf(\"Error: unknown request '%s'\\n\", command);\n        }\n    }                                   // end of while\n}                                       // end of main\n\nvoid\ninsert(struct intNode *head, struct intNode *current)\n{\n    struct intNode *node;\n\n    node = (struct intNode *) malloc(sizeof(struct intNode));\n    printf(\"enter a number:\");\n    scanf(\"%d\", &amp;node-&gt;value);\n\n    // NOTE/BUG: when head is set here, it only modifies it within _this_\n    // function and does _not_ update it in main\n    if (head == NULL) {\n        head = node;\n    }\n\n    // NOTE: this is closer to the insertion you want to do\n    else {\n        if (head-&gt;next == NULL) {\n            head-&gt;next = node;\n            current = node;\n        }\n        else {\n            printf(\"%d \", current-&gt;value);\n            current-&gt;next = node;\n            current = node;\n        }\n    }\n}                                       // end of insert\n\nvoid\nprint(struct intNode *head)\n{\n    struct intNode *temp;\n\n    temp = head;\n\n    while (temp != NULL) {\n        printf(\"%d \", temp-&gt;value);\n        temp = temp-&gt;next;\n    }\n}                                       // end of print\n</code></pre>\n\n<hr>\n\n<p>Here's the cleaned up and working version. I renamed <code>head</code> to <code>list</code> to be more descriptive of its new role.</p>\n\n<pre><code>#ifndef STRUCTURE_H_\n#define STRUCTURE_H_\n\nstruct intNode {\n    int value;\n    struct intNode *next;\n};\n\n#endif\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n//#include \"structure.h\"\n\n#define commandLength 6\n#define initSize 100\n\nvoid insert(struct intNode *list);\nvoid print(struct intNode *list);\n\nint\nmain()\n{\n    char command[commandLength];\n    struct intNode list;\n\n    list.next = NULL;\n\n    while (1) {\n        printf(\"Enter a command from the following list of commands:\\n\\n\" \"insert - to add a number to the list;\\n\" \"print  - to print out the list;\\n\" \"exit   - to terminate the program;\\n\\n\" \"Enter your command:\\n\");\n\n        scanf(\"%s\", command);\n\n        if (strcmp(command, \"exit\") == 0) {\n            printf(\"\\nThe program has been terminated.\\n\");\n            break;\n        }\n\n        if (strcmp(command, \"insert\") == 0) {\n            insert(&amp;list);\n            continue;\n        }\n\n        if (strcmp(command, \"print\") == 0) {\n            print(&amp;list);\n            continue;\n        }\n\n        printf(\"Error: unknown request '%s'\\n\", command);\n    }\n}\n\nvoid\ninsert(struct intNode *list)\n{\n    struct intNode *current;\n    struct intNode *prev;\n    struct intNode *node;\n\n    node = malloc(sizeof(struct intNode));\n    node-&gt;next = NULL;\n\n    printf(\"enter a number:\");\n    scanf(\"%d\", &amp;node-&gt;value);\n\n    // find the end of the list\n    prev = NULL;\n    for (current = list-&gt;next;  current != NULL;  current = current-&gt;next)\n        prev = current;\n\n    if (prev != NULL)\n        prev-&gt;next = node;\n    else\n        list-&gt;next = node;\n}\n\nvoid\nprint(struct intNode *list)\n{\n    struct intNode *temp;\n\n    for (temp = list-&gt;next;  temp != NULL;  temp = temp-&gt;next)\n        printf(\"%d \", temp-&gt;value);\n    printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 5936168, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b6568277dd782d4b8fa572de33da372?s=128&d=identicon&r=PG&f=1", "display_name": "Val K", "link": "https://stackoverflow.com/users/5936168/val-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 38341953, "answer_count": 2, "score": 0, "last_activity_date": 1468379566, "creation_date": 1468377035, "last_edit_date": 1468377141, "question_id": 38341730, "link": "https://stackoverflow.com/questions/38341730/how-to-pass-a-reference-to-a-function-that-takes-references-as-argument", "title": "How to pass a reference to a function that takes references as argument", "body": "<p>I cannot figure out how to make my program work. The program ask user to input a number and print them out. I use the linked list to store my values. But cannot get it working, need help\n. I used a structure.h file to define my structure</p>\n\n<pre><code>#ifndef STRUCTURE_H_\n#define STRUCTURE_H_\n\nstruct intNode\n{\n    int value;\n    struct intNode *next;\n};\n\n#endif\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"structure.h\"\n#define commandLength 6\n#define initSize 100\n\nvoid insert(struct intNode *head, struct intNode *current);\nvoid print(struct intNode *head);\n\nint main()\n{\n    char command[commandLength];\n    struct intNode *head = NULL;\n    struct intNode *current = NULL;\n\n    printf(\"Enter a command from the following list of commands:\\n\\n\"\n            \"insert - to add a number to the list;\\n\"\n            \"print  - to print out the list;\\n\"\n            \"exit   - to terminate the program;\\n\\n\"\n            \"Enter your command:\\n\");\n\n    while (strcmp(command, \"exit\") != 0)\n    {\n        scanf( \"%s\",command);\n\n        if(strcmp(command,\"insert\") == 0)\n        {insert(head, current);}\n        else if(strcmp(command, \"print\") == 0)\n        {print(head);}\n        else if(strcmp(command, \"exit\") == 0)\n        {printf(\"\\nThe program has been terminated.\");}\n        else\n        {printf(\"Error: unknown request '%s'\\n\", command);}\n    }//end of while\n}//end of main\n\nvoid insert(struct intNode *head, struct intNode *current)\n{\n    struct intNode *node;\n    node = (struct intNode *) malloc(sizeof(struct intNode));\n    printf(\"enter a number:\");\n    scanf(\"%d\",&amp;node-&gt;value);\n    if(head == NULL)\n    {\n        head = node;\n    }\n    else\n    {\n        if(head-&gt;next == NULL)\n        {\n            head-&gt;next = node;\n            current = node;\n        }else{\n            printf(\"%d \",current-&gt;value);\n            current-&gt;next = node;\n            current = node;\n        }\n    }\n}//end of insert\n\nvoid print(struct intNode *head)\n{\n    struct intNode *temp;\n    temp = head;\n\n    while(temp != NULL)\n    {\n        printf(\"%d \",temp-&gt;value);\n        temp = temp-&gt;next;\n    }\n}//end of print\n</code></pre>\n"}, {"tags": ["c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 39095, "user_id": 398060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47073e025b05ee4d61d720f6424d0191?s=128&d=identicon&r=PG", "display_name": "GWW", "link": "https://stackoverflow.com/users/398060/gww"}, "reply_to_user": {"reputation": 11, "user_id": 6582096, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ny5iJJJZF7g/AAAAAAAAAAI/AAAAAAAAAIY/gSUIKA6dJNs/photo.jpg?sz=128", "display_name": "hunter3035", "link": "https://stackoverflow.com/users/6582096/hunter3035"}, "edited": false, "score": 2, "creation_date": 1468377142, "post_id": 38341648, "comment_id": 64097547, "body": "It&#39;s a mistake everyone has made at least once."}], "tags": [], "owner": {"reputation": 39095, "user_id": 398060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47073e025b05ee4d61d720f6424d0191?s=128&d=identicon&r=PG", "display_name": "GWW", "link": "https://stackoverflow.com/users/398060/gww"}, "is_accepted": false, "score": 1, "last_activity_date": 1468376471, "creation_date": 1468376471, "answer_id": 38341648, "question_id": 38341612, "link": "https://stackoverflow.com/questions/38341612/incorrect-values-assigned-to-array-from-text-file/38341648#38341648", "title": "Incorrect values assigned to array from text file", "body": "<p>Your <code>vote</code> array is not initialized to <code>0</code> so some of the values are garbage values hence the unexpected values.</p>\n\n<pre><code>int votes[20] = {0};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6582096, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ny5iJJJZF7g/AAAAAAAAAAI/AAAAAAAAAIY/gSUIKA6dJNs/photo.jpg?sz=128", "display_name": "hunter3035", "link": "https://stackoverflow.com/users/6582096/hunter3035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468376471, "creation_date": 1468376173, "question_id": 38341612, "link": "https://stackoverflow.com/questions/38341612/incorrect-values-assigned-to-array-from-text-file", "title": "Incorrect values assigned to array from text file", "body": "<p>I'm new here so I apologize if I've done anything wrong in asking this question. I'm in C and I'm trying to add one to the value of an element in an array every time the element's number is read from the file. I have it set to terminate when it reads the number 30. I believe I am making out of bounds errors or something along those lines because the values printed out after I try the following code are insane.</p>\n\n<pre><code>int main(){\n\n  int votes[20];\n  FILE *input;\n\n  input = fopen(\"votes.txt\", \"r\");\n  int currentVote;   \n  while(currentVote != 30){\n    fscanf(input, \" \");\n    fscanf(input, \"%d\",&amp;currentVote);\n    if(currentVote == 30){\n      break;\n    }\n    votes[currentVote] += 1;\n  }  \n  fclose(input);\n  int i;\n  int l = 19; \n  int x;\n  for(i = 0; i &lt;= l; i++){\n    x = i;\n    printf(\"%d is %d\\n\",i,votes[x]);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Unfortunately, this is the output that I get.</p>\n\n<pre><code>0 is 1\n1 is 1\n2 is 1\n3 is 1\n4 is 1835627637\n5 is 1600061542\n6 is 1869833335\n7 is 1952802656\n8 is 1\n9 is 1\n10 is 1\n11 is 1\n12 is 2\n13 is 1\n14 is 4196110\n15 is 1\n16 is 1\n17 is 1\n18 is 1\n19 is 1\n</code></pre>\n\n<p>This is the input text file:</p>\n\n<pre><code>0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 30\n</code></pre>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c", "thread-safety", "portaudio"], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "edited": false, "score": 0, "creation_date": 1468616512, "post_id": 38401548, "comment_id": 64218439, "body": "Yeah, that&#39;s perfect. I got so concerned with thread safety, atomicity, and global variables, I didn&#39;t see the simple answer: that PA gives you this mechanic."}, {"owner": {"reputation": 1183, "user_id": 3860983, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3TmhD.jpg?s=128&g=1", "display_name": "yun", "link": "https://stackoverflow.com/users/3860983/yun"}, "reply_to_user": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "edited": false, "score": 0, "creation_date": 1468616988, "post_id": 38401548, "comment_id": 64218621, "body": "Ya no worries it&#39;s hard to learn a new API by yourself... I fortunately had a great teacher when I learned PortAudio so it made things a lot easier. Good luck with what you&#39;re doing!"}, {"owner": {"reputation": 850, "user_id": 6778669, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/398ly.jpg?s=128&g=1", "display_name": "Ashish K", "link": "https://stackoverflow.com/users/6778669/ashish-k"}, "edited": false, "score": 0, "creation_date": 1498132215, "post_id": 38401548, "comment_id": 76379846, "body": "HI @yun.cloud , I have recently started with speech acquisition and processing using portaudio and I am facing a bit of issues while implementing it. I have posted the question here on stackoverflow here (<a href=\"https://stackoverflow.com/questions/44645466/portaudio-real-time-audio-processing-for-continuous-input-stream\" title=\"portaudio real time audio processing for continuous input stream\">stackoverflow.com/questions/44645466/&hellip;</a>). Any kind of help is greatly appreciated."}], "tags": [], "owner": {"reputation": 1183, "user_id": 3860983, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/3TmhD.jpg?s=128&g=1", "display_name": "yun", "link": "https://stackoverflow.com/users/3860983/yun"}, "is_accepted": true, "score": 1, "last_activity_date": 1468602000, "creation_date": 1468602000, "answer_id": 38401548, "question_id": 38341423, "link": "https://stackoverflow.com/questions/38341423/portaudio-callbacks-and-changing-a-variable-elsewhere/38401548#38401548", "title": "PortAudio callbacks, and changing a variable elsewhere", "body": "<p>I'm not totally sure what you're exactly trying to do but I'm guessing it's what your title is asking about - \"Changing a variable elsewhere\".</p>\n\n<p>Let's take this example: you have a variable <code>frequency</code> that changes over time. How do you access this? Well you have a generic pointer in the callback called <code>userData</code>. This can point to anything - a data structure, array, etc. I don't really remember how often the callback function gets called (it's pretty often... I wouldn't worry about speed) but the <code>userData</code> allows you to have variables that can be changed in your main thread while the pointer in the audio thread allows you to access it directly in the memory... My knowledge on thread safety isn't the best and sorry if that isn't the best explanation but I can at least show you how to do it through code (below).</p>\n\n<p>This is how i usually do it but you don't need to do it yourself; I set a structure at the top of my file like so:</p>\n\n<pre><code>typedef struct {\n    float freq;\n    float vol;\n}paData;\n</code></pre>\n\n<p>Obviously you'll initialize this somewhere in your code (probably in your <code>main</code> function call) and open the audio stream as such (<code>data</code> is of type <code>paData</code>):</p>\n\n<pre><code>/* Open audio stream */\nerr = Pa_OpenStream(&amp;(*stream),\n        &amp;inputParameters,\n        &amp;outputParameters,\n        SAMPLE_RATE, bufSize, paNoFlag, \n        paCallback, &amp;data);\n</code></pre>\n\n<p>After opening it you can have your callback like this:</p>\n\n<pre><code>static int pa_callback(const void *inputBffer,\n             void *outputBuffer,\n             unsigned long frameCount,\n             const PaStreamCallbackTimeInfo *timeInfo,\n             PaStreamCallbackFlags statusFlags,\n             void *userData)\n{\n    // cast data so we can use it\n    paData *data = (paData *)userData;\n\n    // what's our frequency?\n    printf(\"%f\\n\", data-&gt;freq);\n\n    /* Do something with your code here */\n\n    return paContinue;\n}\n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 399, "user_id": 1195803, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/32670f69f6e90a59c1828eec8ece8150?s=128&d=identicon&r=PG", "display_name": "justynnuff", "link": "https://stackoverflow.com/users/1195803/justynnuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 38401548, "answer_count": 1, "score": 1, "last_activity_date": 1468602000, "creation_date": 1468374641, "last_edit_date": 1468375442, "question_id": 38341423, "link": "https://stackoverflow.com/questions/38341423/portaudio-callbacks-and-changing-a-variable-elsewhere", "title": "PortAudio callbacks, and changing a variable elsewhere", "body": "<p>I'm using PortAudio's callback API for designing a signal processing loopback library.</p>\n\n<p>I'd like to add a branch that depends on a flag inside the callback, so like </p>\n\n<pre><code>int pa_callback(const void *inputuffer,\n                 void *outputBuffer,\n                 unsigned long frameCount,\n                 const PaStreamCallbackTimeInfo *timeInfo,\n                 PaStreamCallbackFlags statusFlags,\n                 void *userData)\n{\n  if (do_something_flag) {\n    do_something(inputBuffer, outputBuffer, frameCount);\n  } else {\n    do_something_else(inputBuffer, outputBuffer, frameCount);\n  }\n\n  return paContinue;\n}\n</code></pre>\n\n<p>Where <code>do_something_flag</code> is set elsewhere in my program at regular intervals.</p>\n\n<p>The PortAudio callback documentation states:</p>\n\n<blockquote>\n  <p>Before we begin, it's important to realize that the callback is a\n  delicate place. This is because some systems perform the callback in a\n  special thread, or interrupt handler, and it is rarely treated the\n  same as the rest of your code. For most modern systems, you won't be\n  able to cause crashes by making disallowed calls in the callback, but\n  if you want your code to produce glitch-free audio, you will have to\n  make sure you avoid function calls that may take an unbounded amount\n  of time to execute. Exactly what these are depend on your platform but\n  almost certainly include the following: memory\n  allocation/deallocation, I/O (including file I/O as well as console\n  I/O, such as printf()), context switching (such as exec() or yield()),\n  mutex operations, or anything else that might rely on the OS. If you\n  think short critical sections are safe please go read about priority\n  inversion.</p>\n</blockquote>\n\n<p>I don't care about the atomicity of the <code>do_something_flag</code>.  That is, I don't care how many cycles it takes to get a correct value (within reason).\nAccording to the documentation, it looks like I can't use mutexes for setting/reading that variable.</p>\n\n<p>1) What are my options?</p>\n\n<p>2) If I make it global and set it in another part of my program (another thread), what is the absolute worst that will happen?  Again, I mean in terms of corrupting data to the point of program failure/etc.</p>\n\n<p>Is there a right way to do this?</p>\n"}, {"tags": ["c", "atmelstudio"], "comments": [{"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 0, "creation_date": 1468375122, "post_id": 38341418, "comment_id": 64097083, "body": "Are you using gcc-avr to compile?"}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 2415465, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b4495f601aa5b3e226e7968e79532d81?s=128&d=identicon&r=PG", "display_name": "Noxet", "link": "https://stackoverflow.com/users/2415465/noxet"}, "is_accepted": false, "score": 0, "last_activity_date": 1553003476, "creation_date": 1553003476, "answer_id": 55242633, "question_id": 38341418, "link": "https://stackoverflow.com/questions/38341418/erro-on-atmelstudio7-0-avr-io-h/55242633#55242633", "title": "Erro on AtmelStudio7.0 &quot;avr/io.h&quot;", "body": "<p>A correct installation should not give you that error.\nWhat kind of project did you create? Are you using the correct toolchain?</p>\n\n<p>You can try it manually in a terminal by running:</p>\n\n<pre><code>avr-gcc -mmcu=&lt;your proc&gt; &lt;myfile&gt;.c -o &lt;myfile&gt;.elf\n</code></pre>\n\n<p>Assuming you have avr-gcc in your PATH.</p>\n\n<p>You might also try reinstalling atmel studio</p>\n"}], "owner": {"reputation": 11, "user_id": 6582059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdfd5829861a405e154d29f45405278?s=128&d=identicon&r=PG&f=1", "display_name": "WanWan55", "link": "https://stackoverflow.com/users/6582059/wanwan55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553003476, "creation_date": 1468374590, "question_id": 38341418, "link": "https://stackoverflow.com/questions/38341418/erro-on-atmelstudio7-0-avr-io-h", "title": "Erro on AtmelStudio7.0 &quot;avr/io.h&quot;", "body": "<p>I got an error which says \"avr/io.h: No such file or directory\"\nPlease give me some advices.</p>\n\n<hr>\n\n<pre><code>#include \"sam.h\"\n#include &lt;avr/io.h&gt;\n\n\nint main(void)\n{\n    /* Initialize the SAM system */\n    SystemInit();\n\n    /* Replace with your application code */\n    while (1) \n    {\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "integration", "physics", "runge-kutta"], "comments": [{"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1468374666, "post_id": 38340709, "comment_id": 64096989, "body": "I would check on the re-definition of y1 and y2. You are using y1 in the second formula, however its value has changed. Define dv[0] and dv[1] directly without the intermediate assignment."}, {"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1468375372, "post_id": 38340709, "comment_id": 64097149, "body": "thanks i will try and comment how it turned out"}, {"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "reply_to_user": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1468376101, "post_id": 38340709, "comment_id": 64097307, "body": "I am pleased to announce that what LutzL suggested is indeed the way to solve the problem. This thread can be closed. Thanks for your help!!!"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1468376603, "post_id": 38340709, "comment_id": 64097423, "body": "@GatoMazzei couldn&#39;t you have posted that 2 minutes earlier? ;-) But serious: if LutzL does not want to post an answer you can answer your question yourself."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468377369, "post_id": 38341590, "comment_id": 64097602, "body": "Great answer! not only explaining what is wrong but teaching what a great tool printf is!"}, {"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468377597, "post_id": 38341590, "comment_id": 64097664, "body": "Now: is it valid to use &quot;v[number]&quot; as a variable in the equation (dv=..), that way avoiding defining a name for each one?"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468379596, "post_id": 38341590, "comment_id": 64098084, "body": "Why do you expect to get an answer after making fun of my? ;-) You can, of course, use the elements of the vector directly, no need for a temporary variable. Using a temporary variable also lead me to the wrong conclusion that all of the overwriting of <code>yn</code> was intentionally and the overflow was the problem instead of &quot;just&quot; a typo. And, yes, I am serious with the printfs in numerical computations, you can even plot them, given enough data points, and find e.g.: a &quot;nervous converging&quot; (for lack of a better word) which is hard to find otherwise."}, {"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468432219, "post_id": 38341590, "comment_id": 64129352, "body": "Actually im not a huge fan of sarcasm. That means i meant exactly what i said! :). The remaining thing in my work is now determine if the -nan obtained for certain initial conditions are part of the physical phenomena being studied or there is something else wrong with the code. Given the fact that this is supposed to be my final exam for tomorrow i&#180;ll probably ignore this and present an average-joe work :(. The two lessons that readers can learn from this post are manily:"}, {"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468432246, "post_id": 38341590, "comment_id": 64129370, "body": "1) start your numerical simulations as soon as possible: you never know what problems will occur"}, {"owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "edited": false, "score": 0, "creation_date": 1468432267, "post_id": 38341590, "comment_id": 64129385, "body": "2) printf is a powerful tool!"}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 1, "last_activity_date": 1468376023, "creation_date": 1468376023, "answer_id": 38341590, "question_id": 38340709, "link": "https://stackoverflow.com/questions/38340709/why-is-this-simple-c-code-integration-code-failing/38341590#38341590", "title": "Why is this simple C-code integration code failing?", "body": "<p>You get a massive overflow in <code>y2</code> quite quickly which avalanches even faster into <code>NaN</code>s</p>\n\n<p>Never undestimate the usefulness of <code>printf</code>s in numerical code, so let's do it here:</p>\n\n<pre><code>void ecuaciones(int n, double v[], double dv[], double t)\n{\n  double x1, y1, x2, y2;\n\n  x1 = v[0];\n  x2 = v[1];\n  y1 = v[2];\n  y2 = v[3];\n  printf(\"aa.mu1: %g, aa.w1: %g, aa.eps: %g, aa.mu2: %g, aa.w2: %g \\n\", aa.mu1,\n     aa.w1, aa.eps, aa.mu2, aa.w2);\n\n  printf(\"x1: %g, x2: %g, y1: %g, y2: %g\\n\", x1, x2, y1, y2);\n  y1 = aa.mu1 * x1 - aa.w1 * y1 - (x1 * x1 + y1 * y1) * x1 + aa.eps * (x1 - x2);\n  y2 = aa.mu2 * x2 - aa.w2 * y2 - (x2 * x2 + y2 * y2) * x2 + aa.eps * (x2 - x1);\n  dv[0] = y1;\n\n\n  printf(\"y1: %g, y2: %g\\n\", y1, y2);\n  dv[1] = y2;\n  dv[2] =\n      aa.w1 * x1 + aa.mu1 * y1 - y1 * (x1 * x1 + y1 * y1) + aa.eps * (y1 - y2);\n  dv[3] =\n      aa.w2 * x2 + aa.mu2 * y2 - y2 * (x2 * x2 + y2 * y2) + aa.eps * (y2 - y1);\n  printf(\"%g %g %g %g %g\\n\\n\", dv[0], dv[1], dv[2], dv[3], y1);\n  return;\n}\n</code></pre>\n\n<p>shows:</p>\n\n<pre><code>aa.mu1: 1, aa.w1: 1, aa.eps: 0, aa.mu2: 1, aa.w2: 6 \nx1: 2, x2: 6, y1: 0, y2: 1\ny1: -6, y2: -222\n-6 -222 236 1.09489e+07 -6\n\naa.mu1: 1, aa.w1: 1, aa.eps: 0, aa.mu2: 1, aa.w2: 6 \nx1: 1.97, x2: 4.89, y1: 1.18, y2: 54745.3\ny1: -9.5984, y2: -1.46559e+10\n-9.5984 -1.46559e+10 913.916 3.148e+30 -9.5984\n\naa.mu1: 1, aa.w1: 1, aa.eps: 0, aa.mu2: 1, aa.w2: 6 \nx1: 1.95201, x2: -7.32794e+07, y1: 4.56958, y2: 1.574e+28\ny1: -50.8154, y2: 1.81548e+64\n-50.8154 1.81548e+64 131360 -5.98381e+192 -50.8154\n\naa.mu1: 1, aa.w1: 1, aa.eps: 0, aa.mu2: 1, aa.w2: 6 \nx1: 1.49185, x2: 1.81548e+62, y1: 1313.6, y2: -5.98381e+190\ny1: -2.57558e+06, y2: -inf\n-2.57558e+06 -inf -nan -nan -2.57558e+06\n\naa.mu1: 1, aa.w1: 1, aa.eps: 0, aa.mu2: 1, aa.w2: 6 \nx1: -4290.84, x2: -inf, y1: -nan, y2: -nan\ny1: -nan, y2: -nan\n-nan -nan -nan -nan -nan\n\naa.mu1: 1, aa.w1: 1, aa.eps: 0, aa.mu2: 1, aa.w2: 6 \nx1: -nan, x2: -nan, y1: -nan, y2: -nan\ny1: -nan, y2: -nan\n-nan -nan -nan -nan -nan\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6581823, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035070946575680/picture?type=large", "display_name": "Gato Mazzei", "link": "https://stackoverflow.com/users/6581823/gato-mazzei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 38341590, "answer_count": 1, "score": 0, "last_activity_date": 1468376023, "creation_date": 1468368552, "question_id": 38340709, "link": "https://stackoverflow.com/questions/38340709/why-is-this-simple-c-code-integration-code-failing", "title": "Why is this simple C-code integration code failing?", "body": "<p>I\u00b4ve been using this code in C for integration with different equations but today i modified it to integrate the one shown and the .dat file is giving me all the columns full of \"-nan\". Is it a wrong-coding issue or its just that this equations isnt meant to be solved by this procedure? </p>\n\n<p>Here are both the integration routine and the main code. \nThanks</p>\n\n<p>FIRST THE CODE (i chopped it explaining what does each part do, i apologize if its unpleasant at sight)</p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n#include &lt;math.h&gt;\n\n#define a -1\n</code></pre>\n\n<p>PARAMETERS</p>\n\n<pre><code>struct Par{\ndouble  mu1, mu2, w1, w2, eps;\n} aa;\n</code></pre>\n\n<p>EQUATIONS</p>\n\n<pre><code>void ecuaciones(int n, double v[], double dv[], double t){\ndouble x1,y1,x2,y2;\n\n  x1=v[0];\n  x2=v[1];\n  y1=v[2];\n  y2=v[3];\n  y1=aa.mu1*x1-aa.w1*y1-(x1*x1+y1*y1)*x1+aa.eps*(x1-x2) ;  \n  y2=aa.mu2*x2-aa.w2*y2-(x2*x2+y2*y2)*x2+aa.eps*(x2-x1) ;\n  dv[0]=y1;\n  dv[1]=y2;\n  dv[2]=aa.w1*x1+aa.mu1*y1-y1*(x1*x1+y1*y1)+aa.eps*(y1-y2) ;\n  dv[3]=aa.w2*x2+aa.mu2*y2-y2*(x2*x2+y2*y2)+aa.eps*(y2-y1) ;  \n\n  return;\n}\n</code></pre>\n\n<p>MAIN</p>\n\n<pre><code>int main(){\n\n  int i,j;\n  FILE *ptr;\n  double v[4],t,dt,t_pre,t_max;\n</code></pre>\n\n<p>EXIT</p>\n\n<pre><code>  ptr=fopen(\"NLIAC.dat\",\"w\");\n\n  dt=0.01;\n  t_max=20;\n</code></pre>\n\n<p>INITIAL CONDITIONS</p>\n\n<pre><code>for (i = 2; i &lt; 6; i++)     {\n\n\n  v[0]=i;\n  v[1]=6;\n  v[2]=0;\n  v[3]=1;\n</code></pre>\n\n<p>PARAMETERS DEFINITION\n      aa.w1=1;\n      aa.mu1=1;\n      aa.w2=6;\n      aa.mu2=1;\n      aa.eps=0;</p>\n\n<pre><code>   t=0.;\n</code></pre>\n\n<p>INTEGRATION COMMAND</p>\n\n<pre><code>while(t&lt;t_max){\n\n\n\nrk4(ecuaciones,v,4,t,dt);\n</code></pre>\n\n<p>EXPORT</p>\n\n<pre><code>fprintf(ptr,\"%lg\\t%lg\\t%lg\\t%lg\\t%lg\\n\",t,v[0],v[1],v[2],v[3]);\n\nt+=dt;\n  }}\n        fprintf(ptr,\"\\n\");\n\n  fclose(ptr);\n  return(0);\n}\n</code></pre>\n\n<p>AND HERE IS THE INTEGRATION ROUTINE (its fine)</p>\n\n<pre><code> void rk4(void deri(int , double [], double [], double ), \\\n double h[], int n, double t, double dt)\n {\n #define naux 26 \n\n int i;\n double k1[naux],k2[naux],k3[naux],k4[naux],h0[naux];\n double dt2, dt6;\n\n dt2=dt/2.;\n dt6=dt/6.;\n\n for (i = 0 ; i&lt;n; i++)\n h0[i] = h[i];\n\n deri(n,h0,k1,t);\n for (i =0 ; i&lt;n ; i++)\n     h0[i]=h[i]+dt2*k1[i];\n\n deri(n,h0,k2,t+dt2);\n for (i =0 ; i&lt;n ; i++)\n h0[i]=h[i]+dt2*k2[i];\n\n deri(n,h0,k3,t+dt2);\n for (i =0 ; i&lt;n ; i++)\n     h0[i]=h[i]+dt*k3[i];\n\n deri(n,h0,k4,t+dt);\n for (i = 0 ; i&lt;n ; i++)\n {h0[i]=h[i]+dt*k4[i];};\n\n for (i =0; i&lt;n ; i++)\n h[i]=h[i]+dt6*(2.*(k2[i]+k3[i])+k1[i]+k4[i]);\n\n return;\n }\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "gdb"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1468366179, "post_id": 38340354, "comment_id": 64095148, "body": "It&#39;s unlikely the line you have marked is the issue.  You should paste the stack trace from gdb into your question to help narrow things down.  You should also consider creating a small complete example that recreates the crash."}, {"owner": {"reputation": 59, "user_id": 6338377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/772ce26545ee5909e980253736aa531f?s=128&d=identicon&r=PG&f=1", "display_name": "Allen ", "link": "https://stackoverflow.com/users/6338377/allen"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1468366780, "post_id": 38340354, "comment_id": 64095287, "body": "@RetiredNinja Sorry, I edited it."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1468367205, "post_id": 38340354, "comment_id": 64095385, "body": "<code>h=0x0</code>. Doesn&#39;t that ring bells for you? Getting a stacktrace is a good start but you can debug further by inspecting variable values. There are multiple ways to fix that depending on what the rest of your code does (which you haven&#39;t shown). One way is to immediately return NULL from <code>exist</code> if <code>h</code> is <code>NULL</code>. But that may or may not be correct depending on whether <code>h</code> is allowed to be NULL when passed to that function."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 6581076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b3386335102b76ca027284de77ba27c?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie Jones", "link": "https://stackoverflow.com/users/6581076/robbie-jones"}, "is_accepted": true, "score": 1, "last_activity_date": 1468370611, "last_edit_date": 1468370611, "creation_date": 1468367388, "answer_id": 38340550, "question_id": 38340354, "link": "https://stackoverflow.com/questions/38340354/segmentation-fault-when-run-c-program/38340550#38340550", "title": "Segmentation fault when run C program", "body": "<p>That line is the error.  GDB is telling you in</p>\n\n<pre><code>0x0000000000400baa in exist (h=0x0, data=0x644660 \"a\\n\") at G1.c:129\n</code></pre>\n\n<p>that <code>h</code> is a <code>NULL</code> pointer (pointing at address 0).  When you dereference it with <code>h-&gt;nodes[index]</code> you end up segfaulting.  The problem might be in your <code>add_to_hash</code> function when you set <code>HashTable *curr_table = h[strlen(data)];</code>.  <code>h[strlen(data)]</code> could be <code>NULL</code>, which is why <code>curr_table</code> (which you eventually pass as <code>h</code> to your <code>exist</code> function) is <code>NULL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": false, "score": 1, "last_activity_date": 1468368457, "creation_date": 1468368457, "answer_id": 38340689, "question_id": 38340354, "link": "https://stackoverflow.com/questions/38340354/segmentation-fault-when-run-c-program/38340689#38340689", "title": "Segmentation fault when run C program", "body": "<p>A call to</p>\n\n<pre><code>HashTable *curr_table = h[strlen(data)];\n</code></pre>\n\n<p>returns NULL. We know this because <code>gdb</code> reports the value of parameters passed to <code>exist</code> function:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x0000000000400baa in exist (h=0x0, data=0x644660 \"a\\n\") at G1.c:129\n                             ^^^^^^\n129             list = h-&gt;nodes[index];\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6338377, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/772ce26545ee5909e980253736aa531f?s=128&d=identicon&r=PG&f=1", "display_name": "Allen ", "link": "https://stackoverflow.com/users/6338377/allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 38340550, "answer_count": 2, "score": 0, "last_activity_date": 1468370611, "creation_date": 1468365920, "last_edit_date": 1468367154, "question_id": 38340354, "link": "https://stackoverflow.com/questions/38340354/segmentation-fault-when-run-c-program", "title": "Segmentation fault when run C program", "body": "<p>I just got a error message said that there is a segmentation fault in my program. I use <code>gdb</code> traced it and below is where I found it. How can I fix it?</p>\n\n<pre><code>void add_to_hash(HashTable **h, char *data)\n{\nint index = hash_value(data);\nHashTable *curr_table = h[strlen(data)];\nNode * exist_node = exist(curr_table, data);\n\nif (exist_node == NULL) \n{\n    Node *new_node = (Node*)malloc(sizeof(Node));\n    if (new_node == NULL) {\n        printf(\"Error allocating memory for new bucket\\n\");\n        exit(1);\n    }\n    if (data != NULL) \n    {\n        new_node-&gt;data = strdup(data);\n        new_node-&gt;next = curr_table-&gt;nodes[index];\n        curr_table-&gt;nodes[index] = new_node;\n        free(data);                                 \n    }\n}\nelse {\n    return;\n}\n}\n\n//Rerturn the exist data.\nNode* exist(HashTable* h, char* data)\n{\nint index = hash_value(data);\nNode* list = NULL; \nlist = h-&gt;nodes[index];//gdb told me this line has error.\nif (list) {\n    for (; list != NULL; list = list-&gt;next) {\n        if (strcmp(data, list-&gt;data) == 0) {\n            return list;\n        }\n    }\n}\nreturn NULL;\n}\n</code></pre>\n\n<p>This is what I got from <code>gdb</code></p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x0000000000400baa in exist (h=0x0, data=0x644660 \"a\\n\") at G1.c:129\n129             list = h-&gt;nodes[index];\n(gdb) bt\n#0  0x0000000000400baa in exist (h=0x0, data=0x644660 \"a\\n\") at G1.c:129\n#1  0x0000000000400afa in add_to_hash (h=0x603250, data=0x644660 \"a\\n\") at G1.c:105\n#2  0x0000000000400920 in main (argc=3, argv=0x7fffffffebf8) at G1.c:55\n</code></pre>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1469746466, "post_id": 38340179, "comment_id": 64678536, "body": "Please remember to &quot;accept&quot; your favourite answer.  This allows SO to properly archive the question, and it gets you a few more points."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1468364774, "creation_date": 1468364774, "answer_id": 38340200, "question_id": 38340179, "link": "https://stackoverflow.com/questions/38340179/c-recursion-return-statement/38340200#38340200", "title": "C recursion : return statement", "body": "<p>If you return <strong>multiply(x, y)</strong>, you will loop forever on the same call parameters.  To have proper recursion, you have to reduce the problem to a simpler case.  That simpler case is to reduce the multiplier by 1.</p>\n"}, {"tags": [], "owner": {"reputation": 17603, "user_id": 178082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NZfMG.jpg?s=128&g=1", "display_name": "Nick Larsen", "link": "https://stackoverflow.com/users/178082/nick-larsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1468364839, "creation_date": 1468364839, "answer_id": 38340210, "question_id": 38340179, "link": "https://stackoverflow.com/questions/38340179/c-recursion-return-statement/38340210#38340210", "title": "C recursion : return statement", "body": "<p>If you didn't add the value, it would simply return <code>y</code> as the final result of the top most recursive call.</p>\n\n<p>X * Y = X, Y times</p>\n\n<p>e.g.  4 * 5 = 4 + 4 + 4 + 4 + 4</p>\n\n<p>This logic is expanding that evaluation, and just returning the last value would only evaluate to Y one time.</p>\n"}, {"tags": [], "owner": {"reputation": 659, "user_id": 2096747, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Tsy2J.png?s=128&g=1", "display_name": "Robert Lucian Chiriac", "link": "https://stackoverflow.com/users/2096747/robert-lucian-chiriac"}, "is_accepted": false, "score": 0, "last_activity_date": 1468366063, "last_edit_date": 1468366063, "creation_date": 1468365732, "answer_id": 38340327, "question_id": 38340179, "link": "https://stackoverflow.com/questions/38340179/c-recursion-return-statement/38340327#38340327", "title": "C recursion : return statement", "body": "<p>Every recursive function is made up of 2 elements:</p>\n\n<ol>\n<li>The repetitive condition</li>\n<li>The stopping condition</li>\n</ol>\n\n<p>Without a stopping condition, the program would enter an infinite loop.\nIn this case, it would mean the program would continually call beyond <code>x == 1</code>.</p>\n\n<p>Instead of stopping calling itself at <code>x == 1</code>, the program would also call <code>multiply(-1,y)</code>, <code>multiply(-2,y)</code> ... to infinite.</p>\n\n<p>Ultimately, you need to sum the <strong>y</strong> for <strong>x</strong> times. And to do this you need to return <strong>x</strong> times the value of <strong>y</strong>. And in this case, the repetitive condition adds <strong>y</strong> for <strong>x-1</strong> times and for the stopping condition you only need one more time.</p>\n\n<p>You also could have done it this way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunsigned int multiply(unsigned int x, unsigned int y)\n{\n    if (x == 0)\n    {\n        /* Terminating case */\n        return 0;\n    }\n    else if (x &gt; 0)\n    {\n        /* Recursive step */\n        return y + multiply(x-1, y);\n    }\n}\n\nint main() {\n    printf(\"3 times 5 is %d\", multiply(3, 5));\n    return 0;\n}\n</code></pre>\n\n<p>Here you can see the repetitive is concerted with adding the <strong>y</strong> for exactly <strong>x</strong> times. Logically, the stopping condition would require to return 0, because we don't need to add anymore the <strong>y</strong> value. We already have added it for <strong>x</strong> times. </p>\n"}, {"tags": [], "owner": {"reputation": 456, "user_id": 3196247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wVD3A.jpg?s=128&g=1", "display_name": "Picodev", "link": "https://stackoverflow.com/users/3196247/picodev"}, "is_accepted": false, "score": 1, "last_activity_date": 1468376887, "creation_date": 1468376887, "answer_id": 38341707, "question_id": 38340179, "link": "https://stackoverflow.com/questions/38340179/c-recursion-return-statement/38341707#38341707", "title": "C recursion : return statement", "body": "<p>Recursion is simply doing the same operations with smaller inputs. Can we express multiplication of two numbers with smaller numbers ? Sure ! Finding the way to do this is finding a recursive definition of multiplication. First we will try to express x*y with a smaller x, like x-1.\nFrom the simple fact that :</p>\n\n<pre><code>(x-1)*y = x*y - y\n</code></pre>\n\n<p>we find :</p>\n\n<pre><code>x*y=(x-1)*y + y\n</code></pre>\n\n<p>Remember that we will always have to find a stoping step, here we know that</p>\n\n<pre><code>0*y=0\n</code></pre>\n\n<p>and we're done. This gives us even a simpler form of a recursive mul function as the one given by @RobertEagle.</p>\n\n<p>But let us take the thing further. x-1 is smaller than x, as y-1 is smaller than y. Exploring this fact gives us :</p>\n\n<pre><code>(x-1)*(y-1)=x*y-x-y+1\nx*y = (x-1)*(y-1) + x + y - 1\n</code></pre>\n\n<p>This time the stopping step would be \"if x or y is 0 then the result is 0\". Translating this into code :</p>\n\n<pre><code>unsigned multiply(unsigned x, unsigned y)\n{\n  if ( (x==0) || (y==0) )\n    return 0;\n  else\n    return x+y-1+multiply(x-1, y-1);\n}\n</code></pre>\n\n<p>This sort of recursion is not quite efficient because we do not express the recursion with something really smaller. What if we try to halve one of the parameters ?\nIf x is even we can write :</p>\n\n<pre><code>x*y=2*(x/2)*y=(x/2)*(2*y)\n</code></pre>\n\n<p>If x is odd we can write :</p>\n\n<pre><code>x*y=(x-1+1)*y=(x-1)*y+y=((x-1)/2)*(2*y)+y\n</code></pre>\n\n<p>Multiplying (resp. dividing) by 2 can be achieved with left (resp. right) shifting :</p>\n\n<pre><code>unsigned multiply(unsigned x, unsigned y)\n{\n  if (x==0)\n    return 0;\n  else if (x%2==0)\n    return multiply(x&gt;&gt;1, y&lt;&lt;1);\n  else\n    return y+multiply((x-1)&gt;&gt;1, y&lt;&lt;1);\n}\n</code></pre>\n\n<p>This method will take less steps than the first one. The \"more\" you're getting smaller, the \"more\" you're getting faster, in general.</p>\n"}], "owner": {"reputation": 1, "user_id": 6581729, "user_type": "registered", "profile_image": "https://graph.facebook.com/1739182276297636/picture?type=large", "display_name": "Olga Plishko", "link": "https://stackoverflow.com/users/6581729/olga-plishko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1468376887, "creation_date": 1468364627, "last_edit_date": 1468365893, "question_id": 38340179, "link": "https://stackoverflow.com/questions/38340179/c-recursion-return-statement", "title": "C recursion : return statement", "body": "<p>I just started learning C and I faced the following problem:\nin the first <strong>/<em>recursive step</em>/</strong> I do not understand why we cannot simply return <strong>multiply(x, y)</strong>? Why do we need to <em>add a value to y and only then return it?</em></p>\n\n<p>The code is below.\nThank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nunsigned int multiply(unsigned int x, unsigned int y)\n{\n    if (x == 1)\n    {\n        /* Terminating case */\n        return y;\n    }\n    else if (x &gt; 1)\n    {\n        /* Recursive step */\n        return y + multiply(x-1, y);\n    }\n\n    /* Catch scenario when x is zero */\n    return 0;\n}\n\nint main() {\n    printf(\"3 times 5 is %d\", multiply(3, 5));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-leaks"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1468362560, "post_id": 38339763, "comment_id": 64094130, "body": "You need to post your complete code if you want to know how to fix the problem."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1468362899, "post_id": 38339763, "comment_id": 64094253, "body": "Note that <code>Order *A; while (A != NULL)</code> is pretty suspicious, since it is very well possible that <code>A</code> is <code>NULL</code> when it is declared. I would rather use a <code>do</code>-<code>while</code> loop instead, or an infinite loop (<code>while (TRUE)</code>) and a <code>break</code>."}, {"owner": {"reputation": 327, "user_id": 6581455, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ZRKH7WIHZVQ/AAAAAAAAAAI/AAAAAAAAChM/YJPpyK-CRro/photo.jpg?sz=128", "display_name": "The-Han-Emperor", "link": "https://stackoverflow.com/users/6581455/the-han-emperor"}, "edited": false, "score": 0, "creation_date": 1468363882, "post_id": 38339763, "comment_id": 64094555, "body": "thanks. I did in that way and get rid of 32 bytes, and there is still 16 bytes left which is one Node memory leak."}, {"owner": {"reputation": 327, "user_id": 6581455, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ZRKH7WIHZVQ/AAAAAAAAAAI/AAAAAAAAChM/YJPpyK-CRro/photo.jpg?sz=128", "display_name": "The-Han-Emperor", "link": "https://stackoverflow.com/users/6581455/the-han-emperor"}, "edited": false, "score": 0, "creation_date": 1468364090, "post_id": 38339763, "comment_id": 64094610, "body": "Nvm, I add free(A) inside the feof function which frees the space. thx again"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 6510699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1053338551369811/picture?type=large", "display_name": "Rafael Lagemann", "link": "https://stackoverflow.com/users/6510699/rafael-lagemann"}, "is_accepted": false, "score": 1, "last_activity_date": 1468363035, "creation_date": 1468363035, "answer_id": 38339951, "question_id": 38339763, "link": "https://stackoverflow.com/questions/38339763/how-do-i-fix-this-memory-leak-in-c/38339951#38339951", "title": "How do I fix this memory leak in c", "body": "<p>You only need to allocate memory to A when you instante it.</p>\n\n<p><code>Order * A = (Order *)malloc(sizeof(Order));</code></p>\n\n<p>The <code>(Order *)</code> before <code>malloc(...)</code> is a cast to type Order*, because malloc returns void* type.</p>\n\n<p>In your <code>while</code> loop you're allocating memory to A indefinitely <i>(while A!= NULL)</i>, this is why you got a memory leak.</p>\n\n<p>Tip (cause I think here is not the right place to explain it):You should read more about malloc() and free() functions. You maybe find it useful, cause you probably also need to modify the declaration of you <code>Order **b</code> and/or re-thinking parts of your algorithim (I didn't test it, sorry x)).</p>\n"}], "owner": {"reputation": 327, "user_id": 6581455, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ZRKH7WIHZVQ/AAAAAAAAAAI/AAAAAAAAChM/YJPpyK-CRro/photo.jpg?sz=128", "display_name": "The-Han-Emperor", "link": "https://stackoverflow.com/users/6581455/the-han-emperor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1468363035, "creation_date": 1468361889, "last_edit_date": 1468362599, "question_id": 38339763, "link": "https://stackoverflow.com/questions/38339763/how-do-i-fix-this-memory-leak-in-c", "title": "How do I fix this memory leak in c", "body": "<p>I have to create a function allocate all memory needed, read in data, and create linked list accordingly.\nthere is a memory leak happens at A= malloc(sizeof(Order)); It works well but give me a memory leak. can anyone help?</p>\n\n<pre><code>typedef struct o_\n{\n    int ID; //the order number\n    int daysInQueue; //the number of days old the order is\n    struct o_* nextOrder; //to the next order in the list\n} Order;\n\n\nOrder** importLists(char* filename)\n{\n    FILE *fptr = fopen(filename,\"r\");\n    Order ** b = malloc(sizeof(Order*)*4);\n\n    int i;\n    for ( i=0; i&lt; 4; i++)\n    {\n        b[i]=NULL;\n    }\n    Order* A;\n    while (A != NULL)\n    {\n        A = malloc(sizeof(Order));\n        fscanf(fptr,\"%d%d%d\", &amp;A -&gt;ID, &amp;A -&gt; daysInQueue, &amp;i );\n        if (feof(fptr))\n        {\n            break;\n        }\n        A-&gt; nextOrder = b[i];\n        b[i]=A;\n\n    }\n    fclose(fptr);\n\n    return b;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1468363727, "post_id": 38339703, "comment_id": 64094507, "body": "Suggest <code>month = month + 13;</code> --&gt; <code>month = month + 12;</code>"}, {"owner": {"reputation": 4480, "user_id": 5595825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185741aa854cd8ac5a7720f639cddbf8?s=128&d=identicon&r=PG&f=1", "display_name": "pah", "link": "https://stackoverflow.com/users/5595825/pah"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1468364652, "post_id": 38339703, "comment_id": 64094781, "body": "I agree with @chux, the <code>g()</code> function in the code does not reflect the formula you described in the question. Either you put a <code>else</code> after <code>month = month + 13;</code> or you sum 12 instead of 13, since month will always be incremented by <code>month = month +1;</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1468364824, "post_id": 38339703, "comment_id": 64094828, "body": "Or convert both of your dates to <code>time_t</code> and find the difference (e.g. <code>difftime</code>), then simply <code>days = ( seconds &#47; (60*60*24)</code> (you can continue to get the additional hours, min secs from the fractional part if you like)"}, {"owner": {"reputation": 191, "user_id": 6456929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/M2AEG.jpg?s=128&g=1", "display_name": "maverick", "link": "https://stackoverflow.com/users/6456929/maverick"}, "edited": false, "score": 0, "creation_date": 1468366166, "post_id": 38339703, "comment_id": 64095143, "body": "I added the else. I get 198 instead of 202 days as an answer to the difference between August, 8 2004 and February 22, 2005. I&#39;ll update my code above. It is still wrong though."}, {"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "edited": false, "score": 0, "creation_date": 1468372532, "post_id": 38339703, "comment_id": 64096562, "body": "A google search shows a sample <a href=\"https://paste.teknik.io/Raw/2299\" rel=\"nofollow noreferrer\">implementation</a> of this.  No idea how the comments come up with 3 for the day for both the 8th and 22nd of the month. Looks like a comment bug. Maybe you can&#39;t believe every code sample you find on the internet?"}, {"owner": {"reputation": 191, "user_id": 6456929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/M2AEG.jpg?s=128&g=1", "display_name": "maverick", "link": "https://stackoverflow.com/users/6456929/maverick"}, "edited": false, "score": 0, "creation_date": 1468409899, "post_id": 38339703, "comment_id": 64113621, "body": "@evaitl- Yea I saw that page, and I am glad you mentioned it. I wish I had put a link to it instead of typing the calculation; but some may not have looked there. I am following the same formula, but with my own code. Does anyone know how they get the day value? That is what I can not figure out."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1468451899, "post_id": 38339703, "comment_id": 64138739, "body": "Well tested and efficient date algorithms which are valid over a ridiculously large range:  <a href=\"http://howardhinnant.github.io/date_algorithms.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/date_algorithms.html</a>  They happen to count 1970-01-01 as day 0, but the algorithms are valid +/- millions of years (more if you compute with 64 bits).  Fully documented.  Complete derivation."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1468489620, "post_id": 38339703, "comment_id": 64152495, "body": "some years ago, I worked on an embedded system, where it had a 32 bit clock counter, and I had to make it produce an accurate date from &#39;now&#39; to the year 3000 (which is beyond the ability of a 32 bit clock register to directly count.  I spent several months trying to enhance the existing code, before I finally figgured out how to do it.  It was not at all simple"}], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1468363946, "creation_date": 1468363946, "answer_id": 38340085, "question_id": 38339703, "link": "https://stackoverflow.com/questions/38339703/how-to-calculate-the-number-of-days-between-two-different-dates/38340085#38340085", "title": "how to calculate the number of days between two different dates", "body": "<p>In windows you could do something like this:</p>\n\n<pre><code>__int64  since_ft, until_ft;\nSYSTEMTIME since, until;\n\nSystemTimeToFileTime(&amp;since, (LPFILETIME)&amp;since_ft);\nSystemTimeToFileTime(&amp;until, (LPFILETIME)&amp;until_ft);\nint days = (int)((until_ft - since_ft) / (__int64)864000000000);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1468375685, "creation_date": 1468375685, "answer_id": 38341553, "question_id": 38339703, "link": "https://stackoverflow.com/questions/38339703/how-to-calculate-the-number-of-days-between-two-different-dates/38341553#38341553", "title": "how to calculate the number of days between two different dates", "body": "<blockquote>\n  <p>I added the else. I get 198 instead of 202 days as an answer to the difference between August, 8 2004 and February 22, 2005. I'll update my code above. It is still wrong though.</p>\n</blockquote>\n\n<p>Actually, your code may be correct.</p>\n\n<p>As a cross check, below is an approach that uses <code>mktime</code> [<em>Side note:</em> which handles leap years] to get absolute times, takes the difference, and divides to get the number of days. This is similar to what David was suggesting.</p>\n\n<p>Its output is <code>198</code>, just like yours. I think it's pretty accurate, but even with an off-by-one error, that would still make the answer <code>197-199</code>. IMO, <code>202</code> is just too high.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n\ntime_t\ntimeof(int mon,int day,int yr)\n{\n    struct tm tm;\n    time_t tod;\n\n    memset(&amp;tm,0,sizeof(tm));\n\n    tm.tm_year = yr - 1900;\n    tm.tm_mon = mon - 1;\n    tm.tm_mday = day;\n\n    // minimize funny business with DST crossover or [gag] leap seconds\n    tm.tm_hour = 1;\n\n    tod = mktime(&amp;tm);\n\n    return tod;\n}\n\nint\nmain(void)\n{\n    time_t t1;\n    time_t t2;\n    time_t td;\n\n    t1 = timeof(8,8,2004);\n    t2 = timeof(2,22,2005);\n\n    td = t2 - t1;\n    td /= (24 * 60 * 60);\n\n    printf(\"%ld\\n\",td);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 6456929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/M2AEG.jpg?s=128&g=1", "display_name": "maverick", "link": "https://stackoverflow.com/users/6456929/maverick"}, "edited": false, "score": 0, "creation_date": 1468384492, "post_id": 38342587, "comment_id": 64099187, "body": "This makes me feel better about what I have. I posted the sample calculation the author provided to check our answer against. There may be a typo some where in original calculation."}], "tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 0, "last_activity_date": 1468383295, "creation_date": 1468383295, "answer_id": 38342587, "question_id": 38339703, "link": "https://stackoverflow.com/questions/38339703/how-to-calculate-the-number-of-days-between-two-different-dates/38342587#38342587", "title": "how to calculate the number of days between two different dates", "body": "<p>By the way, you can check your date arithmetic quickly with the GNU date utility: </p>\n\n<pre><code>$ date -d 'August 8 2004 + 198 days'\nTue Feb 22 00:00:00 EST 2005\n</code></pre>\n\n<p>So I'd stick with 198 as an answer.  </p>\n"}], "owner": {"reputation": 191, "user_id": 6456929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/M2AEG.jpg?s=128&g=1", "display_name": "maverick", "link": "https://stackoverflow.com/users/6456929/maverick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1468384959, "creation_date": 1468361573, "last_edit_date": 1468384959, "question_id": 38339703, "link": "https://stackoverflow.com/questions/38339703/how-to-calculate-the-number-of-days-between-two-different-dates", "title": "how to calculate the number of days between two different dates", "body": "<p>I am using a formula to calculate the number of days between two different days in calendar, and I am not getting the same answers as the examples I am looking at. I am trying to follow the following formula: </p>\n\n<p>N = 1461 x f(year, month) / 4 + g(month) / 5 + day</p>\n\n<p>Where \nf (year, month) = year -1 if month &lt;= 2. Otherwise the same value is returned. \ng(month) = month + 13 if month &lt;= 2. Otherwise it is month+1.</p>\n\n<p>Here is how I implemented the above formula: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define DEBUG\n\n  struct date\n    {\n      int month ;\n      int day ;\n      int year ;\n    };\n  int een (struct date _date)\n    {\n      int n;\n      #ifdef DEBUG\n      printf(\"inside of een function - here is what is in date %i/%i/%i \\n\", _date.month, _date.day, _date.year);\n      #endif\n      n = 1461 * f(_date.year, _date.month) / 4 + 153 * g(_date.month) / 5 + _date.day;\n      #ifdef DEBUG\n      printf(\"Here is the value of n %i \\n\", n);\n      #endif\n      return n;\n    }\n  int f(int year, int month)\n    {\n      if (month &lt;= 2)\n      year = (year - 1);\n      return year;\n    }\n   int g(int month)\n    {\n      if (month &lt;= 2)\n        month = month + 13;\n      else\n      month = month +1;\n      return month;\n    }\nint main (void)\n{\n  struct date first_Day, second_Day;\n    int days;\n  int een (struct date _date);\n  printf (\"Enter the first date (mm dd yyyy) :\");\n  scanf (\"%i%i%i\", &amp;first_Day.month, &amp;first_Day.day, &amp;first_Day.year);\n  #ifdef DEBUG\n  printf(\"Here is what you entered as the first date %i/%i/%i \\n\", first_Day.month, first_Day.day, first_Day.year);\n  #endif\n  printf (\"Enter Today's date (mm dd yyyy) :\");\n  scanf (\"%i%i%i\", &amp;second_Day.month, &amp;second_Day.day, &amp;second_Day.year);\n  days = een (second_Day) - een (first_Day);\n  printf(\"Here are the number of days between the dates you put in  %i \\n \", days);\n}\n</code></pre>\n\n<p>One example I am looking at calculates N for August 8, 2004 as follows: </p>\n\n<p>N = 1461 x f(2004, 8) / 4 + 153 x g(8) / 5 + 3 </p>\n\n<p>I know the above code has some issues. I also don't know how he/she gets 3 for August 8th. I am hoping someone may have used this formula before, and they can explain if the example above is wrong or that it needs additional explanation. I have looked at other posts about this type of code, and they don't discuss my question. I have also looked into other sites, but have not been able to find the answer. I know that timeanddate.com has a calculator, and according to it, my code above does not work. </p>\n\n<p>I'll wait a bit longer to see if anyone else has used this formula before, and get some feedback. I'll then just use 12 in the g() function. </p>\n\n<p>Here are two sample calculations according to the author. For August, 8 2004 he gets: </p>\n\n<pre><code>N= 1461 x f(2004, 8) / 4 + 153 x g(8) / 5 + 3 \n= (1461 x 2004) / 4 + (153 x 9) / 5 + 3 \n= 2,927,844 / 4 + (153 x 9) / 5 + 3\n= 731,961 + 275 + 3\n= 732,239\n</code></pre>\n\n<p>For Feb 22, 2005 he gets: </p>\n\n<pre><code>1461 x f(2005, 2) / 4 + 153 x g(2) / 5 + 21\n(1461 x 2004) / 4 + 2295 / 5 + 21 \n731961 + 459 + 21 \n732,441\n</code></pre>\n\n<p>Number of days in between: 731,441 - 732,239 = 202 </p>\n\n<p>Frankly I am not sure how he comes up with 3 and 21 for the \"day\" values in the above samples. </p>\n\n<p>I also checked my answer <a href=\"http://www.timeanddate.com/date/durationresult.html?m1=08&amp;d1=08&amp;y1=2004&amp;m2=2&amp;d2=22&amp;y2=2005&amp;ti=on\" rel=\"nofollow\">here</a> and it says 199 days. I think I would be ok if I could just figure out how the day variable for the above dates was calculated. I guess there is some variance, which depends on how the extra four hours in each year is treated.</p>\n"}, {"tags": ["c", "windows", "gcc", "compiler-errors", "mingw-w64"], "answers": [{"tags": [], "owner": {"reputation": 3629, "user_id": 631615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8774bd471bec0899483c832ea428436?s=128&d=identicon&r=PG", "display_name": "librik", "link": "https://stackoverflow.com/users/631615/librik"}, "is_accepted": false, "score": 2, "last_activity_date": 1468382498, "creation_date": 1468382498, "answer_id": 38342473, "question_id": 38339669, "link": "https://stackoverflow.com/questions/38339669/gcc-compiling-error-64-bit-mode-not-compiled-in/38342473#38342473", "title": "GCC compiling error: 64-bit mode not compiled in", "body": "<p><code>i686</code> is a 32-bit processor.  You downloaded the wrong compiler, since you got the one that produces code for a 32-bit processor.  Uninstall it, and look for an <code>x86_64</code> compiler instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 5784845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R1Nnr.jpg?s=128&g=1", "display_name": "Eliane Pinnheiro", "link": "https://stackoverflow.com/users/5784845/eliane-pinnheiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1468382498, "creation_date": 1468361417, "question_id": 38339669, "link": "https://stackoverflow.com/questions/38339669/gcc-compiling-error-64-bit-mode-not-compiled-in", "title": "GCC compiling error: 64-bit mode not compiled in", "body": "<p>I have installed gcc(i686-posix-dwarf, Built by MinGW-W64 project) 6.1.0.</p>\n\n<p>When I type at the mingw-w64 prompt : \ngcc --version</p>\n\n<p>I've got the message :\ngcc (i686-posix-dwarf, Built by MinGW-W64 project) 6.1.0</p>\n\n<p>When I build an object :\ngcc -Wall -m64 myprogram.c</p>\n\n<p>I've got the message :\nsorry, unimplemented: 64-bit mode not compiled in</p>\n\n<p>Could anybody help me? Thanks</p>\n"}, {"tags": ["c", "linux", "multithreading", "emulation", "chip-8"], "answers": [{"comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1468366097, "post_id": 38340293, "comment_id": 64095126, "body": "+1 I agree with this. Keep it single-threaded or involve OS-primitives like signals, that can be set to fire periodically. Usable for emulating hw-timers or systick interrupts."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1468368607, "post_id": 38340293, "comment_id": 64095671, "body": "@MortenJensen Not signals. Signals are even worse than threads -- they&#39;re called asynchronously (interrupting any active system calls!), and most operations are unsafe to perform in signal handlers."}, {"owner": {"reputation": 263, "user_id": 5397930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d73bc3e36add5acaa6a689d71ae62c57?s=128&d=identicon&r=PG&f=1", "display_name": "logo_writer", "link": "https://stackoverflow.com/users/5397930/logo-writer"}, "edited": false, "score": 0, "creation_date": 1468379373, "post_id": 38340293, "comment_id": 64098035, "body": "That&#39;s pretty clever! I guess I will implement method 1. Thanks for the response!"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1468365457, "creation_date": 1468365457, "answer_id": 38340293, "question_id": 38339445, "link": "https://stackoverflow.com/questions/38339445/chip8-in-c-how-to-correctly-handle-the-delay-timer/38340293#38340293", "title": "CHIP8 in C - How to correctly handle the delay timer?", "body": "<p>Don't use threads and synchronization primitives (semaphores, shared memory, etc) for this. In fact, I'd go as far as to say: don't use threads for <em>anything</em> unless you explicitly need multi-processor concurrency. Synchronization is difficult to get right, and even more difficult to debug when you get it wrong.</p>\n\n<p>Instead, figure out a way to implement this in a single thread. I'd recommend one of two approaches:</p>\n\n<ol>\n<li><p>Keep track of the time the last value was written to the timer register. When reading from the register, calculate how long ago it was written to, and subtract an appropriate value from the result.</p></li>\n<li><p>Keep track of how many instructions are being executed overall, and subtract 1 from the timer register every N instructions, where N is a large number such that N instructions is about 1/60 second.</p></li>\n</ol>\n"}], "owner": {"reputation": 263, "user_id": 5397930, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d73bc3e36add5acaa6a689d71ae62c57?s=128&d=identicon&r=PG&f=1", "display_name": "logo_writer", "link": "https://stackoverflow.com/users/5397930/logo-writer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 0, "accepted_answer_id": 38340293, "answer_count": 1, "score": 1, "last_activity_date": 1468365457, "creation_date": 1468360276, "last_edit_date": 1468360654, "question_id": 38339445, "link": "https://stackoverflow.com/questions/38339445/chip8-in-c-how-to-correctly-handle-the-delay-timer", "title": "CHIP8 in C - How to correctly handle the delay timer?", "body": "<p><strong>TL;DR</strong> I need to emulate a timer in C that allows concurrent writes and reads, whilst preserving constant decrements at 60 Hz (not exactly, but approximately accurate). It will be part of a Linux CHIP8 emulator. Using a thread-based approach with shared memory and semaphores raises some accuracy problems, as well as race conditions depending on how the main thread uses the timer.</p>\n\n<p><em>Which is the best way to devise and implement such a timer?</em></p>\n\n<hr>\n\n<p>I am writing a Linux CHIP8 interpreter in C, module by module, in order to dive into the world of emulation.</p>\n\n<p>I want my implementation to be as accurate as possible with the specifications. In that matter, timers have proven to be the most difficult modules for me.</p>\n\n<p>Take for instance the delay timer. In the specifications, it is a \"special\" register, initally set at 0. There are specific opcodes that set a value to, and get it from the register.</p>\n\n<p>If a value different from zero is entered into the register, it will automatically start decrementing itself, at a frequency of 60 Hz, stopping once zero is reached.</p>\n\n<p>My idea regarding its implementation consists of the following:</p>\n\n<ol>\n<li><p>The use of an ancillary thread that does the decrementing automatically, at a frequency of nearly 60 Hz by using <code>nanosleep()</code>. I use <code>fork()</code> to create the thread for the time being.</p></li>\n<li><p>The use of shared memory via <code>mmap()</code> in order to allocate the timer register and store its value on it. This approach allows both the ancillary and the main thread to read from and write to the register.</p></li>\n<li><p>The use of a semaphore to synchronise the access for both threads. I use <code>sem_open()</code> to create it, and <code>sem_wait()</code> and <code>sem_post()</code> to lock and unlock the shared resource, respectively.</p></li>\n</ol>\n\n<p>The following code snippet illustrates the concept:</p>\n\n<pre><code>void *p = mmap(NULL, sizeof(int), PROT_READ | PROT_WRITE, MAP_ANONYMOUS | MAP_SHARED, -1, 0);\n/* Error checking here */\n\nsem_t *mutex = sem_open(\"timersem\", O_CREAT, O_RDWR, 1);\n/* Error checking and unlinking */\n\nint *val = (int *) p;\n*val = 120; // 2-second delay\n\npid_t pid = fork();\n\nif (pid == 0) {\n    // Child process\n    while (*val &gt; 0) { // Possible race condition\n        sem_wait(mutex); // Possible loss of frequency depending on main thread code\n        --(*val); // Safe access\n        sem_post(mutex);\n        /* Here it goes the nanosleep() */\n    }\n} else if (pid &gt; 0) {\n    // Parent process\n    if (*val == 10) { // Possible race condition\n        sem_wait(mutex);\n        *val = 50; // Safe access\n        sem_post(mutex);\n    }\n}\n</code></pre>\n\n<p>A potential problem I see with such implementation relies on the third point. If a program happens to <em>update</em> the timer register once it has reached a value <em>different from zero</em>, then the ancillary thread <strong>must not</strong> wait for the main thread to unlock the resource, or else the 60 Hz delay will not be fulfilled. This implies both threads may freely update and/or read the register (constant writes in the case of the ancillary thread), which obviously introduces race conditions.</p>\n\n<p>Once I have explained what I am doing and what I try to achieve, my question is this:</p>\n\n<p><em>Which is the best way to devise and emulate a timer that allows concurrent writes and reads, whilst preserving an acceptable fixed frequency?</em></p>\n"}, {"tags": ["java", "android", "c", "bluetooth", "arduino"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468368892, "post_id": 38339101, "comment_id": 64095742, "body": "Why use it at all? Why not just read?"}, {"owner": {"reputation": 15, "user_id": 6581466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40de748e5bb066c7c32b6e5699b58422?s=128&d=identicon&r=PG&f=1", "display_name": "zohar", "link": "https://stackoverflow.com/users/6581466/zohar"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468385460, "post_id": 38339101, "comment_id": 64099497, "body": "Originally I wanted to use it like so:"}, {"owner": {"reputation": 15, "user_id": 6581466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40de748e5bb066c7c32b6e5699b58422?s=128&d=identicon&r=PG&f=1", "display_name": "zohar", "link": "https://stackoverflow.com/users/6581466/zohar"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468385521, "post_id": 38339101, "comment_id": 64099515, "body": "Serial.available()&gt;=2"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468479396, "post_id": 38339101, "comment_id": 64146210, "body": "So why does your title say it is zero? What&#39;s the question here?"}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468483831, "post_id": 38368608, "comment_id": 64148635, "body": "So the answer is in hardware?"}, {"owner": {"reputation": 15, "user_id": 6581466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40de748e5bb066c7c32b6e5699b58422?s=128&d=identicon&r=PG&f=1", "display_name": "zohar", "link": "https://stackoverflow.com/users/6581466/zohar"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1468486741, "post_id": 38368608, "comment_id": 64150525, "body": "No, I have used the program from the link (edited answer)"}], "tags": [], "owner": {"reputation": 15, "user_id": 6581466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40de748e5bb066c7c32b6e5699b58422?s=128&d=identicon&r=PG&f=1", "display_name": "zohar", "link": "https://stackoverflow.com/users/6581466/zohar"}, "is_accepted": false, "score": 0, "last_activity_date": 1468486709, "last_edit_date": 1468486709, "creation_date": 1468483132, "answer_id": 38368608, "question_id": 38339101, "link": "https://stackoverflow.com/questions/38339101/i-am-trying-to-send-data-via-bluetooth-but-serial-available-always-return-0/38368608#38368608", "title": "I am trying to send data via bluetooth but Serial.available() always return 0", "body": "<p>Sorry for the unclarity, basically what I wanted to do is to check if I had any data available on the bluetooth serial connection. \nSo I hoped that Serial.available() would be more than 0 when I sent data.Yet, the Serial.available() and Serial.Read() didn't seemed to work when I sent data.\n<strong>* I have managed to solve the problem using the program from: <a href=\"http://www.circuitmagic.com/arduino/arduino-and-bluetooth-hc-06-to-control-the-led-with-android-device/\" rel=\"nofollow\">http://www.circuitmagic.com/arduino/arduino-and-bluetooth-hc-06-to-control-the-led-with-android-device/</a>  *</strong></p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 6504029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-m-YUW7FTEvs/AAAAAAAAAAI/AAAAAAAAABc/wTRHdPthYHg/photo.jpg?sz=128", "display_name": "Muhammad Salman Khalid", "link": "https://stackoverflow.com/users/6504029/muhammad-salman-khalid"}, "is_accepted": true, "score": 0, "last_activity_date": 1468564854, "creation_date": 1468564854, "answer_id": 38389437, "question_id": 38339101, "link": "https://stackoverflow.com/questions/38339101/i-am-trying-to-send-data-via-bluetooth-but-serial-available-always-return-0/38389437#38389437", "title": "I am trying to send data via bluetooth but Serial.available() always return 0", "body": "<p>I think you have connected Bluetooth module on serial RX,TX pins of arduino board. this is not the case. You need to use separate serial for communication with Bluetooth. You can use software serial for this purpose otherwise Bluetooth module won't work. \nThe reason behind this is that the arduino uses same serial pins to communicate with PC (Serial terminal and program load) so it cannot simultaneously send data to Bluetooth.</p>\n\n<p>Have a look at here: <a href=\"https://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/\" rel=\"nofollow\">https://bellcode.wordpress.com/2012/01/02/android-and-arduino-bluetooth-communication/</a></p>\n"}], "owner": {"reputation": 15, "user_id": 6581466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40de748e5bb066c7c32b6e5699b58422?s=128&d=identicon&r=PG&f=1", "display_name": "zohar", "link": "https://stackoverflow.com/users/6581466/zohar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1580, "favorite_count": 0, "accepted_answer_id": 38389437, "answer_count": 2, "score": 0, "last_activity_date": 1468739114, "creation_date": 1468358523, "last_edit_date": 1468739114, "question_id": 38339101, "link": "https://stackoverflow.com/questions/38339101/i-am-trying-to-send-data-via-bluetooth-but-serial-available-always-return-0", "title": "I am trying to send data via bluetooth but Serial.available() always return 0", "body": "<p>I have created an android app that (theoretically) sends data to the arduino via bluetooth.\nI know that I have managed to get connectivity(the led on the bluetooth module stopped blinking) but the Serial.available() isn't changing when I write some values.\nI have tried using different apps (from the play store) - no luck.</p>\n\n<p>The arduino code which suppose to read the data:</p>\n\n<pre><code>void setup() {\nSerial.begin(9600);\nSerial.println(\"Simple Motor Shield sketch\");\n}\nvoid loop() {\nif(Serial.available()&gt;0){\nSerial.println(\"in\");\nfor(int i=0;i&lt;=2;i++){\n  joystick[i] = Serial.read();\n}\nfor(int i=0;i&lt;=2;i++){\n  Serial.println(joystick[i]);\n}\ndelay(1);\n} \n}\n</code></pre>\n\n<p><strong><em>joystick[] is an int array</em></strong></p>\n\n<p>android code:</p>\n\n<pre><code>    bluetoothIn = new Handler() {\n        public void handleMessage(android.os.Message msg) {\n            if (msg.what == handlerState) {                                     //if message is what we want\n                String readMessage = (String) msg.obj;                                                                // msg.arg1 = bytes from connect thread\n                recDataString.append(readMessage);                                      //keep appending to string until ~\n                int endOfLineIndex = recDataString.indexOf(\"~\");                    // determine the end-of-line\n                if (endOfLineIndex &gt; 0) {                                           // make sure there data before ~\n                    String dataInPrint = recDataString.substring(0, endOfLineIndex);    // extract string\n                    int dataLength = dataInPrint.length();                          //get length of data received\n\n                    recDataString.delete(0, recDataString.length());                    //clear all string data\n                }\n            }\n        }\n    };\n\n    btAdapter = BluetoothAdapter.getDefaultAdapter();       // get Bluetooth adapter\n    checkBTState();\n\n    // Set up onClick listeners for buttons to send 1 or 0 to turn on/off LED\n    btnLeft.setOnClickListener(new View.OnClickListener() {\n        public void onClick(View v) {\n            mConnectedThread.write(\"0\");    // Send \"0\" via Bluetooth\n            Toast.makeText(getBaseContext(), \"Turn off LED\", Toast.LENGTH_SHORT).show();\n        }\n    });\n\n    btnRight.setOnClickListener(new View.OnClickListener() {\n        public void onClick(View v) {\n            mConnectedThread.write(\"1\");    // Send \"1\" via Bluetooth\n            Toast.makeText(getBaseContext(), \"Turn on LED\", Toast.LENGTH_SHORT).show();\n        }\n    });\n    layout_joystick.setOnTouchListener(new View.OnTouchListener() {\n        public boolean onTouch(View arg0, MotionEvent arg1) {\n            js.drawStick(arg1);\n            if (arg1.getAction() == MotionEvent.ACTION_DOWN\n                    || arg1.getAction() == MotionEvent.ACTION_MOVE) {\n                //int x = js.getX();\n                //int y = js.getY();\n                int angle = (int)js.getAngle();\n                int distance = (int)js.getDistance();\n                int maxDist = js.getOffset()+js.getLayoutHeight();\n\n                distance =(int)(distance/(maxDist/9));\n                angle=(int)(angle/40);\n                distance=Math.max(distance,-9);\n                distance=Math.min(distance,9);\n                angle=Math.max(angle,-9);\n                angle=Math.min(angle,9);\n                //mConnectedThread.write(String.valueOf(x));\n                //mConnectedThread.write(String.valueOf(y));\n                mConnectedThread.write(String.valueOf(angle));\n                mConnectedThread.write(String.valueOf(distance));\n                Log.i(\"Bluetooth\",\"Distance: \" + distance);\n                Log.i(\"Bluetooth\",\"Angle: \" + angle);\n\n            }\n\n            return true;\n        }\n    });\n}\n\nprivate BluetoothSocket createBluetoothSocket(BluetoothDevice device) throws IOException {\n\n    return  device.createRfcommSocketToServiceRecord(BTMODULEUUID);\n    //creates secure outgoing connecetion with BT device using UUID\n}\n\n@Override\npublic void onResume() {\n    super.onResume();\n\n    //Get MAC address from DeviceListActivity via intent\n    Intent intent = getIntent();\n\n    //Get the MAC address from the DeviceListActivty via EXTRA\n    address = intent.getStringExtra(DeviceListActivity.EXTRA_DEVICE_ADDRESS);\n\n    //create device and set the MAC address\n    BluetoothDevice device = btAdapter.getRemoteDevice(address);\n\n    try {\n        btSocket = createBluetoothSocket(device);\n    } catch (IOException e) {\n        Toast.makeText(getBaseContext(), \"Socket creation failed\", Toast.LENGTH_LONG).show();\n    }\n    // Establish the Bluetooth socket connection.\n    try\n    {\n        btSocket.connect();\n    } catch (IOException e) {\n        try\n        {\n            btSocket.close();\n        } catch (IOException e2)\n        {\n            //insert code to deal with this\n        }\n    }\n    mConnectedThread = new ConnectedThread(btSocket);\n    mConnectedThread.start();\n\n    //I send a character when resuming.beginning transmission to check device is connected\n    //If it is not an exception will be thrown in the write method and finish() will be called\n    mConnectedThread.write(\"0\");\n}\n\n@Override\npublic void onPause()\n{\n    super.onPause();\n    try\n    {\n        //Don't leave Bluetooth sockets open when leaving activity\n        btSocket.close();\n    } catch (IOException e2) {\n        //insert code to deal with this\n    }\n}\n\n//Checks that the Android device Bluetooth is available and prompts to be turned on if off\nprivate void checkBTState() {\n\n    if(btAdapter==null) {\n        Toast.makeText(getBaseContext(), \"Device does not support bluetooth\", Toast.LENGTH_LONG).show();\n    } else {\n        if (btAdapter.isEnabled()) {\n        } else {\n            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n            startActivityForResult(enableBtIntent, 1);\n        }\n    }\n}\n\n//create new class for connect thread\nprivate class ConnectedThread extends Thread {\n    private final InputStream mmInStream;\n    private final OutputStream mmOutStream;\n\n    //creation of the connect thread\n    public ConnectedThread(BluetoothSocket socket) {\n        InputStream tmpIn = null;\n        OutputStream tmpOut = null;\n\n        try {\n            //Create I/O streams for connection\n            tmpIn = socket.getInputStream();\n            tmpOut = socket.getOutputStream();\n        } catch (IOException e) { }\n\n        mmInStream = tmpIn;\n        mmOutStream = tmpOut;\n    }\n\n    public void run() {\n        byte[] buffer = new byte[256];\n        int bytes;\n\n        // Keep looping to listen for received messages\n        while (true) {\n            try {\n                bytes = mmInStream.read(buffer);            //read bytes from input buffer\n                String readMessage = new String(buffer, 0, bytes);\n                // Send the obtained bytes to the UI Activity via handler\n                bluetoothIn.obtainMessage(handlerState, bytes, -1, readMessage).sendToTarget();\n            } catch (IOException e) {\n                break;\n            }\n        }\n    }\n    //write method\n    public void write(String input) {\n        byte[] msgBuffer = input.getBytes();           //converts entered String into bytes\n        try {\n            mmOutStream.write(msgBuffer);                //write bytes over BT connection via outstream\n        } catch (IOException e) {\n            //if you cannot write, close the application\n            Toast.makeText(getBaseContext(), \"Connection Failure\", Toast.LENGTH_LONG).show();\n            finish();\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "string", "word", "between"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 7, "creation_date": 1468356468, "post_id": 38338361, "comment_id": 64091551, "body": "You will need a different variable to index <code>result</code> than you use to index <code>word</code>, because after the first insertion, they won&#39;t match. For example <code>int j = 0;</code> so that <code>result[j++] = word[i];</code> Then try using a similar technique to copy each letter of <code>a</code> and <code>b</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468425484, "post_id": 38340916, "comment_id": 64125303, "body": "Okay, this gets me started. However, the output will be incorrect if the sentence has more words. It should be every nth word, for the whole sentence - not just the first 3rd ad 4th words. How to proceed? I didn&#39;t manage to make it work."}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "reply_to_user": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468430144, "post_id": 38340916, "comment_id": 64128132, "body": "@jaked: You can change the sentence to be anything, given there is enough room for the output result.  For example, I changed my sentence to <code>char sentence[] = &quot;Another random sentence containing other random stuff&quot;</code>.  The output worked fine, and was not incorrect (the sentence had more words).  I was also able to insert the two words <i>anywhere else</i> in the sentence using this approach.  For example, I changed <code>spaces == 3</code> and <code>spaces == 4</code> in both the first and second loops to <code>spaces == 2</code> and <code>spaces == 5</code>.  The output looked fine: <code>Simple sentence one containing some random two words</code>."}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "reply_to_user": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468430170, "post_id": 38340916, "comment_id": 64128147, "body": "@jaked: Maybe I am misunderstanding your question?"}, {"owner": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468430689, "post_id": 38340916, "comment_id": 64128453, "body": "I meant if the input is: <code>Longer but still simple sentence containing more words</code> and the output will be: <code>Longer but still WORD1 simple WORD2 sentence containing more WORD1 words</code>"}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "reply_to_user": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468430846, "post_id": 38340916, "comment_id": 64128548, "body": "Ah, I see.  I will look into using the modulus operator with this approach."}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "reply_to_user": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468431067, "post_id": 38340916, "comment_id": 64128669, "body": "@jaked: I think I see what you mean.  Do you want, for example, WORD1 to appear every 3 words in the sentence, and WORD2 to appear every 4 words in the sentence?"}, {"owner": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468431138, "post_id": 38340916, "comment_id": 64128712, "body": "Exactly! I&#39;ve been trying to figure it out but with no success yet."}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "reply_to_user": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468431463, "post_id": 38340916, "comment_id": 64128897, "body": "Then, if your input is: <code>Longer but still simple sentence containing even more words</code>, then the output should be <code>Longer but still WORD1 simple WORD2 sentence containing WORD1 even more WORD2 words</code>?"}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "reply_to_user": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "edited": false, "score": 0, "creation_date": 1468433195, "post_id": 38340916, "comment_id": 64130009, "body": "@jaked: Aha!  I did it.  Will edit the answer to conform to your requests."}], "tags": [], "owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "is_accepted": true, "score": 0, "last_activity_date": 1468434498, "last_edit_date": 1495539850, "creation_date": 1468370334, "answer_id": 38340916, "question_id": 38338361, "link": "https://stackoverflow.com/questions/38338361/insert-string-every-nth-word/38340916#38340916", "title": "Insert string every Nth word", "body": "<p>Ok, here is what I came up with.  A detailed description of everything I did is provided in the comments for the code.</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_OUTPUT_LENGTH 200\n\nint main(int argc, char const *argv[]) {\n  /* You can replace the words defined below (\"one\" and \"two\") with any words\n  * you want to insert at the given positions.\n  */\n  char one[] = \"one\";\n  char two[] = \"two\";\n\n  char sentence[] = \"Longer but still simple sentence containing even more words\";\n  char result[MAX_OUTPUT_LENGTH];\n\n\n  int len = strlen(sentence);\n  int spaces = 0;\n  int k = 0; //See Weather Vane's comment for why you also need the variable k\n  int skipUntilAnotherSpace = 0;\n\n  for(int i = 0; i &lt; len; i++)\n  {\n      if(sentence[i] == ' ') {\n        spaces++;\n        skipUntilAnotherSpace = 0; //See my explanation below for why this is done.\n      }\n\n      if (k == 0) {\n        result[i] = sentence[i]; //Normally, we can use the variable \"i\" until our insertion\n      } else {\n        /* As Weather Vane's comment shows, after one insertion the positions you\n        * need to grab from and insert to will change.  You cannot continue\n        * to use \"i\". After the first insertion:\n        * Sentence:\n        * Simple sentence containing some random words\n        *                            ^ position 27\n        * Current value in result variable:\n        * Simple sentence containing one [you want to insert here]\n        *                                ^ position 31\n        * So, we will need to insert into result at position k, and grab the info\n        * from a different variable \"i\".\n        */\n        result[k] = sentence[i];\n        //Increment k since it will not be incremented regularly in the for loop\n        k++;\n      }\n      if((spaces % 3 == 0) &amp;&amp; spaces != 0 &amp;&amp; skipUntilAnotherSpace == 0)\n      {\n           int useVariableK = 0;\n           if (spaces &gt; 3) {\n              /* Since spaces must already have been == 4, we have switched over\n              to using variable K, so we must continue to do so */\n              useVariableK = 1;\n           }\n\n           if(!useVariableK) {\n           result[i] = ' '; //Add a space before we add the word \"one\"\n           i++; //Increment i since we added the spaces\n\n           int j;\n           for (j = 0; j &lt; strlen(one); j++) { //Add the word \"one\"\n             result[i + j] = one[j];\n           }\n           //Increment the variable i the correct # of times since we added the word \"one\":\n           i += (strlen (one));\n\n           //Add a space after the word \"one\":\n           result[i] = ' ';\n           k = i + 1; //Set k = to i + 1 to account for the space we just added\n\n           /* We need to revert back to where the variable \"i\" was before adding \"one\":\n\n            We used the variable i to temporarily store the positions\n            as we traversed across and added the word \"one\".  Then, we\n            moved i back to the original position so we could access\n            the correct position when using sentence[i] in the next iteration.\n\n            Note that we need the +1 in the line below because we actually\n            need to go back one more position than nessesary; when we re-enter\n            the loop it will increment i to be +1 again! (sneaky)\n           */\n           i -= (strlen (one) + 1);\n\n           /* Why we need the skipUntilAnotherSpace variable:\n           We cannot simply increment the \"spaces\" variable after this; we need\n           the number of spaces to conform to the number in the sentence, and\n           just because we have more spaces in the result, it woudn't make sense\n           to increment it for the sentence.\n\n           However, if we leave it the same, then the next time we will enter\n           this loop again since spaces == 3, and we don't want to enter this loop again;\n           we have done our job already!\n\n           So, we make sure not to enter the loop by setting the below variable\n           to 1.  We do not enter the loop unless skipUntilAnotherSpace == 1.\n           (If we even tried to increment the spaces variable, we would actually\n            end up going into the next loop because spaces would = 4 ;) )\n\n            Finally, we switch back skipUntilAnotherSpace to be 0 once\n            another space is detected in the sentence.\n           */\n           skipUntilAnotherSpace = 1;\n         } else {\n           //Use variable K like we do if spaces == 4:\n           /* Most of this loop is exactly identical to the previous one, except\n           that we don't need another space since it was already added before when\n           \"one\" was inserted, and we use the variable \"k\" instead of i. */\n           int j;\n           for (j = 0; j &lt; strlen(one); j++) {\n             result[k + j] = one[j];\n           }\n           k += (strlen (one));\n           result[k] = ' ';\n           k += 1;\n\n           //spaces++;\n           skipUntilAnotherSpace = 1;\n         }\n      }\n\n      if((spaces % 4 == 0) &amp;&amp; spaces != 0 &amp;&amp; skipUntilAnotherSpace == 0)\n      {\n         /* Most of this loop is exactly identical to the previous one, except\n         that we don't need another space since it was already added before when\n         \"one\" was inserted, and we use the variable \"k\" instead of i. */\n         int j;\n         for (j = 0; j &lt; strlen(two); j++) {\n           result[k + j] = two[j];\n         }\n         k += (strlen (two));\n         result[k] = ' ';\n         k += 1;\n\n         //spaces++;\n         skipUntilAnotherSpace = 1;\n      }\n\n  }\n\n  printf(\"%s.\\n\", result);\n  return 0;\n}\n</code></pre>\n\n<p><strong>Note</strong>: See <a href=\"https://stackoverflow.com/users/4142924/weather-vane\">Weather Vane's</a> comment on this question to further understand why the variable <code>k</code> was necessary (I have also explained it in the comments, I just think Weather Vane's version is a little more concise).</p>\n\n<p>The output produced by this code is:</p>\n\n<pre>\nLonger but still one simple two sentence containing one even more two words.\n</pre>\n\n<p>If you had changed the variables <code>one</code> and <code>two</code> to the values <em>\"hello\"</em> and <em>\"goodbye\"</em> respectively, the code would still be functional and produce:</p>\n\n<pre>\nLonger but still hello simple goodbye sentence containing hello even more goodbye words.\n</pre>\n\n<p>Basically, the code inserts the value in variable <code>one[]</code> every three words, and the value in variable <code>two[]</code> every four words in the sentence.</p>\n\n<p>I hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1468381946, "creation_date": 1468381946, "answer_id": 38342385, "question_id": 38338361, "link": "https://stackoverflow.com/questions/38338361/insert-string-every-nth-word/38342385#38342385", "title": "Insert string every Nth word", "body": "<p>There is nothing wrong with working down a string <em>character-by-character</em> and counting spaces (as long as you aggregate spaces, etc.), however, there is another approach to consider that may provide a bit more flexibility. Rather than searching for spaces, you can use <code>strtok</code> (in <code>string.h</code>) to <em>tokenize</em> your input string. Then, it is just a matter of counting <em>tokens</em> (words) and inserting your additions as the <em>nth</em> word (or words) at the appropriate position (index).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nenum { MAXC = 512 };\n\nint main (void) {\n\n    char *w1 = \"one\", *w2 = \"two\";              /* replacement words   */\n    int nth1 = 3, nth2 = 4;                     /* positions for w1/w2 */\n    char line[MAXC] = \"\", *p = NULL, *delim = \" \\t.,;\\n\";\n    char *fmt1 = \"%s\", *fmt2 = \" %s\";\n\n    while (fgets (line, MAXC, stdin)) { /* for each line read from stdin */\n        int idx = 0;                        /* tokenize line with strtok */\n        for (p = strtok (line, delim); p; p = strtok (NULL, delim)) {\n            printf (!idx ? fmt1 : fmt2, p); idx++;    /* print token */\n            if (idx == nth1) printf (fmt2, w1);   /* check and insert w1 */\n            if (idx == nth2) printf (fmt2, w2);   /* and w2 in nth pos   */\n        }\n        putchar ('\\n');\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> you can tailor the indexing to your needs. For instance you can increment the index <code>idx</code> after inserting the <em>nth</em> words to have them insert in sequence, etc...)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ echo \"Simple sentence containing some random words\" | ./bin/replacenthword\nSimple sentence containing one some two random words\n</code></pre>\n\n<p>Since you are not hardcoding the string to operate on, you can now replace the <em>nth1</em> or <em>nth2</em> word in any line you send it, in an entire file if you like, e.g.</p>\n\n<p><strong>Example Input File</strong></p>\n\n<pre><code>$ cat dat/replcmt.txt\nSimple sentence containing some random words\nA quick brown fox jumps over the lazy dog\nFewer words\nThat's all folks\n</code></pre>\n\n<p><strong>Example Use/Output w/File</strong></p>\n\n<pre><code>$ ./bin/replacenthword &lt;dat/replcmt.txt\nSimple sentence containing one some two random words\nA quick brown one fox two jumps over the lazy dog\nFewer words\nThat's all folks one\n</code></pre>\n\n<p>If you only want to insert the <em>nth</em> word <em>if there is a following word</em>, then all you need do is change the order of test and print of each token.</p>\n\n<pre><code>    while (fgets (line, MAXC, stdin)) { /* for each line read from stdin */\n        int idx = 0;                        /* tokenize line with strtok */\n        for (p = strtok (line, delim); p; p = strtok (NULL, delim)) {\n            if (idx == nth1) printf (fmt2, w1);   /* check and insert w1 */\n            if (idx == nth2) printf (fmt2, w2);   /* and w2 in nth pos   */\n            printf (!idx ? fmt1 : fmt2, p); idx++;        /* print token */\n        }\n        putchar ('\\n');\n    }\n</code></pre>\n\n<p>Which would produce the same output, but omit replacement if <code>nth1</code> or fewer tokens (words) were present in the line, e.g.</p>\n\n<pre><code>$ ./bin/replacenthword &lt;dat/replcmt.txt\n...\nThat's all folks\n</code></pre>\n\n<p>Look over all the answers, and let me know if you have any questions.</p>\n"}], "owner": {"reputation": 25, "user_id": 6510860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06aa74a7fbd1124674ed8a10297d7a5b?s=128&d=identicon&r=PG&f=1", "display_name": "jaked", "link": "https://stackoverflow.com/users/6510860/jaked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 38340916, "answer_count": 2, "score": 1, "last_activity_date": 1468434498, "creation_date": 1468355425, "question_id": 38338361, "link": "https://stackoverflow.com/questions/38338361/insert-string-every-nth-word", "title": "Insert string every Nth word", "body": "<p>Add string between every Nth string. </p>\n\n<p>My idea: </p>\n\n<pre><code>char *a = \"one\", *b = \"two\";\n\nchar *word = \"Simple sentence containing some random words\";\nchar result[200];\n\n\nint len = strlen(word);\nint spaces = 0;\n\n\nfor(int i = 0; i &lt; len; i++)\n{\n    if(word[i] == ' ')\n        spaces++;\n\n    result[i] = word[i];\n\n    if(spaces % 3 == 0)\n    {\n        //copy a to result\n    }\n\n    if(spaces % 4 == 0)\n    {\n        //copy b to result\n    }\n\n}\n</code></pre>\n\n<p>So after we're ready, result would look like this:</p>\n\n<pre><code>Simple sentence containing one some two random words\n</code></pre>\n\n<p>I've tried strcpy, strcat and I've struggled with it for some days now but I really don't seem to get the logic behind here. How to proceed?</p>\n"}, {"tags": ["c", "r", "s-expression", "r-extension"], "answers": [{"tags": [], "owner": {"reputation": 42885, "user_id": 547331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39cb6add19f5b4f82c5152065d2065e7?s=128&d=identicon&r=PG", "display_name": "Martin Morgan", "link": "https://stackoverflow.com/users/547331/martin-morgan"}, "is_accepted": true, "score": 10, "last_activity_date": 1468364086, "creation_date": 1468364086, "answer_id": 38340103, "question_id": 38338270, "link": "https://stackoverflow.com/questions/38338270/how-to-return-a-named-vecsxp-when-writing-r-extensions/38340103#38340103", "title": "How to return a named VECSXP when writing R extensions", "body": "<p>See section 5.9.4 of <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-exts.html\" rel=\"noreferrer\">Writing R Extensions</a>. Allocate and populate a vector of names, and set the names attribute on the list.</p>\n\n<pre><code>library(inline)\nnamed &lt;- cfunction(signature(), '\n    /* allocate and populate list */\n    SEXP OS = PROTECT(allocVector(VECSXP, 2));\n    SET_VECTOR_ELT(OS, 0, allocMatrix(REALSXP, 5, 5));\n    SET_VECTOR_ELT(OS, 1, allocVector(REALSXP, 5));\n\n    /* create names */\n    SEXP nms = PROTECT(allocVector(STRSXP, 2));\n    SET_STRING_ELT(nms, 0, mkChar(\"foo\"));\n    SET_STRING_ELT(nms, 1, mkChar(\"bar\"));\n\n    /* assign names to list */\n    setAttrib(OS, R_NamesSymbol, nms);\n\n    /* cleanup and return */\n    UNPROTECT(2);\n    return OS;')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17207, "user_id": 1869097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041dd995b50ecacbea065e588a4f81cf?s=128&d=identicon&r=PG", "display_name": "nrussell", "link": "https://stackoverflow.com/users/1869097/nrussell"}, "is_accepted": false, "score": 4, "last_activity_date": 1468364190, "creation_date": 1468364190, "answer_id": 38340114, "question_id": 38338270, "link": "https://stackoverflow.com/questions/38338270/how-to-return-a-named-vecsxp-when-writing-r-extensions/38340114#38340114", "title": "How to return a named VECSXP when writing R extensions", "body": "<p>There may be a more idiomatic way to do this using R's C API functions -- I tend stick with C++ via Rcpp as it is safer and more concise -- but adding the following should work: </p>\n\n<pre><code> SEXP n = PROTECT(Rf_allocVector(STRSXP, 2));\n prtCnt++;\n SET_STRING_ELT(n, 0, Rf_mkChar(\"a\"));\n SET_STRING_ELT(n, 1, Rf_mkChar(\"b\"));\n Rf_setAttrib(OS, R_NamesSymbol, n);\n</code></pre>\n\n<p>However, I strongly suggest using Rcpp because you can eliminate much of the boilerplate that comes with R's C functions. Here are two alternatives, along with a modified version of your original function: </p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\n// [[Rcpp::export]]\nSEXP do_bla() {\n   int prtCnt = 0;\n   SEXP a = PROTECT(Rf_allocMatrix(REALSXP, 5, 5));\n   prtCnt++;\n   SEXP b = PROTECT(Rf_allocVector(REALSXP, 5));\n   prtCnt++;\n   SEXP OS = PROTECT(Rf_allocVector(VECSXP, 2));\n   prtCnt++;\n   SET_VECTOR_ELT(OS, 0, a);\n   SET_VECTOR_ELT(OS, 1, b);\n\n   SEXP n = PROTECT(Rf_allocVector(STRSXP, 2));\n   prtCnt++;\n   SET_STRING_ELT(n, 0, Rf_mkChar(\"a\"));\n   SET_STRING_ELT(n, 1, Rf_mkChar(\"b\"));\n   Rf_setAttrib(OS, R_NamesSymbol, n);\n\n   UNPROTECT(prtCnt);\n   return OS;\n}\n\n// [[Rcpp::export]]\nSEXP do_bla2() {\n    return Rcpp::List::create(\n        Rcpp::Named(\"a\") = Rcpp::NumericMatrix(5, 5),\n        Rcpp::Named(\"b\") = Rcpp::NumericVector(5));\n}\n\n// [[Rcpp::export]]\nSEXP do_bla3() {\n    Rcpp::NumericMatrix m(5, 5);\n    Rcpp::NumericVector v(5);\n    Rcpp::List res = Rcpp::List::create(m, v);\n    res.names() = Rcpp::CharacterVector::create(\"a\", \"b\");\n    return res;\n}\n</code></pre>\n\n<p>You may need to use <code>mkChar</code> and <code>setAttrib</code> instead of <code>Rf_mkChar</code> and <code>Rf_setAttrib</code> if you using <code>&lt;Rinternals.h&gt;</code> directly. </p>\n\n<hr>\n\n<pre><code>do_bla()\n# $a\n#               [,1]          [,2]          [,3]          [,4]          [,5]\n# [1,] 2.371515e-322 4.743030e-322 9.654277e-315 8.695555e-322 6.518868e-310\n# [2,] 2.794759e-316 2.371515e-322 6.763004e-317 2.371515e-322 6.952759e-310\n# [3,] 3.458460e-323 2.797257e-316 1.630417e-322 2.852530e-316 1.630417e-322\n# [4,] 6.441834e+170 1.976263e-323 4.092581e-316 1.976263e-323 4.125824e-316\n# [5,] 1.818440e-306 6.952931e-310 4.008825e-316 2.121996e-314 2.154669e-316\n# \n# $b\n# [1] 2.144130e-316 2.168146e-316 3.468674e-316 2.155101e-316 2.172224e-316\n# \ndo_bla2()\n# $a\n#      [,1] [,2] [,3] [,4] [,5]\n# [1,]    0    0    0    0    0\n# [2,]    0    0    0    0    0\n# [3,]    0    0    0    0    0\n# [4,]    0    0    0    0    0\n# [5,]    0    0    0    0    0\n# \n# $b\n#[1] 0 0 0 0 0\n\ndo_bla3()\n# $a\n#      [,1] [,2] [,3] [,4] [,5]\n# [1,]    0    0    0    0    0\n# [2,]    0    0    0    0    0\n# [3,]    0    0    0    0    0\n# [4,]    0    0    0    0    0\n# [5,]    0    0    0    0    0\n# \n# $b\n#[1] 0 0 0 0 0\n</code></pre>\n"}], "owner": {"reputation": 635, "user_id": 1972382, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pBBTh.jpg?s=128&g=1", "display_name": "Simon Dirmeier", "link": "https://stackoverflow.com/users/1972382/simon-dirmeier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 3, "accepted_answer_id": 38340103, "answer_count": 2, "score": 4, "last_activity_date": 1468364324, "creation_date": 1468355058, "last_edit_date": 1468364324, "question_id": 38338270, "link": "https://stackoverflow.com/questions/38338270/how-to-return-a-named-vecsxp-when-writing-r-extensions", "title": "How to return a named VECSXP when writing R extensions", "body": "<p>Recently I had a bug and when fixing it I wondered if it is possible to return a VECSXP (i.e. an R list type), where the elements are named. This c++ code:</p>\n\n<pre><code>SEXP do_bla() \n{\n   int prtCnt = 0;\n   SEXP a = PROTECT(allocMatrix(REALSXP, 5, 5));\n   prtCnt++;\n   SEXP b = PROTECT(allocVector(REALSXP, 5));\n   prtCnt++;\n   SEXP OS = PROTECT(allocVector(VECSXP, 2));\n   prtCnt++;\n   SET_VECTOR_ELT(OS, 0, a);\n   SET_VECTOR_ELT(OS, 1, b);\n   UNPROTECT(prtCnt);\n   return OS;\n}\n</code></pre>\n\n<p>would give me a list of two elements (matrix and vector) in <em>R</em>:</p>\n\n<pre><code>s &lt;- .Call(\"do_bla\", ....)\n</code></pre>\n\n<p>which can be indexed like this:</p>\n\n<pre><code> s[[1]]; s[[2]]\n</code></pre>\n\n<p>What would I have to change to make this possible:</p>\n\n<pre><code>s$a; s$b\n</code></pre>\n\n<p>Or is this not possible?</p>\n"}, {"tags": ["php", "c", "php-internals"], "comments": [{"owner": {"reputation": 95639, "user_id": 385378, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b4ec98df44deb80b1576283152670358?s=128&d=identicon&r=PG", "display_name": "NikiC", "link": "https://stackoverflow.com/users/385378/nikic"}, "edited": false, "score": 1, "creation_date": 1468502559, "post_id": 38338199, "comment_id": 64161169, "body": "Hard to say without more specific code, but generally this is fine. The value of <code>val</code> is copied into the array, so if the <code>val</code> variable goes out of scope that does not matter."}], "answers": [{"tags": [], "owner": {"reputation": 3233, "user_id": 2487227, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yLbAE.jpg?s=128&g=1", "display_name": "Frederick Zhang", "link": "https://stackoverflow.com/users/2487227/frederick-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1475763150, "creation_date": 1475763150, "answer_id": 39898350, "question_id": 38338199, "link": "https://stackoverflow.com/questions/38338199/php7-zend-extension-refcount-for-stack-variable/39898350#39898350", "title": "php7 zend extension: refcount for stack variable?", "body": "<p>I believe it is copied. If you use the <code>zval</code> here to hold a custom class instance, you'll need a copy constructor for your class to compile this code.</p>\n\n<p>I think that automatic RC happens when you program in PHP not C. You have to use pointers to take advantage of reference in this level.</p>\n\n<p>And if you explore more about writing PHP extensions, you'll find that actually Zend Engine asks you how you would like to do with RC and the original (objective) zval while returning it back to PHP (the second and third parameter of <code>RETURN_ZVAL()</code>). If you don't deal with them carefully, there may be memory leakage (in debug mode ZE will tell you this!) or even segfault.</p>\n"}, {"tags": [], "owner": {"reputation": 17293, "user_id": 736162, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eb6854f56cb2aa14ce798b53ea667639?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/736162/andrea"}, "is_accepted": false, "score": 0, "last_activity_date": 1477781737, "creation_date": 1477781737, "answer_id": 40324468, "question_id": 38338199, "link": "https://stackoverflow.com/questions/38338199/php7-zend-extension-refcount-for-stack-variable/40324468#40324468", "title": "php7 zend extension: refcount for stack variable?", "body": "<p>In PHP 7, zvals aren't referenced, only their values.</p>\n\n<p>If the zval contains a non-refcounted type (null, booleans, integers, floats), then PHP will simply copy the zval.</p>\n\n<p>If the zval contains a refcounted type (strings, arrays, objects, resources and references), then PHP will copy the zval and increment the reference count of the value (e.g. <code>zend_string</code> or <code>zend_array</code>) the zval points to. The zval itself doesn't have a refcount.</p>\n"}], "owner": {"reputation": 2549, "user_id": 749515, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fdf40887bfac87aba430eec018cc0d2a?s=128&d=identicon&r=PG", "display_name": "pavelkolodin", "link": "https://stackoverflow.com/users/749515/pavelkolodin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477781737, "creation_date": 1468354780, "last_edit_date": 1468355157, "question_id": 38338199, "link": "https://stackoverflow.com/questions/38338199/php7-zend-extension-refcount-for-stack-variable", "title": "php7 zend extension: refcount for stack variable?", "body": "<p>What will happen with reference counting in the following <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> code for php7?\nIn php7 <code>zval</code>s are created on stack, so the reference issues arise:</p>\n\n<pre><code>zval destination;\narray_init(destination);\n\n{\n    // scope begin\n\n    zval val;\n\n    // does val's refcount incremented here or val is copied?\n    add_next_index_zval(destination, val);\n\n    // here the \"val\" will be destroyed.\n    // Does \"destination\" will experience any problems?\n}\n</code></pre>\n"}, {"tags": ["c", "perl", "xs"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1468354398, "post_id": 38337959, "comment_id": 64090351, "body": "I&#39;m pretty new to XS, too, but I think you want to create a new scalar and then call <a href=\"http://perldoc.perl.org/perlapi.html#sv_catpv\" rel=\"nofollow noreferrer\"><code>sv_catpv</code></a> or similar, so Perl manages the memory."}, {"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1468354822, "post_id": 38337959, "comment_id": 64090606, "body": "It is just an example. Please ignore the purpose of my sample. The question was about the malloc."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 4, "creation_date": 1468355012, "post_id": 38337959, "comment_id": 64090712, "body": "The <a href=\"http://perldoc.perl.org/perlguts.html#Working-with-SVs\" rel=\"nofollow noreferrer\">perlguts</a> section documents several approaches to handling memory management.  You could directly allocate an SV with the correct size and work with that instead of using malloc()."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 4, "creation_date": 1468355471, "post_id": 38337959, "comment_id": 64090991, "body": "In your case, since <code>buf</code> isn&#39;t needed after the <code>newSvpv</code> call, you can free it.  Note that you should use the Perl provided macros for allocating and freeing memory.  See <a href=\"http://perldoc.perl.org/perlguts.html#Memory-Allocation\" rel=\"nofollow noreferrer\">perlguts: Memory Allocation</a>"}, {"owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "edited": false, "score": 1, "creation_date": 1468405625, "post_id": 38337959, "comment_id": 64110815, "body": "Also, have a look at the <code>perlclib</code> manpage. It lists lots of macros and functions that Perl offers to replace clib ones, for portability between operating systems and Perl versions."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "reply_to_user": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1468406040, "post_id": 38337959, "comment_id": 64111054, "body": "@DiabJerius It&#39;s perfectly fine to use malloc/free in this case. For example, if you write a wrapper for a C library, that&#39;s what the library typically does anyway."}, {"owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1468423864, "post_id": 38337959, "comment_id": 64124169, "body": "@nwellnhof,  there&#39;s a comment in the perlguts docs: &quot;All memory meant to be used with the Perl API functions should be manipulated using the macros described in this section&quot; which seems to indicate that if you can, you should.  I agree, if you&#39;re handed a pointer to memory from someone else&#39;s codel, then there&#39;s not much you can do."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "reply_to_user": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "edited": false, "score": 0, "creation_date": 1468523771, "post_id": 38337959, "comment_id": 64174776, "body": "@DiabJerius You only have to use <code>Newx</code> for functions like <code>sv_usepvn</code> which directly assign a memory area. Typically, you use functions like <code>sv_setpvn</code> which make a copy of the buffer&#39;s content. In this case, it doesn&#39;t matter how the buffer was allocated."}], "answers": [{"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 4, "last_activity_date": 1468405676, "creation_date": 1468405676, "answer_id": 38349075, "question_id": 38337959, "link": "https://stackoverflow.com/questions/38337959/perl-xs-memory-management/38349075#38349075", "title": "Perl XS: Memory management", "body": "<p><code>newSVpv</code> creates an internal copy of the string, so you can simply free the memory by calling <code>free</code> after assigning to <code>RETVAL</code>.</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 2, "accepted_answer_id": 38349075, "answer_count": 1, "score": 5, "last_activity_date": 1468405676, "creation_date": 1468353860, "question_id": 38337959, "link": "https://stackoverflow.com/questions/38337959/perl-xs-memory-management", "title": "Perl XS: Memory management", "body": "<p>I am absolutely new to Perl XS.</p>\n\n<p>My simple testfunction gets a string and appends something.\nIn Perl is is a scalar-string in and one out.</p>\n\n<p>In the function I have a malloc. Whats the correct way to free the mem?</p>\n\n<pre><code>SV *foo (str)\n   SV *str\nCODE:\n    unsigned char *strbuf;\n    size_t strlen;\n    strbuf = (unsigned char *) SvPV (str, strlen);\n\n    int n = strlen + 10;\n    unsigned char *buf = malloc (n);    \n\n    strncpy (buf, strbuf, strlen);\n    strncat (buf, \"0123456789\", 10);\n\n    RETVAL = newSVpv (buf, n);\nOUTPUT:\n    RETVAL\n</code></pre>\n\n<p>thanks!\nChris</p>\n"}, {"tags": ["c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1468353917, "post_id": 38337666, "comment_id": 64090046, "body": "What does <code>@</code> do in <code>L#@c</code>?"}, {"owner": {"reputation": 121, "user_id": 6581158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ea0d89607977f57c2c5282b9fad104?s=128&d=identicon&r=PG&f=1", "display_name": "alice", "link": "https://stackoverflow.com/users/6581158/alice"}, "reply_to_user": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 3, "creation_date": 1468354168, "post_id": 38337666, "comment_id": 64090203, "body": "It surrounds its argument in single quotes as opposed to double quotes. It&#39;s Microsoft specific."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 6581158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ea0d89607977f57c2c5282b9fad104?s=128&d=identicon&r=PG&f=1", "display_name": "alice", "link": "https://stackoverflow.com/users/6581158/alice"}, "edited": false, "score": 0, "creation_date": 1468353849, "post_id": 38337862, "comment_id": 64090007, "body": "If you mean call it using <code>untouchable(mrNess, a, b, c)</code>, that is precisely what we can&#39;t do. We need to use a <code>#define</code> in the call."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 121, "user_id": 6581158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ea0d89607977f57c2c5282b9fad104?s=128&d=identicon&r=PG&f=1", "display_name": "alice", "link": "https://stackoverflow.com/users/6581158/alice"}, "edited": false, "score": 0, "creation_date": 1468353961, "post_id": 38337862, "comment_id": 64090068, "body": "What do you mean you can&#39;t do that? What hinders you?"}, {"owner": {"reputation": 121, "user_id": 6581158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ea0d89607977f57c2c5282b9fad104?s=128&d=identicon&r=PG&f=1", "display_name": "alice", "link": "https://stackoverflow.com/users/6581158/alice"}, "edited": false, "score": 0, "creation_date": 1468354374, "post_id": 38337862, "comment_id": 64090337, "body": "We are refactoring a large codebase, and part of that is to make these macros easier to understand. If we use <code>a, b, c</code> it is more complex than using <code>first</code> (in reality I have simplified it here, there are actually 13 arguments, so it would be <code>a, b, c, d, e, f, ..., m</code> as opposed to simply <code>first</code>)."}], "tags": [], "owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "is_accepted": false, "score": 4, "last_activity_date": 1468360200, "last_edit_date": 1592644375, "creation_date": 1468353543, "answer_id": 38337862, "question_id": 38337666, "link": "https://stackoverflow.com/questions/38337666/c-preprocessor-passing-multiple-arguments-as-one/38337862#38337862", "title": "c preprocessor passing multiple arguments as one", "body": "<p>The problem seems to be how you define <code>first</code>. You pass <code>first</code> to the <code>untouchable</code> macro, <em>but it is obviously not expanded at that time</em>.</p>\n<p>So do not use the <code>first</code> macro like that and pass <code>a</code>, <code>b</code>, and <code>c</code> as single arguments to the macro. Then you will get what you want.</p>\n<h2>Update</h2>\n<p>But there is some hope:</p>\n<pre><code>#define UT_HELPER(a,b,c,d) untouchable(a,b,c,d)\n#define UT(x, y) UT_HELPER(x, y)\n#define first a, b, c\nstatic UT(mrNess, first);\n</code></pre>\n<p>It is similar to the solution found in <a href=\"https://stackoverflow.com/a/8588232/95954\">this stack overflow answer</a>, so I can't claim having thought it up myself.</p>\n<p>Note that</p>\n<pre><code>#define quote(s) L#@s\n</code></pre>\n<p>doesn't work in my compiler, so I can't fully test it. I simply tried with</p>\n<pre><code>#define quote(s) L###s\n</code></pre>\n<p>and that worked.</p>\n<p>I hope this gets you going for the real, more complicated macros you seem to have.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 6581158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ea0d89607977f57c2c5282b9fad104?s=128&d=identicon&r=PG&f=1", "display_name": "alice", "link": "https://stackoverflow.com/users/6581158/alice"}, "edited": false, "score": 0, "creation_date": 1468354843, "post_id": 38338082, "comment_id": 64090613, "body": "This is what confuses me when I read the documentation. All those substitutions and expansions! If I am reading what you have written right though, are you saying at the point the <code>a,b,c</code> from <code>first</code> gets to <code>untouchable</code> they are unalterably a single token?"}, {"owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "reply_to_user": {"reputation": 121, "user_id": 6581158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ea0d89607977f57c2c5282b9fad104?s=128&d=identicon&r=PG&f=1", "display_name": "alice", "link": "https://stackoverflow.com/users/6581158/alice"}, "edited": false, "score": 0, "creation_date": 1468355027, "post_id": 38338082, "comment_id": 64090719, "body": "Yes. If you try <code>untouchable(foo,first)</code> you get an error because the macro only sees two parameters but was expecting 4."}], "tags": [], "owner": {"reputation": 1275, "user_id": 5058676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WPjsyC41Gy0/AAAAAAAAAAI/AAAAAAAABNY/Fs0vX3pO_wA/photo.jpg?sz=128", "display_name": "evaitl", "link": "https://stackoverflow.com/users/5058676/evaitl"}, "is_accepted": false, "score": 1, "last_activity_date": 1468354336, "creation_date": 1468354336, "answer_id": 38338082, "question_id": 38337666, "link": "https://stackoverflow.com/questions/38337666/c-preprocessor-passing-multiple-arguments-as-one/38338082#38338082", "title": "c preprocessor passing multiple arguments as one", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1548.pdf\" rel=\"nofollow\">C11</a>, 6.10.3.1 Argument Substitution:</p>\n\n<blockquote>\n  <p>After the arguments for the invocation of a function-like macro have\n  been identified, argument substitution takes place. A parameter in the\n  replacement list, unless preceded by a # or ## preprocessing token or\n  followed by a ## preprocessing token (see below), is replaced by the\n  corresponding argument after all macros contained therein have been\n  expanded. Before being substituted, each argument\u2019s preprocessing\n  tokens are completely macro replaced as if they formed the rest of the\n  preprocessing file; no other preprocessing tokens are available.</p>\n</blockquote>\n\n<p>Look at how this is expanded:</p>\n\n<pre><code>#define first a,b,c\n#define untouchable(name, c1, c2, c3) \\\n    wchar_t name[] = \\\n    { \\\n        quote(c1), \\\n        quote(c2), \\\n        quote(c3) \\\n    }\n\nuntouchable(foo,first,c,d)\n</code></pre>\n\n<p>into:</p>\n\n<pre><code>$ gcc -E foo.c\n...\n\nwchar_t foo[] = { quote(a,b,c), quote(c), quote(d) }  \n</code></pre>\n\n<p>First the arguments are identified, so the untouchable parameter first becomes c1. Only after they are identified are they are expanded and then substituted into the macro body. <code>first -&gt; c1 -&gt; a,b,c</code>. Now in the macro body c1 is replaced by <code>a,b,c</code>. </p>\n\n<p>I skipped the quote macro from the question because it is illegal on my compiler. </p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 5, "last_activity_date": 1468357501, "last_edit_date": 1468357501, "creation_date": 1468354932, "answer_id": 38338245, "question_id": 38337666, "link": "https://stackoverflow.com/questions/38337666/c-preprocessor-passing-multiple-arguments-as-one/38338245#38338245", "title": "c preprocessor passing multiple arguments as one", "body": "<p>When the preprocessor encounters the invocation of a function-like macro, it first identifies the arguments, next completely macro-expands them<sup>*</sup>, and last replaces the macro invocation with its replacement list, with the expanded arguments inserted at the appropriate places.  The expansion of macro <code>first</code> is (or would be) performed too late for the preprocessor to recognize in the expansion separate arguments to macro <code>untouchable()</code>.  You'll need to find another way.</p>\n\n<p>One possibility is to insert a level of indirection:</p>\n\n<pre><code>#define untouch_wrap(name, args) untouchable(name, args)\n\nstatic untouch_wrap(mrNess, first);\n</code></pre>\n\n<p>There, <code>first</code> is expanded before <code>untouch_wrap</code>, so that when the result is re-scanned for further macros to replace, the resulting invocation of <code>untouchable()</code> has the correct number of arguments.</p>\n\n<p>That does rely on the second argument to <code>untouch_wrap()</code> to expand to a comma-separated list of exactly three members.  It would be cleaner and more flexible to define <code>untouch_wrap()</code> like this:</p>\n\n<pre><code>#define untouch_wrap(name, ...) untouchable(name, __VA_ARGS__)\n</code></pre>\n\n<p>... but MSVC's handling of variadic macros is non-conforming, and I suspect that it would trip over that.</p>\n\n<hr>\n\n<p><sup>*</sup> Expansion is suppressed for arguments that are operands of the preprocessor's stringification (<code>#</code>) and token-pasting (<code>##</code>) operators.</p>\n"}], "owner": {"reputation": 121, "user_id": 6581158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35ea0d89607977f57c2c5282b9fad104?s=128&d=identicon&r=PG&f=1", "display_name": "alice", "link": "https://stackoverflow.com/users/6581158/alice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2414, "favorite_count": 0, "answer_count": 3, "score": 12, "last_activity_date": 1468360200, "creation_date": 1468352756, "question_id": 38337666, "link": "https://stackoverflow.com/questions/38337666/c-preprocessor-passing-multiple-arguments-as-one", "title": "c preprocessor passing multiple arguments as one", "body": "<p>The C preprocessor is passing multiple arguments as if they were a single argument. I feel pretty sure the problem is how we are calling the <code>untouchable</code> macro, but every attempt we have made to alter the <code>first</code> macro has failed to produce the desired result. Here is a complete code sample with comments that explain what happens and what we want to happen:</p>\n\n<pre><code>//this can be changed, but it must remain a #define to be of any use to us\n#define first a,b,c\n\n// v all code below this line cannot be altered (it's outside of our control)\n\n#define untouchable(name, c1, c2, c3) \\\n    wchar_t name[] = \\\n    { \\\n        quote(c1), \\\n        quote(c2), \\\n        quote(c3) \\\n    }\n\n#define quote(c) L#@c\n\n// ^ all code above this line cannot be altered (it's outside of our control)\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    static untouchable(mrNess, first);\n\n    // the line above is precompiled to:\n    // static wchar_t mrNess[] = { L'a,b,c', L, L };\n\n    // whereas we want:\n    // static wchar_t mrNess[] = { L'a', L'b', L'c' };\n\n    return 0;\n}\n</code></pre>\n\n<p>We are compiling in Windows under VisualStudio.</p>\n"}, {"tags": ["c", "multithreading", "linked-list", "profiling", "lock-free"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1468355027, "post_id": 38337656, "comment_id": 64090720, "body": "Go to this page:<a href=\"https://stackoverflow.com/questions/33083270\">stackoverflow.com/questions/33083270</a> On that page is a youtube video link to a talk given at CppCon about lockless implementations and tradeoffs. The video was split into two parts and the link is for part 2. So, find part 1. The video, in total, is about 2 hours, but the speaker is quite entertaining and really knows his stuff"}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1468355917, "post_id": 38337656, "comment_id": 64091243, "body": "This <a href=\"http://stackoverflow.com/a/4044614/5781248\">answer</a> might explain the performance issue (contention). Lock free data structures probably help to avoid expensive context switches."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1468360642, "post_id": 38337656, "comment_id": 64093462, "body": "You are not seeing the real problem.  The cache hit rate is absolutely dreadful, a standard problem with traditional linked lists on a modern processor.  A very important detail that these old papers ignore.  Don&#39;t use them."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6016326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee14d759f55f1d59aabde397f99b66b?s=128&d=identicon&r=PG&f=1", "display_name": "Sumant", "link": "https://stackoverflow.com/users/6016326/sumant"}, "edited": false, "score": 0, "creation_date": 1468446532, "post_id": 38338744, "comment_id": 64136925, "body": "Thanks for the answer. Any help on how to reduce the cache misses?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 57, "user_id": 6016326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee14d759f55f1d59aabde397f99b66b?s=128&d=identicon&r=PG&f=1", "display_name": "Sumant", "link": "https://stackoverflow.com/users/6016326/sumant"}, "edited": false, "score": 0, "creation_date": 1468446939, "post_id": 38338744, "comment_id": 64137078, "body": "@Sumant, cache hit rate is mostly a function of data access patterns, which themselves are a function of workload and implementation details, just like overall performance is.  Where possible, you would prefer to scan linearly through memory and to avoid jumping around.  One way you might facilitate that is by allocating list nodes in medium-sized groups instead of one at a time.  Laying out your structure members to minimize padding may help a bit, too."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 57, "user_id": 6016326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee14d759f55f1d59aabde397f99b66b?s=128&d=identicon&r=PG&f=1", "display_name": "Sumant", "link": "https://stackoverflow.com/users/6016326/sumant"}, "edited": false, "score": 0, "creation_date": 1468447126, "post_id": 38338744, "comment_id": 64137157, "body": "Overall, however, you are very unlikely to make up the observed performance difference between the two approaches with such tricks.  If performance is your governing priority, then test each approach with a workload that simulates the expected one, and choose the one that performs better."}, {"owner": {"reputation": 57, "user_id": 6016326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee14d759f55f1d59aabde397f99b66b?s=128&d=identicon&r=PG&f=1", "display_name": "Sumant", "link": "https://stackoverflow.com/users/6016326/sumant"}, "edited": false, "score": 0, "creation_date": 1468448390, "post_id": 38338744, "comment_id": 64137644, "body": "I am doing as part of my Grad project. My aim is to squeeze most performance out of lock free linked list. I am allocating the space of a node on every insert operation. Any tips on how I can optimize the code? Let me know if the the link to the code."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 57, "user_id": 6016326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee14d759f55f1d59aabde397f99b66b?s=128&d=identicon&r=PG&f=1", "display_name": "Sumant", "link": "https://stackoverflow.com/users/6016326/sumant"}, "edited": false, "score": 0, "creation_date": 1468451752, "post_id": 38338744, "comment_id": 64138708, "body": "@Sumant, if this is a graduate project, then it would be appropriate to discuss optimization issues with your graduate advisor.  Additionally, if your code works, as seems to be the case, then you could consider posting it for review over at <a href=\"http://codereview.stackexchange.com/\">CodeReview</a>.  If you opt for that, however, then do be careful to read and follow their rules, which differ a bit from ours here at SO."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1468359880, "last_edit_date": 1468359880, "creation_date": 1468357004, "answer_id": 38338744, "question_id": 38337656, "link": "https://stackoverflow.com/questions/38337656/lock-free-linked-list-is-performing-worse-than-the-locked-counterpart/38338744#38338744", "title": "Lock free linked list is performing worse than the locked counterpart", "body": "<blockquote>\n  <p>The locked version performs better on every count except IPC. Is this what is supposed to happen? Or the lock Free data structure should perform better?</p>\n</blockquote>\n\n<p>Generally speaking, which will perform better is a function of both workload details and implementation details.  The paper you reference says</p>\n\n<blockquote>\n  <p>Lock-free data structures also <strong><em>have the potential</em></strong> to have better performance</p>\n</blockquote>\n\n<p>(emphasis added), but it does not promise better performance in every case.  Although multiple threads may be able to modify the lock-free data structure at the same time, each modification involves more operations even when there are no conflicts.  When there <em>are</em> conflicts, performance degrades.</p>\n\n<p>I observe also that your lock-free code has a higher proportion of cache misses than does your locked code.  Although I cannot confidently explain that, I can think of at least two plausible reasons why that would be an expected consequence of the lock-free implementation.  Naturally, less effective cache usage significantly degrades performance.</p>\n\n<blockquote>\n  <p>If yes, then what is the benefit of using lock free data structures?</p>\n</blockquote>\n\n<p>The paper says that the primary benefit is:</p>\n\n<blockquote>\n  <p>If an implementation is lock-free, delays or failures of individual processes do not block the progress of other processes in the system.</p>\n</blockquote>\n"}], "owner": {"reputation": 57, "user_id": 6016326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ee14d759f55f1d59aabde397f99b66b?s=128&d=identicon&r=PG&f=1", "display_name": "Sumant", "link": "https://stackoverflow.com/users/6016326/sumant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 1, "accepted_answer_id": 38338744, "answer_count": 1, "score": 2, "last_activity_date": 1468359880, "creation_date": 1468352716, "question_id": 38337656, "link": "https://stackoverflow.com/questions/38337656/lock-free-linked-list-is-performing-worse-than-the-locked-counterpart", "title": "Lock free linked list is performing worse than the locked counterpart", "body": "<p>I am trying to compare the performance of locked and lock free linked list data structure. I have implemented <a href=\"http://www.cse.yorku.ca/~ruppert/papers/lfll.pdf\" rel=\"nofollow\">this</a> algorithm for lock free linked list. Both the programs are implemented in C.</p>\n\n<p>I am testing for 4 threads. Each thread has 1000 insert operations.</p>\n\n<p>I am using Intel PCM tool to measure the performance.</p>\n\n<p>Here are my findings:\nLock free:</p>\n\n<pre><code>Median of L3 Misses=1012699\nMedian of L2 Misses=1479741\nMedian of L3 Hits=484128\nMedian of L2 Hits=1797537\nMedian of Time=1.80696\nMedian of Cycles=5296042019\nMedian of IPC=1.536135\nMedian of Bytes Read=444423232\nMedian of Bytes Written=25414144 \n</code></pre>\n\n<p>Locked:</p>\n\n<pre><code>Median of L3 Misses=711796.5\nMedian of L2 Misses=1517899\nMedian of L3 Hits=819408.5\nMedian of L2 Hits=2282527\nMedian of Time=0.244517\nMedian of Cycles=894265192\nMedian of IPC=0.8495695\nMedian of Bytes Read=174872576\nMedian of Bytes Written=24722912\n</code></pre>\n\n<p>The locked version performs better on every count except IPC. Is this what is supposed to happen? Or the lock Free data structure should perform better?</p>\n\n<p>If yes, then what is the benefit of using lock free data structures?\nAny help will be appreciated. </p>\n"}, {"tags": ["html", "c", "fastcgi"], "answers": [{"comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1468352831, "post_id": 38337607, "comment_id": 64089483, "body": "We posted simultaneously, but I missed the middle line. Due credit to dbush&#39;s answer."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 0, "last_activity_date": 1468352540, "creation_date": 1468352540, "answer_id": 38337607, "question_id": 38337413, "link": "https://stackoverflow.com/questions/38337413/trying-to-copy-char-pointer-to-query-string-to-a-char-variable-getting-wron/38337607#38337607", "title": "Trying to copy char pointer to &quot;QUERY_STRING&quot; to a char[] variable, getting wrong result", "body": "<p>The length on your <code>strncpy</code> is wrong [too short], the second argument is wrong, and the format string is incorrect.</p>\n\n<p>Try this:</p>\n\n<pre><code>strncpy( newDeviceName, queryString, sizeof(newDeviceName) - 1);\nnewDeviceName[sizeof(newDeviceName) - 1] = 0;\nprintf(\"------- %s ------------\", newDeviceName);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "edited": false, "score": 1, "creation_date": 1468352875, "post_id": 38337613, "comment_id": 64089510, "body": "<code>\\0</code> would be preferable to bare <code>0</code>, just on a style note"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1468352548, "creation_date": 1468352548, "answer_id": 38337613, "question_id": 38337413, "link": "https://stackoverflow.com/questions/38337413/trying-to-copy-char-pointer-to-query-string-to-a-char-variable-getting-wron/38337613#38337613", "title": "Trying to copy char pointer to &quot;QUERY_STRING&quot; to a char[] variable, getting wrong result", "body": "<p>In the call to <code>strncpy</code>, it expects a <code>char *</code> for the second argument, but you pass it a <code>char</code>.  </p>\n\n<p>Also, the size is not correct.  <code>*queryString</code> is a <code>char</code> and has size 1.  Using <code>sizeof(queryString)</code> is not correct either because it will return the size of a pointer.  What you actually want is the size of the detination buffer.</p>\n\n<p>In the <code>printf</code> call the <code>%c</code> format specifier expects a <code>char</code> but you pass it a <code>char *</code>.  You should instead use <code>%s</code> which expects a <code>char *</code> pointing to a null terminated string.</p>\n\n<p>So what you want to do is this:</p>\n\n<pre><code>strncpy( newDeviceName, queryString, sizeof(newDeviceName) -1);\nnewDeviceName[sizeof(newDeviceName) - 1] = 0;\nprintf(\"------- %s ------------\", newDeviceName);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468352659, "post_id": 38337614, "comment_id": 64089392, "body": "I get segmentation fault (core dumped) on execution."}, {"owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468353103, "post_id": 38337614, "comment_id": 64089613, "body": "Aha! You are right about it returning null, i missed that.  Problem now is, in the browser it&#39;s not showing any text.. only those funky symbols.  I added an if statement to check for the null, and in the terminal it works, but the browser is not showing me any text.*"}], "tags": [], "owner": {"reputation": 7587, "user_id": 943010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/R7Q27.png?s=128&g=1", "display_name": "kdopen", "link": "https://stackoverflow.com/users/943010/kdopen"}, "is_accepted": false, "score": 0, "last_activity_date": 1468352711, "last_edit_date": 1468352711, "creation_date": 1468352552, "answer_id": 38337614, "question_id": 38337413, "link": "https://stackoverflow.com/questions/38337413/trying-to-copy-char-pointer-to-query-string-to-a-char-variable-getting-wron/38337614#38337614", "title": "Trying to copy char pointer to &quot;QUERY_STRING&quot; to a char[] variable, getting wrong result", "body": "<p>What you want is</p>\n\n<pre><code>strncpy(newDeviceName, queryString, sizeof(newDeviceName)-1);\nnewDeviceName[63] = '\\0'; // Guarantee NUL terminator\nprintf(\"----- %s -----\", newDeviceName);\n</code></pre>\n\n<p>So multiple problems:</p>\n\n<ul>\n<li><code>*queryString</code> just gets you the first character, which <code>strncpy</code> tries to treat as a pointer. </li>\n<li><code>sizeof(*queryString)</code> is the size of a char (i.e. 1)</li>\n<li><code>%c</code> prints a single character, not the string</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468352783, "post_id": 38337644, "comment_id": 64089464, "body": "Same as another answer, i get a segmentation fault (core dumped)."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468352950, "post_id": 38337644, "comment_id": 64089545, "body": "@CluelessIntern Are you sure there&#39;s actual content in <code>queryString</code> and not just junk or <code>NULL</code>?"}, {"owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468353155, "post_id": 38337644, "comment_id": 64089644, "body": "(copy and paste from another comment) Aha! You are right about it returning null, i missed that. Problem now is, in the browser it&#39;s not showing any text.. only those funky symbols."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468353278, "post_id": 38337644, "comment_id": 64089715, "body": "@CluelessIntern What&#39;s <code>queryString</code> actually pointing to before you copy it to <code>newDeviceName</code>? Your buffer could be too small."}, {"owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468353508, "post_id": 38337644, "comment_id": 64089823, "body": "<code>const char *ENV_VARS[] = {     &quot;QUERY_STRING&quot;, };</code>"}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468353786, "post_id": 38337644, "comment_id": 64089968, "body": "@CluelessIntern Okay. There&#39;s your problem. <code>queryString</code> is pointing to garbage. <code>ENV_VARS[7]</code> is outside the bounds of the array. You&#39;re not supposed to access it. Doing that is undefined behavior."}, {"owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468354020, "post_id": 38337644, "comment_id": 64090106, "body": "ENV_VARS[] actually does have more than 1 element, i only included the one i was using. I will post a larger snippet of code in the main post"}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468355103, "post_id": 38337644, "comment_id": 64090758, "body": "@CluelessIntern try changing the size of <code>newDeviceName</code> to something larger, like <code>512</code>. Otherwise, I have no idea. Your code looks fine now."}, {"owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "edited": false, "score": 0, "creation_date": 1468355156, "post_id": 38337644, "comment_id": 64090795, "body": "Solved it, for some reason the changes didnt go into effect until after i restarted the server."}], "tags": [], "owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "is_accepted": true, "score": 0, "last_activity_date": 1468353115, "last_edit_date": 1468353115, "creation_date": 1468352667, "answer_id": 38337644, "question_id": 38337413, "link": "https://stackoverflow.com/questions/38337413/trying-to-copy-char-pointer-to-query-string-to-a-char-variable-getting-wron/38337644#38337644", "title": "Trying to copy char pointer to &quot;QUERY_STRING&quot; to a char[] variable, getting wrong result", "body": "<p>Your program has undefined behavior. <strong>Read those warnings issued by the compiler</strong>. They're important.</p>\n\n<hr>\n\n<p>Don't dereference the pointer when you're passing the string to <code>strncpy()</code>. When you do that, you're now passing a single <code>char</code>. That's converted to a pointer when it's given to <code>strncpy()</code> (which is where you probably get your warning, i.e. passing a <code>char</code> to a function that expects a <code>char*</code>).</p>\n\n<p>You also can't get the size of an array that has decayed to a pointer using <code>sizeof</code>. You're just getting the size of the pointer (which is probably either 8 or 4 bytes depending on your system). Since you don't know the length of the string anyway, it might even be better to just use <code>strcpy()</code> instead of <code>strncpy()</code>.</p>\n\n<hr>\n\n<p>Here's what your code probably should look like:</p>\n\n<pre><code>char *queryString = getenv(ENV_VARS[7]);\nchar newDeviceName[64];\n\nstrcpy( newDeviceName, queryString);\nprintf(\"------- %s ------------\", newDeviceName); /* use %s to print strings */\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6442360, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7cbe66e93b6ec12c68a1cd5c7e48eb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Clueless Intern", "link": "https://stackoverflow.com/users/6442360/clueless-intern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38337644, "answer_count": 4, "score": 0, "last_activity_date": 1468355116, "creation_date": 1468351760, "last_edit_date": 1468355116, "question_id": 38337413, "link": "https://stackoverflow.com/questions/38337413/trying-to-copy-char-pointer-to-query-string-to-a-char-variable-getting-wron", "title": "Trying to copy char pointer to &quot;QUERY_STRING&quot; to a char[] variable, getting wrong result", "body": "<p>I am working with FastCgi, trying to generate a dynamic html webpage.</p>\n\n<p>I am able to get the QUERY_STRING easily enough, but I am having trouble trying to copy it into a char array.</p>\n\n<p>If there is even a shorter way of just getting the value from QUERY_STRING, please advise because I am a little over my head.</p>\n\n<pre><code>char *queryString = getenv(ENV_VARS[7]);\nchar newDeviceName[64];\n\nstrncpy( newDeviceName, *queryString, sizeof(*queryString) -1);\nprintf(\"------- %c ------------\", newDeviceName);\n</code></pre>\n\n<p>This compiles with only warnings, but once i try to load the webpage, the characters are some weird Chinese looking characters. -> \ufffd\u1359\ufffd</p>\n\n<p>Thank you in advance.</p>\n\n<hr>\n\n<p>EDIT: More of my code</p>\n\n<pre><code>const char *ENV_VARS[] = {\n    \"DOCUMENT_ROOT\",\n    \"HTTP_COOKIE\",\n    \"HTTP_HOST\",\n    \"HTTP_REFERER\",\n    \"HTTP_USER_AGENT\",\n    \"HTTPS\",\n    \"PATH\",\n    \"QUERY_STRING\",\n    \"REMOTE_ADDR\",\n    \"REMOTE_HOST\",\n    \"REMOTE_PORT\",\n    \"REMOTE_USER\",\n    \"REQUEST_METHOD\",\n    \"REQUEST_URI\",\n    \"SCRIPT_FILENAME\",\n    \"SCRIPT_NAME\",\n    \"SERVER_ADMIN\",\n    \"SERVER_NAME\",\n    \"SERVER_PORT\",\n    \"SERVER_SOFTWARE\"\n};\n\nint main(void)\n{\n    char deviceName[]=ADAPTERNAME;\n    time_t t;\n    /* Intializes random number generator */\n    srand((unsigned) time(&amp;t));\n\n    while (FCGI_Accept() &gt;= 0) {\n\n        printf(\"Content-type: text/html \\r\\n\\r\\n\");\n        printf(\"\");\n        printf(\"&lt;html&gt;\\n\");\n        printf(\"&lt;script src=\\\"/js/scripts.js\\\"&gt;&lt;/script&gt;\");\n\n        /* CODE CODE CODE */\n\n        printf(\"&lt;p&gt; hi &lt;/p&gt;\");\n        printf(\"&lt;p&gt; hi &lt;/p&gt;\");\n        char *queryString = getenv(ENV_VARS[7]);\n        char newDeviceName[64];\n        if (queryString == NULL)\n            printf(\"&lt;p&gt; +++++ERROR++++++ &lt;/p&gt;\");\n        else {\n            strcpy( newDeviceName, queryString);\n            newDeviceName[sizeof(newDeviceName) - 1] = 0;\n            printf(\"&lt;p&gt; ------- %s ------------ &lt;/p&gt; \", newDeviceName);\n} \n</code></pre>\n\n<hr>\n\n<p>SOLVED: Amateur mistake, for some reason none of my new edits went into effect until after i restart my lighttpd server. </p>\n"}]