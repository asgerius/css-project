[{"tags": ["c", "embedded", "avr"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487808036, "post_id": 42404549, "comment_id": 71956052, "body": "Perhaps dole out <code>N</code> indexes: <code>timer_interrupt_handler(&amp;timer1);</code> --&gt; <code>timer_interrupt_handler(0);</code> and have <code>timer_interrupt_handle()</code> look up the <code>New_timer[0]</code>"}, {"owner": {"reputation": 750, "user_id": 6876037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42acf7e5bb30e124f2597567bfd9aab1?s=128&d=identicon&r=PG&f=1", "display_name": "anonymoose", "link": "https://stackoverflow.com/users/6876037/anonymoose"}, "edited": false, "score": 0, "creation_date": 1487810008, "post_id": 42404549, "comment_id": 71956646, "body": "Going off of what chux said, maybe make a function create_a_timer that initializes a timer into a stopped condition and then stores each timer in a null-terminated list of timers?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1487812701, "post_id": 42404549, "comment_id": 71957451, "body": "So, how do you use it now? I don&#39;t see any <code>extern</code> in what you posted. And what is the problem with <code>extern</code> anyway? Why do you want to avoid using it?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1487822987, "post_id": 42404549, "comment_id": 71960302, "body": "Your question is worded confusingly.  &quot;extern&quot; is just a keyword used to share variables between different compilation units.  It is not a type.  I think what you are really asking is: how can I have timers that are only visible in one compilation unit but still receive service in the ISR by the timer library."}, {"owner": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1487850363, "post_id": 42404549, "comment_id": 71974985, "body": "@AnT Like I said, the extern timers are defined in another libraries. I want to avoid using extern for data encapsulation."}, {"owner": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "reply_to_user": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1487850479, "post_id": 42404549, "comment_id": 71975076, "body": "@David Grayson, Yes maybe you are right. To make the point clear I shared the .c .h files."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1487863917, "post_id": 42404549, "comment_id": 71985250, "body": "@old_timer: You got it backwards. <i>In theory</i> globals with the same name are <i>errors</i> in standard C. That&#39;s how it has been in C from the very first standard (C89). However, <i>in practice</i> these errors are &quot;forgiven&quot; by most compilers as an extension, because back in the day it used to be supported by pre-standard UNIX compilers. So, if you want to write standard-conforming C code you cannot just declare globals with the same name. You have to make sure you have only one definition, and make the rest pure declarations with <code>extern</code>."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1487864832, "post_id": 42404549, "comment_id": 71985993, "body": "Good to know, thanks.  from turbo to borland to zortech to watcom to microsoft to gnu over time the behavior was most definitely not consistent."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1487864849, "post_id": 42404549, "comment_id": 71986007, "body": "Does C89 imply 1989?  Awefully late for a language from the 60s."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1487865298, "post_id": 42404549, "comment_id": 71986353, "body": "@old_timer: &quot;Language from the 60&quot; was dramatically different from standard C (or from K&amp;R C), even in terms of plain syntax. Also, the stricter definition model was actually first adopted by K&amp;R C, which appeared way before 1989."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1487866281, "post_id": 42404549, "comment_id": 71987068, "body": "yep, I was sorta poking fun at history.  although mainstream in some circles (unix) for decades.  In the 80s we had the everyone can own their own computer and shortly thereafter everyone can afford their own compiler for that computer, leading to the (assembly vs) pascal vs C battle on those platforms which went the way of C and created many new programmers and a really good idea to try to standardize the language that had been floating about for a decade or two."}], "answers": [{"comments": [{"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1487823247, "post_id": 42405316, "comment_id": 71960385, "body": "Yeah, this would work.  The timers themselves can hold the links that make the linked list.  The timer library just needs to hold a pointer to the first timer, and that will link to the next timer in the list, and so on."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1487846335, "post_id": 42405316, "comment_id": 71972303, "body": "I often implement such timer drivers with linked lists too. For timers that aren&#39;t critical, this is a good solution. The only down-side is that if you have hard real-time requirements, you cannot and should not use this method, because linked lists are not random access, and timers at the end of the list will face a slight bit more latency."}, {"owner": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "edited": false, "score": 0, "creation_date": 1487850771, "post_id": 42405316, "comment_id": 71975282, "body": "@Felipe Lavratti, For this solution I have to store the timers in the dynamic memory right?"}, {"owner": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487854462, "post_id": 42405316, "comment_id": 71977912, "body": "@Lundin, For hard real-time requirements what is your approach to solve such a problem?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "edited": false, "score": 0, "creation_date": 1487854610, "post_id": 42405316, "comment_id": 71978027, "body": "@Majid_L A linked list can be used for any kind of memory. You most definitely do not want to use heap memory in an embedded system. Simply use statically allocated data for the memory pool. Each module using the timer driver allocates that memory together with the timer struct."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "edited": false, "score": 0, "creation_date": 1487854648, "post_id": 42405316, "comment_id": 71978051, "body": "@Majid_L For hard real-time requirements, use designated timers for each task and don&#39;t attempt a generic solution. You would also prefer as few interrupts as possible. The ideal is to setup the timer with pre-scalers so that there is only one interrupt, when the timer has elapsed."}, {"owner": {"reputation": 2721, "user_id": 2002198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98684cf4e01d405c4bf5662b2fdcb842?s=128&d=identicon&r=PG", "display_name": "Felipe Lavratti", "link": "https://stackoverflow.com/users/2002198/felipe-lavratti"}, "reply_to_user": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "edited": false, "score": 0, "creation_date": 1487870195, "post_id": 42405316, "comment_id": 71989898, "body": "@Majid_L no. Avoid heap. Use the linkedlist approach where you have a next field in the New_timer struct. Google for linkedlists in C."}], "tags": [], "owner": {"reputation": 2721, "user_id": 2002198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98684cf4e01d405c4bf5662b2fdcb842?s=128&d=identicon&r=PG", "display_name": "Felipe Lavratti", "link": "https://stackoverflow.com/users/2002198/felipe-lavratti"}, "is_accepted": false, "score": 5, "last_activity_date": 1487812414, "creation_date": 1487812414, "answer_id": 42405316, "question_id": 42404549, "link": "https://stackoverflow.com/questions/42404549/how-to-avoid-using-extern-to-share-an-instance-between-many-files-in-c/42405316#42405316", "title": "How to avoid using &quot;extern&quot; to share an instance between many files in C?", "body": "<p>Why don't you register the instances in the timer module using a linked list?</p>\n\n<p>At client code</p>\n\n<pre><code>static New_timer a_timer;\nvoid foo () {\n    timer_register (&amp;a_timer);\n};\n</code></pre>\n\n<p>At timer.c:</p>\n\n<pre><code>void timer_register (New_timer * timer) {\n    timer_add_to_a_linked_list (timer);\n}\n\nvoid timer_interrupt_handler () {\n    for_each_timer_in_list_do_something ();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "edited": false, "score": 0, "creation_date": 1487870236, "post_id": 42422061, "comment_id": 71989912, "body": "This is applicable for just one instance. What if I had many timers?"}, {"owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "reply_to_user": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "edited": false, "score": 0, "creation_date": 1487870403, "post_id": 42422061, "comment_id": 71990042, "body": "You would create a local New_timer variable for each timer you need, and a getter function for each one."}], "tags": [], "owner": {"reputation": 2605, "user_id": 3958633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/817685ce6b5f625688fdbcd327e7afa6?s=128&d=identicon&r=PG", "display_name": "sifferman", "link": "https://stackoverflow.com/users/3958633/sifferman"}, "is_accepted": false, "score": 0, "last_activity_date": 1487869644, "creation_date": 1487869644, "answer_id": 42422061, "question_id": 42404549, "link": "https://stackoverflow.com/questions/42404549/how-to-avoid-using-extern-to-share-an-instance-between-many-files-in-c/42422061#42422061", "title": "How to avoid using &quot;extern&quot; to share an instance between many files in C?", "body": "<p>You can avoid the use of <code>extern</code> in many cases by the use of a <em>getter</em> function.</p>\n\n<p>In client.h:</p>\n\n<pre><code>#include \"timer_tick.h\"\n\nNew_timer* client_get_timer(void);\n</code></pre>\n\n<p>In client.c:</p>\n\n<pre><code>#include \"client.h\"\n\nNew_timer local_timer;\n\nNew_timer* client_get_timer()\n{\n    return &amp;local_timer;\n}\n</code></pre>\n\n<p>In main.c:</p>\n\n<pre><code>#include \"client.h\"\n\nvoid timerIsr()\n{\n    timer_interrupt_handler(client_get_timer());\n}\n</code></pre>\n"}], "owner": {"reputation": 276, "user_id": 4358171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9faea69a6490926ef9da0abed31ddc37?s=128&d=identicon&r=PG&f=1", "display_name": "Macit", "link": "https://stackoverflow.com/users/4358171/macit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1487869644, "creation_date": 1487807694, "last_edit_date": 1487808026, "question_id": 42404549, "link": "https://stackoverflow.com/questions/42404549/how-to-avoid-using-extern-to-share-an-instance-between-many-files-in-c", "title": "How to avoid using &quot;extern&quot; to share an instance between many files in C?", "body": "<p>I made a timer library in c to start a timer, stop it ...etc. I use this lib for making many timers for different events. For each event I should make a new instance of the timer. I use one with serial communication library and one for the keypad library. Now the point is that there is a function <code>timer_interrupt_handler(New_timer* timer)</code> that must be called for each instance by the microcontroller's timer1 interrupt routine which remains in the main file. For this, timers' instances must be of extern type. Is there a way to avoid using extern in this scenario.</p>\n\n<p>timer_tick.h file</p>\n\n<pre><code>typedef enum state{STOPPED=0, RUNNING, TIMEOUT} Timer_state;\n\ntypedef struct {\n        unsigned char volatile state;\n        unsigned int volatile ticks;\n        unsigned int volatile timeout_ticks;\n    }New_timer;\n</code></pre>\n\n<p>timer_tick.c file</p>\n\n<pre><code>#include \"timer_tick.h\"\n\nvoid start_a_timer(New_timer* timer)\n{\n    timer-&gt;state = RUNNING;\n    timer-&gt;ticks = 0;\n}\n\nvoid stop_a_timer(New_timer* timer)\n{\n    timer-&gt;state = STOPPED;\n}\n\nvoid timer_interrupt_handler(New_timer* timer)\n{\n    if(timer-&gt;state==RUNNING)\n    {\n        if(timer-&gt;ticks &lt; timer-&gt;timeout_ticks)\n            timer-&gt;ticks++;\n        else\n            timer-&gt;state = TIMEOUT;\n    }\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>// timer1 interrupt routine\nvoid timerIsr()\n{\n    timer_interrupt_handler(&amp;timer1);\n    timer_interrupt_handler(&amp;timer2);\n    timer_interrupt_handler(&amp;timer3);\n    timer_interrupt_handler(&amp;timer4);\n    timer_interrupt_handler(&amp;timer5);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "unix", "relative-path"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1487806696, "post_id": 42404340, "comment_id": 71955557, "body": "Your question is unclear. For example, why have you marked this with the <code>C</code> tag? Are you coding a solution in C?  Or are you using Linux commands at the shell? Are there specific requirements on how the problem needs to be solved? Please read your question as someone who doesn&#39;t know the context of what you have been doing and consider whether it makes any sense to such a person."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1487840646, "post_id": 42404340, "comment_id": 71968422, "body": "Note that &quot;ASAP&quot; is like painting a downvote target on your back. Don&#39;t do it please - readers will answer at their leisure."}], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 4490562, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lDd4c.jpg?s=128&g=1", "display_name": "Sumutiu Marius", "link": "https://stackoverflow.com/users/4490562/sumutiu-marius"}, "is_accepted": false, "score": 1, "last_activity_date": 1487806890, "creation_date": 1487806890, "answer_id": 42404413, "question_id": 42404340, "link": "https://stackoverflow.com/questions/42404340/how-to-move-directory-into-subdirectory-in-linux/42404413#42404413", "title": "How to move directory into subdirectory in Linux", "body": "<pre><code>sudo mv sample_dir1/ sample_dir/\n</code></pre>\n\n<p>Replace the <code>sample_dir1/</code> with the actual location then replace <code>sample_dir/</code> with the new location.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7560865, "user_type": "registered", "profile_image": "https://graph.facebook.com/1426656737368303/picture?type=large", "display_name": "Armen Levon", "link": "https://stackoverflow.com/users/7560865/armen-levon"}, "is_accepted": false, "score": 1, "last_activity_date": 1487809615, "creation_date": 1487809615, "answer_id": 42404863, "question_id": 42404340, "link": "https://stackoverflow.com/questions/42404340/how-to-move-directory-into-subdirectory-in-linux/42404863#42404863", "title": "How to move directory into subdirectory in Linux", "body": "<p>try it in local example directory , if you are existing in sample_dir \nthen : mv ../sample_dir1 ../sample_dir/\nif did not work i am pretty sure i am  not understanding your question or the path names are not clear enough to me</p>\n"}], "owner": {"reputation": 1, "user_id": 7607839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bf6c4121a0dae98d8f89ff278ea8b0d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Mathews ", "link": "https://stackoverflow.com/users/7607839/kyle-mathews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2538, "favorite_count": 0, "closed_date": 1487814910, "answer_count": 2, "score": -5, "last_activity_date": 1487840695, "creation_date": 1487806487, "last_edit_date": 1487840695, "question_id": 42404340, "link": "https://stackoverflow.com/questions/42404340/how-to-move-directory-into-subdirectory-in-linux", "closed_reason": "Needs details or clarity", "title": "How to move directory into subdirectory in Linux", "body": "<p>I finished creating the tree, just need help on how to move sample_dir1 (which is a sub directory of the home directory) into sample_dir using relative pathname. Viewing the tree below will make the question much easier to understand:</p>\n\n<pre><code>$\nULI101 Assignment 2.3:  Practice Specifying Path Names                Page 3/15\n--------------------------------------------------------------------------------\nsample_dir1\n`-- sample_dir\n    |-- admin\n    |-- cambridge\n    |   |-- cafeteria\n    |   |-- library\n    |   `-- security\n    |       |-- annex\n    |       |-- building\n    |       `-- parking\n    |-- faculty\n    |-- history.exe\n    |-- markham\n    |   |-- annex\n    |   |-- building1\n    |   `-- parking\n    |-- oxford\n    |   |-- outline.doc\n    |   |-- programming\n    |   |   `-- report.pdf\n    |   `-- security\n    `-- stenton\n        |-- gen_ed\n        `-- lib_arts\n            |-- english.txt\n            `-- match.doc\n</code></pre>\n\n<p><code>sample_dir1</code> is a subdirectory of your current (home) directory. Move to\n<code>sample_dir</code> using a relative pathname:</p>\n"}, {"tags": ["c", "loops", "while-loop"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1487804981, "post_id": 42404021, "comment_id": 71954887, "body": "Do you know how average is calculated?"}, {"owner": {"reputation": 65, "user_id": 6947206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babfe5d3fd324806a582137682f539b4?s=128&d=identicon&r=PG&f=1", "display_name": "jh365", "link": "https://stackoverflow.com/users/6947206/jh365"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487805127, "post_id": 42404021, "comment_id": 71954928, "body": "@Eugene, yes. Add all, then divide by the amount of numbers. I&#39;m new to coding and C so I apologize if your question was sarcastic. I just need some pointers on how to go about implementing this."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 1, "creation_date": 1487805227, "post_id": 42404021, "comment_id": 71954964, "body": "You already have the loop. You just need to have 2 more variables, one for the sum (add <code>n</code>), the second to count how many numbers (add +1). Then display result of calculation (not forgetting to cast to float or double, to avoid rounding down)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1487805234, "post_id": 42404021, "comment_id": 71954968, "body": "I wasn&#39;t sarcastic, just trying to direct you instead of giving away the answer. So what do you need to calculate the average? The total sum and the number of elements. Do you know how to calculate each one of these?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1487805244, "post_id": 42404021, "comment_id": 71954973, "body": "No, the question was sincere. Clearly, you need a counter for the number of entries and a variable to accumulate them, just as your textual explanation states."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1487805405, "post_id": 42404021, "comment_id": 71955030, "body": "@jh365: you do not need <i>pointers</i> to do this, define 2 local variables, initialize tem to 0, add each age to one as it is entered and increment the other by one, print the division of the first by the second, unless no numbers have been entered, in which case nothing should be printed. You currently do not support for the first input to be <code>-1</code>, nor do you check the return value of <code>scanf()</code>."}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 3, "creation_date": 1487805502, "post_id": 42404021, "comment_id": 71955074, "body": "@chqrlie &quot;Pointers&quot; as in help, not pointers in a C sense :D"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1487805706, "post_id": 42404021, "comment_id": 71955157, "body": "@AntonH: hence the use of italics ;-)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1487805908, "post_id": 42404021, "comment_id": 71955220, "body": "Note that you will treat -1 as a valid value in the body of the loop (and it&#39;ll probably be the smallest value, unless the user enters -2 or some other negative value first.  As so often, the difficulty is in validating the user&#39;s input.  You should also test the result of <code>scanf()</code> \u2014 if the user types <code>age 10</code>, your program will run a long time (because the <code>a</code> isn&#39;t a digit, so it leaves it to be read by the next input operation, which finds it isn&#39;t a digit, so \u2026).  You&#39;ll need to do some modest modifications to avoid such problems."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487806836, "post_id": 42404021, "comment_id": 71955612, "body": "Best to rollback your code to what it was.  The SO model here is you post, people answer.  Not an iterative session of updating code."}, {"owner": {"reputation": 65, "user_id": 6947206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babfe5d3fd324806a582137682f539b4?s=128&d=identicon&r=PG&f=1", "display_name": "jh365", "link": "https://stackoverflow.com/users/6947206/jh365"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487806978, "post_id": 42404021, "comment_id": 71955674, "body": "@chux sorry man didn&#39;t know what else to do because I can&#39;t comment code. Won&#39;t happen again boss"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1487807095, "post_id": 42404021, "comment_id": 71955719, "body": "@jh365  The updated version of the program is invalid. The first entered value can be -1. In this case the program will output an invalid result. See my answer. There is shown how the program can be written correctly."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487807514, "post_id": 42404021, "comment_id": 71955878, "body": "@jh365 Suggest reviewing <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 916, "user_id": 4861127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153227586946113/picture?type=large", "display_name": "Liu", "link": "https://stackoverflow.com/users/4861127/liu"}, "edited": false, "score": 0, "creation_date": 1487805477, "post_id": 42404077, "comment_id": 71955063, "body": "Do you mean &#39;total/numberOfInput?&#39;"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1487805479, "post_id": 42404077, "comment_id": 71955064, "body": "I am not the downvoter, but you have an infinite loop... and your average formula is incorrect (which is not obvious at first sight ;-)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487805578, "post_id": 42404077, "comment_id": 71955101, "body": "1) Don&#39;t ask about votes in the answer body. It is unrelated. 2) Yes, downvote has to be explained, otherwise it&#39;s useless. 3) I can think of several reasons for this DV (not mine): a) Giving away a trivial answer instead of teaching the OP something. b) Usage of (potentially) uninitialized variables. c) As stated - infinite loop as written"}, {"owner": {"reputation": 124, "user_id": 7607741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WDZyb.png?s=128&g=1", "display_name": "Jcrash29", "link": "https://stackoverflow.com/users/7607741/jcrash29"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487805637, "post_id": 42404077, "comment_id": 71955132, "body": "@EugeneSh, sorry had to ask in the body, I didn&#39;t have the rep to comment. Now I do."}], "tags": [], "owner": {"reputation": 124, "user_id": 7607741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WDZyb.png?s=128&g=1", "display_name": "Jcrash29", "link": "https://stackoverflow.com/users/7607741/jcrash29"}, "is_accepted": false, "score": 2, "last_activity_date": 1487805710, "last_edit_date": 1487805710, "creation_date": 1487805233, "answer_id": 42404077, "question_id": 42404021, "link": "https://stackoverflow.com/questions/42404021/how-can-i-average-these-user-inputs/42404077#42404077", "title": "How can I average these user inputs?", "body": "<p>Inside your while statement you should keeping track of the number of inputs, and the total value of the inputs</p>\n\n<pre><code> int numberOfInputs = 0;\n int totalValue = 0;\n\n while(n != -1)\n {\n     numberOfInputs++;\n     totalValue += n;\n     // Your other While-loop code here\n }\n</code></pre>\n\n<p>The average in than found by dividing the totalValue by the numberOfInputs.</p>\n\n<pre><code>float Average = (float)totalValue/numberOfInputs;\n</code></pre>\n\n<p>Note I cast this to a float so the calculation is done in floating point, not integer, arithmetic.</p>\n"}, {"comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1487805944, "post_id": 42404221, "comment_id": 71955234, "body": "Don&#39;t use <code>N</code> and <code>n</code> as variable names.  Use meaningful names."}, {"owner": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1487806009, "post_id": 42404221, "comment_id": 71955261, "body": "&#39;N&#39; is commonly used in statistics, and is meaningful for this reason.  Why deny the history of the field in its application?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487806171, "post_id": 42404221, "comment_id": 71955327, "body": "Identifiers that differ only in <i>case</i> tend to be harder to understand/differentiate  than identifiers that differ in text.  Using <code>age</code> vs. <code>n</code> would help separate <code>n</code> from <code>N</code>."}, {"owner": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487806310, "post_id": 42404221, "comment_id": 71955385, "body": "@chux, duly noted.  Thanks."}, {"owner": {"reputation": 65, "user_id": 6947206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babfe5d3fd324806a582137682f539b4?s=128&d=identicon&r=PG&f=1", "display_name": "jh365", "link": "https://stackoverflow.com/users/6947206/jh365"}, "edited": false, "score": 1, "creation_date": 1487806666, "post_id": 42404221, "comment_id": 71955544, "body": "So far, this has worked. Except that the result does not give the expected average. I will update the original post with the new code. Thanks so much for the help"}, {"owner": {"reputation": 65, "user_id": 6947206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babfe5d3fd324806a582137682f539b4?s=128&d=identicon&r=PG&f=1", "display_name": "jh365", "link": "https://stackoverflow.com/users/6947206/jh365"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487806905, "post_id": 42404221, "comment_id": 71955645, "body": "@chux, noted sorry"}], "tags": [], "owner": {"reputation": 402, "user_id": 4084636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1", "display_name": "Adrian M.", "link": "https://stackoverflow.com/users/4084636/adrian-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1487806610, "last_edit_date": 1487806610, "creation_date": 1487805859, "answer_id": 42404221, "question_id": 42404021, "link": "https://stackoverflow.com/questions/42404021/how-can-i-average-these-user-inputs/42404221#42404221", "title": "How can I average these user inputs?", "body": "<p>To find the average in this case, you need to determine the value of N, that is, the number of age-values of which you wish to find the average (as a floating point value) within your while loop, and add each new age (as integer values)to the total age value, storing both N, and the sum of ages along with <code>smallest</code> and <code>largest</code>.  </p>\n\n<pre><code>//...your vars\nint sumOfAges = 0;\ndouble averageAge = 0.0;\nint N = 0;\n\nwhile(age != -1)\n{\n  printf(\"Enter an age: \\n\");\n  scanf(\"%d\",&amp;age);\n    if (age != -1){\n        if (age&gt;max)\n           max = age;\n        if(age &lt; min)\n           min = age;\n\n        sumOfAges += age;\n        N++;\n    }\n}\n</code></pre>\n\n<p>Then, compute the average as <code>averageAge = ((double)sumOfAges/N);</code></p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1487807279, "last_edit_date": 1487807279, "creation_date": 1487806679, "answer_id": 42404369, "question_id": 42404021, "link": "https://stackoverflow.com/questions/42404021/how-can-i-average-these-user-inputs/42404369#42404369", "title": "How can I average these user inputs?", "body": "<p>To calculate the average you should accumulate all ages and divide them by the number of the entered ages.</p>\n\n<p>The program can look the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    int largest, smallest;\n    int n, total;\n\n    n = 0;\n    total = 0;\n\n    while ( 1 )\n    {\n        int age;\n\n        printf( \"Enter an age (-1 - exit) : \" );\n\n        if ( scanf( \"%d\", &amp;age ) != 1 || age == -1 ) break;\n\n        if ( n++ == 0 )\n        {\n                largest = smallest = age;\n        }\n        else if ( largest &lt; age )\n        {\n                largest = age;\n        }\n        else if ( age &lt; smallest )\n        {\n                smallest = age;\n        }\n\n        total += age;\n    }\n\n    if ( n != 0 )\n    {\n        printf( \"\\nThe largest age is %d\", largest );\n        printf( \"\\nThe smallest age is %d\", smallest );\n        printf( \"\\nThe average age is %d\\n\", total / n );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>Enter an age (-1 - exit) : 10\nEnter an age (-1 - exit) : 20 \nEnter an age (-1 - exit) : 15 \nEnter an age (-1 - exit) : 16 \nEnter an age (-1 - exit) : 25\nEnter an age (-1 - exit) : 21\nEnter an age (-1 - exit) : -1\n\nThe largest age is 25\nThe smallest age is 10\nThe average age is 17\n</code></pre>\n\n<p>I do not think that outputting the average age as a double value is a good idea in this case. However if you want you can declare the variable <code>total</code> as having type double.:)</p>\n"}], "owner": {"reputation": 65, "user_id": 6947206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babfe5d3fd324806a582137682f539b4?s=128&d=identicon&r=PG&f=1", "display_name": "jh365", "link": "https://stackoverflow.com/users/6947206/jh365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 42404369, "answer_count": 3, "score": 2, "last_activity_date": 1487813062, "creation_date": 1487804931, "last_edit_date": 1487813062, "question_id": 42404021, "link": "https://stackoverflow.com/questions/42404021/how-can-i-average-these-user-inputs", "title": "How can I average these user inputs?", "body": "<p>The program does as intended, prompts a user to enter an age until the user enters \"-1\". Once the user enters this, the program is intended to tell you the largest, smallest, and AVERAGE. I got it all working fine except I'm unsure how to average the inputs, any help is appreciated!</p>\n\n<p>UPDATE: Thanks to all who helped, I have updated the code. The only thing left is that I don't get the correct average. I have included the updated code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int n, large, small;\n    int sumOfAges = 0;\n    double averageAge = 0.0;\n    int Num = 0;\n    printf(\"Enter an age: \\n\");\n    scanf(\"%d\", &amp;n);\n    large = n;\n    small = n;\n\n\n\n    while(n != -1)\n    {\n        printf(\"Enter an age: \\n\");\n        scanf(\"%d\",&amp;n);\n        if (n&gt;large)\n        large = n;\n        if(n &lt; small &amp;&amp; n != -1)\n        small = n;\n        sumOfAges += n;\n        Num++;\n    }\n\n     averageAge = (sumOfAges/Num);\n\n    printf(\"\\n The largest age is %d\", large);\n    printf(\"\\n The smallest age is %d\", small);\n    printf(\"\\n The average age is %lf\", averageAge);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487804612, "post_id": 42403940, "comment_id": 71954750, "body": "In <code>(a, b)</code> <code>a</code> is appearing before <code>b</code>."}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1487804647, "post_id": 42403940, "comment_id": 71954760, "body": "<code>int func(int input, int *output)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7252850, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/745878865c98f7c2d4840fa6a6e9764a?s=128&d=identicon&r=PG&f=1", "display_name": "user7252850", "link": "https://stackoverflow.com/users/7252850/user7252850"}, "edited": false, "score": 0, "creation_date": 1487805220, "post_id": 42403982, "comment_id": 71954963, "body": "Thanks! Do you have any advice on the order of primitive variables and pointers/array (disgregarding input/output order) ?"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1487805321, "post_id": 42403982, "comment_id": 71955002, "body": "Whatever makes the most sense when you&#39;re declaring it works best. Grouping parametres by type makes no sense."}], "tags": [], "owner": {"reputation": 124, "user_id": 7607741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WDZyb.png?s=128&g=1", "display_name": "Jcrash29", "link": "https://stackoverflow.com/users/7607741/jcrash29"}, "is_accepted": true, "score": 6, "last_activity_date": 1487808643, "last_edit_date": 1487808643, "creation_date": 1487804750, "answer_id": 42403982, "question_id": 42403940, "link": "https://stackoverflow.com/questions/42403940/c-input-and-out-parameters-of-a-function/42403982#42403982", "title": "C input and out parameters of a function", "body": "<p>If I have a function</p>\n\n<pre><code>void foo(int a, int b, int* c)\n{\n    *c = a+b;\n}\n</code></pre>\n\n<p>In the above case a and b are inputs while c is an output.</p>\n\n<p>Generally you use \"outputs\" in this way if you are returning an array.</p>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 1048456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6a8698d8b1a90d3d5c80edb443525a?s=128&d=identicon&r=PG", "display_name": "Vic", "link": "https://stackoverflow.com/users/1048456/vic"}, "edited": false, "score": 0, "creation_date": 1615864671, "post_id": 42404707, "comment_id": 117817951, "body": "Is it a bad idea to use a pointer as both an input and output for a function? So the value pointed to is set before calling the function, which reads and then sets the value pointed to?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 309, "user_id": 1048456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6a8698d8b1a90d3d5c80edb443525a?s=128&d=identicon&r=PG", "display_name": "Vic", "link": "https://stackoverflow.com/users/1048456/vic"}, "edited": false, "score": 0, "creation_date": 1615865170, "post_id": 42404707, "comment_id": 117818035, "body": "@Vic No, that&#39;s fine. A trivial example: <code>void increment(int *n) { (*n) ++; }</code>"}, {"owner": {"reputation": 309, "user_id": 1048456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6a8698d8b1a90d3d5c80edb443525a?s=128&d=identicon&r=PG", "display_name": "Vic", "link": "https://stackoverflow.com/users/1048456/vic"}, "edited": false, "score": 0, "creation_date": 1615868364, "post_id": 42404707, "comment_id": 117818578, "body": "Ah, incrementing makes sense. I don&#39;t think I&#39;ve come across it used for a calculation before, e.g. <code>void square(float *n);</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 309, "user_id": 1048456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa6a8698d8b1a90d3d5c80edb443525a?s=128&d=identicon&r=PG", "display_name": "Vic", "link": "https://stackoverflow.com/users/1048456/vic"}, "edited": false, "score": 1, "creation_date": 1615871900, "post_id": 42404707, "comment_id": 117819247, "body": "@Vic: As I said, it&#39;s a trivial example. And a square function would more reasonably be written as <code>float square(float x) { return x * x; }</code>. But more generally, something like <code>void update(some_type *object);</code> is fine. Or even <code>int update(some_type *object);</code> where the returned value can be used to indicate an error."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1487808961, "last_edit_date": 1487808961, "creation_date": 1487808632, "answer_id": 42404707, "question_id": 42403940, "link": "https://stackoverflow.com/questions/42403940/c-input-and-out-parameters-of-a-function/42404707#42404707", "title": "C input and out parameters of a function", "body": "<p>C doesn't actually have \"input\" and \"output\" parameters, at least not directly. (Some languages do.) All arguments are passed by value, meaning that the function gets the value of the argument, but any modifications to the parameter are invisible to the caller.</p>\n\n<p>(Terminology: A *parameter\" is a named object in the body of a function, defined between the parentheses; an <em>argument</em> is an expression in a function call. Each argument is evaluated and the resulting value is assigned to the corresponding parameter.)</p>\n\n<p>However, you can simulate \"output\" parameters using pointers. For example:</p>\n\n<pre><code>void foo(int in, int *out);\n</code></pre>\n\n<p>The pointer is passed by value, but the function can assign a value <em>via</em> the pointer to <code>*out</code>, which will be visible to the caller. (<code>out</code> can also be used as an input parameter, which is common for large types where passing a pointer is more efficient, or as an input/output parameter.)</p>\n\n<p>So \"input parameters must appear before out parameters\" probably means that non-pointer parameters should appear before pointer parameters used to return values indirectly.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 7603779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5cb463ed628d40daaab866402a759b?s=128&d=identicon&r=PG&f=1", "display_name": "moosefoot", "link": "https://stackoverflow.com/users/7603779/moosefoot"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487809570, "post_id": 42404756, "comment_id": 71956521, "body": "Very true. I will edit my answer accordingly. Most people modify the parameters using void functions, so I may have overlooked that."}], "tags": [], "owner": {"reputation": 113, "user_id": 7603779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5cb463ed628d40daaab866402a759b?s=128&d=identicon&r=PG&f=1", "display_name": "moosefoot", "link": "https://stackoverflow.com/users/7603779/moosefoot"}, "is_accepted": false, "score": 1, "last_activity_date": 1487809607, "last_edit_date": 1487809607, "creation_date": 1487808881, "answer_id": 42404756, "question_id": 42403940, "link": "https://stackoverflow.com/questions/42403940/c-input-and-out-parameters-of-a-function/42404756#42404756", "title": "C input and out parameters of a function", "body": "<p>This is <em>usually</em> for <code>void</code> functions.</p>\n\n<pre><code>void some_function (int input_1, int input_2, char* output)\n{\n    /* Do things with input_1 and input_2. */\n\n    /* Modify \"output\". */\n}\n</code></pre>\n\n<p>The code I just gave is very vague, and the input/output parameters in a void function can be applied in many ways.</p>\n"}], "owner": {"reputation": 77, "user_id": 7252850, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/745878865c98f7c2d4840fa6a6e9764a?s=128&d=identicon&r=PG&f=1", "display_name": "user7252850", "link": "https://stackoverflow.com/users/7252850/user7252850"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11498, "favorite_count": 1, "accepted_answer_id": 42403982, "answer_count": 3, "score": 2, "last_activity_date": 1487809607, "creation_date": 1487804534, "question_id": 42403940, "link": "https://stackoverflow.com/questions/42403940/c-input-and-out-parameters-of-a-function", "title": "C input and out parameters of a function", "body": "<p>For a class project I am writing, my teacher's style guide for functions says that \"input parameters must appear before out parameters.\" I am not too sure what they mean by this?</p>\n"}, {"tags": ["c", "file", "count"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487803326, "post_id": 42403617, "comment_id": 71954290, "body": "The <code>&#39;%s&quot;</code> in <code>fscanf(inp, &quot;%s&quot;, x)</code> drops leading white-space without saving them in <code>x</code>.  This mean the character count will not include white-spaces."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1487803331, "post_id": 42403617, "comment_id": 71954293, "body": "How can you read words and count characters? Say you read the words &quot;foo&quot; followed by &quot;bar&quot;. How can you know how many characters that was?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487803464, "post_id": 42403617, "comment_id": 71954340, "body": "<code>if (fscanf(inp, &quot;%s&quot;, x)==&#39; &#39;)</code> is most curious.  <code>fscanf()</code> returns the number of item scanned (or EOF).  Why compare this item count (which will be 1 or less in this case) to <code>&#39; &#39;</code>?  Same for <code>fscanf(inp, &quot;%s&quot;, x)==&#39;\\n&#39;)</code>."}, {"owner": {"reputation": 774, "user_id": 2519988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba4785d7f572a0d0e31c0e2dbbe7a0a?s=128&d=identicon&r=PG", "display_name": "Fredster", "link": "https://stackoverflow.com/users/2519988/fredster"}, "edited": false, "score": 0, "creation_date": 1487804050, "post_id": 42403617, "comment_id": 71954557, "body": "You probably want to replace the <code>fscanf()</code> for <code>fgetc()</code>. Get and sum one character at a time; every time you get a space, tab, or new line increment word counter; every time you get a new line increment lines counter"}], "answers": [{"tags": [], "owner": {"reputation": 774, "user_id": 2519988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba4785d7f572a0d0e31c0e2dbbe7a0a?s=128&d=identicon&r=PG", "display_name": "Fredster", "link": "https://stackoverflow.com/users/2519988/fredster"}, "is_accepted": true, "score": 1, "last_activity_date": 1487804551, "creation_date": 1487804551, "answer_id": 42403945, "question_id": 42403617, "link": "https://stackoverflow.com/questions/42403617/counting-words-lines-and-characters-from-a-file-in-c/42403945#42403945", "title": "Counting words, lines and characters from a file in C", "body": "<p>You cannot compare <code>fscanf(..,..,x)</code> to the read data. The read data is in <code>x</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int x[1000];\n    int w=0, l=0, c=0; //counters of words, lines and characters (respectively)\n\n    FILE *inp;\n\n    inp=fopen(\"text.txt\", \"r\"); //opening the file\n\n    int character_read;\n    while( (character_read = fgetc(inp)) !=EOF)    //checking if the end of the file\n    {\n        // One character was read\n        c++;\n        // Check if it is a separator char (count another word)\n        if (   character_read == ' ' \n            || character_read == '\\n'\n            || character_read == '\\t' )\n        {\n            w++; \n        }\n        // Check if it was a newline (count a new line)\n        if (character_read == '\\n')\n            l++;\n\n\n    }\n\n    printf(\"The number of lines is: %d\\n\", l);\n    printf(\"The number of words is: %d\\n\", w);\n    printf(\"The number of characters is: %d\\n\", c);\n\n    fclose(inp);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6312698, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cuZvodx4zpQ/AAAAAAAAAAI/AAAAAAAAAiI/vnFEkbm5H58/photo.jpg?sz=128", "display_name": "Yacine", "link": "https://stackoverflow.com/users/6312698/yacine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 42403945, "answer_count": 1, "score": -3, "last_activity_date": 1487804551, "creation_date": 1487803068, "last_edit_date": 1487803338, "question_id": 42403617, "link": "https://stackoverflow.com/questions/42403617/counting-words-lines-and-characters-from-a-file-in-c", "title": "Counting words, lines and characters from a file in C", "body": "<p>I attempted to do a program that counts the number of words, lines and characters in a .txt file. When I run the program, it always shows 0 for both lines and words and gives me a wrong number for the character count.\nIf anyone can single out the mistakes for me that would be great. Thank you in advance =D</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int x[1000];\n    int w=0, l=0, c=0; //counters of words, lines and characters (respectively)\n\n    FILE *inp;\n\n    inp=fopen(\"text.txt\", \"r\"); //opening the file\n\n    while(fscanf(inp, \"%s\", x)!=EOF)    //checking if the end of the file\n    {\n        fscanf(inp, \"%s\", x);\n        c++;\n        if (fscanf(inp, \"%s\", x)==' '){\n            w++; \n            c--;\n        }\n        else if (fscanf(inp, \"%s\", x)=='\\n'){\n            l++;\n            w++;\n        }\n    }\n\n    printf(\"The number of lines is: %d\\n\", l);\n    printf(\"The number of words is: %d\\n\", w);\n    printf(\"The number of characters is: %d\\n\", c);\n\n    fclose(inp);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gtk3", "gtksourceview"], "answers": [{"tags": [], "owner": {"reputation": 1427, "user_id": 1599887, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31758de16279cc43ba0bf6094dc4260b?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1599887/alex"}, "is_accepted": true, "score": 2, "last_activity_date": 1489700997, "last_edit_date": 1489700997, "creation_date": 1487885677, "answer_id": 42426614, "question_id": 42403102, "link": "https://stackoverflow.com/questions/42403102/gtksourceview-gtksourcebuffer-how-to-mark-a-line-in-red-and-show-an-icon/42426614#42426614", "title": "GtkSourceView/ GtkSourceBuffer - How to mark a line in red and show an icon", "body": "<p>Ok, I figured it out myself. Here a version which marks the background red and displays a small error-dialog item. If the mouse if hovered over the item, an error-message will be displayed.</p>\n\n<pre><code>//data which is needed in different methods\ntypedef struct\n{\n    GtkSourceMarkAttributes* plainTextEditor_lineMarkers_warningAttributes;\n    GtkSourceMarkAttributes* plainTextEditor_lineMarkers_errorAttributes;\n    ...\n} context_base;\n\n// things to do only once\nint main(int argc, char *argv[])\n{\n    ...\n    GtkWidget * plainTextEditor_textView = gtk_source_view_new();\n    gtk_source_view_set_highlight_current_line (GTK_SOURCE_VIEW(plainTextEditor_textView),TRUE);\n    gtk_source_view_set_show_line_numbers (GTK_SOURCE_VIEW(plainTextEditor_textView),TRUE);\n    gtk_source_view_set_show_line_marks (GTK_SOURCE_VIEW(plainTextEditor_textView), TRUE);\n\n    context-&gt;plainTextEditor_lineMarkers_errorAttributes = gtk_source_mark_attributes_new();\n    gtk_source_mark_attributes_set_background(context-&gt;plainTextEditor_lineMarkers_errorAttributes, &amp;error_color);\n    gtk_source_mark_attributes_set_icon_name(context-&gt;plainTextEditor_lineMarkers_errorAttributes,\"dialog-error\");\n    gtk_source_view_set_mark_attributes( GTK_SOURCE_VIEW(plainTextEditor_textView), sourceMarkCategory_error, context-&gt;plainTextEditor_lineMarkers_errorAttributes, 10);\n    ...\n}\n\n// callback to display message when hovering on the linemarker\ngchar* on_lineMarkerTooltip_displayed(GtkSourceMarkAttributes *attributes, GtkSourceMark *mark, linemarker* marker)\n{\n    if( marker-&gt;message == NULL)\n        return NULL;\n    return strdup(marker-&gt;message);\n}\n\n// method to create new linemark\nvoid plainTextEditor_textView_addLineMarker(int lineNumber, linemarker* marker, context_base* context)\n{\n    if( context-&gt;plainTextEditor_lineMarkers[lineNumber-1]-&gt;message != NULL ) // there is a message on this line\n    {\n        if( strcmp(context-&gt;plainTextEditor_lineMarkers[lineNumber-1]-&gt;message, marker-&gt;message ) == 0 ) // its the same message, nothing to do\n        {\n            return;\n        }\n    }\n    GtkWidget* plainTextEditor_textView = get_plainTextEditor_textView_from_notebook(context-&gt;notebook);\n    GtkTextIter iter;\n    GtkTextBuffer * buffer = gtk_text_view_get_buffer( GTK_TEXT_VIEW(plainTextEditor_textView) );\n    gtk_text_buffer_get_iter_at_line( buffer, &amp;iter, lineNumber );\n\n    context-&gt;plainTextEditor_lineMarkers[lineNumber-1]-&gt;message = strdup(marker-&gt;message);\n\n    char sourceMarkName[sourceMarkNameMaxDigits];\n    snprintf(sourceMarkName, sourceMarkNameMaxDigits, \"%i\", lineNumber);\n    gtk_source_view_set_mark_attributes (GTK_SOURCE_VIEW(plainTextEditor_textView),sourceMarkCategory_error,context-&gt;plainTextEditor_lineMarkers_errorAttributes,10);\n    gtk_source_buffer_create_source_mark( GTK_SOURCE_BUFFER(buffer), sourceMarkName, sourceMarkCategory_error, &amp;iter );\n    g_signal_connect(G_OBJECT(context-&gt;plainTextEditor_lineMarkers_errorAttributes), \"query-tooltip-text\", G_CALLBACK(on_lineMarkerTooltip_displayed), context-&gt;plainTextEditor_lineMarkers[lineNumber-1]);\n}\n</code></pre>\n"}], "owner": {"reputation": 1427, "user_id": 1599887, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/31758de16279cc43ba0bf6094dc4260b?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1599887/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "accepted_answer_id": 42426614, "answer_count": 1, "score": 2, "last_activity_date": 1489700997, "creation_date": 1487800854, "last_edit_date": 1487801255, "question_id": 42403102, "link": "https://stackoverflow.com/questions/42403102/gtksourceview-gtksourcebuffer-how-to-mark-a-line-in-red-and-show-an-icon", "title": "GtkSourceView/ GtkSourceBuffer - How to mark a line in red and show an icon", "body": "<p>I would like to mark some text in a GtkSourceView in red and show an icon. Here my current attempt which seems to do nothing at all:</p>\n\n<pre><code>void plainTextEditor_textView_addLineMarker(int lineNumber, linemarker* marker, context_base* context)\n{\n    GtkWidget* plainTextEditor_textView = get_plainTextEditor_textView_from_notebook(context-&gt;notebook);\n    GtkTextIter iter;\n    GtkTextBuffer * buffer = gtk_text_view_get_buffer( GTK_TEXT_VIEW(plainTextEditor_textView) );\n    gtk_text_buffer_get_iter_at_line( buffer, &amp;iter, lineNumber );\n    printf(\"extendedEditor_linebox_markError %i\\n\", lineNumber);\n    gtk_source_buffer_create_source_mark( GTK_SOURCE_BUFFER(buffer), marker-&gt;message, \"dialog-error\", &amp;iter );\n}\n</code></pre>\n\n<p>The printf prints the correct linenumber.</p>\n\n<p>If I call the method twice, gtk prints some gtk-critical: \"Mark myMark already exists in the buffer\".</p>\n\n<p>However there is no visible change at all on the gtksourceview.</p>\n\n<p>Probably I should do something with <code>gtk_source_mark_attributes</code> to change properties for a specific category ? But how ? I cannot find any good info on how to use it.</p>\n"}, {"tags": ["c", "for-loop", "recursion", "iteration"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1487800552, "post_id": 42402759, "comment_id": 71953064, "body": "&quot;i&#39;m not sure its correct and works the same as the first function&quot;. That&#39;s what testing is for. Design your tests and run them. If the results are wrong then you know the code is not correct. From there you would then start debugging. Posting on Stackoverflow is not the first step of testing or debugging."}, {"owner": {"reputation": 1, "user_id": 7607467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aaa2e14a3030c4138567565b51e3194?s=128&d=identicon&r=PG&f=1", "display_name": "mikecodeguy", "link": "https://stackoverflow.com/users/7607467/mikecodeguy"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1487800672, "post_id": 42402759, "comment_id": 71953116, "body": "@kaylum ive tried ALL DAY ive been printing out all the index and skip i cant figure it out you dont think ive been testing and trying things that a rude assumption..."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1487800704, "post_id": 42402759, "comment_id": 71953138, "body": "Then why don&#39;t you say that? Share your testing result - input, expected output, actual output. That and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> are what all SO questions should have to help the reader know what your specific issue is."}], "answers": [{"comments": [{"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1487801189, "post_id": 42403060, "comment_id": 71953366, "body": "You are making an answer based on <b>unclear and uncomplete question</b>. What is the range of <code>skip</code> variable ? Try with <code>openarray(-1)</code> and see."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1487801450, "post_id": 42403060, "comment_id": 71953486, "body": "@Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9, I don&#39;t see the issue. Both the reference recursive implementation and the provided iterative implementation work the same for <code>openarray(-1)</code> (even though it&#39;s obviously not a valid input)."}, {"owner": {"reputation": 1, "user_id": 7607467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aaa2e14a3030c4138567565b51e3194?s=128&d=identicon&r=PG&f=1", "display_name": "mikecodeguy", "link": "https://stackoverflow.com/users/7607467/mikecodeguy"}, "edited": false, "score": 0, "creation_date": 1487801503, "post_id": 42403060, "comment_id": 71953513, "body": "@ikegami thank you i think this works! testing now seems to have same output as recursive approach"}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1487801137, "last_edit_date": 1487801137, "creation_date": 1487800663, "answer_id": 42403060, "question_id": 42402759, "link": "https://stackoverflow.com/questions/42402759/converting-function-to-use-iteration/42403060#42403060", "title": "Converting function to use iteration", "body": "<p>Step 1: Let's put the recursive call at the very end.</p>\n\n<pre><code>void openarray(skip)\n{\n    int i;\n    for(i = skip; i &lt; 150; i+=skip + 1) \n    {\n        if(arrayB[i] == open)\n        {\n            arrayB[i] = close;\n        }\n        else\n        {\n            arrayB[i] = open;\n        }\n    }\n\n    if(skip &gt;= 150)\n        return;\n\n    openarray(skip + 1);\n} \n</code></pre>\n\n<p>Step 2: Add the loop.</p>\n\n<pre><code>void openarray(skip)\n{\n    while (1) {\n        int i;\n        for(i = skip; i &lt; 150; i+=skip + 1) \n        {\n            if(arrayB[i] == open)\n            {\n                arrayB[i] = close;\n            }\n            else\n            {\n                arrayB[i] = open;\n            }\n        }\n\n        if(skip &gt;= 150)\n            return;\n\n        skip = skip + 1;\n    } \n}\n</code></pre>\n\n<p>Step 3: Clean up</p>\n\n<pre><code>void openarray(skip)\n{\n    for (; skip &lt; 150; ++skip)\n    {\n        int i;\n        for(i = skip; i &lt; 150; i+=skip + 1) \n        {\n            if(arrayB[i] == open)\n            {\n                arrayB[i] = close;\n            }\n            else\n            {\n                arrayB[i] = open;\n            }\n        }\n    } \n}\n</code></pre>\n\n<p>We can compare this against your code to see what errors you made:</p>\n\n<ul>\n<li>You initialized the outer loop counter to zero.</li>\n<li>You used the outer loop counter as the array index instead of the inner loop counter.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 7607467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aaa2e14a3030c4138567565b51e3194?s=128&d=identicon&r=PG&f=1", "display_name": "mikecodeguy", "link": "https://stackoverflow.com/users/7607467/mikecodeguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1508240615, "creation_date": 1487799445, "last_edit_date": 1508240615, "question_id": 42402759, "link": "https://stackoverflow.com/questions/42402759/converting-function-to-use-iteration", "title": "Converting function to use iteration", "body": "<p>I have written a recursive function to access array elements. Every 2nd, 3rd, 4th, and so on to 150. I want to do the same thing but with iteration. I have coded something below, the first example it runs but i'm not sure its correct and works the same as the first function. I know i'm using two for loops to do this i may have placed the index var in wrong spot. </p>\n\n<pre><code>void openarray(skip)\n{\n    int i;\n    for(i = skip; i &lt; 150; i+=skip + 1) \n    {\n        if(arrayB[i] == open)\n        {\n            arrayB[i] = close;\n        }\n        else\n        {\n            arrayB[i] = open;\n        }\n    }\n    if(skip &lt; 150)\n    {\n        openarray(skip + 1);\n    }\n} \n</code></pre>\n\n<p>my code to turn into iteration i think i may have confused the index for step or vice versa.</p>\n\n<pre><code>int i, j;\nfor(i = 0; i &lt; 150; i++) \n{\n    for (j = 0; j &lt; 150; j+=i + 1)\n    if(arrayB[i] == open)\n    {\n        arrayB[i] = close;\n    }\n    else\n    {\n        arrayB[i] = open;\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1487800453, "post_id": 42402755, "comment_id": 71953018, "body": "<code>&quot;%2F&quot;</code> is a bit longer than one character..."}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487801119, "post_id": 42402755, "comment_id": 71953343, "body": "@EugeneSh. I understand that. But I&#39;m supposed to replace symbols like &quot;/&quot; with their ASCII codes, so it can&#39;t really be helped can it?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1487801607, "post_id": 42402755, "comment_id": 71953567, "body": "Then use the proper function to print more than one character. You have already used <code>puts</code> and <code>printf</code>."}, {"owner": {"reputation": 774, "user_id": 2519988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba4785d7f572a0d0e31c0e2dbbe7a0a?s=128&d=identicon&r=PG", "display_name": "Fredster", "link": "https://stackoverflow.com/users/2519988/fredster"}, "edited": false, "score": 1, "creation_date": 1487801739, "post_id": 42402755, "comment_id": 71953618, "body": "And also... don&#39;t you wanna write <code>if (input[i] == &#39;&#47;&#39;)</code> instead of <code>if (input[i] = &#39;&#47;&#39;)</code>"}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487801773, "post_id": 42402755, "comment_id": 71953636, "body": "@EugeneSh. I would, if I knew what that was. Which is the entire point of me asking."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487801905, "post_id": 42402755, "comment_id": 71953696, "body": "I really don&#39;t get what you are asking. You are using functions <code>puts</code> and <code>printf</code>, meaning that you are obviously aware of their existence and capabilities. Why don&#39;t you use one of these to print instead of <code>putchar</code>?"}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487802899, "post_id": 42402755, "comment_id": 71954143, "body": "@EugeneSh. Oh! That&#39;s what you meant. Because when I used <code>puts</code> it replaces the whole sentence and I only want to replace every instance of the one symbol. Though that&#39;s probably another problem somewhere in my code."}, {"owner": {"reputation": 8137, "user_id": 7014451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88303e9efdb9b80cfe1bbb61f9a69ae?s=128&d=identicon&r=PG&f=1", "display_name": "dfd", "link": "https://stackoverflow.com/users/7014451/dfd"}, "edited": false, "score": 0, "creation_date": 1487814986, "post_id": 42402755, "comment_id": 71958183, "body": "Please edit your question - as it is, nobody can use your question in future searches."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 774, "user_id": 2519988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba4785d7f572a0d0e31c0e2dbbe7a0a?s=128&d=identicon&r=PG", "display_name": "Fredster", "link": "https://stackoverflow.com/users/2519988/fredster"}, "edited": false, "score": 0, "creation_date": 1487817788, "post_id": 42402755, "comment_id": 71958921, "body": "@Fredster Or better yet, <code>if (&#39;&#47;&#39; == input[i])</code>.  That way, the compiler will detect the common typo."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487802960, "post_id": 42403400, "comment_id": 71954162, "body": "So I used <code>puts(&quot;%2f&quot;);</code> but it ended up replacing the whole line and printing out only <code>%2F</code>."}, {"owner": {"reputation": 774, "user_id": 2519988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba4785d7f572a0d0e31c0e2dbbe7a0a?s=128&d=identicon&r=PG", "display_name": "Fredster", "link": "https://stackoverflow.com/users/2519988/fredster"}, "reply_to_user": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487803448, "post_id": 42403400, "comment_id": 71954329, "body": "Well that&#39;s unexpected. putchar() apparently accepts the character in form of an <code>int</code> (usually 4 bytes). You&#39;re string: &quot;%2f&quot; has 3 characters and automatically appended terminator &#39;\\0&#39; for string literals, that&#39;s why you&#39;re not getting an error and are probably able to compile. But you&#39;re at least getting a warning from the compiler. The result from calling the function <code>putchar()</code> that clearly expects one character is unexpected if you pass it more than one."}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487804274, "post_id": 42403400, "comment_id": 71954638, "body": "Hmm I see. What a conundrum. Well, how about this, do you know how to fold a long line of user input? As in after a certain amount of characters it breaks to a new line."}, {"owner": {"reputation": 774, "user_id": 2519988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba4785d7f572a0d0e31c0e2dbbe7a0a?s=128&d=identicon&r=PG", "display_name": "Fredster", "link": "https://stackoverflow.com/users/2519988/fredster"}, "reply_to_user": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487804765, "post_id": 42403400, "comment_id": 71954803, "body": "While the user is typing? Or after you&#39;ve received the line in your program? In the 2nd case just create a loop to go through the string received and copy it into a new string inserting a new line character in the position you want."}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487806182, "post_id": 42403400, "comment_id": 71955330, "body": "After the input has been fully received, stored, and edited accordingly."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1487806253, "post_id": 42403400, "comment_id": 71955359, "body": "Printing the newline character &#39;\\n&#39; takes you to a new line."}], "tags": [], "owner": {"reputation": 774, "user_id": 2519988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cba4785d7f572a0d0e31c0e2dbbe7a0a?s=128&d=identicon&r=PG", "display_name": "Fredster", "link": "https://stackoverflow.com/users/2519988/fredster"}, "is_accepted": false, "score": 0, "last_activity_date": 1487802082, "creation_date": 1487802082, "answer_id": 42403400, "question_id": 42402755, "link": "https://stackoverflow.com/questions/42402755/how-to-format-a-user-entered-line/42403400#42403400", "title": "How to format a user entered line?", "body": "<p>You're trying to pass 3 characters '%' '2' 'f' to a function <code>putchar()</code> that expects one character.</p>\n\n<p>Consider using \n<code>printf(\"%%2f\")</code>\ninstead of \n<code>putchar(\"%2f\")</code>, you'll get the same output in stdout.</p>\n\n<p>Note: you have to escape the percent character in printf with (%).</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487808401, "post_id": 42404536, "comment_id": 71956188, "body": "Oh my goodness, thank you so much! I&#39;m going to give this a try now!"}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487813550, "post_id": 42404536, "comment_id": 71957739, "body": "So for the purposes of this class I have to use a gcc compiler and apparently it doesn&#39;t like for loops. Thanks for your help though. Maybe I can somehow tweak the code so that the gcc compiler likes it lol."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "reply_to_user": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487818706, "post_id": 42404536, "comment_id": 71959180, "body": "@Polly gcc shouldn&#39;t have any trouble with this.  What error were you getting?  (If it was something about &quot;\u2018for\u2019 loop initial declarations&quot;, try passing <code>--std=c99</code> to gcc or moving the declaration of <code>int i</code> out of the loop.  The ability to declare variables within loop headers wasn&#39;t in the language originally and gcc uses the old standard by default.)"}, {"owner": {"reputation": 174, "user_id": 7600876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34afab5e51bc73f357e9b112bd6b48df?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff K", "link": "https://stackoverflow.com/users/7600876/jeff-k"}, "edited": false, "score": 0, "creation_date": 1487891738, "post_id": 42404536, "comment_id": 72001445, "body": "It was written and tested on GCC 5.4: &quot;gcc test.c -o test &quot;"}], "tags": [], "owner": {"reputation": 174, "user_id": 7600876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34afab5e51bc73f357e9b112bd6b48df?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff K", "link": "https://stackoverflow.com/users/7600876/jeff-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1487808362, "last_edit_date": 1487808362, "creation_date": 1487807623, "answer_id": 42404536, "question_id": 42402755, "link": "https://stackoverflow.com/questions/42402755/how-to-format-a-user-entered-line/42404536#42404536", "title": "How to format a user entered line?", "body": "<p>Since I don't have the points to comment on the above...</p>\n\n<p>Background: </p>\n\n<ul>\n<li>C doesn't really have 'strings' - it has pointers to characters which it handles very much like arrays.</li>\n<li>standard library functions expect the last value in the array to be '\\0', and they will keep processing characters until one of these 'null characters' is read.</li>\n</ul>\n\n<p>This line:</p>\n\n<pre><code>putchar(\"%2F\");\n</code></pre>\n\n<p>Passes a pointer (char *) to 'putchar()' instead of an integer.</p>\n\n<p>The warning is simply pointing out the type mismatch, because it's unlikely you meant to do that. (it is correct, this is a <strong>serious</strong> mistake which can crash or cause vulnerabilities depending on the way the called function operates)</p>\n\n<p>Most machines/compilers nowadays are LP64. That means 'putchar()' expects a 32bit integer, and you are providing a 64bit pointer.</p>\n\n<p>The reason this code:</p>\n\n<pre><code>int i = 0;\nwhile ( input[i] != '\\n' )\n{\n    if (input[i] == '/')\n        puts(\"%2F\");\n    i++    \n}\n</code></pre>\n\n<p>prints out \"%2F\" (I assume given the input \"google.COM/search?client\") is because it finds '/' once, and prints the string you provided \"%2F\".  No other character executes a print statement.<br>\nIf you added:</p>\n\n<pre><code>int i = 0;\nwhile ( input[i] != '\\n' )\n{\n    if (input[i] == '/')\n        puts(\"%2F\");\n    else\n        putc(intput[i]);\n    i++    \n}\n</code></pre>\n\n<p>you would get </p>\n\n<pre><code>google.COM%2F\nsearch?client\n</code></pre>\n\n<p>because puts() prints a newline ('\\n') after printing its input.</p>\n\n<p>To avoid that you'll need to choose a different output function, and while many options are available, printf() is likely the best and certainly the most recognizable.</p>\n\n<p>printf() prints 'formatted' text which uses '%' to indicate formatting options, so printing a single '%' requires you to 'escape' it which looks like \"%%\"</p>\n\n<p>Here is a working example of what you're trying to do.\nI replaced, what must be a large block of</p>\n\n<pre><code>if (input[i] == 'CHAR') printf(\"%%XX\");\nelse if (input[i] == ...\n</code></pre>\n\n<p>by putting all the special characters in a string. \nI simply check whether that string contains each character I'm about to print.</p>\n\n<p>If the character is found, I print a '%' followed by the character's hex value.  The \"%02X\" tells printf() to write the hex value with at least 2 characters and to put 0 in front if it needs to pad the value.  Basically it will never write '9' but instead write '09'.  </p>\n\n<p>You could also use the isalpha() ... isalphanum() ... ispunct() functions to identify which types of characters you should encode.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char ** argv)\n{\n    char *decodeStr = \"/:\\\\+\";\n    int   decodeLen = strlen(decodeStr);\n\n    while(--argc &gt;= 0 &amp;&amp; ++argv &amp;&amp; *argv){\n        char *str = *argv;\n        for(int i = 0; str[i] != '\\0'; i++){\n            if (NULL != memchr(decodeStr, str[i], decodeLen))\n                printf(\"%%%02X\", str[i]);\n            else\n                putchar(str[i]);\n        }\n        putchar('\\n');\n    }\n    return 0;\n}\n</code></pre>\n\n<p>example run:</p>\n\n<pre><code>./test http://google.com/atest+with+things\nhttp%3A%2F%2Fgoogle.com%2Fatest%2Bwith%2Bthings\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487808362, "creation_date": 1487799426, "last_edit_date": 1487800117, "question_id": 42402755, "link": "https://stackoverflow.com/questions/42402755/how-to-format-a-user-entered-line", "title": "How to format a user entered line?", "body": "<p>THIS IS A DIFFERENT QUESTION ENTIRELY. THE OTHER ONE IS URL SPECIFIC MINE IS NOT. THAT WAS JUST AN EXAMPLE.</p>\n\n<p>So here's my code:</p>\n\n<pre><code>main()\n{\n        char input[150];                                                                        //Create a variable of type char named input to store user input\n\n        printf(\" Enter a standard line: \");                                                     //Ask the user for some standard input\n\n        if (fgets(input, 150, stdin) == NULL)                                                   //Initiate a series of checks to make sure there is valid input\n        {\n                puts(\" End-of-File or Input Error Detected. \");                                 //If the end of the file is reached or there is a problem with input output a message\n        }\n        else if (input[0] == '\\n')                                                              //If the user neglected to enter anything output a message\n        {\n                puts(\" Oops! Looks like you forgot to enter something! \");\n        }\n        else\n        {\n                printf(\" Here's what you entered: %s \", input);                                 //If there is valid user input echo it back to the user\n\n            int i = 0;\n            while ( input[i] != '\\n' )\n            {\n                    if (input[i] = '/')\n                            putchar(\"%2F\");\n                    i++\n\n            }\n\n        }\n}\n</code></pre>\n\n<p>I have to replace and adjust the input line accordingly by replacing certain characters with their ASCII code.</p>\n\n<p>For example:\n1. user inputs: google.COM/search?client<br>\n2. program changes and prints back to the user as: GOOGLE.com%2FSEARCH%3FCLIENT</p>\n\n<p>But the system gives me this long error message when I try to compile my code.</p>\n\n<pre><code>/home/cs/carroll/cssc0154/One/p1.c: In function 'main':\n/home/cs/carroll/cssc0154/One/p1.c:41:5: warning: passing argument 1 of 'putchar' makes integer from pointer without a cast [enabled by default]\n     putchar(\"%2F\");\n     ^\nIn file included from /home/cs/carroll/cssc0154/One/p1.c:15:0:\n/usr/include/stdio.h:580:12: note: expected 'int' but argument is of type 'char *'\n extern int putchar (int __c);\n</code></pre>\n\n<p>Where am I going wrong?</p>\n"}, {"tags": ["c", "windows", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 2259187, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/dyxzh.jpg?s=128&g=1", "display_name": "Valmir", "link": "https://stackoverflow.com/users/2259187/valmir"}, "edited": false, "score": 0, "creation_date": 1614259079, "post_id": 42403299, "comment_id": 117334924, "body": "&quot;and have CreateProcess() inherit the handle for the writing end of the pipe&quot; was what I&#39;m missing to solve my problem. Thanks."}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": true, "score": 8, "last_activity_date": 1487804934, "last_edit_date": 1487804934, "creation_date": 1487801658, "answer_id": 42403299, "question_id": 42402673, "link": "https://stackoverflow.com/questions/42402673/createprocess-and-capture-stdout/42403299#42403299", "title": "CreateProcess and capture stdout", "body": "<p>The short answer is to create an anonymous pipe, setting the <code>hStdOut</code>/<code>hStdErr</code> and <code>dwFlag</code> members of the <code>STARTUPINFO</code> structure accordingly, and have <code>CreateProcess()</code> inherit the handle for the writing end of the pipe.  Don't forget to close your writing handle of your pipe, then you can read from the reading handle of the pipe in a loop until it fails with an <code>ERROR_BROKEN_PIPE</code> error.</p>\n\n<p>MSDN provides a detailed example of this:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499.aspx\" rel=\"noreferrer\">Creating a Child Process with Redirected Input and Output</a></p>\n\n<p>You are not the first person to do this, there should be plenty of example code and duplicate questions here on StackOverflow.</p>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 1180528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0edda902e080ebac1fa97e055bf3af?s=128&d=identicon&r=PG", "display_name": "stefan.gal", "link": "https://stackoverflow.com/users/1180528/stefan-gal"}, "is_accepted": false, "score": 1, "last_activity_date": 1586877167, "creation_date": 1586877167, "answer_id": 61211100, "question_id": 42402673, "link": "https://stackoverflow.com/questions/42402673/createprocess-and-capture-stdout/61211100#61211100", "title": "CreateProcess and capture stdout", "body": "<p>The MSDN sample mentioned by Remy Lebeau is not working for me, it hangs forever in the WriteToPipe() call. To make it simpler I replaced the child process with \"ping 127.0.0.1\" and commented out the WriteToPipe() call. Now I am able to capture the output.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 11260598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c3bfc64e6583cbf911883e9ed3294a?s=128&d=identicon&r=PG&f=1", "display_name": "domusmagister", "link": "https://stackoverflow.com/users/11260598/domusmagister"}, "is_accepted": false, "score": 1, "last_activity_date": 1616967763, "last_edit_date": 1616967763, "creation_date": 1613004610, "answer_id": 66147288, "question_id": 42402673, "link": "https://stackoverflow.com/questions/42402673/createprocess-and-capture-stdout/66147288#66147288", "title": "CreateProcess and capture stdout", "body": "<p>Microsoft example consider both program written from the same developer. In my case I was launching a generic program which output on stdout/stderr. I changed the Microsoft example in this way.\nThe following function run a generic <code>externalProgram</code> with command line <code>arguments</code>:</p>\n<pre class=\"lang-c prettyprint-override\"><code>HANDLE m_hChildStd_OUT_Rd = NULL;\nHANDLE m_hChildStd_OUT_Wr = NULL;\nHANDLE m_hreadDataFromExtProgram = NULL;\n\nHRESULT RunExternalProgram(std::string externalProgram, std::string arguments)\n{\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n    SECURITY_ATTRIBUTES saAttr;\n\n    ZeroMemory(&amp;saAttr, sizeof(saAttr));\n    saAttr.nLength = sizeof(SECURITY_ATTRIBUTES);\n    saAttr.bInheritHandle = TRUE;\n    saAttr.lpSecurityDescriptor = NULL;\n\n    // Create a pipe for the child process's STDOUT. \n\n    if (!CreatePipe(&amp;m_hChildStd_OUT_Rd, &amp;m_hChildStd_OUT_Wr, &amp;saAttr, 0))\n    {\n        // log error\n        return HRESULT_FROM_WIN32(GetLastError());\n    }\n\n    // Ensure the read handle to the pipe for STDOUT is not inherited.\n\n    if (!SetHandleInformation(m_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0))\n    {\n        // log error\n        return HRESULT_FROM_WIN32(GetLastError());\n    }\n\n    ZeroMemory(&amp;si, sizeof(si));\n    si.cb = sizeof(si);\n    si.hStdError = m_hChildStd_OUT_Wr;\n    si.hStdOutput = m_hChildStd_OUT_Wr;\n    si.dwFlags |= STARTF_USESTDHANDLES;\n\n    ZeroMemory(&amp;pi, sizeof(pi));\n\n    std::string commandLine = extProgram + &quot; &quot; + arguments;\n\n    // Start the child process. \n    if (!CreateProcessA(NULL,           // No module name (use command line)\n        (TCHAR*)commandLine.c_str(),    // Command line\n        NULL,                           // Process handle not inheritable\n        NULL,                           // Thread handle not inheritable\n        TRUE,                           // Set handle inheritance\n        0,                              // No creation flags\n        NULL,                           // Use parent's environment block\n        NULL,                           // Use parent's starting directory \n        &amp;si,                            // Pointer to STARTUPINFO structure\n        &amp;pi)                            // Pointer to PROCESS_INFORMATION structure\n        )\n    {\n        return HRESULT_FROM_WIN32(GetLastError());\n    }\n    else\n    {\n        m_hreadDataFromExtProgram  = CreateThread(0, 0, readDataFromExtProgram, NULL, 0, NULL);\n    }\n    return S_OK;\n}\n\n</code></pre>\n<p>If <code>CreateProcessA</code> succedeed, an external thread will be launched to asynchronousvly capture the output from the launched program. The code executed from the external thread is the following one:</p>\n<pre class=\"lang-c prettyprint-override\"><code>DWORD __stdcall readDataFromExtProgram(void * argh)\n{\n    DWORD dwRead;\n    CHAR chBuf[BUFSIZE];\n    BOOL bSuccess = FALSE;\n\n    for (;;)\n    {\n        bSuccess = ReadFile(m_hChildStd_OUT_Rd, chBuf, BUFSIZE, &amp;dwRead, NULL);\n        if (!bSuccess || dwRead == 0) continue;\n\n        // Log chBuf\n\n        if (!bSuccess) break;\n    }\n    return 0;\n}\n\n</code></pre>\n<p>I omitted any closing condition on all <code>HANDLE</code> and threads involved in the code.</p>\n"}], "owner": {"reputation": 25603, "user_id": 45843, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/55f76441107f14055f95e08bb7bd01df?s=128&d=identicon&r=PG&f=1", "display_name": "rwallace", "link": "https://stackoverflow.com/users/45843/rwallace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5143, "favorite_count": 1, "accepted_answer_id": 42403299, "answer_count": 3, "score": 3, "last_activity_date": 1616967763, "creation_date": 1487799144, "question_id": 42402673, "link": "https://stackoverflow.com/questions/42402673/createprocess-and-capture-stdout", "title": "CreateProcess and capture stdout", "body": "<p>When using CreateProcess to run another program, what is the recommended way to capture the stdout? That is, to take whatever the second program was printing to stdout, and end up with it in an array where the first program can analyze it?</p>\n\n<p>Both programs are straight Win32 programs written in C, no fancy stuff.</p>\n"}, {"tags": ["c", "string", "recursion", "permutation"], "comments": [{"owner": {"reputation": 1, "user_id": 5559518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N16Fz.png?s=128&g=1", "display_name": "S. M. Mostaq Hossain", "link": "https://stackoverflow.com/users/5559518/s-m-mostaq-hossain"}, "reply_to_user": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "edited": false, "score": 0, "creation_date": 1487797743, "post_id": 42402212, "comment_id": 71951543, "body": "Thanks @Black Moses for correcting the format. :)"}, {"owner": {"reputation": 1, "user_id": 5559518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N16Fz.png?s=128&g=1", "display_name": "S. M. Mostaq Hossain", "link": "https://stackoverflow.com/users/5559518/s-m-mostaq-hossain"}, "edited": false, "score": 0, "creation_date": 1487798472, "post_id": 42402212, "comment_id": 71951976, "body": "@Weaher Vane ... Ok, I agree with you.But if i although use swap function, is there any way to get my expected output?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5559518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N16Fz.png?s=128&g=1", "display_name": "S. M. Mostaq Hossain", "link": "https://stackoverflow.com/users/5559518/s-m-mostaq-hossain"}, "edited": false, "score": 0, "creation_date": 1487830086, "post_id": 42403580, "comment_id": 71963022, "body": "Thanks @Prune ...!  I&#39;ve solved my problem by changing my algorithm and not using swap function."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 5559518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N16Fz.png?s=128&g=1", "display_name": "S. M. Mostaq Hossain", "link": "https://stackoverflow.com/users/5559518/s-m-mostaq-hossain"}, "edited": false, "score": 0, "creation_date": 1487957086, "post_id": 42403580, "comment_id": 72032994, "body": "Great!  Remember to up-vote helpful things and then choose an answer (or write one yourself) so that Stack Overflow can properly retire the question."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1487802876, "creation_date": 1487802876, "answer_id": 42403580, "question_id": 42402212, "link": "https://stackoverflow.com/questions/42402212/how-can-i-change-leaf-position-string-by-recursive-permutation-in-c/42403580#42403580", "title": "How can i change leaf position string by recursive permutation in C?", "body": "<p>Your swap function won't do the job.  The algorithm you want appears to be one that prefers the elements according to their original order, so that it will <em>always</em> choose A over B over C, taking the first one available.  The swapping algorithm prefers the least change from the previous permutation.</p>\n\n<p>To get the desired output, I think you need to change to a different algorithm, one that takes a single element (cycling through each in turn); for each choice, it recurs on the remainder of the list.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5559518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N16Fz.png?s=128&g=1", "display_name": "S. M. Mostaq Hossain", "link": "https://stackoverflow.com/users/5559518/s-m-mostaq-hossain"}, "is_accepted": true, "score": 0, "last_activity_date": 1487830367, "creation_date": 1487830367, "answer_id": 42408325, "question_id": 42402212, "link": "https://stackoverflow.com/questions/42402212/how-can-i-change-leaf-position-string-by-recursive-permutation-in-c/42408325#42408325", "title": "How can i change leaf position string by recursive permutation in C?", "body": "<p>Here's the updated code for getting that expected output. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\nint N, A[27], used[27], M;\nstring temp;\nint counter;\nvoid print()\n{\nint i;\nfor (i = 0; i &lt; N; i++)\n    printf(\"%c\", temp[i]);\nprintf(\"\\n\");\n}\n\nvoid solve(int i, int used[], string str)\n{\nif (counter == M) return;\n\nif (i == N) {\n    print();\n    counter++;\n    return;\n}\n\nfor (int k = 0; k &lt; N; k++){\n    if (!used[k]){\n        temp = str;\n        temp += (char)(k + 'A');\n        used[k] = 1;\n        solve(i + 1, used, temp);\n        used[k] = 0;\n    }\n}\n}\n\nint main()\n{\nint T;\nscanf(\"%d\", &amp;T);\nfor (int testCase = 1; testCase &lt;= T; testCase++){\n    scanf(\"%d %d\", &amp;N, &amp;M);\n    for (int i = 0; i &lt; N; i++)\n        used[i] = 0;\n    counter = 0;\n    printf(\"Case %d:\\n\", testCase);\n    solve(0, used, \"\");\n}\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5559518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N16Fz.png?s=128&g=1", "display_name": "S. M. Mostaq Hossain", "link": "https://stackoverflow.com/users/5559518/s-m-mostaq-hossain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 42408325, "answer_count": 2, "score": 0, "last_activity_date": 1487830367, "creation_date": 1487797284, "last_edit_date": 1487797512, "question_id": 42402212, "link": "https://stackoverflow.com/questions/42402212/how-can-i-change-leaf-position-string-by-recursive-permutation-in-c", "title": "How can i change leaf position string by recursive permutation in C?", "body": "<p>This is sample input output of my source code of generating permutation of alphabets string</p>\n\n<pre><code>Input:\n1\n3 8\nOutput:\nCase 1:\nABC\nACB\nBAC\nBCA\nCBA\nCAB\n</code></pre>\n\n<p>I need to get <code>CAB</code> in line 5th and <code>CBA</code> in line 6th of this output, but I don't know how to do it.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint N, M, count;\nchar array[27];\n\nvoid swap (char array[], int i, int j) {\n    char t;\n    t = array[i];\n    array[i] = array[j];\n    array[j] = t;\n}\n\nvoid perm (char array[], int n, int i) {\n    if(count == M)return;\n    int j;\n    if (i == n) {\n        for (j=0; j&lt;n; j++) printf (\"%c\", array[j]);\n            count++;\n        printf (\"\\n\");\n        return;\n} else\n    for (j=i; j&lt;n; j++) {\n\n        swap (array, i, j);\n        perm (array, n, i+1);\n        swap (array, i, j);\n    }\n}\n\nint main () {\nint v[27], i, testCase, T;\nint tmp;\nchar tmpC;\nscanf(\"%d\", &amp;T);\nfor(testCase = 1; testCase &lt;= T; testCase++){\n    scanf(\"%d %d\", &amp;N, &amp;M);\n    for (i=0; i&lt;N; i++){\n        v[i] = i+1;\n        tmp = i+65;\n        tmpC = tmp;\n        array[i] = tmpC;\n    }\n    printf(\"Case %d:\\n\", testCase);\n    count = 0;\n    perm (array, N, 0);\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1487797197, "post_id": 42402159, "comment_id": 71951248, "body": "Undefined behavior galore. Turn on compiler warnings, read them, fix them, try again."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1487797380, "post_id": 42402159, "comment_id": 71951345, "body": "Does the student really have an array of 20 first name pointers and second name pointers? Or did you intend <code>char name[20];</code> instead of <code>char *name[20];</code>? Similar with the other structures. Why oh why did you not experiment on a simple case, and build the code step by tiny provable step?"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 2112278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da46df2aadfcfbe52c744dc6fe6275f2?s=128&d=identicon&r=PG", "display_name": "J.Guarin", "link": "https://stackoverflow.com/users/2112278/j-guarin"}, "is_accepted": false, "score": 1, "last_activity_date": 1487799179, "creation_date": 1487799179, "answer_id": 42402691, "question_id": 42402159, "link": "https://stackoverflow.com/questions/42402159/nested-linked-list-c/42402691#42402691", "title": "Nested linked list C", "body": "<p>The loop:</p>\n\n<pre><code>while (link2 != NULL)\n{\n    fprintf(output, \"%s\\n\", link2-&gt;subj);\n}\n</code></pre>\n\n<p>Will be infinite if link2 is not null. Inside the loop there <i>must</i> be a statement that assigns NULL at some point, to make the loop finish.</p>\n"}], "owner": {"reputation": 11, "user_id": 7607320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c8ee2814460ed7c5328cb3ab7af3f5?s=128&d=identicon&r=PG&f=1", "display_name": "Maciex26", "link": "https://stackoverflow.com/users/7607320/maciex26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1487799179, "creation_date": 1487797105, "question_id": 42402159, "link": "https://stackoverflow.com/questions/42402159/nested-linked-list-c", "title": "Nested linked list C", "body": "<p>I need to create linked list inside linked list in C.</p>\n\n<pre><code>struct subject                  \n{\nchar *subj[100];\nchar *tutor[100];\nchar *mark[10];\nchar *date[20];\n\nstruct subject* next2;\n}*head2;\n\nstruct student            \n{\nchar *name[20];\nchar *surname[20];\nint num;\nstruct subject *head2;\n\nstruct student* next1;\n}*head1;\n</code></pre>\n\n<p>I have these two structures. I try to add new node like this in loop using file.</p>\n\n<pre><code> void newstudent(FILE *fp, char buffor[255], char buffor1[255])\n {\n struct student *temp1;\n temp1 = (struct student*) malloc(sizeof(struct student));\n struct subject *temp2;\n temp2 = (struct subject*) malloc(sizeof(struct subject));\n fscanf(fp, \"%s\", temp1-&gt;name);\n fscanf(fp, \"%s\", temp1-&gt;surname);\n fscanf(fp, \"%d\", &amp;temp1-&gt;num);\n strcpy(temp2-&gt;subj, buffor);\n strcpy(temp2-&gt;tutor, buffor1);\n fscanf(fp, \"%s\", temp2-&gt;mark);\n fscanf(fp, \"%s\", temp2-&gt;date);\n temp1-&gt;next1 = NULL;\n head1 = temp1;\n temp2-&gt;next2 = NULL;\n head2 = temp2;\n }\n</code></pre>\n\n<p>And when I need only to add subject.</p>\n\n<pre><code>struct subject *temp2;\ntemp2 = (struct subject*) malloc(sizeof(struct subject));\nstrcpy(temp2-&gt;subj, buffor);\nstrcpy(temp2-&gt;tutor, buffor1);\nprintf(\"%s %s\\n\",temp2-&gt;subj,temp2-&gt;tutor);\nfscanf(fp, \"%s\", temp2-&gt;mark);\nfscanf(fp, \"%s\", temp2-&gt;date);\ntemp2-&gt;next2 = head2;\nhead2 = temp2;\n</code></pre>\n\n<p>I have problem, when I try to display elements from \"subject\" list.</p>\n\n<pre><code>while(link != NULL)\n{\n\n    fprintf(output, \"%s %s\\n\", link-&gt;name,link-&gt;surname);\n    fprintf(output, \"Number: %d\\n\", link-&gt;num);\n    struct subject *link2 = head2;\n    while (link2 != NULL)\n    {\n        fprintf(output, \"%s\\n\", link2-&gt;subj);\n    }\n\n    link = link-&gt;next1;\n}\n</code></pre>\n\n<p>I think this is problem with implementation nested list.</p>\n"}, {"tags": ["c", "calculator"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1487796697, "post_id": 42402010, "comment_id": 71950929, "body": "You must use <code>&quot;%lf&quot;</code> to read double numbers."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1487796891, "post_id": 42402010, "comment_id": 71951066, "body": "Your compiler should be warning you about the obvious mistakes in your code - you do have warnings enabled, I hope ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1487797079, "post_id": 42402010, "comment_id": 71951176, "body": "Also, you are printing <code>rate</code> as the answer instead of <code>final</code>. Which should be format <code>%f</code> anyway."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6947206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babfe5d3fd324806a582137682f539b4?s=128&d=identicon&r=PG&f=1", "display_name": "jh365", "link": "https://stackoverflow.com/users/6947206/jh365"}, "edited": false, "score": 1, "creation_date": 1487796904, "post_id": 42402040, "comment_id": 71951076, "body": "Thanks, this fixed it. Appreciated"}], "tags": [], "owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "is_accepted": true, "score": 7, "last_activity_date": 1487798033, "last_edit_date": 1487798033, "creation_date": 1487796720, "answer_id": 42402040, "question_id": 42402010, "link": "https://stackoverflow.com/questions/42402010/i-keep-getting-0-as-the-value-of-this-variable/42402040#42402040", "title": "I keep getting 0 as the value of this variable", "body": "<p>For <code>double</code> variables you need to read them using the specifier <code>%lf</code>:</p>\n\n<pre><code>scanf(\"%lf\", &amp;d);\n</code></pre>\n\n<p>same for <code>rate</code>:</p>\n\n<pre><code>scanf(\"%lf\", &amp;rate);\n</code></pre>\n\n<p><strong>C99 7.19.6.2 p 11</strong> (<code>fscanf</code>)</p>\n\n<blockquote>\n  <p><code>l</code> (ell)       (...) following a, A, e, E, <code>f</code>, F, g, or G conversion\n  specifier applies to an <strong>argument</strong> with type <strong>pointer to double</strong>; </p>\n</blockquote>\n\n<hr>\n\n<p>As pointed by @WeatherVane in comment, you need to provide the correct conversion specifier to the corresponding argument or the behavior of your program will be undefined:</p>\n\n<p><strong>C99 7.19.6.1 p 9 (<code>fprintf</code>)</strong></p>\n\n<blockquote>\n  <p>If a conversion specification is invalid, the behavior is\n  undefined.248) If <strong>any argument</strong> is <strong>not the correct type for the\n  corresponding conversion specification</strong>, the behavior is undefined.</p>\n</blockquote>\n\n<p>For <code>printf()</code> the argument <code>rate</code> should have a conversion specifier <code>%f</code>:</p>\n\n<pre><code>printf(\"After %i number of years, the deposit in the savings account is now %f\", x, rate);\n</code></pre>\n\n<p><strong>C99 7.19.6.1 p 8</strong> (<code>fprintf</code>)</p>\n\n<blockquote>\n  <p><code>f</code>,F A <strong><code>double</code> argument</strong> representing a floating-point number</p>\n</blockquote>\n"}], "owner": {"reputation": 65, "user_id": 6947206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babfe5d3fd324806a582137682f539b4?s=128&d=identicon&r=PG&f=1", "display_name": "jh365", "link": "https://stackoverflow.com/users/6947206/jh365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 42402040, "answer_count": 1, "score": 0, "last_activity_date": 1487826091, "creation_date": 1487796641, "last_edit_date": 1487796750, "question_id": 42402010, "link": "https://stackoverflow.com/questions/42402010/i-keep-getting-0-as-the-value-of-this-variable", "title": "I keep getting 0 as the value of this variable", "body": "<p>I'm trying to write this program to calculate simple interest on a deposit. It's supposed to add the interest money onto the original deposit. </p>\n\n<p>But it keeps making variable \"rate\" 0 which is why when I run it, the result is 0. Any help is appreciated.</p>\n\n<pre><code>  #include &lt;stdio.h&gt;\n\nint main(void){\n\n    double d;\n    double rate;\n    double y;\n    double final;\n    int x;\n\n    printf(\"Enter the deposit: \");\n    scanf(\"%d\", &amp;d);\n\n    printf(\"Enter the interest rate (0-100): \");\n    scanf(\"%d\", &amp;rate);\n\n    printf(\"Enter the number of years: \");\n    scanf(\"%i\", &amp;x);\n\n    rate = rate / 100;\n\n    y = d * rate * x;\n\n    final = d + y;\n\n\n    printf(\"After %i number of years, the deposit in the savings account is now %d\", x, rate);\n\n}\n</code></pre>\n"}, {"tags": ["c", "string", "algorithm", "command-line-interface", "tokenize"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 2, "creation_date": 1487795369, "post_id": 42401462, "comment_id": 71950155, "body": "<code>foo = realloc(foo, some_size)</code> is always a bad idea: if the call fails you&#39;d have to free the original pointer <code>foo</code>, which you have just written over."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 3, "creation_date": 1487795470, "post_id": 42401462, "comment_id": 71950214, "body": "@DanielJour yes, and for performance sake, reallocating one by one isn&#39;t optimal either. That&#39;s the difference between the size and the capacity."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1487795498, "post_id": 42401462, "comment_id": 71950226, "body": "The fastest of <i>which</i> algorithms? It depends on whether you are prepared to sacrifice the input string, as <code>strtok</code> does. My choice would be to advance through the string with <code>strchr</code> and write nul terminators into the spaces of the (copy of the) string."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487795502, "post_id": 42401462, "comment_id": 71950228, "body": "apart from that I&#39;d say it belongs more to codereview"}, {"owner": {"reputation": 105, "user_id": 4722429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1744ccde946714496adce8dba3a716c9?s=128&d=identicon&r=PG&f=1", "display_name": "mateass", "link": "https://stackoverflow.com/users/4722429/mateass"}, "edited": false, "score": 0, "creation_date": 1487795543, "post_id": 42401462, "comment_id": 71950255, "body": "I don&#39;t reallocate one by one only once per ten tokens look at the value of the POINTER_ARRAY_STEP macro."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1487795597, "post_id": 42401462, "comment_id": 71950285, "body": "Also you could consider getting that allocation and reallocation logic out of that function."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1487795637, "post_id": 42401462, "comment_id": 71950311, "body": "You don&#39;t need to reallocate. You can just remember the beginning of the word, find the end, and allocate the memory you need."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 2, "creation_date": 1487795667, "post_id": 42401462, "comment_id": 71950332, "body": "Finally: when asking for the &quot;fastest algorithm&quot; there&#39;s always the question: did you profile your (working?) implementation? Is it actually a bottleneck?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1487795749, "post_id": 42401462, "comment_id": 71950379, "body": "There are usually very few reasons to replace <code>flex</code>-generated parsers with custom-made parsers. Do you have a reason to believe that a <code>flex</code>-based parser for your project is inefficient?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1487796339, "post_id": 42401462, "comment_id": 71950715, "body": "I&#39;d recommend running the program under valgrind or address sanitizer to get rid of the out-of-bounds accesses."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487797042, "post_id": 42401462, "comment_id": 71951149, "body": "Hmmm&quot;(currently only used for escaping a space)&quot; I&#39;d expect the backslash escape character to escape a space <i>and</i> at least a following backslash."}, {"owner": {"reputation": 105, "user_id": 4722429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1744ccde946714496adce8dba3a716c9?s=128&d=identicon&r=PG&f=1", "display_name": "mateass", "link": "https://stackoverflow.com/users/4722429/mateass"}, "edited": false, "score": 0, "creation_date": 1487797088, "post_id": 42401462, "comment_id": 71951191, "body": "Only used in practice for escaping spaces it actually escapes everything just fine."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487797215, "post_id": 42401462, "comment_id": 71951258, "body": "Hmm, Doubt it escape the <i>null character</i> fine.  <code>array[array_index][token_index++] = *++line;</code> will venture passed the end of the string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487797241, "post_id": 42401462, "comment_id": 71951275, "body": "How should 2 successive space be interpreted? or  line that begins with a space, or a line that ends with a space?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1487797713, "post_id": 42401462, "comment_id": 71951531, "body": "<code>... (currently only used for escaping a space)</code> If you are planning to extend this <i>parser</i>, you should consider creating a DFA (or use (f)lex to do that for you). Also: put the string-array management stuff into separate functions, and inline them."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1487803360, "post_id": 42401462, "comment_id": 71954303, "body": "Is what you have not fast enough?  Can you not use strtok?"}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1487804504, "post_id": 42401462, "comment_id": 71954719, "body": "The fastest algorithm is a suffix tree. But that;s not what you want. Just hand-write a lexer which escapes strings and comments."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1487803965, "post_id": 42403506, "comment_id": 71954523, "body": "Sorry, I came up with the same idea and then saw your deleted answer..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1487804182, "post_id": 42403506, "comment_id": 71954608, "body": "@chqrlie <a href=\"http://www.dictionary.com/browse/imitation-is-the-sincerest-form-of-flattery\" rel=\"nofollow noreferrer\">imitation is the sincerest form of flattery</a>. ;-)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1487805056, "post_id": 42403506, "comment_id": 71954906, "body": "Just wondering, why did you write pseudo code? Did you think the OP was asking for homework help?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1487805691, "post_id": 42403506, "comment_id": 71955152, "body": "@chqrlie Post was about <i>algorithm</i> and the code looked fun to do, so I did it, but did not want to give away too much."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1487806277, "post_id": 42403506, "comment_id": 71955366, "body": "Indeed the OP asked for <i>the fastest algorithm</i> which is a not exactly the same as <i>an efficient implementation</i>, although the latter is probably what he was really asking for. I tend to read the questions less acutely than the code."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1487803057, "last_edit_date": 1487803057, "creation_date": 1487802563, "answer_id": 42403506, "question_id": 42401462, "link": "https://stackoverflow.com/questions/42401462/fastest-algorithm-for-splitting-a-string-in-c/42403506#42403506", "title": "Fastest algorithm for splitting a string in C?", "body": "<p>Suggested fastest algorithm</p>\n\n<p>Make only 2 passes.  Once to find token count and length of buffer needed.</p>\n\n<p>2nd time to chop up duplicated line.</p>\n\n<p>The array of tokens point to a single allocated memory, so when done, <code>tokens[0]</code> needs to be free'd as well as <code>tokens</code>.</p>\n\n<p>As OP asked for a faster <em>algorithm</em>, below is $pseudo code$/code.</p>\n\n<pre><code>char **parse_line(const char *line) {\n  size_t token_count = 1;\n  const char *p = line;\n  $Let `p` each element in `line`$\n    $if `*p` is a separator, increment `token_count`\n    $else `*p` is an escape not followed by a \\0$\n      $advance `p`$\n    }\n  }\n\n  $ `p`, at the end of the string, so allocate enough for a    $\n  $ duplicate +1 based on the difference of `p` and the start. $\n  $ Check allocation success                                   $ \n  $ Copy into `char *line_buffer`                              $\n\n  // The token count is known, get enough pointers + 1 and check\n  char **tokens = malloc(sizeof *tokens * (token_count + 1));\n\n  // More complex code could perform only 1 allocation for `tokens` and `line_buffer`\n\n  $ Let `q` be first element in line_buffer\n  $ Let `d` be the same (destination pointer)\n  $ set begin_token flag $\n  size_t token_index = 0;\n  for (;;) {\n    $ if begin_token flag set $ {\n      $ clear begin_token $\n      tokens[token_index] = q;\n      d = q;\n    }\n    $ if `*q` separator (space or \\0) $ {\n      *d = '\\0';\n      token_index++;\n      $ if *q at end of string $ break;\n      $ set begin_token flag $\n    $else {\n      if `*q` is an escape not followed by a \\0$\n        $advance q$\n      }\n      $copy *q to *d, advance both pointers.\n    }\n  }\n  $set last tokens[] to NULL$\n  return tokens;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487804395, "post_id": 42403766, "comment_id": 71954689, "body": "I&#39;d say this was very intelligently designed.  (suggest <code>free(array);</code> --&gt; <code>free(array);free(buf);</code>)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487804517, "post_id": 42403766, "comment_id": 71954723, "body": "BTW: I think the <code>items</code> is 1 too small.  Consider a line with no spaces/no escapes."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487804550, "post_id": 42403766, "comment_id": 71954731, "body": "@chux: good point, we do not know which <code>malloc()</code> failed.  I already updated the special case of the empty line."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1487804606, "last_edit_date": 1487804606, "creation_date": 1487803726, "answer_id": 42403766, "question_id": 42401462, "link": "https://stackoverflow.com/questions/42401462/fastest-algorithm-for-splitting-a-string-in-c/42403766#42403766", "title": "Fastest algorithm for splitting a string in C?", "body": "<p>Your method is both unsafe and inefficient: you do not check for memory allocation failure and you call <code>realloc()</code> way too many times.</p>\n\n<p>Here is another approach:</p>\n\n<ul>\n<li>make a first pass to count the number of tokens and escapes,</li>\n<li>allocate the pointer array and a buffer for the tokens</li>\n<li>make a second pass, copying the characters into the buffer, splitting the tokens and making the pointer array point to the tokens.</li>\n<li>return the array pointer.</li>\n</ul>\n\n<p>The memory can later be freed by calling <code>free()</code> on both the pointer array and its first element.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nchar **parse_line(const char *line) {\n    size_t len, i, j, k, items = 1, escapes = 0;\n    char **array;\n    char *buf;\n\n    for (len = 0; line[len]; len++) {\n        if (line[len] == '\\\\') {\n            escapes++;\n            if (line[++len] == '\\0')\n                break;\n        } else\n        if (line[len] == ' ') {\n            items++;\n        }\n    }\n    if (len == escapes) {\n        /* special case empty line */\n        array = malloc(sizeof(*array));\n        if (array != NULL) {\n            array[0] = NULL;\n        }\n        return array;\n    }\n    array = malloc((items + 1) * sizeof(*array));\n    buf = malloc(len + 1 - escapes);\n\n    if (array == NULL || buf == NULL) {\n        free(array);\n        free(buf);\n        return NULL;\n    }\n    items[0] = buf;\n    k = 1;\n    for (i = j = 0; i &lt; len; i++) {\n        if (line[i] == '\\\\') {\n            if (++i == len)\n                break;\n            buf[j++] = line[i];\n        } else\n        if (line[i] == ' ') {\n            buf[j++] = '\\0';\n            items[k++] = buf + j;\n        } else {\n            buf[j++] = line[i];\n        }\n    }\n    buf[j] = '\\0';\n    items[k] = NULL;\n    return items;\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4722429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1744ccde946714496adce8dba3a716c9?s=128&d=identicon&r=PG&f=1", "display_name": "mateass", "link": "https://stackoverflow.com/users/4722429/mateass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "accepted_answer_id": 42403766, "answer_count": 2, "score": 1, "last_activity_date": 1487804606, "creation_date": 1487794755, "question_id": 42401462, "link": "https://stackoverflow.com/questions/42401462/fastest-algorithm-for-splitting-a-string-in-c", "title": "Fastest algorithm for splitting a string in C?", "body": "<p>I'm writing a CLI input parser and I want to know what is the fastest algorithm to split a string into tokens.</p>\n\n<p>Rules:</p>\n\n<ul>\n<li>A space means end of the token.</li>\n<li>Any char can be escaped with a backslash which means that I take it as is without any specal meaning. (currently only used for escaping a space)</li>\n</ul>\n\n<p>Here is the code I am currently using:</p>\n\n<pre><code>#define POINTER_ARRAY_STEP 10\n#define STRING_STEP 255\n\nchar **parse_line(char *line)\n{\n    char **array;\n    size_t array_len;\n    size_t array_index;\n    size_t token_len;\n    size_t token_index;\n\n    array_len = POINTER_ARRAY_STEP;\n    array = malloc((array_len + 1) * sizeof(char*)); /* +1 to leave space for NULL */\n    array_index = 0;\n\n    token_len = STRING_STEP;\n    array[array_index] = malloc(token_len + 1);\n    token_index = 0;\n\n    for (; *line; ++line) {\n        if (array_index == array_len) {\n            array_len += POINTER_ARRAY_STEP;\n            array = realloc(array, (array_len + 1) * sizeof(char*));\n        }\n        if (token_index == token_len) {\n            token_len += STRING_STEP;\n            array[array_index] = realloc(array[array_index], token_len + 1);\n        }\n        if (*line == '\\\\') {\n            array[array_index][token_index++] = *++line;\n            continue;\n        }\n        if (*line == ' ') {\n            array[array_index][token_index] = 0;\n            array[++array_index] = malloc(token_len + 1);\n            token_index = 0;\n            continue;\n        }\n        array[array_index][token_index++] = *line;\n    }\n    /* Null terminate the last array element */\n    array[array_index][token_index] = 0;\n\n    /* Null terminate the array */\n    array[array_index + 1] = NULL;\n    return array;\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "compiler-errors", "declaration"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487794303, "post_id": 42401267, "comment_id": 71949578, "body": "When you have <code>goodclient</code> on the next line, did you remove it from the previous line? It is unclear. BTW please avoid using the same name for a variable as its type. At best: confusion, at worst: errors."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487794558, "post_id": 42401267, "comment_id": 71949742, "body": "<i>Why can&#39;t I declare structure 2nd time in function?</i> Because you can&#39;t. It is actually a <i>definition</i> which cannot be duplicated. However a duplicate <i>declaration</i> such as a function prototype or external variable, can be - as long as they are all identical."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1487794679, "post_id": 42401267, "comment_id": 71949811, "body": "Good idea to start types with a capital letter - can then tell them apart from variables"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1487795576, "last_edit_date": 1487795576, "creation_date": 1487794427, "answer_id": 42401353, "question_id": 42401267, "link": "https://stackoverflow.com/questions/42401267/why-cant-i-declare-structure-2nd-time-in-function/42401353#42401353", "title": "Why can&#39;t I declare structure 2nd time in function?", "body": "<p>The problem is that the name of the array <code>client</code> hides the name of the type <code>client</code>.</p>\n\n<pre><code>client client[MAX_CLIENT];\nclient goodclient[MAX_CLIENT]; \n</code></pre>\n\n<p>So in the second declaration the compiler considers the name <code>client</code> as the name of the array.</p>\n\n<p>It is not a good idea to use the same name for different entities.</p>\n\n<p>The simplest way to make the compiler to compile the declarations is to rename the array.</p>\n\n<p>Or if the type <code>client</code> is a <code>typedef</code> of a structure type with the same name then you can write for example</p>\n\n<pre><code>client client[MAX_CLIENT];\nstruct client goodclient[MAX_CLIENT]; \n</code></pre>\n\n<p>Another way is just to exchange the declarations</p>\n\n<pre><code>client goodclient[MAX_CLIENT]; \nclient client[MAX_CLIENT];\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 6291390, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4755a888b6add28fb4bd29105473c086?s=128&d=identicon&r=PG&f=1", "display_name": "Quto", "link": "https://stackoverflow.com/users/6291390/quto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487802077, "creation_date": 1487794090, "last_edit_date": 1487802077, "question_id": 42401267, "link": "https://stackoverflow.com/questions/42401267/why-cant-i-declare-structure-2nd-time-in-function", "title": "Why can&#39;t I declare structure 2nd time in function?", "body": "<p>So, I got a function where I am declaring one structure which is filled and also want to declare one new function. When I declare new function on the top it works, when I declare it on the same line after comma (,) it works but it doesn't work on the bottom line. Any explanations? Thanks in advance.</p>\n\n<pre><code>void CFilter(float avgprofit, int lines)\n{\n    //client goodclient[MAX_CLIENT]; THIS WOULD COMPILE\n    client client[MAX_CLIENT], goodclient[MAX_CLIENT]; // THIS COMPILES\n    //client goodclient[MAX_CLIENT]; THIS WOULDN'T COMPILE\n    int i, amount = 0;\n    float userprofit;\n    for (i = 0; i &lt;= lines; i++) {\n        userprofit = client[i].loses - client[i].wins;\n        if (userprofit &gt;= avgprofit) {\n            client[i].goodclient = 1;\n        } else {\n            client[i].goodclient = 0;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1609, "user_id": 6109459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hg2RO.jpg?s=128&g=1", "display_name": "Kishan Oza", "link": "https://stackoverflow.com/users/6109459/kishan-oza"}, "edited": false, "score": 0, "creation_date": 1487794205, "post_id": 42401236, "comment_id": 71949521, "body": "be more specific to your question please."}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 1609, "user_id": 6109459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hg2RO.jpg?s=128&g=1", "display_name": "Kishan Oza", "link": "https://stackoverflow.com/users/6109459/kishan-oza"}, "edited": false, "score": 0, "creation_date": 1487794298, "post_id": 42401236, "comment_id": 71949575, "body": "@kishanoza I thought I was pretty specific. Or did you mean that I should put in an example of what it&#39;s supposed to do?"}, {"owner": {"reputation": 1609, "user_id": 6109459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hg2RO.jpg?s=128&g=1", "display_name": "Kishan Oza", "link": "https://stackoverflow.com/users/6109459/kishan-oza"}, "edited": false, "score": 0, "creation_date": 1487794333, "post_id": 42401236, "comment_id": 71949597, "body": "exactly please put the example"}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 1609, "user_id": 6109459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hg2RO.jpg?s=128&g=1", "display_name": "Kishan Oza", "link": "https://stackoverflow.com/users/6109459/kishan-oza"}, "edited": false, "score": 0, "creation_date": 1487794549, "post_id": 42401236, "comment_id": 71949733, "body": "@kishanoza Okay. I put an example up."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487794549, "post_id": 42401236, "comment_id": 71949735, "body": "<code>while (input[0] != &#39;\\n&#39;)</code> always test the same thing.  Code likely needs an indexed access to <code>input[]</code>.  Something like <code>for (i=0; input[i] != &#39;\\0&#39;; i++) {...</code>"}, {"owner": {"reputation": 1609, "user_id": 6109459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hg2RO.jpg?s=128&g=1", "display_name": "Kishan Oza", "link": "https://stackoverflow.com/users/6109459/kishan-oza"}, "edited": false, "score": 0, "creation_date": 1487794924, "post_id": 42401236, "comment_id": 71949926, "body": "<b>int i = 0; while(input[i] != &quot;\\n&quot;){.... //some code i++;}</b> try this"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487795482, "post_id": 42401236, "comment_id": 71950218, "body": "Just setup a loop, change lower case characters to upper and vise versa.  stop when <code>&#39;\\0&#39;;</code> is reached.  As posted, this is too broad.  Show what you have tried concerning changing the characters&#39; case."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 7586172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa6d4c34ac69cf71e337c80eb621353?s=128&d=identicon&r=PG&f=1", "display_name": "Khan9797", "link": "https://stackoverflow.com/users/7586172/khan9797"}, "is_accepted": false, "score": 0, "last_activity_date": 1487794570, "creation_date": 1487794570, "answer_id": 42401399, "question_id": 42401236, "link": "https://stackoverflow.com/questions/42401236/how-to-replace-and-edit-characters-in-a-string/42401399#42401399", "title": "How to replace and edit characters in a string?", "body": "<p>you shouldn't use this----> while(input[0] != '\\n');</p>\n\n<p>let's say your input[0] is equal to \\n this loop continues forever so maybe try to do it like input[i] != '\\n' and increase the i in the loop </p>\n"}], "owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1487795538, "answer_count": 1, "score": 0, "last_activity_date": 1487828585, "creation_date": 1487794000, "last_edit_date": 1487828585, "question_id": 42401236, "link": "https://stackoverflow.com/questions/42401236/how-to-replace-and-edit-characters-in-a-string", "closed_reason": "Duplicate", "title": "How to replace and edit characters in a string?", "body": "<p>So here's my code:</p>\n\n<pre><code>main()\n{\n        char input[150];                                                                        //Create a variable of type char named input to store user input\n\n        printf(\" Enter a standard line: \");                                                     //Ask the user for some standard input\n\n        if (fgets(input, 150, stdin) == NULL)                                                   //Initiate a series of checks to make sure there is valid input\n        {\n                puts(\" End-of-File or Input Error Detected. \");                                 //If the end of the file is reached or there is a problem with input output a message\n        }\n        else if (input[0] == '\\n')                                                              //If the user neglected to enter anything output a message\n        {\n                puts(\" Oops! Looks like you forgot to enter something! \");\n        }\n        else\n        {\n                printf(\" Here's what you entered: %s \", input);                                 //If there is valid user input echo it back to the user\n\n                while (input[0] != '\\n')\n                {\n\n                       (can I put the while loop here?)\n                }\n        }\n}\n</code></pre>\n\n<p>I just got my code to run (courtesy of Chux here on Stackoverflow) and now I have another problem. Now that I can validate there is input, I have to replace and adjust the input line accordingly by replacing certain characters with their ASCII code, changing alphabet letter cases, and wrapping the line.</p>\n\n<p>For example:\n1. user inputs: google.COM/search?client<br>\n2. program changes and prints back to the user as: GOOGLE.com%2FSEARCH%3FCLIENT</p>\n\n<p>HOW do I do that? Can I just leave the while loop where it is? </p>\n"}, {"tags": ["c", "arrays", "data-structures"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1487794191, "post_id": 42401198, "comment_id": 71949512, "body": "Sort them and take the last two elements. If it&#39;s some sort of exercise, we just had a question like this one, it was getting the max and min of a 4 element array in 4 comparisons."}, {"owner": {"reputation": 1403, "user_id": 5512755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6WoeX.jpg?s=128&g=1", "display_name": "Dunatotatos", "link": "https://stackoverflow.com/users/5512755/dunatotatos"}, "edited": false, "score": 1, "creation_date": 1487794429, "post_id": 42401198, "comment_id": 71949659, "body": "Sorting is not the best algorithm you could use there. Sorting has a complexity O(n * log(n)) (if done correctly), while you can find the maximum in a linear time."}, {"owner": {"reputation": 1403, "user_id": 5512755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6WoeX.jpg?s=128&g=1", "display_name": "Dunatotatos", "link": "https://stackoverflow.com/users/5512755/dunatotatos"}, "edited": false, "score": 0, "creation_date": 1487794510, "post_id": 42401198, "comment_id": 71949712, "body": "I see a first issue here with the initialization of largest2. If a[0] is the largest, the condition in the second for loop will always be false, and largest1 and largest2 will both be a[0]."}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1487795934, "last_edit_date": 1487795934, "creation_date": 1487795528, "answer_id": 42401682, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/42401682#42401682", "title": "Program to find largest and second largest number in array", "body": "<p>You need to preserve the index of array members better as they are <strong>unique</strong> Here is a working code with few changes:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int a[10],n;\n    int largest1,largest2,i;\n\n    printf(\"enter number of elements you want in array\");\n    scanf(\"%d\",&amp;n);\n    printf(\"enter elements\");\n    for(i=0;i&lt;n;i++)\n    {\n        scanf(\"%d\",&amp;a[i]);\n    }\n    largest1=0;\n    for(i=0;i&lt;n;i++)\n    {\n        if(a[i]&gt;a[largest1])\n        {\n            largest1=i;\n        }\n    }\n    if(largest1!=0) // this condition to select another index than the largest\n        largest2=0;\n    else\n        largest2=n-1;\n    for(i=0;i&lt;n &amp;&amp; i != largest1 ;i++)\n    {\n        if(a[i]&gt;a[largest2])\n            largest2=i;\n    }\n    printf(\"First and second largest number is %d and %d \",a[largest1],a[largest2]);\n}\n</code></pre>\n\n<p>Note that when the array is of size 1 values will be the same.</p>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 7, "last_activity_date": 1589052284, "last_edit_date": 1589052284, "creation_date": 1487795573, "answer_id": 42401693, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/42401693#42401693", "title": "Program to find largest and second largest number in array", "body": "<p>(<em>I'm going to ignore handling input, its just a distraction.</em>)</p>\n\n<p>The easy way is to sort it.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint cmp_int( const void *a, const void *b ) {\n    return *(int*)a - *(int*)b;\n}\n\nint main() {\n    int a[] = { 1, 5, 3, 2, 0, 5, 7, 6 };\n    const int n = sizeof(a) / sizeof(a[0]);\n\n    qsort(a, n, sizeof(a[0]), cmp_int);\n    printf(\"%d %d\\n\", a[n-1], a[n-2]);\n}\n</code></pre>\n\n<p>But that isn't the most efficient because it's <code>O(n log n)</code>, meaning as the array gets bigger the number of comparisons gets bigger faster. Not too fast, slower than exponential, but we can do better.</p>\n\n<p>We can do it in <code>O(n)</code> or \"linear time\" meaning as the array gets bigger the number of comparisons grows at the same rate.</p>\n\n<p>Loop through the array tracking the max, that's the usual way to find the max. When you find a new max, the old max becomes the 2nd highest number.</p>\n\n<p>Instead of having a second loop to find the 2nd highest number, throw in a special case for running into the 2nd highest number.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;limits.h&gt;\n\nint main() {\n    int a[] = { 1, 5, 3, 2, 0, 5, 7, 6 };\n    // This trick to get the size of an array only works on stack allocated arrays.\n    const int n = sizeof(a) / sizeof(a[0]);\n\n    // Initialize them to the smallest possible integer.\n    // This avoids having to special case the first elements.\n    int max = INT_MIN;\n    int second_max = INT_MIN;\n\n    for( int i = 0; i &lt; n; i++ ) {\n        // Is it the max?\n        if( a[i] &gt; max ) {\n            // Make the old max the new 2nd max.\n            second_max = max;\n            // This is the new max.\n            max = a[i];\n        }\n        // It's not the max, is it the 2nd max?\n        else if( a[i] &gt; second_max ) {\n            second_max = a[i];\n        }\n    }\n\n    printf(\"max: %d, second_max: %d\\n\", max, second_max);\n}\n</code></pre>\n\n<p>There might be a more elegant way to do it, but that will do, at most, 2n comparisons. At best it will do n.</p>\n\n<p>Note that there's an open question of what to do with <code>{ 1, 2, 3, 3 }</code>. Should that return <code>3, 3</code> or <code>2, 3</code>? I'll leave that to you to decide and adjust accordingly.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1487801819, "creation_date": 1487801819, "answer_id": 42403331, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/42403331#42403331", "title": "Program to find largest and second largest number in array", "body": "<p>The question is ambiguous: if the array may contain duplicate values, are you supposed to find the 2 largest distinct values or the two largest possibly identical values?</p>\n\n<p>Your code seems to indicate you want the first approach, but you have a problem if the largest value is <code>a[0]</code>.  You should use an extra boolean to keep track of whether you have found a different value yet.</p>\n\n<p>You should also test the return value of the different <code>scanf()</code> calls and return 0 from <code>main()</code>.</p>\n\n<p>Here is a modified version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int a[10], n, i;\n    int largest1, largest2, has_largest2;\n\n    printf(\"enter number of elements you want in array: \");\n    if (scanf(\"%d\", &amp;n) != 1)\n        return 1;\n    if (n &lt; 2) {\n        printf(\"need at least 2 elements\\n\");\n        return 1;\n    }\n    printf(\"enter elements: \");\n    for (i = 0; i &lt; n; i++) {\n        if (scanf(\"%d\", &amp;a[i]) != 1) {\n            printf(\"input error\\n\");\n            return 1;\n        }\n    }\n    largest1 = a[0];\n    for (i = 1; i &lt; n; i++) {\n        if (a[i] &gt; largest1) {\n            largest1 = a[i];\n        }\n    }\n    has_largest2 = largest2 = 0;\n    for (i = 0; i &lt; n; i++) {\n        if (a[i] &lt; largest1) {\n            if (!has_largest2) {\n                has_largest2 = 1;\n                largest2 = a[i];\n            } else\n            if (a[i] &gt; largest2) {\n                largest2 = a[i];\n            }\n        }\n    }\n    if (has_largest2) {\n        printf(\"First and second largest number is %d and %d\\n\",\n               largest1, largest2);\n    } else {\n        printf(\"All values are identical to %d\\n\", largest1);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1487804899, "creation_date": 1487804899, "answer_id": 42404014, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/42404014#42404014", "title": "Program to find largest and second largest number in array", "body": "<p>You can do it best in one pass.</p>\n\n<p>largest and largest2 are set to INT_MIN on entry.\nThen step through the array. If largest is smaller than the number, largest2 becomes largest, then largest becomes the new number (or smaller than or equal if you want to allow duplicates). If largest is greater then the new number, test largest2.</p>\n\n<p>Note that this algorithm scales to finding the top three or four in an array, before it become too cumbersome and it's better to just sort.</p>\n"}, {"comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1487831095, "post_id": 42408441, "comment_id": 71963418, "body": "This has an average case time complexity of <i>O(n^2)</i>, which is pretty terrible for something that can be done in <i>O(n)</i> time."}, {"owner": {"reputation": 217, "user_id": 5572699, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-igLlAgPzlzw/AAAAAAAAAAI/AAAAAAAAATI/NBNgooPXlhg/photo.jpg?sz=128", "display_name": "Tushar Gandhi", "link": "https://stackoverflow.com/users/5572699/tushar-gandhi"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1487841577, "post_id": 42408441, "comment_id": 71969048, "body": "wouldn&#39;t the complexity be O(n)? because we already know that we require only two numbers only. Though when we generalized it, no doubt it&#39;ll come to O(n^2), but specifically here shouldn&#39;t it be (constant * O(n)) ?  Please can anyone explain that?"}], "tags": [], "owner": {"reputation": 217, "user_id": 5572699, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh6.googleusercontent.com/-igLlAgPzlzw/AAAAAAAAAAI/AAAAAAAAATI/NBNgooPXlhg/photo.jpg?sz=128", "display_name": "Tushar Gandhi", "link": "https://stackoverflow.com/users/5572699/tushar-gandhi"}, "is_accepted": false, "score": -2, "last_activity_date": 1487830923, "creation_date": 1487830923, "answer_id": 42408441, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/42408441#42408441", "title": "Program to find largest and second largest number in array", "body": "<p>If you ever need to find the largest or smallest element in an array, try with bubble sort.\nBubble Sort works on simple concept of shifting the biggest element at the end in every pass it does (in case of increasing order). Since you need the first and second largest element in an array, 2 passes of bubble sort will do the trick. The last element will be the largest and the second last element will be second largest.\nI'm providing you with the link that'll help you understand the bubble sort concept.</p>\n\n<p><a href=\"http://www.codeido.com/2010/10/bubblesort-written-in-c-with-example-step-by-step/\" rel=\"nofollow noreferrer\">http://www.codeido.com/2010/10/bubblesort-written-in-c-with-example-step-by-step/</a></p>\n\n<p>Hope it helps!!!</p>\n"}, {"tags": [], "owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "is_accepted": false, "score": 1, "last_activity_date": 1487831428, "creation_date": 1487831428, "answer_id": 42408573, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/42408573#42408573", "title": "Program to find largest and second largest number in array", "body": "<p>The problem with your code is a logic problem (which is what most coding is about).  If the largest number is first then it gets the second largest number wrong ... why?</p>\n\n<p>Well, look at your logic for deciding on the second largest number.  You first set it to be equal to the first element in the array and then you go through the array and change the index if the element is greater than the current second largest number (which will never be true because we already set it to be the largest number!).</p>\n\n<p>To solve it you can special case this: check if the largest number was the first and if so then set it to the second element (and then special case the issue of someone asking to find the highest two elements in a one element array, without reading past the end of an array.)</p>\n\n<p>I think the method given in chqrlie's answer to do this all in one pass is best.  And logical too: write a program to find the largest number.  Second largest number, well that's just the one which was previously the largest!</p>\n"}, {"comments": [{"owner": {"reputation": 2057, "user_id": 3300205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfa9066e794647fdedf323ecab85333?s=128&d=identicon&r=PG", "display_name": "avojak", "link": "https://stackoverflow.com/users/3300205/avojak"}, "edited": false, "score": 0, "creation_date": 1501878288, "post_id": 45514636, "comment_id": 77991230, "body": "Instead of simply providing a block of code, could you explain your answer a bit to make it more useful?"}], "tags": [], "owner": {"reputation": 259, "user_id": 8419196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZIEhy.jpg?s=128&g=1", "display_name": "Mukesh Burnwal Mike", "link": "https://stackoverflow.com/users/8419196/mukesh-burnwal-mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1501876807, "creation_date": 1501876807, "answer_id": 45514636, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/45514636#45514636", "title": "Program to find largest and second largest number in array", "body": "<p>//I think its simple like</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n\n{\nint a1[100],a2[100],i,t,l1,l2,n;\nprintf(\"Enter the number of elements:\\n\");\nscanf(\"%d\",&amp;n);\nprintf(\"Enter the elements:\\n\");\nfor(i=0;i&lt;n;i++)\n{\n    scanf(\"%d\",&amp;a1[i]);\n}\nl1=a1[0];\nfor(i=0;i&lt;n;i++)\n{\n    if(a1[i]&gt;=l1)\n    {\n        l1=a1[i];\n        t=i;\n    }\n}\nfor(i=0;i&lt;(n-1);i++)\n{\n    if(i==t)\n    {\n        continue;\n    }\n    else\n    {\n        a2[i]=a1[i];\n    }\n}\nl2=a2[0];\nfor(i=1;i&lt;(n-1);i++)\n{\n    if(a2[i]&gt;=l2 &amp;&amp; a2[i]&lt;l1)\n    {\n        l2=a2[i];\n    }\n}\nprintf(\"Second highest number is %d\",l2);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7670147, "user_type": "registered", "profile_image": "https://graph.facebook.com/1627277830632586/picture?type=large", "display_name": "Nitish Gupta", "link": "https://stackoverflow.com/users/7670147/nitish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1502815168, "last_edit_date": 1502815168, "creation_date": 1502814770, "answer_id": 45697292, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/45697292#45697292", "title": "Program to find largest and second largest number in array", "body": "<p>There is no need to use the Third loop to check the second largest number in the array. You can only use two loops(one for insertion and another is for checking.</p>\n\n<p>Refer this code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n\n{\nint a[10], n;\n\nint i;\n\nprintf(\"enter number of elements you want in array\");\n\nscanf(\"%d\", &amp;n);\n\nprintf(\"enter elements\");\n\nfor (i = 0; i &lt; n; i++) {\n    scanf(\"%d\", &amp;a[i]);\n}\n\nint largest1 = a[0],largest2 = a[0];\n\nfor (i = 0; i &lt; n; i++) \n{\n    if (a[i] &gt; largest1) \n    {\n         largest2=largest1;\n         largest1 = a[i];\n    }\n}\n\nprintf(\"First and second largest number is %d and %d \", largest1, largest2);\n}\n</code></pre>\n\n<p>Hope this code will work for you.</p>\n\n<p>Enjoy Coding :)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8627950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7245c132ac1fb8650770771cb8308f2?s=128&d=identicon&r=PG&f=1", "display_name": "ahmed jamil", "link": "https://stackoverflow.com/users/8627950/ahmed-jamil"}, "is_accepted": false, "score": -1, "last_activity_date": 1505753554, "last_edit_date": 1505753554, "creation_date": 1505753371, "answer_id": 46284468, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/46284468#46284468", "title": "Program to find largest and second largest number in array", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int a[10];\n    int i,b,c;\n\n    printf(\"Enter ten values : \\n\");\n    for(i=0; i&lt;10; i++)\n    {\n        scanf(\"%d\",&amp;a[i]);\n    }\n\n    b=a[0];\n\n    for(i=0; i&lt;10; i++)\n    {\n        if(a[i]&gt;b)\n        {\n            b=a[i];\n        }\n\n        else\n        {\n            b=b;\n        }\n    }\n\n    if(b==a[1])\n    {\n        c=a[2];\n    }\n    else \n    {\n        c=a[1];\n    }\n\n    for(i=0; i&lt;10; i++)\n    {\n        if(a[i]&gt;c &amp;&amp; a[i]!=b)\n        {\n            c=a[i];\n        }\n\n        else if (b&gt;c)\n        {\n            c=c;\n        }\n\n    }\n\n\n\n\n    printf(\"Largest number is %d\\nSecond largest number is %d\",b,c);\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 848, "user_id": 3955016, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/hmfdd.jpg?s=128&g=1", "display_name": "Sarat Patel", "link": "https://stackoverflow.com/users/3955016/sarat-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1510594267, "creation_date": 1510594267, "answer_id": 47270189, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/47270189#47270189", "title": "Program to find largest and second largest number in array", "body": "<p><strong>Find your second largest number without using any <em>String function</em>:</strong></p>\n\n<pre><code>int array[];//Input array\nint firstLargest, secondLargest;\nint minNumber = -1;//whatever smallest you want to add here\n/*There should be more than two elements*/\nif (array_size &lt; 2)\n{\n    printf(\"Array is too small\");\n    return;\n}\n\nfirstLargest = secondLargest = minNumber;\nfor (index = 0; index &lt; array_size ; ++index)\n{\n    //Largest number check\n    if (array[index] &gt; first)\n    {\n        secondLargest = firstLargest;\n        firstLargest = array[index];\n    }\n\n    //It may not larger than first but can be larger than second number\n    else if (array[index] &gt; secondLargest &amp;&amp; array[index] != firstLargest)\n{\n        secondLargest = array[index];\n}\n\n//Finally you got your answer\nif (secondLargest == minNumber)\n{\n    printf(\"No Second largest number\");\n}\nelse\n{\n    printf(\"Second Largest Number is %d\", secondLargest);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12742, "user_id": 1140335, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tkXuD.png?s=128&g=1", "display_name": "TheTiger", "link": "https://stackoverflow.com/users/1140335/thetiger"}, "is_accepted": false, "score": 0, "last_activity_date": 1519287462, "creation_date": 1519287462, "answer_id": 48922527, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/48922527#48922527", "title": "Program to find largest and second largest number in array", "body": "<p>Here is an answer with a single for loop.</p>\n\n<pre><code>int array[] = { 10, 15, 13, 20, 21, 8, 6, 7, 9, 21, 23 };\nconst int count = sizeof(a) / sizeof(a[0]);\nint lastMaxNumber = 0;\nint maxNumber = 0;\n\nfor (int i = 0; i &lt; count; i++) {\n\n    // Current number\n    int num = array[i];\n\n    // Find the minimum and maximum from (num, max)\n    int maxValue = (num &gt; maxNumber) ? num : maxNumber;\n    int minValue = (num &lt; maxNumber) ? num : maxNumber;\n\n    // If minValue is greater than lastMaxNumber, update the lastMaxNumber\n    if minValue &gt; lastMaxNumber {\n        lastMaxNumber = minValue;\n    }\n\n    // Updating maxNumber\n    maxNumber = maxValue;\n}\n\nprintf(\"%d\", lastMaxNumber);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 294, "user_id": 3586682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16399baf044666843ecdf120dd4089b6?s=128&d=identicon&r=PG", "display_name": "stiebrs", "link": "https://stackoverflow.com/users/3586682/stiebrs"}, "edited": false, "score": 0, "creation_date": 1572957182, "post_id": 49332683, "comment_id": 103716412, "body": "Downvoting, because although the point is valid, it is not relevant to the question. In some cases arrays DO &quot;magically&quot; appear. An example is DMA transfers in embedded world - hardware does the magic and software is just notified, when the array is filled."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 294, "user_id": 3586682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16399baf044666843ecdf120dd4089b6?s=128&d=identicon&r=PG", "display_name": "stiebrs", "link": "https://stackoverflow.com/users/3586682/stiebrs"}, "edited": false, "score": 0, "creation_date": 1572969972, "post_id": 49332683, "comment_id": 103723648, "body": "@stiebrs: No, it never magically appears. For your DMA transfer, does the data need to be parsed/validated, and where did the data come from (disk, network, nowhere at all)? If it came from a custom device, why can&#39;t the device determine highest and lowest value if that&#39;s important?"}, {"owner": {"reputation": 294, "user_id": 3586682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16399baf044666843ecdf120dd4089b6?s=128&d=identicon&r=PG", "display_name": "stiebrs", "link": "https://stackoverflow.com/users/3586682/stiebrs"}, "edited": false, "score": 0, "creation_date": 1572972472, "post_id": 49332683, "comment_id": 103725077, "body": "Because that&#39;s life. We use what we have to get the results we need. And often what we have is proprietary and does not have features you need. Hence &quot;magic&quot;"}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 294, "user_id": 3586682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16399baf044666843ecdf120dd4089b6?s=128&d=identicon&r=PG", "display_name": "stiebrs", "link": "https://stackoverflow.com/users/3586682/stiebrs"}, "edited": false, "score": 0, "creation_date": 1573042092, "post_id": 49332683, "comment_id": 103750310, "body": "@stiebrs: You&#39;re missing the point. Typically you can write code that doesn&#39;t have the extra overhead (and sometimes, rarely, you can&#39;t); so by explaining &quot;typically you don&#39;t need the extra overhead&quot; (and letting people figure out they can&#39;t in the rare cases where they can&#39;t) you end up with more knowledgeable programmers who are more likely to do it right (when possible) instead of people that always don&#39;t do it right."}], "tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 0, "last_activity_date": 1521263087, "creation_date": 1521263087, "answer_id": 49332683, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/49332683#49332683", "title": "Program to find largest and second largest number in array", "body": "<p>If you need to find the largest and second largest element in an existing array, see the answers above (Schwern's answer contains the approach I would've used).</p>\n\n<p>However; needing to find the largest and second largest element in an existing array typically indicates a design flaw. Entire arrays don't magically appear - they come from somewhere, which means that the most efficient approach is to keep track of \"current largest and current second largest\" while the array is being created.</p>\n\n<p>For example; for your original code the data is coming from the user; and by keeping track of \"largest and second largest value that the user entered\" inside of the loop that gets values from the user the overhead of tracking the information will be hidden by the time spent waiting for the user to press key/s, you no longer need to do a search afterwards while the user is waiting for results, and you no longer need an array at all.</p>\n\n<p>It'd be like this:</p>\n\n<pre><code>int main() {\n    int largest1 = 0, largest2 = 0, i, temp;\n\n    printf(\"enter number of elements you want in array\");\n    scanf(\"%d\", &amp;n);\n    printf(\"enter elements\");\n    for (i = 0; i &lt; n; i++) {\n        scanf(\"%d\", &amp;temp);\n        if(temp &gt;= largest1) {\n            largest2 = largest1;\n            largest1 = temp;\n        } else if(temp &gt; largest2) {\n            largest2 = temp;\n        }\n    }\n    printf(\"First and second largest number is %d and %d \", largest1, largest2);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1236, "user_id": 1705371, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-z35SMPjA0i4/AAAAAAAAAAI/AAAAAAAAR8U/hipbgqtn5LM/photo.jpg?sz=128", "display_name": "Shourob Datta", "link": "https://stackoverflow.com/users/1705371/shourob-datta"}, "is_accepted": false, "score": 0, "last_activity_date": 1551178191, "last_edit_date": 1551178191, "creation_date": 1551175369, "answer_id": 54882907, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/54882907#54882907", "title": "Program to find largest and second largest number in array", "body": "<p>Try Out with this:</p>\n\n<pre><code>    firstMax = arr[0];\n\n    for (int i = 0; i&lt;n; i++) {\n\n        if (firstMax &lt; arr[i]  ) {\n            secondMax = firstMax;\n            firstMax = arr[i];\n        }\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9654520, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dhiren Chugh", "link": "https://stackoverflow.com/users/9654520/dhiren-chugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1555749469, "creation_date": 1555749469, "answer_id": 55771774, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array/55771774#55771774", "title": "Program to find largest and second largest number in array", "body": "<p>Although it can be done in one scan but to correct your own code , you must declare largest2 as int.Min as it prevents the largest2 holding the largest value intially.</p>\n"}], "owner": {"reputation": 47, "user_id": 5064233, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52892bf092aa792d7dc8adaaaf4017ff?s=128&d=identicon&r=PG&f=1", "display_name": "Bhart Kumar", "link": "https://stackoverflow.com/users/5064233/bhart-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116161, "favorite_count": 5, "protected_date": 1559318763, "answer_count": 14, "score": 1, "last_activity_date": 1589052284, "creation_date": 1487793890, "last_edit_date": 1487801097, "question_id": 42401198, "link": "https://stackoverflow.com/questions/42401198/program-to-find-largest-and-second-largest-number-in-array", "title": "Program to find largest and second largest number in array", "body": "<p>I have searched many websites for this question. They are doing it by some different approach.\nThis code is just not giving output if I input first element of array as largest i.e. <code>a[0]</code>.\nI think some minor change is required.\ncan anyone please tell me?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int a[10], n;\n    int largest1, largest2, i;\n\n    printf(\"enter number of elements you want in array\");\n    scanf(\"%d\", &amp;n);\n    printf(\"enter elements\");\n    for (i = 0; i &lt; n; i++) {\n        scanf(\"%d\", &amp;a[i]);\n    }\n    largest1 = a[0];\n    for (i = 0; i &lt; n; i++) {\n        if (a[i] &gt; largest1) {\n            largest1 = a[i];\n        }\n    }\n    largest2 = a[0];\n    for (i = 1; i &lt; n; i++) {\n        if (a[i] &gt; largest2 &amp;&amp; a[i] &lt; largest1)\n            largest2 = a[i];\n    }\n    printf(\"First and second largest number is %d and %d \", largest1, largest2);\n}\n</code></pre>\n"}, {"tags": ["c", "matrix", "ppm"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1487793616, "post_id": 42401067, "comment_id": 71949193, "body": "You never update <code>line</code>, so you&#39;re just scanning the same values over &amp; over."}, {"owner": {"reputation": 33, "user_id": 7313365, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211663186115622/picture?type=large", "display_name": "Craig James Duffy", "link": "https://stackoverflow.com/users/7313365/craig-james-duffy"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1487794206, "post_id": 42401067, "comment_id": 71949522, "body": "Whoops, I missed out my outer while loop that does update line."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487796330, "post_id": 42401067, "comment_id": 71950710, "body": "It&#39;s a mystery why you are putting the r,g,b components on different <i>rows</i> of the image. Also why <code>for ( column = 0; column &lt; (imageSize); column++)</code> loop for every line you read, which will be slow. I suggest writing a flow chart of exactly what you want to happen - even if that is an informal pseudocode on paper."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1487796327, "creation_date": 1487796327, "answer_id": 42401917, "question_id": 42401067, "link": "https://stackoverflow.com/questions/42401067/how-do-you-read-pixel-data-from-a-ppm-p3-image-into-a-matrix-in-c/42401917#42401917", "title": "How do you read pixel data from a PPM (P3) image into a Matrix in C?", "body": "<p>The problem is clear in your revised code: you try to read all pixels of the image from <em>each</em> raster line.  This won't run <em>forever</em> unless the <code>fgets()</code> blocks indefinitely, but if the raster dimensions are large and the file is organized with many lines of pixels then it may take a very long time.  In any case, it's <strong><em>wrong</em></strong>, for on each iteration of the outermost loop -- that is, for each line read -- it overwrites all previously assigned pixel values.</p>\n\n<p>Furthermore, your innermost loop, though not actually wrong, is highly obfuscatory.  It always performs exactly one iteration; its iteration variable <code>row</code> in fact indexes pixel components (as opposed to rows of the raster), and <code>row</code> anyway has the value 0 on every iteration.  It would be better to just remove it.</p>\n\n<p>Overall, you're making this much harder than it needs to be.  The PPM P3 format is designed in a way that makes it amenable to input via much simpler code.  Each sample in a valid PPM P3 file is guaranteed to have whitespace before and after.  On the other hand, the position and width of the fields and the number of them per line is not fixed.  Together, those characteristics makes this one of the comparatively rare cases in which <code>fscanf()</code> is actually a better choice than <code>fgets()</code> + <code>sscanf()</code>.  The line length limit makes the latter pretty good too, but you don't need the extra complication that brings.</p>\n\n<p>Given that you want to read <code>imageSize</code> pixels from the <code>FILE</code> designated by <code>fd</code>, with that <code>FILE</code> initially positioned at the first character of the first line of the raster, this will do the trick:</p>\n\n<pre><code>for (pixel = 0; pixel &lt; imageSize; pixel++) {\n    int numScanned = fscanf(fd, \"%d %d %d\",\n            &amp;pixels[pixel][0],\n            &amp;pixels[pixel][1],\n            &amp;pixels[pixel][2]);\n    if (numScanned &lt; 3) {\n        // ... handle file format or I/O error ...\n        break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7313365, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211663186115622/picture?type=large", "display_name": "Craig James Duffy", "link": "https://stackoverflow.com/users/7313365/craig-james-duffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487796327, "creation_date": 1487793483, "last_edit_date": 1487794252, "question_id": 42401067, "link": "https://stackoverflow.com/questions/42401067/how-do-you-read-pixel-data-from-a-ppm-p3-image-into-a-matrix-in-c", "title": "How do you read pixel data from a PPM (P3) image into a Matrix in C?", "body": "<p>I would like a matrix with each row corresponding to a pixel and each column being an R G B value from a PPM P3 image. </p>\n\n<p>I attempted to create a Matrix with [imageWidth * imageHeight] [3] as the size then populate that but it seems to be taking forever. I think I have missed something, can anyone explain where I went wrong or perhaps suggest a better way to do this? </p>\n\n<pre><code>  int  pixels [imageSize] [3];\n\nwhile(fgets(line,70,fd) != NULL){\n  for ( column = 0; column &lt; (imageSize); column++){\n    for ( row = 0; row &lt; 1; row++){\n      sscanf(line, \"%d %d %d\", &amp;r, &amp;g, &amp;b );\n      pixels [column] [row] = r;\n      pixels [column] [row + 1] = g;\n      pixels [column] [row + 2] = b;\n     }\n  }\n}\n</code></pre>\n\n<p>Line refers to the line read in by the fgets function. </p>\n"}, {"tags": ["c", "data-structures", "struct"], "answers": [{"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 2, "last_activity_date": 1487793511, "creation_date": 1487793511, "answer_id": 42401078, "question_id": 42401012, "link": "https://stackoverflow.com/questions/42401012/struct-pointer-to-another-struct-in-c/42401078#42401078", "title": "Struct pointer to another struct in C", "body": "<p>Like this:</p>\n\n<pre><code>graph g;\ng.number_vertices = n;\ng.vertices = malloc(n * sizeof(vertex)); // allocate dynamic memory for `n` vertices\n                                         // and make g.vertices point to that memory\n// fill g.vertices[0], g.vertices[1], \u2026, g.vertices[n-1]\n\n// \u2026\n\n// deallocate the memory when you're done:\nfree(g.vertices);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 2, "creation_date": 1487793556, "post_id": 42401082, "comment_id": 71949165, "body": "<a href=\"http://stackoverflow.com/q/605845/3425536\">You shouldn&#39;t cast the result of malloc</a>."}], "tags": [], "owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1487793518, "creation_date": 1487793518, "answer_id": 42401082, "question_id": 42401012, "link": "https://stackoverflow.com/questions/42401012/struct-pointer-to-another-struct-in-c/42401082#42401082", "title": "Struct pointer to another struct in C", "body": "<p>Allocate a buffer large enough to store the vertices, and store the pointer to it in the variable <code>vertices</code> in the struct <code>graph</code>.</p>\n\n<pre><code>struct graph g;\ng.number_vertices = 10;  // If you want to store 10 vertices\ng.vertices = (vertex*)malloc(g.number_vertices * sizeof(struct vertex));\ng.vertices[0]... // To access the first.\ng.vertices[1]... // To access the second.\ng.vertices[2]... // To access the third, etc.\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7346297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10209290974621035/picture?type=large", "display_name": "Daniel", "link": "https://stackoverflow.com/users/7346297/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 42401078, "answer_count": 2, "score": 0, "last_activity_date": 1487793518, "creation_date": 1487793258, "question_id": 42401012, "link": "https://stackoverflow.com/questions/42401012/struct-pointer-to-another-struct-in-c", "title": "Struct pointer to another struct in C", "body": "<p>Given these two structs:</p>\n\n<pre><code>typedef struct graph {\n    int number_vertices;\n    vertex *vertices;\n} graph;\n\ntypedef struct vertex {\n    int id;\n    linked_list *out_neighbours;\n    linked_list *in_neighbours;\n} vertex;\n</code></pre>\n\n<p>How is it possible to add multiple <code>vertices</code> to a <code>graph</code>?</p>\n"}, {"tags": ["c", "types"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1487792759, "post_id": 42400808, "comment_id": 71948733, "body": "Where are you including the <code>input.h</code>?"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 2, "creation_date": 1487792834, "post_id": 42400808, "comment_id": 71948764, "body": "Side note: it&#39;s better to use <code>typedef</code> for variable types, instead of <code>#define</code>."}, {"owner": {"reputation": 1132, "user_id": 6457404, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wTPUH.jpg?s=128&g=1", "display_name": "brianxautumn", "link": "https://stackoverflow.com/users/6457404/brianxautumn"}, "edited": false, "score": 0, "creation_date": 1487792873, "post_id": 42400808, "comment_id": 71948786, "body": "Yes, this sounds like a job for typedef"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1487793311, "post_id": 42400808, "comment_id": 71949035, "body": "Your problem (or at least the one the compiler is referring to) is not because <code>PRECISION</code> is not replaced with double, but rather your attempt to use assignment outside of a function in the line <code>detg =  1.0+2;</code>.  Instantiating data in a header file and a header file without include guards are also bad practice.  You have also completey failed to show the actual inclusion in your code fragment."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2933559"}, "is_accepted": false, "score": 2, "last_activity_date": 1487792701, "creation_date": 1487792701, "answer_id": 42400852, "question_id": 42400808, "link": "https://stackoverflow.com/questions/42400808/using-define-to-set-a-variables-type/42400852#42400852", "title": "Using #define to set a variables type", "body": "<p>You can't put <code>detg = 1.0+2;</code> outside a function. Either write <code>PRECISION detg = 1.0+2;</code> or put <code>detg = 1.0+2;</code> inside your main function.</p>\n"}], "owner": {"reputation": 59, "user_id": 2325947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/91541ac9a716da72301f51cbd12ecfce?s=128&d=identicon&r=PG", "display_name": "Escap3faith", "link": "https://stackoverflow.com/users/2325947/escap3faith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1487798827, "answer_count": 1, "score": 0, "last_activity_date": 1487792939, "creation_date": 1487792565, "question_id": 42400808, "link": "https://stackoverflow.com/questions/42400808/using-define-to-set-a-variables-type", "closed_reason": "Duplicate", "title": "Using #define to set a variables type", "body": "<p>So I have a mathematical code that declares a ton of variables with an arbitrary type so that it's precision (double, quad, etc) can be defined. To do this I have a header file</p>\n\n<p>input.h</p>\n\n<pre><code>    PRECISION detg;\n    detg = 1.0+2;\n</code></pre>\n\n<p>Where input.h is included in a main file like</p>\n\n<pre><code>    #include&lt;math.h&gt;\n    #include&lt;stdio.h&gt;\n    #define PRECISION double\n    int main(){\n        return 0;\n    }\n</code></pre>\n\n<p>Compiled with \ngcc testEquations.c -o test</p>\n\n<p>But the compilation fails and gives the error</p>\n\n<pre><code>    In file included from testEquations.c:16:0:\n    ./GHG_Files/input.h:3:1: warning: data definition has no type or storage class\n    detg = 1.0+2;\n    ^\n    ./GHG_Files/input.h:3:1: warning: type defaults to \u2018int\u2019 in declaration of \u2018detg\u2019 [-Wimplicit-int]\n    ./GHG_Files/input.h:3:1: error: conflicting types for \u2018detg\u2019\n    ./GHG_Files/input.h:1:11: note: previous declaration of \u2018detg\u2019 was here\n     PRECISION detg;\n</code></pre>\n\n<p>My question is, why doesn't PRECISION get replaced with double like you would think it should, and why does it give this error?</p>\n"}, {"tags": ["c", "macos", "python-2.7", "beautifulsoup", "urllib2"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1487801843, "post_id": 42400407, "comment_id": 71953665, "body": "Your system Python shouldn&#39;t have anything to do with this: you&#39;re using Homebrew installed Python, which is version 2.7.13. That means that if you&#39;re compilation flags are set incorrectly, you may pick up the wrong <code>Python.h</code> include file (and link with the wrong Python library). Do check the compilation output (make sure it&#39;s verbose enough) and options when compiling <code>pars.c</code>."}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487803650, "post_id": 42400407, "comment_id": 71954423, "body": "I&#39;m not using the homebrew python for it, well I think. Here&#39; my compilation <code>gcc -I&#47;usr&#47;include&#47;python2.7 pars.c -lpython2.7 -o pars -Wall</code> I found it in all tutorial I found and I don&#39;t know how I can check my compilation output."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1487830800, "post_id": 42400407, "comment_id": 71963303, "body": "Your error messages includes paths starting with <code>&#47;usr&#47;local&#47;Cellar&#47;python&#47;2.7.13</code>; that clearly indicates Homebrew. Your script also starts with <code>#! &#47;usr&#47;local&#47;bin&#47;python2.7</code>, which is not the default system Python (and very likely the one installed by Homebrew). If you want to simply use the system Python, perhaps changing that first line in your script to point to the appropriate Python executable may solve your problem."}], "owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 652, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487800195, "creation_date": 1487791167, "last_edit_date": 1487800195, "question_id": 42400407, "link": "https://stackoverflow.com/questions/42400407/python-c-api-cant-import-urllib2-library", "title": "Python/C API can&#39;t import urllib2 library", "body": "<p>I have to parse a HTML url and return a list of url to use a recursive method of parsing. I'm using BeautifulSoup on Mac OS and I have a problem to import <code>html_parser.py</code></p>\n\n<p>html_parser.py :</p>\n\n<pre><code>#!/usr/local/bin/python2.7\nfrom bs4 import BeautifulSoup\nimport urllib2\n\n\ndef link_list(urlString):\n    siteFile = urllib2.urlopen(urlString)\n    siteHTML = siteFile.read()\n    siteFile.close()\n    soup = BeautifulSoup(siteHTML, \"html.parser\")\n    liste = []\n    for links in soup.find_all('a'):\n        print(links.get('href'))\n        liste.append(links.get('href'))\n    return liste\n</code></pre>\n\n<p>pars.c :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Python.h&gt;\n\nint main() {\n  Py_Initialize();\n\n  /* 1st: Import the module */\n    PyRun_SimpleString(\"from bs4 import BeautifulSoup\\n\");\n    PySys_SetPath(\".\");\n    PyObject* moduleString = PyString_FromString((char*) \"html_parser\");\n    if (!moduleString) {\n        PyErr_Print();\n        printf(\"Error formating python script\\n\");\n    }\n\n    PyObject* module = PyImport_Import(moduleString);\n    if (!module) {\n        PyErr_Print();\n        printf(\"Error importing python script\\n\");\n    }\n\n    /* 2nd: Getting reference to the function */\n    PyObject* function = PyObject_GetAttrString(module, (char*)\"link_list\");\n    if (!function) {\n        PyErr_Print();\n        printf(\"Pass valid argument to link_list()\\n\");\n    }\n\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>I need to use <code>PySys_SetPath(\".\")</code> to set the Python Path to my working directory. But by doing this it doesn't recognize bs4, so before changing the path I use <code>PyRun_SimpleString(\"from bs4 import BeautifulSoup\\n\")</code> but when I'm trying to do the same thing for urllib2 (<code>PyRun_SimpleString(\"import urllib2\\n\")</code>) I got this error :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  Traceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py\", line 94, in &lt;module&gt;\n    import httplib\n  File \"/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 80, in &lt;module&gt;\n    import mimetools\n  File \"/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/mimetools.py\", line 6, in &lt;module&gt;\n    import tempfile\n  File \"/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tempfile.py\", line 32, in &lt;module&gt;\n    import io as _io\n  File \"/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/io.py\", line 51, in &lt;module&gt;\n    import _io\nImportError: dlopen(/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so, 2): Symbol not found: __PyCodecInfo_GetIncrementalDecoder\n  Referenced from: /usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so\n  Expected in: flat namespace\n in /usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so\n</code></pre>\n\n<p>Someone helped me, but before the name of my Python program was <code>parser.py</code>and then when we don't use the SetPath c is using an another file int default Python Path. So Python.h doesn't recognize ether bs4 and urllbi2.</p>\n\n<p><strong>EDIT :</strong> </p>\n\n<p>I just checked the version of my system with <code>PyRun_SimpleString(\"print(sys.version)\")</code> and got this :</p>\n\n<pre><code>2.7.10 (default, Jul 30 2016, 19:40:32)\n[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)]\n</code></pre>\n\n<p>So I'm on Python 2.7.10 and not Python 3, I don't have to use url.request module...</p>\n"}, {"tags": ["c", "linked-list", "free"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1487790675, "post_id": 42400224, "comment_id": 71947549, "body": "Only by luck. When you finish your coffee, the cup does not vanish until the waiter takes it away for reuse. <code>free</code> does nothing to the pointer you pass to it."}, {"owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 1, "creation_date": 1487791526, "post_id": 42400224, "comment_id": 71948007, "body": "Your main calls &quot;list_free(a)&quot; and your source file defines &quot;list_cleanup()&quot; -- something doesn&#39;t match here."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1487791844, "post_id": 42400224, "comment_id": 71948199, "body": "You&#39;re invoking undefined behavior. Anything can happen, including which includes printing the values of the freed data."}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487792539, "post_id": 42400224, "comment_id": 71948596, "body": "@WeatherVane Or: If you decide to not drink the coffee, the coffee does not vanish automatically."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 2, "creation_date": 1487793731, "post_id": 42400224, "comment_id": 71949257, "body": "@AminNegm-Awad my analogy was imperfect. Perhaps better: you rent a house but when you later hand it back, you have a copy of the door key. You continue to use the house, but one day it is bulldozed for redevelopment, without any warning (since it is no longer your home)."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1487793876, "post_id": 42400224, "comment_id": 71949331, "body": "Bad analogies are like leaking screwdrivers ;)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1487793920, "post_id": 42400224, "comment_id": 71949358, "body": "@MortenJensen do they drip threads?"}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1487794375, "post_id": 42400224, "comment_id": 71949625, "body": "@MortenJensen A perfect analogy wouldn&#39;t be an analogy, but the situation itself."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487792152, "post_id": 42400668, "comment_id": 71948372, "body": "<code>free()</code> <i>may</i> delete or zero the memory. It can even unmap it so the address won&#39;t be even accessible."}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1487792190, "post_id": 42400668, "comment_id": 71948395, "body": "It can do so. This is not standardized."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1487792553, "post_id": 42400668, "comment_id": 71948605, "body": "Also, even using the pointer value to <code>free</code>d memory has undefined behaviour."}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1487792702, "post_id": 42400668, "comment_id": 71948704, "body": "@AnttiHaapala Exactly. (But, of course, it is hard to say what the standard would say about a pointer to a freed object, if the standard would require zeroing of the memory. Likely in such an universe, the behavior wouldn&#39;t be undefined. Guessing.)"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1487792955, "post_id": 42400668, "comment_id": 71948837, "body": "@AminNegm-Awad +1 for an excellent answer. For completeness&#39; sake, will you please add a link to the resource you&#39;re quoting from :) ?"}], "tags": [], "owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "is_accepted": false, "score": 2, "last_activity_date": 1487793006, "last_edit_date": 1487793006, "creation_date": 1487792062, "answer_id": 42400668, "question_id": 42400224, "link": "https://stackoverflow.com/questions/42400224/how-can-a-linked-list-be-printed-after-being-freed/42400668#42400668", "title": "How can a linked list be printed after being freed?", "body": "<p><code>free()</code> does not delete or zero memory. It makes it available for later allocations.</p>\n\n<blockquote>\n  <p>7.20.3.2-2</p>\n  \n  <p>The free function causes the space pointed to by ptr to be deallocated, that is, made available for further allocation. </p>\n</blockquote>\n\n<p>However, if a pointer points to an invalid memory space, the result is neither a crash nor a specific result, but undefined behavior:</p>\n\n<blockquote>\n  <p>6.5.3.2-4:</p>\n  \n  <p>[\u2026] If an invalid value has been assigned to the pointer, the behavior of the unary * operator is undefined.87)</p>\n  \n  <p>Fn 87:</p>\n  \n  <p>[\u2026] Among the invalid values for dereferencing a pointer by the unary * operator are a null pointer, an address inappropriately aligned for the type of object pointed to, and <em>the address of an object after the end of its lifetime</em>.</p>\n  \n  <p>Fn 83:</p>\n  \n  <p>83) If &amp;E is a valid pointer expression (where &amp; is the \u2018\u2018address-of \u2019\u2019 operator, which generates a pointer to its operand), the expression (&amp;E)->MOS is the same as E.MOS.</p>\n</blockquote>\n\n<p>Since it is undefined behavior, every behavior including the correct printing of the list is standard conform.</p>\n\n<p>Quotes from: <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf</a></p>\n"}, {"comments": [{"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1487793429, "post_id": 42400939, "comment_id": 71949095, "body": "free&#39;d memory is not necessarily usable by other programs; it might only be available for reuse by the program in which the free() occurred."}, {"owner": {"reputation": 71, "user_id": 7586172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa6d4c34ac69cf71e337c80eb621353?s=128&d=identicon&r=PG&f=1", "display_name": "Khan9797", "link": "https://stackoverflow.com/users/7586172/khan9797"}, "reply_to_user": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1487793869, "post_id": 42400939, "comment_id": 71949328, "body": "yeah you are right i should ve said it&#39;s open to use by other programs but i was trying to emphasize the changing what address keeps but still i had better if i didnt say that"}], "tags": [], "owner": {"reputation": 71, "user_id": 7586172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa6d4c34ac69cf71e337c80eb621353?s=128&d=identicon&r=PG&f=1", "display_name": "Khan9797", "link": "https://stackoverflow.com/users/7586172/khan9797"}, "is_accepted": false, "score": 1, "last_activity_date": 1487792993, "creation_date": 1487792993, "answer_id": 42400939, "question_id": 42400224, "link": "https://stackoverflow.com/questions/42400224/how-can-a-linked-list-be-printed-after-being-freed/42400939#42400939", "title": "How can a linked list be printed after being freed?", "body": "<p>after freeing memory, you make that address(es) avaliable (accessible) for computer in order to used by other programs.If no program use that area it means no overwritten to that area so it remains same before freeing that address</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4249870"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487812285, "creation_date": 1487790534, "last_edit_date": 1487812285, "question_id": 42400224, "link": "https://stackoverflow.com/questions/42400224/how-can-a-linked-list-be-printed-after-being-freed", "title": "How can a linked list be printed after being freed?", "body": "<p>I am implementing a linked list using these functions:</p>\n\n<pre><code>struct node{\n  int data;\n  struct node *next;\n};\n\nstruct list{\n  struct node *head;\n};\n\nstruct list* list_init(){\n  struct list *lst;\n  lst = malloc (sizeof(struct list));\n  lst-&gt;head = 0;\n};\n\nlist_add(struct list *l, int num){\n  struct node *point;\n  point = malloc(sizeof(struct node)):\n\n  if (&amp;point == NULL){\n    return 1;\n  }\n  else {\n    point-&gt;data = num;\n    point-&gt;next = l-&gt;head;\n    l-&gt;head = point;\n    return 0;\n  }\n};\n\nvoid list_print(struct list *l){\n  struct node *point = l-&gt;head;\n  while (point != 0) {\n    printf(\"value = %d and next pointer = %p\\n\", point-&gt;data, point-&gt;next);\n    point = point-&gt;next;\n  }\n};\n\nvoid list_cleanup(struct list l*){\n  struct node *point;\n  struct node *temp;\n  while (point != 0);\n    temp = point;\n    point = point-&gt;next;\n    free(temp);\n  }\n};\n</code></pre>\n\n<p>I dont understand why when i run the main:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n  struct list *a;\n  a = list_init();\n  list_add(a, 10);\n  list_add(a, 53);\n  list_add(a, 66);\n  list_print(a);\n  list_cleanup(a);\n  list print(a);\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>66 0x10570b0\n53 0x1057090\n10 (nil)\n\n17133760 0x10570b0\n17133728 0x1057090\n17122696 (nil)\n</code></pre>\n\n<p>I understand the first 3 output values they are the value en the pointer value in my linked list. However how is it possible that after looping trough the list and freeing the memory, list_print() stil outputs the correct pointer values and the correct length of the list? This should not be possible after freeing the memory?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 49855, "user_id": 5862071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/II4q8.jpg?s=128&g=1", "display_name": "Ousmane D.", "link": "https://stackoverflow.com/users/5862071/ousmane-d"}, "edited": false, "score": 0, "creation_date": 1487788629, "post_id": 42399602, "comment_id": 71946318, "body": "so you just want to validate whether input is a string or not?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 4, "creation_date": 1487788675, "post_id": 42399602, "comment_id": 71946340, "body": "Don&#39;t use <code>scanf</code> (ever).  Use <code>fgets</code>, or, if you have it, <code>getline</code>.  Then &quot;just hitting return&quot; will produce the string <code>&quot;\\n&quot;</code> and typing control-D (which forces an EOF condition) will produce the string <code>&quot;&quot;</code>.  Incidentally, the spaces at the ends of your second and third <code>printf</code> strings should be <code>\\n</code> instead."}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 49855, "user_id": 5862071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/II4q8.jpg?s=128&g=1", "display_name": "Ousmane D.", "link": "https://stackoverflow.com/users/5862071/ousmane-d"}, "edited": false, "score": 0, "creation_date": 1487788720, "post_id": 42399602, "comment_id": 71946359, "body": "@OusmaneDiaw At this point, yes. My code has to do other things, but I have to be able to validate that there is in fact some sort of input."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1487788759, "post_id": 42399602, "comment_id": 71946384, "body": "Where to begin? No memory allocation for <code>char *iochar;</code>. Not checking the function return value from <code>scanf</code>. Using <code>&amp;</code> for string arguments to <code>scanf</code> and <code>printf</code>... I suggest the man pages for functions you use, and enabling full compiler warnings."}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487788891, "post_id": 42399602, "comment_id": 71946469, "body": "@WeatherVane Well.... that&#39;s how my teacher told us we should do it, and how he does it in his examples... so...."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487788964, "post_id": 42399602, "comment_id": 71946503, "body": "Does your teacher also recommed <code>main()</code> just like that? Send him/her on a course of &quot;continuing education&quot;. Tactfully."}, {"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487789030, "post_id": 42399602, "comment_id": 71946536, "body": "@WeatherVane Yep. Pretty much."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1487790155, "post_id": 42399602, "comment_id": 71947195, "body": "The <code>%s</code> conversion specification for <code>scanf()</code> skips white space, including newlines and blanks and tabs, and doesn&#39;t start saving anything until it comes across a non-white-space character.  If you care about newlines, you can&#39;t use <code>scanf()</code> because it doesn&#39;t care about newlines (unless you work <i>very</i> hard \u2014 so hard that it isn&#39;t worth doing).  If you care about lines, use a line-based input function (e.g. <code>fgets()</code>) and then maybe <code>sscanf()</code> to parse the line that it reads."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487788805, "post_id": 42399672, "comment_id": 71946414, "body": "You know of <code>fgets</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2933559"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487789476, "post_id": 42399672, "comment_id": 71946789, "body": "Yes, but I prefer to not use standard library functions that I can implement myself."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2933559"}, "is_accepted": false, "score": 0, "last_activity_date": 1487792217, "last_edit_date": 1487792217, "creation_date": 1487788752, "answer_id": 42399672, "question_id": 42399602, "link": "https://stackoverflow.com/questions/42399602/how-to-check-if-user-input-a-string-value/42399672#42399672", "title": "How to check if user input a string value?", "body": "<p>Here's my advice: Don't use <code>scanf</code>. Its rules are confusing, and it's very difficult to get the behaviour you want.\nInstead, I recommend you use <code>getch</code> to manually read each character into a buffer until the user enters a newline character <code>'\\n'</code>. Then you can zero terminate the buffer with a <code>0</code>, and then use the buffer as a normal string. For it to be empty, just check the length of the string with <code>strlen(x)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "edited": false, "score": 0, "creation_date": 1487792247, "post_id": 42400011, "comment_id": 71948419, "body": "Oh my gosh thanks so much! It works like a dream now! Haha."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1487790199, "last_edit_date": 1487790199, "creation_date": 1487789897, "answer_id": 42400011, "question_id": 42399602, "link": "https://stackoverflow.com/questions/42399602/how-to-check-if-user-input-a-string-value/42400011#42400011", "title": "How to check if user input a string value?", "body": "<p><code>scanf ( \"%s\", &amp;iochar);</code> is not useful for detecting an empty line.</p>\n\n<p><code>\"%s\"</code> first directs <code>scanf()</code> to read and discard all leading white-space, including <code>'\\n'</code> before proceeding to read non-white-space characters. So code has lost the <code>'\\n'</code>.</p>\n\n<hr>\n\n<p>Instead use <code>fgets()</code></p>\n\n<pre><code>// Enough room for 80 characters + \\n + \\0\n#define LINE_SIZE (80 + 1 + 1)\nchar buf[LINE_SIZE];\n\nif (fgets(buf, sizeof buf, stdin) == NULL) {\n  puts(\"end-of-file or input error detected\");\n} else if (buf[0] == '\\n') {\n  puts(\"Empty line entered\");\n} else {\n  printf(\"Input line: &lt;%s&gt;\\n\", buf);\n}\n</code></pre>\n\n<p>Input</p>\n\n<pre><code>Hello World (and &lt;Enter&gt;)\n</code></pre>\n\n<p>Output (Note the \\n read in is still retained)</p>\n\n<pre><code>Input line: &lt;Hello World\n&gt;\n</code></pre>\n\n<hr>\n\n<p>To be clear: In C, a <em>string</em> is a sequence of characters up to and including a terminating <em>null character</em> <code>'\\0'</code>.  Users do not enter <em>strings</em>.  User input is usually a <em>line</em> of text up to and including a terminating <em>line feed</em> <code>'\\n'</code>.  <code>fgets()</code> reads a <em>line</em> of input and then appends a <em>null character</em> to the resultant <code>buffer</code> is a <em>string</em>`.</p>\n"}], "owner": {"reputation": 53, "user_id": 7163951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8f06dd3d5366e7f8b5aa5c37005efb6b?s=128&d=identicon&r=PG&f=1", "display_name": "Polly", "link": "https://stackoverflow.com/users/7163951/polly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 42400011, "answer_count": 2, "score": 2, "last_activity_date": 1487792217, "creation_date": 1487788488, "question_id": 42399602, "link": "https://stackoverflow.com/questions/42399602/how-to-check-if-user-input-a-string-value", "title": "How to check if user input a string value?", "body": "<p>So here's my code:</p>\n\n<pre><code>main()\n{\n        char *iochar;                                                                                   \n\n        printf(\" Enter a standard line: \");                                                             \n        scanf ( \"%s\", &amp;iochar);\n\n        if (iochar != NULL)\n        {\n                printf(\" Here's what you entered: %s \", &amp;iochar);\n        }\n        else\n        {\n                printf(\" Oops! Looks like you forgot to enter something! \");\n        }\n}\n</code></pre>\n\n<p>My problem is that I can scan the user entry and store it and if something exists it puts out the correct message. But if I just hit return to test for no input (null, empty, etc) the program neither quits nor outputs my error message. It just hangs until I input something.</p>\n\n<p>I've been programming in Java for the last two semesters so C is totally lost on me right now. So any help would be much appreciated.</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1487789988, "post_id": 42398690, "comment_id": 71947089, "body": "<code>&quot;Hello the world!&quot;</code> and <code>&quot;Helllooooo the worlldddddd&quot;</code> are two different strings, located in two different parts of memory. With <code>pointer = ...</code>, you are setting <code>pointer</code> to be the address of either one of these strings (i.e., setting it to point to that string)."}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 1, "creation_date": 1487794205, "post_id": 42399827, "comment_id": 71949520, "body": "@JohnH - I do not believe <code>String</code> is considered <code>const</code>, implicit or otherwise, so although more space cannot be added to <code>String</code>, for example with <code>realloc(...)</code>,  it can be modified.  If it was implicit <code>const</code>, I would think it would throw a compile time error as opposed to a run-time error.  Is there a specific environment where you have observed otherwise?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 1, "creation_date": 1487799095, "post_id": 42399827, "comment_id": 71952341, "body": "@JohnH, no <code>String</code> must be mutable. It is not pointing to the string literal but a completely separate array of <code>char</code> that is not <code>const</code> qualified. So per se there is no problem modifying it. (There is obviously a problem with the size, though.)"}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 6, "last_activity_date": 1487789297, "creation_date": 1487789297, "answer_id": 42399827, "question_id": 42398690, "link": "https://stackoverflow.com/questions/42398690/why-doesnt-this-c-code-change-the-string-and-cause-a-buffer-overflow/42399827#42399827", "title": "Why doesn&#39;t this C code change the string and cause a buffer overflow?", "body": "<p>When you write the line</p>\n\n<pre><code>pointer=\"Helllooooo the worlldddddd\";\n</code></pre>\n\n<p>you are not saying \"take the array pointed at by <code>pointer</code> and overwrite its contents with the string <code>\"Helllooooo the worlldddddd\"</code>,\" but rather \"change <em>which string</em> <code>pointer</code> points at so that it's now pointing at the string <code>\"\"Helllooooo the worlldddddd\"</code>.\" This accounts for why you're seeing the original string printed out when you directly print <code>String</code> - you never actually modified it. As a result, you don't need to worry about overflowing your array here, since you're not actually writing anything to it.</p>\n\n<p>On the other hand, if you wrote</p>\n\n<pre><code>strcpy(pointer, \"Helllooooo the worlldddddd\");\n</code></pre>\n\n<p>which actually <em>does</em> copy the contents of the new string into the buffer pointed at by <code>pointer</code>, then you <em>would</em> have a buffer overflow, which would be a problem. But notice that this is a very different operation that explicitly says \"please copy the contents of this string to this location\" rather than \"change where this pointer points.\"</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7554540, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R2l4n8K0jrU/AAAAAAAAAAI/AAAAAAAAAGc/BatIbsejTt4/photo.jpg?sz=128", "display_name": "Ahmed Adel", "link": "https://stackoverflow.com/users/7554540/ahmed-adel"}, "is_accepted": false, "score": 1, "last_activity_date": 1487791197, "creation_date": 1487791197, "answer_id": 42400420, "question_id": 42398690, "link": "https://stackoverflow.com/questions/42398690/why-doesnt-this-c-code-change-the-string-and-cause-a-buffer-overflow/42400420#42400420", "title": "Why doesn&#39;t this C code change the string and cause a buffer overflow?", "body": "<p>you have initialize a pointer which point to String \"Hello the world \" <code>char *pointer=String;</code> so far so good .<br>\nfirst printf <code>printf(\" %s\\n\",pointer);</code>, you have printed the pointer which point to \"Hello the world\".<br>\nthen you set the pointer to point anew string \"Hellloooooo the worllddddd\" <code>pointer=\"Helllooooo the worlldddddd\";</code>.<br>\nthen you have printed the pointer which point in this case to \"Hellloooooo the worllddddd\"<code>printf(\"Hello %s\\n\",pointer);</code> .<br>\nlast printf you have printed the string \"Hello the world\" <code>printf(\"Hello %s\\n\",String);</code>.<br>\nNote:.\n((takecare that you have printed in second <code>printf(\"Hello %s\\n\",String);</code> and third printf <code>printf(\"Hello %s\\n\",String);</code> the string hello which will be printed before the value of the pointer or the string))</p>\n"}, {"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1487801122, "last_edit_date": 1487801122, "creation_date": 1487792327, "answer_id": 42400739, "question_id": 42398690, "link": "https://stackoverflow.com/questions/42398690/why-doesnt-this-c-code-change-the-string-and-cause-a-buffer-overflow/42400739#42400739", "title": "Why doesn&#39;t this C code change the string and cause a buffer overflow?", "body": "<p>One more quick option for you to consider when manipulating strings:<br>\nThe string function <em><a href=\"http://man7.org/linux/man-pages/man3/strdupa.3.html\" rel=\"nofollow noreferrer\">strdup(...);</a></em> allows the copying of an existing string into a newly created string in one easy step.  <em>(or at least one in which all the complexity has been abstracted away)</em>:</p>\n\n<pre><code> char *pointer = strdup(\"Helllooooo the worlldddddd\");\n</code></pre>\n\n<p>The new string  <code>pointer</code> can now be used to contain any string up to <code>len</code> long, where <code>len</code> is defined as:</p>\n\n<pre><code>int len = strlen(pointer);//len is 26 after using strdup(...); above\n</code></pre>\n\n<p>So for example, because your example string is shorter than <code>len</code>: </p>\n\n<pre><code>char String[]=\"Hello the world!\";//length is 16\n</code></pre>\n\n<p>you could copy it into <code>pointer</code> without a buffer overflow:</p>\n\n<pre><code>strcpy(pointer, String);\n</code></pre>\n\n<p>Strings created using <code>strdup(...):</code> need to be free'd to avoid memory leaks.  Call the following when you are finished using <code>pointer</code>:  </p>\n\n<pre><code>free(pointer);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 7554540, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R2l4n8K0jrU/AAAAAAAAAAI/AAAAAAAAAGc/BatIbsejTt4/photo.jpg?sz=128", "display_name": "Ahmed Adel", "link": "https://stackoverflow.com/users/7554540/ahmed-adel"}, "is_accepted": false, "score": 1, "last_activity_date": 1487796263, "creation_date": 1487796263, "answer_id": 42401903, "question_id": 42398690, "link": "https://stackoverflow.com/questions/42398690/why-doesnt-this-c-code-change-the-string-and-cause-a-buffer-overflow/42401903#42401903", "title": "Why doesn&#39;t this C code change the string and cause a buffer overflow?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\nchar String[]=\"Hello the world\";  // the string\nchar *pointer=String;             // pointer to string \nchar i;                           //counter\n\nprintf(\" %s\\n\",pointer);          // print current value of pointer\n\npointer=\"number of char\";         // new value to replace the string\nfor (i=0;i&lt;14;i++)                // you cannot change the content of array without using loop\n{\nString[i] = pointer[i];           // char i in string = ti char i in pointer\n}\nprintf(\"Hello   %s\\n\",pointer);   // print value of pointer\nprintf(\"Hello   %s\\n\",String);    // print value of string\n\nreturn 0;\n} \n</code></pre>\n\n<p>i think that what are you trying to do. </p>\n"}], "owner": {"reputation": 39, "user_id": 7606483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d4a5400ac25a0b51cded5d5010000e2?s=128&d=identicon&r=PG&f=1", "display_name": "Ehsan Zakeri", "link": "https://stackoverflow.com/users/7606483/ehsan-zakeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 42399827, "answer_count": 4, "score": 2, "last_activity_date": 1487801122, "creation_date": 1487785465, "last_edit_date": 1487800777, "question_id": 42398690, "link": "https://stackoverflow.com/questions/42398690/why-doesnt-this-c-code-change-the-string-and-cause-a-buffer-overflow", "title": "Why doesn&#39;t this C code change the string and cause a buffer overflow?", "body": "<p>I wrote this code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char String[] = \"Hello the world!\";\n    char *pointer = String;\n    int i;\n\n    printf(\" %s\\n\", pointer);\n\n    pointer = \"Helllooooo the worlldddddd\";\n    printf(\"Hello %s\\n\", pointer);\n    printf(\"Hello %s\\n\", String);\n\n    return 0;\n}\n</code></pre>\n\n<p>but I can't understand how this line works fine.</p>\n\n<pre><code>pointer = \"Helllooooo the worlldddddd\";\n</code></pre>\n\n<p>but I got this output</p>\n\n<pre><code> Hello the world!\nHello Helllooooo the worlldddddd\nHello Hello the world!\n</code></pre>\n\n<p>As you see it couldn't change <code>String</code> value but it shows more than the original number of characters. Shouldn't this cause a buffer overflow? Won't that destroy other variables?</p>\n"}, {"tags": ["c", "process", "fork", "pid", "child-process"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487887324, "post_id": 42398593, "comment_id": 71999542, "body": "the code only has one call to <code>fork()</code> so only one child is created."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487887414, "post_id": 42398593, "comment_id": 71999594, "body": "NOTE: the function: <code>fork()</code> has three(3) kinds of return values.  The posted code is only checking the <code>==0</code> return and then assuming that no error occurred. That is a very bad programming practice to fail to check for errors."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487887567, "post_id": 42398593, "comment_id": 71999686, "body": "the main process (the parent) should not return until all the children have exited.  Therefore, the parent should call <code>wait()</code> or better <code>waitpid()</code> for each child before the parent exits."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487887713, "post_id": 42398593, "comment_id": 71999754, "body": "Strongly suggest (To make it much easier to keep track of which process is executing which code) that each child code block have a call to <code>exit()</code> as its&#39; last code statement."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487888128, "post_id": 42398593, "comment_id": 71999959, "body": "what if the executable is not named <code>a.out</code>?  suggest this line: <code>fprintf(stderr,&quot;Usage: .&#47;a.out &lt;starting value&gt;\\n&quot;);</code> be replaced with: <code>fprintf(stderr,&quot;Usage: %s &lt;starting value&gt;\\n&quot;, argv[0]);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487887896, "post_id": 42398709, "comment_id": 71999844, "body": "please see my comments on the question as to other problems with the posted code"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 4, "last_activity_date": 1487785524, "creation_date": 1487785524, "answer_id": 42398709, "question_id": 42398593, "link": "https://stackoverflow.com/questions/42398593/c-child-process-creation/42398709#42398709", "title": "C Child process creation", "body": "<p><code>fork()</code> doesn't create 2 new processes. It spawns 1 child from the main process. It returns 0 inside the child process and the PID of the child if you're in the parent.</p>\n\n<p>So in your code, when you think you're in child 2 - that's still the parent. You'll need to call <code>fork()</code> again but only inside the parent process.</p>\n"}], "owner": {"reputation": 289, "user_id": 5909941, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/795e066d900ae0266ba0bb3b70cf8805?s=128&d=identicon&r=PG&f=1", "display_name": "SgtOVERKILL", "link": "https://stackoverflow.com/users/5909941/sgtoverkill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 42398709, "answer_count": 1, "score": 1, "last_activity_date": 1487785524, "creation_date": 1487785162, "question_id": 42398593, "link": "https://stackoverflow.com/questions/42398593/c-child-process-creation", "title": "C Child process creation", "body": "<p>I am writing a program that creates a two processes directly from the parent. My expected output looks like</p>\n\n<pre><code>Main programs process ID: 2834\nChild 2 (ID: 2836) Start Sequence at: 23\nChild 1 (ID: 2835) Start Sequence at: 20\n</code></pre>\n\n<p>My actual output is </p>\n\n<pre><code>Main programs process ID: 2834\nChild 2 (ID: 2834) Start Sequence at: 23\nChild 1 (ID: 2835) Start Sequence at: 20\n</code></pre>\n\n<p>My code is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\nint main(int argc, char *argv[])\n{\n   pid_t pid;\n   int n;\n\n    if (argc == 1) {\n        fprintf(stderr,\"Usage: ./a.out &lt;starting value&gt;\\n\");\n        return -1;\n    }\n    n = atoi(argv[1]);\n\n    int p_pid;\n    p_pid = getpid();\n\n    printf(\"Main programs process ID: %d\\n\", p_pid); \n\n    pid = fork();\n\n    if(pid == 0){\n       int c1;\n       c1 = getpid();\n       printf(\"Child 1 (ID: %d) Start Sequence at: %d\\n\", c1, n);\n    }\n\n    if(pid != 0){\n       int c2;\n       c2 = getpid();\n       printf(\"Child 2 (ID: %d) Start Sequence at: %d\\n\", c2, n+3);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I am getting the correct child 1 process but not the correct child 2 process. What am I doing wrong or how can I fix this issue?</p>\n"}, {"tags": ["c", "arrays", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487784316, "post_id": 42398253, "comment_id": 71943563, "body": "<code>temp=calloc(10,pointer_type)</code>...do you smell something?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487784331, "post_id": 42398253, "comment_id": 71943574, "body": "There are also other problems that will not be caught by the compiler, like you not allocating the right size for your arrays. To allocate an array of arrays of <code>double</code>, you start with e.g. <code>calloc(10, sizeof(double*))</code>."}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487784448, "post_id": 42398253, "comment_id": 71943662, "body": "@Someprogrammerdude Shouldn&#39;t this be achieved by pointer_type=sizeof(double) as I am still giving the correct size?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1487785080, "post_id": 42398253, "comment_id": 71944068, "body": "Being a 3-star C programmer is not a compliment. Something like <code>void ***</code> is almost always a signal of bad interface design."}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487785324, "post_id": 42398253, "comment_id": 71944241, "body": "@Olaf Is there another way of assigning a 2D  dynamic array in a separate function from main without passing in the address of a double pointer? If so please explain"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1487785507, "post_id": 42398253, "comment_id": 71944353, "body": "@Hobojoe: <code>void ***</code> is not a 2D (or nD) array, nor can it point to one or in any way used as one! If you need a 2D array,, pass a pointer to a 1D array (a pointer to a 2D array would also work, but is less intuitiv in usage and not ideomatic). And don&#39;t get too fancy with <code>void *</code>, if you ned a <code>double</code> array, use a <code>double</code> array!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487785535, "post_id": 42398253, "comment_id": 71944372, "body": "<code>sizeof(double)</code> doesn&#39;t have to be equal to <code>sizeof(double*)</code>. Notice the difference?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1487785608, "post_id": 42398253, "comment_id": 71944428, "body": "Remember: <a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">3-Star Programmer</a> is not a compliment."}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487785665, "post_id": 42398253, "comment_id": 71944463, "body": "@Olaf From what I have tested if I called <code>pointer[a][b]= a value</code> after assigning this way it works like a 2D array. How is this not a 2D  array?"}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487785809, "post_id": 42398253, "comment_id": 71944565, "body": "@Someprogrammerdude Ah so the size of a double pointer is not the size of a double"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487785880, "post_id": 42398253, "comment_id": 71944617, "body": "@Hobojoe: A pointer is not an array! Identical syntax does not imply identical semantics; it <b>looks</b> like a 2D array, but <i>works</i> very different. There are hundreds of Q&amp;A about this already alone on SO, read them! I have a related answer <a href=\"http://stackoverflow.com/a/35615201/4774918\">here</a>"}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487786219, "post_id": 42398253, "comment_id": 71944843, "body": "@Olaf thank you for the link, Ill try and make sense of it"}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487787926, "post_id": 42398253, "comment_id": 71945913, "body": "@Olaf , assuming I understood <a href=\"http://www.drdobbs.com/the-new-cwhy-variable-length-arrays/184401444\" rel=\"nofollow noreferrer\">this</a> correctly, the array should be allocated as a 1D array with the same number of &quot;cells&quot; as the 2D array. Then to access it you access as if each dimension is end to end, i.e if the array was a[2][2] it would be allocated as a=malloc(4*sizeof(type), then to access cell &quot;a[1][1]&quot; i should treat it as   if the cells are set out as  [0,0][0,1][1,0][1,1] and so I can say a[3] and retrieve the correct cell.    Is this the correct way of performing this?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487788557, "post_id": 42398253, "comment_id": 71946280, "body": "@Hobojoe: Not exactly clear, but it seems to be correct. Note that the layout <b>is</b> like the mentioned, which is exactly the difference to your pointer-pointer approach. Just keep in mind that a 2D array only has <b>one</b> indirection (i.e. <code>*&#39;</code>) at most in the declaration (simplified, more complex constructs are often also not good design)."}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487789298, "post_id": 42398253, "comment_id": 71946695, "body": "@Olaf, brilliant, one more question if I may. Given that the pointer-pointer method works as intended, is the only reason to use the 1D method because it assigns memory so it is all next to each other, allowing pointer arithmetic to work?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487789544, "post_id": 42398253, "comment_id": 71946823, "body": "That is no &quot;1D method&quot;, but using a 2D array - read how arrays and pointers are related in C, this is vital &amp; basic knowledge. The pointer-to-pointer is a completely different datastructure. Both have their use-case, but if you need a rectangular object of (after allocation) fixed size, you use a 2D array (aka matrix). For example, you only need a single <code>malloc</code> and <code>free</code>, which makes your <code>foo</code> completely unnecessary."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487789681, "post_id": 42398253, "comment_id": 71946900, "body": "Sidenote: <code>return</code> is a statement, not a function. Don&#39;t parenthesise the expression, that can make finding syntax errors difficult."}, {"owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487791881, "post_id": 42398253, "comment_id": 71948219, "body": "@Olaf , something I noticed you said: &quot;if you need a rectangular object of (after allocation) fixed size, you use a 2D array&quot;, seeing as later in the program I need to change the size of the array, would this mean the pointer-pointer structure is a better option?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487805625, "post_id": 42398253, "comment_id": 71955129, "body": "@Hobojoe: It depends. Please understand this is not the place (nor do I have to time, to be honest) to tutor. I&#39;d recommend you dig deeper into arrays and pointers before you start messing with them. C is a bad language for trial and error, as it does not prevent you from sooting your feet, arms and - finally - head."}], "answers": [{"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1487792965, "post_id": 42398381, "comment_id": 71948842, "body": "but an explicit cast doesn&#39;t fix that this can have undefined behaviour."}], "tags": [], "owner": {"reputation": 733, "user_id": 994306, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/228125d73451ecc91b517b9002d68c2e?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/994306/marco"}, "is_accepted": false, "score": -2, "last_activity_date": 1487784491, "creation_date": 1487784491, "answer_id": 42398381, "question_id": 42398253, "link": "https://stackoverflow.com/questions/42398253/use-of-void-pointer-causes-compiler-warning-errors/42398381#42398381", "title": "Use of void pointer causes compiler warning errors", "body": "<p>The compiler produces the right warning because the type</p>\n\n<pre><code>void ***\n</code></pre>\n\n<p>is different from the type</p>\n\n<pre><code>double ***\n</code></pre>\n\n<p>An explicit casting will fix the warning:</p>\n\n<pre><code>if (foo((void ***)&amp;pointer, sizeof(double))==-1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1487785932, "last_edit_date": 1487785932, "creation_date": 1487785233, "answer_id": 42398619, "question_id": 42398253, "link": "https://stackoverflow.com/questions/42398253/use-of-void-pointer-causes-compiler-warning-errors/42398619#42398619", "title": "Use of void pointer causes compiler warning errors", "body": "<p><strong><em>Only</em></strong> a <code>void*</code> is considered a <code>void</code>-pointer, to and from conversion of other pointers is done implicitly (in C).</p>\n\n<p><code>void**</code> is a pointer to a <code>void</code>-pointer, which is not a <code>void</code>-pointer. The same applies to <code>void***</code>.</p>\n\n<p>So to fix the error you cite change</p>\n\n<pre><code>int foo(void ***memory,size_t pointer_type)\n</code></pre>\n\n<p>to be</p>\n\n<pre><code>int foo(void *memory, size_t pointer_type)\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 6019461, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae370463f3a20799276da301afaa48f6?s=128&d=identicon&r=PG&f=1", "display_name": "Industrialactivity", "link": "https://stackoverflow.com/users/6019461/industrialactivity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 42398619, "answer_count": 2, "score": -2, "last_activity_date": 1487960085, "creation_date": 1487784118, "last_edit_date": 1487960085, "question_id": 42398253, "link": "https://stackoverflow.com/questions/42398253/use-of-void-pointer-causes-compiler-warning-errors", "title": "Use of void pointer causes compiler warning errors", "body": "<p>I am attempting to create a function that assigns memory and checks to see if the memory allocation has been accomplished. To allow any memory type to be assigned I have set the function to accept void like so: <code>foo(void ***memory, size_t pointer_type)</code>. The intention here is to allow the user to input any pointer into the first section and then the size of the pointer type in the second to allocate correctly, such as:</p>\n\n<pre><code>int foo(void ***memory,size_t pointer_type)\n{\n    void **temp;\n    if((temp=calloc(10,pointer_type))==NULL)\n    {\n        return(-1);\n    }\n    for(i=0;i&lt;10;i++)\n    {\n        if((temp[i]=calloc(10,pointer_type))==NULL)\n        {\n            // free array as can't be used\n            for(i;i&gt;=0;i--)\n            {\n                free(temp[i]);\n                temp[i]=NULL;\n            }\n            free(temp);\n            temp=NULL;\n            return(-1);\n        }\n    }\n    *memory=temp;\n    return(0);\n}\n\nint main()\n{\n\n    double **pointer;\n    if(foo(&amp;pointer, sizeof(double))==-1)\n    {\n        return(-1);\n    }\n\n\n    //do stuff then free memory\n\n\n    return (0);\n}\n</code></pre>\n\n<p>In this example an array of doubles should be created. I came upon this idea when reading other SE posts explaining that this allows any array type to be created, however the compiler gives the following warning :  </p>\n\n<blockquote>\n  <p>warning: passing argument 1 of 'foo' from incompatible pointer type\n  note: expected <code>void ***'</code>but argument is of type <code>'double ***'</code></p>\n</blockquote>\n\n<p>This suggests to me that something I have done is incorrect, however when treating the array as a double array after allocation everything works fine so I am lost as to what to do. </p>\n\n<p>EDIT: Ok so the use of the 3-star is to assign the memory from a separate function for a 2D array and was how I was shown to do it, ie if I used <code>pointer[a][b]=10</code> then it would act like a 2D array. If there are better ways then please do show an example, however I still require the array to be of any type which currently is the pressing matter. </p>\n"}, {"tags": ["c", "arrays", "memory", "cpu-registers", "calloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1487782613, "post_id": 42397687, "comment_id": 71942387, "body": "By &quot;registers&quot; you mean &quot;memory locations&quot;?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1487782682, "post_id": 42397687, "comment_id": 71942440, "body": "You write <i>Variables are stored in registers of size 32 bits (or 4 bytes).</i> Not true, it&#39;s rather <i>Variables <b>may be</b> stored in registers of size 32 bits (or 4 bytes).</i>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1487783066, "post_id": 42397687, "comment_id": 71942729, "body": "&quot;If registers are 32-bits and I am writing only 8-bits to that register, are the remaining 24-bits unused?&quot;  is an assembly issue and not specified nor controlled by C.  Many possibilities exist.  From a C point-of-view-, it is irrelevant."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487783221, "post_id": 42397687, "comment_id": 71942828, "body": "Bear in mind too that in C <code>&#39;!&#39;</code> is of type <code>int</code> not of type <code>char</code> so the full register width will be used leaving no unused bits."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1487783592, "post_id": 42397687, "comment_id": 71943077, "body": "You don&#39;t wanna know. Cos you shouldn&#39;t care."}, {"owner": {"reputation": 164, "user_id": 7485966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/784ceb99c59ffe5d4105cc6cc7cdb728?s=128&d=identicon&r=PG&f=1", "display_name": "ttdado", "link": "https://stackoverflow.com/users/7485966/ttdado"}, "edited": false, "score": 0, "creation_date": 1487783627, "post_id": 42397687, "comment_id": 71943100, "body": "Misunderstanding. One byte has 8 bits. If you want allocate 16bytes, you call calloc(16,sizeof(char)) and what you get is pointer (address) and so this pointer is firstly stored in register (the register is 32 or 64bit wide). If you want, you can stored it in memory or anywhere so you can access it later. When you call *ptr++=&#39;a&#39;, you simply write one byte (8bits) to the address stored in &#39;ptr&#39; variable and increment that address by one byte (of course ptr must be have type of 8bit integer pointer -char - which is byte)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487784624, "post_id": 42397687, "comment_id": 71943792, "body": "To be clear, &quot;Variables are stored in registers of size 32 bits (or 4 bytes)&quot; is incorrect.  Variables are stored in <i>some</i> kind of memory.  A variable may take up up only 1 byte, 15 bytes, 42 bytes, 8675309 bytes, etc.  This is independent of the size of of the processor&#39;s registers. A write to n-bytes affects those n-bytes.  If the write affects other memory, that memory is not used at that time and is irrelevant."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1487785014, "post_id": 42397687, "comment_id": 71944024, "body": "Your question is mixing up too many things. You should first look up what <i>hardware registers</i> really are. Then you should look up the <code>register</code> keyword for C, which is something completely different."}, {"owner": {"reputation": 75, "user_id": 1994011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1c6e240264e7f7a03ce36495775a081?s=128&d=identicon&r=PG", "display_name": "MCHatora", "link": "https://stackoverflow.com/users/1994011/mchatora"}, "edited": false, "score": 0, "creation_date": 1487871221, "post_id": 42397687, "comment_id": 71990574, "body": "Yes, I ignorantly used incorrect terminology here: there should be no references to registers. What I really mean is memory locations. I apologize for the confusion."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1487782714, "post_id": 42397737, "comment_id": 71942464, "body": "The <code>register</code> keyword is normally ignored nowadays. See <a href=\"http://stackoverflow.com/questions/578202/register-keyword-in-c\">this SO question</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1487782755, "post_id": 42397737, "comment_id": 71942488, "body": "<code>to ensure</code>-- nopes, not at all, compiler are free to, and likely to absolutely ignore the <code>register</code> keyword."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487783089, "post_id": 42397737, "comment_id": 71942752, "body": "<code>normally they will be just stored on the stack.</code>, sadly, there&#39;s no concept of <code>stack</code> in C standard, that&#39;s upto implmentation."}], "tags": [], "owner": {"reputation": 104, "user_id": 3906978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a45f5dcc8d00bea9e8a3e0d2af8e87ce?s=128&d=identicon&r=PG&f=1", "display_name": "Uriel Zilberberg", "link": "https://stackoverflow.com/users/3906978/uriel-zilberberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1487782825, "last_edit_date": 1487782825, "creation_date": 1487782686, "answer_id": 42397737, "question_id": 42397687, "link": "https://stackoverflow.com/questions/42397687/in-c-are-the-characters-in-an-array-i-e-string-stored-in-individual-register/42397737#42397737", "title": "In C, are the characters in an array (i.e. string) stored in individual registers or are there four characters per register?", "body": "<p>Those pointers are not certain to be stored in registers, normally they will be just stored on the stack.\nThis is an outcome of the compiler optimizations. \nIn some compilers you can use the <code>register</code> statement to ensure usage of register.</p>\n\n<p>Also, there is no \"next\" registers, registers does not have addresses. Register file is a special hardware unit integrated to the cpu and usually named by a certain set of bits.</p>\n\n<p>I advise you to use your compiler or disassembly tool to see exactly how it looks in assembly.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1487782712, "creation_date": 1487782712, "answer_id": 42397752, "question_id": 42397687, "link": "https://stackoverflow.com/questions/42397687/in-c-are-the-characters-in-an-array-i-e-string-stored-in-individual-register/42397752#42397752", "title": "In C, are the characters in an array (i.e. string) stored in individual registers or are there four characters per register?", "body": "<p>Nopes, there's no <em>register</em> involved, in general, they are scarce resource.</p>\n\n<p>What happens actually is, you are writing the values in the memory locations pointed to by the returned pointer. The pointers and pointer arithmetic regards data type, so the returned pointer, casted to proper type, takes care of access.</p>\n\n<blockquote>\n  <p><em>I write characters using my pointer (i.e. <code>*ptr = '!';</code>) and then I increment the points (<code>ptr++;</code>) to move to the next register.</em></p>\n</blockquote>\n\n<p>Not exactly, you are talking about memory location pointed to by the pointer <code>ptr</code>. In case, <code>ptr</code> is defined as <code>char *</code>, <code>ptr++</code> is the same as <code>ptr = ptr + 1</code>, which, increases the <code>ptr</code> by the size of the pointing data type, <code>char</code>. So, after the expression, <code>ptr</code> points to the next <em>element</em> in the memory location.</p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 5652013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7607d79904d91ae307df0b276bcbd1d7?s=128&d=identicon&r=PG&f=1", "display_name": "NathanAck", "link": "https://stackoverflow.com/users/5652013/nathanack"}, "is_accepted": false, "score": 0, "last_activity_date": 1487783241, "last_edit_date": 1487783241, "creation_date": 1487782919, "answer_id": 42397823, "question_id": 42397687, "link": "https://stackoverflow.com/questions/42397687/in-c-are-the-characters-in-an-array-i-e-string-stored-in-individual-register/42397823#42397823", "title": "In C, are the characters in an array (i.e. string) stored in individual registers or are there four characters per register?", "body": "<p>You can specify in c that a var goes into a register, and most compilers will optimize this, but where the var goes depends on what kind of variable it is. Local variables will go on the stack, memory allocation functions should put it on the heap and give you the address. Constants and string literals will go into the read only data segment.</p>\n"}, {"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1487785087, "post_id": 42398382, "comment_id": 71944074, "body": "Well my answer got oblivious before I send it^^. +1 for this very in-depth answer"}, {"owner": {"reputation": 75, "user_id": 1994011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1c6e240264e7f7a03ce36495775a081?s=128&d=identicon&r=PG", "display_name": "MCHatora", "link": "https://stackoverflow.com/users/1994011/mchatora"}, "edited": false, "score": 0, "creation_date": 1487870815, "post_id": 42398382, "comment_id": 71990307, "body": "Thanks for the detailed response. I have completely used incorrect terminology here because I am ignorant. All references to the term &quot;register&quot; should read &quot;memory location&quot;. So memory locations address bytes not words?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 75, "user_id": 1994011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1c6e240264e7f7a03ce36495775a081?s=128&d=identicon&r=PG", "display_name": "MCHatora", "link": "https://stackoverflow.com/users/1994011/mchatora"}, "edited": false, "score": 1, "creation_date": 1487871248, "post_id": 42398382, "comment_id": 71990587, "body": "@MCHatora, as you see, correct terminology is essential for accurate communication.  Even substituting &quot;memory location&quot; for &quot;register&quot;, however, you still have a misunderstanding, addressed at the very end of my answer: in C, memory locations are (logically) <i>one</i> byte in size, not four.  This has nothing to do with the underlying architecture&#39;s native word size."}, {"owner": {"reputation": 75, "user_id": 1994011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1c6e240264e7f7a03ce36495775a081?s=128&d=identicon&r=PG", "display_name": "MCHatora", "link": "https://stackoverflow.com/users/1994011/mchatora"}, "edited": false, "score": 0, "creation_date": 1487873686, "post_id": 42398382, "comment_id": 71992019, "body": "Yeah, this was the <i>real</i> question I had: how many bits does a memory address &quot;contain&quot; (which is 8). Thanks for this response!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 4, "last_activity_date": 1487789373, "last_edit_date": 1487789373, "creation_date": 1487784491, "answer_id": 42398382, "question_id": 42397687, "link": "https://stackoverflow.com/questions/42397687/in-c-are-the-characters-in-an-array-i-e-string-stored-in-individual-register/42398382#42398382", "title": "In C, are the characters in an array (i.e. string) stored in individual registers or are there four characters per register?", "body": "<p>Register usage -- and, technically, even the existence of registers at all -- is a characteristic of the C implementation and the hardware on which it runs.  There is therefore no definitive answer to your question at its level of generality.  This is for the most part true of <em>any</em> question about \"what's going on under the hood\".</p>\n\n<p>Speaking in terms of typical implementations for commodity hardware, though,</p>\n\n<blockquote>\n  <p><strong>My understanding</strong>: When I use calloc I am allocating a section of memory in units of bytes.</p>\n</blockquote>\n\n<p>A reasonable characterization.</p>\n\n<blockquote>\n  <p>Variables are stored in registers of size 32 bits (or 4 bytes).</p>\n</blockquote>\n\n<p>No.  <em>Values</em> are stored in registers.  Implementations generally provide storage for the values of variables in regular memory, though those values may be copied into registers for computation.</p>\n\n<p>Under some implementation-specific circumstances, certain variables might not have an associated memory location, their values instead being maintained only in registers.  Generally speaking, however, this is <em>never</em> the case for variables or allocated space that is, was, or ever could be referenced by a pointer.</p>\n\n<blockquote>\n  <p>In my program, I write characters using my pointer (i.e. *ptr = '!';) and then I increment the points (ptr++;) to move to the next register.</p>\n</blockquote>\n\n<p>No, absolutely not.  Incrementing the pointer causes it to point to the next element of your dynamic storage, measured in units of the size of the pointed-to type.  This has nothing to do with registers.  Writing to the pointed-to object probably involves register use (because that's how CPUs work), but ultimately the character written ends up in regular memory.</p>\n\n<blockquote>\n  <p><strong>My question</strong>: If registers are 32-bits and I am writing only 8-bits to that register, are the remaining 24-bits unused?</p>\n</blockquote>\n\n<p>As I already explained, this question is based on a misconception.  The target of your write is not a register.  In any case, there are no gaps in memory between the elements you are writing.</p>\n\n<p>It is conceivable that under some circumstances, a clever compiler might optimize your code to minimize writes to memory by collecting  bytes in a register and performing writes in chunks of that size.  Whether it can or will do so depends on the implementation and the options in effect.</p>\n\n<blockquote>\n  <p>If not, then are the pointers I'm using pointing to some kind of 8-bit sub-register allocation, pointing to 8-bit sections of registers? </p>\n</blockquote>\n\n<p>Your pointers are (logically) pointing to main memory, which is (logically) addressable in byte-sized units.  They are not pointing to registers.</p>\n"}, {"tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1487784986, "creation_date": 1487784986, "answer_id": 42398528, "question_id": 42397687, "link": "https://stackoverflow.com/questions/42397687/in-c-are-the-characters-in-an-array-i-e-string-stored-in-individual-register/42398528#42398528", "title": "In C, are the characters in an array (i.e. string) stored in individual registers or are there four characters per register?", "body": "<p>As Sourav pointed out you are using registers wrong. There is a memory called register and there is a keyword <code>register</code> in C. But this has not much to do with pointers.</p>\n\n<p>The typical size for an aligned memory block is 16/32/64bit depending on your architecture. You are thinking that you increase your pointer by that blocksize. This is not correct. \nDepending on what type of pointer you have, your stepsize on incrementation differs. It is always the size of your corresponding data type in bytes.</p>\n\n<p><code>*char</code> gets increase by 1 byte if you do <code>++</code>\nwhile <code>*(long long)</code> gets increased by 8.</p>\n\n<p>As arrays can decay to pointers on some occasions, the mechanics are quite similar.</p>\n\n<p>What you think of is what happens if you declare two <code>char</code> (or a <code>char</code> and an <code>int</code> in a <code>struct</code>), their addresses differ by a multiple of the blocksize and the rest of the memory is \"wasted\".\nBut as you allocated the memory it is yours to control, you can pack it similar to an array.</p>\n"}, {"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 0, "last_activity_date": 1487798079, "creation_date": 1487798079, "answer_id": 42402412, "question_id": 42397687, "link": "https://stackoverflow.com/questions/42397687/in-c-are-the-characters-in-an-array-i-e-string-stored-in-individual-register/42402412#42402412", "title": "In C, are the characters in an array (i.e. string) stored in individual registers or are there four characters per register?", "body": "<p>There seems to be confusion about what a register is. A register is a storage location within the processor. Registers have different functions. However, programmers are generally concerned with GENERAL REGISTERS and the Process Status Register.</p>\n\n<p>General Registers are scratch locations for performing computations. On some systems all operations are performed in registers. Thus, if you want to add two values, you have to load both into registers, then add them. Most non-RISC systems these days allow operations to take place directly to memory.</p>\n\n<blockquote>\n  <p>My understanding: When I use calloc I am allocating a section of memory in units of bytes. Variables are stored in registers of size 32 bits (or 4 bytes). In my program, I write characters using my pointer (i.e. *ptr = '!';) and then I increment the points (ptr++;) to move to the next register.</p>\n</blockquote>\n\n<p>Your compiler may assign variables to exist in registers, rather than memory. However, any time you dereference a pointer (e.g. *ptr) you have to access memory.</p>\n\n<p>If you call </p>\n\n<pre><code>char *ptr = calloc (...) \n</code></pre>\n\n<p>The variable ptr may (or may not) be placed in a register. It's all up to your compiler. The value returned by calloc is the location of memory, not registers.</p>\n\n<p>What you should do to learn this is to generate assembly language code from your compiler. Most compilers have such an option and they typically interleave your C code with the generated assembly code.</p>\n\n<p>If you do:</p>\n\n<blockquote>\n  <p>In my program, I write characters using my pointer (i.e. *ptr = '!';) and then I increment the points (ptr++;) to move to the next register.</p>\n</blockquote>\n\n<p>Your generated code might look like (assuming ptr is mapped to R1):</p>\n\n<pre><code> MOVB '!', (R0)+\n</code></pre>\n\n<p>Which on several systems, moves the value '!' to the address pointed to by R0, then increments R0 by one.</p>\n\n<blockquote>\n  <p>My question: If registers are 32-bits and I am writing only 8-bits to that register, are the remaining 24-bits unused? If not, then are the pointers I'm using pointing to some kind of 8-bit sub-register allocation, pointing to 8-bit sections of registers?</p>\n</blockquote>\n\n<p>In your case, you are not reading and writing bytes to registers. However, many systems do have REGISTER subdividing.</p>\n"}], "owner": {"reputation": 75, "user_id": 1994011, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1c6e240264e7f7a03ce36495775a081?s=128&d=identicon&r=PG", "display_name": "MCHatora", "link": "https://stackoverflow.com/users/1994011/mchatora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 6, "score": 2, "last_activity_date": 1487870945, "creation_date": 1487782548, "last_edit_date": 1487870945, "question_id": 42397687, "link": "https://stackoverflow.com/questions/42397687/in-c-are-the-characters-in-an-array-i-e-string-stored-in-individual-register", "title": "In C, are the characters in an array (i.e. string) stored in individual registers or are there four characters per register?", "body": "<p>I am writing a program in C (32 bit) where I output a string (15 to 40 characters long). I have elected to use pointers and calloc instead of a formal array declaration. My program functions totally fine so this isn't a question about logic or function, I am simply curious about what's \"going on under the hood\" of my C code.</p>\n\n<p><strong>My understanding:</strong> When I use calloc I am allocating a section of memory in units of <em>bytes</em>. Variables are stored in <em>memory locations</em> of size 32 bits (or 4 bytes). In my program, I write characters using my pointer (i.e. *ptr = '!';) and then I increment the points (ptr++;) to move to the next <em>memory location</em>. </p>\n\n<p><strong>My question:</strong> If <em>memory locations</em> are 32-bits and I am writing only 8-bits to that <em>memory location</em>, are the remaining 24-bits unused? If not, then are the pointers I'm using pointing to some kind of 8-bit sub-<em>memory location</em>, pointing to 8-bit sections of <em>memory locations</em>? </p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 5, "creation_date": 1487781351, "post_id": 42397209, "comment_id": 71941537, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487781526, "post_id": 42397209, "comment_id": 71941655, "body": "Instead of <code>char format[20]; ...   my_ppm-&gt;format = format;</code> , need to allocate space for <code>my_ppm-&gt;format</code> and then <code>memcpy()</code>  e.g. <code>strdup()</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487781754, "post_id": 42397209, "comment_id": 71941785, "body": "<code>my_ppm-&gt;pixels[i] = malloc(sizeof(colour));</code> allocates memory for one pixel, but three lines later you overwrite that with another allocation by <code>new_colour()</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1487781895, "post_id": 42397209, "comment_id": 71941875, "body": "Aside: code that does <code>i &lt;= n-1</code> is harder to read than the simpler <code>i &lt; n</code>."}, {"owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "edited": false, "score": 2, "creation_date": 1487782114, "post_id": 42397209, "comment_id": 71942031, "body": "You aren&#39;t allocating any space for <code>pixels</code>. When you <code>malloc</code> <code>my_ppm</code>, you need to add the size of the array of pixels to <code>sizeof(ppm)</code>. The declaration <code>colour * pixels[]</code> doesn&#39;t actually reserve any space for that array."}, {"owner": {"reputation": 25, "user_id": 2930356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15df5422fef37788880f88f71fd16577?s=128&d=identicon&r=PG&f=1", "display_name": "user2930356", "link": "https://stackoverflow.com/users/2930356/user2930356"}, "edited": false, "score": 0, "creation_date": 1487782339, "post_id": 42397209, "comment_id": 71942188, "body": "Surely when I let my_ppm-&gt;pixels[i] = new_colour(r,g,b), it allocates the memory, because in new_colour, it allocates memory?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1487782341, "post_id": 42397209, "comment_id": 71942190, "body": "The code as shown <i>completely</i> lacks <i>any</i> error checking. You want to amend this."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487782550, "post_id": 42397209, "comment_id": 71942335, "body": "C does not support <i>methods</i>. Only <i>functions</i>."}, {"owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "edited": false, "score": 2, "creation_date": 1487785847, "post_id": 42397209, "comment_id": 71944588, "body": "@user2930356: Yes, <code>new_colour</code> allocates memory for the pixel, but you haven&#39;t allocated memory for the array of <code>colour</code> pointers within <code>ppm</code>. You need to take into account the memory required for that array when allocating memory for <code>my_ppm</code>. If, for example, you have 100 pixels, you should do this: <code>ppm *my_ppm = malloc(sizeof(ppm) + 100*sizeof(colour *));</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1487786835, "post_id": 42397209, "comment_id": 71945221, "body": "@user2930356:  are you sure you really want an array of pointers to colours rather than an array of colours?  Yes, you&#39;d have to revise the <code>new_colour()</code> function, but you&#39;d be more space-efficient if you stored an array of colours.  You should probably hold off allocating the space for the structure until you know how much space is going to be needed."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1487887030, "post_id": 42397209, "comment_id": 71999385, "body": "the posted code could save a LOT of aggravation and lines of code by directly allocating room for and array of pixels, the <code>scanf()</code> directly into that array with the pixel values."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1487791491, "post_id": 42399486, "comment_id": 71947980, "body": "Or simply defer allocation of the structure until the dimension line has been read, so that you know how much space to allocate."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1487792398, "post_id": 42399486, "comment_id": 71948506, "body": "Given this allocation method, you should probably also show how to initialize <code>ppm-&gt;pixels</code>, after..."}, {"owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1487798119, "post_id": 42399486, "comment_id": 71951757, "body": "@Bob__: you don&#39;t need to initialize <code>pixels</code>. You just need to know how many pixels there are."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1487801250, "post_id": 42399486, "comment_id": 71953394, "body": "Well, now you have allocated enough memory to store (contiguosly) a <code>struct ppm</code> and 100 <i>pointers</i> to <code>struct colour</code>. You still have to assign a value to the <code>ppm-&gt;pixels</code> pointer and above all allocate memory for all those <code>struct colour</code>s. I think that storing an array of colours, as Jonathan Leffer suggested, may be better."}, {"owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "edited": false, "score": 1, "creation_date": 1487802165, "post_id": 42399486, "comment_id": 71953812, "body": "The way <code>pixels</code> is declared (as <code>colour *pixels[]</code>), you can use it directly after doing the <code>malloc</code>. No separate operation necessary to set <code>pixels</code> to something. I agree that having it be an array of <code>colour</code> makes more sense than having it be an array of pointers."}], "tags": [], "owner": {"reputation": 5916, "user_id": 3068258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ecfa82e529a576cbc6ef661b9c9815?s=128&d=identicon&r=PG", "display_name": "Andy Schweig", "link": "https://stackoverflow.com/users/3068258/andy-schweig"}, "is_accepted": false, "score": 1, "last_activity_date": 1487788136, "creation_date": 1487788136, "answer_id": 42399486, "question_id": 42397209, "link": "https://stackoverflow.com/questions/42397209/getting-memory-addresses-from-array-for-only-some-values-in-c/42399486#42399486", "title": "Getting memory addresses from array for only some values in C", "body": "<p>The declaration <code>colour * pixels[]</code> does not actually reserve any space for that array. When you put something like this at the end of a structure, you need to allocate space for the array beyond the size of the structure itself to hold the elements of the array. For example, if you have 100 pixels, your allocation should look like this:</p>\n\n<pre><code>ppm *my_ppm = malloc(sizeof(ppm) + 100*sizeof(colour *));\n</code></pre>\n\n<p>If you don't know the number of pixels beforehand, you can allocate space for an initial amount and then <code>realloc</code> if you need more space.</p>\n"}], "owner": {"reputation": 25, "user_id": 2930356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15df5422fef37788880f88f71fd16577?s=128&d=identicon&r=PG&f=1", "display_name": "user2930356", "link": "https://stackoverflow.com/users/2930356/user2930356"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487788136, "creation_date": 1487781270, "question_id": 42397209, "link": "https://stackoverflow.com/questions/42397209/getting-memory-addresses-from-array-for-only-some-values-in-c", "title": "Getting memory addresses from array for only some values in C", "body": "<p>I hate to dump code like I'm about to, but this has really baffled me.\nI am making a program to read PPM image files, which are files with a format, a comment, a width and height, and a maximum colour value.</p>\n\n<p>Then after that there is a sequence of RGB values seperated by spaces, I have created a struct to hold three ints to represent an RGB colour, and a struct to hold all of the info about the PPM file and the array of pixels, which is an array of colour pointers.</p>\n\n<pre><code>typedef struct colour {\n    int r,g,b;\n} colour;\n\ntypedef struct ppm {\n    char * format;\n    int width, height, max;\n    colour * pixels[];\n} ppm;\n</code></pre>\n\n<p>And an initialiser to create a new colour triple:</p>\n\n<pre><code>colour * new_colour(int r, int g, int b) {\n    colour * c = (colour *)malloc(sizeof(colour));\n    c-&gt;r = r;\n    c-&gt;g = g;\n    c-&gt;b = b;\n    return c;\n}\n</code></pre>\n\n<p>I then have a method that reads a PPM file to create a ppm struct:</p>\n\n<pre><code>ppm * get_ppm(FILE * ppm_file){\n    ppm * my_ppm = malloc(sizeof(ppm));\n    char format[20];\n    char comment[100];\n    int n, m, max;\n\n    fgets(format, 10, ppm_file);\n    fgets(comment, 100, ppm_file);\n\n    char dimension_line[100];\n    fgets(dimension_line, 100, ppm_file);\n    sscanf(dimension_line,\"%d %d\", &amp;n, &amp;m);\n\n    char max_line[20];\n    fgets(max_line, 20, ppm_file);\n    sscanf(max_line, \"%d\", &amp;max);\n\n    int i;  \n    for (i = 0; i&lt;=(m*n - 1); i++) {\n        my_ppm-&gt;pixels[i] = malloc(sizeof(colour));\n        int r, g, b;\n        fscanf(ppm_file,\"%d %d %d \",&amp;r,&amp;g,&amp;b);\n        my_ppm-&gt;pixels[i] = new_colour(r,g,b);\n    }\n\n    my_ppm-&gt;format = format;\n    my_ppm-&gt;width = n;\n    my_ppm-&gt;height = m;\n    my_ppm-&gt;max = max;\n    return my_ppm;\n} \n</code></pre>\n\n<p>And then I have a method to print my ppm file:</p>\n\n<pre><code>void show_ppm(ppm * image) {\n    printf(\"Format: %s\\nW:%d H:%d\\nMAX:%d\\n\\n\", image-&gt;format, \n                                                image-&gt;width, image-&gt; height,\n                                                image-&gt;max);\n    int i;\n    for (i = 0; i&lt;=(image-&gt;height)*(image-&gt;width) - 1; i++) { \n        int r = image-&gt;pixels[i]-&gt;r;\n        int g = image-&gt;pixels[i]-&gt;g;\n        int b = image-&gt;pixels[i]-&gt;b;\n        printf(\"p[%d]: (%d,%d,%d)\\n\",i,r,g,b);\n    }\n}\n</code></pre>\n\n<p>The image I'm using is this:</p>\n\n<pre><code>P3\n# feep.ppma\n4 4\n15\n 0  0  0  0  0  0    0  0  0   15  0 15\n 0  0  0  0 15  7    0  0  0    0  0  0\n 0  0  0  0  0  0    0 15  7    0  0  0\n15  0 15  0  0  0    0  0  0    0  0  0\n</code></pre>\n\n<p>It reads in perfectly fine, I've done some printf debugging and it's always the right values, even when I save the values in the struct it's fine, but when I run show_ppm, I get what I assume are memory addresses for the first two values?</p>\n\n<pre><code>p[0]: (26928080,0,26928144)\np[1]: (26928592,0,26928656)\np[2]: (0,0,0)\np[3]: (15,0,15)\np[4]: (0,0,0)\np[5]: (0,15,7)\np[6]: (0,0,0)\np[7]: (0,0,0)\np[8]: (0,0,0)\np[9]: (0,0,0)\np[10]: (0,15,7)\np[11]: (0,0,0)\np[12]: (15,0,15)\np[13]: (0,0,0)\np[14]: (0,0,0)\np[15]: (0,0,0)\n</code></pre>\n\n<p>However everything else is fine? I've got no clue what I'm doing wrong here, pls help me</p>\n\n<p>If you want to look at the entire file here it is:\n<a href=\"http://pastebin.com/1FrMBYAS\" rel=\"nofollow noreferrer\">http://pastebin.com/1FrMBYAS</a></p>\n\n<p>Thanks in advance, Ciaran</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1487780511, "post_id": 42396686, "comment_id": 71940937, "body": "@WeatherVane: It is not."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487780528, "post_id": 42396686, "comment_id": 71940948, "body": "Oh I see (@haccks answer) - I had already tried it as a function prototype before commenting above - but my C does not implement the optional VLA (not that it even did before it became optional). So it remains a syntax error, for me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487780610, "post_id": 42396686, "comment_id": 71940999, "body": "@WeatherVane: Let me guess ... MSVC - still not up to move forward to modern C ;-) ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487780643, "post_id": 42396686, "comment_id": 71941020, "body": "@Olaf the VLA is optional, do get up to speed."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1487781101, "post_id": 42396686, "comment_id": 71941362, "body": "@WeatherVane, it is only optional for compilers that implement the C11 standard."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1487781205, "post_id": 42396686, "comment_id": 71941441, "body": "@JensGusted isn&#39;t the latest standard <i>the</i> standard?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487781403, "post_id": 42396686, "comment_id": 71941577, "body": "Yes, of course C11 is presently <i>the</i> standard, so yes, VLA support <i>is</i> an optional feature, even though it was a required feature of conforming C99 implementations."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1487781668, "post_id": 42396686, "comment_id": 71941739, "body": "@WeatherVane, sure it is. But for those compilers that are conforming to C11 but don&#39;t implement VLA (I don&#39;t know of any) it is not a syntax error, but a constraint violation.And if you look at a compiler that is not conforming to any C standard, it makes no sense to say that it is optional accodring to that standard."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487782865, "post_id": 42396686, "comment_id": 71942573, "body": "@WeatherVane: Modern compilers support C99 <b>and</b> C11. I&#39;m not aware of any such compiler which does not support VLAs in C11, but in C99 mode. Even MISRA has advanced and requires C99 since the latest release. For the rest: see Jens Gustedt&#39;s comment. Making VLAs optional was completely against the normal practice of backwards-compatibility the committee otherwise follows even if it is nonsense."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487785057, "post_id": 42396686, "comment_id": 71944053, "body": "@Olaf I agree it is nonsense. Although the reasons for it are most likely different, in the case of <code>gets</code> MSVC issues a warning and the library header no longer contains the function prototype: however it compiles and links, for that backward compatibility. My original comment was an oversight about the VLA, however I left it in."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487785420, "post_id": 42396686, "comment_id": 71944295, "body": "@WeatherVane: Just call me an optimist: If nudged enough, I hope one day you will use a modern compiler :-) WRT VLAs: honi soit qui mal y pense."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487800580, "post_id": 42396686, "comment_id": 71953076, "body": "@Olaf there is massive plagiarism &quot;on the internet&quot; for the old French <i>honi soit qui mal y pense</i> to mean &quot;shame on those who think badly of it&quot;. But as it is the motto of the chivalric Order of the Garter, my preferred version is &quot;Let us honour those who think badly of it&quot; and to me that makes far more sense for those with a chivalric outlook."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487804974, "post_id": 42396686, "comment_id": 71954884, "body": "@WeatherVane: AFAIK it normally is used with a sarcastic connotation, tongue in cheek (I know it also is a motto of the order, but that&#39;s obviously not the intended use here). I meant the original french semantics, see <a href=\"https://en.wikipedia.org/wiki/Honi_soit_qui_mal_y_pense\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Honi_soit_qui_mal_y_pense</a> (2nd paragraph).  Sorry, if that is not the common interpretation in English as I assumed."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487813175, "post_id": 42396686, "comment_id": 71957611, "body": "@Olaf the &quot;common interpretation&quot; in English would probably be &quot;you what?&quot;"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487814321, "post_id": 42396686, "comment_id": 71957979, "body": "@WeatherVane: This phrase is not uncommon in German and we are not well known for our French language skills either:-) But agreed, it is not what I asumed from a grocery shop employee. Nevertheless, considering it originates from an English king and is the motto of an english order, I&#39;d assume it can well be seen as part of the English language, much as &quot;ad hominem&quot; arguments. Anyway, google is our friend and extending our horizon is always a good thing, isn&#39;t it?"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 12, "last_activity_date": 1487782210, "last_edit_date": 1592644375, "creation_date": 1487780197, "answer_id": 42396803, "question_id": 42396686, "link": "https://stackoverflow.com/questions/42396686/meaning-of-asterisk-as-index-of-array-in-function-parameter/42396803#42396803", "title": "Meaning of asterisk as index of array in function parameter?", "body": "<p><code>*</code> is used inside <code>[]</code> only to declare function prototypes. Its a valid syntax. It's useful when you omit parameters name from the prototype like example below</p>\n<pre><code>int function(int, int [*]);\n</code></pre>\n<p>It tells the compiler that second parameter is a VLA and depends on the value of the first parameter. In the above example it's not worth of doing this. Take a look at a more useful example</p>\n<pre><code>int function(int, int [][*]); \n</code></pre>\n<p>This can't be possible to use VLA as a parameter in a function prototype, having unnamed parameters, without using <code>*</code> inside <code>[]</code>.</p>\n<h3>6.7.6 Declarators</h3>\n<p>Syntax</p>\n<pre> 1 declarator:\n        [...]\n        direct-declarator [ type-qualifier-list static assignment-expression ]\n        direct-declarator [ type-qualifier-list<sub>opt</sub> * ]\n        direct-declarator ( parameter-type-list )\n        direct-declarator ( identifier-list<sub>opt</sub> )\n</pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 6, "last_activity_date": 1487782784, "last_edit_date": 1487782784, "creation_date": 1487780516, "answer_id": 42396941, "question_id": 42396686, "link": "https://stackoverflow.com/questions/42396686/meaning-of-asterisk-as-index-of-array-in-function-parameter/42396941#42396941", "title": "Meaning of asterisk as index of array in function parameter?", "body": "<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.6.2p1\" rel=\"nofollow noreferrer\">Paragraph 6.7.6.2/1</a> of the standard specifies that in an array-like declaration:</p>\n\n<blockquote>\n  <p>In addition to optional type qualifiers and the keyword static, the [ and ] may delimit an expression <strong>or *</strong>.</p>\n</blockquote>\n\n<p>(emphasis added). <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.6.2p4\" rel=\"nofollow noreferrer\">Paragraph 4</a> of the same section explains:</p>\n\n<blockquote>\n  <p>If the size is * instead of being an expression, the array type is a variable length array type of unspecified size, which can only be used in declarations or type names with function prototype scope</p>\n</blockquote>\n\n<p><em>Provided that your implementation supports VLAs</em>, that's what you have.  The function is declared to accept an argument that is a (pointer to the first element of) a variable-length array of unspecified length.</p>\n\n<p>As @WeatherVane observes in comments, however, C2011 makes VLA support optional (whereas it was mandatory in C99).  For an implementation that does not support VLAs, the code is syntactically incorrect.</p>\n\n<p>You can check for VLA support via the preprocessor, somewhat:</p>\n\n<pre><code>#if __STDC__\n#if __STDC_VERSION__ == 199901L || ( __STDC_VERSION__ &gt;= 201112L &amp;&amp; ! __STDC_NO_VLA__ )\n// VLAs are supported (or the implementation is non-conforming)\n#else\n// VLAs are not supported\n// (unless the implementation provides VLAs as an extension, which could,\n// under some circumstances, make it non-conforming)\n#endif\n#else\n// a C89 or non-conforming implementation; no standard way to check VLA support\n#endif\n</code></pre>\n"}], "owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 3, "closed_date": 1487783867, "accepted_answer_id": 42396803, "answer_count": 2, "score": 9, "last_activity_date": 1487783694, "creation_date": 1487779900, "last_edit_date": 1487783694, "question_id": 42396686, "link": "https://stackoverflow.com/questions/42396686/meaning-of-asterisk-as-index-of-array-in-function-parameter", "closed_reason": "Duplicate", "title": "Meaning of asterisk as index of array in function parameter?", "body": "<p>What is the meaning of <code>*</code> in function parameter when it is in the index of array in C?</p>\n\n<pre><code>int function(int a[*])\n</code></pre>\n"}, {"tags": ["c", "eclipse", "eclipse-cdt"], "answers": [{"comments": [{"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1487798838, "post_id": 42402476, "comment_id": 71952193, "body": "I added a <a href=\"https://github.com/HankB/STM32F7explore/pull/1\" rel=\"nofollow noreferrer\">Pull Request</a> to show the changes in code."}], "tags": [], "owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "is_accepted": true, "score": 1, "last_activity_date": 1487798367, "creation_date": 1487798367, "answer_id": 42402476, "question_id": 42396521, "link": "https://stackoverflow.com/questions/42396521/eclipse-neon-2-ignoring-a-source-file/42402476#42402476", "title": "Eclipse/Neon.2 ignoring a source file", "body": "<p>What is going on here is the <code>Log</code> (or its parent <code>Utilities</code>) directory is not part of the source of your project, but rather extra files in the project that are excluded. </p>\n\n<p>There are some visual clues in the project explorer. Compare the two boxes in red below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BTrwG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BTrwG.png\" alt=\"Src vs Log\"></a></p>\n\n<p>As you can see the <code>Src</code> and <code>dma2d.c</code> files use different icons than <code>Log</code> and <code>lcd_log.c</code>.</p>\n\n<p>You can re-enable the folder, or individual files, by right-clicking -> <em>Resource Configurations</em> -> <em>Exclude From Build...</em> and unchecking <em>Debug</em> and <em>Release</em> in the pop-up that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0Q8d3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Q8d3.png\" alt=\"exclude from build pop-up\"></a></p>\n\n<p>You can also control what is included by selecting project properties -> <em>C/C++ General</em> -> <em>Paths and Symbols</em> -> <em>Source Locations</em> tab. </p>\n\n<p>What I would recommend is that rather than having Drivers, Inc, etc be explicitly included, that you include all files in your project starting at the root. To do that, select all the existing entries in <em>Source Locations</em> and press <em>Delete</em>. You should then have just one automatically re-created entry <code>/STM32F7Explore</code>, like this: (Remember to do the same change to both Debug and Release)</p>\n\n<p><a href=\"https://i.stack.imgur.com/GqPCA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GqPCA.png\" alt=\"cleaned-up source configuration\"></a></p>\n\n<p>Then, if you actually do want to exclude files/folders, repeat the above steps with Resource Configurations. CDT will be be quite helpful here, if you have individual files/folders under a source directory excluded from the build you will get yet another icon. Here I have excluded a single C file (log_lcd.c) and the Fonts directory:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tcq5U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tcq5U.png\" alt=\"exclude the other way\"></a></p>\n\n<p>Some of the specific help for Eclipse CDT that relates to the above:</p>\n\n<ul>\n<li>Icon overlays appear at the bottom of the <a href=\"http://help.eclipse.org/neon/topic/org.eclipse.cdt.doc.user/reference/cdt_u_cproj_view.htm?cp=8_4_0_1\" rel=\"nofollow noreferrer\">C/C++ Projects View help</a></li>\n<li><a href=\"http://help.eclipse.org/neon/topic/org.eclipse.cdt.doc.user/reference/cdt_u_prop_general_pns_src.htm?cp=8_4_7_0_4_5_4\" rel=\"nofollow noreferrer\">Source locations tab help</a></li>\n</ul>\n"}], "owner": {"reputation": 232, "user_id": 79178, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b12de015ea506efbd7e9660fbce61f3?s=128&d=identicon&r=PG", "display_name": "HankB", "link": "https://stackoverflow.com/users/79178/hankb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42402476, "answer_count": 1, "score": 0, "last_activity_date": 1487798367, "creation_date": 1487779425, "question_id": 42396521, "link": "https://stackoverflow.com/questions/42396521/eclipse-neon-2-ignoring-a-source-file", "title": "Eclipse/Neon.2 ignoring a source file", "body": "<p>I'm working with a CDT project in Eclipse/Neon.2 which cross compiles for an embedded target. I've added a bunch of .c files to the project and they are automatically included in the build except for (seemingly) one. In the project directory it is \n<code>STM32F7explore/Utilities/Log/lcd_log.c</code> where <code>STM32F7explore</code> is the Eclipse project directory. If I try to build it manually, the Console window shows:</p>\n\n<pre><code>09:45:52 **** Building Selected Files of configuration Debug for project STM32F7explore ****\nInfo: Internal Builder is used for build\n\n09:45:52 Build Finished (took 1ms)\n</code></pre>\n\n<p>For files that are included, the Console shows e.g.</p>\n\n<pre><code>09:54:50 **** Building Selected Files of configuration Debug for project STM32F7explore ****\nInfo: Internal Builder is used for build\narm-none-eabi-gcc -mcpu=cortex-m7 -mthumb -mfloat-abi=hard -mfpu=fpv5-sp-d16 -D__weak=__attribute__((weak)) -D__packed=__attribute__((__packed__)) -DUSE_HAL_DRIVER -DSTM32F746xx -DLWIP_TIMEVAL_PRIVATE=0 -I../Inc -I../Drivers/STM32F7xx_HAL_Driver/Inc -I../Drivers/STM32F7xx_HAL_Driver/Inc/Legacy -I../Drivers/CMSIS/Device/ST/STM32F7xx/Include -I../Drivers/CMSIS/Include -I../Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM7/r0p1 -I../Middlewares/Third_Party/FreeRTOS/Source/include -I../Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS -I../Middlewares/Third_Party/LwIP/src/include -I../Middlewares/Third_Party/LwIP/system -I../Middlewares/Third_Party/LwIP/src/include/lwip -I../Middlewares/Third_Party/LwIP/src/include/lwip/apps -I../Middlewares/Third_Party/LwIP/src/include/lwip/priv -I../Middlewares/Third_Party/LwIP/src/include/lwip/prot -I../Middlewares/Third_Party/LwIP/src/include/netif -I../Middlewares/Third_Party/LwIP/src/include/netif/ppp -I../Middlewares/Third_Party/LwIP/src/include/netif/ppp/polarssl -I../Middlewares/Third_Party/LwIP/src/include/posix -I../Middlewares/Third_Party/LwIP/src/include/posix/sys -I../Middlewares/Third_Party/LwIP/system/arch -I../Drivers/BSP/STM32746G_Discovery -I../Utilities/Log -O0 -g3 -Wall -fmessage-length=0 -ffunction-sections -c -fmessage-length=0 -o Src/main.o ../Src/main.c \n\n09:54:51 Build Finished (took 224ms)\n</code></pre>\n\n<p>I'm baffled by why Eclipse doesn't add the lcd_log.c file to the build. I've looked at the file properties popup and they look the same for both (and in particular, Eclipse does recognize lcd_log.c as <code>File  (C Source File)</code></p>\n\n<p>I've deleted <code>.metadata/.plugins/org.eclipse.core.runtime/.settings</code> from the workspace and <code>.settings</code> from the project to force Eclipse to regenerate these and that did not fix the problem.</p>\n\n<p>The project is on Github (<a href=\"https://github.com/HankB/STM32F7explore\" rel=\"nofollow noreferrer\">https://github.com/HankB/STM32F7explore</a>) but the requirements to build are a bit steep unless you happen to be developing for ST embedded processors.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "glib"], "answers": [{"comments": [{"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1487835681, "post_id": 42409625, "comment_id": 71965609, "body": "I have edited my answer. Please have a look at the edited section"}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1487835788, "post_id": 42409625, "comment_id": 71965675, "body": "&quot;The reason your second code works is that you overwritten the global variable loop with the loop from the default main context, which has your source attached.&quot; - My second version don&#39;t overwrite the global loop variable. I have commented out init() function call in my main() function."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1487836913, "post_id": 42409625, "comment_id": 71966280, "body": "Thanks for your answer. I have already passing GMainContext of the main thread to newly created thread. In the newly created thread, i am creating the main loop using GMainContext of the main thread. I am adding sources to the global GMainContext so that newly thread will dispatch them in case of events. Am i missing something? Can you include any code with your answer?"}, {"owner": {"reputation": 3439, "user_id": 640650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52033010f0d68daf062ecfe801d98693?s=128&d=identicon&r=PG", "display_name": "Yasushi Shoji", "link": "https://stackoverflow.com/users/640650/yasushi-shoji"}, "reply_to_user": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 1, "creation_date": 1487845383, "post_id": 42409625, "comment_id": 71971621, "body": "Did it work? I&#39;d call <code>g_main_context_default()</code> in <code>event_loop_thread()</code> but ..."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 0, "creation_date": 1487845555, "post_id": 42409625, "comment_id": 71971757, "body": "Yes it is working. But if i try to add a source via g_io_add_watch() second time, then it&#39;s callback is not being called. Can you explain it?"}], "tags": [], "owner": {"reputation": 3439, "user_id": 640650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/52033010f0d68daf062ecfe801d98693?s=128&d=identicon&r=PG", "display_name": "Yasushi Shoji", "link": "https://stackoverflow.com/users/640650/yasushi-shoji"}, "is_accepted": true, "score": 3, "last_activity_date": 1487835927, "last_edit_date": 1487835927, "creation_date": 1487835305, "answer_id": 42409625, "question_id": 42395844, "link": "https://stackoverflow.com/questions/42395844/glib-gmaincontext-in-a-thread/42409625#42409625", "title": "GLib GMainContext in a thread?", "body": "<p>You need to use <code>GMainContext</code> if you want to run a main loop from a thread.  From the Glib's <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#glib-The-Main-Event-Loop.description\" rel=\"nofollow noreferrer\">main loop documentation</a>:</p>\n\n<blockquote>\n  <p>To allow multiple independent sets of sources to be handled in\n  different threads, each source is associated with a GMainContext. A\n  GMainContext can only be running in a single thread, but sources can\n  be added to it and removed from it from other threads.</p>\n</blockquote>\n\n<p>When you create a main loop with <code>g_main_loop_new(NULL, FALSE);</code>, while it's  handy to <em>not</em> specify any GMainContext, you need to pass a GMainContext from which you want your loop if you want to run the loop in a different thread.  You can create a <code>GMainContext</code> with <code>g_main_context_new()</code> and pass it to <code>g_main_loop_new()</code>, or use <code>g_main_context_get_thread_default()</code> to get the default main context for the running thread.</p>\n\n<p><a href=\"https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-add-watch\" rel=\"nofollow noreferrer\"><code>g_io_add_watch()</code></a> is yet another handy version of the function, which</p>\n\n<blockquote>\n  <p>Adds the GIOChannel into the default main loop context with the\n  default priority.</p>\n</blockquote>\n\n<p>Unfortunately, there is no <code>g_io_add_watch()</code> variant function to specify a main context, you have to manually create a <code>GSource</code> from your <code>GIOChannel</code>, <code>p_hci_io</code>, and attach to your context via <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-source-attach\" rel=\"nofollow noreferrer\"><code>g_source_attach()</code></a>.  Note that <a href=\"https://developer.gnome.org/glib/stable/glib-IO-Channels.html#g-io-add-watch-full\" rel=\"nofollow noreferrer\"><code>g_io_add_watch_full()</code></a> also works with the default main context.</p>\n\n<p>The reason your second code works is that you created your main loop in the main thread which has your source attached.</p>\n"}], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3460, "favorite_count": 1, "accepted_answer_id": 42409625, "answer_count": 1, "score": 2, "last_activity_date": 1487835927, "creation_date": 1487777729, "last_edit_date": 1487835656, "question_id": 42395844, "link": "https://stackoverflow.com/questions/42395844/glib-gmaincontext-in-a-thread", "title": "GLib GMainContext in a thread?", "body": "<p>I have searched on stack overflow to find answer relevant to my problem. But i didn't find any answer. </p>\n\n<p>I have a main thread (my main() function) which starts a thread. The new thread runs GMainLoop. In my main function, i keep adding sources by calling <code>g_io_watch</code> over some file descriptors. But i have getting garbage data if events are dispatched.</p>\n\n<p>Below is a small part of the code that i am trying:</p>\n\n<pre><code>GMainLoop *loop;\n\ngpointer event_loop_thread(gpointer arg)\n{   \n    g_main_loop_run(loop);\n    g_main_loop_unref(loop);\n    return NULL;\n}\n\nint init()\n{\n    loop = g_main_loop_new(NULL, FALSE);\n    g_thread_new(NULL, event_loop_thread, NULL);\n    return 0;\n}\n\ngboolean __hci_service(GIOChannel *source, GIOCondition condition, gpointer data)\n{\n    // Doing something\n    return FALSE;\n}\n\nint main()\n{\n    init();\n    int _adapter_id = hci_devid(\"hci0\");\n    int hci_dev = hci_open_dev(_adapter_id);\n    GIOChannel *p_hci_io = g_io_channel_unix_new(dev_id);\n\n    GIOCondition cond = (GIOCondition)(G_IO_IN);\n    g_io_add_watch(p_hci_io, cond, __hci_service, NULL);\n\n    while (true);\n    // I will close file descriptor\n    return 0;\n\n}\n</code></pre>\n\n<p>However, if i try this code, then everything works as expected:</p>\n\n<pre><code>GMainLoop *loop;\n\ngpointer event_loop_thread(gpointer arg)\n{   \n    g_main_loop_run(loop);\n    g_main_loop_unref(loop);\n    return NULL;\n}\n\nint init()\n{\n    loop = g_main_loop_new(NULL, FALSE);\n    g_thread_new(NULL, event_loop_thread, NULL);\n    return 0;\n}\n\ngboolean __hci_service(GIOChannel *source, GIOCondition condition, gpointer data)\n{\n    // Doing something\n    return FALSE;\n}\n\nint main()\n{\n    // init();\n    int _adapter_id = hci_devid(\"hci0\");\n    int hci_dev = hci_open_dev(_adapter_id);\n    GIOChannel *p_hci_io = g_io_channel_unix_new(dev_id);\n\n    GIOCondition cond = (GIOCondition)(G_IO_IN);\n    g_io_add_watch(p_hci_io, cond, __hci_service, NULL);\n\n    loop = g_main_loop_new(NULL, FALSE);\n    g_main_loop_run(loop);\n    g_main_loop_unref(loop);\n\n    while (true);\n    // I will close file descriptor\n    return 0;\n\n} \n</code></pre>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>I have tried passing the default GMainContext of the main thread to the newly created thread. Have a look. Tell me if my approach is correct.</p>\n\n<pre><code>GMainLoop *loop;\n\ngpointer event_loop_thread(gpointer arg)\n{   \n    GMainContext *context = (GMainContext *)arg;\n    loop = g_main_loop_new(context, FALSE);\n    g_main_context_push_thread_default(context);\n    g_main_loop_run(loop);\n    g_main_loop_unref(loop);\n    return NULL;\n}\n\nint init()\n{\n\n    g_thread_new(NULL, event_loop_thread, (gpointer)g_main_context_default());\n    return 0;\n}\n\ngboolean __hci_service(GIOChannel *source, GIOCondition condition, gpointer data)\n{\n    // Doing something\n    return FALSE;\n}\n\nint main()\n{\n    init();\n    int _adapter_id = hci_devid(\"hci0\");\n    int hci_dev = hci_open_dev(_adapter_id);\n    GIOChannel *p_hci_io = g_io_channel_unix_new(dev_id);\n\n    GIOCondition cond = (GIOCondition)(G_IO_IN);\n    g_io_add_watch(p_hci_io, cond, __hci_service, NULL);\n\n    //loop = g_main_loop_new(NULL, FALSE);\n    //g_main_loop_run(loop);\n    //g_main_loop_unref(loop);\n\n    while (true);\n    // I will close file descriptor\n    return 0;\n\n} \n</code></pre>\n"}, {"tags": ["c", "for-loop", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1487779109, "post_id": 42395568, "comment_id": 71939858, "body": "If you know what a race condition is, why do you provoke it there. You even say that some variables get split between the threads and comparison is obviously not one of them, it is the same for all threads."}], "answers": [{"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1487782706, "post_id": 42396319, "comment_id": 71942455, "body": "If you modify a value afaik it always is read first then calculated and then written. There are atomic operations that finish their task in a way that it is guaranteed they have no race conditions but these are generally explicitly described as such."}], "tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": true, "score": 2, "last_activity_date": 1487783903, "last_edit_date": 1487783903, "creation_date": 1487778939, "answer_id": 42396319, "question_id": 42395568, "link": "https://stackoverflow.com/questions/42395568/openmp-why-does-the-number-of-comparisons-decrease/42396319#42396319", "title": "OpenMP - Why does the number of comparisons decrease?", "body": "<p>You said it yourself <code>(*comparisons)++;</code> has a race condition. It is a critical section that has to be serialized (I don't think (*pointer)++ is an atomic operation).</p>\n\n<p>So basically you read the same value( i.e. 2) twice by two threads and then both increase it (3) and write it back. So you get 3 instead of 4. You have to make sure the operations on variables, that are not in the local scope of your parallelized function/loop, don't overlap.</p>\n"}, {"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 4, "last_activity_date": 1487788033, "last_edit_date": 1487788033, "creation_date": 1487785930, "answer_id": 42398834, "question_id": 42395568, "link": "https://stackoverflow.com/questions/42395568/openmp-why-does-the-number-of-comparisons-decrease/42398834#42398834", "title": "OpenMP - Why does the number of comparisons decrease?", "body": "<p>The naive way around the race condition to declare the operation as <code>atomic update</code>:</p>\n\n<pre><code>#pragma omp atomic update\n(*comparisons)++;\n</code></pre>\n\n<p>Note that a critical section here is unnecessary and much more expensive. An <code>atomic update</code> can be declared on a primitive binary or unary operation on any l-value expression with scalar type.</p>\n\n<p>Yet this is still not optimal because the value of <code>*comparisons</code> needs to be moved around between CPU caches all the time and a expensive locked instruction is performed. Instead you should use a reduction. For that you need another local variable, the pointer won't work here.</p>\n\n<pre><code>int hostMatch(long *comparisons)\n{\n    int i = -1;\n    int lastI = textLength-patternLength;\n    long comparisons_tmp = 0;\n\n    #pragma omp parallel for reduction(comparisons_tmp:+)\n    for (int k = 0; k &lt;= lastI; k++)\n    {\n        int j;\n        for (j = 0; j &lt; patternLength; j++)\n        {\n            comparisons_tmp++;\n            if (textData[k+j] != patternData[j])\n            {\n                j = patternLength+1; //break    \n            }\n        }\n        if (j == patternLength &amp;&amp; k &gt; i)\n            i = k;\n    }\n\n    *comparisons = comparisons_tmp;\n\n    return i;\n}\n</code></pre>\n\n<p>P.S. <code>schedule(static, 1)</code> seems like a bad idea, since this will lead to inefficient memory access patterns on <code>textData</code>. Just leave it out and let the compiler do it's thing. If a measurement shows that it's not working efficiently, give it some better hints.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4081625"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 42396319, "answer_count": 2, "score": 1, "last_activity_date": 1487788033, "creation_date": 1487777009, "last_edit_date": 1487778617, "question_id": 42395568, "link": "https://stackoverflow.com/questions/42395568/openmp-why-does-the-number-of-comparisons-decrease", "title": "OpenMP - Why does the number of comparisons decrease?", "body": "<p>I have the following algorithm:</p>\n\n<pre><code>int hostMatch(long *comparisons)\n{\n    int i = -1;\n    int lastI = textLength-patternLength;\n    *comparisons=0;\n\n    #pragma omp parallel for schedule(static, 1) num_threads(1)\n    for (int k = 0; k &lt;= lastI; k++)\n    {\n        int j;\n        for (j = 0; j &lt; patternLength; j++)\n        {\n            (*comparisons)++;\n            if (textData[k+j] != patternData[j])\n            {\n                j = patternLength+1; //break    \n            }\n        }\n        if (j == patternLength &amp;&amp; k &gt; i)\n            i = k;\n    }\n\n    return i;\n}\n</code></pre>\n\n<p>When changing <code>num_threads</code> I get the following results for number of comparisons:</p>\n\n<ul>\n<li>01 = 9949051000\n<li>02 = 4992868032\n<li>04 = 2504446034\n<li>08 = 1268943748\n<li>16 = 776868269\n<li>32 = 449834474\n<li>64 = 258963324\n</ul>\n\n<p>Why is the number of comparisons not constant? It's interesting because the number of comparisons halves with the doubling of the number of threads. Is there some sort of race conditions going on for <code>(*comparisons)++</code> where OMP just skips the increment if the variable is in use? </p>\n\n<p>My current understanding is that the iterations of the <strong>k</strong> loop are split near-evenly amongst the threads. Each iteration has a private integer <strong>j</strong> as well as a private copy of integer <strong>k</strong>, and a non-parallel for loop which adds to the comparisons until terminated.</p>\n"}, {"tags": ["c", "gcc", "makefile", "gnu", "ld"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487779734, "post_id": 42395212, "comment_id": 71940354, "body": "Um, by specifying a usable path to the object to link?  How <i>else</i> would you do it?  But any way around, it&#39;s generally best to use <code>gcc</code> as the linker driver instead of invoking the linker directly: <code>gcc -o my_program ~&#47;some_dir&#47;main.o</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1487780041, "post_id": 42395212, "comment_id": 71940613, "body": "Also, rather than using paths tied to the current user&#39;s home directory (<code>~&#47;some_dir</code>) it would be much wiser to put built files in locations relative to the working directory for the build, and to locate source files relative to the directory containing the Makefile."}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1487783006, "creation_date": 1487783006, "answer_id": 42397861, "question_id": 42395212, "link": "https://stackoverflow.com/questions/42395212/how-to-link-objects-from-different-directory-running-ld/42397861#42397861", "title": "How to link objects from different directory (running ld)", "body": "<p>You're makings things far more complicated than they need to be and should let <code>make</code> do more of the work for you. Below is your simple example re-written</p>\n\n<pre><code>SRCS=main.c\nBUILDDIR=~/somedir\nOBJS=$(SRCS:%.c=$(BUILDDIR)/%.o)\nCFLAGS=-g\n\nall: my_program\n\nmy_program: $(OBJS)\n        $(CC) $(CFLAGS) -o $@ $^\n\n$(BUILDDIR)/%.o: %.c\n        $(CC) $(CFLAGS) -c -o $@ $^\n</code></pre>\n\n<p>It defines a number of variables at the top, such as SRCS which would contain a list of your source files, the directory where you're storing the object files and generates a list of what object files you'll be building. Then it uses <code>$(OBJS)</code> to define that they are dependencies of <code>my_program</code>. The $@ in the make rule is a variable meaning \"the thing that we are building\" and $^ is the list of dependencies. You can add other dependencies to <code>my_program</code> and don't need to change the command being ran.</p>\n\n<p>Then there is a rule that defines how object files in <code>$(BUILDDIR)</code> are built from source files in the current directory.</p>\n"}], "owner": {"reputation": 83, "user_id": 1689825, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3f7d824fad79110dc9c75e421a9b974a?s=128&d=identicon&r=PG", "display_name": "Hanans", "link": "https://stackoverflow.com/users/1689825/hanans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 735, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1487783006, "creation_date": 1487776105, "question_id": 42395212, "link": "https://stackoverflow.com/questions/42395212/how-to-link-objects-from-different-directory-running-ld", "title": "How to link objects from different directory (running ld)", "body": "<p>I'm writing simple makefile project.</p>\n\n<p>I'm trying to build the program in two steps:</p>\n\n<ol>\n<li>compile source files and save object files in an different directory</li>\n<li>link the objects into an executable</li>\n</ol>\n\n<p>consider something simple like:</p>\n\n<pre><code>all:\n    gcc -o ~/some_dir/main.o -c main.c \n    ld -o my_program main.o\n</code></pre>\n\n<p>the problem is the invoke directory isn't \"~/some_dir\" so ld doesn't find the object file... how can I include \"some_dir\" in ld search path?</p>\n\n<p>In the more global perspective, I have object files in various directories and I'd like to link them all together using a single linker command file.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487774954, "post_id": 42394143, "comment_id": 71936715, "body": "That&#39;s what headers are for. Avoid <code>extern</code> declarations in an implementation file."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487775434, "post_id": 42394143, "comment_id": 71937104, "body": "Somewhat OT, but hopefully you&#39;re not relying on <code>volatile</code> to actually do anything useful for a C variable in a multithreaded program?  See <a href=\"https://software.intel.com/en-us/blogs/2007/11/30/volatile-almost-useless-for-multi-threaded-programming\" rel=\"nofollow noreferrer\">Volatile: Almost Useless for Multi-Threaded Programming</a>:  <i>...the use of volatile accomplishes nothing but to prevent the compiler from making useful and desirable optimizations, providing no help whatsoever in making code &quot;thread safe&quot;.</i>"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487777047, "post_id": 42394143, "comment_id": 71938252, "body": "@AndrewHenle It is for embedded system. I don&#39;t think that it is useless."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1487778835, "post_id": 42394231, "comment_id": 71939634, "body": "@i486 Global variables (technically variables in <i>file-scope</i>) by default have <i>external linkage</i>. Also, a declaration without an initialization is <i>tentative</i> definition, it <i>might</i> be a definition or only a declaration. Read e.g. <a href=\"http://en.cppreference.com/w/c/language/storage_duration#Linkage\" rel=\"nofollow noreferrer\">this linkage reference</a> and <a href=\"http://en.cppreference.com/w/c/language/extern\" rel=\"nofollow noreferrer\">this external and tentative definition reference</a> for more information."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 8, "last_activity_date": 1487773595, "creation_date": 1487773595, "answer_id": 42394231, "question_id": 42394143, "link": "https://stackoverflow.com/questions/42394143/define-volatile-int-variable-as-extern-int/42394231#42394231", "title": "Define volatile int variable as extern int", "body": "<p>The compiler only have knowledge of the current <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"noreferrer\"><em>translation unit</em></a> (basically the current source file with all includes), nothing else.</p>\n\n<p>If an <code>extern</code> variable is not declared using the correct type, then you will have undefined behavior.</p>\n"}], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 42394231, "answer_count": 1, "score": 1, "last_activity_date": 1487775216, "creation_date": 1487773339, "question_id": 42394143, "link": "https://stackoverflow.com/questions/42394143/define-volatile-int-variable-as-extern-int", "title": "Define volatile int variable as extern int", "body": "<p>What will happen if a variable is defined as <code>volatile int x</code> in <code>file1.c</code> and <code>extern int x</code> in  <code>file2.c</code> (instead of <code>extern volatile int x</code>)? Is there a chance for compiler to know that <code>x</code> is volatile and compile as such in <code>file2.c</code>.</p>\n"}, {"tags": ["python", "c", "module", "constants"], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487775047, "post_id": 42394165, "comment_id": 71936785, "body": "C does not support symbolic constants of arbitrary type. It is not C++. Only  enum-constants are possible, but those are always <code>int</code>. And in Python, you <i>could</i> change the setter for an object. But normally one avoids the effort and relies on the convention."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487775331, "post_id": 42394165, "comment_id": 71937018, "body": "@Olaf - True, but in this case the OP is trying to prevent a reference from rebinding, which isn&#39;t possible in Python at all. And since Python integers are all immutable objects, <code>__setattr__</code> is immaterial."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487775496, "post_id": 42394165, "comment_id": 71937144, "body": "Yes, that would require a &quot;normal&quot; class with all the overhead involved. That&#39;s why I agree about relying on the convention (if that was not clear from my comment)."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1487793432, "post_id": 42394165, "comment_id": 71949096, "body": "It is indeed possible, if the module is replaced with an instance of custom class, but yeah, I wouldn&#39;t do it either. Also, <code>import math; math.PI = 3</code>"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1487830918, "last_edit_date": 1487830918, "creation_date": 1487773414, "answer_id": 42394165, "question_id": 42394104, "link": "https://stackoverflow.com/questions/42394104/constant-integer-attributes-in-python-module-written-in-c/42394165#42394165", "title": "Constant integer Attributes in Python Module written in C", "body": "<p>You can't define module level \"constants\" in Python as you would in C(++). The Python way is to expect everyone to behave like responsible adults. If something is in all caps with underscores (like <a href=\"https://www.python.org/dev/peps/pep-0008/#constants\" rel=\"nofollow noreferrer\">PEP 8</a> dictates), you shouldn't change it.</p>\n"}], "owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 42394165, "answer_count": 1, "score": 3, "last_activity_date": 1487830918, "creation_date": 1487773245, "question_id": 42394104, "link": "https://stackoverflow.com/questions/42394104/constant-integer-attributes-in-python-module-written-in-c", "title": "Constant integer Attributes in Python Module written in C", "body": "<p>I implemented a python extension module in C according to <a href=\"https://docs.python.org/3.3/extending/extending.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.3/extending/extending.html</a></p>\n\n<p>Now I want to have integer constants in that module, so I did:</p>\n\n<pre><code>module= PyModule_Create(&amp;myModuleDef);\n...\nPyModule_AddIntConstant(module, \"VAR1\",1);\nPyModule_AddIntConstant(module, \"VAR2\",2);\n...\nreturn module;\n</code></pre>\n\n<p>This works. But I can modify the \"constants\" from python, like</p>\n\n<pre><code>import myModule\nmyModule.VAR1 = 10\n</code></pre>\n\n<p>I tried to overload <code>__setattr__</code>, but this function is not called upon assignment.</p>\n\n<p>Is there a solution?</p>\n"}, {"tags": ["android", "c", "renderscript", "android-renderscript"], "answers": [{"tags": [], "owner": {"reputation": 1100, "user_id": 5116284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sH702.png?s=128&g=1", "display_name": "Miao Wang", "link": "https://stackoverflow.com/users/5116284/miao-wang"}, "is_accepted": true, "score": 1, "last_activity_date": 1487802574, "creation_date": 1487802574, "answer_id": 42403507, "question_id": 42393824, "link": "https://stackoverflow.com/questions/42393824/inconsistent-behavior-of-renderscript/42403507#42403507", "title": "Inconsistent behavior of Renderscript", "body": "<p>Local variable out_h, out_s, out_v are not initialized, so the behavior is undefined.</p>\n\n<pre><code>ushort out_h, out_s, out_v;\n</code></pre>\n\n<p>If you initialize them to be 0, I think the problem should be gone.</p>\n"}], "owner": {"reputation": 142, "user_id": 6762864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9929bfb2f6d50f90c92f7ff761a8d596?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Jurski", "link": "https://stackoverflow.com/users/6762864/karol-jurski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42403507, "answer_count": 1, "score": 0, "last_activity_date": 1487802574, "creation_date": 1487772566, "question_id": 42393824, "link": "https://stackoverflow.com/questions/42393824/inconsistent-behavior-of-renderscript", "title": "Inconsistent behavior of Renderscript", "body": "<p>I've written following renderscript:</p>\n\n<pre><code>ushort* curve_hth;\nushort* curve_hts;\nushort* curve_htv;\nushort* curve_sth;\nushort* curve_sts;\nushort* curve_stv;\nushort* curve_vth;\nushort* curve_vts;\nushort* curve_vtv;\n\nuchar4 RS_KERNEL transform(uchar4 in, uint32_t x, uint32_t y)\n{\n    if(!isSelected(x, y)) return in;\n\n    ushort3 in_rgb = { (ushort) in.r, (ushort) in.g, (ushort) in.b };\n    ushort3 in_hsv = rgb_to_hsv(in_rgb);\n    ushort in_h = in_hsv.r;\n    ushort in_s = in_hsv.g;\n    ushort in_v = in_hsv.b;\n    ushort out_h, out_s, out_v;\n    rsDebug(\"out1\", out_s);\n    if(curve_hth != NULL) out_h += curve_hth[in_h]; else out_h += in_h;\n    rsDebug(\"out2\", out_s);\n    if(curve_hts != NULL) out_s += curve_hts[in_h];\n    rsDebug(\"out3\", out_s);\n    if(curve_htv != NULL) out_v += curve_htv[in_h];\n    rsDebug(\"out4\", out_s);\n    if(curve_sth != NULL) out_h += curve_sth[in_s];\n    rsDebug(\"out5\", out_s);\n    if(curve_sts != NULL) out_s += curve_sts[in_s]; else out_s += in_s;\n    rsDebug(\"out6\", out_s);\n    if(curve_stv != NULL) out_v += curve_stv[in_s];\n    rsDebug(\"out7\", out_s);\n    if(curve_vth != NULL) out_h += curve_vth[in_v];\n    rsDebug(\"out8\", out_s);\n    if(curve_vts != NULL) out_s += curve_vts[in_v];\n    rsDebug(\"out9\", out_s);\n    if(curve_vtv != NULL) out_v += curve_vtv[in_v]; else out_v += in_v;\n    rsDebug(\"out10\", out_s);\n\n    out_h = min((float) out_h, (float) 360);\n    out_s = min((float) out_s, (float) 100);\n    out_v = min((float) out_v, (float) 100);\n\n    ushort3 out_hsv = { out_h, out_s, out_v };\n    ushort3 out_rgb = hsv_to_rgb(out_hsv);\n    uchar4 out = { out_rgb.r, out_rgb.g, out_rgb.b, in.a };\n    return out;\n}\n</code></pre>\n\n<p>When I run that script, I get in logcat:</p>\n\n<pre><code>D/RenderScript: out1 0  0x0\nD/RenderScript: out2 0  0x0\nD/RenderScript: out3 255  0xff\nD/RenderScript: out4 255  0xff\nD/RenderScript: out5 255  0xff\nD/RenderScript: out6 255  0xff\nD/RenderScript: out7 255  0xff\nD/RenderScript: out8 255  0xff\nD/RenderScript: out9 255  0xff\nD/RenderScript: out10 255  0xff\n</code></pre>\n\n<p>It surprised me a lot, because all the <code>curve_?t?</code> pointers should be null, I don't bind them in Java code. It was strange, so I modified the debugging part of script and I got:</p>\n\n<pre><code>if(curve_hth != NULL) out_h += curve_hth[in_h]; else out_h += in_h;\nrsDebug(\"out1\", out_s);\nrsDebug(\"out2\", curve_hts == NULL);\nif(curve_hts != NULL)\n{\n    out_s += curve_hts[in_h];\n    rsDebug(\"out3\", 1);\n}\nrsDebug(\"out4\", out_s);\nif(curve_htv != NULL) out_v += curve_htv[in_h];\nif(curve_sth != NULL) out_h += curve_sth[in_s];\nif(curve_sts != NULL) out_s += curve_sts[in_s]; else out_s += in_s;\nif(curve_stv != NULL) out_v += curve_stv[in_s];\nif(curve_vth != NULL) out_h += curve_vth[in_v];\nif(curve_vts != NULL) out_s += curve_vts[in_v];\nif(curve_vtv != NULL) out_v += curve_vtv[in_v]; else out_v += in_v;\nrsDebug(\"out5\", out_s);\n</code></pre>\n\n<p>The result in logcat was:</p>\n\n<pre><code>D/RenderScript: out1 0  0x0\nD/RenderScript: out2 1  0x1\nD/RenderScript: out4 25004  0x61ac\nD/RenderScript: out5 25004  0x61ac\n</code></pre>\n\n<p><code>out2</code> is 1, so <code>curve_hts</code> is NULL. There is no <code>out3</code> log, the <code>if</code> instruction doesn't get called, so how <code>out_s</code> changes its value?</p>\n"}, {"tags": ["c", "linux", "htonl"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 6, "creation_date": 1487772495, "post_id": 42393763, "comment_id": 71934924, "body": "Don&#39;t print the <code>uint32_t</code> as an signed integer then."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1487772757, "post_id": 42393763, "comment_id": 71935099, "body": "<i>&quot;because you can use the function in your C++ code&quot;</i> That&#39;s not a valid reason to use the <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> tag for your question."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1487773527, "post_id": 42393763, "comment_id": 71935694, "body": "Whoever told you about &quot;class A, B, C&quot; networks has knowledge so out of date that it&#39;s older than most of his students (many assumptions here, but they are probably right). CIDR replaced network classes 24 years ago."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487773290, "post_id": 42393877, "comment_id": 71935532, "body": "There is no guarantee <code>%u</code> or <code>%x</code> are correct either."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487773627, "post_id": 42393877, "comment_id": 71935772, "body": "The majority of systems does <b>not</b> have 32 bit <code>int</code>s!"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487774328, "post_id": 42393877, "comment_id": 71936286, "body": "@Olaf That is a dangerous claim and largely impossible to prove."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 2, "creation_date": 1487774517, "post_id": 42393877, "comment_id": 71936405, "body": "@tofro: Not really. Just have a look at the market-shares of 8 and 16 bit MCUs and DSPs. x86 is some decades below that. Even ARM Cortex-M has still not reached this level (other CPU architectures were never relevant here). Check your car: you most likely have more than 10 8/16 bit MCUs, but only few 32 bitters, if any."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487778945, "post_id": 42393877, "comment_id": 71939715, "body": "So you only drive oldtimers? Any car since the 1980ies has MCUs inside. Whatever reason that might be: it is nonsense. Let that apart: you know what the word &quot;example&quot; means?"}, {"owner": {"reputation": 7666, "user_id": 407071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3b59a5454c27320f956ab3b177a60e?s=128&d=identicon&r=PG", "display_name": "Eric Finn", "link": "https://stackoverflow.com/users/407071/eric-finn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487786228, "post_id": 42393877, "comment_id": 71944850, "body": "@Olaf Thanks for corrections. I&#39;ve added a recommendation to use the portable solution."}], "tags": [], "owner": {"reputation": 7666, "user_id": 407071, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e3b59a5454c27320f956ab3b177a60e?s=128&d=identicon&r=PG", "display_name": "Eric Finn", "link": "https://stackoverflow.com/users/407071/eric-finn"}, "is_accepted": false, "score": 3, "last_activity_date": 1487786172, "last_edit_date": 1487786172, "creation_date": 1487772682, "answer_id": 42393877, "question_id": 42393763, "link": "https://stackoverflow.com/questions/42393763/converting-dotted-ip-to-integer-using-htonlinet-addrip-str-return-negative-v/42393877#42393877", "title": "Converting dotted IP to integer using htonl(inet_addr(IP_str)) return negative values for IP Adresses of Class B and C", "body": "<p>The only thing wrong is your format strings. Since those are unsigned numbers, you should be using <code>%u</code> instead of <code>%d</code>, assuming <code>uint32_t</code> maps to <code>unsigned int</code> on your compiler (which it probably does unless you're targeting an 8 or 16 bit processor).</p>\n\n<p>If you want to ensure that your code is portable to systems where the <code>int</code> type is not 32 bits wide, you'll need to use the <code>PRIu32</code> macro (or another <code>PRI*32</code> macro, such as <code>PRIx32</code> for hexadecimal) <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/inttypes.h.html\" rel=\"nofollow noreferrer\">defined in <code>inttypes.h</code></a></p>\n\n<p>You use the macro in place of the format specifier like this:</p>\n\n<pre><code>printf(\"IP1: %s ------&gt; Integer: %\" PRIu32 \"\\n\",IP1,integer_ip);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487773287, "post_id": 42393895, "comment_id": 71935528, "body": "There is no guarantee <code>%u</code> or <code>%x</code> are correct either."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487842241, "post_id": 42393895, "comment_id": 71969479, "body": "There is a big chance that %u (or %x) is much more correct than %d. And, as the question is tagged Linux, there is a very high chance of being correct on non-exotic Linuxes"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487855469, "post_id": 42393895, "comment_id": 71978659, "body": "There is no guarantee <code>uint32_t</code> is an <code>unsigned int</code>. could be <code>unsigned long</code> as well on 32 bit Linux. While they would have the same representation, it still was UB according to the standard. Why not use the correct way? Feel free to state the problem the correct way would not solve."}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": false, "score": 1, "last_activity_date": 1487774371, "last_edit_date": 1487774371, "creation_date": 1487772729, "answer_id": 42393895, "question_id": 42393763, "link": "https://stackoverflow.com/questions/42393763/converting-dotted-ip-to-integer-using-htonlinet-addrip-str-return-negative-v/42393895#42393895", "title": "Converting dotted IP to integer using htonl(inet_addr(IP_str)) return negative values for IP Adresses of Class B and C", "body": "<p><code>htonl</code> returns a 32-bit <strong>unsigned</strong> integer.</p>\n\n<p>The format specifier <code>%d</code> you use to print the values is intended for <strong>signed</strong> integer values.</p>\n\n<p>Use a format specifier that fits the data type (<code>%u</code>) and the values will be displayed as positive unsigned numbers.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487773137, "post_id": 42394043, "comment_id": 71935410, "body": "There is no guarantee <code>%u</code> or <code>%x</code> are correct either."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487773535, "post_id": 42394043, "comment_id": 71935700, "body": "@Olaf  Added reference to <code>PRIx32</code>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1487773489, "last_edit_date": 1487773489, "creation_date": 1487773084, "answer_id": 42394043, "question_id": 42393763, "link": "https://stackoverflow.com/questions/42393763/converting-dotted-ip-to-integer-using-htonlinet-addrip-str-return-negative-v/42394043#42394043", "title": "Converting dotted IP to integer using htonl(inet_addr(IP_str)) return negative values for IP Adresses of Class B and C", "body": "<p>As others have mentioned, the <code>%d</code> format specifier is for printing a signed <code>int</code>.  The value you are passing is unsigned.  Using the wrong format specifier invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>You need to use the <code>%u</code> format specifier to print the values as unsigned.  </p>\n\n<p>Better yet, use the <code>%x</code> format specifier instead to print the values as unsigned hexadecimal.  That way, every pair of hex characters corresponds to a byte of the IP address, making it easier to read.</p>\n\n<p>EDIT:</p>\n\n<p>The C standard however doesn't guarantee that an <code>int</code> is at least 32 bits.  You need to use the <code>PRIu32</code> or <code>PRIx32</code> macros to get the proper format specifier for a <code>uint32_t</code>:</p>\n\n<pre><code>printf(\"%\" PRIx32 \"\\n\", integer_ip);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1261, "user_id": 5516527, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4591edc85fb163dffe4606be4c4179bf?s=128&d=identicon&r=PG&f=1", "display_name": "m.r226", "link": "https://stackoverflow.com/users/5516527/m-r226"}, "edited": false, "score": 1, "creation_date": 1487773768, "post_id": 42394192, "comment_id": 71935861, "body": "Yes, The standard %u conversion type specificer is not guaranteed to be correct!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1487773852, "post_id": 42394192, "comment_id": 71935937, "body": "You&#39;re missing the <code>%</code> before the type specifier."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1487774040, "post_id": 42394192, "comment_id": 71936077, "body": "@dbush: Yes, thanks. They indeed just provide the conversion type, so you can add format-modificators, field-width, etc. like for the normal specifiers."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 4, "last_activity_date": 1487774232, "last_edit_date": 1487774232, "creation_date": 1487773483, "answer_id": 42394192, "question_id": 42393763, "link": "https://stackoverflow.com/questions/42393763/converting-dotted-ip-to-integer-using-htonlinet-addrip-str-return-negative-v/42394192#42394192", "title": "Converting dotted IP to integer using htonl(inet_addr(IP_str)) return negative values for IP Adresses of Class B and C", "body": "<p>Your code invokes undefined behaviour for printing an unsigned integer as a signed.</p>\n\n<p>To print the <code>stdint.h</code> types, see <code>inttypes.h</code>. Use the <code>PRIu32</code> macro to print a <code>uint32_t</code>:</p>\n\n<pre><code>uint32_t u = 42;\nprintf(\"Value: %\" PRIu32 \"\\n\", u);\n</code></pre>\n\n<p>The standard <code>%u</code> conversion type specificer is not guaranteed to be correct, if <code>uint32_t</code> is not <code>typedef unsigned int uint32_t;</code>. For example with 32 bit <code>long</code> and <code>int</code>, it could be <code>typedef</code>ed to <code>unsigned</code> of either.</p>\n\n<p>For hex, use <code>PRIx32</code> or <code>PRIX32</code>.</p>\n\n<h2>Details:</h2>\n\n<p>The Macros map to a string literal with the conversion specifier appropriate for your platform, which can be <code>\"u\"</code>. Notice the <code>%</code> must be given in the peceeding part. The standard C feature of concatenating adjscent string literals will generate the final format-string. There will be no run-time overhead.</p>\n"}], "owner": {"reputation": 1261, "user_id": 5516527, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4591edc85fb163dffe4606be4c4179bf?s=128&d=identicon&r=PG&f=1", "display_name": "m.r226", "link": "https://stackoverflow.com/users/5516527/m-r226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 42394192, "answer_count": 4, "score": 0, "last_activity_date": 1487786172, "creation_date": 1487772394, "last_edit_date": 1487772805, "question_id": 42393763, "link": "https://stackoverflow.com/questions/42393763/converting-dotted-ip-to-integer-using-htonlinet-addrip-str-return-negative-v", "title": "Converting dotted IP to integer using htonl(inet_addr(IP_str)) return negative values for IP Adresses of Class B and C", "body": "<p>I am trying to convert dotted IP to integer using <code>htonl(inet_addr(IP_str))</code>.</p>\n\n<p>The problem is the function returns negative results for IP address of class B and C.</p>\n\n<p>here is some of my code (simplified):</p>\n\n<pre><code>int main() {\nconst char IP1[] = \"10.0.0.0\";  //Class A\nconst char IP2[] = \"20.0.0.0\";  //Class A    \nconst char IP3[] = \"126.0.0.0\";  //Class A\nconst char IP4[] = \"128.0.0.0\";  //Class B\nconst char IP5[] = \"160.0.0.0\";  //Class B\nconst char IP6[] = \"190.0.0.0\";  //Class B\nconst char IP7[] = \"193.0.0.0\";  //Class C\nconst char IP8[] = \"200.0.0.0\";  //Class C\n\nuint32_t integer_ip;\ninteger_ip = htonl(inet_addr(IP1));\nprintf(\"IP1: %s ------&gt; Integer: %d\\n\",IP1,integer_ip);\ninteger_ip = htonl(inet_addr(IP2));\nprintf(\"IP2: %s ------&gt; Integer: %d\\n\",IP2,integer_ip);\ninteger_ip = htonl(inet_addr(IP3));\nprintf(\"IP3: %s ------&gt; Integer: %d\\n\",IP3,integer_ip);   \ninteger_ip = htonl(inet_addr(IP4));\nprintf(\"IP4: %s ------&gt; Integer: %d\\n\",IP4,integer_ip);\ninteger_ip = htonl(inet_addr(IP5));\nprintf(\"IP5: %s ------&gt; Integer: %d\\n\",IP5,integer_ip);\ninteger_ip = htonl(inet_addr(IP6));\nprintf(\"IP6: %s ------&gt; Integer: %d\\n\",IP6,integer_ip);\ninteger_ip = htonl(inet_addr(IP7));\nprintf(\"IP7: %s ------&gt; Integer: %d\\n\",IP7,integer_ip);\ninteger_ip = htonl(inet_addr(IP8));\nprintf(\"IP8: %s ------&gt; Integer: %d\\n\",IP8,integer_ip);\nreturn 0;\n}\n</code></pre>\n\n<p>and The resuls:</p>\n\n<pre><code>IP1: 10.0.0.0 ------&gt; Integer: 167772160   \nIP2: 20.0.0.0 ------&gt; Integer: 335544320\nIP3: 126.0.0.0 ------&gt; Integer: 2113929216\nIP4: 128.0.0.0 ------&gt; Integer: -2147483648\nIP5: 160.0.0.0 ------&gt; Integer: -1610612736\nIP6: 190.0.0.0 ------&gt; Integer: -1107296256\nIP7: 193.0.0.0 ------&gt; Integer: -1056964608\nIP8: 200.0.0.0 ------&gt; Integer: -939524096\n</code></pre>\n\n<p>I tested The results on some online tools like <a href=\"http://www.silisoftware.com/tools/ipconverter.php?convert_from=-1610612736\" rel=\"nofollow noreferrer\">this</a> one.</p>\n\n<p>Consider this line of output :</p>\n\n<pre><code>IP5: 160.0.0.0 ------&gt; Integer: -1610612736\n</code></pre>\n\n<p><code>-1610612736</code> is equal to <code>160.0.0.0</code> whiles <code>1610612736</code> is equal to <code>96.0.0.0.</code></p>\n\n<p>The most important requirement for me is speed. \nI don't want to check each IP if it is in class A or not.</p>\n\n<p>How do i resolve this problem? </p>\n\n<p>Thanks?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487771959, "post_id": 42393538, "comment_id": 71934498, "body": "Get idea. Start by reading a C book."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487772106, "post_id": 42393538, "comment_id": 71934607, "body": "Aside: where is the <code>long</code> which is referred to by <code>%ld</code>?"}, {"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1487772198, "post_id": 42393538, "comment_id": 71934682, "body": "<code>p = &amp;b;</code> &lt;-- so you have <code>p</code> pointing to <code>b</code>. Print it and then do the same for <code>a</code> : <code>p = &amp;a;</code>. Maybe read some decent <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">book</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487772239, "post_id": 42393538, "comment_id": 71934721, "body": "OK, Apologies, I was too quick to judge, now it does not seem a write-my-code request, It&#39;s need-to-read-basic-c-book question."}, {"owner": {"reputation": 11, "user_id": 6844264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e964e4dc55ba39f774ab3981acf320?s=128&d=identicon&r=PG&f=1", "display_name": "Huy L&#234;", "link": "https://stackoverflow.com/users/6844264/huy-l%c3%aa"}, "edited": false, "score": 0, "creation_date": 1487772560, "post_id": 42393538, "comment_id": 71934975, "body": "so what I write to <b>/* fill in here */</b> ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487772704, "post_id": 42393538, "comment_id": 71935060, "body": "@HuyL&#234; Nothing, see the answer."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6844264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e964e4dc55ba39f774ab3981acf320?s=128&d=identicon&r=PG&f=1", "display_name": "Huy L&#234;", "link": "https://stackoverflow.com/users/6844264/huy-l%c3%aa"}, "edited": false, "score": 0, "creation_date": 1487778295, "post_id": 42393623, "comment_id": 71939191, "body": "Hi, I got the answer. Just using <code>*(p+1)</code> for <code>a</code> and <code>*p</code> for <code>b</code>. You can get more information by using google search or reading some books about memory segment =)) Sorry for my bad english."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11, "user_id": 6844264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e964e4dc55ba39f774ab3981acf320?s=128&d=identicon&r=PG&f=1", "display_name": "Huy L&#234;", "link": "https://stackoverflow.com/users/6844264/huy-l%c3%aa"}, "edited": false, "score": 0, "creation_date": 1487778694, "post_id": 42393623, "comment_id": 71939507, "body": "@HuyL&#234; its my duty to inform you that the source of that information should be discontinued immediately, its not correct in general aspect."}, {"owner": {"reputation": 11, "user_id": 6844264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e964e4dc55ba39f774ab3981acf320?s=128&d=identicon&r=PG&f=1", "display_name": "Huy L&#234;", "link": "https://stackoverflow.com/users/6844264/huy-l%c3%aa"}, "edited": false, "score": 0, "creation_date": 1487779187, "post_id": 42393623, "comment_id": 71939923, "body": "OK. It&#39;s my fault. I&#39;m learning about data segment. And this question only make me understand the mechanism of distributing memory region to allocate the data segment. Its not correct in general aspect as you said. Thank for your help."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11, "user_id": 6844264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e964e4dc55ba39f774ab3981acf320?s=128&d=identicon&r=PG&f=1", "display_name": "Huy L&#234;", "link": "https://stackoverflow.com/users/6844264/huy-l%c3%aa"}, "edited": false, "score": 0, "creation_date": 1487779457, "post_id": 42393623, "comment_id": 71940145, "body": "@HuyL&#234; Pleasure. As I mentioned, you can use arrays to achieve what you want."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1487772660, "last_edit_date": 1487772660, "creation_date": 1487772070, "answer_id": 42393623, "question_id": 42393538, "link": "https://stackoverflow.com/questions/42393538/print-data-of-2-variables-using-pointer-in-code-below/42393623#42393623", "title": "Print data of 2 variables using pointer in code below", "body": "<p>In general, you cannot do this with current code /approach. </p>\n\n<p>There's nothing in C standard that guarantees the memory allocation strategy for two or more independent variables, so the previous-next memory location tracking is not possible. There's no deterministic way to deduce the value of <code>a</code>, with <em>only</em> access to <code>p</code>.</p>\n\n<p>In case you need to access values of more than one variables (of same type) from a single pointer, consider creating an array, where the elements are guaranteed to reside in contiguous memory location, so pointer arithmetic is meaningful and we can reach the previous-next element deterministically.</p>\n"}], "owner": {"reputation": 11, "user_id": 6844264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e964e4dc55ba39f774ab3981acf320?s=128&d=identicon&r=PG&f=1", "display_name": "Huy L&#234;", "link": "https://stackoverflow.com/users/6844264/huy-l%c3%aa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1487772141, "answer_count": 1, "score": 0, "last_activity_date": 1487772774, "creation_date": 1487771886, "last_edit_date": 1487772774, "question_id": 42393538, "link": "https://stackoverflow.com/questions/42393538/print-data-of-2-variables-using-pointer-in-code-below", "closed_reason": "Not suitable for this site", "title": "Print data of 2 variables using pointer in code below", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint *p;\n\nint main() {\n    int a = 4, b = 8;\n\n    p = &amp;b;\n\n    //TODO: fill in the blank\n    printf(\"a = %ld\\n\", /*Fill in here */);\n    printf(\"b = %ld\\n\", /*Fill in here */);\n\n    return 0;\n}\n</code></pre>\n\n<p>How can I print the value of 2 variables <code>a</code> and <code>b</code> using only <code>p</code> to access them?</p>\n"}, {"tags": ["python", "c", "python-2.7", "beautifulsoup", "python-import"], "comments": [{"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 0, "creation_date": 1487773984, "post_id": 42393369, "comment_id": 71936033, "body": "Can you try using PyRun_SimpleString(&quot;import parser&quot;)? Also make sure the python script is in the same path where your C source code is and you have <code>__init__.py</code> in the directory. I presume you could able to import &#39;parser&#39; successfully on python shell (this is for testing only)"}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "reply_to_user": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 0, "creation_date": 1487774390, "post_id": 42393369, "comment_id": 71936319, "body": "I did some more research and try <code>PyRun_SimpleString(&quot;from bs4 import BeautifulSoup\\n&quot;)</code> now bs4 is imported but doesn&#39;t recognize urllib2 now. And it doesn&#39;t work with <code>PyRun_SimpleString</code> <code>__init__.py</code>what is it and where can I find it ?"}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "reply_to_user": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 0, "creation_date": 1487775179, "post_id": 42393369, "comment_id": 71936893, "body": "Ok I have an empty <code>__init__.py</code> in my directory, I can import parser in my python shell but it doesn&#39;t work when I do it with <code>PyRun_SimpleString</code> it telling me the same thing, there&#39;s no bs4 module"}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487776856, "post_id": 42395280, "comment_id": 71938105, "body": "I tried this and got the error from the import : <code>Traceback (most recent call last):   File &quot;.&#47;parser.py&quot;, line 1, in &lt;module&gt;     from bs4 import BeautifulSoup ImportError: No module named bs4 Error importing python script [1]    72505 segmentation fault  .&#47;pars</code>"}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "reply_to_user": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487780517, "post_id": 42395280, "comment_id": 71940939, "body": "Please find the snippet of the process that i followed. Hope this helps?"}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487781967, "post_id": 42395280, "comment_id": 71941924, "body": "Well I made a completely new file with your code and it works like you. Thank you, but I just don&#39;t understand where is the problem with the function. As soon as I fix this I will add the rest of my program and test it. If I have some problem I will post it here."}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487784411, "post_id": 42395280, "comment_id": 71943641, "body": "You&#39;re not using the same parser... it doesn&#39;t use the working directory. So you need to use <code>PySys_SetPath(&quot;.&quot;)</code> to use the correct directory. So it doesn&#39;t work."}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "reply_to_user": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487811306, "post_id": 42395280, "comment_id": 71957007, "body": "Why you need to set the path explicitly in the code, when you could able to run python outside pars.c program. Did you set PYTHONPATH or PATH while installing python? Can you run <code>whereis python2.7</code>. When you do <code>PySys_SetPath(&quot;.&quot;)</code> you actually clear python path to <code>&quot;.&quot;</code> as it updates <code>sys.path</code>. To test this run Py_GetPath() before and after PySys_SetPath(). Anyway if you still want to set the path in the C code please look at the edited code."}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487814864, "post_id": 42395280, "comment_id": 71958153, "body": "I wanted to set the path because when I changed the file name of <code>parser.py</code>to <code>html_parser.py</code>it doesn&#39;t recognized it. He used an another file in the default path named <code>parser.py</code>and when I changed all with <code>html_parser.py</code>it didn&#39;t find the file to import. You can try it, just change the Python file name and eventually it wont work anymore. This is my fault by using a such file name..."}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 1, "creation_date": 1487815893, "post_id": 42395280, "comment_id": 71958405, "body": "I finally found... it&#39;s a problem with homebrew and _io.so, I don&#39;t know why it didn&#39;t found the symbole and all I got to do was cp the one in my System Framwork to the homebrew directory. Thanks a lot, if you didn&#39;t give me this program I wouldn&#39;t find this."}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "reply_to_user": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487815972, "post_id": 42395280, "comment_id": 71958429, "body": "Cheers, happy coding :)"}, {"owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "edited": false, "score": 0, "creation_date": 1487816078, "post_id": 42395280, "comment_id": 71958455, "body": "I will edit my post to help anybody encountering the same issue."}], "tags": [], "owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "is_accepted": true, "score": 1, "last_activity_date": 1487811143, "last_edit_date": 1487811143, "creation_date": 1487776285, "answer_id": 42395280, "question_id": 42393369, "link": "https://stackoverflow.com/questions/42393369/c-importing-python-module/42395280#42395280", "title": "C - Importing Python Module", "body": "<p>This has worked for me, please try this:</p>\n\n<pre><code>    /* 1st: Import the module */\n    PyObject* ModuleString = PyString_FromString((char*) \"parser\");\n    if (!ModuleString) {\n        PyErr_Print();\n        printf(\"Error formating python script\\n\");\n    }\n\n    PyObject* Module = PyImport_Import(ModuleString);\n    if (!Module) {\n        PyErr_Print();\n        printf(\"Error importing python script\\n\");\n    }\n\n    /* 2nd: Getting reference to the function */\n    PyObject* Function = PyObject_GetAttrString(Module, (char*)\"link_list\");\n    if (!Function) {\n        PyErr_Print();\n        printf(\"Error getting link_list()\\n\");\n    }\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>I have attached the complete process, compiled on MacOS. </p>\n\n<pre><code>[milinddeore@MDEORE-M-P028: ~/temp ] ls\n__init__.py pars.c      parser.py\n[milinddeore@MDEORE-M-P028: ~/temp ] vim pars.c\n\n#include &lt;stdio.h&gt;\n#include &lt;Python.h&gt;\n\nint main() {\n  Py_Initialize();\n\n  /* This is to add the path in the code */\n  PyObject *sys = PyImport_ImportModule(\"sys\");\n  PyObject *path = PyObject_GetAttrString(sys, \"path\");\n  PyList_Append(path, PyString_FromString(\".\"));\n\n  /* 1st: Import the module */\n    PyObject* ModuleString = PyString_FromString((char*) \"parser\");\n    if (!ModuleString) {\n        PyErr_Print();\n        printf(\"Error formating python script\\n\");\n    }\n\n    PyObject* Module = PyImport_Import(ModuleString);\n    if (!Module) {\n        PyErr_Print();\n        printf(\"Error importing python script\\n\");\n    }\n\n    /* 2nd: Getting reference to the function */\n    PyObject* Function = PyObject_GetAttrString(Module, (char*)\"link_list\");\n    if (!Function) {\n        PyErr_Print();\n        printf(\"Pass valid argument to link_list()\\n\");\n    }\n\n    Py_Finalize();\n    return 0;\n}\n[milinddeore@MDEORE-M-P028: ~/temp ] vim parser.py\n#!/usr/local/bin/python2.7\nfrom bs4 import BeautifulSoup\nimport urllib2\n\n\ndef link_list(urlString):\n    siteFile = urllib2.urlopen(urlString)\n    siteHTML = siteFile.read()\n    siteFile.close()\n    soup = BeautifulSoup(siteHTML, \"html.parser\")\n    liste = []\n    for links in soup.find_all('a'):\n        print(links.get('href'))\n        liste.append(links.get('href'))\n    return liste\n[milinddeore@MDEORE-M-P028: ~/temp ] gcc -I/usr/include/python2.7 pars.c -lpython2.7 -o pars -Wall\n[milinddeore@MDEORE-M-P028: ~/temp ] ls\n__init__.py pars        pars.c      parser.py\n[milinddeore@MDEORE-M-P028: ~/temp ] ./pars\nAttributeError: 'module' object has no attribute 'link_list'\nPass valid argument to link_list()     ===&gt; This is because i have not passed the required argument to the function. \n</code></pre>\n\n<p>Let me know if you need any other details. Hope this helps.</p>\n"}], "owner": {"reputation": 385, "user_id": 7402246, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b1d4b92c5767b4d5afaa02b9b85cf019?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7402246/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1425, "favorite_count": 0, "accepted_answer_id": 42395280, "answer_count": 1, "score": 2, "last_activity_date": 1487816779, "creation_date": 1487771469, "last_edit_date": 1487816779, "question_id": 42393369, "link": "https://stackoverflow.com/questions/42393369/c-importing-python-module", "title": "C - Importing Python Module", "body": "<p>I'm using the <code>&lt;Python.h&gt;</code> library, this is the first time that I use it and I did some research. Finally I found what is my problem exactly but don't really know how to fix it.</p>\n\n<p>I want to parse url with Beautifulsoup, the Python code works perfectly but when I want to use <code>PyImport_ImportModule(parser)</code> to import my file (named parser.py) but it doesn't rencogniez the bs4 module from my import <code>from bs4 import BeautifulSoup</code>.</p>\n\n<p>Here is the part of my C program :</p>\n\n<pre><code>    PyObject *return, *module, *function, *args;\n\n    Py_Initialize();\n\n    PySys_SetPath(\".\");\n    module = PyImport_ImportModule(\"parser\");\n\n    if(module == NULL){\n        PyErr_Print();\n        exit(1);\n    }\n    fonction = PyObject_GetAttrString(module, \"link_list\");\n</code></pre>\n\n<p>Where <code>link_list</code> is my Python function who only takes a string. So I know that I have to import bs4 too with <code>PyImport</code> but nothing work correctly and I still have this error :</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"./parser.py\", line 2, in \n      from bs4 import BeautifulSoup\n  ImportError: No module named bs4</p>\n</blockquote>\n\n<p>I insist my parser.py works perfectly with <code>Python2.7</code> and when I'm compiling my C program I use <code>gcc -I/usr/include/python2.7 pars.c -lpython2.7 -o pars -Wall</code> but if you need to see how I'm using it here's my Python program :</p>\n\n<pre><code>#!/usr/local/bin/python3\nfrom bs4 import BeautifulSoup\nimport urllib2\n\n\ndef link_list(urlString):\n    siteFile = urllib2.urlopen(urlString)\n    siteHTML = siteFile.read()\n    siteFile.close()\n    soup = BeautifulSoup(siteHTML, \"html.parser\")\n    liste = []\n    for links in soup.find_all('a'):\n        print(links.get('href'))\n        liste.append(links.get('href'))\n    return liste\n</code></pre>\n\n<h2><strong>Update : Fixed !</strong></h2>\n\n<p>If you encounter a problem when you try to import any module (in my case urllib2) and you can see this error : <code>Symbol not found: __PyCodecInfo_GetIncrementalDecoder</code>this mean you're certainly a mac user who installed Python with homebrew. In my case I did this :</p>\n\n<pre><code>cp /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so /usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_io.so\n</code></pre>\n\n<p>It depending of the version of Python you use. If you don't have this use <code>sudo find / -name _io.so</code> and look for the <code>/System</code> path to _io.so and the <code>/usr/local/Cellar/python/</code> with the most recent version of python and use the <code>cp</code>command with them.</p>\n"}, {"tags": ["c", "fgets", "getline"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1487771138, "post_id": 42393117, "comment_id": 71933824, "body": "What does a debugger tell you when you step through the code?"}, {"owner": {"reputation": 1, "user_id": 7604463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7ed6877162959bc11d78ebf618900a4?s=128&d=identicon&r=PG", "display_name": "c2ethanol", "link": "https://stackoverflow.com/users/7604463/c2ethanol"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1487777150, "post_id": 42393117, "comment_id": 71938323, "body": "Thank you for your answers; I found my mistake. This is really embarrassing, because the code works, only my text-file somehow got eaten up; maybe I did not close it properly and all its content got deleted, so of course the value of getline() was EOF/-1."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487777659, "post_id": 42393117, "comment_id": 71938737, "body": "I would also check return of <code>scanf()</code> here,"}, {"owner": {"reputation": 1, "user_id": 7604463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7ed6877162959bc11d78ebf618900a4?s=128&d=identicon&r=PG", "display_name": "c2ethanol", "link": "https://stackoverflow.com/users/7604463/c2ethanol"}, "edited": false, "score": 0, "creation_date": 1487778154, "post_id": 42393117, "comment_id": 71939076, "body": "My idea with this scanf() was to wait for the user to press enter before proceeding to print the next line. Probably that is no good style..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487787598, "post_id": 42393117, "comment_id": 71945691, "body": "Note that when reporting an error about being unable to open a file (especially if the message asks if it exists), you should include the file name in the message.  The user may be confused about the meaning of arguments and have provided <code>--help</code> or something, and to be told that some file doesn&#39;t exist isn&#39;t a help, but being told <code>&quot;failed to open file &#39;--help&#39; for reading; does it exist?\\n&quot;</code> would be a lot more meaningful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487889377, "post_id": 42393117, "comment_id": 72000528, "body": "never access <code>argv[]</code> beyond <code>argv[0]</code> with out first checking <code>argc</code> to assure the command line argument actually exists (and if it does not exist, output a <code>usage</code> statement to stderr and exit the program."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487889637, "post_id": 42393117, "comment_id": 72000628, "body": "regarding this statement: <code>fprintf(stderr, &quot;Something went wrong with reading...</code>  the OS has a very good idea of what went wrong.  So the output should include the appropriate error message from the OS.  Suggest  using: <code>perror( &quot;Something went wrong with reading ... );</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487889699, "post_id": 42393117, "comment_id": 72000660, "body": "the name: <code>read</code> is a well known system function name.  Much better to use a unique name, like: <code>bytesread</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487889837, "post_id": 42393117, "comment_id": 72000712, "body": "regarding this line: <code>scanf(&quot;%c&quot;, &amp;confirm);</code>  each time the user enters a character, they are also entering a newline.  The code is not allowing for the newline, so will not stop on every line of the file input."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1487890047, "post_id": 42393117, "comment_id": 72000778, "body": "an actual database is NOT organized as a series of text lines.  So if your code is expected to access an actual data base, then the code needs to be using <code>mysql</code> statements not <code>fopen()</code> and <code>getline()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 1, "last_activity_date": 1487771151, "creation_date": 1487771151, "answer_id": 42393247, "question_id": 42393117, "link": "https://stackoverflow.com/questions/42393117/c-print-lines-from-file-with-getline/42393247#42393247", "title": "C - Print lines from file with getline()", "body": "<p>Change your scanf with fgetline using stdin as your file parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 35869, "user_id": 7512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d064a7aca29011d3246302b27c41f4d9?s=128&d=identicon&r=PG", "display_name": "slim", "link": "https://stackoverflow.com/users/7512/slim"}, "is_accepted": false, "score": 1, "last_activity_date": 1487771850, "creation_date": 1487771850, "answer_id": 42393520, "question_id": 42393117, "link": "https://stackoverflow.com/questions/42393117/c-print-lines-from-file-with-getline/42393520#42393520", "title": "C - Print lines from file with getline()", "body": "<p>You should step through this in a debugger, to make sure your claim that it never enters the <code>while</code> loop is correct.</p>\n\n<p>If it truly never enters the while loop, it is necessarily because <code>getline()</code> has returned <code>-1</code>. Either the file is truly empty, or you have an error reading the file.</p>\n\n<p><code>man getline</code> says:</p>\n\n<blockquote>\n  <p>On success, getline() and getdelim() return the  number  of \n  characters\n        read,  including  the delimiter character, but not including the termi\u2010\n         nating null byte ('\\0').  This value can be  used  to  handle  embedded\n         null bytes in the line read.</p>\n  \n  <p>Both  functions  return -1 on failure to read a line (including end-of-\n     file condition).  In the event of an error, errno is  set  to  indicate\n     the cause.</p>\n</blockquote>\n\n<p>Therefore, you should enhance your code to check for stream errors and deal with <code>errno</code> -- you should do this even when your code works, because EOF is not the only reason for the function\nto return <code>-1</code>.</p>\n\n<pre><code>  int len = getline(&amp;line, &amp;len, database);\n  if(len == -1 &amp;&amp; ferror(database)) {\n        perror(\"Error reading database\");\n  }\n</code></pre>\n\n<p>You can write more detailed code to deal with <code>errno</code> in more explicit ways.</p>\n\n<p>Unfortunately handling this thoroughly can make your code a bit more verbose -- welcome to C!</p>\n"}], "owner": {"reputation": 1, "user_id": 7604463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7ed6877162959bc11d78ebf618900a4?s=128&d=identicon&r=PG", "display_name": "c2ethanol", "link": "https://stackoverflow.com/users/7604463/c2ethanol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487782199, "creation_date": 1487770829, "last_edit_date": 1487782199, "question_id": 42393117, "link": "https://stackoverflow.com/questions/42393117/c-print-lines-from-file-with-getline", "title": "C - Print lines from file with getline()", "body": "<p>I am trying to write a simple C program that loads a text-file, prints the first line to screen, waits for the user to press enter and then prints the next line, and so on.</p>\n\n<p>As only argument it accepts a text-file that is loaded as a stream \"database\". I use the <code>getline()</code>-function for this, according to <a href=\"https://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\">this</a> example. It compiles fine, successfully loads the text-file, but the program never enters the <code>while-loop</code> and then exits.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nFILE *database = NULL; // input file\n\nint main(int argc, char *argv[])\n{\n    /* assuming the user obeyed syntax and gave input-file as first argument*/  \n    char *input = argv[1];\n\n    /* Initializing input/database file */\n    database = fopen(input, \"r\");\n    if(database == NULL)\n    {\n        fprintf(stderr, \"Something went wrong with reading the database/input file. Does it exist?\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    printf(\"INFO: database file %s loaded.\\n\", input);\n\n    /* Crucial part printing line after line */\n    char *line = NULL;\n    size_t len = 0;\n    ssize_t read;\n\n    while((read = getline(&amp;line, &amp;len, database)) != -1)\n    {\n        printf(\"INFO: Retrieved line of length %zu :\\n\", read);\n        printf(\"%s \\n\", line);\n        char confirm; // wait for user keystroke to proceed\n        scanf(\"%c\", &amp;confirm);\n        // no need to do anything with \"confirm\"\n    }\n\n    /* tidy up */\n    free(line);\n    fclose(database);\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>I tried it with <code>fgets()</code> -- I can also post that code --, but same thing there: it never enters the while-loop.</p>\n\n<p>It might be something very obvious; I am new to programming.</p>\n\n<p>I use the gcc-compiler on Kali Linux.</p>\n"}, {"tags": ["c", "linux", "memory-management", "linux-kernel", "kernel-module"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1487770768, "post_id": 42393040, "comment_id": 71933557, "body": "would really need to see the code to identify the problem."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487770864, "post_id": 42393040, "comment_id": 71933626, "body": "Could be a buffer overflow and undefined behaviour."}, {"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 1, "creation_date": 1487771084, "post_id": 42393040, "comment_id": 71933784, "body": "Two more wild guesses: your driver tries to access the buffer after it&#39;s freed by userspace (shouldn&#39;t cause kernel panic if you use proper functions, though); your driver tries to write to userspace when it&#39;s in another process&#39; context."}, {"owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1487771215, "post_id": 42393040, "comment_id": 71933871, "body": "@ChrisTurner I can&#39;t post code."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1487771281, "post_id": 42393040, "comment_id": 71933914, "body": "Please <a href=\"https://stackoverflow.com/posts/42393040/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">what you have tried so far</a>.  You should include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1487771294, "post_id": 42393040, "comment_id": 71933929, "body": "@VadimStupakov <i>I can&#39;t post code.</i> Then how much help can you expect to get?"}, {"owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487771317, "post_id": 42393040, "comment_id": 71933950, "body": "@MichaelWalz, So why everything is ok with buffer on stack(alloca)?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487771370, "post_id": 42393040, "comment_id": 71933986, "body": "@VadimStupakov I don&#39;t know, undefined behaviour ? Why are you not able to post code ?(!)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1487771533, "post_id": 42393040, "comment_id": 71934134, "body": "without the code, we can only guess as to what the mistake in your code is. debugging the code is your only hope - try running it with something like valgrind and seeing what errors that throws up?"}, {"owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1487771553, "post_id": 42393040, "comment_id": 71934155, "body": "@MichaelWalz Because there is big amount of code. I try to reproduce such behavior in samples and then post the code."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1487771872, "post_id": 42393040, "comment_id": 71934437, "body": "@VadimStupakov Assuming you have a memory-management issue in your user-space code, you will probably find the problems a lot faster using a tool such as <a href=\"http://valgrind.org/info/about.html\" rel=\"nofollow noreferrer\">Valgrind</a> than you will by changing things hoping to find what&#39;s wrong."}, {"owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "edited": false, "score": 0, "creation_date": 1487771895, "post_id": 42393040, "comment_id": 71934456, "body": "I don&#39;t ask you to debug my code. I ask to explain such behavior, If such usage of copy_to/from_user and malloc could lead to error. Or maybe there could be some buf preparation on heap before sending it to kernel space."}, {"owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487771991, "post_id": 42393040, "comment_id": 71934518, "body": "@Andrew Henle, thanks. I try to use Valgrind."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1487771991, "post_id": 42393040, "comment_id": 71934519, "body": "@VadimStupakov The errors you&#39;re seeing are <a href=\"https://en.wikipedia.org/wiki/Memory_corruption\" rel=\"nofollow noreferrer\">classic user-space memory corruption symptoms.</a>"}, {"owner": {"reputation": 568, "user_id": 2591870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MM73n.jpg?s=128&g=1", "display_name": "James Davis", "link": "https://stackoverflow.com/users/2591870/james-davis"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1487773320, "post_id": 42393040, "comment_id": 71935560, "body": "I agree with @AndrewHenle; this smells like a user-space memory management issue. If valgrind isn&#39;t an option, you could try writing <code>my_malloc</code> and <code>my_free</code>, log the requests, and make sure you don&#39;t have a use-after-free based on the location of the segfault."}], "answers": [{"tags": [], "owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "is_accepted": true, "score": 0, "last_activity_date": 1487775323, "creation_date": 1487775323, "answer_id": 42394908, "question_id": 42393040, "link": "https://stackoverflow.com/questions/42393040/copy-to-from-user-and-malloc-in-user-space/42394908#42394908", "title": "copy_to/from_user and malloc in user space", "body": "<p>Thanks for suggestions!\nThe problem was in the user space side (classic user-space memory corruption symptoms).\nSo, it is safe to use malloced buffers in kernel space &lt;-> user space communication.</p>\n\n<p>I just thought that there is some special rules to put buffer on heap into the kernel space.</p>\n"}], "owner": {"reputation": 1567, "user_id": 3049753, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/P4ed5.jpg?s=128&g=1", "display_name": "RedEyed", "link": "https://stackoverflow.com/users/3049753/redeyed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 42394908, "answer_count": 1, "score": -1, "last_activity_date": 1487775323, "creation_date": 1487770636, "last_edit_date": 1487770932, "question_id": 42393040, "link": "https://stackoverflow.com/questions/42393040/copy-to-from-user-and-malloc-in-user-space", "title": "copy_to/from_user and malloc in user space", "body": "<p>I'm in confusion!</p>\n\n<p>I have a simple chardev and user space app that sends/receives a buffer to/from chardev via <code>ioctl</code>.</p>\n\n<p>When I allocate the buffer (in user space) via <code>malloc</code> (on heap) I sometimes have a segmentation fault in user space app on <code>free()</code> or kernel panic.\nAnd every time something one of them.</p>\n\n<p><strong>But</strong>, If I replace <code>malloc()</code> by<code>alloca()</code> (allocate buf on stack) everything works fine every time.</p>\n\n<p>Also I tried <code>memset(buf, 0x42, buf_len)</code> after calling <code>malloc</code>(to avoid compiler optimization or lazy allocation / copy on write)\nand it doesn't help.</p>\n\n<p>Could you please explain such behavior?\nWhat is the problem with <code>malloc</code> / what am I doing wrong?</p>\n"}, {"tags": ["c", "spell-checking", "punctuation"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487770458, "post_id": 42392934, "comment_id": 71933350, "body": "You have a comment saying &quot;makes all characters lower case&quot;, but there is no code actually doing it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1487770517, "post_id": 42392934, "comment_id": 71933387, "body": "You might also want to read about the <a href=\"http://en.cppreference.com/w/c/string/byte/ispunct\" rel=\"nofollow noreferrer\"><code>ispunct</code></a> function."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1487770576, "post_id": 42392934, "comment_id": 71933436, "body": "Can you please explain why you leave so many useless blank lines? Because I would love to hear a reason for that."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487770600, "post_id": 42392934, "comment_id": 71933451, "body": "Lastly, you should learn how to use a debugger. With a debugger you can step through the code, line by line, while monitoring variables and their value. It should hopefully help you understand what goes wrong, and where."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487770701, "post_id": 42392934, "comment_id": 71933517, "body": "If you are spell checking then you need to check letters only, anything else  can be removed with <code>!isalpha()</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1487771052, "post_id": 42392934, "comment_id": 71933760, "body": "Creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> may help here too."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487771059, "post_id": 42392934, "comment_id": 71933762, "body": "One last <i>last</i> thing. There seems to be a lot of code missing between the snippets. Are you sure you only show the relevant parts? That you don&#39;t leave out some important part? Can&#39;t you show less (but more relevant) code?"}, {"owner": {"reputation": 2015, "user_id": 5903959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1cf60fd55ef5b63eef63330d41bc9c0f?s=128&d=identicon&r=PG", "display_name": "pltrdy", "link": "https://stackoverflow.com/users/5903959/pltrdy"}, "edited": false, "score": 0, "creation_date": 1487771398, "post_id": 42392934, "comment_id": 71934012, "body": "&quot;Too many blank lines&quot; - said my good ol&#39; friend PEP-8"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487775167, "post_id": 42392934, "comment_id": 71936885, "body": "The <code>ispunct()</code> function may be helpful. Though overall, I think you only want to focus on letters and spaces, and discard everything else."}], "owner": {"reputation": 11, "user_id": 7604481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e23d42761b1991559efa377bc76206cd?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Courtney", "link": "https://stackoverflow.com/users/7604481/jake-courtney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488010178, "creation_date": 1487770357, "last_edit_date": 1488010178, "question_id": 42392934, "link": "https://stackoverflow.com/questions/42392934/problems-making-a-spell-checker-i-cant-remove-the-punctuation", "title": "Problems making a spell checker, I cant remove the Punctuation", "body": "<p>Spell-Checker:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n#include \"search.h\"\n\nint main(void)\n{   \n    FILE *f = fopen(\"mistakes.txt\", \"w\");\n    FILE *fPointer;\n    FILE *dictionary;\n    //int a,b;\n    char fname[20];\n    char wordcheck[45];\n    char worddict[45];\n\n    char dummy;\n    int i;\n    int notfound;\n    int k;\n</code></pre>\n\n<blockquote>\n  <p>This is the files i am using including the dictionary file that has the words \n  i compare to the other text file</p>\n</blockquote>\n\n<pre><code>    ///^below add text file to be read\n    fPointer = fopen(\"fname\", \"r\");\n    dictionary = fopen(\"dictionary.txt\",\"r\");   \n</code></pre>\n\n<hr>\n\n<pre><code>if (f == NULL)\n       {\n        printf(\"Error oping file!\\n\");\n        exit(1);\n       }\n</code></pre>\n\n<hr>\n\n<p><em>I have created this loop to make the words lower cased and identify the punctuation</em></p>\n\n<pre><code>    while(fscanf(fPointer,\"%s\", wordcheck)!=EOF)// makes all characters lower case\n    {      // an array that contains the characters of the original word\n        char wordChars[1000];\n\n        int newwordlength = 0;\n            // loops through each character in a word\n        for (i=0; i &lt; strlen(wordcheck); i++)\n         {\n            // makes all words lower cased\n            wordcheck[i] = tolower(wordcheck[i]);\n            // checks the word has these characters and increments newwordlength where the character is a letter\n              if (wordChars[i] != ',' \n              &amp;&amp; wordChars[i] != '.' \n              &amp;&amp; wordChars[i] != '?' \n              &amp;&amp; wordChars[i] != '!' \n              &amp;&amp; wordChars[i] != ':')\n            {    // how long the word will be without these characters\n                newwordlength++;\n            }           \n         } \n        //  creates new character array with size newwordlength\n        char newWordChars[1000];\n            *I think my problem is in this part*\n        int currChar = 0;\n  **This is where i think my problem is as its not removing the the characters **\n        // loops through these characters and only adds non-punctuation characters to the new character array\n        for (k = 0; k &lt; strlen(wordChars); k++)\n        {\n            if (wordChars[k] != ','\n                &amp;&amp; wordChars[k] != '.'\n                &amp;&amp; wordChars[k] != '?'\n                &amp;&amp; wordChars[k] != '!'\n                &amp;&amp; wordChars[k] != ':')\n              {\n                newWordChars[currChar] = wordChars[k];\n                currChar++;\n              }\n        }       \n</code></pre>\n\n<p>When I use this loop, I copy the mistakes into a text file but it copies the punctuation as well</p>\n\n<hr>\n\n<pre><code>        fseek(dictionary,0,SEEK_SET);\n\n    while(fscanf(dictionary,\"%s\", worddict)!=EOF)\n      {\n        notfound = 1;\n        if(strcmp(wordcheck, worddict)==0)// compares strings//\n            {\n              printf(\"This word: %s is in the dictionary\\n\", wordcheck);\n              notfound = 0;\n\n               break;\n            }\n      }\n    if(notfound == 1)\n</code></pre>\n\n<blockquote>\n  <p>This is where it copies the txt file.</p>\n</blockquote>\n\n<pre><code>      {\n        printf(\"%s is not in the dictionary\\n\", wordcheck);\n        const char *mistakes = \"Write this to file\";\n        fprintf(f, \"Words not in the dictionary: %s\\n\", wordcheck);\n      }\n    printf(\"Your file has been checked. Please check your errors by typing mistakes.txt to view \");\n    }\n\n    fclose(dictionary);\n    fclose(fPointer);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "grid", "sudoku"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487788292, "post_id": 42392577, "comment_id": 71946132, "body": "The Pico indentation style you&#39;re using may be fine for Pico, but C is not Pico.  Please use an orthodox C <a href=\"https://en.wikipedia.org/wiki/Indent_style\" rel=\"nofollow noreferrer\">indentation style</a> \u2014 I prefer Allman but many people prefer some variant of 1TBS.  Stick with one or the other of those and you&#39;ll not go far wrong."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487788571, "post_id": 42392577, "comment_id": 71946287, "body": "In a 6x6 Sudoku board, you normally have 6 sub-cells of 2 rows and 3 columns, and you have to preserve the uniqueness of the 6 numbers in each sub-cell as well as in each line and each column.  Your code doesn&#39;t seem to be doing enough to match those criteria. In a 9x9 board, you&#39;d have 9 subcells, each of size 3x3, with the numbers unique in each subcell as well as in each row and column. I wonder if you&#39;d do better with randomly permuting an array of 6 items? (I&#39;ve not coded a Sudoku generator; I don&#39;t know the best way to do it. But there are almost 700 questions on SO tagged <a href=\"https://stackoverflow.com/questions/tagged/sudoku\">sudoku</a>!)"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487788971, "post_id": 42398913, "comment_id": 71946510, "body": "Welcome to Stack Overflow.  I agree that the code in the question is not readable as written.  However, you would probably do better to wait until you have enough reputation (50 points) to comment than to add a comment as an &#39;answer&#39;.  The <code>col--</code> isn&#39;t a major problem; it is a way to go back and have another try at generating a number when the number chosen is already in use.  The code may not be right in the algorithm, but the <code>col--</code> is not itself a problem automatically."}, {"owner": {"reputation": 1, "user_id": 7171688, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208680137697069/picture?type=large", "display_name": "Dot31", "link": "https://stackoverflow.com/users/7171688/dot31"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487862523, "post_id": 42398913, "comment_id": 71984217, "body": "How can I get 50 reputation without responding ? (honest question not sarcasm) and sorry about the wrong answer :/"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487864106, "post_id": 42398913, "comment_id": 71985388, "body": "There are 3 main avenues to gaining reputation:  (1) asking good questions;  (2) giving good answers; (3) making edits to questions or answers that are deemed good.  You should find a question to which you know or can work out the answer \u2014 perhaps one which has been neglected for an hour or more, so you won&#39;t be in competition with the FGITW (fastest gun in the west) crowd \u2014 and provide a good answer to it.  Usually, that will net you some reputation."}, {"owner": {"reputation": 1, "user_id": 7171688, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208680137697069/picture?type=large", "display_name": "Dot31", "link": "https://stackoverflow.com/users/7171688/dot31"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487971631, "post_id": 42398913, "comment_id": 72040841, "body": "Thank you for your advices :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 7171688, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208680137697069/picture?type=large", "display_name": "Dot31", "link": "https://stackoverflow.com/users/7171688/dot31"}, "is_accepted": false, "score": 0, "last_activity_date": 1487786137, "creation_date": 1487786137, "answer_id": 42398913, "question_id": 42392577, "link": "https://stackoverflow.com/questions/42392577/sudoku-grid-generator/42398913#42398913", "title": "Sudoku Grid Generator", "body": "<p>They are too many syntax errors in the code you post, and the format is quite horrible. Try editing it so we can help you !</p>\n\n<blockquote>\n  <p>col--;\n  Maybe this is your problem, because if you <code>col--;</code> in your <code>for (col = 0; col &lt; 6; col++)</code> loop, you will do more than 6 iterations.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 781, "user_id": 3802059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bc9b09003456393fe147dce385b444?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/3802059/ian"}, "is_accepted": false, "score": 0, "last_activity_date": 1610956231, "last_edit_date": 1610956231, "creation_date": 1610948388, "answer_id": 65769341, "question_id": 42392577, "link": "https://stackoverflow.com/questions/42392577/sudoku-grid-generator/65769341#65769341", "title": "Sudoku Grid Generator", "body": "<p>I know this question is old, but a commenter here did say to wait at least 1 hour...</p>\n<p>To answer your question directly:</p>\n<ol>\n<li>You get garbage values because you do not set values for <code>cell</code> when !<code>(s % 2 == 0)</code>.</li>\n<li>You get more than 6 entries per row because your <code>c--</code> statement causes the <code>col</code> loop to execute more than 6 times (and you printf each time).</li>\n</ol>\n<p>If you want to maintain the general structure of your logic, then do this in two passes - fill <code>cell</code> completely and then print the whole thing.  However, there are other problems.  You probably want to remove the <code>s % 2 == 0</code> check completely, and the first <code>continue</code> could be a <code>break</code> (or a <code>goto</code> if you really want to make people angry).</p>\n"}], "owner": {"reputation": 61, "user_id": 6289416, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8J_7LoymRAI/AAAAAAAAAAI/AAAAAAAAAE8/QnUEfda_EUg/photo.jpg?sz=128", "display_name": "MGB", "link": "https://stackoverflow.com/users/6289416/mgb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1610956231, "creation_date": 1487769405, "last_edit_date": 1488024550, "question_id": 42392577, "link": "https://stackoverflow.com/questions/42392577/sudoku-grid-generator", "title": "Sudoku Grid Generator", "body": "<p>I have just started making my Sudoku game and I have made this function <code>grid</code> for creating a <code>6x6</code> Sudoku grid. I have used the <code>rand()</code> function for different numbers in each cell (currently it will only check rows for repetition of numbers). <code>rand()</code> is also used for random numbers of empty cells in each grid.</p>\n\n<p>The problem is that sometimes the grid is perfect <code>6x6</code> and without any number repeating (in rows only), however, sometimes in some cells there are garbage values generated and sometimes the number of columns is increased. I don't understand what is causing the problem? </p>\n\n<p>The Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\nvoid grid(void) {\n    int cell[6][6], row, col, s, i, j;\n    char in = 'A';\n    srand(time(NULL));\n    for (row = 0; row &lt;= 5; row++) {\n        printf(\"\\t\\t\\t[ |\");\n        for (col = 0; col &lt;= 5; col++) {\n            s = rand() % 6 + 1;\n            if (s % 2 == 0)\n            {\n                cell[row][col] = rand() % 6 + 1;\n                for (j = 0; j&lt;col; j++) {\n                    if (cell[row][j] == cell[row][col]) {\n                        col--;\n                        continue;\n                    }\n                }\n            }\n            else { printf(\"   | \", in++); continue; }\n            printf(\" %d | \", cell[row][col]);\n        }\n        printf(\"]\\n\\n\");\n    }\n}\n\nint main()\n{\n    grid();\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "matrix"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1487768929, "post_id": 42392328, "comment_id": 71932171, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/42368262/how-to-return-matrix\">How to return matrix?</a>"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1487769004, "post_id": 42392328, "comment_id": 71932224, "body": "If you have to literally type your assignment into a website for other people to work on, something is wrong."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1487769053, "post_id": 42392328, "comment_id": 71932268, "body": "Why does the function return <code>void</code> ?"}, {"owner": {"reputation": 45, "user_id": 7604801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e93638b322b818dced7eba46a68982?s=128&d=identicon&r=PG&f=1", "display_name": "user7604801", "link": "https://stackoverflow.com/users/7604801/user7604801"}, "edited": false, "score": 0, "creation_date": 1487769271, "post_id": 42392328, "comment_id": 71932450, "body": "Ideally I want to use pointers but our lecturer is terrible and I have no idea how they work - I want to return the values of the matrix from the function back to main hence why void"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1487769683, "post_id": 42392328, "comment_id": 71932755, "body": "You never change the value of <code>i</code> so how do you expect it to fill in the rest of the row?"}, {"owner": {"reputation": 45, "user_id": 7604801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e93638b322b818dced7eba46a68982?s=128&d=identicon&r=PG&f=1", "display_name": "user7604801", "link": "https://stackoverflow.com/users/7604801/user7604801"}, "edited": false, "score": 0, "creation_date": 1487769936, "post_id": 42392328, "comment_id": 71932947, "body": "Ok so me entering a row of numbers only inputs the last number cause i isn&#39;t increasing but how do I avoid this? The question specifically states that the data has to be inputted by row like &quot;1 2 3 4&quot; Enter &quot;5 6 7 8&quot;"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1487770518, "post_id": 42392328, "comment_id": 71933388, "body": "Add  <code>i++;</code> in the innermost <code>while</code> loop and reset it, <code>i = 0;</code> in the outer loop."}, {"owner": {"reputation": 45, "user_id": 7604801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e93638b322b818dced7eba46a68982?s=128&d=identicon&r=PG&f=1", "display_name": "user7604801", "link": "https://stackoverflow.com/users/7604801/user7604801"}, "edited": false, "score": 0, "creation_date": 1487770768, "post_id": 42392328, "comment_id": 71933556, "body": "That works, thanks everyone"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1487771536, "post_id": 42392328, "comment_id": 71934137, "body": "Use pointers <i>how</i>?  To read into the array, or to pass the array from one function to the other?"}, {"owner": {"reputation": 45, "user_id": 7604801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e93638b322b818dced7eba46a68982?s=128&d=identicon&r=PG&f=1", "display_name": "user7604801", "link": "https://stackoverflow.com/users/7604801/user7604801"}, "edited": false, "score": 0, "creation_date": 1487771705, "post_id": 42392328, "comment_id": 71934299, "body": "To pass the array back to the main function. I can get it to work with a 1D array but not with 2D"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487772670, "post_id": 42392328, "comment_id": 71935042, "body": "The answer in the proposed duplicate does that: it returns back to caller a matrix. BTW a matrix (2D) is an array (1D) on the raw level, so you can do that with a simple pointer."}, {"owner": {"reputation": 482, "user_id": 6792825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b035dd4b03b8fdcd5d1baac18f8035c6?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Jacobs", "link": "https://stackoverflow.com/users/6792825/lasse-jacobs"}, "edited": false, "score": 0, "creation_date": 1487777225, "post_id": 42392328, "comment_id": 71938384, "body": "Okey since people though my answer was bad I removed it."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487777515, "post_id": 42395451, "comment_id": 71938626, "body": "Any particular reason why you would do <code>void matrix( int x, int y, int (*input)[10] )</code> instead of <code>void matrix( int x, int y, int input[x][y])</code>? Or if you will, the pedantic version of the same, <code>void matrix( size_t x, size_t y, int input[static x][y])</code>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487778152, "post_id": 42395451, "comment_id": 71939074, "body": "@Lundin: Arrays and pointers are different animals, and I would rather accurately represent the type of the argument as a pointer than to pretend it&#39;s an array.  I honestly think it was a mistake to allow array-like syntax for pointers in parameter declarations."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487778513, "post_id": 42395451, "comment_id": 71939370, "body": "Once upon a time before C99 it was perhaps a mistake. But with VLAs, the array-like syntax can give increased type safety. And even prior C99 you could also get increased type safety if using some form of static analysis on the code. <code>void f (int* x)</code> could accept anything, but <code>void f (int x[5])</code> clearly expects an array of size 5. The C compiler will treat them the same, but more pedantic tools such as static analysers may perform array bounds-checking on the latter form."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487778657, "post_id": 42395451, "comment_id": 71939479, "body": "Anyway, I was mostly curious if you had some other type safety reason for choosing an array pointer, such as in <a href=\"http://stackoverflow.com/questions/36199473/const-correctness-for-array-pointers\">this case</a>."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 1, "last_activity_date": 1487776679, "creation_date": 1487776679, "answer_id": 42395451, "question_id": 42392328, "link": "https://stackoverflow.com/questions/42392328/c-how-do-you-input-integers-row-by-row-into-a-2-dimensional-matrix-and-then-ge/42395451#42395451", "title": "C : How do you input integers row by row into a 2 dimensional matrix and then get it back from a function to main()?", "body": "<p>Best way to do this is to pass the array as a parameter to the function, rather than try to return it.  </p>\n\n<p>C's treatment of arrays is special.  Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"<code>N</code>-element array of <code>T</code>\" is converted (\"decays\") to an expression of type \"pointer to <code>T</code>\" and the value of the expression is the location of the first element of the array<sup>1</sup>.</p>\n\n<p>For example, let's assume the following code:</p>\n\n<pre><code>int main( void )\n{\n  int arr[10]; // start with a 1D array for now\n\n  foo( arr );\n  return 0;\n}\n</code></pre>\n\n<p>In the function call <code>foo( arr )</code>, the <em>expression</em> <code>arr</code> has type \"10-element array of <code>int</code>\" (<code>int [10]</code>).  Since it's not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, it \"decays\" to an expression of type \"pointer to <code>int</code>\" (<code>int *</code>), and the value of the expression is the address of <code>arr[0]</code>.  </p>\n\n<p>Thus, the <em>definition</em> of <code>foo</code> would look like this:</p>\n\n<pre><code>void foo( int *a ) { ... }\n</code></pre>\n\n<p>What <code>foo</code> receives is a pointer value, not an array.  C allows you to write that prototype as</p>\n\n<pre><code>void foo( int a[] ) { ... }\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>void foo( int a[10] ) { ... }\n</code></pre>\n\n<p>But, in the context of a function parameter declaration, <code>T a[]</code> and <code>T a[N]</code> are interpreted as <code>T *a</code>; they declare <code>a</code> as a pointer to <code>T</code>, not an array of <code>T</code>.</p>\n\n<p>The subscript operator <code>[]</code> is defined in terms of pointer arithmetic - <code>a[i] == *(a + i)</code>.  This means that the <code>[]</code> operator can be applied to pointer expressions as well as array expressions; thus, <code>a[i]</code> will work<sup>2</sup> whether <code>a</code> is an array of <code>T</code> or a pointer to <code>T</code>.</p>\n\n<p>So, applying that to your code:</p>\n\n<pre><code>int main( void )\n{\n  int a, b;\n  int input[10][10]; // make input local to main\n  ...\n  matrix( a, b, input );\n  ...\n}\n\nvoid matrix( int x, int y, int (*input)[10] ) // or input[][10], or input[10][10]\n{\n  ...\n  scanf( \"%d%c\", &amp;input[i][j], &amp;c );\n  ...\n}\n</code></pre>\n\n<p>Having said that, you will want to send an extra parameter specifying the number of rows in the array:</p>\n\n<pre><code>matrix( a, b, rows, input );\n\nvoid matrix( int x, int y, size_t rows, int (*input)[10] )\n{\n  ...\n}\n</code></pre>\n\n<p>A pointer to an <code>N</code>-element array is a different type than a pointer to a <code>M</code>-element array (where <code>N != M</code>), so you can't pass anything <em>but</em> an <code>N x 10</code>-element array to <code>matrix</code>.  However, there's no way for you to know the value of <code>N</code> unless you pass it as a separate parameter.  </p>\n\n<p><strong>A note on syntax</strong></p>\n\n<p>A pointer to an array has the form <code>T (*p)[N]</code>.  The parens are required since the postfix <code>[]</code> operator has a higher precedence than the unary <code>*</code> operator.  <code>*p[N]</code> is <em>parsed</em> as <code>*(p[N])</code> - IOW, index into <code>p</code> and dereference the result.  <code>(*p)[N]</code> will first dereference <code>p</code>, then index into the result.  </p>\n\n<p>An expression of type <code>T [N][M]</code> will \"decay\" to type <code>T (*)[M]</code>.  </p>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>If you're curious <em>why</em> this is the case, check out <a href=\"https://www.bell-labs.com/usr/dmr/www/chist.html\" rel=\"nofollow noreferrer\">this paper</a> by Ritchie describing the development of C.\n<li>Assuming <code>i</code> doesn't fall outside the bounds of the array or sequence being pointed to.\n</ol>\n\n<p></sup></p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1487776842, "creation_date": 1487776842, "answer_id": 42395512, "question_id": 42392328, "link": "https://stackoverflow.com/questions/42392328/c-how-do-you-input-integers-row-by-row-into-a-2-dimensional-matrix-and-then-ge/42395512#42395512", "title": "C : How do you input integers row by row into a 2 dimensional matrix and then get it back from a function to main()?", "body": "<p>This isn't rocket science.</p>\n\n<pre><code>void matrix(int x, int y, int input[x][y])\n{\n   ... // fill up input[i][j] here\n}\n</code></pre>\n\n<p>This is possible since arrays, whenever passed to functions, decay into a pointer to the first element. So with this function you will change the contents of the original array.</p>\n"}], "owner": {"reputation": 45, "user_id": 7604801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e93638b322b818dced7eba46a68982?s=128&d=identicon&r=PG&f=1", "display_name": "user7604801", "link": "https://stackoverflow.com/users/7604801/user7604801"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1577, "favorite_count": 0, "accepted_answer_id": 42395451, "answer_count": 2, "score": 2, "last_activity_date": 1487776842, "creation_date": 1487768756, "last_edit_date": 1487769553, "question_id": 42392328, "link": "https://stackoverflow.com/questions/42392328/c-how-do-you-input-integers-row-by-row-into-a-2-dimensional-matrix-and-then-ge", "title": "C : How do you input integers row by row into a 2 dimensional matrix and then get it back from a function to main()?", "body": "<p>Edit: Ok returning the matrix bit is now ok but still can't get entering rows of values down. It still only gives one value.</p>\n\n<p>Quite new to C so apologies for the long read and terrible coding.</p>\n\n<p>This is for a homework hence why it has to be so specific but the homework reads as:</p>\n\n<p>Prompt for the size of the multiplier, which may be no bigger than ten in either dimension. Read\nthe elements by row, one row per line of input. If the\nactual input matrix has different number of row or column as specified in the former step, print an error message and end the program.</p>\n\n<p>So it needs to read in </p>\n\n<p>1 0 0</p>\n\n<p>1 0 0</p>\n\n<p>1 0 0</p>\n\n<p>and see if thats the size as declared earlier. It needs to do this for two separate matrices hence why I'm using a function, and then it will multiply the two matrices. What I currently have is </p>\n\n<pre><code>void matrix(int x, int y)\n{\n    int i, j;\n    char c;\n\n    i = 0;\n    j = 0;\n\n    while (j &lt; x)\n    {\n        while (c != '\\n')\n        {\n            scanf(\"%d%c\", &amp;input[i][j], &amp;c);\n        }\n        ++j;\n        c = 0;\n    }\n}\n</code></pre>\n\n<p>Where x and y are the size of the matrix and input[10][10] is a global array which I'm using to transfer the values out of the function to main. </p>\n\n<p>Is there a way to do this with pointers? I know there are ways of doing it but my problem is that cause its for a homework we can only use what we \"know\" so I can only use scanf to read in variables.</p>\n\n<p>Another problem I'm having is reading in the row elements, it only accepts the last element I input (which it takes as the first element) and leaves the rest blank.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3, "user_id": 7604557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ASYbvG2_3tI/AAAAAAAAAAI/AAAAAAAAAL4/M_HUOepT1Oo/photo.jpg?sz=128", "display_name": "Hashan Kavinda", "link": "https://stackoverflow.com/users/7604557/hashan-kavinda"}, "edited": false, "score": 0, "creation_date": 1487766871, "post_id": 42391222, "comment_id": 71930646, "body": "In this case,I really want to print something and delete it ; and again print something where I printed earlier.Let&#39;s say I want to print &quot;current time&quot;.Something like that.Is there a method I can use?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1487768068, "post_id": 42391222, "comment_id": 71931536, "body": "Try using a utility like <a href=\"http://www.figlet.org/\" rel=\"nofollow noreferrer\">figlet</a> or <a href=\"http://caca.zoy.org/wiki/toilet\" rel=\"nofollow noreferrer\">toilet</a>. With a suitable font, it should be possible to draw large characters from fixed-width blocks like \u25a0. Alternatively, use <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI escape codes</a> to draw spaces with different background colours."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7604557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ASYbvG2_3tI/AAAAAAAAAAI/AAAAAAAAAL4/M_HUOepT1Oo/photo.jpg?sz=128", "display_name": "Hashan Kavinda", "link": "https://stackoverflow.com/users/7604557/hashan-kavinda"}, "edited": false, "score": 0, "creation_date": 1487766566, "post_id": 42391318, "comment_id": 71930410, "body": "I will look forward to use Drawille.thanks"}], "tags": [], "owner": {"reputation": 272630, "user_id": 105929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414213a8181616151fe73334532746ab?s=128&d=identicon&r=PG", "display_name": "Remus Rusanu", "link": "https://stackoverflow.com/users/105929/remus-rusanu"}, "is_accepted": false, "score": 1, "last_activity_date": 1487766783, "last_edit_date": 1487766783, "creation_date": 1487766000, "answer_id": 42391318, "question_id": 42391222, "link": "https://stackoverflow.com/questions/42391222/format-fonts-in-a-linux-terminal/42391318#42391318", "title": "Format fonts in a Linux terminal", "body": "<p>Linux terminal can display only characters. Any art you want to draw on a terminal must be rendered using characters. The shape of the characters displayed is controlled by the user via terminal settings, not by you nor your code.</p>\n\n<p>There are libraries that make pixel drawing using characters in termnal easier, like <a href=\"https://github.com/asciimoo/drawille\" rel=\"nofollow noreferrer\">Drawille</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7604557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ASYbvG2_3tI/AAAAAAAAAAI/AAAAAAAAAL4/M_HUOepT1Oo/photo.jpg?sz=128", "display_name": "Hashan Kavinda", "link": "https://stackoverflow.com/users/7604557/hashan-kavinda"}, "edited": false, "score": 0, "creation_date": 1487766501, "post_id": 42391330, "comment_id": 71930367, "body": "I wanna use Ascii Art.thanks"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 3, "user_id": 7604557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ASYbvG2_3tI/AAAAAAAAAAI/AAAAAAAAAL4/M_HUOepT1Oo/photo.jpg?sz=128", "display_name": "Hashan Kavinda", "link": "https://stackoverflow.com/users/7604557/hashan-kavinda"}, "edited": false, "score": 0, "creation_date": 1487766723, "post_id": 42391330, "comment_id": 71930542, "body": "If my answer fits, you could accept it."}, {"owner": {"reputation": 3, "user_id": 7604557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ASYbvG2_3tI/AAAAAAAAAAI/AAAAAAAAAL4/M_HUOepT1Oo/photo.jpg?sz=128", "display_name": "Hashan Kavinda", "link": "https://stackoverflow.com/users/7604557/hashan-kavinda"}, "edited": false, "score": 0, "creation_date": 1488539302, "post_id": 42391330, "comment_id": 72287260, "body": "thanks.ncurses would do the work"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 2, "last_activity_date": 1487766018, "creation_date": 1487766018, "answer_id": 42391330, "question_id": 42391222, "link": "https://stackoverflow.com/questions/42391222/format-fonts-in-a-linux-terminal/42391330#42391330", "title": "Format fonts in a Linux terminal", "body": "<p>Fonts do not exist in the standard <a href=\"https://en.wikipedia.org/wiki/C11_(C_standard_revision)\" rel=\"nofollow noreferrer\">C11</a> or <a href=\"https://en.wikipedia.org/wiki/C99\" rel=\"nofollow noreferrer\">C99</a> programming language specification(s).</p>\n\n<p>If you are writing a graphical application in C for Linux, consider using some library like <a href=\"http://gtk.org/\" rel=\"nofollow noreferrer\">GTK</a>, <a href=\"https://www.libsdl.org/\" rel=\"nofollow noreferrer\">libSDL</a>, etc...</p>\n\n<p>If you want to do some <a href=\"https://en.wikipedia.org/wiki/ASCII_art\" rel=\"nofollow noreferrer\">Ascii Art</a> in a terminal (read the <a href=\"http://www.linusakesson.net/programming/tty/\" rel=\"nofollow noreferrer\">tty demystified</a> webpage), be aware of <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI escape codes</a> and consider using some terminal output library like <a href=\"https://www.gnu.org/software/ncurses/\" rel=\"nofollow noreferrer\">ncurses</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 7604557, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ASYbvG2_3tI/AAAAAAAAAAI/AAAAAAAAAL4/M_HUOepT1Oo/photo.jpg?sz=128", "display_name": "Hashan Kavinda", "link": "https://stackoverflow.com/users/7604557/hashan-kavinda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1487766197, "accepted_answer_id": 42391330, "answer_count": 2, "score": -3, "last_activity_date": 1487766783, "creation_date": 1487765788, "last_edit_date": 1487765895, "question_id": 42391222, "link": "https://stackoverflow.com/questions/42391222/format-fonts-in-a-linux-terminal", "closed_reason": "Needs more focus", "title": "Format fonts in a Linux terminal", "body": "<p>How can I format fonts in a Linux terminal using C?</p>\n\n<p><img src=\"https://i.stack.imgur.com/xd15M.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "ls"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487765722, "post_id": 42391151, "comment_id": 71929794, "body": "<i>Why</i> would you use <code>lstat</code> when it&#39;s obviously not the right function to use? Why not use <code>stat</code> which <i>will</i> follow the link?"}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487766154, "post_id": 42391151, "comment_id": 71930118, "body": "Well actually it&#39;s because I got confused ! I though that <code>lstat</code> follow the link and <code>stat</code> not !"}, {"owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "edited": false, "score": 1, "creation_date": 1487766551, "post_id": 42391151, "comment_id": 71930398, "body": "In any case, to get the path you&#39;d use readlink, it&#39;s not returned by any of the stat functions"}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "edited": false, "score": 0, "creation_date": 1487766674, "post_id": 42391151, "comment_id": 71930500, "body": "Thank you, I&#39;ll try to search the web to see how it works"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1487767111, "post_id": 42391151, "comment_id": 71930817, "body": "<a href=\"http://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\">The manual page</a> is usually a good place to start."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "is_accepted": true, "score": 0, "last_activity_date": 1487768729, "creation_date": 1487768729, "answer_id": 42392325, "question_id": 42391151, "link": "https://stackoverflow.com/questions/42391151/how-to-get-the-path-of-the-final-final-point-by-a-symbolic-link-using-stat/42392325#42392325", "title": "How to get the path of the final final point by a symbolic link using `stat`", "body": "<p>So to summarize :</p>\n\n<p>It's impossible to get the name of the file/folder pointed by a symbolic link, using <code>lstat</code> or <code>stat</code>.</p>\n\n<p>The function readlink can do the job => Man : <a href=\"http://man7.org/linux/man-pages/man2/readlink.2.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man2/readlink.2.html</a>. You will get example in the man</p>\n\n<p>Thank you for helping me solve my problem</p>\n"}], "owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 42392325, "answer_count": 1, "score": 0, "last_activity_date": 1487768729, "creation_date": 1487765589, "last_edit_date": 1487766511, "question_id": 42391151, "link": "https://stackoverflow.com/questions/42391151/how-to-get-the-path-of-the-final-final-point-by-a-symbolic-link-using-stat", "title": "How to get the path of the final final point by a symbolic link using `stat`", "body": "<p>I try to get the name of the folder / file pointed by the symbolic link.</p>\n\n<p>For example, when you do <code>ls -l</code>\nYou can get this result</p>\n\n<pre><code>-rw-r--r--  1 macos  staff  0 Feb 22 12:05 test\nlrwxr-xr-x  1 macos  staff  7 Feb 19 11:05 sl -&gt; test\n</code></pre>\n\n<p>How could I do, if I know the path of sl to get the file/folder here it pointed to ?</p>\n\n<p>I want to do it using <code>stat</code> if possible.</p>\n\n<p>Any suggestion ?</p>\n"}, {"tags": ["c", "logistic-regression"], "comments": [{"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 2, "creation_date": 1487764916, "post_id": 42390851, "comment_id": 71929200, "body": "arrx[2]=arry[i+7]"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 3, "creation_date": 1487764926, "post_id": 42390851, "comment_id": 71929208, "body": "Maybe <code>prob[2]=prob_base[hours+7]</code>?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1487765047, "post_id": 42390851, "comment_id": 71929307, "body": "Off-topic: this should go on code review. By the way, they is no keyword <code>elif</code> in C."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1487765080, "post_id": 42390851, "comment_id": 71929329, "body": "You don&#39;t see the pattern here?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1487767732, "post_id": 42390851, "comment_id": 71931261, "body": "@Stargateur negative, this <b>definitely</b> must not go to code review as it doesn&#39;t <b>work</b>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7140191"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1487767791, "post_id": 42390851, "comment_id": 71931291, "body": "@Stargateur Yes, I add a <code>#define elif else if</code> before."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7140191"}, "reply_to_user": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1487767921, "post_id": 42390851, "comment_id": 71931394, "body": "@huseyintugrulbuyukisik thank you very much"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7140191"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1487768009, "post_id": 42390851, "comment_id": 71931474, "body": "@Jean-BaptisteYun&#232;s thank you very much"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1487768025, "post_id": 42390851, "comment_id": 71931498, "body": "@AnttiHaapala Sorry, what doesn&#39;t work? The forgot <code>#define elif else if</code>? This is trivial."}], "answers": [{"tags": [], "owner": {"reputation": 21664, "user_id": 26742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e55b3f0161d8b3b4f573a655679220d?s=128&d=identicon&r=PG", "display_name": "Sani Singh Huttunen", "link": "https://stackoverflow.com/users/26742/sani-singh-huttunen"}, "is_accepted": false, "score": 2, "last_activity_date": 1487765177, "creation_date": 1487765177, "answer_id": 42390999, "question_id": 42390851, "link": "https://stackoverflow.com/questions/42390851/is-there-any-way-to-make-this-c-switch-case-more-simple/42390999#42390999", "title": "Is there any way to make this C switch case more simple?", "body": "<p>Something like this:</p>\n\n<pre><code>if (hours &gt;= 0 &amp;&amp; hours &lt; 24)\n  prob[2] = prob_base[hours + 7];\nelse\n  prob[2] = 0;\n\nprob[3] = prob_base[31] * atof(bidf);\n\nif (isp &gt;= 1 &amp;&amp; isp &lt; 4)\n  prob[4] = prob_base[isp + 31];\nelse\n  prob[4] = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7207, "user_id": 743290, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4e19b7e5dbf742b9cce6981a0956f700?s=128&d=identicon&r=PG", "display_name": "Vineet1982", "link": "https://stackoverflow.com/users/743290/vineet1982"}, "is_accepted": false, "score": -1, "last_activity_date": 1487765228, "creation_date": 1487765228, "answer_id": 42391019, "question_id": 42390851, "link": "https://stackoverflow.com/questions/42390851/is-there-any-way-to-make-this-c-switch-case-more-simple/42391019#42391019", "title": "Is there any way to make this C switch case more simple?", "body": "<pre><code>//hours\nprob[2] = prob_base[hours+7];          //no switch required\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7140191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1487768093, "creation_date": 1487764845, "last_edit_date": 1487768093, "question_id": 42390851, "link": "https://stackoverflow.com/questions/42390851/is-there-any-way-to-make-this-c-switch-case-more-simple", "title": "Is there any way to make this C switch case more simple?", "body": "<p>I used the logistic-regression model to get a formula. Because I took every hour as a factor, so this switch-case very long, inconvenient to modify, and not beautiful. Is there a way to simplify it? Maybe I should try to use matrices for arithmetic?</p>\n\n<pre><code>...\n#define elif else if\n...\n// hours\nswitch (hours) {\n    case 0:\n        prob[2] = prob_base[7];\n        break;\n    case 1:\n        prob[2] = prob_base[8];\n        break;\n    case 2:\n        prob[2] = prob_base[9];\n        break;\n    case 3:\n        prob[2] = prob_base[10];\n        break;\n    case 4:\n        prob[2] = prob_base[11];\n        break;\n    case 5:\n        prob[2] = prob_base[12];\n        break;\n    case 6:\n        prob[2] = prob_base[13];\n        break;\n    case 7:\n        prob[2] = prob_base[14];\n        break;\n    case 8:\n        prob[2] = prob_base[15];\n        break;\n    case 9:\n        prob[2] = prob_base[16];\n        break;\n    case 10:\n        prob[2] = prob_base[17];\n        break;\n    case 11:\n        prob[2] = prob_base[18];\n        break;\n    case 12:\n        prob[2] = prob_base[19];\n        break;\n    case 13:\n        prob[2] = prob_base[20];\n        break;\n    case 14:\n        prob[2] = prob_base[21];\n        break;\n    case 15:\n        prob[2] = prob_base[22];\n        break;\n    case 16:\n        prob[2] = prob_base[23];\n        break;\n    case 17:\n        prob[2] = prob_base[24];\n        break;\n    case 18:\n        prob[2] = prob_base[25];\n        break;\n    case 19:\n        prob[2] = prob_base[26];\n        break;\n    case 20:\n        prob[2] = prob_base[27];\n        break;\n    case 21:\n        prob[2] = prob_base[28];\n        break;\n    case 22:\n        prob[2] = prob_base[29];\n        break;\n    case 23:\n        prob[2] = prob_base[30];\n        break;\n    default:\n        prob[2] = 0;\n        break;\n}\n\n// bidf\nprob[3] = prob_base[31] * atof(bidf);\n\n// isp\nswitch (isp) {\n    case 1:\n        prob[4] = prob_base[32];\n        break;\n    case 2:\n        prob[4] = prob_base[33];\n        break;\n    case 3:\n        prob[4] = prob_base[34];\n        break;\n    default:\n        prob[4] = 0;\n        break;\n}\n...\n</code></pre>\n"}, {"tags": ["c++", "c", "qt", "qsharedmemory"], "comments": [{"owner": {"reputation": 411, "user_id": 5354875, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153659018198750/picture?type=large", "display_name": "koksalb", "link": "https://stackoverflow.com/users/5354875/koksalb"}, "edited": false, "score": 0, "creation_date": 1487765115, "post_id": 42390672, "comment_id": 71929357, "body": "there are 2 things i think might cause problems. One, do you detach the memory when you are over with it? two, do you use semaphore signals to prevent multiple access to the memory at the same time? and for the attaching i dont know any function you can use that doesnt require the size of the area. But &quot;maybe&quot; you can try to create another area with only one integer(or something) to hold the size of the first one. And use it to attach it afterwards. good luck"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487766971, "post_id": 42390672, "comment_id": 71930717, "body": "What OS?  Assuming you have the <code>ipcs</code> utility, what&#39;s the output from <code>ipcs -a</code>?  That should show all SysV shared memory segments on your machine."}, {"owner": {"reputation": 167, "user_id": 7604448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7762af9912b0fc298421cc88a098c564?s=128&d=identicon&r=PG&f=1", "display_name": "mvollmer", "link": "https://stackoverflow.com/users/7604448/mvollmer"}, "reply_to_user": {"reputation": 411, "user_id": 5354875, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153659018198750/picture?type=large", "display_name": "koksalb", "link": "https://stackoverflow.com/users/5354875/koksalb"}, "edited": false, "score": 0, "creation_date": 1487831967, "post_id": 42390672, "comment_id": 71963798, "body": "@koksalb We can talk about detaching and semaphores when the shared memory was successfully attached. But at this state this doesnt matter.."}, {"owner": {"reputation": 167, "user_id": 7604448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7762af9912b0fc298421cc88a098c564?s=128&d=identicon&r=PG&f=1", "display_name": "mvollmer", "link": "https://stackoverflow.com/users/7604448/mvollmer"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1487832308, "post_id": 42390672, "comment_id": 71963936, "body": "@AndrewHenle I&#39;m using Linux Mint. Im already using ipcs.       <code>0x01013c3f 1048586    mvollmer   600        23720      1                 0x13013c51 1507340    mvollmer   600        23720      1   </code>  1048586 created by Application 1 and 1507340 is created by QT."}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 7604448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7762af9912b0fc298421cc88a098c564?s=128&d=identicon&r=PG&f=1", "display_name": "mvollmer", "link": "https://stackoverflow.com/users/7604448/mvollmer"}, "edited": false, "score": 1, "creation_date": 1487835532, "post_id": 42391864, "comment_id": 71965539, "body": "Thanks for pointing this out. But this doesnt work. <code>setNativeKey()</code> is detaching the new created shared memory. <code>QSharedMemory shmem(key);     shmem.create(SHM_DATASIZE);     shmem.setNativeKey(native_key);</code>  So it seems that its not possible to access shared memorys which were not created by QSharedMemory.  The only way is to create a SharedMemory with QSharedMemory and access it from an other application. This is kinda weird."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 167, "user_id": 7604448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7762af9912b0fc298421cc88a098c564?s=128&d=identicon&r=PG&f=1", "display_name": "mvollmer", "link": "https://stackoverflow.com/users/7604448/mvollmer"}, "edited": false, "score": 0, "creation_date": 1487846646, "post_id": 42391864, "comment_id": 71972495, "body": "@mvollmer If you can get the actual key from the <code>QSharedMemory</code> segment and pass that to your non-Qt application, that application should be able to use that key directly.  Once you create the segment in Qt, <a href=\"http://man7.org/linux/man-pages/man1/ipcs.1.html\" rel=\"nofollow noreferrer\">you can use <code>ipcs -m</code></a> to view details on all shared memory segments."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 2, "last_activity_date": 1487767470, "creation_date": 1487767470, "answer_id": 42391864, "question_id": 42390672, "link": "https://stackoverflow.com/questions/42390672/attach-existing-shared-memory-with-qsharedmemory/42391864#42391864", "title": "Attach existing Shared Memory with QSharedMemory", "body": "<p>You're not accessing the same shared memory segment.  Qt modifies the key you pass it, and the result is a different key and therefore shared memory id.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qsharedmemory.html\" rel=\"nofollow noreferrer\">Per the QSharedMemory documentation</a>:</p>\n\n<blockquote>\n  <p><strong>Warning</strong>: QSharedMemory changes the key in a Qt-specific way, unless otherwise specified. Interoperation with non-Qt applications is\n  achieved by first creating a default shared memory with\n  <code>QSharedMemory()</code> and then setting a native key with <code>setNativeKey()</code>.\n  When using native keys, shared memory is not protected against\n  multiple accesses on it (for example, unable to <code>lock()</code>) and a\n  user-defined mechanism should be used to achieve such protection.</p>\n</blockquote>\n\n<p>It would seem that you need to create the shared memory segment using <code>QSharedMemory</code>, set a new key using <code>setNativeKey()</code>, then attach to that memory from outside of <code>QSharedMemory</code>.</p>\n"}], "owner": {"reputation": 167, "user_id": 7604448, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7762af9912b0fc298421cc88a098c564?s=128&d=identicon&r=PG&f=1", "display_name": "mvollmer", "link": "https://stackoverflow.com/users/7604448/mvollmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1912, "favorite_count": 1, "accepted_answer_id": 42391864, "answer_count": 1, "score": 1, "last_activity_date": 1487767470, "creation_date": 1487764455, "last_edit_date": 1487764508, "question_id": 42390672, "link": "https://stackoverflow.com/questions/42390672/attach-existing-shared-memory-with-qsharedmemory", "title": "Attach existing Shared Memory with QSharedMemory", "body": "<p>In Application 1(C Code) im creating a shared memory like this:</p>\n\n<pre><code>char * key_path = \"/tmp/shmem\";\n\nint file = open(key_path, O_CREAT | O_RDWR | O_APPEND, 0755);\nclose(file);\nkey_t key = ftok(key_path, 1);\n\nshmid = shmget (key, SHM_DATASIZE , IPC_CREAT | SHM_R | SHM_W);\nshmdata = shmat(shmid, NULL, 0);shmid);\n</code></pre>\n\n<p>In Application 2(QT) i want to access this SharedMemory</p>\n\n<pre><code>const char* native_key = \"/tmp/shmem\";\n\nkey_t ft_key = ftok(native_key, 1);\nkey = QString::number(ft_key);\n\nQSharedMemory shmem(key);\nif(!shmem.attach()) {\n    qDebug() &lt;&lt; \"attach failed\" &lt;&lt; shmem.errorString()  &lt;&lt; shmem.key() &lt;&lt; shmem.nativeKey() &lt;&lt; endl;\n}\n</code></pre>\n\n<blockquote>\n  <p>attach failed \"QSharedMemory::attach (shmget): doesn't exist\" \"16858191\" \"/tmp/qipc_sharedmemory_24384b85e5d54b23bd4f84f14de71b10d4801666\" </p>\n</blockquote>\n\n<p>So i've tried the following</p>\n\n<pre><code>const char* native_key = \"/tmp/shmem\";\n\nkey_t ft_key = ftok(native_key, 1);\nkey = QString::number(ft_key);\n\nQSharedMemory shmem(key);\nshmem.setNativeKey(native_key);\nif(!shmem.attach()) {\n    qDebug() &lt;&lt; \"attach failed\" &lt;&lt; shmem.errorString()  &lt;&lt; shmem.key() &lt;&lt; shmem.nativeKey() &lt;&lt; endl;\n}\n</code></pre>\n\n<blockquote>\n  <p>attach failed \"QSharedMemory::attach (shmget): doesn't exist\" \"\"\n  \"/tmp/shmem_prot\"</p>\n</blockquote>\n\n<p>I've taken a look at the source of <a href=\"http://code.qt.io/cgit/qt/qt.git/plain/src/corelib/kernel/qsharedmemory_unix.cpp\" rel=\"nofollow noreferrer\">qsharedmemory_unix.cpp</a></p>\n\n<p>I think the Problem is that unix_key is not set, so that shmget in attach() will fail. handle() is private, so i cant call this function to set the unix_key.</p>\n\n<p>Is it possible to access the shared memory without knowing the size of it / calling create()?</p>\n\n<p>When i try to call create() </p>\n\n<pre><code>QSharedMemory shmem(key);\nshmem.create(SHM_DATASIZE);\n</code></pre>\n\n<p>a new shared memory will created...</p>\n\n<p>What am I doing wrong? Thanks in advance.</p>\n"}, {"tags": ["c", "wix", "custom-function"], "comments": [{"owner": {"reputation": 15266, "user_id": 89999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e95045ab2611253f7dcd8b71e2174c?s=128&d=identicon&r=PG", "display_name": "Michael Urman", "link": "https://stackoverflow.com/users/89999/michael-urman"}, "edited": false, "score": 0, "creation_date": 1487769698, "post_id": 42390535, "comment_id": 71932769, "body": "I would suggest simplifying your assumptions, and thus the question. Instead of invoking a DLL, just use a type 51 SetProperty CA. And compare against just setting the property in the package itself, or from the command line. (I believe there&#39;s an ordering issue possible with feature conditions, but I thought it had to do with its schedule relative to file costing.)"}, {"owner": {"reputation": 3065, "user_id": 1604592, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rxTAF.jpg?s=128&g=1", "display_name": "Andre Polykanine", "link": "https://stackoverflow.com/users/1604592/andre-polykanine"}, "reply_to_user": {"reputation": 15266, "user_id": 89999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e95045ab2611253f7dcd8b71e2174c?s=128&d=identicon&r=PG", "display_name": "Michael Urman", "link": "https://stackoverflow.com/users/89999/michael-urman"}, "edited": false, "score": 0, "creation_date": 1487952071, "post_id": 42390535, "comment_id": 72029836, "body": "@Michael Urman It is a training project. In a real project I would handle several values of a property. So I would like to find out what I am doing wrong in these circumstances."}, {"owner": {"reputation": 15266, "user_id": 89999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e95045ab2611253f7dcd8b71e2174c?s=128&d=identicon&r=PG", "display_name": "Michael Urman", "link": "https://stackoverflow.com/users/89999/michael-urman"}, "edited": false, "score": 0, "creation_date": 1487972156, "post_id": 42390535, "comment_id": 72041122, "body": "Assuming you mean your CA would set the property to one of several different values, that&#39;s all well and good, but it doesn&#39;t seem like your question is really about the CA. So, again, start by testing when you can get the effect you want based on the value of the property. Timing in the sequence can be very important."}, {"owner": {"reputation": 3065, "user_id": 1604592, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rxTAF.jpg?s=128&g=1", "display_name": "Andre Polykanine", "link": "https://stackoverflow.com/users/1604592/andre-polykanine"}, "reply_to_user": {"reputation": 15266, "user_id": 89999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e95045ab2611253f7dcd8b71e2174c?s=128&d=identicon&r=PG", "display_name": "Michael Urman", "link": "https://stackoverflow.com/users/89999/michael-urman"}, "edited": false, "score": 0, "creation_date": 1488061352, "post_id": 42390535, "comment_id": 72066742, "body": "according to the MSI log (see updated question) the property is set before any activity with any feature. The property is set at 10:21:42:357, the features are first used at 10:21:42:361 and the installation of the features starts at 10:20:59. Any further ideas, please?"}, {"owner": {"reputation": 15266, "user_id": 89999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e95045ab2611253f7dcd8b71e2174c?s=128&d=identicon&r=PG", "display_name": "Michael Urman", "link": "https://stackoverflow.com/users/89999/michael-urman"}, "edited": false, "score": 0, "creation_date": 1488202768, "post_id": 42390535, "comment_id": 72114001, "body": "Is the behavior different if you run it as <code>msiexec &#47;i your.msi DEVICETYPE=3</code>? If so, you have an ordering issue. If not, you have a problem with how you condition against the property."}], "owner": {"reputation": 3065, "user_id": 1604592, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rxTAF.jpg?s=128&g=1", "display_name": "Andre Polykanine", "link": "https://stackoverflow.com/users/1604592/andre-polykanine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488061269, "creation_date": 1487764116, "last_edit_date": 1488061269, "question_id": 42390535, "link": "https://stackoverflow.com/questions/42390535/why-does-wix-ignore-a-custom-function", "title": "Why does WiX ignore a custom function?", "body": "<p>I have created a sample WiX project to test C-based custom actions. Here is the C code of the custom action function DLL:</p>\n\n<pre><code>unsigned WINAPI SetDeviceType (MSIHANDLE installer) {\n    MsiSetProperty(installer, TEXT(\"DEVICETYPE\"), TEXT(\"3\"));\n    return(ERROR_SUCCESS);\n}\n</code></pre>\n\n<p>and here are the  important parts of my WiX project:</p>\n\n<pre><code>&lt;Binary Id=\"Message\" SourceFile=\"Message.dll\" /&gt;\n&lt;Directory Id=\"TARGETDIR\" Name=\"SourceDir\"&gt;\n    &lt;Directory Id=\"ProgramFilesFolder\"&gt;\n        &lt;Directory Id=\"CompanyFolder\" Name=\"MyCompany\"&gt;\n            &lt;Directory Id=\"APPLICATIONROOTDIRECTORY\" Name=\"Test\"&gt;\n                &lt;Component Id=\"TestFolder\" Guid=\"c54ec545-4074-424f-a54e-b57f375ed3fc\"&gt;\n                    &lt;File Id=\"Setup_wixproj\" Source=\"setup.wixproj\" Vital=\"yes\" /&gt;\n                &lt;/Component&gt;\n                &lt;Component Id=\"TestFolder1\" Guid=\"c54ec5f5-4074-424f-a54e-b57f375ed3fc\"&gt;\n                    &lt;File Id=\"Setup1_wixproj\" Source=\"setup1.wixproj\" Vital=\"yes\" /&gt;\n                &lt;/Component&gt;\n            &lt;/Directory&gt;\n        &lt;/Directory&gt;\n    &lt;/Directory&gt;\n&lt;/Directory&gt;\n&lt;Feature Id=\"AllFeature\" Title=\"All\" Level=\"1\"&gt;\n    &lt;Feature Id=\"TempFeature\" Title=\"Temp\" Level=\"1\"&gt;\n        &lt;ComponentRef Id=\"TestFolder\" /&gt;\n        &lt;Condition Level=\"0\"&gt;\n            &lt;![CDATA[DEVICETYPE &lt;&gt; 3]]&gt;\n        &lt;/Condition&gt;\n    &lt;/Feature&gt;\n    &lt;Feature Id=\"AlwaysFeature\" Title=\"Always\" Level=\"1\"&gt;\n        &lt;ComponentRef Id=\"TestFolder1\" /&gt;\n    &lt;/Feature&gt;\n&lt;/Feature&gt;\n&lt;InstallExecuteSequence&gt;\n    &lt;Custom Action=\"Launch\" After=\"AppSearch\" /&gt;\n&lt;/InstallExecuteSequence&gt;\n&lt;CustomAction Id=\"Launch\" BinaryKey=\"Message\" DllEntry=\"SetDeviceType\" Return=\"check\" Execute=\"immediate\" HideTarget=\"no\" /&gt;\n</code></pre>\n\n<p>Meaningful excerpts of the MSI log are given below.<br>\n[...]</p>\n\n<pre><code>Action start 10:21:42: Launch.\nMSI (s) (E4:48) [10:21:42:319]: Invoking remote custom action. DLL: C:\\Windows\\Installer\\MSIE532.tmp, Entrypoint: SetDeviceType\nMSI (s) (E4:E4) [10:21:42:320]: Generating random cookie.\nMSI (s) (E4:E4) [10:21:42:321]: Created Custom Action Server with PID 3000 (0xBB8).\nMSI (s) (E4:54) [10:21:42:344]: Running as a service.\nMSI (s) (E4:54) [10:21:42:345]: Hello, I'm your 32bit Impersonated custom action server.\nMSI (s) (E4!44) [10:21:42:357]: PROPERTY CHANGE: Adding DEVICETYPE property. Its value is '3'.\nAction ended 10:21:42: Launch. Return value 1.\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>Action start 10:21:42: InstallValidate.\nMSI (s) (E4:8C) [10:21:42:361]: PROPERTY CHANGE: Deleting MsiRestartManagerSessionKey property. Its current value is 'ec922ccc9406da4baac466ba2db559b9'.\nMSI (s) (E4:8C) [10:21:42:361]: Note: 1: 2205 2:  3: Dialog \nMSI (s) (E4:8C) [10:21:42:361]: Feature: TempFeature; Installed: Absent;   Request: Null;   Action: Null\nMSI (s) (E4:8C) [10:21:42:361]: Feature: AllFeature; Installed: Absent;   Request: Local;   Action: Local\nMSI (s) (E4:8C) [10:21:42:361]: Feature: AlwaysFeature; Installed: Absent;   Request: Local;   Action: Local\nMSI (s) (E4:8C) [10:21:42:361]: Component: TestFolder; Installed: Absent;   Request: Null;   Action: Null\nMSI (s) (E4:8C) [10:21:42:361]: Component: TestFolder1; Installed: Absent;   Request: Local;   Action: Local\nMSI (s) (E4:8C) [10:21:42:361]: Note: 1: 2205 2:  3: Registry \nMSI (s) (E4:8C) [10:21:42:361]: Note: 1: 2205 2:  3: BindImage \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: ProgId \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: PublishComponent \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: SelfReg \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: Extension \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: Font \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: Shortcut \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: Class \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: Icon \nMSI (s) (E4:8C) [10:21:42:362]: Note: 1: 2205 2:  3: TypeLib \nMSI (s) (E4:8C) [10:21:42:365]: Note: 1: 2205 2:  3: _RemoveFilePath \nMSI (s) (E4:8C) [10:21:42:366]: PROPERTY CHANGE: Modifying CostingComplete property. Its current value is '0'. Its new value: '1'.\nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: Registry \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: BindImage \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: ProgId \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: PublishComponent \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: SelfReg \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: Extension \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: Font \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: Shortcut \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: Class \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: Icon \nMSI (s) (E4:8C) [10:21:42:366]: Note: 1: 2205 2:  3: TypeLib \nMSI (s) (E4:8C) [10:21:42:367]: Note: 1: 2727 2:  \nMSI (s) (E4:8C) [10:21:42:367]: Note: 1: 2205 2:  3: FilesInUse \nMSI (s) (E4:8C) [10:21:42:371]: Note: 1: 2727 2:  \nAction ended 10:21:42: InstallValidate. Return value 1.\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>Action start 10:20:59: ExecuteAction.\n</code></pre>\n\n<p>[...]</p>\n\n<p>According to the MSI log The custom action function is called and the property is set. But the condition in the <code>feature</code> is never met and the file is not installed. If I remove the condition, both files are installed.<br>\nWhy does it behave like this?</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1487761720, "post_id": 42389491, "comment_id": 71926903, "body": "We need to see the <i>smallest</i> bit of code wrapped in an <code>int main()</code> that exhibits this problem in order to help you."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1487761727, "post_id": 42389491, "comment_id": 71926906, "body": "This looks like undefined behavior. Maybe some variable which is not initialized and you get away with it on one computer and not on the other one. Whithout seeing your actual program we can&#39;t say much more."}, {"owner": {"reputation": 1372, "user_id": 3725077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/790641837/picture?type=large", "display_name": "Sitram", "link": "https://stackoverflow.com/users/3725077/sitram"}, "edited": false, "score": 1, "creation_date": 1487761791, "post_id": 42389491, "comment_id": 71926959, "body": "You should post some kind of code snippet because your question is too vague."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1487761822, "post_id": 42389491, "comment_id": 71926983, "body": "Compile with all warnings enabled."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487762515, "post_id": 42389491, "comment_id": 71927472, "body": "Hint: google &quot;c undefined behaviour&quot;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487765340, "post_id": 42389491, "comment_id": 71929528, "body": "You don&#39;t seem to allocate any memory for the <code>y</code> member anywhere."}, {"owner": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487765927, "post_id": 42389491, "comment_id": 71929947, "body": "@Lundin , y is an input from the main function - I&#39;ve passed a pointer to the array Y, by pointing p to the i&#39;th row of Y in <code>p = &amp;Y[i][0];</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487767371, "post_id": 42389491, "comment_id": 71931008, "body": "Overall this program is very hard to follow. Try to keep things simple and use intuitive variable names. I suspect you have a large amount of subtle bugs lurking in this code."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1487767382, "post_id": 42389491, "comment_id": 71931019, "body": "<code>array_mul()</code> and <code>array_add()</code> are not used you should remove them and remove useless comment in your code like <code>&#47;&#47; printf(&quot;final result : addition %f  &quot;, addition[i]);</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": true, "score": 3, "last_activity_date": 1487767083, "last_edit_date": 1495539971, "creation_date": 1487767083, "answer_id": 42391726, "question_id": 42389491, "link": "https://stackoverflow.com/questions/42389491/c-code-for-numerical-integration-works-on-one-computer-but-blows-up-on-another/42391726#42391726", "title": "C Code for numerical integration works on one computer but blows up on another", "body": "<p>You have a problem of lifetime with your variable <code>yout</code> in <code>integrator_rk4()</code>. You assign address of <code>yout</code> to <code>ty1.y</code> but you use it outside this function. This is undefined behavior.</p>\n\n<p>quick fix:</p>\n\n<pre><code>struct t_y_couple {\n  float t;\n  float y[2];\n};\n\nstruct t_y_couple integrator_rk4(float dt, float t, float y[2]) {\n  float y1[2], y2[2], y3[2], yout[2];\n\n  // ...\n\n  ty1.t = tout;\n  ty1.y[0] = yout[0];\n  ty1.y[1] = yout[1];\n\n  return ty1;\n}\n</code></pre>\n\n<p>You have a lot of useless allocation and you made \"spaghetti code\" with your global variable. <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">You should not cast the return of malloc</a>.</p>\n"}], "owner": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1487768019, "accepted_answer_id": 42391726, "answer_count": 1, "score": -4, "last_activity_date": 1487767695, "creation_date": 1487761558, "last_edit_date": 1487767695, "question_id": 42389491, "link": "https://stackoverflow.com/questions/42389491/c-code-for-numerical-integration-works-on-one-computer-but-blows-up-on-another", "closed_reason": "Not suitable for this site", "title": "C Code for numerical integration works on one computer but blows up on another", "body": "<p>I have written a code for a simple pendulum with numerical integration using rk4 method. <a href=\"https://i.stack.imgur.com/ppgyt.png\" rel=\"nofollow noreferrer\">Here's an image of expected result.</a>\nIt works on my laptop, running Ubuntu 14.04, 64 bit, (it gives a sine wave as the result), but doesn't work on my PC, which runs Debian 8 and is also 64 bit.\n<a href=\"https://i.stack.imgur.com/LKPXM.png\" rel=\"nofollow noreferrer\">Here's an image of the wrong plot.</a>\nAny reason why this would be happening?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint N = 2;\n\nfloat h = 0.001;\n\nstruct t_y_couple {\n  float t;\n  float *y;\n};\n\n\nstruct t_y_couple integrator_rk4(float dt, float t, float *p1);\n\nvoid oscnetwork_opt(float t, float *y, float *dydt);\n\nint main(void) {\n  /* initializations*/\n  struct t_y_couple t_y;\n\n  int i, iter, j;\n\n  //  time span for which to run simulation\n  int tspan = 20;\n\n  //  total number of time iterations = tspan*step_size\n  int tot_time = (int)ceil(tspan / h);\n\n  //  Time array\n  float T[tot_time];\n\n  //  pointer definitions\n  float *p, *q;\n\n  //  vector to hold values for each differential variable for all time\n  //  iterations\n  float Y[tot_time][2];\n  //  N = total number of coupled differential equations to solve\n\n  //  initial conditions vector for time = 0\n\n  Y[0][0] = 0;\n  Y[0][1] = 3.14;\n  //  set the time array\n  T[0] = 0;\n\n  //  This loop calls the RK4 code\n  for (i = 0; i &lt; tot_time - 1; i++) {\n    p = &amp;Y[i][0];     // current time\n    q = &amp;Y[i + 1][0]; // next time step\n                      //      printf(\"\\n\\n\");\n                      //      for (j=0;j&lt;N;j++)\n\n    //      call the RK4 integrator with current time value, and current\n    //      values of voltage\n    t_y = integrator_rk4(h, T[i], p);\n\n    //      Return the time output of integrator into the next iteration of time\n    T[i + 1] = t_y.t;\n\n    //      copy the output of the integrator into the next iteration of voltage\n    q = memcpy(q, t_y.y, (2) * sizeof(float));\n\n    printf(\"%f \", T[i + 1]);\n    for (iter = 0; iter &lt; N; iter++)\n      printf(\"%f \", *(p + iter));\n    printf(\"\\n\");\n  }\n\n  return 0;\n}\n\nstruct t_y_couple integrator_rk4(float dt, float t, float y[2]) {\n  //  initialize all the pointers\n  float y1[2], y2[2], y3[2], yout[2];\n  float tout, dt_half;\n  float k1[2], k2[2], k3[2], k4[2];\n  //  initialize iterator\n  int i;\n  struct t_y_couple ty1;\n  tout = t + dt;\n  dt_half = 0.5 * dt;\n  float addition[2];\n\n  //  return the differential array into k1\n  oscnetwork_opt(t, y, k1);\n  //  multiply the array k1 by dt_half\n  for (i = 0; i &lt; 2; i++)\n    y1[i] = y[i] + (k1[i]) * dt_half;\n  //  add k1 to each element of the array y\n\n  //  do the same thing 3 times\n  oscnetwork_opt(t + dt_half, y1, k2);\n  for (i = 0; i &lt; 2; i++)\n    y2[i] = y[i] + (k2[i]) * dt_half;\n\n  oscnetwork_opt(t + dt_half, y2, k3);\n  for (i = 0; i &lt; 2; i++)\n    y3[i] = y[i] + (k3[i]) * dt_half;\n  oscnetwork_opt(tout, y3, k4);\n\n  //  Make the final additions with k1,k2,k3 and k4 according to the RK4 code\n  for (i = 0; i &lt; 2; i++) {\n    addition[i] = ((k1[i]) + (k2[i]) * 2 + (k3[i]) * 2 + (k4[i])) * dt / 6;\n\n  }\n  //  add this to the original array\n  for (i = 0; i &lt; 2; i++)\n    yout[i] = y[i] + addition[i];\n  //  return a struct with the current time and the updated voltage array\n  ty1.t = tout;\n  ty1.y = yout;\n\n  return ty1;\n}\n\n// function to return the vector with coupled differential variables for each\n// time iteration\nvoid oscnetwork_opt(float t, float y[2], float *dydt) {\n  int i;\n  dydt[0] = y[1];\n  dydt[1] = -(1) * sin(y[0]);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "struct", "language-lawyer"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 12, "creation_date": 1487761265, "post_id": 42389373, "comment_id": 71926569, "body": "because they are different languages?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1487761348, "post_id": 42389373, "comment_id": 71926629, "body": "I like quirky things like this. I wonder what&#39;s different in the grammars. I&#39;ve tagged &quot;language-lawyer&quot;."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1487761586, "post_id": 42389373, "comment_id": 71926810, "body": "My VC 2008 (C compilation) says: &quot;error C2143: syntax error : missing &#39;;&#39; before &#39;}&#39;&quot;"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1487761657, "post_id": 42389373, "comment_id": 71926862, "body": "n C++ this is an error, but C is not happy with that either, it should generate a warning."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1487761668, "post_id": 42389373, "comment_id": 71926867, "body": "@PaulOgilvie you got <code>-Werror -Wall</code> there?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1487761700, "post_id": 42389373, "comment_id": 71926890, "body": "This likely dependent on your compiler and compilation commands. Please <a href=\"https://stackoverflow.com/posts/42389373/edit\">edit</a> and add that information."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1487761799, "post_id": 42389373, "comment_id": 71926967, "body": "Sourav, <code>&#47;W3</code> of VC, and it says &quot;syntax <i>error</i>. I don;t believe errors can be suppressed so VC considers this an error in the grammatical use of the language."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1487761785, "post_id": 42389525, "comment_id": 71926954, "body": "Right sir, but if you can add some info on why compiler does not generate an error, that would be good. OP seems to expect that this should be syntax error but compiler does not generate any. Why&#39;s that?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1487761832, "post_id": 42389525, "comment_id": 71926989, "body": "Basically I&#39;m asking, why the compiler thinks &quot;no problem&quot;?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487761835, "post_id": 42389525, "comment_id": 71926991, "body": "@SouravGhosh: I don&#39;t know what cheap compiler you&#39;ve picked up - how am I supposed to answer that? Use a standard C compiler."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1487761905, "post_id": 42389525, "comment_id": 71927040, "body": "@SouravGhosh: &quot;Please explain in detail the possible outcome of an operation not constrained by any specification or convention.&quot;"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487762119, "post_id": 42389525, "comment_id": 71927208, "body": "I used gcc 4.9.2, sad to hear it&#39;s <i>cheap</i>, my whole life is a lie."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487762167, "post_id": 42389525, "comment_id": 71927243, "body": "@SouravGhosh: Well, either your compiler sucks, or your understanding of how to drive it does ... :-S GCC may be cheap, but it is definitely not easy to use correctly for the novice..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487762250, "post_id": 42389525, "comment_id": 71927291, "body": "OK, sorry for annoying, but just to clarify, isn&#39;t this supposed to be a syntax error?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487762276, "post_id": 42389525, "comment_id": 71927314, "body": "@SouravGhosh: Yes, indeed, that&#39;s what this answer is saying. Anything not allowed by the standard requires a &quot;compiler error&quot;, unless the standard explicitly says that no diagnostic is required (e.g. for ODR violations)."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487762846, "post_id": 42389525, "comment_id": 71927682, "body": "Ahh, I missed the previous sarcasm. :) I was not looking for detailed explanation, was kind of expecting some sort of compiler extension which allows this (like 0-sized array) for some reason, but thanks anyway."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 1, "creation_date": 1487763439, "post_id": 42389525, "comment_id": 71928106, "body": "By the way, GCC 4.9.2 here gives <i>warning: no semicolon at end of struct or union</i>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1487763751, "post_id": 42389525, "comment_id": 71928315, "body": "The compiler would be conforming so long as a diagnostic is issued (OP is unclear whether or not one is)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1487765989, "post_id": 42389525, "comment_id": 71929998, "body": "@M.M: Yes, that&#39;s why I put &quot;compiler error&quot; in quotes. There&#39;s no &quot;error&quot; in the Standard, nor is there a &quot;compiler&quot;."}], "tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 12, "last_activity_date": 1487762093, "last_edit_date": 1487762093, "creation_date": 1487761652, "answer_id": 42389525, "question_id": 42389373, "link": "https://stackoverflow.com/questions/42389373/why-output-of-struct-t-double-x-different-in-c-and-c/42389525#42389525", "title": "Why output of ` struct T{ double x};` different in C and C++?", "body": "<p>From C11, \"Structure and union specifiers, syntax\" (6.7.2.1/1):</p>\n\n<p><em>struct-declaration</em>:<br>\n&nbsp;&nbsp;&nbsp;&nbsp;<em>specifier-qualifier-list</em>  <em>struct-declarator-list</em><sub>opt</sub> <code>;</code></p>\n\n<p>Each element of a struct ends in a semicolon. Your claim that there is \"no problem\" is not based on what the C specification says. If your compiler accepts such code, it is not a conforming C compiler, or you are not using it correctly. (Some compilers have a configurable level of standards conformance.)</p>\n"}, {"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1487762150, "post_id": 42389630, "comment_id": 71927227, "body": "The semicolon is formally (in C) a statement <i>terminator</i>. It signals the end of a statement (or turns e.g. an expression into a statement). Other languages use statement <i>separators</i> so if no statement follows, the separator can (or should) be omitted. In C they cannot be omitted. There are cases where the omission is still unambiguous, cases where a compiler may flag this error as a warning."}, {"owner": {"reputation": 530, "user_id": 6820198, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/b34a723a9ddd185c8c1b5aadaaee4136?s=128&d=identicon&r=PG&f=1", "display_name": "Spectorsky", "link": "https://stackoverflow.com/users/6820198/spectorsky"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1487762397, "post_id": 42389630, "comment_id": 71927398, "body": "Paul Ogilvie, thanks, I meant the same, you&#39;ve said it better then me. Indeed, Pascal requires semicolon as separator, not terminator. But the question was: why does <b>C</b> allow to omit semicolon in structure field?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1487762502, "post_id": 42389630, "comment_id": 71927465, "body": "It does not. The compiler should have generated an error in stead of a warning. The code is now not portable anymore (unless these warnings have been solved too)."}], "tags": [], "owner": {"reputation": 530, "user_id": 6820198, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/b34a723a9ddd185c8c1b5aadaaee4136?s=128&d=identicon&r=PG&f=1", "display_name": "Spectorsky", "link": "https://stackoverflow.com/users/6820198/spectorsky"}, "is_accepted": false, "score": -3, "last_activity_date": 1487761918, "creation_date": 1487761918, "answer_id": 42389630, "question_id": 42389373, "link": "https://stackoverflow.com/questions/42389373/why-output-of-struct-t-double-x-different-in-c-and-c/42389630#42389630", "title": "Why output of ` struct T{ double x};` different in C and C++?", "body": "<p>Generally, <strong>C</strong> language likes semicolon much more than <strong>Pascal</strong> (<strong>Delphi</strong>). In your case, <strong>C</strong> accepts <code>struct T{ double x};</code>, but <strong>C++</strong> already requires <code>struct T{ double x;};</code></p>\n"}, {"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1487762345, "post_id": 42389739, "comment_id": 71927363, "body": "I find this a very poor explanation. It is not about decissions, it is about perscriptions (by the standard of the language)."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1487762884, "post_id": 42389739, "comment_id": 71927710, "body": "@PaulOgilvie there is no difference in the <i>perscriptions</i> in this case. Neither language allows leaving out the semicolon in this context. Both languages require a diagnostic message when the program is ill-formed. Both languages allow the the compiler to produce a program anyway (extending the language is allowed). The implementer of the compiler gets to <b>decide</b> whether to extend the language and allow compilation, or not."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1487763188, "last_edit_date": 1487763188, "creation_date": 1487762197, "answer_id": 42389739, "question_id": 42389373, "link": "https://stackoverflow.com/questions/42389373/why-output-of-struct-t-double-x-different-in-c-and-c/42389739#42389739", "title": "Why output of ` struct T{ double x};` different in C and C++?", "body": "<blockquote>\n  <p>Why output of <code>struct T{ double x};</code> different in C and C++?</p>\n</blockquote>\n\n<p>The example struct definition is ill-formed in both C and C++.</p>\n\n<p>C and C++ are different languages, they use different parsers (or whatever component of the compiler detects this error). The output is different because different decisions were made by people when they implemented the parser of the C compiler, than were made when the C++ parser  was implemented.</p>\n\n<p>Latter decided to issue an error, the former issues merely a warning, and successfully compiles despite the bug. Another C compiler can refuse to compile as well, and a C++ compiler can accept the program (as long as it produces a warning).</p>\n"}, {"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": false, "score": 3, "last_activity_date": 1487763542, "creation_date": 1487763542, "answer_id": 42390306, "question_id": 42389373, "link": "https://stackoverflow.com/questions/42389373/why-output-of-struct-t-double-x-different-in-c-and-c/42390306#42390306", "title": "Why output of ` struct T{ double x};` different in C and C++?", "body": "<p>The GCC parser for C grammar is implemented <a href=\"https://github.com/gcc-mirror/gcc/blob/master/gcc/c/c-parser.c#L2967\" rel=\"nofollow noreferrer\">as follows</a>:</p>\n\n<pre><code>  /* If no semicolon follows, either we have a parse error or\n     are at the end of the struct or union and should\n     pedwarn.  */\n  if (c_parser_next_token_is (parser, CPP_SEMICOLON))\n    c_parser_consume_token (parser);\n  else\n    {\n      if (c_parser_next_token_is (parser, CPP_CLOSE_BRACE))\n    pedwarn (c_parser_peek_token (parser)-&gt;location, 0,\n         \"no semicolon at end of struct or union\");\n      else if (parser-&gt;error\n           || !c_parser_next_token_starts_declspecs (parser))\n    {\n      c_parser_error (parser, \"expected %&lt;;%&gt;\");\n      c_parser_skip_until_found (parser, CPP_CLOSE_BRACE, NULL);\n      break;\n    }\n\n      /* If we come here, we have already emitted an error\n     for an expected `;', identifier or `(', and we also\n         recovered already.  Go on with the next field. */\n    }\n</code></pre>\n\n<p>It calls function <code>pedwarn</code> on a missing semicolon.</p>\n\n<p>The definition of <code>pedwarn</code> can be found <a href=\"https://gcc.gnu.org/wiki/DiagnosticsGuidelines\" rel=\"nofollow noreferrer\">here</a>. It reads:</p>\n\n<blockquote>\n  <ul>\n  <li><code>pedwarn</code> is for <strong>code that is accepted by GCC but it should be rejected or diagnosed according to the current standard</strong>, or it conflicts with the standard (either the default or the one selected by <code>-std=</code>). It can also diagnose compile-time undefined behavior (but not runtime UB). <code>pedwarns</code> become errors with <code>-pedantic-errors</code>.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 2025, "user_id": 1359137, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1da62381332ae241f4a28acf7c2f5f52?s=128&d=identicon&r=PG", "display_name": "Animesh Kumar Paul", "link": "https://stackoverflow.com/users/1359137/animesh-kumar-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1487763542, "creation_date": 1487761251, "last_edit_date": 1487761356, "question_id": 42389373, "link": "https://stackoverflow.com/questions/42389373/why-output-of-struct-t-double-x-different-in-c-and-c", "title": "Why output of ` struct T{ double x};` different in C and C++?", "body": "<pre><code>struct T{ double x};\n</code></pre>\n\n<p>In C, it creates no problem. </p>\n\n<p>But in C++, it gives the following compilation error:</p>\n\n<blockquote>\n  <p>expected ';' at end of member declaration.</p>\n</blockquote>\n"}, {"tags": ["c", "casting", "type-conversion", "runtime"], "comments": [{"owner": {"reputation": 164, "user_id": 7485966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/784ceb99c59ffe5d4105cc6cc7cdb728?s=128&d=identicon&r=PG&f=1", "display_name": "ttdado", "link": "https://stackoverflow.com/users/7485966/ttdado"}, "edited": false, "score": 0, "creation_date": 1487762507, "post_id": 42389353, "comment_id": 71927467, "body": "not sure if there is better solution, but I would add type member to struct, or create something like this: <code>struct Elf {int type; unsigned int len; void* ehdr; void* shdr;}</code> or use unions. But you need to modify your functions to handle both cases differently, because i think than length of <code>Elf64_*</code> and <code>Elf32_*</code> structs will be different"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487763738, "post_id": 42389353, "comment_id": 71928307, "body": "With a statically typed and compiled language like C it&#39;s not possible. You can work with preprocessor macros and <a href=\"http://en.cppreference.com/w/c/language/generic\" rel=\"nofollow noreferrer\">C11 generics</a> to <i>write</i> less code, but in the end there will still be multiple copies of basically the same code."}], "owner": {"reputation": 99, "user_id": 3848783, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1682568654/picture?type=large", "display_name": "Theo Champion", "link": "https://stackoverflow.com/users/3848783/theo-champion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1487761795, "creation_date": 1487761208, "question_id": 42389353, "link": "https://stackoverflow.com/questions/42389353/chose-type-of-element-in-a-struct-at-runtime-in-c", "title": "Chose type of element in a struct at runtime in C", "body": "<p>I am currently recoding objdump for a school project and I have a problem.</p>\n\n<p>In fact, I have a struct which contain an element that can be of two different types depending on if the file passed to the program is 64 or 32bits and I'm trying to find a way to chose the right type at runtime instead of duplicating my struct (and code) for the two cases.</p>\n\n<p>The struct:</p>\n\n<pre><code>   typedef struct          s_elf\n    {\n      Elf64_Ehdr            *ehdr; //Should be Elf32_Ehdr * for 32bits\n      Elf64_Shdr            *shdr; //Should be Elf32_Shdr * for 32bits\n      unsigned int          len;\n    }                       t_elf;\n</code></pre>\n\n<p>The goal here is to be able to access those elements regardless of their type like so</p>\n\n<pre><code>t_elf elf;\nelf-&gt;ehdr-&gt;e_shoff;\n</code></pre>\n\n<p>I've tried many thing including nested union, void * and cast, external struct, etc but nothing seemed to work.</p>\n\n<p>Is it possible to do that in C ? If yes, how ?</p>\n\n<p>Thanks ;)</p>\n"}, {"tags": ["c", "windows", "driver"], "comments": [{"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "edited": false, "score": 0, "creation_date": 1487763878, "post_id": 42389211, "comment_id": 71928403, "body": "I forgot to precise that I&#39;m using Visual Studio 2015. And now the debug view print &#39;\\n&#39; when it should print sentences... that&#39;s weird !"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487774819, "post_id": 42389211, "comment_id": 71936616, "body": "are you try simply use <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff543632(v=vs.85).aspx\" rel=\"nofollow noreferrer\">DbgPrint</a> ? with <code>DbgView</code>. are macro <code>KdPrintEx</code> expanded to <code>DbgPrintEx</code> ?"}, {"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487775249, "post_id": 42389211, "comment_id": 71936950, "body": "I&#39;m using the default debug view in Visual. No I didn&#39;t try DbgPrint but I will ! But that&#39;s very weird... when I create a file on my target machine, an empty line is printed in the debug view... so my callback function is called, and my KdPrintEx too... I suppose..."}, {"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487786022, "post_id": 42389211, "comment_id": 71944711, "body": "Thank you @RbMm but it was just a mistake :s So I edited my post to ask a new question !"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487787394, "post_id": 42389211, "comment_id": 71945555, "body": "are subkey <code>Instances\\DefaultInstance</code> is created ? with <code>Altitude</code> - not view this in <code>inf</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487787643, "post_id": 42389211, "comment_id": 71945715, "body": "something like this must be in inf - <a href=\"https://github.com/Microsoft/Windows-driver-samples/blob/master/filesys/miniFilter/NameChanger/NameChanger.inf#L70\" rel=\"nofollow noreferrer\">github.com/Microsoft/Windows-driver-samples/blob/master/file&zwnj;&#8203;sys/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487790116, "post_id": 42389211, "comment_id": 71947178, "body": "No they&#39;re not created... So I should add it in the [KmdfMiniFilter_Device_CoInstaller_AddReg] section? These two lines ? HKR,&quot;Instances&quot;,&quot;DefaultInstance&quot;,0x00000000,%DefaultInstanc&zwnj;&#8203;e% and  HKR,&quot;Instances\\&quot;%Instance1.Name%,&quot;Altitude&quot;,0x00000000,%Inst&zwnj;&#8203;ance1.Altitude%"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487790505, "post_id": 42389211, "comment_id": 71947427, "body": "3 lines - <a href=\"https://github.com/Microsoft/Windows-driver-samples/blob/master/filesys/miniFilter/NameChanger/NameChanger.inf#L72\" rel=\"nofollow noreferrer\">72</a> too"}, {"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487791963, "post_id": 42389211, "comment_id": 71948267, "body": "Still not working... I check the registry on the target machine and I don&#39;t see the new one ! I don&#39;t understand the generated inf file... it&#39;s not like the one you gave me. For example, I don&#39;t find the hardware id (I have Root\\KmdfMiniFilter in my generated file)."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487792107, "post_id": 42389211, "comment_id": 71948348, "body": "but MiniFilter must not have any hardware id. read <a href=\"https://msdn.microsoft.com/en-us/windows/hardware/drivers/ifs/creating-an-inf-file-for-a-minifilter-driver\" rel=\"nofollow noreferrer\">Creating an INF File for a Minifilter Driver</a>"}, {"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487792381, "post_id": 42389211, "comment_id": 71948495, "body": "Ah ! ok, I did that because of the following link, in the deployment configuration in Visual : <a href=\"https://msdn.microsoft.com/en-us/windows/hardware/drivers/gettingstarted/writing-a-very-small-kmdf--driver\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/windows/hardware/drivers/&hellip;</a>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487792486, "post_id": 42389211, "comment_id": 71948564, "body": "minifilter is not WDM driver. it have not any hardware id and another inf files. look for examples - <a href=\"https://github.com/Microsoft/Windows-driver-samples/tree/master/filesys/miniFilter\" rel=\"nofollow noreferrer\">github.com/Microsoft/Windows-driver-samples/tree/master/file&zwnj;&#8203;sys/&hellip;</a> for any inf here"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487792713, "post_id": 42389211, "comment_id": 71948709, "body": "take any <code>inf</code> from here as template. for example - <a href=\"https://github.com/Microsoft/Windows-driver-samples/blob/master/filesys/miniFilter/change/change.inf#L61\" rel=\"nofollow noreferrer\">github.com/Microsoft/Windows-driver-samples/blob/master/file&zwnj;&#8203;sys/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487795405, "post_id": 42389211, "comment_id": 71950180, "body": "I now have errors during the installation, where may I find the log files ? I didn&#39;t find anything in C:\\Users\\&lt;username&gt;\\AppData\\Local\\Temp. Thank you for your answers by the way !"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487795757, "post_id": 42389211, "comment_id": 71950385, "body": "where is logs depended from how you install. exist different ways. can be for example in <code>\\windows\\DPINST.LOG</code>. look in windows folder <code>*.log</code> files, sort by modified time"}, {"owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487809833, "post_id": 42389211, "comment_id": 71956601, "body": "Thank you @RbMm ! I fanally understood that I couldn&#39;t install the filter from visual... Now that I managed to install it from the target machine, I have a blue screen with the following code : IRQL NOT LESS OR EQUAL ! I&#39;m close !"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1487810568, "post_id": 42389211, "comment_id": 71956800, "body": "<code>IRQL NOT LESS OR EQUAL</code> well known code :)"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "is_accepted": true, "score": 1, "last_activity_date": 1487851256, "creation_date": 1487851256, "answer_id": 42415197, "question_id": 42389211, "link": "https://stackoverflow.com/questions/42389211/fltregisterfilter-not-working/42415197#42415197", "title": "FltRegisterFilter not working", "body": "<p>I finally solved my probl\u00e8me thanks to RbMm !</p>\n\n<p>A minifilter is not a WDM driver, so :</p>\n\n<ul>\n<li>it doesn't have any hardware id</li>\n<li>a good example of inf file : <a href=\"https://github.com/Microsoft/Windows-driver-samples/blob/master/filesys/miniFilter/nullFilter/nullFilter.inf\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/Windows-driver-samples/blob/master/filesys/miniFilter/nullFilter/nullFilter.inf</a></li>\n<li>we can't install a minifilter from Visual Studio, so in Deployment settings, check \"Not install\". The files will be sent on the target machine. Then, go in you driver's folder (mine was : C:\\DriverTest\\Drivers). The sys file must be in the same directory than the inf file. Right-click on the inf file -> Install. And finally, open a prompt command (administrator), and use the following command to load and unload your filter : fltmc load myFilter.</li>\n</ul>\n\n<p>Then, once your filter loaded, you must be able to debug it from Visual !</p>\n"}], "owner": {"reputation": 11, "user_id": 7604117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f43ea90b2614342d0ce16f3b1949cc07?s=128&d=identicon&r=PG&f=1", "display_name": "guidono", "link": "https://stackoverflow.com/users/7604117/guidono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 42415197, "answer_count": 1, "score": 0, "last_activity_date": 1487851256, "creation_date": 1487760873, "last_edit_date": 1487791765, "question_id": 42389211, "link": "https://stackoverflow.com/questions/42389211/fltregisterfilter-not-working", "title": "FltRegisterFilter not working", "body": "<p>I'm trying to create a simple windows driver, but the FltRegisterFilter is not working ! I got the following error code : 0xc0000034 (I think it refers to the STATUS_OBJECT_NAME_NOT_FOUND error code).</p>\n\n<p>Do you know if the generated INF file is enough ? I just tried to add this line in a driver install section : Dependencies   = FltMgr.</p>\n\n<p>Here is the full INF file :</p>\n\n<pre><code>;\n; KmdfMiniFilter.inf\n;\n\n[Version]\nSignature=\"$WINDOWS NT$\"\nClass=Sample ; TODO: edit Class\nClassGuid={78A1C341-4539-11d3-B88D-00C04FAD5171} ; TODO: edit ClassGuid\nProvider=%ManufacturerName%\nCatalogFile=KmdfMiniFilter.cat\nDriverVer=01/01/2017 ; TODO: set DriverVer in stampinf property pages\n\n[DestinationDirs]\nDefaultDestDir = 12\n\n; ================= Class section =====================\n\n[ClassInstall32]\nAddreg=SampleClassReg\n\n[SampleClassReg]\nHKR,,,0,%ClassName%\nHKR,,Icon,,-5\n\n[SourceDisksNames]\n1 = %DiskName%,,,\"\"\n\n[SourceDisksFiles]\nKmdfMiniFilter.sys  = 1,,\n\n;*****************************************\n; Install Section\n;*****************************************\n\n[Manufacturer]\n%ManufacturerName%=Standard,NT$ARCH$\n\n[Standard.NT$ARCH$]\n%KmdfMiniFilter.DeviceDesc%=KmdfMiniFilter_Device, Root\\KmdfMiniFilter ; TODO: edit hw-id\n\n[KmdfMiniFilter_Device.NT]\nCopyFiles=Drivers_Dir\n\n[Drivers_Dir]\nKmdfMiniFilter.sys\n\n;-------------- Service installation\n[KmdfMiniFilter_Device.NT.Services]\nAddService = KmdfMiniFilter,%SPSVCINST_ASSOCSERVICE%, KmdfMiniFilter_Service_Inst\n\n; -------------- KmdfMiniFilter driver install sections\n[KmdfMiniFilter_Service_Inst]\nDisplayName    = %KmdfMiniFilter.SVCDESC%\nServiceBinary  = %12%\\KmdfMiniFilter.sys\nServiceType    = 1               ; SERVICE_KERNEL_DRIVER\nStartType      = 3               ; SERVICE_DEMAND_START\nErrorControl   = 1               ; SERVICE_ERROR_NORMAL\nLoadOrderGroup = \"FSFilter Activity Monitor\"\nDependencies   = FltMgr\n\n;\n;--- KmdfMiniFilter_Device Coinstaller installation ------\n;\n\n[DestinationDirs]\nKmdfMiniFilter_Device_CoInstaller_CopyFiles = 11\n\n[KmdfMiniFilter_Device.NT.CoInstallers]\nAddReg=KmdfMiniFilter_Device_CoInstaller_AddReg\nCopyFiles=KmdfMiniFilter_Device_CoInstaller_CopyFiles\n\n[KmdfMiniFilter_Device_CoInstaller_AddReg]\nHKR,,CoInstallers32,0x00010000, \"WdfCoInstaller$KMDFCOINSTALLERVERSION$.dll,WdfCoInstaller\"\nHKR,\"Instances\",\"DefaultInstance\",0x00000000,%DefaultInstance%\nHKR,\"Instances\\\"%Instance1.Name%,\"Altitude\",0x00000000,%Instance1.Altitude%\nHKR,\"Instances\\\"%Instance1.Name%,\"Flags\",0x00010001,%Instance1.Flags%\n\n[KmdfMiniFilter_Device_CoInstaller_CopyFiles]\nWdfCoInstaller$KMDFCOINSTALLERVERSION$.dll\n\n[SourceDisksFiles]\nWdfCoInstaller$KMDFCOINSTALLERVERSION$.dll=1 ; make sure the number matches with SourceDisksNames\n\n[KmdfMiniFilter_Device.NT.Wdf]\nKmdfService =  KmdfMiniFilter, KmdfMiniFilter_wdfsect\n[KmdfMiniFilter_wdfsect]\nKmdfLibraryVersion = $KMDFVERSION$\n\n[Strings]\nSPSVCINST_ASSOCSERVICE= 0x00000002\nManufacturerName=\"&lt;Your manufacturer name&gt;\" ;TODO: Replace with your manufacturer name\nClassName=\"Samples\" ; TODO: edit ClassName\nDiskName = \"KmdfMiniFilter Installation Disk\"\nKmdfMiniFilter.DeviceDesc = \"KmdfMiniFilter Device\"\nKmdfMiniFilter.SVCDESC = \"KmdfMiniFilter Service\"\n\nDefaultInstance         = \"KmdfMiniFilter\"\nInstance1.Name          = \"KmdfMiniFilter\"\nInstance1.Altitude      = \"370120\"\nInstance1.Flags         = 0x0              ; Allow all attachments\n</code></pre>\n\n<p>Do you have any idea of what is the problem ?</p>\n"}, {"tags": ["c", "opengl", "glut"], "comments": [{"owner": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 1, "creation_date": 1487771171, "post_id": 42389122, "comment_id": 71933840, "body": "I assume you are trying to keep your alpha and beta angles between 0 and 2*pi, right? Try using the remainder (%) operator on your angle value. If your angle is greater than 2*pi, the remainder (beta % 2*pi) will be positive and should work. If the remainder is negative (which might occur in the case of a negative angle), then just add 2*pi to the remainder result!"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1487771174, "post_id": 42389122, "comment_id": 71933841, "body": "It wont help on your problem, but you could define <code>DISTANCIA</code> as <code>50.f</code>, and use <code>cosf</code> and <code>sinf</code> to remove casting and improve readability."}, {"owner": {"reputation": 1, "user_id": 7604188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f90bcf04655a64a3e5a1151496370e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Kevin", "link": "https://stackoverflow.com/users/7604188/mr-kevin"}, "reply_to_user": {"reputation": 2067, "user_id": 2588654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1227d97bdaa264abb9dc64cd71830a9?s=128&d=identicon&r=PG", "display_name": "CodeSurgeon", "link": "https://stackoverflow.com/users/2588654/codesurgeon"}, "edited": false, "score": 0, "creation_date": 1487780499, "post_id": 42389122, "comment_id": 71940930, "body": "@CodeSurgeon I don&#39;t get it, sorry"}], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 5626255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6890b883b1a88639bb44520b3747e4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dimos", "link": "https://stackoverflow.com/users/5626255/dimos"}, "is_accepted": false, "score": 0, "last_activity_date": 1487864708, "creation_date": 1487864708, "answer_id": 42420254, "question_id": 42389122, "link": "https://stackoverflow.com/questions/42389122/about-rotations-in-opengl/42420254#42420254", "title": "About rotations in OpenGL", "body": "<p>If statements will never  be true:</p>\n\n<pre><code>if(alpha&gt;PI*2.0 &amp;&amp; alpha&lt;=0) alpha=0;\n\nif(beta&gt;=PI*2.0 &amp;&amp; beta&lt;=0) beta=0;\n</code></pre>\n\n<p>You need or ( || ) not and (&amp;&amp;).</p>\n\n<p>The problem is not only on beta. </p>\n\n<p>The solution is </p>\n\n<pre><code>if(alpha&gt;PI*2.0 || alpha&lt;=0) alpha=0;\n\nif(beta&gt;=PI*2.0 || beta&lt;=0) beta=0;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7604188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f90bcf04655a64a3e5a1151496370e?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Kevin", "link": "https://stackoverflow.com/users/7604188/mr-kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487864708, "creation_date": 1487760639, "last_edit_date": 1487765879, "question_id": 42389122, "link": "https://stackoverflow.com/questions/42389122/about-rotations-in-opengl", "title": "About rotations in OpenGL", "body": "<p>I'm developping a simple code, trying to learn some OpenGL. I did a simple square with <code>GL_LINES</code>, and I tried to rotate them with arrow keys. When it's about rotating left and right, it goes well, but if I try to rotate it up and down it jumps sometimes. I know the mistake is on this line, but I don't know how to fix it: <code>if(beta&gt;=PI*2.0 &amp;&amp; beta&lt;=0) beta=0;</code>.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;glut.h&gt;\n#include &lt;GL/gl.h&gt;\n#include &lt;GL/glu.h&gt; \n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define INCREMENTO .1\n#define DISTANCIA 50\n#define PI 3.1416\n\nfloat alpha=0;\nfloat beta =0;\n\nvoid myCamara() {\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glOrtho(-100.0,100.0f,-100.0,100.0f,-100.0,100.0f);     \n    gluLookAt(((float)DISTANCIA*(float)sin(alpha)*cos(beta)), ((float)DISTANCIA*(float)sin(beta)), ((float)DISTANCIA*cos(alpha)*cos(beta)), 0, 0, 0, 0, 1, 0);\n\n\n}\n\nvoid myTeclado(unsigned char tras,int x,int y)\n{\n    switch (tras) {\n    case 'l':\n\n    break;\n    case 'c':\n            break;\n    case 'r':\n            break;\n    case 'p':\n\n    break;\n\n    default:\n    break;\n    }\n\n  glutPostRedisplay();\n}\n\n void myTeclasespeciales(int cursor,int x,int y) \n{\n    switch(cursor) \n    {\n        case GLUT_KEY_F1:\n            break;\n        case GLUT_KEY_F2:   \n            break;\n        case GLUT_KEY_F3:           \n            break;\n        case GLUT_KEY_F4:\n            break;\n        case GLUT_KEY_F5:           \n            break;\n        case GLUT_KEY_F6:       \n            break;\n        case GLUT_KEY_UP:\n            beta-=INCREMENTO;\n            break;\n        case GLUT_KEY_DOWN:\n            beta+=INCREMENTO;\n            break;\n        case GLUT_KEY_RIGHT:\n            alpha-=INCREMENTO;\n            break;\n        case GLUT_KEY_LEFT:\n            alpha+=INCREMENTO;\n            break;\n        default:\n            break;\n    }\n\n    if(alpha&gt;PI*2.0 &amp;&amp; alpha&lt;=0) alpha=0;\n    if(beta&gt;=PI*2.0 &amp;&amp; beta&lt;=0) beta=0;\n\n    glutPostRedisplay();\n}\n</code></pre>\n"}, {"tags": ["c", "while-loop", "scanf"], "comments": [{"owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "edited": false, "score": 0, "creation_date": 1487759958, "post_id": 42388786, "comment_id": 71925637, "body": "Could you give an example input and output?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1487760062, "post_id": 42388786, "comment_id": 71925702, "body": "I would suspect, <i>incorrect use of <code>scanf()</code> correct output</i>, which in turn was of course <b>unexpected</b>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1487760206, "post_id": 42388786, "comment_id": 71925820, "body": "What is your system and compiler? What key do you stroke to end the input?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487760319, "post_id": 42388786, "comment_id": 71925910, "body": "<code>if(scanvalue==EOF)</code>  EOF is not necessarily 0."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1487760498, "post_id": 42388786, "comment_id": 71926030, "body": "Please note that being consistent with your coding style will pay off in the future, because if you develop such habit you will write higher quality code JUST BECAUSE OF THAT."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487760541, "post_id": 42388786, "comment_id": 71926060, "body": "@SouravGhosh: OP is not comparing <code>EOF</code> with <code>0</code>, is comparing <code>EOF</code> with the return of the last <code>scanf</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1487760705, "post_id": 42388786, "comment_id": 71926182, "body": "@KeineLust <i>&quot;The fscanf function returns the value of the macro EOF if an input failure occurs before the first conversion (if any) has completed. Otherwise, the function returns the number of input items assigned, which can be fewer than provided for, or even zero, in the event of an early matching failure.&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 7604063, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8c945b74cf91e30c1fb67d6226939d19?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/7604063/mark"}, "edited": false, "score": 0, "creation_date": 1487765391, "post_id": 42388958, "comment_id": 71929572, "body": "Thank you! However: why do I need the parenthesis inside and cannot write just while (result = scanf(&quot;%f&quot;, &amp;value)== 1). I thought the compiler is reading such statements from left to right."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 185, "user_id": 7604063, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8c945b74cf91e30c1fb67d6226939d19?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/7604063/mark"}, "edited": false, "score": 1, "creation_date": 1487770310, "post_id": 42388958, "comment_id": 71933238, "body": "1. Opearator precedence. 2. Because you can also go out to the street naked but you still wear clothes. 3. Because it becomes ambigous for human readers. 4. Because it&#39;s very ugly. 5. Really, because it looks horrible. 6. Because it looking bad, makes reading it difficult. But most impportantly, operator precedence."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487777404, "post_id": 42388958, "comment_id": 71938526, "body": "&quot;Note that when <code>scanf()</code> returns <code>EOF</code> it will not modify <code>scan</code>&quot; is better as &quot;Note that when <code>scanf()</code> returns less than 1 it will not modify <code>scan</code>&quot;.  Yet even that is not completely correct.  On the rare input error, <code>scanf()</code>, may return <code>EOF</code> and have changed <code>scan</code>."}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 4, "last_activity_date": 1487782091, "last_edit_date": 1487782091, "creation_date": 1487760221, "answer_id": 42388958, "question_id": 42388786, "link": "https://stackoverflow.com/questions/42388786/correct-use-of-scanf-in-c-wrong-output/42388958#42388958", "title": "Correct use of scanf() in C, wrong output", "body": "<p>You don't check <code>scanvalue</code> after <code>scanf()</code> and still use the value at <code>scan</code> which is messing up the average. Note that when <code>scanf()</code> returns <code>EOF</code> it will not modify <code>scan</code>, and thus it will still have its last value so you are adding the last value twice.</p>\n\n<p>But if you enter invalid input at the beginning then the behavior is undefined, change it to</p>\n\n<pre><code>while ((result = scanf(\"%f\", &amp;value)) == 1) {\n}\n</code></pre>\n\n<p>Also, I deliberately changed the names of your variables to illustrate a better way of naming them.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487777066, "post_id": 42389501, "comment_id": 71938264, "body": "Better to use <code>if (scanvalue != 1)       break;</code>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1487782382, "post_id": 42389501, "comment_id": 71942222, "body": "<code>While (true)</code> will do"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487782427, "post_id": 42389501, "comment_id": 71942259, "body": "The loop written like that is clumsy compared with combining the assignment and test in the <code>while</code> loop condition.  It is not idiomatic C."}], "tags": [], "owner": {"reputation": 31, "user_id": 6101391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TaaPn.jpg?s=128&g=1", "display_name": "Antonio Martinelli", "link": "https://stackoverflow.com/users/6101391/antonio-martinelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1487781072, "last_edit_date": 1487781072, "creation_date": 1487761582, "answer_id": 42389501, "question_id": 42388786, "link": "https://stackoverflow.com/questions/42388786/correct-use-of-scanf-in-c-wrong-output/42389501#42389501", "title": "Correct use of scanf() in C, wrong output", "body": "<p>You need to check scanvalue after the scanf, otherwise times will be incremented even if you enter EOF and sum will get a wrong input, thus resulting the average being wrong/messed. </p>\n\n<p>So you should change </p>\n\n<pre><code>while (scanvalue == 1) {             \n    scanvalue = scanf(\"%f\", &amp;scan);\n    sum = sum + scan;\n    times++;                \n}\n</code></pre>\n\n<p>To</p>\n\n<pre><code>while (scanvalue == 1) {\n    scanvalue = scanf(\"%f\", &amp;scan);\n    if (scanvalue != 1)\n      break;\n    sum = sum + scan;\n    times++;\n}\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 7604063, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8c945b74cf91e30c1fb67d6226939d19?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/7604063/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1487782091, "creation_date": 1487759780, "last_edit_date": 1487760644, "question_id": 42388786, "link": "https://stackoverflow.com/questions/42388786/correct-use-of-scanf-in-c-wrong-output", "title": "Correct use of scanf() in C, wrong output", "body": "<p>I am trying to design a program that calculates the average of any desired number of floats, until EOF. The program should also check if the input was correct and return \"Wrong Input\" when e.g. entering a string. The code I wrote works, but it gives wrong ouputs for the average. Can anyone tell me why?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int times = 0;\n    float sum = 0;\n    float scan;\n    float avrg;\n    int scanvalue = 1;       \n    while (scanvalue == 1) {             \n        scanvalue = scanf(\"%f\", &amp;scan);\n        sum = sum + scan;\n        times++;                \n    }    \n    if (scanvalue == EOF) {\n        avrg = sum / times;\n        printf(\"The average is  %f\\n\", avrg);\n    } else {\n        printf(\"Wrong input\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Best regards.</p>\n"}, {"tags": ["c", "gcc", "graphics", "rendering", "x11"], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1487795913, "post_id": 42392515, "comment_id": 71950473, "body": "<code>XPutPixel</code> is of course faster than <code>XDrawPoint</code> but to be really fast one has to manipulate the pixels directly. See e.g. <a href=\"ftp://ftp.ccp4.ac.uk/ccp4/7.0/unpacked/checkout/gdk-pixbuf-2.28.1/contrib/gdk-pixbuf-xlib/gdk-pixbuf-xlib-drawable.c\" rel=\"nofollow noreferrer\">this</a> for an example of direct pixel manipulation. It&#39;s not pretty."}, {"owner": {"reputation": 37, "user_id": 4243336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z6tuN.png?s=128&g=1", "display_name": "SoleCore", "link": "https://stackoverflow.com/users/4243336/solecore"}, "edited": false, "score": 0, "creation_date": 1487825686, "post_id": 42392515, "comment_id": 71961205, "body": "It works much faster! I will definitely take a look at this code file you attached, thank you."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 2, "last_activity_date": 1487769244, "creation_date": 1487769244, "answer_id": 42392515, "question_id": 42388721, "link": "https://stackoverflow.com/questions/42388721/x11-graphics-rendering-improvement/42392515#42392515", "title": "X11 - Graphics Rendering Improvement", "body": "<p>I think that using <code>XImage</code> could answer your need: see  <a href=\"https://tronche.com/gui/x/xlib/graphics/images.html\" rel=\"nofollow noreferrer\">https://tronche.com/gui/x/xlib/graphics/images.html</a></p>\n\n<pre><code>XImage * s_image;\n\nvoid init(...)\n{\n    /* data linked to image, 4 bytes per pixel */\n    char *data = calloc(width * height, 4);\n    /* image itself */\n    s_image = XCreateImage(display, \n        DefaultVisual(display, screen),\n        DefaultDepth(display, screen), \n        ZPixmap, 0, data, width, height, 32, 0);\n}\n\nvoid display(...)\n{\n    /* fill the image */    \n    size_t offset = 0;\n    y = 0;\n    while (y &lt; height) {  \n        x = 0;\n        while (x &lt; width) {\n            XPutPixel(s_image, x, y, AlphaBlend((pixels[offset++], backcolor));\n            x++;\n        }    \n        y++;\n    }\n\n    /* put image on display */\n    XPutImage(display, drawable, cg, s_image, 0, 0, 0, 0, width, height);\n\n    XFlush(display);\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4243336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z6tuN.png?s=128&g=1", "display_name": "SoleCore", "link": "https://stackoverflow.com/users/4243336/solecore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 42392515, "answer_count": 1, "score": 1, "last_activity_date": 1487769244, "creation_date": 1487759574, "question_id": 42388721, "link": "https://stackoverflow.com/questions/42388721/x11-graphics-rendering-improvement", "title": "X11 - Graphics Rendering Improvement", "body": "<p>I am currently rendering an array of unsigned integers to a 2D image on a window, however, it is far too slow for what I want to accomplish with it. Here is my code: </p>\n\n<pre><code>int x = 0;\nint y = 0;\n\nGC gc;\nXGCValues gcv;\ngc = XCreateGC(display, drawable, GCForeground, &amp;gcv);\n\nwhile (y &lt; height) {\n    while (x &lt; width) {\n            XSetForeground(display, gc, AlphaBlend(pixels[(width*y)+x], backcolor));\n            XDrawPoint(display, drawable, gc, x, y);\n            x++;\n    }\n    x = 0;\n    y++;\n}\n\nXFlush(display);\n</code></pre>\n\n<p>I was wondering if anyone show me a much faster method for doing this while still using my unsigned integer array as the base image to draw to the window as well as keeping it within the X11 API. I want to keep it as freestanding as possible. I don't want to use OpenGL, SDL or any other extra graphics libraries I do not need. Thank you.</p>\n"}, {"tags": ["c", "if-statement", "directive"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 2, "creation_date": 1487759483, "post_id": 42388662, "comment_id": 71925381, "body": "It allows you to easily enable/disable a piece of code (for example, for testing purposes)."}, {"owner": {"reputation": 5701, "user_id": 4392605, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IgDqF.png?s=128&g=1", "display_name": "Meninx - \u30e1\u30cd\u30f3\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/4392605/meninx-%e3%83%a1%e3%83%8d%e3%83%b3%e3%83%83%e3%82%af%e3%82%b9"}, "edited": false, "score": 0, "creation_date": 1487759867, "post_id": 42388662, "comment_id": 71925589, "body": "And you need to consider that is not equivalent to commenting."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 5668470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ff780b9695e21972882b6fa38a206db?s=128&d=identicon&r=PG&f=1", "display_name": "Anders S", "link": "https://stackoverflow.com/users/5668470/anders-s"}, "edited": false, "score": 0, "creation_date": 1487772987, "post_id": 42388698, "comment_id": 71935291, "body": "Thanks guys, my hunch was right then. Sorry that I missed it had been asked before ;( my misstake."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1487759491, "creation_date": 1487759491, "answer_id": 42388698, "question_id": 42388662, "link": "https://stackoverflow.com/questions/42388662/what-is-the-purpose-of-if-0-endif-declaration/42388698#42388698", "title": "What is the purpose of &quot;#if 0 ...#endif&quot; declaration", "body": "<p>It's not an \"old way\", it's a separate way. This uses the preprocessor to cut out the contained lines, so the compiler never sees them.</p>\n\n<p>It's an extreme form of \"feature toggles\"; often you see code like</p>\n\n<pre><code>#if defined SOME_HANDY_FEATURE\nvoid use_some_handy_feature(int handyness)\n{\n  ...\n}\n#endif\n</code></pre>\n\n<p>But here the <code>#define</code> is replaced by the literal <code>0</code> which is of course false, so the code block is removed.</p>\n\n<p>It's handy since it works even if the removed code contains comments, which normal <code>/* ... */</code> comments don't since they don't nest.</p>\n"}], "owner": {"reputation": 145, "user_id": 5668470, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8ff780b9695e21972882b6fa38a206db?s=128&d=identicon&r=PG&f=1", "display_name": "Anders S", "link": "https://stackoverflow.com/users/5668470/anders-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "closed_date": 1487759587, "answer_count": 1, "score": -1, "last_activity_date": 1487759491, "creation_date": 1487758492, "question_id": 42388662, "link": "https://stackoverflow.com/questions/42388662/what-is-the-purpose-of-if-0-endif-declaration", "closed_reason": "Duplicate", "title": "What is the purpose of &quot;#if 0 ...#endif&quot; declaration", "body": "<p>now I'm confused again.\nIn our old C-code I've found some strange parts, a dump function that seems to print to terminal and I wonder if you can explain why this \"#if 0\" is used?</p>\n\n<p>My guess is that this is an old way to comment out code.... </p>\n\n<pre><code>#if 0\ndump(b, cnt)\n     char *b;\n     int cnt;\n{\n  int i;\n\n  if (cnt == 0)\n    return;\n\n  for (i=0; i &lt; cnt; i++, b++){\n    if ((i % 16) == 0)\n      printf(\"\\n\");\n    printf(\"0x%02x \", *b);\n  }\n}\n#endif\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "null", "initialization"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1487758324, "post_id": 42388492, "comment_id": 71925219, "body": "The second case <code>word2[]</code> actually has <i>three</i> nul characters: the two you placed there, and the one the compiler placed there."}, {"owner": {"reputation": 2503, "user_id": 501986, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/207803acce02d889104a2ac16fed5f8a?s=128&d=identicon&r=PG", "display_name": "Dchris", "link": "https://stackoverflow.com/users/501986/dchris"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1487766746, "post_id": 42388492, "comment_id": 71930559, "body": "What is the reason for down votes?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1487768686, "post_id": 42388492, "comment_id": 71931993, "body": "Probably because you don&#39;t show any research effort? How about reading a C book before asking, that is basic stuff."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1487758226, "post_id": 42388520, "comment_id": 71925130, "body": "Although it&#39;s part of the array and that&#39;s perfectly Ok."}, {"owner": {"reputation": 2503, "user_id": 501986, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/207803acce02d889104a2ac16fed5f8a?s=128&d=identicon&r=PG", "display_name": "Dchris", "link": "https://stackoverflow.com/users/501986/dchris"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1487766315, "post_id": 42388520, "comment_id": 71930222, "body": "@IharobAlAsimi So, it is part of the array but not part of the string?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1487766409, "post_id": 42388520, "comment_id": 71930296, "body": "Correct. Consider <code>char j[100];</code> then later <code>strcpy(j, &quot;hi&quot;);</code>. Here, <code>j</code> is 100 bytes of stuff in an array. It also contains the string &quot;hi&quot; which is two characters and a terminating nul. The large array serves as the container to hold the smaller string (and a bunch of other stuff)."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 4, "last_activity_date": 1487758150, "creation_date": 1487758150, "answer_id": 42388520, "question_id": 42388492, "link": "https://stackoverflow.com/questions/42388492/second-null-character-is-ignored-in-string/42388520#42388520", "title": "Second null character is ignored in string", "body": "<p>In C, a \"string\" as a defined as a sequence of non-nul characters terminated by a nul. So the second nul is not part of the string. The first nul marks the end -- that's how <code>printf</code> knows how many characters to print when you use the <code>%s</code> format specifier.</p>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1487758154, "creation_date": 1487758154, "answer_id": 42388521, "question_id": 42388492, "link": "https://stackoverflow.com/questions/42388492/second-null-character-is-ignored-in-string/42388521#42388521", "title": "Second null character is ignored in string", "body": "<p>Not sure what you expected.</p>\n\n<p>Any array of characters that ends with a <code>'\\0'</code> is a string. What comes after the end of the string doesn't matter, since the string has ended.</p>\n\n<p>This is fine too:</p>\n\n<pre><code>const char *two = \"hello\\0there\";\n\nprintf(\"%s\\n\", two);\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>hello\n</code></pre>\n\n<p>The characters after the embedded <code>'\\0'</code> don't matter, they're not part of the string that starts at <code>two</code> so of course <code>printf()</code> doesn't care.</p>\n\n<p>You can treat the remaining characters as a string too, of course:</p>\n\n<pre><code>printf(\"%s\\n\", two + 6);\n</code></pre>\n\n<p>This would print</p>\n\n<pre><code>there\n</code></pre>\n\n<p>Since the second half is also a valid string (double-quoted literals like this add the terminator). So in a way <code>two</code> contains two strings, which is my point.</p>\n"}, {"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 3, "creation_date": 1487758278, "post_id": 42388542, "comment_id": 71925172, "body": "@TonyTannous And we are thankful because you&#39;re wrong."}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1487758296, "post_id": 42388542, "comment_id": 71925190, "body": "@IharobAlAsimi ok I&#39;d love for an explanation :)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 1, "creation_date": 1487758300, "post_id": 42388542, "comment_id": 71925196, "body": "@TonyTannous - NULL is constant, NUL is a common abbreviation we&#39;d use to avoid confusion <a href=\"https://en.wikipedia.org/wiki/Null_character\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null_character</a>"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1487758336, "post_id": 42388542, "comment_id": 71925227, "body": "@StoryTeller true... I am a bit off this morning :) sorry."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1487758399, "post_id": 42388542, "comment_id": 71925269, "body": "Why don&#39;t you use the expression &#39;null character&#39;, which is used by the C Standard."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487759897, "post_id": 42388542, "comment_id": 71925605, "body": "@2501 - Old habits. It&#39;s the lingo at my work place, I&#39;ll add a footnote"}, {"owner": {"reputation": 2503, "user_id": 501986, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/207803acce02d889104a2ac16fed5f8a?s=128&d=identicon&r=PG", "display_name": "Dchris", "link": "https://stackoverflow.com/users/501986/dchris"}, "edited": false, "score": 0, "creation_date": 1487767258, "post_id": 42388542, "comment_id": 71930923, "body": "@StoryTeller I will have the strtok function in mind. Thank you."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1487759923, "last_edit_date": 1487759923, "creation_date": 1487758191, "answer_id": 42388542, "question_id": 42388492, "link": "https://stackoverflow.com/questions/42388492/second-null-character-is-ignored-in-string/42388542#42388542", "title": "Second null character is ignored in string", "body": "<p>The NUL character (or null character if you are reading the C standard) terminates a C string. It's an indicator so you won't need to lug the size of the string around. And there is nothing that precludes other values from being placed after it in the buffer, including other NUL characters. In fact the C standard library even has the destructive <code>strtok</code> function that places this character inside strings as part of \"tokenization\".</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 7603779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5cb463ed628d40daaab866402a759b?s=128&d=identicon&r=PG&f=1", "display_name": "moosefoot", "link": "https://stackoverflow.com/users/7603779/moosefoot"}, "is_accepted": false, "score": 1, "last_activity_date": 1487758493, "creation_date": 1487758493, "answer_id": 42388663, "question_id": 42388492, "link": "https://stackoverflow.com/questions/42388492/second-null-character-is-ignored-in-string/42388663#42388663", "title": "Second null character is ignored in string", "body": "<p>Most string operations in C (such as <code>printf</code>) know when to stop reading a string once it finds a NULL terminator. It stops searching at that point. </p>\n\n<p>In fact, <code>printf</code> is not designed to print the NULL terminator. All strings in C are meant to end with one, so if they were printed, every string would have a '\\0' in output as well. That would be very pointless.</p>\n"}, {"comments": [{"owner": {"reputation": 2503, "user_id": 501986, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/207803acce02d889104a2ac16fed5f8a?s=128&d=identicon&r=PG", "display_name": "Dchris", "link": "https://stackoverflow.com/users/501986/dchris"}, "edited": false, "score": 0, "creation_date": 1487767028, "post_id": 42388674, "comment_id": 71930761, "body": "I am keeping the &quot;ascii nul is considered the delimited of strings in C&quot; and the &quot;nor will it be taken into account by strlen() or any str* funcion&quot;. Useful tips. Thank you"}], "tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1487759961, "last_edit_date": 1487759961, "creation_date": 1487758509, "answer_id": 42388674, "question_id": 42388492, "link": "https://stackoverflow.com/questions/42388492/second-null-character-is-ignored-in-string/42388674#42388674", "title": "Second null character is ignored in string", "body": "<p>You actually have 3 <code>'\\0'</code>s in your second array. But note that the <code>'\\0'</code> or ascii <em>nul</em> is considered the delimiter of strings in c, in fact as others have said in c, a string is nothing but a sequence of bytes followed by a <code>'\\0'</code> byte.</p>\n\n<p>So your assumption that something special should be done with \"<em>extra</em>\" <code>'\\0'</code>s is wrong. In fact, I say \"<em>extra</em>\" because even though they are part of the array, they are not part of the string, and to be sure you can try</p>\n\n<pre><code>char string[] = \"Example\\0Example\";\n</code></pre>\n\n<p>and you will see that the whole \"<em>Example</em>\" after the <code>'\\0'</code> will not be printed if you use <code>printf()</code>, nor will it be taken into account by <code>strlen()</code> or any <code>str</code>* funcion. Furthermore, it has 2 <code>'\\0'</code> in principle, the one explicitly inserted and another one that is implicitly added after the second \"<em>Example</em>\".</p>\n"}, {"comments": [{"owner": {"reputation": 2503, "user_id": 501986, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/207803acce02d889104a2ac16fed5f8a?s=128&d=identicon&r=PG", "display_name": "Dchris", "link": "https://stackoverflow.com/users/501986/dchris"}, "edited": false, "score": 0, "creation_date": 1487767412, "post_id": 42389027, "comment_id": 71931037, "body": "Useful tips. Thank you."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1487761122, "last_edit_date": 1487761122, "creation_date": 1487760414, "answer_id": 42389027, "question_id": 42388492, "link": "https://stackoverflow.com/questions/42388492/second-null-character-is-ignored-in-string/42389027#42389027", "title": "Second null character is ignored in string", "body": "<blockquote>\n  <p>Second null character is ignored in string</p>\n</blockquote>\n\n<p>No, it is not ignored. If you run this demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    char word[]= {'H','e','l','l','o','\\0','\\0'};\n    char word2[]= \"Hello\\0\\0\";\n\n    printf( \"sizeof( word ) = %zu\\n\", sizeof( word ) );\n    printf( \"sizeof( word2 ) = %zu\\n\", sizeof( word2 ) );\n}\n</code></pre>\n\n<p>You will get the following result</p>\n\n<pre><code>sizeof( word ) = 7\nsizeof( word2 ) = 8\n</code></pre>\n\n<p>That is all zero-characters were included in the character arrays.</p>\n\n<p>Take into account that string literals contain also invisible null-terminating character. That is this string literal <code>\"Hello\\0\\0\"</code> (having type <code>char[8]</code>) is stored in memory like <code>{ 'H', 'e', 'l', 'l', 'o', '\\0', '\\0', '\\0' }</code>.</p>\n\n<p>Redundant zero characters are ignored by some functions like for example the function <code>strlen</code> or the function <code>printf</code> when the format specifier <code>%s</code> is used because these functions consider character arrays as containing strings that is a sequence of characters delimited by a zero character.</p>\n\n<p>Moreover you can initializer all elements of a character array with zeroes. For example</p>\n\n<pre><code>char s[5] = { '\\0' };\n</code></pre>\n\n<p>This declaration is equivalent to</p>\n\n<pre><code>char s[5] = { '\\0', '\\0', '\\0', '\\0', '\\0' };\n</code></pre>\n\n<p>Or you even can write</p>\n\n<pre><code>char s[] = \"\\0\\0\\0\\0\";\n</code></pre>\n\n<p>In fact this declaration is equivalent to the previous declaration of the array <code>s</code> that is the array will contain <code>5</code> zero characters.</p>\n\n<p>If you execute this statement</p>\n\n<pre><code>printf( \"%zu\\n\", sizeof( s ) );\n</code></pre>\n\n<p>you will get as expected <code>5</code>. However if you execute this statement</p>\n\n<pre><code>printf( \"%zu\\n\", strlen( s ) );\n</code></pre>\n\n<p>or this statement</p>\n\n<pre><code>printf( \"%s\\n\", s );\n</code></pre>\n\n<p>you will get 0 or (in the second case) nothing will be displayed except the cursor will be moved on the next line..</p>\n"}], "owner": {"reputation": 2503, "user_id": 501986, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/207803acce02d889104a2ac16fed5f8a?s=128&d=identicon&r=PG", "display_name": "Dchris", "link": "https://stackoverflow.com/users/501986/dchris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 6, "score": -2, "last_activity_date": 1487761122, "creation_date": 1487758073, "question_id": 42388492, "link": "https://stackoverflow.com/questions/42388492/second-null-character-is-ignored-in-string", "title": "Second null character is ignored in string", "body": "<p>I am initializing a string(array of characters) in C and i noticed that even if i enter a second null character(\\0) in the string it is ignored and does not return any error. See below what i mean:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char word[]= {'H','e','l','l','o','\\0','\\0'};\n    char word2[]= \"Hello\\0\\0\";\n    printf(\"Word  is : %s\\n\",word);     // Prints \"Hello\"\n    printf(\"Word  2 is : %s\\n\",word2);  // Prints \"Hello\" as well\n\n     return 0;\n}\n</code></pre>\n\n<p>Can you please explain why?</p>\n"}, {"tags": ["c", "gcc", "makefile", "symbols", "undefined-symbol"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4729359, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-Ky7sr289c8A/AAAAAAAAAAI/AAAAAAAAFkc/qw-WOjXUorI/photo.jpg?sz=128", "display_name": "jof lll", "link": "https://stackoverflow.com/users/4729359/jof-lll"}, "edited": false, "score": 0, "creation_date": 1487759931, "post_id": 42388810, "comment_id": 71925621, "body": "Which is the best solution ? Link statically is just add -static to CFLAGS ? How use LD_LIBRARY_PATH or LD_PRELOAD ?"}], "tags": [], "owner": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "is_accepted": false, "score": 0, "last_activity_date": 1487759844, "creation_date": 1487759844, "answer_id": 42388810, "question_id": 42388210, "link": "https://stackoverflow.com/questions/42388210/gcc-symbol-lookup-error/42388810#42388810", "title": "GCC symbol lookup error", "body": "<p>During linking you have specified libraries that are not in the standard path</p>\n\n<p>Solutions</p>\n\n<ul>\n<li>link statically</li>\n<li>Use LD_LIBRARY_PATH</li>\n<li>Use LD_PRELOAD</li>\n<li>Use rpath</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 4729359, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-Ky7sr289c8A/AAAAAAAAAAI/AAAAAAAAFkc/qw-WOjXUorI/photo.jpg?sz=128", "display_name": "jof lll", "link": "https://stackoverflow.com/users/4729359/jof-lll"}, "is_accepted": false, "score": 0, "last_activity_date": 1487770217, "creation_date": 1487770217, "answer_id": 42392891, "question_id": 42388210, "link": "https://stackoverflow.com/questions/42388210/gcc-symbol-lookup-error/42392891#42392891", "title": "GCC symbol lookup error", "body": "<p>I try to use rpath just like this but got the same error:</p>\n\n<blockquote>\n  <p>CFLAGS  = -g -Wall -DDEBUG -L/opt/PrismTech/Vortex_v2/Device/VortexOpenSpliceRTE/6.7.1p2/HDE/armv7at2_vfp_neon.WRlinux7_gcc/lib -Wl,-rpath,/opt/PrismTech/Vortex_v2/Device/VortexOpenSpliceRTE/6.7.1p2/HDE/armv7at2_vfp_neon.WRlinux7_gcc/lib -ldcpssac -ldcpsisocpp2</p>\n</blockquote>\n"}], "owner": {"reputation": 29, "user_id": 4729359, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-Ky7sr289c8A/AAAAAAAAAAI/AAAAAAAAFkc/qw-WOjXUorI/photo.jpg?sz=128", "display_name": "jof lll", "link": "https://stackoverflow.com/users/4729359/jof-lll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 687, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487770217, "creation_date": 1487757409, "last_edit_date": 1487758148, "question_id": 42388210, "link": "https://stackoverflow.com/questions/42388210/gcc-symbol-lookup-error", "title": "GCC symbol lookup error", "body": "<p>I try to launch my executable but i got this error:</p>\n\n<blockquote>\n  <p>.dudac/stage/monkey/lib/hello.duda: undefined symbol: DDS_sequence_BoardGlobalParameters_BoardGPSoftState__alloc</p>\n</blockquote>\n\n<p>Whereas link and compile work fine</p>\n\n<p>Here is my makefile:</p>\n\n<pre><code># ====================================\n# Date      : Tue 21, Feb 2017 at 10:15\n\n\nNAME    = hello\nCC      = /opt/windriver/wrlinux-small/7.0-xxxxxx-3543dr/sysroots/x86_64-wrlinuxsdk-linux/usr/bin/arm-wrs-linux-gnueabi/arm-wrs-linux-gnueabi-gcc\nCFLAGS  = -g -Wall -DDEBUG -L/opt/PrismTech/Vortex_v2/Device/VortexOpenSpliceRTE/6.7.1p2/RTS/armv7at2_vfp_neon.WRlinux7_gcc/lib -ldcpssac -ldcpsisocpp2\n#-g -Wall -DDEBUG -fPIC\n\nLDFLAGS =\nDEFS    =\nINCDIR  =  -I/home/T0181049/.dudac/stage/monkey//include/ -I/home/T0181049/.dudac/stage/monkey//src/include -I/home/T0181049/.dudac/stage/monkey//plugins/duda/src -I/home/T0181049/.dudac/stage/monkey//plugins/duda/ -I/opt/PrismTech/Vortex_v2/Device/VortexOpenSpliceRTE/6.7.1p2/HDE/armv7at2_vfp_neon.WRlinux7_gcc/include -I/opt/PrismTech/Vortex_v2/Device/VortexOpenSpliceRTE/6.7.1p2/HDE/armv7at2_vfp_neon.WRlinux7_gcc/include/dcps/C/SAC -I/opt/PrismTech/Vortex_v2/Device/VortexOpenSpliceRTE/6.7.1p2/HDE/armv7at2_vfp_neon.WRlinux7_gcc/include/sys -I/opt/PrismTech/Vortex_v2/Device/VortexOpenSplice/6.7.1p1/HDE/x86_64.linux/include -I/opt/PrismTech/Vortex_v2/Device/VortexOpenSplice/6.7.1p1/HDE/x86_64.linux/include/sys -I/opt/windriver/wrlinux-small/7.0-xxxxx-3543dr/sysroots/armv7at2-vfp-neon-wrs-linux-gnueabi/usr/include -I/opt/windriver/wrlinux-small/7.0-xxxxx-3543dr/sysroots/armv7at2-vfp-neon-wrs-linux-gnueabi/usr/include/c++ -I/opt/windriver/wrlinux-small/7.0-xxxxxx-3543dr/sysroots/armv7at2-vfp-neon-wrs-linux-gnueabi/usr/include/c++/4.9.1 -I/opt/windriver/wrlinux-small/7.0-xxxxxx-3543dr/sysroots/armv7at2-vfp-neon-wrs-linux-gnueabi/usr/include/c++/4.9.1/arm-windriverv7atneon-linux-gnueabi -I/opt/windriver/wrlinux-small/7.0-xxxxx-3543dr/sysroots/armv7at2-vfp-neon-wrs-linux-gnueabi/usr/include/c++/4.9.1/backward -I/opt/windriver/wrlinux-small/7.0-xxxxx-3543dr/sysroots/armv7at2-vfp-neon-wrs-linux-gnueabi/usr/include/dtc -I/opt/windriver/wrlinux-small/7.0-xxxxxx-3543dr/sysroots/x86_64-wrlinuxsdk-linux/usr/lib/arm-wrs-linux-gnueabi/gcc/arm-wrs-linux-gnueabi/4.9.1/include -I/opt/windriver/wrlinux-small/7.0-xxxxx-3543dr/sysroots/x86_64-wrlinuxsdk-linux/usr/lib/arm-wrs-linux-gnueabi/gcc/arm-wrs-linux-gnueabi/4.9.1/include-fixed\n\n\nOBJECTS = main.o\n\n_PATH     = $(patsubst /%, %, $(CURDIR))\n_CC       = @/bin/echo -e \"  [\\033[33mCC\\033[0m]   $@\"; $(CC)\n_DD       = @/bin/echo -e \"  [\\033[32mDD\\033[0m]   $@\"; $(CC)\n_CC_QUIET = @/bin/echo -n; $(CC)\n\nall: $(NAME).duda\n\n$(NAME).duda: $(OBJECTS)\n    $(_DD) $(CFLAGS) $(DEFS) -shared -o $@ $^ -lc $(LDFLAGS)\n\n.c.o:\n    $(_CC) -c $(CFLAGS) $(DEFS) $(INCDIR) -fPIC $&lt;\n    $(_CC_QUIET) -MM -MP $(CFLAGS) $(DEFS) $(INCDIR) $*.c -o $*.d &gt; /dev/null &amp;2&gt;&amp;1\n\nclean:\n    rm -rf *.o *.d *~ $(NAME).duda\n</code></pre>\n\n<p>How do i resolve that ?\nThanks</p>\n"}, {"tags": ["android", "c", "libtool", "objdump"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487756506, "post_id": 42387810, "comment_id": 71923852, "body": "Maybe your build and the prebuilt are built using different flags and settings?"}, {"owner": {"reputation": 2834, "user_id": 1304312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c212de59f2f1a83a44b36487408aabf?s=128&d=identicon&r=PG", "display_name": "Diego Elio Petten&#242;", "link": "https://stackoverflow.com/users/1304312/diego-elio-petten%c3%b2"}, "edited": false, "score": 1, "creation_date": 1487762283, "post_id": 42387810, "comment_id": 71927319, "body": "You don&#39;t appear to be testing the same files, one is an x86 and the other is x86_64. Different builds might have different dependencies."}, {"owner": {"reputation": 609, "user_id": 905818, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c22846952ec689a13583d79383c0beff?s=128&d=identicon&r=PG", "display_name": "Gonzalo Aguilar Delgado", "link": "https://stackoverflow.com/users/905818/gonzalo-aguilar-delgado"}, "edited": false, "score": 0, "creation_date": 1488101901, "post_id": 42387810, "comment_id": 72075112, "body": "No, they are exactly the same files. I checked by sha256 sum. And the results are consistent. Even more I can recompile then, the result is exactly the same once and another. And I even copy to a git repository that does sha1 to compare and it says same files everytime."}], "owner": {"reputation": 609, "user_id": 905818, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c22846952ec689a13583d79383c0beff?s=128&d=identicon&r=PG", "display_name": "Gonzalo Aguilar Delgado", "link": "https://stackoverflow.com/users/905818/gonzalo-aguilar-delgado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487756447, "creation_date": 1487756358, "last_edit_date": 1592644375, "question_id": 42387810, "link": "https://stackoverflow.com/questions/42387810/objdump-result-not-consistent-it-shows-different-required-libraries-depending-o", "title": "objdump result not consistent? It shows different required libraries depending on how it&#39;s executed", "body": "<p>It seems it's a not reliable behavior.</p>\n<p>If I compile thrift c_glib library and show requirement of the libraries I found:\nthrift/lib/c_glib$  objdump -p .libs/libthrift_c_glib.so | grep NEED</p>\n<blockquote>\n<p><strong>NEEDED               libgobject-2.0.so</strong></p>\n<p><strong>NEEDED               libglib-2.0.so</strong></p>\n<p>NEEDED               libintl.so</p>\n<p>NEEDED               libssl.so</p>\n<p>NEEDED               libcrypto.so</p>\n<p>NEEDED               libc.so</p>\n<p>NEEDED               libdl.so</p>\n</blockquote>\n<p>Now, if I install and do the same command on installation directory and execute from the install directory. objdump -p x86/lib/libthrift_c_glib.so | grep NEED I get the same.</p>\n<p>But If I go to the thrift source and execute the command to the installation patch... Surprise!!!</p>\n<p>objdump -p /opt/android/x86_64/lib/libthrift_c_glib.so | grep NEED</p>\n<blockquote>\n<p>NEEDED               libssl.so</p>\n<p>NEEDED               libcrypto.so</p>\n<p>NEEDED               libc.so</p>\n<p>NEEDED               libdl.so</p>\n</blockquote>\n<p>Some libraries dissapeared!!! Why?</p>\n"}, {"tags": ["c", "break"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1487755455, "post_id": 42387373, "comment_id": 71922968, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a <a href=\"https://en.wikipedia.org/wiki/Debugger\" rel=\"nofollow noreferrer\">debugger</a> to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "edited": false, "score": 1, "creation_date": 1487755461, "post_id": 42387373, "comment_id": 71922974, "body": "<code>putchar(&#39;\\t&#39;);</code> ?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1487755477, "post_id": 42387373, "comment_id": 71922988, "body": "Are you asking how to use something like ctrl-z to break out of your while loop? Or about replacing the tabs in a string - which you seem to suggets is working"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487755501, "post_id": 42387373, "comment_id": 71923018, "body": "Please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. Fixing logical errors in your algorithm is a job for you the developer in a debugging session, not a topic for a SO question."}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 2, "last_activity_date": 1487759764, "last_edit_date": 1487759764, "creation_date": 1487756476, "answer_id": 42387858, "question_id": 42387373, "link": "https://stackoverflow.com/questions/42387373/understanding-eof-and-break/42387858#42387858", "title": "Understanding EOF and break", "body": "<p>There is no need to <code>break</code>, in fact, when you use <code>break</code> inside a <code>for</code>/<code>while</code> you exit from the loop (not what you want), if you want to allow only one tab use a sentinel and <code>continue</code> if the previous character is also a tab:</p>\n\n<pre><code>int c, tab = 0;\n\nwhile (((c = getchar()) != '\\n') &amp;&amp; (c != EOF))  {\n    if (c == '\\t') {\n        if (tab == 1) continue;\n        tab = 1;\n    } else {\n        tab = 0;\n    }\n    putchar(c);\n}\n</code></pre>\n\n<p>Press CTRL+ Z + Intro to send <code>EOF</code> in Windows.</p>\n"}, {"tags": [], "owner": {"reputation": 699, "user_id": 7562074, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mYiplUjiang/AAAAAAAAAAI/AAAAAAAAASg/IuJhDArg780/photo.jpg?sz=128", "display_name": "Roy Avidan", "link": "https://stackoverflow.com/users/7562074/roy-avidan"}, "is_accepted": false, "score": 1, "last_activity_date": 1487757631, "creation_date": 1487757631, "answer_id": 42388301, "question_id": 42387373, "link": "https://stackoverflow.com/questions/42387373/understanding-eof-and-break/42388301#42388301", "title": "Understanding EOF and break", "body": "<p>its because you write <code>putchar('    ')</code>.</p>\n\n<p>its an error.  write <code>putchar('\\t')</code> instead.</p>\n\n<p>there is no such char as <code>'    '</code>. this is 4 spaces. </p>\n"}], "owner": {"reputation": 23, "user_id": 7593670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15815709088d62fa96d18afaaec0a04b?s=128&d=identicon&r=PG&f=1", "display_name": "user127", "link": "https://stackoverflow.com/users/7593670/user127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 42387858, "answer_count": 2, "score": 1, "last_activity_date": 1487759764, "creation_date": 1487755326, "last_edit_date": 1487755409, "question_id": 42387373, "link": "https://stackoverflow.com/questions/42387373/understanding-eof-and-break", "title": "Understanding EOF and break", "body": "<p>I am trying to write a program which replaces a string of one or more tabs by a single tab.</p>\n\n<p>Here's what I wrote:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int c;\n    while ((c = getchar()) != '\\n')\n    {\n        if (c == 9)\n        {\n            while((c=getchar())== 9)\n                putchar('   ');\n            if (c != 9)\n                break;\n        }\n        putchar(c);\n    }\n}\n</code></pre>\n\n<p>I compared it to newline because I don't get EOF and pressing ctrl-z does nothing, atleast on Windows.\nWell the output prints spaces instead of tabs. Can someone point out what am I doing wrong?</p>\n"}, {"tags": ["javascript", "c++", "c", "environment-variables"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1487754807, "post_id": 42387060, "comment_id": 71922475, "body": "<i>In C/C++, arguments are duplicated for the function and can not be change within the function</i>, this is true in <code>C</code>, but in <code>C++</code> there is a pass by reference (using <code>&amp;</code> before the argument), regarding your javascript question: <a href=\"http://stackoverflow.com/a/7744623/1606345\">this</a> can help."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487755035, "post_id": 42387060, "comment_id": 71922641, "body": "C, C++ and Javascript are all part of the curly-braces family of languages. That&#39;s as helpful as a comparison between them can be. I recommend you learn JS as a novice. Comparing it to C at every step will just make you more confused."}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 6330985, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8cba6bd80e40f9cc80272e88bc17643b?s=128&d=identicon&r=PG&f=1", "display_name": "Th&#233;ophile Pace", "link": "https://stackoverflow.com/users/6330985/th%c3%a9ophile-pace"}, "edited": false, "score": 0, "creation_date": 1498217333, "post_id": 42387164, "comment_id": 76422736, "body": "Thank you, it actually helped me a lot. I forgot to tick your answer ..."}], "tags": [], "owner": {"reputation": 78897, "user_id": 107660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0167bade38130f13a5fc468c10388d9d?s=128&d=identicon&r=PG", "display_name": "Duncan", "link": "https://stackoverflow.com/users/107660/duncan"}, "is_accepted": true, "score": 1, "last_activity_date": 1487754808, "creation_date": 1487754808, "answer_id": 42387164, "question_id": 42387060, "link": "https://stackoverflow.com/questions/42387060/arguments-and-temporary-variables-in-javascript-functions/42387164#42387164", "title": "Arguments and temporary variables in Javascript Functions", "body": "<p>In C you can pass a structure either by value in which case it is copied into a function (and out of it if you return it), or you can pass a pointer to the structure in which case it is not copied and all the changes you make are visible to the caller. In C++ it is the same except you can also pass by reference which behind the scenes is like passing a pointer but the compiler hides it from you a bit.</p>\n\n<p>Think of Javascript as getting all structures passed by reference. Nothing is every copied unless you explicitly copy it.</p>\n\n<p>Also Javascript variables don't contain objects in the variable, they only contain references to the object. So in C/C++ terms all objects are heap based, there are none stored on the stack.</p>\n\n<p>For simple types such as numbers there may be a copy made but as you can't tell it doesn't really matter what it does. Strings are probably passed by reference but as you can't modify an existing string there's no way to tell that either.</p>\n\n<p>I say probably because it's the semantics of the call that matter, different Javascript runtimes could choose to implement things differently provided you can't tell the difference.</p>\n"}], "owner": {"reputation": 789, "user_id": 6330985, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8cba6bd80e40f9cc80272e88bc17643b?s=128&d=identicon&r=PG&f=1", "display_name": "Th&#233;ophile Pace", "link": "https://stackoverflow.com/users/6330985/th%c3%a9ophile-pace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 42387164, "answer_count": 1, "score": -1, "last_activity_date": 1487754808, "creation_date": 1487754525, "question_id": 42387060, "link": "https://stackoverflow.com/questions/42387060/arguments-and-temporary-variables-in-javascript-functions", "title": "Arguments and temporary variables in Javascript Functions", "body": "<p>I come from C and C++ language and I have a hard time understanding some thing about JavaScript : are variables (parameters) copied in JavaScript when entering a function? </p>\n\n<p>In C/C++, arguments  are duplicated for the function and can not be change within the function (of course you can pass pointers as arguments but they cant be change themselves). In JavaScript, it looks like (with closure for instance) you can declare variables inside a function, then use them afterwards. you can also change the parameters inside a function and they keep these modifications afterwards.</p>\n\n<p>Am I right if I say there is only one context of execution in a JavaScript application? </p>\n"}, {"tags": ["c++", "c", "networking"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1487755533, "post_id": 42387049, "comment_id": 71923045, "body": "It smells like (I&#39;m sure...)  <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> without <code>OOP</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1487756470, "post_id": 42387049, "comment_id": 71923822, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  The above code has alphabet soup variable names, few comments, and does piles of things unrelated to your problem.  Clean your code up, have tests that explicitly fail and generate clear error messages, eliminate fields and variables and code not required to reproduce the issue.  This takes work, but as it stands you are simply asking someone else to do that work for you."}, {"owner": {"reputation": 68, "user_id": 5716543, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/eea5b0f460ca3daa09d2677885c14b9b?s=128&d=identicon&r=PG&f=1", "display_name": "KingC", "link": "https://stackoverflow.com/users/5716543/kingc"}, "edited": false, "score": 0, "creation_date": 1487756852, "post_id": 42387049, "comment_id": 71924133, "body": "Dude, seriously?  I mentioned it that clearly and still you are looking at the entire code and still you commented like this. The question is clear. First time I am able to change the value of val-&gt;portno in shared memory, but the next time it&#39;s failing. That&#39;s all I need to know. And yeah, there are no error messages. I debugged it. Right before the moment A is signalling B, I printed the shared value. It&#39;s showing the new value in process A but the old one in process B."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1487757202, "post_id": 42387049, "comment_id": 71924396, "body": "Well, you should be a little bit less rude if you want help here. BTW Your problem is that your client open shared memory using <code>IPC_CREAT</code>. The client side mustn&#39;t."}, {"owner": {"reputation": 68, "user_id": 5716543, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/eea5b0f460ca3daa09d2677885c14b9b?s=128&d=identicon&r=PG&f=1", "display_name": "KingC", "link": "https://stackoverflow.com/users/5716543/kingc"}, "edited": false, "score": 0, "creation_date": 1487757737, "post_id": 42387049, "comment_id": 71924777, "body": "Yep. But I am using &quot;| IPC_CREAT&quot; . I think that creates the shared memory only if it is not already created. BTW even after removing IPC_CREAT in client, the value is still the same. It&#39;s not changing."}, {"owner": {"reputation": 144819, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1487763842, "post_id": 42387049, "comment_id": 71928379, "body": "It might be a good idea to put the definition of the shared memory data structure in a shared file which, like the shared memory, is common to both programs..."}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487764357, "post_id": 42390134, "comment_id": 71928752, "body": "Good catch!......."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 2, "last_activity_date": 1487763126, "creation_date": 1487763126, "answer_id": 42390134, "question_id": 42387049, "link": "https://stackoverflow.com/questions/42387049/shared-memory-is-working-only-the-first-time/42390134#42390134", "title": "Shared memory is working only the first time", "body": "<p>The problem may come from the <code>struct shm</code> definition:</p>\n\n<p>In file 1</p>\n\n<pre><code>struct shm\n{\n    int aid;\n    int sid;\n    int bid;\n    int cid;\n    int portno;\n    int pno;\n//int ports[4];\n}*val;\n</code></pre>\n\n<p>In other file :</p>\n\n<pre><code>struct shm\n{\n    int aid;\n    int sid;\n    int bid;\n    int cid;\n    int pno;\n    int portno;\n}*val;\n</code></pre>\n\n<p><code>pno</code> and <code>portno</code> are not at the same place.</p>\n\n<p>And as LPs pointed, only one process should create the shared memory (<code>IPC_CREAT</code>)</p>\n"}], "owner": {"reputation": 68, "user_id": 5716543, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/eea5b0f460ca3daa09d2677885c14b9b?s=128&d=identicon&r=PG&f=1", "display_name": "KingC", "link": "https://stackoverflow.com/users/5716543/kingc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1487768806, "accepted_answer_id": 42390134, "answer_count": 1, "score": -1, "last_activity_date": 1487763126, "creation_date": 1487754483, "last_edit_date": 1487755495, "question_id": 42387049, "link": "https://stackoverflow.com/questions/42387049/shared-memory-is-working-only-the-first-time", "closed_reason": "Not suitable for this site", "title": "Shared memory is working only the first time", "body": "<p>I am using shared memory to pass values between processes. It's working the first time, but when I try changing it again, the value is not getting reflected in other processes. First process A changes the value and signal B. It uses it and passes back the control to A. Then A again changes the value, but this new value is not getting reflected in process B.</p>\n\n<p>// FILE 1</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#include&lt;arpa/inet.h&gt;\n#include&lt;sys/time.h&gt;\n#include&lt;iostream&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;sys/select.h&gt;\n#include&lt;sys/shm.h&gt;\n#include&lt;signal.h&gt;\n\nusing namespace std;\n\nstruct shm\n{\n    int aid;\n    int sid;\n    int bid;\n    int cid;\n    int portno;\n    int pno;\n//int ports[4];\n}*val;\nint ports[4];\nint sfds[4];\nint count = 4;\n\nvoid func1(int a)\n{\n    fd_set rfds;\n    while (1)\n    {\n        FD_ZERO(&amp;rfds);\n        struct timeval timer;\n        timer.tv_sec = 0;\n        timer.tv_usec = 10;\n        for (int i = 0; i &lt; count; i++)\n        {\n            FD_SET(sfds[i], &amp;rfds);\n        }\n        if (select(sfds[count - 1] + 1, &amp;rfds, NULL, NULL, &amp;timer))\n        {\n            for (int i = 0; i &lt; count; i++)\n            {\n                if (FD_ISSET(sfds[i], &amp;rfds))\n                {\n                    val-&gt;pno = i;\n                    val-&gt;portno = ports[i];\n                    cout &lt;&lt; \"port number:\" &lt;&lt; val-&gt;portno &lt;&lt; endl;\n                    close(sfds[i]);\n                    // Remove the corresponding sfd                     \n                    for (int j = i; j &lt; count - 1; j++)\n                    {\n                        sfds[j] = sfds[j + 1];\n                        ports[j] = ports[j + 1];\n                    }\n                    count--;\n                    kill(val-&gt;aid, SIGUSR2);\n                    if (count &gt; 0)\n                        signal(SIGUSR1, &amp;func1);\n                    else\n                        exit(1);\n                    return;\n                }\n            }\n        }\n    }\n}\n\nvoid func2(int b)\n{\n    struct sockaddr_in cliaddr;\n    socklen_t clilen;\n    int lc = 0;\n    for (int i = 0; i &lt; 1; i++)\n    {\n        int nsfd = accept(sfds[val-&gt;pno], (struct sockaddr*) &amp;cliaddr, &amp;clilen);\n        if (nsfd &lt; 0)\n        {\n            perror(\"Error\");\n            exit(1);\n        }\n        cout &lt;&lt; \"Connection accepted\";\n        send(nsfd, \"OkaA\", 5, 0);\n        close(nsfd);\n    }\n    if (close(sfds[val-&gt;pno]) &lt; 0)\n    {\n        perror(\"Error closing\");\n        exit(1);\n    }\n    cout &lt;&lt; \"Closed\" &lt;&lt; endl;\n    // Remove the corresponding sfd\n\n    for (int i = val-&gt;pno; i &lt; count - 1; i++)\n    {\n        sfds[i] = sfds[i + 1];\n        ports[i] = ports[i + 1];\n    }\n\n    count--;\n    cout &lt;&lt; \" val-&gt;portnumber \" &lt;&lt; val-&gt;portno &lt;&lt; endl;\n\n    kill(val-&gt;bid, SIGUSR1);\n    if (count &gt; 0)\n        signal(SIGUSR2, &amp;func2);\n    else\n        exit(1);\n    return;\n}\n\nint main()\n{\n    int shmid = shmget(123456, sizeof(struct shm), IPC_CREAT | 0666);\n    if (shmid &lt; 0)\n    {\n        perror(\"Error\");\n    }\n    val = (struct shm*) shmat(shmid, NULL, 0);\n    //cout&lt;&lt;\"yo2\";  \n    signal(SIGUSR1, &amp;func1);\n    signal(SIGUSR2, &amp;func2);\n    for (int i = 0; i &lt; 4; i++)\n    {\n        //val-&gt;ports[i] = 7590+i;       \n        sfds[i] = socket(AF_INET, SOCK_STREAM, 0);\n\n        const int optVal = 1;\n        const socklen_t optLen = sizeof(optVal);\n\n        int rtn = setsockopt(sfds[i], SOL_SOCKET, SO_REUSEADDR, (void*) &amp;optVal,\n                optLen);\n        if (rtn &lt; 0)\n        {\n            perror(\"Error\");\n            exit(1);\n        }\n        struct sockaddr_in servaddr;\n        servaddr.sin_family = AF_INET;\n        servaddr.sin_port = htons(7590 + i);\n        ports[i] = i;\n        servaddr.sin_addr.s_addr = INADDR_ANY;\n        if (bind(sfds[i], (struct sockaddr*) &amp;servaddr, sizeof(servaddr)) &lt; 0)\n        {\n            perror(\"Error\");\n            exit(1);\n        }\n        if (listen(sfds[i], 1) &lt; 0)\n        {\n            perror(\"Error\");\n            exit(1);\n        }\n    }\n    int c = fork();\n\n    if (c &gt; 0)\n    {\n        val-&gt;aid = c;\n        val-&gt;sid = getpid();\n        kill(getpid(), SIGUSR1);\n        while (1)\n            ;\n    }\n    else if (c == 0)\n    {\n        while (1)\n            ;\n    }\n    else\n    {\n        perror(\"Error\");\n        exit(1);\n    }\n\n}\n</code></pre>\n\n<p>// FILE 2</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;signal.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;string.h&gt;\n#include&lt;arpa/inet.h&gt;\n#include&lt;sys/time.h&gt;\n#include&lt;iostream&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;sys/select.h&gt;\n#include&lt;sys/shm.h&gt;\n\nusing namespace std;\n\nstruct shm\n{\n    int aid;\n    int sid;\n    int bid;\n    int cid;\n    int pno;\n    int portno;\n}*val;\n\nint sfds[4];\nint count = 4;\n\nvoid func1(int a)\n{\n    int sfd = socket(AF_INET, SOCK_STREAM, 0);\n    struct sockaddr_in servaddr;\n    servaddr.sin_family = AF_INET;\n    servaddr.sin_port = htons(7590 + val-&gt;portno);\n    servaddr.sin_addr.s_addr = INADDR_ANY;\n    const int optVal = 1;\n    const socklen_t optLen = sizeof(optVal);\n    cout &lt;&lt; val-&gt;portno &lt;&lt; \" vpn \" &lt;&lt; endl;\n    int rtn = setsockopt(sfd, SOL_SOCKET, SO_REUSEADDR, (void*) &amp;optVal,\n            optLen);\n\n    while (bind(sfd, (struct sockaddr*) &amp;servaddr, sizeof(servaddr)) &lt; 0)\n    {\n        perror(\"Error\");\n    }\n    cout &lt;&lt; endl &lt;&lt; \"Done\" &lt;&lt; endl;\n    if (listen(sfd, 1) &lt; 0)\n    {\n        perror(\"Error\");\n        exit(1);\n    }\n    for (int i = 0; i &lt; 1; i++)\n    {\n        struct sockaddr_in cliaddr;\n        socklen_t clilen;\n        int nsfd = accept(sfd, (struct sockaddr*) &amp;cliaddr, &amp;clilen);\n        send(nsfd, \"OkaB\", 5, 0);\n    }\n    close(sfd);\n    signal(SIGUSR1, &amp;func1);\n    kill(val-&gt;cid, SIGUSR1);\n}\n\nint main()\n{\n    signal(SIGUSR1, &amp;func1);\n    int shmid = shmget(123456, sizeof(struct shm), IPC_CREAT | 0666);\n    if (shmid &lt; 0)\n    {\n        perror(\"Error\");\n    }\n    val = (struct shm*) shmat(shmid, NULL, 0);\n    val-&gt;bid = getpid();\n    while (1)\n        ;\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "variable-length-array"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1487754660, "post_id": 42386948, "comment_id": 71922367, "body": "C is an imperative programming language, not declarative. It means roughly that your program is executed line by line. You cannot declare an array that will update its size automatically when <code>n</code> changes, you can only declare an array with a size that is in <code>n</code> <b>at the point of declaration</b>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1487754773, "post_id": 42386948, "comment_id": 71922443, "body": "Question is (i) well-written, (ii) contains short compilable code, (iii) documents actual output, (iv) documents expected output. And two established users have submitted good answers, which adds more credibility to the question. So why the downvote?"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1487754974, "post_id": 42386948, "comment_id": 71922590, "body": "@Bathsheba maybe because it is a question that shows that he didn&#39;t get a &quot;basic concept&quot; of C and therefore this is a bad question and he is a bad person ;)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1487755153, "post_id": 42386948, "comment_id": 71922720, "body": "@Bathsheba - I honestly think the downvotes are due to the horrible formatting in the first version of the post. I fixed it, and I hope people will re-evaluate their votes now, but you know... Vote and run is popular on SO."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1487760421, "last_edit_date": 1487760421, "creation_date": 1487754375, "answer_id": 42387015, "question_id": 42386948, "link": "https://stackoverflow.com/questions/42386948/why-is-the-seventh-variable-6-in-my-program/42387015#42387015", "title": "Why is the seventh variable 6 in my program?", "body": "<p>In your code</p>\n\n<pre><code>int n,i;\nint str[n];\n</code></pre>\n\n<p>you're using <code>n</code> while it has indeterminate value, unitialized. It invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>To elaborate, <code>n</code> being an automatic local variable, unless initialized explicitly, contains indeterminate value.</p>\n\n<p><strong>Solution:</strong> You need to define <code>int str[n];</code> <strong>after</strong> you has taken the value from user (and sanitized).</p>\n\n<p>After that, there's once more issue, your loop runs off-by-one for the array. C uses 0-based array indexing, so, for an array of size <code>n</code>, the valid indexes will be <code>0</code> to <code>n-1</code>. You loop construct should be</p>\n\n<pre><code>for(i=0; i&lt;n; i++)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1487755166, "post_id": 42387019, "comment_id": 71922729, "body": "Interestingly you can engineer this &quot;time travel&quot; property using actors in C++. Nice answer by the way."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 4, "last_activity_date": 1487754384, "creation_date": 1487754384, "answer_id": 42387019, "question_id": 42386948, "link": "https://stackoverflow.com/questions/42386948/why-is-the-seventh-variable-6-in-my-program/42387019#42387019", "title": "Why is the seventh variable 6 in my program?", "body": "<p>This is really strange code with undefined behavior. What do you expect this:</p>\n\n<pre><code>int n;  // No value!\nint str[n];\n</code></pre>\n\n<p>To do? You get an array whose length is unknown since <code>n</code> has no value at the point of the <code>str</code> declaration.</p>\n\n<p>If you expected the compiler to \"time-travel\" back to the <code>str[n]</code> line magically when <code>n</code> is given a value by <code>scanf()</code>, then ... that's not how Co works, and you should really read up on the language a bit more. And compile with <em>all</em> warnings you can get from your environment.</p>\n\n<p>As an extra detail, even if it were fixed so that <code>n</code> had a value, the <code>for</code> loop <em>overruns</em> the array and gives you undefined behavior <em>again</em>.</p>\n\n<p>For an array of size <code>m</code>, the loop header should read</p>\n\n<pre><code>for (size_t i = 0; i &lt; m; ++i)\n</code></pre>\n\n<p>Since indexing is 0-based, you <em>cannot</em> index at <code>m</code>, that's outside the array.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 7603779, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d5cb463ed628d40daaab866402a759b?s=128&d=identicon&r=PG&f=1", "display_name": "moosefoot", "link": "https://stackoverflow.com/users/7603779/moosefoot"}, "is_accepted": false, "score": 0, "last_activity_date": 1487756367, "creation_date": 1487756367, "answer_id": 42387814, "question_id": 42386948, "link": "https://stackoverflow.com/questions/42386948/why-is-the-seventh-variable-6-in-my-program/42387814#42387814", "title": "Why is the seventh variable 6 in my program?", "body": "<p>The value for the size of the string str[] is not yet defined. You need to have initialized this value before declaring a string/array.</p>\n\n<p>If you're using gcc to compile, try including the -Wall flag in your compile line to catch errors like this.</p>\n"}], "owner": {"reputation": 17, "user_id": 7505792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00322eaa23ffa1b176e11c38d1dce0f7?s=128&d=identicon&r=PG&f=1", "display_name": "yeon ho Lee", "link": "https://stackoverflow.com/users/7505792/yeon-ho-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1487760421, "creation_date": 1487754212, "last_edit_date": 1487758507, "question_id": 42386948, "link": "https://stackoverflow.com/questions/42386948/why-is-the-seventh-variable-6-in-my-program", "title": "Why is the seventh variable 6 in my program?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int n,i;\n    int str[n];\n\n    scanf(\"%d\\n\",&amp;n);\n    for(i=0;i&lt;=n;i++)\n    {\n        scanf(\"%d\",&amp;str[i]);\n        printf(\"%d th %d\\n\",i,n);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Input:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>10\n\n8 9 2 1 4 10 7 6 8 7\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0 th 10\n\n1 th 10\n\n2 th 10\n\n3 th 10\n\n4 th 10\n\n5 th 10\n\n6 th 10\n\n7 th 6\n</code></pre>\n\n<p>Why is 6 in the output?</p>\n"}, {"tags": ["c", "string", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487753777, "post_id": 42386687, "comment_id": 71921766, "body": "<code>char name</code>...hmmmm"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487753778, "post_id": 42386687, "comment_id": 71921768, "body": "<code>void input(FILE *fp1, char *name) {     fscanf(fp1, &quot;%s&quot;, name);     printf(&quot;%s&quot;, name); }</code> for starters"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1487754059, "post_id": 42386687, "comment_id": 71921963, "body": "<code>char *name</code> is initialized, you need to allocate space for it."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1487754165, "post_id": 42386687, "comment_id": 71922042, "body": "I only think the are 3481 answers to nearly the exact same question on the site. (I think you could probably search <code>Apple Banana Pear</code> and find at least a dozen) <code>:)</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487754968, "post_id": 42386687, "comment_id": 71922581, "body": "You need to study pointers and arrays before you can write this program. The code posted has too many fundamental misunderstandings."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1487753991, "post_id": 42386785, "comment_id": 71921917, "body": "May also want to use <code>char *input...</code> and be able to return success/failure (<code>NULL</code>) to the caller. (OP also noted using <code>fscanf</code> as a requirement -- poor guy)"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1487757460, "last_edit_date": 1487757460, "creation_date": 1487753803, "answer_id": 42386785, "question_id": 42386687, "link": "https://stackoverflow.com/questions/42386687/string-array-pointer-in-c-passing-only-one-char/42386785#42386785", "title": "String array pointer in C passing only one char", "body": "<p>Your code has undefined behavior.</p>\n\n<p>You can't store a string of more than 0 characters in a single <code>char</code> (since the terminator takes one char, you can have 0 characters of actual string before it in that case).</p>\n\n<p>You must use character arrays to make some space:</p>\n\n<pre><code>void input(char *name, FILE *fp1)\n{\n  if(fscanf(fp1, \"%s\", name) == 1)\n    printf(\"%s\\n\", name);\n}\n</code></pre>\n\n<p>Then call it like this, for instance:</p>\n\n<pre><code>char namebuffer[128];\n\ninput(namebuffer, fp1);\n</code></pre>\n\n<p>Note that I've edited this to use <code>fscanf()</code> since that was a requirement, but this is a really bad solution. It won't read a string with whitespace in it, so a typical \"firstname lastname\" full name won't read correctly. There are ways around that, but I'm not sure where to draw the line here.</p>\n\n<p>Also buffer overflow can easily happen here since there's no protection. This can be added while keeping <code>fscanf()</code> but it's a bit annoying.</p>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1487755444, "last_edit_date": 1487755444, "creation_date": 1487755129, "answer_id": 42387287, "question_id": 42386687, "link": "https://stackoverflow.com/questions/42386687/string-array-pointer-in-c-passing-only-one-char/42387287#42387287", "title": "String array pointer in C passing only one char", "body": "<p>You are using an initialized pointer <code>char *name</code>, which leads to undefined behavior. You need to make sure <code>name</code> has enough space hold the strings you are reading from the file. You can simply create a VLA, such as <code>char name[n]</code>, which can hold up to <code>n</code> characters. Another option would be dynamically allocate <code>name</code>, but this can create unnecessary overhead. </p>\n\n<p>You also need to check return of <code>fscanf()</code>, as it returns the number of items scanned. In your case, you would want to read one word at a time, until EOF. It would be better to also use <a href=\"https://linux.die.net/man/3/fgets\" rel=\"nofollow noreferrer\"><code>fgets(3)</code></a> to read input, instead of <code>fscanf()</code>.</p>\n\n<p>Here is a small example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define WORDSIZE 100\n\n/* function which reads one word */\nint input(FILE *stream, char word[]) {\n    if (fscanf(stream, \" %99s\", word) != 1) {\n        return 0;\n    }\n    return 1;\n}\n\nint main(void) {\n    FILE *fptr;\n\n    /* array which holds words */\n    char word[WORDSIZE];\n\n    fptr = fopen(\"somewords.txt\", \"r\");\n    if (fptr == NULL) {\n        fprintf(stderr, \"Cannot open file\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* Keeps running loop until input() returns 0 */\n    while (input(fptr, word)) {\n        printf(\"%s\\n\", word);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4307348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce221087410ef35ad066791bf4ff2ac9?s=128&d=identicon&r=PG&f=1", "display_name": "b1lly", "link": "https://stackoverflow.com/users/4307348/b1lly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1487757460, "creation_date": 1487753542, "last_edit_date": 1487753921, "question_id": 42386687, "link": "https://stackoverflow.com/questions/42386687/string-array-pointer-in-c-passing-only-one-char", "title": "String array pointer in C passing only one char", "body": "<p>I have an input file that is just</p>\n\n<p>Apple\nBanana\nPear\netc. all on different lines</p>\n\n<p>and I need to use a loop to go line-by-line assigning each string to a variable, and then later passing that string to other functions. I am doing this by using fscanf (required). Currently I have in my main()</p>\n\n<pre><code>char *name;\nfor (i=0; i&lt;=fileLength; i++) {\n    input(fp1, name)\n    printf(\"%s\", &amp;name);\n    // later would pass name elsewhere\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>void input(FILE *fp1, char name) {\n    fscanf(fp1, \"%s\", &amp;name);\n    printf(\"%s\", &amp;name);\n}\n</code></pre>\n\n<p>If I run the printf statement from the input function, I get the whole string perfectly. If I run it from main, I just get \"A\". It does not later change to \"B\" when doing the banana line, although the printf statement in the input function prints out correctly. What gives and how can I get the name var printed out in my main(), and later be able to pass that var?</p>\n"}, {"tags": ["c", "numerical-methods", "differential-equations", "runge-kutta"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1487752811, "post_id": 42386391, "comment_id": 71921085, "body": "You show two programs but only ask a question for the second. So what is the first program for? And what results do you get on the second program?"}, {"owner": {"reputation": 360, "user_id": 3492498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b22bd84245bf80211b37cc5ccf73def?s=128&d=identicon&r=PG&f=1", "display_name": "Nish", "link": "https://stackoverflow.com/users/3492498/nish"}, "edited": false, "score": 0, "creation_date": 1487753305, "post_id": 42386391, "comment_id": 71921417, "body": "give some idea about  the result you are getting and what is the expected result."}, {"owner": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "edited": false, "score": 0, "creation_date": 1487754563, "post_id": 42386391, "comment_id": 71922310, "body": "I am actually asking about the first program. I wanted to highlight that the program with multiple modules does not give the expected result, while the code with one main function does give the expected result. The expected result being - values of theta and omega for different times, that form a sine wave when plotted against time."}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "edited": false, "score": 0, "creation_date": 1487755832, "post_id": 42386666, "comment_id": 71923283, "body": "If I modify the code in the second way, then how do I, for example, return the differential array? For example, the function oscnetwork_opt sets an array with the coupled differential equations, which I return. If I write the following code:  <code>void oscnetwork_opt(float y[2],float* dydt){ dydt[0] = y[1]; dydt[1] = -sin(y[0]); }</code>  That wouldn&#39;t work either."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "edited": false, "score": 0, "creation_date": 1487755929, "post_id": 42386666, "comment_id": 71923379, "body": "@SamyuktaRamnath - In which way? I presented two options."}, {"owner": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "edited": false, "score": 0, "creation_date": 1487756259, "post_id": 42386666, "comment_id": 71923658, "body": "Would I receive the results of my multiplication into a float* ptr in the calling function, if I tried the second method? In fact, trying this gives me a segmentation fault."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "edited": false, "score": 0, "creation_date": 1487756593, "post_id": 42386666, "comment_id": 71923924, "body": "@SamyuktaRamnath - You would do something like <code>float arr[2]; array_mul(2, array_in, num, arr);</code> The whole point is that you tell the function where to write, and decopule managing the memory from the calculation itself."}, {"owner": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "edited": false, "score": 0, "creation_date": 1487761329, "post_id": 42386666, "comment_id": 71926608, "body": "Isn&#39;t that about the same as passing an array?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "edited": false, "score": 1, "creation_date": 1487761655, "post_id": 42386666, "comment_id": 71926861, "body": "@SamyuktaRamnath - No. You cannot pass arrays, since passing is always by value. This is an intricate point that novice programmers often fall over. A function can accept a pointer (to what is possibly the first element <i>of</i> an array), and arrays <b>decay</b> to pointers implicitly when you pass them. But you do not pass an array. <code>void foo(int a[2])</code> is just syntactic sugar for <code>void foo(int *a)</code>. There is no compiler check to make sure you pass an array of size 2 exactly."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1487753774, "last_edit_date": 1487753774, "creation_date": 1487753462, "answer_id": 42386666, "question_id": 42386391, "link": "https://stackoverflow.com/questions/42386391/c-code-for-simple-pendulum-doesnt-give-expected-results/42386666#42386666", "title": "C code for simple pendulum doesn&#39;t give expected results", "body": "<p>Your code has undefined behavior. At its core, it's because you use static pointers in your multiplication and addition functions. Allow me to condense it into the problematic part:</p>\n\n<pre><code>k2 = array_mul(2,k2,dt_half);\nk3 = array_mul(2,k3,dt); // This either makes k2 point to freed memory, or overwrites the values in the location it points to.\n\naddition[i] = ((*(k1+i)) + (*(k2+i))*2 + (*(k3+i))*2 + (*(k4+i))) *dt/6; // This uses all four pointers as though they must point to distinct memory locations.\n</code></pre>\n\n<p>First get rid of that static. Then you can do one of two things:</p>\n\n<ol>\n<li><p>Simply allocate memory inside the functions and return a pointer to it. It will be the calling codes responsibility to free it at the end, like this:</p>\n\n<pre><code>free(k1);\nfree(k2);\n// etc\n</code></pre></li>\n<li><p>Pass a pointer into a your functions for them to populate, leaving the memory management entirely to the calling code:</p>\n\n<pre><code>// function to multiply each element of the array by some number\nvoid array_mul(int len_array_in,float *array_in, float num, float *array_out){\n    int i;\n    for (i=0;i&lt;len_array_in;i++){\n      array_out[i] =array_in[i]*num;\n    }\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 304, "user_id": 7204831, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-BVTzI4cFWd8/AAAAAAAAAAI/AAAAAAAAADc/ENN2SgC00pY/photo.jpg?sz=128", "display_name": "Samyukta Ramnath", "link": "https://stackoverflow.com/users/7204831/samyukta-ramnath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521096745, "creation_date": 1487752556, "last_edit_date": 1521096745, "question_id": 42386391, "link": "https://stackoverflow.com/questions/42386391/c-code-for-simple-pendulum-doesnt-give-expected-results", "title": "C code for simple pendulum doesn&#39;t give expected results", "body": "<p>I am trying to write a code for a network of FitzHugh NAgumo neurons in C, using RK4 integrator. As that wasn't working, I decided to try something simpler, a simple pendulum system. I am using separate functions - one to return the differential array, one for the integrator, and a few functions to add and multiply numbers to each element of an array.</p>\n\n<p>Here is the code that returns all '0' values:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint N = 2;\n\nfloat h = 0.001;\n\nstruct t_y_couple{\n    float t;\n    float* y;\n};\n\n\nfloat* array_add(int len_array_in,float array_in[2], float array_add[2]);\nstruct t_y_couple integrator_rk4(float dt,float t, float* p1);\n\nfloat* oscnetwork_opt(float t, float *y);\nfloat* array_mul(int len_array_in,float array_in[2], float num);\n\n\nint main(void){\n    /* initializations*/\n    struct t_y_couple t_y;\n\n\n    int i,iter;\n\n//  time span for which to run simulation\n    int tspan = 20;\n\n\n//  total number of time iterations = tspan*step_size   \n    int tot_time = (int) ceil(tspan/h);\n\n//  Time array\n    float T[tot_time];\n\n//  pointer definitions\n    float *p, *q;\n\n\n//  vector to hold values for each differential variable for all time iterations\n    float Y[tot_time][2];\n//  2*N+sum_adj = total number of coupled differential equations to solve   \n\n//  initial conditions vector for time = 0\n\n    Y[0][0] = 0;\n    Y[0][1] = 0.1;\n//  set the time array\n    T[0] = 0;\n\n//  This loop calls the RK4 code\n    for (i=0;i&lt;tot_time-1;i++){\n        p = &amp;Y[i][0];   // current time\n        q = &amp;Y[i+1][0]; // next time step\n//      printf(\"\\n\\n\");\n//      for (j=0;j&lt;2*N+sum_adj;j++)\n//          printf(\"value passed in from main function: %f ,%d \",*(p+j),j);\n//      printf(\"\\n\");\n\n//      call the RK4 integrator with current time value, and current \n//      values of voltage           \n        t_y = integrator_rk4(h,T[i],p);  \n\n//      Return the time output of integrator into the next iteration of time\n        T[i+1] = t_y.t; \n\n//      copy the output of the integrator into the next iteration of voltage        \n        q = memcpy(q, t_y.y, (2) * sizeof(float));\n//      q = memcpy(q, p, (2*N+sum_adj) * sizeof(float) );\n\n        printf(\"%f \",T[i+1]);\n        for (iter = 0;iter&lt;N;iter++)\n            printf(\"%f \",*(p+iter));\n        printf(\"\\n\");\n    }\n\n\n    return 0;\n}\n\nstruct t_y_couple integrator_rk4(float dt,float t, float y[2])\n{   \n//  initialize all the pointers\n    float *y1,*y2,*y3, *yout;\n    float tout,dt_half;\n    float *k1,*k2,*k3,*k4;\n//  initialize iterator\n    int i;\n\n//  printf(\"\\n\");\n    struct t_y_couple ty1;\n    tout = t+dt;\n    dt_half = 0.5*dt;\n    float addition[2];\n\n//  return the differential array into k1\n    k1 = oscnetwork_opt(t,y);\n//  multiply the array k1 by dt_half    \n    k1 = array_mul(2,k1,dt_half);\n//  add k1 to each element of the array y passed in\n    y1 = array_add(2,y,k1);\n\n//  for (i=0;i&lt;2*N+sum_adj;i++)\n//      printf(\"k1: %f y: %f y1: %f\\n\",*(k1+i), *(y+i), *(y1+i));\n\n//  do the same thing 3 times\n    k2 = oscnetwork_opt(t+dt_half,y1);\n    k2 = array_mul(2,k2,dt_half);\n    y2 = array_add(2,y,k2); \n//  for (i=0;i&lt;2*N+sum_adj;i++)\n//      printf(\"k2: %f y: %f y2: %f\\n\",*(k2+i), *(y+i), *(y2+i));\n\n    k3 = oscnetwork_opt(t+dt_half,y2);\n    k3 = array_mul(2,k3,dt);\n    y3 = array_add(2,y,k3);\n//  for (i=0;i&lt;2*N+sum_adj;i++)\n//      printf(\"k3: %f y: %f y3: %f\\n\",*(k3+i), *(y+i), *(y3+i));\n\n    k4 = oscnetwork_opt(tout,y3);\n    k4 = array_mul(2,k4,dt);\n    yout = array_add(2,y,k4);\n//  for (i=0;i&lt;2*N+sum_adj;i++)\n//      printf(\"k4: %f y: %f y4: %f\\n\",*(k4+i), *(y+i), *(yout+i));     \n\n//  Make the final additions with k1,k2,k3 and k4 according to the RK4 code\n    for (i=0;i&lt;2;i++){\n        addition[i] = ((*(k1+i)) + (*(k2+i))*2 + (*(k3+i))*2 + (*(k4+i))) *dt/6;\n//      printf(\"final result : addition %f  \", addition[i]);\n    }\n//  printf(\"\\n\");\n//  add this to the original array\n    yout = array_add(2,y,addition);\n\n//  for (i=0;i&lt;2*N+sum_adj;i++)\n//      printf(\"yout: %f  \",*(yout+i));\n//  printf(\"\\n\");\n//  return a struct with the current time and the updated voltage array\n    ty1.t = tout;\n    ty1.y = yout;\n\n    return ty1;\n}\n\n\n\n// function to add two arrays together, element by element\nfloat* array_add(int len_array_in,float array_in[2], float array_sum[2]){\n    int i;\n    static float *array_out_add= NULL;\n    if (array_out_add != 0) {\n        array_out_add = (float*) realloc(array_out_add, sizeof(float) * (2));\n    } else {\n        array_out_add = (float*) malloc(sizeof(float) * (2));\n    }\n\n    for (i=0;i&lt;len_array_in;i++){\n        array_out_add[i] = array_in[i]+array_sum[i];\n//      printf(\"before adding: %f, add amount: %f , after adding: %f, iteration: %d\\n \", array_in[i], array_sum[i], array_out[i],i);\n    }\n    return array_out_add;\n//  return 0;\n}\n\n\n// function to multiply each element of the array by some number\nfloat* array_mul(int len_array_in,float array_in[2], float num){\n    int i;\n    static float *array_out_mul= NULL;\n    if (array_out_mul != 0) {\n        array_out_mul = (float*) realloc(array_out_mul, sizeof(float) * (2));\n    } else {\n        array_out_mul = (float*) malloc(sizeof(float) * (2));\n    }\n    for (i=0;i&lt;len_array_in;i++){\n        array_out_mul[i] =array_in[i]*num;\n    }\n    return array_out_mul;\n//  return 0;\n}\n\n\n// function to return the vector with coupled differential variables for each time iteration\nfloat* oscnetwork_opt(float t, float *y){\n\n//  define and allocate memory for the differential vector\n    static float* dydt = NULL;\n    if (dydt != 0) {\n        dydt = (float*) realloc(dydt, sizeof(float) * (2));\n    } else {\n        dydt = (float*) malloc(sizeof(float) * (2));\n    }\n\n\n    dydt[0] = y[1];\n    dydt[1] = -(0.1*0.1)*sin(y[0]);\n    return dydt;\n}\n</code></pre>\n\n<p>Here is a code that does return a sine wave for the omega variable on my laptop but not on my PC (both 64 bit, laptop running Ubuntu 14.04 and PC running Debian 8).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint N = 2;\n\nfloat h = 0.0001;\n\nstruct t_y_couple{\n    float t;\n    float* y;\n};\n\n\nfloat* array_add(int len_array_in,float array_in[2], float array_add[2]);\nstruct t_y_couple integrator_rk4(float dt,float t, float* p1);\n\nfloat* oscnetwork_opt(float t, float *y);\nfloat* array_mul(int len_array_in,float array_in[2], float num);\n\n\nint main(void){\n    /* initializations*/\n    struct t_y_couple t_y;\n\n\n    int i,iter,j;\n\n//  time span for which to run simulation\n    int tspan = 20;\n\n\n//  total number of time iterations = tspan*step_size   \n    int tot_time = (int) ceil(tspan/h);\n\n//  Time array\n    float T[tot_time];\n\n//  pointer definitions\n    float *p, *q;\n\n\n//  vector to hold values for each differential variable for all time iterations\n    float Y[tot_time][2];\n//  N = total number of coupled differential equations to solve     \n\n//  initial conditions vector for time = 0\n\n    Y[0][0] = 3.14;\n    Y[0][1] = 0;\n//  set the time array\n    T[0] = 0;\n\n//  This loop calls the RK4 code\n    for (i=0;i&lt;tot_time-1;i++){\n        p = &amp;Y[i][0];   // current time\n//      q = &amp;Y[i+1][0]; // next time step\n//      printf(\"\\n\\n\");\n//      for (j=0;j&lt;N;j++)\n//          printf(\"value passed in from main function: %f ,%d \",*(p+j),j);\n//      printf(\"\\n\");\n\n//      call the RK4 integrator with current time value, and current \n//      values of voltage           \n        t_y = integrator_rk4(h,T[i],p);  \n\n//      Return the time output of integrator into the next iteration of time\n        T[i+1] = t_y.t; \n\n//      copy the output of the integrator into the next iteration of voltage        \n//      q = memcpy(q, t_y.y, (2) * sizeof(float));\n//      q = memcpy(q, p, (N) * sizeof(float) );\n\n        printf(\"%f \",T[i+1]);\n        for (iter = 0;iter&lt;N;iter++){\n            Y[i+1][iter] = t_y.y[iter];\n            printf(\"%f \",Y[i+1][iter]);\n        }\n        printf(\"\\n\");\n    }\n\n\n    return 0;\n}\n\nstruct t_y_couple integrator_rk4(float dt,float t, float y[2])\n{   \n//  initialize all the pointers\n    float y1[2],y2[2],y3[2], yout[2];\n    float tout,dt_half;\n    float k1[2],k2[2],k3[2],k4[2];\n//  initialize iterator\n    int i;\n//  for(i=0;i&lt;N;i++)\n//      printf(\"into integrator %f \",y[i]);\n//  printf(\"\\n\");\n    struct t_y_couple ty1;\n    tout = t+dt;\n    dt_half = 0.5*dt;\n    float addition[2];\n\n//  return the differential array into k1\n    k1[0] = y[1];\n    k1[1] = -(1)*sin(y[0]);\n\n\n//  multiply the array k1 by dt_half\n    for (i=0;i&lt;N;i++){\n        y1[i] = y[i] + k1[i]*dt_half;\n//      printf(\"k1: %f y: %f y1: %f\\n\",*(k1+i), *(y+i), *(y1+i));       \n    }\n\n//  do the same thing 3 times\n    k2[0] = y1[1];\n    k2[1] = -(1)*sin(y1[0]);\n\n\n    for (i=0;i&lt;N;i++){\n        y2[i] = y[i] + k2[i]*dt_half;\n//      printf(\"k2: %f y: %f y2: %f\\n\",*(k2+i), *(y+i), *(y2+i));       \n    }\n    k3[0] = y2[1];\n    k3[1] = -(1)*sin(y2[0]);\n\n\n    for (i=0;i&lt;N;i++){\n        y3[i] = y[i] + k3[i]*dt;\n//      printf(\"k3: %f y: %f y3: %f\\n\",*(k3+i), *(y+i), *(y3+i));\n    }\n\n\n    k4[0] = y3[1];\n    k4[1] = -(1)*sin(y3[0]);\n\n\n//  Make the final additions with k1,k2,k3 and k4 according to the RK4 code\n\n    for (i=0;i&lt;N;i++){\n\n        addition[i] = (( k1[i]*dt) + (k2[i])*2 + (k3[i])*2 + (k4[i]))/6;\n        yout[i] = y[i] + addition[i];\n//      printf(\"y[%d]: %f  +  addition[%d]: %f  = yout[%d] :%f  \",i,y[i],i, addition[i], i, yout[i]);\n\n//      printf(\"final result : addition %f  \", addition[i]);\n    }\n//  add this to the original array\n\n//  printf(\"\\n\");\n//  return a struct with the current time and the updated voltage array\n    ty1.t = tout;\n    ty1.y = yout;\n\n    return ty1;\n}\n</code></pre>\n\n<p>I suspect that the problem lies mostly in the way I am passing the arrays through the functions - as it works when I do not have a separate function to run the integrator. Would appreciate some help on this.</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1487751456, "post_id": 42385983, "comment_id": 71920278, "body": "Do you know about <code>stdbool.h</code>?"}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 2, "creation_date": 1487751774, "post_id": 42385983, "comment_id": 71920485, "body": "use debugger (GDB) to debug the problem, this is good way to learn."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1487751835, "post_id": 42385983, "comment_id": 71920521, "body": "Linked lists and stacks and a segmentation fault, oh my"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1487752159, "post_id": 42385983, "comment_id": 71920695, "body": "<code>pop(head);</code> --&gt; <code>pop(&amp;head);</code> ....hide pointers with <code>typedef</code> is always a bad idea..."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487752382, "post_id": 42385983, "comment_id": 71920826, "body": "<code>printf(&quot;%d %d&quot;, &amp;head);</code> ----&gt; should be at least <code>printf(&quot;%p\\n&quot;, (void *)&amp;head);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 2, "last_activity_date": 1487752585, "creation_date": 1487752585, "answer_id": 42386397, "question_id": 42385983, "link": "https://stackoverflow.com/questions/42385983/linked-lists-and-stacks-and-a-segmentation-fault/42386397#42386397", "title": "linked lists and stacks and a segmentation fault", "body": "<p>The main problem here is that you are hiding pointer with typedef:</p>\n\n<pre><code>typedef linked* linkedPtr;\n</code></pre>\n\n<p>In main you are declaring </p>\n\n<pre><code>linkedPtr head = NULL;\n</code></pre>\n\n<p>but you never allocate/<code>malloc</code>ate space for that variable and the first piece of code that dereference it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined Behavior</a> because you are dereferencing a null pointer</p>\n\n<pre><code>// THE START OF THE DEPTH FIRST SEARCH METHOD\nfor (i = 0; i &lt; m1.xsize + 2; i++)\n{\n    for (j = 0; j &lt; m1.ysize + 2; j++)\n    {\n        if (m1.arr[i][j] != '*')\n        {\n            head-&gt;Unvisited = FALSE; &lt;----------BOOOOOOOOOOOOOOM-------\n            head-&gt;next = head-&gt;next + 1;\n        }\n    }\n}\n</code></pre>\n\n<p>Moreover you have a type mismatch calling <code>pop</code> function, change</p>\n\n<pre><code>pop(head);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>pop(&amp;head);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7603374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d97f892b664391e0c8c55a62f7924d1?s=128&d=identicon&r=PG&f=1", "display_name": "Hi ya team", "link": "https://stackoverflow.com/users/7603374/hi-ya-team"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1487764151, "answer_count": 1, "score": -2, "last_activity_date": 1487752585, "creation_date": 1487751224, "last_edit_date": 1487751626, "question_id": 42385983, "link": "https://stackoverflow.com/questions/42385983/linked-lists-and-stacks-and-a-segmentation-fault", "closed_reason": "Not suitable for this site", "title": "linked lists and stacks and a segmentation fault", "body": "<p>First time posting a question on stack overflow so be nice. \nI'm trying to write a program for school. This program is suppose to take a data set and turn it into a maze. The error I'm getting is a segmentation fault in putty but not in the IDE I'm using. Not sure what to do or how to handle it. I tried putting printf statements everywhere but none of them really show up doesnt make sense. Maybe because the functions themselves cause the fault not sure though what part.</p>\n\n<p>//CODE BEGINS****************************************************************</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\ntypedef int bool;\n#define FALSE 0\n#define TRUE  1\n\ntypedef struct mazeStruct\n{\n    char **arr; /* allows for a dynamic 2-D maze of any size */\n    int xsize, ysize;\n    int xstart, ystart;\n    int xend, yend;\n    bool end;\n} maze;\n\nstruct linkedStruct\n{\n    int x;\n    int y;\n    bool Unvisited;\n    struct linkedStruct* next;\n};\n\ntypedef struct linkedStruct linked;\ntypedef linked* linkedPtr;\n\nvoid push(linkedPtr* hd, int Xval, int Yval)\n{\n    linkedPtr ptr = (linkedPtr) malloc(sizeof(linked));\n    ptr-&gt;x = Xval;\n    ptr-&gt;y = Yval;\n    ptr-&gt;Unvisited = FALSE;\n    ptr-&gt;next = *hd;\n    *hd = ptr;\n}\n\nint isEmpty(linkedPtr hd)\n{\n    if (hd == NULL)\n        return TRUE;\n    else\n        return FALSE;\n}\n\nint top(linkedPtr hd)\n{\n    return (hd-&gt;x &amp;&amp; hd-&gt;y);\n}\n\nvoid pop(linkedPtr* hd)\n{\n    linkedPtr ptr = (linkedPtr) malloc(sizeof(linked));\n\n    ptr-&gt;x = NULL;\n    ptr-&gt;y = NULL;\n    ptr-&gt;Unvisited = TRUE;\n    ptr-&gt;next = *hd;\n    *hd = ptr;\n    free(ptr);\n}\n\nint main(int argc, char **argv)\n{\n    maze m1;\n    linkedPtr head = NULL;\n\n    int xpos, ypos;\n    int i, j;\n    m1.end = FALSE;\n\n    FILE *src;\n    //FILE *src = fopen (\"mazeData1.txt\",'r');\n\n    /* verify the proper number of command line arguments were given */\n    if (argc != 2)\n    {\n        printf(\"Usage: %s &lt;input file name&gt;\\n\", argv[0]);\n        exit(-1);\n    }\n\n    /* Try to open the input file. */\n    if ((src = fopen(argv[1], \"r\")) == NULL)\n    {\n        printf(\"Can't open input file: %s\", argv[1]);\n        printf(\"Standard Error.\\n\");\n        exit(-1);\n    }\n\n    /* read in the size, starting and ending positions in the maze */\n    fscanf(src, \"%d %d\", &amp;m1.xsize, &amp;m1.ysize);\n    if (m1.xsize &lt; 1 || m1.ysize &lt; 1)\n    {\n        printf(\"Size has to be 1 or above.\\n\");\n        fscanf(src, \"%d %d\", &amp;m1.xsize, &amp;m1.ysize);\n    }\n    fscanf(src, \"%d %d\", &amp;m1.xstart, &amp;m1.ystart);\n    if (m1.xstart &gt; m1.xsize || m1.ystart &gt; m1.ysize || m1.xstart &lt; 1\n            || m1.ystart &lt; 1)\n    {\n        printf(\"The start has to be within the maze.\\n\");\n        fscanf(src, \"%d %d\", &amp;m1.xstart, &amp;m1.ystart);\n    }\n    fscanf(src, \"%d %d\", &amp;m1.xend, &amp;m1.yend);\n    if (m1.xend &gt; m1.xsize || m1.yend &gt; m1.ysize || m1.xend &lt; 1 || m1.yend &lt; 1)\n    {\n        printf(\"The end has to be within the maze.\\n\");\n        fscanf(src, \"%d %d\", &amp;m1.xend, &amp;m1.yend);\n    }\n\n    if (m1.xend == NULL || m1.yend == NULL)\n    {\n        printf(\"Error: Need at least three lines of input\");\n        exit(-1);\n    }\n\n    /* print them out to verify the input */\n    printf(\"size: %d, %d\\n\", m1.xsize, m1.ysize);\n    printf(\"start: %d, %d\\n\", m1.xstart, m1.ystart);\n    printf(\"end: %d, %d\\n\", m1.xend, m1.yend);\n\n    /* allocate the maze */\n    m1.arr = (char **) malloc(sizeof(char *) * (m1.xsize + 2));\n    for (i = 0; i &lt; m1.xsize + 2; i++)\n        m1.arr[i] = (char *) malloc(sizeof(char) * (m1.ysize + 2));\n\n    /* initialize the maze to empty */\n    for (i = 0; i &lt; m1.xsize + 2; i++)\n        for (j = 0; j &lt; m1.ysize + 2; j++)\n            m1.arr[i][j] = '.';\n\n    /* mark the borders of the maze with *'s */\n    for (i = 0; i &lt; m1.xsize + 2; i++)\n    {\n        m1.arr[i][0] = '*';\n        m1.arr[i][m1.ysize + 1] = '*';\n    }\n    for (i = 0; i &lt; m1.ysize + 2; i++)\n    {\n        m1.arr[0][i] = '*';\n        m1.arr[m1.xsize + 1][i] = '*';\n    }\n\n    /* mark the starting and ending positions in the maze */\n    m1.arr[m1.xstart][m1.ystart] = 's';\n    m1.arr[m1.xend][m1.yend] = 'e';\n\n    /* mark the blocked positions in the maze with *'s */\n    while (fscanf(src, \"%d %d\", &amp;xpos, &amp;ypos) != EOF)\n    {\n        if (xpos &gt; m1.xsize || ypos &gt; m1.ysize || xpos &lt; 1 || ypos &lt; 1\n                || (xpos == m1.xstart &amp;&amp; ypos == m1.ystart)\n                || (xpos == m1.xend &amp;&amp; ypos == m1.yend))\n        {\n            printf(\n                    \"Error: X or Y is: out of range or is on the end or is on the start\\n\");\n            continue;\n        }\n        m1.arr[xpos][ypos] = '*';\n    }\n\n    /* print out the initial maze */\n    for (i = 0; i &lt; m1.xsize + 2; i++)\n    {\n        for (j = 0; j &lt; m1.ysize + 2; j++)\n            printf(\"%c\", m1.arr[i][j]);\n        printf(\"\\n\");\n    }\n\n    // THE START OF THE DEPTH FIRST SEARCH METHOD\n    for (i = 0; i &lt; m1.xsize + 2; i++)\n    {\n        for (j = 0; j &lt; m1.ysize + 2; j++)\n        {\n            if (m1.arr[i][j] != '*')\n            {\n                head-&gt;Unvisited = FALSE;\n                head-&gt;next = head-&gt;next + 1; //MAYBE\n            }\n        }\n    }\n\n    head-&gt;x = m1.xstart;\n    head-&gt;y = m1.ystart;\n    head-&gt;Unvisited = FALSE;\n\n    while ((isEmpty(head) == FALSE) &amp;&amp; (m1.end == FALSE))\n    {\n        if ((m1.xend == head-&gt;x) &amp;&amp; (m1.yend == head-&gt;y))\n        {\n            printf(\"The END has be found!\\n\");\n            m1.end = TRUE;\n        }\n        if ((head-&gt;x + 1 &amp;&amp; head-&gt;y) == TRUE)\n        {\n            push(&amp;head, head-&gt;x + 1, head-&gt;y);\n        }\n        else if ((head-&gt;x - 1 &amp;&amp; head-&gt;y) == TRUE)\n        {\n            push(&amp;head, head-&gt;x - 1, head-&gt;y);\n        }\n        else if ((head-&gt;x &amp;&amp; head-&gt;y + 1) == TRUE)\n        {\n            push(&amp;head, head-&gt;x, head-&gt;y + 1);\n        }\n        else if ((head-&gt;x &amp;&amp; head-&gt;y) == TRUE)\n        {\n            push(&amp;head, head-&gt;x, head-&gt;y - 1);\n        }\n        else\n        {\n            pop(head);\n        }\n    }\n\n    if (isEmpty(head) == TRUE)\n    {\n        printf(\"Maze has no solution\");\n        exit(0);\n    }\n    else\n    {\n        printf(\"%d %d\", &amp;head);\n    }\n\n    printf(\"%d\", top(head));\n\n    free(m1.arr);\n    m1.arr = NULL;\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "mysql", "c", "cmake", "odbc"], "answers": [{"tags": [], "owner": {"reputation": 211, "user_id": 615052, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd2f739b37b3b955a8f7f991edd39d85?s=128&d=identicon&r=PG", "display_name": "Erfankam", "link": "https://stackoverflow.com/users/615052/erfankam"}, "is_accepted": true, "score": 0, "last_activity_date": 1487749961, "creation_date": 1487749961, "answer_id": 42385616, "question_id": 42385615, "link": "https://stackoverflow.com/questions/42385615/disable-gui-in-mysql-odbc/42385616#42385616", "title": "Disable GUI in Mysql ODBC", "body": "<p>After reading some of CMakefiles and Readme files inside the library, I got that the simplest way to disable gui in mysql odbc is using of cmake parameters.<br/>\nFor this, you can just add <strong>DISABLE_GUI</strong> and set it to <strong><em>1</em></strong>. So you disallow Cmake to make GUI and other related library depend on gtk.h header file.<br/>\nYou can see a simple Cmake command to do this:<br/></p>\n\n<blockquote>\n  <p>cmake -DDISABLE_GUI=1 </p>\n</blockquote>\n"}], "owner": {"reputation": 211, "user_id": 615052, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cd2f739b37b3b955a8f7f991edd39d85?s=128&d=identicon&r=PG", "display_name": "Erfankam", "link": "https://stackoverflow.com/users/615052/erfankam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 42385616, "answer_count": 1, "score": 0, "last_activity_date": 1487749961, "creation_date": 1487749961, "question_id": 42385615, "link": "https://stackoverflow.com/questions/42385615/disable-gui-in-mysql-odbc", "title": "Disable GUI in Mysql ODBC", "body": "<p>I need Mysql-connector-odbc library to include in my project without any need to  GUI. But when I use cmake to configure and then make library, I get error that I have not any gtk or gtk.h installed on my system like this:<br/></p>\n\n<pre><code>fatal error: gtk/gtk.h: No such file or directory\n</code></pre>\n\n<p>So, the question is, how to disable GUI in mysql odbc?<br/>\nThanks.</p>\n"}, {"tags": ["c", "linux", "linux-kernel"], "comments": [{"owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "edited": false, "score": 0, "creation_date": 1487748207, "post_id": 42385002, "comment_id": 71918549, "body": "sorry its my mistake (skb-&gt;data + len of tcp header) and skb-&gt;tail gives same address."}, {"owner": {"reputation": 3177, "user_id": 1221236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/230d4a82674b9e02c0b95e4ecf7468ae?s=128&d=identicon&r=PG", "display_name": "dragosht", "link": "https://stackoverflow.com/users/1221236/dragosht"}, "edited": false, "score": 0, "creation_date": 1487748591, "post_id": 42385002, "comment_id": 71918761, "body": "There are a few ending braces missing in your <code>hook_func</code>. You may want to check those out. Maybe you could also fix the code indentation ..."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487749135, "post_id": 42385002, "comment_id": 71919068, "body": "Probably you forgot a <code>}</code> to close <code>hook_func</code> and a <code>}</code> to close <code>if (skb)</code>condition. In that case you should also add return at the end of the function."}, {"owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "edited": false, "score": 0, "creation_date": 1487749436, "post_id": 42385002, "comment_id": 71919225, "body": "yes i forgot to add  } to close hook_func. but after add } it still not work for me ."}, {"owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "edited": false, "score": 0, "creation_date": 1487749460, "post_id": 42385002, "comment_id": 71919244, "body": "still i am not getting payload."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487749526, "post_id": 42385002, "comment_id": 71919282, "body": "Did you add both <code>}</code> and <code>return</code> statement ad the end?"}, {"owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "edited": false, "score": 0, "creation_date": 1487749750, "post_id": 42385002, "comment_id": 71919418, "body": "yes, i edit the above code also."}, {"owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "edited": false, "score": 0, "creation_date": 1487752092, "post_id": 42385002, "comment_id": 71920655, "body": "yes i printed  payload from skb-&gt;data to skb-&gt;tail but according to result skb-&gt;tail address is same as the address given by the expression.            data =  (char <i>)((unsigned char</i>)tcph + (tcph-&gt;doff * 4));) where data is unsigned char*."}, {"owner": {"reputation": 2043, "user_id": 7218127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFGPE.gif?s=128&g=1", "display_name": "Jim D.", "link": "https://stackoverflow.com/users/7218127/jim-d"}, "edited": false, "score": 0, "creation_date": 1487753229, "post_id": 42385002, "comment_id": 71921374, "body": "I&#39;d also be careful about assuming that tail points to the end of the TCP payload.  Depending on how the IP packet is encapsulated, there could be data after the TCP payload."}, {"owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "edited": false, "score": 0, "creation_date": 1487757488, "post_id": 42385002, "comment_id": 71924615, "body": "(skb-&gt;data address  + ip header len + tcp header len) = skb-&gt;tail, does it mean the packet has no payload?"}, {"owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "reply_to_user": {"reputation": 2043, "user_id": 7218127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FFGPE.gif?s=128&g=1", "display_name": "Jim D.", "link": "https://stackoverflow.com/users/7218127/jim-d"}, "edited": false, "score": 0, "creation_date": 1487759927, "post_id": 42385002, "comment_id": 71925617, "body": "@JimD. i have added data printed in hex format, there is no much difference in ack and ack + push contents."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1487957320, "post_id": 42385002, "comment_id": 72033120, "body": "Probably related: <a href=\"http://stackoverflow.com/questions/29553990/print-tcp-packet-data\" title=\"print tcp packet data\">stackoverflow.com/questions/29553990/print-tcp-packet-data</a>"}, {"owner": {"reputation": 123, "user_id": 1203522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36bf8c9df7d43e230cf11b1f9908c3c2?s=128&d=identicon&r=PG", "display_name": "Coiby", "link": "https://stackoverflow.com/users/1203522/coiby"}, "edited": false, "score": 0, "creation_date": 1612610248, "post_id": 42385002, "comment_id": 116823710, "body": "&quot;Feb 22 12:41:14 udesktop kernel: [ 6037.041000] skb data len  = 191&quot; indicates the existence of paged data since skb-&gt;data_len != 0.  So you nee d also to read paged data to get the payload."}], "owner": {"reputation": 149, "user_id": 5040133, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6337e0d3d34a2257eb36760e75d7dbc8?s=128&d=identicon&r=PG&f=1", "display_name": "vikas_saini", "link": "https://stackoverflow.com/users/5040133/vikas-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1524, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487759786, "creation_date": 1487747932, "last_edit_date": 1487759786, "question_id": 42385002, "link": "https://stackoverflow.com/questions/42385002/how-to-get-payload-from-struct-sk-buff-in-netfilter-kernel-module-linux", "title": "How to get payload from struct sk_buff in netfilter kernel module linux", "body": "<p>I am writing a network filter kernel module on ubuntu 12.04 and kernel version is 3.2.0-23-generic.</p>\n\n<p>my code is.</p>\n\n<pre><code>#include &lt;linux/module.h&gt;\n#include &lt;linux/moduleparam.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/netfilter.h&gt;\n#undef __KERNEL__\n#include &lt;linux/netfilter_ipv4.h&gt;\n#define __KERNEL__\n\n#include &lt;linux/ip.h&gt;\n#include &lt;linux/tcp.h&gt;\n#include &lt;linux/fs.h&gt;\n\nstatic struct nf_hook_ops nfho;\nMODULE_LICENSE(\"Proprietary\");\nMODULE_AUTHOR(\"vikas\");\n\nunsigned int hook_func(unsigned int hooknum, struct sk_buff * skb,\n        const struct net_device * in, const struct net_device * out,\n        int (*okfn)(struct sk_buff *))\n{\n    if (skb)\n    {\n        struct iphdr *iph = ip_hdr(skb);\n\n        if (iph &amp;&amp; iph-&gt;protocol &amp;&amp; (iph-&gt;protocol == IPPROTO_TCP))\n        {\n            int index;\n            char cValue[101];\n            char *data;\n\n            struct tcphdr *tcph = tcp_hdr(skb);\n\n            data = (char *) ((unsigned char*) tcph + (tcph-&gt;doff * 4));\n\n            printk(KERN_INFO \"\\n\\ntcp hader address = %u\", tcph);\n            printk(KERN_INFO \"TCP source : %hu, TCP  dest : %hu\\n\", ntohs(tcph-&gt;source), ntohs(tcph-&gt;dest));\n            printk(KERN_INFO \"TCP seq : %u, TCP ack_seq : %u\\n\", ntohl(tcph-&gt;seq), ntohl(tcph-&gt;ack_seq));\n            printk(KERN_INFO \"TCP doff : %d, TCP window : %hu\\n\", tcph-&gt;doff * 4, ntohs(tcph-&gt;window));\n            printk(KERN_INFO \"TCP check : 0x%hx, TCP urg_ptr : %hu\\n\", ntohs(tcph-&gt;check), ntohs(tcph-&gt;urg_ptr));\n            printk(KERN_INFO \"FLAGS=%c%c%c%c%c%c\\n\",\n                    tcph-&gt;urg ? 'U' : '-',\n                    tcph-&gt;ack ? 'A' : '-',\n                    tcph-&gt;psh ? 'P' : '-',\n                    tcph-&gt;rst ? 'R' : '-',\n                    tcph-&gt;syn ? 'S' : '-',\n                    tcph-&gt;fin ? 'F' : '-');\n            printk(KERN_INFO \"sending packet to : %pI4\\n\", &amp;iph-&gt;daddr);\n            //printk(KERN_INFO \"data len : %d\\n\", (int) strlen(data));\n            printk(KERN_INFO \"DATA : %s\\n\", data);\n            printk(KERN_INFO \"tcp headerlen = %d\\n\", tcp_hdrlen(skb));\n            unsigned char *tail = skb_tail_pointer(skb);\n            unsigned char *end = skb_end_pointer(skb);\n            printk(KERN_INFO \"skb-&gt;head  = %u\\n\", skb-&gt;head);\n            printk(KERN_INFO \"skb-&gt;data  = %u\\n\", skb-&gt;data);\n            printk(KERN_INFO \"tail pointer  = %u\\n\", tail);\n            printk(KERN_INFO \"end pointer  = %u\\n\", end);\n            printk(KERN_INFO \"packet len  = %d\\n\", (int)skb-&gt;len);\n            printk(KERN_INFO \"skb data len  = %d\\n\", (int)skb-&gt;data_len);\n            printk(KERN_INFO \"header len  = %d\\n\", (int)skb-&gt;hdr_len);\n\n            return NF_ACCEPT;\n        }\n    }\n    return NF_ACCEPT;\n}\n        int init_module()\n        {\n            printk(KERN_INFO \"Loading packet filter module...\\n\");\n            nfho.hook = (nf_hookfn *) hook_func;\n            nfho.hooknum = NF_INET_LOCAL_OUT;\n            nfho.pf = PF_INET;\n            nfho.priority = NF_IP_PRI_FIRST;\n\n            if (nf_register_hook(&amp;nfho))\n            {\n                printk(KERN_INFO \"Error while registering packet filter.\\n\");\n                return 1;\n            }\n            printk(KERN_INFO \"The packet filter has been laoded successfully.\\n\");\n            return 0;\n        }\n\n        void cleanup_module()\n        {\n            nf_unregister_hook(&amp;nfho);\n        printk(KERN_INFO \"The packet filter has been un-laoded successfully.\\n\");\n    }\n</code></pre>\n\n<p>I am looking for only outgoing packets but not getting paylod from packet in which ack and push flag set.\naddress of skb->tail and skb->data is same.</p>\n\n<p>my syslog result is,</p>\n\n<pre><code>Feb 22 12:41:14 udesktop kernel: [ 6037.039999] tcp hader address = 3083234568\nFeb 22 12:41:14 udesktop kernel: [ 6037.040019] TCP source : 48530, TCP  dest : 3127\nFeb 22 12:41:14 udesktop kernel: [ 6037.040021] TCP seq : 2624763273, TCP ack_seq : 0\nFeb 22 12:41:14 udesktop kernel: [ 6037.040023] TCP doff : 40, TCP window : 14600\nFeb 22 12:41:14 udesktop kernel: [ 6037.040025] TCP check : 0x8285, TCP urg_ptr : 0\nFeb 22 12:41:14 udesktop kernel: [ 6037.040027] FLAGS=----S-\nFeb 22 12:41:14 udesktop kernel: [ 6037.040030] sending packet to : x.x.x.x\nFeb 22 12:41:14 udesktop kernel: [ 6037.040031] DATA :\nFeb 22 12:41:14 udesktop kernel: [ 6037.040033] tcp headerlen = 40\nFeb 22 12:41:14 udesktop kernel: [ 6037.040034] skb-&gt;head  = 3083234304\nFeb 22 12:41:14 udesktop kernel: [ 6037.040036] skb-&gt;data  = 3083234548\nFeb 22 12:41:14 udesktop kernel: [ 6037.040037] tail pointer  = 3083234608\nFeb 22 12:41:14 udesktop kernel: [ 6037.040039] end pointer  = 3083234944\nFeb 22 12:41:14 udesktop kernel: [ 6037.040041] packet len  = 60\nFeb 22 12:41:14 udesktop kernel: [ 6037.040042] skb data len  = 0\nFeb 22 12:41:14 udesktop kernel: [ 6037.040044] header len  = 304\nFeb 22 12:41:14 udesktop kernel: [ 6037.040805]\nFeb 22 12:41:14 udesktop kernel: [ 6037.040807]\nFeb 22 12:41:14 udesktop kernel: [ 6037.040808] tcp hader address = 2515565840\nFeb 22 12:41:14 udesktop kernel: [ 6037.040812] TCP source : 48530, TCP  dest : 3127\nFeb 22 12:41:14 udesktop kernel: [ 6037.040816] TCP seq : 2624763274, TCP ack_seq : 1452430989\nFeb 22 12:41:14 udesktop kernel: [ 6037.040820] TCP doff : 32, TCP window : 229\nFeb 22 12:41:14 udesktop kernel: [ 6037.040824] TCP check : 0x827d, TCP urg_ptr : 0\nFeb 22 12:41:14 udesktop kernel: [ 6037.040827] FLAGS=-A----\nFeb 22 12:41:14 udesktop kernel: [ 6037.040830] sending packet to : x.x.x.x\nFeb 22 12:41:14 udesktop kernel: [ 6037.040833] DATA : ^A\nFeb 22 12:41:14 udesktop kernel: [ 6037.040836] tcp headerlen = 32\nFeb 22 12:41:14 udesktop kernel: [ 6037.040838] skb-&gt;head  = 2515565568\nFeb 22 12:41:14 udesktop kernel: [ 6037.040841] skb-&gt;data  = 2515565820\nFeb 22 12:41:14 udesktop kernel: [ 6037.040844] tail pointer  = 2515565872\nFeb 22 12:41:14 udesktop kernel: [ 6037.040846] end pointer  = 2515566208\nFeb 22 12:41:14 udesktop kernel: [ 6037.040849] packet len  = 52\nFeb 22 12:41:14 udesktop kernel: [ 6037.040851] skb data len  = 0\nFeb 22 12:41:14 udesktop kernel: [ 6037.040854] header len  = 0\nFeb 22 12:41:14 udesktop kernel: [ 6037.040966]\nFeb 22 12:41:14 udesktop kernel: [ 6037.040968] tcp hader address = 2515557984\nFeb 22 12:41:14 udesktop kernel: [ 6037.040971] TCP source : 48530, TCP  dest : 3127\nFeb 22 12:41:14 udesktop kernel: [ 6037.040975] TCP seq : 2624763274, TCP ack_seq : 1452430989\nFeb 22 12:41:14 udesktop kernel: [ 6037.040979] TCP doff : 32, TCP window : 229\nFeb 22 12:41:14 udesktop kernel: [ 6037.040982] TCP check : 0x833c, TCP urg_ptr : 0\nFeb 22 12:41:14 udesktop kernel: [ 6037.040990] FLAGS=-AP---\nFeb 22 12:41:14 udesktop kernel: [ 6037.040991] sending packet to : x.x.x.x\nFeb 22 12:41:14 udesktop kernel: [ 6037.040993] DATA : ^A\nFeb 22 12:41:14 udesktop kernel: [ 6037.040994] tcp headerlen = 32\nFeb 22 12:41:14 udesktop kernel: [ 6037.040995] skb-&gt;head  = 2515557376\nFeb 22 12:41:14 udesktop kernel: [ 6037.040996] skb-&gt;data  = 2515557964\nFeb 22 12:41:14 udesktop kernel: [ 6037.040997] tail pointer  = 2515558016\nFeb 22 12:41:14 udesktop kernel: [ 6037.040998] end pointer  = 2515558016\nFeb 22 12:41:14 udesktop kernel: [ 6037.040999] packet len  = 243\nFeb 22 12:41:14 udesktop kernel: [ 6037.041000] skb data len  = 191\nFeb 22 12:41:14 udesktop kernel: [ 6037.041001] header len  = 640\n</code></pre>\n\n<p>could any help me what is the right way to payload from outgoing packets.\nthanks.</p>\n\n<p><em>EDIT</em>\nI printed data in hex format from skb->data to skb->tail, which as given below:</p>\n\n<p>data in ACK packet:\n45 0 0 34 4c 73 40 0 40 6 6b fa c0 a8 0 fc c0 a8 0 a c0 4e c 37 84 50 39 35 d8 88 93 77 80 10 0 e5 82 7d 0 0 1 1 8 a 0 3f 75 46 0 0 0 0</p>\n\n<p>data in ACK + PUSH packet:\n45 0 0 d4 4c 74 40 0 40 6 6b 59 c0 a8 0 fc c0 a8 0 a c0 4e c 37 84 50 39 35 d8 88 93 77 80 18 0 e5 83 1d 0 0 1 1 8 a 0 3f 75 46 0 0 0 0</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 7041, "user_id": 314290, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5ffde821f0f9670e601b19f1731a6849?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/314290/mikhail"}, "edited": false, "score": 0, "creation_date": 1487749726, "post_id": 42384933, "comment_id": 71919401, "body": "I feel your pain, but there are many ways to read a file. The fastest approach, I&#39;m aware of, involves reading a file sequentially with the native API functions (ie, ReadFile). Then you can spin off processing to different threads, etc."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1487750051, "post_id": 42384933, "comment_id": 71919554, "body": "This is useless to read a file with more than one thread read <a href=\"http://stackoverflow.com/a/10397184/7076153\">this</a>. You should have a manager who read the file and give to each thread a line of the file."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1488314564, "post_id": 42384933, "comment_id": 72173564, "body": "On a typical Linux system, the hard limit for maximum number of open descriptors (files and sockets) is typically 65536. (The soft limit, i.e. the default, is typically much lower, something like 1024.) Even if you assume extremely long host names and service names used (for the connections, instead of port numbers), you&#39;ll still need typically less than 100 characters per client. 65536&#215;100 is only about 6.5 megabytes. Reading and tokenizing that (to host and port string pairs) is only going to take a fraction of a second. <b>It is insignificant.</b>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1488315061, "post_id": 42384933, "comment_id": 72173829, "body": "Let&#39;s say you only need the IPv6 (or IPv4) addresses. A <code>struct sockaddr_storage</code> is typically 128 bytes. So, if you read each host and port pair from the file, and use a thread pool to resolve them to connectable sockets using <code>getnameinfo()</code> (but close each connection immediately, for actual connecting later), you&#39;ll need about 144 bytes per client. Even a million clients is just 144 megabytes then; just 24 megabytes if you limit to IPv4. Unless you store the host names in numeric format, the name resolution is going to take the most time by far!"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1488315231, "post_id": 42384933, "comment_id": 72173923, "body": "If you decide to store the host names in a numeric format, then you could just switch to a binary format; one file for <code>struct sockaddr_in</code>s, and another for <code>struct sockaddr_in6</code>s. You can read them lightning-fast, and write separate utilities to convert them to/from text files, with optional name resolution. So, overall, I just don&#39;t understand where you perceive a problem; I see none here. (I do work with large datasets myself, so I am not assuming any size limits in my logic here.)"}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1488320083, "post_id": 42384933, "comment_id": 72176431, "body": "@user3408678, how big is this file? Cannot you read it once, keep it in a data structure in a server process. This way you eliminate the I/O bottleneck and a thread pool in the server can be assigned with the task of giving the data to the incoming requests from clients... let me know if I am missing something here.."}], "answers": [{"tags": [], "owner": {"reputation": 360, "user_id": 3492498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b22bd84245bf80211b37cc5ccf73def?s=128&d=identicon&r=PG&f=1", "display_name": "Nish", "link": "https://stackoverflow.com/users/3492498/nish"}, "is_accepted": false, "score": 0, "last_activity_date": 1487753942, "creation_date": 1487753942, "answer_id": 42386833, "question_id": 42384933, "link": "https://stackoverflow.com/questions/42384933/asynchronous-i-o-reading-from-a-file/42386833#42386833", "title": "Asynchronous I/O reading from a file", "body": "<p>read IP's from a file, have worker threads, keep giving IP's to worker threads. let all socket communication happen in worker threads. Also if the IPv4 addresses are stored hex format instead of ascii, probably can read multiples of them in a single shot and it would be faster.</p>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 3408678, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/28a56eab8b2dbcaff5464b9a52ca88a9?s=128&d=identicon&r=PG&f=1", "display_name": "user3408678", "link": "https://stackoverflow.com/users/3408678/user3408678"}, "edited": false, "score": 0, "creation_date": 1488322143, "post_id": 42516074, "comment_id": 72177373, "body": "Thank you this is perfect. This is definitely enough information for me to develop what I have."}, {"owner": {"reputation": 2496, "user_id": 3512524, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d86f158f96941fef8bb311262cf3ad0e?s=128&d=identicon&r=PG&f=1", "display_name": "Krzysztof Skowronek", "link": "https://stackoverflow.com/users/3512524/krzysztof-skowronek"}, "edited": false, "score": 0, "creation_date": 1488443611, "post_id": 42516074, "comment_id": 72235852, "body": "You can also implement some kind of limit on how many concurrent connections are active at the same time. You can use semaphore/mutex in queue consumer code"}, {"owner": {"reputation": 155, "user_id": 3408678, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/28a56eab8b2dbcaff5464b9a52ca88a9?s=128&d=identicon&r=PG&f=1", "display_name": "user3408678", "link": "https://stackoverflow.com/users/3408678/user3408678"}, "edited": false, "score": 0, "creation_date": 1488485241, "post_id": 42516074, "comment_id": 72263794, "body": "Sorry, meant to award the bounty to this answer sooner."}, {"owner": {"reputation": 3356, "user_id": 412416, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGDZ3.png?s=128&g=1", "display_name": "Sean Werkema", "link": "https://stackoverflow.com/users/412416/sean-werkema"}, "edited": false, "score": 0, "creation_date": 1488485947, "post_id": 42516074, "comment_id": 72264216, "body": "No worries!  Just glad the answer was helpful."}], "tags": [], "owner": {"reputation": 3356, "user_id": 412416, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGDZ3.png?s=128&g=1", "display_name": "Sean Werkema", "link": "https://stackoverflow.com/users/412416/sean-werkema"}, "is_accepted": true, "score": 5, "last_activity_date": 1488306497, "last_edit_date": 1495540433, "creation_date": 1488306112, "answer_id": 42516074, "question_id": 42384933, "link": "https://stackoverflow.com/questions/42384933/asynchronous-i-o-reading-from-a-file/42516074#42516074", "title": "Asynchronous I/O reading from a file", "body": "<p>Several people have hinted at a good solution to this in their comments, but it's probably worth spelling it out in more detail.  The <em>full</em> solution has quite a lot of details and is pretty complicated code, so I'm going to use pseudocode to explain what I'd recommend.</p>\n\n<p>What you have here is really a variation on a classic producer/consumer problem:  You have a single thing producing data, and many things trying to consume that data.  In your case, it <em>must</em> be a \"single thing\" producing that data, because the lengths of each line of the source file are unknown:  You can't just jump forward 'n' bytes and somehow be at the next IP.  There can only be one actor at a time moving the read pointer toward the next unknown position of the <code>\\n</code>, so you by definition have a single producer.</p>\n\n<p>There are three general ways to attack this:</p>\n\n<ul>\n<li><p><strong><em>Solution A</em></strong> involves having each thread pulling a little more out of a shared file buffer, and kicking off an asynchronous (nonblocking) read every time the last read completes.  There are a whole host of headaches getting this solution right, as it's very sensitive to timing differences between the filesystem and the work being performed:  If the file reads are slow, the workers will all stall waiting for the file.  If the workers are slow, the file reader will either stall or fill up memory waiting for them to consume the data.  This solution is likely the <em>absolute</em> fastest, but it's also incredibly difficult synchronization code to get right with about a zillion caveats.  Unless you're an expert in threading (or extremely clever abuse of <code>epoll_wait()</code>), you probably don't want to go this route.</p></li>\n<li><p><strong><em>Solution B</em></strong> has a \"master\" thread, responsible for reading the file, and populating some kind of thread-safe queue with the data it reads, with one IP address (one string) per queue entry.  Each of the worker threads just consumes queue entries as fast as it can, querying the remote server and then requesting another queue entry.  This requires a little care to get right, but is generally a lot safer than <em>Solution A</em>, especially if you use somebody else's queue implementation.</p></li>\n<li><p><strong><em>Solution C</em></strong> is pretty hacktastic, but you shouldn't dismiss it out-of-hand, depending on what you're doing.  This solution just involves using something like the Un*x <code>sed</code> command (see <a href=\"https://stackoverflow.com/questions/2237629/get-a-range-of-lines-from-a-file-given-the-start-and-end-line-numbers\">Get a range of lines from a file given the start and end line numbers</a>) to slice your source file into a bunch of \"chunky\" source files in advance \u2014 say, twenty of them.  Then you just run twenty copies of a really simple single-thread program in parallel using <code>&amp;</code>, each on a different \"slice\" of file.  Mushed together with a little shell script to automate it, this can be a \"good enough\" solution for a lot of needs.</p></li>\n</ul>\n\n<hr>\n\n<p>Let's take a closer look at Solution B \u2014 a master thread with a thread-safe queue.  I'm going to cheat and assume you can construct a working queue implementation (if not, there are StackOverflow articles on implementing a thread-safe queue using pthreads: <a href=\"https://stackoverflow.com/questions/4577961/pthread-synchronized-blocking-queue\">pthread synchronized blocking queue</a>).</p>\n\n<p>In pseudocode, this solution is then something like this:</p>\n\n<pre><code>main()\n{\n    /* Create a queue. */\n    queue = create_queue();\n\n    /* Kick off the master thread to read the file, and give it the queue. */\n    master_thread = pthread_create(master, queue);\n\n    /* Kick off a bunch of workers with access to the queue. */\n    for (i = 0; i &lt; 20; i++) {\n        worker_thread[i] = pthread_create(worker, queue);\n    }\n\n    /* Wait for everybody to finish. */\n    pthread_join(master_thread);\n    for (i = 0; i &lt; 20; i++) {\n        pthread_join(worker_thread[i]);\n    }\n}\n\nvoid master(queue q)\n{\n    FILE *fp = fopen(\"ips.txt\", \"r\");\n    char buffer[BIGGER_THAN_ANY_IP];\n\n    /* Inhale the file as fast as we can, and push each line we\n       read onto the queue. */\n    while (fgets(fp, buffer) != NULL) {\n        char *next_ip = strdup(buffer);\n        enqueue(q, next_ip);\n    }\n\n    /* Add some final messages in the queue to let the workers\n       know that we're out of data.  There are *much* better ways\n       of notifying them that we're \"done\", but in this case,\n       pushing a bunch of NULLs equal to the number of threads is\n       simple and probably good enough. */\n    for (i = 0; i &lt; 20; i++) {\n        enqueue(q, NULL);\n    }\n}\n\nvoid worker(queue q)\n{\n    char *ip;\n\n    /* Inhale messages off the queue as fast as we can until\n       we get a \"NULL\", which means that it's time to stop.\n       The call to dequeue() *must* block if there's nothing\n       in the queue; the call should only return NULL if the\n       queue actually had NULL pushed into it. */\n    while ((ip = dequeue(q)) != NULL) {\n\n        /* Insert code to actually do the work here. */\n        connect_and_send_and_receive_to(ip);\n    }\n}\n</code></pre>\n\n<p>There are plenty of caveats and details in a real implementation (like: how do we implement the queue, ring buffers or a linked list? what if the text isn't all IPs? what if the char buffer isn't big enough? how many threads is enough? how do we deal with file or network errors? will malloc performance become a bottleneck? what if the queue gets too big? can we do better to overlap the network I/O?).</p>\n\n<p>But, caveats and details aside, the pseudocode I presented above is a good enough starting point that you likely can expand it into a working solution.</p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 4920739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0771c643189144477a376f168c3adda8?s=128&d=identicon&r=PG&f=1", "display_name": "vguberinic", "link": "https://stackoverflow.com/users/4920739/vguberinic"}, "is_accepted": false, "score": 0, "last_activity_date": 1488462609, "creation_date": 1488462609, "answer_id": 42557256, "question_id": 42384933, "link": "https://stackoverflow.com/questions/42384933/asynchronous-i-o-reading-from-a-file/42557256#42557256", "title": "Asynchronous I/O reading from a file", "body": "<p>If you just want to read asynchronously you can use getch() from ncurses with delay set to 0. It is part of posix so you don't need any additional dependencies. Also you have unlocked_stdio.</p>\n\n<p>On the other hand, I have to wonder why is fgets() a bottleneck. As long as you have data in file it should not block. And even if data is huge (like 1MB or 100k ip addresses) reading it into list at startup should take less than 1 second.</p>\n\n<p>And why are you openining sockets_num connections to every ip in the list? You are having sockets_num multiplied by number of ip addresses at the same time. Since every socket is file on linux you will hit system issues when you try to open more than several thousand files (see ulimit -Sn). Can you confirm that issue is not in connect() in that case? </p>\n"}], "owner": {"reputation": 155, "user_id": 3408678, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/28a56eab8b2dbcaff5464b9a52ca88a9?s=128&d=identicon&r=PG&f=1", "display_name": "user3408678", "link": "https://stackoverflow.com/users/3408678/user3408678"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "accepted_answer_id": 42516074, "answer_count": 3, "score": 3, "last_activity_date": 1488462609, "creation_date": 1487747714, "last_edit_date": 1488242676, "question_id": 42384933, "link": "https://stackoverflow.com/questions/42384933/asynchronous-i-o-reading-from-a-file", "title": "Asynchronous I/O reading from a file", "body": "<p>I've gotten ideas for multiple projects recently that all involve reading IP addresses from a file. Since they are all supposed to be able to handle a large amount of hosts, I've attempted to implement multi-threading or creating a pool of sockets and select()-ing from them in order to achieve some form of concurrency for better performance. On multiple occasions, reading from the file seems to be the bottleneck in enhancing performance. The way I understand it, reading from a file with fgets or similar is a synchronous, blocking operation. So even if I successfully implemented a client that connects to multiple hosts asynchronously, the operation would still be synchronous because I can only read one address at a time from a file.</p>\n\n<pre><code>    /* partially pseudo code */\n\n/* getaddrinfo() stuff here */\n\nwhile(fgets(ip, sizeof(ip), file) {\nFD_ZERO(&amp;readfds);\n/* create n sockets here in a for loop */\nfor (i = 0; i &lt; socket_num; i++) {\n    if (newfd &gt; fd[i]) newfd = fd[i];\n    FD_SET(fd[i], &amp;readfds);\n}\n\n/* here's where I think I should connect n sockets to n addresses from file\n * but I'm only getting one IP at a time from file, so I'm not sure how to connect to \n * n addresses at once with fgets\n */\n\nfor (j = 0; j &lt; socket_num; j++) {\n        if ((connect(socket, ai-&gt;ai_addr, ai-&gt;ai_addrlen)) == -1)\n        // error\n        else { \n            freeaddrinfo(ai);       \n        FD_SET(socket, &amp;master);\n            fdmax = socket;\n            if (select(socket+1, &amp;master, NULL, NULL, &amp;tv) == -1);\n        // error        \n            if ((recvd = read(socket, banner, RECVD)) &lt;= 0)\n        // error\n            if (FD_ISSET(socket, &amp;master))\n        // print success\n        }\n    /* clear sets and close sockets and stuff */\n}\n</code></pre>\n\n<p>I've pointed out my issues with comments, but just to clarify: I'm not sure how to perform asynchronous I/O operations on multiple target servers read from a file, since reading entries from file seems to be strictly synchronous. I've run into similar isssues with multithreading, with a marginally better degree of success.</p>\n\n<pre><code>    void *function_passed_to_pthread_create(void *opts) \n    { \n        while(fgets(ip_addr, sizeof(ip_addr), opts-&gt;file) {\n            /* speak to ip_addr and get response */\n    }\n}\n\nmain()\n{\n    /* necessary stuff */\n    for (i = 0; i &lt; thread_num; i++) {\n        pthread_create(&amp;tasks, NULL, above_function, opts)\n    }\n    for (j = 0; j &lt; thread_num; j++)\n        /* join threads */\n    return 0;\n}\n</code></pre>\n\n<p>This seems to work, but since multiple threads are all processing the same file the results aren't always accurate. I imagine it's because multiple threads may process the same address from file at the same time. </p>\n\n<p>I've considered loading all the entries from a file into an array/into memory, but if the file was particularly large I imagine that could cause memory issues. On top of that, I'm not sure it that even makes sense to do anyway. </p>\n\n<p>As a final note; if the file I'm reading from happens to be a particularly large file with a huge amount of IPs then I do not believe either solution scales well. Anything is possible with C though, so I imagine there is some way to achieve what I'm hoping to.</p>\n\n<p>To sum this post up; I'd like to find a way to improve a client-side applications performance using asynchronous I/O or multi-threading when reading entries from a file.</p>\n"}, {"tags": ["c", "linux", "utf-8", "packet", "smb"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487747821, "post_id": 42384880, "comment_id": 71918348, "body": "<i>&quot;e0 ac&quot; are part of letter &#39;\uace0&#39;</i> could you clarify this sentence?"}, {"owner": {"reputation": 65, "user_id": 7543226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/28acf4780181f60fe312262de8bb0969?s=128&d=identicon&r=PG&f=1", "display_name": "hybang", "link": "https://stackoverflow.com/users/7543226/hybang"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487747925, "post_id": 42384880, "comment_id": 71918399, "body": "<a href=\"https://team-memories.com/tools/unicode\" rel=\"nofollow noreferrer\">team-memories.com/tools/unicode</a> in this site &quot;0xe0 0xac&quot; convert to  &#39;\uace0&#39;"}, {"owner": {"reputation": 65, "user_id": 7543226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/28acf4780181f60fe312262de8bb0969?s=128&d=identicon&r=PG&f=1", "display_name": "hybang", "link": "https://stackoverflow.com/users/7543226/hybang"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487748370, "post_id": 42384880, "comment_id": 71918632, "body": "@LPs I mean  &#39;\uace0&#39; convert &quot; \\uACE0 &quot;   so i think &quot;e0 ac&quot; is letter  &#39;\uace0&#39;"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487748923, "post_id": 42384880, "comment_id": 71918953, "body": "On nix system you can take a look at <a href=\"http://man7.org/linux/man-pages/man1/iconv.1.html\" rel=\"nofollow noreferrer\">iconv</a>"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1487752372, "post_id": 42384880, "comment_id": 71920819, "body": "If you don&#39;t know the source encoding, it&#39;s very difficult to figure out what needs to be done."}], "owner": {"reputation": 65, "user_id": 7543226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/28acf4780181f60fe312262de8bb0969?s=128&d=identicon&r=PG&f=1", "display_name": "hybang", "link": "https://stackoverflow.com/users/7543226/hybang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487747506, "creation_date": 1487747506, "question_id": 42384880, "link": "https://stackoverflow.com/questions/42384880/convert-hex-code-in-packet-to-utf-8", "title": "convert hex code (in packet) to UTF-8", "body": "<p>sturct ptr info</p>\n\n<pre><code>struct ptr {                  // packet struct\nunsigned long srcip;\nunsigned long dstip;\nunsigned short srcport;\nunsigned short dstport;\nunsigned char *str;       // payload data of packet\nunsigned short len;       // payload length\nunsigned long ts;\n};\n</code></pre>\n\n<p>find file path and save module code</p>\n\n<pre><code>char *msg = NULL;             // to save file path\nint j = 0;\n/* find file path and save */\nfor (i=84; i &lt; ptr-&gt;len; i++) {\n    if (ptr-&gt;str[i] &gt; 0x00 &amp;&amp; ptr-&gt;str[i] &lt; 0x7f) {\n        msg[j] = ptr-&gt;str[i];\n        j++;\n    }\n    if (ptr-&gt;str[i] &gt; 0x7f) {\n        msg[j] = 0x23;\n        j++;\n    }\n}\n</code></pre>\n\n<p>This is file path in SMB packet, i captured on Wireshark.</p>\n\n<pre><code>0000   5c 00 e0 ac c8 b2 5c 00 73 00 65 00 63 00 72 00  \\.....\\.s.e.c.r.\n0010   65 00 74 00 5c 00 78 c7 ac c0 2e 00 74 00 78 00  e.t.\\.x.....t.x.\n0020   74 00 00 00                                      t...\n</code></pre>\n\n<p>current result = </p>\n\n<pre><code>msg : \\####\\secret\\x###.txt\n</code></pre>\n\n<p>I just put '#' (0x23) temporarily..</p>\n\n<p>and this is what i want =</p>\n\n<pre><code>msg : \\\uace0\ub2c8\\secret\\\uc778\uc0ac.txt\n</code></pre>\n\n<p>I just found \"e0 ac\" are part of letter '\uace0' , \"c8 b2\" are part of letter '\ub2c8'</p>\n\n<p>But i don't know how to convert.. </p>\n\n<p>In sum, i want convert hex code (in packet) to UTF-8.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487746943, "post_id": 42384723, "comment_id": 71917901, "body": "You certainly did not fix all the errors. Period."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1487746944, "post_id": 42384723, "comment_id": 71917904, "body": "Your switch will give everyone a 0 grade, for one... But seeing as you turn to SO instead of doing this yourself, maybe yours is warranted."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487746959, "post_id": 42384723, "comment_id": 71917912, "body": "Welcome to Stack Overflow! Please show your research/debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1487746992, "post_id": 42384723, "comment_id": 71917926, "body": "to add to what @StoryTeller said, you&#39;re missing a <code>break;</code> statement after each <code>case</code> body."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487747030, "post_id": 42384723, "comment_id": 71917942, "body": "Oh, come one @SouravGhosh. It&#39;s not fun when you tell them what I meant :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1487747089, "post_id": 42384723, "comment_id": 71917975, "body": "@StoryTeller :D :D Mission accomplished, annoyed someone. :P"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1487747200, "post_id": 42384723, "comment_id": 71918041, "body": "..and to annoy a little bit more, take a look at how <a href=\"https://www.tutorialspoint.com/cprogramming/switch_statement_in_c.htm\" rel=\"nofollow noreferrer\">switch statement</a> wroks."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487749012, "post_id": 42384723, "comment_id": 71918996, "body": "Don&#39;t put <code>\\n</code> on the end of scanf"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487749710, "post_id": 42384723, "comment_id": 71919395, "body": "Read about the switch statement in your beginner-level C book. Voting to close this as simple typo."}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487781577, "post_id": 42384723, "comment_id": 71941686, "body": "Thanks guys!!! I add break after each statement, but the output is still 0."}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487782724, "post_id": 42384723, "comment_id": 71942470, "body": "Thank you all!!! Problem solved. I found at least 3 errors in my code. 1: no break in the switch. 2: I put \\n at the end of scanf, which causes some unexpected results. 3. I did not put a blank space before %c. I do not know how the blank space works, can anyone tell me? Anyway, thank you guys so much for helping!!!"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487781739, "post_id": 42384924, "comment_id": 71941776, "body": "Thanks for pointing it out, but the output is still 0 though."}, {"owner": {"reputation": 949, "user_id": 5762874, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/446806655514681/picture?type=large", "display_name": "Sabir Hossain", "link": "https://stackoverflow.com/users/5762874/sabir-hossain"}, "reply_to_user": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487782231, "post_id": 42384924, "comment_id": 71942116, "body": "change this line <code>scanf(&quot;%c\\n&quot;, &amp;letterGrade);</code> to <code>scanf(&quot;\\n%c&quot;, &amp;letterGrade);</code> if it&#39;s work don&#39;t forget to accept the answer. thank you."}], "tags": [], "owner": {"reputation": 949, "user_id": 5762874, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/446806655514681/picture?type=large", "display_name": "Sabir Hossain", "link": "https://stackoverflow.com/users/5762874/sabir-hossain"}, "is_accepted": false, "score": 2, "last_activity_date": 1487748399, "last_edit_date": 1487748399, "creation_date": 1487747684, "answer_id": 42384924, "question_id": 42384723, "link": "https://stackoverflow.com/questions/42384723/why-is-my-output-0-how-do-i-solve-it-language-c/42384924#42384924", "title": "Why is my output 0? How do I solve it? Language C", "body": "<p>you have to add <code>break</code>after every <code>case</code> statement</p>\n\n<pre><code>switch (letterGrade)\n    {\n        case 'A':\n            numberGrade = 4.0;\n            break;\n        case 'B':\n            numberGrade = 3.0;\n            break;\n        case 'C':\n            numberGrade = 2.0;\n            break;\n        case 'D':\n            numberGrade = 1.0;\n            break;\n        default:\n            numberGrade = 0.0;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487781790, "post_id": 42385373, "comment_id": 71941806, "body": "Thanks for specific explanation, but the output is still 0 though."}], "tags": [], "owner": {"reputation": 1349, "user_id": 7219646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468228f1b25f2f7ea7d41c913854c36f?s=128&d=identicon&r=PG&f=1", "display_name": "Rishi", "link": "https://stackoverflow.com/users/7219646/rishi"}, "is_accepted": false, "score": 1, "last_activity_date": 1487749151, "creation_date": 1487749151, "answer_id": 42385373, "question_id": 42384723, "link": "https://stackoverflow.com/questions/42384723/why-is-my-output-0-how-do-i-solve-it-language-c/42385373#42385373", "title": "Why is my output 0? How do I solve it? Language C", "body": "<p>The way switch-case operates is when the first <code>case</code> match is found, all the subsequent <code>case</code> blocks are executed until the execution hits a <code>break</code> statement or end of <code>switch</code> block. Switch-case statements act in fall-through manner.</p>\n\n<p>Here, let's say 'B' is the value for <code>letterGrade</code>, then all the following <code>case</code> blocks will be executed</p>\n\n<pre><code>case 'B'\ncase 'C'\ncase 'D'\ndefault\n</code></pre>\n\n<p>Since <code>default</code> will also get executed, it will mark <code>numberGrade</code> to <code>0.0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487781886, "post_id": 42386293, "comment_id": 71941870, "body": "Thanks! I am wandering the first point how does it work? I mean what does the leading white space do?"}, {"owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "reply_to_user": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487821315, "post_id": 42386293, "comment_id": 71959896, "body": "@YizhiHu <code>scanf(%c,&amp;letterGrade)</code> will read only single character so if there is any leading whitespace character (newline,space) it will consume it instead of the input character, you have to be careful when using scanf."}, {"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 1, "creation_date": 1488068522, "post_id": 42386293, "comment_id": 72068576, "body": "So I can do leading white space: scanf(&quot; %c&quot;,&amp;XXX) every time for safety, right?"}, {"owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "reply_to_user": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1488085888, "post_id": 42386293, "comment_id": 72071732, "body": "yes in your case you can use <code>scanf(&quot; %c&quot;,CharacterVariable)</code> for safety"}], "tags": [], "owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "is_accepted": true, "score": 0, "last_activity_date": 1487821046, "last_edit_date": 1487821046, "creation_date": 1487752237, "answer_id": 42386293, "question_id": 42384723, "link": "https://stackoverflow.com/questions/42384723/why-is-my-output-0-how-do-i-solve-it-language-c/42386293#42386293", "title": "Why is my output 0? How do I solve it? Language C", "body": "<p>you have 2 problems in your program :</p>\n\n<p><strong>first</strong> : <code>scanf</code> function will read any leading whitespace </p>\n\n<p>the first <code>scanf(\"%d\", &amp;numCourse)</code> will work as expected but the next <code>scanf(\"%c\", &amp;letterGrade)</code> will consume leading whitespace so your input is incorrect and you will not get the right result.</p>\n\n<p>to solve this problem just put a blank space before the conversion specifier:</p>\n\n<pre><code>scanf(\" %c\", &amp;letterGrade);\n</code></pre>\n\n<p><strong>second</strong> :</p>\n\n<p>you should add <code>break</code> after <code>switch</code> cases because it will always take \n<code>numberGrade = 0.0</code> as default and will not take other cases</p>\n\n<p>your program solution :</p>\n\n<pre><code>int main()\n{\n    float gpa;\n    float numberGrade = 0;\n    float sum = 0;\n    int i, numCourse;\n    char letterGrade, modifier;\n    printf(\"Enter the number of course:\");\n    scanf(\" %d\", &amp;numCourse);\n\n    for (i = 0; i &lt; numCourse; i++) {\n        printf(\"What grade did you earn?\\n\");\n        printf(\"Enter A, B, C, D, or F: \");\n        scanf(\" %c\", &amp;letterGrade);\n\n\n        switch (letterGrade)\n        {\n        case 'A': numberGrade = 4.0;\n            break;\n        case 'B': numberGrade = 3.0;\n            break;\n        case 'C': numberGrade = 2.0;\n            break;\n        case 'D': numberGrade = 1.0;\n            break;\n        default: numberGrade = 0.0;\n\n        }\n\n        printf(\"Enter modifier - for letter grades A-, etc. + for letter grades B+, etc. , and _ for letter grades A, B, etc.: \");\n        scanf(\" %c\", &amp;modifier);\n\n        if (modifier == '-')\n            numberGrade = numberGrade - 0.3;\n        else if (modifier == '+')\n            numberGrade = numberGrade + 0.3;\n\n        sum = sum + numberGrade;\n    }\n    gpa = sum / numCourse;\n    printf(\"The final gpa is %.2f.\\n\", gpa);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "edited": false, "score": 0, "creation_date": 1487782764, "post_id": 42386501, "comment_id": 71942495, "body": "Thanks !!! It works perfect!!!!"}], "tags": [], "owner": {"reputation": 7, "user_id": 6401721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IZkWf.jpg?s=128&g=1", "display_name": "Vivek Pratap Chaurasia", "link": "https://stackoverflow.com/users/6401721/vivek-pratap-chaurasia"}, "is_accepted": false, "score": -1, "last_activity_date": 1487752908, "creation_date": 1487752908, "answer_id": 42386501, "question_id": 42384723, "link": "https://stackoverflow.com/questions/42384723/why-is-my-output-0-how-do-i-solve-it-language-c/42386501#42386501", "title": "Why is my output 0? How do I solve it? Language C", "body": "<p>try this one, i have made some changes in your code.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\nint main()\n{\n    float gpa;\n    float numberGrade = 0;\n    float sum = 0;\n    int i, numCourse;\n    char letterGrade, modifier;\n    printf(\"Enter the number of course: \");\n    scanf(\"%d\", &amp;numCourse);\n\n    for (i = 0; i &lt; numCourse; i++)\n    {\n        printf(\"What grade did you earn?\\n\");\n        printf(\"Enter A, B, C, D, or F: \");\n        scanf(\" %c\", &amp;letterGrade);\n\n        switch (letterGrade)\n        {\n            case 'A':\n                numberGrade = 4.0;\n                break;\n            case 'B':\n                numberGrade = 3.0;\n                break;\n            case 'C':\n                numberGrade = 2.0;\n                break;\n            case 'D':\n                numberGrade = 1.0;\n                break;\n            default:\n                numberGrade = 0.0;\n                break;                \n        }\n\n        printf(\n                \"Enter modifier - for letter grades A-, etc. + for letter grades B+, etc. , and _ for letter grades A, B, etc.: \");\n        scanf(\" %c\", &amp;modifier);\n\n        if (modifier == '-')\n            numberGrade = numberGrade - 0.3;\n        else if (modifier == '+')\n            numberGrade = numberGrade + 0.3;\n\n        sum = sum + numberGrade;\n    }\n    gpa = sum / numCourse;\n    printf(\"The final gpa is %.2f.\\n\", gpa);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1487776953, "accepted_answer_id": 42386293, "answer_count": 4, "score": -4, "last_activity_date": 1487821046, "creation_date": 1487746885, "last_edit_date": 1487752782, "question_id": 42384723, "link": "https://stackoverflow.com/questions/42384723/why-is-my-output-0-how-do-i-solve-it-language-c", "closed_reason": "Not suitable for this site", "title": "Why is my output 0? How do I solve it? Language C", "body": "<p>I am doing a project for my class. The instruction for this one is: Download the program gpa.c and examine it. This program has several syntax and runtime errors. The program is supposed to return the GPA of a student's transcript that includes several 3 credit hour courses. Fix the program so that it asks for grades of several 3 credit hour courses and then computes the correct GPA value. You may assume that the user always enters correct letter grades.\nI download it and here is my code. Did I fix all of the error?\nWhy the input is always 0 and how do I fix it?????????</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    float gpa;\n    float numberGrade = 0;\n    float sum = 0;\n    int i, numCourse;\n    char letterGrade, modifier;\n    printf(\"Enter the number of course: \");\n    scanf(\"%d\", &amp;numCourse);\n\n    for (i = 0; i &lt; numCourse; i++)\n    {\n        printf(\"What grade did you earn?\\n\");\n        printf(\"Enter A, B, C, D, or F: \");\n        scanf(\"%c\\n\", &amp;letterGrade);\n\n        switch (letterGrade)\n        {\n            case 'A':\n                numberGrade = 4.0;\n            case 'B':\n                numberGrade = 3.0;\n            case 'C':\n                numberGrade = 2.0;\n            case 'D':\n                numberGrade = 1.0;\n            default:\n                numberGrade = 0.0;\n        }\n\n        printf(\n                \"Enter modifier - for letter grades A-, etc. + for letter grades B+, etc. , and _ for letter grades A, B, etc.: \");\n        scanf(\"%c\\n\", &amp;modifier);\n\n        if (modifier == '-')\n            numberGrade = numberGrade - 0.3;\n        else if (modifier == '+')\n            numberGrade = numberGrade + 0.3;\n\n        sum = sum + numberGrade;\n    }\n    gpa = sum / numCourse;\n    printf(\"The final gpa is %.2f.\\n\", gpa);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "compilation", "macros", "rounding"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1487745962, "post_id": 42384448, "comment_id": 71917382, "body": "Macros are not functions. Use a function instead."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487746036, "post_id": 42384448, "comment_id": 71917433, "body": "isn&#39;t <code>round()</code> already a widely used function name?"}, {"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1487746077, "post_id": 42384448, "comment_id": 71917454, "body": "@tkaus Thank you. I still don&#39;t understand why this is happening, can you explain it in a little more detial please?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1487746112, "post_id": 42384448, "comment_id": 71917476, "body": "@Tree Please, imagine a macro as text replacement before compile (just like search and replace with arguments). Thus, the <code>return</code> is inserted where the macro is used. You may use your compiler to expand macros only and see what finally comes out for compile. (gcc has argument <code>-E</code> for this.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487746197, "post_id": 42384448, "comment_id": 71917519, "body": "@SouravGhosh It is if you include the respective header. However, macros are resolved before compiling. Thus, it is legal to name macros like functions (but, of course, may be irritating)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487752465, "post_id": 42384448, "comment_id": 71920874, "body": "Is there are reason why you can&#39;t use the <code>round()</code> function from math.h?"}, {"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487755253, "post_id": 42384448, "comment_id": 71922801, "body": "@Lundin Hi Lundin, yes, I wanted to practice :)"}, {"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1487767081, "post_id": 42384448, "comment_id": 71930801, "body": "@Scheff Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 0, "creation_date": 1487746203, "post_id": 42384510, "comment_id": 71917523, "body": "Teller Thank you!"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1487746253, "last_edit_date": 1487746253, "creation_date": 1487746103, "answer_id": 42384510, "question_id": 42384448, "link": "https://stackoverflow.com/questions/42384448/why-am-i-getting-errors-while-compiling-this-code-and-how-to-fix-them/42384510#42384510", "title": "Why am I getting errors while compiling this code and how to fix them?", "body": "<p>Like it was told to you in a comment, macros aren't functions. They are a token substitution mechanism. So you do not return from them as you would a function.</p>\n\n<pre><code>#define round(N) (((N) &gt;=0)? (int)((N)+0.5) : (int)((N)-0.5))\n</code></pre>\n\n<p>The changes I made include:</p>\n\n<ol>\n<li><p>Making it an expression. This involves replacing the curly braces with parentheses. This is so you could use the macro almost anywhere you could use a function. Had I left the curly braces it would have been a compound statement.</p></li>\n<li><p>Wrapping the parameter N in parentheses as well, to make sure operator precedence doesn't come back and bite us.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 0, "creation_date": 1487746405, "post_id": 42384533, "comment_id": 71917630, "body": "Thank you I still don&#39;t understand, what is the problem with this line?      a[i] = {  return (N &gt;=0)? (int)(N+0.5) : (int)(N-0.5) ; };  @Some programmer dude"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 0, "creation_date": 1487746514, "post_id": 42384533, "comment_id": 71917691, "body": "@Tree Have you <i>ever</i> seen or been told that e.g. <code>x = { y }</code> is a valid <b><i>assignment</i></b> (remember there&#39;s a difference between initialization for variable definitions and assignments)? It&#39;s not a valid syntax. You can&#39;t have a statement on the right-hand side of an assignment operator, you must have an <i>expression</i>."}, {"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 0, "creation_date": 1487746711, "post_id": 42384533, "comment_id": 71917773, "body": "Thanks. I understand. I really meant to declare a as a floating point, mistakenly I initialized it as an int."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1487746599, "last_edit_date": 1487746599, "creation_date": 1487746169, "answer_id": 42384533, "question_id": 42384448, "link": "https://stackoverflow.com/questions/42384448/why-am-i-getting-errors-while-compiling-this-code-and-how-to-fix-them/42384533#42384533", "title": "Why am I getting errors while compiling this code and how to fix them?", "body": "<p>Macro-replacement is basically what it sounds like, it replaces the macro with the body of the macro, quite literally.</p>\n\n<p>So when you have</p>\n\n<pre><code>a[i] = round(a[i]);\n</code></pre>\n\n<p>It will be replaced by</p>\n\n<pre><code>a[i] = {  return (a[i] &gt;=0)? (int)(a[i]+0.5) : (int)(a[i]-0.5) ; };\n</code></pre>\n\n<p>That's not valid syntax. The right-hand side of an assignment must be an expression and not a statement.</p>\n\n<p>A simple solution is to turn <code>round</code> from a macro to an actual function. An even simpler solution is to realize that <code>int</code> values (<code>a[i]</code> is an <code>int</code>) doesn't have fractions, so there's nothing to round.</p>\n\n<p>If you want to use floating-point values though, the <em>correct</em> solution is to use the standard <a href=\"http://en.cppreference.com/w/c/numeric/math/round\" rel=\"nofollow noreferrer\"><code>round</code></a> function, not to make up your own.</p>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 0, "creation_date": 1487747781, "post_id": 42384534, "comment_id": 71918325, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1487746557, "last_edit_date": 1487746557, "creation_date": 1487746175, "answer_id": 42384534, "question_id": 42384448, "link": "https://stackoverflow.com/questions/42384448/why-am-i-getting-errors-while-compiling-this-code-and-how-to-fix-them/42384534#42384534", "title": "Why am I getting errors while compiling this code and how to fix them?", "body": "<p>You don't need the <code>return</code> keyword, it's not a function. Get rid of it.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.8.6.4</p>\n\n<blockquote>\n  <p>A <code>return</code> statement terminates execution of the <strong>current function and returns control to\n  its caller.</strong> [...]</p>\n</blockquote>\n\n<p>which is <strong>not</strong> the purpose of your MACRO definition. Inclusion of <code>return</code> keyword is unwanted and invalid syntax there.</p>\n\n<p>What you probably want is a syntax like</p>\n\n<pre><code>  (N &gt;=0)? (int)(N+0.5) : (int)(N-0.5)\n</code></pre>\n\n<p>or, something better</p>\n\n<pre><code> ( (N) &gt;=0)? (int)((N)+0.5) : (int)((N)-0.5)\n</code></pre>\n\n<p>without the <code>return</code> and maybe the trailing <code>;</code> also.</p>\n"}, {"tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": false, "score": 2, "last_activity_date": 1487746877, "last_edit_date": 1487746877, "creation_date": 1487746176, "answer_id": 42384535, "question_id": 42384448, "link": "https://stackoverflow.com/questions/42384448/why-am-i-getting-errors-while-compiling-this-code-and-how-to-fix-them/42384535#42384535", "title": "Why am I getting errors while compiling this code and how to fix them?", "body": "<p>Because after preprocessing, your code will look similar to that:</p>\n\n<pre><code>a[i] = {  return (a[i] &gt;=0)? (int)(a[i]+0.5) : (int)(a[i]-0.5) ; }\n</code></pre>\n\n<p>If you like to stick to macro, declare it as:</p>\n\n<pre><code>#define round(N) ((N) &gt;=0)? (int)((N)+0.5) : (int)((N)-0.5)\n</code></pre>\n\n<p>But this is still not really correct because of int/float mixing. That is however already a different topic.</p>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 0, "creation_date": 1487755988, "post_id": 42387606, "comment_id": 71923431, "body": "Thank you very much Lundin!  I wanted to write this as a macro, so that I have more experience with writing them."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 1, "creation_date": 1487761002, "post_id": 42387606, "comment_id": 71926402, "body": "@Tree Sure, you need to study how macros work. But the thing is, a function-like macro is probably the incorrect solution here to begin with. Function-like macros are the very last resort and you need to know why they should be avoided: non-existent type safety, unreadable, hard to debug and maintain, can cause very subtle bugs, generally very dangerous."}, {"owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "edited": false, "score": 0, "creation_date": 1487766067, "post_id": 42387606, "comment_id": 71930058, "body": "Thank you!  I&#39;ll keep these tips in mind when programming :) @Lundin"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1487755843, "creation_date": 1487755843, "answer_id": 42387606, "question_id": 42384448, "link": "https://stackoverflow.com/questions/42384448/why-am-i-getting-errors-while-compiling-this-code-and-how-to-fix-them/42387606#42387606", "title": "Why am I getting errors while compiling this code and how to fix them?", "body": "<p>If you insist on writing this yourself, you should replace the icky macro with a safer, cleaner function:</p>\n\n<pre><code>inline int int_round (double d)\n{\n  return (int) ( d &gt;= 0 ? d+0.5 : d-0.5 );\n}\n</code></pre>\n\n<p>This should yield the very same machine code.</p>\n"}], "owner": {"reputation": 127, "user_id": 7378058, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d2653619491af627668c4fe4584c70e8?s=128&d=identicon&r=PG&f=1", "display_name": "Tree", "link": "https://stackoverflow.com/users/7378058/tree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1487755843, "creation_date": 1487745878, "last_edit_date": 1487747212, "question_id": 42384448, "link": "https://stackoverflow.com/questions/42384448/why-am-i-getting-errors-while-compiling-this-code-and-how-to-fix-them", "title": "Why am I getting errors while compiling this code and how to fix them?", "body": "<p>The program I'm trying to write includes a macro to round a real number to the nearest integer and a function which uses that macro to round an array of real numbers.</p>\n\n<p>Here's the program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define SIZE 256\n#define round(N) {  return (N &gt;=0)? (int)(N+0.5) : (int)(N-0.5) ; }\n\nvoid round_array(int a[])\n{\n   int i;\n   for(i=0; i &lt;SIZE; i++)\n   {\n       a[i] = round(a[i]);\n   }\n}                                                     \n\nint main()\n{\n\n    return 0;\n}\n</code></pre>\n\n<p>While compiling, I'm getting these errors:</p>\n\n<pre><code> round.c: In function \ufffd\ufffd\ufffdround_array\ufffd\ufffd\ufffd:\n round.c:4:18: error: expected expression before \ufffd\ufffd\ufffd{\ufffd\ufffd\ufffd token\n #define round(N) {  return (N &gt;=0)? (int)(N+0.5) : (int)(N-0.5) ; }\n                  ^\nround.c:11:15: note: in expansion of macro \ufffd\ufffd\ufffdround\ufffd\ufffd\ufffd\n        a[i] = round(a[i]);\n               ^\nround.c: At top level:\n</code></pre>\n\n<p>Why am I getting these errors and how can I fix them?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1487745601, "post_id": 42384358, "comment_id": 71917189, "body": "Who is responsible for putting the values? Maybe use a flag there and skip the checking part altogether?"}, {"owner": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1487745737, "post_id": 42384358, "comment_id": 71917266, "body": "@SouravGhosh Initially, all the values will be zero and simultaneously or may be one by one each value will become some non-zero value"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1487745973, "post_id": 42384358, "comment_id": 71917390, "body": "Have a zero counter. Routines that add/remove/mutate numbers in the set need to update the zero counter."}, {"owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "edited": false, "score": 3, "creation_date": 1487745979, "post_id": 42384358, "comment_id": 71917394, "body": "This is not an answer but are you sure you are not optimizing prematurely or optimizing a part of the code which isn&#39;t the bottleneck"}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1487745982, "post_id": 42384358, "comment_id": 71917397, "body": "If you really have 10 or more values, these should arguably go in an array. And figuring out if one of them is zero e.g by looping over the array until you find one like that."}, {"owner": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "edited": false, "score": 0, "creation_date": 1487746272, "post_id": 42384358, "comment_id": 71917563, "body": "I am trying to achieve it with minimum assembly instructions. Looping will be bad if only the last element is zero. So I wanted to know if is there any cheapest solution available"}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 2, "creation_date": 1487746522, "post_id": 42384358, "comment_id": 71917694, "body": "@lax there&#39;s unavoidably always going to be a last element"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1487746544, "post_id": 42384358, "comment_id": 71917703, "body": "Use <code>std::any_of</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1487747860, "post_id": 42384358, "comment_id": 71918366, "body": "And fewest assembly instructions does not mean fastest. It just means fewest instructions. You&#39;ll often get surprising efficiency simply by ensuring all the elements of the set are contiguous. Sorted if possible."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1487749115, "post_id": 42384358, "comment_id": 71919054, "body": "This isn&#39;t meaningful to optimize before 1) knowing the type of the data, 2) knowing the nature of the data - any patterns? is it sorted? and 3) knowing the amount of data. Any attempts to write code before all of that is known won&#39;t result in anything meaningful."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1487752168, "post_id": 42384358, "comment_id": 71920700, "body": "Maybe you should decide which language to use. C is not C++."}], "answers": [{"comments": [{"owner": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "edited": false, "score": 0, "creation_date": 1487746710, "post_id": 42384605, "comment_id": 71917771, "body": "By efficient I mean fastest with less no of machine instructions."}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 4, "creation_date": 1487746764, "post_id": 42384605, "comment_id": 71917802, "body": "Less instructions doesn&#39;t necessarily mean faster?"}, {"owner": {"reputation": 2875, "user_id": 1934800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd418bfddb2f7d81dc1d9ba06c203cc7?s=128&d=identicon&r=PG", "display_name": "TrentP", "link": "https://stackoverflow.com/users/1934800/trentp"}, "edited": false, "score": 0, "creation_date": 1487748352, "post_id": 42384605, "comment_id": 71918617, "body": "Fewest instructions total?  Or fewest executed?  And if the latter, in the average case or the worst case?  Consider that stopping at the first zero found doesn&#39;t help in the worst case but likely produces more code.  Unrolling a loop is often faster, but produces more instructions total."}], "tags": [], "owner": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "is_accepted": false, "score": 2, "last_activity_date": 1487747307, "last_edit_date": 1487747307, "creation_date": 1487746484, "answer_id": 42384605, "question_id": 42384358, "link": "https://stackoverflow.com/questions/42384358/what-is-the-most-efficient-way-to-determine-if-any-one-of-the-number-from-given/42384605#42384605", "title": "what is the most efficient way to determine if any one of the number from given set of numbers is zero?", "body": "<p>The first thing to point out is that \"most efficient\" is in the eye of the beholder.  Do you mean fastest?  Smallest code space?  Easiest to maintain?</p>\n\n<p>If your compiler and hardware supports vector operations, I'd say take the product of the set and if it equals zero, you know that at least one element is zero.</p>\n\n<p>So perhaps I'm missing something -- the following seems too simple -- but does this do what you want?</p>\n\n<pre><code>bool has_a_zero(int *values, int n) {\n  while (n--) {\n    if (!*values++) return true;\n  }\n  return false;\n}\n</code></pre>\n\n<p>If that's not fast enough, you can do tricks like unrolling the loop to do chunks of N tests at a time (e.g. <a href=\"https://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\" title=\"Duff&#39;s Device\">Duff's Device</a>).  Or if your set of values has an out-of-band value, you can use that to terminate the loop rather than manipulate extra registers.</p>\n\n<p>But, as it is, you'd need to explain a bit more what you mean by \"most efficient\".</p>\n"}, {"comments": [{"owner": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "edited": false, "score": 0, "creation_date": 1487754016, "post_id": 42385404, "comment_id": 71921935, "body": "I don&#39;t have as modern a compiler as yours -- can you profile your answer vs the one given in <a href=\"http://stackoverflow.com/a/42384605/558639\">stackoverflow.com/a/42384605/558639</a> and post the results?  I&#39;m ready to be impressed..."}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "reply_to_user": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "edited": false, "score": 1, "creation_date": 1487771249, "post_id": 42385404, "comment_id": 71933888, "body": "@fearless_fool good thing we have the compilers <a href=\"https://godbolt.org/g/dYbrZQ\" rel=\"nofollow noreferrer\">here</a> :) As you can see, MSVC (CL 19) produced pretty much the same code, others (GCC, Clang, ICC) managed to do some loop unrolling with the <code>std::any_of</code> - could be somewhat beneficial, depends on the specific case. My local measurements showed almost no difference in timings, which was kind of my point I guess :D"}, {"owner": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "edited": false, "score": 1, "creation_date": 1487793497, "post_id": 42385404, "comment_id": 71949136, "body": "The godbolt.org site is a GREAT tool: in this case, your any_of() approach emits 5 instructions in the inner loop, the &quot;old school pure C&quot; code emits 7.  Consider me impressed, and thank you for the enlightenment!"}, {"owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "reply_to_user": {"reputation": 29701, "user_id": 558639, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f4a1073df397d894cf3ae596988b687?s=128&d=identicon&r=PG", "display_name": "fearless_fool", "link": "https://stackoverflow.com/users/558639/fearless-fool"}, "edited": false, "score": 0, "creation_date": 1487794299, "post_id": 42385404, "comment_id": 71949576, "body": "@fearless_fool to be completely honest, none of the compilers did vectorize it after all (I&#39;m looking at you ICC), so there is still a little bit of possible speeding up. It would require some knowledge on the data part - the probability of zero encounter - and I recommend against it, but I cannot say it&#39;s not there:)"}], "tags": [], "owner": {"reputation": 2933, "user_id": 6350858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bfeae5d1ddef3ed5e81e88bdd30063f?s=128&d=identicon&r=PG&f=1", "display_name": "Ap31", "link": "https://stackoverflow.com/users/6350858/ap31"}, "is_accepted": true, "score": 4, "last_activity_date": 1487749235, "creation_date": 1487749235, "answer_id": 42385404, "question_id": 42384358, "link": "https://stackoverflow.com/questions/42384358/what-is-the-most-efficient-way-to-determine-if-any-one-of-the-number-from-given/42385404#42385404", "title": "what is the most efficient way to determine if any one of the number from given set of numbers is zero?", "body": "<p>The most efficient way to do that is most definetly   </p>\n\n<pre><code>std::any_of(v.begin(),v.end(),[](int x) { return x==0; });\n</code></pre>\n\n<p>Some compilers would even be able to vectorize it, so it's going to be hard to optimize it any further.  </p>\n\n<p>But the most important thing here is that you're saving your time that could be wasted on counting assembler instructions (which hardly even makes sense) and the time of potential readers of your code.  </p>\n\n<p>After you've finished your whole program, you can profile it and determine your bottlenecks. In the unlikely case this line is one of them, you'll have to figure out what exactly is going on - cache misses, IO, wrong branch prediction - and fix that specific problem.   </p>\n\n<p>Also another close option is    </p>\n\n<pre><code>std::find(v.begin(),v.end(),0)!=v.end(); \n</code></pre>\n"}], "owner": {"reputation": 521, "user_id": 1669844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7c8af68b3c07151ea0e87a7e385ce9a?s=128&d=identicon&r=PG", "display_name": "user1669844", "link": "https://stackoverflow.com/users/1669844/user1669844"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 42385404, "answer_count": 2, "score": 0, "last_activity_date": 1487752001, "creation_date": 1487745507, "question_id": 42384358, "link": "https://stackoverflow.com/questions/42384358/what-is-the-most-efficient-way-to-determine-if-any-one-of-the-number-from-given", "title": "what is the most efficient way to determine if any one of the number from given set of numbers is zero?", "body": "<p>In my project, I have to perform certain operations only if one or more numbers from the particular set are zero. I want this check to be the efficient one and don't want to perform multiple AND operations. </p>\n\n<p>e.g. if there are 10 elements I need to perform following operation before getting the final answer</p>\n\n<pre><code>var_and= A1 &amp;&amp; A2;\nvar_and=var_and &amp;&amp; A3;..\n.\n.\nvar_and=var_and &amp;&amp; A10;\n</code></pre>\n\n<p>This is how assembly code will look like(?). </p>\n\n<p>Is there any better solution to this? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35, "user_id": 7578949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f89d41449dc345e1e53ca466da1e92?s=128&d=identicon&r=PG&f=1", "display_name": "Vcoss", "link": "https://stackoverflow.com/users/7578949/vcoss"}, "reply_to_user": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1487744406, "post_id": 42383916, "comment_id": 71916632, "body": "@TessellatingHeckler abba and bbaa are anagrams, which is what the input.txt is set to"}, {"owner": {"reputation": 35, "user_id": 7578949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f89d41449dc345e1e53ca466da1e92?s=128&d=identicon&r=PG&f=1", "display_name": "Vcoss", "link": "https://stackoverflow.com/users/7578949/vcoss"}, "reply_to_user": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1487744621, "post_id": 42383916, "comment_id": 71916731, "body": "Oh now I now what you mean.  ya thats a broken code whoops brb"}, {"owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 1, "creation_date": 1487749188, "post_id": 42383916, "comment_id": 71919093, "body": "<code>abaa</code> <code>baba</code> - <code>THEY ARE ANAGRAMS</code> - no they&#39;re still not? You&#39;re initializing <code>count[SIZE]</code> a 5 element array, indexes 0,1,2,3,4. Then you&#39;re indexing into it with <code>count[str1[i]]</code> - str1 is a character array, so the letter <code>a</code> is going to be ASCII character number 97, so you&#39;re doing <code>count[97]</code> of an array which goes 0-4. I think you&#39;re chewing through random unallocated memory. Then you try to look for the results in the five places of <code>count[i]</code>. This approach might work if you made count big enough and changed the counters, but right now it&#39;s fundamentally broken."}], "answers": [{"comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1487759855, "post_id": 42383961, "comment_id": 71925579, "body": "By <code>&#39;*&#39;</code> OP means a single character. Isn&#39;t it? In regex <code>&#39;*&#39;</code> may stand for any number of characters."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": -1, "last_activity_date": 1487744189, "last_edit_date": 1487744189, "creation_date": 1487743885, "answer_id": 42383961, "question_id": 42383916, "link": "https://stackoverflow.com/questions/42383916/compare-strings-with-a-wildcard-operator-and-randomized-order-anagrams/42383961#42383961", "title": "Compare strings with a wildcard operator (*) and randomized order \u2014 Anagrams", "body": "<p>On Linux and Posix systems, you might use globbing related functions. See <a href=\"http://man7.org/linux/man-pages/man7/glob.7.html\" rel=\"nofollow noreferrer\">glob(7)</a> and look into <a href=\"http://man7.org/linux/man-pages/man3/glob.3.html\" rel=\"nofollow noreferrer\">glob(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/fnmatch.3.html\" rel=\"nofollow noreferrer\">fnmatch(3)</a>, <a href=\"http://man7.org/linux/man-pages/man3/wordexp.3.html\" rel=\"nofollow noreferrer\">wordexp(3)</a> etc</p>\n\n<p>Look also into <a href=\"http://man7.org/linux/man-pages/man3/regcomp.3.html\" rel=\"nofollow noreferrer\">regcomp(3)</a></p>\n\n<p>If you need to write it by yourself, read about <a href=\"https://en.wikipedia.org/wiki/Finite-state_machine\" rel=\"nofollow noreferrer\">finite state machines</a>, <a href=\"https://en.wikipedia.org/wiki/Context-free_grammar\" rel=\"nofollow noreferrer\">context free grammars</a>, <a href=\"https://en.wikipedia.org/wiki/Regular_grammar\" rel=\"nofollow noreferrer\">regular grammars</a>, <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expressions</a>, <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 7578949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f89d41449dc345e1e53ca466da1e92?s=128&d=identicon&r=PG&f=1", "display_name": "Vcoss", "link": "https://stackoverflow.com/users/7578949/vcoss"}, "edited": false, "score": 0, "creation_date": 1487771042, "post_id": 42384503, "comment_id": 71933755, "body": "In the first solution I get an error at   <code>char *letterToCheck = str1[0];</code>  saying that it is an incompatible integer to pointer conversion initializing &#39;char *&#39;"}, {"owner": {"reputation": 15554, "user_id": 2057171, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/E9ThY.png?s=128&g=1", "display_name": "Albert Renshaw", "link": "https://stackoverflow.com/users/2057171/albert-renshaw"}, "reply_to_user": {"reputation": 35, "user_id": 7578949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f89d41449dc345e1e53ca466da1e92?s=128&d=identicon&r=PG&f=1", "display_name": "Vcoss", "link": "https://stackoverflow.com/users/7578949/vcoss"}, "edited": false, "score": 0, "creation_date": 1487790623, "post_id": 42384503, "comment_id": 71947509, "body": "@Vcoss Did you copy paste it directly into a new project to test? I just copy pasted it into an online C IDE and it worked fine"}], "tags": [], "owner": {"reputation": 15554, "user_id": 2057171, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/E9ThY.png?s=128&g=1", "display_name": "Albert Renshaw", "link": "https://stackoverflow.com/users/2057171/albert-renshaw"}, "is_accepted": false, "score": 1, "last_activity_date": 1487755546, "last_edit_date": 1487755546, "creation_date": 1487746080, "answer_id": 42384503, "question_id": 42383916, "link": "https://stackoverflow.com/questions/42383916/compare-strings-with-a-wildcard-operator-and-randomized-order-anagrams/42384503#42384503", "title": "Compare strings with a wildcard operator (*) and randomized order \u2014 Anagrams", "body": "<p>Similar to how selection-sort algorithm works, but instead of checking integer value to arrange I'll just use a string comparison to select/remove and add an exception for (*). Iterate through the whole list and viola! </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n\n    char inputString[] = \"AB**\";//input string (with asterisks)\n    char comparisonString[] = \"AYYB\";//comparison string (without asterisks)\n\n    int inputString_length = strlen(inputString);\n    int comparisonString_length = strlen(comparisonString);\n\n    int anagram = 1;//boolean\n\n    if (inputString_length != comparisonString_length) {\n        anagram = 0;\n    } else {\n\n        int i = 0;\n        while ((i &lt; inputString_length) &amp;&amp; (anagram == 1)) {\n\n            char *letterToCheck = inputString[0];\n            memmove(&amp;inputString[0], &amp;inputString[0 + 1], strlen(inputString) - 0);//remove first character\n\n            int j = 0;\n            int comparisonString_length_new = strlen(comparisonString);\n            int matchFound = 0;//boolean\n            while ((j &lt; comparisonString_length_new) &amp;&amp; (matchFound == 0)) {\n                char *letterToCompare = comparisonString[j];\n\n                if (letterToCheck == '*') {\n                    matchFound = 1;\n                }\n\n                if (letterToCheck == letterToCompare) {\n                    matchFound = 1;\n                    memmove(&amp;comparisonString[j], &amp;comparisonString[j + 1], strlen(comparisonString) - j);//remove matched character\n                }\n\n                j++;\n            }\n\n            if (matchFound == 0) {\n                anagram = 0;\n            }\n\n\n            i++;\n        }\n\n    }\n\n\n    if (anagram == 0) {\n        printf(\"Are NOT Anagrams\");\n    } else {\n        printf(\"Are Anagrams\");\n    }\n\n}\n</code></pre>\n\n<p>Another solution where both input and comparison strings may contain * (Note: This solution below was added by an off-site user and not OP, it has also not been tested nor verified by OP)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define CHAR_LEN 4\n#define SPECIAL_CHARACTER '*'\n\nint count_special_char(char *string) {\n    int i = 0, count = 0;\n    for(i = 0; i &lt; CHAR_LEN; i++) {\n        if(string[i] == SPECIAL_CHARACTER)\n            count++;\n    }\n    return count;\n}\n\nint is_anagram(char *string_a, char *string_b) {\n    int i, y;\n    int found_count = 0;\n    int a_special = count_special_char(string_a);\n    int b_special = count_special_char(string_b);\n\n    for(i = 0; i &lt; CHAR_LEN; i++) {\n        if(string_a[i] == SPECIAL_CHARACTER) //compare only non-asterisk char\n            continue;\n\n        for(y = 0; y &lt; CHAR_LEN; y++) {\n            if(string_a[i] == string_b[y]) {\n                string_b[y] = '\\0' //treat this char as found\n                found_count++;\n                break;\n            }\n        }\n    }\n\n    if((found_count + a_special + b_special) &gt;= CHAR_LEN)\n        return 1;\n    else\n        return 0;\n}\n\nint main() {\n    char a[CHAR_LEN] = \"**CD\";\n    char b[CHAR_LEN] = \"AB**\";\n\n    if(is_anagram(a, b))\n        printf(\"yes\\n\");\n    else\n        printf(\"no\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>A*** and *XYZ is assumed as anagram because first string has 3 * which can represent second string XYZ. And second string has 1 * which can represent first string A. If there are any mistakes do point out and help. Thanks!</p>\n"}], "owner": {"reputation": 35, "user_id": 7578949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f89d41449dc345e1e53ca466da1e92?s=128&d=identicon&r=PG&f=1", "display_name": "Vcoss", "link": "https://stackoverflow.com/users/7578949/vcoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "closed_date": 1487750125, "answer_count": 2, "score": -1, "last_activity_date": 1487755546, "creation_date": 1487743656, "last_edit_date": 1487746233, "question_id": 42383916, "link": "https://stackoverflow.com/questions/42383916/compare-strings-with-a-wildcard-operator-and-randomized-order-anagrams", "closed_reason": "Needs more focus", "title": "Compare strings with a wildcard operator (*) and randomized order \u2014 Anagrams", "body": "<p>I have two strings, I want to know if they are equal to each other. However the strings character-order has been randomized. Also certain characters may have been swapped out with a wildcard operator (*). I'm using this for Anagram detection.</p>\n\n<hr>\n\n<p>In this case, I'm trying to get the anagram program I have to say that ab** is an anagram of abba. Right now it can tell if its an anagram if it is literally an anagram like abba and bbaa.  Now I'm trying to figure out how to implement wildcard *'s and I have no idea where to start, please help!</p>\n\n<p>What i have so far:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#define SIZE 5\n\n\n\nbool areAnagram(char *str1, char *str2)\n{\n\n    int count[SIZE] = {0};\n    int i = 0;\n\n    for (i = 0; str1[i] &amp;&amp; str2[i];  i++)\n    {\n        count[str1[i]]++;\n        count[str2[i]]--;\n    }\n\n    if (str1[i] || str2[i])\n    {\n         return false;\n    }\n\n\n\n    for (i = 0; i &lt; SIZE; i++)\n    {\n        if (count[i])\n        {\n            return false;\n        }\n    }\n\n     return true;\n}\n\nint main()\n{\n    char str1[SIZE], str2[SIZE];\n\n    FILE *finput;\n\n    finput = fopen(\"input.txt\", \"r\");\n\n    fscanf(finput, \"%s %s\", str1, str2);\n\n    printf(\"%s\\n\", str1);\n    printf(\"%s\\n\", str2);\n\n  if(areAnagram(str1, str2))\n  {\n        printf(\"THEY ARE ANAGRAMS\\n\");\n  }\n  else\n  {\n      printf(\"THEY AREN'T ANAGRAMS\\n\");\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "driver"], "comments": [{"owner": {"reputation": 2028, "user_id": 3435777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1f1a766d687b55f0f8a9bd80ce02491?s=128&d=identicon&r=PG&f=1", "display_name": "zzn", "link": "https://stackoverflow.com/users/3435777/zzn"}, "edited": false, "score": 0, "creation_date": 1487745387, "post_id": 42383898, "comment_id": 71917087, "body": "you can use <code>device_create</code> to create  device node, no need for <code>mknod</code>."}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487746902, "post_id": 42383898, "comment_id": 71917884, "body": "The mknod is a beauty of unix, where everything is a file, and the user can interact with devices via files, naming them, and giving permissions to them, as he pleases."}], "owner": {"reputation": 95, "user_id": 6599345, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/761d2bd810bfeddaa684a76459112e89?s=128&d=identicon&r=PG&f=1", "display_name": "pointer accurate", "link": "https://stackoverflow.com/users/6599345/pointer-accurate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1487747693, "creation_date": 1487743586, "last_edit_date": 1487747693, "question_id": 42383898, "link": "https://stackoverflow.com/questions/42383898/what-to-understand-with-char-driver-examples", "title": "what to understand with char driver examples", "body": "<p>I have a confusion regarding char driver examples. In some examples the examples are focused in creating a character device and connecting it with file_operations. Then we have to <code>insmod</code> the driver, create a node using <code>mknod</code>, and only then our small application can read or write using this driver. A trivial init_function like this:</p>\n\n<pre><code>static int char_init(void)\n{\n    alloc_chrdev_region(&amp;mydev, 0, 1, \"mydev\");\n    cdev = cdev_alloc();\n    cdev-&gt;fops = &amp;fops;\n    cdev_add(cdev, mydev, 1);\n    printk(KERN_ALERT \"Major minor number available\\n\");\n    printk(KERN_ALERT \"major number = %d minor number = %d\\n\",MAJOR(mydev), MINOR(mydev));//Macros that extract the major and minor numbers from a device number.\n    return 0;\n}\n</code></pre>\n\n<p>In some other examples we create a class and a device. An example from Derek Molloy's char driver,</p>\n\n<pre><code>static int __init ebbchar_init(void){\n   printk(KERN_INFO \"EBBChar: Initializing the EBBChar LKM\\n\");\n\n   // Try to dynamically allocate a major number for the device -- more difficult but worth it\n   majorNumber = register_chrdev(0, DEVICE_NAME, &amp;fops);\n   if (majorNumber&lt;0){\n      printk(KERN_ALERT \"EBBChar failed to register a major number\\n\");\n      return majorNumber;\n   }\n   printk(KERN_INFO \"EBBChar: registered correctly with major number %d\\n\", majorNumber);\n\n   // Register the device class\n   ebbcharClass = class_create(THIS_MODULE, CLASS_NAME);\n   if (IS_ERR(ebbcharClass)){                // Check for error and clean up if there is\n      unregister_chrdev(majorNumber, DEVICE_NAME);\n      printk(KERN_ALERT \"Failed to register device class\\n\");\n      return PTR_ERR(ebbcharClass);          // Correct way to return an error on a pointer\n   }\n   printk(KERN_INFO \"EBBChar: device class registered correctly\\n\");\n\n   // Register the device driver\n   ebbcharDevice = device_create(ebbcharClass, NULL, MKDEV(majorNumber, 0), NULL, DEVICE_NAME);\n   if (IS_ERR(ebbcharDevice)){               // Clean up if there is an error\n      class_destroy(ebbcharClass);           // Repeated code but the alternative is goto statements\n      unregister_chrdev(majorNumber, DEVICE_NAME);\n      printk(KERN_ALERT \"Failed to create the device\\n\");\n      return PTR_ERR(ebbcharDevice);\n   }\n   printk(KERN_INFO \"EBBChar: device class created correctly\\n\"); // Made it! device was initialized\n   return 0;\n}\n</code></pre>\n\n<p>Now what conclusions I can make with these two strategies? Why not only use the second one?\nAlso when we make a device using <code>cdev_add</code>, and <code>cdev_init</code>, what does it do, if I have to create a device file using <code>mknod</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1487741195, "post_id": 42383329, "comment_id": 71915345, "body": "<code>&quot;abcde&quot;</code> is a constant. You cannot change it. This is asked many times before. Looking for duplicate now."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1487741221, "post_id": 42383329, "comment_id": 71915353, "body": "Why are you flooring an integer division?"}, {"owner": {"reputation": 579, "user_id": 5593631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fd12224f5e48ad3011d820a87ff442b?s=128&d=identicon&r=PG&f=1", "display_name": "Luminous_Dev", "link": "https://stackoverflow.com/users/5593631/luminous-dev"}, "edited": false, "score": 0, "creation_date": 1487741260, "post_id": 42383329, "comment_id": 71915371, "body": "perhaps make another char* variable inside the function and return that instead?"}, {"owner": {"reputation": 1168, "user_id": 2079484, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1e334d2fa189682927dcc80cd1018388?s=128&d=identicon&r=PG", "display_name": "user2027202827", "link": "https://stackoverflow.com/users/2079484/user2027202827"}, "edited": false, "score": 0, "creation_date": 1487741724, "post_id": 42383329, "comment_id": 71915566, "body": "This is not related to your problem which others have already pointed out, however, you might also consider using a variable name besides string so as not to be confused with the type <code>string</code>."}, {"owner": {"reputation": 1609, "user_id": 6109459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hg2RO.jpg?s=128&g=1", "display_name": "Kishan Oza", "link": "https://stackoverflow.com/users/6109459/kishan-oza"}, "edited": false, "score": 0, "creation_date": 1487742191, "post_id": 42383329, "comment_id": 71915756, "body": "use <b>char  a[] = &quot;abcde&quot;;</b> and then pass it to function like <b>reverse(a)</b>"}, {"owner": {"reputation": 61, "user_id": 5256549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh5.googleusercontent.com/-Zk0PQqv1j14/AAAAAAAAAAI/AAAAAAAAACg/wQunRhEmie8/photo.jpg?sz=128", "display_name": "simdi ejinkeonye", "link": "https://stackoverflow.com/users/5256549/simdi-ejinkeonye"}, "reply_to_user": {"reputation": 1609, "user_id": 6109459, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hg2RO.jpg?s=128&g=1", "display_name": "Kishan Oza", "link": "https://stackoverflow.com/users/6109459/kishan-oza"}, "edited": false, "score": 0, "creation_date": 1487742632, "post_id": 42383329, "comment_id": 71915937, "body": "@kishanoza thanks that was the problem"}], "owner": {"reputation": 61, "user_id": 5256549, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh5.googleusercontent.com/-Zk0PQqv1j14/AAAAAAAAAAI/AAAAAAAAACg/wQunRhEmie8/photo.jpg?sz=128", "display_name": "simdi ejinkeonye", "link": "https://stackoverflow.com/users/5256549/simdi-ejinkeonye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1487742485, "answer_count": 0, "score": 0, "last_activity_date": 1487741034, "creation_date": 1487741034, "question_id": 42383329, "link": "https://stackoverflow.com/questions/42383329/why-is-my-string-reversal-function-having-a-segmentation-fault", "closed_reason": "Duplicate", "title": "Why is my string reversal function having a segmentation fault?", "body": "<p>My main suspicion is that i am meant to null terminate the string i'm returning or is it already terminated ?. Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\nchar* reverse(char*);\n\n\nint main(void) {\n\nprintf(\"%s\",reverse(\"abcde\"));\nreturn 0;\n}\n\nchar* reverse(char* string){\n  int length = strlen(string);\n  int limit = (int)floor(length/2);\n  char temp;\n\nfor(int x = 0;x&lt;=limit;x++){\n    temp = string[x];\n    string[x] = string[length-x-1];\n    string[length-x-1] = temp;\n\n}\n\nreturn string;\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "bash", "sendmail"], "comments": [{"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1487740120, "post_id": 42383099, "comment_id": 71914918, "body": "If you know the path to the command, why not just do a <code>stat</code> and see if it is an executable?"}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 0, "creation_date": 1487740176, "post_id": 42383099, "comment_id": 71914941, "body": "Duplicate of <a href=\"http://stackoverflow.com/questions/9317305/sending-an-email-from-a-c-c-program-in-linux\">sending an email from a C/C++ program in linux</a>"}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 0, "creation_date": 1487740361, "post_id": 42383099, "comment_id": 71915011, "body": "CURL is another good way to send email."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1487741651, "post_id": 42383099, "comment_id": 71915533, "body": "Calling <code>sendmail</code> is fraught with many, many security issues. Beyond that, unless you set the right headers, mail from some random machine is likely to be treated as spam. And <code>sendmail</code> isn&#39;t always available (you did say routers). I would instead suggest sending mail via an <a href=\"https://en.wikipedia.org/wiki/Smtp\" rel=\"nofollow noreferrer\">SMTP server</a>. Most mail providers provide one."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1487741956, "post_id": 42383099, "comment_id": 71915666, "body": "Read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\">advancedlinuxprogramming.com</a>"}, {"owner": {"reputation": 25, "user_id": 5711092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-prl25YyLSU8/AAAAAAAAAAI/AAAAAAAAABI/4F8WNrE-OFs/photo.jpg?sz=128", "display_name": "N3Cr0M0rPh", "link": "https://stackoverflow.com/users/5711092/n3cr0m0rph"}, "edited": false, "score": 0, "creation_date": 1487744094, "post_id": 42383099, "comment_id": 71916491, "body": "Holy crap.... why so many downvotes? This is a perfectly legitimate question."}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1487741935, "post_id": 42383478, "comment_id": 71915653, "body": "The <code>system</code> function won&#39;t return if <code>sendmail</code> don&#39;t exit or terminate."}, {"owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1487742364, "post_id": 42383478, "comment_id": 71915832, "body": "@BasileStarynkevitch it will terminate if you feed it from /dev/null. When you start it as shown above it tries to read from stdin"}, {"owner": {"reputation": 25, "user_id": 5711092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-prl25YyLSU8/AAAAAAAAAAI/AAAAAAAAABI/4F8WNrE-OFs/photo.jpg?sz=128", "display_name": "N3Cr0M0rPh", "link": "https://stackoverflow.com/users/5711092/n3cr0m0rph"}, "edited": false, "score": 0, "creation_date": 1487744476, "post_id": 42383478, "comment_id": 71916666, "body": "Thankyou. This is exactly what I needed."}], "tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": true, "score": 1, "last_activity_date": 1487741759, "creation_date": 1487741759, "answer_id": 42383478, "question_id": 42383099, "link": "https://stackoverflow.com/questions/42383099/determine-if-command-is-successful-exists-c/42383478#42383478", "title": "Determine if command is successful/exists c", "body": "<p>If you know the path to sendmail, then as per the comments, use <code>stat</code> to check if it exists and is executable. If you know the search path then iterate through it and check each one.</p>\n\n<p>If not - you could pass it <code>/dev/null</code> as stdin, in which case it will print an error message and exit. Then you can inspect the exit code from the process - for POSIX systems, the exit code will be 127 if the command could not be executed:</p>\n\n<pre><code>int rc = system(\"sendmail &lt;/dev/null 2&gt;/dev/null\");\nif (WEXITSTATUS(rc)!=127) {\n    /* sendmail was found */\n}\n</code></pre>\n\n<p>Of course this requires <code>/dev/null</code> to exist and shell redirects to be available.</p>\n\n<p>I redirected stderr also, otherwise you will get error messages output from sendmail.</p>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1487742382, "creation_date": 1487742382, "answer_id": 42383607, "question_id": 42383099, "link": "https://stackoverflow.com/questions/42383099/determine-if-command-is-successful-exists-c/42383607#42383607", "title": "Determine if command is successful/exists c", "body": "<p>Just try to use it. If it's there, and you can execute it, it'll work. If it isn't, it won't and you can see why in <code>errno</code>.</p>\n\n<p>The reason you don't try to check beforehand is twofold, and it's the same with files as with executables. First, you might get the check wrong. A lot of people will make the mistake of checking if a file <em>exists</em> and then wonder why opening it fails. They forgot to check if it's readable. There's no need to duplicate all these checks, just try to open it and see.</p>\n\n<p>The second is it invites a <a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">race condition</a>. For example, let's say you have two processes working on the same file. Time is moving down.</p>\n\n<pre><code>Process 1                              Process 2\nCheck if file is readable.\nIt's readable!\n                                       Make the file unreadable.\nOpen that file.\nFile fails to open.\n</code></pre>\n\n<p>That's a very simple example, there are far, far worse consequences to a race condition. It illustrates that checking if a resource can be used and using that resource must be <a href=\"https://en.wikipedia.org/wiki/Linearizability\" rel=\"nofollow noreferrer\"><em>atomic</em></a>: it has to happen in one single uninterruptible operation.</p>\n\n<hr>\n\n<p>Avoid <code>popen</code> and <code>system</code> where you can. They run the command through the shell which invites security holes and unintended consequences of non-alphanumeric characters. Instead, use one of the <code>exec[lv]p</code> functions that will search the <code>PATH</code> for the executable without invoking a shell.</p>\n"}], "owner": {"reputation": 25, "user_id": 5711092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-prl25YyLSU8/AAAAAAAAAAI/AAAAAAAAABI/4F8WNrE-OFs/photo.jpg?sz=128", "display_name": "N3Cr0M0rPh", "link": "https://stackoverflow.com/users/5711092/n3cr0m0rph"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "closed_date": 1487749885, "accepted_answer_id": 42383478, "answer_count": 2, "score": -4, "last_activity_date": 1487742382, "creation_date": 1487739800, "question_id": 42383099, "link": "https://stackoverflow.com/questions/42383099/determine-if-command-is-successful-exists-c", "closed_reason": "Needs more focus", "title": "Determine if command is successful/exists c", "body": "<p>How can I determine if a command is successful or exists in C? This will need to be compatible with multiple architectures and routers (don't ask haha)</p>\n\n<p>I was thinking of using popen or system or exec(v)(l). But the command I want to check for is sendmail. Since sendmail is a command that runs forever with no output this will be a little hard to do. Any ideas?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "linux", "pthreads"], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1487739218, "creation_date": 1487739218, "answer_id": 42382996, "question_id": 42382899, "link": "https://stackoverflow.com/questions/42382899/loop-through-an-array-of-threads/42382996#42382996", "title": "Loop through an array of threads", "body": "<pre><code>        for (j = 0; j &lt; size; j++) {\n            pthread_create(&amp;tid_array[j], &amp;attr, updater(nums[j]), NULL);\n            pthread_join(&amp;tid_array[j], NULL);\n        }\n</code></pre>\n\n<p>Joining a thread waits for it to complete, so you're only running one thread at a time. Instead, create all the threads first. Then join them all when you want to wait for them all to finish (or detach them if you don't).</p>\n"}, {"comments": [{"owner": {"reputation": 122, "user_id": 5573701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b05f694859977a86fedd87f221b7336?s=128&d=identicon&r=PG", "display_name": "Nerdy", "link": "https://stackoverflow.com/users/5573701/nerdy"}, "edited": false, "score": 0, "creation_date": 1487772787, "post_id": 42383195, "comment_id": 71935134, "body": "This works, but now once it goes through and prints out each number, it doesn&#39;t get to the point where the user can choose to enter more numbers or quit. It prints out that second prompt but then exits after."}], "tags": [], "owner": {"reputation": 490, "user_id": 7602674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/193276783eb09a4a1b8c7f18b74a731a?s=128&d=identicon&r=PG&f=1", "display_name": "jjh", "link": "https://stackoverflow.com/users/7602674/jjh"}, "is_accepted": true, "score": 1, "last_activity_date": 1487740302, "creation_date": 1487740302, "answer_id": 42383195, "question_id": 42382899, "link": "https://stackoverflow.com/questions/42382899/loop-through-an-array-of-threads/42383195#42383195", "title": "Loop through an array of threads", "body": "<p>You should not be calling <code>pthread_exit(0)</code> in <code>void *updater(int num)</code> as it will terminate your program. You need only return <code>NULL</code> from this method.</p>\n\n<p>Wait until you have created all of your threads before you join them. Joining a thread will wait for it to complete, so joining threads as soon as you create them gives you no benefit at all. This should look like:</p>\n\n<pre><code>for (j = 0; j &lt; size; j++) {\n  pthread_create(&amp;tid_array[j], &amp;attr, updater(nums[j]), NULL);\n}\n\nfor (j = 0; j &lt; size; j++) {\n  pthread_join(&amp;tid_array[j], NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 5573701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b05f694859977a86fedd87f221b7336?s=128&d=identicon&r=PG", "display_name": "Nerdy", "link": "https://stackoverflow.com/users/5573701/nerdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1301, "favorite_count": 0, "accepted_answer_id": 42383195, "answer_count": 2, "score": 1, "last_activity_date": 1487740302, "creation_date": 1487738692, "question_id": 42382899, "link": "https://stackoverflow.com/questions/42382899/loop-through-an-array-of-threads", "title": "Loop through an array of threads", "body": "<p>I am going to be straight up and say that this is a homework assignment. I am very close but there is one small thing I cannot figure out. The program asks the user to enter any amount of numbers in one line. For each number they enter, it will create a new thread to then print out the process of finding the Collatz conjecture for that number.</p>\n\n<p>I have everything working except for the fact that I cannot create multiple threads using a for loop. I make an array of threads and then try to create a new one for each number from the input, but it seems to only make one thread and then exit the program.</p>\n\n<p>Any ideas for why it isn't working?</p>\n\n<p>P.S. C is definitely not my strong suit, this is only like the third program I've written in it. So I'm still learning and struggling with the language.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n\nvoid *updater(int num);\n\nint main () {\n    pid_t pid;\n    char input[50];\n    int nums[100], size = 0, j;\n    char *pch;\n\n    pid = fork();\n\n    if (pid &lt; 0) {\n        fprintf(stderr, \"Fork failed\");\n    } else if (pid == 0) {\n        printf(\"Enter any number(s) or 'q' to quit: \");\n        fgets(input, sizeof(input), stdin);\n\n        while (strcmp(input, \"q\") != 1) {\n            pch = strtok(input, \" \");\n\n            while (pch != NULL) {\n                nums[size] = atoi(pch);\n                size++;\n                pch = strtok(NULL, \" \");\n            }\n\n            pthread_t tid_array[size];\n            pthread_attr_t attr;\n            pthread_attr_init(&amp;attr);\n\n            for (j = 0; j &lt; size; j++) {\n                pthread_create(&amp;tid_array[j], &amp;attr, updater(nums[j]), NULL);\n                pthread_join(&amp;tid_array[j], NULL);\n            }\n\n            size = 0;\n\n            printf(\"Enter any number(s) or 'q' to quit: \");\n            fgets(input, sizeof(input), stdin);\n        }\n    } else {\n        wait(NULL);\n    }\n\n    return 0;\n}\n\nvoid *updater(int num) {\n    printf(\"%d \", num);\n\n    while (num != 1) {\n        if (num &lt;= 0) {\n            printf(\"You cannot enter a negative number or 0\\n\");\n            return;\n        } else if (num % 2 == 0) {\n            num = num / 2;\n        } else {\n            num = 3 * num + 1;\n        }\n\n        printf(\"%d \", num);\n    }\n\n    printf(\"\\n\");\n    pthread_exit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "matrix", "runtime-error"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1487738305, "post_id": 42382776, "comment_id": 71914313, "body": "Unrelated to your problems but please <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">read this discussion</a> about casting the result of <code>malloc</code>."}, {"owner": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1487738974, "post_id": 42382776, "comment_id": 71914505, "body": "Alright, I will. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "edited": false, "score": 0, "creation_date": 1487738595, "post_id": 42382803, "comment_id": 71914387, "body": "I just recently learned how to allocate spaces, I don&#39;t really understand what I&#39;m supposed to do/use malloc. Also aren&#39;t I initializing them with &quot;int** C;&quot;?"}, {"owner": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "edited": false, "score": 0, "creation_date": 1487738632, "post_id": 42382803, "comment_id": 71914397, "body": "Should I return like: &quot;return C**;&quot;? and &quot;return L**;&quot;?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "edited": false, "score": 0, "creation_date": 1487739324, "post_id": 42382803, "comment_id": 71914641, "body": "@Sara A pointer must point somewhere for it to be valid. You must initialize it, or assign to it. And yes you should do e.g. <code>return L;</code> in your <code>allocateMatrix</code> function."}, {"owner": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "edited": false, "score": 0, "creation_date": 1487739814, "post_id": 42382803, "comment_id": 71914807, "body": "Where would I point it to and how do I do that?    int **C;? I&#39;m sorry for so many questions. I&#39;m not that good at this :/"}, {"owner": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "edited": false, "score": 0, "creation_date": 1487739934, "post_id": 42382803, "comment_id": 71914853, "body": "I know that pointers point to things but I don&#39;t know when to use them and why we would need anything to point to anything."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "edited": false, "score": 0, "creation_date": 1487741069, "post_id": 42382803, "comment_id": 71915290, "body": "@Sara Allocate memory for <code>C</code> as well, just like you did for <code>A</code> and <code>B</code>"}, {"owner": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1487741399, "post_id": 42382803, "comment_id": 71915432, "body": "Now my code is running but it&#39;s giving me only 0&#39;s. I added in int** C = allocateMatrix(n, m); to all the int** C I had, is the problem in my addMatrices? @CoolGuy"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1487738206, "creation_date": 1487738206, "answer_id": 42382803, "question_id": 42382776, "link": "https://stackoverflow.com/questions/42382776/adding-matrices-code-in-c-help-i-dont-know-whats-wrong/42382803#42382803", "title": "Adding Matrices Code in C HELP! I don&#39;t know what&#39;s wrong", "body": "<p>A few things:</p>\n\n<ul>\n<li><p>In <code>allocateMatrix</code> you allocate space for <code>n</code> <em>integers</em>, not <em>pointers</em> to integers.</p></li>\n<li><p>In many function you use an uninitialized pointer <code>C</code>.</p></li>\n<li><p>In many function declared to return something, you don't return anything at all.</p></li>\n</ul>\n\n<p>These things, and probably others, leads to <em>undefined behavior</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1487742116, "last_edit_date": 1495541373, "creation_date": 1487742116, "answer_id": 42383542, "question_id": 42382776, "link": "https://stackoverflow.com/questions/42382776/adding-matrices-code-in-c-help-i-dont-know-whats-wrong/42383542#42383542", "title": "Adding Matrices Code in C HELP! I don&#39;t know what&#39;s wrong", "body": "<p>Expanding a bit on <a href=\"https://stackoverflow.com/users/440558/some-programmer-dude\">@Someprogrammerdude</a><a href=\"https://stackoverflow.com/a/42382803/3049655\">'s answer</a></p>\n\n<ul>\n<li><p>You should be allocating room for <code>n</code> integer pointers (<code>int*</code>s) and then in each row, allocate memory for <code>m</code> integers (<code>int</code>s). So, use</p>\n\n<pre><code>// Allocates space for an n by m matrix of ints\n// and returns the result\nint** allocateMatrix(int n, int m) {\n    int i, j;\n    int** L;\n\n    L = malloc(sizeof(int*) * n);       /* Make `n` rows */\n    for(i = 0; i &lt; n; i++) {            /* For each row, */\n        L[i] = malloc(sizeof(int) * m); /* Make room for `m` ints */\n    }\n\n    return L; /* Return the allocated variable. See 3rd point \u2193 */\n}\n</code></pre>\n\n<p>I've removed the casts because <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">they aren't recommended</a>. I leave error checking <code>malloc</code> upto you.</p></li>\n<li><p>You use <code>C</code> uninitialized: <code>int** C;</code>. Allocate memory for it just as you did for <code>A</code> and <code>B</code>:</p>\n\n<pre><code>int** C = allocateMatrix(n, m);\n</code></pre></li>\n<li><p>You forgot to return variables from functions. Add <code>return L;</code> and <code>return C;</code> at the end of the functions <code>allocateMatrix</code> and <code>addMatrices</code> respectively.</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 7602536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1addad3cc5130088f3553cd743f889de?s=128&d=identicon&r=PG&f=1", "display_name": "Sara", "link": "https://stackoverflow.com/users/7602536/sara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1487742116, "creation_date": 1487738001, "question_id": 42382776, "link": "https://stackoverflow.com/questions/42382776/adding-matrices-code-in-c-help-i-dont-know-whats-wrong", "title": "Adding Matrices Code in C HELP! I don&#39;t know what&#39;s wrong", "body": "<p>The assignment asks us to finish a code that adds matrices up and I'm not too sure what I'm supposed to be returning. It tells me that there's a runtime error\nbut I don't know how to fix it. It will be due pretty soon so someone please help me! </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\nint** getMatrix(int n, int m);\nint** allocateMatrix(int n, int m);\nint** addMatrices(int** A, int** B, int n, int m);\nvoid printMatrix(int** A, int n, int m);\nvoid deallocateMatrix(int** A, int n);\n\n\n// This program reads in two n by m matrices A and B and\n// prints their sum C = A + B\n//\n// This function is complete, you do not need to modify it\n// for your homework\nint main() {\n    int n = 0, m = 0;\n    printf(\"Enter the number of rows and columns: \");\n    scanf(\"%d %d\", &amp;n, &amp;m);\n    assert(n &gt; 0 &amp;&amp; m &gt; 0);\n    printf(\"Enter matrix A:\\n\");\n    int** A = getMatrix(n, m);\n    printf(\"Enter matrix B:\\n\");\n    int** B = getMatrix(n, m);\n    int** C = addMatrices(A, B, n, m);\n    printf(\"A + B = \\n\");\n    printMatrix(C, n, m);\n    deallocateMatrix(A, n);\n    deallocateMatrix(B, n);\n    deallocateMatrix(C, n);\n}\n\n// Creates a new n by m matrix whose elements are read from stdin\n//\n// This function is complete, you do not need to modify it\n// for your homework\nint** getMatrix(int n, int m) {\nint** M = allocateMatrix(n, m);\nint i, j;\n\nfor ( i = 0; i &lt; n; i++) {\n    printf(\"Input row %d elements, separated by spaces: \", i);\n    for ( j = 0; j &lt; m; j++) {\n        scanf(\"%d\", &amp;M[i][j]);\n    }\n}\nreturn M;\n}\n\n// Allocates space for an n by m matrix of ints\n// and returns the result\nint** allocateMatrix(int n, int m) {\n// Homework TODO: Implement this function\nint i, j;\nint** L;\n\nL = (int**)malloc(sizeof(int) * n);\nfor(i = 0; i &lt; n; i++) {\n    for(j = 0; j &lt; m; j++){\n        L[i] = (int*) malloc(sizeof(int) * m);\n    }\n}\n}\n\n// Adds two matrices together and returns the result\nint** addMatrices(int** A, int** B, int n, int m) {\n// Homework TODO: Implement this function\nint j, i;\nint** C;\n\nfor(i = 0; i &lt; n; i++) {\n    for(j = 0; j &lt; m; j++) {\n        C[i][j] = A[i][j] + B[i][j];\n    }\n}\n\n}\n\n// Prints out the entries of the matrix\nvoid printMatrix(int** A, int n, int m) {\n// Homework TODO: Implement this function\nint i, j;\nint** C;\n\nfor (i = 0; i &lt; n; i++) {\n  for (j = 0 ; j &lt; m; j++) {\n     printf(\"%d\\t\", C[i][j]);\n  }\n  printf(\"\\n\");\n  }\n}\n\n// Deallocates space used by the matrix\nvoid deallocateMatrix(int** A, int n) {\nint i;\n\nfor ( i = 0; i &lt; n; i++) {\n    free(A[i]);\n}\nfree(A);\n}\n</code></pre>\n"}, {"tags": ["c", "allocator", "data-segment"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1487736474, "post_id": 42382524, "comment_id": 71913832, "body": "First you have to tell us what an allocator in C is."}, {"owner": {"reputation": 37, "user_id": 6054674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1502f7a6f4716e40bbf87163eb7ba43d?s=128&d=identicon&r=PG&f=1", "display_name": "YINGYING", "link": "https://stackoverflow.com/users/6054674/yingying"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1487737120, "post_id": 42382524, "comment_id": 71914003, "body": "maybe I should say heap allocator ?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1487737538, "post_id": 42382524, "comment_id": 71914115, "body": "And what do you consider the &quot;uninitialized data segment&quot; to be? If you are talking about the loader artefact, then basically the answer is &quot;no&quot;, but it is not really well-formed because once the program has been loaded, that &quot;segment&quot; is no longer visible as such."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1487745173, "post_id": 42382524, "comment_id": 71916975, "body": "Reading between the lines, the answer is &#39;No&#39;.  The uninitialized data segment, aka the BSS segment, is for statically allocated variables.  It all has a use.  Unless your allocator code creates a chunk of space in the BSS and only uses what it created, it is not allowed to use the BSS."}], "answers": [{"tags": [], "owner": {"reputation": 22505, "user_id": 1411457, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XqssD.png?s=128&g=1", "display_name": "harmic", "link": "https://stackoverflow.com/users/1411457/harmic"}, "is_accepted": false, "score": 2, "last_activity_date": 1487740549, "creation_date": 1487740549, "answer_id": 42383244, "question_id": 42382524, "link": "https://stackoverflow.com/questions/42382524/can-an-allocator-use-the-uninitialized-data-segment-to-satisfy-heap-requests-if/42383244#42383244", "title": "Can an allocator use the uninitialized data segment to satisfy heap requests if needed?", "body": "<p>The term \"memory allocator\" does not have any meaning in the standards that define the C language. They do, however, define a set of \"Memory Management Functions\" that the C Runtime library must provide, so I assume it is these functions you are asking about.</p>\n\n<p>The standards also don't define where or even how the memory is allocated from, just that functions <code>malloc</code>, <code>calloc</code>, <code>realloc</code> and <code>free</code> must exist and have specified semantics. So, it is up to the implementation to decide where to allocate the memory from.</p>\n\n<p>The term \"uninitialized data segment\" generally refers to a section of a compiled executable file that specifies that the loader should reserve an amount of memory for the program to use.</p>\n\n<p>In all the implementations I am aware of (or at least those where the term \"uninitialized data segment\" has meaning), that section is used for uninitialized static variables.</p>\n\n<p>In most implementations, the C Runtime will form the heap by making calls to the OS kernel to obtain block(s) of memory, which it will then allocate to the program.</p>\n\n<p>There is a good description of process memory layout in Linux <a href=\"http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 37, "user_id": 6054674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1502f7a6f4716e40bbf87163eb7ba43d?s=128&d=identicon&r=PG&f=1", "display_name": "YINGYING", "link": "https://stackoverflow.com/users/6054674/yingying"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487740549, "creation_date": 1487736387, "question_id": 42382524, "link": "https://stackoverflow.com/questions/42382524/can-an-allocator-use-the-uninitialized-data-segment-to-satisfy-heap-requests-if", "title": "Can an allocator use the uninitialized data segment to satisfy heap requests if needed?", "body": "<p>I'm new to C, and I am confused about what allocator can do in C. </p>\n\n<p>Just as the title asked, Can an allocator use the uninitialized data segment to satisfy heap requests if needed?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1487735654, "post_id": 42382397, "comment_id": 71913616, "body": "Usually, <code>length&#47;2</code> is the midpoint."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1487735793, "post_id": 42382397, "comment_id": 71913647, "body": "You forgot to ask a question, so it&#39;s not clear what help you need. Please at least post some code with slot where the code to find the midpoint would go."}], "answers": [{"comments": [{"owner": {"reputation": 748, "user_id": 2712374, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100001931048508/picture?type=large", "display_name": "Delali", "link": "https://stackoverflow.com/users/2712374/delali"}, "edited": false, "score": 0, "creation_date": 1487736409, "post_id": 42382465, "comment_id": 71913807, "body": "Thanks! This answers my question. I don&#39;t know why i got the down votes though. But thanks for your answer."}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 748, "user_id": 2712374, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100001931048508/picture?type=large", "display_name": "Delali", "link": "https://stackoverflow.com/users/2712374/delali"}, "edited": false, "score": 0, "creation_date": 1487736519, "post_id": 42382465, "comment_id": 71913841, "body": "You are welcome. I didn&#39;t downvote your question. But don&#39;t worry. It happens sometimes."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487737253, "post_id": 42382465, "comment_id": 71914036, "body": "<code>sizeof(a)</code> here is the size of a pointer. <code>arrayMidpoint()</code> does not generate an acceptable result."}, {"owner": {"reputation": 3339, "user_id": 1043824, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/azcZl.png?s=128&g=1", "display_name": "inquisitive", "link": "https://stackoverflow.com/users/1043824/inquisitive"}, "reply_to_user": {"reputation": 748, "user_id": 2712374, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100001931048508/picture?type=large", "display_name": "Delali", "link": "https://stackoverflow.com/users/2712374/delali"}, "edited": false, "score": 1, "creation_date": 1487737687, "post_id": 42382465, "comment_id": 71914147, "body": "@delali, did you check if this code works? I am skeptical as an array passed as parameter is treated as pointer. So <code>sizeof(a)</code> imo should return size of a pointer and not suze of the array. But i do not have a computer nearby to test it. Please check."}, {"owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487738066, "post_id": 42382465, "comment_id": 71914250, "body": "@chux, you are right. An array in the function argument is treated as a pointer and hence <code>sizeof</code> on it returns the size of a pointer, not the total size of all the elements of the original array. I have updated my answer."}, {"owner": {"reputation": 748, "user_id": 2712374, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100001931048508/picture?type=large", "display_name": "Delali", "link": "https://stackoverflow.com/users/2712374/delali"}, "reply_to_user": {"reputation": 3339, "user_id": 1043824, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/azcZl.png?s=128&g=1", "display_name": "inquisitive", "link": "https://stackoverflow.com/users/1043824/inquisitive"}, "edited": false, "score": 0, "creation_date": 1487744502, "post_id": 42382465, "comment_id": 71916679, "body": "@inquisitive yeah. I realized that problem and fixed it accordingly. I only wanted to know the method for getting an array midpoint."}], "tags": [], "owner": {"reputation": 8660, "user_id": 5749570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2d0247d580de0aae4511d84551f10?s=128&d=identicon&r=PG&f=1", "display_name": "VHS", "link": "https://stackoverflow.com/users/5749570/vhs"}, "is_accepted": true, "score": 2, "last_activity_date": 1487737997, "last_edit_date": 1487737997, "creation_date": 1487736052, "answer_id": 42382465, "question_id": 42382397, "link": "https://stackoverflow.com/questions/42382397/find-the-midpoint-of-an-array-in-c/42382465#42382465", "title": "Find the midpoint of an array in c", "body": "<p>As per your problem description, regardless of whether your array has even or odd number of elements, the middle element index is always length/2.</p>\n\n<pre><code>int main() {\n  int a[] = {2,5,7,23,1,8,3,8,2};\n  //Figure out the size of the array \n   int n = sizeof(a) / sizeof(int);\n   printf(\"The mid point is %d\", a[n/2]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 2, "last_activity_date": 1487739542, "creation_date": 1487739542, "answer_id": 42383052, "question_id": 42382397, "link": "https://stackoverflow.com/questions/42382397/find-the-midpoint-of-an-array-in-c/42383052#42383052", "title": "Find the midpoint of an array in c", "body": "<p>You need to:</p>\n\n<ul>\n<li>Find the size <code>n</code> of the array. Usually done by <code>sizeof array / sizeof array[0]</code>.</li>\n<li>Index <code>array[n/2]</code> to find midpoint.</li>\n</ul>\n\n<p>Here is an example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define SIZE(x) (sizeof x / sizeof x[0])\n\nint main(void) {\n    int array1[] = {2,5,7,23,1,8,3,8,2};\n    int array2[] = {2,6,9,231,62,3};\n\n    printf(\"First midpoint = %d\\n\", array1[SIZE(array1)/2]);\n    printf(\"Second midpoint = %d\\n\", array2[SIZE(array2)/2]);\n\n    return 0;\n}\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>First midpoint = 1\nSecond midpoint = 231\n</code></pre>\n"}], "owner": {"reputation": 748, "user_id": 2712374, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/100001931048508/picture?type=large", "display_name": "Delali", "link": "https://stackoverflow.com/users/2712374/delali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9337, "favorite_count": 0, "closed_date": 1487770857, "accepted_answer_id": 42382465, "answer_count": 2, "score": -1, "last_activity_date": 1487739542, "creation_date": 1487735561, "question_id": 42382397, "link": "https://stackoverflow.com/questions/42382397/find-the-midpoint-of-an-array-in-c", "closed_reason": "Needs details or clarity", "title": "Find the midpoint of an array in c", "body": "<p>I want to find the midpoint of an array in C say: <code>{2,5,7,23,1,8,3,8,2}</code> with an expected result of 1. Also if the array is even in the case of <code>{2,6,9,231,62,3}</code>, I expect to get any of the middle values - <code>9</code> or <code>231</code> in this case.</p>\n\n<p>I am completely unsure how to go about this.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1487735450, "post_id": 42382348, "comment_id": 71913562, "body": "What did you find out when you debugged it?"}, {"owner": {"reputation": 31, "user_id": 6679292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e736ec8a5f94c1848117803a6cd03390?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/6679292/ashish"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1487738867, "post_id": 42382348, "comment_id": 71914468, "body": "@John3136 i could not find anything. program just goes out of the do while loop after 13 iterations"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1487740854, "post_id": 42382348, "comment_id": 71915212, "body": "Because stat == 1 or because of feof?"}], "answers": [{"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1487779023, "last_edit_date": 1495542719, "creation_date": 1487779023, "answer_id": 42396354, "question_id": 42382348, "link": "https://stackoverflow.com/questions/42382348/searching-data-from-dat-file-using-c/42396354#42396354", "title": "searching data from dat file using c", "body": "<p>Your main problem is that your store binary data where system expect you to store text, <a href=\"https://stackoverflow.com/q/2174889/1212012\">see this question</a>.</p>\n\n<ul>\n<li><code>fopen(..., \"a+\")</code>; open a file for text reading, but you store binary data in it</li>\n</ul>\n\n<p>You have some other issues: </p>\n\n<ul>\n<li>You don't use <code>feof</code> the <a href=\"https://stackoverflow.com/q/5431941/1212012\">right way</a></li>\n<li>Your main function does not return value,</li>\n<li>You do not test the value of <code>n</code> or <code>number</code>.</li>\n</ul>\n\n<p>Corrected code should looks like:</p>\n\n<pre><code>//  database for storing random values in file and making search operation\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct\n{\n    int rollNo;\n    int regdNo;\n    int salary;\n    int status;\n} record;\n\nint main(void) {\n    int i, n;\n    record det;\n\n    /* open the file in BINARY mode */\n    FILE* fp1 = fopen(\"random.dat\" , \"a+b\");\n    if (fp1 == NULL) {\n        printf(\"error in opening file : \\n\");\n        return 1;\n    }\n\n    printf(\"enter the no of data to be stored\\n\");\n    scanf(\"%d\", &amp;n);\n\n    for (i = 0; i &lt; n; i++) {\n        det.rollNo = rand();\n        det.regdNo = rand();\n        det.salary = rand();\n        det.status = (rand() % 10) + 1;\n\n        if (1 != fwrite(&amp;det, sizeof det, 1, fp1)) {\n            perror(\"fwrite\");\n            return 2;\n        }\n    }\n\n    printf(\"The last roll no of student stored in list: %d\\n\", det.rollNo);\n\n    int stat = 0, countNumber = 0;\n    record buffer;\n    int number;\n\n    printf(\"enter the roll number to be searched\\n\");\n    scanf(\"%d\", &amp;number);\n\n    fseek(fp1, 0, SEEK_SET); // rewind would have done the job\n\n    while (1) {\n        countNumber++;        // counts number of times the file is searched\n        if (1 != fread(&amp;buffer, sizeof buffer, 1, fp1)) {\n            perror(\"fread\");\n            return 3;              \n        }\n        if (buffer.rollNo == number) {\n            stat = 1;\n            break;\n        }\n    }\n    printf(\"\\n\");\n    if (stat) {\n        printf(\"succesfully found at %d\\n\", countNumber);\n        printf(\"    roll number %d\\n   regd number %d\\n   salary %d\\n   status %d\\n\", buffer.rollNo, buffer.regdNo, buffer.salary, buffer.status);\n    }\n    else\n        printf(\"there is no such roll number %d in the list\\nlength of list : %d\\n\", number, countNumber);\n\n\n    /* warning: file is not closed in case of error... */\n    fclose(fp1);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 6679292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e736ec8a5f94c1848117803a6cd03390?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/6679292/ashish"}, "edited": false, "score": 0, "creation_date": 1487843541, "post_id": 42397468, "comment_id": 71970403, "body": "thanks @chqrlie it worked, opened it as a binary file."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1487800409, "last_edit_date": 1487800409, "creation_date": 1487781981, "answer_id": 42397468, "question_id": 42382348, "link": "https://stackoverflow.com/questions/42382348/searching-data-from-dat-file-using-c/42397468#42397468", "title": "searching data from dat file using c", "body": "<p>The code works fine on my system, but there are possible problems:</p>\n\n<ul>\n<li><p>you open the binary file in default mode, possibly text mode. Use <code>\"ab+\"</code> instead.</p></li>\n<li><p>the file is open in append mode. If it contains invalid data, especially if its size is not a multiple of the size of the record size, appended records will not be properly aligned, and thus will not be read back correctly.</p></li>\n<li><p>test the success of the <code>scanf()</code>, <code>fwrite()</code> and <code>fread()</code> calls</p></li>\n<li><p>the end of file test is incorrect.</p></li>\n</ul>\n\n<p>Here is an improved version:</p>\n\n<pre><code>//  database for storing random values in file and making search operation\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct {\n    int rollNo;\n    int regdNo;\n    int salary;\n    int status;\n} record;\n\nint main(void) {\n    int i, n;\n    record det;\n    int recordsize = sizeof(det);     // size of record\n\n    FILE *fp1 = fopen(\"random.dat\", \"ab+\");\n    if (fp1 == NULL) {\n        printf(\"error in opening file : \\n\");\n        return 1;\n    }\n\n    printf(\"enter the no of data to be stored\\n\");\n    if (scanf(\"%d\", &amp;n) != 1)\n        return 1;\n\n    for (i = 0; i &lt; n; i++) {\n        det.rollNo = rand();\n        det.regdNo = rand();\n        det.salary = rand();\n        det.status = (rand() % 10) + 1;\n\n        if (fwrite(&amp;det, recordsize, 1, fp1) != 1) {\n            perror(\"cannot write record\");\n            fclose(fp1);\n            return 2;\n        }\n    }\n\n    printf(\"The last roll no of student stored in list: %d\\n\", det.rollNo);\n\n    int stat = 0, countNumber = 0;\n    record buffer;\n    int number;\n\n    printf(\"enter the roll number to be searched\\n\");\n    if (scanf(\"%d\", &amp;number) != 1)\n        return 1;\n\n    fseek(fp1, 0, SEEK_SET);   // move file position indicator to beginning of file\n    while (fread(&amp;buffer, recordsize, 1, fp1) == 1) {\n        countNumber++;        // counts number of times the file is searched\n        if (buffer.rollNo == number) {\n            stat = 1;\n            break;\n        }\n    }\n\n    printf(\"\\n\");\n    if (stat) {\n        printf(\"successfully found at %d\\n\", countNumber);\n        printf(\"   roll number %d\\n\"\n               \"   regd number %d\\n\"\n               \"   salary %d\\n\"\n               \"   status %d\\n\",\n               buffer.rollNo, buffer.regdNo, buffer.salary, buffer.status);\n    } else {\n        printf(\"there is no such roll number %d in the list\\n\"\n               \"length of list : %d\\n\",\n               number, countNumber);\n    }\n    fclose(fp1);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6679292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e736ec8a5f94c1848117803a6cd03390?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/6679292/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1137, "favorite_count": 0, "accepted_answer_id": 42397468, "answer_count": 2, "score": 0, "last_activity_date": 1487800502, "creation_date": 1487735277, "last_edit_date": 1487800502, "question_id": 42382348, "link": "https://stackoverflow.com/questions/42382348/searching-data-from-dat-file-using-c", "title": "searching data from dat file using c", "body": "<p>The following program creates a new dat file and stores random data. Then one of the values is searched from the file and printed.</p>\n\n<p>The problem is data up to 13 items are searched and the program exits. As shown in following picture 100 inputs are stored and only 13 items are searched. What is the solution?</p>\n\n<pre><code>//  database for storing random values in file and making search operation\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct {\n    int rollNo;\n    int regdNo;\n    int salary;\n    int status;\n} record;\n\nint main(void) {\n    int i, n;\n    record det;\n    int recordsize = sizeof(det);     // size of record\n\n    FILE *fp1 = fopen(\"random.dat\", \"a+\");\n    if (fp1 == NULL) {\n        printf(\"error in opening file : \\n\");\n        return 1;\n    }\n\n    printf(\"enter the no of data to be stored\\n\");\n    scanf(\"%d\", &amp;n);\n\n    for (i = 0; i &lt; n; i++) {\n        det.rollNo = rand();\n        det.regdNo = rand();\n        det.salary = rand();\n        det.status = (rand() % 10) + 1;\n\n        fwrite(&amp;det, recordsize, 1, fp1);\n    }\n\n    printf(\"The last roll no of student stored in list: %d\\n\", det.rollNo);\n\n    int stat = 0, countNumber = 0;\n    record buffer;\n    int number;\n\n    printf(\"enter the roll number to be searched\\n\");\n    scanf(\"%d\", &amp;number);\n\n    fseek(fp1, 0, SEEK_SET);  // move file position indicator to beginning of file\n    do {\n        countNumber++;        // counts number of times the file is searched\n        fread(&amp;buffer, recordsize, 1, fp1);\n        if (buffer.rollNo == number) {\n            stat = 1;\n            break;\n        }\n    } while (!feof(fp1));\n\n    printf(\"\\n\");\n    if (stat) {\n        printf(\"succesfully found at %d\\n\", countNumber);\n        printf(\"    roll number %d\\n   regd number %d\\n   salary %d\\n   status %d\\n\",\n               buffer.rollNo, buffer.regdNo, buffer.salary, buffer.status);\n    } else\n        printf(\"there is no such roll number %d in the list\\nlength of list : %d\\n\",\n               number, countNumber);\n\n    fclose(fp1);\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fCsq1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fCsq1.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "glib", "gobject"], "answers": [{"tags": [], "owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "is_accepted": false, "score": 0, "last_activity_date": 1487952173, "creation_date": 1487952173, "answer_id": 42443100, "question_id": 42382139, "link": "https://stackoverflow.com/questions/42382139/how-to-work-with-serial-pins-when-creating-a-custom-gsource/42443100#42443100", "title": "How to work with serial pins when creating a custom gsource?", "body": "<ol>\n<li><code>GSource</code> needs to handle the file descriptor as it needs to be able to pass it to <code>poll()</code> for the low-level event polling.</li>\n<li>Your question is unclear. Ignore what? Implement what?</li>\n</ol>\n\n<p>I suspect you should be able to just use a <code>GUnixFDSource</code> created with <a href=\"https://developer.gnome.org/glib/stable/glib-UNIX-specific-utilities-and-integration.html#g-unix-fd-source-new\" rel=\"nofollow noreferrer\"><code>g_unix_fd_source_new()</code></a> to watch for input on the terminal FD. In its callback (<code>g_source_set_callback()</code>) you should be able to read from the FD using the normal terminal I/O functions. The <code>GSource</code> is effectively just there to integrate the FD into a global event loop (the <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html\" rel=\"nofollow noreferrer\"><code>GMainContext</code></a>).</p>\n"}], "owner": {"reputation": 41, "user_id": 4521408, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ypVOWf5pu4I/AAAAAAAAAAI/AAAAAAAAAKs/epy5PtP5p8E/photo.jpg?sz=128", "display_name": "Danilo Mendes", "link": "https://stackoverflow.com/users/4521408/danilo-mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487952173, "creation_date": 1487734024, "last_edit_date": 1487762010, "question_id": 42382139, "link": "https://stackoverflow.com/questions/42382139/how-to-work-with-serial-pins-when-creating-a-custom-gsource", "title": "How to work with serial pins when creating a custom gsource?", "body": "<p>I'm trying to write a subclass of GSource to work with serial port events. The way I found to do that is using the POSIX terminal interface, that work using file descriptors. For any reason, the Main Event Loop of GLib has a special way to deal with this variable. </p>\n\n<p>As the <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#GSourceFuncs\" rel=\"nofollow noreferrer\" title=\"official documentation says\">official documentation says</a>, there is two GSource abstract functions that is used to prepare to dispatch, one to run before the pool of fds and one after. This shows that probably is important let GLib handle the file descriptors instead implement this in my own prepare function, but <a href=\"https://developer.gnome.org/glib/stable/glib-IO-Channels.html#GIOCondition\" rel=\"nofollow noreferrer\">there is no condition</a> like \"pin state changed\" to work with serial port pins. About this I have some questions.</p>\n\n<ol>\n<li><p>Why the choice from GLib team to make the library handle the file descriptor?</p></li>\n<li><p>Can I get some issue if I just ignore it and implement this in my own prepare function?</p></li>\n</ol>\n"}, {"tags": ["c", "multithreading", "memory", "openmp", "numa"], "comments": [{"owner": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1487737306, "post_id": 42381936, "comment_id": 71914046, "body": "Have you considered using message passing (MPI) instead? With MPI you have more explicit control over memory layout and communication between processes."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 1, "creation_date": 1487764439, "post_id": 42381936, "comment_id": 71928813, "body": "I think you are mixing up NUMA, caches and data locality. A detailed answer to your question would be very broad <b>and</b> require extensive knowledge of the NUMA memory allocation policies on your system <b>and</b> require more details on the memory access pattern in your app. A general answer is to keep your code high level until a measurement reveals a significant performance issue. Making a general recommendation without basing it on a specific measurement result is unproductive. I am also unsure why you would even need/want to accumulate the results if data resides in shared memory anyway."}, {"owner": {"reputation": 181, "user_id": 2880968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000439636982/picture?type=large", "display_name": "Shaun Holtzman", "link": "https://stackoverflow.com/users/2880968/shaun-holtzman"}, "edited": false, "score": 0, "creation_date": 1487792695, "post_id": 42381936, "comment_id": 71948696, "body": "I added an edit to my original question to show what I initially tried, which was just a simple OpenMP for loop where I saw a decrease in performance when compared to running the subtraction serially."}, {"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1487792843, "post_id": 42381936, "comment_id": 71948770, "body": "is the performance low or this is just a premature optimization?"}, {"owner": {"reputation": 181, "user_id": 2880968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000439636982/picture?type=large", "display_name": "Shaun Holtzman", "link": "https://stackoverflow.com/users/2880968/shaun-holtzman"}, "edited": false, "score": 0, "creation_date": 1487793035, "post_id": 42381936, "comment_id": 71948884, "body": "If I do a simple OpenMP for loop (edited in an example to my original question) I see worse performance than if I just ran it serially. This is not just the case with this matrix subtraction I&#39;m doing, I&#39;ve seen the same case with, for example, matrix multiplication, but I am trying to start off with something as simple as possible. When I break up the allocation into private arrays for each thread, I see an increased performance, but now each thread has it&#39;s own array of results rather than one accumulated result."}, {"owner": {"reputation": 181, "user_id": 2880968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000439636982/picture?type=large", "display_name": "Shaun Holtzman", "link": "https://stackoverflow.com/users/2880968/shaun-holtzman"}, "edited": false, "score": 0, "creation_date": 1487793128, "post_id": 42381936, "comment_id": 71948932, "body": "I&#39;m not sure if this approach is adequate, and am seeking some pointers/example if possible on how to find out what the bottleneck is/could be and how to go about alleviating it."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "edited": false, "score": 0, "creation_date": 1487798590, "post_id": 42381936, "comment_id": 71952052, "body": "@ShaunHoltzman: For NUMA; you want the RAM being used by a CPU to &quot;close&quot; to that CPU. Allocating all the RAM in the same process using something as crippled as <code>malloc()</code> can not possibly achieve that."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1487837222, "post_id": 42381936, "comment_id": 71966446, "body": "I don&#39;t know about the Maestro processor or board. Can you provide a link or two describing this?"}, {"owner": {"reputation": 181, "user_id": 2880968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000439636982/picture?type=large", "display_name": "Shaun Holtzman", "link": "https://stackoverflow.com/users/2880968/shaun-holtzman"}, "edited": false, "score": 0, "creation_date": 1487869388, "post_id": 42381936, "comment_id": 71989363, "body": "Sure, it&#39;s kinda hard to find documents describing the Maestro. It&#39;s a radiation hardened space-grade processor based on the Tilera TILE64 processor. This is probably the best detail I can find about the Maestro: <a href=\"http://www.dtic.mil/cgi-bin/GetTRDoc?AD=ADA600320\" rel=\"nofollow noreferrer\">dtic.mil/cgi-bin/GetTRDoc?AD=ADA600320</a>. Most of the documentation that I use about development on the board is from datasheets for the Tilera TILE64."}, {"owner": {"reputation": 181, "user_id": 2880968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000439636982/picture?type=large", "display_name": "Shaun Holtzman", "link": "https://stackoverflow.com/users/2880968/shaun-holtzman"}, "reply_to_user": {"reputation": 1712, "user_id": 1580195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e6776cfbd877dfd97a6eeffd080c9b?s=128&d=identicon&r=PG&f=1", "display_name": "simpel01", "link": "https://stackoverflow.com/users/1580195/simpel01"}, "edited": false, "score": 0, "creation_date": 1487869911, "post_id": 42381936, "comment_id": 71989733, "body": "@simpel01 I have been considering giving MPI a try. It&#39;s probably what I am going to try next if I can&#39;t figure out why OpenMP is not giving me any speedup when using a basic for loop parallelization."}], "answers": [{"tags": [], "owner": {"reputation": 1582, "user_id": 189297, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b98a34931025b9d4a04b33b38e7f8504?s=128&d=identicon&r=PG", "display_name": "Aaron Altman", "link": "https://stackoverflow.com/users/189297/aaron-altman"}, "is_accepted": false, "score": 0, "last_activity_date": 1560560403, "creation_date": 1560560403, "answer_id": 56606555, "question_id": 42381936, "link": "https://stackoverflow.com/questions/42381936/openmp-memory-allocation-on-numa-processor/56606555#56606555", "title": "OpenMP Memory Allocation on NUMA Processor", "body": "<p>On a quick search and scan of the TILE64 datasheet, it doesn't look like the architecture exposes performance counters like what you'd use on x86 via tools like oprofile, VTune or xperf.  Without those, you'll have to devise some experiments of your own to iteratively narrow down on what portion of the code is hot and why - in the absence of microarchitectural docs along with tools to indicate how your code is exercising the hardware, a bit of a reverse engineering task.</p>\n\n<p>Some ideas about where to start on that:</p>\n\n<ol>\n<li>Do some scaling experiments.  Is there a knee in the curve where going over a certain problem size or number of threads has a big effect on the overall performance?  Does that number hint at some clear relationship with the size of a certain level in the memory hierarchy, or a dimension of the grid of processors, or similar?</li>\n<li>Record execution times at a few points through the program.  It would probably be useful to know, for example, at a high level how much time is spent on the mallocs vs. the first loop vs. the second.</li>\n<li>\"I have achieved speedup doing it this way along with pinning the threads with OMP_PROC_BIND=true but I'm worried that accumulating the individual results into a final array may cause overhead that would negate the speedup.\" - this worry is also empirically testable, especially if you're working on a large enough problem size that your timer accuracy as in (2) is not an issue for isolating time taken for the gather step vs. the part that's completely parallelizable.</li>\n<li>Try a different operation - say, addition or element-wise division instead of subtraction and see if that changes the results.  On many architectures different arithmetic operations have different latency and throughput.  If you looked up and found that that was the case for the TILE64, making a change like this and instrumenting the runtime of your second example might tell you something useful about how much of the time spent over running it serially actually has to do with data locality issues vs. startup time or other overhead related to the OpenMP runtime that might have more to do in the overall results with its relationship to a small problem size than with the properly parallel part of the parallel implementation actually running slower.</li>\n<li>You could examine generated assembly.  The assumption that the compiler would do basically the same things in the examples you've posted seems reasonable, but doesn't necessarily hold as strongly as you would want it to when looking at odd performance.  Maybe there's something about the code size or layout that changes with/without OpenMP or when moving from one parallel approach to another, like use of instruction cache, availability of reservation station or ROB entries (if the TILE64 has those things)...?  Who knows, until you look.</li>\n</ol>\n"}], "owner": {"reputation": 181, "user_id": 2880968, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100000439636982/picture?type=large", "display_name": "Shaun Holtzman", "link": "https://stackoverflow.com/users/2880968/shaun-holtzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1560560403, "creation_date": 1487732639, "last_edit_date": 1495542724, "question_id": 42381936, "link": "https://stackoverflow.com/questions/42381936/openmp-memory-allocation-on-numa-processor", "title": "OpenMP Memory Allocation on NUMA Processor", "body": "<p>I am currently trying to speed up a simple matrix subtraction benchmark with OpenMP on the Maestro processor, which has a NUMA architecture and is based on the Tilera Tile64 processor. The Maestro board has 49 processors arranged in a two-dimensional array in a 7x7 configuration. Each core has its own L1 and L2 cache. A layout of the board can be seen here: <a href=\"https://i.imgur.com/naCWTuK.png\" rel=\"nofollow noreferrer\">http://i.imgur.com/naCWTuK.png</a></p>\n\n<p>I am new to the idea of writing applications that are 'NUMA-aware', but the main consensus from what I've read is that data locality is a big part of maximizing performance. When parallelizing code among the cores, I should keep the data being used local to the thread doing the processing as possible. </p>\n\n<p>For this matrix subtraction benchmark (C[i] = A[i] - B[i]), I thought it would be a good idea to allocate each thread its own private A, B, and C arrays with the size being the total work size divided by the number of threads. So for example if the total size of the arrays were 6000*6000 and I was trying to parallelize it across 20 threads, I would allocate private arrays with size (6000*6000)/20. Each thread would do this subtraction on its own private array and then I would gather the results back into a final array of the total size 6000*6000. For example (without the gathering of results from each thread into a final array):</p>\n\n<pre><code>int threads = 20;\nint size = 6000;\nuint8_t *C_final = malloc(sizeof(uint8_t)*(size*size));\n#pragma omp parallel num_threads(threads) private(j)\n{\n     uint8_t *A_priv = malloc(sizeof(uint8_t)*((size*size)/threads));\n     uint8_t *B_priv = malloc(sizeof(uint8_t)*((size*size)/threads));\n     uint8_t *C_priv = malloc(sizeof(uint8_t)*((size*size)/threads));\n\n     for(j=0; j&lt;((size*size)/threads); j++)\n       {\n            A_priv[j]=100;\n            B_priv[j]=omp_get_thread_num();\n            C_priv[j]=0;\n       }\n\n     for(j=0; j&lt;((size*size)/threads); j++)\n       {\n           C_priv[j] = A_priv[j]-B_priv[j];\n       }\n}\n</code></pre>\n\n<p>The initial values for the arrays are arbitrary, I just have omp_get_thread_num() in there so I get different values in C_priv from each thread. I'm currently experimenting with the User Dynamic Network that the board has that provides hardware to route packets between CPUs in order to accumulate all of the individual thread results into a final resulting array.</p>\n\n<p>I have achieved speedup doing it this way along with pinning the threads with OMP_PROC_BIND=true but I'm worried that accumulating the individual results into a final array may cause overhead that would negate the speedup.</p>\n\n<p>Is this a proper way to go about this type of problem? What type of techniques should I look into for getting speedup on a NUMA architecture for a problem like this that uses OpenMP? </p>\n\n<p>Edit:</p>\n\n<p>For clarification, this is what I originally tried and where I noticed a slower execution time than if I just ran the code serially:</p>\n\n<pre><code>     int threads = 20;\n     int size = 6000;\n     uint8_t *A_priv = malloc(sizeof(uint8_t)*(size*size));\n     uint8_t *B_priv = malloc(sizeof(uint8_t)*(size*size));\n     uint8_t *C_priv = malloc(sizeof(uint8_t)*(size*size));\n\n     int i;\n     for(i=0; i&lt;(size*size); i++)\n     {\n       A[i] = 10;\n       B[i] = 5;\n       C[i] = 0;\n     }\n\n     #pragma omp parallel for num_threads(threads)\n     for(i=0; i&lt;(size*size); i++)\n     {\n       C[i] = A[i] - B[i];\n     }\n</code></pre>\n\n<p>After seeing that I was getting a slower execution time when using OpenMP, I tried looking into why that is the case. It seemed as though data locality was the issue. This assumption is based on what I have read up about NUMA architectures.</p>\n\n<p>I am having a hard time trying to figure out how to alleviate the bottlenecks that are slowing it down. I found some help with similar questions like this: <a href=\"https://stackoverflow.com/questions/10850155/openmp-for-schedule\">OpenMP: for schedule</a> where it walks about allocating data to each thread so each thread works on its local data.</p>\n\n<p>I just feel like something as simple as a matrix subtraction should not be difficult to get increased performance when using OpenMP. I'm not sure how to go about figuring out what exactly the bottleneck is and how to alleviate it.</p>\n"}, {"tags": ["c", "windows", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": true, "score": 7, "last_activity_date": 1487751659, "last_edit_date": 1487751659, "creation_date": 1487732467, "answer_id": 42381907, "question_id": 42381653, "link": "https://stackoverflow.com/questions/42381653/win32-anonymous-inherited-pipes-dont-close-on-subprocess-exit/42381907#42381907", "title": "Win32: Anonymous inherited pipes don&#39;t close on subprocess exit", "body": "<p>You must close <code>midi_process_in_reader</code> and <code>midi_process_out_writer</code> after calling <code>CreateProcess()</code>. Your issue is not because the \"inherited pipes don't close on subprocess exit\", it is because you forgot to close the pipes in your own process.</p>\n"}], "owner": {"reputation": 1184, "user_id": 91642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8593b1c82e9ed56a5c2fed6ac457491b?s=128&d=identicon&r=PG", "display_name": "AlexMax", "link": "https://stackoverflow.com/users/91642/alexmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 1, "accepted_answer_id": 42381907, "answer_count": 1, "score": 0, "last_activity_date": 1487751659, "creation_date": 1487730759, "question_id": 42381653, "link": "https://stackoverflow.com/questions/42381653/win32-anonymous-inherited-pipes-dont-close-on-subprocess-exit", "title": "Win32: Anonymous inherited pipes don&#39;t close on subprocess exit", "body": "<p>I have been attempting to use anonymous pipes to communicate with a spawned subprocess via their stdin and stdout, similar to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">this example</a>.  So far, so good - I communicate with it via WriteFile(), and I read data from it via PeekNamedPipe() and then ReadFile().  Life is good.</p>\n\n<p>However, I'm encountering something distressing - when the subprocess closes unexpectedly, a parent process call to WriteFile() never seems to return any sort of failure state indicating that the pipe has closed, and my parent process happily continues chugging along writing data until I overflow the pipe's internal buffer and block forever.</p>\n\n<p>My setup code looks like this:</p>\n\n<pre><code>// Set up pipes\nSECURITY_ATTRIBUTES sec_attrs;\nmemset(&amp;sec_attrs, 0, sizeof(SECURITY_ATTRIBUTES));\nsec_attrs.nLength = sizeof(SECURITY_ATTRIBUTES);\nsec_attrs.bInheritHandle = TRUE;\nsec_attrs.lpSecurityDescriptor = NULL;\n\nif (!CreatePipe(&amp;midi_process_in_reader, &amp;midi_process_in_writer, &amp;sec_attrs, 0))\n{\n    DEBUGOUT(\"Could not initialize midiproc stdin\");\n    return false;\n}\n\nif (!SetHandleInformation(midi_process_in_writer, HANDLE_FLAG_INHERIT, 0))\n{\n    DEBUGOUT(\"Could not disinherit midiproc stdin\");\n    return false;\n}\n\nif (!CreatePipe(&amp;midi_process_out_reader, &amp;midi_process_out_writer, &amp;sec_attrs, 0))\n{\n    DEBUGOUT(\"Could not initialize midiproc stdout/stderr\");\n    return false;\n}\n\nif (!SetHandleInformation(midi_process_out_reader, HANDLE_FLAG_INHERIT, 0))\n{\n    DEBUGOUT(\"Could not disinherit midiproc stdin\");\n    return false;\n}\n\n// Launch the subprocess\nPROCESS_INFORMATION proc_info;\nmemset(&amp;proc_info, 0, sizeof(proc_info));\n\nSTARTUPINFO startup_info;\nmemset(&amp;startup_info, 0, sizeof(startup_info));\nstartup_info.cb = sizeof(startup_info);\nstartup_info.hStdInput = midi_process_in_reader;\nstartup_info.hStdOutput = midi_process_out_writer;\nstartup_info.dwFlags = STARTF_USESTDHANDLES;\n\nBOOL ok = CreateProcess(TEXT(module), TEXT(cmdline), NULL, NULL, TRUE,\n    CREATE_NEW_CONSOLE, NULL, NULL, &amp;startup_info, &amp;proc_info);\n</code></pre>\n\n<p>The only difference that I can see between the example and my code is that I don't hook up stderr - I want to keep it around for fprintf debugging.</p>\n\n<p>I am probably going to need to go with some sort of \"heartbeat\" message in the long run, because the subprocess could become a zombie and be completely alive and keep their handles open but never read off of stdin, which would wedge things in a different way.  However, I want to make sure that I'm not missing something in my understanding of anonymous pipes on Windows.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1487729769, "post_id": 42381453, "comment_id": 71911995, "body": "Calling <code>ValidateFilename()</code> on an uninitialized variable is undefined behavior. Also adding <code>\\n</code> to the <code>printf(filename)</code> might be useful."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1487729915, "post_id": 42381453, "comment_id": 71912032, "body": "you probably want to do <code>do { ... } while (ValidateFileName(fileName) != 0);</code>"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1487729934, "post_id": 42381453, "comment_id": 71912040, "body": "@John3136, there&#39;s a <code>&#39;\\n&#39;</code> in that because of its origin (<code>fgets</code> typically inserts that). This could be a problem."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 1, "creation_date": 1487730181, "post_id": 42381453, "comment_id": 71912113, "body": "@Seb You can tell I&#39;m not using <code>fgets</code> these days ;-) It is certainly <i>A</i> problem since the <code>strcmp()</code>s don&#39;t have a <code>\\n</code>..."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1487730450, "post_id": 42381453, "comment_id": 71912191, "body": "Printing user entered strings like <code>printf(fileName)</code> is not a good idea, as <code>printf()</code> will try to handle format specifiers in the string.  Try <code>printf(&quot;%s&quot;, fileName)</code> or use a different function instead..."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1487815634, "post_id": 42381453, "comment_id": 71958354, "body": "@John3136 Likewise; it&#39;s a tedious function to use properly, as it ivolves reallocation or truncation (discarding user input) when it fails to read the entirety of a line. I&#39;d rather design my program around <code>argv</code>-based user input as that involves neither, or failing that read character by character as that seems to come out clearer when reallocating..."}], "answers": [{"comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1487815996, "post_id": 42381723, "comment_id": 71958434, "body": "Not a very robust solution. How about when we get to &quot;File 11&quot; ? Part of the problem (see comments) is the &#39;\\n&#39; chars that are in one string but not the other."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1487971088, "post_id": 42381723, "comment_id": 72040529, "body": "I think it&#39;s robust, but not extensible. :)  It would be better to implement a <code>chomp</code> style function to get rid of the trailing <code>\\n</code>, but I thought this would be the quickest solution for the OP."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": true, "score": 0, "last_activity_date": 1487731249, "creation_date": 1487731249, "answer_id": 42381723, "question_id": 42381453, "link": "https://stackoverflow.com/questions/42381453/user-input-is-splitted-for-while-loop/42381723#42381723", "title": "User input is splitted for while loop", "body": "<p>You are comparing \"File 1\" to \"File 1\\n\".  Change your strcmp calls to strncmp calls, like this: <code>(strncmp(fileName, \"File 1\", strlen(\"File 1\")) == 0)</code></p>\n"}], "owner": {"reputation": 1779, "user_id": 3276954, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/94cd8cc10d3742b831b17c0db59d33c6?s=128&d=identicon&r=PG&f=1", "display_name": "Master", "link": "https://stackoverflow.com/users/3276954/master"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 42381723, "answer_count": 1, "score": 0, "last_activity_date": 1487731249, "creation_date": 1487729474, "question_id": 42381453, "link": "https://stackoverflow.com/questions/42381453/user-input-is-splitted-for-while-loop", "title": "User input is splitted for while loop", "body": "<p>I have a program that gets user input using <code>fgets</code>, but when the input has spaces it seems to be erratic.</p>\n\n<p>So when I input File 1 and then press the enter key, this is the output</p>\n\n<pre><code>`FilePlease enter your file Name`\n`1Please enter your file Name`\n</code></pre>\n\n<p>If I compare without spaces, it seems to work.</p>\n\n<pre><code>int MAX_NAME_SZ = 256;\nchar * fileName = malloc (MAX_NAME_SZ);\n\nwhile (ValidateFileName(fileName) != 0)\n{\n    printf(\"Please enter your file Name\\n\");\n    fgets (fileName, MAX_NAME_SZ, stdin);\n} \n\nint ValidateFileName(char * fileName)\n{\n    printf(fileName);\n    if  ((strcmp(fileName, \"File 1\") == 0) || (strcmp(fileName, \"File 2\") == 0) ||\n         (strcmp(fileName, \"File 3\") == 0) || (strcmp(fileName, \"File 4\") == 0) ||\n         (strcmp(fileName, \"File 5\") == 0))\n         return 0;\n     else\n        return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1487727343, "post_id": 42381081, "comment_id": 71911352, "body": "The only struct I see in the body of your function is <code>semTable</code>, but you do not show where it is created.  The incoming function argument includes <code>P1_Semaphore *sem</code>, but <code>sem</code> != <code>semTable</code>.  Fix your code snippet to include all relevant parts."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1487727416, "post_id": 42381081, "comment_id": 71911374, "body": "Are you sure you want to allocate 1 byte for <code>name</code>? It can hold just one character. And always post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1487775347, "post_id": 42381081, "comment_id": 71937029, "body": "What is <code>P1_Semaphore</code>? How is it different from <code>semaphore</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6004784, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1690912177852931/picture?type=large", "display_name": "Sean Gallagher", "link": "https://stackoverflow.com/users/6004784/sean-gallagher"}, "edited": false, "score": 0, "creation_date": 1487732535, "post_id": 42381238, "comment_id": 71912760, "body": "I guess I should have made it more clear. P1_Semaphore is different to semaphore. I need P1_semaphore to point to the semaphore"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 73, "user_id": 6004784, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1690912177852931/picture?type=large", "display_name": "Sean Gallagher", "link": "https://stackoverflow.com/users/6004784/sean-gallagher"}, "edited": false, "score": 0, "creation_date": 1487774098, "post_id": 42381238, "comment_id": 71936117, "body": "@SeanGallagher - The only time a <code>struct *pX</code> should point to <code>struct Y</code> is if they are instances of the same struct definition. See bottom of my answer for an edit explaining this."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1487778266, "last_edit_date": 1487778266, "creation_date": 1487728024, "answer_id": 42381238, "question_id": 42381081, "link": "https://stackoverflow.com/questions/42381081/trying-to-set-a-pointer-to-a-struct/42381238#42381238", "title": "Trying to set a pointer to a struct", "body": "<p>Your question is not perfectly clear as to what you are trying to do.  So, this answer addresses the following general topics in hopes they will assist:  </p>\n\n<p>1) Passing the address of a struct via a function, changing the values of the struct members, and accessing changed values in calling function.  (It is not the same as the one you show, but illustrates what you want to do.)<br>\n2) Creating instances and pointers to instances of a struct, then initializing.<br>\n3) Contains link to tutorial on self referencing structs. (as you are doing in your posted code)     </p>\n\n<pre><code>typedef struct {//struct definition created in global space, typedef'ed\n    char line[80]; //to read in the line\n    int slot;\n    char type[20];  //long enough for any types listed\n    int position;\n}SLOT;\nint modifyStruct(SLOT *slot);//prototype of demonstration function\n\nint main(void)\n{            \n    SLOT s;//create instance of SLOT local to main\n    int ret = modifyStruct(&amp;s);pass address of SLOT instance to change member values\n    printf(\"Line: %s\\n\", s.line);//show changed values\n    printf(\"Slot: %d\\n\", s.slot);\n    printf(\"type: %s\\n\", s.type);\n    printf(\"position: %s\\n\", s.position);\n\n    return 0;\n}\n\n\nint modifyStruct(SLOT *slot)\n{\n    strcpy(slot-&gt;line, \"lineA\");\n    slot-&gt;slot = 2;\n    strcpy(slot-&gt;type, \"large\");\n    slot-&gt;position = 20;\n\n    return 0;\n}\n</code></pre>\n\n<p><strong><em>EDIT</em></strong> - To address question in comment asking how to set a struct pointer to point to a struct.  </p>\n\n<p>First, it appears from viewing the code you have posted, that you are using self referencing structs.  (i.e. a struct that contains a member that is a pointer instance to itself) Here is a link to a good <em><a href=\"http://www.learn-c.org/en/Linked_lists\" rel=\"nofollow noreferrer\">tutorial dealing with Linked Lists in C</a></em>, which use self referencing structs. </p>\n\n<p>Regarding you comment: _I guess I should have made it more clear. P1_Semaphore is different to semaphore. I need P1_semaphore to point to the semaphore_.:  </p>\n\n<p>If <code>P1_Semaphore</code> is different than <code>semaphore</code>, then one should not be set to point to the address of the other.  And your compiler will not let you do that anyway.</p>\n\n<p>As I stated in the comments, a struct pointer should only point to a place in memory that contains an instance of that struct.  For example consider the two structs A &amp; B:</p>\n\n<pre><code>typedef struct {\n    int iNum;\n    float fNum;\n    char cStr[80];\n}A;\n\nA a, *pA; //create an instance, and pointer to an instance of A\n\ntypedef struct {\n    int iNum1;\n    int iNum2;\n    int iNum3;\n}B;\n\nB b, *pB; //create an instance, and pointer to an instance of B\n</code></pre>\n\n<p><code>A</code> &amp; <code>B</code> are obviously different, and will occupy a different size and shape in memory, so if the pointer to <code>B</code>, <code>*pB</code> was set to point to anything but <code>B</code>, it would be incorrect.  It needs to point to <code>B</code></p>\n\n<blockquote>\n  <p>Correct:<br>\n  pA = &amp;a //set pointer to A equal to the address of A<br>\n  pB = &amp;b //set pointer to B equal to the address of B</p>\n  \n  <p>Incorrect:<br>\n  pA = &amp;b //set pointer to A equal to the address of B<br>\n  pB = &amp;a //set pointer to B equal to the address of A<br>\n  (typical compiler error - <em>Operands of = have types pointer to B and pointer to A</em>)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1487775271, "post_id": 42381798, "comment_id": 71936969, "body": "There is no &quot;C/C++&quot;. In C++ some parameters are passed by reference."}], "tags": [], "owner": {"reputation": 692, "user_id": 7602265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ad9101226ae83d0083694c288b2696?s=128&d=identicon&r=PG", "display_name": "VHao", "link": "https://stackoverflow.com/users/7602265/vhao"}, "is_accepted": false, "score": 0, "last_activity_date": 1487745060, "last_edit_date": 1487745060, "creation_date": 1487731829, "answer_id": 42381798, "question_id": 42381081, "link": "https://stackoverflow.com/questions/42381081/trying-to-set-a-pointer-to-a-struct/42381798#42381798", "title": "Trying to set a pointer to a struct", "body": "<p>In C/C++, all parameters are passed by value, not by reference. To get the struct pointer in parameter, you need to use pointer to pointer as the parameter. Like this:</p>\n\n<pre><code>int P1_SemCreate(char *name, unsigned int value, P1_Semaphore **sem){\n  ...\n      *sem = temp;\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6004784, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1690912177852931/picture?type=large", "display_name": "Sean Gallagher", "link": "https://stackoverflow.com/users/6004784/sean-gallagher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487778266, "creation_date": 1487726969, "last_edit_date": 1487727523, "question_id": 42381081, "link": "https://stackoverflow.com/questions/42381081/trying-to-set-a-pointer-to-a-struct", "title": "Trying to set a pointer to a struct", "body": "<p>I have a function called SemCreate that takes a name an int and a pointer as parameters. I want the pointer to point to a new struct and I want to return an int, 0 if it went okay.</p>\n\n<pre><code>int P1_SemCreate(char *name, unsigned int value, P1_Semaphore *sem){\nUSLOSS_Console(\"Create a semaphore\\n\");\nif(!verifyKernel()) {\n        //USLOSS_Console(\"ERROR: Not currently in Kernel mode\\n\");\n        USLOSS_Halt(1);\n    }   \nif(numSems&gt;= P1_MAXSEM){\n    //USLOSS_Console(\"ERROR: MAX semaphore already exist\\n\");\n    return -2;\n}\nif(name == NULL){\n    return -3;\n}\n\ninterruptsOff();\nint i;\nfor (i = 0; i &lt; P1_MAXSEM; i++) {\n    if (semTable[i].inUse == 0) {\n        semTable[i].value = value;\n        semTable[i].list = NULL;\n        semTable[i].name = malloc(sizeof(char));\n        strcpy(semTable[i].name, name);\n        semTable[i].inUse = 1;\n        semaphore *temp = NULL;\n        temp = malloc(sizeof(semaphore));\n        temp-&gt;value = value;\n        temp-&gt;list = NULL;\n        temp-&gt;name = malloc(sizeof(char));\n        strcpy(temp-&gt;name, name);\n        *sem = temp;\n\n        break;\n    }\n\n}\nnumSems++;\ninterruptsOn();\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Right now the pointer is fine within the function but once I return the pointer is null</p>\n\n<p>EDIT: The array semTable is an array of semaphores</p>\n\n<pre><code>    typedef struct semaphore{\n    int value;\n    char * name;\n    struct node *list;\n    int checkPoint;\n    int inUse;\n}semaphore;\n\n\ntypedef struct PCB {\n    USLOSS_Context      context;\n    int                 (*startFunc)(void *);   /* Starting function */\n    void                 *startArg;             /* Arg to starting function */\n\n    int         pid;\n    int         status;     \n    int         killedStatus;       \n    int         state;\n    int         priority;\n    char        name[50];\n    int         parentPID;\n    int         numOfChild; \n    int blockFlag;\n    struct sempahore *blockSem;\n    char        *stack;\n    struct node *children;\n    struct node *zombiList;\n    int         cpuTime; \n    int         startTime;\n    struct semaphore *childSem;\n} PCB;\n\ntypedef struct node {\n        PCB *pcb;\n        struct node *next;\n} Node;\n</code></pre>\n"}, {"tags": ["c", "linux", "format", "scanf"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1487726024, "post_id": 42380930, "comment_id": 71911019, "body": "I am not sure what you expect <code>char *now = 1</code> to do.  Are you intending to initialize the pointer to 1?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1487726202, "post_id": 42380930, "comment_id": 71911062, "body": "...or, piggy backing on last comment, check for <code>EOF</code> per <i><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_sscanf.htm\" rel=\"nofollow noreferrer\">this sscanf documentation</a></i>."}, {"owner": {"reputation": 171, "user_id": 5608989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8dc955cde4aa348d9e2409d6b944a9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Borkar", "link": "https://stackoverflow.com/users/5608989/vaibhav-borkar"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1487726376, "post_id": 42380930, "comment_id": 71911100, "body": "@ryyker Yes. Assume like char *now = 2000/300/2. It should give an error as it is not of the format %d/%d/%d/%d/%d"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1487726666, "post_id": 42380930, "comment_id": 71911160, "body": "<code>char *now = 2000&#47;300&#47;2</code> is not a legal initialization.  Niether is: <code>char        *now = 1;</code>.  It would be okay to do <code>char *now = &quot;2000&#47;300&#47;2&quot;</code>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1487726683, "post_id": 42380930, "comment_id": 71911164, "body": "<code>sscanf()</code> returns the number of fields successfully assigned (or EOF on error)..."}, {"owner": {"reputation": 171, "user_id": 5608989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8dc955cde4aa348d9e2409d6b944a9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Borkar", "link": "https://stackoverflow.com/users/5608989/vaibhav-borkar"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1487726759, "post_id": 42380930, "comment_id": 71911185, "body": "@xing yes it works!"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1487727022, "post_id": 42380930, "comment_id": 71911267, "body": "I am not sure what worked, but you should consider all of the comments here, and check your compile-time error messages.  The code you show does not compile, so it would not have run."}, {"owner": {"reputation": 171, "user_id": 5608989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8dc955cde4aa348d9e2409d6b944a9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Borkar", "link": "https://stackoverflow.com/users/5608989/vaibhav-borkar"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1487727531, "post_id": 42380930, "comment_id": 71911401, "body": "@ryyker actually i wanted to take &#39;now&#39; as a command line argument, which works in my program. I had copied the command line argument to char * now"}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 2, "last_activity_date": 1487727006, "creation_date": 1487727006, "answer_id": 42381092, "question_id": 42380930, "link": "https://stackoverflow.com/questions/42380930/check-a-user-entered-string-is-of-format-d-d-d-d-d-in-c/42381092#42381092", "title": "Check a user-entered string is of format &quot;%d/%d/%d/%d/%d&quot; in C", "body": "<p><a href=\"https://linux.die.net/man/3/sscanf\" rel=\"nofollow noreferrer\"><code>sscanf</code></a> returns the number of fields successfully scanned and assigned (or <code>EOF</code> in case of an error). You are checking if none of the <code>%d</code>s were successful, i.e, no number was parsed from the string. This means that even if one integer could be parsed, then the <code>if</code> will not execute. So change</p>\n\n<pre><code>if (sscanf(now,\"%d/%d/%d/%d/%d\\n\",&amp;year,&amp;month,&amp;hour,&amp;min,&amp;sec) == 0)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (sscanf(now, \"%d/%d/%d/%d/%d\", &amp;year, &amp;month, &amp;hour, &amp;min, &amp;sec) != 5)\n</code></pre>\n\n<p>which executes the <code>if</code> even when one number could not be parsed. I've removed the <code>\\n</code> because it doesn't really have any effect here.</p>\n"}], "owner": {"reputation": 171, "user_id": 5608989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8dc955cde4aa348d9e2409d6b944a9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav Borkar", "link": "https://stackoverflow.com/users/5608989/vaibhav-borkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1487754515, "accepted_answer_id": 42381092, "answer_count": 1, "score": 2, "last_activity_date": 1487727006, "creation_date": 1487725830, "last_edit_date": 1487725964, "question_id": 42380930, "link": "https://stackoverflow.com/questions/42380930/check-a-user-entered-string-is-of-format-d-d-d-d-d-in-c", "closed_reason": "Not suitable for this site", "title": "Check a user-entered string is of format &quot;%d/%d/%d/%d/%d&quot; in C", "body": "<p>I tried checking the format of the string by using <code>sscanf()</code>. It does not print the error even if it does not matche the format. I don't know what is wrong in it.</p>\n\n<pre><code>char        *now = 1; // assume this is the user-entered string\nint         year,month,hour,min,sec;\n\n//CHECKING IF THE ARGUMENT IS CORRECT OR NOT\nif (sscanf(now,\"%d/%d/%d/%d/%d\\n\",&amp;year,&amp;month,&amp;hour,&amp;min,&amp;sec) == 0)   \n    {\n        fprintf(stderr,\"\\x1b[1;31mMust specify correct format\\nExiting........\\x1b[0m\\n\");\n        _exit(1);   \n    }\n</code></pre>\n"}, {"tags": ["c", "printf", "octal"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1487725589, "post_id": 42380887, "comment_id": 71910912, "body": "An octal digit represents 3 bits; the number of bits in an integer isn\u2019t typically divisible by 3, and it isn\u2019t here."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1487725644, "post_id": 42380887, "comment_id": 71910922, "body": "<code>%o</code> only prints unsigned integers."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1487725741, "post_id": 42380887, "comment_id": 71910948, "body": "Because it&#39;s a 32 bit number and 37777777777 in octal is 32 bits."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1487725742, "post_id": 42380887, "comment_id": 71910950, "body": "Additionally, to answer the question in the title, <code>%o</code> prints unsigned integers, just like <code>%x</code> where you&#39;d get <code>ffffffff</code>"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4758997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DzGd6.jpg?s=128&g=1", "display_name": "AthScc", "link": "https://stackoverflow.com/users/4758997/athscc"}, "edited": false, "score": 0, "creation_date": 1487726241, "post_id": 42380926, "comment_id": 71911073, "body": "So, if I was to run this on a 64-bit system, the output would be different?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 83, "user_id": 4758997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DzGd6.jpg?s=128&g=1", "display_name": "AthScc", "link": "https://stackoverflow.com/users/4758997/athscc"}, "edited": false, "score": 0, "creation_date": 1487726529, "post_id": 42380926, "comment_id": 71911134, "body": "@NerminaAvdi\u0107, yes, because the data type is wider. And, because <code>64 % 3</code> is 1, the first digit would be a single binary <code>1</code> rather than the two-bit binary <code>11</code>, hence <code>177777..7777</code>. I&#39;ll update the answer to show that as well."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 2, "creation_date": 1487727026, "post_id": 42380926, "comment_id": 71911268, "body": "In fact the behavior is undefined. The <code>%o</code> format specifier <i>requires</i> an argument of type <code>unsigned int</code>. There&#39;s a special rule that lets you use corresponding signed and unsigned types as arguments <i>when the value is representable in both</i>, but it doesn&#39;t apply here. <code>-1</code> is of type <code>int</code>. Treating it as if it were of type <code>unsigned int</code>, with the same representation, is the most likely actual behavior, but it&#39;s not guaranteed. If you really want to do that, use a cast (explicit conversion): <code>printf(&quot;%o&quot;, (unsigned int)-1)</code>."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1487727693, "post_id": 42380926, "comment_id": 71911442, "body": "Good point, @Keith, added that to the answer (with the relevant pointer to the standard)."}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 9, "last_activity_date": 1487727629, "last_edit_date": 1487727629, "creation_date": 1487725823, "answer_id": 42380926, "question_id": 42380887, "link": "https://stackoverflow.com/questions/42380887/in-c-why-cant-o-print-negative-values/42380926#42380926", "title": "In C, why can&#39;t %o print negative values?", "body": "<p>As per the ISO C standard (<code>C11 7.21.6.1 The fprintf function /8</code>), <code>%o</code> prints out an <em>unsigned</em> value in octal:</p>\n\n<blockquote>\n  <p><strong>o,u,x,X</strong> - The <code>unsigned int</code> argument is converted to unsigned octal (<code>o</code>), unsigned decimal (<code>u</code>), or unsigned hexadecimal notation (<code>x</code> or <code>X</code>) ...</p>\n</blockquote>\n\n<p>Based on your output, you have a 32-bit two's complement <code>int</code> type where <code>-1</code> is represented as the binary:</p>\n\n<pre><code>11111111 11111111 11111111 11111111\n\\/\\_/\\_/ \\_/\\_/\\__/\\_/\\_/\\__/\\_/\\_/\n 3 7  7   7  7   7  7  7   7  7  7\n</code></pre>\n\n<p>with the bottom line showing the octal representation (what you're seeing).</p>\n\n<p>And the <em>reason</em> why you're seeing a <code>3</code> at the front is because each octal digit represents three bits and 32 is not evenly divisible by three.</p>\n\n<p>However, you should keep in mind that <em>any</em> behaviour is acceptable here. As per the ISO quote above, <code>%o</code> requires an <code>unsigned int</code> and, as per the later sub-section <code>/9</code>:</p>\n\n<blockquote>\n  <p>If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined.</p>\n</blockquote>\n\n<hr>\n\n<p>If your <code>int</code> was 64-bit, it would be subtly different (as well as longer, obviously). A 32-bit value will have two extra bits at the front (<code>32 % 3 == 2</code>) but a 64-bit value has only one (<code>64 % 3 == 1</code>). So you would end up with:</p>\n\n<pre><code>11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111\n|\\_/\\_/\\__/\\_/\\_/ \\_/\\_/\\__/\\_/\\_/\\__/\\_/\\_/ \\_/\\_/\\__/\\_/\\_/\\__/\\_/\\_/\n1 7  7   7  7  7   7  7   7  7  7   7  7  7   7  7   7  7  7   7  7  7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1487726166, "post_id": 42380929, "comment_id": 71911051, "body": "Just because <i>you</i> don&#39;t think it makes sense to display negative numbers in any base but 10, doesn&#39;t mean my answer should be downvoted."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1487726553, "post_id": 42380929, "comment_id": 71911138, "body": "I didn&#39;t downvote but this answer passes an <code>int</code> argument to <code>printf(&quot;\u2026%o</code>,  whereas it would be nice to avoid it."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 1, "creation_date": 1487727273, "post_id": 42380929, "comment_id": 71911326, "body": "I also didn&#39;t downvote but I <i>have</i> been caught out before blindly negating integers - it doesn&#39;t always do what you generally expect, particularly with <code>INT_MIN</code> :-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1487737784, "post_id": 42380929, "comment_id": 71914175, "body": "Perhaps change to <code>x&lt;0 ? 0u-x : 0u+x</code>?"}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1487801749, "post_id": 42380929, "comment_id": 71953625, "body": "Thanks @chux, I like that"}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": false, "score": -1, "last_activity_date": 1487801736, "last_edit_date": 1487801736, "creation_date": 1487725827, "answer_id": 42380929, "question_id": 42380887, "link": "https://stackoverflow.com/questions/42380887/in-c-why-cant-o-print-negative-values/42380929#42380929", "title": "In C, why can&#39;t %o print negative values?", "body": "<p>While it typically doesn't make much sense to display a signed number in any base other than decimal, there's nothing special about decimal that says it's the only base that can display negatives.</p>\n\n<p>For example, if you have two addresses, you may want to know the difference between them, which could be negative. And of course you would want to see that result as hex.</p>\n\n<p>In fact, Python is completely fine with natively displaying negative hex values.</p>\n\n<p>So, here's a way to display negative numbers using a specifier other than <code>%d</code>, namely <code>%o</code>:</p>\n\n<pre><code>int x = -1;\nprintf(\"%s%o\", x&lt;0 ? \"-\" : \"\", x&lt;0 ? 0u-x : 0u+x);\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4758997, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DzGd6.jpg?s=128&g=1", "display_name": "AthScc", "link": "https://stackoverflow.com/users/4758997/athscc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1522, "favorite_count": 0, "accepted_answer_id": 42380926, "answer_count": 2, "score": 1, "last_activity_date": 1487964406, "creation_date": 1487725498, "last_edit_date": 1487964406, "question_id": 42380887, "link": "https://stackoverflow.com/questions/42380887/in-c-why-cant-o-print-negative-values", "title": "In C, why can&#39;t %o print negative values?", "body": "<p>So when I run this:</p>\n\n<pre><code>printf(\"%o\", -1);\n</code></pre>\n\n<p>It prints out <code>37777777777</code>.</p>\n\n<p>Why do I get this output?</p>\n\n<p>I thought it was first complement of <code>-1</code>, but why <code>3</code> at the beginning? </p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1487723115, "post_id": 42380479, "comment_id": 71910157, "body": "What does the debugger tell you when you step through the code? (And how much sense does your client code make to you when you simply <i>read</i> it?)"}, {"owner": {"reputation": 43, "user_id": 4369224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6463d2c095f7dfe0ba393cc0940762?s=128&d=identicon&r=PG&f=1", "display_name": "bst-for-life", "link": "https://stackoverflow.com/users/4369224/bst-for-life"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1487727944, "post_id": 42380479, "comment_id": 71911510, "body": "The code makes sense to me when I read it, but that could be because I am new to socket programming."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4369224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6463d2c095f7dfe0ba393cc0940762?s=128&d=identicon&r=PG&f=1", "display_name": "bst-for-life", "link": "https://stackoverflow.com/users/4369224/bst-for-life"}, "edited": false, "score": 0, "creation_date": 1487725311, "post_id": 42380638, "comment_id": 71910825, "body": "Why does the client have to send for the server to send?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 43, "user_id": 4369224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6463d2c095f7dfe0ba393cc0940762?s=128&d=identicon&r=PG&f=1", "display_name": "bst-for-life", "link": "https://stackoverflow.com/users/4369224/bst-for-life"}, "edited": false, "score": 0, "creation_date": 1487730835, "post_id": 42380638, "comment_id": 71912291, "body": "I have already explained exactly that, in the first paragraph."}, {"owner": {"reputation": 43, "user_id": 4369224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6463d2c095f7dfe0ba393cc0940762?s=128&d=identicon&r=PG&f=1", "display_name": "bst-for-life", "link": "https://stackoverflow.com/users/4369224/bst-for-life"}, "edited": false, "score": 0, "creation_date": 1487731379, "post_id": 42380638, "comment_id": 71912427, "body": "I apologize for misunderstanding, but I guess I&#39;m wondering how the server knows when to send to a socket, especially as how it&#39;s not good practice to add a client socket to <code>writefds</code> the way I currently have it."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 43, "user_id": 4369224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6463d2c095f7dfe0ba393cc0940762?s=128&d=identicon&r=PG&f=1", "display_name": "bst-for-life", "link": "https://stackoverflow.com/users/4369224/bst-for-life"}, "edited": false, "score": 0, "creation_date": 1487731840, "post_id": 42380638, "comment_id": 71912571, "body": "I&#39;ve already explained that too. Just send, and worry about EAGAIN/EWOULDBLOCK if and when it arises. The point is that sending when the socket is ready to <i>read</i> doesn&#39;t make sense if the client isn&#39;t sending anything."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 2, "last_activity_date": 1487723822, "creation_date": 1487723822, "answer_id": 42380638, "question_id": 42380479, "link": "https://stackoverflow.com/questions/42380479/sending-to-client-from-server/42380638#42380638", "title": "Sending to client from server", "body": "<ol>\n<li><p>Your server is <em>sending</em> only when the socket is ready for <em>reading</em>, and as the client is never sending, the server isn't either. The server send should happen when the client socket turns up in the <code>writefds</code>, although actually this isn't the correct way to use that feature. Really you should just send, and only add into and worry about <code>writefds</code> if <code>send()</code> caused EAGAIN/EWOULDBLOCK.</p></li>\n<li><p>You could be getting an undetected error in the client:</p>\n\n<pre><code>if((bytes_received = recv(sock, buf, BUF_SIZE, 0)) &gt; 1)\n{\n    buf[bytes_received] = '\\0';\n    fprintf(stdout, \"Received %s\", buf);\n}\n</code></pre>\n\n<p>This should continue:</p>\n\n<pre><code>else if (bytes_received == 0)\n{\n    fprintf(stdout, \"peer disconnected\\n\");\n    break;\n}\nelse // &lt; 0: error\n{\n    fprintf(stdout, \"recv() error %s\\n\", strerror(errno));\n    break;\n}\n</code></pre>\n\n<p>You need to print the actual error like this whenever you get an error from a system call.</p></li>\n</ol>\n"}], "owner": {"reputation": 43, "user_id": 4369224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fb6463d2c095f7dfe0ba393cc0940762?s=128&d=identicon&r=PG&f=1", "display_name": "bst-for-life", "link": "https://stackoverflow.com/users/4369224/bst-for-life"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1487740885, "answer_count": 1, "score": -2, "last_activity_date": 1487723822, "creation_date": 1487722888, "question_id": 42380479, "link": "https://stackoverflow.com/questions/42380479/sending-to-client-from-server", "closed_reason": "Not suitable for this site", "title": "Sending to client from server", "body": "<p>I'm trying to send data from a server to a client whenever the client executes a recv() command. As the code stands right now, I cannot get the client to print any data it receives. I cannot figure out whether something is wrong with my server or client, so any help would be appreciated. Thanks!</p>\n\n<p>client.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netinet/ip.h&gt;\n\n\n#define ECHO_PORT 9999\n#define BUF_SIZE 4096\n\nint main(int argc, char* argv[])\n{\n    if (argc != 3)\n    {\n        fprintf(stderr, \"usage: %s &lt;server-ip&gt; &lt;port&gt;\",argv[0]);\n        return EXIT_FAILURE;\n    }\n\n    char buf[BUF_SIZE];\n\n    int status, sock, sock2;\n    struct addrinfo hints;\n    memset(&amp;hints, 0, sizeof(struct addrinfo));\n    struct addrinfo *servinfo; //will point to the results\n    hints.ai_family = AF_INET;  //IPv4\n    hints.ai_socktype = SOCK_STREAM; //TCP stream sockets\n    hints.ai_flags = AI_PASSIVE; //fill in my IP for me\n\n    if ((status = getaddrinfo(argv[1], argv[2], &amp;hints, &amp;servinfo)) != 0)\n    {\n        fprintf(stderr, \"getaddrinfo error: %s \\n\", gai_strerror(status));\n        return EXIT_FAILURE;\n    }\n\n    if ((sock = socket(servinfo-&gt;ai_family, servinfo-&gt;ai_socktype, servinfo-&gt;ai_protocol)) == -1)\n    {\n        fprintf(stderr, \"Socket failed\");\n        return EXIT_FAILURE;\n    }\n\n    if ((connect(sock, (struct sockaddr *) servinfo-&gt;ai_addr, servinfo-&gt;ai_addrlen)) != 0)\n    {\n        fprintf(stderr, \"Connection failed\");\n        return EXIT_FAILURE;\n    }\n\n    if ((sock2 = socket(servinfo-&gt;ai_family, servinfo-&gt;ai_socktype, servinfo-&gt;ai_protocol)) == -1)\n    {\n        fprintf(stderr, \"Socket failed\");\n        return EXIT_FAILURE;\n    }\n\n    if ((connect(sock2, (struct sockaddr *) servinfo-&gt;ai_addr, servinfo-&gt;ai_addrlen)) != 0)\n    {\n        fprintf(stderr, \"Connection failed\");\n        return EXIT_FAILURE;\n    }\n\n    while (1) {\n        //char msg[BUF_SIZE] = \"ashudfshuhafhu\";\n        //char msg[BUF_SIZE]; \n        //fgets(msg, BUF_SIZE, stdin);\n        //int i = 2;\n        //if (strlen(msg) == i) \n        //    break;\n        int bytes_received;\n       // fprintf(stdout, \"Sending %s\", msg);\n        //send(sock, msg , strlen(msg), 0);\n        if((bytes_received = recv(sock, buf, BUF_SIZE, 0)) &gt; 1)\n        {\n            buf[bytes_received] = '\\0';\n            fprintf(stdout, \"Received %s\", buf);\n        }\n    }\n\n\n    freeaddrinfo(servinfo);\n    close(sock);    \n    return EXIT_SUCCESS;\n\n}\n</code></pre>\n\n<p>Server.c</p>\n\n<pre><code>#include &lt;netinet/in.h&gt;\n#include &lt;netinet/ip.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;unistd.h&gt;\n\n#define ECHO_PORT 9999\n#define BUF_SIZE 4096\n\nint close_socket(int sock)\n{\n        if (close(sock))\n        {\n                fprintf(stderr, \"Failed closing socket.\\n\");\n                return 1;\n        }\n        return 0;\n}\n\nint main(int argc, char* argv[])\n{\n    int sock, client_sock;\n    ssize_t readret;\n    socklen_t cli_size;\n    struct timeval tv;\n    struct sockaddr_in addr, cli_addr;\n    char buf[BUF_SIZE] = \"wetwetwetwetwetwetwetwet\";\n    fd_set readfds, writefds;\n    fd_set activereadfds, activewritefds;\n    cli_size = sizeof(&amp;cli_addr);\n\n    tv.tv_sec = 5;\n    tv.tv_usec = 0;\n\n    fprintf(stdout, \"----- Echo Server -----\\n\");\n\n    /* all networked programs must create a socket */\n    if ((sock = socket(PF_INET, SOCK_STREAM, 0)) == -1)\n    {\n            fprintf(stderr, \"Failed creating socket.\\n\");\n            return EXIT_FAILURE;\n    }\n\n    addr.sin_family = AF_INET;\n    addr.sin_port = htons(ECHO_PORT);\n    addr.sin_addr.s_addr = INADDR_ANY;\n\n    /* servers bind sockets to ports---notify the OS they accept connections */\n    if (bind(sock, (struct sockaddr *) &amp;addr, sizeof(addr)))\n    {\n            close_socket(sock);\n            fprintf(stderr, \"Failed binding socket.\\n\");\n            return EXIT_FAILURE;\n    }\n\n\n    if (listen(sock, 5))\n    {\n            close_socket(sock);\n            fprintf(stderr, \"Error listening on socket.\\n\");\n            return EXIT_FAILURE;\n    }\n\n    FD_ZERO(&amp;readfds);\n    FD_SET(sock, &amp;activereadfds);\n\n    while (1)\n    {\n        fprintf(stdout,\"in here.\\n\");\n        readfds = activereadfds;\n        writefds = activewritefds;\n        FD_ZERO(&amp;activereadfds);\n        FD_ZERO(&amp;activewritefds);\n\n        if (select(51, &amp;readfds, &amp;writefds, NULL, &amp;tv) &lt; 0)\n        {\n            perror(\"select\");\n            return EXIT_FAILURE;\n        }\n\n\n        for (int i = 0; i &lt; 10; ++i)\n        {\n            if (FD_ISSET (i, &amp;readfds))\n            {\n                if (i == sock)\n                {\n                    fprintf(stdout, \"main loop. \\n\");\n                    client_sock = accept(sock, \n                                (struct sockaddr *) &amp;cli_addr, &amp;cli_size);\n                    FD_SET(client_sock, &amp;activereadfds);\n                    FD_SET(client_sock, &amp;activewritefds);\n                    if (client_sock &lt; 0)\n                    {\n                        perror(\"accept\");\n                        return EXIT_FAILURE;\n                    }\n                } else {\n                        fprintf(stdout, \"second loop \\n\");\n                        readret = send(i,buf, strlen(buf),0);\n\n                        if (readret &lt; 0)\n                            fprintf(stdout, \"yay\");\n                        }\n                }\n            if (FD_ISSET(i, &amp;writefds))\n                {   fprintf(stdout, \"ugh \\n\");\n                    readret = send(i,buf,BUF_SIZE,0);\n                    //if (readret &gt; 0)\n                    //while((readret = recv(i, buf, BUF_SIZE, 0)) &gt;= 1)\n                    //  {\n\n                                //if (send(i, buf, readret, 0) != readret)\n                                //{\n                                //  close_socket(i);\n                                //  close_socket(sock);\n                                //  fprintf(stderr, \"Error sending to client.\\n\");\n                                //  return EXIT_FAILURE;\n                                //}\n                }\n            }\n        }\n    close_socket(sock);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487727430, "post_id": 42380232, "comment_id": 71911377, "body": "&quot;The function func takes void parameter buf&quot; - no, it does not! <code>buf</code> is a <code>void *</code>, not a <code>void</code> (whatever that would be). And your <code>main</code> signature should be <code>int main(void)</code>. And why do you keep your compiler from helping you? Never use <code>void *</code> if it is not really necessary. The same for casts. Write type-safe code, anything else is a maintenance nightmare."}], "answers": [{"comments": [{"owner": {"reputation": 920, "user_id": 4642234, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fccc583cc313ff1f82932a3df5afda9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meng", "link": "https://stackoverflow.com/users/4642234/meng"}, "edited": false, "score": 0, "creation_date": 1487721815, "post_id": 42380286, "comment_id": 71909761, "body": "so how can i insert values into buf with func(int n, void *buf)?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1487722839, "post_id": 42380286, "comment_id": 71910083, "body": "Actually he doesn&#39;t return it."}, {"owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1487722971, "post_id": 42380286, "comment_id": 71910116, "body": "@immibis What is (or is not) returned?"}, {"owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1487723536, "post_id": 42380286, "comment_id": 71910292, "body": "@immibis ok you got me :-) I will rewrite it!"}], "tags": [], "owner": {"reputation": 1741, "user_id": 2487023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b43fedcd2290573209fdc2a0cc0c03fd?s=128&d=identicon&r=PG", "display_name": "koalo", "link": "https://stackoverflow.com/users/2487023/koalo"}, "is_accepted": true, "score": 2, "last_activity_date": 1487723658, "last_edit_date": 1487723658, "creation_date": 1487721727, "answer_id": 42380286, "question_id": 42380232, "link": "https://stackoverflow.com/questions/42380232/c-function-with-void-parameter/42380286#42380286", "title": "c function with void parameter", "body": "<p>You set <code>buf</code> to a pointer that points to memory on the stack (i.e. <code>my_array</code>). Since it is no longer valid as soon as the program leaves <code>func</code> this does not work.</p>\n\n<p>Either use dynamic memory, but then you need to free it explicitly. Another option is to create the memory outside and only fill it inside of <code>func</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func(char* buf, int n)\n{\n    for(int i = 0; i &lt; n; i++) {\n        buf[i]=i;\n    }\n}\n\nint main()\n{\n    char buf[10];\n    func(buf, sizeof(buf));\n\n    for(int i=0; i &lt; sizeof(buf); i++) {\n        printf(\"%d\\n\", buf[i]);\n    }\n}\n</code></pre>\n\n<p>Apart from that: Never use <code>void*</code> unless you have a VERY good reason for it!</p>\n"}, {"tags": [], "owner": {"reputation": 1330, "user_id": 2671441, "user_type": "registered", "profile_image": "https://graph.facebook.com/802794209/picture?type=large", "display_name": "bejado", "link": "https://stackoverflow.com/users/2671441/bejado"}, "is_accepted": false, "score": 0, "last_activity_date": 1487721957, "creation_date": 1487721957, "answer_id": 42380324, "question_id": 42380232, "link": "https://stackoverflow.com/questions/42380232/c-function-with-void-parameter/42380324#42380324", "title": "c function with void parameter", "body": "<p>You need to allocate your memory outside of your function, otherwise it will not be valid when you return, because it was allocated on the stack.</p>\n\n<pre><code>void func(int n, int *buf);\n\nint main()\n{\n    const int n = 10;\n    int my_array[n];\n\n    func(n, my_array);\n    for(int i = 0; i &lt; n; i++){\n        printf(\"%d\\n\", ((int*)my_array)[i]);\n    }\n    printf(\"in main, after func: %p\\n\", my_array);\n}\n\nvoid func(int n, int *buf)\n{\n    for(int i = 0; i &lt; n; i++){\n        buf[i] = i;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 920, "user_id": 4642234, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fccc583cc313ff1f82932a3df5afda9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meng", "link": "https://stackoverflow.com/users/4642234/meng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 42380286, "answer_count": 2, "score": -3, "last_activity_date": 1487726646, "creation_date": 1487721429, "last_edit_date": 1487726646, "question_id": 42380232, "link": "https://stackoverflow.com/questions/42380232/c-function-with-void-parameter", "title": "c function with void parameter", "body": "<p>The function <code>func</code> takes void parameter <code>buf</code>. I want to insert values from 1 to 10 into <code>buf</code> by calling <code>func</code>. However, the addresses of <code>buf</code> are different in <code>func</code> and <code>main</code> and the printed values are not from 1 to 10. Can anyone help me with this problem? Thanks!</p>\n\n<pre><code>void func(int n, void *buf);\n\nint main()\n{\n    void *buf;\n    func(10,buf);\n    for(int i=0;i&lt;10;i++){\n        printf(\"%d\\n\", ((char*)buf)[i]);\n    }\n    printf(\"in main, after func: %p\\n\",buf);\n}\n\nvoid func(int n, void *buf)\n{\n    (char*)buf;\n    char my_array[n];\n\n    for(int i=0;i&lt;n;i++){\n        my_array[i]=i;\n    }\n\n    buf = my_array;\n    printf(\"in func: %p\\n\",buf);\n}\n</code></pre>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1487721661, "post_id": 42380224, "comment_id": 71909710, "body": "What system shows the problem? <code>printf(&quot;%d\\n&quot;, rand());</code> might show the problem a bit more clearly. I&#39;d expect to get the same output if the program is run twice within 1 second, but you&#39;re getting (slightly) different results each time. Please verify that the code you&#39;ve shown us is <i>exactly</i> the code you&#39;ve compiled and run."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 2, "creation_date": 1487721785, "post_id": 42380224, "comment_id": 71909749, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6668282/srandtimenull-generating-similar-results\">srand(time(NULL)) generating similar results</a>"}, {"owner": {"reputation": 5804, "user_id": 777510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MUpFE.png?s=128&g=1", "display_name": "\u1d18\u1d00\u0274\u1d00\u028f\u026a\u1d0f\u1d1b\u026as", "link": "https://stackoverflow.com/users/777510/%e1%b4%98%e1%b4%80%c9%b4%e1%b4%80%ca%8f%c9%aa%e1%b4%8f%e1%b4%9b%c9%aas"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1487722972, "post_id": 42380224, "comment_id": 71910117, "body": "@KeithThompson I&#39;ve posted a screenshot with the exact code and commands I&#39;m performing"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1487723166, "post_id": 42380224, "comment_id": 71910177, "body": "Please don&#39;t post images of code. Copy-and-paste your code into the question <i>as text</i>. The problem is based on the values returned by <code>rand()</code> we only need to see those values, which are integers. Something like this: <code>srand(time(NULL)); printf(&quot;RAND_MAX = %d, rand() = %d\\n&quot;, RAND_MAX, rand());</code>. In your modified program, you&#39;re calling <code>rand()</code> twice. It&#39;s likely that the <i>first</i> value returned by <code>rand()</code> is the problem. And again, what system are you using?"}, {"owner": {"reputation": 5804, "user_id": 777510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MUpFE.png?s=128&g=1", "display_name": "\u1d18\u1d00\u0274\u1d00\u028f\u026a\u1d0f\u1d1b\u026as", "link": "https://stackoverflow.com/users/777510/%e1%b4%98%e1%b4%80%c9%b4%e1%b4%80%ca%8f%c9%aa%e1%b4%8f%e1%b4%9b%c9%aas"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1487723584, "post_id": 42380224, "comment_id": 71910305, "body": "@KeithThompson This is on OSX 10.11"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1487723639, "post_id": 42380224, "comment_id": 71910321, "body": "It looks like value returned by the first call to <code>rand()</code> is strongly correlated to the seed somehow, and the second is not. Focus on that: <code>int r1 = rand(); int r2 = rand(); printf(&quot;%d %d\\n&quot;, r2);</code>. Forget the floating-point stuff. Include the full text of the program and its output in your question. Also, tell us what OS you&#39;re using <i>in the question</i>. Assume that nobody will see these comments."}, {"owner": {"reputation": 5804, "user_id": 777510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MUpFE.png?s=128&g=1", "display_name": "\u1d18\u1d00\u0274\u1d00\u028f\u026a\u1d0f\u1d1b\u026as", "link": "https://stackoverflow.com/users/777510/%e1%b4%98%e1%b4%80%c9%b4%e1%b4%80%ca%8f%c9%aa%e1%b4%8f%e1%b4%9b%c9%aas"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1487724181, "post_id": 42380224, "comment_id": 71910491, "body": "@KeithThompson Edited"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 1, "creation_date": 1487730665, "post_id": 42380224, "comment_id": 71912246, "body": "@tuple_cat not a duplicate , you would expect the numbers to either be identical or completely different. not share a common initial sequence."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487730830, "post_id": 42380224, "comment_id": 71912288, "body": "is this the exact code? E.g. you didn&#39;t use <code>random()</code> instead of <code>rand()</code> ?"}, {"owner": {"reputation": 5804, "user_id": 777510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MUpFE.png?s=128&g=1", "display_name": "\u1d18\u1d00\u0274\u1d00\u028f\u026a\u1d0f\u1d1b\u026as", "link": "https://stackoverflow.com/users/777510/%e1%b4%98%e1%b4%80%c9%b4%e1%b4%80%ca%8f%c9%aa%e1%b4%8f%e1%b4%9b%c9%aas"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487812125, "post_id": 42380224, "comment_id": 71957261, "body": "@M.M Yes this is exact, I&#39;ve copy-pasted it straight into the question. At this point this seems to be a deficiency in my c standard lib"}, {"owner": {"reputation": 69864, "user_id": 444991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c57f597182ae324d8eb33b935f7d38af?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/444991/matt"}, "edited": false, "score": 0, "creation_date": 1488289761, "post_id": 42380224, "comment_id": 72158188, "body": "Please do not edit your question such that it invalidates existing answers. Instead, create a new question."}], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1487722604, "post_id": 42380313, "comment_id": 71910006, "body": "Something like time xor pid, for example, is a <i>somewhat</i> better seed, but still very predictable. Really use <code>&#47;dev&#47;urandom</code> (or whatever the Windows equivalent is)."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1487723315, "post_id": 42380313, "comment_id": 71910227, "body": "<code>rand()</code> is not inherently bad. Some implementations of <code>rand()</code> are bad."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1487723496, "post_id": 42380313, "comment_id": 71910283, "body": "@KeithThompson From a security standpoint, that <code>rand</code>&#39;s specification is so broad and implementation is so unpredictable makes <code>rand</code> inherently bad."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1487724346, "post_id": 42380313, "comment_id": 71910548, "body": "@Schwern: Who said anything about &quot;security standpoint&quot;? There&#39;s absolutely nothing bad about <code>rand()</code>. There are just some applications for which it is suitable. And no, there&#39;s no need to somehow &quot;avoid&quot; <code>rand()</code>."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1487724679, "post_id": 42380313, "comment_id": 71910638, "body": "WRT avoiding: Using my, admittedly unexplained, definition of &quot;good&quot; I&#39;d say I don&#39;t know if any good implementation of rand.  It isn&#39;t only about security but also period and number of possible random streams which is limited by the seed size."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1487730707, "post_id": 42380313, "comment_id": 71912256, "body": "@AnT it&#39;s hard to imagine an application for <code>rand()</code> that is suited by the output OP got"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1487786674, "post_id": 42380313, "comment_id": 71945128, "body": "@M.M: Frankly, I don&#39;t see the problem. For a generator like <code>rand()</code> the only thing that&#39;s expected from it is a uniform coverage of the target range and absence of trivial patterns in each post-<code>srand</code> session. I don&#39;t see any problems with that in the OP&#39;s example."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1487795951, "post_id": 42380313, "comment_id": 71950499, "body": "I agree, there&#39;s nothing at all wrong with the user&#39;s <code>rand()</code>, he just doesn&#39;t understand how to use it."}], "tags": [], "owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "is_accepted": false, "score": 2, "last_activity_date": 1487721911, "creation_date": 1487721911, "answer_id": 42380313, "question_id": 42380224, "link": "https://stackoverflow.com/questions/42380224/rand-function-in-c-is-not-random-even-when-seeded/42380313#42380313", "title": "rand() function in C is not random even when seeded", "body": "<ol>\n<li><code>rand()</code> is quite bad, avoid it if possible.  In any good RNG the first values will be indistinguishable from random even when the seed is close (hamming distance).  In <code>rand</code> this is not the case.</li>\n<li>If you must use rand then seed it, preferably with something higher entropy than time, and call <code>rand()</code> multiple times instead of reseeding-calling-reseeding.</li>\n</ol>\n\n<p>For example of 2, consider:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char** argv) {\n  int t=time(NULL);\n  srand(t);\n\n  for(int i=0; i &lt; 10; i++) {\n    float r = (float)rand()/(float)(RAND_MAX);\n    printf(\"%f\\n\", r);\n  }\n}\n</code></pre>\n\n<p>With the result:</p>\n\n<pre><code>0.460600\n0.310486\n0.339473\n0.519799\n0.258825\n0.072276\n0.749423\n0.552250\n0.665374\n0.939103\n</code></pre>\n\n<p>It's still a bad RNG but at least the range is better when you allow it to use the internal state instead of giving it another similar seed.</p>\n"}, {"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 1, "last_activity_date": 1487785987, "creation_date": 1487785987, "answer_id": 42398861, "question_id": 42380224, "link": "https://stackoverflow.com/questions/42380224/rand-function-in-c-is-not-random-even-when-seeded/42398861#42398861", "title": "rand() function in C is not random even when seeded", "body": "<p>This is exactly what you should expect. There's no such thing as \"a random number\". There are only <em>sequences</em> of numbers with a random distribution. The <code>rand()</code> function generates such sequences, but you're not giving it a chance to, because you keep re-seeding it.  The first number generated by <code>rand()</code> may very well be just some function of the seed, or the seed itself. Some <code>rand()</code> functions might hash the seed to hide this, but that doesn't really make them any better, because the contract of <code>rand()</code> is to produce a random <em>sequence</em>.</p>\n\n<p>If you need a sequence of random numbers that survives running multiple programs, you'll have to do something like (a) Write a program that calls <code>srand()</code> once, then calls <code>rand()</code> many times, and have your other programs ask for random numbers from that program over IPC; (b) Use something like <code>/dev/urandom</code>; (c) Use something like <code>random.org</code>.</p>\n"}], "owner": {"reputation": 5804, "user_id": 777510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MUpFE.png?s=128&g=1", "display_name": "\u1d18\u1d00\u0274\u1d00\u028f\u026a\u1d0f\u1d1b\u026as", "link": "https://stackoverflow.com/users/777510/%e1%b4%98%e1%b4%80%c9%b4%e1%b4%80%ca%8f%c9%aa%e1%b4%8f%e1%b4%9b%c9%aas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1539738697, "creation_date": 1487721392, "last_edit_date": 1539738697, "question_id": 42380224, "link": "https://stackoverflow.com/questions/42380224/rand-function-in-c-is-not-random-even-when-seeded", "title": "rand() function in C is not random even when seeded", "body": "<p>This is most likely a machine dependent issue but I can't figure out what could be wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char** argv) {\n\n  srand(time(NULL));\n  int r1 = rand();\n  int r2 = rand();\n  printf(\"%d %d\\n\", r1, r2);\n}\n</code></pre>\n\n<p>I compile the above piece of code using</p>\n\n<pre><code>gcc randd.c\n</code></pre>\n\n<p>Then running it a few times manually and the first numbers seem incredibly similar while the second ones seem random:</p>\n\n<pre><code>1025720610 1435057801\n1025737417 1717533050\n1025754224 2000008299\n1025771031 134999901\n1025787838 417475150\n</code></pre>\n\n<p>This first call to <code>rand()</code> seems strongly co-related to the time and is strictly increasing as time passes. Any ideas as to why this occurs or how to resolve it?</p>\n\n<p>This happens on OSX 10.11</p>\n"}, {"tags": ["python", "c", "cython"], "comments": [{"owner": {"reputation": 327, "user_id": 1713513, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Sd2kj.jpg?s=128&g=1", "display_name": "Eric C.", "link": "https://stackoverflow.com/users/1713513/eric-c"}, "edited": false, "score": 1, "creation_date": 1515602123, "post_id": 42380030, "comment_id": 83364471, "body": "My first thought is that you might need a statement like <code>fflush(stdout);</code> in there. But it could also just be an issue with no newline on what &quot;counts&quot; as the last statement. See the discussion here, apparently C does funky things with no newline at (or near?) the last statement. I&#39;m a little unclear on how you&#39;re say function shows a binary representation though. <a href=\"https://bytes.com/topic/c/answers/629409-fflush-stdout\" rel=\"nofollow noreferrer\">bytes.com/topic/c/answers/629409-fflush-stdout</a>"}, {"owner": {"reputation": 1412, "user_id": 3809561, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RTS59.jpg?s=128&g=1", "display_name": "yyny", "link": "https://stackoverflow.com/users/3809561/yyny"}, "reply_to_user": {"reputation": 327, "user_id": 1713513, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Sd2kj.jpg?s=128&g=1", "display_name": "Eric C.", "link": "https://stackoverflow.com/users/1713513/eric-c"}, "edited": false, "score": 0, "creation_date": 1555163744, "post_id": 42380030, "comment_id": 98019054, "body": "@EricCarlsen I was thinking the same. On most machines, newlines <code>fflush</code> by default, but otherwise you have to do it yourself. See <code>man setvbuf</code>."}], "owner": {"reputation": 2331, "user_id": 1767963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95c748e809936567f2cdf0c86486d59f?s=128&d=identicon&r=PG", "display_name": "Berk &#214;zbalc\u0131", "link": "https://stackoverflow.com/users/1767963/berk-%c3%96zbalc%c4%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1383, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1487720200, "creation_date": 1487720200, "question_id": 42380030, "link": "https://stackoverflow.com/questions/42380030/cython-print-outputs-before-c-printf-even-when-placed-afterwards", "title": "Cython print() outputs before C printf(), even when placed afterwards", "body": "<p>I'm trying to pick up Cython.</p>\n\n<pre><code>import counter\n\ncdef public void increment():\n    counter.increment()\n\ncdef public int get():\n    return counter.get()\n\ncdef public void say(int times):\n    counter.say(times)\n</code></pre>\n\n<p>This is the \"glue code\" I'm using to call functions from counter.py, a pure Python source code file. It's laid out like this:</p>\n\n<pre><code>count = 0\n\ndef increment():\n    global count\n\n    count += 1\n\ndef get():\n    global count\n\n    return count\n\ndef say(times):\n    global count\n\n    print(str(count) * times)\n</code></pre>\n\n<p>I have successfully compiled and run this program. The functions work fine. However, a very strange thing occured when I tested this program:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    Py_Initialize();\n\n    // The following two lines add the current working directory\n    // to the environment variable `PYTHONPATH`. This allows us\n    // to import Python modules in this directory.\n    PyRun_SimpleString(\"import sys\");\n    PyRun_SimpleString(\"sys.path.append(\\\".\\\")\");\n\n    PyInit_glue();\n\n    // Tests\n    for (int i = 0; i &lt; 10; i++)\n    {\n        increment();\n    }\n\n    int x = get();\n    printf(\"Incremented %d times\\n\", x);\n\n    printf(\"The binary representation of the number 42 is\");\n    say(3);\n\n    Py_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>I would expect the program to produce this output:</p>\n\n<pre><code>Incremented 10 times\nThe binary representation of the number 42 is\n101010\n</code></pre>\n\n<p>However, it prints this:</p>\n\n<pre><code>Incremented 10 times\n101010\nThe binary representation of the number 42 is\n</code></pre>\n\n<p>But if I change the line</p>\n\n<pre><code>printf(\"The binary representation of the number 42 is\");\n</code></pre>\n\n<p>to</p>\n\n<pre><code>printf(\"The binary representation of the number 42 is\\n\");\n</code></pre>\n\n<p>then the output is corrected.</p>\n\n<p>This seems strange to me. I understand that if I want to print the output of a Python function, I might just as well return it to C and store it in a variable, and use C's printf() rather than the native Python print(). But I would be very interested to hear the reason this is happening. After all, the printf() statement is reached before the say() statement (I double checked this in gdb just to make sure). Thanks for reading.</p>\n"}, {"tags": ["c", "multithreading", "openmp"], "answers": [{"comments": [{"owner": {"reputation": 246, "user_id": 2734140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b0a031581422c4afd9dd308fce2839e?s=128&d=identicon&r=PG", "display_name": "Aditya Kashi", "link": "https://stackoverflow.com/users/2734140/aditya-kashi"}, "edited": false, "score": 0, "creation_date": 1487917583, "post_id": 42387260, "comment_id": 72009104, "body": "Thanks a lot, that makes sense and makes things clearer."}, {"owner": {"reputation": 246, "user_id": 2734140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b0a031581422c4afd9dd308fce2839e?s=128&d=identicon&r=PG", "display_name": "Aditya Kashi", "link": "https://stackoverflow.com/users/2734140/aditya-kashi"}, "edited": false, "score": 0, "creation_date": 1488318323, "post_id": 42387260, "comment_id": 72175524, "body": "In my case, I need to protect a read statement from a write to the same location done from <i>elsewhere</i> in the code. I don&#39;t need to protect the write from other writes (atomic write) as no other threads <i>write</i> to the location, and I don&#39;t need to protect read from read. I don&#39;t get how to do that. What do you think?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 246, "user_id": 2734140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b0a031581422c4afd9dd308fce2839e?s=128&d=identicon&r=PG", "display_name": "Aditya Kashi", "link": "https://stackoverflow.com/users/2734140/aditya-kashi"}, "edited": false, "score": 0, "creation_date": 1488321027, "post_id": 42387260, "comment_id": 72176858, "body": "Both the write and the read have to be atomic. You cannot just protect one side, you have to take care of both!"}, {"owner": {"reputation": 246, "user_id": 2734140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b0a031581422c4afd9dd308fce2839e?s=128&d=identicon&r=PG", "display_name": "Aditya Kashi", "link": "https://stackoverflow.com/users/2734140/aditya-kashi"}, "edited": false, "score": 0, "creation_date": 1488658897, "post_id": 42387260, "comment_id": 72332524, "body": "But.. as long as the location is not being written to, I want to allow simultaneous reads by multiple threads. That&#39;s the issue."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 246, "user_id": 2734140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b0a031581422c4afd9dd308fce2839e?s=128&d=identicon&r=PG", "display_name": "Aditya Kashi", "link": "https://stackoverflow.com/users/2734140/aditya-kashi"}, "edited": false, "score": 0, "creation_date": 1488671350, "post_id": 42387260, "comment_id": 72335947, "body": "If you don&#39;t write the the location concurrently, no need for atomics. I am a bit confused by your notion of &quot;a write to the same location done from elsewhere in the code&quot;. What do you mean by elsewhere then?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 246, "user_id": 2734140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b0a031581422c4afd9dd308fce2839e?s=128&d=identicon&r=PG", "display_name": "Aditya Kashi", "link": "https://stackoverflow.com/users/2734140/aditya-kashi"}, "edited": false, "score": 0, "creation_date": 1488705613, "post_id": 42387260, "comment_id": 72342895, "body": "@AdityaKashi Again, every access, read and write, needs to be atomic. I added an explanation why to my answer. I hope it is clear now."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 1, "last_activity_date": 1488705535, "last_edit_date": 1495540810, "creation_date": 1487755076, "answer_id": 42387260, "question_id": 42380026, "link": "https://stackoverflow.com/questions/42380026/ensuring-a-location-is-not-read-from-and-written-to-at-the-same-time-with-openmp/42387260#42387260", "title": "Ensuring a location is not read from and written to at the same time with OpenMP", "body": "<p>I'll try to address your specific question, but the general advise of <a href=\"https://stackoverflow.com/a/41614045/620382\">the related answer</a> holds.</p>\n\n<blockquote>\n  <p>According to some SO answers, reading from and writing to a location at the same time may cause the read value to be corrupted.</p>\n</blockquote>\n\n<p>Yes. Whether it does or not in practice, highly depends on the architecture, datatype, compiler, optimizations.</p>\n\n<blockquote>\n  <p>How do I ensure this does not happen while maintaining as much performance as possible?</p>\n</blockquote>\n\n<p>The portable and clean way to ensure that, is to use atomic read, write and updates (and captures) on all accesses to the variable.</p>\n\n<blockquote>\n  <p>Does this mean that reads will not overlap with writes? Could anyone help clarify what exactly atomic update does, and/or what I should be using in my case?</p>\n</blockquote>\n\n<p>No. <code>atomic update</code> is not applicable to pure assignments. It is only applicable to statements that read the value, perform an operation on it and write it again. The atomicity of update refers to the read/write of that particular statement, not any other read elsewhere in the code. You should be using <code>atomic write</code> for the assignment, and <code>atomic read</code> for all other reads of that location.</p>\n\n<p>I hope that clarifies your particular questions. Again, note that atomicity does not guarantee visibility of memory updates. If you rely on eventually seeing the updated value on other threads, you must also consider explicit or implicit memory flushes.</p>\n\n<p>IMHO the OpenMP standard is very well written. If you want the most exact wording, you should refer to it (1.4 and 2.13.6).</p>\n\n<p>Edit: Regarding your specific example, you need to protect <strong>each and every read and write</strong> to <code>x</code>. A concurrent read and write to one location is a data race and can result in indeterminate values. From the standard:</p>\n\n<blockquote>\n  <p>2.13.6 atomic Construct</p>\n  \n  <p>[...] To avoid race conditions, all accesses of the locations designated by x that could potentially occur in parallel must be protected with an atomic construct.</p>\n</blockquote>\n\n<p>Imagine that reading/writing to x is implemented by two separate read/writes. This is explicitly allowed by the standard (1.4.1, \"A single access to a variable may be implemented with multiple load or store instructions\"):</p>\n\n<pre><code>x_j.low  = laod x[j].low;\nx_j.high = load x[j].high;\nx_k.low  = load x[k].low;\nx_k.high = load x[k].high;\ntemp = some_const * x_j + x_k;\nstore x[i].low = temp.low;\nstore x[i].high = temp.high;\n</code></pre>\n\n<p>Now imagine a concurrent situation:</p>\n\n<pre><code>Thread 0 [i = 10]             | Thread 1 [j = 10]\n----------------------------------------------------------\nstore x[10].low = temp.low;   |\n                              | x_j.low = load x[10].low\n                              | x_j.high = load x[10].high\nstore x[10].high = temp.high; |\n</code></pre>\n\n<p>You cannot prevent reading a corrupted value with only locking either of the thread, you have to do it on both sides.</p>\n\n<p>Note this is only an illustration. For some types in practice there may very well be no difference at all between atomic and non-atomic code. But the standard requires to you so.</p>\n"}, {"tags": [], "owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1487876743, "creation_date": 1487876743, "answer_id": 42424123, "question_id": 42380026, "link": "https://stackoverflow.com/questions/42380026/ensuring-a-location-is-not-read-from-and-written-to-at-the-same-time-with-openmp/42424123#42424123", "title": "Ensuring a location is not read from and written to at the same time with OpenMP", "body": "<p>here is a textbook definition from Parallel Programming in OpenMP, 2001, by Chandra,Dagum,Kohr,Mayden,McDonald,Menon.</p>\n\n<blockquote>\n  <p>The atomic directive is designed to give efficient access to machine primitives/instructions (compare-exchange CMPXCHG on intel X86) that allow the  processor to perform a read,modify,write operation such as an increment on a memory location all in an atomic fashion.  It uses hardware support to acquire exclusive access to a single location for the duration of the update.</p>\n  \n  <p>the atomic directive, like the critical directive, is <strong>another way of expressing mutual exclusion</strong> and does not provide any additional functionality.  While the critical directive encloses an arbitrary block of code, atomic can be applied only if the critical section consists of a single assignment statement that updates a scalar variable.</p>\n  \n  <p>the restrictions on the use of the atomic directive ensure the assignment can be translated into a sequence of machine instructions to atomically read, modify, and write the specified memory location.\n  <strong>Concerning synchronization the user must ensure that all conflicting accesses to this memory location are consistently protected using the same synchronization directive (either atomic or critical).</strong></p>\n  \n  <p>a critical section containing a single assignment statement using the atomic directive is usually more efficient, and never worse.  but a critical section with multiple assignments cannot be transformed to use a single atomic directive, it requires an atomic directive for each statement- assuming each statement meets the requirement for using the atomic directive.\n  general guidance is to use atomic when updating either a single location or just a few, and to use the critical directive when updating many.</p>\n</blockquote>\n\n<p>With that said, so far you have identified your assignment statement where you write to some memory location and you are using the atomic directive on that.  You then need to use the atomic directive every where else so that in all other threads that will do a read on that memory location, that read assignment has the atomic directive.  And by everywhere else, the scope of everywhere is what would be a critical section (not critical directive) of code where the parallelism is happening up until the point all threads synchronize.</p>\n"}], "owner": {"reputation": 246, "user_id": 2734140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9b0a031581422c4afd9dd308fce2839e?s=128&d=identicon&r=PG", "display_name": "Aditya Kashi", "link": "https://stackoverflow.com/users/2734140/aditya-kashi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 42387260, "answer_count": 2, "score": 0, "last_activity_date": 1488705535, "creation_date": 1487720180, "last_edit_date": 1495540434, "question_id": 42380026, "link": "https://stackoverflow.com/questions/42380026/ensuring-a-location-is-not-read-from-and-written-to-at-the-same-time-with-openmp", "title": "Ensuring a location is not read from and written to at the same time with OpenMP", "body": "<p>I have a variable that is being written to in an OpenMP parallel for loop. The loop is such that no other thread will write to it, but they all read from it at various times. According to some SO answers, reading from and writing to a location at the same time may cause the read value to be corrupted. Is this true? How do I ensure this does not happen while maintaining as much performance as possible?</p>\n\n<p>I looked at the OpenMP atomic construct in the spec. About <code>atomic write</code>, it says:</p>\n\n<blockquote>\n  <p>The atomic construct with the write clause forces an atomic write of the location designated by x regardless of the native machine word size.</p>\n</blockquote>\n\n<p>Since I know that only one thread writes to the location, this is not what I need.</p>\n\n<p>For <code>atomic update</code>, it says</p>\n\n<blockquote>\n  <p>Only the read and write of the location designated by x are\n  performed mutually atomically.</p>\n</blockquote>\n\n<p>Does this mean that reads will not overlap with writes? If that's true, I think that's what I need. In that case, can I use <code>atomic update</code> on a statement like <code>x = expr;</code> (rather than <code>x += expr;</code>)?</p>\n\n<p>Could anyone help clarify what exactly <code>atomic update</code> does, and/or what I should be using in my case?</p>\n\n<p>I read <a href=\"https://stackoverflow.com/questions/41612143/is-openmp-atomic-write-needed-if-other-threads-read-only-the-shared-data\">Is OpenMP atomic write needed if other threads read only the shared data?</a>, but it's not clear to me from there.</p>\n\n<p>EDIT:\n@Zulan's answer makes it clear what <code>atomic update</code> does, but in my case, I need to protect a read statement from a write to the same location done from <em>elsewhere</em> in the code. I don't need to protect the write from other writes (atomic write) as no other threads write to the location, and I don't need to protect read from read. How can I do that?</p>\n\n<p>EDIT2: I understand I may not have been clear. So a code snippet. What I have is an \"asynchronous\" iteration. When I read a location in the array <code>x</code> below, I only need an uncorrupted value; it may have been updated or not any number of times.</p>\n\n<pre><code>double *x;\n\n#pragma omp parallel for default(shared)\nfor(int i = 0; i &lt; sizeof_x; i++)\n{\n  int j = some_func1(i);\n  int k = some_func2(i);\n  double temp = some_const*x[j] + x[k];\n  x[i] = temp;\n}\n</code></pre>\n\n<p>Here, I don't need an atomic write for <code>x[i]</code> as it's only written to by one thread, and I don't want atomic reads for <code>x[j]</code> and <code>x[k]</code>, as simultaneous reads are no problem. But I want to ensure that when I read <code>x[j]</code> or <code>x[k]</code>, it's not being written to in that very clock cycle by another thread. Is this something I need to care about (which I think it is), and if yes, what to do about it?</p>\n"}, {"tags": ["c", "sockets", "httprequest", "httpresponse", "http-redirect"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1487720829, "post_id": 42379561, "comment_id": 71909470, "body": "A <code>301</code> redirect is a perfectly normal HTTP response. You are supposed to repeat the same HTTP request to the new URL provided in the response&#39;s <code>Location</code> header. For example, sending a request to <code>http:&#47;&#47;www.google.com</code> (note the missing trailing slash) might redirect you to <code>http:&#47;&#47;www.google.com&#47;</code> (note the extra trailing slash). There is a difference between a blank path component and a <code>&#39;&#47;&#39;</code> path component. You should normalize your input URLs before using them in HTTP requests. The path component in a normalized HTTP url always starts with a <code>&#47;</code>, it is never blank."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1487721022, "post_id": 42379561, "comment_id": 71909529, "body": "Also, the <code>Host</code> request header should state the hostname from the URL, not the IP address you are actually connecting to. So, if you have a URL for <code>http:&#47;&#47;www.google.com</code> and you resolve <code>www.google.com</code> to <code>173.194.203.105</code>, the <code>Host</code> header should be <code>Host: www.google.com</code> and not <code>Host: 173.194.203.105</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1487721151, "post_id": 42379561, "comment_id": 71909570, "body": "Please read the official HTTP 1.1 specification, <a href=\"https://tools.ietf.org/html/rfc2616\" rel=\"nofollow noreferrer\">RFC 2616</a> (and its successors RFCs 7230-7235).  HTTP is not a trivial protocol to implement from scratch.  You should do yourself a favor and use a pre-existing HTTP library, such as <a href=\"https://curl.haxx.se/libcurl/\" rel=\"nofollow noreferrer\">libcurl</a>."}], "owner": {"reputation": 583, "user_id": 5681423, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4bd0d071e106418f3ecfecbee23338c5?s=128&d=identicon&r=PG&f=1", "display_name": "joesid", "link": "https://stackoverflow.com/users/5681423/joesid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1487717702, "creation_date": 1487717702, "question_id": 42379561, "link": "https://stackoverflow.com/questions/42379561/create-http-get-in-c-return-301-redirect-using-ip-address", "title": "Create HTTP GET in C return 301 redirect using IP address", "body": "<p>I want to send a GET request to a page and retrieve it to use later to a crawler\nI have implemented my own D.N.S. resolver (like DIG command in LINUX) and I want to use the ip address to get the http page\nI have the following code</p>\n\n<pre><code>        typedef struct http_request\n        {\n            request_type req_type;\n            char* ip;\n            int port_number;\n            char* path;\n            char* data;\n            char* hostname;\n        }http_request;\n\n        typedef struct http_response\n        {\n            char* raw_response;\n            int status_code;\n            char* status_text;\n            char* body;\n            char* server_name;\n            int content_length;\n            char* content_type;\n        }http_response;\n    // main method\n    http_response* send_http_request(http_request* request) {\n        if (request == NULL) {\n            printf(\"HTTP request is NULL.\\n\");\n            return NULL;\n        }\n        http_response* response = (http_response*) malloc(sizeof(http_response));\n        if (response == NULL) {\n            exit(1);\n            return NULL;\n        }\n\n        char http_request_buffer[REQUEST_BUFF_SIZE];\n        memset(http_request_buffer, 0, REQUEST_BUFF_SIZE);\n        sprintf(http_request_buffer, \"GET /%s HTTP/1.1\\r\\nHost:%s\\r\\n\\r\\n\",\n                request-&gt;path, request-&gt;ip);\n        process_http_request(request, http_request_buffer, response);\n        return response;\n    }\nstatic int process_http_request(http_request* request,\n        char* http_request_buffer, http_response* response) {\n    int socketfd;\n    struct sockaddr_in socket_details;\n    char temp_buffer[TEMP_BUFF_SIZE];\n    char* http_response_buffer;\n    ssize_t bytes_sent = 0;\n    ssize_t total_bytes_sent = 0;\n    ssize_t bytes_received = 0;\n    ssize_t total_bytes_received = 0;\n    int status;\n\n    http_response_buffer = (char*) malloc(RESPONSE_BUFF_SIZE);\n    if (http_response_buffer == NULL) {\n        printf(\n                \"process_http_request: memory allocation failed for response buffer.\\n\");\n        return HTTP_ERROR_MEM_ALLOC_FAILED;\n    }\n    memset(http_response_buffer, 0, RESPONSE_BUFF_SIZE);\n\n    socketfd = socket(AF_INET, SOCK_STREAM, 0);\n    if (socketfd == -1) {\n        printf(\"process_http_request: socket creation failed.\\n\");\n        return HTTP_ERROR_SOCKET_CREATION_FAILED;\n    }\n\n    struct timeval timeout;\n    timeout.tv_sec = 5;\n    timeout.tv_usec = 0;\n    if (setsockopt(socketfd, SOL_SOCKET, SO_RCVTIMEO, (char *) &amp;timeout,\n            sizeof(timeout)) &lt; 0)\n        printf(\"process_http_request: socket option setting failed.\\n\");\n\n    bzero(&amp;socket_details, sizeof(socket_details));\n    socket_details.sin_family = AF_INET;\n    socket_details.sin_addr.s_addr = inet_addr(request-&gt;ip);\n    socket_details.sin_port = htons(request-&gt;port_number);\n\n    if (connect(socketfd, (struct sockaddr*) &amp;socket_details,\n            sizeof(struct sockaddr)) == -1) {\n        printf(\"process_http_request: Could not connect to the server.\\n\");\n        return HTTP_ERROR_SERVER_CONN_FAILED;\n    }\n\n    while (1) {\n        bytes_sent = send(socketfd, http_request_buffer,\n                strlen(http_request_buffer), 0);\n        if (bytes_sent &lt; 0) {\n            printf(\"process_http_request: error writing on socket\\n\");\n            close(socketfd);\n            return HTTP_ERROR_SOCKET_WRITE_FAILED;\n        } else {\n            printf(\n                    \"process_http_request: wrote %d bytes data on socket successfully.\\n\",\n                    (int) bytes_sent);\n        }\n        total_bytes_sent += (int) bytes_sent;\n        printf(\"process_http_request: total bytes sent = %d\\n\",\n                (int) total_bytes_sent);\n        if (total_bytes_sent == strlen(http_request_buffer))\n            break;\n    }\n\n    while (1) {\n        printf(\"process_http_request: receiving bytes from server\\n\");\n        memset(temp_buffer, 0, TEMP_BUFF_SIZE);\n\n        bytes_received = recv(socketfd, temp_buffer, TEMP_BUFF_SIZE, 0);\n\n        if (bytes_received == -1) {\n            if (total_bytes_received == 0) {\n                printf(\n                        \"process_http_request: Data could not be received from socket.\\n\");\n                close(socketfd);\n                return HTTP_ERROR_REC_FAILED;\n            } else {\n                printf(\n                        \"process_http_request: Timeout waiting for more data.\\n\");\n                break;\n            }\n        } else if (bytes_received &gt; 0) {\n            sprintf(http_response_buffer, \"%s%s\", http_response_buffer,\n                    temp_buffer);\n            total_bytes_received += bytes_received;\n            printf(\"process_http_request: total bytes received = %d\\n\",\n                    (int) total_bytes_received);\n        }\n        if (bytes_received == 0) {\n            printf(\"process_http_request: Data receiving finished.\\n\");\n            close(socketfd);\n            break;\n        }\n    }\n    printf(\"raw buffer=%s\", http_response_buffer);\n    response-&gt;raw_response = http_response_buffer;\n    status = process_http_response(http_response_buffer, response);\n    if (status == SUCCESS)\n        printf(\"process_http_request: HTTP response parsed successfully.\\n\");\n    else\n        printf(\n                \"process_http_request: HTTP response parsing encountered problem. \\n\");\n    return status;\n\n}\n</code></pre>\n\n<p>The problem is that in almost all cases return me a page with 301 redirect and a link .For example for google's ip return me a redirect page to <a href=\"http://www.google.com/\" rel=\"nofollow noreferrer\">http://www.google.com/</a> , and I want the page itself and I don't know what to do.\nSomeone please help.Thank you!</p>\n"}, {"tags": ["c", "string", "return", "token", "identifier"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1487717667, "post_id": 42379227, "comment_id": 71908326, "body": "also, change: <code>scanf(&quot;%s %s&quot;,&amp;a,&amp;b);</code> to <code>scanf(&quot;%s %s&quot;,a, b);</code>"}, {"owner": {"reputation": 1, "user_id": 7463898, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_mX7FxAi9NU/AAAAAAAAAAI/AAAAAAAAASY/m9m6RhTkrhg/photo.jpg?sz=128", "display_name": "Fabr&#237;cio Santana", "link": "https://stackoverflow.com/users/7463898/fabr%c3%adcio-santana"}, "edited": false, "score": 0, "creation_date": 1487718880, "post_id": 42379227, "comment_id": 71908793, "body": "I thought of a better way to formulate the question, it boils down to this: is it possible to compare an identifier to a string?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1487723279, "post_id": 42379227, "comment_id": 71910221, "body": "@Fabr&#237;cioSantana No. Identifiers only mean anything to the compiler. Your compiled program doesn&#39;t have identifiers in it."}], "owner": {"reputation": 1, "user_id": 7463898, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_mX7FxAi9NU/AAAAAAAAAAI/AAAAAAAAASY/m9m6RhTkrhg/photo.jpg?sz=128", "display_name": "Fabr&#237;cio Santana", "link": "https://stackoverflow.com/users/7463898/fabr%c3%adcio-santana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487720699, "creation_date": 1487716262, "question_id": 42379227, "link": "https://stackoverflow.com/questions/42379227/use-return-value-of-a-block-of-code-as-pure-text", "title": "Use return value of a block of code as &quot;pure text&quot;", "body": "<p>I don't know if this is the correct terminology, but I'd like to use the return value of a block of code (a token) as \"text\", here's what I mean:</p>\n\n<pre><code>#include &lt;stdio.h&gt;    \n\ntypedef struct a{\nchar *x;\n}A;\n\nint main(){\n\n    A name = {\"lorem\"};\n\n    char a[10]={}, b[10]={};\n\n    scanf(\"%s %s\",&amp;a,&amp;b)\n\n    if (b == a.x){  \n    }\n\n    return 0;    \n}\n</code></pre>\n\n<p>I altered the actual code completely in order to make it quick and easy. </p>\n\n<p>If the guy writes down \"name lorem\" in the console, I want the \"a\" inside the if statement to return \"name\", which is the identifier of the struct instance previously created, thus making it possible for me to access the member \"x\" of the struct, and then in this case, the <em>if</em> would return true.<br>\nIf you could suggest anything I'd be grateful : )</p>\n"}, {"tags": ["c", "struct", "atomic", "c11"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487715857, "post_id": 42378887, "comment_id": 71907563, "body": "<code>static state_t * const s_pCurrent = &amp;s_stateList[0];</code> This is a constraint violation. Not only is the pointer incompatible, it is a non-atomic pointer, pointing to an atomic type."}, {"owner": {"reputation": 43, "user_id": 7264919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2b5ec0bfbe3f680789270bbcb36894?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Valentine", "link": "https://stackoverflow.com/users/7264919/scott-valentine"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487717244, "post_id": 42378887, "comment_id": 71908139, "body": "Fixed that, but in any case, when the syntax is correct, I get no complaints from the compiler when I assign an atomic value reference to a non-atomic pointer (of the otherwise correct type)."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487717796, "post_id": 42378887, "comment_id": 71908370, "body": "Compiler doesn&#39;t specify the language, and should not be used as a source of Truth. Under 6.5.16.1 &#167;1, in the third paragraph: <i>and the type pointed to by the left has all the qualifiers of the type pointed to by the right;</i> Therefor the left pointer must have all qualifiers the right pointer does."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487718041, "post_id": 42378887, "comment_id": 71908473, "body": "Your code has undefined behavior, because it accesses a member of an atomic struct: <code>static state_t * const s_pCurrent = &amp;s_stateList.states[0];</code>, assuming the pointer gets dereferenced at some point. As I mentioned before, said pointer is missing the atomic qualifier."}, {"owner": {"reputation": 43, "user_id": 7264919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2b5ec0bfbe3f680789270bbcb36894?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Valentine", "link": "https://stackoverflow.com/users/7264919/scott-valentine"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487718542, "post_id": 42378887, "comment_id": 71908676, "body": "So there is no way to perform non-atomic reads on an atomic variable (at least according to the standard)?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487719263, "post_id": 42378887, "comment_id": 71908922, "body": "No. It also doesn&#39;t make sense. If you know that the non-atomic read is not causing a data-race, then there is no reason to have an atomic object in the first place. If there is a possibility of a data-race, any non-atomic read on an object would cause undefined behavior."}, {"owner": {"reputation": 43, "user_id": 7264919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2b5ec0bfbe3f680789270bbcb36894?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Valentine", "link": "https://stackoverflow.com/users/7264919/scott-valentine"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487721402, "post_id": 42378887, "comment_id": 71909641, "body": "I&#39;ll have to disagree. There is no problem performing unlocked reads on shared data in the case that the reader is also the only thread that modifies the data, but I can see why this does not fit with the C11 atomic model (the semantics seem similar <code>volatile</code>), but I think your point answers my second question for the most part. Any comments regarding the first?"}], "answers": [{"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487751056, "post_id": 42384645, "comment_id": 71920073, "body": "Scott had an interesting question. What would happen if you access an non-_Atomic pointer, that points to a, let&#39;s say, and object of type _Atomic int. The assignment itself to the pointer needs a cast, because of  6.5.16.1 &#167;1, but the standard doesn&#39;t say anything about access. Except for 6.5 &#167;7, that doesn&#39;t allow access (it&#39;s about aliasing) of non-atomic and atomic types. Since int and _Atomic int are not compatible and 6.5 &#167;7 doesn&#39;t have any exceptions for them. Is this correct? (Good answer btw.)"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1487754454, "post_id": 42384645, "comment_id": 71922245, "body": "Access an atomic through an non-atomic lvalue is undefined. What exactly will be going wrong when you do this is much platform dependend, but you can be sure that this is not portable at all. In particular that can have you subtle race conditions that happen very rarely and are difficult to trace. Generally casts in C are not a good idea, good code can do without, bad code usually has plenty."}, {"owner": {"reputation": 43, "user_id": 7264919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2b5ec0bfbe3f680789270bbcb36894?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Valentine", "link": "https://stackoverflow.com/users/7264919/scott-valentine"}, "edited": false, "score": 0, "creation_date": 1487804888, "post_id": 42384645, "comment_id": 71954842, "body": "Thanks for the answers. I have been replacing some locking with atomics in trivial (lock free) cases, and was looking into replacing locks around larger data structures. These were some of the questionable issues that came up. Glad I asked!"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1487746623, "creation_date": 1487746623, "answer_id": 42384645, "question_id": 42378887, "link": "https://stackoverflow.com/questions/42378887/partial-updates-to-complex-c11-atomic-types-and-non-atomic-read-optimizations/42384645#42384645", "title": "Partial updates to complex C11 atomic types and non-atomic read optimizations", "body": "<p>No this doesn't fit into C11's model for atomics, and for good reasons. <code>_Atomic</code> is only syntactically a qualifier, semantically an <code>_Atomic</code> is a new type. This is reflected by the fact that the standard allows that size and alignement of such types are different from those for the base.</p>\n\n<p>In your case of a wide atomic type, a permitted implementation of the atomic type is to add a hidden field to the <code>struct</code> that serves as a lock. Generally, such types are implemented as \"not lock-free\" that is with some hidden state (within the <code>struct</code> or seperately) that controls access to the data.</p>\n\n<p>The standard can only guarantee you racefreeness by stitching together an access model. If you ask your whole data to be accessible atomic (in the sense of indivisible operations on that whole data at once), the model only allows you exactly that.</p>\n\n<p>Accessing individual fields of an atomic object has undefined behavior. That means if your platform had specific properties it could allow you access to individual fields. You'd have to read up your platform's documentation and hope for the best, in particular that they don't change things from one version (compiler, processor, ...) to another.</p>\n"}], "owner": {"reputation": 43, "user_id": 7264919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2b5ec0bfbe3f680789270bbcb36894?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Valentine", "link": "https://stackoverflow.com/users/7264919/scott-valentine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487746623, "creation_date": 1487714663, "last_edit_date": 1487721737, "question_id": 42378887, "link": "https://stackoverflow.com/questions/42378887/partial-updates-to-complex-c11-atomic-types-and-non-atomic-read-optimizations", "title": "Partial updates to complex C11 atomic types and non-atomic read optimizations", "body": "<p>I think the easy way to describe my question is to demonstrate it in code, so here is a contrived example in C to highlight the issues I am interested in answering:</p>\n\n<pre><code>// Just some complex user defined type\ntypedef struct {\n    ...\n} state_t;\n\ntypedef struct {\n    state_t states[16];\n} state_list_t;\n\nstatic _Atomic state_list_t s_stateList;\n// For non-atomic reads\nstatic state_t * const s_pCurrent = &amp;s_stateList.states[0];\n\n// Called from external threads\nvoid get_state(state_list_t * pStateList)\n{\n    *pStateList = atomic_load(&amp;s_stateList);\n}\n\n// Only called by 'this' thread\nstatic void update_state(struct state_data_t const * pData)\n{\n    state_list_t stateList = atomic_load(&amp;s_stateList);\n    for (int i = 0; i &lt; 16; i++)\n    {\n        // Do some updating on the data\n        do_transition(&amp;stateList[i], pData);\n    }\n    atomic_store(&amp;s_stateList, stateList);\n}\n\n// Only called by 'this' thread\nstatic void apply_state(state_t const * pState)\n{\n    atomic_store(&amp;s_stateList[0], *pState);\n}\n\n// Only called by this thread\nstatic bool check_state()\n{\n    // Check (read) some values in the current state\n    return isOkay(s_pCurrent);\n}\n</code></pre>\n\n<p>First, my apologies for any syntax errors, but this should get the point across...</p>\n\n<p>The first two functions are pretty straight forward usage of the C11 atomics, namely one thread is reading a value that another one is writing. My specific questions are really regarding the last two functions, apply_state, and check_state, and it really just boils down to whether these are okay things to do. </p>\n\n<p>In apply_state, you can see that it is only updating part of the structure atomically, specifically, the first element of an array. It is my understanding that essentially every element of the _Atomic s_stateList is considered atomic (much like volatile), so the compiler is fine with the atomic_store call, but can this happen while another thread is 'atomically' reading from the object (i.e. in get_state), or is the synchronization essentially equivalent to a locking / unlock <strong>the same</strong> mutex in each call? I could see how it is possible that since it is basically a different variable (well, okay same address, but what if I used states[1]?) it could result in a different mutex being used. Also, what happens if state_t happens to be lock free?</p>\n\n<p><s>I'm more confident that the check_state function is an okay thing to do here, because it only performs a read on an object that is modified only by the same thread, but I'm wondering if I'm missing anything here. I've just recently discovered that accessing an atomic variable directly (I think via assignment or function argument) is treated exactly like a call to atomic_load() or atomic_store(), so I am wondering if keeping a private reference for non-atomic reads is a worthwhile optimization, or if the compiler is otherwise smart enough to accomplish similar optimization on its own.</s></p>\n\n<p>Edit: The result is undefined when dereferencing a non-atomic pointer to an atomic value.</p>\n"}, {"tags": ["c", "memory", "type-conversion", "byte", "bit"], "comments": [{"owner": {"reputation": 1562, "user_id": 2789762, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7d29562a2ce01fbd9bb3e30191aeb251?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2789762/kevin"}, "edited": false, "score": 0, "creation_date": 1487712432, "post_id": 42378261, "comment_id": 71905703, "body": "Floats are encoded completely differently than integers. Even if you were converting between an integer type and a floating point type of the same size, the resulting floating point would consist of different bits. It&#39;s not a straightforward bitwise operation."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1487712542, "post_id": 42378261, "comment_id": 71905760, "body": "You shouldn&#39;t think of it in terms of representation, but in terms of value. If the value of the <code>int</code> fits into the admissible range of type <code>double</code> everything is fine.  If it doesn&#39;t, you are in trouble."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1487712662, "post_id": 42378261, "comment_id": 71905832, "body": "it&#39;s implementation defined. some machines do load-load-convert-compare, load-convert-compare, load-convert-save-compare, some do load-load-compare.... load double &gt; load int &gt; int to double &gt; double-double compair might be the most commonly used now, since FPUs are mostly load-store and register-register addressing."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1487713948, "post_id": 42378261, "comment_id": 71906594, "body": "When it says converted, it is only talking about a temporary value used for the comparison.  The original variable in memory is unchanged."}], "answers": [{"tags": [], "owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "is_accepted": false, "score": 1, "last_activity_date": 1487716963, "creation_date": 1487716963, "answer_id": 42379398, "question_id": 42378261, "link": "https://stackoverflow.com/questions/42378261/c-how-is-arithmetic-conversions-made-on-memory-level/42379398#42379398", "title": "C - How is arithmetic conversions made on memory level?", "body": "<p>For most cases (omitting some obscure microcontrollers) there will be no memory needed at all. Everything will be done on register level. Even if type being processed cannot be held in single register it will be split into multiple registers and processed accordingly. </p>\n"}, {"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": false, "score": 0, "last_activity_date": 1487730978, "creation_date": 1487730978, "answer_id": 42381691, "question_id": 42378261, "link": "https://stackoverflow.com/questions/42378261/c-how-is-arithmetic-conversions-made-on-memory-level/42381691#42381691", "title": "C - How is arithmetic conversions made on memory level?", "body": "<p>Comparisons of this type usually take place between hardware registers in the CPU. Your memory value will be loaded into a register with the conversion taking place in the load.</p>\n\n<p>You will get a sequence something like this:</p>\n\n<p>CVTWL  MEMORY_LOCATION, RO\n   COMPL  RO, R1</p>\n"}], "owner": {"reputation": 97, "user_id": 7359399, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6dc34e3e4c78685ca0642d494e10cfb3?s=128&d=identicon&r=PG&f=1", "display_name": "Donkey King", "link": "https://stackoverflow.com/users/7359399/donkey-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1487730978, "creation_date": 1487712200, "last_edit_date": 1487712765, "question_id": 42378261, "link": "https://stackoverflow.com/questions/42378261/c-how-is-arithmetic-conversions-made-on-memory-level", "title": "C - How is arithmetic conversions made on memory level?", "body": "<p>Say that I am comparing an int and a short int. According to the second edition of \"The C Programming Language\" written on page 173 the short int will be converted into an int, which is 4 bytes instead of the short integers 2 bytes on my system.</p>\n\n<p><strong>My question is:</strong> How will this be done on memory level? Will the short integer get 2 bytes added to it or will the data be copied to a completely different memory location?</p>\n\n<p>I just edited from comparing double and int to short and int. Apologize for inconvenience.</p>\n"}, {"tags": ["c", "language-lawyer", "variadic-functions"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1487712105, "post_id": 42378212, "comment_id": 71905522, "body": "In that case, not compatible is a size issue, not a <code>const</code> issue. when size is incorrect, you shift the va_args scan and it crashes badly. Had it once when passing 0 instead of <code>NULL</code> on a 64 bit machine."}], "answers": [{"comments": [{"owner": {"reputation": 5058, "user_id": 1653187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3942782a314cdc7d6a7364cd32bfd3b3?s=128&d=identicon&r=PG", "display_name": "nickie", "link": "https://stackoverflow.com/users/1653187/nickie"}, "edited": false, "score": 1, "creation_date": 1487713114, "post_id": 42378315, "comment_id": 71906108, "body": "I agree that there&#39;s no real problem here, because the two pointers are bound to have identical representations.  But if it were the other way round (a <code>const char*</code> treated as a <code>char*</code> and possibly assigned to), I&#39;d be more happy with undefined behavior.  According to the standard, however, it seems that this is not a matter of representation but of type compatibility, as defined there."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1487713191, "post_id": 42378315, "comment_id": 71906165, "body": "My assumption was based by  C11 6.7.3/10: <code>For two qualified types to be compatible, both shall have the identically qualified version of a compatible type;</code>, as well as <a href=\"http://stackoverflow.com/a/18458745/586873\">this</a> answer. Neverthless, I agree, that it is more like theoretical issue, because the <code>const</code> representation is the same, as you pointed out."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1487713331, "post_id": 42378315, "comment_id": 71906247, "body": "@GrzegorzSzpetkowski - But you do not have two qualified types. The pointers are not qualified, only the pointees are. The standard is too vague on this..."}, {"owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1487713672, "post_id": 42378315, "comment_id": 71906429, "body": "@StoryTeller: What about C11 6.7.6.1/2: <code>For two pointer types to be compatible, both shall be identically qualified and both shall be pointers to compatible types.</code>? This would indicate that <code>char *</code> and <code>const char *</code> are not compatible types."}, {"owner": {"reputation": 5058, "user_id": 1653187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3942782a314cdc7d6a7364cd32bfd3b3?s=128&d=identicon&r=PG", "display_name": "nickie", "link": "https://stackoverflow.com/users/1653187/nickie"}, "reply_to_user": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 0, "creation_date": 1487713730, "post_id": 42378315, "comment_id": 71906464, "body": "Yes, @GrzegorzSzpetkowski, that&#39;s what I think too.  (End of lawyer mode.)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "edited": false, "score": 1, "creation_date": 1487713865, "post_id": 42378315, "comment_id": 71906537, "body": "@GrzegorzSzpetkowski - Yes, it would seem so. Since when you follow the rabbit down the hole it all boils down to the paragraph nickie quoted. I wish the standard committee would address this, if they don&#39;t plan to already..."}, {"owner": {"reputation": 5058, "user_id": 1653187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3942782a314cdc7d6a7364cd32bfd3b3?s=128&d=identicon&r=PG", "display_name": "nickie", "link": "https://stackoverflow.com/users/1653187/nickie"}, "edited": false, "score": 0, "creation_date": 1487714046, "post_id": 42378315, "comment_id": 71906657, "body": "I&#39;m upvoting @StoryTeller&#39;s answer because I agree that, in practice, this program should be safe and the standard for <code>va_arg</code> should be made less conservative."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1487714220, "last_edit_date": 1487714220, "creation_date": 1487712388, "answer_id": 42378315, "question_id": 42378212, "link": "https://stackoverflow.com/questions/42378212/does-const-mismatch-invoke-ub-when-pointer-argument-is-received-by-va-arg/42378315#42378315", "title": "Does const mismatch invoke UB when pointer argument is received by va_arg?", "body": "<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.5p28\" rel=\"nofollow noreferrer\">n1570/6.2.5p28</a> seems to suggest this should be okay in practice:</p>\n\n<blockquote>\n  <p>...Similarly, pointers to qualified or unqualified versions of compatible types shall have the same representation and alignment requirements...</p>\n</blockquote>\n\n<p>Since <code>char</code> is compatible with itself, a pointer to char will have the same representation as a pointer to a const char. Since a variable argument function essentially assumes a representation of each subsequent parameter, this appears at first well defined.</p>\n\n<p>As for the other way around, if you use a pointer to char so as to modify a const char, that is indeed UB per <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.3p6\" rel=\"nofollow noreferrer\">n1570/6.7.3p6</a>:</p>\n\n<blockquote>\n  <p>If an attempt is made to modify an object defined with a const-qualified type through use of an lvalue with non-const-qualified type, the behavior is undefined.</p>\n</blockquote>\n\n<hr>\n\n<p>To continue the analysis from the answer you linked to in the comments, <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.6.1p2\" rel=\"nofollow noreferrer\">n1570/6.7.6.1p2</a>:</p>\n\n<blockquote>\n  <p>For two pointer types to be compatible, both shall be identically qualified and both shall be pointers to compatible types.</p>\n</blockquote>\n\n<p>Since both pointer types are themselves non const, they are identically qualified, the only question that remains is if <code>const char</code> is compatible with <code>char</code> for our purposes. </p>\n\n<p>And it appears that they are not... as nickie pointed out. So on the one hand, this could be construed as UB.</p>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1487714185, "post_id": 42378463, "comment_id": 71906749, "body": "I already upvoted, but I agree for sure that the section about <code>va_arg</code> could do with a clarification for this"}], "tags": [], "owner": {"reputation": 5058, "user_id": 1653187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3942782a314cdc7d6a7364cd32bfd3b3?s=128&d=identicon&r=PG", "display_name": "nickie", "link": "https://stackoverflow.com/users/1653187/nickie"}, "is_accepted": true, "score": 3, "last_activity_date": 1487715828, "last_edit_date": 1487715828, "creation_date": 1487712985, "answer_id": 42378463, "question_id": 42378212, "link": "https://stackoverflow.com/questions/42378212/does-const-mismatch-invoke-ub-when-pointer-argument-is-received-by-va-arg/42378463#42378463", "title": "Does const mismatch invoke UB when pointer argument is received by va_arg?", "body": "<p>Section 6.2.7 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C11 language standard</a> defines <em>type compatibility</em>, section 6.7.6.1 further specifies it for pointer declarators and section 6.7.3 for type qualifiers.  The latter (constraint 10) says:</p>\n\n<blockquote>\n  <p>For two qualified types to be compatible, both shall have the\n  identically qualified version of a compatible type; the order of type\n  qualifiers within a list of specifiers or qualifiers does not affect\n  the specified type.</p>\n</blockquote>\n\n<p>Also, section 6.7.6.1 says:</p>\n\n<blockquote>\n  <p>For two pointer types to be compatible, both shall be identically qualified and both shall be pointers to compatible types.</p>\n</blockquote>\n\n<p>According to these two, I understand that <code>const char*</code> and <code>char*</code> are not compatible (because <code>const char</code> and <code>char</code> are not compatible).  According to the definition of <code>va_arg</code> in section 7.16.1.1 which requires type compatibility (with a couple of exceptions that do not apply here), I believe that indeed you have undefined behavior in this case.</p>\n\n<p>Now, if we stop playing the lawyer, I don't see how it could be harmful to treat a <code>char*</code> as a <code>const char*</code> --- it would only limit the legal operations.  Therefore, I believe that the specification of <code>va_arg</code> is too conservative.</p>\n"}, {"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 1, "last_activity_date": 1487716852, "last_edit_date": 1487716852, "creation_date": 1487715207, "answer_id": 42378990, "question_id": 42378212, "link": "https://stackoverflow.com/questions/42378212/does-const-mismatch-invoke-ub-when-pointer-argument-is-received-by-va-arg/42378990#42378990", "title": "Does const mismatch invoke UB when pointer argument is received by va_arg?", "body": "<p>Yes, they are not compatible and using va_arg with type const char* when the actual type is char*, and vice-versa, is undefined behavior.</p>\n\n<p>A type is only compatible with itself<sup>1</sup>.</p>\n\n<p>Additionally, the section on qualifiers, const being one, supports this<sup>2</sup>.</p>\n\n<hr>\n\n<p>(Quoted from ISO/IEC 9899:201x)</p>\n\n<p><sup>1</sup> (6.2.7 Compatible type and composite type 1)<br>\nTwo types have compatible type if their types are the same</p>\n\n<p><sup>2</sup> (6.7.3 Type qualifiers 10)<br>\nFor two qualified types to be compatible, both shall have the identically qualified version\nof a compatible type; the order of type qualifiers within a list of specifiers or qualifiers\ndoes not affect the specified type.</p>\n"}], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 42378463, "answer_count": 3, "score": 5, "last_activity_date": 1487716852, "creation_date": 1487712016, "last_edit_date": 1487716305, "question_id": 42378212, "link": "https://stackoverflow.com/questions/42378212/does-const-mismatch-invoke-ub-when-pointer-argument-is-received-by-va-arg", "title": "Does const mismatch invoke UB when pointer argument is received by va_arg?", "body": "<p>I noticed some potential issue with <code>va_arg</code> macro, that is used to receive an unnamed parameter from variadic function. Consider following, simplified example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\nvoid foo(int n, ...)\n{\n    va_list ap;  \n    const char *s;\n\n    va_start(ap, n);\n    for (s = va_arg(ap, const char *); *s != '\\0'; s++)\n        putchar(*s);\n    va_end(ap);\n}\n\nint main(void)\n{\n    char str[] = \"xyz\";\n    foo(1, str);\n    return 0;\n}\n</code></pre>\n\n<p>The reference for <a href=\"http://en.cppreference.com/w/cpp/utility/variadic/va_arg\" rel=\"nofollow noreferrer\"><code>va_arg</code></a> macro states that (emphasis mine):</p>\n\n<blockquote>\n  <p>If va_arg is called when there are no more arguments in ap, or if the\n  type of the next argument in ap (after promotions) <strong>is not compatible\n  with T, the behavior is undefined</strong> (...)</p>\n</blockquote>\n\n<p>My understanding is that <code>const char *</code> and <code>char *</code> types are <em>not</em> compatible. When <code>char</code> array is passed to the <code>foo</code>, in form of <code>char</code> pointer (that is unchanged by default argument promotions), then the expression, that assumes const-qualified pointer:</p>\n\n<pre><code>s = va_arg(ap, const char *)\n</code></pre>\n\n<p>could invoke \"technical\" UB. The same situation would arise, when <code>arr</code> is defined as <code>const</code> array, and the argument is received as <code>char *</code>, as well as for other types e.g. <code>int *</code> and <code>const int *</code>.</p>\n"}, {"tags": ["c", "file", "pipe", "child-process"], "comments": [{"owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "edited": false, "score": 1, "creation_date": 1487713094, "post_id": 42378185, "comment_id": 71906094, "body": "Split your code into functions. This will make debugging easier."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7601055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a08546b8f9085940650fe61cf90cde8?s=128&d=identicon&r=PG&f=1", "display_name": "user7601055", "link": "https://stackoverflow.com/users/7601055/user7601055"}, "edited": false, "score": 0, "creation_date": 1487717383, "post_id": 42379137, "comment_id": 71908200, "body": "I was given that line of the file is at max 256 characters and name of the file is at max 64 characters and I allocate 400 so it&#39;s more than enough. And thanks I will correct them."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1487715855, "creation_date": 1487715855, "answer_id": 42379137, "question_id": 42378185, "link": "https://stackoverflow.com/questions/42378185/cannot-get-every-line-of-file-with-pipes/42379137#42379137", "title": "Cannot get every line of file with pipes", "body": "<p>I see several minor problems, and two huge ones:</p>\n\n<ul>\n<li><code>getline()</code> and <code>read()</code> both return <code>ssize_t</code>, not <code>int</code>.  They are <strong>not</strong> the same.</li>\n<li><code>strcat(outputdata,\"\\0\");</code> does nothing.  If <code>outputdata</code> is already properly terminated, it's not needed, and if <code>outputdata</code> is not already properly terminated it's undefined behavior.</li>\n<li>You're not providing enough space for a <code>'\\0'</code> terminator in <code>readmsg</code> - you can read up to <code>BUFFER_SIZE</code> bytes, but <code>readmsg[BUFFER_SIZE] = 0;</code> is outside the buffer allocated.  This is undefined behavior.</li>\n<li>You can't be sure all your data actually fits into <code>outputdata</code>.  You keep stuffing more and more there no matter how much can actually fit.  If you overrun <code>outputdata</code>, you're again in undefined behavior.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 7601055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a08546b8f9085940650fe61cf90cde8?s=128&d=identicon&r=PG&f=1", "display_name": "user7601055", "link": "https://stackoverflow.com/users/7601055/user7601055"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487717422, "creation_date": 1487711946, "last_edit_date": 1487717422, "question_id": 42378185, "link": "https://stackoverflow.com/questions/42378185/cannot-get-every-line-of-file-with-pipes", "title": "Cannot get every line of file with pipes", "body": "<p>I'm trying to read files and return lines matching a keyword with children processes and communicate these to the parent, order doesn't matter. </p>\n\n<p>My first question is: Is it possible to use only 1 pipe or the first process to finish will close the pipe?</p>\n\n<p>My second question is that I have created a pipe for each child and still the parent doesn't read all of them, just shows all lines matching a keyword in the first file and first line matching of second file and stops.(I have tried with only 2 files but that's not the issue)</p>\n\n<p>Assume all file opens and closes work ok. I have a check for all file opens, pipe() and fork(). The rest is not checked.</p>\n\n<p>My code is as below: </p>\n\n<pre><code>#include \"commons.h\"\n//efmalloc is error-free malloc\n\nint main(int argc, char *argv[]){\n    int numargs = argc-1;\n    int fds[numargs][2];\n    pid_t n;\n\n    for (int i = 0; i &lt; numargs; i++) \n        pipe(fds[i]);\n    for(int i = 0; i &lt; argc-1;i++){\n        n = fork();\n        if(n==0){\n            close(fds[i][0]);//closing the read end of the pipe for the children\n            FILE * fs = fopen(argv[i+1],\"r\");\n            //// SETTING UP THE PARAMETERS FOR READING ////\n            char * outputdata = (char*) efmalloc(400*sizeof(char));\n            *outputdata = '\\0';\n            char * line = NULL;\n            size_t len = 0;\n            int read = getline(&amp;line, &amp;len, fs);\n            int currentline = 1;\n            ////    END OF READINGS SETUP ////\n\n            while (read &gt;= 0) {\n                if(strstr(line,\"keyword\") != NULL) {\n                    strcat(outputdata,argv[i+1]);\n                    strcat(outputdata,line);\n                    strcat(outputdata,\"\\0\");\n                    //Write the data in the pipe in here\n                    write(fds[i][1],outputdata,(strlen(outputdata)+1));\n                    *outputdata = '\\0';\n                }\n                read = getline(&amp;line, &amp;len, fs);\n                currentline++;\n                }\n            free(outputdata);\n            fclose(fs);\n            close(fds[i][1]);   //now closing the write end of the pipe\n            exit(0);\n        }\n    }\n    /***** PARENT PROCESS *****/\n    if(n!=0) {\n        for (int index = 0; index &lt; numargs; index++)\n            close(fds[index][1]);\n        char * readmsg = (char*)efmalloc(BUFFER_SIZE*sizeof(char));\n        for(int j = 0; j &lt; numargs; j++){\n            int bytes = read(fds[j][0],readmsg,BUFFER_SIZE);\n            while(bytes&gt;0){\n                readmsg[bytes] = 0;\n                printf(\"%s\\n\", readmsg);\n                bytes = read(fds[j][0],readmsg,BUFFER_SIZE);\n            }\n        }\n        for(int i = 0; i &lt; numargs;i++)\n                wait(NULL);\n    }\n    return 0;\n}\n</code></pre>\n"}]