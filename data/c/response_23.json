[{"tags": ["c", "multithreading", "segmentation-fault", "pthreads", "atoi"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1434585580, "post_id": 30904351, "comment_id": 49847326, "body": "Perhaps <code>strtok</code> is returning <code>NULL</code>? <code>atoi</code> doesn&#39;t like being called with <code>NULL</code>."}, {"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "reply_to_user": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "edited": false, "score": 0, "creation_date": 1434585944, "post_id": 30904351, "comment_id": 49847401, "body": "@Tim3880 i want to split a string in to 2 sub string from a specific character and i learn this from: <a href=\"http://stackoverflow.com/questions/2523467/how-to-split-a-string-to-2-strings-in-c\" title=\"how to split a string to 2 strings in c\">stackoverflow.com/questions/2523467/&hellip;</a>"}, {"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "edited": false, "score": 0, "creation_date": 1434586074, "post_id": 30904351, "comment_id": 49847431, "body": "the pair temp1 = strtok(sumBuff[sumCounter-1], search) ;              operand2 = atoi(strtok(NULL, search)); if the seach be &quot;+&quot;, split the string in to 2 sub string which have the two operands right and left to the +"}, {"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "reply_to_user": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "edited": false, "score": 0, "creation_date": 1434586237, "post_id": 30904351, "comment_id": 49847475, "body": "@Tim3880 when i just run code with one of the threads(Sub or Sum)atoi has no problem"}, {"owner": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "edited": false, "score": 4, "creation_date": 1434586430, "post_id": 30904351, "comment_id": 49847511, "body": "i don&#39;t think strtok is thread safe and you can add checking before the atoi calls to catch unexpected results. At least, you can avoid segfault. &quot;The strtok() function uses a static buffer while parsing, so it&#39;s not thread safe. Use strtok_r() if this matters to you.&quot; check <a href=\"http://linux.die.net/man/3/strtok_r\" rel=\"nofollow noreferrer\">linux.die.net/man/3/strtok_r</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1434591263, "post_id": 30904351, "comment_id": 49848560, "body": "Even checking before the <code>atoi</code> call doesn&#39;t fix <code>strtok</code> not being thread-safe"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1434591290, "post_id": 30904351, "comment_id": 49848565, "body": "<code>atoi</code> causes undefined behaviour for some inputs; to avoid this use <code>strtol</code>. (Although it is more likely that your issue is the strtok here)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1434595314, "post_id": 30904351, "comment_id": 49849512, "body": "<code>read = getline(&amp;line, &amp;len, sumfp) ; isSum = strchr(line, &#39;+&#39;) ;</code> is not safe.  Do not use <code>line</code>, unitl checking for an expected value of <code>read</code>."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 2, "creation_date": 1434658086, "post_id": 30904351, "comment_id": 49886505, "body": "Yet another bug is using <code>while (!feof(sumfp))</code> because EOF is a condition that&#39;s only set <i>after</i> an I/O operation, not before. That loop will execute at least once, even in the case of an empty file."}], "owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 728, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434657555, "creation_date": 1434585223, "last_edit_date": 1434657555, "question_id": 30904351, "link": "https://stackoverflow.com/questions/30904351/segmentation-fault-when-using-atoi", "title": "segmentation fault when using atoi", "body": "<p>My code:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;time.h&gt;\n#define BUFFER_SIZE 5\n#define TRUE 1\nint numberOfLines ;\nint sumCounter, subCounter, mulCounter, divCounter ;\nint sumFileEnd, subFileEnd, mulFileEnd, divFileEnd ;\npthread_t *tid ;\n\nclock_t begin, end;\ndouble time_spent;\n\nsem_t sumfull, sumEmpty ;\nsem_t subfull, subEmpty ;\n//sem_t mulfull, mulEmpty ;\n//sem_t divfull, divEmpty ;\n//sem_t outfull, outEmpty ;\n\nchar sumBuff [5][25] ;\nchar subBuff [5][25] ;\n//char mulBuff [] ;\n//char divBuff [] ;\n//char outBuff [] ;\n\npthread_mutex_t sumMutex ;\npthread_mutex_t subMutex ;\n\nvoid initData(){\n        pthread_mutex_init(&amp;sumMutex, NULL)      ;\n        sem_init(&amp;sumfull, 0, 0) ;\n        sem_init(&amp;sumEmpty, 0, BUFFER_SIZE) ;\n        sem_init(&amp;subfull, 0, 0) ;\n        sem_init(&amp;subEmpty, 0, BUFFER_SIZE) ;\n\n        sumCounter = subCounter = mulCounter = divCounter = 0 ;\n        sumFileEnd = subFileEnd = mulFileEnd = divFileEnd = 0 ;\n}\n\nvoid *plusReadThread(){\n        printf(\"Enter to the plusReadThread\\n\");\n        FILE *sumfp = fopen(\"sample.txt\",\"r\");\n        char * line = NULL;\n        size_t len = 0;\n        ssize_t read;\n        char *isSum ;\n        int lineNumber = 1 ;\n        if (lineNumber == 1){\n                read = getline(&amp;line, &amp;len, sumfp) ;\n                lineNumber ++ ;\n        }\n        while (!feof(sumfp)){\n                printf(\"Enter to the while of plusReadThread\\n\");\n                read = getline(&amp;line, &amp;len, sumfp) ;\n                isSum = strchr(line, '+') ;\n                if (isSum != NULL){\n                        printf(\"Down on sumEmpty\\n\");\n                        sem_wait(&amp;sumEmpty);\n                        pthread_mutex_lock(&amp;sumMutex) ;\n                        printf(\"Lock the mutex in plusReadThread\\n\");\n                        if(sumCounter &lt; BUFFER_SIZE){\n                                printf(\"Counter was &lt; 5 in plusReadThread\\n\");\n                                char temp[20] ;\n                                sprintf(temp, \"%d\", lineNumber);\n                                strcat(temp, \".\");\n                                strcat (temp, line);\n                                printf(\"lineNumber is %d line content is %s\", lineNumber, line );\n                                strcpy(sumBuff[sumCounter], temp);\n                                printf(\"Copied the line in to the sumBuff\\n\");\n                                printf(\"sumCounter = %d sumBuff[%d] = %s\",sumCounter, sumCounter, sumBuff[sumCounter] );\n                                sumCounter ++;\n                                printf(\"sumCounter changed to %d\\n\", sumCounter);\n                        }\n                        pthread_mutex_unlock(&amp;sumMutex);\n                        printf(\"Unlock the mutex in plusReadThread\\n\");\n                        sem_post(&amp;sumfull);\n                        printf(\"Signal on sumfull\\n\");\n                }\n                lineNumber ++;\n        }\n        if (feof(sumfp))\n                sumFileEnd = 1;\n        fclose(sumfp);\n}\nvoid *plusExec(){\n        printf(\"Enter to the plusExec\\n\");\n        char *search = \"+\" ;\n        char *temp1;\n        char *temp2;\n        int operand1 ;\n        int operand2 ;\n        int result ;\n        while (!sumFileEnd || sumCounter!=0){\n                printf(\"Enter to the plusExec while\\n\");\n                printf(\"Here sumCounter is %d \\n\", sumCounter);\n                sem_wait(&amp;sumfull);\n                pthread_mutex_lock(&amp;sumMutex);\n                printf(\"Lock the mutex in plusExec\\n\");\n                temp1 = strtok(sumBuff[sumCounter-1], search) ;\n                operand2 = atoi(strtok(NULL, search));\n                temp2 = strtok(temp1, \".\") ;\n                operand1 = atoi(strtok(NULL, \".\")) ;\n                result = operand1 + operand2 ;\n                printf(\"%d %d\\n\", atoi(temp2) ,result);\n                sumCounter --;\n                sem_post(&amp;sumEmpty);\n                pthread_mutex_unlock(&amp;sumMutex);\n                printf(\"Unlock the mutex in plusReadThread\\n\");\n        }\n}\n\nvoid *subReadThread(){\n        printf(\"Enter to the subReadThread\\n\");\n        FILE *subfp = fopen(\"sample.txt\",\"r\");\n        char * line = NULL;\n        size_t len = 0;\n        ssize_t read;\n        char *isSub ;\n        int lineNumber = 1 ;\n        if (lineNumber == 1){\n                read = getline(&amp;line, &amp;len, subfp) ;\n                lineNumber ++ ;\n        }\n        while (!feof(subfp)){\n                printf(\"Enter to the while of subReadThread\\n\");\n                read = getline(&amp;line, &amp;len, subfp) ;\n                isSub = strchr(line, '-') ;\n                if (isSub != NULL){\n                        printf(\"Down on subEmpty\\n\");\n                        sem_wait(&amp;subEmpty);\n                        pthread_mutex_lock(&amp;subMutex) ;\n                        printf(\"Lock the mutex in subReadThread\\n\");\n                        if(subCounter &lt; BUFFER_SIZE){\n                                printf(\"Counter was &lt; 5 in subReadThread\\n\");\n                                char temp[20] ;\n                                sprintf(temp, \"%d\", lineNumber);\n                                strcat(temp, \".\");\n                                strcat (temp, line);\n                                printf(\"lineNumber is %d line content is %s\", lineNumber, line );\n                                strcpy(subBuff[subCounter], temp);\n                                printf(\"Copied the line in to the subBuff\\n\");\n                                printf(\"subCounter = %d subBuff[%d] = %s\",subCounter, subCounter, subBuff[subCounter] );\n                                subCounter ++;\n                                printf(\"subCounter changed to %d\\n\", subCounter);\n                        }\n                        pthread_mutex_unlock(&amp;subMutex);\n                        printf(\"Unlock the mutex in subReadThread\\n\");\n                        sem_post(&amp;subfull);\n                        printf(\"Signal on subfull\\n\");\n                }\n                lineNumber ++;\n        }\n        if (feof(subfp))\n                subFileEnd = 1;\n        fclose(subfp);\n}\nvoid *subExec(){\n        printf(\"Enter to the subExec\\n\");\n        char *search = \"-\" ;\n        char *temp1;\n        char *temp2;\n        int operand1 ;\n        int operand2 ;\n        int result ;\n        while (!subFileEnd || subCounter!=0){\n                printf(\"Enter to the subExec while\\n\");\n                printf(\"Here subCounter is %d \\n\", subCounter);\n                sem_wait(&amp;subfull);\n                pthread_mutex_lock(&amp;subMutex);\n                printf(\"Lock the mutex in subExec\\n\");\n                temp1 = strtok(subBuff[subCounter-1], search) ;\n                operand2 = atoi(strtok(NULL, search));\n                temp2 = strtok(temp1, \".\") ;\n                operand1 = atoi(strtok(NULL, \".\")) ;\n                result = operand1 - operand2 ;\n                printf(\"%d %d\\n\", atoi(temp2) ,result);\n                subCounter --;\n                sem_post(&amp;subEmpty);\n                pthread_mutex_unlock(&amp;subMutex);\n                printf(\"Unlock the mutex in subReadThread\\n\");\n        }\n}\n\nint main (int argc, char* argv []){\n        begin = clock();\n        FILE *fp = fopen(\"sample.txt\", \"r\") ;\n        fscanf(fp, \"%d\", &amp;numberOfLines) ;\n        fclose(fp) ;\n\n        initData() ;\n        tid = (pthread_t*)malloc(4*sizeof(pthread_t)) ;\n        pthread_create(&amp;tid[0],NULL,plusReadThread,NULL);\n        pthread_create(&amp;tid[1],NULL,plusExec,NULL);\n        pthread_create(&amp;tid[2],NULL,subReadThread,NULL);\n        pthread_create(&amp;tid[3],NULL,subExec,NULL);\n\n        pthread_join(tid[0] , NULL);\n        pthread_join(tid[1] , NULL);\n        pthread_join(tid[2] , NULL);\n        pthread_join(tid[3] , NULL);\n\n        end = clock();\n        time_spent = (double)(end - begin) / CLOCKS_PER_SEC;\n        printf(\"%F\\n\", time_spent);\n        exit(0);\n}\n</code></pre>\n\n<p>When I run sumReadThread(and also sumExec) seperatly, I don't get any segmentation fault (same status when using subReadThread and subExec). But when I use them together I get segmentation fault and this is the stack trace which says it is from atoi():</p>\n\n<pre><code>#0  0x00007ffff7834517 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#1  0x00007ffff7830f60 in atoi () from /lib/x86_64-linux-gnu/libc.so.6\n#2  0x0000000000400f53 in plusExec () at cm.c:84\n#3  0x00007ffff7bc4182 in start_thread ()\n   from /lib/x86_64-linux-gnu/libpthread.so.0\n#4  0x00007ffff78f147d in clone () from /lib/x86_64-linux-gnu/libc.so.6\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 139130, "user_id": 141172, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vuodg.jpg?s=128&g=1", "display_name": "Eric J.", "link": "https://stackoverflow.com/users/141172/eric-j"}, "edited": false, "score": 8, "creation_date": 1434585162, "post_id": 30904312, "comment_id": 49847225, "body": "You&#39;re already using gdb.  How about stepping through execution line by line until you see exactly where you get the error?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1434590369, "post_id": 30904312, "comment_id": 49848398, "body": "If you want someone to debug your code you will at least have to provide a data set that leads to the error, and a MCVE"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1434613982, "post_id": 30904312, "comment_id": 49856747, "body": "Segmentation faults are usually very easy to find by just single stepping. The line where the program crashes either contains the bug, or otherwise the bug is related to the variables used on that line. Also, since others might have to read your code, for example when you are asking for help on SO, <i>always</i> give identifiers English names and write all comments in English (this coming from another non-native English speaker)."}], "answers": [{"tags": [], "owner": {"reputation": 987, "user_id": 1164913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ca9079b75455a82ea54af6652a2b0f3?s=128&d=identicon&r=PG", "display_name": "bratkartoffel", "link": "https://stackoverflow.com/users/1164913/bratkartoffel"}, "is_accepted": false, "score": 1, "last_activity_date": 1434614423, "last_edit_date": 1434614423, "creation_date": 1434614101, "answer_id": 30909566, "question_id": 30904312, "link": "https://stackoverflow.com/questions/30904312/my-program-has-a-segmentation-fault/30909566#30909566", "title": "my program has a segmentation fault", "body": "<p>On Linux you can enable core-dumps via the <code>ulimit -c unlimited</code> command. Compile your program with debug symbols (<code>gdb -g -O0</code>), then execute your program and wait for the crash.</p>\n\n<p>With the core dump you can analyze the crash, using <code>gdb -c core &lt;program&gt;</code>. The gdb command <code>bt</code> shows the backtrace of the crash and voila, sourcefile and line of the error show up.</p>\n"}], "owner": {"reputation": 1, "user_id": 4721301, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205888499074108/picture?type=large", "display_name": "Fiamma", "link": "https://stackoverflow.com/users/4721301/fiamma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1434614423, "creation_date": 1434584976, "last_edit_date": 1434613839, "question_id": 30904312, "link": "https://stackoverflow.com/questions/30904312/my-program-has-a-segmentation-fault", "title": "my program has a segmentation fault", "body": "<p>My program gives a segmentation fault, and I have no idea where it is.\nHere's the relevant code. the program generates a tree from a list using the inorder and postorder traversal of the tree.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define FALSE 0\n#define TRUE 1\n\ntypedef struct btreenode{\n    struct btreenode *rightchild;\n    struct btreenode *leftchild; \n    float val;\n    int data;\n}Node;\n\n\nstruct btreenode* Treebuilding(float *, int *, int , int, float *, int *, int, int);\nstruct btreenode* cargar_arbol(char *);\nstruct btreenode* new_node(int, float);\n\nint main(){\n    FILE *fp, *fap;\n    char cmd[257], par[257];\n    int num; float val;\n    struct btreenode *root;\n    root = NULL;\n    if ((fp = fopen(\"rutina.dat\", \"r\")) == 0){\n        printf(\"Error al cargar el archivo rutina.dat\\n\");\n        return 1;\n    }\n    fap =fopen(\"output.dat\", \"w\");\n    while(fscanf(fp, \"%[^ \\n]\", cmd)!= 0){\n        if(strcmp(\"Cargar\", cmd)==0){\n            fscanf(fp, \"%s\", par);\n            root = cargar_arbol(par);\n            if(root != NULL)    \n                fprintf(fap, \"Datos Cargados\\n\");\n            else\n                fprintf(fap, \"No se pudo cargar datos\\n\"); \n        }\n    }\n    return 0;\n}\n\nstruct btreenode* Treebuilding(float InOrder[],int inorderName[], int instart, int inend,float PostOrder[], int postorderName[], int poststart,int  postend){\n    int i;\n    if (instart &gt; inend|| poststart &gt; postend){\n        return NULL;\n    }\n    int rootname = postorderName[postend];  \n    struct btreenode* root = new_node(postorderName[postend],PostOrder[postend]); \n    int k =0;\n\n    for (i=0; i &lt; inend; i++){\n        if(inorderName[i] == rootname){\n            k=i;\n            break;\n        }\n    }\n\n    root-&gt;leftchild = Treebuilding (InOrder, inorderName, instart, k-1, PostOrder,postorderName, poststart, poststart+k-(instart+1));\n    root-&gt;rightchild= Treebuilding (InOrder,inorderName, k+1, inend, PostOrder,postorderName, poststart+k-instart, postend);\n\n    return root;\n}\n\nstruct btreenode* cargar_arbol(char *nombre){\n    FILE* fp; int size, *inorderName, *postorderName;\n    float *inorder, *postorder; int i;\n    if ((fp = fopen(nombre, \"r\")) == 0){\n        printf(\"Error al cargar %c\", nombre);\n        return NULL;\n    }\n    fscanf(fp, \"%d\", &amp;size);\n    inorder = (float*)malloc(sizeof(float)*size);\n    inorderName = (int*)malloc(sizeof(int)*size);\n    postorder = (float*)malloc(sizeof(float)*size);\n    postorderName = (int*)malloc(sizeof(int)*size);\n\n    int instart = 0;\n    int inend = size-1;\n    int poststart = 0;\n    int postend = size -1;\n\n    for(i=0; i&lt;size; i++){\n        fscanf(fp, \"Liceo %d | %f\", &amp;inorderName[i],  &amp;inorder[i]);\n    }\n    for(i=0; i&lt;size ; i++){\n        fscanf(fp, \"Liceo %d | %f\", &amp;postorderName[i],  &amp;postorder[i]);\n    }\n    return Treebuilding(inorder, inorderName, instart, inend, postorder, postorderName, poststart, postend);\n}\n</code></pre>\n\n<p>gdb says it is in the function treebuilding(), but I fail to see the exact location.</p>\n"}, {"tags": ["c", "cuda"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1434580365, "post_id": 30903380, "comment_id": 49845929, "body": "I suggest posting your code in the question, not in an external github repo.  You should also define how you are taking the timing measurement if it&#39;s not evident from the code, and give the exact timing results, as well as the machine specification:  CPU, GPU, OS, CUDA version."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1434610598, "post_id": 30903380, "comment_id": 49854746, "body": "On a sm_30 equipped linux machine, I measure the <code>cudaMalloc3d</code> version to be about 10% <i>slower</i> than the <code>cudaMalloc</code> version (0.945 seconds average versus 0.812 seconds for an average of 5 program runs)."}, {"owner": {"reputation": 2907, "user_id": 714967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18f3d9bcf8ec28c43f47f98cfc60c031?s=128&d=identicon&r=PG", "display_name": "pQB", "link": "https://stackoverflow.com/users/714967/pqb"}, "edited": false, "score": 0, "creation_date": 1434619143, "post_id": 30903380, "comment_id": 49860025, "body": "<code>cudaMalloc</code> takes 1.002985 seconds and <code>cudaMalloc3d</code> takes 1.286137 on a GTX TITAN with CUDA <code>ver 5.5</code>"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1434623088, "post_id": 30903380, "comment_id": 49862739, "body": "I measure the <code>cudaMalloc3D</code> version to be slower also, and I believe OP thinks it is slower also based on comments below <a href=\"http://stackoverflow.com/questions/30898815/an-illegal-memory-access-when-trying-to-write-to-a-2d-array-allocated-using-cu/30900357#30900357\">this answer</a>.  The reporting in this question is probably a typo."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1434623461, "post_id": 30903380, "comment_id": 49862968, "body": "@RobertCrovella: This is an interesting example, if only because it uncovers a <i>huge</i> performance regression between CUDA 7 and CUDA 6.x. The CUDA 7 compiler does something incredibly dumb and directly inlines the computation for <code>dt</code> rather than computing it at compile time like the CUDA 6.x compilers do. That is a factor of 2 performance loss between compilers on these kernels. But I guess the speed difference between the two kernels is just down to increased overhead for the array indexing calculations in the pitched memory version"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1434623784, "post_id": 30903380, "comment_id": 49863200, "body": "Yes, I believe the speed difference is due to increased overhead.  I did profiling and confirmed there were no changes in memory load efficiency or memory store efficiency, but dumping the sass yielded about ~250 instructions for the faster kernel and ~300 instructions for the slower kernel.  Thanks for the pointer on CUDA 6.5 vs. CUDA 7, I had been testing with CUDA 7 only.  I&#39;ll take a look at CUDA 6.5 and if I can confirm your observation I&#39;ll file a bug.  Thanks."}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1434631718, "post_id": 30903380, "comment_id": 49868706, "body": "I am so sorry guys, I switched the timings I get cudaMalloc3D to be slower too."}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1434640287, "post_id": 30903380, "comment_id": 49875680, "body": "So, does that mean it is better to use strided access to memory than use pitched memory for a 2D array or is it true just for this case."}], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 2, "last_activity_date": 1434697774, "creation_date": 1434697774, "answer_id": 30932065, "question_id": 30903380, "link": "https://stackoverflow.com/questions/30903380/cudamalloc-vs-cudamalloc3d-performance-for-a-2d-array/30932065#30932065", "title": "cudaMalloc vs cudaMalloc3D performance for a 2D array", "body": "<p>The performance difference you observe is mostly due to the increased instruction overhead in the pitched memory indexing scheme. Because your array size is a large power of two in the major direction, it is very likely that the pitched array allocated with <code>cudaMalloc3D</code> is the same size as the na\u00efve allocation using <code>cudaMalloc</code>. You may find that the performance difference between the two versions changes if you vary the problem size.</p>\n\n<p>(Take note of the comments regarding compiler regressions in CUDA 7. If you refactor your code to pass the Fourier number as a kernel parameter, you will probably get a far bigger performance change than any difference due to pitched memory).</p>\n"}], "owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 30932065, "answer_count": 1, "score": 2, "last_activity_date": 1441899696, "creation_date": 1434579398, "last_edit_date": 1441899696, "question_id": 30903380, "link": "https://stackoverflow.com/questions/30903380/cudamalloc-vs-cudamalloc3d-performance-for-a-2d-array", "title": "cudaMalloc vs cudaMalloc3D performance for a 2D array", "body": "<p>I want to know the impact on performance when using cudaMalloc or cudaMalloc3D when allocating, copying and accessing memory for a 2D array. I have code that I tried to test the run time on where on one I use cudaMalloc and on the other cudaMalloc3D. I have included the code below. An explanation on how the performance is impacted by either api would be much appreciated.</p>\n\n<p>cudaMalloc code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define PI 3.14159265\n#define NX 8192     /* includes boundary points on both end */\n#define NY 4096     /* includes boundary points on both end */\n\n#define N_THREADS_X 16\n#define N_THREADS_Y 16\n#define N_BLOCKS_X NX/N_THREADS_X \n#define N_BLOCKS_Y NY/N_THREADS_Y \n\n#define LX 4.0    /* length of the domain in x-direction  */\n#define LY 2.0    /* length of the domain in x-direction  */\n#define dx       (REAL) ( LX/( (REAL) (NX) ) )\n#define cSqrd     5.0\n#define dt       (REAL) ( 0.4 * dx / sqrt(cSqrd) )\n#define FACTOR   ( cSqrd * (dt*dt)/(dx*dx) )\n\n#define IC  (i + j*NX)       /* (i,j)   */\n#define IM1 (i + j*NX - 1)   /* (i-1,j) */\n#define IP1 (i + j*NX + 1)   /* (i+1,j) */\n#define JM1 (i + (j-1)*NX)   /* (i,j-1) */\n#define JP1 (i + (j+1)*NX)   /* (i,j+1) */\n\n\n#define cudaCheckError() {\\\n  cudaError_t e = cudaGetLastError() ; \\\n  if( e != cudaSuccess ) {\\\n    printf(\"\\nCuda Failure %s:%d: %s\\n\",__FILE__,__LINE__,cudaGetErrorString(e));\\\n    exit(EXIT_FAILURE);\\\n  }\\\n}\n\ntypedef double REAL;\ntypedef int    INT;                \n\n__global__ void solveWaveGPU ( REAL *uold, REAL *u, REAL *unew )\n{\n\n INT i,j;\n\n i = blockIdx.x*blockDim.x + threadIdx.x;\n j = blockIdx.y*blockDim.y + threadIdx.y;\n\n if (i&gt;0 &amp;&amp; i &lt; (NX-1) &amp;&amp; j&gt;0 &amp;&amp; j &lt; (NY-1) ) {\n\n    unew[IC] = 2.0*u[IC] - uold[IC] + FACTOR*( u[IP1] + u[IM1] + u[JP1] + u[JM1] - 4.0*u[IC] );\n\n }\n} \n\nvoid initWave ( REAL *unew, REAL *u, REAL *uold, REAL *x, REAL *y )\n{                    \n\n    INT i,j;\n\n    for (j=1; j&lt;NY-1; j++) {\n        for (i=1; i&lt;NX-1; i++) {\n            u[IC] =  0.1 * (4.0*x[IC]-x[IC]*x[IC]) * ( 2.0*y[IC] - y[IC]*y[IC] );\n        }\n    }\n    for (j=1; j&lt;NY-1; j++) {\n        for (i=1; i&lt;NX-1; i++) {\n            uold[IC] = u[IC] + 0.5*FACTOR*( u[IP1] + u[IM1] + u[JP1] + u[JM1] - 4.0*u[IC] );\n        }\n    }\n}\n\nvoid meshGrid ( REAL *x, REAL *y )\n{\n\n    INT i,j;\n    REAL a;\n\n    for (j=0; j&lt;NY; j++) {\n        a = dx * ( (REAL) j );\n        for (i=0; i&lt;NX; i++) {\n            x[IC] =  dx * ( (REAL) i );\n            y[IC] = a;\n        }\n     }\n}\n\nINT main(INT argc, char *argv[])\n{ \n\n    INT nTimeSteps = 100;\n\n    REAL *unew,   *u,   *uold,   *uFinal, *x, *y; //pointers for the host side\n    REAL *d_unew, *d_u, *d_uold, *tmp;                 //pointers for the device\n\n//  variable declaration for timing\n    cudaEvent_t timeStart, timeStop;\n    cudaEventCreate(&amp;timeStart);\n    cudaEventCreate(&amp;timeStop);\n    float elapsedTime_gpu;\n\n    unew           = (REAL *)calloc(NX*NY,sizeof(REAL));\n    u              = (REAL *)calloc(NX*NY,sizeof(REAL));\n    uold           = (REAL *)calloc(NX*NY,sizeof(REAL));\n    uFinal         = (REAL *)calloc(NX*NY,sizeof(REAL));\n    x              = (REAL *)calloc(NX*NY,sizeof(REAL));\n    y              = (REAL *)calloc(NX*NY,sizeof(REAL));\n\n// create device copies of the variables\n\n    cudaMalloc( (void**) &amp;d_unew,  NX*NY*sizeof(REAL) ); cudaCheckError(); \n    cudaMalloc( (void**) &amp;d_u,     NX*NY*sizeof(REAL) ); cudaCheckError();\n    cudaMalloc( (void**) &amp;d_uold,  NX*NY*sizeof(REAL) ); cudaCheckError();\n\n    meshGrid( x, y );\n    initWave( unew, u, uold, x, y );\n\n//  start timing the GPU\n\n    cudaMemcpy( d_u, u,       NX*NY*sizeof(REAL), cudaMemcpyHostToDevice ); cudaCheckError();\n    cudaMemcpy( d_uold, uold, NX*NY*sizeof(REAL), cudaMemcpyHostToDevice ); cudaCheckError();\n    cudaMemcpy( d_unew, unew, NX*NY*sizeof(REAL), cudaMemcpyHostToDevice ); cudaCheckError();\n\n//  set up the GPU grid/block model\n\n    dim3 dimGrid  ( N_BLOCKS_X , N_BLOCKS_Y  );\n    dim3 dimBlock ( N_THREADS_X, N_THREADS_Y );  \n\n//  launch the GPU kernel\n\n    cudaEventRecord(timeStart, 0);\n\n    for (INT n=1; n&lt;nTimeSteps+1; n++) {\n\n       solveWaveGPU &lt;&lt;&lt;dimGrid,dimBlock&gt;&gt;&gt;(d_uold, d_u, d_unew);\n       cudaDeviceSynchronize();\n       cudaCheckError();\n\n       tmp    = d_uold;\n       d_uold = d_u;\n       d_u    = d_unew;\n       d_unew = tmp;\n\n    }\n    cudaEventRecord(timeStop, 0);\n    cudaEventSynchronize(timeStop);\n    cudaEventElapsedTime(&amp;elapsedTime_gpu, timeStart, timeStop);\n\n    cudaMemcpy( uFinal, d_u, NX*NY*sizeof(REAL), cudaMemcpyDeviceToHost ); cudaCheckError();\n\n    printf(\"elapsedTime on the GPU= %f s.\\n\", elapsedTime_gpu/1000.0);\n\n    free(unew);       free(u);       free(uold);\n    cudaFree(d_unew); cudaFree(d_u); cudaFree(d_uold);\n    free(uFinal); free(x); free(y);\n\n    cudaEventDestroy(timeStart);\n    cudaEventDestroy(timeStop);\n\n    return (0);\n}\n</code></pre>\n\n<p>cudaMalloc3D code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define PI 3.14159265\n#define NX 8192     /* includes boundary points on both end */\n#define NY 4096     /* includes boundary points on both end */\n#define NZ 1        /* needed for cudaMalloc3D */\n\n#define N_THREADS_X 16\n#define N_THREADS_Y 16\n#define N_BLOCKS_X NX/N_THREADS_X \n#define N_BLOCKS_Y NY/N_THREADS_Y \n\n#define LX 4.0    /* length of the domain in x-direction  */\n#define LY 2.0    /* length of the domain in x-direction  */\n#define dx       (REAL) ( LX/( (REAL) (NX) ) )\n#define cSqrd     5.0\n#define dt       (REAL) ( 0.4 * dx / sqrt(cSqrd) )\n#define FACTOR   ( cSqrd * (dt*dt)/(dx*dx) )\n\n#define IC  (i + j*NX)       /* (i,j)   */\n#define IM1 (i + j*NX - 1)   /* (i-1,j) */\n#define IP1 (i + j*NX + 1)   /* (i+1,j) */\n#define JM1 (i + (j-1)*NX)   /* (i,j-1) */\n#define JP1 (i + (j+1)*NX)   /* (i,j+1) */\n\n#define cudaCheckError() {\\\n  cudaError_t e = cudaGetLastError() ; \\\n  if( e != cudaSuccess ) {\\\n    printf(\"\\nCuda Failure %s:%d: %s\\n\",__FILE__,__LINE__,cudaGetErrorString(e));\\\n    exit(EXIT_FAILURE);\\\n  }\\\n}\n\ntypedef double REAL;\ntypedef int    INT;\n\n\n__global__ void solveWaveGPU ( cudaPitchedPtr uold, cudaPitchedPtr u, cudaPitchedPtr unew )\n{\n\n INT i,j;\n\n i = blockIdx.x*blockDim.x + threadIdx.x;\n j = blockIdx.y*blockDim.y + threadIdx.y;\n\n if (i&gt;0 &amp;&amp; i &lt; (NX-1) &amp;&amp; j&gt;0 &amp;&amp; j &lt; (NY-1) ) {\n\n    char *d_u    = (char *) u.ptr;\n    char *d_uold = (char *) uold.ptr;\n    char *d_unew = (char *) unew.ptr;\n\n    REAL *u_row = (REAL *)(d_u + j * u.pitch);\n    REAL u_IP1  = ( (REAL *)(d_u + (j+1) * u.pitch) )[i];\n    REAL u_IM1  = ( (REAL *)(d_u + (j-1) * u.pitch) )[i];\n    REAL u_JP1  = u_row[i+1];\n    REAL u_JM1  = u_row[i-1];\n    REAL u_IC   = u_row[i];\n\n    REAL uold_IC  = ( (REAL *)(d_uold + j * uold.pitch) )[i];\n    REAL *unew_row = (REAL *)(d_unew + j * unew.pitch);\n\n    unew_row[i] = 2.0 * u_IC - uold_IC + FACTOR * ( u_IP1 + u_IM1 + u_JP1 + u_JM1 - 4.0 * u_IC );\n\n }\n\n}                  \n\nvoid initWave ( REAL *unew, REAL *u, REAL *uold, REAL *x, REAL *y )\n{                    \n\n    INT i,j;\n\n    for (j=1; j&lt;NY-1; j++) {\n        for (i=1; i&lt;NX-1; i++) {\n            u[IC] =  0.1 * (4.0*x[IC]-x[IC]*x[IC]) * ( 2.0*y[IC] - y[IC]*y[IC] );\n        }\n    }\n    for (j=1; j&lt;NY-1; j++) {\n        for (i=1; i&lt;NX-1; i++) {\n            uold[IC] = u[IC] + 0.5*FACTOR*( u[IP1] + u[IM1] + u[JP1] + u[JM1] - 4.0*u[IC] );\n        }\n    }\n}\n\nvoid meshGrid ( REAL *x, REAL *y )\n{\n\n    INT i,j;\n    REAL a;\n\n    for (j=0; j&lt;NY; j++) {\n        a = dx * ( (REAL) j );\n        for (i=0; i&lt;NX; i++) {\n            x[IC] =  dx * ( (REAL) i );\n            y[IC] = a;\n        }\n     }\n}\n\nINT main(INT argc, char *argv[])\n{\n    INT nTimeSteps = 100;\n    REAL *unew, *u, *uold, *uFinal, *x, *y; //pointers for the host side\n\n//  variable declaration for timing    \n    cudaEvent_t timeStart, timeStop;\n    cudaEventCreate(&amp;timeStart);\n    cudaEventCreate(&amp;timeStop);\n    float elapsedTime_gpu;\n\n    unew           = (REAL *)calloc(NX*NY,sizeof(REAL));\n    u              = (REAL *)calloc(NX*NY,sizeof(REAL));\n    uold           = (REAL *)calloc(NX*NY,sizeof(REAL));\n    uFinal         = (REAL *)calloc(NX*NY,sizeof(REAL));\n    x              = (REAL *)calloc(NX*NY,sizeof(REAL));\n    y              = (REAL *)calloc(NX*NY,sizeof(REAL));\n\n\n    cudaExtent myExtent = make_cudaExtent(NX * sizeof(REAL), NY, NZ);\n    cudaPitchedPtr d_u, d_uold, d_unew, d_tmp;\n\n    // create device copies of the variables\n    cudaMalloc3D( &amp;d_u   , myExtent );   cudaCheckError();\n    cudaMalloc3D( &amp;d_uold, myExtent );   cudaCheckError();\n    cudaMalloc3D( &amp;d_unew, myExtent );   cudaCheckError();\n\n    meshGrid( x, y );\n    initWave( unew, u, uold, x, y );\n\n    cudaMemcpy3DParms cpy3D = { 0 };\n    cpy3D.extent = myExtent;\n    cpy3D.kind   = cudaMemcpyHostToDevice;\n\n    // copy 3D from u to d_u\n    cpy3D.srcPtr = make_cudaPitchedPtr(u, NX*sizeof(REAL), NX, NY);\n    cpy3D.dstPtr = d_u;\n    cudaMemcpy3D( &amp;cpy3D ); cudaCheckError();\n\n    // copy 3D from uold to d_uold\n    cpy3D.srcPtr = make_cudaPitchedPtr(uold, NX*sizeof(REAL), NX, NY);\n    cpy3D.dstPtr = d_uold;\n    cudaMemcpy3D( &amp;cpy3D ); cudaCheckError();\n\n    //  set up the GPU grid/block model\n    dim3 dimGrid  ( N_BLOCKS_X , N_BLOCKS_Y  );\n    dim3 dimBlock ( N_THREADS_X, N_THREADS_Y );  \n\n    //  launch the GPU kernel\n    //  start timing the GPU\n    cudaEventRecord(timeStart, 0);\n\n    for (INT n=1; n&lt;nTimeSteps+1; n++) {\n\n       solveWaveGPU &lt;&lt;&lt;dimGrid,dimBlock&gt;&gt;&gt;(d_uold, d_u, d_unew);\n       cudaDeviceSynchronize();\n       cudaCheckError();\n\n       d_tmp  = d_uold;\n       d_uold = d_u;\n       d_u    = d_unew;\n       d_unew = d_tmp;\n\n    }\n    cudaEventRecord(timeStop, 0);\n    cudaEventSynchronize(timeStop);\n    cudaEventElapsedTime(&amp;elapsedTime_gpu, timeStart, timeStop);\n\n\n    // copy 3D from d_u to uFinal\n    cpy3D.kind   = cudaMemcpyDeviceToHost;\n    cpy3D.srcPtr = d_u;\n    cpy3D.dstPtr = make_cudaPitchedPtr(uFinal, NX*sizeof(REAL), NX, NY);\n    cudaMemcpy3D( &amp;cpy3D ); cudaCheckError();\n\n    printf(\"elapsedTime on the GPU= %f s.\\n\", elapsedTime_gpu/1000.0);\n\n    free(u);    cudaFree(d_unew.ptr);\n    free(uold); cudaFree(d_u.ptr);\n    free(unew); cudaFree(d_uold.ptr);\n    free(uFinal); free(x); free(y);\n\n    cudaEventDestroy(timeStart);\n    cudaEventDestroy(timeStop);\n\n    return (0);\n}\n</code></pre>\n\n<p>Timing:</p>\n\n<pre><code>cudaMalloc3D: 1.192510 s\ncudaMalloc:   0.960322 s\n</code></pre>\n\n<p>Machine specification:</p>\n\n<pre><code>GNU/Linux x86_64\nNVIDIA GeForce GTX Titan CC: 3.5\nCUDA ver 7.0\n</code></pre>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1434580311, "post_id": 30903305, "comment_id": 49845908, "body": "would <a href=\"http://stackoverflow.com/questions/16522858/understanding-of-pthread-cond-wait-and-pthread-cond-signal\">this</a> be of any help? As explained there, I thikn you should lock the mutex first, then wait on the condition"}], "answers": [{"comments": [{"owner": {"reputation": 110, "user_id": 2710274, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5ccc31138d8bd78d9ec67b01ce2d5883?s=128&d=identicon&r=PG&f=1", "display_name": "CaddyShack", "link": "https://stackoverflow.com/users/2710274/caddyshack"}, "edited": false, "score": 0, "creation_date": 1434592390, "post_id": 30903588, "comment_id": 49848819, "body": "I will make sure to read the man pages more carefully. Thank you."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1435396230, "post_id": 30903588, "comment_id": 50191168, "body": "You better want to signal from inside the critical section, that is <b>before</b> unlocking the mutex."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 3, "last_activity_date": 1434580377, "creation_date": 1434580377, "answer_id": 30903588, "question_id": 30903305, "link": "https://stackoverflow.com/questions/30903305/share-variable-between-multiple-threads/30903588#30903588", "title": "Share variable between multiple threads", "body": "<p>Yes, you have a slight misunderstanding of <code>pthread_cond_wait</code>. The <a href=\"http://linux.die.net/man/3/pthread_cond_wait\" rel=\"nofollow\">man page</a> says: </p>\n\n<blockquote>\n  <p>The pthread_cond_timedwait() and pthread_cond_wait() functions shall\n  block on a condition variable. They shall be called with mutex locked\n  by the calling thread or undefined behavior results.</p>\n  \n  <p>These functions atomically release mutex and cause the calling thread\n  to block on the condition variable cond;</p>\n</blockquote>\n\n<p>So you need to lock before calling the <code>pthread_cond_wait</code>. That is, your code should be:</p>\n\n<pre><code>/* If the main track is currently in use, wait for it to become available */\npthread_mutex_lock(&amp;main_track_mutex); /* SHOULD LOCK HERE */\nwhile(main_track_status)\n    pthread_cond_wait(&amp;main_track_condition_var, &amp;main_track_mutex);\n\n/* Use the main track */\n//pthread_mutex_lock(&amp;main_track_mutex); /* INCORRECT */\n//&lt;..SNIP..&gt;\npthread_mutex_unlock(&amp;main_track_mutex);\npthread_cond_signal(&amp;main_track_condition_var);\n</code></pre>\n"}], "owner": {"reputation": 110, "user_id": 2710274, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5ccc31138d8bd78d9ec67b01ce2d5883?s=128&d=identicon&r=PG&f=1", "display_name": "CaddyShack", "link": "https://stackoverflow.com/users/2710274/caddyshack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 30903588, "answer_count": 1, "score": 0, "last_activity_date": 1434580377, "creation_date": 1434578998, "question_id": 30903305, "link": "https://stackoverflow.com/questions/30903305/share-variable-between-multiple-threads", "title": "Share variable between multiple threads", "body": "<p>I'm creating simulation of a train station. Train information is read from a file. Each line of the file represents a train and each train gets its own thread. The main track of the train station can only hold 1 train at a time. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;string.h&gt;\n#include &lt;readline/readline.h&gt;\n#include &lt;unistd.h&gt;\n\npthread_mutex_t main_track_mutex = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t  main_track_condition_var = PTHREAD_COND_INITIALIZER;\nint main_track_status = 0;\n\nvoid *train_function(void *args) {\n    /* Parse train information */\n    int line_number = atoi(strtok(args, \":,\"));\n    char *priority_direction = strtok(NULL,\":,\");\n    int loading_time = atoi(strtok(NULL, \":,\"));\n    int crossing_time = atoi(strtok(NULL, \":,\"));\n\n    /* Load train */\n    sleep(loading_time/10);\n    printf(\"Train %d is ready to go %s\\n\",line_number,priority_direction);\n\n    /* If the main track is currently in use, wait for it to become available */\n    while(main_track_status)\n        pthread_cond_wait(&amp;main_track_condition_var, &amp;main_track_mutex);\n\n    /* Use the main track */\n    pthread_mutex_lock(&amp;main_track_mutex);\n    main_track_status = 1;\n    printf(\"Train %d is ON the main track going %s\\n\",line_number,priority_direction);\n    sleep(crossing_time/10);\n    main_track_status = 0;\n\n    /* Notify other trains main track is empty */\n    pthread_mutex_unlock(&amp;main_track_mutex);\n    pthread_cond_signal(&amp;main_track_condition_var);\n    printf(\"Train %d is OFF the main track after going %s\\n\",line_number,priority_direction);\n\n    pthread_exit(0);\n}\n\nint main() {\n    FILE *ptr_file;\n    char buff[10];\n    int train_count = 0;\n    char *train;\n    char line[15];\n    pthread_t trains[3];\n\n    ptr_file = fopen(\"./trains.txt\", \"r\");\n\n    if (!ptr_file) \n    {\n        perror(\"fopen for trains.txt failed\");\n        exit(EXIT_FAILURE);\n    }\n\n    /* Create train for each line of file */\n    while (fgets(buff,10, ptr_file)!=NULL) {\n        train = (char*)malloc(10 * sizeof(char));\n\n        /* Include line number from file in train information */\n        sprintf(line, \"%d:\", train_count);  \n        strcat(line, buff);\n        strcpy(train, line);\n\n        if(pthread_create(&amp;trains[train_count], NULL, &amp;train_function, (void *) train))\n        {\n            perror(\"pthread create failed\");\n            exit(EXIT_FAILURE);\n        }\n        train_count++;\n    }\n    fclose(ptr_file);\n\n    /* Wait for all trains to leave the station */\n    for (int x = 0; x &lt; train_count; x++) {\n        pthread_join(trains[x], NULL);\n    }\n\n    free(train);\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>The trains input file:</p>\n\n<pre><code>e:10,6\nW:5,7\nE:3,10\n</code></pre>\n\n<p>The output of the program is:</p>\n\n<pre><code>Train 1 is ready to go W\nTrain 1 is ON the main track going W\nTrain 1 is OFF the main track after going W\nTrain 2 is ready to go E\nTrain 2 is ON the main track going E\nTrain 0 is ready to go e\nTrain 2 is OFF the main track after going E\n</code></pre>\n\n<p>I think my error lies in the train_function. As you can see, train 0 never gets access to the main track. I must be misunderstanding how threads are awoken with condition variables and am getting stuck in a deadlock. What am I missing?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1434579094, "post_id": 30903289, "comment_id": 49845421, "body": "my suggested using array (and struct)."}, {"owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1434579435, "post_id": 30903289, "comment_id": 49845574, "body": "adding to @BLUEPIXY suggestion, after that sort the array, first and last element will give max and min (depends on ascending or descending order of sort) and calulate avg (either while taking input or loop through array once.) Write code properly and ask if you have specific doubts"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "edited": false, "score": 0, "creation_date": 1434580200, "post_id": 30903289, "comment_id": 49845870, "body": "@RakholiyaJenish: What would be the advantage of sorting, as there is still a loop required for averaging? The sort alone will likely take longer than a single loop."}, {"owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "edited": false, "score": 1, "creation_date": 1434580284, "post_id": 30903289, "comment_id": 49845899, "body": "If you only need the max, min and  avg then there is no need of sorting. If you are planning to further work on numbers, sorted thing might help"}, {"owner": {"reputation": 1987, "user_id": 3803800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/88d5e7500b9f3f4c36f849f44630dad5?s=128&d=identicon&r=PG&f=1", "display_name": "Mauricio Trajano", "link": "https://stackoverflow.com/users/3803800/mauricio-trajano"}, "edited": false, "score": 0, "creation_date": 1434580721, "post_id": 30903289, "comment_id": 49846051, "body": "Just a thought, I would fgets instead of scanf, if someone types an assignment name longer than 15 characters your program will crash, the file stream in that case would be stdin"}, {"owner": {"reputation": 1871, "user_id": 1101001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7836be7c67e3d1d26ee615a142231a87?s=128&d=identicon&r=PG&f=1", "display_name": "embedded_guy", "link": "https://stackoverflow.com/users/1101001/embedded-guy"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1434580995, "post_id": 30903289, "comment_id": 49846158, "body": "@Olaf, Perhaps I am reading the question wrong...  the OP says that he needs the program to &quot;arrange the grades from highest to lowest value&quot;.  Wouldn&#39;t that be a valid reason to sort them?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1871, "user_id": 1101001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7836be7c67e3d1d26ee615a142231a87?s=128&d=identicon&r=PG&f=1", "display_name": "embedded_guy", "link": "https://stackoverflow.com/users/1101001/embedded-guy"}, "edited": false, "score": 1, "creation_date": 1434581954, "post_id": 30903289, "comment_id": 49846426, "body": "@embedded_guy: Point taken!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5021693, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206621219987428/picture?type=large", "display_name": "Tony Bob", "link": "https://stackoverflow.com/users/5021693/tony-bob"}, "edited": false, "score": 0, "creation_date": 1434654383, "post_id": 30904528, "comment_id": 49884156, "body": "Thank you very much embedded_guy. I understand about half of that but will keep reading up on stuff. I have 2 days to finish this for my summer class, its really stressful in such a short time."}], "tags": [], "owner": {"reputation": 1871, "user_id": 1101001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7836be7c67e3d1d26ee615a142231a87?s=128&d=identicon&r=PG&f=1", "display_name": "embedded_guy", "link": "https://stackoverflow.com/users/1101001/embedded-guy"}, "is_accepted": false, "score": 2, "last_activity_date": 1434586334, "creation_date": 1434586334, "answer_id": 30904528, "question_id": 30903289, "link": "https://stackoverflow.com/questions/30903289/sort-integers-and-give-average/30904528#30904528", "title": "Sort integers and give average", "body": "<p>There is a lot of room for improvement in your code, but I am going to try to focus only on the questions that you have asked and see if I can help direct you to a solution.  The first suggestion (about an array of structures) in the comment given by @BLUEPIXY is where I would start as well.  For example:</p>\n\n<pre><code>typedef struct\n{\n    char name[15];\n    int grade;\n} Assignment;\n</code></pre>\n\n<p>With the above structure, you can now declare a variable (or in this case, an array) of the type <code>Assignment</code> like this:</p>\n\n<pre><code>Assignment assignmentData[15];\n</code></pre>\n\n<p>There are two advantages to using a structure in this case.  One is that, for a given assignment (i.e. <code>assignmentData[0]</code>), we have now associated the name with the grade.  The other is that you can now take advantage of loops, like this:</p>\n\n<pre><code>unsigned char i;\n\n/* Note 1: numberofassignemnts must be less than 15. */\nfor (i = 0; i &lt; numberofassignments; i++)\n{\n    /* Note 2: As @Mauricio points out in the comment, you\n       will have problems if the user inputs more than 15 characters. */\n    printf(\"What is the name of assignment number %d?\\n\", (i+1));\n    scanf(\"%s\", assignmentData[i].name);\n\n    printf(\"What is your grade for %s?\\n\", assignmentData[i].name);\n    scanf(\"%d\", &amp;assignmentData[i].grade);\n}\n</code></pre>\n\n<p>At this point you can see the advantage of using the structure above.  Sorting the structures can be done in different ways... for example, you could declare a second array like this:</p>\n\n<pre><code>Assignment sortedAssignments[15];\n</code></pre>\n\n<p>Then, utilize a <code>while()</code> loop to iterate through your original assignments.  Place the assignment with the highest grade into <code>sortedAssignments</code> first, continuing until you've moved all of the assignmentData into sortedAssignments.  It's not the most elegant solution, but it is easy to understand and implement.  I would also encourage you to search for information on linked-lists and other sorting methods.  They can be far more efficient and allow you to dynamically create larger data sets based on user input... but I digress.</p>\n\n<p>Finally, functions for the maximum, minimum and average values are quite simple to implement.  After sorting, you know that your maximum value is the first assignment in your array (<code>sortedAssignments[0].grade</code>) and the minimum value is the last assignment in your array (<code>sortedAssignments[numberofassignments - 1].grade</code>).  The average can be accomplished in another loop... or even better, in the original <code>for()</code> loop that we used above:</p>\n\n<pre><code>    ...\n    scanf(\"%d\", &amp;assignmentData[i].grade);\n\n    /* Assuming that we declared: int avg = 0;*/\n    avg = avg + assignmentData[i].grade;\n}  /* End of for() loop */\n\navg = avg / numberofassignments;\n</code></pre>\n\n<p>I hope that helps to get you on the right track.  I purposely left out the code to actually sort your assignments because that is something you should try on your own.  Good luck!</p>\n"}], "owner": {"reputation": 11, "user_id": 5021693, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206621219987428/picture?type=large", "display_name": "Tony Bob", "link": "https://stackoverflow.com/users/5021693/tony-bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434586334, "creation_date": 1434578926, "question_id": 30903289, "link": "https://stackoverflow.com/questions/30903289/sort-integers-and-give-average", "title": "Sort integers and give average", "body": "<p>Good evening, I having only started learning C this week so please bear with me. I need my program to arrange the grades from highest to lowest value and give a maximum, minimum, and average calculation. If you can point me in the right direction that would be great. Please keep in mind that I am still learning C lingo.</p>\n\n<p>Thanks!\n-Tony</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\nchar name[40];\nchar mood[20];\nchar a1name[15];\nchar a2name[15];\nchar a3name[15];\nchar a4name[15];\n\nint numberofassignments;    \nint score;\nint firstgrade;\nint a1, a2, a3, a4, a5, a6;\n\n/* Intro */\n\n\nprintf(\"Enter your first name: \\n\");\nscanf(\"%s\", name);\n\nprintf(\"Hello, %s, How are you? \\n\", name);\nscanf(\"%s\", mood);\n\nprintf(\"Glad you're %s. \\n\\r\", mood);\n\n\nprintf(\"How many assignments do you have? \\n\");\nscanf(\"%d\", &amp;numberofassignments);\nprintf(\"Ok so you have %d assignments.  \\n\", numberofassignments);\n\n/* Assignment Names */\n\nprintf(\"What is the name of your first assignment? \\n\");\nscanf(\"%s\", a1name);\n\nprintf(\"What is the name of your Second assignment? \\n\");\nscanf(\"%s\", a2name);\n\nprintf(\"What is the name of your Third assignment? \\n\");\nscanf(\"%s\", a3name);\n\nprintf(\"What is the name of your Fourth assignment? \\n\");\nscanf(\"%s\", a4name);\n\n/* Assignment Grades */\n\nprintf(\"What is your grade for %s? \", a1name);\nscanf(\"%d\", &amp;a1);\n\nprintf(\"What is your grade for %s? \", a2name);\nscanf(\"%d\", &amp;a2);\n\nprintf(\"What is your grade for %s? \", a3name);\nscanf(\"%d\", &amp;a3);\n\nprintf(\"What is your grade for %s? \", a4name);\nscanf(\"%d\", &amp;a4);\n\n/* Assignment Grade and name overview */\n\n\nprintf(\"First Assignment: %s \\n\", a1name);\nprintf(\"Grade: %d \\n\", a1);\n\nprintf(\"First Assignment: %s \\n\", a2name);\nprintf(\"Grade: %d \\n\", a2);\n\nprintf(\"First Assignment: %s \\n\", a3name);\nprintf(\"Grade: %d \\n\", a3);\n\nprintf(\"First Assignment: %s \\n\", a4name);\nprintf(\"Grade: %d \\n\", a4);\n\n\n\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4337738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bea2e57d3b2dd21d1bbd6a451ccc86?s=128&d=identicon&r=PG&f=1", "display_name": "iulian", "link": "https://stackoverflow.com/users/4337738/iulian"}, "edited": false, "score": 0, "creation_date": 1434650837, "post_id": 30908246, "comment_id": 49882177, "body": "thanks alot. It works, but It worked in the past with my command too."}], "tags": [], "owner": {"reputation": 1923, "user_id": 3033441, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5128fcd3a14587660ea0cb737aa54143?s=128&d=identicon&r=PG&f=1", "display_name": "lakshayg", "link": "https://stackoverflow.com/users/3033441/lakshayg"}, "is_accepted": true, "score": 1, "last_activity_date": 1434609834, "creation_date": 1434609834, "answer_id": 30908246, "question_id": 30903180, "link": "https://stackoverflow.com/questions/30903180/error-using-already-compiled-version-of-opencv/30908246#30908246", "title": "error using already compiled version of openCV", "body": "<p>You have not linked the executable against several libraries that are required by the program</p>\n\n<p>Try using this:</p>\n\n<pre><code>g++ -lpthread `pkg-config opencv --libs` -I/usr/local/include/ -lraspicam -lraspicam_cv -L/opt/vc/lib -lmmal -lmmal_core -lmmal_util -I/usr/include -lwiringPi test3.cpp -o test3 \n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4337738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bea2e57d3b2dd21d1bbd6a451ccc86?s=128&d=identicon&r=PG&f=1", "display_name": "iulian", "link": "https://stackoverflow.com/users/4337738/iulian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "accepted_answer_id": 30908246, "answer_count": 1, "score": 0, "last_activity_date": 1614253836, "creation_date": 1434578571, "last_edit_date": 1434579804, "question_id": 30903180, "link": "https://stackoverflow.com/questions/30903180/error-using-already-compiled-version-of-opencv", "title": "error using already compiled version of openCV", "body": "<p>I've used the already compiled version of openCV for Raspberry Pi. <a href=\"https://github.com/Nolaan/libopencv_24\" rel=\"nofollow\">link for anyone who is interested</a></p>\n\n<p>After trying to compile using this command line \n<code>g++ test3.cpp -o test3 -I/usr/local/include/ -lraspicam -lraspicam_cv -L/opt/vc/lib -lmmal -lmmal_core -lmmal_util -I/usr/include -lopencv_core -lopencv_highgui -lopencv_imgproc -lwiringPi -lpthread</code></p>\n\n<p>I get the following error lines. </p>\n\n<blockquote>\n  <p>//usr/local/lib/libopencv_stitching.so.2.4: undefined reference to `cv::gpu::ensureSizeIsEnough(int, int, int, cv::gpu::GpuMat&amp;)'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::parallel_for_(cv::Range const&amp;, cv::ParallelLoopBody const&amp;, double)'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `typeinfo for cv::ParallelLoopBody'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::unlock()'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::lock()'</p>\n  \n  <p>//usr/local/lib/libopencv_ocl.so.2.4: undefined reference to cv::TLSDataContainer::getData() const</p>\n  \n  <p>//usr/local/lib/libopencv_features2d.so.2.4: undefined reference to cv::AlgorithmInfo::addParam(cv::Algorithm&amp;, char const*, unsigned char&amp;, bool, unsigned char (cv::Algorithm::<em>)(), void (cv::Algorithm::</em>)(unsigned char), std::basic_string, std::allocator > const&amp;)</p>\n  \n  <p>//usr/local/lib/libopencv_features2d.so.2.4: undefined reference to `cv::AlgorithmInfo::addParam(cv::Algorithm&amp;, char const*, float&amp;, bool, float (cv::Algorithm::<em>)(), void (cv::Algorithm::</em>)(float), std::basic_string, std::allocator > const&amp;)'</p>\n  \n  <p>//usr/local/lib/libopencv_features2d.so.2.4: undefined reference to `cv::AlgorithmInfo::addParam(cv::Algorithm&amp;, char const*, short&amp;, bool, int (cv::Algorithm::<em>)(), void (cv::Algorithm::</em>)(int), std::basic_string, std::allocator > const&amp;)'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::Mutex()'</p>\n  \n  <p>//usr/local/lib/libopencv_ocl.so.2.4: undefined reference to `cv::TLSDataContainer::TLSDataContainer()'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::ParallelLoopBody::~ParallelLoopBody()'</p>\n  \n  <p>//usr/local/lib/libopencv_calib3d.so.2.4: undefined reference to `cv::Mutex::~Mutex()'</p>\n  \n  <p>//usr/local/lib/libopencv_ocl.so.2.4: undefined reference to `cv::TLSDataContainer::~TLSDataContainer()'\n  collect2: ld returned 1 exit status</p>\n</blockquote>\n"}, {"tags": ["c", "pointers", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1434579197, "post_id": 30903185, "comment_id": 49845466, "body": "Do you mean ... &quot;to the location <code>*(p_tx_buf + 0)</code>&quot;  ?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434579702, "post_id": 30903185, "comment_id": 49845674, "body": "@ryyker; No. I mean <code>p_tx_buf + 0</code> like <code>int x ; x = 0;</code> you are writing at location <code>&amp;x</code>. <code>*(p_tx_buf + 0)</code> will be used to dereference that value from  <code>p_tx_buf + 0</code> location."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434580083, "post_id": 30903185, "comment_id": 49845823, "body": "If <code>p_tx_buf[0]</code> is equivalent to &#39;*(p_tx_buf + 0)<code>... then </code>p_tx_buf[0] = 0` would also be equivalent to &#39;*(p_tx_buf + 0) = 0`"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434580165, "post_id": 30903185, "comment_id": 49845854, "body": "@ryyker; Yeah, that&#39;s true. But the location would be <code>p_tx_buf + 0</code>."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1434578584, "creation_date": 1434578584, "answer_id": 30903185, "question_id": 30903159, "link": "https://stackoverflow.com/questions/30903159/using-on-pointers-in-c/30903185#30903185", "title": "Using [] on pointers in C?", "body": "<p><code>p_tx_buf[0] = 0</code> means assign <code>0</code> to the location <code>p_tx_buf + 0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "is_accepted": true, "score": 4, "last_activity_date": 1434578675, "creation_date": 1434578675, "answer_id": 30903216, "question_id": 30903159, "link": "https://stackoverflow.com/questions/30903159/using-on-pointers-in-c/30903216#30903216", "title": "Using [] on pointers in C?", "body": "<p>In C (and also C++), <code>array[n]</code> is equivalent to <code>*(array+n)</code>. They mean exactly the same thing and produce exactly the same result.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 4974222, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b748683704cd99699b4f009d3be69909?s=128&d=identicon&r=PG&f=1", "display_name": "Jpwang", "link": "https://stackoverflow.com/users/4974222/jpwang"}, "edited": false, "score": 0, "creation_date": 1434579373, "post_id": 30903309, "comment_id": 49845552, "body": "Yeah, sorry I didn&#39;t expand on that, I just didn&#39;t think it was necessary to the question. But yeah, the math basically multiplies the size of a &quot;block&quot; of data with how many blocks are in the file, so what you said is definitely true."}, {"owner": {"reputation": 788, "user_id": 1088237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b526982b2bdf61eccd6d5de69f566580?s=128&d=identicon&r=PG", "display_name": "JayArby", "link": "https://stackoverflow.com/users/1088237/jayarby"}, "reply_to_user": {"reputation": 145, "user_id": 4974222, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b748683704cd99699b4f009d3be69909?s=128&d=identicon&r=PG&f=1", "display_name": "Jpwang", "link": "https://stackoverflow.com/users/4974222/jpwang"}, "edited": false, "score": 0, "creation_date": 1434579469, "post_id": 30903309, "comment_id": 49845591, "body": "Then that would be the reason that the array notation was used. If only a single object was allocated, the author would be more likely to use pointer notation."}], "tags": [], "owner": {"reputation": 788, "user_id": 1088237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b526982b2bdf61eccd6d5de69f566580?s=128&d=identicon&r=PG", "display_name": "JayArby", "link": "https://stackoverflow.com/users/1088237/jayarby"}, "is_accepted": false, "score": 1, "last_activity_date": 1434579029, "creation_date": 1434579029, "answer_id": 30903309, "question_id": 30903159, "link": "https://stackoverflow.com/questions/30903159/using-on-pointers-in-c/30903309#30903309", "title": "Using [] on pointers in C?", "body": "<p>Just to expound a bit on the answers already provided, the \"math\" you are referring to is probably not calculating the size of a <em>single</em> file, rather it is multiplying the size of a file times some integer.</p>\n\n<p>The result is that enough space is allocated for <em>several</em> file structures. The pointer winds up pointing to the first of several file structures laid out sequentially in memory. The index <code>[0]</code> means point to the first of those file structures (i.e., an <em>offset</em> of 0)</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1434579194, "post_id": 30903318, "comment_id": 49845462, "body": "No, arrays are not &quot;essentially pointers&quot;. Please read section 6 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a>. An expressions of array type is implicitly <i>converted</i>, in most but not all contexts, to a pointer to the array&#39;s initial element."}, {"owner": {"reputation": 1277, "user_id": 4182216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206bc243dc735c21a2bc46a9f48d7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/4182216/steve"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1434579546, "post_id": 30903318, "comment_id": 49845621, "body": "@KeithThompson you are right.  I removed that wording"}], "tags": [], "owner": {"reputation": 1277, "user_id": 4182216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206bc243dc735c21a2bc46a9f48d7e3?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/4182216/steve"}, "is_accepted": false, "score": 1, "last_activity_date": 1434579449, "last_edit_date": 1434579449, "creation_date": 1434579093, "answer_id": 30903318, "question_id": 30903159, "link": "https://stackoverflow.com/questions/30903159/using-on-pointers-in-c/30903318#30903318", "title": "Using [] on pointers in C?", "body": "<p>the malloc command I assume was some multiplication of the sizeof(int32_t)</p>\n\n<p>say:</p>\n\n<pre><code>p_tx_buf = malloc(2*sizeof(int32_t));\n</code></pre>\n\n<p>you now have allocated enough memory space for 2 int32_t variables you can access them by:</p>\n\n<pre><code>*(p_tx_buf) and *(p_tx_buf+1)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>p_tx_buf[0] and p_tx_buf[1]\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 4974222, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b748683704cd99699b4f009d3be69909?s=128&d=identicon&r=PG&f=1", "display_name": "Jpwang", "link": "https://stackoverflow.com/users/4974222/jpwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 30903216, "answer_count": 4, "score": 1, "last_activity_date": 1434579449, "creation_date": 1434578453, "last_edit_date": 1434578877, "question_id": 30903159, "link": "https://stackoverflow.com/questions/30903159/using-on-pointers-in-c", "title": "Using [] on pointers in C?", "body": "<p>Right now I'm looking over some C code and they have some pointer syntax that I'm confused about. So first they declared a pointer like so:</p>\n\n<pre><code>int32_t *p_tx_buf=NULL; \n</code></pre>\n\n<p>Then later on they wrote:</p>\n\n<pre><code>p_tx_buf = malloc(...math... );\n</code></pre>\n\n<p>The stuff in the middle is just math to calculate the size of a file, I'm assuming it's not important. After that, they wrote:</p>\n\n<pre><code>p_tx_buf[0] = 0\n</code></pre>\n\n<p>I'm rather confused about the <code>[]</code>. How does that work with an integer pointer? I thought the <code>[]</code> was for indexing things, so I'm confused on how you can use this with a pointer.</p>\n"}, {"tags": ["c", "getopt"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1434576524, "post_id": 30902668, "comment_id": 49844321, "body": "<code>optarg</code> is pointing at the string <code>16</code>; when you use <code>e_val = *optarg;</code>, you get the value 49 stored (the ASCII code for <code>1</code>).  Use <code>atoi()</code> or <code>strtol()</code> to convert <code>optarg</code> to a number."}, {"owner": {"reputation": 1424, "user_id": 3241487, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/45b267006bb15bc14c8b3e892cbe2f03?s=128&d=identicon&r=PG&f=1", "display_name": "DIMMSum", "link": "https://stackoverflow.com/users/3241487/dimmsum"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434576649, "post_id": 30902668, "comment_id": 49844369, "body": "Hmm, so why is <code>optarg</code> null from my perspective when it gets to my code in gdb? Is it something funky to do with extern variables?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434576723, "post_id": 30902668, "comment_id": 49844408, "body": "That I&#39;m not sure about.  My comment is only partially relevant...  I have experienced similar frustrations when I had my own <code>getopt()</code> code and things got confused about which set of global variables were in use, but that shouldn&#39;t be your problem."}, {"owner": {"reputation": 1424, "user_id": 3241487, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/45b267006bb15bc14c8b3e892cbe2f03?s=128&d=identicon&r=PG&f=1", "display_name": "DIMMSum", "link": "https://stackoverflow.com/users/3241487/dimmsum"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434576828, "post_id": 30902668, "comment_id": 49844454, "body": "Ah, okay. Yup, shouldn&#39;t matter from my perspective. I&#39;m not declaring any of these variables anywhere in my code so there shouldn&#39;t be any global confusion from <code>getopt</code>&#39;s perspective."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434577088, "post_id": 30902668, "comment_id": 49844572, "body": "Can you reduce the code to an MCVE (<a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>)?  Which header(s) are you using to declare <code>getopt()</code>?  Which platform are you on? What command line are you using to compile the code?  The null pointer you seem to be observing is pretty weird...  Doubly so when you see the assignment apparently being executed but not achieving what you&#39;d expect.  Have you tried printing the address of <code>optarg</code> in various places?  It&#39;s a global; it should be the same everywhere."}, {"owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 0, "creation_date": 1434577192, "post_id": 30902668, "comment_id": 49844621, "body": "E expects a number, what it gets is a string which needs converting to a number. Use atoi(optarg);. This should not be the solution, but is required in case E: code."}, {"owner": {"reputation": 1424, "user_id": 3241487, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/45b267006bb15bc14c8b3e892cbe2f03?s=128&d=identicon&r=PG&f=1", "display_name": "DIMMSum", "link": "https://stackoverflow.com/users/3241487/dimmsum"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434578588, "post_id": 30902668, "comment_id": 49845220, "body": "@JonathanLeffler -- I believe you were correct that providing an MCVE would narrow the problem down. I don&#39;t feel comfortable posting the specs on SO as I&#39;m not sure my school would be OK with that. However, as I mentioned in the comment to your answer, your <code>atoi</code> fix and changing VMs seemed to do the trick."}], "answers": [{"comments": [{"owner": {"reputation": 1424, "user_id": 3241487, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/45b267006bb15bc14c8b3e892cbe2f03?s=128&d=identicon&r=PG&f=1", "display_name": "DIMMSum", "link": "https://stackoverflow.com/users/3241487/dimmsum"}, "edited": false, "score": 0, "creation_date": 1434578358, "post_id": 30903069, "comment_id": 49845109, "body": "None of the other headers I have should affect this at all. I&#39;m marking this answer as correct because I have a feeling that the root cause is due to the underlying hardware or OS (which could very well be non-standard given that they&#39;re owned by the University I attend). I tried compiling my code on a different VM and it looked OK (after adding your <code>atoi</code> fix)."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1434578020, "creation_date": 1434578020, "answer_id": 30903069, "question_id": 30902668, "link": "https://stackoverflow.com/questions/30902668/gnu-getopt-not-populating-optarg/30903069#30903069", "title": "GNU getopt not populating optarg", "body": "<p>This isn't truly an answer, but it is too big to be a comment.</p>\n\n<p>This code compiles cleanly under stringent compilation options:</p>\n\n<pre><code>#include &lt;getopt.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char **argv)\n{\n    long arg;\n    int e_val = -1;\n    char *t_str = \"pygmalion\";\n    while ((arg = getopt(argc, argv, \"E:t:\")) != -1)\n    {\n        switch (arg)\n        {\n        case 'E':\n            e_val = atoi(optarg); // e_val = 16\n            break;\n        case 't':\n            t_str = optarg;\n            break;\n        }\n    }\n\n    printf(\"e_val = %d\\n\", e_val);\n    printf(\"t_str = %s\\n\", t_str);\n    return 0;\n}\n</code></pre>\n\n<p>Compile and run:</p>\n\n<pre><code>$ gcc -g -O3 -std=c11 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \\\n&gt;     -Wold-style-definition -Wold-style-declaration -Werror go.c -o go\n$ ./go -E 16 -t path/to/file\ne_val = 16\nt_str = path/to/file\n$ ./go -E 16 \ne_val = 16\nt_str = pygmalion\n$ ./go -t pygmalion\ne_val = -1\nt_str = pygmalion\n$ ./go \ne_val = -1\nt_str = pygmalion\n$\n</code></pre>\n\n<p>Testing on an Ubuntu 14.04 LTS derivative with GCC 5.1.0.  So, on the face of it, the code is approximately correct.  That in turn suggests that the problem is in the surrounding code.  Is there any chance that something you're linking with is also defining <code>optarg</code>?</p>\n\n<p>What do you get if you take the code I've just shown and run it?  If it works but your much bigger program doesn't, then there's something in your bigger program that is causing the trouble, somehow.</p>\n"}], "owner": {"reputation": 1424, "user_id": 3241487, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/45b267006bb15bc14c8b3e892cbe2f03?s=128&d=identicon&r=PG&f=1", "display_name": "DIMMSum", "link": "https://stackoverflow.com/users/3241487/dimmsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 30903069, "answer_count": 1, "score": 0, "last_activity_date": 1434578020, "creation_date": 1434576320, "last_edit_date": 1434577394, "question_id": 30902668, "link": "https://stackoverflow.com/questions/30902668/gnu-getopt-not-populating-optarg", "title": "GNU getopt not populating optarg", "body": "<p>I'm trying to use the GNU <code>getopt</code> function parse some command line arguments in my C program. Say I make the following call:</p>\n\n<pre><code>./my_program -E 16 -t path/to/file\n</code></pre>\n\n<p>My current expectation is that if I have the following code:</p>\n\n<pre><code>long arg;\nint e_val;\nchar *t_str;\nwhile ((arg = getopt(argc, argv, \"E:t:\")) != -1) {\n    switch(arg) {\n        case 'E':\n            e_val = *optarg; // e_val = 16\n            break;\n        case 't':\n            t_str = optarg;\n            break;\n    }\n}\n</code></pre>\n\n<p>then <code>e_val</code> will equal <code>16</code> and <code>t_str</code> will point to <code>path/to/file</code>.\nHowever, I can't seem to figure out how to access the actual value for these arguments. By the time I get to assigning <code>e_val</code> in <code>case 'E'</code>, <code>optarg</code> is still a null pointer:</p>\n\n<pre><code>Starting program: /stack/overflow/example -E 16 -t stackoverflow\nBreakpoint 1, get_arguments (argc=5, argv=0x7fffffffe318) at stack_overflow.c:233\n233       while ((arg = getopt(argc, argv, \"E:t:\")) != -1)\n(gdb) n\n235         switch (arg)\n(gdb)\n254             e_val = *optarg;\n(gdb) p optarg\n$6 = 0x0\n(gdb) x/1xw optarg\n0x0:    Cannot access memory at address 0x0\n(gdb) p /x arg\n$7 = 0x45 // ASCII for 'E'\n</code></pre>\n\n<p>Why is optarg not getting set? And if <code>optarg</code> isn't the value I'm supposed to be using to get the <code>16</code> following <code>E</code>, then what should I be using?</p>\n\n<p>As a final note, I briefly stepped through <code>getopt</code> with gdb and it looks like it isn't setting the extern <code>optarg</code> variable for some reason.</p>\n\n<p>Backtrace:</p>\n\n<pre><code>#0  _getopt_internal (argc=&lt;value optimized out&gt;, argv=&lt;value optimized out&gt;, optstring=&lt;value optimized out&gt;,\n    longopts=&lt;value optimized out&gt;, longind=&lt;value optimized out&gt;, long_only=&lt;value optimized out&gt;, posixly_correct=0)\n    at getopt.c:1135\n#1  0x00007ffff7894138 in getopt (argc=&lt;value optimized out&gt;, argv=&lt;value optimized out&gt;, optstring=&lt;value optimized out&gt;)\n    at getopt.c:1145\n#2  0x0000000000400cd6 in get_arguments (argc=5, argv=0x7fffffffe318) at stackoverflow.c:233\n#3  0x0000000000400875 in main (argc=5, argv=0x7fffffffe318) at stackoverflow.c:82\n</code></pre>\n\n<p>Code being executed:</p>\n\n<pre><code>(gdb) l\n1130\n1131      result = _getopt_internal_r (argc, argv, optstring, longopts,\n1132                                   longind, long_only, &amp;getopt_data,\n1133                                   posixly_correct);\n1134\n1135      optind = getopt_data.optind;\n1136      optarg = getopt_data.optarg;\n1137      optopt = getopt_data.optopt;\n1138\n1139      return result;\n</code></pre>\n\n<p><code>optarg</code> not getting set:</p>\n\n<pre><code>(gdb) n\n1136      optarg = getopt_data.optarg;\n(gdb)\n1135      optind = getopt_data.optind;\n(gdb) p optarg\n$10 = 0x0\n(gdb) p getopt_data.optarg\n$11 = 0x7fffffffe60d \"16\"\n</code></pre>\n\n<p>Note that <code>optarg</code> not being set here is not due to compiler optimization. I can step all the way through back to my function and it stays null.</p>\n"}, {"tags": ["c", "string", "file-io"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 5, "creation_date": 1434575213, "post_id": 30902337, "comment_id": 49843705, "body": "Use <code>fgets()</code>, then <code>sscanf(buf, &quot; %19[A-Za-z ]%f&quot;, name, &amp;vol);</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1434575341, "post_id": 30902337, "comment_id": 49843754, "body": "In a line read from your file, how is the lake name separated from the volume number?  By space(s), or by some other character?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434578540, "post_id": 30902337, "comment_id": 49845195, "body": "Minor: Note that <code>for (i = 0; i &lt; (int)roundf(vol); ...</code> repeatedly calculates <code>roundf(vol)</code>.  Suggest <code>int n = (int) roundf(vol); for (i = 0; i &lt; n; ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1434576541, "creation_date": 1434576541, "answer_id": 30902708, "question_id": 30902337, "link": "https://stackoverflow.com/questions/30902337/how-to-get-exclude-null-terminators-when-reading-in-a-string/30902708#30902708", "title": "How to get exclude null terminators when reading in a string?", "body": "<p><code>\"%s\"</code> is for scanning non-white-space.  Code needs a different format specifier.</p>\n\n<pre><code>char buf[100];\nwhile (fgets(buf, sizeof buf, fp) != NULL) {\n   if (sscanf(buf, \" %19[A-Za-z ]%f\", name, &amp;vol) != 2) {\n     fprintf(stderr, \"Unexpected data\\n\");\n     break;\n   }\n   name_asterisks(name, vol);\n }\n</code></pre>\n\n<p><code>\" \"</code>: Skip white-spaces.<br>\n<code>\"%19[A-Za-z ]\"</code>: Scan and save up to 19 letters or spaces, append <code>'\\0'</code>.<br>\n<code>\"%f\"</code>: Skip white-spaces and save scan a <code>float</code>.</p>\n\n<p>Note about original code: Better to check for what code wants than checking against 1 undesired result</p>\n\n<pre><code>// while (fscanf(fp, \"%s %f\", name, &amp;vol) != EOF) {\nwhile (fscanf(fp, \"%s %f\", name, &amp;vol) == 2) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1434576546, "creation_date": 1434576546, "answer_id": 30902712, "question_id": 30902337, "link": "https://stackoverflow.com/questions/30902337/how-to-get-exclude-null-terminators-when-reading-in-a-string/30902712#30902712", "title": "How to get exclude null terminators when reading in a string?", "body": "<p>sample for like as <code>gross dirty lake 12.7\\n</code></p>\n\n<pre><code>#include &lt;string.h&gt;  //for strrchr\n...\nchar line[64];//line buffer\n...\nwhile (fgets(line, sizeof line, fp)){\n    char *p = strrchr(line, ' ');//search last ' '\n    *p = '\\0';\n    //snprintf(name, sizeof(name), \"%s\", line);\n    vol = atof(p+1);\n    name_asterisks(line, vol);//name_asterisks(name, vol);\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4515477, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/1740263376/picture?type=large", "display_name": "Christiana S. F. Chamon", "link": "https://stackoverflow.com/users/4515477/christiana-s-f-chamon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434585561, "creation_date": 1434574918, "last_edit_date": 1434579259, "question_id": 30902337, "link": "https://stackoverflow.com/questions/30902337/how-to-get-exclude-null-terminators-when-reading-in-a-string", "title": "How to get exclude null terminators when reading in a string?", "body": "<p>This program opens a file that contains a lake's name and its volume in units of hundreds of cubic miles--separated by a space. Its output is supposed to be the lake's name followed by a number of asterisks to represent its volume to the nearest hundred cubic mile (for example, a lake that has 12.7 hundred cubic miles in volume would print 13 asterisks). However, when it reads in a name that contains a space, it reads up until the space and then prints the next string in a new line. Is there any way I can read \"gross dirty lake\" as one line instead of \"gross\\ndirty\\nlake\" for example? Here's what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nvoid name_asterisks(char name[20], float vol);\n\nmain() {\n       FILE *fp;\n       fp = fopen(\"lakes.txt\", \"r\");\n       char name[20];\n       float vol;\n       if (fp == NULL) {\n          printf(\"File does not exist.\\n\");\n          system(\"pause\");\n          return 0;\n       }\n       while (fscanf(fp, \"%s %f\", name, &amp;vol) != EOF) {\n             name_asterisks(name, vol);\n       }\n       fclose(fp);\n       system(\"pause\");\n}\n\nvoid name_asterisks(char name[20], float vol) {\n     int i;\n     printf(\"%s\", name);\n     for (i = 0; i &lt; (int)roundf(vol); i++)\n         printf(\"*\");\n     printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "output"], "comments": [{"owner": {"reputation": 200780, "user_id": 116908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/54d38793d7a407446999b33b81d607fd?s=128&d=identicon&r=PG", "display_name": "Carl Norum", "link": "https://stackoverflow.com/users/116908/carl-norum"}, "edited": false, "score": 0, "creation_date": 1434574972, "post_id": 30902290, "comment_id": 49843576, "body": "Your code doesn&#39;t have a loop...."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 1, "creation_date": 1434575056, "post_id": 30902290, "comment_id": 49843610, "body": "How exactly do you expect <code>if</code> statements to <code>loop</code> through your code (hint hint).  Also, if you return when you should be printing, your program will exit."}, {"owner": {"reputation": 329, "user_id": 4665670, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/68df7c55bd3f2aacf54cfb282b971c0f?s=128&d=identicon&r=PG&f=1", "display_name": "Javaturtle", "link": "https://stackoverflow.com/users/4665670/javaturtle"}, "edited": false, "score": 0, "creation_date": 1434575191, "post_id": 30902290, "comment_id": 49843689, "body": "It had a while loop. I changed it to a if because I saw an example on another website. I should have left it, but do you understand the trouble I am having? How would I print this out with a while loop given that the while loop is already running correctly? I havent found an example yet that shows me how to use printf or return in this situation."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1434575556, "post_id": 30902290, "comment_id": 49843874, "body": "Well, you can stop a while loop with a condition.  For example while(i &lt; 5) { i++; etc... }.  Or you can use a <code>for</code> loop which accomplishes the same task."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1434575883, "post_id": 30902290, "comment_id": 49844041, "body": "Your code is invalid. <code>main()</code> has the wrong signature (well, none at all. return type missing). Do not <code>define</code> inside a function. The code after the first <code>return</code> is unreachable. Where do you think the result will go and how will that be evaluated? I strongly recommend to read a tutorial or a good book about C. That code will likely also not make sense in Java actually."}], "answers": [{"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1434578095, "post_id": 30902390, "comment_id": 49844999, "body": "this is invalid in C. <code>error: variable-sized object may not be initialized</code>"}], "tags": [], "owner": {"reputation": 133, "user_id": 5016580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R84Dv.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5016580/joe"}, "is_accepted": true, "score": 3, "last_activity_date": 1434575118, "creation_date": 1434575118, "answer_id": 30902390, "question_id": 30902290, "link": "https://stackoverflow.com/questions/30902290/writing-a-2-dimensional-array-table-in-c-how-would-i-go-about-doing-this-about/30902390#30902390", "title": "Writing a 2-dimensional array table in C. How would I go about doing this. About neatness (such as dividing lines) as well", "body": "<p>I have tested this and it outputs the correct table</p>\n\n<pre><code># include &lt;stdio.h&gt;\n\nint main() \n{\n\n    static const int column = 5;\n    static const int row = 3;\n\n    int table[row][column] =\n    {\n        {0, 1, 2, 3, 4},\n        {10, 11, 12, 13, 14},\n        {20, 21, 22, 23, 24}\n    };\n\n    for(int i = 0; i &lt; row; ++i)\n    {\n         for(int j = 0; j &lt; column; ++j)\n         {\n              printf(\"%d \", table[i][j]);\n         }\n         printf(\"\\n\");\n    }\n\n    getchar(); // this means you have to press enter to exit the console\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1224, "user_id": 4950659, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ygz0E.jpg?s=128&g=1", "display_name": "AdminXVII", "link": "https://stackoverflow.com/users/4950659/adminxvii"}, "is_accepted": false, "score": 0, "last_activity_date": 1434584392, "last_edit_date": 1434584392, "creation_date": 1434575967, "answer_id": 30902573, "question_id": 30902290, "link": "https://stackoverflow.com/questions/30902290/writing-a-2-dimensional-array-table-in-c-how-would-i-go-about-doing-this-about/30902573#30902573", "title": "Writing a 2-dimensional array table in C. How would I go about doing this. About neatness (such as dividing lines) as well", "body": "<p>Try this, it output a table with headers and more or less boxed:</p>\n\n<pre><code># include &lt;stdio.h&gt;\n\nint main(){\n\n  int table[3][5] =\n  {\n    {0, 1, 2, 3, 4},\n    {10, 11, 12, 13, 14},\n    {20, 21, 22, 23, 24}\n  };\n\n  printf(\"    | 1  | 2  | 3  | 4  | 5\\n----------------------------\\n\");\n\n  for(int i = 0; i &lt; 3; ++i)\n  {\n     printf(\"%d   |\",i);\n     for(int j = 0; j &lt; 5; ++j)\n     {\n        if(table[i][j] &gt; 9)\n        {\n          printf(\" %d |\", table[i][j]);\n        } else {\n          printf(\" %d  |\", table[i][j]);\n        }\n     }\n     printf(\"\\n----------------------------\\n\");\n  }\n\n  getchar(); // good idea from Joe\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 4665670, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/68df7c55bd3f2aacf54cfb282b971c0f?s=128&d=identicon&r=PG&f=1", "display_name": "Javaturtle", "link": "https://stackoverflow.com/users/4665670/javaturtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19743, "favorite_count": 1, "accepted_answer_id": 30902390, "answer_count": 2, "score": 1, "last_activity_date": 1476533912, "creation_date": 1434574771, "last_edit_date": 1476533912, "question_id": 30902290, "link": "https://stackoverflow.com/questions/30902290/writing-a-2-dimensional-array-table-in-c-how-would-i-go-about-doing-this-about", "title": "Writing a 2-dimensional array table in C. How would I go about doing this. About neatness (such as dividing lines) as well", "body": "<p>I need to write a program that </p>\n\n<ol>\n<li><p>Defines a two-dimensional array named settings with appropriate type, dimensions, and sizes large enough to hold the following table:</p>\n\n<pre><code>0   1   2   3   4\n10  11  12  13  14\n20  21  22  23  24\n</code></pre></li>\n<li><p>Initialize the array with the values in the table</p></li>\n<li>Print the array to standard out in neat rows and columns.</li>\n</ol>\n\n<p>I have been taught some Java in this area, having difficulty actually outputting the numbers. I believe the everything in the array is correct and I am trying to output using if statements. Any way will work, I need to learn how to output tables in word. Also in the example he has each number \"boxed off\" neatly. Is this possible in word or is only the example I gave above possible? </p>\n\n<p>Here is my code that I have worked on thus far.</p>\n\n<pre><code>main() {\n\n#define column 5\n#define row 3\nint i = 0;\nint j = 0;\n\nint table[row][column] =\n{\n    {0, 1, 2, 3, 4},\n    {10, 11, 12, 13, 14},\n    {20, 21, 22, 23, 24}\n};\nif(i&lt;3) {\n    if(j&lt;5) {    \n\n  return table[i][j];\n    j++;\n}\ni++;\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "file"], "comments": [{"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 1, "creation_date": 1434574984, "post_id": 30902184, "comment_id": 49843582, "body": "It could be helpful do describe what you see. Take care that all <code>line[i]</code> point to the same pointer <code>buff</code>."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1434575344, "post_id": 30902184, "comment_id": 49843757, "body": "Theoretically, you cannot see the difference between 1000 lines where all say &quot;OK&quot;, and <i>one</i> line printed 1000 times."}, {"owner": {"reputation": 33, "user_id": 3965710, "user_type": "registered", "profile_image": "https://graph.facebook.com/1330899955/picture?type=large", "display_name": "skm9", "link": "https://stackoverflow.com/users/3965710/skm9"}, "edited": false, "score": 0, "creation_date": 1434575486, "post_id": 30902184, "comment_id": 49843839, "body": "Yes but i could see its not printing 1000 lines of &quot;OK&quot;"}, {"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1434575819, "post_id": 30902184, "comment_id": 49844014, "body": "Maybe the console have less capacity. Did you try to pipe to <code>wc -l</code> or redirect to a file and open with your favorite editor ?"}, {"owner": {"reputation": 33, "user_id": 3965710, "user_type": "registered", "profile_image": "https://graph.facebook.com/1330899955/picture?type=large", "display_name": "skm9", "link": "https://stackoverflow.com/users/3965710/skm9"}, "edited": false, "score": 0, "creation_date": 1434576009, "post_id": 30902184, "comment_id": 49844102, "body": "I must admit i do not have much experience with C so i do not know how to redirect console output to a file."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1434576071, "post_id": 30902184, "comment_id": 49844120, "body": "Redirecction is not a C feature, but your OS. Just do it from your console. <code>man bash</code> (or whateer your shell might be). An even better idea might be to <code>wc -l</code> (count the number of lines). Also, check the results <code>fopen</code>, <code>fgets</code> return."}], "answers": [{"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": true, "score": 1, "last_activity_date": 1434575132, "creation_date": 1434575132, "answer_id": 30902397, "question_id": 30902184, "link": "https://stackoverflow.com/questions/30902184/how-to-copy-strings-collected-from-a-file-into-a-new-array-for-console-output-in/30902397#30902397", "title": "How to copy strings collected from a file into a new array for console output in C", "body": "<p>You have an array <code>line[]</code> which can hold pointers to up to 1000 lines, and you have an array <code>buff</code> which can hold one line (of up to 999 characters).  But you have nowhere to hold 1000 different lines.  As written, your <code>line</code> array will end up containing a bunch of copies of the exact same pointer, all pointing to <code>buff</code>, which will contain a copy of just the last line you read.</p>\n\n<p>One way to fix this would be to call <code>malloc</code> to allocate memory for each line as you read it:</p>\n\n<pre><code>fgets(buff,sizeof(buff),fp);\nchar *buffcopy = malloc(strlen(buff) + 1);\nif(buffcopy == NULL) {fprintf(stderr, \"out of memory\\n\"); exit(1); }\nstrcpy(buffcopy, buff);\nline[i] = buffcopy;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1434576258, "creation_date": 1434576258, "answer_id": 30902652, "question_id": 30902184, "link": "https://stackoverflow.com/questions/30902184/how-to-copy-strings-collected-from-a-file-into-a-new-array-for-console-output-in/30902652#30902652", "title": "How to copy strings collected from a file into a new array for console output in C", "body": "<p>you've got a few errors.</p>\n\n<p>Should you need to store all lines in an array it needs 2 dimensions, line and string.</p>\n\n<p>So</p>\n\n<pre><code>char buff[1000][256];\n</code></pre>\n\n<p>Is probably what your looking for this gives 1000 lines of length 255,   the final character space is for the nul byte.</p>\n\n<p>Although char *line[1000] is valid it's not what you mean, was this your first attempt to get a 2d array?</p>\n\n<p>Now use 256 instead of sizeof(buff) as buffer control in fgets.</p>\n\n<p>In c you cannot assign strings with the = operator nor compare with ==, you use strcpy and strcmp respectively. </p>\n\n<p>Rather than printing on the fly in the read loop ,  it may make debug and development easier to have a print function.</p>\n\n<p>To avoid a weird segmentation fault it makes sense to initialise your array. Use memset setting all bytes to 0</p>\n\n<p>For future reference the format %s prints all characters upto the nul byte, so printf-ing an uninitialised string can cause undefined behaviour, probably a segmentation fault, not always but occurring sometime after the offended %s</p>\n"}], "owner": {"reputation": 33, "user_id": 3965710, "user_type": "registered", "profile_image": "https://graph.facebook.com/1330899955/picture?type=large", "display_name": "skm9", "link": "https://stackoverflow.com/users/3965710/skm9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 30902397, "answer_count": 2, "score": -3, "last_activity_date": 1434576258, "creation_date": 1434574396, "last_edit_date": 1434574824, "question_id": 30902184, "link": "https://stackoverflow.com/questions/30902184/how-to-copy-strings-collected-from-a-file-into-a-new-array-for-console-output-in", "title": "How to copy strings collected from a file into a new array for console output in C", "body": "<p>I am trying to copy a string array \"buff\" which holds exactly 1000 lines of \"OK\" in it. i want to copy buff array into line array but cannot see all the 1000 lines in console output. \nHere goes my code:</p>\n\n<pre><code>FILE *fp;\nchar buff[1000];\n\nchar* line[1000];\n\nfp = fopen(\"protocol1.seq\", \"r\");\nint i;\n\nfor(i=0;i&lt;=999;i++){        \n    fgets(buff,sizeof(buff),fp);\n    line[i] = buff;\n    printf(\"%s\",line[i]);\n}\n\nfclose(fp);\n</code></pre>\n"}, {"tags": ["python", "c", "macos", "python-2.7", "osx-yosemite"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1434574388, "post_id": 30901923, "comment_id": 49843293, "body": "If they&#39;re .exe they&#39;re no longer C, they&#39;re fully-compiled native Windows executables. You&#39;ll have to get the source code and recompile them into OS X executables."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1434592314, "post_id": 30901923, "comment_id": 49848799, "body": "Note, too, that OS X binary executables do not conventionally carry an &quot;.EXE&quot; extension, unlike Windows executables.  This is perhaps the <i>direct</i> reason for the &quot;no such file or directory&quot; error in particular, instead of a different error complaining about the executable format."}, {"owner": {"reputation": 1, "user_id": 1510973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db623dd59dbc38b04d2e6cab200974d?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Ward", "link": "https://stackoverflow.com/users/1510973/henry-ward"}, "edited": false, "score": 0, "creation_date": 1435084449, "post_id": 30901923, "comment_id": 50048391, "body": "Thank you! Your explanations helped a lot. OS X compatibility added :)"}], "owner": {"reputation": 1, "user_id": 1510973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db623dd59dbc38b04d2e6cab200974d?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Ward", "link": "https://stackoverflow.com/users/1510973/henry-ward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434573454, "creation_date": 1434573454, "question_id": 30901923, "link": "https://stackoverflow.com/questions/30901923/run-compiled-c-code-from-python-in-mac", "title": "Run compiled C code from Python in Mac", "body": "<p>I'm very new to OS X, as I just started learning it today out of necessity, so maybe this is a simple question.</p>\n\n<p>I'm testing a python wrapper script that encompasses several C files in Mac. I call scripts using <code>subprocess.check_call()</code>, with a sample parameter of <code>'cScript ' + inputFile + ' ' + outputFile</code>. The scripts were all compiled using gcc in windows, and thus are .exe files. </p>\n\n<p>That's the problem. When I run the python script I get \"OSError: no such file or directory\" returned from check_call. I have the OS X command line dev tools including gcc installed, and I even changed the permissions on the C scripts using chmod +x. Nothing worked, however, and I get the same \"no such file\" error. I'm sure there's a workaround for this, and I'd love any help, but as a new, incompetent Mac user I don't understand why this is even an issue in the first place. </p>\n\n<p>Thanks in advance!</p>\n\n<p>Note: I have extensively tested all of the scripts, including the wrapper script, in Windows using MingW and they all work fine.</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434573393, "post_id": 30901844, "comment_id": 49842711, "body": "The function return value will be in a register. You have not said which processor, your question only makes sense if it&#39;s an 8-bit."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434573427, "post_id": 30901844, "comment_id": 49842727, "body": "Note that <code>char</code> can be signed or unsigned! Better specify that explicitly. Best use <code>uint8_t</code> or <code>int8_t</code> from <code>stdint.h</code> Especially for embedded devices, this is the recommended way."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 3, "creation_date": 1434573585, "post_id": 30901844, "comment_id": 49842820, "body": "i doubt doing this will help you reduce memory usage."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434574006, "post_id": 30901844, "comment_id": 49843061, "body": "If it just to return <code>true</code>/<code>false</code>, use <code>bool</code> (<code>stdbool.h</code> - no one will use the reswerved names like <code>_Bool</code>)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434574109, "post_id": 30901844, "comment_id": 49843124, "body": "As Others already stated: that will only save memory space if the target is 8 Bits. For anything larger, <code>int</code> will likely fit into the same register as <code>char</code>."}, {"owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 0, "creation_date": 1434577856, "post_id": 30901844, "comment_id": 49844897, "body": "I doubt this return debacle will save any memory. If it does, it&#39;ll be penny pinching at best there will only be a noticeable effect if all usual activity has a long call stack. Or there are recursive functions which have a huge level of recursion. Without a discussion about the library and the data set it normally works on memory reduction can not be advised on. This is very last resort."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 0, "creation_date": 1434579938, "post_id": 30901844, "comment_id": 49845775, "body": "@rhubarbdog Agree returning <code>char</code> vs. <code>int</code> will likely not save memory.  Other effect: It could make code longer.  But OP is not asking how good this approach reduces memory, just asking how to detect side effects of the attempt.  IMO, using the <code>enum</code> approach is a fine idea to get a handle on the range of error  values.  Embedded programming stresses limits of RAM, ROM, Stack, time in strange ways and sometimes even a penny-pinched solution is worth it."}, {"owner": {"reputation": 5585, "user_id": 219229, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ef02adcd72fe84ea6c4bdc8ea4cccf17?s=128&d=identicon&r=PG", "display_name": "syockit", "link": "https://stackoverflow.com/users/219229/syockit"}, "edited": false, "score": 0, "creation_date": 1597741215, "post_id": 30901844, "comment_id": 112225738, "body": "To answer the question about int to char: <code>&#39;0&#39;</code> i.e. character literal is <code>int</code>, so other operands are also promoted to <code>int</code>."}], "answers": [{"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 7, "last_activity_date": 1434671539, "last_edit_date": 1434671539, "creation_date": 1434573293, "answer_id": 30901887, "question_id": 30901844, "link": "https://stackoverflow.com/questions/30901844/gcc-warning-for-different-return-type/30901887#30901887", "title": "gcc warning for different return type", "body": "<p>In this specific case <a href=\"https://gcc.gnu.org/wiki/NewWconversion\" rel=\"nofollow noreferrer\">-Wconversion</a> should give you the warning you want, in my simple test case (<em><a href=\"http://coliru.stacked-crooked.com/a/1df79c36c6b45a40\" rel=\"nofollow noreferrer\">see it live</a></em>):</p>\n\n<pre><code>char func()\n{\n    int x = 10 ;\n\n    return x ;\n}\n\nint main() {}\n</code></pre>\n\n<p>I receive the following warning:</p>\n\n<blockquote>\n  <p>warning: conversion to 'char' from 'int' may alter its value [-Wconversion]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1434573809, "post_id": 30901956, "comment_id": 49842941, "body": "<code>char</code> is not defined to be signed or unsigned by the standard. It can even change between compilers for the same architecture unles they use the same ABI/PCS. An <code>enum</code> OTOH will be an <code>int</code> at least. That will not save anything. (However, it is a good idea to have the returned values as such being enums if that is for an error code)."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434573995, "post_id": 30901956, "comment_id": 49843054, "body": "Enums are not at &quot;least an int&quot; but at &quot;most an int&quot;, at least that&#39;s my understanding from here: <a href=\"http://stackoverflow.com/a/366026/951784\">stackoverflow.com/a/366026/951784</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434574220, "post_id": 30901956, "comment_id": 49843194, "body": "I prefer the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.2p3\" rel=\"nofollow noreferrer\">standard</a> as a reference. Note that p4 only refers about _compatibility. That&#39;s why I would return <code>(u)int8_t</code>, but use the enum labels."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434574367, "post_id": 30901956, "comment_id": 49843279, "body": "Ok, from the C99, 6.7.2.2p4 says Each enumerated type shall be compatible with char, a signed integer type, or an unsigned integer type. The choice of type is implementation-defined,108) but shall be capable of representing the values of all the members of the enumeration. [...]  Footnote 108 adds  An implementation may delay the choice of which integer type until all enumeration constants have been seen.  If you return uint8_t instead of enum, you risk overflow very quickly.  256 error codes is pretty reasonable."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434574637, "post_id": 30901956, "comment_id": 49843415, "body": "Hmm.. interesting, yeah you seem to be right about that, I should be read more carefully. However, that still does not <i>guarantee</i> <code>char</code>, but might allow for it. That is the main point I criticize about enums. It would be much easier if one could specify its type explicitly.."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434574781, "post_id": 30901956, "comment_id": 49843481, "body": "I&#39;d rather take the extra byte of return size than worry about overflowing the resulting return from an error into a success in an embedded application.  You can always shave a few extra bytes off somewhere else and if you&#39;re really THAT hard up, use a bigger part.  The difference in price between for a slightly bigger part is in the pennies range. It&#39;s just not a fight worth having in 2015."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434575054, "post_id": 30901956, "comment_id": 49843609, "body": "If only the constants are used, the compiler will warn, That can be turned to an error, so I do not see a problem here. The OP seems to have real trouble with memory footprint (I know such situations very well - someone has choosen a cheap MCU whit no option for more Flash/RAM). However, there are other things I would try first."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434575172, "post_id": 30901956, "comment_id": 49843677, "body": "Exactly, shave memory elsewhere first before messing with return sizes of all/many functions."}, {"owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 0, "creation_date": 1434578279, "post_id": 30901956, "comment_id": 49845069, "body": "You have written a fact, then supplied a supporting link that says in most cases my statement is not true. And got voted up?"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1434578595, "post_id": 30901956, "comment_id": 49845224, "body": "Sorry, that link was misleading.  See earlier comments for the reference from the standard: from the C99, 6.7.2.2p4 says Each enumerated type shall be compatible with char, a signed integer type, or an unsigned integer type. The choice of type is implementation-defined,108) but shall be capable of representing the values of all the members of the enumeration. [...] Footnote 108 adds An implementation may delay the choice of which integer type until all enumeration constants have been seen."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434580110, "post_id": 30901956, "comment_id": 49845832, "body": "+1 for the enum idea, yet I do not consider OP&#39;s approach <i>bad</i>, just not likely successful.  BTW: &quot;automatically create the correct return size&quot; is true, but not necessarily the smallest size.  Often depends on compiler options trading speed/size."}, {"owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 0, "creation_date": 1434580701, "post_id": 30901956, "comment_id": 49846046, "body": "The current standard is C11, although I don&#39;t know if that effects the rationale"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1434581227, "post_id": 30901956, "comment_id": 49846244, "body": "I just checked the latest standard and that part didn&#39;t change.  I&#39;m not sure what you&#39;re trying to say."}, {"owner": {"reputation": 61, "user_id": 5021429, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NPssdB9aBd0/AAAAAAAAAAI/AAAAAAAAAo4/leYxYTSw9d8/photo.jpg?sz=128", "display_name": "John Brooks", "link": "https://stackoverflow.com/users/5021429/john-brooks"}, "edited": false, "score": 0, "creation_date": 1434724215, "post_id": 30901956, "comment_id": 49916322, "body": "Thanks for all the feedback. This is my first embedded application so I am still learning about all this. The development is on an Atmel based target (currently using Arduino). As I&#39;m having to work within some tight constraints, I&#39;m looking at any options to shave memory. I do like the enum idea. With regards to the char return value only making a difference if the target is 8-bit as a 16-bit register would still take up the same memory, I did realise that but was hoping to save memory from the locally stored &#39;result&#39; variable. I&#39;ll have a play, thanks!!"}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 2, "last_activity_date": 1434578686, "last_edit_date": 1434578686, "creation_date": 1434573590, "answer_id": 30901956, "question_id": 30901844, "link": "https://stackoverflow.com/questions/30901844/gcc-warning-for-different-return-type/30901956#30901956", "title": "gcc warning for different return type", "body": "<p>This is a really bad idea: <code>char</code> is a certain size on most embedded systems (usually 1 byte so it's actually an <code>unsigned char</code>) and if you end up setting your <code>int result = 256</code> somehow, it will overflow and return 0.  Your error just turned into a success.  Crashy crashy (hopefully).  Worse, maybe kill someone with your embedded device.</p>\n\n<p>I know you're trying to fix this but even just returning magic numbers is dangerous.  </p>\n\n<p>Instead, declare an enumeration type that is an error.  It will give you type safety (to an extent) and automatically create the correct return size for your functions.</p>\n\n<pre><code>typedef enum status {\n    STATUS_OK = 0,\n    STATUS_ERR1,\n    STATUS_ERR2,\n// ... etc ...\n} status_t;\n\nstatus_t processSomething (SomeType *something)\n{\n  status_t result = STATUS_OK;\n  ...\n  do stuff\n  ...\n\n  return result;\n}\n</code></pre>\n\n<p>This is much safer and the compiler will allocate only 1 byte for your returns until you have too many to fit, and only then will it make it bigger.\nTaken from the current C Standard (C99): <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf\" rel=\"nofollow\">http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf</a></p>\n\n<blockquote>\n  <p>6.7.2.2 Enumeration specifiers\n      [...]\n      Constraints\n      The expression that defines the value of an enumeration constant shall be an integer constant expression that has a value representable\n  as an int.\n      [...]\n      Each enumerated type shall be compatible with char, a signed integer type, or an unsigned integer type. The choice of type is\n  implementation-defined, but shall be capable of representing the\n  values of all the members of the enumeration.</p>\n</blockquote>\n"}], "owner": {"reputation": 61, "user_id": 5021429, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NPssdB9aBd0/AAAAAAAAAAI/AAAAAAAAAo4/leYxYTSw9d8/photo.jpg?sz=128", "display_name": "John Brooks", "link": "https://stackoverflow.com/users/5021429/john-brooks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1434751189, "creation_date": 1434573112, "last_edit_date": 1434751189, "question_id": 30901844, "link": "https://stackoverflow.com/questions/30901844/gcc-warning-for-different-return-type", "title": "gcc warning for different return type", "body": "<p>I have written a library in C that now is going to be used in an embedded processor board. I need to reduce the memory foot print so was going an changing the return type of some functions from int to char (only used to flag errors).</p>\n\n<p>Changing the return type but not changing the variable returned doesn't produce a warning. Is there some way set this in gcc as I want to ensure I've caught all instances.</p>\n\n<pre><code>char processSomething (SomeType *something)\n{\n  int result = 0;\n  ...\n  do stuff\n  ...\n\n  return result; /* no warning */\n}\n</code></pre>\n\n<p>Thanks</p>\n\n<p>19 June:\nI've added the -Wconversion which has highlighted some interesting things. Two questions with this. One of my functions I take a two character hex string and convert to decimal using </p>\n\n<p>char decimal;</p>\n\n<pre><code>decimal = hexstring [0] - '0' &lt;&lt; 4 + hexstring [1] - '0'; // for 0 to 9\n</code></pre>\n\n<p>it complains about converting from int to char and from what I can gather is the '-', '+', and '&lt;&lt;' operators all seem to implicitly convert to int. Is this correct or am I interpreting the warning wrong. Or is there a more better way to do this?</p>\n\n<p>Also, when using strtol into an int (complains about 'long int' to 'int') but I can guarantee the value will not be over even short int in size, is it safe to typecast? As in will it truncate the extra (and hopefully zero bytes) of the long? Or does this depend on endianness?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "igraph", "shortest-path"], "comments": [{"owner": {"reputation": 10046, "user_id": 604364, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c5a80cfc156650330495fff2ec8d7d91?s=128&d=identicon&r=PG", "display_name": "Gabor Csardi", "link": "https://stackoverflow.com/users/604364/gabor-csardi"}, "edited": false, "score": 0, "creation_date": 1434992025, "post_id": 30901794, "comment_id": 50001223, "body": "Is this R igraph? Or Python igraph?"}, {"owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "reply_to_user": {"reputation": 10046, "user_id": 604364, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c5a80cfc156650330495fff2ec8d7d91?s=128&d=identicon&r=PG", "display_name": "Gabor Csardi", "link": "https://stackoverflow.com/users/604364/gabor-csardi"}, "edited": false, "score": 0, "creation_date": 1435001046, "post_id": 30901794, "comment_id": 50006233, "body": "I started out in R with a large edge-list file. I need a modified shortest path (SP) to find the SP between a pair of nodes in G1, where the weights are the SP in G2 (G2 has the nodes in G1 and more).  Thus I think that such modification needs to be done in the C code.  If I have to do that modification to the C src, then I can just work in C, since I don&#39;t know how to incorporate a modified C src into R, is it the wrong approach?  I noticed that if I have an edge-list with <code>long int</code> from 1 to 12 igraph c will add a node id 0 resulting in 12+1 ids, in this case 12 is my node and igraph&#39;s  id?"}], "owner": {"reputation": 577, "user_id": 633182, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d47a7cc3ba0e67abdb01989f1abcd984?s=128&d=identicon&r=PG", "display_name": "sAguinaga", "link": "https://stackoverflow.com/users/633182/saguinaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434572966, "creation_date": 1434572966, "question_id": 30901794, "link": "https://stackoverflow.com/questions/30901794/modify-c-igraph-shortest-path-weights-argument", "title": "Modify C igraph shortest.path &quot;weights&quot; argument", "body": "<p>Would I have to modify the C <em>igraph</em> source code to add an option to the <code>shortest.paths</code> argument: <code>weights</code> that if <code>weights=</code> some string other than 'weights', say 'new_weights', then compute the weight on the fly?</p>\n\n<p>Python's NetworkX has this option, but igraph does not.  If I'm wrong on this, please let me know.  </p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1434572551, "post_id": 30901621, "comment_id": 49842252, "body": "The input is 0001 and you want to preserve it, or the input is 1 and you want to store it as 0001?"}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1434572677, "creation_date": 1434572677, "answer_id": 30901723, "question_id": 30901621, "link": "https://stackoverflow.com/questions/30901621/adding-zeroes-to-a-string-while-scanning-c-programming/30901723#30901723", "title": "Adding zeroes to a string while scanning C programming", "body": "<p>Not clear what you're asking, but scanning a number with <code>scanf</code> gives you a number, not a string, so prefixing 0s makes no sense.</p>\n\n<p>If you later want to convert that number to a string with leading 0s, you can do that with <code>sprintf</code>:</p>\n\n<pre><code>sprintf(buffer, \"%04d\", n);\n</code></pre>\n\n<p>will convert the number <code>n</code> into a string in the buffer, with leading 0s added to make it at least 4 digits.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1434573128, "last_edit_date": 1434573128, "creation_date": 1434572700, "answer_id": 30901726, "question_id": 30901621, "link": "https://stackoverflow.com/questions/30901621/adding-zeroes-to-a-string-while-scanning-c-programming/30901726#30901726", "title": "Adding zeroes to a string while scanning C programming", "body": "<p>You can use <code>sprintf</code> right after <code>scanf</code> to create a string that has the leading zeros.</p>\n\n<pre><code>char buffer[20];\nint n;\nscanf(\"%d\", &amp;n);\nsprintf(buffer, \"%04d\", n);\n</code></pre>\n\n<p><code>buffer</code> now has <code>0</code>s padded at the front.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1434572835, "creation_date": 1434572835, "answer_id": 30901756, "question_id": 30901621, "link": "https://stackoverflow.com/questions/30901621/adding-zeroes-to-a-string-while-scanning-c-programming/30901756#30901756", "title": "Adding zeroes to a string while scanning C programming", "body": "<p>The <code>scanf</code> function will ignore leading zeros. But you can format the number as a string after input like this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int i;\n    char num[20];\n    scanf(\"%d\", &amp;i);\n    sprintf(num, \"%04d\", i);\n    printf(\"%s\\n\", num);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 866, "user_id": 4648976, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/GGoxE.png?s=128&g=1", "display_name": "mustangDC", "link": "https://stackoverflow.com/users/4648976/mustangdc"}, "is_accepted": false, "score": 0, "last_activity_date": 1434572923, "creation_date": 1434572923, "answer_id": 30901786, "question_id": 30901621, "link": "https://stackoverflow.com/questions/30901621/adding-zeroes-to-a-string-while-scanning-c-programming/30901786#30901786", "title": "Adding zeroes to a string while scanning C programming", "body": "<p>If you want to scan a number that should contain leading zeros then you have to read it as a string and manually enter as 0001.</p>\n\n<p>To verify that the it is an integer with leading zeros, you can use <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow\">strtol</a>\n. Then just check if the first character in the string is a '0'.</p>\n\n<p>Thanks , hope it helps</p>\n"}], "owner": {"reputation": 1, "user_id": 5021397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffe3f2e6f43f4c7719555a133c9c546e?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5021397/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1434573128, "creation_date": 1434572380, "question_id": 30901621, "link": "https://stackoverflow.com/questions/30901621/adding-zeroes-to-a-string-while-scanning-c-programming", "title": "Adding zeroes to a string while scanning C programming", "body": "<p>I am trying to scan a number , for example the number : 1 and I want to scan it like 0001 in order to do strcat later , that means this number is saved as a string. </p>\n\n<p>Do you know how to add those zeroes in front of the number while I am doing the scanf ? </p>\n\n<p>Thank you for reading , hope to get an answer soon. :)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434571444, "post_id": 30901052, "comment_id": 49841643, "body": "It&#39;s interesting that the example compiled and run produces a segmentation fault. Why <code>code</code> is referenced as a function..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 1, "creation_date": 1434571515, "post_id": 30901052, "comment_id": 49841680, "body": "@EugeniuRosca that&#39;s because the array doesn&#39;t (yet) contain executable code. So it crashes."}, {"owner": {"reputation": 1419, "user_id": 3813104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mj3AN.jpg?s=128&g=1", "display_name": "SivaDotRender", "link": "https://stackoverflow.com/users/3813104/sivadotrender"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434571618, "post_id": 30901052, "comment_id": 49841736, "body": "@EugeniuRosca I believe the reason for this is because the stack and the heap is not executable in most modern OSes (for security reasons). You would have to turn this functionality off for this code to work."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434571746, "post_id": 30901052, "comment_id": 49841801, "body": "@SivaDotRender so why did you ask the question if you know what it does?"}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434571793, "post_id": 30901052, "comment_id": 49841825, "body": "How the name of an array can be assigned to a function pointer? Is it legal?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434571852, "post_id": 30901052, "comment_id": 49841862, "body": "@EugeniuRosca <code>func = (int (*)()) code;</code> is a cast."}, {"owner": {"reputation": 1419, "user_id": 3813104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mj3AN.jpg?s=128&g=1", "display_name": "SivaDotRender", "link": "https://stackoverflow.com/users/3813104/sivadotrender"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434571887, "post_id": 30901052, "comment_id": 49841891, "body": "@WeatherVane that was not my question though. My question was about the int (*func)(); and exactly what that line does."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434571931, "post_id": 30901052, "comment_id": 49841915, "body": "Which has been answered below."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434571997, "post_id": 30901052, "comment_id": 49841952, "body": "@WeatherVane: Give me an example of data that can be put in the <code>code</code> array without producing a segmentation fault."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434572153, "post_id": 30901052, "comment_id": 49842035, "body": "@EugeniuRosca it wasn&#39;t my question, but with no valid code it certainly won&#39;t run."}, {"owner": {"reputation": 1419, "user_id": 3813104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mj3AN.jpg?s=128&g=1", "display_name": "SivaDotRender", "link": "https://stackoverflow.com/users/3813104/sivadotrender"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434572425, "post_id": 30901052, "comment_id": 49842167, "body": "@EugeniuRosca have you tried to disable DEP on your machine? The code will be specific to your processor."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434572619, "post_id": 30901052, "comment_id": 49842287, "body": "@WeatherVane: That code is not human-readable for sure. I believe you must put there some stuff compiled <i>prior</i> to compiling this <code>main</code> function we see in the example."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 1, "creation_date": 1434572851, "post_id": 30901052, "comment_id": 49842407, "body": "@EugeniuRosca; You need to provide the byte code like <code>char code[] = &quot;\\x48\\x31\\xc0&quot;;</code> and then the function at this address will be executed."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434573106, "post_id": 30901052, "comment_id": 49842550, "body": "That is a pretty damn interesting example, i must confess. thanks for your clarifications."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 1, "creation_date": 1434573535, "post_id": 30901052, "comment_id": 49842795, "body": "@EugeniuRosca; <a href=\"http://stackoverflow.com/q/28668138/2455888\">This</a> would help you dig it more."}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434573605, "post_id": 30901052, "comment_id": 49842830, "body": "@EugeniuRosca Change to <code>char const code[] = &quot;\\xb8\\x05\\x00\\x00\\x00\\xc3&quot;;</code> and there should be no segmentation fault. <code>const</code> goes to <code>.rodata</code> section which is executable under Linux. The code just returns 5."}, {"owner": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 0, "creation_date": 1434573734, "post_id": 30901052, "comment_id": 49842903, "body": "as a side note, that last line of main can be rewritten as <code>func();</code> everything else there is extra"}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 0, "creation_date": 1434573835, "post_id": 30901052, "comment_id": 49842953, "body": "haccks: you could link the 2 questions :D @4566976: it worked!"}], "answers": [{"comments": [{"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1434571260, "post_id": 30901100, "comment_id": 49841509, "body": "@haccks: Edited. I had confused it with <code>void</code> as argument specification."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1434571605, "post_id": 30901100, "comment_id": 49841730, "body": "@haccks: No downvote, but withdrawal. I&#39;m more of a C++ guy, I should watch out better for the differences when answering C questions."}, {"owner": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 0, "creation_date": 1434573620, "post_id": 30901100, "comment_id": 49842835, "body": "obsolescent? do you mean obsolete? or do you actually mean that its been becoming more obsolete since C99?"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 0, "creation_date": 1434573866, "post_id": 30901100, "comment_id": 49842972, "body": "@SteveCox: <a href=\"http://dictionary.reference.com/browse/obsolescent\" rel=\"nofollow noreferrer\">dictionary.reference.com/browse/obsolescent</a> and <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</a> (6.11.6, p. 179)"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 0, "creation_date": 1434575167, "post_id": 30901100, "comment_id": 49843672, "body": "@SteveCox: Apparently it&#39;s their way of saying &quot;deprecated&quot;: <i>Certain features are obsolescent, which means that they may be considered for withdrawal in future revisions of this International Standard. They are retained because of their widespread use, but their use in new  implementations (for implementation features) or new programs (for language [6.11] or library features [7.31]) is discouraged.</i> (page XVII)"}], "tags": [], "owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "is_accepted": true, "score": 6, "last_activity_date": 1434574171, "last_edit_date": 1434574171, "creation_date": 1434570684, "answer_id": 30901100, "question_id": 30901052, "link": "https://stackoverflow.com/questions/30901052/what-does-int-func-do-in-c/30901100#30901100", "title": "What does int (*func)() do in C?", "body": "<p>The line in question declares a function pointer for a function with unspecified arguments (an \"obsolescent\" feature since C99) and with return type <code>int</code>.</p>\n\n<p>The first line of your <code>main</code> declares that pointer, the second line initializes the pointer so it points to the function <code>code</code>. The third line executes it.</p>\n\n<p>You can get a description of pointers to functions in general <a href=\"http://www.cprogramming.com/tutorial/function-pointers.html\" rel=\"nofollow\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1434572994, "post_id": 30901143, "comment_id": 49842490, "body": "The arguments can be any type, not just int.  No conversions(other than the normal function argument promotions) or checking will be done on any arguments passed to the function when it is called, but if they don&#39;t match what the function is expecting, the result is undefined."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1434573151, "post_id": 30901143, "comment_id": 49842568, "body": "@ChrisDodd; Agreed. Removed that line, but many C compilers assumes default type to be <code>int</code>."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1434573385, "post_id": 30901143, "comment_id": 49842702, "body": "The defaulting to <code>int</code> only applies to declarators with no type specifier.  So if you said <code>int (*func)(a)</code>, that would be one argument of type <code>int</code> named <code>a</code>.  Or if you said <code>(*func)();</code> in the global scope, the return type would default to <code>int</code> -- defaulting to <code>int</code> only occurs in scopes where expressions are not possible (so not on local vars within a function)."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1434573597, "post_id": 30901143, "comment_id": 49842828, "body": "@ChrisDodd - to be more precise, arguments will undergo default argument promotion.  More details for the curious are here:  <a href=\"http://stackoverflow.com/questions/1255775/default-argument-promotions-in-c-function-calls\" title=\"default argument promotions in c function calls\">stackoverflow.com/questions/1255775/&hellip;</a>  I don&#39;t mean to be pedantic, but such argument promotion can cause hard-to-diagnose problems, with this particular example being prone to such issues."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1434573042, "last_edit_date": 1434573042, "creation_date": 1434570821, "answer_id": 30901143, "question_id": 30901052, "link": "https://stackoverflow.com/questions/30901052/what-does-int-func-do-in-c/30901143#30901143", "title": "What does int (*func)() do in C?", "body": "<p><code>int (*func)();</code> declares <code>func</code> as a pointer to a function that returns an <code>int</code> type and <em>expects any number of arguments</em>.</p>\n"}], "owner": {"reputation": 1419, "user_id": 3813104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mj3AN.jpg?s=128&g=1", "display_name": "SivaDotRender", "link": "https://stackoverflow.com/users/3813104/sivadotrender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4086, "favorite_count": 2, "accepted_answer_id": 30901100, "answer_count": 2, "score": 5, "last_activity_date": 1434574171, "creation_date": 1434570545, "question_id": 30901052, "link": "https://stackoverflow.com/questions/30901052/what-does-int-func-do-in-c", "title": "What does int (*func)() do in C?", "body": "<p>What does this line do in C? </p>\n\n<pre><code> int (*func)();\n</code></pre>\n\n<p>I extracted it from the following program that is supposed to execute byte code (assembly instructions converted to its corresponding bytes)</p>\n\n<pre><code>char code[] = \"bytecode will go here!\";\nint main(int argc, char **argv)\n{\n  int (*func)();\n  func = (int (*)()) code;\n  (int)(*func)();\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio-2008", "unicode", "wofstream"], "comments": [{"owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "edited": false, "score": 0, "creation_date": 1434569864, "post_id": 30900775, "comment_id": 49840575, "body": "How do you tell result is wrong. Try open the text file with Notepad and tell notepad to open it as Unicode"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1434570245, "post_id": 30900775, "comment_id": 49840799, "body": "Maybe it&#39;s a flushing problem? Try calling MyOutputStream.flush() or adding std::endl somewhere"}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "edited": false, "score": 0, "creation_date": 1434572478, "post_id": 30900775, "comment_id": 49842205, "body": "I have noticed that the file output is ansi not like with the C code."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "edited": false, "score": 0, "creation_date": 1434572492, "post_id": 30900775, "comment_id": 49842211, "body": "i&#39;m using a hex editor to look at the file afterwards."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434578992, "post_id": 30901937, "comment_id": 49845383, "body": "You should not need to supply your own buffer. But outputting a <code>0xFEFF</code> character (Unicode codepoint <code>U+FEFF WIDTH NO-BREAK SPACE</code>) outputs a <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow noreferrer\">BOM</a> at the front of the file to help text editors know the file is Unicode encoded.  You could also use <code>MyOutputStream &lt;&lt; L&quot;\\xFEFF&quot;;</code> for that instead of <code>MyOutputStream.put(0xFEFF)</code>."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434646119, "post_id": 30901937, "comment_id": 49879375, "body": "well one would have thought so, but I found trying that I get the no output issue."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434646209, "post_id": 30901937, "comment_id": 49879431, "body": "So I took out just the: MyOutputStream.put(0xFEFF);     and it still works/opens correctly in notepad, notepad++. but without the buffer it doesn&#39;t write anything out. I did notice by opening the C program output txt file that the FEFF wasn&#39;t in the file at all."}, {"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1434646451, "post_id": 30901937, "comment_id": 49879568, "body": "the final code that works is:-  \t wofstream MyOutputStream(L&quot;c:\\\\test2.txt&quot;, ios_base::binary);  \t if(!MyOutputStream) \t { \t\tAfxMessageBox(L&quot;Error opening file&quot;); \t\treturn; \t} \t\twchar_t buffer1[128];   \t\tMyOutputStream.rdbuf()-&gt;pubsetbuf(buffer1, 128);   \t\tMyOutputStream &lt;&lt; L&quot;test\\r\\n&quot;; \t\tMyOutputStream &lt;&lt; L&quot;\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n&quot;; \t\tMyOutputStream &lt;&lt; L&quot;\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n&quot;;                  MyOutputStream.close();"}], "tags": [], "owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "is_accepted": false, "score": 1, "last_activity_date": 1434573517, "creation_date": 1434573517, "answer_id": 30901937, "question_id": 30900775, "link": "https://stackoverflow.com/questions/30900775/c-wofstream-issue-in-unicode-program/30901937#30901937", "title": "c++ wofstream issue in unicode program", "body": "<p>worked it out... here it is:-</p>\n\n<pre><code>    wofstream MyOutputStream(L\"c:\\\\test2.txt\", ios_base::binary);\n\n    wchar_t buffer1[128];  \n    MyOutputStream.rdbuf()-&gt;pubsetbuf(buffer1, 128); \n    MyOutputStream.put(0xFEFF);\n    MyOutputStream &lt;&lt; L\"test\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "edited": false, "score": 0, "creation_date": 1434702807, "post_id": 30921369, "comment_id": 49902223, "body": "note: wifstream is the same, have to use the buffer and use ios_base::binary"}], "tags": [], "owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "is_accepted": false, "score": 0, "last_activity_date": 1434646525, "creation_date": 1434646525, "answer_id": 30921369, "question_id": 30900775, "link": "https://stackoverflow.com/questions/30900775/c-wofstream-issue-in-unicode-program/30921369#30921369", "title": "c++ wofstream issue in unicode program", "body": "<p>the final code that works is:-</p>\n\n<pre><code>  wofstream MyOutputStream(L\"c:\\\\test2.txt\", ios_base::binary); \n  if(!MyOutputStream)\n  {\n    AfxMessageBox(L\"Error opening file\");\n    return;\n  }\n    wchar_t buffer1[128];  \n    MyOutputStream.rdbuf()-&gt;pubsetbuf(buffer1, 128); \n\n    MyOutputStream &lt;&lt; L\"test\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\";\n\n    MyOutputStream.close();\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 3725395, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3692af387c7259d510553858b107190b?s=128&d=identicon&r=PG&f=1", "display_name": "user3725395", "link": "https://stackoverflow.com/users/3725395/user3725395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434646525, "creation_date": 1434569604, "question_id": 30900775, "link": "https://stackoverflow.com/questions/30900775/c-wofstream-issue-in-unicode-program", "title": "c++ wofstream issue in unicode program", "body": "<p>Using unicode compile in vs2008\nHow do you output many language characters to a file in C++ with wofstream?</p>\n\n<p>I can do it in C code no problem e.g.</p>\n\n<pre><code> FILE *out;\n if( (out  = _wfopen( L\"test.txt\", L\"wb\" )) != NULL )\n {\n     fwprintf(out,L\"test\\r\\n\");\n     fwprintf(out,L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\");\n     fwprintf(out,L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\");\n }\n</code></pre>\n\n<p>when I open the file it's all correct, but with below C++ program all I get is the first line and I have tried locale::global(locale(\"\")); with same result.</p>\n\n<pre><code> wofstream MyOutputStream(L\"test.txt\"); \n if(!MyOutputStream)\n {\n    AfxMessageBox(L\"Error opening file\");\n    return;\n }\n\n    MyOutputStream &lt;&lt; L\"test\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u043d\u0430\u043a\u0430\u0437\u0430\u043d\u0438\u0435\\r\\n\";\n    MyOutputStream &lt;&lt; L\"\u30a6\u30a7\u30d6\u5168\u4f53\u304b\u3089\u691c\u7d22\\r\\n\";\n\n    MyOutputStream.close();\n</code></pre>\n\n<p>and I have tried inserting this with same result:-</p>\n\n<pre><code>  std::locale mylocale(\"\"); \n  MyOutputStream.imbue(mylocale);\n</code></pre>\n"}, {"tags": ["c", "gcc", "optimization", "dialect"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1434569730, "post_id": 30900773, "comment_id": 49840484, "body": "I can think of at least one case off the top of my head where it could: <a href=\"http://stackoverflow.com/q/2178115/1708801\">Are compilers allowed to eliminate infinite loops?</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1434569869, "post_id": 30900773, "comment_id": 49840581, "body": "@ShafikYaghmour But it doesn&#39;t mean GCC will actually eliminate them, even if allowed.."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1434569896, "post_id": 30900773, "comment_id": 49840598, "body": "@EugeneSh. it does not, I did say <i>could</i>"}, {"owner": {"reputation": 197, "user_id": 1003231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dfd95502fe9bbcf5f9fca380014372bb?s=128&d=identicon&r=PG", "display_name": "Underhill", "link": "https://stackoverflow.com/users/1003231/underhill"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1434570970, "post_id": 30900773, "comment_id": 49841280, "body": "@Shafik OK ... but I was looking for something more real-world-ish that might actually affect my code."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1434571110, "post_id": 30900773, "comment_id": 49841392, "body": "@ShafikYaghmour: &quot;... controlling expression is not a constant expression ...&quot;. <code>1</code> <i>is</i>, a <i>constant expression</i>. I really would wonder if a compiler would remove such a loop. It may, however, optimize-out any expressions inside the loop if thier side-effects are not used externally. That would be, normal optimizations."}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 3, "last_activity_date": 1434571675, "creation_date": 1434571675, "answer_id": 30901401, "question_id": 30900773, "link": "https://stackoverflow.com/questions/30900773/does-c-dialect-affect-optimization-in-gcc/30901401#30901401", "title": "Does C dialect affect optimization in gcc?", "body": "<p>It could, likely.</p>\n\n<p>One difference between C89 (\"ANSI C\") and C99 is the <code>restrict</code> keyword added with C99, which is specifically geared towards improving optimization. While your code may not explicitly use it (because you wrote C89 code), the C language headers like &lt;string.h> may declare function prototypes using <code>restrict</code> when in C99 mode. This may or may not have an effect. You'll only know when you look at the generated code.</p>\n"}], "owner": {"reputation": 197, "user_id": 1003231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dfd95502fe9bbcf5f9fca380014372bb?s=128&d=identicon&r=PG", "display_name": "Underhill", "link": "https://stackoverflow.com/users/1003231/underhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 30901401, "answer_count": 1, "score": 2, "last_activity_date": 1434571675, "creation_date": 1434569599, "question_id": 30900773, "link": "https://stackoverflow.com/questions/30900773/does-c-dialect-affect-optimization-in-gcc", "title": "Does C dialect affect optimization in gcc?", "body": "<p>Does C dialect affect optimization in gcc?\nThat is (all optimization options being held the same) will gcc produce faster/slower/larger/smaller code for ANSI vs C99 vs ...?</p>\n"}, {"tags": ["c", "windows", "gcc", "configure", "tdm-mingw"], "comments": [{"owner": {"reputation": 65, "user_id": 5021190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9543705da145c951bdffc709595d99a?s=128&d=identicon&r=PG&f=1", "display_name": "BenGrasset91", "link": "https://stackoverflow.com/users/5021190/bengrasset91"}, "edited": false, "score": 0, "creation_date": 1434732151, "post_id": 30900552, "comment_id": 49921341, "body": "Sorry, I should have specified that I am on Windows 8.1, 64-bit. I imagine that makes quite a difference... I&#39;ve read into it a bit more and it seems that &quot;configure&quot; scripts in general are executed by a set of binaries called &quot;Autotools&quot;? So I suppose my question now is, what would the easiest Windows equivalent to Autotools be?"}], "answers": [{"tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1434569121, "creation_date": 1434569121, "answer_id": 30900631, "question_id": 30900552, "link": "https://stackoverflow.com/questions/30900552/how-do-i-execute-a-standard-gcc-configure-script-with-the-tdm64-gcc-toolchain/30900631#30900631", "title": "How do I execute a standard GCC &quot;configure&quot; script with the TDM64-GCC toolchain?", "body": "<p><code>./configure</code> is a shell script.  It will be compatible with bash, sh, and maybe csh.  Probably the first line in it is</p>\n\n<pre><code> #!/bin/sh\n</code></pre>\n\n<p>or</p>\n\n<pre><code> #!/bin/bash\n</code></pre>\n\n<p>If you are not on Linux or Unix, look for a configure script specifically for your operating system.  Not all tools support non-Unix environments.</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1434569241, "creation_date": 1434569241, "answer_id": 30900670, "question_id": 30900552, "link": "https://stackoverflow.com/questions/30900552/how-do-i-execute-a-standard-gcc-configure-script-with-the-tdm64-gcc-toolchain/30900670#30900670", "title": "How do I execute a standard GCC &quot;configure&quot; script with the TDM64-GCC toolchain?", "body": "<p>First thing you should read the <code>INSTALL</code> or <code>README</code> file included with the sources. Usually they describe all of the available parameters for the <code>./configure</code> script (which is not \"standard GCC\", but specific to the project). For example for the <a href=\"https://sourceforge.net/projects/strace/\" rel=\"nofollow\"><code>strace</code></a> project (picked it randomly, as I've cross-compiled it recently), if you want to cross-compile it with your <code>tdm64-whatever-gcc</code> toolchain, you have to specify it in the <code>host</code> parameter:</p>\n\n<pre><code>./configure --host=tdm64-whatever\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5021190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9543705da145c951bdffc709595d99a?s=128&d=identicon&r=PG&f=1", "display_name": "BenGrasset91", "link": "https://stackoverflow.com/users/5021190/bengrasset91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1434571684, "creation_date": 1434568861, "last_edit_date": 1434571684, "question_id": 30900552, "link": "https://stackoverflow.com/questions/30900552/how-do-i-execute-a-standard-gcc-configure-script-with-the-tdm64-gcc-toolchain", "title": "How do I execute a standard GCC &quot;configure&quot; script with the TDM64-GCC toolchain?", "body": "<p>Which of the executables in the TDM <code>bin</code> directory will actually recognize <code>./configure</code> as a valid command?</p>\n"}, {"tags": ["c", "printf", "valgrind"], "comments": [{"owner": {"reputation": 6149, "user_id": 1860561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmIX.jpg?s=128&g=1", "display_name": "gitsitgo", "link": "https://stackoverflow.com/users/1860561/gitsitgo"}, "edited": false, "score": 0, "creation_date": 1434568567, "post_id": 30899986, "comment_id": 49839764, "body": "Might help to tell us what those nasty errors are exactly."}], "answers": [{"tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": true, "score": 0, "last_activity_date": 1434572922, "last_edit_date": 1434572922, "creation_date": 1434572581, "answer_id": 30901692, "question_id": 30899986, "link": "https://stackoverflow.com/questions/30899986/fprintf-valgrind-error/30901692#30901692", "title": "fprintf valgrind error", "body": "<p>You have 1 uninitiliazed character before '\\0' character ending the string (each time you are adding character you post increment the <code>i</code> counter so there is no need to add <code>i+1</code> when adding <code>'\\0'</code>. Replace <code>line[i+1]='\\0';</code> with <code>line[i]='\\0';</code>:</p>\n\n<pre><code>char* getline(FILE * infile)\n{\nint size = 16;\nchar * line = (char*)mymalloc(size);\nint temp;\n\nint i=0;\ndo\n{\n    (temp = fgetc(infile));\n    if (temp !=EOF)\n        line[i++]=(char)temp;\n    if (i&gt;=size)\n    {\n        size*=2;\n        line = (char*)realloc(line, size);\n    }\n\n}while (temp != '\\n' &amp;&amp; temp !=EOF);\nline[i]='\\0'; //// &lt;- change here\nif (temp==EOF)\n    {\n        free(line);\n        return NULL;\n    }\nreturn line;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 904, "user_id": 2711402, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f60d62777fda717173de19b2de003018?s=128&d=identicon&r=PG&f=1", "display_name": "Rndp13", "link": "https://stackoverflow.com/users/2711402/rndp13"}, "is_accepted": false, "score": 0, "last_activity_date": 1434628055, "creation_date": 1434628055, "answer_id": 30914517, "question_id": 30899986, "link": "https://stackoverflow.com/questions/30899986/fprintf-valgrind-error/30914517#30914517", "title": "fprintf valgrind error", "body": "<p>While trying to compile your program using gcc version 4.3.4 in SUSE linux, i am seeing the below compilation errors.</p>\n\n<p>Your getline function is conflicting with the getline function in  header file.This is not a solution to your problem but i feel its better to use some other function name in place of  getline.\n<a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man3/getline.3.html</a></p>\n\n<pre><code>user/home&gt; gcc -g so1.c\nso1.c:16: error: conflicting types for 'getline'\n/usr/include/stdio.h:653: error: previous declaration of 'getline' was here\nso1.c: In function 'main':\nso1.c:98: error: 'for' loop initial declaration used outside C99 mode\nso1.c:104: error: redefinition of 'i'\nso1.c:98: error: previous definition of 'i' was here\nso1.c:104: error: 'for' loop initial declaration used outside C99 mode\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4977414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe2a1144f97d4ee2a270a9ffd685482c?s=128&d=identicon&r=PG&f=1", "display_name": "Grzegorz ", "link": "https://stackoverflow.com/users/4977414/grzegorz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 30901692, "answer_count": 2, "score": 0, "last_activity_date": 1434816587, "creation_date": 1434567050, "last_edit_date": 1434816587, "question_id": 30899986, "link": "https://stackoverflow.com/questions/30899986/fprintf-valgrind-error", "title": "fprintf valgrind error", "body": "<p>My program sorts the input from a text file and then <code>fprintf</code> it into output file. However valgrind reports some nasty errors for <code>fprintf</code> calls, which I do not understand. Any hints whats the reason for them?</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid * mymalloc (int size)\n{\nstatic int count=0;\nif (count&lt;100)\n{\n    count++;\n    return malloc(size);\n}\nelse return NULL;\n}\nchar* getline(FILE * infile)\n{\nint size = 16;\nchar * line = (char*)mymalloc(size);\nint temp;\n\nint i=0;\ndo\n{\n    (temp = fgetc(infile));\n    if (temp !=EOF)\n        line[i++]=(char)temp;\n    if (i&gt;=size)    \n    {\n        size*=2;\n        line = (char*)realloc(line, size);\n    }\n\n}while (temp != '\\n' &amp;&amp; temp !=EOF);\nline[i+1]='\\0';\nif (temp==EOF)\n    {\n        free(line);\n        return NULL;\n    }\nreturn line;\n}\nvoid print_line (char * line)\n{\nprintf(\"%s \", line);\n}\n\nint myCompare (const void * a, const void * b )\n{\nconst char *pa = *(const char**)a;\nconst char *pb = *(const char**)b;\n\nreturn strcmp(pa,pb);\n}\n     int main (int argc, char* argv[])\n{\nFILE * infile;\nFILE * outfile;\n\ninfile = fopen(argv[1], \"r\");\nif (infile==NULL)\n{\n    printf(\"Error\");\n    exit(3);\n}\noutfile = fopen(argv[2], \"w\");\nif (outfile==NULL)\n{\n    printf(\"Error\");\n    exit(3);\n}\nchar * line;\nchar **all_lines;\nint nlines=0;\n\nwhile((line=getline(infile))!=NULL)\n{\n    print_line(line);\n    nlines++;\n    free(line);\n}\n\nall_lines=mymalloc(nlines*sizeof(char*));\nrewind(infile);\nint j=0;\nprintf(\"%d\\n\\n\", nlines);\n\nwhile((line=getline(infile))!=NULL)\n{\n\n    all_lines[j]=line;\n    j++;\n}\n\nqsort(all_lines, nlines, sizeof(char*), myCompare);\n\nfor (int i=0; i&lt;nlines;i++)\n{\n    //print_line(all_lines[i]);\n    fprintf(outfile, \"%s \" , all_lines[i]);\n}\n\nfor(int i =0; i&lt;nlines;i++)\n{\n    free(all_lines[i]);\n}\n\nfree(all_lines);\nfclose(infile);\nfclose(outfile);\nreturn 0;   \n}\n</code></pre>\n\n<p>Valgrind errors :</p>\n\n<pre><code>==3678== 11 errors in context 1 of 2:\n==3678== Conditional jump or move depends on uninitialised value(s)\n==3678==    at 0x40BA4B1: vfprintf (vfprintf.c:1601)\n==3678==    by 0x40C0F3E: fprintf (fprintf.c:33)\n==3678==    by 0x8048964: main (sort_lines.c:99)\n==3678==  Uninitialised value was created by a heap allocation\n==3678==    at 0x4024C1C: malloc (vg_replace_malloc.c:195)\n==3678==    by 0x80486FB: mymalloc (sort_lines.c:11)\n==3678==    by 0x804871C: getline (sort_lines.c:18)\n==3678==    by 0x8048905: main (sort_lines.c:87)\n==3678== \n==3678== \n==3678== 11 errors in context 2 of 2:\n==3678== Conditional jump or move depends on uninitialised value(s)\n==3678==    at 0x40BA4B1: vfprintf (vfprintf.c:1601)\n==3678==    by 0x40C0F7F: printf (printf.c:35)\n==3678==    by 0x80487B8: print_line (sort_lines.c:44)\n==3678==    by 0x804887D: main (sort_lines.c:77)\n==3678==  Uninitialised value was created by a heap allocation\n==3678==    at 0x4024D12: realloc (vg_replace_malloc.c:476)\n==3678==    by 0x8048766: getline (sort_lines.c:30)\n==3678==    by 0x804889A: main (sort_lines.c:75)\n==3678== \n--3678-- \n--3678-- used_suppression:     17 dl-hack3-cond-1\n==3678== \n==3678== ERROR SUMMARY: 22 errors from 2 contexts (suppressed: 17 from 8)\n</code></pre>\n"}, {"tags": ["c", "complexity-theory"], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 1535436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/m0nJj.jpg?s=128&g=1", "display_name": "kostek", "link": "https://stackoverflow.com/users/1535436/kostek"}, "edited": false, "score": 0, "creation_date": 1434567189, "post_id": 30899996, "comment_id": 49838921, "body": "<code>i &#47;= 2</code> Outer loop is executer <code>log(n)</code> times"}, {"owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "reply_to_user": {"reputation": 741, "user_id": 1535436, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/m0nJj.jpg?s=128&g=1", "display_name": "kostek", "link": "https://stackoverflow.com/users/1535436/kostek"}, "edited": false, "score": 0, "creation_date": 1434567214, "post_id": 30899996, "comment_id": 49838944, "body": "@kostek Oh, I didn&#39;t catch that. Thanks. Updating now."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434567594, "post_id": 30899996, "comment_id": 49839179, "body": "I agree with the result O(n), but the inner loop is <i>not</i> being executed <code>log(n) &#47; 2</code> times. If someone uses the &quot;on average&quot; argument in O-notation questions, the argument is wrong in most cases. The iterations for the inner loop have to be analyzed as a function of the iteration of the outer loop and the <i>whole</i> term has to be analyzed. You are lucky the result is correct."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434567678, "post_id": 30899996, "comment_id": 49839217, "body": "And <code>log(n) * (log(n) &#47; 2)</code> is <i>not</i> equal to <code>n&#47;2</code>."}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434567707, "post_id": 30899996, "comment_id": 49839238, "body": "@mastov, why not the <i>inner</i> loop will execute <code>n</code> times?"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1434567935, "post_id": 30899996, "comment_id": 49839384, "body": "@rakeb.void: The <i>inner</i> loop runs <code>i</code> times for every iteration of the <i>outer</i> loop. How often that is in total, you can see in Ihar Drozdov&#39;s answer."}], "tags": [], "owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1434567301, "last_edit_date": 1434567301, "creation_date": 1434567080, "answer_id": 30899996, "question_id": 30899879, "link": "https://stackoverflow.com/questions/30899879/what-is-the-complexity-of-this-piece-of-code/30899996#30899996", "title": "What is the complexity of this piece of code", "body": "<p>The outer loop, as I'm sure you can see is executed <code>log(n)</code> times. The inner loop is executed on average <code>log(n)/2</code> times.  So the <code>printf</code> statement is executed <code>log(n) * (log(n) / 2)</code> times which equals <code>n / 2</code>. So the complexity of the code is O(n).</p>\n"}, {"comments": [{"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434568062, "post_id": 30900191, "comment_id": 49839466, "body": "It&#39;s a little more complex, if you take into account that <code>n</code> is not a power of 2, but the result will be the same. Still, finally someone with the right approach and without arm-waving :-)"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 8, "last_activity_date": 1434567693, "creation_date": 1434567693, "answer_id": 30900191, "question_id": 30899879, "link": "https://stackoverflow.com/questions/30899879/what-is-the-complexity-of-this-piece-of-code/30900191#30900191", "title": "What is the complexity of this piece of code", "body": "<p>That's geometric progression\nThe first time the inner loop is executed <strong>n</strong> times.\nThe second time it is executed <strong>n/2</strong> times.\netc...\nSo we have the sequence:\nn + n/2 + n/4 + ... + 1\nso the final formula is:</p>\n\n<pre><code>n*(1 - (1/2)^(log n))/(1/2)\n</code></pre>\n\n<p>which is equivalent to <strong>n</strong></p>\n"}, {"tags": [], "owner": {"reputation": 758, "user_id": 4906173, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/775dfb6f5f81291f24e55062cb755147?s=128&d=identicon&r=PG&f=1", "display_name": "cruxion effux", "link": "https://stackoverflow.com/users/4906173/cruxion-effux"}, "is_accepted": false, "score": 1, "last_activity_date": 1434568684, "creation_date": 1434568684, "answer_id": 30900490, "question_id": 30899879, "link": "https://stackoverflow.com/questions/30899879/what-is-the-complexity-of-this-piece-of-code/30900490#30900490", "title": "What is the complexity of this piece of code", "body": "<p>Look these can be solved  using Double Sigma's :\nLet <code>$</code> represents <a href=\"http://www.mathsisfun.com/algebra/sigma-notation.html\" rel=\"nofollow\">sigma</a>.\nso this problem is :</p>\n\n<p><code>$(i=n downto 0 by a factor of 2 )$(j=0 to i-1) 1</code></p>\n\n<p>where <code>1</code> represent a  unit cost</p>\n\n<p>now for inner sigma its sum of <code>1</code> <code>i</code> times that is  = i</p>\n\n<p>now problem is \n<code>$(i=n downto 1 by a factor of 2 ) i</code></p>\n\n<p>which is sum of <code>i</code> values i.e. <code>n+n/2+n/4+...+1(when n/2^x=1 or after log(n) terms)+0</code> </p>\n\n<p>or \n<code>n*(1+1/2+.....log(n) terms)</code></p>\n\n<p>which is a convergent <a href=\"http://en.wikipedia.org/wiki/Geometric_progression\" rel=\"nofollow\">Geometric progression</a>. and the result will be <code>n*(1 - (1/2)^(log n))/(1/2)</code> i.e <code>O(n)</code></p>\n"}], "owner": {"reputation": 43, "user_id": 5021092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/543720ddf13236eee64f2ce82a8ca530?s=128&d=identicon&r=PG&f=1", "display_name": "3syns", "link": "https://stackoverflow.com/users/5021092/3syns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 30900191, "answer_count": 3, "score": -1, "last_activity_date": 1434568684, "creation_date": 1434566765, "question_id": 30899879, "link": "https://stackoverflow.com/questions/30899879/what-is-the-complexity-of-this-piece-of-code", "title": "What is the complexity of this piece of code", "body": "<p>I had to determinate big O complexity of this piece of code.\nI thought the answer is nlogn but apparently its n. Can anyone help explain why that is so?</p>\n\n<pre><code>void funct(int n)\n{\n    for (int i = n; i &gt; 0; i /= 2)\n        for(int j = 0; j &lt; i; j++)\n            printf(\"%d\\n\", j%2);\n}\n</code></pre>\n"}, {"tags": ["c", "pipe", "fork", "ipc"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1434567144, "post_id": 30899706, "comment_id": 49838889, "body": "I can&#39;t say I have done a detailed inspection, but try <code>close()</code> on the pipe file descriptors when you are done writing and reading.  It could be a buffering issue."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1434567366, "post_id": 30899706, "comment_id": 49839032, "body": "Ah, it hangs.  You really should have mentioned that in the question."}, {"owner": {"reputation": 894, "user_id": 4898843, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0P2vt.png?s=128&g=1", "display_name": "Rinor Dreshaj", "link": "https://stackoverflow.com/users/4898843/rinor-dreshaj"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1434567556, "post_id": 30899706, "comment_id": 49839148, "body": "@cdarke , I edited my question so it says that it hangs. Is it possible to write multiple datas in a pipe and then read them?"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1434567886, "post_id": 30899706, "comment_id": 49839353, "body": "Both processes are trying to read at the same time."}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "edited": false, "score": 1, "creation_date": 1434568909, "post_id": 30899706, "comment_id": 49839969, "body": "It is possible to have multiple processes writing and reading.. but you have to have a very clear idea in your code as to who is writing and who is reading at any given moment.  If you call read() on a pipe in &#39;A&#39;, it will block in the call to read() and do nothing else until &#39;B&#39; writes to the pipe and gives &#39;A&#39; some data to read.  And vice versa.  In a lot of programs this is enough.  If you are in the situation where you have no idea when data will arrive and need to do something while you are waiting, you can use select() to check for the presence of data on the pipe before you read()."}, {"owner": {"reputation": 894, "user_id": 4898843, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0P2vt.png?s=128&g=1", "display_name": "Rinor Dreshaj", "link": "https://stackoverflow.com/users/4898843/rinor-dreshaj"}, "reply_to_user": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "edited": false, "score": 0, "creation_date": 1434573835, "post_id": 30899706, "comment_id": 49842952, "body": "@little_birdie I have two child processes and also two pipes, child A writes in pipe A also child B writes in pipe B, both of them read each other data and print them out. The code works when I&#39;m writing just on string in each pipe but as soon as I try to write two strings than it just hangs"}], "answers": [{"comments": [{"owner": {"reputation": 894, "user_id": 4898843, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0P2vt.png?s=128&g=1", "display_name": "Rinor Dreshaj", "link": "https://stackoverflow.com/users/4898843/rinor-dreshaj"}, "edited": false, "score": 0, "creation_date": 1434623270, "post_id": 30902989, "comment_id": 49862853, "body": "So i did the change on function read, also I&#39;ve put my write function call in child B before reading, and it stills hangs.I think the problem is at reading cause when I put breaks in while loops the program finishes executing"}, {"owner": {"reputation": 1617, "user_id": 2123877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2JcYp.jpg?s=128&g=1", "display_name": "Ali Seyedi", "link": "https://stackoverflow.com/users/2123877/ali-seyedi"}, "reply_to_user": {"reputation": 894, "user_id": 4898843, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0P2vt.png?s=128&g=1", "display_name": "Rinor Dreshaj", "link": "https://stackoverflow.com/users/4898843/rinor-dreshaj"}, "edited": false, "score": 1, "creation_date": 1434647590, "post_id": 30902989, "comment_id": 49880232, "body": "I changed your code a little and added that to my answer. It works."}], "tags": [], "owner": {"reputation": 1617, "user_id": 2123877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2JcYp.jpg?s=128&g=1", "display_name": "Ali Seyedi", "link": "https://stackoverflow.com/users/2123877/ali-seyedi"}, "is_accepted": true, "score": 4, "last_activity_date": 1434647404, "last_edit_date": 1434647404, "creation_date": 1434577714, "answer_id": 30902989, "question_id": 30899706, "link": "https://stackoverflow.com/questions/30899706/how-to-write-read-multiple-times-to-a-pipe/30902989#30902989", "title": "How to write/read multiple times to a pipe", "body": "<p>Your code causes a <strong>deadlock</strong>.</p>\n\n<p>You're using <code>read()</code> function in a wrong way. <code>read(pipe_a[0],buf,sizeof(buf) +sizeof(buf) )</code></p>\n\n<p>You expect twice of size of your buffer and want to put that amount of bytes in your buffer. So <code>read</code> in child A waits for <code>pipe_b</code> and vice versa. Therefore child B can't write to <code>pipe_b</code> because it's waiting.Similarly, child A can't write in <code>pipe_a</code> because it's waiting.</p>\n\n<p>Additionally, Your code is not same as the scenario you explained in your question. In child B you are writing after reading.</p>\n\n<p>And finally use <code>strlen()</code> for calculating length of strings instead of <code>sizeof</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n\n    pid_t child_a, child_b;\n    int pipe_a[2],pipe_b[2];\n    char mesazhi1[] = \"First message\";\n    char mesazhi2[] = \"Second message\";\n\n    char buf[50];\n\n    int first_pipe = pipe(pipe_a);\n    int second_pipe = pipe(pipe_b);\n\n    if(first_pipe == -1 || second_pipe == -1 ){\n        perror(\"pipe\");\n        exit(1);\n    }\n\n    child_a = fork();\n\n    if (child_a == 0) {\n        /* Child A code */\n\n        printf(\"%s\\n\",\"the first child is writing to pipe a\" );\n        write(pipe_a[1],mesazhi1, strlen(mesazhi1) + 1);\n        write(pipe_a[1],mesazhi2, strlen(mesazhi2) + 1);\n\n        read(pipe_b[0], buf, strlen(mesazhi1) + 1);\n        printf(\"Reading from buffer for child 1 gives:  %s \\n\",buf);        \n        read(pipe_b[0], buf, strlen(mesazhi2) + 1);\n        printf(\"Reading from buffer for child 1 gives:  %s \\n\",buf);        \n\n    } else {\n        child_b = fork();\n\n        if (child_b == 0) {\n            /* Child B code */\n\n            printf(\"%s\\n\",\"the second child is writing to pipe b\" );\n\n\n            read(pipe_a[0],buf, strlen(mesazhi1) + 1);\n            printf(\"Reading from buffer for child 2 gives:  %s \\n\",buf);            \n            read(pipe_a[0],buf, strlen(mesazhi2) + 1);\n            printf(\"Reading from buffer for child 2 gives:  %s \\n\",buf);            \n\n            write(pipe_b[1],mesazhi1, strlen(mesazhi1) + 1);\n            write(pipe_b[1],mesazhi2, strlen(mesazhi2) + 1);\n\n\n            printf(\"%s\\n\",\"the second child reads data from pipe a\" );\n\n\n        } else {\n            /* Parent Code */\n\n            int returnStatusA,returnStatusB;    \n            waitpid(child_a, &amp;returnStatusA, 0);  // Parent process waits here for child to terminate.\n            waitpid(child_b, &amp;returnStatusB, 0);  // Parent process waits here for child to terminate.\n\n\n            if (returnStatusA == 0 &amp;&amp; returnStatusB == 0)  // Verify child process terminated without error.  \n            {\n               printf(\"%s\\n\", \"The child processes terminated normally.\\n\"); \n            }\n\n            if (returnStatusA == 1 &amp;&amp; returnStatusB == 1)      \n            {\n               printf(\"%s\\n\", \"The child processes terminated with an error!. \\n\" );    \n            }\n\n\n\n            printf(\"%s\\n\",\"The parent terminates two childs\");\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 894, "user_id": 4898843, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0P2vt.png?s=128&g=1", "display_name": "Rinor Dreshaj", "link": "https://stackoverflow.com/users/4898843/rinor-dreshaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7848, "favorite_count": 0, "accepted_answer_id": 30902989, "answer_count": 1, "score": 0, "last_activity_date": 1434647404, "creation_date": 1434566209, "last_edit_date": 1434567465, "question_id": 30899706, "link": "https://stackoverflow.com/questions/30899706/how-to-write-read-multiple-times-to-a-pipe", "title": "How to write/read multiple times to a pipe", "body": "<p>I'm trying to make two child processes communicate with each other via pipe.First child have to write data 1 and data 2, and then second child writes data 3 and data 4. Then childrens read each other data and print them. This is the code that i have so far. It only displays the first messages children sends to each other and than it hangs.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n\n\nint main(void) {\n\n    pid_t child_a, child_b;\n    int pipe_a[2],pipe_b[2];\n    char mesazhi1[] = \"First message\";\n    char mesazhi2[] = \"Second message\";\n\n    char buf[50];\n\n    int first_pipe = pipe(pipe_a);\n    int second_pipe = pipe(pipe_b);\n\n    if(first_pipe == -1 || second_pipe == -1 ){\n        perror(\"pipe\");\n        exit(1);\n    }\n\n    child_a = fork();\n\n    if (child_a == 0) {\n        /* Child A code */\n\n        printf(\"%s\\n\",\"the first child is writing to pipe a\" );\n        write(pipe_a[1],mesazhi1, sizeof(mesazhi1));\n        write(pipe_a[1],mesazhi2,sizeof(mesazhi2));\n\n        while( read(pipe_b[0],buf,sizeof(buf) + sizeof(buf) ) &gt; 0 ){\n              printf(\"Reading from buffer for child 1 gives:  %s \\n\",buf);\n        }\n\n    } else {\n        child_b = fork();\n\n        if (child_b == 0) {\n            /* Child B code */\n\n            printf(\"%s\\n\",\"the second child is writing to pipe b\" );\n            write(pipe_b[1],mesazhi2,sizeof(mesazhi2));\n\n\n\n            while( read(pipe_a[0],buf,sizeof(buf) +sizeof(buf) ) &gt; 0 ){\n                printf(\"Reading from buffer for child 2 gives: %s \\n\",buf);\n            }\n            write(pipe_b[1],mesazhi1,sizeof(mesazhi1));\n\n\n\n            printf(\"%s\\n\",\"the second child reads data from pipe a\" );\n\n\n        } else {\n            /* Parent Code */\n\n            int returnStatusA,returnStatusB;    \n            waitpid(child_a, &amp;returnStatusA, 0);  // Parent process waits here for child to terminate.\n            waitpid(child_b, &amp;returnStatusB, 0);  // Parent process waits here for child to terminate.\n\n\n            if (returnStatusA == 0 &amp;&amp; returnStatusB == 0)  // Verify child process terminated without error.  \n            {\n               printf(\"%s\\n\", \"The child processes terminated normally.\\n\"); \n            }\n\n            if (returnStatusA == 1 &amp;&amp; returnStatusB == 1)      \n            {\n               printf(\"%s\\n\", \"The child processes terminated with an error!. \\n\" );    \n            }\n\n\n\n            printf(\"%s\\n\",\"The parent terminates two childs\");\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1434565948, "post_id": 30899548, "comment_id": 49838117, "body": "What warning you get? Can you post your code?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1434566063, "post_id": 30899548, "comment_id": 49838202, "body": "it is a warning from some tool about losing sign"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1434566128, "post_id": 30899548, "comment_id": 49838246, "body": "&quot;some tool&quot;?  What tool? Do you mean the compiler?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434566341, "post_id": 30899668, "comment_id": 49838380, "body": "basically you agreed with what I typed? (no casts too)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434566976, "post_id": 30899668, "comment_id": 49838789, "body": "passing negative int is probably not good idea to function needing unsigned"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1434567452, "post_id": 30899668, "comment_id": 49839080, "body": "@user70012: Yes, assuming the argument value is within the range of the parameter type there should be no problem."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 4, "last_activity_date": 1464551299, "last_edit_date": 1464551299, "creation_date": 1434566098, "answer_id": 30899668, "question_id": 30899548, "link": "https://stackoverflow.com/questions/30899548/when-is-it-ok-to-pass-integer-to-function-needing-unsigned-vice-versa/30899668#30899668", "title": "When is it ok to pass integer to function needing unsigned vice versa", "body": "<p>Passing a signed integer to a function expecting an unsigned integer has well-defined behavior.  If the argument value is within the range of the parameter type, there's a trivial conversion; the value remains the same. If the argument value is outside that range, it will be converted, effectively by discarding the high-order bits.</p>\n\n<p>This is ok if and only if that behavior is consistent with the way your application needs to behave.</p>\n\n<p>Passing an unsigned integer to a function expecting a signed integer has well-defined behavior <em>if</em> the value is within the range of the parameter type.  If it isn't, then the implicit conversion will yield an implementation-defined result (or, in principle, it can raise an implementation-defined signal, but I don't know of any implementations that do that). Typically the result is equivalent to discarding the high-order bits, or interpreting the unsigned value as if it were a signed value (treating the high-order bit as a sign bit), but that's not guaranteed by the language. For unsigned-to-signed conversions, it's best to ensure that the value is within the range of the target type.</p>\n\n<p>Very often (but not always) a conversion like this is an indication that the argument should have been of the same type as the parameter in the first place.</p>\n\n<p>This all assumes that the function is properly declared with a prototype, so the compiler knows, when it sees the call, what type the function expects.  If there is no prototype, or if the function is variadic (like <code>printf</code>), then you need to be more careful.  There is no conversion, but you can rely on <code>int</code> and <code>unsigned int</code> being interchangeable <em>for values within the range of both</em>. (But it's not a great idea to depend on that; it's best to ensure that the argument you pass is of the expected type.)</p>\n"}, {"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 0, "last_activity_date": 1434566133, "creation_date": 1434566133, "answer_id": 30899676, "question_id": 30899548, "link": "https://stackoverflow.com/questions/30899548/when-is-it-ok-to-pass-integer-to-function-needing-unsigned-vice-versa/30899676#30899676", "title": "When is it ok to pass integer to function needing unsigned vice versa", "body": "<p>That's right.  It's up to you to determine if your app is safe this way, and that's all the compiler is warning you about.  As long as the value stays in the range you expect, no surprises will happen.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434566671, "post_id": 30899703, "comment_id": 49838608, "body": "If the int is positive and same or lower rank than the unsigned, it is not broken, but well-defined. You do that likely anytime you pas an int-literal without trailing <code>U</code> to an unsigned."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434566809, "post_id": 30899703, "comment_id": 49838685, "body": "@Olaf I&#39;m not trying to suggest that anything is broken, just that for the benefit of future maintainers and debugging, casts should be made obvious and some checks should be put in place to guard against erroneous conditions."}], "tags": [], "owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "is_accepted": false, "score": 1, "last_activity_date": 1434567055, "last_edit_date": 1434567055, "creation_date": 1434566204, "answer_id": 30899703, "question_id": 30899548, "link": "https://stackoverflow.com/questions/30899548/when-is-it-ok-to-pass-integer-to-function-needing-unsigned-vice-versa/30899703#30899703", "title": "When is it ok to pass integer to function needing unsigned vice versa", "body": "<p>This can be broken down into two different questions:</p>\n\n<blockquote>\n  <p>Will it work?</p>\n</blockquote>\n\n<p>Yes, probably. All variable values are just sequences of bits, and you can, to some degree, play fast and loose with types and still get a correct result if you're careful.</p>\n\n<blockquote>\n  <p>Should I do it?</p>\n</blockquote>\n\n<p>No, for several reasons:</p>\n\n<ol>\n<li><p>You shouldn't get in the habit of ignoring warnings. They are there for a reason: they let you know that results may not be what you expect. You should put as much effort into correctly resolving them as you would an error.</p></li>\n<li><p>Your code will be harder to understand to future readers. You should try to make your code as understandable and maintainable to future readers (including yourself) as possible.  Part of this is using the correct types. If you need to use a function that expects a certain type and you have to give it data of a different type for some reason, you should cast it to make your intentions clear. </p></li>\n<li><p>It is hard enough to understand and debug code. You're only making it harder on yourself when you make implicit assumptions in your code. Try to refactor it to use the types that are required for the operations you want to do. Your current assumption is that your value will <em>always</em> be positive, and <em>always</em> be within the range of a signed integer. If either of these conditions are violated (which you should assume is possible, since no code is perfect), then you will have unexpected behavior from your code. You should add some checks for these conditions before using the value where an unsigned int is expected, then explicitly cast it. This will make debugging easier by catching errors, <em>and</em> make your intentions clear to future readers.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434567013, "post_id": 30899961, "comment_id": 49838806, "body": "didn&#39;t use cast though :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434567104, "post_id": 30899961, "comment_id": 49838869, "body": "You should use the cast with caution, but use it, to not get confused by the warning. There are some casts you cannot avoid."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434567197, "post_id": 30899961, "comment_id": 49838925, "body": "I meant my program is still well defined even without cast in this case"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434567363, "post_id": 30899961, "comment_id": 49839029, "body": "Yes, but the cast is just for the comment (did I not state that clear enough?). For that tool, you might not want it, but I compile with all(most) all warnings enabled - which I generally strongly recommend. So I would get that warning every time I rebuild. And unnecessary warnings might make others to be overlooked."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 0, "last_activity_date": 1434567201, "last_edit_date": 1434567201, "creation_date": 1434566971, "answer_id": 30899961, "question_id": 30899548, "link": "https://stackoverflow.com/questions/30899548/when-is-it-ok-to-pass-integer-to-function-needing-unsigned-vice-versa/30899961#30899961", "title": "When is it ok to pass integer to function needing unsigned vice versa", "body": "<p>Both directions are ok, as long as the <em>current</em> value of the source fits into the <em>allowed</em> range of the destination. Some tools or compilers (gcc: <code>-Wconversion</code>) still warn about this for a good reason: to get your attention.</p>\n\n<p>If you are absolutely sure the value fits, just use a cast to suppress the warning. But add a comment to that line (or before it) why you use that cast actually. Some editors will highlight special keyword in comments (e.g. <code>// NOTE:</code>), so you will see there is something to be aware of.</p>\n\n<p><strong>Once the value does not fit, you exhibit <em>undefined bahaviour</em>, so be aware!.</strong></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3278, "favorite_count": 0, "accepted_answer_id": 30899668, "answer_count": 4, "score": 0, "last_activity_date": 1464551299, "creation_date": 1434565760, "last_edit_date": 1434566597, "question_id": 30899548, "link": "https://stackoverflow.com/questions/30899548/when-is-it-ok-to-pass-integer-to-function-needing-unsigned-vice-versa", "title": "When is it ok to pass integer to function needing unsigned vice versa", "body": "<p>I can't find a link now but passing <code>int</code> to function which needs <code>unsigned type</code> should be ok as long as the <code>int</code> is positive right? (and falls in range of unsigned); I got a warning that's why I am asking</p>\n\n<p>assuming no casts</p>\n\n<p>vice versa should also be ok assuming <code>unsigned integers</code> value fits in <code>int</code> range?</p>\n"}, {"tags": ["java", "c"], "comments": [{"owner": {"reputation": 7363, "user_id": 905488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb324daddc3ad22736171ba863234d8?s=128&d=identicon&r=PG", "display_name": "Mick Mnemonic", "link": "https://stackoverflow.com/users/905488/mick-mnemonic"}, "edited": false, "score": 0, "creation_date": 1434565915, "post_id": 30899515, "comment_id": 49838093, "body": "Are you sure the parentheses match in both code samples?"}], "answers": [{"tags": [], "owner": {"reputation": 25890, "user_id": 489041, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/df66d63e64e8191206529f1722514f41?s=128&d=identicon&r=PG", "display_name": "user489041", "link": "https://stackoverflow.com/users/489041/user489041"}, "is_accepted": true, "score": 1, "last_activity_date": 1434567403, "creation_date": 1434567403, "answer_id": 30900112, "question_id": 30899515, "link": "https://stackoverflow.com/questions/30899515/using-a-comparator-in-java/30900112#30900112", "title": "Using a comparator in Java", "body": "<p>What about something like this:</p>\n\n<pre><code>public int compare(Tuples a, Tuples b) {\n    int index = a.Rank[0] == b.Rank[0] ? 1: 0;\n    return a.Rank[index] - b.Rank[index];\n}\n</code></pre>\n\n<p>A little easier to read in my opinion.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5016333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cfad4fed7f4099160f5d707a1b958?s=128&d=identicon&r=PG", "display_name": "Rodrigo V", "link": "https://stackoverflow.com/users/5016333/rodrigo-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1434569834, "creation_date": 1434569834, "answer_id": 30900846, "question_id": 30899515, "link": "https://stackoverflow.com/questions/30899515/using-a-comparator-in-java/30900846#30900846", "title": "Using a comparator in Java", "body": "<p>According to the documentation of the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html#compare(T,%20T)\" rel=\"nofollow\">Comparator</a> interface, the compare method must return 1, 0 or -1, that are:</p>\n\n<ul>\n<li>0 = the objects are equal</li>\n<li>-1 (or any negative integer) = the\nobject a is less than object b </li>\n<li>1 (or any positive integer) = the\nobject a is greater than object b</li>\n</ul>\n\n<p>So your method must be something like below:</p>\n\n<pre><code>public int compare(Tuples a, Tuples b) {\n    if(a.Rank[0]==b.Rank[0]){ \n        if(a.Rank[1]==b.Rank[1]){ // a == b\n            return 0;\n        }else if(a.Rank[1]&lt;b.Rank[1]){ // a &lt; b\n            return -1;\n        }else{ // a &gt; b\n            return 1;\n        }\n    }else{ // a != b\n        if(a.Rank[0]&lt;b.Rank[0]){ // a &lt; b\n            return -1;\n        }else{ //a &gt; b\n            return 1;\n        }\n    } \n}\n</code></pre>\n\n<p>Or in short (and ugly way) it would be like this:</p>\n\n<pre><code>public int compare(Tuples a, Tuples b) {\n   return (a.Rank[0]==b.Rank[0])?((a.Rank[1]==b.Rank[1])?0:((a.Rank[1]&lt;b.Rank[1])?-1:1)):((a.Rank[0]&lt;b.Rank[0])?-1:1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1520, "user_id": 4905916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4sH1QH98xGA/AAAAAAAAAAI/AAAAAAAAEKQ/oLiP-fnDsLo/photo.jpg?sz=128", "display_name": "Filip Bulovic", "link": "https://stackoverflow.com/users/4905916/filip-bulovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1434570065, "creation_date": 1434570065, "answer_id": 30900916, "question_id": 30899515, "link": "https://stackoverflow.com/questions/30899515/using-a-comparator-in-java/30900916#30900916", "title": "Using a comparator in Java", "body": "<p>As SqueezyMo stated in his answer case less and negative integer is missing. One can utilize subtraction to get compact code.</p>\n\n<pre><code>Arrays.sort(arr, new Comparator&lt;Tuples&gt;() {\n  public int compare(Tuples a, Tuples b) {\n    return a.Rank[0] == b.Rank[0] ? a.Rank[1] - b.Rank[1] : a.Rank[0] - b.Rank[0];\n  }\n});\n</code></pre>\n\n<p>Naturally everything can be done using ternary operators, it drives maintainers crazy.</p>\n\n<pre><code>public static void main(String[] args) {\n  Tuples a = new Tuples();\n  a.Rank = new int[]{1, 2};\n  Tuples b = new Tuples();\n  b.Rank = new int[]{0, 1};\n  Tuples c = new Tuples();\n  c.Rank = new int[]{1, 3};\n  Tuples[] arr = {a, b, c};\n  Arrays.sort(arr, new Comparator&lt;Tuples&gt;() {\n    @Override\n    public int compare(Tuples a, Tuples b) {\n      return a.Rank[0] == b.Rank[0]\n          ? a.Rank[1] == b.Rank[1]\n              ? 0 : a.Rank[1] &lt; b.Rank[1]\n                  ? -1 : 1 : a.Rank[0] &gt; b.Rank[0]\n              ? 1 : -1;\n    }\n  });\n  for (int i = 0; i &lt; 3; i++) {\n    System.out.println(arr[i].Rank[0] + \":\" + arr[i].Rank[1]);\n  }\n}\nstatic class Tuples {\n  public int[] Rank;\n}\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 4996457, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4f89bd8358e35e93c396322bc1fdf68a?s=128&d=identicon&r=PG&f=1", "display_name": "user4996457", "link": "https://stackoverflow.com/users/4996457/user4996457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 30900112, "answer_count": 3, "score": 0, "last_activity_date": 1434570065, "creation_date": 1434565643, "question_id": 30899515, "link": "https://stackoverflow.com/questions/30899515/using-a-comparator-in-java", "title": "Using a comparator in Java", "body": "<p>I am Having a <code>tuple &lt;Rank[0] , Rank[1]&gt;</code> and wanted to sort this in increasing order Rank[0] can be considered as  first digit and Rank[2] as a second digit.</p>\n\n<p>Here is my function:</p>\n\n<pre><code>  Arrays.sort(S,new Comparator&lt;Tuples&gt;() {\n\n        public int compare(Tuples a, Tuples b) {\n            // TODO Auto-generated method stub\n            return (a.Rank[0]==b.Rank[0]) ? ((a.Rank[1]&lt;b.Rank[1]) ? 1:0) :((a.Rank[0]&lt;b.Rank[0])? 1:0);\n        }\n    });\n</code></pre>\n\n<p>The above thing is not giving be Sorted Array while it's C equivalent works i.e</p>\n\n<pre><code>int cmp(struct suffix a, struct suffix b)\n{\n    return (a.rank[0] == b.rank[0])? (a.rank[1] &lt; b.rank[1] ?1: 0):\n               (a.rank[0] &lt; b.rank[0] ?1: 0);\n}\n</code></pre>\n\n<p>Why My java Sorting is not working. Please Help</p>\n\n<pre><code>static  class Tuples{\n\n          int[] Rank = new int[2];\n}\n</code></pre>\n"}, {"tags": ["c", "printf", "malloc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "edited": false, "score": 5, "creation_date": 1434565355, "post_id": 30899341, "comment_id": 49837776, "body": "Use <code>strlen(string)</code> not <code>sizeof(string)</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 6, "creation_date": 1434565391, "post_id": 30899341, "comment_id": 49837805, "body": "<code>sizeof(string)</code> returns the size of the <code>char*</code> pointer itself, not the size of the allocated data that <code>string</code> is pointing at."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434565693, "post_id": 30899341, "comment_id": 49837973, "body": "You are setting <code>inst-&gt;name</code> to the malloc&#39;d value, but right after, you set that same variable to the address of the string literal, &quot;add&quot;.  That assignment is not a string copy, though it looks like what you meant."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1434565764, "post_id": 30899341, "comment_id": 49838008, "body": "<code>inst-&gt;name = malloc(sizeof(char) * (strlen(&quot;add&quot;) + 1));</code> is immediately overwritten by <code>inst-&gt;name = &quot;add&quot;;</code>"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434565786, "post_id": 30899341, "comment_id": 49838021, "body": "Where does <code>inst</code> have any effect on <code>string</code>?  I don&#39;t see it in the <code>snprintf()</code>."}, {"owner": {"reputation": 89, "user_id": 2558430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9243a6291e7243267d34e82d383ee1?s=128&d=identicon&r=PG", "display_name": "joaomlap", "link": "https://stackoverflow.com/users/2558430/joaomlap"}, "edited": false, "score": 0, "creation_date": 1434565964, "post_id": 30899341, "comment_id": 49838127, "body": "<code>inst-&gt;name</code> just have to do with the parameters of the functon and not with the snprintf itself.  When allocating the string, I still don&#39;t know the size of whats being saved, I just know it will be always &lt;50 sizeof(char). Thank you."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1434566216, "post_id": 30899341, "comment_id": 49838297, "body": "@Isaiah: the array pointed to by <code>string</code> is uninitialized (returned by <code>malloc</code>), <code>strlen(string)</code> invokes undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 3, "creation_date": 1434565504, "post_id": 30899453, "comment_id": 49837862, "body": "<code>4 is the size of any pointer</code>. What about the 64bit machines? :D"}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 1, "creation_date": 1434565513, "post_id": 30899453, "comment_id": 49837867, "body": "Not <code>strlen</code> either because <code>string</code> might not yet be initialized."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 1, "creation_date": 1434565602, "post_id": 30899453, "comment_id": 49837917, "body": "You should use <code>sizeof(char) * 50</code> (the buffer size). Better yet, subtract <code>1</code> to make sure the resulting string will be 0-terminated."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 1, "creation_date": 1434565648, "post_id": 30899453, "comment_id": 49837946, "body": "@Isaiah: Even if it&#39;s &quot;initialized&quot;, <code>strlen</code> won&#39;t return the <i>buffer</i> size, but the size of the string currently contained by the buffer."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 1, "creation_date": 1434565696, "post_id": 30899453, "comment_id": 49837976, "body": "In any case, <code>sizeof</code> is faster because evaluated in the preprocessing phase, whereas <code>strlen</code> is evaluated at runtime."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 1, "creation_date": 1434565796, "post_id": 30899453, "comment_id": 49838028, "body": "@EugeniuRosca: It&#39;s faster, but it gets you a result that is wrong for your purpose! What&#39;s the point of getting useless things <i>fast</i>?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434565892, "post_id": 30899453, "comment_id": 49838078, "body": "@Eugeniu Rosca: no, <code>sizeof</code> is almost always evaluated at compile time, not at preprocessing time, and in some cases at runtime, but it is always very quick.  <code>strlen</code> of string constants is usually evaluated at compile also by modern compilers."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434565892, "post_id": 30899453, "comment_id": 49838079, "body": "@mastov: Only if you can use both, I pointed the prefered one. Cheers."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434565977, "post_id": 30899453, "comment_id": 49838141, "body": "This answer only explains the 4 characters, but does not cover the garbage.  <code>snprintf()</code> is documented to use a terminating null, which should preclude the garbage."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1434565984, "post_id": 30899453, "comment_id": 49838143, "body": "But in this case, sizeof and strlen are both wrong.  (And, in general, they&#39;re never equivalent anyway.)  The string has nothing in it yet, snprintf is about to create a string, so you need to tell snprintf how much it&#39;s allowed to write, or in this case, 50."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434565998, "post_id": 30899453, "comment_id": 49838154, "body": "@chqrlie: My bad. sizeof is evaluated at compile-time, not by the preprocessor."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434566104, "post_id": 30899453, "comment_id": 49838223, "body": "@mastov: no need to subtract <code>1</code>, <code>snprintf</code> takes the size of the buffer and stores the <code>&#39;\\0&#39;</code> inside the buffer, unless the size is specified as <code>0</code>."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434566201, "post_id": 30899453, "comment_id": 49838288, "body": "@chqrlie: Yes, I just realized that, too. I had confused it with the more dangerous &quot;strncpy&quot;."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434566222, "post_id": 30899453, "comment_id": 49838305, "body": "@Isaiah,  Right.  I&#39;m saying there is more to debug here."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434566335, "post_id": 30899453, "comment_id": 49838376, "body": "@mastov: correct! absolutely dangerous &quot;strncpy&quot; must be avoided always."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "edited": false, "score": 0, "creation_date": 1434566519, "post_id": 30899453, "comment_id": 49838499, "body": "Ok, its fully corrected and I removed the part about strlen. I also explained why he got garbage characters using sizeof(string). Thanks for the comments."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434566705, "post_id": 30899453, "comment_id": 49838632, "body": "@chqrlie &amp;&amp; @mastov: You probably refered to <code>strcpy</code>, not to <code>strncpy</code>, as a dangerous thing to be avoided."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434566793, "post_id": 30899453, "comment_id": 49838673, "body": "@Isaiah: I don&#39;t think your theory explains the garbage. &quot;some data is not initialized&quot; is not enough. The array <code>string</code> is initialized up to the 0-termination character, which should  be enough not to print garbage."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434566857, "post_id": 30899453, "comment_id": 49838713, "body": "@EugeniuRosca: No, we don&#39;t - <a href=\"https://randomascii.wordpress.com/2013/04/03/stop-using-strncpy-already/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/2013/04/03/stop-using-strncpy-alre&zwnj;&#8203;ady</a>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434567043, "post_id": 30899453, "comment_id": 49838831, "body": "@Eugeniu Rosca: no, we do not. <code>strcpy()</code> should be used carefully, but <code>strncpy()</code> has non intuitive semantics which make it very error prone. Among other peculiarities, if the source string is the same length or longer than the destination array size, the destination will not be <code>&#39;\\0&#39;</code> terminated.  Many unsuspecting programmers get this wrong and misuse this function. It is best avoided completely."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434567384, "post_id": 30899453, "comment_id": 49839044, "body": "@chqrlie &amp;&amp; mastov: thanks for the explanations and link!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "is_accepted": true, "score": 1, "last_activity_date": 1434649112, "last_edit_date": 1434649112, "creation_date": 1434565434, "answer_id": 30899453, "question_id": 30899341, "link": "https://stackoverflow.com/questions/30899341/c-why-does-snprintf-only-writes-4-characters-to-my-variable/30899453#30899453", "title": "C: Why does snprintf only writes 4 characters to my variable?", "body": "<p>4 is the size of the pointer on 32 bit systems, it's 8 on 64 bit systems. For pointers, sizeof always return the size of the pointer and not the size of the data it points to.</p>\n\n<p>Better yet, use <code>sizeof(char) * num_characters_in_string</code>. Use <code>sizeof(char) * 50</code> in this case.</p>\n\n<p>Of course, <code>sizeof(char)</code> always equals 1, so you can omit that part if you want.</p>\n\n<p>The reason you get garbage is because some data is not initialized (due to the size parameter). Debuggers automatically initialize everthing to 0, so that is why it would work while debugging. Outside of debugging, it can start with any value.</p>\n\n<p>Finally, the <code>printf</code> statement works because you didn't print out your return value. It might've been more prudent to write <code>printf(\"%s\", string);</code> rather than repeat your snprintf line. (Remember -- snprintf only printed up to n characters, so the rest of the characters were left with their garbage values).</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "edited": false, "score": 1, "creation_date": 1434566189, "post_id": 30899595, "comment_id": 49838285, "body": "WHY WAS THIS ACCEPTED? Firstly, my answer is the same, yet better. Secondly, my answer was posted first."}, {"owner": {"reputation": 2768, "user_id": 4271479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/288848609fdf4ebb07ce8104e2a45559?s=128&d=identicon&r=PG&f=1", "display_name": "mastov", "link": "https://stackoverflow.com/users/4271479/mastov"}, "edited": false, "score": 0, "creation_date": 1434566261, "post_id": 30899595, "comment_id": 49838320, "body": "@Isaiah: You still have that dangerous <code>strlen</code> in your answer that can screw things up."}, {"owner": {"reputation": 89, "user_id": 2558430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9243a6291e7243267d34e82d383ee1?s=128&d=identicon&r=PG", "display_name": "joaomlap", "link": "https://stackoverflow.com/users/2558430/joaomlap"}, "edited": false, "score": 0, "creation_date": 1434566946, "post_id": 30899595, "comment_id": 49838770, "body": "@Isaiah your answer had the problem with the strlen, and now that&#39;s corrected is the best answer, your explanation is now completely correct. It was assuming the size of the pointer and not the size that I allocated for it. Thank you so much to both!"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1434575710, "post_id": 30899595, "comment_id": 49843968, "body": "@Isaiah: the other concern I had with your answer was your instruction to multiply by <code>sizeof(char)</code>.  As others pointed out, <code>sizeof(char)</code> is guaranteed to be 1, so multiplying by it isn&#39;t necessary in this case.  You can do it if you like, but telling others that they have to may confuse them."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1434565885, "creation_date": 1434565885, "answer_id": 30899595, "question_id": 30899341, "link": "https://stackoverflow.com/questions/30899341/c-why-does-snprintf-only-writes-4-characters-to-my-variable/30899595#30899595", "title": "C: Why does snprintf only writes 4 characters to my variable?", "body": "<p>In your case the second argument to <code>snprintf</code> needs to be 50, <em>not</em> sizeof(string).</p>\n"}], "owner": {"reputation": 89, "user_id": 2558430, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9243a6291e7243267d34e82d383ee1?s=128&d=identicon&r=PG", "display_name": "joaomlap", "link": "https://stackoverflow.com/users/2558430/joaomlap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 30899453, "answer_count": 2, "score": 0, "last_activity_date": 1434649112, "creation_date": 1434565149, "last_edit_date": 1434565343, "question_id": 30899341, "link": "https://stackoverflow.com/questions/30899341/c-why-does-snprintf-only-writes-4-characters-to-my-variable", "title": "C: Why does snprintf only writes 4 characters to my variable?", "body": "<p>So I'm trying to return a variable that contains a string with some parameters determined inside the function.</p>\n\n<pre><code>char* render(my parameters)\n</code></pre>\n\n<p>I'm declaring my variable like this:</p>\n\n<pre><code>char *string = malloc(sizeof(char) * 50);\n</code></pre>\n\n<p>This is an excerpt of my function:</p>\n\n<pre><code>switch(INST_OPCODE){\n        case 0x00:\n            inst-&gt;name = malloc(sizeof(char) * (strlen(\"add\") + 1));\n            inst-&gt;name = \"add\";\n            inst-&gt;type = 1;\n            snprintf(string, sizeof(string), \"add r%d, r%d, r%d\", INST_RD, INST_RA, INST_TYPE_A_RB);\n            printf(\"add r%d, r%d, r%d\", INST_RD, INST_RA, INST_TYPE_A_RB);\n            return string;\n        case 0x01:\n            inst-&gt;name = malloc(sizeof(char) * (strlen(\"rsub\") + 1));\n            inst-&gt;name = \"rsub\";\n            inst-&gt;type = 1;\n            snprintf(string, sizeof(string), \"rsub r%d, r%d, r%d\", INST_RD, INST_RA, INST_TYPE_A_RB);\n            printf(\"rsub r%d, r%d, r%d\", INST_RD, INST_RA, INST_TYPE_A_RB);\n            return string;\n</code></pre>\n\n<p>The printf works fine and it's just for debugging purposes, but when I print the returned variable in a file with:</p>\n\n<pre><code>fprintf(fd, \"%s\\n\", render(my parameters));\n</code></pre>\n\n<p>It writes only 4 characters and then literally memory garbage, one example:</p>\n\n<pre><code>addi-\u017e\n</code></pre>\n\n<p>Please give me some insight of what's going on here.</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "edited": false, "score": 0, "creation_date": 1434565718, "post_id": 30899142, "comment_id": 49837985, "body": "Function signatures should be <code>void* foo(void*)</code> for functions passed to <code>pthread_create</code>"}, {"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "reply_to_user": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "edited": false, "score": 0, "creation_date": 1434565928, "post_id": 30899142, "comment_id": 49838106, "body": "I corrected them but still it has segmentation fault"}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1434568900, "post_id": 30899142, "comment_id": 49839962, "body": "your code is too long. <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> or run it in a debugger and post the stack trace."}, {"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "reply_to_user": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1434570249, "post_id": 30899142, "comment_id": 49840806, "body": "this is the result of debugging @mescalinum : <a href=\"http://pastebin.com/vVfYa84h\" rel=\"nofollow noreferrer\">pastebin.com/vVfYa84h</a>"}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1434570405, "post_id": 30899142, "comment_id": 49840912, "body": "that does not containa stack trace. ensure you compile with the <code>-g</code> option, and in gdb issue the <code>bt</code> command."}, {"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "reply_to_user": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1434570834, "post_id": 30899142, "comment_id": 49841201, "body": "excuse me it was my mistake that is what you want i think @mescalinum: <a href=\"http://pastebin.com/vuH9Py8s\" rel=\"nofollow noreferrer\">pastebin.com/vuH9Py8s</a>"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "edited": false, "score": 0, "creation_date": 1434571920, "post_id": 30901264, "comment_id": 49841907, "body": "i have checked it.i print the thing which is sending to atoi and it was a correct thing.also i use it In the SumExec Function above of this Function and it is worked correctly"}, {"owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "edited": false, "score": 0, "creation_date": 1434571959, "post_id": 30901264, "comment_id": 49841930, "body": "And when i seprated sum and sub threads i seprated files, they worked correctly whitout any SegFault."}], "tags": [], "owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "is_accepted": false, "score": 0, "last_activity_date": 1434571227, "creation_date": 1434571227, "answer_id": 30901264, "question_id": 30899142, "link": "https://stackoverflow.com/questions/30899142/segmentation-fault-in-pthread-programming/30901264#30901264", "title": "segmentation fault in pthread programming", "body": "<p>Look at the stack trace:</p>\n\n<pre><code>#0  0x00007ffff7834517 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\n#1  0x00007ffff7830f60 in atoi () from /lib/x86_64-linux-gnu/libc.so.6\n#2  0x0000000000401258 in subExec () at cm.c:138\n#3  0x00007ffff7bc4182 in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0\n#4  0x00007ffff78f147d in clone () from /lib/x86_64-linux-gnu/libc.so.6\n</code></pre>\n\n<p>it was in subExec() line 138 of cm.c that you called <a href=\"http://man7.org/linux/man-pages/man3/atoi.3.html\" rel=\"nofollow\"><code>atoi()</code></a> and it segfaulted.</p>\n\n<p>Doublecheck what you pass to <a href=\"http://man7.org/linux/man-pages/man3/atoi.3.html\" rel=\"nofollow\"><code>atoi()</code></a>.</p>\n\n<p>In particular, you pass the result of <a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow\"><code>strtok()</code></a>, so doublecheck that it is doing the correct thing.</p>\n\n<p>Also, you can get better understanding of what is causing this issue if you step your program, inspect variables and so on.</p>\n\n<p>Look for some introductory tutorial on using gdb, such as <a href=\"http://cseweb.ucsd.edu/classes/fa09/cse141/tutorial_gcc_gdb.html\" rel=\"nofollow\">this</a>.</p>\n"}], "owner": {"reputation": 81, "user_id": 3803523, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1941724885fe650f2348aec69a2f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "EmadSmart", "link": "https://stackoverflow.com/users/3803523/emadsmart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434571227, "creation_date": 1434564546, "last_edit_date": 1434565693, "question_id": 30899142, "link": "https://stackoverflow.com/questions/30899142/segmentation-fault-in-pthread-programming", "title": "segmentation fault in pthread programming", "body": "<p>I am writing a program to read a file with lines like: <code>number operator number</code> and want to handle these lines with 4 separate threads using pthreads and show the result of each line with the format of:</p>\n\n<p>Line number Result</p>\n\n<p>My file has 2 operators: plus and minus.  When I run code only with <code>subReadThread</code> (and <code>subExec</code>) or only with <code>plusReadThread</code> (and <code>plusExec</code>) it works correctly and give me the correct result but when I want to run the threads together I get segmentation fault error and the execution process does not continue.</p>\n\n<p>Here is the code (also at <a href=\"http://pastebin.com/2fDSDucm\" rel=\"nofollow\">http://pastebin.com/2fDSDucm</a>):</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;time.h&gt;\n#define BUFFER_SIZE 5\n#define TRUE 1\nint numberOfLines ;\nint sumCounter, subCounter, mulCounter, divCounter ;\nint sumFileEnd, subFileEnd, mulFileEnd, divFileEnd ;\npthread_t *tid ;\n\nclock_t begin, end;\ndouble time_spent;\n\nsem_t sumfull, sumEmpty ;\nsem_t subfull, subEmpty ;\n//sem_t mulfull, mulEmpty ;\n//sem_t divfull, divEmpty ;\n//sem_t outfull, outEmpty ;\n\nchar sumBuff [5][25] ;\nchar subBuff [5][25] ;\n//char mulBuff [] ;\n//char divBuff [] ;\n//char outBuff [] ;\n\npthread_mutex_t sumMutex ;\npthread_mutex_t subMutex ;\n\nvoid initData(){\n        pthread_mutex_init(&amp;sumMutex, NULL)      ;\n        sem_init(&amp;sumfull, 0, 0) ;\n        sem_init(&amp;sumEmpty, 0, BUFFER_SIZE) ;\n        sem_init(&amp;subfull, 0, 0) ;\n        sem_init(&amp;subEmpty, 0, BUFFER_SIZE) ;\n\n        sumCounter = subCounter = mulCounter = divCounter = 0 ;\n        sumFileEnd = subFileEnd = mulFileEnd = divFileEnd = 0 ;\n}\n\nvoid *plusReadThread(){\n        printf(\"Enter to the plusReadThread\\n\");\n        FILE *sumfp = fopen(\"sample.txt\",\"r\");\n        char * line = NULL;\n        size_t len = 0;\n        ssize_t read;\n        char *isSum ;\n        int lineNumber = 1 ;\n        if (lineNumber == 1){\n                read = getline(&amp;line, &amp;len, sumfp) ;\n                lineNumber ++ ;\n        }\n        while (!feof(sumfp)){\n                printf(\"Enter to the while of plusReadThread\\n\");\n                read = getline(&amp;line, &amp;len, sumfp) ;\n                isSum = strchr(line, '+') ;\n                if (isSum != NULL){\n                        printf(\"Down on sumEmpty\\n\");\n                        sem_wait(&amp;sumEmpty);\n                        pthread_mutex_lock(&amp;sumMutex) ;\n                        printf(\"Lock the mutex in plusReadThread\\n\");\n                        if(sumCounter &lt; BUFFER_SIZE){\n                                printf(\"Counter was &lt; 5 in plusReadThread\\n\");\n                                char temp[20] ;\n                                sprintf(temp, \"%d\", lineNumber);\n                                strcat(temp, \".\");\n                                strcat (temp, line);\n                                printf(\"lineNumber is %d line content is %s\", lineNumber, line );\n                                strcpy(sumBuff[sumCounter], temp);\n                                printf(\"Copied the line in to the sumBuff\\n\");\n                                printf(\"sumCounter = %d sumBuff[%d] = %s\",sumCounter, sumCounter, sumBuff[sumCounter] );\n                                sumCounter ++;\n                                printf(\"sumCounter changed to %d\\n\", sumCounter);\n                        }\n                        pthread_mutex_unlock(&amp;sumMutex);\n                        printf(\"Unlock the mutex in plusReadThread\\n\");\n                        sem_post(&amp;sumfull);\n                        printf(\"Signal on sumfull\\n\");\n                }\n                lineNumber ++;\n        }\n        if (feof(sumfp))\n                sumFileEnd = 1;\n        fclose(sumfp);\n}\nvoid *plusExec(){\n        printf(\"Enter to the plusExec\\n\");\n        char *search = \"+\" ;\n        char *temp1;\n        char *temp2;\n        int operand1 ;\n        int operand2 ;\n        int result ;\n        while (!sumFileEnd || sumCounter!=0){\n                printf(\"Enter to the plusExec while\\n\");\n                printf(\"Here sumCounter is %d \\n\", sumCounter);\n                sem_wait(&amp;sumfull);\n                pthread_mutex_lock(&amp;sumMutex);\n                printf(\"Lock the mutex in plusExec\\n\");\n                temp1 = strtok(sumBuff[sumCounter-1], search) ;\n                operand2 = atoi(strtok(NULL, search));\n                temp2 = strtok(temp1, \".\") ;\n                operand1 = atoi(strtok(NULL, \".\")) ;\n                result = operand1 + operand2 ;\n                printf(\"%d %d\\n\", atoi(temp2) ,result);\n                sumCounter --;\n                sem_post(&amp;sumEmpty);\n                pthread_mutex_unlock(&amp;sumMutex);\n                printf(\"Unlock the mutex in plusReadThread\\n\");\n        }\n}\n\nvoid *subReadThread(){\n        printf(\"Enter to the subReadThread\\n\");\n        FILE *subfp = fopen(\"sample.txt\",\"r\");\n        char * line = NULL;\n        size_t len = 0;\n        ssize_t read;\n        char *isSub ;\n        int lineNumber = 1 ;\n        if (lineNumber == 1){\n                read = getline(&amp;line, &amp;len, subfp) ;\n                lineNumber ++ ;\n        }\n        while (!feof(subfp)){\n                printf(\"Enter to the while of subReadThread\\n\");\n                read = getline(&amp;line, &amp;len, subfp) ;\n                isSub = strchr(line, '-') ;\n                if (isSub != NULL){\n                        printf(\"Down on subEmpty\\n\");\n                        sem_wait(&amp;subEmpty);\n                        pthread_mutex_lock(&amp;subMutex) ;\n                        printf(\"Lock the mutex in subReadThread\\n\");\n                        if(subCounter &lt; BUFFER_SIZE){\n                                printf(\"Counter was &lt; 5 in subReadThread\\n\");\n                                char temp[20] ;\n                                sprintf(temp, \"%d\", lineNumber);\n                                strcat(temp, \".\");\n                                strcat (temp, line);\n                                printf(\"lineNumber is %d line content is %s\", lineNumber, line );\n                                strcpy(subBuff[subCounter], temp);\n                                printf(\"Copied the line in to the subBuff\\n\");\n                                printf(\"subCounter = %d subBuff[%d] = %s\",subCounter, subCounter, subBuff[subCounter] );\n                                subCounter ++;\n                                printf(\"subCounter changed to %d\\n\", subCounter);\n                        }\n                        pthread_mutex_unlock(&amp;subMutex);\n                        printf(\"Unlock the mutex in subReadThread\\n\");\n                        sem_post(&amp;subfull);\n                        printf(\"Signal on subfull\\n\");\n                }\n                lineNumber ++;\n        }\n        if (feof(subfp))\n                subFileEnd = 1;\n        fclose(subfp);\n}\nvoid *subExec(){\n        printf(\"Enter to the subExec\\n\");\n        char *search = \"-\" ;\n        char *temp1;\n        char *temp2;\n        int operand1 ;\n        int operand2 ;\n        int result ;\n        while (!subFileEnd || subCounter!=0){\n                printf(\"Enter to the subExec while\\n\");\n                printf(\"Here subCounter is %d \\n\", subCounter);\n                sem_wait(&amp;subfull);\n                pthread_mutex_lock(&amp;subMutex);\n                printf(\"Lock the mutex in subExec\\n\");\n                temp1 = strtok(subBuff[subCounter-1], search) ;\n                operand2 = atoi(strtok(NULL, search));\n                temp2 = strtok(temp1, \".\") ;\n                operand1 = atoi(strtok(NULL, \".\")) ;\n                result = operand1 - operand2 ;\n                printf(\"%d %d\\n\", atoi(temp2) ,result);\n                subCounter --;\n                sem_post(&amp;subEmpty);\n                pthread_mutex_unlock(&amp;subMutex);\n                printf(\"Unlock the mutex in subReadThread\\n\");\n        }\n}\n\nint main (int argc, char* argv []){\n        begin = clock();\n        FILE *fp = fopen(\"sample.txt\", \"r\") ;\n        fscanf(fp, \"%d\", &amp;numberOfLines) ;\n        fclose(fp) ;\n\n        initData() ;\n        tid = (pthread_t*)malloc(4*sizeof(pthread_t)) ;\n        pthread_create(&amp;tid[0],NULL,plusReadThread,NULL);\n        pthread_create(&amp;tid[1],NULL,plusExec,NULL);\n        pthread_create(&amp;tid[2],NULL,subReadThread,NULL);\n        pthread_create(&amp;tid[3],NULL,subExec,NULL);\n\n        pthread_join(tid[0] , NULL);\n        pthread_join(tid[1] , NULL);\n        pthread_join(tid[2] , NULL);\n        pthread_join(tid[3] , NULL);\n\n        end = clock();\n        time_spent = (double)(end - begin) / CLOCKS_PER_SEC;\n        printf(\"%F\\n\", time_spent);\n        exit(0);\n}\n</code></pre>\n\n<p>When I run code only with subReadThread(and subExec) or only with sumReadThread(and sumExec), it works correctly and gives me the correct result. But when I want to run the threads together(as in above link), I get a segmentation fault error and the execution process does not continue.\nHere is the output of one of my runs (at <a href=\"http://pastebin.com/nBqfiDcW\" rel=\"nofollow\">http://pastebin.com/nBqfiDcW</a>):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>6 1222\n5 -2369\n3 -2355\n2 -1593\n12 3306\n11 4688\n9 4549\n7 4834\n4 1827\n10 -2571\n23 7537\n21 3789\n19 1751\n15 2803\n13 2673\n8 1304\n34 588\n33 3367\n29 6922\n26 4204\n25 5212\n20 364\n18 -1890\n17 37\n37 1658\n16 -1867\n36 4541\n14 -2184\n48 7613\n47 3093\n44 3349\n40 2516\n30 -1163\n28 -530\n38 1016\n27 1403\n24 -1102\n22 989\n56 5370\n54 4465\n53 4918\n35 -565\n51 4918\n32 1169\n31 1781\n43 941\n42 525\n41 1359\nSegmentation fault\n</code></pre>\n"}, {"tags": ["c", "algorithm", "heapsort", "clrs"], "comments": [{"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "edited": false, "score": 0, "creation_date": 1434564183, "post_id": 30898881, "comment_id": 49837092, "body": "What exactly isn&#39;t working?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1434564370, "post_id": 30898881, "comment_id": 49837225, "body": "Well, it wastes x[0]. to start with.  I don&#39;t trust C arrays with &#39;1..&#39; indexing, even if declared oversized to start with:("}, {"owner": {"reputation": 17, "user_id": 5020885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2452fa1eca1e0aaaab77045e006d646?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Ahuj", "link": "https://stackoverflow.com/users/5020885/sam-ahuj"}, "edited": false, "score": 0, "creation_date": 1434564384, "post_id": 30898881, "comment_id": 49837230, "body": "The heapsort function. This is the output I am getting after printing the array after heapsort function:  1       1       1       1       2       1       2       2       1       1"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1434564416, "post_id": 30898881, "comment_id": 49837258, "body": "1. Use a debugger. 2. Arrays in C are zero-based, not one-based. Don&#39;t run from that fact; embrace it. 3. An element at index <code>i</code> in an array with the heap property <i>potentially</i> has children at slots <code>2*i+1</code> and <code>2*(i+1)</code>, restricted by the overall sequence length <code>N</code> (meaning if either of those compute to values equal or greater to <code>N</code>, that child does not exist)."}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1434564627, "post_id": 30898881, "comment_id": 49837391, "body": "You need to add more details to the quesion, or it will be closed as off topic: <code>Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434569020, "post_id": 30898881, "comment_id": 49840048, "body": "Just a point: although you have <code>#define maxn 11</code> and <code>int n=10;</code> you&#39;ve (almost) ignored them and hard coded using <code>5</code> and <code>10</code>."}], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "is_accepted": true, "score": 0, "last_activity_date": 1434582385, "creation_date": 1434582385, "answer_id": 30903955, "question_id": 30898881, "link": "https://stackoverflow.com/questions/30898881/heapsort-algorithm-clrs/30903955#30903955", "title": "Heapsort algorithm CLRS", "body": "<p>There's a lack of logic in heapsort. Any sort algorithm has to compare 2 values and do one thing for less than, another for greater and leave well alone if the same. At present you automatically swap a comparator with index 1 multiple times.</p>\n\n<p>I can't clearly see why it's loosing numbers resulting in random 1's and 2's, but it looks so broken that I'm not giving anymore time until you try again.</p>\n\n<p>In c the array index begin from 0, don't avoid it in this little 10 node quandary it's nothing much. But if you don't start to automatically consider zero to be first you will pay big time.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 0, "last_activity_date": 1434584129, "creation_date": 1434584129, "answer_id": 30904207, "question_id": 30898881, "link": "https://stackoverflow.com/questions/30898881/heapsort-algorithm-clrs/30904207#30904207", "title": "Heapsort algorithm CLRS", "body": "<p>This line:</p>\n\n<pre><code>int s=x[i];x[1]=x[i];x[i]=s;\n</code></pre>\n\n<p>looks like it's trying to do a swap, but it's mixed up. Look at the indexes and think about the order.</p>\n\n<p>After you fix that, there's still another bug. I don't have the book so I don't know exactly what it told you to do, but I believe you need to fix up the heap property starting <em>from the root</em> after you remove an element, and your code doesn't do that.</p>\n"}], "owner": {"reputation": 17, "user_id": 5020885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2452fa1eca1e0aaaab77045e006d646?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Ahuj", "link": "https://stackoverflow.com/users/5020885/sam-ahuj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 30903955, "answer_count": 2, "score": 0, "last_activity_date": 1435091132, "creation_date": 1434563692, "last_edit_date": 1435091132, "question_id": 30898881, "link": "https://stackoverflow.com/questions/30898881/heapsort-algorithm-clrs", "title": "Heapsort algorithm CLRS", "body": "<p>I was implementing a heapsort algorithm in C according to CLRS. However I am unable to get a sorted output. Can you please have a look and tell what is wrong with my code. Functions <code>maxheap</code> and <code>buildmaxheap</code> works. I am not able to figure what is wrong with the code. </p>\n\n<p>The code is supposed to heapsort the array elements. I feel there is an error in the <code>heapsort()</code> function as the <code>maxheap</code> and <code>buildmaxheap</code> work just fine. </p>\n\n<p>The final output I am getting is </p>\n\n<pre><code>1 1 1 1 2 1 2 2 1 1\n</code></pre>\n\n<p>But the expected output should be </p>\n\n<pre><code>1 2 3 4 7 8 9 10 14 16\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n\n#define maxn 11\nint n=10;\n\nint parent(int i)\n{\n    return i/2;\n}\n\nint left(int i)\n{\n    return 2*i+0;\n}\n\nint right(int i)\n{\n    return 2*i+1+0;\n}\n\nvoid  max_heap(int x[],int i,int heapsize)\n{\n    int largest;\n    int l=left(i);\n    int r=right(i);\n\n    if (l&lt;=heapsize &amp;&amp;  x[l]&gt;x[i]){\n        largest=l;\n    }\n    else\n    {\n        largest=i;\n    }\n    if (r&lt;=heapsize &amp;&amp; x[r]&gt;x[largest]){\n        largest=r;\n    }\n    if (largest!=i)\n    {\n        int s=x[i];x[i]=x[largest];x[largest]=s;\n        max_heap(x,largest,heapsize);\n    }\n}\n\nvoid buildmaxheap(int x[],int heapsize)\n{\n\n    int i;\n    for(i=5;i&gt;=1;i--)\n        max_heap(x,i,heapsize);\n\n}\n\nvoid heapsort(int x[])\n{\n    buildmaxheap(x,10);\n    int i,t,heapsize=10;\n    for(i=10;i&gt;=2;i--)\n    {\n        int s=x[i];x[1]=x[i];x[i]=s;\n\n        heapsize--;\n        /*\n         printf(\"%d\",heapsize);\n         */\n        max_heap(x,i,heapsize);\n    }\n    for(i=1;i&lt;=10;i++)\n        printf(\"%d\\t\",x[i]);\n\n}\n\nint main()\n{\n    int x[maxn],i;\n    x[1]=16;\n    x[2]=4;\n    x[3]=10;\n    x[4]=14;\n    x[5]=7;\n    x[6]=9;\n    x[7]=3;\n    x[8]=2;\n    x[9]=8;\n    x[10]=1;\n    heapsort(x);\n    /*\n     for(i=1;i&lt;=10;i++)\n     printf(\"%d\\t\",x[i]);\n     */\n}\n</code></pre>\n"}, {"tags": ["c", "cuda"], "answers": [{"comments": [{"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1434574378, "post_id": 30900357, "comment_id": 49843288, "body": "Thank you @robert that fixed my issue. I ran the two versions of the same code using cudaMalloc3D and the other with just cudaMalloc. I found cudaMalloc3D to be slower and I was thinking it should have been faster. If you have any thoughts on that could you care to share it."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1434575580, "post_id": 30900357, "comment_id": 49843890, "body": "I would probably need to see both versions and see what exactly you are timing.   If it&#39;s just the kernel you are timing, I wouldn&#39;t expect much difference.  This kernel should be memory bandwidth bound.    Note that consistent with the mixup of <code>i</code> vs. <code>j</code> as mentioned in my answer, I would suggest that there is a mixup in the kernel code as well.  I would instead expect e.g. <code>unew_row[i] = 1.2;</code> (using <code>i</code> not <code>j</code>), assuming you were trying to set every value in the allocation.     Otherwise, I would suggest posting a new question if you want help there."}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1434578582, "post_id": 30900357, "comment_id": 49845218, "body": "Hmm, would you mind taking a look at them, I setup a github repo where i put the two files and here is a link to the repo: <a href=\"https://github.com/anup-boisestate/cuda_test\" rel=\"nofollow noreferrer\">github-repo</a> I can also post another question if it would be better. Thanks"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1434578992, "post_id": 30900357, "comment_id": 49845382, "body": "Please post another question."}, {"owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "edited": false, "score": 0, "creation_date": 1434579480, "post_id": 30900357, "comment_id": 49845598, "body": "I have posted another question: <a href=\"http://stackoverflow.com/questions/30903380/cudamalloc-vs-cudamalloc3d-performance-for-a-2d-array\" title=\"cudamalloc vs cudamalloc3d performance for a 2d array\">stackoverflow.com/questions/30903380/&hellip;</a>"}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 2, "last_activity_date": 1434575760, "last_edit_date": 1434575760, "creation_date": 1434568278, "answer_id": 30900357, "question_id": 30898815, "link": "https://stackoverflow.com/questions/30898815/an-illegal-memory-access-when-trying-to-write-to-a-2d-array-allocated-using-cu/30900357#30900357", "title": "&#39;an illegal memory access&#39; when trying to write to a 2D array allocated using cudaMalloc3D", "body": "<p>The reason the error doesn't occur on this line:</p>\n\n<pre><code>REAL tmp = unew_row[j]; // no error on this line\n</code></pre>\n\n<p>is because the compiler is optimizing that line out.  It doesn't do anything useful, and so the compiler completely eliminates it.  The compiler warning:</p>\n\n<pre><code>xxx.cu(87): warning: variable \"tmp\" was declared but never referenced\n</code></pre>\n\n<p>is a hint to that effect.</p>\n\n<p>Your code is very nearly correct.  The issue is here:</p>\n\n<pre><code>REAL *unew_row = (REAL *) (unewPtr + i * unew.pitch);\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>REAL *unew_row = (REAL *) (unewPtr + j * unew.pitch);\n</code></pre>\n\n<p>The <code>i</code> variable in your kernel is the <em>width</em> (i.e. X) dimension.\nThe <code>j</code> variable is the <em>height</em> (i.e. Y) dimension.</p>\n\n<p>The height is the one that refers to which row you are on, therefore the row pitch should be multiplied by the height parameter, i.e. <code>j</code>, not <code>i</code>.</p>\n\n<p>Similarly, although it's not the source of the specific failure for your particular dimensions, this code may be not what you intended either:</p>\n\n<pre><code>REAL tmp = unew_row[j]; // no error on this line\nunew_row[j] = 1.2; // this is where I get the error\n</code></pre>\n\n<p>If, for example, you were intending to compute the offset to the row and then index into the row (perhaps to set every element in the alocation, for example) then I think you would want to use <code>i</code> not <code>j</code> as your final index:</p>\n\n<pre><code>REAL tmp = unew_row[i]; // no error on this line\nunew_row[i] = 1.2; // this is where I get the error\n</code></pre>\n\n<p>However, for this particular example, this is not the actual source of the illegal memory access.</p>\n"}], "owner": {"reputation": 217, "user_id": 4581734, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/oJcyy.jpg?s=128&g=1", "display_name": "anupshrestha", "link": "https://stackoverflow.com/users/4581734/anupshrestha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 30900357, "answer_count": 1, "score": 0, "last_activity_date": 1434575760, "creation_date": 1434563452, "question_id": 30898815, "link": "https://stackoverflow.com/questions/30898815/an-illegal-memory-access-when-trying-to-write-to-a-2d-array-allocated-using-cu", "title": "&#39;an illegal memory access&#39; when trying to write to a 2D array allocated using cudaMalloc3D", "body": "<p>I am trying to allocate and copy memory of a flattened 2D array on to the device using cudaMalloc3D to test the performance of cudaMalloc3D. But when I try to write to the array from the kernel it throws 'an illegal memory access was encountered' exception. The program runs fine if I am just reading from the array but when I try to write to it, there is an error. Any help on this will be greatly appreciated. Below is my code and the syntax for compiling the code.</p>\n\n<p>Compile using</p>\n\n<pre><code>nvcc -O2 -arch sm_20 test.cu \n</code></pre>\n\n<p>Code: test.cu </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n#define PI 3.14159265 \n#define NX 8192     /* includes boundary points on both end */\n#define NY 4096     /* includes boundary points on both end */\n#define NZ 1        /* needed for cudaMalloc3D */\n\n#define N_THREADS_X 16\n#define N_THREADS_Y 16\n#define N_BLOCKS_X NX/N_THREADS_X \n#define N_BLOCKS_Y NY/N_THREADS_Y \n\n#define LX 4.0    /* length of the domain in x-direction  */\n#define LY 2.0    /* length of the domain in x-direction  */\n#define dx       (REAL) ( LX/( (REAL) (NX) ) )\n#define cSqrd     5.0\n#define dt       (REAL) ( 0.4 * dx / sqrt(cSqrd) )\n#define FACTOR   ( cSqrd * (dt*dt)/(dx*dx) )\n\n#define IC  (i + j*NX)       /* (i,j)   */\n#define IM1 (i + j*NX - 1)   /* (i-1,j) */\n#define IP1 (i + j*NX + 1)   /* (i+1,j) */\n#define JM1 (i + (j-1)*NX)   /* (i,j-1) */\n#define JP1 (i + (j+1)*NX)   /* (i,j+1) */\n\n\n// Macro for checking CUDA errors following a CUDA launch or API call\n#define cudaCheckError() {\\\n  cudaError_t e = cudaGetLastError();\\\n  if( e != cudaSuccess ) {\\\n    printf(\"\\nCuda failure %s:%d: '%s'\\n\",__FILE__,__LINE__,cudaGetErrorString(e));\\\n    exit(EXIT_FAILURE);\\\n  }\\\n}\n\ntypedef double REAL;\ntypedef int    INT;\n\n\nvoid meshGrid ( REAL *x, REAL *y )\n{\n\n  INT i,j;\n  REAL a;\n  for (j=0; j&lt;NY; j++) {\n    a = dx * ( (REAL) j );\n    for (i=0; i&lt;NX; i++) {\n      x[IC] =  dx * ( (REAL) i );\n      y[IC] = a;\n    }\n  }\n}\n\n\nvoid initWave ( REAL *u, REAL *uold, REAL *x, REAL *y )\n{                    \n  INT i,j;\n  for (j=1; j&lt;NY-1; j++) {\n    for (i=1; i&lt;NX-1; i++) {\n      u[IC] =  0.1 * (4.0*x[IC]-x[IC]*x[IC]) * ( 2.0*y[IC] - y[IC]*y[IC] );\n    }\n  }\n\n  for (j=1; j&lt;NY-1; j++) {\n    for (i=1; i&lt;NX-1; i++) {\n      uold[IC] = u[IC] + 0.5*FACTOR*( u[IP1] + u[IM1] + u[JP1] + u[JM1] - 4.0*u[IC] );\n    }\n  }\n}\n\n\n__global__ void solveWaveGPU ( cudaPitchedPtr uold, cudaPitchedPtr u, cudaPitchedPtr unew )\n{\n\n INT i,j;\n\n i = blockIdx.x*blockDim.x + threadIdx.x;\n j = blockIdx.y*blockDim.y + threadIdx.y;\n\n if (i&gt;0 &amp;&amp; i &lt; (NX-1) &amp;&amp; j&gt;0 &amp;&amp; j &lt; (NY-1) ) {\n\n  char *unewPtr  = (char *) unew.ptr;\n  REAL *unew_row = (REAL *) (unewPtr + i * unew.pitch);\n\n  REAL tmp = unew_row[j]; // no error on this line\n  unew_row[j] = 1.2; // this is where I get the error\n }\n\n}\n\n\nINT main(INT argc, char *argv[])\n{\n\n  INT nTimeSteps = 10;  \n\n  // pointers for the host side\n  REAL *unew, *u, *uold, *uFinal, *x, *y;\n\n  // allocate memory on the host\n  unew        = (REAL *)calloc(NX*NY,sizeof(REAL));\n  u           = (REAL *)calloc(NX*NY,sizeof(REAL));\n  uold        = (REAL *)calloc(NX*NY,sizeof(REAL));\n  uFinal      = (REAL *)calloc(NX*NY,sizeof(REAL));\n  x           = (REAL *)calloc(NX*NY,sizeof(REAL));\n  y           = (REAL *)calloc(NX*NY,sizeof(REAL));\n\n\n  // pointer for the device side\n  size_t pitch = NX * sizeof(REAL);\n  cudaPitchedPtr  d_u, d_uold, d_unew, d_tmp;\n  cudaExtent myExtent = make_cudaExtent(pitch, NY, NZ);\n\n  // allocate 3D memory on the device\n  cudaMalloc3D( &amp;d_u, myExtent );    cudaCheckError();\n  cudaMalloc3D( &amp;d_uold, myExtent ); cudaCheckError();\n  cudaMalloc3D( &amp;d_unew, myExtent ); cudaCheckError();\n\n\n  // initialize grid and wave\n  meshGrid( x, y );\n  initWave( u, uold, x, y );\n\n\n  // copy host memory to 3D device memory\n  cudaMemcpy3DParms cpy3D = { 0 };\n  cpy3D.kind = cudaMemcpyHostToDevice;\n\n  // copying u to d_u\n  cpy3D.srcPtr = make_cudaPitchedPtr(u, pitch, NX, NY);\n  cpy3D.dstPtr = d_u;\n  cpy3D.extent = myExtent;\n  cudaMemcpy3D( &amp;cpy3D ); cudaCheckError();  \n\n  // copying uold to d_uold\n  cpy3D.srcPtr = make_cudaPitchedPtr(uold, pitch, NX, NY);\n  cpy3D.dstPtr = d_uold;\n  cpy3D.extent = myExtent;\n  cudaMemcpy3D( &amp;cpy3D ); cudaCheckError();  \n\n\n  //  set up the GPU grid/block model\n  dim3 dimGrid  ( N_BLOCKS_X , N_BLOCKS_Y  );\n  dim3 dimBlock ( N_THREADS_X, N_THREADS_Y );\n\n  for ( INT n = 1; n &lt; nTimeSteps + 1; n++ ) {\n    solveWaveGPU &lt;&lt;&lt; dimGrid, dimBlock &gt;&gt;&gt; ( d_uold, d_u, d_unew );\n    cudaThreadSynchronize();\n    cudaCheckError();\n\n    d_tmp  = d_uold;\n    d_uold = d_u;\n    d_u    = d_unew;\n    d_unew = d_tmp;\n  }\n\n  // copy the memory back to host\n  cpy3D.kind = cudaMemcpyDeviceToHost;\n\n  // copying d_unew to uFinal\n  cpy3D.srcPtr = d_unew;\n  cpy3D.dstPtr = make_cudaPitchedPtr(uFinal, pitch, NX, NY);\n  cpy3D.extent = myExtent;\n  cudaMemcpy3D( &amp;cpy3D ); cudaCheckError();  \n\n  free(u);    cudaFree(d_u.ptr);\n  free(unew); cudaFree(d_unew.ptr);\n  free(uold); cudaFree(d_uold.ptr);\n\n  free(uFinal); free(x); free(y);\n\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "pthreads", "mingw", "access-violation", "pthreads-win32"], "answers": [{"tags": [], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1440068931, "last_edit_date": 1495541677, "creation_date": 1440067707, "answer_id": 32116218, "question_id": 30898193, "link": "https://stackoverflow.com/questions/30898193/cancelling-a-thread-in-pthread-cond-wait-yields-to-access-violation-under-mingw/32116218#32116218", "title": "Cancelling a thread in pthread_cond_wait yields to access violation under MinGW", "body": "<p>First destroy mutex and condition on which thread is waiting and then do thread cancel. If you destroy first thread then this kind of problem comes in windows.\nHave look on <a href=\"https://stackoverflow.com/questions/3528252/killing-a-pthread-waiting-on-a-condition-variable\">this</a>.</p>\n"}], "owner": {"reputation": 186, "user_id": 5018710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f753c99b69c10805be2ba3a178f6c99?s=128&d=identicon&r=PG&f=1", "display_name": "Emilio Perez", "link": "https://stackoverflow.com/users/5018710/emilio-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440068931, "creation_date": 1434561413, "last_edit_date": 1495540281, "question_id": 30898193, "link": "https://stackoverflow.com/questions/30898193/cancelling-a-thread-in-pthread-cond-wait-yields-to-access-violation-under-mingw", "title": "Cancelling a thread in pthread_cond_wait yields to access violation under MinGW", "body": "<p>My program dies with an access violation in Windows (Windows 7 - 32 bits). It is C code compiled with gcc 4.8.1 under MinGW. It uses pthreads-w32 2.9.1.\nThere are several threads working concurrently with no other apparent issues.\nIt can run well for days or fail in a couple of hours.\nCode can also be compiled in several linux architectures, but I am not having problems there. It is also very difficult to run the program under a debugger.</p>\n\n<p>Following is the function where the crash happens.</p>\n\n<pre><code>static void *timeout_lector(void *indice)\n{\n    int e;\n    pthread_mutex_t fm;\n    pthread_cond_t fc;\n    struct timespec ts;\n    struct timeval tv;\n    struct equipo *eq;\n\n    eq = &amp;estacion.equipos[*((int *)indice)];\n\n    if (pthread_mutex_init(&amp;fm, NULL) || pthread_cond_init(&amp;fc, NULL)) {\n        LOG_PRINT(\"Error creating mutex or cond in timeout_lector.\\n\");\n        exit(1);\n    }\n    pthread_mutex_lock(&amp;fm);\n    gettimeofday(&amp;tv, NULL);\n    ts.tv_sec  = tv.tv_sec;\n    ts.tv_nsec = tv.tv_usec * 1000;\n    siguiente_tmseg(&amp;ts, 150);  /* Increments ts by 150 ms */\n    pthread_cleanup_push(thread_cleanup_fc, (void *)(&amp;fc));\n    pthread_cleanup_push(thread_cleanup_fm, (void *)(&amp;fm));\n    if ((e = pthread_cond_timedwait(&amp;fc, &amp;fm, &amp;ts)) != ETIMEDOUT) {\n        LOG_PRINT(\"Error waiting in timeout_lector: %d.\\n\", e);\n        exit(1);\n    }\n    pthread_mutex_lock(&amp;eq-&gt;mutexto);\n    eq-&gt;to = 1;\n    pthread_mutex_unlock(&amp;eq-&gt;mutexto);\n    e = pthread_cond_wait(&amp;fc, &amp;fm);  /* wait until we are cancelled */\n    LOG_PRINT(\"Error in timeout_lector: %d.\\n\", e);\n    exit(1);\n    /* Next lines are never executed and just for correct syntax */\n    pthread_cleanup_pop(1);\n    pthread_cleanup_pop(1);\n    return(NULL);\n}\n</code></pre>\n\n<p>These are the cleanup functions:</p>\n\n<pre><code>void thread_cleanup_fc(void *fc)\n{\n    pthread_cond_destroy(fc);\n}\n\nvoid thread_cleanup_fm(void *fm)\n{\n    pthread_mutex_unlock(fm);\n    pthread_mutex_destroy(fm);\n}\n</code></pre>\n\n<p>I have been running it with Dr.MinGW 0.7.3 and here is the report:</p>\n\n<pre><code>estacion.exe caused an Access Violation at location 62489D38 in module pthreadGC2.dll Writing to location 0101FCFC.\n\nRegisters:\neax=00000000 ebx=0444febc ecx=ffffffff edx=0101fcfc esi=0444fee0 edi=0444fcf0\neip=62489d38 esp=0444fcd0 ebp=0444fd18 iopl=0         nv up ei pl zr na po nc\ncs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00010246\n\nAddrPC   Params\n62489D38 0444FEE0 00000000 FFFFFFFF  pthreadGC2.dll!pthread_cond_destroy\n004194E0 0444FEE0 0444FEBC 0444FD68  estacion.exe!thread_cleanup_fc  [C:/codigo/CeltaDAS/estacion/tiempo.c @ 223]\n6248ABB5 00000684 FFFFFFFF 0444FE08  pthreadGC2.dll!ptw32_pop_cleanup.constprop.3\n6248BAAF 00000000 00000000 03C63EE0  pthreadGC2.dll!sem_timedwait\n6248512D 003E1138 0444FEB0 767DA53A  pthreadGC2.dll!pthread_getspecific\n62485D22 003E1138 00000078 00000000  pthreadGC2.dll!ptw32_push_cleanup\n62485D22 0444FEE0 0444FEE4 0444FED0  pthreadGC2.dll!ptw32_push_cleanup\n0040C0D1 014908EC 014AAD70 00000000  estacion.exe!timeout_lector  [C:/codigo/CeltaDAS/estacion/equipos.c @ 214]\n62485BD3 014B1190 0805AA4A 00000000  pthreadGC2.dll!ptw32_threadStart@4\n767E1287 0444FF94 773DEE1C 03CF0048  msvcrt.dll!itow_s\n767E1328 03CF0048 0444FFD4 777037EB  msvcrt.dll!endthreadex\n773DEE1C 03CF0048 319EB544 00000000  kernel32.dll!BaseThreadInitThunk\n777037EB 767E12E5 03CF0048 00000000  ntdll.dll!RtlInitializeExceptionChain\n777037BE 767E12E5 03CF0048 00000000  ntdll.dll!RtlInitializeExceptionChain\n\nWindows 6.1.7601\nDrMingw 0.7.3\n</code></pre>\n\n<p>Dr.MinGW reports in the stack trace passing through line 214 in timeout_lector. It corresponds to the pthread_cond_wait line in the code.</p>\n\n<p>This threads are created continuosly and several in parallel. They wait for some time while they can be cancelled, if time passes they change a variable, and then wait until they are cancelled, what happens almost inmediately by another thread. There are no many cancellable functions that I can use for waiting and that are portable in different systems, so I chose pthread_cond_timedwait for it. But the problem seems to be in the second and indefinite wait.</p>\n\n<p>I have search for similar problems, but nothing appears to be the same problem.\nMore similar are:<br>\n<a href=\"https://stackoverflow.com/questions/11816284/pthread-cond-wait-random-segmentation-fault\">pthread_cond_wait: random segmentation fault</a><br>\n<a href=\"https://stackoverflow.com/questions/11878445/cancelling-pthread-cond-wait-hangs-with-prio-inherit-mutex?rq=1\">Cancelling pthread_cond_wait() hangs with PRIO_INHERIT mutex</a></p>\n\n<p>I would really appreciate it if someone could help me with this.</p>\n"}, {"tags": ["c", "loops", "fgets", "readdir"], "comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 1, "creation_date": 1434561808, "post_id": 30898133, "comment_id": 49835673, "body": "This looks incomplete.  Neither while loop is closed, nor the last if.  Also, it would be helpful to clean up the indentation for consistency -- it&#39;s a lot easier to read when it&#39;s right."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434561870, "post_id": 30898133, "comment_id": 49835713, "body": "After the check for <code>entry_file != NULL</code>, there is no need for the check <code>entry_file == NULL</code> due to the <code>else</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1434562136, "post_id": 30898133, "comment_id": 49835869, "body": "It is <i>significantly</i> incomplete. According to this you&#39;re writing to <code>filewrite</code> before it is opened, then opening it, reading from it, closing it, and repeating on the next iteration. The entire thing could use a full wash of checking your IO function calls rather than assuming they worked.  Via <a href=\"http://www.seebs.net/c/10com.html\" rel=\"nofollow noreferrer\">The 10 Commandments</a> of C programming, #6 is easily the most frequently ignored."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434562649, "post_id": 30898133, "comment_id": 49836178, "body": "Are you <b>really</b> using a file to concatenate 2 strings?"}, {"owner": {"reputation": 1, "user_id": 5020384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c68e4d465cba9c6f8c9282764abf74?s=128&d=identicon&r=PG&f=1", "display_name": "Liam King", "link": "https://stackoverflow.com/users/5020384/liam-king"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434562786, "post_id": 30898133, "comment_id": 49836269, "body": "@chqrlie Yes, i realize it&#39;s inefficient, but it works. that&#39;s not what i have questions about."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434563154, "post_id": 30898133, "comment_id": 49836514, "body": "You shouldn&#39;t be professionally programming in <code>C</code> if you do not understand the basics of pointers, arrays, strings, etc.  We don&#39;t <i>laugh</i> at newbie programmers, but you need to improve your skills with a good tutorial.  Read my answer for the reason you don&#39;t get any output."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5020384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c68e4d465cba9c6f8c9282764abf74?s=128&d=identicon&r=PG&f=1", "display_name": "Liam King", "link": "https://stackoverflow.com/users/5020384/liam-king"}, "edited": false, "score": 0, "creation_date": 1434563183, "post_id": 30898558, "comment_id": 49836537, "body": "Thank you so much, it now traverses through the directory and prints every file path in the folder, but still doesn&#39;t print to my file. So i guess it&#39;s not working through the <code>fgets</code> and reading strings in the files correctly?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1435094708, "post_id": 30898558, "comment_id": 50054361, "body": "Might not the <code>readdir(FD)</code> get to &quot;FileWrite.txt&quot; (the output file) before the end of the directory, fail to open as it is being used, exit  <code>while ((in_file</code> loop and not read the rest of the directory?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1434563444, "last_edit_date": 1434563444, "creation_date": 1434562608, "answer_id": 30898558, "question_id": 30898133, "link": "https://stackoverflow.com/questions/30898133/problems-with-readdir-and-fgets/30898558#30898558", "title": "Problems with readdir() and fgets", "body": "<p>Since <code>pathstr2</code> is declared as a local array, you should use this:</p>\n\n<pre><code>while ((in_file = readdir(FD)) != NULL) {\n    if (!strcmp(in_file-&gt;d_name, \".\") || !strcmp(in_file-&gt;d_name, \"..\"))\n        continue;\n\n    snprintf(pathstr2, sizeof(pathstr2), \"%s%s\", pathstr1, in_file-&gt;d_name);\n    entry_file = fopen(pathstr2, \"r\");\n    ...\n    while (fgets(buffer, sizeof(buffer), entry_file) != NULL) {\n        lcount++;\n        if (strstr(buffer, sn)) {\n            fprintf(fp1, \"%s\", buffer);\n        }\n        if (strstr(buffer, str1)) {\n            fprintf(fp1, \"Found \\\"%s\\\" at line %d\\n\", str1, lcount);\n            linenum = lcount;\n        }\n        ...\n    }\n    fclose(entry_file);\n}\n</code></pre>\n\n<p>The tests you perform with <code>strstr</code> on the lines read from <code>entry_file</code> are not incorrect.  You should specify <code>buffer</code> instead of <code>str1</code> as the first argument.</p>\n\n<p>Also note that <code>strstr</code> searches for the second string in the whole line.  If the string should be starting at the beginning of the line, you should write:</p>\n\n<pre><code>if (!strncmp(buffer, str1, strlen(str1))) {\n    // line starts with str1\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5020384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c68e4d465cba9c6f8c9282764abf74?s=128&d=identicon&r=PG&f=1", "display_name": "Liam King", "link": "https://stackoverflow.com/users/5020384/liam-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435091403, "creation_date": 1434561161, "last_edit_date": 1435091403, "question_id": 30898133, "link": "https://stackoverflow.com/questions/30898133/problems-with-readdir-and-fgets", "title": "Problems with readdir() and fgets", "body": "<p>I'm writing a code where I can be given a directory of .txt files, and specific strings that appear throughout each file, and do some simple comparisons. code chunk will be posted below.</p>\n\n<p>So, My task:Open directory>open file>compare strings>open next file(repeat)\nUntil I run out of files.</p>\n\n<p>What is wrong:My code currently prints the first file name( full path name) infinitely until it crashes, nothing is printed to <code>fp1</code>. It is supposed to only print the file name once, but it never gets past that first file, where, obviously, I would like it to go through all the files in the directory.   </p>\n\n<p>I'm sorry that I'm fairly new to <strong>C</strong> so I might be unclear as to how these functions actually operate. </p>\n\n<p>Please correct me if I'm wrong, I want to see if I understand correctly. </p>\n\n<pre><code>while ((in_file = readdir(FD))!= NULL){\n</code></pre>\n\n<p>Should basically traverse through a directory and \"look\" the name of each file. \nI then do some very inefficient work around, which you will probably laugh at me for, and I manage to get the full path name of the first file in the directory. \nI then assign that path name to <code>entry_file</code> pointer, where it gets opened by <code>fgets()</code>.\nI believe <code>fgets()</code> should read each line individually until it sees a EOF character </p>\n\n<p>Now, I had this section working before I added the directory stuff, where I was just opening one file by using <code>fopen()</code> with its full path name, and I haven't touched it. So I don't think my problem is here, but nothing is being printed to <code>fp1</code> at all, so I really don't know. </p>\n\n<p>I then do some simple string comparisons and try to print matches to <code>fp1</code>\nWhen it reaches the end of the file, it should close the file, and then go back up to <code>readdir()</code> and repeat the process with the next file</p>\n\n<p>Thank you so much for any help. I probably sound like an idiot, but I just have no idea what could cause this. </p>\n\n<p>Yes, I realize its very messy, and I have many unused and pointless variables. I've been trying to figure this out for days, trying many different methods. </p>\n\n<pre><code>int main(void)\n{\n\nchar str1[10000];\nchar str2[] = { \"Measure L1 current Tank Heater ON: Passed\" };\nchar str3[] = { \"Measure L1 current Tank Heater ON: Failed\" };\nchar str4[] = { \"Measure L1 current Manifold Heater ON: Passed\" };\nchar str5[] = { \"Measure L1 current Manifold Heater ON: Failed\" };\nchar str6[] = { \"Measure L1 current (verify heaters off) Manifold: Passed\" };\nchar str7[] = { \"Measure L1 current (verify heaters off) Manifold: Failed\" };\nchar sn[] = { \"Serial Number:                1\" };\nDIR* FD;\nstruct dirent* in_file;\nint lcount = 0;//line counter\nchar *ret;\nint linenum = 0;//temp line count\nchar mes[500];//measurement\ndouble val = 0;//value\nchar unit[500];//units\nchar pathstr1[38] = (\"C:/Users/liam.king/Desktop/TestFiles/\");\nchar pathstr2[200];\n\n\nDWORD retval = 0;\n\nchar buffer[BUFSIZE] = (\"\");\nchar buf[BUFSIZE] = (\"\");\nchar** lppPart = {NULL};\n\nFILE *fp, *fp1, *filewrite;\nFILE *entry_file;\n//fp = fopen(\"C:/Users/liam.king/Desktop/TestFiles/ProBlueUnit_UpgradeRev4_Report[1022230.SA15E14082][9 39 00 AM][5 19 2015].txt\", \"r\");\nfp1 = fopen(\"C:/Users/liam.king/Desktop/ProBlueTestWrite.txt\", \"a\");\nfilewrite = fopen(\"C:/Users/liam.king/Desktop/FileWrite.txt\", \"w+\");\nif (fp1 == NULL){\n    printf(\"Invalid file name\");\n    return 0;\n}\n\nif ((FD = opendir(LONG_DIR_NAME))==NULL)\n{\n    printf(\"Error: Failed to open directory\\n\");\n\n\n    return 0;\n}\nelse{\n    printf(\"Directory opened successful\\n\");\n}\nwhile ((in_file = readdir(FD))!= NULL){\n\n    if (strcmp(in_file-&gt;d_name, \".\") == 0 || strcmp(in_file-&gt;d_name, \"..\") == 0)\n        continue;\n\n\n    fprintf(filewrite, \"%s\", pathstr1);\n    fprintf(filewrite,\"%s\", in_file-&gt;d_name);\n    fclose(filewrite);\n\n    filewrite = fopen(\"C:/Users/liam.king/Desktop/FileWrite.txt\", \"r\");\n\n\n\n        fscanf(filewrite, \"%[^\\n]%*c\", pathstr2);\n        printf(\"%s\\n\", pathstr2);//check file name is correct\n\n        entry_file = fopen(pathstr2, \"r\");\n        fclose(filewrite);\n\n\n        if (entry_file != NULL){\n            //printf(\"SUCCESSFULL OPENING\\n\");\n            //fprintf(fp1, \"Does this work?\\n\");\n\n\n        }\n        else if (entry_file == NULL){\n            printf(\"Error: Failed to open entry file\\n\");\n            return 0;\n\n        }\n\n            while (fgets(buffer, 256, entry_file) != NULL){//string being stored in str1 from file *entry_file\n\nlcount++;\n                ret = strstr(str1, sn);\n                if (ret != NULL){\n                    fprintf(fp1, \"%s\\n\", str1);\n                }\n                ret = strstr(str1, str2);\n                if (ret != NULL){// compares str1 and 2\n                    fprintf(fp1, \"Found\"\" %s \"\"at line %d\\n\", str1, lcount);//if same, declare match and what line found at. \n                    linenum = lcount;\n                }\n//comparing more strings\n\n            }\n            fclose(entry_file);\n\n    }\n\nfclose(fp1);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1434560919, "post_id": 30898012, "comment_id": 49835145, "body": "If it is crashing, probably it is invoking an undefined behavior. Either your <code>i</code> is out of <code>str</code> bounds, or the problem is elsewhere."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1434560951, "post_id": 30898012, "comment_id": 49835162, "body": "What is <code>i</code>? or how are you calling this function?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434560980, "post_id": 30898012, "comment_id": 49835191, "body": "Is it the caller that is crashing? Since your two versions return opposite results."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1434561047, "post_id": 30898012, "comment_id": 49835241, "body": "You <i>do</i> realize that a comparison already returns a boolean?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434561193, "post_id": 30898012, "comment_id": 49835334, "body": "Is there a sequence point in this? <code>while (str[++j] != &#39;\\0&#39; &amp;&amp; ft_is_alpha(str, j))</code> since <code>j</code> can start at <code>-1</code> and is the evaluation sequence guaranteed to be left to right?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434561335, "post_id": 30898012, "comment_id": 49835416, "body": "@Weather Vane: Yes there is, so the code is well defined, but the style hurts the reader&#39;s eyes."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434561409, "post_id": 30898012, "comment_id": 49835448, "body": "Why not pass <code>str[i]</code> instead of <code>str</code> and <code>i</code> separately?  What does the function  <code>ft_is_equal_to()</code> do?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434561450, "post_id": 30898012, "comment_id": 49835473, "body": "...or even use <code>isalpha(str[i])</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434561598, "post_id": 30898012, "comment_id": 49835555, "body": "@Weather Vane: good try, but it should really be <code>isalpha((unsigned char)str[i])</code>, and would not be exactly equivalent if the locale is not <code>C</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1434561758, "post_id": 30898012, "comment_id": 49835641, "body": "@chqrlie it is <code>int isalpha(int)</code> so <code>char</code> will be promoted by the compiler. But I take your point: <code>isalpha</code> is UB if the argument is not <code>00..FF</code>"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434562055, "post_id": 30898012, "comment_id": 49835825, "body": "@Weather Vane: yes, that&#39;s exactly why you should cast the <code>char</code> argument!  depending on your compiler&#39;s settings, <code>char</code> may be <code>signed</code> by default and promotion will produce negative values.  C11 7.4 is clear about this for <code>int isalpha(int c)</code>, like all similar functions from <code>&lt;ctype.h&gt;</code>: <i>In all cases the argument is an int, the value of which shall be representable as an unsigned char or shall equal the value of the macro EOF. If the argument has any other value, the behavior is undefined.</i>"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 2, "last_activity_date": 1434561784, "last_edit_date": 1434561784, "creation_date": 1434561209, "answer_id": 30898142, "question_id": 30898012, "link": "https://stackoverflow.com/questions/30898012/c-ternary-operator/30898142#30898142", "title": "C - Ternary operator", "body": "<p>I don't know what you mean by <em>crashing</em>, the first function implements the test correctly but returns the opposite of the correct value. The branches of the ternary operator should be in the same order as in the <code>if (cond) {} else {}</code> statement.  It should read:</p>\n\n<pre><code>int ft_is_alpha(char *str, int i) {\n    return (((str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z') || (str[i] &gt;= 'A' &amp;&amp; str[i] &lt;= 'Z')) ? 1 : 0);\n}\n</code></pre>\n\n<p>Since the condition already evaluates to a boolean, you can simplify the code by removing the unneeded ternary operator and some parentheses:</p>\n\n<pre><code>int ft_is_alpha(const char *str, int i) {\n    return (str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z') || (str[i] &gt;= 'A' &amp;&amp; str[i] &lt;= 'Z');\n}\n</code></pre>\n\n<p>Removing the last sets of parentheses can be done, but with less readability.</p>\n\n<p>Note that <code>str</code> should be declared <code>const char *</code> as the string is not modified by the function.  Also remove the parentheses in <code>return (1);</code>, they are not needed and considered bad style.</p>\n\n<p>Furthermore, why not pass <code>str[i]</code> instead of <code>str</code> and <code>i</code> separately? This change of API would make the code much easier to read, faster to execute and safer to use.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5017507"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30898142, "answer_count": 1, "score": 1, "last_activity_date": 1434561784, "creation_date": 1434560813, "last_edit_date": 1434561025, "question_id": 30898012, "link": "https://stackoverflow.com/questions/30898012/c-ternary-operator", "title": "C - Ternary operator", "body": "<p>Why when I'm doing this:</p>\n\n<pre><code>int     ft_is_alpha(char *str, int i)\n{\n    return (((str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z') || (str[i] &gt;= 'A' &amp;&amp; str[i] &lt;= 'Z')) ? 0 : 1);\n}\n</code></pre>\n\n<p>It crashing but, when I'm doing this:</p>\n\n<pre><code>int     ft_is_alpha(char *str, int i)\n{\n    if ((str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z') || (str[i] &gt;= 'A' &amp;&amp; str[i] &lt;= 'Z'))\n    {\n        return (1);\n    }\n\n    return (0);\n}\n</code></pre>\n\n<p>It doesn't crashing.. <br />\nI call the function like this</p>\n\n<pre><code>for (i = 0; str[i] != '\\0'; ++i)\n    {\n        if (ft_is_equal_to(str, i))\n        {\n            ++count;\n            int     j;\n\n            j = i - 1;\n            while (str[++j] != '\\0' &amp;&amp; ft_is_alpha(str, j))\n            {\n                ++length;\n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4895784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd20c86ef28d3e64253f1f72ef732d2?s=128&d=identicon&r=PG&f=1", "display_name": "mysql lover", "link": "https://stackoverflow.com/users/4895784/mysql-lover"}, "edited": false, "score": 0, "creation_date": 1434559746, "post_id": 30897668, "comment_id": 49834416, "body": "no i just want to print the values inside the array by the pointer like *pointer(which prints the value)"}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "reply_to_user": {"reputation": 49, "user_id": 4895784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd20c86ef28d3e64253f1f72ef732d2?s=128&d=identicon&r=PG&f=1", "display_name": "mysql lover", "link": "https://stackoverflow.com/users/4895784/mysql-lover"}, "edited": false, "score": 1, "creation_date": 1434559793, "post_id": 30897668, "comment_id": 49834447, "body": "@mysqllover You don&#39;t print values inside of an array by using pointers. Well, I guess you could, but then it would be <code>printf(&quot;%d&quot;, *(bae+i));</code> That&#39;s not what you want, however."}, {"owner": {"reputation": 49, "user_id": 4895784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd20c86ef28d3e64253f1f72ef732d2?s=128&d=identicon&r=PG&f=1", "display_name": "mysql lover", "link": "https://stackoverflow.com/users/4895784/mysql-lover"}, "edited": false, "score": 0, "creation_date": 1434560001, "post_id": 30897668, "comment_id": 49834598, "body": "that was exactly i wanted"}], "tags": [], "owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "is_accepted": true, "score": 2, "last_activity_date": 1434560128, "last_edit_date": 1434560128, "creation_date": 1434559676, "answer_id": 30897668, "question_id": 30897607, "link": "https://stackoverflow.com/questions/30897607/print-the-memory-location-of-an-array/30897668#30897668", "title": "Print the memory location of an array", "body": "<p><code>bae</code> is an array of int-pointers at the moment. If you want just an array, it should be <code>int bae[] = {10, 12};</code></p>\n\n<p>Then, you can <code>printf(\"%d\", bae[i]);</code></p>\n\n<p>What the warning is saying (\"initialization makes pointer from integer without a cast\") is that you are converting <code>10</code> and <code>12</code> into <code>int*</code> when storing them in <code>bae</code>.</p>\n\n<p><strong>EDIT</strong>: If you <em>really</em> want to use a pointer array, then you could do something like this (though not advisable, and in no way better than my previous answer):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main ()\n{\n    int ten = 10;\n    int twelve = 12;\n    int *bae[] = { &amp;ten, &amp;twelve };\n    int i;\n    for(i=0;i&lt;2;i++) {\n        printf(\"%d\",*bae[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This would now print <code>10</code> and <code>12</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "is_accepted": false, "score": 2, "last_activity_date": 1434559699, "creation_date": 1434559699, "answer_id": 30897676, "question_id": 30897607, "link": "https://stackoverflow.com/questions/30897607/print-the-memory-location-of-an-array/30897676#30897676", "title": "Print the memory location of an array", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\n    int bae[] = {10,12};\n    int i;\n    for(i=0; i&lt;2; i++) {\n        printf(\"%d\\n\", bae[i]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>produces the output:</p>\n\n<pre><code>10\n12\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 4675426, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6a40956551f38afd8a2c712b4780d73a?s=128&d=identicon&r=PG", "display_name": "Karthick", "link": "https://stackoverflow.com/users/4675426/karthick"}, "is_accepted": false, "score": 0, "last_activity_date": 1434618368, "creation_date": 1434618368, "answer_id": 30911018, "question_id": 30897607, "link": "https://stackoverflow.com/questions/30897607/print-the-memory-location-of-an-array/30911018#30911018", "title": "Print the memory location of an array", "body": "<pre><code>int *bae[] = {10,12};\n</code></pre>\n\n<p>It means bae is an array of integer pointers.</p>\n\n<pre><code>printf(\"%d\",*bae[i]);\n</code></pre>\n\n<p>The above statement is equal to *(bae + i). so it will try to access the value at the address 10 and 11 which leads to undefined behavior.</p>\n"}], "owner": {"reputation": 49, "user_id": 4895784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbd20c86ef28d3e64253f1f72ef732d2?s=128&d=identicon&r=PG&f=1", "display_name": "mysql lover", "link": "https://stackoverflow.com/users/4895784/mysql-lover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 30897668, "answer_count": 3, "score": 0, "last_activity_date": 1435159592, "creation_date": 1434559495, "last_edit_date": 1435159592, "question_id": 30897607, "link": "https://stackoverflow.com/questions/30897607/print-the-memory-location-of-an-array", "title": "Print the memory location of an array", "body": "<p>Im new to the <strong>C</strong> programming language. I have a pointer array with 2 elements. I want to print the values inside the array. The code I have written</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main ()\n{\nint *bae[] = {10,12};\nint i;\nfor(i=0;i&lt;2;i++) {\nprintf(\"%d\",*bae[i]);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>When I run this code it gave me warning like:</p>\n\n<pre><code>warning: (near initialization for 'bae[0]') [enabled by default]\nwarning: initialization makes pointer from integer without a cast [enabled by default]\nwarning: (near initialization for 'bae[1]') [enabled by default]\n</code></pre>\n\n<p>Hope you could help me in finding the solution</p>\n"}, {"tags": ["c", "mergesort"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1434559272, "post_id": 30897468, "comment_id": 49834111, "body": "I don&#39;t understand. How would it sort <code>(4,3)</code> for example? Or <code>(1,2,3)</code>? It has to compare something to something."}, {"owner": {"reputation": 21, "user_id": 5016653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8556fbd81c23c41a14a1b5f28ef79bc2?s=128&d=identicon&r=PG&f=1", "display_name": "EETech", "link": "https://stackoverflow.com/users/5016653/eetech"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1434559585, "post_id": 30897468, "comment_id": 49834316, "body": "You can assume that the numbers come in pairs and the comparison is on the sum of the squares of the pairs. My apologies for not being clearer."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1434559908, "post_id": 30897468, "comment_id": 49834532, "body": "So you want to sort pairs. The most generic way would be to write a general &quot;sort&quot; function(pick your algorithm) receiving the the generic data array and a pointer to comparing function. The generic data should be represented as <i>array of pairs</i>, and the compare function should take <i>pairs</i>. So probably the best way is to define a type <code>pair</code>.  Take a look at the generic <a href=\"http://linux.die.net/man/3/qsort\" rel=\"nofollow noreferrer\"><code>qsort</code></a> and adopt / use it&#39;s idea."}, {"owner": {"reputation": 21, "user_id": 5016653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8556fbd81c23c41a14a1b5f28ef79bc2?s=128&d=identicon&r=PG&f=1", "display_name": "EETech", "link": "https://stackoverflow.com/users/5016653/eetech"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1434560211, "post_id": 30897468, "comment_id": 49834734, "body": "Ok, I&#39;ll give a shot. Thanks for the help @EugeneSh."}], "owner": {"reputation": 21, "user_id": 5016653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8556fbd81c23c41a14a1b5f28ef79bc2?s=128&d=identicon&r=PG&f=1", "display_name": "EETech", "link": "https://stackoverflow.com/users/5016653/eetech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434561505, "creation_date": 1434559091, "last_edit_date": 1434561505, "question_id": 30897468, "link": "https://stackoverflow.com/questions/30897468/manipulating-merge-sort", "title": "Manipulating Merge-Sort", "body": "<p>How would I go about manipulating <code>mergesort</code>so that it sorts each pair of numbers by the sum of their square? </p>\n\n<p>For example my <code>array</code> has the numbers {2,7,1,4}. Being that <code>2^2 + 7^2 &gt; 1^2 + 4^2</code> after running <code>mergesort</code> on the array I want {1,4,2,7}.</p>\n\n<p>The question I was given was how to sort coordinates with regards to their distance from axis origins in O(nlogn) time.</p>\n\n<pre><code>void merge(int arr[], int left, int middle, int right)\n{\n    int i, j, k;\n    int n1 = middle - left + 1;\n    int n2 =  right - middle;\n\n    int L[n1], R[n2];\n\n    for(i = 0; i &lt; n1; i++)\n        L[i] = arr[left + i];\n\n    for(j = 0; j &lt; n2; j++)\n        R[j] = arr[middle + 1+ j];\n\n    i = 0;\n    j = 0;\n    k = left;\n    while (i &lt; n1 &amp;&amp; j &lt; n2){\n        if (L[i] &lt;= R[j]){\n            arr[k] = L[i];\n            i++;\n        } else {\n            arr[k] = R[j];\n            j++;\n        }\n        k++;\n    }\n\n    while (i &lt; n1) {\n        arr[k] = L[i];\n        i++;\n        k++;\n    }\n\n    while (j &lt; n2) {\n        arr[k] = R[j];\n        j++;\n        k++;\n    }\n}\n\nvoid mergeSort(int arr[], int left, int right)\n{\n    if (left &lt; right){\n        int middle = left+(right-left)/2; \n        mergeSort(arr, left, middle);\n        mergeSort(arr, middle+1, right);\n        merge(arr, left, middle, right);\n    }\n}\n</code></pre>\n\n<p>Is this a good strategy? Or should I be using <code>quicksort</code>?</p>\n"}, {"tags": ["c", "process", "synchronization", "semaphore", "shared-memory"], "comments": [{"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 1, "creation_date": 1434559146, "post_id": 30897387, "comment_id": 49834023, "body": "Have you managed to compile it at least? <code>sem_t *sem;</code> should clearly be a global."}, {"owner": {"reputation": 11, "user_id": 5020428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96b4d7460859472840f91679f44fbad?s=128&d=identicon&r=PG&f=1", "display_name": "MacHeath", "link": "https://stackoverflow.com/users/5020428/macheath"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 1, "creation_date": 1434559557, "post_id": 30897387, "comment_id": 49834302, "body": "Yeah compiles fine. And had it global before. just changed this couple of minutes ago. Wasn&#39;t working when sem-pointer was global either. More than one train enters the track..."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1434559595, "post_id": 30897387, "comment_id": 49834327, "body": "So put the actual code here."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1434559902, "post_id": 30897387, "comment_id": 49834525, "body": "Why do you link against <code>lpthread</code> (in the wrong order though...) when you use <code>fork()</code>?"}, {"owner": {"reputation": 11, "user_id": 5020428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96b4d7460859472840f91679f44fbad?s=128&d=identicon&r=PG&f=1", "display_name": "MacHeath", "link": "https://stackoverflow.com/users/5020428/macheath"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1434559981, "post_id": 30897387, "comment_id": 49834581, "body": "@EugeneSh. Edited..."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434560113, "post_id": 30897387, "comment_id": 49834667, "body": "It doesn&#39;t compile without <code>-lrt</code> on my machine: <code>gcc -Wall -Werror -std=gnu99 -lrt app.c -o test</code>"}, {"owner": {"reputation": 11, "user_id": 5020428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96b4d7460859472840f91679f44fbad?s=128&d=identicon&r=PG&f=1", "display_name": "MacHeath", "link": "https://stackoverflow.com/users/5020428/macheath"}, "edited": false, "score": 0, "creation_date": 1434560192, "post_id": 30897387, "comment_id": 49834725, "body": "-lpthread on OSX -lrt I&#39;d use on Linux. Am I right? But EOF is right. don&#39;t need this here. Semaphores still dont work :D"}, {"owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "edited": false, "score": 0, "creation_date": 1434561405, "post_id": 30897387, "comment_id": 49835446, "body": "The man page for shm_open(3) says &quot;name  of  the form  /somename&quot; and &quot;shm&quot; is not a name on that form, does it work if you pass &quot;/shm&quot; instead?"}, {"owner": {"reputation": 11, "user_id": 5020428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96b4d7460859472840f91679f44fbad?s=128&d=identicon&r=PG&f=1", "display_name": "MacHeath", "link": "https://stackoverflow.com/users/5020428/macheath"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434562866, "post_id": 30897387, "comment_id": 49836323, "body": "@EugeniuRosca To your first issue: what&#39;s the difference between an int-array and an int-pointer treating-wise? :D I believe there is none, is there? Issue 2: I don&#39;t nullify the pointer, I&#39;m saving a &quot;zero&quot; at the adress the pointer points to, meaning that there&#39;s no train on that track."}, {"owner": {"reputation": 11, "user_id": 5020428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96b4d7460859472840f91679f44fbad?s=128&d=identicon&r=PG&f=1", "display_name": "MacHeath", "link": "https://stackoverflow.com/users/5020428/macheath"}, "reply_to_user": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "edited": false, "score": 0, "creation_date": 1434562952, "post_id": 30897387, "comment_id": 49836391, "body": "@Vatine good idea! not changing a thing though :D"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5020428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96b4d7460859472840f91679f44fbad?s=128&d=identicon&r=PG&f=1", "display_name": "MacHeath", "link": "https://stackoverflow.com/users/5020428/macheath"}, "is_accepted": false, "score": 0, "last_activity_date": 1434804406, "last_edit_date": 1434804406, "creation_date": 1434800262, "answer_id": 30953536, "question_id": 30897387, "link": "https://stackoverflow.com/questions/30897387/named-semaphore-just-not-working/30953536#30953536", "title": "Named Semaphore just not working", "body": "<p>Link with -pthread!!!! man page of all used semaphore functions tells us >.&lt;</p>\n\n<p>Thanks for everyones help!!</p>\n\n<p>And for everyone who's interested, this is my code now. I improved a lot of things I didn't have time for in the exam. This runs perfectly and in my \"beginners-eyes\" this is not improvable by using the given functions (semaphores, shared mem...). If it is, I'd be grateful for tips &amp; tricks ;)</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;errno.h&gt;\n\nint *shm_ptr;\n\nint *initShm (off_t size) {\n\n    int shm_fd = 0;\n\n    if((shm_fd = shm_open(\"/shm\", O_CREAT | O_RDWR, 0777)) == -1) {\n        perror(\"Error creating shared memory segment!\");\n    }\n\n    if ((ftruncate(shm_fd, size)) == -1) {\n        perror(\"Error sizing shared memory segment!\");\n    }\n\n    return (int*) mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n}\n\nvoid initSem(sem_t **plats) {\n\n    if((plats[0] = sem_open(\"/one\",O_CREAT,0644,1)) == SEM_FAILED) {\n        perror(\"client sem_open\");\n    }\n    if((plats[1] = sem_open(\"/two\",O_CREAT,0644,1)) == SEM_FAILED) {\n        perror(\"client sem_open\");\n    }\n    if((plats[2] = sem_open(\"/three\",O_CREAT,0644,1)) == SEM_FAILED) {\n        perror(\"client sem_open\");\n    }\n}\n\n\nint trainAboutToArrive(int arrive, int stay, int train, sem_t **plats){\n\n    srand(getpid());\n    int platform = rand()%3;\n\n    sleep(arrive);\n\n    while (3) {\n        sem_wait(plats[platform]);\n        if(shm_ptr[platform]==0){\n            shm_ptr[platform]=1;\n            break;\n        }\n        sem_post(plats[platform]);\n\n        platform = rand() % 3;\n    }\n\n    printf(\"Train %d enters platform %d\\n\", train, 1+platform);\n\n    sleep(stay);\n\n    shm_ptr[platform]=0;\n\n    printf(\"Train %d leaves platform %d\\n\", train, 1+platform);\n\n    sem_post(plats[platform]);\n    sem_close(plats[platform]);\n\n    return EXIT_SUCCESS;\n\n}\n\nint main(int argc, char const *argv[]) {\n\n    shm_unlink(\"/shm\");\n    sem_unlink(\"/one\");\n    sem_unlink(\"/two\");\n    sem_unlink(\"/three\");\n\n    int i=0, tracks=3, trains=7, status;\n    int arrival[]={0,0,3,2,5,4,2};\n    int stay[]={2,3,7,2,1,4,3};\n    sem_t *plats[3];\n\n    off_t size = sizeof(int)*tracks;\n    shm_ptr = initShm(size);\n    initSem(plats);\n\n    for (i=0; i &lt; tracks; i++) {\n        shm_ptr[i]= 0;\n    }\n\n    pid_t pids[trains];\n\n    for (i = 0; i &lt; trains; i++) {\n        pids[i] = fork();\n        if(pids[i] == -1) {\n            perror(\"Error creating train-process!!\");\n        } else if (pids[i] == 0) {\n            trainAboutToArrive(arrival[i], stay[i], 1+i, plats);\n            exit(0);\n        }else if (pids[i] &gt; 0) {\n\n        }\n    }\n\n    for(i=0; i &lt; trains; i++){\n        waitpid(pids[i], &amp;status, 0);\n    }\n\n    shm_unlink(\"/shm\");\n    sem_unlink(\"/one\");\n    sem_unlink(\"/two\");\n    sem_unlink(\"/three\");\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5020428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96b4d7460859472840f91679f44fbad?s=128&d=identicon&r=PG&f=1", "display_name": "MacHeath", "link": "https://stackoverflow.com/users/5020428/macheath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434804406, "creation_date": 1434558839, "last_edit_date": 1434563067, "question_id": 30897387, "link": "https://stackoverflow.com/questions/30897387/named-semaphore-just-not-working", "title": "Named Semaphore just not working", "body": "<p>we had an exam today and we had  a task to implement a \"train-handler\".</p>\n\n<p>There are 7 trains represented by one process each. Each train arrives after a couple of seconds, checks if 1 of our 3 traintracks is available. If not, wait...\nIf track is free, enter it and lock it.\nStay for at the train station for a few seconds, leave and unlock it.</p>\n\n<p>Me and a few friends are trying to make our program run but we just can't get it done. It seems to be the problem that our shared memory is not synchronized properly (semaphore). Using a mac, so I have to use named semaphores. </p>\n\n<p>compiled with: \"gcc -Wall -Werror -std=gnu99 -lpthread process_trains.c -o test\"</p>\n\n<p>CODE: </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;errno.h&gt;\n\n\nsem_t *sem;\nint *shm_ptr;\n\n\n\nint *initShm (int size) {\n    int shm_fd = 0;\n\n    if((shm_fd = shm_open(\"/shm\", O_CREAT | O_RDWR, 0777)) == -1) {\n        perror(\"Error creating shared memory segment!\");\n    }\n\n    if ((ftruncate(shm_fd, size)) == -1) {\n        perror(\"Error sizing shared memory segment!\");\n    }\n\n    return (int*) mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);\n}\n\n\nint trainAboutToArrive(int arrive, int stay, int Y){\n\n    int Z=0;\n\n    //Zug kommt in \"arrive\" Sekunden an\n    sleep(arrive);\n\n    while (shm_ptr[Z]!=0) {\n        Z++;\n        if(Z==3){\n            Z=0;\n        }\n    }\n\n    sem_wait(sem);\n    shm_ptr[Z]=1;\n    sem_post(sem);\n\n    printf(\"Zug %d ist auf Gleis %d eingefahren\\n\", Y, 1+Z);\n\n    //Zug hat einen Aufenthalt von \"stay\" Sekunden \n    sleep(stay);\n\n    sem_wait(sem);\n    shm_ptr[Z]=0;\n    sem_post(sem);\n\n    sem_close(sem);\n\n    printf(\"Zug %d verl\u00e4sst Gleis %d\\n\", Y, 1+Z);\n\n    return EXIT_SUCCESS;\n}\n\nint main(int argc, char const *argv[]) {\n\n    shm_unlink(\"shm\");\n\n    int i=0, tracks=3, trains=7, status;\n    int arrival[]={0,0,3,2,5,4,2};\n    int stay[]={2,3,7,2,1,4,3};\n\n    off_t size = sizeof(int)*tracks;\n    shm_ptr = initShm(size);\n\n    if((sem = sem_open(\"/semap\",O_CREAT,0644,1)) == SEM_FAILED) {\n        perror(\"client sem_open\");\n    }\n\n    for (i=0; i &lt; tracks; i++) {\n        shm_ptr[i]= 0;\n    }\n\n    pid_t pids[trains];\n\n    for (i = 0; i &lt; trains; i++) {\n        pids[i] = fork();\n        if(pids[i] == -1) {\n            perror(\"Error creating train-process!!\");\n        } else if (pids[i] == 0) {\n            trainAboutToArrive(arrival[i], stay[i], 1+i);\n            exit(0);\n        }else if (pids[i] &gt; 0) {\n\n        }\n    }\n\n    for(i=0; i &lt; trains; i++){\n        waitpid(pids[i], &amp;status, 0);\n    }\n    shm_unlink(\"shm\");\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "formatting", "output", "multiplication", "spaces"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434558897, "post_id": 30897318, "comment_id": 49833845, "body": "Here is a tutorial on using <b><i><a href=\"http://www.codingunit.com/printf-format-specifiers-format-conversions-and-formatted-output\" rel=\"nofollow noreferrer\">printf format specifiers</a></i></b> in C.   (not the down voter)      In particular, note the examples such as <code>printf(&quot;%03d\\n&quot;,b);</code>  (provides leading space in front of a numeric value."}, {"owner": {"reputation": 15, "user_id": 4722341, "user_type": "registered", "profile_image": "https://graph.facebook.com/704879692955454/picture?type=large", "display_name": "Vishal_ranjan", "link": "https://stackoverflow.com/users/4722341/vishal-ranjan"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434559215, "post_id": 30897318, "comment_id": 49834072, "body": "Thanks a lot  @ryyker .Was looking for something of this sort,but wasn&#39;t able to find it.But how to it when inputs vary?(i.e. when no of spaces are variable in each input)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434563343, "post_id": 30897318, "comment_id": 49836632, "body": "How are the numbers input?  via user input using scanf()?, read from a file?  if as a string, you can use strlen() to know length that will eventually be converted to number.  Or, if working with numeric values, you can test for ranges: <code>if(x&lt;10) else if((x&gt;=10)&amp;&amp;(x&lt;100) else if...</code>"}, {"owner": {"reputation": 15, "user_id": 4722341, "user_type": "registered", "profile_image": "https://graph.facebook.com/704879692955454/picture?type=large", "display_name": "Vishal_ranjan", "link": "https://stackoverflow.com/users/4722341/vishal-ranjan"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434564009, "post_id": 30897318, "comment_id": 49836997, "body": "@ryyker thanks for helping again. numbers are taken from the user using scanf()."}, {"owner": {"reputation": 15, "user_id": 4722341, "user_type": "registered", "profile_image": "https://graph.facebook.com/704879692955454/picture?type=large", "display_name": "Vishal_ranjan", "link": "https://stackoverflow.com/users/4722341/vishal-ranjan"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434566290, "post_id": 30897318, "comment_id": 49838339, "body": "Thanks @ryyker .Please put the example,It will be of great help."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434566332, "post_id": 30897318, "comment_id": 49838372, "body": "See my example below to see how you can make constant length printouts.  Its simple, but you can extrapolate beyond this..."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4722341, "user_type": "registered", "profile_image": "https://graph.facebook.com/704879692955454/picture?type=large", "display_name": "Vishal_ranjan", "link": "https://stackoverflow.com/users/4722341/vishal-ranjan"}, "edited": false, "score": 0, "creation_date": 1434567058, "post_id": 30899745, "comment_id": 49838841, "body": "THANKS @ryyker THANK U VERY MUCH.THIS REALLY HELPED.I think I can do it now."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 0, "last_activity_date": 1434566343, "creation_date": 1434566343, "answer_id": 30899745, "question_id": 30897318, "link": "https://stackoverflow.com/questions/30897318/need-help-in-writing-this-multiplication-code/30899745#30899745", "title": "Need help in writing this multiplication code", "body": "<p>Here is a simple example of how to make constant length printouts using printf: </p>\n\n<pre><code>int main(void)\n{\n\n    char a[6][7]={\"1\",\"22\",\"333\",\"4444\",\"55555\",\"666666\"};\n    int i;\n    int value;\n\n    for(i=0;i&lt;sizeof(a)/sizeof(a[0]);i++)\n    {\n        value = atoi(a[i]);\n        printf(\"%07d\\n\", value); //with leading zeros\n        printf(\"% 7d\\n\", value); //with spaces\n    }\n\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>Here is the output:<br>\n<img src=\"https://i.stack.imgur.com/lYJhu.jpg\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 15, "user_id": 4722341, "user_type": "registered", "profile_image": "https://graph.facebook.com/704879692955454/picture?type=large", "display_name": "Vishal_ranjan", "link": "https://stackoverflow.com/users/4722341/vishal-ranjan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 30899745, "answer_count": 1, "score": 0, "last_activity_date": 1434566343, "creation_date": 1434558642, "question_id": 30897318, "link": "https://stackoverflow.com/questions/30897318/need-help-in-writing-this-multiplication-code", "title": "Need help in writing this multiplication code", "body": "<p>I need to show process of multiplication in output.for ex:-\ninputs are two numbers(say 325 and 4405)\nthe output would be:-</p>\n\n<pre><code>    325\n  *4405\n  -----\n   1625\n     0\n 1300\n1300\n-------\n1431625\n</code></pre>\n\n<p>NOTE:-number of spaces should be minimum.</p>\n\n<p>I don't need the exact code.\nJust tell me which property or way I should be using to get the SPACE right in each line.or how should i proceed to get output.</p>\n"}, {"tags": ["c", "go", "linker", "ld", "gccgo"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1434557757, "post_id": 30896892, "comment_id": 49833057, "body": "Works for me on version <code>a2aaede</code> and Ubuntu 14.04. Have you tried to update to a newer dev version?"}, {"owner": {"reputation": 13985, "user_id": 187878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c355dd26a5f80e1605d2ff1ecb6e719e?s=128&d=identicon&r=PG", "display_name": "shazow", "link": "https://stackoverflow.com/users/187878/shazow"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1434558208, "post_id": 30896892, "comment_id": 49833375, "body": "Pulled <code>a2aaede</code>, same issue for me though. Might be related to OSX somehow, though gcc-5 fails in a similar way."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1434558875, "post_id": 30896892, "comment_id": 49833823, "body": "Might be worth it to <a href=\"https://github.com/golang/go/issues/new\" rel=\"nofollow noreferrer\">open an issue</a> about this then."}, {"owner": {"reputation": 13985, "user_id": 187878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c355dd26a5f80e1605d2ff1ecb6e719e?s=128&d=identicon&r=PG", "display_name": "shazow", "link": "https://stackoverflow.com/users/187878/shazow"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1434560564, "post_id": 30896892, "comment_id": 49834948, "body": "@Ainar-G Good point. I&#39;ll ask in a couple more places and open an issue if I can&#39;t figure it out. Thanks. :)"}, {"owner": {"reputation": 13985, "user_id": 187878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c355dd26a5f80e1605d2ff1ecb6e719e?s=128&d=identicon&r=PG", "display_name": "shazow", "link": "https://stackoverflow.com/users/187878/shazow"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1434562144, "post_id": 30896892, "comment_id": 49835875, "body": "Opened <a href=\"https://github.com/golang/go/issues/11258\" rel=\"nofollow noreferrer\">github.com/golang/go/issues/11258</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13985, "user_id": 187878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c355dd26a5f80e1605d2ff1ecb6e719e?s=128&d=identicon&r=PG", "display_name": "shazow", "link": "https://stackoverflow.com/users/187878/shazow"}, "is_accepted": true, "score": 8, "last_activity_date": 1434643874, "last_edit_date": 1434643874, "creation_date": 1434566562, "answer_id": 30899819, "question_id": 30896892, "link": "https://stackoverflow.com/questions/30896892/using-go-1-5-buildmode-c-archive-with-net-http-server-linked-from-c/30899819#30899819", "title": "Using Go 1.5 buildmode=c-archive with net/http.Server linked from C", "body": "<p>Turns out this problem exists on OSX/darwin. To work around it, we need to add <code>-framework CoreFoundation -framework Security</code> options to the gcc linking command. The final command looks like this:</p>\n\n<pre><code>$ gcc -o gohttp-c examples/c/main.c gohttplib.a \\\n      -framework CoreFoundation -framework Security -lpthread\n</code></pre>\n\n<p>This requirement might be removed in a future version of Go. More discussion on this issue here: <a href=\"https://github.com/golang/go/issues/11258\">https://github.com/golang/go/issues/11258</a></p>\n"}], "owner": {"reputation": 13985, "user_id": 187878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c355dd26a5f80e1605d2ff1ecb6e719e?s=128&d=identicon&r=PG", "display_name": "shazow", "link": "https://stackoverflow.com/users/187878/shazow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1221, "favorite_count": 3, "accepted_answer_id": 30899819, "answer_count": 1, "score": 7, "last_activity_date": 1434643874, "creation_date": 1434557351, "last_edit_date": 1434560298, "question_id": 30896892, "link": "https://stackoverflow.com/questions/30896892/using-go-1-5-buildmode-c-archive-with-net-http-server-linked-from-c", "title": "Using Go 1.5 buildmode=c-archive with net/http.Server linked from C", "body": "<p>The upcoming release of Go 1.5 comes with <a href=\"https://docs.google.com/document/d/1nr-TQHw_er6GOQRsF6T43GGhFDelrAP0NqSS_00RgZQ/view?pli=1\">new buildmodes</a> which allow for exporting Go symbols to be linked and called from C code. I've been playing around with it and got basic \"Hello world\" examples working, but now I'm trying to link a Go library which starts a <code>net/http.Server</code> and it's failing. The code looks like this (<a href=\"https://github.com/shazow/gohttplib/tree/stackoverflow\">it's also available here</a>):</p>\n\n<p><strong>gohttplib.go:</strong></p>\n\n<pre><code>package main\n\nimport \"C\"\nimport \"net/http\"\n\n//export ListenAndServe\nfunc ListenAndServe(caddr *C.char) {\n    addr := C.GoString(caddr)\n    http.ListenAndServe(addr, nil)\n}\n\nfunc main() {}\n</code></pre>\n\n<p><strong>examples/c/main.c:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"../../gohttplib.h\"\n\nint main()\n{\n    ListenAndServe(\":8000\");\n    return 0;\n}\n</code></pre>\n\n<p>Producing the statically-linked object and headers works fine:</p>\n\n<pre><code>$ go build -buildmode=c-archive\n</code></pre>\n\n<p>But compiling against it is failing:</p>\n\n<pre><code>$ gcc -o gohttp-c examples/c/main.c gohttplib.a -lpthread\nUndefined symbols for architecture x86_64:\n  \"_CFArrayGetCount\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n  \"_CFArrayGetValueAtIndex\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n  \"_CFDataAppendBytes\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n  \"_CFDataCreateMutable\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n  \"_CFDataGetBytePtr\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n      __cgo_6dbb806e9976_Cfunc_CFDataGetBytePtr in gohttplib.a(000003.o)\n     (maybe you meant: __cgo_6dbb806e9976_Cfunc_CFDataGetBytePtr)\n  \"_CFDataGetLength\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n      __cgo_6dbb806e9976_Cfunc_CFDataGetLength in gohttplib.a(000003.o)\n     (maybe you meant: __cgo_6dbb806e9976_Cfunc_CFDataGetLength)\n  \"_CFRelease\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n      __cgo_6dbb806e9976_Cfunc_CFRelease in gohttplib.a(000003.o)\n     (maybe you meant: __cgo_6dbb806e9976_Cfunc_CFRelease)\n  \"_SecKeychainItemExport\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n  \"_SecTrustCopyAnchorCertificates\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\n  \"_kCFAllocatorDefault\", referenced from:\n      _FetchPEMRoots in gohttplib.a(000003.o)\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [example-c] Error 1\n</code></pre>\n\n<p>This is using a recent version from the Go github repository (38e3427) on OS X 10.9.5. I understand that Go 1.5 is not released yet and that there are no guarantees about it working, but I'm doing this for educational purposes and I suspect I'm missing something.</p>\n\n<p>Related versions:</p>\n\n<pre><code>$ ld -v\n@(#)PROGRAM:ld  PROJECT:ld64-241.9\nconfigured to support archs: armv6 armv7 armv7s arm64 i386 x86_64 x86_64h armv6m armv7m armv7em\nLTO support using: LLVM version 3.5svn\n$ gcc --version\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\nTarget: x86_64-apple-darwin13.4.0\nThread model: posix\n</code></pre>\n"}, {"tags": ["c", "linux", "ffmpeg"], "answers": [{"tags": [], "owner": {"reputation": 528, "user_id": 3781105, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3ea5a17e1f82fc0121b74cd7d22321af?s=128&d=identicon&r=PG", "display_name": "Lectem", "link": "https://stackoverflow.com/users/3781105/lectem"}, "is_accepted": true, "score": 0, "last_activity_date": 1434619680, "creation_date": 1434619680, "answer_id": 30911528, "question_id": 30896695, "link": "https://stackoverflow.com/questions/30896695/linux-mint-lmde-ffmpeg-h264/30911528#30911528", "title": "Linux Mint LMDE ffmpeg h264", "body": "<p>I simply happened to have forgotten to call</p>\n\n<pre><code>avcodec_register_all();\n</code></pre>\n\n<p>So of course libavcodec wouldn't find any codec available.</p>\n"}], "owner": {"reputation": 528, "user_id": 3781105, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3ea5a17e1f82fc0121b74cd7d22321af?s=128&d=identicon&r=PG", "display_name": "Lectem", "link": "https://stackoverflow.com/users/3781105/lectem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 30911528, "answer_count": 1, "score": 0, "last_activity_date": 1434619680, "creation_date": 1434556820, "question_id": 30896695, "link": "https://stackoverflow.com/questions/30896695/linux-mint-lmde-ffmpeg-h264", "title": "Linux Mint LMDE ffmpeg h264", "body": "<p>I'm trying to decode H264 using libavcodec on Linux Mint LMDE.\nI installed ffmpeg, libavcodec-dev and libx264-dev but the H264 codec is still not recognized by the library in my own program.</p>\n\n<p>However, ffplay works fine on a h264 stream.</p>\n\n<p>Here is what I do :</p>\n\n<pre><code>avcodec_find_decoder(AV_CODEC_ID_H264);\n</code></pre>\n\n<p>and it returns NULL.</p>\n\n<p>Why doesn't it find the codec ? What should I do to make it work ?</p>\n\n<p>I'd rather not recompile libavcodec because it would mean I would have to link it statically later on in my program.</p>\n\n<p>Here is the version information of ffmpeg :</p>\n\n<blockquote>\n  <p>ffmpeg -version ffmpeg version 2.1.1 built on Nov 20 2013 08:04:32\n  with gcc 4.8 (Debian 4.8.2-5) configuration: --prefix=/usr\n  --extra-cflags='-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security ' --extra-ldflags='-Wl,-z,relro' --cc='ccache cc' --enable-shared --enable-libmp3lame --enable-gpl --enable-nonfree --enable-libvorbis --enable-pthreads --enable-libfaac --enable-libxvid --enable-postproc --enable-x11grab --enable-libgsm --enable-libtheora --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-libspeex --enable-nonfree --disable-stripping --enable-libvpx --enable-libschroedinger --disable-encoder=libschroedinger --enable-version3 --enable-libopenjpeg --enable-librtmp --enable-avfilter --enable-libfreetype --enable-libvo-aacenc --disable-decoder=amrnb --enable-libvo-amrwbenc --enable-libaacplus --libdir=/usr/lib/x86_64-linux-gnu --disable-vda --enable-libbluray --enable-libcdio --enable-gnutls --enable-frei0r --enable-openssl --enable-libass --enable-libopus --enable-fontconfig --enable-libpulse --disable-mips32r2 --disable-mipsdspr1 --disable-mipsdspr2 --enable-libvidstab --enable-libzvbi --enable-libiec61883 --enable-libfdk-aac --enable-vaapi --enable-libdc1394 --disable-altivec --disable-armv5te --disable-armv6 --disable-vis --shlibdir=/usr/lib/x86_64-linux-gnu libavutil      52. 48.101 / 52. 48.101 libavcodec     55. 39.101 / 55. 39.101 libavformat    55. 19.104 / 55. 19.104 libavdevice    55.  5.100 / 55.  5.100 libavfilter     3. 90.100 /  3. 90.100 libswscale      2.  5.101 /  2.  5.101 libswresample   0. 17.104 /  0. 17.104 libpostproc    52.  3.100 / 52.\n  3.100</p>\n</blockquote>\n"}, {"tags": ["c", "powerpc"], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 7, "last_activity_date": 1434558825, "last_edit_date": 1434558825, "creation_date": 1434558205, "answer_id": 30897172, "question_id": 30896622, "link": "https://stackoverflow.com/questions/30896622/understanding-powerpc-rlwinm-instruction/30897172#30897172", "title": "Understanding PowerPC rlwinm instruction", "body": "<p><code>rlwinm</code> stands for \"Rotate Left Word Immediate then aNd with Mask, and it's correct usage is </p>\n\n<pre><code>rlwinm  RA, RS, SH, MB, ME\n</code></pre>\n\n<p>As per the <a href=\"https://www-01.ibm.com/support/knowledgecenter/ssw_aix_71/com.ibm.aix.alangref/idalangref_rlwinm_rlinm_rtlwrdimm_instrs.htm\" rel=\"noreferrer\">description page</a>:</p>\n\n<blockquote>\n  <ul>\n  <li>RA  Specifies target general-purpose register where result of operation is stored.</li>\n  <li>RS  Specifies source general-purpose register for operation.</li>\n  <li>SH  Specifies shift value for operation.</li>\n  <li>MB  Specifies begin value of mask for operation.</li>\n  <li>ME  Specifies end value of mask for operation.</li>\n  <li>BM  Specifies value of 32-bit mask.</li>\n  </ul>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <ul>\n  <li>If the MB value is less than the ME value + 1, then the mask bits\n  between and including the starting point and the end point are set to\n  ones. All other bits are set to zeros. </li>\n  <li>If the MB value is the same as\n  the ME value + 1, then all 32 mask bits are set to ones. </li>\n  <li>If the MB value is greater than the ME value + 1, then all of the mask bits\n  between and including the ME value +1 and the MB value -1 are set to\n  zeros. All other bits are set to ones.</li>\n  </ul>\n</blockquote>\n\n<p>So in your example the source and target are the same. Shift amount is <code>0</code>, so no shift. And <code>MB=ME=1</code>, so the first case applies, such that the mask becomes all zeros with bit number 1 as <code>1</code>, while numbering from <code>MSB=0</code>: <code>0x40000000</code>.</p>\n\n<p>In C we can write it as simple as</p>\n\n<pre><code>a &amp;= 0x40000000;\n</code></pre>\n\n<p>assuming <code>a</code> is 32-bit variable.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1510076979, "post_id": 43678153, "comment_id": 81278364, "body": "Note that PowerPC counts bits from the left, with MSB = bit 0.  (Many other ISAs, like x86, count bits from the right)."}], "tags": [], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "is_accepted": false, "score": 2, "last_activity_date": 1493376240, "last_edit_date": 1495540496, "creation_date": 1493375757, "answer_id": 43678153, "question_id": 30896622, "link": "https://stackoverflow.com/questions/30896622/understanding-powerpc-rlwinm-instruction/43678153#43678153", "title": "Understanding PowerPC rlwinm instruction", "body": "<p><code>rlwinm</code> rotates the value of a register left by the specified number, performs an <code>AND</code> and stores the result in a register.</p>\n\n<p>Example: <code>rlwinm r3, r4, 5, 0, 31</code></p>\n\n<p><code>r4</code> is the source register which is rotated by <code>5</code> and before the rotated result is placed in <code>r3</code>, it is also <code>AND</code>ed with a bit mask of only 1s since the interval between <code>0</code> and <code>31</code> is the entire 32-bit value.</p>\n\n<p>Example taken from <a href=\"http://wiibrew.org/wiki/Assembler_Tutorial\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For a <code>C</code> implementation you may want to take a look at <a href=\"https://stackoverflow.com/questions/10134805/bitwise-rotate-left-function\">how to rotate left</a> and <a href=\"https://en.wikipedia.org/wiki/Bitwise_operations_in_C#Bitwise_assignment_operators\" rel=\"nofollow noreferrer\">how to <code>AND</code></a> which should be trivial to build together now. Something like the following should work:</p>\n\n<pre><code>int rotateLeft(int input, int shift) {\n    return (input &lt;&lt; shift) | ((input &gt;&gt; (32 - shift)) &amp; ~(-1 &lt;&lt; shift));\n}\n\nint rlwinm(int input, int shift, int mask) {\n    return rotateLeft(input, shift) &amp; mask;\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3829771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db0353142a7bd481fa65145a1eceef7f?s=128&d=identicon&r=PG&f=1", "display_name": "user3829771", "link": "https://stackoverflow.com/users/3829771/user3829771"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2890, "favorite_count": 2, "answer_count": 2, "score": 6, "last_activity_date": 1493376240, "creation_date": 1434556611, "last_edit_date": 1448856781, "question_id": 30896622, "link": "https://stackoverflow.com/questions/30896622/understanding-powerpc-rlwinm-instruction", "title": "Understanding PowerPC rlwinm instruction", "body": "<p>So I finally convinced myself to try and learn/use PowerPC (PPC).\nEverything is going well and most information was found online.\nHowever, when looking at some examples I came across this:</p>\n\n<pre><code>rlwinm    r3, r3, 0,1,1\n</code></pre>\n\n<p>How would I do this in C?\nI tried doing some research, but couldn't find anything that helped me out.\nThanks in advance!</p>\n"}, {"tags": ["c", "linux", "kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 4, "creation_date": 1434556281, "post_id": 30896489, "comment_id": 49831981, "body": "Because that will only map to <i>one</i> of your list. And you can&#39;t be sure which one."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1434556485, "post_id": 30896489, "comment_id": 49832113, "body": "I&#39;ve mostly seen the standard typedefs <code>uint8_t</code>, <code>uint16_t</code>, et al."}, {"owner": {"user_type": "does_not_exist", "display_name": "user966588"}, "edited": false, "score": 0, "creation_date": 1434556574, "post_id": 30896489, "comment_id": 49832192, "body": "I have linux/types.h include"}], "answers": [{"comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 7, "creation_date": 1434557629, "post_id": 30896945, "comment_id": 49832958, "body": "And <code>u8</code> involves less typing :-)"}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 15, "creation_date": 1434557961, "post_id": 30896945, "comment_id": 49833195, "body": "True... but it gets super annoying when you need to mix &amp; match libraries and everyone tries to define their own known-wdith types so.   You&#39;ll have <code>U8</code>, <code>u8</code>, <code>uint8</code>, <code>BYTE</code>, <code>UINT8</code> and <code>unt8_t</code> all in the same file.  You can even have potential conflicts that ends up generating warnings.  Most commonly with the 32 and 64-bit types which may have multiple valid ways to typedef them on a given platform.   For new code, please, please, please just stick with stdint.h types :)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user966588"}, "edited": false, "score": 0, "creation_date": 1434560973, "post_id": 30896945, "comment_id": 49835180, "body": "I am using <code>u8</code> <code>u16</code> etc in kernel space with <code>linux&#47;types.h</code>. Is <code>stdint.h</code> for user space?"}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 2, "creation_date": 1434562119, "post_id": 30896945, "comment_id": 49835861, "body": "You can use the standard names (<code>uint8_t</code>, etc) in kernel mode too. Typedefs for those are in <code>linux&#47;types.h</code> as well."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 2, "creation_date": 1434567004, "post_id": 30896945, "comment_id": 49838803, "body": "@BrianMcFarland as long as <code>u8</code> etc are your <i>own</i> typedefs that you can guarantee are identical to the standard ones, you&#39;ll be fine though. As Gil Hamilton said, <a href=\"http://lxr.free-electrons.com/source/include/linux/types.h\" rel=\"nofollow noreferrer\">the kernel does this</a>"}], "tags": [], "owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "is_accepted": true, "score": 27, "last_activity_date": 1434557521, "creation_date": 1434557521, "answer_id": 30896945, "question_id": 30896489, "link": "https://stackoverflow.com/questions/30896489/why-is-u8-u16-u32-u64-used-instead-of-unsigned-int-in-kernel-programming/30896945#30896945", "title": "why is u8 u16 u32 u64 used instead of unsigned int in kernel programming", "body": "<p>Often when working close to the hardware or when trying to control the size/format of a data structure you need to have precise control of the size of your integers.</p>\n\n<p>As for <code>u8</code> vs <code>uint8_t</code>, this is simply because Linux predated <code>&lt;stdint.h&gt;</code> being available in C, which is technically a C99-ism, but in my experience is available on most modern compilers even in their ANSI-C / C89 modes.</p>\n"}, {"tags": [], "owner": {"reputation": 353, "user_id": 1582649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301a671116fbfe26b938051d3f1c7ad6?s=128&d=identicon&r=PG", "display_name": "Alexandre Schmidt", "link": "https://stackoverflow.com/users/1582649/alexandre-schmidt"}, "is_accepted": false, "score": 5, "last_activity_date": 1549912244, "creation_date": 1549912244, "answer_id": 54637483, "question_id": 30896489, "link": "https://stackoverflow.com/questions/30896489/why-is-u8-u16-u32-u64-used-instead-of-unsigned-int-in-kernel-programming/54637483#54637483", "title": "why is u8 u16 u32 u64 used instead of unsigned int in kernel programming", "body": "<p>Adding my 10 cents to <a href=\"https://stackoverflow.com/a/30896945/1582649\">this answer</a>:</p>\n\n<p><code>u64</code> means an 'unsigned 64 bits' value, so, depending on the architecture where the code will run/be compiled, it must be defined differently in order to really be 64 bits long.</p>\n\n<p>For instance, on a x86 machine, an <code>unsigned long</code> is 64 bits long, so <code>u64</code> for that machine could be defined as follows:</p>\n\n<p><code>typedef unsigned long u64;</code></p>\n\n<p>The same applies for <code>u32</code>. On a x86 machine, <code>unsigned int</code> is 32 bits long, so <code>u32</code> for that machine could be defined as follows:</p>\n\n<p><code>typedef unsigned int u32;</code></p>\n\n<p>You'll generally find the <code>typedef</code> declaration for these types on a <code>types.h</code> file which corresponds to the architecture you're compiling your source to.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user966588"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89066, "favorite_count": 3, "accepted_answer_id": 30896945, "answer_count": 2, "score": 20, "last_activity_date": 1549912244, "creation_date": 1434556231, "last_edit_date": 1434560707, "question_id": 30896489, "link": "https://stackoverflow.com/questions/30896489/why-is-u8-u16-u32-u64-used-instead-of-unsigned-int-in-kernel-programming", "title": "why is u8 u16 u32 u64 used instead of unsigned int in kernel programming", "body": "<p>I see u8 u16 u32 u64 data types being used in kernel code. And I am wondering why is there need to use <code>u8</code> or <code>u16</code> or <code>u32</code> or <code>u64</code> and not <code>unsigned int</code>? </p>\n"}, {"tags": ["c++", "c", "dll", "struct", "mql4"], "comments": [{"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434556459, "post_id": 30896372, "comment_id": 49832099, "body": "Did you try: extern __declspec(dllimport)  ?"}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434569536, "post_id": 30896372, "comment_id": 49840375, "body": "When I enter that line of code, it gives me two error messages.  1:  &quot;this declaration has no storage class or type specifier&quot;.  2: &quot;expected a &#39;;&#39; &quot;.  That said, I did try using the extern declaration as noted in the 4th code block.  And, the code is using the __declspec(dllimport) as noted in the 3rd code block."}, {"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434574951, "post_id": 30896372, "comment_id": 49843566, "body": "I think your function should be inside a public class. So there is a way to be accesible outside on call. I don&#39;t know if you understand, but given a simple function call without even declare it as public should throws an error for no defined function call. Correct me if I am wrong. A bool, an int or whatever function you call, shoulld be make public. I think is I declare a generic int A function, it shall be called inside procedure not external (as your dll assumes). So public class, function return something. Call external class-&gt;function and see what I mean."}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434584539, "post_id": 30896372, "comment_id": 49847081, "body": "Well, I would try what you are suggesting, but...as far as all the examples, and tests, I have seen, and performed, the code I have should work exactly as is.  Which is why I finally gave up and posted it here.  I am hoping someone will have an idea of why metatrader would refuse a perfectly acceptable dll call."}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434584680, "post_id": 30896372, "comment_id": 49847110, "body": "And just to be clear....I have even copied the relevant code into a shell program and shell dll, for the purpose of testing, and they worked perfectly.  So, I honestly don&#39;t know why it rejects the call.  There is nothing that should interfere with it."}, {"owner": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434613822, "post_id": 30896372, "comment_id": 49856656, "body": "Last thing comes in my mind. Link .lib to compiler or #pragma comment(lib, &quot;yourdll.lib&quot;)? Try to copy your dll in system folder? Check UAC permission?"}, {"owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "reply_to_user": {"reputation": 3412, "user_id": 3344236, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003962689676/picture?type=large", "display_name": "ares777", "link": "https://stackoverflow.com/users/3344236/ares777"}, "edited": false, "score": 0, "creation_date": 1434632119, "post_id": 30896372, "comment_id": 49869010, "body": "Turned off UAC, added #pragma, etc..... no change.  It finds the dll, but still cannot find the function in the dll.  I checked the dll again with the Dependency Walker, and it still found the function exactly as It found in my original post."}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "is_accepted": false, "score": 0, "last_activity_date": 1434662070, "creation_date": 1434662070, "answer_id": 30925937, "question_id": 30896372, "link": "https://stackoverflow.com/questions/30896372/c-and-mql4-cannot-find-function-in-dll/30925937#30925937", "title": "C++ and MQL4 Cannot find function in dll", "body": "<p>Finally!  I have come to a resolution with this issue.  The issue was, the def file became unlinked to the project.  Here is what happened.</p>\n\n<p>When starting a new dll project, VS creates a dllmain.cpp file with the main function in it.  I don't like having this extra file in the project, so I prefer to move the main function into my project.cpp file.  When I do this, I remove the dllmain.cpp file from the project.  Apparently, if you have already linked your def file before you remove the dllmain.cpp, it will unlink your def file.  I never even thought to recheck this because I knew I had already linked the def file correctly.  </p>\n\n<p>To fix the issue, all I had to do was select the project.cpp file, and go into the Project/Properties menu, and relink the def file.  Now, I can finally start debugging.....</p>\n"}], "owner": {"reputation": 99, "user_id": 4980844, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c1d66b8e7122c0b46a1c51d057fc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "MehZhure", "link": "https://stackoverflow.com/users/4980844/mehzhure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1716, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434662070, "creation_date": 1434555923, "last_edit_date": 1434563816, "question_id": 30896372, "link": "https://stackoverflow.com/questions/30896372/c-and-mql4-cannot-find-function-in-dll", "title": "C++ and MQL4 Cannot find function in dll", "body": "<p>Alright, I know everyone is thinking, \"This has already been answered several times.\"  Well, you are wrong.  This time is different.  I have tried all of those other answers.  So here is the situation.</p>\n\n<p>I am creating an indicator in Metatrader 4 (mql4 code).  I am coding a dll to do the calculations in Visual Studio 2013 in C++.<br>\nThe relevant <code>MQL4</code> <strong><code>#import</code></strong> code is:</p>\n\n<pre><code>#import  \"test.dll\"\nbool  LiveChart( BarTrack &amp;bars,\n                 Stars    &amp;points,\n                 Patterns &amp;gartleys[],\n                 Patterns &amp;bats[],\n                 Patterns &amp;butterflies[],\n                 Patterns &amp;cyphers[],\n                 BarData  &amp;rates[],\n                 Basics   &amp;basics\n                 );\n#import\n</code></pre>\n\n<p>and the call to the function in the <strong><code>OnCalculate()</code></strong> function:</p>\n\n<pre><code>     bool test = LiveChart( bars,\n                            points,\n                            gartleys,\n                            bats,\n                            butterflies,\n                            cyphers,\n                            rates,\n                            basics\n                            );\n     Print( \"test: \", test );\n</code></pre>\n\n<p>NOTE: All the passed arguments are <strong><code>struct</code></strong>-references. None of the structs contain objects, pointers, references, strings, other structs, classes, methods, or arrays.  Some of the structs are arrays, but that is entirely valid as a passed argument.  So, there are NO invalid arguments being passed.  I <strong>have verified</strong> that each <code>struct</code> passes successfully, on an individual basis.</p>\n\n<p>Now the C++ code:</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define MT4_EXPFUNC __declspec(dllexport)\n\nMT4_EXPFUNC bool __stdcall LiveChart(const BarTrack &amp;bars, Stars &amp;points, Patterns *gartleys, Patterns *bats,\nPatterns *butterflies, Patterns *cyphers, const BarData *rates, Basics &amp;basics)\n{\n   Observatory astronomer;\n\n   return astronomer.OnCalculateLive(bars, points, gartleys, bats, butterflies, cyphers, rates, basics);\n}\n</code></pre>\n\n<p>NOTE: I have also tried:</p>\n\n<pre><code>extern \"C\"\n{\n   MT4_EXPFUNC bool __stdcall LiveChart(const BarTrack &amp;bars, Stars &amp;points, Patterns *gartleys, Patterns *bats,\nPatterns *butterflies, Patterns *cyphers, const BarData *rates, Basics &amp;basics)\n   {\n      Observatory astronomer;\n\n      return astronomer.OnCalculateLive(bars, points, gartleys, bats, butterflies, cyphers, rates, basics);\n   }\n}\n</code></pre>\n\n<p>In my def file:</p>\n\n<pre><code>LIBRARY test\n\nEXPORTS\n   LiveChart\n</code></pre>\n\n<p>I have reviewed the code with the <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow\">Dependency Walker</a> program.  It tells me the name of the function is:</p>\n\n<pre><code>bool LiveChart(struct BarTrack const &amp;,struct Stars &amp;,struct Patterns *,struct Patterns *,struct Patterns *,struct Patterns *,struct BarData const *,struct Basics &amp;)\n</code></pre>\n\n<p>As far as I understand, everything is as it should be.</p>\n\n<p><strong>My question is</strong>, </p>\n\n<ol>\n<li><p>why does <strong><kbd>metatrader</kbd></strong> still say it cannot find the\nfunction name in the dll?</p></li>\n<li><p>Have I overlooked something?</p></li>\n<li><p>Am I using the wrong type of voodoo?</p></li>\n<li><p>Are the stars not aligned properly?</p></li>\n</ol>\n\n<p>Admittedly, I am still pretty new to C++ (about a month into it), but as far as can tell, everything is kosher, and it should work.</p>\n"}, {"tags": ["javascript", "c++", "c", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 4682, "user_id": 11942268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DtFEd.png?s=128&g=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/11942268/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1601463258, "creation_date": 1601463258, "answer_id": 64136081, "question_id": 30896318, "link": "https://stackoverflow.com/questions/30896318/emscripten-display-an-image-in-html-file/64136081#64136081", "title": "Emscripten: Display an image in HTML file", "body": "<p>You can access it through the emscripten <a href=\"https://emscripten.org/docs/api_reference/Filesystem-API.html\" rel=\"nofollow noreferrer\">File System API</a>.</p>\n<p>Let's assume you have a function in C++ that returns the path to your generated PNG file, something like this:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::string processImage()\n{\n    std::string filename = &quot;my.png&quot;;\n    // open and write to your file\n    return filename;\n}\n</code></pre>\n<p>In your html, add some js to read the file, convert it to a blob and then to an object URL:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const filename = Module.processImage(); // Call your C++ function\nconst blob = new Blob([FS.readFile(filename)], {'type': 'image/png'});\nconst url = URL.createObjectURL(blob);\n// You can use this url as the src attribute of an img element\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 1018322, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/498bb8369e99a9030a0a6c2bfa852deb?s=128&d=identicon&r=PG", "display_name": "Slot", "link": "https://stackoverflow.com/users/1018322/slot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1601463258, "creation_date": 1434555800, "last_edit_date": 1434614600, "question_id": 30896318, "link": "https://stackoverflow.com/questions/30896318/emscripten-display-an-image-in-html-file", "title": "Emscripten: Display an image in HTML file", "body": "<p>I've build JS program (with emscripten) from c++ files, which generates a png file.</p>\n\n<p>This program is loaded and executed in a html file.</p>\n\n<p>Now I would like to display the created png file in this html file. But Emscripten has an emulated sandboxed filesystem, so my png file is written in this filesystem.</p>\n\n<p>How can I retreive this file to display it ?</p>\n"}, {"tags": ["c++", "c", "linux", "gnu"], "comments": [{"owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "edited": false, "score": 0, "creation_date": 1434555038, "post_id": 30895970, "comment_id": 49831083, "body": "This Looks good to me"}], "answers": [{"comments": [{"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 1, "creation_date": 1434557601, "post_id": 30896514, "comment_id": 49832939, "body": "For this to work he has to decide if this a C or C++ question.  It&#39;s currently tagged as both."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 1, "creation_date": 1434557642, "post_id": 30896514, "comment_id": 49832969, "body": "@BrianMcFarland True.  I came in from the C++ side so I didn&#39;t see the C tag."}, {"owner": {"reputation": 153, "user_id": 4035630, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bd19af688ec6c753e5314bffe32c05c9?s=128&d=identicon&r=PG&f=1", "display_name": "Pat Flegit", "link": "https://stackoverflow.com/users/4035630/pat-flegit"}, "edited": false, "score": 0, "creation_date": 1434558127, "post_id": 30896514, "comment_id": 49833317, "body": "It could be either depending on circumstances."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 7, "last_activity_date": 1434556282, "creation_date": 1434556282, "answer_id": 30896514, "question_id": 30895970, "link": "https://stackoverflow.com/questions/30895970/comparing-timespec-values/30896514#30896514", "title": "Comparing timespec values", "body": "<p>Another way you can go this is to have a global <code>operator &lt;()</code> defined for <code>timespec</code>.  Then you can just you that to compare if one time happened before another.</p>\n\n<pre><code>bool operator &lt;(const timespec&amp; lhs, const timespec&amp; rhs)\n{\n    if (lhs.tv_sec == rhs.tv_sec)\n        return lhs.tv_nsec &lt; rhs.tv_nsec;\n    else\n        return lhs.tv_sec &lt; rhs.tv_sec;\n}\n</code></pre>\n\n<p>Then in you code you can have</p>\n\n<pre><code>timespec start, end;\n//get start and end populated\nif (start &lt; end)\n   cout &lt;&lt; \"start is smaller\";\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4035630, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bd19af688ec6c753e5314bffe32c05c9?s=128&d=identicon&r=PG&f=1", "display_name": "Pat Flegit", "link": "https://stackoverflow.com/users/4035630/pat-flegit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8750, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1434556282, "creation_date": 1434554917, "last_edit_date": 1434556156, "question_id": 30895970, "link": "https://stackoverflow.com/questions/30895970/comparing-timespec-values", "title": "Comparing timespec values", "body": "<p>What's the best way to compare two timespec values to see which happened first?</p>\n\n<p>Is there anything wrong with the following?</p>\n\n<pre><code>bool BThenA(timespec a, timespec b) {\n    //Returns true if b happened first -- b will be \"lower\".\n    if (a.tv_sec == b.tv_sec)\n        return a.tv_nsec &gt; b.tv_nsec;\n    else\n        return a.tv_sec &gt; b.tv_sec;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 1264, "user_id": 1857229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ac85290d62959cd6931313095ce2c2c8?s=128&d=identicon&r=PG", "display_name": "Uroc327", "link": "https://stackoverflow.com/users/1857229/uroc327"}, "edited": false, "score": 0, "creation_date": 1434555048, "post_id": 30895715, "comment_id": 49831093, "body": "If you know the functions at compile time, you can manually insert NOPs using the <code>asm</code> statement. But be aware that this prevents the compiler from using lots of optimisations."}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1434555191, "post_id": 30895715, "comment_id": 49831199, "body": "FYI, Detours isn&#39;t dependent on having <code>NOP</code>s at the start of a function. IIRC it disassembles the function&#39;s prologue to get a large enough space for a jump to a trampoline (and to copy those instructions out). See also <a href=\"http://stackoverflow.com/a/10458162\">stackoverflow.com/a/10458162</a>"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1434615305, "post_id": 30895715, "comment_id": 49857517, "body": "If you have the source so you can recompile with <code>__attribute__((ms_hook_prologue))</code>, why don&#39;t you just insert c(++) code to call a function pointer if it is not <code>0</code>?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1434648957, "post_id": 30895715, "comment_id": 49881004, "body": "Are you absolutely sure you can&#39;t use <code>LD_PRELOAD</code> to replace the function at load time (and <code>dlsym</code> to call the original) instead of waiting until runtime?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434560143, "post_id": 30896279, "comment_id": 49834697, "body": "I hate to ask this but if I define as you have mentioned gcc is throwing an warning1.c:16: warning: ms_hook_prologue attribute directive ignored 1.c:16: error: expected token distcc[48256] ERROR: compile 1.c on localhost failed. could you please let me know I am missing any header file to include so that these warning go off."}, {"owner": {"reputation": 2827, "user_id": 1825094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6Mk2.png?s=128&g=1", "display_name": "Max Truxa", "link": "https://stackoverflow.com/users/1825094/max-truxa"}, "reply_to_user": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 1, "creation_date": 1434565810, "post_id": 30896279, "comment_id": 49838040, "body": "Depending on your version of GCC you will have to put the attribute in front of the function like this <code>__attribute__((ms_hook_prologue)) void foo() { }</code>. For an example look at <a href=\"http://ideone.com/qGBm3H\" rel=\"nofollow noreferrer\">this online demo</a>. I&#39;ll update my post later."}, {"owner": {"reputation": 2827, "user_id": 1825094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6Mk2.png?s=128&g=1", "display_name": "Max Truxa", "link": "https://stackoverflow.com/users/1825094/max-truxa"}, "reply_to_user": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434567559, "post_id": 30896279, "comment_id": 49839151, "body": "Another source of that sort of that error could be that you have a forward declaration of that function and specified the attribute at the wrong place. IIRC you must specify the attribute <i>only</i> at the forward declaration."}, {"owner": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434611972, "post_id": 30896279, "comment_id": 49855545, "body": "Thanks :). I was able to compile and take a objdump.00000000004007c0 &lt;_Z3foov&gt;:   4007c0:       48 8d a4 24 00 00 00    lea    0x0(%rsp),%rsp   4007c7:       00    4007c8:       55                      push   %rbp   4007c9:       48 89 e5                mov    %rsp,%rbp   4007cc:       be d0 08 40 00          mov    $0x4008d0,%esi   4007d1:       bf 60 10 60 00          mov    $0x601060,%edi   4007d6:       e8 c5 fe ff ff          callq  4006a0   I dont see NOP is LEA load the effective address should I replace LEA to JMP ?"}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "reply_to_user": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "edited": false, "score": 0, "creation_date": 1434648794, "post_id": 30896279, "comment_id": 49880907, "body": "@Anil yes, <code>lea</code> is often used as a multi-byte <code>nop</code>. Interestingly, with <code>gcc -s</code> you can see that the assembly is emitted as a <code>.byte</code> sequence rather than actual instructions, probably to avoid peephole optimizations."}], "tags": [], "owner": {"reputation": 2827, "user_id": 1825094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6Mk2.png?s=128&g=1", "display_name": "Max Truxa", "link": "https://stackoverflow.com/users/1825094/max-truxa"}, "is_accepted": false, "score": 1, "last_activity_date": 1434648842, "last_edit_date": 1434648842, "creation_date": 1434555707, "answer_id": 30896279, "question_id": 30895715, "link": "https://stackoverflow.com/questions/30895715/how-to-implement-detour-functions-in-linux/30896279#30896279", "title": "How to implement detour functions in Linux", "body": "<p>The question is less a \"Linux\" one but more a \"GCC\" one.</p>\n\n<p>GCC provides the <code>ms_hook_prologue</code> function attribute <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/Function-Attributes.html\" rel=\"nofollow\">(online reference)</a> which is pretty much the same as the <code>/hotpatch</code> compiler option for <code>cl.exe</code> (the MS compiler) but on a function level.</p>\n\n<p>Example:</p>\n\n<pre><code>__attribute__((ms_hook_prologue)) void foo() { }\n</code></pre>\n\n<p>If you want to use this on more than a few functions you could create a macro to hide the attribute:</p>\n\n<pre><code>#define HOTPATCHABLE    __attribute__((ms_hook_prologue))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5020262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e810aae45826e9ce3c051bc420ec6b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/5020262/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491493423, "creation_date": 1434554253, "last_edit_date": 1491493423, "question_id": 30895715, "link": "https://stackoverflow.com/questions/30895715/how-to-implement-detour-functions-in-linux", "title": "How to implement detour functions in Linux", "body": "<p>My requirement is to patch a function during runtime which is equivalent to K-Patch but for application code.\nin K-Patch vedio ( <a href=\"https://www.youtube.com/watch?v=juyQ5TsJRTA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=juyQ5TsJRTA</a> ) it mentioned @ 1:41 it using functionality which used for traditional used for tracing (noop) beginning of the function.\nwhere we can register the handler to call new function definition.</p>\n\n<p>In Windows It looks something like this: (<a href=\"http://www.ragestorm.net/blogs/?p=17\" rel=\"nofollow noreferrer\">http://www.ragestorm.net/blogs/?p=17</a>)</p>\n\n<pre><code>0005951e (01) 90                      NOP\n0005951f (01) 90                       NOP\n00059520 (01) 90                      NOP\n00059521 (01) 90                      NOP\n00059522 (01) 90                      NOP\n00059523 (02) 8bff                   MOV EDI, EDI\n00059525 (01) 55                      PUSH EBP\n00059526 (02) 8bec                  MOV EBP, ESP\n</code></pre>\n\n<p>I wrote a simple function in Linux (2.6.32-431.el6.x86_64) in which i dont see any NOP instruction which we can used to dynamically patch a new function.</p>\n\n<pre><code>0000000000400554 &lt;mysym&gt;:\n400554:       55                      push   %rbp\n400555:       48 89 e5                mov    %rsp,%rbp\n400558:       b8 98 06 40 00          mov    $0x400698,%eax\n40055d:       be 9b 06 40 00          mov    $0x40069b,%esi\n400562:       48 89 c7                mov    %rax,%rdi\n400565:       b8 00 00 00 00          mov    $0x0,%eax\n40056a:       e8 c9 fe ff ff          callq  400438 &lt;printf@plt&gt;\n40056f:       c9                      leaveq \n400570:       c3                      retq   \n</code></pre>\n\n<p>Is there any compiler options or equivalent instructions exists in linux where every functions has some NOP instructions which used to hook up a new function by replacing NOP with near/far JUMP?</p>\n"}, {"tags": ["c", "winapi"], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1434555955, "post_id": 30896294, "comment_id": 49831766, "body": "So I should indeed use <code>CreatePopupMenu()</code> for the submenu also. Thanks."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1434557103, "post_id": 30896294, "comment_id": 49832567, "body": "paul, yes sorry I didn&#39;t read the question right. I updated the answer, it&#39;s what you said."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 3, "last_activity_date": 1434557072, "last_edit_date": 1434557072, "creation_date": 1434555750, "answer_id": 30896294, "question_id": 30895630, "link": "https://stackoverflow.com/questions/30895630/how-to-create-a-submenu-for-a-popup-menu/30896294#30896294", "title": "How to create a submenu for a popup menu?", "body": "<p><code>CreateMenu</code> is for Window's horizontal menu bar. You can use <code>CreatePopupMenu</code> to make popup menu, as well as submenu for the popup:</p>\n\n<pre><code>HMENU submenu = CreatePopupMenu();\nAppendMenu(submenu, MF_STRING, 1001, L\"submenu 1001\");\n\nHMENU mainmenu = CreatePopupMenu();\nAppendMenu(mainmenu, MF_STRING, 100, L\"main 100\");\nAppendMenu(mainmenu, MF_SEPARATOR, 0, NULL);\nAppendMenu(mainmenu, MF_STRING, 101, L\"main 101\");\n\nAppendMenu(mainmenu, MF_POPUP, (UINT)submenu, L\"&amp;submenu\");\n\nPOINT p;\nGetCursorPos(&amp;p);\nTrackPopupMenu(mainmenu, TPM_LEFTBUTTON, p.x, p.y, 0, hdlg, 0);\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 1, "accepted_answer_id": 30896294, "answer_count": 1, "score": 2, "last_activity_date": 1434557072, "creation_date": 1434554028, "question_id": 30895630, "link": "https://stackoverflow.com/questions/30895630/how-to-create-a-submenu-for-a-popup-menu", "title": "How to create a submenu for a popup menu?", "body": "<p>When I want to create a popup menu, I would use the <code>CreatePopupMenu()</code> function.</p>\n\n<p>But what if one of the popup menu items needs to have a submenu, should I also use <code>CreatePopupMenu()</code> to create the submenu, or should I use <code>CreateMenu()</code>?</p>\n"}, {"tags": ["c", "sockets", "ubuntu", "server"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1434554271, "post_id": 30895593, "comment_id": 49830522, "body": "I don&#39;t understand what you&#39;re trying to do. The client receives a response from the server, then disconnects. How is the server supposed to get more commands from the client after the client disconnects?"}, {"owner": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1434555124, "post_id": 30895593, "comment_id": 49831156, "body": "I was unclear. The client sends x commands to the server, in less time than it takes the server to deal with 1 command (commands are dealt with 1 at a time). If I dont try to write to the client, even after the client closes the socket I can still read the x-1 remaining commands. If I do write to the client, I can&#39;t read any more commands."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "edited": false, "score": 0, "creation_date": 1434555153, "post_id": 30895856, "comment_id": 49831176, "body": "Is there a way to check if the socket is OK or NOK?"}, {"owner": {"reputation": 168, "user_id": 2890384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ON63X.jpg?s=128&g=1", "display_name": "rfermi", "link": "https://stackoverflow.com/users/2890384/rfermi"}, "reply_to_user": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "edited": false, "score": 0, "creation_date": 1434555364, "post_id": 30895856, "comment_id": 49831322, "body": "If you&#39;re connected to your peer, then the socket is ok. Im afraid I didnt get it exacly.. A socket is an application layer connection, if the host keep listening on the specific port, then the client will be able to send indefinetly"}, {"owner": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "edited": false, "score": 0, "creation_date": 1434555784, "post_id": 30895856, "comment_id": 49831621, "body": "Is there a way to know if the client disconnects before I try to write? I have a feeling that me trying to write and failling causes issues."}, {"owner": {"reputation": 168, "user_id": 2890384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ON63X.jpg?s=128&g=1", "display_name": "rfermi", "link": "https://stackoverflow.com/users/2890384/rfermi"}, "reply_to_user": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "edited": false, "score": 0, "creation_date": 1434560804, "post_id": 30895856, "comment_id": 49835076, "body": "Yeah it does. If you want to check a socket connection before write, try ( linux like):  &gt;  if ( Socket &lt; 0 ) &gt;    return -1; &gt; send(..."}], "tags": [], "owner": {"reputation": 168, "user_id": 2890384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ON63X.jpg?s=128&g=1", "display_name": "rfermi", "link": "https://stackoverflow.com/users/2890384/rfermi"}, "is_accepted": false, "score": 0, "last_activity_date": 1434554617, "creation_date": 1434554617, "answer_id": 30895856, "question_id": 30895593, "link": "https://stackoverflow.com/questions/30895593/is-reading-from-client-socket-possible-after-client-disconnects/30895856#30895856", "title": "Is reading from client socket possible after client disconnects?", "body": "<p>In this case, you need to know if client awaits your answer to each command before sending another one.\nIn a typical client-server connection, client starts the communication. Since your client is sending a bunch of commands, there are 2 possibilities:</p>\n\n<ul>\n<li>In the end of operation your socket return will be OK or NOK.</li>\n<li>For each message the client sends your return will be OK or NOK.</li>\n</ul>\n\n<p>In addition, I suggest you send any trace information, so we can evaluate which solution would better fit in your case.</p>\n"}], "owner": {"reputation": 13, "user_id": 4938022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d3844af3a049f7e47acc292d683b943?s=128&d=identicon&r=PG&f=1", "display_name": "Joe A", "link": "https://stackoverflow.com/users/4938022/joe-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434554617, "creation_date": 1434553905, "last_edit_date": 1434554016, "question_id": 30895593, "link": "https://stackoverflow.com/questions/30895593/is-reading-from-client-socket-possible-after-client-disconnects", "title": "Is reading from client socket possible after client disconnects?", "body": "<p>I'm trying to write a server program for C that will be able to handle a badly written client program. The client sends a bunch of commands to the server and then closes the socket. After the server executes each command its supposed to send either a 0 or a 1 to the client depending on if the command failed or not. </p>\n\n<p>If I don't try to send the client that one byte after each command, everything is fine and I can continue reading commands server-side, after the client closed the socket. However, if I do try writing that 1 byte, after reading 1 command from the client, I can't read anymore commands(connection reset by peer).</p>\n\n<p>Is there a way to handle this? As in, to be able to write and read all the commands?</p>\n"}, {"tags": ["c", "gcc", "types"], "answers": [{"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1434553526, "post_id": 30895308, "comment_id": 49829997, "body": "Fortunately the compiler does not mind the <a href=\"http://english.stackexchange.com/questions/433/when-i-should-use-assure-vs-ensure-vs-insure\">mangling of English syntax</a> in the comment."}], "tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": false, "score": 4, "last_activity_date": 1434553470, "last_edit_date": 1434553470, "creation_date": 1434553159, "answer_id": 30895308, "question_id": 30895120, "link": "https://stackoverflow.com/questions/30895120/what-is-bogus-type-in-c/30895308#30895308", "title": "What is bogus_type in C", "body": "<p><a href=\"https://github.com/gcc-mirror/gcc/blob/7c62dfbbcd3699efcbbadc9fb3aa14f23a123add/libgcc/libgcc2.h#L156\" rel=\"nofollow\">Here's another example</a> of this \"type\" being used.</p>\n\n<pre><code>/* Make sure that we don't accidentally use any normal C language built-in\n   type names in the first part of this file.  Instead we want to use *only*\n   the type names defined above.  The following macro definitions insure\n   that if we *do* accidentally use some normal C language built-in type name,\n   we will get a syntax error.  */\n\n#define char bogus_type\n#define short bogus_type\n#define int bogus_type\n#define long bogus_type\n#define unsigned bogus_type\n#define float bogus_type\n#define double bogus_type\n</code></pre>\n\n<p>That said, <strong>it's not a type. It's a legitimate code breaker to enforce the restriction on using certain types</strong> in certain places of the program. Should it fire, compilation should fail with a syntax error, since <code>bogus_type</code> does not exist.</p>\n\n<p>It's not any \"less-than-known\" part of the language, it's just clever use of the C preprocessor.</p>\n"}, {"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 0, "last_activity_date": 1434553258, "creation_date": 1434553258, "answer_id": 30895349, "question_id": 30895120, "link": "https://stackoverflow.com/questions/30895120/what-is-bogus-type-in-c/30895349#30895349", "title": "What is bogus_type in C", "body": "<p>It is put before some code that <em>should not</em> accidentally use one of these types later on. So if it is using one of these, the compiler would throw an error, since there is no such a <code>bogus_type</code> type.</p>\n"}, {"tags": [], "owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "is_accepted": false, "score": 0, "last_activity_date": 1434553582, "creation_date": 1434553582, "answer_id": 30895471, "question_id": 30895120, "link": "https://stackoverflow.com/questions/30895120/what-is-bogus-type-in-c/30895471#30895471", "title": "What is bogus_type in C", "body": "<p>Since the <code>define</code> is just a text replacement that take place before the compilation phase, as long as no one will use the defined type, there be no replacement to <code>bogus_type</code> and nothing will happen. If someone will use those types, they will be replaced with <code>bogus_type</code> which is in fact not defined anywhere which will make the compilation to failed.</p>\n\n<p>so basically <code>bogus_type</code> is just a rabbis that is used to forcely failed the build in case of a use in a specific type. For the sake of it, it could be:</p>\n\n<pre><code>#define SItype you_are_using_a_type_you_should_not_be_using!\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4994838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f0d5daee0ed303baf8523735295d86?s=128&d=identicon&r=PG&f=1", "display_name": "givknow", "link": "https://stackoverflow.com/users/4994838/givknow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1434553582, "creation_date": 1434552698, "last_edit_date": 1434552833, "question_id": 30895120, "link": "https://stackoverflow.com/questions/30895120/what-is-bogus-type-in-c", "title": "What is bogus_type in C", "body": "<p>I've been going through some types defined in libgcc. They are all apparently mapped to the same type named <code>bogus_type</code>. I can not find its definition. </p>\n\n<pre><code>#define SItype bogus_type\n#define USItype bogus_type\n#define DItype bogus_type\n#define UDItype bogus_type\n#define SFtype bogus_type\n#define DFtype bogus_type\n</code></pre>\n\n<p>What does this type map to? Is it even a valid type or something like <code>NULL</code>?</p>\n"}, {"tags": ["c", "memory-management", "valgrind"], "comments": [{"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "edited": false, "score": 4, "creation_date": 1435949207, "post_id": 30895018, "comment_id": 50426809, "body": "See <a href=\"http://valgrind.10908.n7.nabble.com/VALGRIND-MEMPOOL-FREE-not-reflected-in-heap-summary-td42789.html\" rel=\"nofollow noreferrer\">http://valgrind.10908.n7.nabble.com/VALGRIND-MEMPOOL-FREE-no&zwnj;&#8203;t-reflected-in-heap-&zwnj;&#8203;summary-td42789.html</a> and <a href=\"https://bugs.kde.org/show_bug.cgi?id=233298\" rel=\"nofollow noreferrer\">https://bugs.kde.org/show_bug.cgi?id=233298</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "edited": false, "score": 0, "creation_date": 1435996572, "post_id": 31216966, "comment_id": 50437081, "body": "<code>Here&#39;s a patch</code> Where?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1436023699, "post_id": 31216966, "comment_id": 50444412, "body": "IF you copypaste from other sources you are expected to mark this text as being a citation!"}], "tags": [], "owner": {"reputation": 625, "user_id": 4725771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QpB1I.jpg?s=128&g=1", "display_name": "Madhu Kumar Dadi", "link": "https://stackoverflow.com/users/4725771/madhu-kumar-dadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1436023752, "last_edit_date": 1436023752, "creation_date": 1435984908, "answer_id": 31216966, "question_id": 30895018, "link": "https://stackoverflow.com/questions/30895018/custom-allocator-valgrind-shows-7-allocs-0-frees-no-leaks/31216966#31216966", "title": "Custom allocator: Valgrind shows 7 allocs, 0 frees, no leaks", "body": "<p>Taken from here: <a href=\"http://valgrind.10908.n7.nabble.com/VALGRIND-MEMPOOL-FREE-not-reflected-in-heap-summary-td42789.html\" rel=\"nofollow\">http://valgrind.10908.n7.nabble.com/VALGRIND-MEMPOOL-FREE-not-reflected-in-heap-summary-td42789.html</a></p>\n\n<blockquote>\n  <p>A cursory search through the source code indicates that MEMPOOL_ALLOC \n  calls new_block, which increments cmalloc_n_mallocs, but there is no \n  corresponding change to cmalloc_n_frees in MEMPOOL_FREE. Here's a \n  patch that increments it at the very end of MEMPOOL_FREE. This gives \n  me the behavior I expect. </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "edited": false, "score": 0, "creation_date": 1436043148, "post_id": 31218353, "comment_id": 50449948, "body": "This is interesting, thank you for the hint! Though I&#39;m not sure if it&#39;s actually the issue. I see the <code>cmalloc_n_frees</code> variable being incremented in 3.10, which is the version I am on (the version from the bug report are 3.5 and 3.6). <code>cmalloc_n_frees</code> is incremented in <code>memcheck&#47;mc_malloc_wrappers.c</code> at lines 479/522 (source: <a href=\"http://valgrind.org/downloads/current.html\" rel=\"nofollow noreferrer\">valgrind.org/downloads/current.html</a>). Also, I&#39;m a little skeptical as to how the Valgrind dev team could have missed such an obvious bug. After all, the standard <code>malloc</code> reports just fine with Valgrind. I am not using <code>DESTROY_MEMPOOL</code> atm. Is it required ?"}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "reply_to_user": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "edited": false, "score": 0, "creation_date": 1436045016, "post_id": 31218353, "comment_id": 50450331, "body": "@conradk The relevant function is <code>mempool_free</code> in line 861 where the <code>cmalloc_n_frees</code> is not incremented. <code>mempool_alloc</code> in line 832 calls <code>new_block</code> where the <code>cmalloc_n_mallocs</code> is incremented, but <code>mempool_free</code> doesn&#39;t call <code>handle_free</code> where <code>cmalloc_n_frees</code> would have been incremented. The valgrind dev team did not miss the bug. It is in their bug tracker, but it is strange it is not yet fixed after such a long time (more than five years)."}, {"owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "reply_to_user": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "edited": false, "score": 0, "creation_date": 1436102021, "post_id": 31218353, "comment_id": 50460187, "body": "@conradk <code>VALGRIND_DESTROY_MEMPOOL</code> doesn&#39;t change anything in the output. I added an example with it."}, {"owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "edited": false, "score": 0, "creation_date": 1436275957, "post_id": 31218353, "comment_id": 50534541, "body": "Ah OK, Valgrind uses the KDE bug tracking system, I didn&#39;t get that before. Thanks for the explanations regarding DESTROY_MEMPOOL ! :-)"}], "tags": [], "owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "is_accepted": true, "score": 5, "last_activity_date": 1436101918, "last_edit_date": 1436101918, "creation_date": 1435996418, "answer_id": 31218353, "question_id": 30895018, "link": "https://stackoverflow.com/questions/30895018/custom-allocator-valgrind-shows-7-allocs-0-frees-no-leaks/31218353#31218353", "title": "Custom allocator: Valgrind shows 7 allocs, 0 frees, no leaks", "body": "<blockquote>\n  <p>What could be the cause of this ?</p>\n</blockquote>\n\n<p>This is due to a bug in valgrind. See the <a href=\"https://bugs.kde.org/show_bug.cgi?id=233298\" rel=\"nofollow\">link</a> to the valgrind bug tracker in my comment to your answer.</p>\n\n<p>From the other <a href=\"http://valgrind.10908.n7.nabble.com/VALGRIND-MEMPOOL-FREE-not-reflected-in-heap-summary-td42789.html\" rel=\"nofollow\">link</a> in my comment:</p>\n\n<blockquote>\n  <p>A cursory search through the source code indicates that MEMPOOL_ALLOC\n  calls new_block, which increments cmalloc_n_mallocs, but there is no\n  corresponding change to cmalloc_n_frees in MEMPOOL_FREE.</p>\n</blockquote>\n\n<pre><code>/* valgrind.c */\n#include &lt;valgrind/valgrind.h&gt;\n\nint main(int argc, char *argv[]) {\n    char pool[100];\n\n    VALGRIND_CREATE_MEMPOOL(pool, 0, 0);\n    VALGRIND_MEMPOOL_ALLOC(pool, pool, 8);\n    VALGRIND_MEMPOOL_FREE(pool, pool);\n    VALGRIND_DESTROY_MEMPOOL(pool);\n    return 0;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>$ gcc valgrind.c -g\n$ valgrind --leak-check=full --show-leak-kinds=all ./a.out\n==10186== Memcheck, a memory error detector\n==10186== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==10186== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==10186== Command: ./a.out\n==10186== \n==10186== \n==10186== HEAP SUMMARY:\n==10186==     in use at exit: 0 bytes in 0 blocks\n==10186==   total heap usage: 1 allocs, 0 frees, 8 bytes allocated\n==10186== \n==10186== All heap blocks were freed -- no leaks are possible\n==10186== \n==10186== For counts of detected and suppressed errors, rerun with: -v\n==10186== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n$ \n</code></pre>\n"}], "owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 3, "accepted_answer_id": 31218353, "answer_count": 2, "score": 6, "last_activity_date": 1436101918, "creation_date": 1434552429, "question_id": 30895018, "link": "https://stackoverflow.com/questions/30895018/custom-allocator-valgrind-shows-7-allocs-0-frees-no-leaks", "title": "Custom allocator: Valgrind shows 7 allocs, 0 frees, no leaks", "body": "<p>I am working on a clone of the <code>malloc (3)</code> functions (<code>malloc</code>, <code>realloc</code> and <code>free</code> for now).</p>\n\n<p>I would like to add support for Valgrind. I'm using <a href=\"http://valgrind.org/docs/manual/mc-manual.html#mc-manual.mempools\">these docs</a>. However, after adding calls to the <code>VALGRIND_MEMPOOL_FREE</code>, <code>VALGRIND_MEMPOOL_ALLOC</code> and <code>VALGRIND_CREATE_MEMPOOL</code> macros, I get the following from Valgrind:</p>\n\n<pre><code>==22303== HEAP SUMMARY:\n==22303==     in use at exit: 0 bytes in 0 blocks\n==22303==   total heap usage: 7 allocs, 0 frees, 2,039 bytes allocated\n==22303== \n==22303== All heap blocks were freed -- no leaks are possible\n</code></pre>\n\n<p>This is despite my <a href=\"https://github.com/conradkleinespel/malloc-c/blob/90b1f26ff5ceca872ba41e8ca3bde351c286d6aa/ft_realloc.c\"><code>realloc</code> calling <code>VALGRIND_MEMPOOL_FREE</code></a> and my <a href=\"https://github.com/conradkleinespel/malloc-c/blob/90b1f26ff5ceca872ba41e8ca3bde351c286d6aa/ft_free.c\"><code>free</code> calling <code>VALGRIND_MEMPOOL_FREE</code></a>.</p>\n\n<p>What could be the cause of this ?</p>\n"}, {"tags": ["python", "c", "string", "swig"], "answers": [{"comments": [{"owner": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 1, "creation_date": 1434557153, "post_id": 30894976, "comment_id": 49832600, "body": "If I use raw, the size of incoming array is 12, it comes with slashes and &#39;x&#39;-es. I want to get incoming array of size 3. {0x42, 0x1d, 0xd7}"}, {"owner": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 1, "creation_date": 1434557274, "post_id": 30894976, "comment_id": 49832695, "body": "I also tried to pass key.encode(), but then python complains about types  TypeError: in method &#39;Module_func&#39;, argument 2 of type &#39;char *&#39;"}, {"owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "reply_to_user": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 0, "creation_date": 1434557388, "post_id": 30894976, "comment_id": 49832792, "body": "Try - <code>key.encode(&#39;utf-8&#39;).decode()</code> , without the <code>raw</code>"}, {"owner": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 0, "creation_date": 1434557488, "post_id": 30894976, "comment_id": 49832859, "body": "key.encode(&#39;unicode-escape&#39;).decode() without the raw turns into &quot;B\\\\x1d\\\\xd7\\\\x92q&quot; char* string"}, {"owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "reply_to_user": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 0, "creation_date": 1434557670, "post_id": 30894976, "comment_id": 49832994, "body": "Sorry, that was wrong, use the new one , with <code>utf-8</code>"}, {"owner": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "edited": false, "score": 1, "creation_date": 1434615389, "post_id": 30894976, "comment_id": 49857565, "body": "This does not work, produces more different bytes. What I want is to create a string object in python and pass this string to C, but this string must have 3 bytes (0x42, 0x1d, 0xd7)"}], "tags": [], "owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1434552332, "creation_date": 1434552332, "answer_id": 30894976, "question_id": 30894770, "link": "https://stackoverflow.com/questions/30894770/python-swig-string-to-char-conversion/30894976#30894976", "title": "python swig string to char* conversion", "body": "<p>Do you mean to say you want to pass <code>\\x42\\x1d\\xd7</code> without it being converted into unicode?</p>\n\n<p>The issue in your case comes because <code>\\x42\\x1d\\xd7</code> is converted into 'utf-8' when passing to <code>modul.func()</code> .</p>\n\n<p>You can test this by doing - </p>\n\n<pre><code>key = \"\\x42\\x1d\\xd7\"\nkey.encode('utf-8').decode('unicode-escape')\n&gt;&gt; 'B\\x1d\\xc3\\x97'\n</code></pre>\n\n<p>For your issue, you can stop the encoding/decoding of the <code>key</code> variable by python, by appending a <code>r</code> to the definition of the string as below -</p>\n\n<pre><code>key = r\"\\x42\\x1d\\xd7\"\n</code></pre>\n\n<p>This tells the python interpreter to read the string <code>raw</code> . Try that.</p>\n"}], "owner": {"reputation": 1649, "user_id": 1113852, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/90CgE.png?s=128&g=1", "display_name": "psyched", "link": "https://stackoverflow.com/users/1113852/psyched"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 494, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434615599, "creation_date": 1434551856, "last_edit_date": 1434615599, "question_id": 30894770, "link": "https://stackoverflow.com/questions/30894770/python-swig-string-to-char-conversion", "title": "python swig string to char* conversion", "body": "<p>I am working with a project that uses python SWIG module. The module has a function:</p>\n\n<pre><code>void func(char* pin, unsigned long len);\n</code></pre>\n\n<p>and is called from python like this:</p>\n\n<pre><code>key = \"\\x42\\x1d\\xd7\"\nmodul.func(key)\n</code></pre>\n\n<p>The strange thing is that the size of incoming array is 4 instead of 3. The last character (d7) is being converted into two characters (c3 97). I noticed that if the byte has highest bit set, then it expands in two bytes. I suppose this has something to do with string encodings or such.</p>\n\n<p>Is there another way of passing \"\\x42\\x1d\\xd7\" to SWIG module function?</p>\n\n<p>In another words: I need a way to create a string in python, which is kind of malformed. It needs to have only 3 bytes [0x42, 0x1d, 0xd7]</p>\n"}, {"tags": ["c", "pointers", "matrix", "segmentation-fault"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1434549417, "post_id": 30893749, "comment_id": 49826710, "body": "Sharing your research helps everyone. Tell us what you&#39;ve tried and why it didn\u2019t meet your needs. This demonstrates that you\u2019ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! Also see <a href=\"http://stackoverflow.com/questions/how-to-ask\">how to ask</a>"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 3, "creation_date": 1434549435, "post_id": 30893749, "comment_id": 49826721, "body": "Also, standard warning: <a href=\"http://stackoverflow.com/q/605845/1151654\">Do not cast the result of malloc</a>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1434551789, "post_id": 30893749, "comment_id": 49828563, "body": "I&#39;m curious as to why you&#39;re checking <code>pecaJogo</code> for <code>NULL</code>, but not <code>elemento</code>. And it looks like you have at least one too many levels of pointer redirection going on. A 1D matrix (array) needs one, a 2D matrix needs two, etc."}], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 1, "last_activity_date": 1434552710, "last_edit_date": 1434552710, "creation_date": 1434550739, "answer_id": 30894316, "question_id": 30893749, "link": "https://stackoverflow.com/questions/30893749/pointer-of-a-matrix-in-c/30894316#30894316", "title": "pointer of a matrix in C", "body": "<p>These two statements are where I guess you ran into your problem:  </p>\n\n<pre><code>**elemento[i] = (char**)malloc(linhaV * sizeof(char*));\n*elemento[i][j] = (char*)malloc(colunaV * sizeof(char));  \n</code></pre>\n\n<p>You created char *** above, and attempted to create an array of pointers:</p>\n\n<pre><code>char ***elemento = (char***)malloc(tam*sizeof(char**));;\n</code></pre>\n\n<p>Should be:  </p>\n\n<pre><code>//this step creates an array of pointers\nchar ***elemento = malloc(tam*sizeof(char*));\n//Note: there is no need to cast the return of [m][c][re]alloc in C  \n//      The rules are different in C++ however.\n</code></pre>\n\n<p>Now you can put elemento in a loop to allocate pointer space for each of the pointers you created:</p>\n\n<pre><code>//this step creates an array pointers for each element of the array created above: \nfor(i=0;i&lt;tam;i++) //assuming size is also tam (you specified nothing else)\n{\n     elemento[i] = malloc(tam*sizeof(char *));//each ith element will \n                                              //now have tam elements of its own.\n} \n</code></pre>\n\n<p>Next, you allocate memory at each location:</p>\n\n<pre><code>for(i=0;i&lt;tam;i++)\n{\n    for(j=0;j&lt;tam;j++)\n    {\n        elemento[i][j] = malloc(someValue*sizeof(char));\n        //Note: sizeof(char) == 1, so could be:\n        //elemento[i][j] = malloc(someValue);\n    }\n}\n</code></pre>\n\n<p>Now you have a fully allocated 3D array.</p>\n\n<p><strong><em>Putting it all together, (A simple 2D example)</em></strong><br>\nWhen you create memory for a multi-dimensional array, you must create a combination of <strong><em>array of pointers</em></strong>, <em>and</em> <strong><em>memory</em></strong> for each.  For 2D example, (used for an array of strings perhaps) you could do this:</p>\n\n<pre><code>char ** allocMemory(char ** a, int numStrings, int maxStrLen)\n{\n    int i;\n    a = calloc(sizeof(char*)*(numStrings), sizeof(char*));//create array of pointers\n    for(i=0;i&lt;numStrings; i++)\n    {\n      a[i] = calloc(sizeof(char)*maxStrLen + 1, sizeof(char));//create memory at each location\n    }\n    return a;\n}\n</code></pre>\n\n<p>You must also create method to free memory:  </p>\n\n<pre><code>void freeMemory(char ** a, int numStrings)\n{\n    int i;\n    for(i=0;i&lt;numStrings; i++)\n        if(a[i]) free(a[i]);\n    free(a);\n}\n</code></pre>\n\n<p>Usage:  </p>\n\n<pre><code>char **array = {0};\n...\narray = allocMemory(array, 10, 80);\n... \nfreeMemory(array, 10);\n</code></pre>\n\n<p>Will create memory, and addresses sufficient to contain 10 arrays of 80 character strings (arrays of char), then free it.</p>\n\n<p>This could be expanded to 3D by adding another layer (for loop) of pointer creation, as shown at top of post).  In this implementation, the inner most loop always creates the actual memory for each of the address locations you create.  </p>\n"}], "owner": {"reputation": 255, "user_id": 3180783, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/100001195994568/picture?type=large", "display_name": "Rhuan Caetano", "link": "https://stackoverflow.com/users/3180783/rhuan-caetano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434552710, "creation_date": 1434549357, "question_id": 30893749, "link": "https://stackoverflow.com/questions/30893749/pointer-of-a-matrix-in-c", "title": "pointer of a matrix in C", "body": "<pre><code>tPeca* criarPecas(FILE *pFile, int tam){\n    int i = 0,linhaV,colunaV,j = 0;\n    char ***elemento = (char***)malloc(tam*sizeof(char**));; \n    tPeca *pecaJogo = (tPeca*)malloc(tam*sizeof(tPeca));\n    if(pecaJogo==NULL)\n        return NULL;\n    for(i=0;i&lt;tam;i++){\n            j=0;\n        fscanf (pFile, \"%[^;]\", pecaJogo[i].nome);  \n        fscanf (pFile, \";%d\", &amp;pecaJogo[i].qtd);    \n        fscanf (pFile, \";%d\", &amp;linhaV);\n                pecaJogo[i].linha = linhaV;\n        fscanf (pFile, \";%d\", &amp;colunaV);\n                pecaJogo[i].coluna = colunaV;\n        **elemento[i] = (char**)malloc(linhaV * sizeof(char*));\n        *elemento[i][j] = (char*)malloc(colunaV * sizeof(char));\n        j++;\n    }\n    return pecaJogo;\n}\n</code></pre>\n\n<p>*** elemento is a pointer of a matriz, i think that i have problem with malloc... I received Segmentation Fault</p>\n"}, {"tags": ["c", "if-statement", "nasm"], "comments": [{"owner": {"reputation": 435, "user_id": 4716013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b695ac3aec7c074d8c378fed8c04da?s=128&d=identicon&r=PG&f=1", "display_name": "prodev_paris", "link": "https://stackoverflow.com/users/4716013/prodev-paris"}, "edited": false, "score": 1, "creation_date": 1434549283, "post_id": 30893662, "comment_id": 49826595, "body": "Please add your print code for variable <code>f</code> and also the declaration of <code>k</code>. cf. <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 55, "user_id": 3032744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd852e6fceb533fbcdc4ce352010fa5?s=128&d=identicon&r=PG&f=1", "display_name": "alecarnevale", "link": "https://stackoverflow.com/users/3032744/alecarnevale"}, "reply_to_user": {"reputation": 435, "user_id": 4716013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b695ac3aec7c074d8c378fed8c04da?s=128&d=identicon&r=PG&f=1", "display_name": "prodev_paris", "link": "https://stackoverflow.com/users/4716013/prodev-paris"}, "edited": false, "score": 0, "creation_date": 1434549454, "post_id": 30893662, "comment_id": 49826738, "body": "k is a float variable. By print code you mean all the nasm code for the function dist_cent?"}, {"owner": {"reputation": 435, "user_id": 4716013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b695ac3aec7c074d8c378fed8c04da?s=128&d=identicon&r=PG&f=1", "display_name": "prodev_paris", "link": "https://stackoverflow.com/users/4716013/prodev-paris"}, "edited": false, "score": 1, "creation_date": 1434549674, "post_id": 30893662, "comment_id": 49826920, "body": "I was hopping some code allowing to reproduce your situation. And also check the assumption of the value contains in <code>f</code>. But I&#39;m not user of nasm. Anyway have you exploit the doc <a href=\"http://www.nasm.us/doc/nasmdo11.html#section-11.3\" rel=\"nofollow noreferrer\">here</a> about float numbers?"}], "owner": {"reputation": 55, "user_id": 3032744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd852e6fceb533fbcdc4ce352010fa5?s=128&d=identicon&r=PG&f=1", "display_name": "alecarnevale", "link": "https://stackoverflow.com/users/3032744/alecarnevale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434549152, "creation_date": 1434549152, "question_id": 30893662, "link": "https://stackoverflow.com/questions/30893662/truncation-of-nasm-function-returning-value", "title": "Truncation of nasm function returning value", "body": "<p>I'm using a nasm sse function returning a float value in a C program.\nIf I put this value directly in a if condition everything works perfectly but if I save it in a float variable it gets cut to an integer and then converted to a float. For example:</p>\n\n<pre><code>if(dist_cent(T,nearest_q-1,T,q,d) &gt; k){\n                        ...\n}//if   \n</code></pre>\n\n<p>dist_cent is my nasm function and this way I get 245.73465 as its value . If I write it like this:</p>\n\n<pre><code>float f = dist_cent(T,nearest_q-1,T,q,d);\nif(f &gt; k){\n                        ...\n}//if   \n</code></pre>\n\n<p>I get 245.000000 as f value. The returning value of the nasm function is stored at the top of the x87 stack.\nIs there an explanation and a way to avoid this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 2, "creation_date": 1434549053, "post_id": 30893540, "comment_id": 49826434, "body": "What happens in your code if you don&#39;t encounter a new line <code>\\n</code>, then <code>strchr</code> would return a <code>null</code> pointer, which you would then dereference and set to <code>\\0</code>, you should really check the result of <code>strchr</code>."}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 1, "creation_date": 1434549140, "post_id": 30893540, "comment_id": 49826496, "body": "Why use <code>fprintf(outFile, &quot;%c&quot;, line[i]);</code> over <code>fprintf(outFile, &quot;%s&quot;, line);</code>? You already null terminated it at the first newline."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3001588, "user_type": "registered", "profile_image": "https://graph.facebook.com/836373186/picture?type=large", "display_name": "AvK", "link": "https://stackoverflow.com/users/3001588/avk"}, "edited": false, "score": 0, "creation_date": 1434553084, "post_id": 30894000, "comment_id": 49829637, "body": "Thank you! Works like a charm!"}], "tags": [], "owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "is_accepted": false, "score": 3, "last_activity_date": 1434553040, "last_edit_date": 1434553040, "creation_date": 1434550040, "answer_id": 30894000, "question_id": 30893540, "link": "https://stackoverflow.com/questions/30893540/c-fgets-stuck-in-beginning-of-file/30894000#30894000", "title": "c fgets stuck in beginning of file", "body": "<p>I changed the contents of the line:</p>\n\n<pre><code>*(strchr(line, '\\n')) = '\\0';\n</code></pre>\n\n<p>To</p>\n\n<pre><code>char* ptr = strchr(line, '\\n');\nif (ptr) {\n    *ptr = '\\0';\n}\n</code></pre>\n\n<p>See: <a href=\"https://ideone.com/jQr7ne\" rel=\"nofollow\">https://ideone.com/jQr7ne</a></p>\n\n<p>And it worked. The problem was, as mentioned in the comments, that you always dereferenced the return value of <code>strchr</code> even if the line contained no newline character. In my example the last line didn't. Which made the function <code>strchr</code> return <code>NULL</code> which in turn caused a runtime error.</p>\n\n<p>While I am at it, I would suggest changing the loop sending the line buffer to the output file from sending a character at a time to sending the entire buffer. Like this:</p>\n\n<pre><code>while ((fgets(line, MAX_LINE, inFile)) != NULL)\n{\n    char* ptr = strchr(line, '\\n');\n    if (ptr) {\n        *ptr = '\\0';\n    }\n\n    fputs(line, outFile);\n}\nreturn 0;\n</code></pre>\n\n<p>This eliminates a loop and a variable that is not required, and has a bit less overhead.</p>\n"}], "owner": {"reputation": 1, "user_id": 3001588, "user_type": "registered", "profile_image": "https://graph.facebook.com/836373186/picture?type=large", "display_name": "AvK", "link": "https://stackoverflow.com/users/3001588/avk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434556111, "creation_date": 1434548823, "last_edit_date": 1434553133, "question_id": 30893540, "link": "https://stackoverflow.com/questions/30893540/c-fgets-stuck-in-beginning-of-file", "title": "c fgets stuck in beginning of file", "body": "<p>Tried to use the following basic code, but the output file is filled with null charachters in an infinite loop.<br>\nAfter using <code>ftell</code> I could see that the <code>inFile</code> pointer stuck on the second char and is not proceeding.<br>\nWhere is my mistake? why is <code>fgets</code> get stuck?</p>\n\n<pre><code>char line[MAX_LINE];\n\nwhile ((fgets(line, MAX_LINE, inFile)) != NULL)\n{\n    int i = 0;\n    *(strchr(line, '\\n')) = '\\0';\n\n    while (line[i] != '\\0')\n    {\n        fprintf(outFile, \"%c\", line[i]);\n        i++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "microcontroller", "ftdi", "intel-edison"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1434552797, "post_id": 30893224, "comment_id": 49829386, "body": "I don&#39;t know if can be a counterfeit or simply is a different chip. What the Arduino clone Edison datasheet say?"}, {"owner": {"reputation": 355, "user_id": 1384222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ybKmN.png?s=128&g=1", "display_name": "stephen", "link": "https://stackoverflow.com/users/1384222/stephen"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1434553542, "post_id": 30893224, "comment_id": 49830004, "body": "Well the datasheet isn&#39;t written but the guy who designed the board says to just comment out the check..."}], "answers": [{"tags": [], "owner": {"reputation": 1593, "user_id": 4037927, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1849962973/picture?type=large", "display_name": "Mayukh Sarkar", "link": "https://stackoverflow.com/users/4037927/mayukh-sarkar"}, "is_accepted": true, "score": 0, "last_activity_date": 1435159734, "last_edit_date": 1435159734, "creation_date": 1434556845, "answer_id": 30896703, "question_id": 30893224, "link": "https://stackoverflow.com/questions/30893224/ft801-chip-id-error-on-arduino/30896703#30896703", "title": "FT801 chip id error on Arduino", "body": "<p>May be when they tested the sample code, they used a chip whose ID was 10108 but on the actual board they are using the different chip. They said rightfully..You need to comment out that line to reject any chip ID checking mechanisms. Moreover you can also edit the firmware to suit your chip ID..but before doing that please read its data sheet properly and if possible then try to cross check it several time before updating your firmware.</p>\n"}], "owner": {"reputation": 355, "user_id": 1384222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ybKmN.png?s=128&g=1", "display_name": "stephen", "link": "https://stackoverflow.com/users/1384222/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 30896703, "answer_count": 1, "score": 0, "last_activity_date": 1435159734, "creation_date": 1434548086, "question_id": 30893224, "link": "https://stackoverflow.com/questions/30893224/ft801-chip-id-error-on-arduino", "title": "FT801 chip id error on Arduino", "body": "<p>I have an Arduino clone Edison board with an FT801 graphics chip on it. While attempting to run the example sketches with the chip I encounter a chip id error. It's reporting the chip id as 3C074D54 which doesn't match the expected FT801 constant of 10108. From what I can tell the ID should be unique so why then would their sample code include:</p>\n\n<pre><code>if(FT801_CHIPID != chipid)\n</code></pre>\n\n<p>Could it be a counterfeit chip?</p>\n\n<p>Stephen</p>\n"}, {"tags": ["c", "opengl-es", "render-to-texture"], "comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1434554427, "post_id": 30893021, "comment_id": 49830622, "body": "You&#39;re not showing how you set up the texture, bind it, etc. ES 2.0 does not support depth textures, so chances are that you&#39;re trying to do something that is simply not supported."}, {"owner": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1434572650, "post_id": 30893021, "comment_id": 49842305, "body": "Thanks for the reminding. I am sure that my hardware supports <code>OES_depth_texture</code>. If not, when <code>glTexImage2D</code> is called with depth texture, glError will be raised(confirmed on Raspberry Pi)"}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "edited": false, "score": 0, "creation_date": 1434550807, "post_id": 30894101, "comment_id": 49827834, "body": "thanks. Could you explain what are the two uniforms <code>farClip, nearClip</code> ?"}, {"owner": {"reputation": 321, "user_id": 3254944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6fd9322bb80b1a20a2f4fc2f9f97fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "bvs", "link": "https://stackoverflow.com/users/3254944/bvs"}, "reply_to_user": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "edited": false, "score": 0, "creation_date": 1434551001, "post_id": 30894101, "comment_id": 49828010, "body": "near / far clipping planes of the camera used in the perspective matrix."}, {"owner": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "edited": false, "score": 0, "creation_date": 1434551959, "post_id": 30894101, "comment_id": 49828669, "body": "So do you mean my depth buffer is alright but only fragment shader has problems? I think, <code>depth = texture2D(s_depth0, v_texCoord).x;</code> means to get the first element of a vec4 right? And in my code, <code>depth.r</code> means the real depth value. If  <code>depth.r</code>  is always 1.0, is it normal? Please correct me if I am wrong."}, {"owner": {"reputation": 321, "user_id": 3254944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6fd9322bb80b1a20a2f4fc2f9f97fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "bvs", "link": "https://stackoverflow.com/users/3254944/bvs"}, "reply_to_user": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "edited": false, "score": 0, "creation_date": 1434552243, "post_id": 30894101, "comment_id": 49828883, "body": "depth.x, depth.r, and depth[0] are the same. Depth is always a single float. It looks like this is 1 because you havent converted from exponential depth to a linear depth value using the above equation. Please accept my answer if it help you."}, {"owner": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "edited": false, "score": 0, "creation_date": 1434554019, "post_id": 30894101, "comment_id": 49830345, "body": "Thanks. I&#39;ll test your method and tell tomorrow. I&#39;m not using a perspective matrix transformation explicitly, so how can I get the clipping planes information?"}, {"owner": {"reputation": 321, "user_id": 3254944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6fd9322bb80b1a20a2f4fc2f9f97fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "bvs", "link": "https://stackoverflow.com/users/3254944/bvs"}, "reply_to_user": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "edited": false, "score": 0, "creation_date": 1434554280, "post_id": 30894101, "comment_id": 49830530, "body": "Try near = .01 and far = 100-1000"}], "tags": [], "owner": {"reputation": 321, "user_id": 3254944, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6fd9322bb80b1a20a2f4fc2f9f97fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "bvs", "link": "https://stackoverflow.com/users/3254944/bvs"}, "is_accepted": false, "score": 0, "last_activity_date": 1434550285, "creation_date": 1434550285, "answer_id": 30894101, "question_id": 30893021, "link": "https://stackoverflow.com/questions/30893021/in-opengl-es-2-0-depth-texture-buffer-is-not-working-when-using-fbo-with-texture/30894101#30894101", "title": "In OpenGL ES 2.0 depth texture buffer is not working when using FBO with texture depth buffer", "body": "<p>The depth texture needs to be linearized to be seen in the viewport because it's saved in exponential form. Try this in fragment:</p>\n\n<pre><code>uniform float farClip, nearClip;\n\nfloat depth = texture2D(s_depth0, v_texCoord).x;\nfloat depthLinear = (2 * nearClip) / (farClip + nearClip - depth * (farClip - nearClip));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "is_accepted": true, "score": 1, "last_activity_date": 1434622425, "creation_date": 1434622425, "answer_id": 30912537, "question_id": 30893021, "link": "https://stackoverflow.com/questions/30893021/in-opengl-es-2-0-depth-texture-buffer-is-not-working-when-using-fbo-with-texture/30912537#30912537", "title": "In OpenGL ES 2.0 depth texture buffer is not working when using FBO with texture depth buffer", "body": "<p>I solved it finally. That reason ends up to be a lack of <code>GL_DEPTH_TEST</code> enabling from client applications. </p>\n\n<p>So if you got the same problem, be sure to enable <code>GL_DEPTH_TEST</code> by calling <code>glEnable(GL_DEPTH_TEST);</code> during OpenGL ES initialization. By default it's disabled for the sake of performance I guess.</p>\n\n<p>Thanks for all advices and answers.</p>\n"}], "owner": {"reputation": 337, "user_id": 1840385, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/aUk0Y.jpg?s=128&g=1", "display_name": "Han", "link": "https://stackoverflow.com/users/1840385/han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 894, "favorite_count": 0, "accepted_answer_id": 30912537, "answer_count": 2, "score": 1, "last_activity_date": 1434622425, "creation_date": 1434547581, "question_id": 30893021, "link": "https://stackoverflow.com/questions/30893021/in-opengl-es-2-0-depth-texture-buffer-is-not-working-when-using-fbo-with-texture", "title": "In OpenGL ES 2.0 depth texture buffer is not working when using FBO with texture depth buffer", "body": "<p>Currently I'm working on a project for rendering applications to Framebuffer Object(FBO) first, and rendering back the applications by using the FBO color and depth texture attachments in OpenGL ES 2.0 .</p>\n\n<p>Now multiple applications are rendered well with color buffers. When I'm trying to use depth information from depth texture buffer, it seems not working. </p>\n\n<p>I tried to render depth texture by sampling it with texture coordinate, it is all white. People say the grayscale may differ quite slightly, namely even in the shadow part it's near to 1.0. So I modify my fragment shader to like following:</p>\n\n<pre><code>    vec4 depth;\n    depth = texture2D(s_depth0, v_texCoord);\n\n    if(depth.r == 1.0)\n        gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n</code></pre>\n\n<p>And without surprise, it's all red.</p>\n\n<p>The application code:</p>\n\n<pre><code>void Draw ( ESContext *esContext )\n{\nUserData *userData = esContext-&gt;userData;\n\n// Clear the color buffer\nglClear ( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n// Draw a triangle\nGLfloat vVertices[] = {  0.0f,  0.5f, 0.5f, \n                       -0.5f, -0.5f,-0.5f,\n                        0.5f, -0.5f,-0.5f };\n\n// Set the viewport\nglViewport ( 0, 0, esContext-&gt;width, esContext-&gt;height );\n\n// Use the program object\nglUseProgram ( userData-&gt;programObject );\n\n// Load the vertex position\nglVertexAttribPointer ( 0, 3, GL_FLOAT, GL_FALSE, 0, vVertices );\n\nglEnableVertexAttribArray ( 0 );\n\nglDrawArrays ( GL_TRIANGLES, 0, 3 ); \n\neglSwapBuffers ( esContext-&gt;eglDisplay, esContext-&gt;eglSurface );\n}\n</code></pre>\n\n<p>So, what would be the problem, if color buffer works fine, while depth buffer doesn't work?</p>\n"}, {"tags": ["c++", "c", "winapi", "concurrency", "dbghelp"], "answers": [{"tags": [], "owner": {"reputation": 3189, "user_id": 1079036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/368d20296c0ae6df9a0dd7ddfbdec535?s=128&d=identicon&r=PG", "display_name": "Gil", "link": "https://stackoverflow.com/users/1079036/gil"}, "is_accepted": false, "score": 1, "last_activity_date": 1453634524, "last_edit_date": 1453634524, "creation_date": 1434551385, "answer_id": 30894595, "question_id": 30892913, "link": "https://stackoverflow.com/questions/30892913/synchronization-requirements-for-dbghelp-functions/30894595#30894595", "title": "Synchronization requirements for DbgHelp functions", "body": "<p>The problem is <strong>in the library</strong>: <em>\"All <code>DbgHelp</code> functions, such as this one, are single threaded\"</em>.</p>\n\n<p>Therefore, any process invoking this library will have to make sure that only one single thread is using the <code>DbgHelp</code> functions simultaneously.</p>\n\n<p>Just use a lock before you use <code>DbgHelp</code>, that is, if your program using <code>DbgHelp</code> is multi-threaded (otherwise there's no problem).</p>\n\n<p>Another way to remove this limitation is to add a (per-thread) <code>context</code> to the <code>DbgHelp</code> library: you move all (file-scope) <code>static</code> and (program-scope) <code>global</code> variables in a C structure passed as an argument to all library function calls.</p>\n"}], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453634524, "creation_date": 1434547309, "question_id": 30892913, "link": "https://stackoverflow.com/questions/30892913/synchronization-requirements-for-dbghelp-functions", "title": "Synchronization requirements for DbgHelp functions", "body": "<p>I recently implemented a utility to write user-mode dumps using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680360.aspx\" rel=\"nofollow\">MiniDumpWriteDump</a> (part of the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679309.aspx\" rel=\"nofollow\">Debug Help Library</a>). The implementation is separated into its own process. A target process can launch this utility and communicate with it to trigger writing a minidump.</p>\n\n<p>This is all working as expected. I am not sure, though, how to interpret the rules with respect to concurrency for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680360.aspx\" rel=\"nofollow\">MiniDumpWriteDump</a>:</p>\n\n<blockquote>\n  <p>All DbgHelp functions, such as this one, are single threaded. Therefore, calls from more than one thread to this function will likely result in unexpected behavior or memory corruption. To avoid this, you must synchronize all concurrent calls from more than one thread to this function.</p>\n</blockquote>\n\n<p>Does the above refer to calls from different threads to a <strong>single process</strong>? Or do concurrent calls also require synchronization, if <code>MiniDumpWriteDump</code> is called in different processes (e.g. when each target process launches its own utility process)?</p>\n"}, {"tags": ["c", "pointers", "comparison"], "comments": [{"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1434547525, "post_id": 30892842, "comment_id": 49825145, "body": "If you want to compare <code>int a</code> members of the <code>foo2_struct</code>s they point to (rather than the values of the pointers themselves, I think you just return <code>a.b-&gt;a - b.b-&gt;a</code> when <code>cmp</code> is zero."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1434547745, "post_id": 30892842, "comment_id": 49825331, "body": "you are copying the struct. i bet that&#39;s not necessary. change it to pointer operation should be better."}, {"owner": {"reputation": 435, "user_id": 4716013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b695ac3aec7c074d8c378fed8c04da?s=128&d=identicon&r=PG&f=1", "display_name": "prodev_paris", "link": "https://stackoverflow.com/users/4716013/prodev-paris"}, "edited": false, "score": 0, "creation_date": 1434547796, "post_id": 30892842, "comment_id": 49825384, "body": "When you say <i>how to continue???</i> You may decide what is the most relevant for sorting &#39;a&#39; or &#39;b&#39; value! Please think of the order you want and give us an example."}, {"owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "reply_to_user": {"reputation": 435, "user_id": 4716013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b695ac3aec7c074d8c378fed8c04da?s=128&d=identicon&r=PG&f=1", "display_name": "prodev_paris", "link": "https://stackoverflow.com/users/4716013/prodev-paris"}, "edited": false, "score": 0, "creation_date": 1434548092, "post_id": 30892842, "comment_id": 49825652, "body": "@prodev_paris I think I&#39;ve run into the xy problem. The next thing I need to do is delete duplicates, that&#39;s why I&#39;m so concerned about the cases in which this function might return 0"}, {"owner": {"reputation": 435, "user_id": 4716013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b695ac3aec7c074d8c378fed8c04da?s=128&d=identicon&r=PG&f=1", "display_name": "prodev_paris", "link": "https://stackoverflow.com/users/4716013/prodev-paris"}, "edited": false, "score": 0, "creation_date": 1434548376, "post_id": 30892842, "comment_id": 49825870, "body": "@Dunno if your concern is more like comparing equality of struct please see :<a href=\"http://stackoverflow.com/a/141724/4716013\">stackoverflow.com/a/141724/4716013</a> But in fact it said that you have to code it yourself ;)"}], "answers": [{"comments": [{"owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "edited": false, "score": 0, "creation_date": 1434547654, "post_id": 30893027, "comment_id": 49825256, "body": "That was a typo, sorry!"}], "tags": [], "owner": {"reputation": 435, "user_id": 4716013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b695ac3aec7c074d8c378fed8c04da?s=128&d=identicon&r=PG&f=1", "display_name": "prodev_paris", "link": "https://stackoverflow.com/users/4716013/prodev-paris"}, "is_accepted": false, "score": 1, "last_activity_date": 1434548577, "last_edit_date": 1434548577, "creation_date": 1434547590, "answer_id": 30893027, "question_id": 30892842, "link": "https://stackoverflow.com/questions/30892842/compare-structs-with-pointer-members/30893027#30893027", "title": "Compare structs with pointer members", "body": "<p>Simply replace </p>\n\n<pre><code>int cmp = a.a - b.a;\n[...]\nif (a.b == b.b)\n</code></pre>\n\n<p>by</p>\n\n<pre><code>int cmp = foo1a.a - foo1b.a;\n[...]\nif (foo1a.b == foo1b.b)\n</code></pre>\n\n<p>Since you must use the structure not void pointers...</p>\n\n<p>EDIT</p>\n\n<p>In addition you may compare the value <em>inside</em> the struct not the pointer to the struct (but I do not know your goal anyway...)\nSo replace</p>\n\n<pre><code>if (foo1a.b == foo1b.b)\n</code></pre>\n\n<p>by</p>\n\n<pre><code>if (foo1a.b-&gt;a == foo1b.b-&gt;a)\n</code></pre>\n\n<p>Note: I let you handle the NULL scenario :)</p>\n"}], "owner": {"reputation": 3332, "user_id": 2266261, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/syTtz.jpg?s=128&g=1", "display_name": "Dunno", "link": "https://stackoverflow.com/users/2266261/dunno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1434548577, "creation_date": 1434547138, "last_edit_date": 1434547633, "question_id": 30892842, "link": "https://stackoverflow.com/questions/30892842/compare-structs-with-pointer-members", "title": "Compare structs with pointer members", "body": "<p>I need to write a comparison function for <code>qsort</code> for structs with pointer members. Let's say I have</p>\n\n<pre><code>struct foo2_struct\n{\n    int a;\n}\n\nstruct foo1_struct\n{\n    int a;\n    struct foo2_struct *b;\n}\n</code></pre>\n\n<p>Here's what I have:</p>\n\n<pre><code>int cmp_foo1(const void *a, const void *b)\n{\n    struct foo1_struct foo1a = *((struct foo1_struct) a);\n    struct foo1_struct foo1b = *((struct foo1_struct) b);\n    int cmp = foo1a.a - foo1b.a;\n    if (cmp == 0)\n    {\n        if (foo1a.b == foo1b.b)\n            return 0;\n        //how to continue???\n    }\n    return cmp;\n}\n</code></pre>\n\n<p>Note that <code>foo2_struct</code> member <code>b</code> is not unique, as in, two different variables of this type can have the same value of <code>b</code>.</p>\n"}, {"tags": ["c", "linux", "operating-system", "kernel"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1434546922, "post_id": 30892632, "comment_id": 49824629, "body": "Have a look at the glibc source: that implements the POSIX C interface and only passes syscalls down to the kernel where necessary. For example, <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/sem_init.c;h=575b661f624cbb2aff0bf6f18187e063e9655443;hb=HEAD\" rel=\"nofollow noreferrer\">sem_init.c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 3, "last_activity_date": 1434547058, "creation_date": 1434547058, "answer_id": 30892819, "question_id": 30892632, "link": "https://stackoverflow.com/questions/30892632/posix-semaphores-source-code-location-in-linux/30892819#30892819", "title": "Posix Semaphores source code location in linux", "body": "<p>Unlike the older <a href=\"http://linux.die.net/man/7/svipc\" rel=\"nofollow\">\"SysV IPC\"</a> semaphores (<code>semctl</code>, <code>semop</code>, etc), the POSIX semaphore API is not implemented directly by the kernel.  Instead, the C library implements it on top of the <a href=\"http://linux.die.net/man/2/futex\" rel=\"nofollow\"><code>futex</code></a> generic synchronization primitive.</p>\n\n<p>The code you are looking for is in the <a href=\"https://sourceware.org/git/?p=glibc.git;a=tree;f=nptl\" rel=\"nofollow\"><code>nptl</code></a> subdirectory of the GNU libc source tree.  You may also have to go digging around in <a href=\"https://sourceware.org/git/?p=glibc.git;a=tree;f=sysdeps\" rel=\"nofollow\"><code>sysdeps</code></a> to find all of it.</p>\n"}], "owner": {"reputation": 37, "user_id": 4584605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3ac31d673bb72cfc8efb082d835c8d?s=128&d=identicon&r=PG&f=1", "display_name": "NDPrasad", "link": "https://stackoverflow.com/users/4584605/ndprasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1300, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1434547058, "creation_date": 1434546641, "question_id": 30892632, "link": "https://stackoverflow.com/questions/30892632/posix-semaphores-source-code-location-in-linux", "title": "Posix Semaphores source code location in linux", "body": "<p>I have started learning semaphores concept in Operating System.\nI am using POSIX semaphores in linux. I have used sem_init(), sem_wait() and sem_post() for initializing, decrementing and incrementing semaphore variables.</p>\n\n<p>I have seen Function declarations given in semaphore.h file.</p>\n\n<p>But I couldn't find source code of these above functions. I have gone through some kernel source files but I couldn't find them. From where can I get these source code files?</p>\n\n<p>I am using linux 3.6.11-4 kernel.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "arrays", "pointer-to-pointer"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1434545665, "post_id": 30892206, "comment_id": 49823590, "body": "no, that&#39;s a pointer-to-array. its exact type is <code>char (*)[10]</code>, a. k. a. pointer-to-array-of-10-<code>char</code>s. By the way, <a href=\"http://cdecl.org\" rel=\"nofollow noreferrer\">cdecl.org</a>\u2026"}, {"owner": {"reputation": 796, "user_id": 2447233, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/21bbfcdb48036eaeddcf645bb9e99df9?s=128&d=identicon&r=PG", "display_name": "DiBosco", "link": "https://stackoverflow.com/users/2447233/dibosco"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1434546234, "post_id": 30892206, "comment_id": 49824040, "body": "So, if that &amp;dataArray is passed to a function that is expecting a pointer to a char, the compiler should give a warning? In this particular instance if you incremented the pointer, the address should increment by ten?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1434560038, "post_id": 30892206, "comment_id": 49834613, "body": "yes, that&#39;s correct."}], "answers": [{"comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434546753, "post_id": 30892273, "comment_id": 49824502, "body": "is <code>dataArray</code> not also a correct representation of pointer to array?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1434547114, "post_id": 30892273, "comment_id": 49824788, "body": "@ryyker Updated my answer. Please have a look :-)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1434548699, "post_id": 30892273, "comment_id": 49826134, "body": "<i>None of them is a pointer-to-pointer here. They are just pointer with different types</i> is the key phrase that clearly summarizes the bullet points you provide in your response.  Good clarification."}, {"owner": {"reputation": 796, "user_id": 2447233, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/21bbfcdb48036eaeddcf645bb9e99df9?s=128&d=identicon&r=PG", "display_name": "DiBosco", "link": "https://stackoverflow.com/users/2447233/dibosco"}, "edited": false, "score": 0, "creation_date": 1434551463, "post_id": 30892273, "comment_id": 49828334, "body": "I&#39;m well aware that &amp;dataArray[0] and dataArray are the same - and both pointers to a char, I as much as said it in the original post. :) I&#39;m still not sure of whether the compiler should have given a warning or error because he was passing, what I now believe to be a pointer to an array, rather than a pointer to a char. Also, in this particular instance if you incremented the pointer to the array as this is, the address should increment by ten because it&#39;s an array of ten chars?"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 796, "user_id": 2447233, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/21bbfcdb48036eaeddcf645bb9e99df9?s=128&d=identicon&r=PG", "display_name": "DiBosco", "link": "https://stackoverflow.com/users/2447233/dibosco"}, "edited": false, "score": 2, "creation_date": 1434560109, "post_id": 30892273, "comment_id": 49834663, "body": "@DiBosco No, that is wrong. ` &amp;dataArray[0]` and <code>dataArray</code> are not the same. The former is the pointer to the first element of the array <code>dataArray</code>, whereas the second is the array itself. <b>An array is NOT a pointer!!!</b>"}, {"owner": {"reputation": 796, "user_id": 2447233, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/21bbfcdb48036eaeddcf645bb9e99df9?s=128&d=identicon&r=PG", "display_name": "DiBosco", "link": "https://stackoverflow.com/users/2447233/dibosco"}, "edited": false, "score": 0, "creation_date": 1434561631, "post_id": 30892273, "comment_id": 49835570, "body": "Really? I&#39;ve often seen the two as interchangeable and that claim goes directly against what others have said here!"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 796, "user_id": 2447233, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/21bbfcdb48036eaeddcf645bb9e99df9?s=128&d=identicon&r=PG", "display_name": "DiBosco", "link": "https://stackoverflow.com/users/2447233/dibosco"}, "edited": false, "score": 1, "creation_date": 1434636221, "post_id": 30892273, "comment_id": 49872411, "body": "@DiBosco Yeah, really. Go read the standard. &quot;An array is often implicitly converted to a pointer&quot; is not the same as &quot;an array is a pointer&quot;. Also, try printing the result of <code>sizeof(dataArray)</code> and <code>sizeof(&amp;dataArray[0])</code>. And read <a href=\"https://stackoverflow.com/questions/4607128/in-c-are-arrays-pointers-or-used-as-pointers\">this</a>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488193891, "post_id": 30892273, "comment_id": 72108017, "body": "&quot;Apart from that, the value will be the same&quot; should rather read: &quot;they point to the same address... <code>&amp;dataArray[0]</code> and <code>&amp;dataArray</code> need not be compatible."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1488194423, "post_id": 30892273, "comment_id": 72108362, "body": "@AnttiHaapala Thank you sir for the advice, makes perfect sense, updated accordingly."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 9, "last_activity_date": 1488194204, "last_edit_date": 1488194204, "creation_date": 1434545726, "answer_id": 30892273, "question_id": 30892206, "link": "https://stackoverflow.com/questions/30892206/is-this-a-pointer-to-a-pointer-of-the-start-of-an-array/30892273#30892273", "title": "Is this a pointer to a pointer of the start of an array?", "body": "<ul>\n<li><code>&amp;dataArray[0]</code> is of type <code>char *</code>. That is a pointer to <code>char</code>.</li>\n<li><code>dataArray</code> is of type <code>char[10]</code></li>\n<li><code>&amp;dataArray</code> will be of type <code>char (*)[10]</code>. That is a pointer-to-array.</li>\n</ul>\n\n<p>Apart from that, the <em>value</em> will be same, i.e., they point to the same address but their types need not be compatible.</p>\n\n<p>None of them is a <em>pointer-to-pointer</em> here. They are just pointer with different types.</p>\n\n<p><sup>Note: Because the array decaying property, <code>char [100]</code> will decay to a <code>char *</code>, for example, when passed as an agument of a function. </sup></p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 4936024, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/G9uc6.jpg?s=128&g=1", "display_name": "Kunal Saini", "link": "https://stackoverflow.com/users/4936024/kunal-saini"}, "is_accepted": false, "score": 0, "last_activity_date": 1434546860, "creation_date": 1434546860, "answer_id": 30892721, "question_id": 30892206, "link": "https://stackoverflow.com/questions/30892206/is-this-a-pointer-to-a-pointer-of-the-start-of-an-array/30892721#30892721", "title": "Is this a pointer to a pointer of the start of an array?", "body": "<p>dataArray and &amp;dataArray[0] points to the address of the first index of the array so they are the same thing but &amp;dataArray will point to the address of the whole array or we can say it will give the address where the whole 10 index array is located(as a whole)</p>\n"}], "owner": {"reputation": 796, "user_id": 2447233, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/21bbfcdb48036eaeddcf645bb9e99df9?s=128&d=identicon&r=PG", "display_name": "DiBosco", "link": "https://stackoverflow.com/users/2447233/dibosco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1488194204, "creation_date": 1434545580, "last_edit_date": 1437809430, "question_id": 30892206, "link": "https://stackoverflow.com/questions/30892206/is-this-a-pointer-to-a-pointer-of-the-start-of-an-array", "title": "Is this a pointer to a pointer of the start of an array?", "body": "<p>I've just been helping someone out with some code. He had this:</p>\n\n<pre><code>char dataArray[10];\n</code></pre>\n\n<p>Then wanted to get a pointer to the start of the array. Rather than use:</p>\n\n<pre><code>&amp;dataArray[0]\n</code></pre>\n\n<p>or just </p>\n\n<pre><code>dataArray\n</code></pre>\n\n<p>He used </p>\n\n<pre><code>&amp;dataArray\n</code></pre>\n\n<p>Did he end up with a pointer to a pointer there? I'm not sure what <code>&amp;dataArray</code> would give him.</p>\n"}, {"tags": ["c", "arrays", "string", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434545197, "post_id": 30892020, "comment_id": 49823215, "body": "<code>scanf (&quot;%s&quot;, &amp;s1);</code> --&gt; <code>scanf (&quot;%24s&quot;, s1);</code>, same for <code>s2</code>"}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "edited": false, "score": 0, "creation_date": 1434557111, "post_id": 30892020, "comment_id": 49832573, "body": "any particular reason for the downvote? On both the question and the first answer?!"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434547667, "post_id": 30892072, "comment_id": 49825266, "body": "@RhysHinkson regarding buffer size? I&#39;ll add a line."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1434547831, "last_edit_date": 1434547831, "creation_date": 1434545254, "answer_id": 30892072, "question_id": 30892020, "link": "https://stackoverflow.com/questions/30892020/concatenating-uppercase-letters-of-two-separate-strings-in-c/30892072#30892072", "title": "concatenating uppercase letters of two separate strings in c", "body": "<p>In your code, in the usage of <a href=\"http://linux.die.net/man/3/strcat\" rel=\"nofollow\"><code>strcat()</code></a></p>\n\n<pre><code> strcat (s1, s2);\n</code></pre>\n\n<p><code>s1</code> is probably not having enough memory to hold the concatenated string. In that case, it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>From the man page,</p>\n\n<blockquote>\n  <p>If <code>dest</code> is not large enough, program behavior is unpredictable; buffer overruns are a favorite avenue for attacking secure programs.</p>\n</blockquote>\n\n<p>As per your requirement</p>\n\n<blockquote>\n  <p><code>The maximum size of each string is 25</code></p>\n</blockquote>\n\n<p>You need a destination buffer of length 25 X 2 (for <code>char</code>s) + 1 (for null).</p>\n\n<p>Also, it indicates, you need <code>s1</code> and <code>s2</code> to have <code>26</code> elements, each, for accommodating the null.</p>\n\n<p>As per your requirement, there are certain design changes required to your program, as</p>\n\n<ol>\n<li><p>you need <code>s1</code> and <code>s2</code> to have <code>26</code> elements, each, for accommodating the null.</p></li>\n<li><p><code>upper</code> and <code>lower</code> both must have a size of total of the input size. Think of the scenario if <code>s1</code> and <code>s2</code> are both completely UPPERCASE (or lowercase). So, you need <code>upper[51]</code> and <code>lower[51]</code>.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1434547506, "last_edit_date": 1434547506, "creation_date": 1434546827, "answer_id": 30892704, "question_id": 30892020, "link": "https://stackoverflow.com/questions/30892020/concatenating-uppercase-letters-of-two-separate-strings-in-c/30892704#30892704", "title": "concatenating uppercase letters of two separate strings in c", "body": "<p>Here's what i have so far: :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\n#define N   25\n\nint main(void)\n{\n    char s1[N];\n    char s2[N];\n    char *upper, *lower;\n    char *p, *q;\n    size_t n1, n2;\n\n    printf( \"Please enter first string: \" );\n    fgets( s1, N, stdin );\n\n    printf( \"Please enter second string: \" );\n    fgets( s2, N, stdin );\n\n    n1 = 0; n2 = 0;\n\n    for ( p = s1; *p; ++p )\n    {\n        if ( isupper( ( unsigned char )*p ) ) ++n1;\n        else if ( islower( ( unsigned char )*p ) ) ++n2;\n    }\n\n    for ( p = s2; *p; ++p )\n    {\n        if ( isupper( ( unsigned char )*p ) ) ++n1;\n        else if ( islower( ( unsigned char )*p ) ) ++n2;\n    }\n\n    upper = NULL; lower = NULL;\n\n    if ( n1 &amp;&amp; ( upper = ( char * )malloc( n1 + 1 ) ) )\n    {\n        q = upper;\n\n        for ( p = s1; *p; ++p )\n        {\n            if ( isupper( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        for ( p = s2; *p; ++p )\n        {\n            if ( isupper( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        *q = '\\0';\n    }       \n\n    if ( n2 &amp;&amp; ( lower = ( char * )malloc( n1 + 1 ) ) )\n    {\n        q = lower;\n\n        for ( p = s1; *p; ++p )\n        {\n            if ( islower( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        for ( p = s2; *p; ++p )\n        {\n            if ( islower( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        *q = '\\0';\n    }       \n\n    if ( upper ) printf( \"Upper: %s\\n\", upper );\n    if ( lower ) printf( \"Lower: %s\\n\", lower );\n\n    free( upper );\n    free( lower );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>Please enter first string: GREENblue\nPlease enter second string: busCAR\nUpper: GREENCAR\nLower: bluebus\n</code></pre>\n\n<p>If your compiler supports Variable Length Arrays then you could use VLA(s) instead of the dynamically allocated arrays.</p>\n\n<p>Here is a program that uses VLA</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\n#define N   25\n\nint main(void)\n{\n    char s1[N];\n    char s2[N];\n\n    printf( \"Please enter first string: \" );\n    fgets( s1, N, stdin );\n\n    printf( \"Please enter second string: \" );\n    fgets( s2, N, stdin );\n\n    size_t n1 = 0, n2 = 0;\n\n    for ( const char *p = s1; *p; ++p )\n    {\n        if ( isupper( ( unsigned char )*p ) ) ++n1;\n        else if ( islower( ( unsigned char )*p ) ) ++n2;\n    }\n\n    for ( const char *p = s2; *p; ++p )\n    {\n        if ( isupper( ( unsigned char )*p ) ) ++n1;\n        else if ( islower( ( unsigned char )*p ) ) ++n2;\n    }\n\n\n    char upper[n1 + 1];\n    char lower[n2 + 1];\n\n    if ( n1 )\n    {\n        char *q = upper;\n\n        for ( const char *p = s1; *p; ++p )\n        {\n            if ( isupper( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        for ( const char *p = s2; *p; ++p )\n        {\n            if ( isupper( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        *q = '\\0';\n    }       \n\n    if ( n2 )\n    {\n        char *q = lower;\n\n        for ( const char *p = s1; *p; ++p )\n        {\n            if ( islower( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        for ( const char *p = s2; *p; ++p )\n        {\n            if ( islower( ( unsigned char )*p ) ) *q++ = *p;\n        }\n\n        *q = '\\0';\n    }       \n\n    if ( n1 ) printf( \"Upper: %s\\n\", upper );\n    if ( n2 ) printf( \"Lower: %s\\n\", lower );\n\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5019642, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uoBC-ndBAAo/AAAAAAAAAAI/AAAAAAAAB5Q/c32Ffw4wKPU/photo.jpg?sz=128", "display_name": "TriniProgrammer", "link": "https://stackoverflow.com/users/5019642/triniprogrammer"}, "edited": false, "score": 0, "creation_date": 1434549184, "post_id": 30893003, "comment_id": 49826525, "body": "yes :) this worked and i understand it thanks very much all of you for the assistance i&#39;ll keep all your pointers in mind...thanks again"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434560965, "post_id": 30893003, "comment_id": 49835174, "body": "@Pandrei Minor: <code>for (i=0; i&lt;strlen(s1); ...</code> unnecessarily recalculates the length of a string, which takes <code>n</code> time - and this is done<code>n</code> times so <code>O(n*n)</code>.  Better to <code>len = strlen(s1); for (i=0; i&lt;len; ...</code>  Obviously not a big issue with a string of size 25."}, {"owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434615279, "post_id": 30893003, "comment_id": 49857503, "body": "@chux actually that is not true, the compiler will precompute the value of strlen(s1)/strlen(s2) even before if gets to the for loops as part of the optimization process. So it&#39;s actually the same as doing it explicitly in the code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434635186, "post_id": 30893003, "comment_id": 49871498, "body": "@Pandrei A compiler may do that optimization only if if &quot;knows&quot; is the <code>strlen()</code> we all know and love and not some other <code>strlen()</code> that has side effects.  Further, that single call, as you comment, can only be employed if the compiler analyzes all possible execution paths in the loop to insure <code>s1</code> did not change.  This is a tall order that many compilers simply can not meet.  See <a href=\"http://stackoverflow.com/questions/2049480/how-many-times-will-strlen-be-called-in-this-for-loop\" title=\"how many times will strlen be called in this for loop\">stackoverflow.com/questions/2049480/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4683, "user_id": 2978901, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4c47814ee6a385d2cf6447d75ac1d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pandrei", "link": "https://stackoverflow.com/users/2978901/pandrei"}, "is_accepted": true, "score": -1, "last_activity_date": 1434560754, "last_edit_date": 1434560754, "creation_date": 1434547516, "answer_id": 30893003, "question_id": 30892020, "link": "https://stackoverflow.com/questions/30892020/concatenating-uppercase-letters-of-two-separate-strings-in-c/30893003#30893003", "title": "concatenating uppercase letters of two separate strings in c", "body": "<p>I think you got the general idea but missed a few details which are important:</p>\n\n<ul>\n<li><p>don't use <code>strcat</code> to concatenate the two strings. You already have each one of them in their own buffer plus, if you are going to do this you have better make sure you have enough memory for the larger resulting string.</p></li>\n<li><p><code>if (s1[i]&gt;=65 &amp;&amp; s1[i] &lt;= 90)</code> this condition is good to check for upper case letters but it's negation leaves you with everything else, which includes lower case letters, numbers, etc. So it better to have 3 cases (uppercase, lowercase, everything else) just to be safe).</p></li>\n<li><p>if you are going to print the content of the upper/lower arrays, make sure you append the <code>'\\0'</code> character so they are interpreted as strings by your print function.</p>\n\n<pre><code>j=0; //iterator for lower\nk=0; //iterator for upper\nfor (i=0; i&lt;strlen(s1); i++)\n{\n    if (s1[i]&gt;='A' &amp;&amp; s1[i] &lt;= 'Z') // a bit more clear\n    {\n        upper[k++] = s1[i];\n    }\n    else\n    {\n        if (s1[i]&gt;='a' &amp;&amp; s1[i] &lt;= 'z')\n        {\n             lower[j++] = s1[i];\n        }\n        else\n        {\n            //print something or just exit...\n        }\n     }\n}\n\nfor (i=0; i&lt;strlen(s2); i++)\n{\n    if (s2[i]&gt;='A' &amp;&amp; s2[i] &lt;= 'Z') // a bit more clear\n    {\n        upper[k++] = s2[i];\n    }\n    else\n    {\n        if (s2[i]&gt;='a' &amp;&amp; s2[i] &lt;= 'z')\n        {\n            lower[j++] = s2[i];\n        }\n        else\n        {\n             //print something or just exit...\n        }\n    }\n}\n//add the string terminator character\nlower[j] = '\\0';\nupper[k] = '\\0';\n\n//print the result\nprintf (\"Upper: %s\\n\", upper);\nprintf (\"Lower: %s\\n\", lower);\n</code></pre></li>\n</ul>\n\n<p>This should do the job.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1434561194, "post_id": 30896289, "comment_id": 49835335, "body": "Detail: <code>scanf(&quot;%s&quot;, &amp;s1);</code> (which should be <code>scanf(&quot;%s&quot;, s1);</code> or better <code>scanf(&quot;%24s&quot;, s1);</code>) will not save a <code>&#39;\\n&#39;</code> in <code>s1</code>.  Code has trouble if user input exceeds 24 non-white-space characters, not 23."}], "tags": [], "owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "is_accepted": false, "score": 0, "last_activity_date": 1434555732, "creation_date": 1434555732, "answer_id": 30896289, "question_id": 30892020, "link": "https://stackoverflow.com/questions/30892020/concatenating-uppercase-letters-of-two-separate-strings-in-c/30896289#30896289", "title": "concatenating uppercase letters of two separate strings in c", "body": "<p>You still have a problem: what happens if you enter a string that is longer than 23 characters? Your program will crash.</p>\n\n<p>If the maximum size is to be 25 characters, your arrays have to be dimensioned 26, not 25, to account for the terminating NULL.</p>\n\n<p>Then you have to set the s1[N-1]='\\0' and s2[N-1] = '\\n'  for safety.\nIf you enter something too long for the first string, the second string will end up being the residual characters, ignoring anything you entered after the prompt for the second string.</p>\n"}], "owner": {"reputation": 11, "user_id": 5019642, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uoBC-ndBAAo/AAAAAAAAAAI/AAAAAAAAB5Q/c32Ffw4wKPU/photo.jpg?sz=128", "display_name": "TriniProgrammer", "link": "https://stackoverflow.com/users/5019642/triniprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "accepted_answer_id": 30893003, "answer_count": 4, "score": 0, "last_activity_date": 1434560754, "creation_date": 1434545105, "last_edit_date": 1434547542, "question_id": 30892020, "link": "https://stackoverflow.com/questions/30892020/concatenating-uppercase-letters-of-two-separate-strings-in-c", "title": "concatenating uppercase letters of two separate strings in c", "body": "<p>I am doing practice questions for an upcoming exam but cant seem to figure out a question where the objective is:</p>\n\n<p>Write a C program to read two strings <code>s1</code> and <code>s2</code>. The maximum size of each string is 25. Form two new strings called <code>upper</code> and <code>lower</code>. Lower consists of the lowercase letters of <code>s1</code> and <code>s2</code> concatenated while <code>upper</code> contains the concatenation of the uppercase letters of both strings. </p>\n\n<p>eg: \nInput:</p>\n\n<blockquote>\n  <p>s1: GREENblue<br> s2: busCAR</p>\n</blockquote>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>upper: GREENCAR<br> lower: bluebus</p>\n</blockquote>\n\n<p>I've been attempting this for a few days but have not been able to completely figure it out.</p>\n\n<p>Here's what I have so far: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n#include &lt;conio.h&gt;\n\nint main()\n{\n    int i, j;\n    char s1[25];\n    char s2[25];\n    char upper[25];\n    char lower[25];\n\n    printf (\"Please enter first string: \");\n    scanf (\"%s\", &amp;s1);\n    printf (\"Please enter second string: \");\n    scanf (\"%s\", &amp;s2);\n\n    strcat (s1, s2);\n\n    for (i=0; i&lt;strlen(s1); i++)\n    {\n        if (s1[i]&gt;=65 &amp;&amp; s1[i] &lt;= 90)\n        {\n            upper[i] = s1[i];\n        }\n        else\n        {\n            lower[i] = s1[i];\n        }\n    }\n    printf (\"Upper: %s\\n\", upper);\n    printf (\"Lower: %s\\n\", lower);\n}\n</code></pre>\n"}, {"tags": ["c", "integer", "unsigned"], "comments": [{"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1434544126, "post_id": 30891573, "comment_id": 49822423, "body": "The interesting bit probably happens when you assign <code>-1</code> (a literal with type <code>int</code>) to the <code>unsigned int b</code>."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1434544219, "post_id": 30891573, "comment_id": 49822516, "body": "@BrianCain indeed, see <a href=\"http://stackoverflow.com/q/22801069/1708801\">Using -1 as a flag value for unsigned (size_t) types</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1434544474, "last_edit_date": 1434544474, "creation_date": 1434544122, "answer_id": 30891632, "question_id": 30891573, "link": "https://stackoverflow.com/questions/30891573/how-the-type-of-the-result-is-decided-based-on-type-of-operand/30891632#30891632", "title": "How the type of the result is decided based on type of operand?", "body": "<p>In case of your code, the \"usual arithmetic conversions\" rule will apply for the operands of <code>+</code> operator, so, in case of</p>\n\n<pre><code>  a + b;\n</code></pre>\n\n<p>as per the integer promotions rule, <code>a</code> will be promoted to <code>unsigned int</code> before the addition. The result will also be of type <code>unsigned int</code>.</p>\n\n<p>To quote <code>C11</code> standard, chapter \u00a76.3.1.8</p>\n\n<blockquote>\n  <p>..[..]... Otherwise, if the operand that has unsigned integer type has rank greater or\n  equal to the rank of the type of the other operand, then the operand with\n  signed integer type is converted to the type of the operand with unsigned\n  integer type.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1434544291, "creation_date": 1434544291, "answer_id": 30891712, "question_id": 30891573, "link": "https://stackoverflow.com/questions/30891573/how-the-type-of-the-result-is-decided-based-on-type-of-operand/30891712#30891712", "title": "How the type of the result is decided based on type of operand?", "body": "<p>There's a set of rules called the <em>usual arithmetic conversions</em> that specify the conversions applied when arithmetic operators are used. (If you search that term on here you will find the full list easily)</p>\n\n<p>In this case, the <code>int</code> is promoted to <code>unsigned int</code>, retaining the value <code>1</code>, so the result of the addition is well-defined to be <code>(unsigned int)0</code>. </p>\n\n<p>Since this value is not greater than <code>INT_MAX</code>, you can store it in an <code>int</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1434545068, "creation_date": 1434545068, "answer_id": 30891996, "question_id": 30891573, "link": "https://stackoverflow.com/questions/30891573/how-the-type-of-the-result-is-decided-based-on-type-of-operand/30891996#30891996", "title": "How the type of the result is decided based on type of operand?", "body": "<p>The type of expression</p>\n\n<pre><code>a + b;\n</code></pre>\n\n<p>will be <code>unsigned int</code></p>\n\n<p>According to the C Standard )6.3.1.8 Usual arithmetic conversions)</p>\n\n<blockquote>\n  <p>2...Otherwise, both operands are converted to the unsigned integer type corresponding to the type of the operand with signed integer type</p>\n</blockquote>\n\n<p>As for the assignment of an object of unsigned type to an object of signed type with the same rank as in your example then ( C Standard, 6.3.1.3 Signed and unsigned integers) id the object of signed integer type can not represent the value of the object of unsigned integer type then</p>\n\n<blockquote>\n  <p>3 Otherwise, the new type is signed and the value cannot be\n  represented in it; either the result is implementation-defined or an\n  implementation-defined signal is raised</p>\n</blockquote>\n\n<p>If the value can be represented by the signed object then it is stored unchanged in the signed object.</p>\n"}], "owner": {"reputation": 1963, "user_id": 3287033, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/f6dcd0f36aba0da6569c9611964a44b5?s=128&d=identicon&r=PG&f=1", "display_name": "OldSchool", "link": "https://stackoverflow.com/users/3287033/oldschool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 30891712, "answer_count": 3, "score": 0, "last_activity_date": 1434545068, "creation_date": 1434543965, "question_id": 30891573, "link": "https://stackoverflow.com/questions/30891573/how-the-type-of-the-result-is-decided-based-on-type-of-operand", "title": "How the type of the result is decided based on type of operand?", "body": "<p>if we have </p>\n\n<pre><code>   int a = 1;\n   unsigned int b = -1;\n</code></pre>\n\n<p>what is the type  of expression</p>\n\n<pre><code>a + b;\n</code></pre>\n\n<p>can i use int to store the result?</p>\n"}, {"tags": ["c++", "c", "windows", "stdout", "stderr"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1434544625, "post_id": 30891458, "comment_id": 49822782, "body": "I suspect: The first one sets the standard out/error handles, but after the standard library has already used the old ones to set up stdout/stderr. The second one probably doesn&#39;t work because windows doesn&#39;t use file descriptors. The third one only works for cout/cerr because you didn&#39;t actually do anything to stdout/stderr. The last one is an ugly non-portable hack."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1434545149, "post_id": 30891458, "comment_id": 49823174, "body": "@immibis and the solution is...? Will test 3 of them on OSX in a moment."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1434545207, "post_id": 30891458, "comment_id": 49823223, "body": "I don&#39;t have a solution, which is one reason I didn&#39;t post that as part of an answer."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1434545511, "post_id": 30891458, "comment_id": 49823461, "body": "@immibis Why do you call the last an ugly non-portable hack? Ugly is a matter of opinion, I&#39;d be more interested in the non-portable part."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1434545731, "post_id": 30891458, "comment_id": 49823634, "body": "None of these redirect stdout and stderr."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1434545825, "post_id": 30891458, "comment_id": 49823703, "body": "@Shark why the 4th one works, then? And what actually redirect them?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1434545826, "post_id": 30891458, "comment_id": 49823706, "body": "@AviGinsburg <code>stdout</code> and <code>stderr</code> are allowed to be constants."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 1, "creation_date": 1434546201, "post_id": 30891458, "comment_id": 49824015, "body": "@Shark The fourth one is exactly a redirect of stdout and stderr. Without saving the original pointers, the originals never get closed or restored (shameless <a href=\"http://stackoverflow.com/questions/29072499/how-to-get-rid-of-stdcout-quickly/29072916#29072916\">plug</a>), but they are redirected."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1434548385, "post_id": 30891458, "comment_id": 49825876, "body": "So it looks like despite being a &quot;non-portable&quot; hack, it&#39;s the most portable hack... ;)"}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1434549192, "post_id": 30891458, "comment_id": 49826533, "body": "@AviGinsburg yeah :) still don&#39;t understand why dup2 doesn&#39;t work on windows"}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "edited": false, "score": 0, "creation_date": 1434549534, "post_id": 30891458, "comment_id": 49826800, "body": "and yes, I have tried MSDN _dup2 example, no luck"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1434552252, "post_id": 30891458, "comment_id": 49828892, "body": "<a href=\"http://stackoverflow.com/a/21376268/2899559\">This</a> shows the use of _dup. Does that qualify/work for you?"}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1434552442, "post_id": 30891458, "comment_id": 49829088, "body": "@AviGinsburg it uses reopen, I can&#39;t use it, cause I already have file opened."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434583487, "post_id": 30891458, "comment_id": 49846828, "body": "Note that if a third party libraries use a different C runtime than the one you&#39;re using, none of these will work."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434593120, "post_id": 30891458, "comment_id": 49849000, "body": "@HarryJohnston well, I use the source code, so this shouldn&#39;t be a problem"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1434593493, "post_id": 30891458, "comment_id": 49849094, "body": "@Sergi0: yes, that should be OK.  It does also give you another option: fix the libraries. :-)   If they&#39;re open source, you could even donate the fixes back to the project.  (A library really shouldn&#39;t be writing to stdout/stderr without explicit permission from the application.  At the very least, there should be a way to tell the library where to send the logging information, even if the default is to stdout/stderr.)"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434663132, "post_id": 30891458, "comment_id": 49889010, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/wk2h68td.aspx\" rel=\"nofollow noreferrer\"><code>freopen</code></a> is the portable way to reassign a <code>FILE</code> stream. Overwriting a dereferenced <code>FILE</code> stream is not portable and could cause a memory leak, or even file corruption in a multi-threaded program."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434663330, "post_id": 30891458, "comment_id": 49889098, "body": "As to why <code>_dup2</code> doesn&#39;t work, the CRT sets the standard <code>FILE</code> streams to use file number <code>_NO_CONSOLE_FILENO</code> (-2) when the process standard handles are <code>INVALID_HANDLE_VALUE</code> or <code>NULL</code> or the file type is <code>FILE_TYPE_UNKNOWN</code>. Therefore duping to descriptors 1 and 2 has no effect on the existing <code>FILE</code> streams."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434700814, "post_id": 30891458, "comment_id": 49901143, "body": "@eryksun I can&#39;t use reopen, cause I already have the file opened"}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434701015, "post_id": 30891458, "comment_id": 49901249, "body": "@eryksun not sure why this is a problem, MSDN has an example on using dup2 for stdout with existing FILE"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434702230, "post_id": 30891458, "comment_id": 49901879, "body": "If you&#39;re not sure, then by all means check <code>fileno(stdout)</code> for a GUI program. It&#39;s -2.  <code>_dup2(_fileno(log_file.get_FILE()), 1)</code> can&#39;t affect  <code>stdout</code> if it&#39;s not actually using file descriptor 1 -- not unless you believe in magic or the power of positive thinking."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434719332, "post_id": 30891458, "comment_id": 49912715, "body": "@eryksun well, that still doesn&#39;t explain why _dup2(_fileno(log_file.get_FILE()), _fileno(stdout)) doesn&#39;t work"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434730911, "post_id": 30891458, "comment_id": 49920668, "body": "I assumed you would know that -2 is not a valid file descriptor, or at least know to check the return value (-1) and <code>errno</code> (9, <code>EBADF</code>)."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1434734189, "post_id": 30891458, "comment_id": 49922344, "body": "FYI, assigning to <code>*stdout</code> doesn&#39;t work with the new C standard library that&#39;s used by VC 14. Standard streams are now a lot more opaque. For example, you can&#39;t do something evil like directly modify <code>stdout-&gt;_file</code>, which you could do with previous CRTs."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1435056269, "post_id": 30891458, "comment_id": 50029141, "body": "@eryksun Nor <code>_fileno(stdout)</code>, neither <code>_dup(_fileno(stdout))</code> return errors."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1435335298, "post_id": 30891458, "comment_id": 50174092, "body": "I don&#39;t know how you concluded that <code>_dup</code> doesn&#39;t return an error. <code>_fileno(stdout)</code> is -2 in a GUI app, which is an invalid file descriptor. Predictably <code>_dup(_fileno(stdout))</code> does fail by returning -1 and sets <code>errno</code> to <code>EBADF</code>. I tested with VC++ versions 9, 10, and 14 (i.e. VS 2008, 2010, and 2015)."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1435335915, "post_id": 30891458, "comment_id": 50174425, "body": "@eryksun that was supposed to be _dup2. anyway, this all doesn&#39;t answer the question what to use to forward stdout to FILE*"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1435338553, "post_id": 30891458, "comment_id": 50175832, "body": "I already answered the question. Use <code>freopen</code>. You just need to get a valid file descriptor assigned to <code>stdout</code>, so you can use <code>freopen(&quot;NUL&quot;, &quot;w&quot;, stdout)</code>. Once <code>stdout</code> has a valid file descriptor (instead of -2), using <code>_dup2(_fileno(log_file.get_FILE()), _fileno(stdout))</code> will work fine. You may also need to call <code>SetStdHandle</code> to update the standard handles in the Windows process itself if a function bypasses the CRT (i.e. if it calls <code>GetStdHandle</code> and <code>WriteFile</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1434544647, "post_id": 30891812, "comment_id": 49822797, "body": "Markdown reformatted your numbers as 4/5/6/7 instead of 4/3/2/1."}, {"owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "edited": false, "score": 0, "creation_date": 1434544739, "post_id": 30891812, "comment_id": 49822865, "body": "I guess you meant 4-3-2-1 :) Well, I looked the definition of stdout it looks like this <code>#define stdout (&amp;__iob_func()[1])</code>, so I&#39;m not sure how safe is the 4th solution."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "edited": false, "score": 0, "creation_date": 1434546973, "post_id": 30891812, "comment_id": 49824666, "body": "@Sergi0 That&#39;s just an array that holds the descriptors (<code>FILE</code> pointers)."}], "tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": false, "score": 0, "last_activity_date": 1434548305, "last_edit_date": 1434548305, "creation_date": 1434544591, "answer_id": 30891812, "question_id": 30891458, "link": "https://stackoverflow.com/questions/30891458/redirecting-stdout-stderr-on-windows/30891812#30891812", "title": "Redirecting stdout/stderr on Windows", "body": "<p>From the end:</p>\n\n<ol start=\"4\">\n<li>You're changing the actual <code>FILE</code> <a href=\"http://www.cplusplus.com/reference/cstdio/stdout/\" rel=\"nofollow\"><em>pointer</em></a> to stdout and stderr. Obvious why it works. std::cout and std::cerr eventually send output to these pointers.</li>\n</ol>\n\n<p></p>\n\n<ol start=\"3\">\n<li><a href=\"http://www.cplusplus.com/reference/ios/ios/rdbuf/\" rel=\"nofollow\">std::ios.rdbuf</a> changes the <em>stream</em> where the instance of std::ios (in this case std::cout and std::cerr) send it's stream.</li>\n</ol>\n\n<p></p>\n\n<ol start=\"2\">\n<li>I never heard of it. I may do a bit of research and edit the answer.</li>\n</ol>\n\n<p></p>\n\n<ol>\n<li>Same as 2.</li>\n</ol>\n"}], "owner": {"reputation": 1034, "user_id": 1417782, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5122a8f3619f04dc800a2c7959849f46?s=128&d=identicon&r=PG", "display_name": "Sergi0", "link": "https://stackoverflow.com/users/1417782/sergi0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1666, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1434719989, "creation_date": 1434543651, "last_edit_date": 1434719989, "question_id": 30891458, "link": "https://stackoverflow.com/questions/30891458/redirecting-stdout-stderr-on-windows", "title": "Redirecting stdout/stderr on Windows", "body": "<p>I have a Windows GUI app that uses third-party libraries that print debug/error information to stdout/stderr. I have found numerous solutions for redirecting them to my log file. But only 1.5 out of 4 work as expected. I am using VS 2008 SP1 on WinXP SP3 32-bit. I didn't include error handling, but no calls return errors.\n<br /><br /></p>\n\n<pre><code>// First one:\nSetStdHandle(STD_OUTPUT_HANDLE, (HANDLE)_get_osfhandle(_fileno(log_file.get_FILE())));\nSetStdHandle(STD_ERROR_HANDLE, (HANDLE)_get_osfhandle(_fileno(log_file.get_FILE())));\n\nprintf(\"%s\", \"1 Test printf to cout!\\n\");\nfprintf(stderr, \"%s\", \"1 Test printf to cerr!\\n\");\n\nstd::cout &lt;&lt; \"1 Test print to cout!\\n\";\nstd::cerr &lt;&lt; \"1 Test print to cerr!\\n\";\n\nfflush(stdout);\nfflush(stderr);\n\n\n// Second one:\n_dup2(_fileno(log_file.get_FILE()), _fileno(stdout));\n_dup2(_fileno(log_file.get_FILE()), _fileno(stderr));\n\nprintf(\"%s\", \"2 Test printf to cout!\\n\");\nfprintf(stderr, \"%s\", \"2 Test printf to cerr!\\n\");\n\nstd::cout &lt;&lt; \"2 Test print to cout!\\n\";\nstd::cerr &lt;&lt; \"2 Test print to cerr!\\n\";\n\nfflush(stdout);\nfflush(stderr);\n\n\n// Third one:\nstd::ofstream out_stream(log_file.get_FILE());\nstd::cout.rdbuf(out_stream.rdbuf());\nstd::cerr.rdbuf(out_stream.rdbuf());\n\nprintf(\"%s\", \"3 Test printf to cout!\\n\");\nfprintf(stderr, \"%s\", \"3 Test printf to cerr!\\n\");\n\nstd::cout &lt;&lt; \"3 Test print to cout!\\n\";\nstd::cerr &lt;&lt; \"3 Test print to cerr!\\n\";\n\nfflush(stdout);\nfflush(stderr);\n\n\n// Fourth one:\n*stdout = *log_file.get_FILE();\n*stderr = *log_file.get_FILE();\n\nprintf(\"%s\", \"4 Test printf to cout!\\n\");\nfprintf(stderr, \"%s\", \"4 Test printf to cerr!\\n\");\n\nstd::cout &lt;&lt; \"4 Test print to cout!\\n\";\nstd::cerr &lt;&lt; \"4 Test print to cerr!\\n\";\n\nfflush(stdout);\nfflush(stderr);\n</code></pre>\n\n<p>After I tested them (separately, of course), I got these results:<br>\n3 Test print to cout!<br>\n3 Test print to cerr!<br>\n4 Test printf to cout!<br>\n4 Test print to cout!<br>\n4 Test printf to cerr!<br>\n4 Test print to cerr!<br></p>\n\n<p>Why does only the last solution work fully? Is it safe to use it?\n<br>\n<br>Update. XCode test results:<br>\n2 Test printf to cout!<br>\n2 Test print to cout!<br>\n2 Test printf to cerr!<br>\n2 Test print to cerr!<br>\n4 Test printf to cout!<br>\n4 Test print to cout!<br>\n4 Test printf to cerr!<br>\n4 Test print to cerr!<br>\nFirst one is obviously Windows only, and the third one fails cause there is no file stream constructor that takes FILE* parameter.</p>\n"}, {"tags": ["c++", "c", "versioning"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1434543220, "post_id": 30891232, "comment_id": 49821648, "body": "May I ask why you want/need to do this for every time you compile?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434543257, "post_id": 30891232, "comment_id": 49821687, "body": "You need persistent memory to &quot;store&quot; previous info...file i/o... Also, how do you mark the <code>revision of my code</code>? binary name?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1434543596, "post_id": 30891232, "comment_id": 49821970, "body": "You should script your building machinery to do that (e.g. your <code>Makefile</code>). And I believe it is a bad idea, you should rather register a unique id of your checkpointed source (e.g. using <a href=\"http://git-scm.com/\" rel=\"nofollow noreferrer\"><code>git</code></a>)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1434543675, "post_id": 30891232, "comment_id": 49822040, "body": "Are you using some kind of revision control tool? That would be the right tool to track your version numbers, not compiler. You don&#39;t want to change the version number while debugging, right?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1434544169, "post_id": 30891232, "comment_id": 49822462, "body": "How would the compiler even know whether the major version number has to be incremented? More than 1000 lines of code changed? Computers do exactly what they&#39;re told, you can&#39;t be vague. If you cannot specify exactly what you want, don&#39;t try to automate it."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1434544200, "post_id": 30891232, "comment_id": 49822491, "body": "The compiler can certainly not increment anything automatically. A build system (IDE or make-based), yes."}], "answers": [{"tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 0, "last_activity_date": 1434543284, "creation_date": 1434543284, "answer_id": 30891313, "question_id": 30891232, "link": "https://stackoverflow.com/questions/30891232/c-compiler-automatic-version-increment/30891313#30891313", "title": "C Compiler automatic Version increment", "body": "<p>Define Post-Build Event to run small external program. The program has to modify specific .h file. In the header file define macros like VER_MAJOR, VER_MINOR, VER_BUILD. Date/time string can also be updated. I use this method and can control the version numbers as I wish.</p>\n"}, {"tags": [], "owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1434543831, "creation_date": 1434543831, "answer_id": 30891523, "question_id": 30891232, "link": "https://stackoverflow.com/questions/30891232/c-compiler-automatic-version-increment/30891523#30891523", "title": "C Compiler automatic Version increment", "body": "<p>IMO, you do not need to do this, especially increase a number every time you compile your code.</p>\n\n<p>Set the major and minor revision manually in a header file; you should not have to do this often.</p>\n\n<p>Build number should only be related to the source control revision number (i.e. you should be able to build and rebuild any revision under source control).</p>\n\n<p>Imagine if you are a team of 5 developers, and everyone build and rebuild on their side what is the actual build number? \ndo they all update a header file ? \nwho is responsible of owning that header file ?</p>\n"}, {"tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": true, "score": 0, "last_activity_date": 1434544362, "creation_date": 1434544362, "answer_id": 30891741, "question_id": 30891232, "link": "https://stackoverflow.com/questions/30891232/c-compiler-automatic-version-increment/30891741#30891741", "title": "C Compiler automatic Version increment", "body": "<p>To set the version is not a compiler topic. This should be done in connection with a source code control / version control system like cvs/svn/git or others. Your build id should be connected to the content of your source code database to get reproducible builds from checkouts from your version control system. Or, if your code is not already committed to your database a dirty-tag should be provided and compiled in to give the user of the software a chance to see that this is not a controlled version.</p>\n\n<p>Simply counting a value in a variable can be done by a Makefile or in pre- and post-build instructions which depends on the used IDE. Sorry, for keil I have no experience...</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1434544538, "creation_date": 1434544538, "answer_id": 30891795, "question_id": 30891232, "link": "https://stackoverflow.com/questions/30891232/c-compiler-automatic-version-increment/30891795#30891795", "title": "C Compiler automatic Version increment", "body": "<p>Some compilers do support features like \"post build\", which runs a program of your choice after compiling, but that would be tricky if your program is built from multiple source files.   Not all compilers do though.</p>\n\n<p>For that reason, I wouldn't actually do this sort of thing via the compiler.   I'd do it in the build script (e.g. makefile) or by configuring the build settings in your IDE.    </p>\n\n<p>Assuming you're using <code>make</code> or similar, add a target something like <code>setversion</code> (you pick the name) that runs a program which modifies a header file which specifies the components of your version number.   So typing <code>make setversion</code> will update your version numbers.</p>\n\n<p>Optionally, that target can also - after updating the version numbers - do a <code>make clean</code> (i.e. delete all object files and executables) and <code>make all</code> (to recompile and link everything).</p>\n\n<p>I also suggest avoiding changing version numbers after each recompile.   Imagine you're busily testing and debugging code, and go through several rebuild cycles.  Do you really want the version number updated every time you recompile even one source file?    It can be done that way if you choose, but will make every rebuild take longer (and, in projects with multiple source files) you will need to take care if you want to preserve capability for incremental builds.</p>\n"}], "owner": {"reputation": 13, "user_id": 4018619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01d5dae00e35c0dbe907dc833f653539?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/4018619/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2675, "favorite_count": 0, "accepted_answer_id": 30891741, "answer_count": 4, "score": 0, "last_activity_date": 1434544538, "creation_date": 1434543061, "last_edit_date": 1434543490, "question_id": 30891232, "link": "https://stackoverflow.com/questions/30891232/c-compiler-automatic-version-increment", "title": "C Compiler automatic Version increment", "body": "<p>I'm wondering if there's a macro or a simple way to let the compiler increment either major, minor or revision of my code each time when I compile?</p>\n\n<p>By the way I'm using the ARM compiler and uVision from Keil.</p>\n"}, {"tags": ["c", "pointers", "swap"], "comments": [{"owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "edited": false, "score": 0, "creation_date": 1434543182, "post_id": 30891219, "comment_id": 49821618, "body": "Don&#39;t assume pointers and int to be the same size...<a href=\"http://stackoverflow.com/questions/4574745/is-it-safe-to-assume-that-a-pointer-is-the-size-of-an-int-in-c\" title=\"is it safe to assume that a pointer is the size of an int in c\">stackoverflow.com/questions/4574745/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1434543589, "post_id": 30891367, "comment_id": 49821965, "body": "While the size is good, it sounds like his compiler is not permitting bitwise manipulation of pointer types generally.  As you said, a test would confirm, though."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 1, "creation_date": 1434543691, "post_id": 30891367, "comment_id": 49822058, "body": "@donjuedo That&#39;s why you cast it to an integer first."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1434543420, "last_edit_date": 1495542140, "creation_date": 1434543420, "answer_id": 30891367, "question_id": 30891219, "link": "https://stackoverflow.com/questions/30891219/swap-pointers-addresses-in-c/30891367#30891367", "title": "Swap pointers addresses in C", "body": "<p>If you want to toggle the bit 5 of each pointer you can write:</p>\n\n<pre><code>nodo_superior = (Nodo *)((uintptr_t)nodo_superior ^ 16);\n</code></pre>\n\n<p><code>uintptr_t</code> is an integer type that (if exists) is guaranteed to be able to hold a pointer value without loss of information. </p>\n\n<p>It's intended that this be done by the obvious isomorphism on a flat memory model, so it should work for you (although test it first to see).</p>\n\n<p>Also, you should be using <code>%p</code> to printf a pointer, not <code>%ld</code> which causes undefined behaviour. To print <code>uintptr_t</code> <a href=\"https://stackoverflow.com/questions/5795978/string-format-for-intptr-t-and-uintptr-t\">see here</a></p>\n"}, {"tags": [], "owner": {"reputation": 1618, "user_id": 4744142, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10205509523369034/picture?type=large", "display_name": "Michel Billaud", "link": "https://stackoverflow.com/users/4744142/michel-billaud"}, "is_accepted": false, "score": 0, "last_activity_date": 1434544361, "creation_date": 1434544361, "answer_id": 30891739, "question_id": 30891219, "link": "https://stackoverflow.com/questions/30891219/swap-pointers-addresses-in-c/30891739#30891739", "title": "Swap pointers addresses in C", "body": "<p>I'm not sure I really understand what you mean by \"swap two pointers\". It seems you have a pair of nodes, and you want the compute the address of one node from the address of the other one.</p>\n\n<p>A similar problem is when you have two numbers (for exemple 1 and 2 for player number) and want to change the player number from 1 to 2 and vice-versa.  A usual trick is to compute</p>\n\n<pre><code>  opponent = (1+2) - player ;\n</code></pre>\n\n<p>You can play a similar trick with pointers, because some arithmetic is allowed :</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    struct Node x;\n    struct Node y;\n\n    printf(\"x is at %p,  y at %p\\n\", &amp;x, &amp;y);\n\n    struct Node * one = &amp;x;\n    struct Node * other = &amp;x + (&amp;y - one); // (&amp;x + &amp;y) - one\n\n    printf(\"if one is at %p,  the other is at %p\\n\", one, other);\n\n    one = &amp;y;\n    other = &amp;x + (&amp;y - one);\n\n    printf(\"if one is at %p,  the other is at %p\\n\", one, other);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2085, "user_id": 3787736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083a38739359a3cb689c5be4cd7a1985?s=128&d=identicon&r=PG", "display_name": "dho", "link": "https://stackoverflow.com/users/3787736/dho"}, "edited": false, "score": 0, "creation_date": 1434550277, "post_id": 30891875, "comment_id": 49827396, "body": "I count 3 reads and 3 writes. The &quot;smart&quot; solution you seem to deride is two reads and two writes; it just so happens that the xor breaks down to a read and write. In either case, a microbenchmark with optimizations off yields that the xor version is consistently faster, by as much as 17%."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 2085, "user_id": 3787736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083a38739359a3cb689c5be4cd7a1985?s=128&d=identicon&r=PG", "display_name": "dho", "link": "https://stackoverflow.com/users/3787736/dho"}, "edited": false, "score": 0, "creation_date": 1434550529, "post_id": 30891875, "comment_id": 49827599, "body": "No, the swap variable is temporary and held in a register. Benchmarking with optimization off does not help you optimize."}, {"owner": {"reputation": 2085, "user_id": 3787736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/083a38739359a3cb689c5be4cd7a1985?s=128&d=identicon&r=PG", "display_name": "dho", "link": "https://stackoverflow.com/users/3787736/dho"}, "edited": false, "score": 0, "creation_date": 1434550711, "post_id": 30891875, "comment_id": 49827757, "body": "Fair, with -O1, they compile to the same set of moves anyway."}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 2, "last_activity_date": 1434544773, "creation_date": 1434544773, "answer_id": 30891875, "question_id": 30891219, "link": "https://stackoverflow.com/questions/30891219/swap-pointers-addresses-in-c/30891875#30891875", "title": "Swap pointers addresses in C", "body": "<p>A swap is better performed \"the old way\", with a temporary variable.</p>\n\n<pre><code>Nodo* Swap= a; a= b; b= Swap;\n</code></pre>\n\n<p>This costs 2 reads and 2 writes.</p>\n\n<p>The \"smart\" solution</p>\n\n<pre><code>a^= 16; b^= 16;\n</code></pre>\n\n<p>costs 2 reads, 2 xors and 2 writes.</p>\n"}], "owner": {"reputation": 11, "user_id": 5019322, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oPgf5yWdOPA/AAAAAAAAAAI/AAAAAAAAAPI/vntsNjnmh5Y/photo.jpg?sz=128", "display_name": "Sergio G&#225;lvez Rojas", "link": "https://stackoverflow.com/users/5019322/sergio-g%c3%a1lvez-rojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1434544773, "creation_date": 1434543012, "question_id": 30891219, "link": "https://stackoverflow.com/questions/30891219/swap-pointers-addresses-in-c", "title": "Swap pointers addresses in C", "body": "<p>I need to do an Ultra High Performance swap of two pointers in C (the addresses, not what they point to). I know that the addresses are aligned (multiple of 16) and consecutive and I've already checked that this preserves in every execution. The code is as follows:</p>\n\n<pre><code>Nodo a __attribute__((aligned(8))), b __attribute__((aligned(4)));\nNodo *nodo_superior __attribute__((aligned(4)));\nnodo_superior = &amp;a;\nNodo * nodo_actual __attribute__((aligned(4)));\nnodo_actual=&amp;b;\nprintf(\"%ld %ld\\n\", nodo_superior, nodo_actual);\n</code></pre>\n\n<p>and the result on console is like (please, note that the first address should be \"over\"-aligned in order the next method to work):</p>\n\n<pre><code>140594404335200 140594404335216\n</code></pre>\n\n<p>Now to swap the addresses, I want to change the bit 5 of each pointer:</p>\n\n<pre><code>nodo_superior ^= 16; \nnodo_actual ^= 16;\n</code></pre>\n\n<p>but, unfortunately the C compiler does not allow this because integers can not be mixed with pointer values: it's an error, not a warning. If I try to include the pointer in an union like this:</p>\n\n<pre><code>union {\n    Nodo * nodo_actual;\n    int local_int;\n} na;\n</code></pre>\n\n<p>with the idea of doing an assigment like:</p>\n\n<pre><code>na.local_int ^= 16;\n</code></pre>\n\n<p>then the performance decreases because (I suppose) the compiler cannot apply/infer optimizations to nodo_actual if it is in an union.\nAny ideas to force the compiler to behave as I want? Of course, I could change the generated assembler but I do not consider it a good option,</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1434542650, "post_id": 30891029, "comment_id": 49821175, "body": "What exactly is <code>Release mode</code> and <code>debug mode</code> in <code>C</code>? [Hint: You&#39;re missing tags]"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1434542666, "post_id": 30891029, "comment_id": 49821190, "body": "Maybe compiler warnings are turned on only in debug mode. Check your build settings!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1434542828, "post_id": 30891029, "comment_id": 49821346, "body": "@KlasLindb&#228;ck: Please see my updated question"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434543988, "post_id": 30891029, "comment_id": 49822303, "body": "The only course of action you should consider is investigating <i>why</i> <code>InputIp</code> is not declared in the debug build (and/or why it is not called in the release build)  and then fix the problem once you have located it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434544323, "post_id": 30891029, "comment_id": 49822579, "body": "@MattMcNabb: This isn&#39;t so easy for me to check it is a complex makefile I have no clue about; fixing is OK but this software has been written I think to many devices already"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434544353, "post_id": 30891029, "comment_id": 49822596, "body": "@MattMcNabb: Maybe for this compiler it is not UB? Maybe I should ask vendors anyway?"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1434546235, "post_id": 30891029, "comment_id": 49824042, "body": "Assuming <code>s32</code> is &quot;signed 32-bit&quot; and <code>int</code> on your platform is the same, <i>and</i> your calls (which you haven&#39;t shown) wouldn&#39;t need coercion to the types listed above, then you&#39;re probably OK for existing binaries.  You should still add that line either to a header file or near the top of affected source files so that in future the compiler can either make the necessary coercions or tell you when it can&#39;t."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434546358, "post_id": 30891029, "comment_id": 49824153, "body": "@MattMcNabb: Please see updated question"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434548415, "post_id": 30891029, "comment_id": 49825894, "body": "@user70012 change the source file giving the warning so that it <code>#include</code>s the header where you found that definition.  (Or if the header is included but the definition is disabled via <code>#ifdef</code>s then investigate which ifdefs are causing it)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434549303, "post_id": 30891029, "comment_id": 49826611, "body": "@MattMcNabb: See my reasoning. I get warning as I said in the question. So, what can I deduce from it? Do I deduce that it is C89? Yes? (because if it was later C it would be error?) If yes then I provided function signature and how I use it, and there is where I need your (and maybe others) help if I am on the safe side or not?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434542759, "post_id": 30891108, "comment_id": 49821276, "body": "I am really bad with make files and flags-I am using existing make file"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434543060, "post_id": 30891108, "comment_id": 49821521, "body": "The question has slightly changed; the answer does not address it as it stands now"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434543923, "post_id": 30891108, "comment_id": 49822249, "body": "Failure to find the prototype <i>is</i> a real issue. If the prototype is not found then the compiler assumes a function declaration which returns <code>int</code> and has  allowable parameters of only a certain few types.    If the actual function body does not match this assumption then it causes undefined behaviour.   In any case, this would be an easy problem to investigate so there is no excuse for ignoring the warning."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434544010, "post_id": 30891108, "comment_id": 49822317, "body": "@MattMcNabb: This is my point is it undefined behaviour in all versions of C? (It could be my compiler implements C89 - then I am on the safe side?) How should I figure it out, ask the vendors?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434544099, "post_id": 30891108, "comment_id": 49822397, "body": "@user70012 in C89 it is undefined behaviour if the function body doesn&#39;t match as I described in my previous comment. In C99 the code is ill-formed (therefore the whole executable, if any, has UB). There were no standards prior to C89 so it would just be a guess."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1434544125, "post_id": 30891108, "comment_id": 49822422, "body": "@user70012 it will take less time to fix the problem than to wonder about exactly whether it is UB or not"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434544262, "post_id": 30891108, "comment_id": 49822541, "body": "@MattMcNabb: So in all versions of C it is UB you say? I remembered in old versions of C this was allowed; btw this is the method            <code>extern s32 InputIp(s32 siDsipLine, u8 * pAsPrompt, s32 siInputLine, u8 *pAsIP, u8 uAlign, s32 siTimeOut);</code>"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1434544933, "post_id": 30891108, "comment_id": 49823010, "body": "@user70012 Forget about whether it&#39;s undefined or not.  Even if the behaviour <i>is</i> defined, it could be wrong, depending on the actual return-type and parameters of <code>InputIp()</code> (and partly on whether you call it with different parameter types from different places).  <i>If</i> it returns <code>int</code> and the parameters of the first use in your source match the actual parameter types, you <i>may</i> be OK (but fragile to future changes in the source), but it&#39;s not worth the risk for the sake of copy-pasting one line to create a prototype."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1434545236, "post_id": 30891108, "comment_id": 49823244, "body": "@TripeHound: I said it might be written to many devices already - the software"}, {"owner": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1434545639, "post_id": 30891108, "comment_id": 49823563, "body": "@user70012: As others have said, it <i>might</i> be safe if the compiler&#39;s assumptions are correct, but might be dangerous if not.  If you cannot work out yourself which is the case, edit your question with the signature of the function and a couple of example uses and someone may be able to help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "reply_to_user": {"reputation": 2149, "user_id": 2096401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVjii.jpg?s=128&g=1", "display_name": "TripeHound", "link": "https://stackoverflow.com/users/2096401/tripehound"}, "edited": false, "score": 0, "creation_date": 1434545867, "post_id": 30891108, "comment_id": 49823744, "body": "@TripeHound: edited-I call it by passing correct parameter, that is unlikely the issue"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434546567, "post_id": 30891108, "comment_id": 49824327, "body": "Signature won&#39;t save me anyway if this is later than C89? Or in later versions I would get an error instead of warning?"}], "tags": [], "owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "is_accepted": false, "score": -1, "last_activity_date": 1434545166, "last_edit_date": 1434545166, "creation_date": 1434542726, "answer_id": 30891108, "question_id": 30891029, "link": "https://stackoverflow.com/questions/30891029/get-warning-in-debug-mode-but-not-in-release-mode-do-i-get-undefined-behavior/30891108#30891108", "title": "Get warning in debug mode but not in release mode (do I get undefined behavior?)", "body": "<p>Trying to provide punctual answers:</p>\n\n<ol>\n<li><p><code>Does this mean in the release mode it is safe to use my application</code>: The warning means the compiler cannot find the <code>InputIp</code> function prototype. No differences in the run-time behavior of your application (caused by this warning) are expected between the two binary flavors. You should fix it by following the suggestion at <code>3</code>.</p></li>\n<li><p><code>Why is this behaviour</code>: It seems that the compiler flags are adjsted in Makefile according to the parameters passed by you to <code>make ...</code></p></li>\n<li><p><code>What to do?</code>: Add the missing function prototype for <code>InputIp</code> and rebuild your application.</p></li>\n<li><p><code>I am using the binary compiled in release mode, should I be worried?</code>: There should be no run-time differences triggered by your issue between the app compiled in debug mode and the one compiled in release mode. You should follow the suggestion at <code>3</code></p></li>\n<li><p><code>Should I maybe first check out which C standard this compiler conforms to</code>:  C89/C90 standards have nothing to do with your issue.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 8422, "user_id": 2838364, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/49f4fa6b870a90ce4e02a5c24c5ddd48?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/2838364/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1434543652, "last_edit_date": 1495541159, "creation_date": 1434543652, "answer_id": 30891459, "question_id": 30891029, "link": "https://stackoverflow.com/questions/30891029/get-warning-in-debug-mode-but-not-in-release-mode-do-i-get-undefined-behavior/30891459#30891459", "title": "Get warning in debug mode but not in release mode (do I get undefined behavior?)", "body": "<p>You should not rely on <a href=\"https://stackoverflow.com/a/9182835/2838364\">implicit declarations</a>, but if <code>InputIp</code> is defined as <code>int InputIp();</code> you should be fine.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434544420, "post_id": 30891661, "comment_id": 49822641, "body": "so you even say it maybe in release mode that file maybe included - which  I double more likely warnings are disabled"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1434544984, "post_id": 30891661, "comment_id": 49823044, "body": "You should add a forward declaration. If the function is used only in that file, add it early in the <code>.c</code> file, or re-order the functions so that the call is after the definition. Otherwise you should include the <code>.h</code> file where it is declared."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434545273, "post_id": 30891661, "comment_id": 49823281, "body": "I know how to fix the warning! I was interested if fixing the warning was <i>necessary</i> or not?! I remembered in C89 it was OK I was wrong?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1434546989, "post_id": 30891661, "comment_id": 49824678, "body": "It is ok in c89 insofar that it doesn&#39;t invoke undefined behaviour provided you provide correct arguments in the function call. If you provide incorrect arguments you invoke undefined behaviour and you get no additional compiler warning about it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434547062, "post_id": 30891661, "comment_id": 49824744, "body": "Please see my update there I have added signature and how I use it. So if I am calling it correctly I can ask vendors if compiler uses C89 or not and be on the safe side if the compiler does use C89?"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1434548718, "post_id": 30891661, "comment_id": 49826148, "body": "Since it is a warning the project is compiling with <code>-std=c89</code> (for <code>gcc</code> this is the default). In later standards it is regarded as an error. See for example this answer: <a href=\"http://stackoverflow.com/a/9182835/646887\">stackoverflow.com/a/9182835/646887</a>  If you for some reason cannot change the code, then it should be safe to leave it. At least for now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434549221, "post_id": 30891661, "comment_id": 49826557, "body": "Lindback: That is my reasoning also - see I get warning as I said in the question. So, what can I deduce from it? Do I deduce that it is C89? Yes? If yes then I provided function signature and how I use it, and there is where I need your (and maybe others) help if I am on the safe side or not?"}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1434544173, "creation_date": 1434544173, "answer_id": 30891661, "question_id": 30891029, "link": "https://stackoverflow.com/questions/30891029/get-warning-in-debug-mode-but-not-in-release-mode-do-i-get-undefined-behavior/30891661#30891661", "title": "Get warning in debug mode but not in release mode (do I get undefined behavior?)", "body": "<p>There are a couple of possible reasons why you get a difference.</p>\n\n<ol>\n<li>Lower compiler warning level in release build.</li>\n</ol>\n\n<p>This is the most probable reason.</p>\n\n<ol start=\"2\">\n<li>Conditional code.</li>\n</ol>\n\n<p>Something like this could be the cause:</p>\n\n<pre><code>`#ifndef DEBUG`\n\n`#include \"ip.h\"`\n\n`#endif`\n</code></pre>\n\n<p>Note that <code>implicit declaration</code> is a warning you should take seriously as it can hide bugs. I suggest that you add forward declarations where needed.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434550684, "post_id": 30893935, "comment_id": 49827734, "body": "I was told before I can fix that issue also by including this in one of the header files I am already including:  <code>extern s32 InputIp(s32 line, u8 * text, s32 otherline, u8 *IP, u8 coordx, s32 coordy);</code>? do you think this will be enough to solve the problem? thank you."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434550819, "post_id": 30893935, "comment_id": 49827845, "body": "@user70012 So long as that exactly matches the actual function body, that would fix it. However that is a bad way to code; what should happen is that both the file with the function body, and this file giving the error, include the same header with that line.  (the <code>extern</code> is redundant, function definitions default to extern)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434550941, "post_id": 30893935, "comment_id": 49827950, "body": "&quot;So long as that exactly matches the actual function body, that would fix it&quot; What do you mean? Isn&#39;t the function signature I posted above in comment to you and the one I mentioned in question same? thanks"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434551348, "post_id": 30893935, "comment_id": 49828255, "body": "@user70012 yes , I said that in case you made a transcription error or something. If you do make a little error then you will just get undefined behaviour with no warnings that will be difficult to debug at runtime."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434551498, "post_id": 30893935, "comment_id": 49828360, "body": "You mean I made typo in variable names? I think that should not matter? But types, maybe? more effort must be made to have tools which detect UB IMO"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434551715, "post_id": 30893935, "comment_id": 49828514, "body": "@user70012 there already is one: the compiler. I&#39;ve already said several times how to use your compiler to prevent UB in this case. But you seem intent on not doing it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434551924, "post_id": 30893935, "comment_id": 49828644, "body": "Compiler does not detect all undefined behaviour isn&#39;t it?? Why I am intent? I told you as device manufacturers told me I plan to put: extern s32 InputIp(s32 line, u8 * text, s32 otherline, u8 *IP, u8 coordx, s32 coordy); in one of the headers I already included; ps sometimes it can be also compiler doesn&#39;t strictly enforce this implicit declaration rule?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434552083, "post_id": 30893935, "comment_id": 49828773, "body": "@user70012 that would not prevent detection of UB. You must have the SAME header included by both the file with the function body, and the file making the call.   Making copies of the prototype is a recipe for disaster in the future."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434552200, "post_id": 30893935, "comment_id": 49828853, "body": "I don&#39;t have function body <code>InputIP</code> is method implemented be device vendors and solution with extern is something they told me to put it in header which is included by my project(as they told me they are discontinuing that function maybe that&#39;s why extern is OK in this case?)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434552281, "post_id": 30893935, "comment_id": 49828929, "body": "Also one more question, imagine I did that extern, now that I see that function is called like this: <code>rslt = sdkInput(SDK_DISP_LINE1, headdis, SDK_DISP_LINE5, ip, 2, 60000);</code> you can see pre-last parameter had to be of type u8(please see the signature), but I passed <code>2</code> which is int? Is it UB? Assuming I already did extern ..."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434552342, "post_id": 30893935, "comment_id": 49828993, "body": "@user70012 OK. In that case the preferable solution would be to include a header provided by the vendor that has the prototype already. If you go with your planned fix then you are trusting that the vendor will never change the function."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434552410, "post_id": 30893935, "comment_id": 49829064, "body": "Dear Matt. Vendor gave me header say Tools.h. They told me to put that extern inside the Tools.h. Tools.h I have already included in my project. (Please also answer me final question about passing 2 etc. comment above)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434552455, "post_id": 30893935, "comment_id": 49829105, "body": "@user70012 If there is a prototype in scope then the call is correct, <code>2</code> gets converted to <code>u8</code> because of the prototype.  If there is no prototype then it doesn&#39;t; the function body expects <code>u8</code> but the calling code sends <code>int</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434552860, "post_id": 30893935, "comment_id": 49829457, "body": "&quot;In that case the preferable solution would be to include a header provided by the vendor that has the prototype already&quot; - apparently they don&#39;t have it? they just told me to add that extern like to one of their existing header files which as I mentioned I have included in my project"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434553527, "post_id": 30893935, "comment_id": 49829998, "body": "When you say it is prototyped like this: <code>&quot;s32 InputIp(s32 line, u8 * text, s32 otherline, u8 *IP, u8 coordx, s32 coordy);</code> &quot; how do you know? in my code I only see this: <code>sdkInput(SDK_DISP_LINE1, headdis, SDK_DISP_LINE5, ip, 2, 60000);</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434553585, "post_id": 30893935, "comment_id": 49830030, "body": "@user70012 You said in your question that the prototype was <code>s32 InputIp(s32 line, u8 * text, s32 otherline, u8 *IP, u8 coordx, s32 coordy);</code>. What is <code>sdkInput</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434553883, "post_id": 30893935, "comment_id": 49830238, "body": "I meant InputIp no &quot;sdk&quot; before. I got confused now what I said, this: &quot;sdkInput(SDK_DISP_LINE1, headdis, SDK_DISP_LINE5, ip, 2, 60000)&quot; I call in code. But this &quot;&quot;s32 InputIp(s32 line, u8 * text, s32 otherline, u8 *IP, u8 coordx, s32 coordy);&quot; is just from documentation. Apart from this, I know nothing. I was just not sure what you meant under &quot;prototype&quot;?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1434553971, "post_id": 30893935, "comment_id": 49830304, "body": "&quot;prototype&quot; means declaration of function which includes the types of the function parameters inside the <code>( )</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "edited": false, "score": 0, "creation_date": 1434564600, "post_id": 30893935, "comment_id": 49837369, "body": "ok so I will proceed with extern way, if I got you right it should be ok?"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1434549882, "last_edit_date": 1495540712, "creation_date": 1434549882, "answer_id": 30893935, "question_id": 30891029, "link": "https://stackoverflow.com/questions/30891029/get-warning-in-debug-mode-but-not-in-release-mode-do-i-get-undefined-behavior/30893935#30893935", "title": "Get warning in debug mode but not in release mode (do I get undefined behavior?)", "body": "<p>In C89, if the function is prototyped like this (and this prototype is visible at the point of the function body, or the function body uses the same prototype):</p>\n\n<pre><code>s32 InputIp(s32 line, u8 * text, s32 otherline, u8 *IP, u8 coordx, s32 coordy);\n</code></pre>\n\n<p>and assuming <code>u8</code> is an 8-bit type, then calling this function without a prototype in scope causes undefined behaviour.</p>\n\n<p>The rule in this situation (calling prototyped function without a prototype in scope) is that all arguments and return value must remain unchanged under the <em>default argument promotions</em>.  <a href=\"https://stackoverflow.com/questions/1255775/default-argument-promotions-in-c-function-calls\">Link to related thread</a></p>\n\n<p>Those promotions, which are the same ones applied to arguments matching <code>...</code> in variadic functions, are:</p>\n\n<ul>\n<li>Any integral type of lower rank than <code>int</code> is promoted to <code>int</code></li>\n<li><code>float</code> is promoted to <code>double</code></li>\n<li>All other types remain unchanged</li>\n</ul>\n\n<p>So, the <code>u8</code> would be changed to <code>int</code> by the default argument promotions.</p>\n\n<p>In C99 calling a function without a declaration in scope is ill-formed.</p>\n\n<hr>\n\n<p>I <em>strongly</em> recommend fixing the code so that the function is called with a prototype in scope.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5012412"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1434549882, "creation_date": 1434542556, "last_edit_date": 1434546988, "question_id": 30891029, "link": "https://stackoverflow.com/questions/30891029/get-warning-in-debug-mode-but-not-in-release-mode-do-i-get-undefined-behavior", "title": "Get warning in debug mode but not in release mode (do I get undefined behavior?)", "body": "<p>I have a little bit strange situation. I am compiling on some device.\nIf I compile <strong>in Release mode</strong>, e.g.</p>\n\n<pre><code>makeCore projectname release exe\n</code></pre>\n\n<p>All is fine. If I compile <strong>in debug mode</strong>:</p>\n\n<pre><code>makeCore projectname debug exe\n</code></pre>\n\n<p>I get following warning:</p>\n\n<pre><code>src/administration.c: In function 'SetIp':\nsrc/administration.c:1409: warning: implicit declaration of function 'InputIp'\n</code></pre>\n\n<p>Q: Does this mean in the release mode it is safe to use my application?</p>\n\n<p>Why is this behaviour? What to do? I am using the binary compiled in release mode, should I be worried?</p>\n\n<p><strong>Edit</strong>: Should I maybe first check out which C standard this compiler conforms to, if it is pre C89 then I should not worry because it is not undefined behaviour right?</p>\n\n<p><strong>Edit2:</strong> My ultimate question is if I am trigerring undefined behaviour and how to check whether I am or not trigerring undefined behaviour? I am not sure whether my compiler implements C89 or C90 etc.. Maybe I should ask vendors whether it is undefined behaviour what I did above?</p>\n\n<p>UPDATE:</p>\n\n<p>This is function signature:</p>\n\n<pre><code>s32 InputIp(s32 line, u8 * text, s32 otherline, u8 *IP, u8 coordx, s32 coordy);\n</code></pre>\n\n<p>This is how it is called:</p>\n\n<pre><code>s32 res = InputIp(someconstant, u8pointer, otherconstant, otheru8pointer, integer1, integer2);\n</code></pre>\n\n<p>final question: Since I get this warning in the first place, can I be sure I am using compiler which uses C89? Otherwise it would be error? Am I right?</p>\n"}, {"tags": ["c", "include", "c-strings"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434541794, "post_id": 30890696, "comment_id": 49820533, "body": "Use <code>fgets</code> with <code>stdin</code> instead. As the message says, <code>gets</code> is dangerous, since it provides no protection against buffer overflow.."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1434543133, "post_id": 30890696, "comment_id": 49821569, "body": "The literal answer to &quot;Why does the compiler emit a warning here?&quot; is &quot;Because the compiler&#39;s programmers made it do that.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1434543710, "last_edit_date": 1434543710, "creation_date": 1434541915, "answer_id": 30890784, "question_id": 30890696, "link": "https://stackoverflow.com/questions/30890696/why-gets-is-deprecated/30890784#30890784", "title": "Why gets() is deprecated?", "body": "<blockquote>\n  <p><em>Can someone explains why the compiler shows like that\u2026?</em></p>\n</blockquote>\n\n<p>Yes, because, the <code>gets()</code> function is dangerous, as it suffers from buffer overflow issue. Anyone should refrain from using that.</p>\n\n<p>Also, regarding the warning with <code>-Wdeprecated-declarations</code>, <code>gets()</code> is no longer a part of <code>C</code> standard [<code>C11</code> onwards]. So, C libraries <del>compilers</del> are not <em>bound</em> to support that any more. It can be removed in future. To warn the developer about the potential pitfall and to discourage the further usage of <code>gets()</code>, the compiler<sup>##</sup> emits the warning message.</p>\n\n<hr>\n\n<p><sup> (##) To be pedantic, the warning is not generated by the compiler (<code>gcc</code>) all by itself, rather caused by a <code>pragma</code> or attribute on the implementation of <code>gets()</code> in the <code>glibc</code> that causes the compiler to emit the warning. [Courtesy, FUZxxl, from the dupe answer.]</sup></p>\n"}, {"tags": [], "owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "is_accepted": false, "score": 2, "last_activity_date": 1434542001, "last_edit_date": 1495542358, "creation_date": 1434542001, "answer_id": 30890818, "question_id": 30890696, "link": "https://stackoverflow.com/questions/30890696/why-gets-is-deprecated/30890818#30890818", "title": "Why gets() is deprecated?", "body": "<ol>\n<li><p><code>gets</code> may cause buffer overflow, since it don't consider length of the data. More details are here : <a href=\"https://stackoverflow.com/questions/4346598/gets-function-in-c\">gets() function in C</a></p></li>\n<li><p>deprecated message means, this function is marked as deprecated and may remove from standard in later time. So  discouraging user to use it.</p></li>\n</ol>\n"}], "owner": {"reputation": 59, "user_id": 5015113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2805e5df1d5b34ba1acbf233aa435f11?s=128&d=identicon&r=PG&f=1", "display_name": "network-programmer", "link": "https://stackoverflow.com/users/5015113/network-programmer"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21295, "favorite_count": 0, "closed_date": 1434542027, "answer_count": 2, "score": 2, "last_activity_date": 1489602950, "creation_date": 1434541706, "last_edit_date": 1489602950, "question_id": 30890696, "link": "https://stackoverflow.com/questions/30890696/why-gets-is-deprecated", "closed_reason": "Duplicate", "title": "Why gets() is deprecated?", "body": "<p>While using <code>gets()</code> in my code, the compiler shouts</p>\n\n<pre><code>warning: the 'gets' function is dangerous and should not be used.`\n</code></pre>\n\n<p>and</p>\n\n<pre><code>warning: \u2018gets\u2019 is deprecated (declared at /usr/include/stdio.h:638)\n[-Wdeprecated-declarations]\n</code></pre>\n\n<p>Any specific reasons?</p>\n"}, {"tags": ["c", "linux", "pointers", "compiler-errors", "void-pointers"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1434541543, "post_id": 30890620, "comment_id": 49820370, "body": "You can&#39;t use a <code>void*</code> pointer to access an array, since it in not known what size each element is."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1434541555, "post_id": 30890620, "comment_id": 49820375, "body": "<code>void main()</code>--&gt; <code>int main()</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1434542239, "post_id": 30890620, "comment_id": 49820886, "body": "Since the <code>print</code> function will only work when passed a pointer to <code>int</code>, I don&#39;t know why you make life difficult by casting to and from a <code>void*</code>."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1434541627, "creation_date": 1434541627, "answer_id": 30890670, "question_id": 30890620, "link": "https://stackoverflow.com/questions/30890620/how-to-print-the-void-in-a-function-and-how-to-access-the-void-variable-in-a/30890670#30890670", "title": "How to print the void * in a function and how to access the void * variable in a function?", "body": "<p>The array subscript operator (de-referencing) can be used with a complete type. <code>void *</code> is not a complete type that you can dereference. </p>\n\n<p>To get this done, you need to <code>cast</code> the <code>Arg</code> itself to <code>int *</code> and then use the dereference operator to get the value.</p>\n\n<p>Also, to print a pointer, you need to use <code>%p</code> format specifier.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1434542029, "last_edit_date": 1434542029, "creation_date": 1434541634, "answer_id": 30890673, "question_id": 30890620, "link": "https://stackoverflow.com/questions/30890620/how-to-print-the-void-in-a-function-and-how-to-access-the-void-variable-in-a/30890673#30890673", "title": "How to print the void * in a function and how to access the void * variable in a function?", "body": "<p>To print a pointer you need the <code>\"%p\"</code> <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow\"><code>printf</code></a> format.</p>\n\n<p>But it seems that you don't actually want to print the actual pointer but what <em>it points to</em>, and this is where your error comes from, because your casting is in the wrong place, you need to cast the pointer before you dereference it, like e.g.</p>\n\n<pre><code>((int *) Arg)[0]\n</code></pre>\n\n<p>It's a problem with <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\"><em>operator precedence</em></a> where the array subscript operator has higher precedence than the type-cast operator. So the compiler thinks you are doing <code>(int *) (Arg[0])</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1007, "user_id": 3683576, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/90750714d4cbe8c8dececd2e2b0afbbf?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Munsch", "link": "https://stackoverflow.com/users/3683576/guillaume-munsch"}, "is_accepted": false, "score": 1, "last_activity_date": 1434541681, "creation_date": 1434541681, "answer_id": 30890690, "question_id": 30890620, "link": "https://stackoverflow.com/questions/30890620/how-to-print-the-void-in-a-function-and-how-to-access-the-void-variable-in-a/30890690#30890690", "title": "How to print the void * in a function and how to access the void * variable in a function?", "body": "<p>Try it like this maybe</p>\n\n<pre><code>printf ( \"Arg[0] = %d Arg[1] = %d\\n\",((int *)Arg)[0], ((int * )Arg)[1] );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1434541926, "creation_date": 1434541926, "answer_id": 30890791, "question_id": 30890620, "link": "https://stackoverflow.com/questions/30890620/how-to-print-the-void-in-a-function-and-how-to-access-the-void-variable-in-a/30890791#30890791", "title": "How to print the void * in a function and how to access the void * variable in a function?", "body": "<p>The problem with the code is that the subscript operator used in the printf as for example <code>Arg[0]</code> or <code>Arg[1]</code> is applied to a pointer of type <code>void *</code>.</p>\n\n<p>You have at first to cast this pointer to type <code>int *</code> and only then to apply the subscript operator</p>\n\n<pre><code>void print ( void *Arg )\n{\n//  while ( ( int *) Arg[0] )\n    {\n        printf ( \"Arg[0] = %d Arg[1] = %d\\n\", ( (int *)  Arg )[0], ( (int * ) Arg )[1] );\n        sleep ( 1 );\n        //Arg[0]--;\n        //Arg[1]--;\n    }\n}\n</code></pre>\n\n<p>Or the code would be simpler if in the beginning of the function you would define a local pointer. For example</p>\n\n<pre><code>void print ( void *Arg )\n{\n    int *p = Arg;\n//  while ( ( int *) Arg[0] )\n    {\n        printf ( \"Arg[0] = %d Arg[1] = %d\\n\", p[0], p[1] );\n        sleep ( 1 );\n        //Arg[0]--;\n        //Arg[1]--;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4914967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-25xF_fVEQCg/AAAAAAAAAAI/AAAAAAAAAC4/ADvWyWqxQ54/photo.jpg?sz=128", "display_name": "RAJAMANICKAM T", "link": "https://stackoverflow.com/users/4914967/rajamanickam-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5067, "favorite_count": 1, "accepted_answer_id": 30890673, "answer_count": 4, "score": 1, "last_activity_date": 1434548124, "creation_date": 1434541456, "last_edit_date": 1434548124, "question_id": 30890620, "link": "https://stackoverflow.com/questions/30890620/how-to-print-the-void-in-a-function-and-how-to-access-the-void-variable-in-a", "title": "How to print the void * in a function and how to access the void * variable in a function?", "body": "<p>I'm trying to pass a function as argument to another function with <code>void</code> pointer and it doesn't work</p>\n\n<pre><code>#include \"header.h\"\nvoid print ( void *Arg )\n{\n//  while ( ( int *) Arg[0] )\n    {\n        printf ( \"Arg[0] = %d Arg[1] = %d\\n\",(int *)  Arg[0], (int * ) Arg[1] );\n        sleep ( 1 );\n        //Arg[0]--;\n        //Arg[1]--;\n    }\n}\nvoid main(int argc, char **argv)\n{\n    int count[2] = { 10, 160};\n    print (count);\n}\n</code></pre>\n\n<p>I Am getting errors like this:</p>\n\n<pre><code>void*.c: In function \u2018print\u2019:\nvoid*.c:6:52: warning: dereferencing \u2018void *\u2019 pointer [enabled by default]\n   printf ( \"Arg[0] = %d Arg[1] = %d\\n\",(int *)  Arg[0], (int * ) Arg[1] );\n                                                    ^\nvoid*.c:6:3: error: invalid use of void expression\n   printf ( \"Arg[0] = %d Arg[1] = %d\\n\",(int *)  Arg[0], (int * ) Arg[1] );\n   ^\nvoid*.c:6:69: warning: dereferencing \u2018void *\u2019 pointer [enabled by default]\n   printf ( \"Arg[0] = %d Arg[1] = %d\\n\",(int *)  Arg[0], (int * ) Arg[1] );\n                                                                     ^\nvoid*.c:6:3: error: invalid use of void expression\n   printf ( \"Arg[0] = %d Arg[1] = %d\\n\",(int *)  Arg[0], (int * ) Arg[1] );\n</code></pre>\n\n<p>How do I fix the problem?</p>\n"}, {"tags": ["java", "c", "crc16"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 3, "creation_date": 1434541300, "post_id": 30890546, "comment_id": 49820204, "body": "And what&#39;s the question?"}, {"owner": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1434541715, "post_id": 30890546, "comment_id": 49820474, "body": "@MohitJain, ouch, I&#39;m sorry. All I need is to know whether I converted that method correct. It brings result but I&#39;m not sure if it&#39;s working properly"}], "answers": [{"comments": [{"owner": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 0, "creation_date": 1434547010, "post_id": 30891617, "comment_id": 49824693, "body": "Thanks for reply. You see, the idea was to build a string request to server which consists of <code>#L#protocol_version;imei;password;crc16\\r\\n</code>. And this <code>crc16</code> should be received from array of values <code>protocol_version; imei; password</code>. So I assumed that those values are String. I might misunderstand something because I don&#39;t realize how <code>C</code> does the same with <code>void*</code>"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 1, "creation_date": 1434547739, "post_id": 30891617, "comment_id": 49825327, "body": "@AnZ : I&#39;m confident that protocol_version and imei will always be fine. But password can contain almost everything (even if I would <b>never</b> put a non ascii character in a password ...). For last point C uses void * here in the sense of a raw byte array."}, {"owner": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 0, "creation_date": 1434549191, "post_id": 30891617, "comment_id": 49826531, "body": "and in case if <code>password</code> will always be String whithout any digits or non-ascii symbols? Just UTF-8 English letters. Does this case ensure that java method will bring the same result as C&#39;s one?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 1, "creation_date": 1434550821, "post_id": 30891617, "comment_id": 49827848, "body": "@AnZ Oups UTF-8 english letters does not sound very well !.. But yes, if you only use characters with code &lt; 128, they will have same value for all common encodings. Anyway, I still advise you to take a byte array in that function and to have a higher level wrapper that take string arrays to build the byte array. Separation of concerns eases tests and maintainability :-)"}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1434615886, "post_id": 30891617, "comment_id": 49857858, "body": "<code>And this crc16 should be received from array of values protocol_version; imei; password</code>. No. Please reread the Wialon document."}, {"owner": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "reply_to_user": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1434618179, "post_id": 30891617, "comment_id": 49859389, "body": "@greenapps, from document: <code>Packet sample: #SD#date;time;lat1;lat2;lon1;lon2;speed;course;height;sats;c&zwnj;&#8203;rc16\\r \\n In this case crc16 is calculated for the following part of the packet: date;time;lat1;lat2;lon1;lon2;speed;course;height;sats;</code> What did I understand wrong?"}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1434620656, "post_id": 30891617, "comment_id": 49861117, "body": "Well then show me how you would call your getCode(String[]) function from that."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1434544096, "creation_date": 1434544096, "answer_id": 30891617, "question_id": 30890546, "link": "https://stackoverflow.com/questions/30890546/java-equivalent-for-c-crc16/30891617#30891617", "title": "Java equivalent for C CRC16", "body": "<p>What you wrote looks good as said by Mohit Jain. But your function does thing differently than original C one : you take an array of String, while C code takes a void *, and a length in bytes. So if you use your conversion function to validate a string containing non ASCII characters between an UTF-8 and a Latin1 platform, it will give different result, because with Latin1, \"\u00e9\u00e8\" will give the 2 bytes <code>0xe9</code>, <code>0xe8</code>, while with UTF-8, you will get 4 bytes : <code>0xc3</code>, <code>0xa9</code>, <code>0xc3</code>, <code>0xa8</code> => your CRC function will give different results.</p>\n\n<p>IMHO, you should stick to original code and only compute a CRC for a byte array. You could force always same charset (say UTF-8 for example), but it will still be hard to compare your results with the C implementation, and you would loose the ability to compute the CRC of a raw byte array (binary data).</p>\n\n<p>Anyway, the only way to make sure that your implementation gives same results than original C one, is to take an arbitrary byte string (all bytes from 0 to 255 for example), pass it to the C routine on one side and to you java one on the other side and compare both CRCs.</p>\n"}, {"comments": [{"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "reply_to_user": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 0, "creation_date": 1434620423, "post_id": 30910079, "comment_id": 49860941, "body": "Well you can read that exactly in the wialon pdf. They tell as much. Please reread. After that tell what you should take as <code>String data</code> when you have <code>String command=&quot;#SD#180615;081206;1800;N;01800;E;NA;NA;8;NA;crc&quot;;</code>"}, {"owner": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 0, "creation_date": 1434621585, "post_id": 30910079, "comment_id": 49861785, "body": "Alright, now I got the point. I was thinking that it&#39;s needed to take every element separately but not the whole bunch as whole."}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "reply_to_user": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 1, "creation_date": 1434623272, "post_id": 30910079, "comment_id": 49862857, "body": "Please post your new getCode() function and show how you use it beginning with the String command i gave you. Tell the crc. We will check."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1434623694, "post_id": 30910079, "comment_id": 49863127, "body": "@greenapps : I agree with you for <code>String</code> vs. <code>String[]</code>, but there&#39;s still the <code>getBytes()</code> encoding question ..."}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1434623872, "post_id": 30910079, "comment_id": 49863251, "body": "Wialon is silent about the encoding. So that is of second concern."}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 1, "creation_date": 1434629225, "post_id": 30910079, "comment_id": 49866899, "body": "<code>Calculated: crc16 = 58693</code>. That is the same value as delivered by the C code for that string."}, {"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 1, "creation_date": 1434629628, "post_id": 30910079, "comment_id": 49867171, "body": "Equal to 0xE545. Try this online service for our string: <a href=\"http://www.lammertbies.nl/comm/info/crc-calculation.html\" rel=\"nofollow noreferrer\">lammertbies.nl/comm/info/crc-calculation.html</a>"}, {"owner": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "edited": false, "score": 0, "creation_date": 1434633538, "post_id": 30910079, "comment_id": 49870144, "body": "Thanks a lot for that!"}], "tags": [], "owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "is_accepted": true, "score": 1, "last_activity_date": 1434615741, "creation_date": 1434615741, "answer_id": 30910079, "question_id": 30890546, "link": "https://stackoverflow.com/questions/30890546/java-equivalent-for-c-crc16/30910079#30910079", "title": "Java equivalent for C CRC16", "body": "<p>Your translated the c code function call <code>crc16 (const void *data, unsigned data_size)</code> wrong. </p>\n\n<pre><code>public static int getCode (String[] data)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>public static int getCode (String data)\n</code></pre>\n\n<p>Moreover you can also see in the Wialon pdf that you need a <code>getCode (String)</code> and not a <code>getCode(String[])</code>.</p>\n\n<p>Converting the received String to a byte array stands.</p>\n"}], "owner": {"reputation": 940, "user_id": 4673764, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b93db48af56d908db0eab836a65bdfb0?s=128&d=identicon&r=PG&f=1", "display_name": "AnZ", "link": "https://stackoverflow.com/users/4673764/anz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "accepted_answer_id": 30910079, "answer_count": 2, "score": 1, "last_activity_date": 1434635502, "creation_date": 1434541238, "last_edit_date": 1434635502, "question_id": 30890546, "link": "https://stackoverflow.com/questions/30890546/java-equivalent-for-c-crc16", "title": "Java equivalent for C CRC16", "body": "<p>I need to convert <code>C</code> CRC16 method to <code>Java</code>. The problem is I'm not that good with <code>C</code> and Bytes operations.</p>\n\n<p><code>C</code> code:</p>\n\n<pre><code>static const unsigned short crc16_table[256] =\n{\n 0x0000,0xC0C1,0xC181,0x0140,0xC301,0x03C0,0x0280,0xC241,\n ...  /* Removed for brevity */\n 0x8201,0x42C0,0x4380,0x8341,0x4100,0x81C1,0x8081,0x4040\n};\n\nunsigned short crc16 (const void *data, unsigned data_size)\n{\n if (!data || !data_size)\n return 0;\n unsigned short crc = 0;\n unsigned char* buf = (unsigned char*)data;\n while (data_size--)\n crc = (crc &gt;&gt; 8) ^ crc16_table[(unsigned char)crc ^ *buf++];\n return crc;\n}\n</code></pre>\n\n<p>And that's my attempt to convert it. Not sure if that's correct.</p>\n\n<pre><code>private static int[] table = {\n    0x0000,0xC0C1,0xC181,0x0140,0xC301,0x03C0,0x0280,0xC241,0xC601,0x06C0,0x0780,0xC741,\n    ...    // Removed for brevity\n    0x4400,0x84C1,0x8581,0x4540,0x8701,0x47C0,0x4680,0x8641,0x8201,0x42C0,0x4380,0x8341, 0x4100,0x81C1,0x8081,0x4040\n};\n\npublic static int getCode (String[] data){\n    if (data.length == 0) {\n        return 0;\n    }\n    int crc = 0;\n    for (String item : data) {\n        byte[] bytes = item.getBytes();\n        for (byte b : bytes) {\n            crc = (crc &gt;&gt;&gt; 8) ^ table[(crc ^ b) &amp; 0xff]; //this confuses me\n        }\n    }\n    return crc;\n}\n</code></pre>\n\n<p><strong>Question:</strong>\nIs my porting to Java correct?</p>\n\n<hr>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>Modified <code>crc16</code> working method (thanks to great answers):</p>\n\n<pre><code>public static int getCode(String data) {\n    if (data == null || data.equals(\"\")) {\n        return 0;\n    }\n    int crc = 0x0000;\n    byte[] bytes = data.getBytes();\n    for (byte b : bytes) {\n        crc = (crc &gt;&gt;&gt; 8) ^ table[(crc ^ b) &amp; 0xff];\n    }\n    return crc;\n}\n</code></pre>\n\n<p>This returns Decimal value. And CRC16 code needs to be Hexadecimal. I used this method to convert to base 16. Do it with received <code>crc</code> like <code>dec2m(crc, 16)</code>:</p>\n\n<pre><code>static String dec2m(int N, int m) {\n    String s = \"\";\n    for (int n = N; n &gt; 0; n /= m) {\n        int r = n % m;\n        s = r &lt; 10 ? r + s : (char) ('A' - 10 + r) + s;\n    }\n    return s;\n}\n</code></pre>\n\n<p>For testing your results you could use <a href=\"http://www.lammertbies.nl/comm/info/crc-calculation.html\" rel=\"nofollow\">this site</a> (Thanks to @greenaps)</p>\n"}, {"tags": ["c++", "c", "linux", "signals", "posix"], "comments": [{"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1434552184, "post_id": 30890526, "comment_id": 49828841, "body": "<i>What is wrong here?</i> \u2460 You don&#39;t give us an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>. \u2461 You are using a condition variable without a predicate, which is likely incorrect for any non-trivial application even absent spurious wakeups. \u2462 You wait for a condition variable without anticipating <a href=\"http://stackoverflow.com/q/1050592/132382\">spurious wakeups</a>. \u2463 You invoke <code>pthread_cond_wait</code> incorrectly \u2014 how did this compile? \u2464 You do unsafe things in a signal handler."}], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 1862996, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04dbac132e14c23a90d24880dc4d51d9?s=128&d=identicon&r=PG", "display_name": "rameshrgtvl", "link": "https://stackoverflow.com/users/1862996/rameshrgtvl"}, "edited": false, "score": 0, "creation_date": 1434542683, "post_id": 30890611, "comment_id": 49821209, "body": "Thanks @schorsch_76 for valid information and input about self pipe."}], "tags": [], "owner": {"reputation": 662, "user_id": 3551285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78b464d9f256be9c9a36b726a9ffc459?s=128&d=identicon&r=PG&f=1", "display_name": "schorsch_76", "link": "https://stackoverflow.com/users/3551285/schorsch-76"}, "is_accepted": true, "score": 4, "last_activity_date": 1434542349, "last_edit_date": 1434542349, "creation_date": 1434541417, "answer_id": 30890611, "question_id": 30890526, "link": "https://stackoverflow.com/questions/30890526/linux-pthread-cond-signal-is-not-working-inside-a-signal-handler/30890611#30890611", "title": "Linux : pthread_cond_signal() is not working inside a Signal Handler()", "body": "<p>In Signal handler there are only a very limited number of syscalls allowed. </p>\n\n<p>see man 7 signal</p>\n\n<p><a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man7/signal.7.html</a></p>\n\n<p>My Suggestion is, to be on the safe side, the so called \"self pipe trick\". \n<a href=\"http://man7.org/tlpi/code/online/diff/altio/self_pipe.c.html\" rel=\"nofollow\">http://man7.org/tlpi/code/online/diff/altio/self_pipe.c.html</a></p>\n\n<p>You could start a thread which runs a select Loop on the self pipe and call your appropiate handler.</p>\n\n<p>What is wrong in your code? You are locking a mutex inside the Signal handler</p>\n\n<p>EDIT: Here there is a guide for signals\n<a href=\"http://beej.us/guide/bgipc/output/html/multipage/signals.html\" rel=\"nofollow\">http://beej.us/guide/bgipc/output/html/multipage/signals.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 6998967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zttZJ.jpg?s=128&g=1", "display_name": "Ricardo Biehl Pasquali", "link": "https://stackoverflow.com/users/6998967/ricardo-biehl-pasquali"}, "is_accepted": false, "score": 2, "last_activity_date": 1481387874, "last_edit_date": 1481387874, "creation_date": 1480284004, "answer_id": 40834414, "question_id": 30890526, "link": "https://stackoverflow.com/questions/30890526/linux-pthread-cond-signal-is-not-working-inside-a-signal-handler/40834414#40834414", "title": "Linux : pthread_cond_signal() is not working inside a Signal Handler()", "body": "<p>Perhaps you could use <em>sigprocmask()</em> to make sure a given signal will not arrives at a specific point in your code, and then the signal handler can't be executed in that point.<br>\nFor example:<br>\n<strong>* The code below was based from this <a href=\"http://jamessullivan1.github.io/blog/2015/07/async-signal-unsafe\" rel=\"nofollow noreferrer\">James Sullivan's article</a></strong></p>\n\n<p>Functions to lock/unlock (maybe) the about-to-arrive signal:</p>\n\n<pre><code>void signal_lock (sigset_t *save) {\n    sigset_t set;\n\n    sigfillset(&amp;set); /* fill `set` with __all__ signals */\n    sigprocmask(SIG_BLOCK, &amp;set, save); /* no more signals :-)  */\n}\n\nvoid signal_unlock (sigset_t *save) {\n    sigprocmask(SIG_SETMASK, save, NULL); /* enable again */\n}\n</code></pre>\n\n<p>After a call to <code>signal_lock()</code> ...<br></p>\n\n<pre><code>sigset_t tmp;\n\nsignal_lock(&amp;tmp); /* we locked all signals --\n                    * no signal will arrives until signal_unlock() */\npthread_mutex_lock(&lt;pthread_mutex_t*&gt;);\n/* do your stuff */\npthread_mutex_unlock(&lt;pthread_mutex_t*&gt;);\nsignal_unlock(&amp;tmp); /* unlock signals --\n                      * only signals allowed before signal_lock()\n                      * may arrive */\n</code></pre>\n\n<p>I recommend you to read thoroughly this <a href=\"http://jamessullivan1.github.io/blog/2015/07/async-signal-unsafe\" rel=\"nofollow noreferrer\">amazing article</a> by James Sullivan, it explains better the things :-)</p>\n"}], "owner": {"reputation": 233, "user_id": 1862996, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/04dbac132e14c23a90d24880dc4d51d9?s=128&d=identicon&r=PG", "display_name": "rameshrgtvl", "link": "https://stackoverflow.com/users/1862996/rameshrgtvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "accepted_answer_id": 30890611, "answer_count": 2, "score": 0, "last_activity_date": 1481387874, "creation_date": 1434541173, "last_edit_date": 1434544672, "question_id": 30890526, "link": "https://stackoverflow.com/questions/30890526/linux-pthread-cond-signal-is-not-working-inside-a-signal-handler", "title": "Linux : pthread_cond_signal() is not working inside a Signal Handler()", "body": "<pre><code>Summary\n-----------\n1. In main() am going for pthread_cond_wait().\n2. In signal handler() am waking main() using pthread_cond_signal().\n3. But main() is not coming out from pthread_cond_wait().\n</code></pre>\n\n<p><strong>What is wrong here? help me out.</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;  \nmyclass *myObj = NULL;\n</code></pre>\n\n<p>In main I am trying to wait for a signal:</p>\n\n<pre><code>int main()\n{\n    myObj = new myclass;    \n    /* do something */\n    myobj-&gt;gotoWait(); &lt;=== Wait blocked for ever.\n    /* do clean up here */\n    return 0;\n}\n</code></pre>\n\n<p>Signal handler sending a signal to main thread:</p>\n\n<pre><code>static void signalHandler(int sig, siginfo_t *siginfo, void *context)\n{\n    myObj-&gt;wakeFromWait();\n}\n</code></pre>\n\n<p>Actual class implementing the waiting for and sending of signals.</p>\n\n<p>What is wrong here?</p>\n\n<pre><code>myclass::gotoWait()\n{\n    pthread_mutex_lock(&amp;mtx);\n    pthread_cond_wait(&amp;cnd, &amp;mtx);\n    pthread_mutex_unlock(&amp;mtx);\n} \nmyclass::wakeFromWait()\n{\n    pthread_mutex_lock(&amp;mtx);\n    pthread_cond_signal(&amp;cnd, &amp;mtx);\n    pthread_mutex_unlock(&amp;mtx);\n}\n</code></pre>\n"}, {"tags": ["c", "cairo"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1434552749, "post_id": 30890424, "comment_id": 49829352, "body": "The way I read the <code>CAIRO_OPERATOR_DEST_IN</code> operator it appears that anything in the source that is outside of the bounds of the rectangle of the destination will be removed &quot;The blue rectangle is used to determine which part of the red one is left intact. Anything outside the overlapping area is removed.&quot; is what the <code>CAIRO_OPERATOR_DEST_IN</code> documentation is saying.  Here is docs on paths <a href=\"http://cairographics.org/manual/cairo-Paths.html\" rel=\"nofollow noreferrer\">cairographics.org/manual/cairo-Paths.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6043, "user_id": 793961, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/367cd54226af527423507c1f89abb25a?s=128&d=identicon&r=PG", "display_name": "muffel", "link": "https://stackoverflow.com/users/793961/muffel"}, "edited": false, "score": 0, "creation_date": 1434744091, "post_id": 30943520, "comment_id": 49927313, "body": "just what I needed, I didn&#39;t know about groups, thank you!"}], "tags": [], "owner": {"reputation": 7642, "user_id": 436275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a51d31e40d541a9786e0243678029?s=128&d=identicon&r=PG", "display_name": "Uli Schlachter", "link": "https://stackoverflow.com/users/436275/uli-schlachter"}, "is_accepted": true, "score": 1, "last_activity_date": 1434733299, "creation_date": 1434733299, "answer_id": 30943520, "question_id": 30890424, "link": "https://stackoverflow.com/questions/30890424/use-operator-without-removing-the-background-in-cairo/30943520#30943520", "title": "Use operator without removing the background in Cairo", "body": "<p>How would cairo know which part is your \"arbitrary complex drawing\" (which you want to keep) and your blue text (which you want to partly erase)?</p>\n\n<p>How about something like this? (Untested!):</p>\n\n<pre><code>#include &lt;cairo/cairo.h&gt;\n\nint main (int argc, char *argv[])\n{\n        cairo_surface_t *surface =\n            cairo_image_surface_create (CAIRO_FORMAT_ARGB32, 300, 300);\n        cairo_t *cr = cairo_create (surface);\n\n        //black background\n        cairo_set_source_rgb(cr, 0, 0, 0);\n        cairo_paint(cr);\n\n        // Redirect drawing to a temporary surface\n        cairo_push_group(cr);\n\n        //blue text\n        cairo_set_source_rgb(cr, 0, 0, 1);\n        cairo_set_font_size(cr, 50);\n        cairo_move_to(cr, 75, 160);\n        cairo_text_path(cr, \"foobar\");\n        cairo_fill(cr);\n\n        // Draw part of the blue text\n        cairo_pop_group_to_source(cr);\n        cairo_rectangle(cr, 125, 125, 50, 50);\n        cairo_fill(cr);\n\n        cairo_destroy (cr);\n        cairo_surface_write_to_png (surface, \"output.png\");\n        cairo_surface_destroy (surface);\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 6043, "user_id": 793961, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/367cd54226af527423507c1f89abb25a?s=128&d=identicon&r=PG", "display_name": "muffel", "link": "https://stackoverflow.com/users/793961/muffel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 30943520, "answer_count": 1, "score": 0, "last_activity_date": 1434733299, "creation_date": 1434540948, "last_edit_date": 1434551988, "question_id": 30890424, "link": "https://stackoverflow.com/questions/30890424/use-operator-without-removing-the-background-in-cairo", "title": "Use operator without removing the background in Cairo", "body": "<p>I want to draw only a limited part of a cairo path, especially (but not limited to) text. So I looked at operators and tried the <a href=\"http://cairographics.org/operators/#dest_in\" rel=\"nofollow noreferrer\">DEST_IN</a> operator. </p>\n\n<p>Consider the following example code</p>\n\n<pre><code>#include &lt;cairo/cairo.h&gt;\n\nint main (int argc, char *argv[])\n{\n        cairo_surface_t *surface =\n            cairo_image_surface_create (CAIRO_FORMAT_ARGB32, 300, 300);\n        cairo_t *cr = cairo_create (surface);\n\n        //black background\n        cairo_set_source_rgb(cr, 0, 0, 0);\n        cairo_paint(cr);\n\n        //blue text\n        cairo_set_source_rgb(cr, 0, 0, 1);\n        cairo_set_font_size(cr, 50);\n        cairo_move_to(cr, 75, 160);\n        cairo_text_path(cr, \"foobar\");\n        cairo_fill(cr);\n\n        //this should remove all parts of the blue text that\n        //is not in the following rectangle\n        cairo_set_operator(cr, CAIRO_OPERATOR_DEST_IN);\n        cairo_rectangle(cr, 125, 125, 50, 50);\n        cairo_fill(cr);\n\n        cairo_destroy (cr);\n        cairo_surface_write_to_png (surface, \"output.png\");\n        cairo_surface_destroy (surface);\n        return 0;\n}\n</code></pre>\n\n<p>this is how the output looks:</p>\n\n<p><img src=\"https://i.stack.imgur.com/DnIpz.png\" alt=\"enter image description here\"></p>\n\n<p>The operator works, but not as expected (that was: only the part of the text inside the drawn 50x50 rectangle is displayed, but the rest of the background is untouched). Instead, the whole background (excepted for the rectangle area) is removed, and the picture becomes transparent.</p>\n\n<p>Consider the black background to be any arbitrary complex drawing. Is there a way to use the operation as desired (extract a range from a path), without deleting any part of the background?</p>\n\n<p>Is there a better way to cut a path, so only parts inside a provided rectangle are drawn?</p>\n"}, {"tags": ["c", "audio", "sip", "voip", "linphone"], "owner": {"reputation": 23, "user_id": 4190102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/opdi5.jpg?s=128&g=1", "display_name": "satish mb", "link": "https://stackoverflow.com/users/4190102/satish-mb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434545992, "creation_date": 1434540452, "last_edit_date": 1434545992, "question_id": 30890215, "link": "https://stackoverflow.com/questions/30890215/how-to-get-audio-samples-in-linphone-to-pass-to-other-interface-or-to-save-them", "title": "How to get audio samples in linphone to pass to other interface or to save them?", "body": "<p>i am using <code>linphone-3.7.0</code> in <code>imx6 board</code>, the board contains telephony module. Landline telephone is connected with the board via <code>RJ11</code>.</p>\n\n<p>Here i wanted to pass the audio samples to telephony module so that it will pass those audio samples to landline telephone. </p>\n\n<p>From the source code of the <code>linphone</code> can u suggest me from where can i get the audio samples in the code as the source code is very huge?</p>\n"}, {"tags": ["c", "macos", "abort"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1434540533, "post_id": 30890156, "comment_id": 49819690, "body": "Suggestion: <code>!feof(fp)</code> tends to be erroneous."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1434540806, "post_id": 30890156, "comment_id": 49819884, "body": "Can you possibly use a debugger to pinpoint the exact erroneous instruction?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1434541513, "last_edit_date": 1434541513, "creation_date": 1434540697, "answer_id": 30890316, "question_id": 30890156, "link": "https://stackoverflow.com/questions/30890156/abort-trap-6-running-c-program-on-a-mac/30890316#30890316", "title": "&quot;Abort trap: 6&quot; running C program on a Mac", "body": "<p>I did not run your code with the given inputs, but without that,  it looks like, you're facing UB in your code. In the case of the statement</p>\n\n<pre><code> strcpy(posizione,\"orizzontale\");\n</code></pre>\n\n<p>the source string is of more length than the destination can hold. It tries to write past the allocated memory which in turn invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4892395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1795, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434541513, "creation_date": 1434540309, "last_edit_date": 1434541308, "question_id": 30890156, "link": "https://stackoverflow.com/questions/30890156/abort-trap-6-running-c-program-on-a-mac", "title": "&quot;Abort trap: 6&quot; running C program on a Mac", "body": "<p>I have a problem with this program. When I try to run it on my Mac, it returns \"Abort trap: 6\". I cannot understand the reason.</p>\n\n<p>Below is the file contents I used to test the program.</p>\n\n<blockquote>\n  <p>aaabccdegags<br> bbbbbbbcados<br>\n  vbaiusbyabtd<br>aisybavsitvc<br>asindvsivati<br>ammaccabanan</p>\n</blockquote>\n\n<p>You should just copy these nonsense strings into a text file <code>file.txt</code> and call it by the command prompt with the syntax:</p>\n\n<blockquote>\n  <p>program.exe file.txt r</p>\n</blockquote>\n\n<p>where <code>file.txt</code> includes the nonsense strings and <code>r</code> is the letter it should look for in the text file.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n#define R 24\n#define C 71\n\nint main(int argc, char * argv[]) {\n\nif (argc!=3){\n    printf(\"Errore acquisizione parametri\\n\");\n    return -1;\n}\n\nFILE*fp;\nchar m[R][C],c,posizione[10];\nint i,j,lstr,numrighe,quante,quantemax,posiz,x,y,maxmax;\n\nmaxmax=0;\n\n//posiz=1 se orizzontale\n\nquantemax=0;\n\nsscanf(argv[2],\"%c\",&amp;c);\n\nfp=fopen(argv[1],\"r\");\n\nif (fp==NULL){\n    printf(\"Errore apertura file\\n\");\n    return -3;\n}\n\nfor (i=0;i&lt;R &amp;&amp; (!feof(fp));i++){\n    fgets(m[i],C,fp);\n}\n\nfclose(fp);\n\nlstr=strlen(m[0]);\n\nnumrighe=i;\n\nfor (i=0;i&lt;lstr;i++){\n\n    quante=0;\n\n    for (j=0;j&lt;numrighe;j++) {\n        if (m[i][j]==m[i][j+1]){\n            quante++;\n            if (quante&gt;quantemax){\n                quantemax=quante;\n                if (quantemax&gt;maxmax){\n                y=i;\n                x=j;\n                posiz=1;\n                }\n            }\n        }\n    }\n}\n\nfor (i=0;i&lt;lstr;i++){\n\n    quante=0;\n\n    for (j=0;j&lt;numrighe;j++) {\n        if (m[i][j]==m[i+1][j]){\n            quante++;\n            if (quante&gt;quantemax){\n                quantemax=quante;\n                if (quantemax&gt;maxmax){\n                y=i;\n                x=j;\n                posiz=0;\n                }\n            }\n        }\n    }\n}\n\nif (posiz==1){\n    strcpy(posizione,\"orizzontale\");\n}\n\nelse {\n    if (posiz==0){\n        strcpy(posizione,\"verticale\");\n    }\n}\n\n\nprintf(\"La stringa con il maggior numero di %c consecutive, si trova in %s a partire dalla posizione %d,%d\",c,posizione,x,y);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel-module"], "comments": [{"owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "edited": false, "score": 0, "creation_date": 1434540048, "post_id": 30889800, "comment_id": 49819347, "body": "Canonical way to go is debugfs."}, {"owner": {"reputation": 686, "user_id": 1569246, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5044002ab11af9b875cbc43aa4c746fc?s=128&d=identicon&r=PG", "display_name": "sim", "link": "https://stackoverflow.com/users/1569246/sim"}, "edited": false, "score": 0, "creation_date": 1434540713, "post_id": 30889800, "comment_id": 49819815, "body": "i&#39;ve used a netlink libnl library <a href=\"http://www.infradead.org/~tgr/libnl/\" rel=\"nofollow noreferrer\">infradead.org/~tgr/libnl</a> to send and recv data between a user space app and a kernel module, plus some notifications from a kernel module, it is easy to implement"}, {"owner": {"reputation": 3577, "user_id": 3278063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zJLUV.jpg?s=128&g=1", "display_name": "Jeon", "link": "https://stackoverflow.com/users/3278063/jeon"}, "reply_to_user": {"reputation": 686, "user_id": 1569246, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5044002ab11af9b875cbc43aa4c746fc?s=128&d=identicon&r=PG", "display_name": "sim", "link": "https://stackoverflow.com/users/1569246/sim"}, "edited": false, "score": 0, "creation_date": 1434541490, "post_id": 30889800, "comment_id": 49820339, "body": "@sim, do you mean <code>libnl</code> can measure a time when frames are tx&#39;ed or rx&#39;ed? Or do you just mean that it has a capability of triggerint data transmission and reception?"}, {"owner": {"reputation": 686, "user_id": 1569246, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5044002ab11af9b875cbc43aa4c746fc?s=128&d=identicon&r=PG", "display_name": "sim", "link": "https://stackoverflow.com/users/1569246/sim"}, "edited": false, "score": 0, "creation_date": 1434552246, "post_id": 30889800, "comment_id": 49828887, "body": "@Jeon it&#39;s a lib to simplify usage of netlink protocol, which main goal is to communicate between user space and kernel space, with netlink you can create events in your kernel module and subscribe your userspace app for them"}, {"owner": {"reputation": 3577, "user_id": 3278063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zJLUV.jpg?s=128&g=1", "display_name": "Jeon", "link": "https://stackoverflow.com/users/3278063/jeon"}, "reply_to_user": {"reputation": 686, "user_id": 1569246, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5044002ab11af9b875cbc43aa4c746fc?s=128&d=identicon&r=PG", "display_name": "sim", "link": "https://stackoverflow.com/users/1569246/sim"}, "edited": false, "score": 0, "creation_date": 1434553149, "post_id": 30889800, "comment_id": 49829690, "body": "@sim, Oh, until now I understand <code>libnl</code> is a library for communication (e.g. ethernet, wifi...). I learn something new here. Thanks a lot."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1434572333, "post_id": 30889800, "comment_id": 49842120, "body": "<code>printk()</code> for heavy loaded task usually a bad idea. Either <i>trace points</i>, or <i>perf</i> are your friends."}], "answers": [{"tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1434540257, "creation_date": 1434540257, "answer_id": 30890138, "question_id": 30889800, "link": "https://stackoverflow.com/questions/30889800/a-better-way-than-printk-to-leave-a-kernel-module-log/30890138#30890138", "title": "A better way than printk() to leave a kernel module log?", "body": "<p>It's not completely clear what you're trying to do, but the fact that you want to write code to run <code>dmesg</code> and <code>grep</code> its contents implies that this is not just for debugging. In that case, <code>printk</code> is not the right solution. You should use the device interface to pass information from your module to user-space. That's what it's for. Then your user-space code can just open <code>/dev/mydevice</code> and read data from it.</p>\n\n<p><code>printk</code> is for debugging and diagnostics, not for ordinary communication between kernel- and user-space. You will totally overwhelm the <code>printk</code> buffer if there is any significant amount of network traffic.</p>\n\n<p>Use of the timestamp counter is fine for debugging, but is generally ill-suited for stable long-term time measurements (among others, processor frequencies vary, and multiple processors might not be synchronized). You're better off using <code>ktime_get</code> or <code>do_gettimeofday</code> or one of the other kernel time interfaces.</p>\n"}], "owner": {"reputation": 3577, "user_id": 3278063, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zJLUV.jpg?s=128&g=1", "display_name": "Jeon", "link": "https://stackoverflow.com/users/3278063/jeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1434540257, "creation_date": 1434539289, "last_edit_date": 1434539398, "question_id": 30889800, "link": "https://stackoverflow.com/questions/30889800/a-better-way-than-printk-to-leave-a-kernel-module-log", "title": "A better way than printk() to leave a kernel module log?", "body": "<p>I am using<a href=\"http://www.makelinux.net/books/lkd2/ch18lev1sec3\" rel=\"nofollow\"><code>printk()</code></a> to leave a log message of a kernel module. I've modified <a href=\"https://wireless.wiki.kernel.org/en/users/drivers/ath9k_htc\" rel=\"nofollow\"><code>ath9k_htc</code></a> WLAN card module to leave a log message whenever a WLAN card transmits or receives a data or an acknowledgement frame. A log meesage contains a frame type and clock cycles.</p>\n\n<pre><code>printk(KERN_DEBUG \"MyModule: DATA at %llu\\n\", get_ccnt());\n</code></pre>\n\n<p>where <code>get_ccnt()</code> is:</p>\n\n<pre><code>static __inline__ long long int get_ccnt(void)\n{\n#if defined(__i386__)\n    long long int x;\n    __asm__ volatile (\".byte 0x0f, 0x31\" : \"=A\" (x));\n    return x;\n\n#elif defined(__x86_64__)\n    unsigned int hi, lo;\n    __asm__ __volatile__ (\"rdtsc\" : \"=a\"(lo), \"=d\"(hi));\n    return ( (long long int)lo)|( ((long long int)hi)&lt;&lt;32 );\n\n#endif\n}\n</code></pre>\n\n<p>What I concern is, frames are transmitted and received very frequently. But I think <code>printk()</code> cannot be executed and finished as fast as frames are transmitted and received.</p>\n\n<p>Before I decided to use <code>prinkt()</code>, I have though about using <code>message queue</code> or <code>signal</code>. But, I've given up using them because they are not easy to use in a kernel module or I have little knowledge about it.</p>\n\n<p>(Yes, I want to pass a frame type and clock cycles from a kernel module to a userspace app. As I am using <code>printk()</code>, I read a log message with the following:)</p>\n\n<pre><code>FILE *fp = popen(\"dmesg | grep MyModule\");\nchar linebuff[512];\nwhile (fgets(linebuff, 512, fp) != NULL) {\n    do_something();\n}\n</code></pre>\n\n<p>So, is it not good to use <code>printk()</code> to pass a message from a kernel module to a userspace app when a messagecontains time-critical data?</p>\n\n<p>One trivial question is, calling <code>get_ccnt()</code> function makes measurements of clock cycles inaccurate? I don't think so because it is an <code>__inline__</code> function...</p>\n"}, {"tags": ["c", "binary", "compression"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434539184, "post_id": 30889741, "comment_id": 49818775, "body": "Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions here. Please show us what you&#39;ve tried already, how it failed and we might be able to help.:-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1434539222, "post_id": 30889741, "comment_id": 49818801, "body": "<code>leading zeros from integer data</code>...how is that? what is your delimiter then?"}, {"owner": {"reputation": 274, "user_id": 3118513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43626712c8bd830a723d382c8e388a73?s=128&d=identicon&r=PG&f=1", "display_name": "Siddd", "link": "https://stackoverflow.com/users/3118513/siddd"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434540516, "post_id": 30889741, "comment_id": 49819678, "body": "Delimiter is 1. Its simply a case of counting leading zeros in binary data and then shifting it by the count to get the output which always starts with a 1"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1434541178, "post_id": 30889741, "comment_id": 49820125, "body": "Your description is a bit unclear. Are you compressing, for instance, both <code>{255, 0}</code> and <code>{0, 255}</code> to <code>{255}</code>? There is no way to distinguish one from the other without any external data."}], "answers": [{"tags": [], "owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "is_accepted": true, "score": 1, "last_activity_date": 1434539783, "creation_date": 1434539783, "answer_id": 30889967, "question_id": 30889741, "link": "https://stackoverflow.com/questions/30889741/compression-of-char-size-integer-by-removing-leading-zeroes/30889967#30889967", "title": "Compression of char size integer by removing leading zeroes", "body": "<p>Nice try, with just few corrections. You have to store a mark that will give you a clue how long was original value so you can decompress it back. Sure thing, there is nothing new under the moon so you can reuse such thing as <strong>VarInt</strong>:</p>\n\n<p><a href=\"https://developers.google.com/protocol-buffers/docs/encoding#varints\" rel=\"nofollow\">https://developers.google.com/protocol-buffers/docs/encoding#varints</a></p>\n\n<p>It's wide-spread practice and supported in many libs at broad range of lanuages</p>\n"}], "owner": {"reputation": 274, "user_id": 3118513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43626712c8bd830a723d382c8e388a73?s=128&d=identicon&r=PG&f=1", "display_name": "Siddd", "link": "https://stackoverflow.com/users/3118513/siddd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 30889967, "answer_count": 1, "score": 0, "last_activity_date": 1434539783, "creation_date": 1434539121, "question_id": 30889741, "link": "https://stackoverflow.com/questions/30889741/compression-of-char-size-integer-by-removing-leading-zeroes", "title": "Compression of char size integer by removing leading zeroes", "body": "<p>I compressed a char array by removing leading zeros from integer data and packed them tightly (without leaving spaces bit-wise). I wish to decompress it to get my original data back. The data is 8-bit and can have any number of zeros ranging from 0 to 8. I cannot exceed the 8 bit limit to store flags and cannot send another string of data as the communication speed is not reliable. I am working in C and removed the zeros by counting them and shifting. </p>\n"}, {"tags": ["c", "embedded", "flash-memory"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1434542783, "post_id": 30889703, "comment_id": 49821297, "body": "Is your bootloader relocable? Are you running in RAM or is your bootloader on a flash page that is not cancelled by Flash_Erase func?"}, {"owner": {"reputation": 303, "user_id": 3563879, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/501790882/picture?type=large", "display_name": "kidz55", "link": "https://stackoverflow.com/users/3563879/kidz55"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1434543746, "post_id": 30889703, "comment_id": 49822109, "body": "my bootloader is a the end of the FLASH, it is normally not erased by the function"}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1434544778, "post_id": 30889703, "comment_id": 49822896, "body": "If the Flash_Erase() function is executing from flash then I wouldn&#39;t expect it to work.  Imagine that while it&#39;s in the process of writing the flash erase commands it is also reading instructions from flash.  The instruction reads will interfere with the erase command sequence.  I believe you need to copy Flash_Erase() to RAM and execute it from there.  (The same goes for Flash_Program().)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 0, "creation_date": 1434545044, "post_id": 30889703, "comment_id": 49823093, "body": "@kkrambo Is usual in cortex M cores (or MCU without MMU) to erase/program program-flash excuting from flash. You have to take care/avoid to erase the sector/page that where the code is executing."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434565430, "post_id": 30889703, "comment_id": 49837820, "body": "I just read ybout the STM32F4xx, so not sure if that applies to the &#39;L1xx, too (but most likely): While programming, accesses to the Flash stall. This might be a problem for interrupts. It would be helpful, if you add explicitly <i>what</i> is going wrong. Did you read the &quot;flash programming manual&quot; for your device? If that runs under debugger control, there might be additional quirks (not sure about STM, but I had other MCUs exhibiting such problems)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434576837, "post_id": 30889703, "comment_id": 49844462, "body": "Are you aware you are erasing the reset vectors and therefore make entry into the bootloader impossible? Not to talk about the interrupt verctors which instantly follow (Interrupts should be disabled anyway)."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434576783, "post_id": 30891878, "comment_id": 49844433, "body": "He still would erase the reset vector, which is in the first sector."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434607681, "post_id": 30891878, "comment_id": 49853188, "body": "@Olaf The problem is that the bootloader belongs at the end of flash, something that I totally disagree. Anyway is not a problem to cancel and re-flash the ISP and IPC, but is very risky. About vector table, lot of embedded tiny rtos (FreeRTOS, MQX...) remap the vector table to RAM at startup.I hope bootloader has vector table in its sector. Finally, OP can do what is trying to do, but the first time somethig go wrong (eg. power off during ISP and IPC re-write) the application is compromized."}, {"owner": {"reputation": 303, "user_id": 3563879, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/501790882/picture?type=large", "display_name": "kidz55", "link": "https://stackoverflow.com/users/3563879/kidz55"}, "edited": false, "score": 0, "creation_date": 1434616855, "post_id": 30891878, "comment_id": 49858478, "body": "In fact, what i&#39;m trying to do here , is to write my own bootloader, I have to erase enought sectors to flash my new program from the USART . THe problem is i can only flash the first sector and it freeze, maybe my bootloader is at a wrong location and i attempt to read / write at the same time ... I checked my  linker script but i&#39;m not sure how to place my bootloader where i want ...."}, {"owner": {"reputation": 303, "user_id": 3563879, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/501790882/picture?type=large", "display_name": "kidz55", "link": "https://stackoverflow.com/users/3563879/kidz55"}, "edited": false, "score": 0, "creation_date": 1434617427, "post_id": 30891878, "comment_id": 49858864, "body": "my question is : where do i have to flash my new code ? do i have to let sector 0 because of the vector table ? and how do i put my bootloader at the end of the FLASH"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1434622837, "post_id": 30891878, "comment_id": 49862576, "body": "It depends on many things. First of all: are you sure that your bootloader belongs to the last sector? If Yes, where its vector table belongs? Is the vector table RAM remapped at start of bootloader? If our bootloader maps the vector table from address 0 you cannot erase it and use uart via interrupt, for example. Anyway, my suggestion is to put the bootloader into the first sectors. This grants that IPC ans ISP are preserved on corruption."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1434624245, "post_id": 30891878, "comment_id": 49863500, "body": "FreeRTOS does definitvely <i>not</i> remap the vector table - at least for ARM Cortex-M, it does not (I would know). For normal operation, at least the reset vecots are required to reside in Flash. It is also good practice: what happens if flashing fails (power break, unexpected reset/hard-falut/ etc.). That becomes even more critical, as he depends on an external system to get the data to flash properly."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1434607862, "last_edit_date": 1434607862, "creation_date": 1434544780, "answer_id": 30891878, "question_id": 30889703, "link": "https://stackoverflow.com/questions/30889703/erasing-my-flash-on-stm32l1/30891878#30891878", "title": "Erasing my Flash on STM32L1", "body": "<p>In your code you are tring to erase the whole flash, but you are executing your bootloader from flash from final sectors.</p>\n\n<p>As reported by th REF man</p>\n\n<blockquote>\n  <p>During a write/erase operation to the NVM (except Half Page programming or Double-word\n  erase/write), any attempt to read the same bank of NVM stalls the bus.</p>\n</blockquote>\n\n<p>Then you have to preserve the space of bootloader changing <code>WRITE_END_ADDR</code> define according to your memory map.</p>\n\n<p><strong>Example:</strong> if your bootloader is 4K long and belongs to the last sector <code>(0x0801 F000 - 0x0801 FFFF)</code> then <code>WRITE_END_ADDR</code> must be <code>0x0801 EFFF</code>.</p>\n\n<p><strong>EDIT</strong>\nAs @Olaf wrote take care about your ISP (Initial Stack Pointer) and IPC (Initial Program Counter) that belong to first 8 bytes in your flash at address 0.</p>\n"}], "owner": {"reputation": 303, "user_id": 3563879, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/501790882/picture?type=large", "display_name": "kidz55", "link": "https://stackoverflow.com/users/3563879/kidz55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1369, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492951287, "creation_date": 1434539020, "last_edit_date": 1492951287, "question_id": 30889703, "link": "https://stackoverflow.com/questions/30889703/erasing-my-flash-on-stm32l1", "title": "Erasing my Flash on STM32L1", "body": "<p>I'm facing a problem with my erasing function.\nI try to erase 15 sectors of my Flash in order to put a new binary file.\nI don't understand why but my function freeze and i cannot erase all memory i need.</p>\n\n<p>Here is my code if you want to give a try</p>\n\n<pre><code>/*\n * bootloader.c\n *\n *  Created on: 9 juin 2015\n *      Author: tgloaguen\n */\n#include \"usart.h\"\n#include \"stm32l1xx_flash.h\"\n#define WRITE_START_ADDR 0x08000000\n#define WRITE_END_ADDR 0x0800FFFF\n#define FLASH_PAGE_SIZE    ((uint16_t)0x100) //If a page is 256 bits\n#define MY_BL_FUNCTIONS __attribute__((section(\".bootsection\")))\n\nvoid BootLoader(void) MY_BL_FUNCTIONS;\nFLASH_Status Flash_Write ( uint32_t StartAddress, uint8_t *p, uint32_t Size ) MY_BL_FUNCTIONS;\nuint8_t Flash_Erase() MY_BL_FUNCTIONS;\nvoid Receive_Data(char * buffer,int size)MY_BL_FUNCTIONS;\nvoid Receive_Size(char * buffer, int *sizeData)MY_BL_FUNCTIONS;\n\nvoid BootLoader(void) {\n\n    //clear all ITs\n    USART_ITConfig( USART1, USART_IT_RXNE, DISABLE );\n    //SendString(\"HELLO\",USART2);\n    uint8_t status,i;\n    char buffer[33];\n    //en dur\n    uint16_t *adr = WRITE_START_ADDR;\n    uint16_t sizeBin = 51400,k = 0,k_hexa = 0x20;\n    SendString(\"BOOTLOADER\",USART2);\n\n\n    Flash_Erase();\n    SendString(\"ERASEOK\",USART2);\n    //if sizeBin ok\n}\n</code></pre>\n\n<p>and the erase function</p>\n\n<pre><code>uint8_t Flash_Erase() {\n\n    uint32_t EraseCounter = 0x00, Address = 0x00;//Erase count, write address\n    uint32_t NbrOfPage = 0x00;//Recording to erase the pages\n    volatile FLASH_Status FLASHStatus = FLASH_COMPLETE;/*FLASH complete erasure marks*/\n      /*Unlock FLASH*/\n\n    FLASH_Unlock();\n      /*Calculate the number of FLASH pages need to erase */\n    NbrOfPage = (WRITE_END_ADDR - WRITE_START_ADDR) / FLASH_PAGE_SIZE;\n      /* Remove all hang flags */\n    FLASH_ClearFlag ( FLASH_FLAG_EOP     |\n                            FLASH_FLAG_WRPERR  |\n                            FLASH_FLAG_PGAERR  |\n                            FLASH_FLAG_SIZERR  |\n                            FLASH_FLAG_OPTVERR );\n      /* Erase the FLASH page*/\n    for(EraseCounter = 0; (EraseCounter &lt;NbrOfPage) &amp;&amp; (FLASHStatus == FLASH_COMPLETE); EraseCounter++)\n      {\n        SendString(\"ok |\",USART2);\n        FLASHStatus = FLASH_ErasePage(WRITE_START_ADDR + (FLASH_PAGE_SIZE * EraseCounter));\n\n      }\n      FLASH_Lock ( );\n\n    return (uint8_t)FLASHStatus;\n}\n</code></pre>\n"}, {"tags": ["c", "xcode", "gcc", "dynamic-library"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434539001, "post_id": 30889681, "comment_id": 49818654, "body": "did you try <code>-lpthread</code>?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1434539099, "post_id": 30889681, "comment_id": 49818721, "body": "What symbols are undefined?"}, {"owner": {"reputation": 109, "user_id": 1824538, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2bj5i.jpg?s=128&g=1", "display_name": "Jan Hettenkofer", "link": "https://stackoverflow.com/users/1824538/jan-hettenkofer"}, "edited": false, "score": 0, "creation_date": 1434539356, "post_id": 30889681, "comment_id": 49818891, "body": "I have not tried <code>-lpthread</code>, but I will, as soon as I am back at my computer. The undefined symbols are from the ltraffic library."}, {"owner": {"reputation": 109, "user_id": 1824538, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2bj5i.jpg?s=128&g=1", "display_name": "Jan Hettenkofer", "link": "https://stackoverflow.com/users/1824538/jan-hettenkofer"}, "edited": false, "score": 0, "creation_date": 1434565152, "post_id": 30889681, "comment_id": 49837683, "body": "Just tried <code>-lpthread</code>, sadly, it does not make a difference."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 1824538, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2bj5i.jpg?s=128&g=1", "display_name": "Jan Hettenkofer", "link": "https://stackoverflow.com/users/1824538/jan-hettenkofer"}, "edited": false, "score": 0, "creation_date": 1434565084, "post_id": 30892790, "comment_id": 49837650, "body": "Shouldn&#39;t GCC fail especially in this scenario? My current architecture is x86_64 (OSX 10.10), so since GCC works, I would assume the library is x64. Still xCode is missing symbols for x86_64 (or for i386 if I switch to that architecture in project settings, which would even make sense if the library is indeed i386)."}, {"owner": {"reputation": 4882, "user_id": 611206, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XkN24.png?s=128&g=1", "display_name": "Misha", "link": "https://stackoverflow.com/users/611206/misha"}, "reply_to_user": {"reputation": 109, "user_id": 1824538, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2bj5i.jpg?s=128&g=1", "display_name": "Jan Hettenkofer", "link": "https://stackoverflow.com/users/1824538/jan-hettenkofer"}, "edited": false, "score": 0, "creation_date": 1434609635, "post_id": 30892790, "comment_id": 49854195, "body": "Nope. As you said you specify one architecture, when you have to compile twice external libraries and include both of them to your project. This is because XCode compiles for both i386 AND x86_64. Keep in mind that if you will compile for release, probably you&#39;ll have to compile for armv7 and arm64. I&#39;m using mx3 for cross platform core, so I&#39;m creating 4 versions of this lib (i386, x86_64, armv7 and arm64) and merging them to one &quot;fat&quot; lib to allow my project to run either on simulator or on real devices."}], "tags": [], "owner": {"reputation": 4882, "user_id": 611206, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XkN24.png?s=128&g=1", "display_name": "Misha", "link": "https://stackoverflow.com/users/611206/misha"}, "is_accepted": false, "score": 0, "last_activity_date": 1434613317, "last_edit_date": 1495541668, "creation_date": 1434546997, "answer_id": 30892790, "question_id": 30889681, "link": "https://stackoverflow.com/questions/30889681/xcode-produces-undefined-symbols-for-architecture-x86-64-error-while-gcc-compi/30892790#30892790", "title": "xCode produces &quot;Undefined symbols for architecture x86_64&quot; error while gcc compiles without errors", "body": "<p>The problem is that all your external libraries (pthread, traffic, etc..) have to be compiled for both i386 and x86_64 architectures. This means that you have to have either two library files for each library or one \"fat\" library file (<a href=\"https://stackoverflow.com/questions/3520977/build-fat-static-library-device-simulator-using-xcode-and-sdk-4\">see here</a>).</p>\n"}], "owner": {"reputation": 109, "user_id": 1824538, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2bj5i.jpg?s=128&g=1", "display_name": "Jan Hettenkofer", "link": "https://stackoverflow.com/users/1824538/jan-hettenkofer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434613317, "creation_date": 1434538945, "question_id": 30889681, "link": "https://stackoverflow.com/questions/30889681/xcode-produces-undefined-symbols-for-architecture-x86-64-error-while-gcc-compi", "title": "xCode produces &quot;Undefined symbols for architecture x86_64&quot; error while gcc compiles without errors", "body": "<p>When compiling a demo program for a library with xCode, I get an undefined symbols error. The same C code compiles without any problems with <code>gcc test.c -pthread -ltraffic</code>. I did set the compiler flags I. xCode without any success.</p>\n\n<p>What does xCode do differently than gcc? Don't they both use LLVM?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 2, "creation_date": 1434539100, "post_id": 30889660, "comment_id": 49818722, "body": "You can&#39;t. You need to carry around some type informations."}, {"owner": {"reputation": 1157, "user_id": 4370917, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/UD7AT.jpg?s=128&g=1", "display_name": "icecity96", "link": "https://stackoverflow.com/users/4370917/icecity96"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1434539643, "post_id": 30889660, "comment_id": 49819076, "body": "Does that mean I have to write some function which only difference in parameters\uff1f"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1434539680, "post_id": 30889660, "comment_id": 49819103, "body": "Thats what you are going to do RIGHT NOW!! :D"}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434542134, "post_id": 30889660, "comment_id": 49820806, "body": "Be aware that you return local function data from <code>creat_Vector</code>. Rethink this."}], "answers": [{"comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1434539803, "post_id": 30889956, "comment_id": 49819175, "body": "Oh yes, thats a nice solution, though."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1434541731, "post_id": 30889956, "comment_id": 49820484, "body": "@ckruczek: I have just noticed that local function data is being returned by <code>creat_Vector</code>, which is simply unaccepted. I&#39;ve proposed a possible solution."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1434542117, "post_id": 30889956, "comment_id": 49820786, "body": "Yep totally agreed in that."}], "tags": [], "owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "is_accepted": true, "score": 2, "last_activity_date": 1434542233, "last_edit_date": 1434542233, "creation_date": 1434539749, "answer_id": 30889956, "question_id": 30889660, "link": "https://stackoverflow.com/questions/30889660/how-could-i-know-an-uncertain-type-parameters-size/30889956#30889956", "title": "How could I know an Uncertain type parameters&#39; size", "body": "<p>There is a forbidden thing done in your code.\nYou statically (at compile time) allocate/declare a local <code>_vector</code> of type <code>Vector</code> in your function <code>creat_Vector</code>. Then you return this object to the outside world. However, when you are exiting your function, all local data is dead. So, you should absolutely rethink this.</p>\n\n<p>One suggestion would be:</p>\n\n<pre><code>int init_Vector(Vector* _vect, size_t size, unsigned int ptr_size)\n{\n    size = size?size:VECTOR_BASIC_LENGTH;\n    _vect-&gt;my_capacity = size;\n    _vect-&gt;my_head     = 0;\n    _vect-&gt;my_vector   = malloc(size*ptr_size);\n    if (_vect-&gt;my_vector) {\n        return 0;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>Vector _vector;\nchar *a;\n\nif (init_Vector(&amp;_vector, 5, sizeof(char)) == 0) {\n    printf(\"Success!\\n\");\n}\nelse {\n    printf(\"Failure!\\n\");\n    /* treat appropriately (return error code/exit) */\n}\n\n/* do whatever with a (if needed) and _vector*/\n</code></pre>\n"}], "owner": {"reputation": 1157, "user_id": 4370917, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/UD7AT.jpg?s=128&g=1", "display_name": "icecity96", "link": "https://stackoverflow.com/users/4370917/icecity96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 30889956, "answer_count": 1, "score": 0, "last_activity_date": 1434542233, "creation_date": 1434538891, "question_id": 30889660, "link": "https://stackoverflow.com/questions/30889660/how-could-i-know-an-uncertain-type-parameters-size", "title": "How could I know an Uncertain type parameters&#39; size", "body": "<pre><code>const static int VECTOR_BASIC_LENGTH = 20;\nstruct m_vector\n{\n    void*               my_vector;\n    size_t              my_capacity;\n    size_t              my_head;\n};\n\ntypedef struct m_vector Vector;\n\nVector creat_Vector(size_t size,void *judge)\n{\n    Vector _vector;     \n    size = size?size:VECTOR_BASIC_LENGTH;\n    _vector.my_capacity = size;\n    _vector.my_head     = 0;\n    //How I write the following two lines\n    _vector.my_vector = malloc(sizeof(*judge) * size);\n    return _vector;\n}\n</code></pre>\n\n<p>The type of judge is uncertain,so I pass a void pointer as a parameters.I need the size of <code>*judge</code> to allocate memory to <code>_vector.my_vector</code>,for example if I use:</p>\n\n<pre><code>int *a;\ncreat_Vector(5,a);\n</code></pre>\n\n<p>I want the following line:</p>\n\n<pre><code>_vector.my_vector = malloc(sizeof(*judge)*size);\n</code></pre>\n\n<p>is equal to:</p>\n\n<pre><code>_vector.my_vector = malloc(sizeof(*a)*5);\n</code></pre>\n\n<p>How could I achieve this function.Using pure C</p>\n"}, {"tags": ["python", "c", "xml", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3065932, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c35a603aa47c973c622faa410abac3e?s=128&d=identicon&r=PG&f=1", "display_name": "user3065932", "link": "https://stackoverflow.com/users/3065932/user3065932"}, "edited": false, "score": 0, "creation_date": 1434548354, "post_id": 30890511, "comment_id": 49825848, "body": "Hi. Thank you for getting back to me. I will try your solution and update on the outcome."}], "tags": [], "owner": {"reputation": 1659, "user_id": 1665093, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ef1f5c214981ce4ac923f8be8c75d1c2?s=128&d=identicon&r=PG", "display_name": "sk11", "link": "https://stackoverflow.com/users/1665093/sk11"}, "is_accepted": false, "score": 1, "last_activity_date": 1434542368, "last_edit_date": 1434542368, "creation_date": 1434541151, "answer_id": 30890511, "question_id": 30889566, "link": "https://stackoverflow.com/questions/30889566/generating-a-c-header-file-from-an-xml-schema-using-python-script/30890511#30890511", "title": "Generating a C header file from an XML schema using Python script", "body": "<p>You can accomplish this using <code>PyXb</code> and <code>Cheetah Template Engine</code>. </p>\n\n<p><strong>Step 1:</strong></p>\n\n<p>Assuming you have a XML schema file (<code>.xsd</code>) you can use <code>PyXb</code> to translate the schema file to Python objects or data bindings. Check <a href=\"http://pyxb.sourceforge.net/\" rel=\"nofollow\">PyXb</a> and this <a href=\"http://pyxb.sourceforge.net/userref_pyxbgen.html\" rel=\"nofollow\">link</a> which demonstrates how to generate Python bindings from XML schema.</p>\n\n<p><strong>Step 2:</strong></p>\n\n<p>Once you get your Python objects/bindings, you can use a Template Engine to use Python objects to generate the C source. One recommendation would be <a href=\"http://www.cheetahtemplate.org/\" rel=\"nofollow\">Cheetah</a>. You need to write a template file (<code>some.tmpl</code>) which contains semantics of how your C code will look like. This template will be input to Cheetah to generate the final C code.</p>\n\n<p><a href=\"http://www.cheetahtemplate.org/docs/users_guide_html/\" rel=\"nofollow\">Cheetah user guide</a></p>\n"}], "owner": {"reputation": 83, "user_id": 3065932, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c35a603aa47c973c622faa410abac3e?s=128&d=identicon&r=PG&f=1", "display_name": "user3065932", "link": "https://stackoverflow.com/users/3065932/user3065932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1660, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1434542368, "creation_date": 1434538653, "question_id": 30889566, "link": "https://stackoverflow.com/questions/30889566/generating-a-c-header-file-from-an-xml-schema-using-python-script", "title": "Generating a C header file from an XML schema using Python script", "body": "<p>As the title says, I need to write a Python script that generates a C header file from an XML schema. </p>\n\n<p>Can anyone please point me to a good tool that could automatically generate a C header file from an XML schema or show me an example project where a Python script was written to parse an XML file to output a C file?</p>\n\n<p>I have done a lot of googling but I only find results for doing the opposite (C file to XML).</p>\n\n<p>Kind Regards</p>\n"}, {"tags": ["c", "main", "void-pointers", "argv"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1434538730, "post_id": 30889536, "comment_id": 49818467, "body": "You do know that on modern operating systems processes have virtual address spaces, and more importantly each process virtual address space is separate from the other processes. Meaning that a valid address in one process will most likely not be valid in another process, and even if it&#39;s valid there&#39;s no guarantee that it points to similar data."}, {"owner": {"reputation": 334, "user_id": 2477289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63dab99ae7101fcf179209341216691?s=128&d=identicon&r=PG", "display_name": "Krzysztof Sawicki", "link": "https://stackoverflow.com/users/2477289/krzysztof-sawicki"}, "edited": false, "score": 3, "creation_date": 1434538736, "post_id": 30889536, "comment_id": 49818477, "body": "Arguments in <code>argv[]</code> are always strings (char*). So the addres you enter must be first converted to a number and after that treated as pointer."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1434538844, "post_id": 30889536, "comment_id": 49818545, "body": "If you want to share memory between two processes, there this thing called <a href=\"https://en.wikipedia.org/wiki/Shared_memory_%28interprocess_communication%29\" rel=\"nofollow noreferrer\"><i>shared memory</i></a>, and even when using that the actual addresses will most likely be different in the two processes."}, {"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1434539507, "post_id": 30889536, "comment_id": 49818986, "body": "@Joachim Pileborg: The typical use-case for this is for passing the base of a shared memory space to a (non-POSIX) child process inheriting the buffer at the same offset. These sort of shenanigans are fairly common on Windows. In any event I would suggest the &quot;%p&quot; <code>printf</code>/<code>scanf</code> specifier here."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1434539144, "post_id": 30889634, "comment_id": 49818758, "body": "<a href=\"http://en.cppreference.com/w/c/string/byte/strtoul\" rel=\"nofollow noreferrer\"><code>strtoul</code></a> would probably be better. Not that it matters unless the OP is running on a system with a single unified address-space (some operating systems for small embedded systems still do that)."}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 4, "last_activity_date": 1434538812, "creation_date": 1434538812, "answer_id": 30889634, "question_id": 30889536, "link": "https://stackoverflow.com/questions/30889536/pass-void-type-to-main-function/30889634#30889634", "title": "Pass void* type to main() function", "body": "<p>I suspect you want something like</p>\n\n<pre><code>HandleStr = (void *)strtol(argv[1], NULL, 16);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1434539143, "creation_date": 1434539143, "answer_id": 30889753, "question_id": 30889536, "link": "https://stackoverflow.com/questions/30889536/pass-void-type-to-main-function/30889753#30889753", "title": "Pass void* type to main() function", "body": "<p>If you have a C99 compiler, you should :</p>\n\n<ul>\n<li>decode <code>argv[1]</code> as an hexadecimal number into an <code>intptr_t</code></li>\n<li>assign that value to your <code>void *</code></li>\n</ul>\n\n<p>Something like :</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    if (argc &gt; 1) {\n        long lh = strtol(argv[1], NULL, 16);\n        if (lh != 0) {\n            intptr_t ph = lh;\n            void *handle = ph;\n            printf(\"\\n Handle passed : %p\\n\",handle);\n        }\n    }\n}\n</code></pre>\n\n<p>But beware : <strong>you</strong> should know what is that value and how it should be used in your program. Because as said by Joachim Pileborg, a process cannot access any memory value.</p>\n"}], "owner": {"reputation": 75, "user_id": 1395887, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f8389b9bd1ea8cb9e9fb54a4052b2ddd?s=128&d=identicon&r=PG", "display_name": "deeps8us", "link": "https://stackoverflow.com/users/1395887/deeps8us"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434540307, "creation_date": 1434538564, "last_edit_date": 1434540307, "question_id": 30889536, "link": "https://stackoverflow.com/questions/30889536/pass-void-type-to-main-function", "title": "Pass void* type to main() function", "body": "<p>My main() should get an address as input which needs to be stored in <code>void*</code> address.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    if (argc &gt; 1) {\n        HandleStr = argv[1];\n        printf(\"\\n Handle passed : %s\\n\",HandleStr);\n    }\n}\n</code></pre>\n\n<p>I want this HandleStr as type <code>void *</code>. How can I do that?</p>\n\n<p>Now, I want to run the exec as <code>./testapp \"0xaf6e9800\"</code></p>\n"}, {"tags": ["c", "pointers", "recursion", "binary-search-tree"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1434536392, "post_id": 30888409, "comment_id": 49816989, "body": "<code>return(node);</code> wrong position."}], "answers": [{"comments": [{"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "edited": false, "score": 0, "creation_date": 1434538036, "post_id": 30888640, "comment_id": 49818022, "body": "Thanks  for the answer . But I have one doubt. insert_item takes  item* as its paramater  but root.link-&gt;left is of type link. how it will work ?"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "reply_to_user": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "edited": false, "score": 0, "creation_date": 1434545232, "post_id": 30888640, "comment_id": 49823241, "body": "@samprat, sorry for the late reply as I was busy, see the edited answer."}, {"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "edited": false, "score": 0, "creation_date": 1434552836, "post_id": 30888640, "comment_id": 49829432, "body": "I cannot able to change structure. So do you think there is any other way?"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "reply_to_user": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "edited": false, "score": 0, "creation_date": 1434554751, "post_id": 30888640, "comment_id": 49830880, "body": "According to your structure, <code>items</code> knows <code>link</code> whereas <code>link</code> knows only <code>link</code>s. Then how can you point a new <code>item</code> from <code>link</code>? Then is it possible to contract a tree?"}, {"owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "edited": false, "score": 0, "creation_date": 1434570155, "post_id": 30888640, "comment_id": 49840744, "body": "rakeb , I guess that is the trick? I need to find solution using above structure"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "reply_to_user": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "edited": false, "score": 0, "creation_date": 1434570222, "post_id": 30888640, "comment_id": 49840784, "body": "best of luck, if I get some times, i will think about it too."}], "tags": [], "owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "is_accepted": false, "score": 1, "last_activity_date": 1434545157, "last_edit_date": 1434545157, "creation_date": 1434536153, "answer_id": 30888640, "question_id": 30888409, "link": "https://stackoverflow.com/questions/30888409/using-recursive-function-to-insert-item-in-binary-search-tree/30888640#30888640", "title": "using recursive function to insert item in Binary search tree", "body": "<p>In <code>insert_item()</code> use something like this to traverse left or right:</p>\n\n<pre><code>root.link-&gt;left\nroot.link-&gt;right\n</code></pre>\n\n<p>But remember, in your <code>insert</code> method you are returning <code>void</code> except <code>*node</code> like traditional insertion.</p>\n\n<p>Note, Your <code>struct node* insert(struct node* node, int data)</code> will give <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a> because of no <code>return</code> statement when <code>node == NULL</code>.</p>\n\n<p><strong>EDIT:</strong> As OP asked in the comment, \"but root.link->left is of type link. how it will work ?\"</p>\n\n<p>So change</p>\n\n<pre><code>struct link\n{\n   struct link *left;\n   struct link *right;\n};\n</code></pre>\n\n<p>to,</p>\n\n<pre><code>struct link\n{\n   struct item *left;\n   struct item *right;\n};\n</code></pre>\n\n<p>That will solve your problem. But don't forget the forward declaration of <code>struct item</code>. Otherwise in <code>struct link</code> compiler will raise error as it don't know what <code>item</code> is.</p>\n"}, {"tags": [], "owner": {"reputation": 563, "user_id": 6182941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/976b9e7482799ad1d189094b817c9b4f?s=128&d=identicon&r=PG", "display_name": "ceilingcat", "link": "https://stackoverflow.com/users/6182941/ceilingcat"}, "is_accepted": true, "score": 1, "last_activity_date": 1477097326, "creation_date": 1477097326, "answer_id": 40187241, "question_id": 30888409, "link": "https://stackoverflow.com/questions/30888409/using-recursive-function-to-insert-item-in-binary-search-tree/40187241#40187241", "title": "using recursive function to insert item in Binary search tree", "body": "<p>The solution is to use casts.</p>\n\n<pre><code>int insert(struct link** node, uint8_t data) {\n  if (*node == NULL) {\n    // code to implement root code;\n    *node = malloc( sizeof(struct item) );\n    if(*node == NULL) return -1;\n    ( (struct item*) *node)-&gt;c = data;\n    ( (struct item*) *node)-&gt;link.left = ( (struct item*) *node)-&gt;link.right = NULL;\n  } else {\n    // 2. Otherwise, recur down the tree\n    int rc;\n    if (data &lt;= ( (struct item*) *node)-&gt;c) { \n      rc = insert(&amp;( ( (struct item*) *node)-&gt;link.left ), data);\n      if( rc &lt; 0 ) return rc;\n    } else {\n      rc = insert(&amp;( ( (struct item*) *node)-&gt;link.right ), data);\n      if( rc &lt; 0 ) return rc;\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Note that I made a few changes to your code. Namely, I no longer assume that <code>node-&gt;left</code> and <code>node-&gt;right</code> are not assigned.</p>\n"}], "owner": {"reputation": 1940, "user_id": 529482, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16f658eea0c4290ac7dd7587196b7d39?s=128&d=identicon&r=PG", "display_name": "samprat", "link": "https://stackoverflow.com/users/529482/samprat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 954, "favorite_count": 0, "accepted_answer_id": 40187241, "answer_count": 2, "score": 1, "last_activity_date": 1477097326, "creation_date": 1434535497, "last_edit_date": 1434538105, "question_id": 30888409, "link": "https://stackoverflow.com/questions/30888409/using-recursive-function-to-insert-item-in-binary-search-tree", "title": "using recursive function to insert item in Binary search tree", "body": "<p><strong>Issue :</strong> How to insert item in BST when pointer is in nested structure?<br>\n<strong>Language :</strong> C  only. </p>\n\n<p>I know about binary search tree and how to do insert delete and print. But this time I have nested structure and inner structure contains pointers. SO I need help /hint how to do that.</p>\n\n<p>Example traditionally we have structure like this</p>\n\n<pre><code>    struct node \n   {\n     int data;\n     struct node* left;\n     struct node* right;\n   }\n</code></pre>\n\n<p>And to insert node at appropriate place it is something like this</p>\n\n<pre><code>struct node* insert(struct node* node, int data)\n {\n     if (node == NULL) \n    {\n       // code to implement root code;\n       node = create_node(); \n     }\n     else\n     {\n       // 2. Otherwise, recur down the tree\n       if (data &lt;= node-&gt;data) \n       { \n         node-&gt;left = insert(node-&gt;left, data);\n       } \n       else \n      {\n        node-&gt;right = insert(node-&gt;right, data);\n      }\n     return(node);\n     }\n }\n</code></pre>\n\n<p>But what I have now is  nested structure</p>\n\n<pre><code>struct link\n{\n   struct link *left;\n   struct link *right;\n};\n\nstruct item\n{\n   struct link link; \n   uint8_t c;\n};\n</code></pre>\n\n<p>Since here item does not have pointer to left and right , how would I insert item  in recursive fashion.\nmy attempt</p>\n\n<pre><code> struct item* insert_item( item* root, uint8_t key )\n{\n    if( !root )\n    {\n        root = create_item( key ); // some function create_item to create first item\n    }\n    /* Otherwise, recur down the tree */\n    else\n   {\n        if( key &lt; root-&gt;c )\n        {\n            insert_item( ); // The node  does not have pointer ?? how would I traverse left or right?\n        }\n        else\n        {\n          // how would I apply recursive to right side of tree?\n\n        }\n   }\n  return root;\n}\n</code></pre>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 23582, "user_id": 598289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=128&d=identicon&r=PG", "display_name": "SJuan76", "link": "https://stackoverflow.com/users/598289/sjuan76"}, "edited": false, "score": 0, "creation_date": 1434534741, "post_id": 30887990, "comment_id": 49815856, "body": "Undefined behavior does not mean &quot;always crash&quot;. It means that the compiler is free to implement it as it wishes, even if its implementation will cause the program to crash. I would guess that , since there is no return statement, the local variables (including the return value from printf) are overwritting the memory location that later would be read as a &quot;return value&quot; by the calling code. Make it return an <code>int*</code> and then more &quot;fun&quot; things will probably happen."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1434537916, "post_id": 30887990, "comment_id": 49817941, "body": "You could use the same version of gcc on each OS, there is still no guarantee of similar behaviour.  I just tried your code using gcc on OS X, and it prints zero, not 12.  Don&#39;t ever depend on undefined behaviour:  a different version of compiler or OS could alter it.  All you have found is a slightly entertaining coincidence, it is of no practical value."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 3875679, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/04631f8b43ddc44f6895741c5e1a4255?s=128&d=identicon&r=PG&f=1", "display_name": "anon_16", "link": "https://stackoverflow.com/users/3875679/anon-16"}, "edited": false, "score": 0, "creation_date": 1434534861, "post_id": 30888030, "comment_id": 49815939, "body": "But, UB in three different system?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 199, "user_id": 3875679, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/04631f8b43ddc44f6895741c5e1a4255?s=128&d=identicon&r=PG&f=1", "display_name": "anon_16", "link": "https://stackoverflow.com/users/3875679/anon-16"}, "edited": false, "score": 1, "creation_date": 1434534930, "post_id": 30888030, "comment_id": 49816001, "body": "@anon_16 UB is specified by the language. it is <i>independent</i> of the system. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1434535071, "last_edit_date": 1434535071, "creation_date": 1434534503, "answer_id": 30888030, "question_id": 30887990, "link": "https://stackoverflow.com/questions/30887990/printf-return-value-without-return-statement/30888030#30888030", "title": "Printf return value without return statement", "body": "<p>Yes, it <strong><em>is</em></strong> <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>If the ending <code>}</code> is reached, without a <code>return</code>, using the returned value is UB.</p>\n\n<p>From <code>C11</code>, chapter \u00a76.9.1, <em>Function definitions</em></p>\n\n<blockquote>\n  <p>If the <code>}</code> that terminates a function is reached, and the value of the function call is used by\n  the caller, the behavior is undefined.</p>\n</blockquote>\n\n<p>You should not really try to <em>judge</em> the UB by seeing the result of UB. It is, well, <em>undefined</em>, after all.</p>\n"}, {"tags": [], "owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "is_accepted": false, "score": 1, "last_activity_date": 1434534828, "creation_date": 1434534828, "answer_id": 30888158, "question_id": 30887990, "link": "https://stackoverflow.com/questions/30887990/printf-return-value-without-return-statement/30888158#30888158", "title": "Printf return value without return statement", "body": "<p>When you build your code, you may get a warning:</p>\n\n<pre><code>warning: no return statement in function returning non-void [-Wreturn-type]\n</code></pre>\n\n<p>In function </p>\n\n<pre><code>int hello(void)\n{\n    (void)printf(\"HELLO WORLD\\n\");\n}\n</code></pre>\n\n<p>Because of no <code>return</code> statement. That's why you will get <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a></p>\n"}, {"tags": [], "owner": {"reputation": 478, "user_id": 3861548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G89Hn.jpg?s=128&g=1", "display_name": "jabujavi", "link": "https://stackoverflow.com/users/3861548/jabujavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1434535113, "creation_date": 1434535113, "answer_id": 30888267, "question_id": 30887990, "link": "https://stackoverflow.com/questions/30887990/printf-return-value-without-return-statement/30888267#30888267", "title": "Printf return value without return statement", "body": "<p>12 is exactly the return value of the first printf.\nProbably, the result of <code>printf(\"HELLO WORLD\\n\");</code> will be left on <code>EAX</code> register.</p>\n\n<p>So, when second printf expect a return value it is the last returned value of a function(<code>EAX</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 1, "last_activity_date": 1434537324, "creation_date": 1434537324, "answer_id": 30889037, "question_id": 30887990, "link": "https://stackoverflow.com/questions/30887990/printf-return-value-without-return-statement/30889037#30889037", "title": "Printf return value without return statement", "body": "<p>While everyone points out the entire business is undefined behaviour, only one person answered to the actual question. However, there question is even more wrong and for some reason nobody tackles it.</p>\n\n<blockquote>\n  <p>Tried this on 3 different systems: CentOS, Ubuntu and Windows(MinGW) ; so I don't think this is an anomaly (undefined behavior)</p>\n</blockquote>\n\n<p>This reasoning is seriously flawed (no amount of systems you test can tell you whether this is defined or not). Not only that, your testing was clearly superficial. On my system compiling the code with -O2 suddenly makes it print 0, and likely same things will happen on your system.</p>\n\n<p>The reason it could have worked by <em>accident</em> is that on your system return value is kept in EAX which was not modified after return to main() and the compiler emitted code which moves the value from EAX to the first argument of another printf.</p>\n\n<p>As was noted earlier and demonstrated with -O2 failure, this cannot be relied upon.</p>\n\n<p>Finally a sentence which is even more wrong:</p>\n\n<blockquote>\n  <p>It returns the correct value, even with different text. Any\n  explanations?</p>\n</blockquote>\n\n<p>What?</p>\n\n<p>Let's take a look at the function in question:</p>\n\n<pre><code>int hello(void)\n{\n        (void)printf(\"HELLO WORLD\\n\");\n}\n</code></pre>\n\n<p>The function has no return statement, so whatever result you get is not \"the correct value\". In particular, you did not ask the language to return the value returned by printf. It so happened that in your testing you got the value returned by printf, but that's not what you asked for, hence it was not \"correct\" in any sense. Strictly speaking one could wonder if the return value of the function which was called last is guaranteed to be returned in such a case, but it was explained and demonstrated that no.</p>\n"}], "owner": {"reputation": 199, "user_id": 3875679, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/04631f8b43ddc44f6895741c5e1a4255?s=128&d=identicon&r=PG&f=1", "display_name": "anon_16", "link": "https://stackoverflow.com/users/3875679/anon-16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1437760569, "creation_date": 1434534386, "last_edit_date": 1437760569, "question_id": 30887990, "link": "https://stackoverflow.com/questions/30887990/printf-return-value-without-return-statement", "title": "Printf return value without return statement", "body": "<p>Tried this on 3 different systems: CentOS, Ubuntu and Windows(MinGW) ; so I don't think this is an anomaly (undefined behavior)</p>\n\n<pre><code>int hello(void)\n{\n        (void)printf(\"HELLO WORLD\\n\");\n}\n\nint main(void)\n{\n        printf(\"%d\\n\",hello());\n        return 0;\n}\n</code></pre>\n\n<p>Output is:</p>\n\n<blockquote>\n  <p>HELLO WORLD<br> 12</p>\n</blockquote>\n\n<p>It returns the correct value, even with different text. Any explanations?</p>\n"}, {"tags": ["ios", "objective-c", "c", "sqlite"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4226071"}, "edited": false, "score": 0, "creation_date": 1434605985, "post_id": 30889258, "comment_id": 49852447, "body": "i have set the call back; but couldn&#39;t find any info regarding the query type. Can u pls explain how to use it to identify query type ?"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1434614814, "post_id": 30889258, "comment_id": 49857249, "body": "The second parameter of the callback is the action code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4226071"}, "edited": false, "score": 0, "creation_date": 1434616987, "post_id": 30889258, "comment_id": 49858565, "body": "below is a single create query result,        {null,18,sqlite_master,null,main,null}{null,2,student,null,m&zwnj;&#8203;ain,null}{null,23,sq&zwnj;&#8203;lite_master,type,mai&zwnj;&#8203;n,null}{null,23,sqli&zwnj;&#8203;te_master,name,main,&zwnj;&#8203;null}{null,23,sqlite&zwnj;&#8203;_master,tbl_name,mai&zwnj;&#8203;n,null}{null,23,sqli&zwnj;&#8203;te_master,rootpage,m&zwnj;&#8203;ain,null}{null,23,sq&zwnj;&#8203;lite_master,sql,main&zwnj;&#8203;,null}{null,20,sqlit&zwnj;&#8203;e_master,ROWID,main,&zwnj;&#8203;null}{null,20,sqlite&zwnj;&#8203;_master,name,main,nu&zwnj;&#8203;ll}{null,20,sqlite_m&zwnj;&#8203;aster,rootpage,main,&zwnj;&#8203;null}{null,20,sqlite&zwnj;&#8203;_master,sql,main,nul&zwnj;&#8203;l}{null,20,sqlite_ma&zwnj;&#8203;ster,tbl_name,main,n&zwnj;&#8203;ull}{null,20,sqlite_&zwnj;&#8203;master,type,main,nul&zwnj;&#8203;l}{null,20,sqlite_ma&zwnj;&#8203;ster,ROWID,main,null&zwnj;&#8203;}"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4226071"}, "edited": false, "score": 0, "creation_date": 1434617116, "post_id": 30889258, "comment_id": 49858646, "body": "parameters are separated by &#39;,&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4226071"}, "edited": false, "score": 0, "creation_date": 1434617278, "post_id": 30889258, "comment_id": 49858768, "body": "the second one is an integer that will give the operation type, that is ok .but what is the criteria i should follow to select one from the (around) 14 results (calls to call back)..."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1434648103, "post_id": 30889258, "comment_id": 49880525, "body": "Table names beginning with <code>sqlite_</code> are internal system tables; you can ignore them. However, it is still possible to get multiple calls with a statement like `CREATE TABLE x AS SELECT ...&#180;; you should ignore READ or SELECT if there is another more specific action."}], "tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 0, "last_activity_date": 1434537874, "creation_date": 1434537874, "answer_id": 30889258, "question_id": 30887819, "link": "https://stackoverflow.com/questions/30887819/is-it-possible-to-identify-the-type-of-query-select-create-etc-executed-by-sq/30889258#30889258", "title": "Is it possible to identify the type of query (select, create etc) executed by sqlite3_step without searching select/create?", "body": "<p>You could install an <a href=\"http://www.sqlite.org/c3ref/set_authorizer.html\" rel=\"nofollow\">authorization callback</a> so that the <code>sqlite3_prepare*</code> calls inform you what the statement will do.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4226071"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434537874, "creation_date": 1434533924, "last_edit_date": 1434535239, "question_id": 30887819, "link": "https://stackoverflow.com/questions/30887819/is-it-possible-to-identify-the-type-of-query-select-create-etc-executed-by-sq", "title": "Is it possible to identify the type of query (select, create etc) executed by sqlite3_step without searching select/create?", "body": "<p>Is it possible to identify the query type (Definition, Manipulation, Query etc) executed by SQLite API <code>sqlite3_step</code> ?</p>\n\n<p><code>sqlite3_step</code> will return <code>SQLITE_DONE</code> if the query is successfully executed. This will be same if the query is a <code>CREATE TABLE</code> query or <code>SELECT * FROM &lt;table&gt;</code> query (if the <code>SELECT</code> query returns no rows).</p>\n\n<p>Is it possible to identify the <code>CREATE</code> query and <code>SELECT</code> query without searching for the strings 'CREATE' and 'SELECT' ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1434534183, "post_id": 30887759, "comment_id": 49815435, "body": "What do you mean with &quot;I can&#39;t figure out the correct syntax&quot;? Are you getting an error? If so, what is the exact error message? How is <code>points</code> declared?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1434534333, "post_id": 30887759, "comment_id": 49815565, "body": "Have you ensured that there is no struct padding? Otherwise your program will halt and catch fire."}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1434534626, "post_id": 30887759, "comment_id": 49815777, "body": "Also, note that <code>x</code> is for <code>unsigned int</code>s."}], "answers": [{"comments": [{"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434537240, "post_id": 30888711, "comment_id": 49817485, "body": "You could skip the first typedefs with <code>#include &lt;stdint.h&gt;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434537421, "post_id": 30888711, "comment_id": 49817604, "body": "@EugeniuRosca MSVC does not have <code>stdint.h</code> or those types defined anywhere else."}, {"owner": {"reputation": 4927, "user_id": 2381750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/edbe6ded64980bad2986da4fb6c598b9?s=128&d=identicon&r=PG&f=1", "display_name": "Eugeniu Rosca", "link": "https://stackoverflow.com/users/2381750/eugeniu-rosca"}, "edited": false, "score": 0, "creation_date": 1434537624, "post_id": 30888711, "comment_id": 49817738, "body": "the question is marked with the <code>c</code> tag only :D. Anyways, there is no issue in your example. +1."}, {"owner": {"reputation": 15, "user_id": 3799358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b1f2fc613e73448cb6847aebfc2af1?s=128&d=identicon&r=PG&f=1", "display_name": "user3799358", "link": "https://stackoverflow.com/users/3799358/user3799358"}, "edited": false, "score": 0, "creation_date": 1434574649, "post_id": 30888711, "comment_id": 49843423, "body": "bddb8dae is intended to be negative, is the best way just to flip the bits with NOT (~)?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 15, "user_id": 3799358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b1f2fc613e73448cb6847aebfc2af1?s=128&d=identicon&r=PG&f=1", "display_name": "user3799358", "link": "https://stackoverflow.com/users/3799358/user3799358"}, "edited": false, "score": 0, "creation_date": 1434576351, "post_id": 30888711, "comment_id": 49844245, "body": "@user3799358 <code>rec.y = (float)(int)v3;</code> You do realise that <code>float</code> won&#39;t hold 32-bit significance? It only holds 24 bit sig. I recommend always using <code>double</code> except where unavoidable. Using <code>float</code> is like using <code>char</code> to scrimp when you should be using <code>int</code>."}, {"owner": {"reputation": 15, "user_id": 3799358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b1f2fc613e73448cb6847aebfc2af1?s=128&d=identicon&r=PG&f=1", "display_name": "user3799358", "link": "https://stackoverflow.com/users/3799358/user3799358"}, "edited": false, "score": 0, "creation_date": 1434576898, "post_id": 30888711, "comment_id": 49844495, "body": "@WeatherVane I don&#39;t need 32-bit significance though"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1434536741, "last_edit_date": 1434536741, "creation_date": 1434536364, "answer_id": 30888711, "question_id": 30887759, "link": "https://stackoverflow.com/questions/30887759/scan-values-of-hex-string/30888711#30888711", "title": "Scan values of hex string", "body": "<p>You must pass the address of <code>unsigned int</code> to scan data for the <code>%x</code> format specifier. Then you can convert to the proper data type.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef unsigned char uint8_t;\ntypedef unsigned short uint16_t;\n\ntypedef struct param_value{\n    uint8_t sytem_id;\n    uint8_t comp_id;\n    uint16_t seq;\n    uint8_t frame;\n    uint16_t command;\n    uint8_t current;\n    uint8_t autocontinue;\n    float param1;\n    float param2;\n    float param3;\n    float param4;\n    float x;//param7\n    float y;//param8\n    float z;//param9\n    uint8_t fwt;\n}param_value;\n\nint main(void) {\n    char hexstr [] = \"00133587a1bddb8dae00a3a01a010100\";\n    unsigned v1, v2, v3, v4, v5, v6, v7;\n    param_value rec;\n    int txtseq;\n    int cont;\n\n    if (7 != sscanf(hexstr, \"%2x%8x%8x%8x%2x%2x%2x\", &amp;v1, &amp;v2, &amp;v3, &amp;v4, &amp;v5, &amp;v6, &amp;v7))\n    {\n        printf (\"Bad scan\\n\");\n        return 1;\n    }\n\n    rec.seq = (uint16_t)v1;\n    rec.x   = (float)v2;\n    rec.y   = (float)v3;\n    rec.z   = (float)v4;\n    rec.fwt = (uint8_t)v5;\n    txtseq  = (int)v6;\n    cont    = (int)v7;\n\n    printf(\"%u %f %f %f %u %d %d\\n\", rec.seq, rec.x, rec.y, rec.z,\n                                     rec.fwt, txtseq, cont);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>0 322275232.000000 3185282560.000000 10723354.000000 1 1 0\n</code></pre>\n\n<p>But: you have not mentioned whether the <code>y</code> value <code>bddb8dae</code> is intended to be negative.</p>\n"}], "owner": {"reputation": 15, "user_id": 3799358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b1f2fc613e73448cb6847aebfc2af1?s=128&d=identicon&r=PG&f=1", "display_name": "user3799358", "link": "https://stackoverflow.com/users/3799358/user3799358"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 30888711, "answer_count": 1, "score": 1, "last_activity_date": 1434536741, "creation_date": 1434533779, "question_id": 30887759, "link": "https://stackoverflow.com/questions/30887759/scan-values-of-hex-string", "title": "Scan values of hex string", "body": "<p>I have a hex string like this <code>00133587a1bddb8dae00a3a01a010100</code>, which is actually 7 hex strings concatenated that when expanded out look like this <code>00 133587a1 bddb8dae 00a3a01a 01 01 00</code>. I'm trying to scan the first 5 of those values into this struct</p>\n\n<pre><code>typedef struct __param_value{\n    uint8_t sytem_id;\n    uint8_t comp_id;\n    uint16_t seq;\n    uint8_t frame;\n    uint16_t command;\n    uint8_t current;\n    uint8_t autocontinue;\n    float param1;\n    float param2;\n    float param3;\n    float param4;\n    float x;//param7\n    float y;//param8\n    float z;//param9\n    uint8_t fwt;\n\n}param_value\n</code></pre>\n\n<p>and the last 2 into these variables</p>\n\n<pre><code>    int txtseq;\n    int cont=1;\n</code></pre>\n\n<p>by using sscanf, like this</p>\n\n<pre><code>sscanf(in_str,\"%2x%8x%8x%8x%2x%2x%2x\",&amp;(points[wp].seq),&amp;(points[wp].x),&amp;(points[wp].y),&amp;(points[wp].z),&amp;(points[wp].fwt),&amp;txtseq,&amp;cont);\n</code></pre>\n\n<p>but I can't figure out the correct syntax. Is it possible to do it this way?</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1434533699, "post_id": 30887706, "comment_id": 49815076, "body": "Please be aware that we do not provide <i>from-scratch</i> coding service here. Please show us what you&#39;ve tried already, how it failed and we might be able to help.:-)"}, {"owner": {"reputation": 6681, "user_id": 619295, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a928b0d96628fa4b5529a85b33c50477?s=128&d=identicon&r=PG", "display_name": "trenki", "link": "https://stackoverflow.com/users/619295/trenki"}, "edited": false, "score": 1, "creation_date": 1434534076, "post_id": 30887706, "comment_id": 49815364, "body": "Also take a look at <code>fscanf</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 6681, "user_id": 619295, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a928b0d96628fa4b5529a85b33c50477?s=128&d=identicon&r=PG", "display_name": "trenki", "link": "https://stackoverflow.com/users/619295/trenki"}, "edited": false, "score": 0, "creation_date": 1434534247, "post_id": 30887706, "comment_id": 49815492, "body": "@trenki (to complete your sentence) .... and corresponding error checkings. [Don&#39;t get me wrong, really you need to be very careful while using <code>fscanf()</code>]."}, {"owner": {"reputation": 113, "user_id": 5014755, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10155659035700612/picture?type=large", "display_name": "Shant Cancik", "link": "https://stackoverflow.com/users/5014755/shant-cancik"}, "edited": false, "score": 0, "creation_date": 1434534545, "post_id": 30887706, "comment_id": 49815734, "body": "Ahh sorry guys. I&#39;m new to this site. This community is awesome! Thanks for the tips. I&#39;ll look into fscanf."}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1434535989, "post_id": 30887706, "comment_id": 49816742, "body": "Your <code>channels</code> array has a fixed size, but your <code>while</code> loop is not taking its size into account. Beware of buffer overflows. (Edit: <code>title</code> too has a fixed size.)"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1434533937, "post_id": 30887762, "comment_id": 49815255, "body": "@AndreaCorbellini Not pedantic, I&#39;d say a MUST. Thank, i&#39;ll update. :-)"}, {"owner": {"reputation": 113, "user_id": 5014755, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10155659035700612/picture?type=large", "display_name": "Shant Cancik", "link": "https://stackoverflow.com/users/5014755/shant-cancik"}, "edited": false, "score": 1, "creation_date": 1434535439, "post_id": 30887762, "comment_id": 49816368, "body": "I edited my original post. Would you guys mind pointing me in the right direction once again? Thank you"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 113, "user_id": 5014755, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10155659035700612/picture?type=large", "display_name": "Shant Cancik", "link": "https://stackoverflow.com/users/5014755/shant-cancik"}, "edited": false, "score": 0, "creation_date": 1434536041, "post_id": 30887762, "comment_id": 49816780, "body": "@ShantCancik No, actually <b>thank you</b> for your efforts. See updated answer. :-)"}, {"owner": {"reputation": 113, "user_id": 5014755, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10155659035700612/picture?type=large", "display_name": "Shant Cancik", "link": "https://stackoverflow.com/users/5014755/shant-cancik"}, "edited": false, "score": 0, "creation_date": 1434537515, "post_id": 30887762, "comment_id": 49817657, "body": "Thank you Sourav! I have edited the code once again. The errors I&#39;m facing now are that I&#39;m trying to set strings as floats. Is there a simple way to do this? Sorry I started learning how to code this past week. I might be doing some stupid things."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 113, "user_id": 5014755, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10155659035700612/picture?type=large", "display_name": "Shant Cancik", "link": "https://stackoverflow.com/users/5014755/shant-cancik"}, "edited": false, "score": 0, "creation_date": 1434537788, "post_id": 30887762, "comment_id": 49817860, "body": "@ShantCancik No worries, at least you&#39;re trying honestly. That&#39;s all you need to learn. and for the error, don&#39;t use <code>==</code>. Did I tell you about <a href=\"http://linux.die.net/man/3/strtod\" rel=\"nofollow noreferrer\"><code>strtod()</code></a>?"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1434536021, "last_edit_date": 1434536021, "creation_date": 1434533787, "answer_id": 30887762, "question_id": 30887706, "link": "https://stackoverflow.com/questions/30887706/how-do-i-load-data-from-a-txt-file-into-variables-in-my-c-program/30887762#30887762", "title": "How do I load data from a txt file into variables in my C program?", "body": "<p>I won't be writing the code, but can try to help with the algotihm, in general.</p>\n\n<ol>\n<li>Open the file.  <em>Help : <a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow\"><code>fopen()</code></a></em></li>\n<li>Check for successful opening. <em>Hint: Return value.</em></li>\n<li>Read a line from the file. Check for the success. <em>Help : <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\"><code>fgets()</code></a> and Return value.</em></li>\n<li>Based on data pattern , tokenize the read line and store into the array.  <em>Help : <a href=\"http://linux.die.net/man/3/strtok\" rel=\"nofollow\"><code>strtok()</code></a></em></li>\n<li>Continue until token is NULL.</li>\n</ol>\n\n<hr>\n\n<p><sup>Note: At point 4, you need to convert some of the tokens to <code>float</code> type. <em>Help:  <a href=\"http://linux.die.net/man/3/strtod\" rel=\"nofollow\"><code>strtod()</code></a></em></sup></p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Appriciate adding the code. Feedback for your code</p>\n\n<ol>\n<li><p>uncomment <code>// exit(1);</code>, you really <em>should</em> (note, not MUST, you can <em>skip</em> also) exit if the <code>fopen()</code> failed.</p></li>\n<li><p><code>fgets()</code> reads one <em>line</em> at at time. So basically, you need three consecutive <code>fgets()</code> to populate one instance of the structure. first <code>fgets()</code> will give <code>title</code>, second one <code>gain</code>, third one <code>offset</code>.</p></li>\n<li><p><code>fgets()</code> reads and stores the trailing <code>\\n</code>. You may want to get rid of that.</p></li>\n<li><p>Use counter to track the structure array member index, too. Your array has only 8  elements here.</p></li>\n</ol>\n"}], "owner": {"reputation": 113, "user_id": 5014755, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10155659035700612/picture?type=large", "display_name": "Shant Cancik", "link": "https://stackoverflow.com/users/5014755/shant-cancik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1591, "favorite_count": 1, "accepted_answer_id": 30887762, "answer_count": 1, "score": 1, "last_activity_date": 1437908259, "creation_date": 1434533653, "last_edit_date": 1437908259, "question_id": 30887706, "link": "https://stackoverflow.com/questions/30887706/how-do-i-load-data-from-a-txt-file-into-variables-in-my-c-program", "title": "How do I load data from a txt file into variables in my C program?", "body": "<p>I have a program that has a struct of channels:</p>\n\n<pre><code>struct channel\n{\n   char title[40];\n   float gain;\n   float offset;\n}; \nint main (int argc, char **argv)\n{\n  struct channel channels[8];\n}\n</code></pre>\n\n<p>And a text file called <code>configurationSettings.txt</code> that holds the information needed to fill up 8 channels:</p>\n\n<pre><code>Title1\n20\n30\nTitle2\n10\n0\nTitle3\n34\n03\n...\n</code></pre>\n\n<p>How would I go about pulling the data from the text file and into their appropriate variables?</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Here is the direction I'm heading so far:</p>\n\n<pre><code>FILE *fptr;\nif ((fptr=fopen(\"configurationSettings.txt\",\"r\"))==NULL){\n   printf(\"\\n\\nConfiguration file not found.\\n\");\n\n  // exit(1); // Program exits if file pointer returns NULL. \n}\nwhile (1) {\n    if (fgets(loadedTitle,150, fptr) == NULL) break;\nif (fgets(loadedGain,150, fptr) == NULL) break;\nif (fgets(loadedOffset,150, fptr) == NULL) break;          \n      printf(\"%s\", loadedTitle);\n  printf(\"%s\", loadedGain);\n  printf(\"%s\", loadedOffset);\n      strcpy(channels[i].title, loadedTitle);\n  loadedGain == channels[i].gain;\n  loadedOffset == channels[i].offset;\n}\nprintf(\"\\n\\n%s\", channels[i].title);\nprintf(\"%f\", channels[i].gain);\nprintf(\"\\n%f\", channels[i].offset);\nfclose(fptr);\n</code></pre>\n\n<p>Here is the output I get. It's basically just printing everything and storing the last line as the first variable. This is definitely not what I want.</p>\n\n<pre><code>Title 1\n10\n30\nTitle 2\n50\n0\nTitle 3\n38\n20\n\n20\n</code></pre>\n"}, {"tags": ["c", "algorithm", "performance", "sorting"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434533641, "post_id": 30887677, "comment_id": 49815026, "body": "Welcome to Stack Overflow! Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions here. Please show us what you&#39;ve tried already, how it failed and we might be able to help.:-)"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1434533751, "post_id": 30887677, "comment_id": 49815118, "body": "You are basically looking for an external sort if file is too big to be loaded to memory, and if it can be loaded to memory - load it, sort in memory, write it (2n file operations)"}, {"owner": {"reputation": 577, "user_id": 4487716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gOkQV.jpg?s=128&g=1", "display_name": "yahya el fakir", "link": "https://stackoverflow.com/users/4487716/yahya-el-fakir"}, "edited": false, "score": 0, "creation_date": 1434533813, "post_id": 30887677, "comment_id": 49815171, "body": "here you have a bunch of of sorting algorithms... <a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Sorting_algorithm</a>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1434534061, "post_id": 30887677, "comment_id": 49815349, "body": "This may help: yesterday&#39;s <a href=\"http://stackoverflow.com/q/30876599/2564301\">question from the same course</a>."}], "answers": [{"tags": [], "owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "is_accepted": false, "score": 1, "last_activity_date": 1434533922, "creation_date": 1434533922, "answer_id": 30887817, "question_id": 30887677, "link": "https://stackoverflow.com/questions/30887677/create-a-new-sorted-file-containing-the-content-of-old-unsorted-file-of-consecut/30887817#30887817", "title": "create a new sorted file containing the content of old unsorted file of consecutive numbers efficiently", "body": "<p>If your file is small enough to fit in memory - just load it to RAM, sort it in RAM using any <a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms\" rel=\"nofollow\">sorting algorithm that suits you</a>, and write the sorted array to a new file. This requires only <code>2n</code> disk operations (<code>n</code> writes and <code>n</code> reads).</p>\n\n<p>If your file is too big to fit in memory, use <a href=\"https://en.wikipedia.org/wiki/External_sorting\" rel=\"nofollow\">external sort</a> (which is basically a variation of <a href=\"https://en.wikipedia.org/wiki/Merge_sort\" rel=\"nofollow\">merge sort</a>) to sort the file with minimal number of disk seeks.</p>\n"}], "owner": {"reputation": 1, "user_id": 5018897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4688c6c41b5f69c1398cc3c7b16f7c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Jean Laphon", "link": "https://stackoverflow.com/users/5018897/jean-laphon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434533922, "creation_date": 1434533598, "question_id": 30887677, "link": "https://stackoverflow.com/questions/30887677/create-a-new-sorted-file-containing-the-content-of-old-unsorted-file-of-consecut", "title": "create a new sorted file containing the content of old unsorted file of consecutive numbers efficiently", "body": "<p>I have a file containing an unordered sequence of strings (that starts from 0 to n)\nand I need to create a new file containing the strings by order\nexample of the original file <Br><code>4asaa</code> <code>1b</code> <code>0z</code> <code>2ca</code> <code>3m</code> <br>\nthe new file will contain the same data but in an ordered sequence (according to the number)<Br> <code>0z</code> <code>1b</code> <code>2ca</code> <code>3m</code> <code>4asaa</code> <br>\nI was trying to find an algorithm to do it efficiently but I don't any efficient idea, since it is c language I am trying to minimize the amount of actions on the file (since it is very slow), but if you have any good idea that uses a lot of file action feel free to share.<br>\nlong story short, I am looking for an efficient way to do it.</p>\n\n<p>Thank you all.</p>\n"}, {"tags": ["c", "branch-prediction", "gray-code"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1434540600, "post_id": 30887618, "comment_id": 49819737, "body": "There are some interesting discussions on the useful of this in: <a href=\"http://stackoverflow.com/q/30130930/1708801\">Is there a compiler hint for GCC to force branch prediction to always go a certain way?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "edited": false, "score": 0, "creation_date": 1434542830, "post_id": 30889053, "comment_id": 49821347, "body": "I know about this advice, but I&#39;m developing a library. And since I don&#39;t have a project to exploit it, running profiling data would be rather meaningless. My problem is that I think that projects using the library (none as of today) wouldn&#39;t call the special most of the time (like <i>most</i> of the time) but can&#39;t be sure."}], "tags": [], "owner": {"reputation": 3852, "user_id": 1607832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf6963d2f289cbf78d9c0ece6920188?s=128&d=identicon&r=PG", "display_name": "missimer", "link": "https://stackoverflow.com/users/1607832/missimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1434546605, "last_edit_date": 1495542600, "creation_date": 1434537366, "answer_id": 30889053, "question_id": 30887618, "link": "https://stackoverflow.com/questions/30887618/use-of-builtin-expected-for-bounds-check/30889053#30889053", "title": "Use of __builtin_expected for bounds check", "body": "<p>Taken from <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">the GCC online docs</a>:</p>\n\n<p>You may use <code>__builtin_expect</code> to provide the compiler with branch prediction information. <strong>In general, you should prefer to use actual profile feedback for this (<code>-fprofile-arcs</code>), as programmers are notoriously bad at predicting how their programs actually perform.</strong> However, there are applications in which this data is hard to collect.</p>\n\n<blockquote>\n  <p>Is this a good place to use __builtin_expect or is incrementing the max value a common enough operation to deceive branch prediction?</p>\n</blockquote>\n\n<p>This all depends on your application.  If the value of <code>gray</code> is uniformly distributed then it will be 1 out of <code>(UINT_MAX+1)</code>, but can you say that for sure?  This is why the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">docs</a> recommend using <code>-fprofile-arcs</code>.</p>\n\n<p>The <a href=\"https://en.wikipedia.org/wiki/Gcov\" rel=\"nofollow noreferrer\">gcov wikipedia article</a> actually contains a nice simple example on how to use <code>-fprofile-arcs</code> and <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Gcov.html\" rel=\"nofollow noreferrer\"><code>gcov</code></a> to get the information to make an informed decision.</p>\n\n<p>Update:</p>\n\n<p>If you can't profile, then all things being equal the edge case <code>gray == msb</code> is very unlikely so you are <em>probably</em> safe with your use of <code>__builtin_expect</code>.  However, if you can't profile because you don't know how your library is going to be used this sounds more like <a href=\"https://stackoverflow.com/questions/312003/what-is-the-most-ridiculous-pessimization-youve-seen\">pessimization</a> than optimization.  If I use your library and always pass in <code>gray</code> such that it equals <code>msb</code> than your library won't be as fast for me.  General libraries that aren't written with a specific application in mind generally try to be good for the average case or without making any assumptions about input.  This is why you see different implementations of <code>malloc</code> such as <a href=\"http://www.canonware.com/jemalloc/\" rel=\"nofollow noreferrer\">jemalloc</a> and <a href=\"http://goog-perftools.sourceforge.net/doc/tcmalloc.html\" rel=\"nofollow noreferrer\">tcmalloc</a>.  Both are optimized for very specific use cases and if you use it in a way that isn't like what it was optimized for it won't do as well.  Also <a href=\"http://blog.man7.org/2012/10/how-much-does-builtinexpect-like-and.html\" rel=\"nofollow noreferrer\">this blog article</a> might be of some interest to you.</p>\n"}], "owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1434551001, "creation_date": 1434533476, "last_edit_date": 1495540274, "question_id": 30887618, "link": "https://stackoverflow.com/questions/30887618/use-of-builtin-expected-for-bounds-check", "title": "Use of __builtin_expected for bounds check", "body": "<p>I have this function which, given a <a href=\"https://en.wikipedia.org/wiki/Gray_code\" rel=\"nofollow noreferrer\">Gray code</a>, returns the next Gray code. You can find a more complete explanation about how it works <a href=\"https://stackoverflow.com/a/21823754/1364752\">here</a>. The thing is that I wanted to make this increment function modular so that incrementing the Gray code corresponding to <code>UINT_MAX</code> returns the Gray code corresponding to <code>0</code> (respectively the most significant bit and <code>0</code>). Since it is not the default behaviour, I added a check for this special case. Here is the complete algorithm:</p>\n\n<pre><code>unsigned next_gray(unsigned gray)\n{\n    static const unsigned msb\n        = 1u &lt;&lt; (CHAR_BITS - sizeof(unsigned) - 1u);\n\n    // gray is odd\n    if (__builtin_parity(gray))\n    {\n        if (__builtin_expect(gray == msb, false))\n        {\n            return 0u;\n        }\n        else\n        {\n            unsigned y = gray &amp; -gray;\n            return gray ^ (y &lt;&lt; 1u);\n        }\n    }\n\n    // gray is even\n    return gray ^ 1;\n}\n</code></pre>\n\n<p>So, the actual question is actually about branch prediction. I have often read that <code>__builtin_expect</code> is to be used only when a branch is really likely to be chosen or really unlikely to be chosen, the common example being for speeding a program up when there are no errors.</p>\n\n<p>Considering that I am not handling an error case, I am unsure whether using <code>__builtin_expect</code> for bounds checking like this is a good idea at all. Is this a good place to use <code>__builtin_expect</code> or is incrementing the max value a common enough operation to deceive branch prediction?</p>\n\n<p><strong>Note:</strong> as always, comments and answers highlight things that are not clear in my questions :)</p>\n\n<p>I will give a bit more context: this function is meant to be part of a library, developed for the sake of being a library and not used by any actual project as of know. Therefore, adding <code>__builtin_expect</code> implies that I expect people to mostly increment other values then the maximum value; without any actual project at hand, I wish to know whether this is a safe assumption.</p>\n"}, {"tags": ["c", "pointers", "compiler-warnings", "suppress-warnings", "keil"], "comments": [{"owner": {"reputation": 19204, "user_id": 638471, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vSVkO.png?s=128&g=1", "display_name": "vbence", "link": "https://stackoverflow.com/users/638471/vbence"}, "edited": false, "score": 0, "creation_date": 1434532841, "post_id": 30887252, "comment_id": 49814366, "body": "But why are you setting it? The warning was supposed to raise your attention that you probably wanted to do something else. We usually don&#39;t include instructions in the code which has no effect to the execution."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1434532843, "post_id": 30887252, "comment_id": 49814368, "body": "The compiler is trying to tell you that the last line of code in your function is meaningless and fills no purpose. How can that warning be irrelevant?"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 3116754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d79abfe74385da33c0bef2505562e66?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/3116754/bob"}, "edited": false, "score": 0, "creation_date": 1564165537, "post_id": 30887279, "comment_id": 100954997, "body": "Thank you so much. I thought I was going crazy, and immediately saw what I had done when I found this."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 6, "last_activity_date": 1434533060, "last_edit_date": 1434533060, "creation_date": 1434532662, "answer_id": 30887279, "question_id": 30887252, "link": "https://stackoverflow.com/questions/30887252/pointer-parameter-was-set-but-never-used-warning/30887279#30887279", "title": "Pointer parameter was set but never used warning", "body": "<p>It is not an irrelevant warning because the assignment has no effect. You could completely remove <code>ptr_1</code> from the code without changing its behaviour. Your code is equivalent to this:</p>\n\n<pre><code>void foo(char *)\n{\n  char *ptr_2;\n  bar(ptr_2);\n}\n</code></pre>\n\n<p>In other words, the function parameter isn't used for anything. If your intention was to change the pointer at the caller side, you need to either pass a pointer to a pointer and de-reference it, or return the new value and let the caller use its value:</p>\n\n<pre><code>void foo(char **ptr_1)\n{\n    char *ptr_2;\n    bar(ptr_2);\n    *ptr_1 = ptr_2;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char* foo()\n{\n    char *ptr_2;\n    bar(ptr_2);\n    return ptr_2;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1434540793, "post_id": 30887286, "comment_id": 49819872, "body": "I don&#39;t like <a href=\"http://stackoverflow.com/questions/28985515/is-warning-c4127-conditional-expression-is-constant-ever-helpful\">some warning</a>. They are bad."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1434541051, "post_id": 30887286, "comment_id": 49820031, "body": "@MohitJain Agree. Believe it or not, I read that specific question of yours long back and that&#39;s why, I used <i>almost</i> in my answer. :-)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1434532674, "creation_date": 1434532674, "answer_id": 30887286, "question_id": 30887252, "link": "https://stackoverflow.com/questions/30887252/pointer-parameter-was-set-but-never-used-warning/30887286#30887286", "title": "Pointer parameter was set but never used warning", "body": "<blockquote>\n  <p><em>I understand that the warning is technically true, but is irrelevant at the same time.</em></p>\n</blockquote>\n\n<p>Well, so is the code here. From this point of view of your code, you can get rid of the offending instruction itself.</p>\n\n<p>Also (my personal opinion), it is almost always better to <em>deal</em> with the warnings rather that <em>suppressing</em> them. They are there for a reason ,after all.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11834166, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TkXWjKUCKxM/AAAAAAAAAAI/AAAAAAAAAA8/SroBGBrmUzU/photo.jpg?sz=128", "display_name": "Sudarshan Patil", "link": "https://stackoverflow.com/users/11834166/sudarshan-patil"}, "is_accepted": false, "score": 0, "last_activity_date": 1564032353, "creation_date": 1564032353, "answer_id": 57194863, "question_id": 30887252, "link": "https://stackoverflow.com/questions/30887252/pointer-parameter-was-set-but-never-used-warning/57194863#57194863", "title": "Pointer parameter was set but never used warning", "body": "<p>Simple way is....</p>\n\n<pre><code>int dClock;//variable initiated without used anywhere.\ndClock = dClock;//assign variable to itself to suppress not used warning.\n</code></pre>\n\n<p>worked in keil!</p>\n"}], "owner": {"reputation": 1091, "user_id": 3745005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yvS7i.png?s=128&g=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/3745005/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3976, "favorite_count": 1, "accepted_answer_id": 30887279, "answer_count": 3, "score": 1, "last_activity_date": 1564032353, "creation_date": 1434532579, "last_edit_date": 1434533337, "question_id": 30887252, "link": "https://stackoverflow.com/questions/30887252/pointer-parameter-was-set-but-never-used-warning", "title": "Pointer parameter was set but never used warning", "body": "<p>I have the following function:</p>\n\n<pre><code>void foo(char *ptr_1)\n{\n    char *ptr_2;\n\n    bar(ptr_2);\n\n    ptr_1 = ptr_2;\n}\n</code></pre>\n\n<p>And get this warning:</p>\n\n<blockquote>\n  <p>parameter \"ptr_1\" was set but never used</p>\n</blockquote>\n\n<p>I understand that the warning is technically true, but is irrelevant at the same time. I could suppress it with:</p>\n\n<pre><code>(void)(ptr_1)\n</code></pre>\n\n<p>But is there a better way?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434532173, "post_id": 30887075, "comment_id": 49813897, "body": "It is not very clear. <code>#define</code> is a MACRO, works as a textual replacement. What is that you want to achieve?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4836927"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434532385, "post_id": 30887075, "comment_id": 49814055, "body": "@SouravGhosh check the byte on <code>ResponseData</code> is right"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434533074, "post_id": 30887208, "comment_id": 49814558, "body": "Just for the sake of completeness: <code>compound literal (on and above &#39;C99&#39;)</code>. :-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1434533139, "post_id": 30887208, "comment_id": 49814606, "body": "@SouravGhosh Unless a specific version of the C standard is mentioned in the question, always assume the current standard."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434533253, "post_id": 30887208, "comment_id": 49814697, "body": "Absolutely sir. Just thought of making it explicit."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4836927"}, "edited": false, "score": 0, "creation_date": 1434702990, "post_id": 30887208, "comment_id": 49902312, "body": "@Lundin can tell to compiler that a #define is an unsigned char??"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 1, "last_activity_date": 1434532465, "creation_date": 1434532465, "answer_id": 30887208, "question_id": 30887075, "link": "https://stackoverflow.com/questions/30887075/how-assign-define-with-unsigned-char/30887208#30887208", "title": "How assign #define with unsigned char", "body": "<p>Best way:</p>\n\n<pre><code>const uint8_t ACCESS_PSS [4] = {0x32,0xFD,0x6E,0x2D};\n\nif(memcmp(&amp;ResponseData[i+5], ACCESS_PSS, 4) == 0)\n</code></pre>\n\n<p>Alternative way (compound literal):</p>\n\n<pre><code>if(memcmp(&amp;ResponseData[i+5], (uint8_t[4]){0x32,0xFD,0x6E,0x2D}, 4) == 0)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4836927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 30887208, "answer_count": 1, "score": -4, "last_activity_date": 1434700060, "creation_date": 1434532093, "last_edit_date": 1434700060, "question_id": 30887075, "link": "https://stackoverflow.com/questions/30887075/how-assign-define-with-unsigned-char", "title": "How assign #define with unsigned char", "body": "<p>I want to know can assign <code>#define</code> with <code>unsigned char</code> ??if can how??</p>\n\n<p>for example:</p>\n\n<pre><code> #define ACCESS_PSS {0x32,0xFD,0x6E,0x2D}\n\n\n    int main(){\n    unsigned char ResponseData[100];\n    for (int i = 0; i &lt;4;i++0){\n\n                    if (ResponseData[i+5]==ACCESS_PSS){ //how to do this???\n                                cout&lt;&lt;5&lt;&lt;endl;\n                                              }\n</code></pre>\n\n<p><code>ResponseData</code> from programm get value and byte 5 ta 8 is equal with <code>ACCESS_PSS</code></p>\n"}, {"tags": ["c", "string", "algorithm", "subsequence"], "comments": [{"owner": {"reputation": 118256, "user_id": 284795, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/99f7ffd3d45dbcef0b3b6960dcfe81a2?s=128&d=identicon&r=PG", "display_name": "Colonel Panic", "link": "https://stackoverflow.com/users/284795/colonel-panic"}, "edited": false, "score": 1, "creation_date": 1434539243, "post_id": 30886966, "comment_id": 49818817, "body": "OP, are you familiar with <i>dynamic programming</i>? You should find it in any good algorithms book."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434550204, "post_id": 30886966, "comment_id": 49827330, "body": "Are common subsequences that are equal as strings but different as sequences of source positions considered equal?  E.g., in your example, there are 3*15=45 ways of producing the common subsequence <code>AA</code>, so should <code>AA</code> be output 45 times, or just once?"}, {"owner": {"reputation": 535, "user_id": 2324272, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d380d1c6c174fdf28544c139b74642f6?s=128&d=identicon&r=PG", "display_name": "Camilo Celis Guzman", "link": "https://stackoverflow.com/users/2324272/camilo-celis-guzman"}, "reply_to_user": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434556027, "post_id": 30886966, "comment_id": 49831816, "body": "@j_random_hacker just once."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434557735, "post_id": 30886966, "comment_id": 49833039, "body": "In that case, I believe the only way to avoid an O(|A|^k)-space solution (which you would need to record whether each length-k subsequence has been &quot;seen&quot; yet -- inputs like <code>(AB)</code>^(2k) seem to force this) is to try to generate length-k subsequences for each string in some (e.g., lexicographical) order, and list-merge them."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434558169, "post_id": 30886966, "comment_id": 49833352, "body": "In the preceding comment, I meant that |A| is the size of the alphabet."}], "answers": [{"comments": [{"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1434533619, "post_id": 30887023, "comment_id": 49815006, "body": "As @NikklasB. pointed out, problem is there are <code>O(Choose(n,k))</code> subsequences (its not substrings), which is in <code>O(min{n^k,n^(n-k)})</code> (So, a lot)"}, {"owner": {"reputation": 535, "user_id": 2324272, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d380d1c6c174fdf28544c139b74642f6?s=128&d=identicon&r=PG", "display_name": "Camilo Celis Guzman", "link": "https://stackoverflow.com/users/2324272/camilo-celis-guzman"}, "edited": false, "score": 0, "creation_date": 1434533741, "post_id": 30887023, "comment_id": 49815112, "body": "True. Is there a way to achieve this using the LCS (longest common subsequence) memoization matrix?"}, {"owner": {"reputation": 2175, "user_id": 3045171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/le4e9.jpg?s=128&g=1", "display_name": "shapiro yaacov", "link": "https://stackoverflow.com/users/3045171/shapiro-yaacov"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1434535445, "post_id": 30887023, "comment_id": 49816374, "body": "@amit - I agree, but in any case you need to check all the options, unless I am missing something. You could do some sophisticated nested looping instead - I&#39;ll think about it."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1434535553, "post_id": 30887023, "comment_id": 49816458, "body": "@shapiro.yaacov No, you need to check only the <i>common</i> subsequences, of which there could be asymptotically fewer depending on the input"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1434535591, "post_id": 30887023, "comment_id": 49816490, "body": "@shapiro.yaacov Not sure, Longest Common Subsequence doesn&#39;t require it. I am wondering if you can get only the count more efficiently, which will also make getting the subsequences more efficiently (while still linear in the number of them, which might be exponential in worst cases, but much better often)."}, {"owner": {"reputation": 2175, "user_id": 3045171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/le4e9.jpg?s=128&g=1", "display_name": "shapiro yaacov", "link": "https://stackoverflow.com/users/3045171/shapiro-yaacov"}, "reply_to_user": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1434535691, "post_id": 30887023, "comment_id": 49816559, "body": "@amit - I didn&#39;t suggest LCS"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1434535857, "post_id": 30887023, "comment_id": 49816669, "body": "@shapiro.yaacov I know, I am suggesting there might be a modification for it to do it more efficiently. Creating a exponential number of tries, and chiecking each of them going to take O(n^k * (m+k)) time, doesn&#39;t strike me as a good idea."}], "tags": [], "owner": {"reputation": 2175, "user_id": 3045171, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/le4e9.jpg?s=128&g=1", "display_name": "shapiro yaacov", "link": "https://stackoverflow.com/users/3045171/shapiro-yaacov"}, "is_accepted": false, "score": 1, "last_activity_date": 1434542276, "last_edit_date": 1434542276, "creation_date": 1434531937, "answer_id": 30887023, "question_id": 30886966, "link": "https://stackoverflow.com/questions/30886966/common-subsequence-of-given-length/30887023#30887023", "title": "Common subsequence of given length", "body": "<p>Create a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow\">trie</a> of all the subsequences of given length <code>k</code> from <code>s1</code> and then go over <code>s2</code> and check for each sequence of length <code>k</code> if it is in the trie.</p>\n"}, {"comments": [{"owner": {"reputation": 535, "user_id": 2324272, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d380d1c6c174fdf28544c139b74642f6?s=128&d=identicon&r=PG", "display_name": "Camilo Celis Guzman", "link": "https://stackoverflow.com/users/2324272/camilo-celis-guzman"}, "edited": false, "score": 0, "creation_date": 1434541825, "post_id": 30888732, "comment_id": 49820559, "body": "I tried it with s1= <code>ACACTTAGTGGGAGTCTCA</code> and s2 = <code>TACGC</code>, and <code>k</code>=<code>3</code>, one of the outputs is <code>GAC</code>; which is clearly <b>not</b> a common subsequence between s1 and s2."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "reply_to_user": {"reputation": 535, "user_id": 2324272, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d380d1c6c174fdf28544c139b74642f6?s=128&d=identicon&r=PG", "display_name": "Camilo Celis Guzman", "link": "https://stackoverflow.com/users/2324272/camilo-celis-guzman"}, "edited": false, "score": 0, "creation_date": 1434547919, "post_id": 30888732, "comment_id": 49825501, "body": "@CamiloCelisGuzman Interesting. Well in that case I will temporarily roll back to my initial answer, which should be correct"}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434558239, "post_id": 30888732, "comment_id": 49833396, "body": "Does this generate each string equal to a common subsequence only once?  The OP has (belatedly) indicated this as a requirement.  If not, I think adapting this will need O(|A|^k) space in the worst case to store the status of whether or not a given string has been seen already (with |A| the alphabet size)."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "reply_to_user": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434558951, "post_id": 30888732, "comment_id": 49833888, "body": "@j_random_hacker No it doesn&#39;t. I thought I had another approach based on the second recurrence that is output sensitive, but I think it might not be fixable. I think the problem is not the space consumption, but that asymptotically more sequences have to be generated, only to be filtered out after"}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434559324, "post_id": 30888732, "comment_id": 49834152, "body": "I think the only way to avoid the space explosion is to generate all length-k subsequences of each string separately in (e.g., lex) order, and intersect them with a list merge.  The 2 individual ordered lists can each be generated in O(|A|^k) time by repeated application of the find-next-largest algorithm to string characters.  Also there are probably shortcuts (that probably don&#39;t reduce the asymptotic complexity) like if there is no CS with prefix X and |X| = i &lt; k then we don&#39;t have to generate any of the length-(&gt;i) CSes that begin with X."}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434559438, "post_id": 30888732, "comment_id": 49834221, "body": "And as I understand it, if we generate sequences and filter them out &quot;later&quot;, then in the meantime we need to store them in...  space ;-)"}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "reply_to_user": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434559449, "post_id": 30888732, "comment_id": 49834231, "body": "@j_random_hacker I wouldn&#39;t have much problem with the space because time &gt;= space anyways. The problem is the time complexity, which can be much worse if you try to generate all subsequences. An optimal algorithm would have space &lt;= time = O(s + poly(n,k)) where s is the sum of the length of distinct common subsequences"}, {"owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "edited": false, "score": 0, "creation_date": 1434559726, "post_id": 30888732, "comment_id": 49834405, "body": "Sure, time &gt;= space, but there are worst cases that will produce O(|A|^O(k)) time anyway: when A = B = <code>XY</code>^(2k) (2k copies of <code>XY</code>), for example.  Then by picking either <code>X</code> or <code>Y</code> from each string at each of the first k adjacent pairs we get all 2^k possible length-k strings on the alphabet <code>{X, Y}</code>, and the remaining k adjacent pairs will produce them all a second time (i.e. need to be filtered out)."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1434559912, "post_id": 30888732, "comment_id": 49834539, "body": "Yes of course, but output sensitivity is the best you can hope for. I&#39;m not arguing that my algorithm is good, it certainly is not. I&#39;m just formulating the goal of what would be the best possible outcome (i.e. time complexity), when you take the output length as a variable. There is a clear lower bound of Omega(s) for the problem, so O(poly(n,k) + s) would be pretty good. A solution that works by filtering out duplicates can never achieve that, unless you generate exactly O(s) &quot;candidate output&quot;, which seems highly unlikely"}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "edited": false, "score": 0, "creation_date": 1434643651, "post_id": 30888732, "comment_id": 49877974, "body": "Please take a look at the code in my answer, I think it uses a minimum of both processing time and memory space."}], "tags": [], "owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "is_accepted": false, "score": 4, "last_activity_date": 1434547927, "last_edit_date": 1434547927, "creation_date": 1434536403, "answer_id": 30888732, "question_id": 30886966, "link": "https://stackoverflow.com/questions/30886966/common-subsequence-of-given-length/30888732#30888732", "title": "Common subsequence of given length", "body": "<p>One relatively straightforward way would be to reconstruct the sequences from the LCS matrix. Here is an O(n^2 * k + x * n) algorithm to do so, where <em>x</em> is the size of the output (i.e. number of common subsequences of length <em>k</em>). It's in C++, but it should be rather easy to translate to C:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const int N = 100;\nint lcs[N][N];\nset&lt;tuple&lt;string,int,int,int&gt;&gt; vis;\n\nstring s1 = \"AAGACC\";\nstring s2 = \"AGATAACCAGGAGCTGC\";\n\nvoid reconstruct(const string&amp; res, int i, int j, int k) {\n    tuple&lt;string,int,int,int&gt; st(res, i, j, k);\n    if (vis.count(st))\n        return;\n    vis.insert(st);\n    if (lcs[i][j] &lt; k) return;\n    if (i == 0  &amp;&amp; j == 0 &amp;&amp; k == 0) {\n        cout &lt;&lt; res &lt;&lt; endl;\n        return;\n    }\n    if (i &gt; 0)\n        reconstruct(res, i-1, j, k);\n    if (j &gt; 0)\n        reconstruct(res, i, j-1, k);\n    if (i&gt;0 &amp;&amp; j&gt;0 &amp;&amp; s1[i-1] == s2[j-1])\n        reconstruct(string(1,s1[i-1]) + res, i-1, j-1, k-1);\n}\n\nint main() {\n    lcs[0][0] = 0;\n    for (int i = 0; i &lt;= s1.size(); ++i)\n        lcs[i][0] = 0;\n    for (int j = 0; j &lt;= s1.size(); ++j)\n        lcs[0][j] = 0;\n    for (int i = 0; i &lt;= s1.size(); ++i) {\n        for (int j = 0; j &lt;= s2.size(); ++j) {\n            if (i &gt; 0)\n                lcs[i][j] = max(lcs[i][j], lcs[i-1][j]);\n            if (j &gt; 0)\n                lcs[i][j] = max(lcs[i][j], lcs[i][j-1]);\n            if (i &gt; 0 &amp;&amp; j &gt; 0 &amp;&amp; s1[i-1] == s2[j-1])\n                lcs[i][j] = max(lcs[i][j], lcs[i-1][j-1] + 1);\n        }\n    }\n    reconstruct(\"\", s1.size(), s2.size(), 5);\n}\n</code></pre>\n\n<p>There should also be an O(n * (k + x)) way to solve this, based on a slightly different DP approach: Let <em>f(i, k)</em> be the minimum index <em>j</em> such that <em>lcs(i, j) >= k</em>. We have the recurrence </p>\n\n<pre><code>f(i, 0) = 0 for all i\nf(i, k) = min{f(i-1, k), \n              minimum j &gt; f(i-1, k-1) such that s2[j] = s1[i]}\n</code></pre>\n\n<p>We can also reconstruct the sequences of length <em>k</em> from the matrix <em>f</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": false, "score": 1, "last_activity_date": 1434643399, "last_edit_date": 1434643399, "creation_date": 1434579131, "answer_id": 30903328, "question_id": 30886966, "link": "https://stackoverflow.com/questions/30886966/common-subsequence-of-given-length/30903328#30903328", "title": "Common subsequence of given length", "body": "<p>Here's a version of the algorithm that uses recursion, a stack of size <code>k</code> and includes two optimizations to skip over characters that have already been seen and to skip sub-subsequences that do not exist.  The strings are not unique (there can be duplicates), so run the output through <code>uniq</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n/* s1 is the full first string, s2 is the suffix of the second string\n * (starting after the subsequence at depth r),\n * pos is the positions of chars in s1, r is the recursion depth,\n * and k is the length of subsequences that we are trying to match\n */\nvoid recur(char *s1, char *s2, size_t pos[], size_t r, size_t k)\n{\n    char seen[256] = {0};       /* have we seen a character in s1 before? */\n    size_t p0 = (r == 0) ? 0 : pos[r-1] + 1;    /* start at 0 or pos[r-1]+1 */\n    size_t p1 = strlen(s1) - k + r;             /* stop at end of string - k + r */\n    size_t p;\n\n    if (r == k)         /* we made it, print the matching string */\n    {\n        for (p=0; p&lt;k; p++)\n            putchar(s1[pos[p]]);\n        putchar('\\n');\n        return;\n    }\n\n    for (p=p0; p&lt;=p1; p++)      /* at this pos[], loop through chars to end of string */\n    {\n        char c = s1[p];         /* get the next char in s1 */\n        if (seen[c])\n            continue;           /* don't go any further if we've seen this char already */\n        seen[c] = 1;\n\n        pos[r] = p;\n        char *s = strchr(s2, c);        /* is this char in s2 */\n        if (s != NULL)\n            recur(s1, s+1, pos, r+1, k);        /* recursively proceed with next char */\n    }\n}\n\n\nint main()\n{\n    char *s1 = \"AAGACC\";\n    char *s2 = \"AGATAACCAGGAGCTGC\";\n    size_t k = 5;\n    size_t pos[k];\n\n    if (strlen(s1) &lt; k || strlen(s2) &lt; k)       /* make sure we have at least k chars in each string */\n        return 1;       /* exit with error */\n\n    recur(s1, s2, pos, 0, k);\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>AAGAC\nAAGCC\nAAACC\nAGACC\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 2324272, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d380d1c6c174fdf28544c139b74642f6?s=128&d=identicon&r=PG", "display_name": "Camilo Celis Guzman", "link": "https://stackoverflow.com/users/2324272/camilo-celis-guzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 2, "answer_count": 3, "score": 7, "last_activity_date": 1434643399, "creation_date": 1434531796, "last_edit_date": 1434533617, "question_id": 30886966, "link": "https://stackoverflow.com/questions/30886966/common-subsequence-of-given-length", "title": "Common subsequence of given length", "body": "<p>What are good ways to find <strong>all</strong> the common subsequences of length <code>k</code> of two strings?</p>\n\n<p><strong>Example:</strong></p>\n\n<p><code>s1</code>= <code>AAGACC</code></p>\n\n<p><code>s2</code>= <code>AGATAACCAGGAGCTGC</code></p>\n\n<p>all common subsequences of length 5: <code>AAGAC</code> <code>AAACC</code>    <code>AGACC</code> <code>AAGCC</code></p>\n"}, {"tags": ["java", "c", "post", "java-native-interface", "tomcat7"], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 4920090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUtM9.jpg?s=128&g=1", "display_name": "Ajith John", "link": "https://stackoverflow.com/users/4920090/ajith-john"}, "is_accepted": true, "score": 0, "last_activity_date": 1435058894, "last_edit_date": 1435058894, "creation_date": 1434954860, "answer_id": 30973398, "question_id": 30886615, "link": "https://stackoverflow.com/questions/30886615/error-in-usr-bin-java-munmap-chunk-invalid-pointer-in-jni/30973398#30973398", "title": "Error in `/usr/bin/java&#39;: munmap_chunk(): invalid pointer: in JNI", "body": "<p>I got answer for this anyway.Its because of you are freeing the memory before allocating it.Thats the reason for my error.</p>\n\n<blockquote>\n  <p>The free() function frees the memory space pointed  to  by  ptr, \n  which    must  have  been  returned  by a previous call to malloc(),\n  calloc() or    realloc().  Otherwise, or if free(ptr) has already been\n  called  before,    undefined behavior occurs.  If ptr is NULL, no\n  operation is performed.</p>\n</blockquote>\n"}], "owner": {"reputation": 350, "user_id": 4920090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gUtM9.jpg?s=128&g=1", "display_name": "Ajith John", "link": "https://stackoverflow.com/users/4920090/ajith-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 1, "accepted_answer_id": 30973398, "answer_count": 1, "score": 0, "last_activity_date": 1435058894, "creation_date": 1434530863, "last_edit_date": 1434773698, "question_id": 30886615, "link": "https://stackoverflow.com/questions/30886615/error-in-usr-bin-java-munmap-chunk-invalid-pointer-in-jni", "title": "Error in `/usr/bin/java&#39;: munmap_chunk(): invalid pointer: in JNI", "body": "<p>I am getting data packet via HTTP POST request using RESTful API.Then parsed this packet using JNI and it returns the result to java.\nWhile it running, after several HTTP POST request tomcat server crashes and shows an error  <code>\"Error in /usr/bin/java: munmap_chunk(): invalid pointer: 0x00007f40b40011d0\"</code>. </p>\n"}, {"tags": ["c", "bootloader", "stm32"], "comments": [{"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1434557617, "post_id": 30886198, "comment_id": 49832952, "body": "When you say &quot;what I have in memory&quot;, do you mean in flash?  Meaning, it only flashed 16 bytes?"}, {"owner": {"reputation": 421, "user_id": 3642304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f79bdbc49e15165aba9b94addcab951e?s=128&d=identicon&r=PG&f=1", "display_name": "mban", "link": "https://stackoverflow.com/users/3642304/mban"}, "edited": false, "score": 0, "creation_date": 1456337345, "post_id": 30886198, "comment_id": 58903796, "body": "Could you post the code for <code>Uart2ReadChar()</code> ?"}], "owner": {"reputation": 303, "user_id": 3563879, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/501790882/picture?type=large", "display_name": "kidz55", "link": "https://stackoverflow.com/users/3563879/kidz55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434529769, "creation_date": 1434529769, "question_id": 30886198, "link": "https://stackoverflow.com/questions/30886198/loosing-some-bytes-on-usart-transmission-with-stm32l1xx", "title": "Loosing some bytes on USART transmission with STM32L1XX", "body": "<p>I'm facing a problem with the communication between my computer and my board stm32L152RE.\nI try to send a string of 1024 bytes and write it on my flash board.\nFor that, i send packets of 32 bytes.\nThe algorithm is simple : </p>\n\n<ul>\n<li>I erase my memory with enought space to write my string of 1024</li>\n<li>I receive 32 bytes in a string buffer</li>\n<li>I write them on the flash</li>\n</ul>\n\n<p>I do that until i receive 1024 bytes and the  I stop.</p>\n\n<p>The problem is , when i print what i have in memory step by step, I only receive 16 bytes and i don't know why </p>\n\n<p>Here's my code, maybe it will help understand my program</p>\n\n<pre><code>/*\n * bootloader.c\n *\n *  Created on: 9 juin 2015\n *      Author: tgloaguen\n */\n#include \"usart.h\"\n#include \"stm32l1xx_flash.h\"\n#define WRITE_START_ADDR 0x08000000\n#define WRITE_END_ADDR 0x08000FFF\n#define FLASH_PAGE_SIZE    ((uint16_t)0x100) //If a page is 256 bits\n#define MY_BL_FUNCTIONS __attribute__((section(\".bootsection\")))\n\nvoid BootLoader(void) MY_BL_FUNCTIONS;\nFLASH_Status Flash_Write ( uint32_t StartAddress, uint8_t *p, uint32_t Size ) MY_BL_FUNCTIONS;\nuint8_t Flash_Erase() MY_BL_FUNCTIONS;\nvoid Receive_Data(char * buffer,int size)MY_BL_FUNCTIONS;\nvoid Receive_Size(char * buffer, int *sizeData)MY_BL_FUNCTIONS;\n\nvoid BootLoader(void) {\n\n    //clear all ITs\n    USART_ITConfig( USART1, USART_IT_RXNE, DISABLE );\n    //SendString(\"HELLO\",USART2);\n    uint8_t status,i;\n    char buffer[33];\n    //en dur\n    uint16_t *adr = WRITE_START_ADDR;\n    uint16_t sizeBin = 1024,k = 0,k_hexa = 0x20;\n\n\n    //Receive size of BIN\n//  Receive_Size(buffer,&amp;sizeBin);\n\n    Flash_Erase();\n    //if sizeBin ok\n\n        //receive frames\n        do\n        {\n\n            //receive 32 bytes\n            Receive_Data(buffer,32);\n            GPIO_ToggleBits(GPIOA, GPIO_Pin_5);\n\n//          //write a sector (1024k)\n        status = Flash_Write(adr , buffer, 0x20);\n//      on check si on ecrit bien au bon endroit\n\n        SendString(\"\\r\\n \", USART2);\n\n//          //increment cpt\n        k += 32;\n        adr = adr + k_hexa;\n//          //check CRC\n//          //TODO\n//\n\n    } while (k  &lt; sizeBin);\n    SendString(\"nickel \", USART2);\n\n}\nvoid Receive_Size(char * buffer, int *sizeData) {\n    int i = 0;\n    do {\n        buffer[i] = Uart2ReadChar();\n        i++;\n    } while (buffer[i] != '\\0');\n\n\n     *sizeData = (buffer[1] &lt;&lt; 8) + buffer[0];\n}\nvoid Receive_Data(char * buffer,int size){\n\n    int i=0;\n    do{\n            buffer[i] = Uart2ReadChar();\n            i++;\n        }\n    while(i &lt; size);\n}\n\nuint8_t Flash_Erase() {\n\n    uint32_t EraseCounter = 0x00, Address = 0x00;//Erase count, write address\n    uint32_t NbrOfPage = 0x00;//Recording to erase the pages\n    volatile FLASH_Status FLASHStatus = FLASH_COMPLETE;/*FLASH complete erasure marks*/\n      /*Unlock FLASH*/\n\n    FLASH_Unlock();\n      /*Calculate the number of FLASH pages need to erase */\n    NbrOfPage = (WRITE_END_ADDR - WRITE_START_ADDR) / FLASH_PAGE_SIZE;\n      /* Remove all hang flags */\n    FLASH_ClearFlag ( FLASH_FLAG_EOP     |\n                            FLASH_FLAG_WRPERR  |\n                            FLASH_FLAG_PGAERR  |\n                            FLASH_FLAG_SIZERR  |\n                            FLASH_FLAG_OPTVERR );\n      /* Erase the FLASH page*/\n    for(EraseCounter = 0; (EraseCounter &lt;NbrOfPage) &amp;&amp; (FLASHStatus == FLASH_COMPLETE); EraseCounter++)\n      {\n\n        FLASHStatus = FLASH_ErasePage(WRITE_START_ADDR + (FLASH_PAGE_SIZE * EraseCounter));\n\n      }\n      FLASH_Lock ( );\n\n    return (uint8_t)FLASHStatus;\n}\n\nFLASH_Status Flash_Write ( uint32_t StartAddress, uint8_t *p, uint32_t Size )\n{\n\n      uint32_t Address;\n      __IO FLASH_Status status = FLASH_COMPLETE;\n\n      Address = StartAddress;\n\n      /* Unlock the FLASH Program memory */\n      FLASH_Unlock ();\n\n      /* Clear all pending flags */\n      FLASH_ClearFlag ( FLASH_FLAG_EOP     |\n                        FLASH_FLAG_WRPERR  |\n                        FLASH_FLAG_PGAERR  |\n                        FLASH_FLAG_SIZERR  |\n                        FLASH_FLAG_OPTVERR );\n\n      while  ( Address &lt; StartAddress + Size )\n      {\n\n            status = FLASH_FastProgramWord ( Address,  *(uint32_t *)p );\n            //debug\n            SendChar('|',USART2);\n            SendChar(*p,USART2);\n            Address = Address + 4;\n            p = p + 4;\n\n            if ( status != FLASH_COMPLETE ) return status;\n      }\n\n      /* Lock the FLASH Program memory */\n      FLASH_Lock ( );\n\n      return status;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "memory"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1434529640, "post_id": 30885905, "comment_id": 49812216, "body": "You should explain why you are asking."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1434531379, "post_id": 30885905, "comment_id": 49813387, "body": "Even with your explanation, I don&#39;t understand how it is related to the question."}, {"owner": {"reputation": 535, "user_id": 4309220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29115aaee396b96837e06961f5aed73?s=128&d=identicon&r=PG&f=1", "display_name": "akakatak", "link": "https://stackoverflow.com/users/4309220/akakatak"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1434532357, "post_id": 30885905, "comment_id": 49814030, "body": "If it is assured that upper n bits are not used in virtual memory address, we can write data in this n bits of a pointer."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1434532703, "post_id": 30885905, "comment_id": 49814265, "body": "No the upper n bits should be all zeros or all ones."}], "answers": [{"comments": [{"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "edited": false, "score": 2, "creation_date": 1434530098, "post_id": 30886061, "comment_id": 49812499, "body": "Note: In addition to using <code>MAP_FIXED</code> you could also use <code>MAP_32BIT</code>, which will guarantee that the upper 32 bits will be zero (effectively returning a 32 bit pointer)."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 1, "creation_date": 1434535492, "post_id": 30886061, "comment_id": 49816411, "body": "Basile: your comments on the questions, and things in this answer, presume encoding of extra data in the high-order bits of a pointer that&#39;s then &quot;used&quot;, in the sense of dereferencing / pointer arithmetic etc..  I agree that&#39;s bad.  It&#39;s still plausibly useful to know that pointers only vary 48 of their 64 bits so you can store a pointer value alongside 16 other bits of information in a <code>uint64_t</code>, masking as appropriate to extract the original pointer value before use.  If feeling lucky, you could even experiment with storing such values in a pointer type, though that&#39;s considerably riskier."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 3, "last_activity_date": 1434533754, "last_edit_date": 1495540712, "creation_date": 1434529357, "answer_id": 30886061, "question_id": 30885905, "link": "https://stackoverflow.com/questions/30885905/the-range-of-virtual-memory-address-in-userspace/30886061#30886061", "title": "The range of virtual memory address in userspace", "body": "<p><strong>The possible range of virtual addresses is <em>processor</em> and <em>kernel</em> and <a href=\"http://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\"><em>ABI</em></a> specific</strong>. But I strongly advise against coding some tricks related to some bits in addresses and pointers (since your code might work on some processors, but not on others).</p>\n\n<p>These days, <em>some</em> <sup>*</sup> <a href=\"https://en.wikipedia.org/wiki/X86-64\" rel=\"nofollow noreferrer\">x86-64</a> processors apparently use only 48 bits of the virtual address space, but <em>I don't recommend using that</em> knowledge in your code (it might be wrong within a few years, or on some higher end models). See also <a href=\"http://www.x86-64.org/documentation_folder/abi.pdf\" rel=\"nofollow noreferrer\">x86-64 ABI</a>.</p>\n\n<p><sup>If a pointer is outside that 48 bits range, you get a page fault, i.e. a SIGSEGV, the processor is <em>not</em> ignoring the unimplemented bits. So upper bits of pointers or addresses should be all zeros or all ones.</sup></p>\n\n<p>On Linux, you might play with <code>cat /proc/self/maps</code> and <code>cat /proc/$$/maps</code>to get more clues.</p>\n\n<p>BTW, on Linux, you could reserve, using <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a> with <code>MAP_ANONYMOUS | MAP_NORESERVE</code>, some large address range (and either later call <code>mmap</code> with <code>MAP_FIXED</code> inside it, or never use it) to avoid it being later used by your process (or, as commented by <a href=\"https://stackoverflow.com/users/572743/damon\">damon</a>, use <code>MAP_32BITS</code> which is x86-64 specific) This is probably more sensible than relying on the address bits to be restricted to 48 bits.</p>\n\n<p>Also, catching <code>SIGSEGV</code> on Linux is <a href=\"https://stackoverflow.com/a/20310127/841108\">tricky</a> (you'll need some processor specific code) and costly. Perhaps you want some <a href=\"https://www.gnu.org/software/hurd/microkernel/mach/external_pager_mechanism.html\" rel=\"nofollow noreferrer\">external pager mechanism</a> (which exists on GNU Hurd, but not on Linux). Or <code>mmap</code>-ing some pseudo-file on some <a href=\"https://en.wikipedia.org/wiki/Filesystem_in_Userspace\" rel=\"nofollow noreferrer\">FUSE</a> filesystem.</p>\n\n<p>NB: most x86-64 processors have only 48 bits of addresses, but I don't recommend using that.</p>\n\n<p>Note 2: Processor makers remembered what <a href=\"https://en.wikipedia.org/wiki/IBM_System/360\" rel=\"nofollow noreferrer\">IBM/360</a> did: ignoring the upper address bits (originally 24 bits). When IBM had to extend address to 31 bits it was a nightmare for the software industry. So hardware makers understood the lesson, and disallow today (in hardware) playing naughty tricks on unused address bits.</p>\n"}], "owner": {"reputation": 535, "user_id": 4309220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c29115aaee396b96837e06961f5aed73?s=128&d=identicon&r=PG&f=1", "display_name": "akakatak", "link": "https://stackoverflow.com/users/4309220/akakatak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 30886061, "answer_count": 1, "score": -1, "last_activity_date": 1434533754, "creation_date": 1434528938, "last_edit_date": 1434530740, "question_id": 30885905, "link": "https://stackoverflow.com/questions/30885905/the-range-of-virtual-memory-address-in-userspace", "title": "The range of virtual memory address in userspace", "body": "<p>In linux, the range of virtual memory address in userspace, in other words, the range of value returned by malloc, is same as entire 64bits virtual memory space?\nOr, is there any sub-range of 64bits virtual memory space which is guaranteed not to be seen in userspace?</p>\n\n<p>Answers for UNIX system or Windows system are welcome.</p>\n\n<p>Of course I don't intend to introduce such buggy codes depending on this into some production.\nI just imagine that if there is a spare space, we can use the space to store flgas, for example is_constructed flag for lazy construction, and can spare much space. Usually, 1byte (stack) allocation is needed even if we use only 1bit. In addition, such value encoding into memory address may cause wrong memory prefetch or branch misprediction. Then, I want to check which of saving memory-bandwidth and CPU misprediction is larger.</p>\n"}, {"tags": ["c", "linux", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1434528308, "post_id": 30885668, "comment_id": 49811363, "body": "Just return from the thread function? You either need a way to signal the main thread about it so it can join the thread, or create a detached thread."}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1434528496, "post_id": 30885668, "comment_id": 49811470, "body": "@JoachimPileborg sir can u plz provide a sample example in answer. Actually i am totally a beginner in Linux and server multithreading and not having much knowledge about Pthreads."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1434529062, "post_id": 30885668, "comment_id": 49811825, "body": "It&#39;s not clear what your problem is.Can you post your thread function and how you create threads and explain how it doesn&#39;t work as you expected?"}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1434529260, "post_id": 30885668, "comment_id": 49811952, "body": "@BlueMoon I have pasted the complete code above. I just want to know that how can i close a thread when it is no longer required. I want to do it in HandleConnection.C under &quot;client disconnected&quot;."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1434535379, "post_id": 30885668, "comment_id": 49816315, "body": "@Eljay While <code>pthread_cancel()</code> can do the same job, you <code>pthread_exit()</code> is much simpler and appropriate for your situation. What happens if you simply call <code>pthread_exit(NULL);</code>? Also, you can make a thread detach itself by simply calling <code>pthread_detach(pthread_self());</code>."}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1434535995, "post_id": 30885668, "comment_id": 49816747, "body": "@BlueMoon pthread_detach(pthread_self()) will close the current thread and free the resources used by it ??"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1434536191, "post_id": 30885668, "comment_id": 49816862, "body": "@Eljay It won&#39;t &quot;close&quot; the thread. It&#39;ll just make sure the thread resources are cleanup once it exits. So when you call <code>pthread_exit</code>, all the resources the thread was holding would be freed."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1434536783, "post_id": 30885668, "comment_id": 49817220, "body": "What happens if <code>recv()</code> fills the whole 2000 byte buffer? It seems to me that <code>client_message[read_size] = &#39;\\0&#39;;</code> will write out-of-bounds in that case."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1434540384, "post_id": 30885668, "comment_id": 49819582, "body": "&#39;memset(client_message, 0, 2000);&#39; - why?"}], "owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434528118, "creation_date": 1434528118, "question_id": 30885668, "link": "https://stackoverflow.com/questions/30885668/exiting-a-thread-after-communication-process-is-over", "title": "Exiting a Thread after Communication Process is Over", "body": "<p>I am working on a Multi threaded server application in C using Pthreads.How can i exit a thread and free the resources being used by it after the client sends a request for closing the connection. I am pasting my code below</p>\n\n<p>Main.C</p>\n\n<pre><code>#include \"extern.h\" \n\nint thread_counter = 0;\nint rc;\n\nvoid main(int argc, char** argv){\n\n    int sock_desc = 0, connfd = 0;\n    struct sockaddr_in serv_addr;\n    int clntSock; \n    struct sockaddr_in echoClntAddr; \n    int n = 0;   \n\n   pthread_t thr;\n\n    sock_desc = socket(AF_INET, SOCK_STREAM, 0); \n\n    if(sock_desc &lt; 0 )\n       dieWithError(\"Unable to open Socket\\n\");\n\n    fcntl(sock_desc, F_SETFL, fcntl(sock_desc, F_GETFL, 0) | O_NONBLOCK); \n\n    memset(&amp;serv_addr,0,sizeof(serv_addr)); \n\n    serv_addr.sin_family = AF_INET ;\n    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    serv_addr.sin_port = htons(7024);\n\n    if(bind(sock_desc, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0) \n       dieWithError(\"bind failed\\n\");\n\n\n    if(listen(sock_desc,MAX_CONNECTIONS) &lt; 0)\n       dieWithError(\"listen failed\\n\");  \n\n       clntSock = sizeof(struct sockaddr);\n       int i =0;\n\n    while(1){\n\n         connfd = accept(sock_desc, (struct sockaddr *)&amp;echoClntAddr,(socklen_t*)&amp;clntSock);\n\n\n         if(connfd &gt; 0){  \n            puts(\"Connection accepted\");\n\n            if(pthread_create( &amp;thr, NULL ,  connection_handler , (void*)connfd) &lt; 0){\n               perror(\"could not create thread\");\n            }\n\n            puts(\"Handler assigned\");\n\n        }    \n    }\n\n}\n\n    void dieWithError(char *errormsg){ \n         printf(\"%s\", errormsg);    \n    }\n</code></pre>\n\n<p>HandleConnection.C</p>\n\n<pre><code>#include \"extern.h\"\n\nvoid *connection_handler(void *socket_desc){\n    int sock = (int) socket_desc;\n    int read_size;  \n    char client_message[2000];\n    int i;\n    int rc = 5;\n\n\n\n    while(1){\n        read_size = recv(sock , client_message , 2000 , 0); \n        if(read_size &gt; 0){\n\n       client_message[read_size] = '\\0';\n        printf(\"%s\",client_message); \n\n        }\n\n        memset(client_message, 0, 2000);\n\n\n    if(read_size == 0){\n       puts(\"Client disconnected\");\n     pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);\n    pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS,NULL);\n       fflush(stdout);\n      rc = close(sock);\n\n       break;\n    }\n    else if(read_size == -1){\n            perror(\"received failed\");\n            break;\n    }\n\n} \n\n}\n</code></pre>\n\n<p>How and where should i write a routine to exit a Thread after its work is Over.i tried using pthreads_cancel  but it didn't helped,reason might be i haven't used it properly.</p>\n"}, {"tags": ["c", "operators", "arithmetic-expressions"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1434527378, "post_id": 30885377, "comment_id": 49810795, "body": "Do you know unary opeartors?"}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1434527381, "post_id": 30885377, "comment_id": 49810796, "body": "Most of those are unary operators."}, {"owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "edited": false, "score": 1, "creation_date": 1434527494, "post_id": 30885377, "comment_id": 49810855, "body": "Yes i know but i am completely confused how it is working i also tried some different variants of the same code but still working."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1434533502, "post_id": 30885377, "comment_id": 49814917, "body": "The unary + operator is usually rather confusing, as it has very limited practical use. It is mainly just there in the language to make it consistent with the far more useful unary - operator."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1434540477, "post_id": 30885377, "comment_id": 49819645, "body": "Who would write code like this, (if not a prof/TA)?"}], "answers": [{"comments": [{"owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "edited": false, "score": 0, "creation_date": 1434527824, "post_id": 30885410, "comment_id": 49811076, "body": "and how this would evaluate  sum = n - - - n + - n;"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "edited": false, "score": 0, "creation_date": 1434527978, "post_id": 30885410, "comment_id": 49811175, "body": "@PankajPrakash <code>--</code> will become a different  operator without space because of maximal crunch rule."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "edited": false, "score": 0, "creation_date": 1434527987, "post_id": 30885410, "comment_id": 49811179, "body": "@PankajPrakash Figure it out yourself - it&#39;s a good exercise."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1434528011, "post_id": 30885410, "comment_id": 49811192, "body": "@MohitJain: There are spaces, so it will parse as two unary operators."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1434528080, "post_id": 30885410, "comment_id": 49811239, "body": "@nneonneo OK, spaces are hard to spot"}, {"owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "edited": false, "score": 0, "creation_date": 1434528136, "post_id": 30885410, "comment_id": 49811266, "body": "int sum = n - - - n + - n; is evaluating to -2. While when the same line with parenthesis     int sum = n - (- (- (n + (- n)))); evaluates to 2."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1434528229, "post_id": 30885410, "comment_id": 49811325, "body": "Then you have the wrong evaluation. Note that unary operators bind &quot;tighter&quot; than binary operators. Try again!"}, {"owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "edited": false, "score": 0, "creation_date": 1434528325, "post_id": 30885410, "comment_id": 49811376, "body": "@nneonneo wouldn&#39;t int sum = n - - - n + - n; is evaluated as int sum = n - (- (- (n + (- n))));"}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 5, "last_activity_date": 1434527674, "last_edit_date": 1434527674, "creation_date": 1434527405, "answer_id": 30885410, "question_id": 30885377, "link": "https://stackoverflow.com/questions/30885377/how-does-int-sum-n-n-compile-where-n-is-an-int/30885410#30885410", "title": "How does `int sum = n + - + - + - + n` compile where `n` is an `int`?", "body": "<p>All but the first are just <em>unary operators</em>.</p>\n\n<pre><code>n + - + - + - + n\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>n + (-(+(-(+(-(+n))))))\n</code></pre>\n\n<p>which is in turn simply equal to </p>\n\n<pre><code>n + (-n)\n</code></pre>\n\n<p>after resolving all the unary operators.</p>\n\n<p><code>-n</code> is, of course, ordinary negation; <code>+n</code> does essentially nothing (though it has the side effect of forcing integral promotion).</p>\n"}, {"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1434527879, "last_edit_date": 1434527879, "creation_date": 1434527407, "answer_id": 30885413, "question_id": 30885377, "link": "https://stackoverflow.com/questions/30885377/how-does-int-sum-n-n-compile-where-n-is-an-int/30885413#30885413", "title": "How does `int sum = n + - + - + - + n` compile where `n` is an `int`?", "body": "<p>Both of <code>+</code> and <code>-</code> are also unary operators. The result of <code>+n</code> is the (promoted) value of <code>n</code>. The result of <code>-n</code> is the negative of (promoted) <code>n</code>.</p>\n\n<pre><code>n + - + - + - + n;\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>n + (-(+(-(+(-(+n))))))\n</code></pre>\n\n<p>which is basically <code>n + (-n)</code> assuming no overflow happens.</p>\n"}, {"tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 4, "last_activity_date": 1434527473, "creation_date": 1434527473, "answer_id": 30885440, "question_id": 30885377, "link": "https://stackoverflow.com/questions/30885377/how-does-int-sum-n-n-compile-where-n-is-an-int/30885440#30885440", "title": "How does `int sum = n + - + - + - + n` compile where `n` is an `int`?", "body": "<pre><code>int sum = n + - + - + - + n;\n/*          b u u u u u u   */\n/* Order:   7 6 5 4 3 2 1   */\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>n + (-(+(-(+(-(+n))))));\n</code></pre>\n\n<p>or simply <code>n + (-n)</code></p>\n\n<p>Note that unary operators bind more tightly than binary operators in <code>C opeartor precedance table</code> and associativity of unary operator <code>+-</code> is from right to left while of binary <code>+-</code> operators in from left to right.</p>\n"}], "owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 3, "accepted_answer_id": 30885440, "answer_count": 3, "score": 4, "last_activity_date": 1434534226, "creation_date": 1434527258, "last_edit_date": 1434534226, "question_id": 30885377, "link": "https://stackoverflow.com/questions/30885377/how-does-int-sum-n-n-compile-where-n-is-an-int", "title": "How does `int sum = n + - + - + - + n` compile where `n` is an `int`?", "body": "<p>This afternoon, I really don't know what I was doing with Operators and C.  Eventually, I wrote some code which I was thinking wouldn't compile, But I don't know how it worked.  </p>\n\n<p>The code is:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int n=2;\n    int sum = n + - + - + - + n;  /* This line */\n    printf(\"%d\\n\", sum);\n    return 0;\n}\n</code></pre>\n\n<p>And the output is:</p>\n\n<blockquote>\n  <p>0</p>\n</blockquote>\n\n<p>I am completely confused how the code compiled and what is happening behind the scene.</p>\n\n<p>How does the line <code>int sum = n + - + - + - + n;</code> work?</p>\n"}, {"tags": ["c++", "c", "makefile"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1434527069, "post_id": 30885248, "comment_id": 49810613, "body": "Add a target for <code>.cpp</code> files, where you use the C++ compiler (<code>$(CXX)</code>) instead? Possibly with C++ flags (<code>$(CXXFLAGS)</code>) instead as well?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 8, "creation_date": 1434527074, "post_id": 30885248, "comment_id": 49810616, "body": "Have you tried just replacing <code>CC</code> by <code>CXX</code> and <code>.c</code> by <code>.cpp</code>? Most of the other options aren&#39;t C-specific."}, {"owner": {"reputation": 2826, "user_id": 1575632, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SPw2f.jpg?s=128&g=1", "display_name": "amin", "link": "https://stackoverflow.com/users/1575632/amin"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1434527198, "post_id": 30885248, "comment_id": 49810685, "body": "@nneonneo i will try that . tnx"}, {"owner": {"reputation": 2826, "user_id": 1575632, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SPw2f.jpg?s=128&g=1", "display_name": "amin", "link": "https://stackoverflow.com/users/1575632/amin"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1434529003, "post_id": 30885248, "comment_id": 49811789, "body": "@nneonneo it worked ! thank you"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1410878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2137e59972d0880e7cc326eed3d0d2b4?s=128&d=identicon&r=PG", "display_name": "yiniesita", "link": "https://stackoverflow.com/users/1410878/yiniesita"}, "is_accepted": false, "score": -1, "last_activity_date": 1434590458, "creation_date": 1434590458, "answer_id": 30905040, "question_id": 30885248, "link": "https://stackoverflow.com/questions/30885248/how-to-port-a-c-makefile-to-a-c-makefile/30905040#30905040", "title": "how to port a C makefile to a C++ makefile?", "body": "<p>I think you shoud change you CC from gcc to g++.</p>\n"}], "owner": {"reputation": 2826, "user_id": 1575632, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SPw2f.jpg?s=128&g=1", "display_name": "amin", "link": "https://stackoverflow.com/users/1575632/amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1434590458, "creation_date": 1434526886, "question_id": 30885248, "link": "https://stackoverflow.com/questions/30885248/how-to-port-a-c-makefile-to-a-c-makefile", "title": "how to port a C makefile to a C++ makefile?", "body": "<p>I have the following legacy makefile.<br>\nHow to update this file to compile C++ instead ?<br>\nHere is the dependency section:</p>\n\n<pre><code># Dependency rules\n\n.PHONY: all clean\n\nall: $(TARGET)_$(JENNIC_CHIP)$(BIN_SUFFIX).bin\n\n-include $(APPDEPS)\n%.d:\n    rm -f $*.o\n\n%.o: %.S\n    $(info Assembling $&lt; ...)\n    $(CC) -c -o $@ $(CFLAGS) $(INCFLAGS) $&lt; -MD -MF $*.d -MP\n    @echo\n\n%.o: %.c \n    $(info Compiling $&lt; ...)\n    $(CC) -c -o $@ $(CFLAGS) $(INCFLAGS) $&lt; -MD -MF $*.d -MP\n    @echo\n\n$(TARGET)_$(JENNIC_CHIP)$(BIN_SUFFIX).elf: $(APPOBJS) $(addsuffix _$(JENNIC_CHIP_FAMILY).a,$(addprefix $(COMPONENTS_BASE_DIR)/Library/lib,$(APPLIBS))) \n    $(info Linking $@ ...)\n    $(CC) -Wl,--gc-sections -Wl,-u_AppColdStart -Wl,-u_AppWarmStart $(LDFLAGS) -T$(LINKCMD) -o $@ $(APPOBJS) -Wl,--start-group $(addprefix -l,$(LDLIBS)) -Wl,--end-group -Wl,-Map,$(TARGET)_$(JENNIC_CHIP)$(BIN_SUFFIX).map \n    ba-elf-size $@\n    @echo\n\n$(TARGET)_$(JENNIC_CHIP)$(BIN_SUFFIX).bin: $(TARGET)_$(JENNIC_CHIP)$(BIN_SUFFIX).elf \n    $(info Generating binary ...)\n    $(OBJCOPY) -S -O binary $&lt; $@\n</code></pre>\n\n<p>It compiles some C codes for a micro.</p>\n"}, {"tags": ["c++", "c", "haskell", "erlang", "snmp"], "answers": [{"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 1, "creation_date": 1434529305, "post_id": 30885833, "comment_id": 49811981, "body": "As much as I like to advertise Haskell \u2013 in a performance-related context it should always be noted that the language, due to lazyness, doesn&#39;t make it easy to get reliable performance. You <i>can</i> get very good performance if you know the language, even without too ugly manual optimisations. You can also make it parallel/concurrent very easily, and be pretty safe from all the risks this incurs in imperative language. But you can also easily end up with space leaks etc. if some list isn&#39;t evaluated strictly enough and piles up lazy thunks."}, {"owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1434532494, "post_id": 30885833, "comment_id": 49814127, "body": "@leftaroundabout True enough. The actual SNMP stuff is all going to be I/O; I guess it depends what you plan on doing with the results. (E.g., if you&#39;re just trying to poll everything and suck it into a database, it&#39;s probably fine...)"}], "tags": [], "owner": {"reputation": 58792, "user_id": 1006010, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f683d229f3673c9dcc3f3f2796d75c09?s=128&d=identicon&r=PG", "display_name": "MathematicalOrchid", "link": "https://stackoverflow.com/users/1006010/mathematicalorchid"}, "is_accepted": false, "score": 2, "last_activity_date": 1564048761, "last_edit_date": 1564048761, "creation_date": 1434528687, "answer_id": 30885833, "question_id": 30884995, "link": "https://stackoverflow.com/questions/30884995/which-language-and-lib-is-better-suited-for-high-performant-network-devices-poll/30885833#30885833", "title": "Which language and lib is better suited for high-performant network devices polling server (SNMP)?", "body": "<p>As a scripting language, I'd expect Python to be fairly slow.</p>\n\n<p>C or C++ ought to be about as performant as you can get. C# or Java probably aren't bad. Erlang should be reasonable. GHC compiles Haskell to native machine code, so it ought to be fairly fast. In the end, this is going to come down to which library do you like the look of the most.</p>\n\n<p>I have no idea what SNMP is or what it does. But I found <a href=\"http://hackage.haskell.org/package/NetSNMP\" rel=\"nofollow noreferrer\">a Haskell library for SNMP</a>. According to the documentation, a trivial SNMP client might look something like this:</p>\n\n<pre><code>import Network.Protocol.Snmp\nimport Control.Applicative\nimport Network.Socket.ByteString (recv, sendAll)\nimport Network.Socket hiding (recv, sendAll)\n\n-- create new empty packet\nv2 :: Packet\nv2 = initial Version2\n\ncommunity = Community \"hello\"\n\noi = Coupla [1,3,6,1,2,1,1,4,0] Zero\n\n-- set community, oid\npacket :: Community -&gt; Coupla -&gt; Packet\npacket community oi = \n  setCommunityP community . setSuite (Suite [oi]) $ v2\n\n-- here must be code for create udp socket\nmakeSocket :: Hostname -&gt; Port -&gt; IO Socket\nmakeSocket = undefined\n\nmain :: IO ()\nmain = do\n   socket &lt;- makeSocket \"localhost\" \"161\"\n   sendAll socket $ encode $ setRequest (GetRequest 1 0 0) packet\n   result &lt;- decode &lt;$&gt; recv socket 1500 :: IO Packet\n   print $ getSuite result \n</code></pre>\n\n<p>If that looks OK to you, go knock yourself out...</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 4303358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xe2hN32yExw/AAAAAAAAAAI/AAAAAAAAAuo/NBcl0wsGWzs/photo.jpg?sz=128", "display_name": "Anton K", "link": "https://stackoverflow.com/users/4303358/anton-k"}, "edited": false, "score": 0, "creation_date": 1434612384, "post_id": 30896305, "comment_id": 49855796, "body": "Thanks! I know Erlang has full SNMP support. Even SMI is fully supported. The thing is I need some simple polling server service which can poll 1000 hosts in 5-10 seconds on Core2Duo without much CPU load (so as fast as possible)."}, {"owner": {"reputation": 61, "user_id": 4303358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xe2hN32yExw/AAAAAAAAAAI/AAAAAAAAAuo/NBcl0wsGWzs/photo.jpg?sz=128", "display_name": "Anton K", "link": "https://stackoverflow.com/users/4303358/anton-k"}, "edited": false, "score": 0, "creation_date": 1434614248, "post_id": 30896305, "comment_id": 49856919, "body": "Well, I said poll 1000 hosts in 5-10 seconds but didn&#39;t provide any other info. Let&#39;s assume it&#39;s ideal local network with FastEthernet links. So infrastructure is good enough to handle the load. The problem is enc/dec and response processing should be fast enough. Erlang seems a better option due to it&#39;s full SNMP support, reliability and scalability (if I get it right, I can balance the load on more than one machine without much code changes). But how fast is it?  Let aside user (my) code."}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 61, "user_id": 4303358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xe2hN32yExw/AAAAAAAAAAI/AAAAAAAAAuo/NBcl0wsGWzs/photo.jpg?sz=128", "display_name": "Anton K", "link": "https://stackoverflow.com/users/4303358/anton-k"}, "edited": false, "score": 0, "creation_date": 1434615665, "post_id": 30896305, "comment_id": 49857715, "body": "1000 hosts in 5s are 200 in 1s. It is 100 hosts pers second and core. Just check the speed of encoding and decoding and you should have a basic idea if it is viable. It is way how to decide if there can be any problem in this particular regard of encoding and decoding. If you find all encoding and decoding load for one host is far less than 10ms, you can worry about the rest which usually is less problem in Erlang."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 3, "last_activity_date": 1434556884, "last_edit_date": 1434556884, "creation_date": 1434555774, "answer_id": 30896305, "question_id": 30884995, "link": "https://stackoverflow.com/questions/30884995/which-language-and-lib-is-better-suited-for-high-performant-network-devices-poll/30896305#30896305", "title": "Which language and lib is better suited for high-performant network devices polling server (SNMP)?", "body": "<p>Erlang support for SNMP in OTP distribution as application <a href=\"http://www.erlang.org/doc/apps/snmp/index.html\" rel=\"nofollow\"><code>snmp</code></a>. It means it is stable, matured and battle tested in a corporate environment. It <a href=\"http://www.erlang.org/doc/apps/snmp/snmp_intro.html\" rel=\"nofollow\">supports</a>:</p>\n\n<blockquote>\n  <p>The SNMP development toolkit contains the following parts:</p>\n  \n  <ul>\n  <li>An Extensible multi-lingual SNMP agent, which understands SNMPv1\n  (RFC1157), SNMPv2c (RFC1901, 1905, 1906 and 1907), SNMPv3 (RFC2271,\n  2272, 2273, 2274 and 2275), or any combination of these protocols.</li>\n  <li>A multi-lingual SNMP manager.</li>\n  <li>A MIB compiler, which understands SMIv1\n  (RFC1155, 1212, and 1215) and SMIv2 (RFC1902, 1903, and 1904).</li>\n  </ul>\n</blockquote>\n\n<p>From the point of language, Erlang is strict but dynamically typed functional language with strict evaluation and embedded concurrency (actor based) and strong reliability support. (You can think about is as DSL for writing reliable clustered services.) Erlang compile to bytecode or native (but not as efficient as Haskell) and runs in own VM BEAM. The Haskell is strict and static typed functional with lazy evaluation and no embedded support for concurrency and reliability, but there are solutions in modules. In my personal opinion, Erlang is much smaller language and simpler to learn for somebody going from an imperative language.</p>\n\n<p>Erlang is often not recognized for its speed, but there are real-world applications where Erlang outperforms Java, C++ or C# solutions especially under concurrent load. There is even a <a href=\"http://www.erlang.org/workshop/2003/paper/p1-nystrom.pdf\" rel=\"nofollow\">study</a> comparing real C++ application with Erlang counterpart. The result is really surprising.</p>\n\n<p>I personally would choose Erlang ower Haskell. There is one major catch, for writing corporate grade solution the <a href=\"http://www.erlang.org/doc/design_principles/users_guide.html\" rel=\"nofollow\">OTP</a> is must. Where Erlang as language is small and easy, the OTP is much harder but concurrency and reliability are hard itself and OTP makes it actually easier.</p>\n\n<p>As last remark, there is always possible rewrite time critical parts from Erlang to C or C++ as native implemented functions (NIF) and I found it surprisingly easy in comparison with my previous experience with writing similar functions for Perl or Python.</p>\n"}], "owner": {"reputation": 61, "user_id": 4303358, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xe2hN32yExw/AAAAAAAAAAI/AAAAAAAAAuo/NBcl0wsGWzs/photo.jpg?sz=128", "display_name": "Anton K", "link": "https://stackoverflow.com/users/4303358/anton-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "closed_date": 1435046239, "accepted_answer_id": 30896305, "answer_count": 2, "score": 2, "last_activity_date": 1564048761, "creation_date": 1434526156, "last_edit_date": 1434526551, "question_id": 30884995, "link": "https://stackoverflow.com/questions/30884995/which-language-and-lib-is-better-suited-for-high-performant-network-devices-poll", "closed_reason": "Not suitable for this site", "title": "Which language and lib is better suited for high-performant network devices polling server (SNMP)?", "body": "<p>I'm working on network devices monitoring solution at work. Prototype is written on Python using PySNMP which is awfully slow and stresses CPU a lot with small amount of devices being monitored. So I thought of making some small high-performance SNMP polling server to get rid of PySnmp and split the program in two (data provider and data analyser/decision maker).</p>\n\n<p>Net-SNMP is not a good choice for SNMPv3 (not thread-safe, not fully async due to synchronous engineID discovery, which is slow if device is not responding) and I don't like SNMP++, so I decided to try writing this server on other languages. Java is not an option (no JVM), so in the end it's Erlang or Haskell (I don't know both of them..). Erlang does have built-in SNMP support, but I don't need process/machine distribution.</p>\n\n<p>So could you please recommend which lang and snmp protocol (manager) implementation is better suited for the task?\nRequirements:</p>\n\n<ul>\n<li>high performance (small CPU usage),</li>\n<li>stability,</li>\n<li>high concurrency (a lot of simultaneous polls),</li>\n<li>non-blocking requests,</li>\n<li>full Snmp V1, V2C and V3 support.</li>\n</ul>\n"}, {"tags": ["c++", "c", "stack"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1434526304, "post_id": 30884991, "comment_id": 49810191, "body": "Maybe Because, that is how your compiler maps the different segments."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1434526516, "post_id": 30884991, "comment_id": 49810313, "body": "Because that&#39;s where your system has decided to place things. There is no real reasons to have things one way or another - except by custom, stack is often at a high address in the virtual memory. But you could place the stack at a low address and data variables at a high address too."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1434526601, "post_id": 30884991, "comment_id": 49810357, "body": "<a href=\"http://stackoverflow.com/questions/12798486/bss-segment-in-c\">Possible duplicate</a>."}, {"owner": {"reputation": 131, "user_id": 398676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9a1553c45365f2e8b8a247baebf69252?s=128&d=identicon&r=PG", "display_name": "wildpointercs", "link": "https://stackoverflow.com/users/398676/wildpointercs"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1434526790, "post_id": 30884991, "comment_id": 49810466, "body": "@Lundin, I don&#39;t think they are the same question."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1434529458, "post_id": 30884991, "comment_id": 49812098, "body": "@SouravGhosh I was about to say the same thing, but the SS and DS segments overlap in the x86-64 architecture (i.e. segmentation is not used as it was), read <a href=\"https://en.wikipedia.org/wiki/X86_memory_segmentation\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1434532094, "post_id": 30884991, "comment_id": 49813853, "body": "Not the same question, but the same answer."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 398676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9a1553c45365f2e8b8a247baebf69252?s=128&d=identicon&r=PG", "display_name": "wildpointercs", "link": "https://stackoverflow.com/users/398676/wildpointercs"}, "edited": false, "score": 0, "creation_date": 1434526867, "post_id": 30885176, "comment_id": 49810511, "body": "You are right, it is not defined. Even I changed .cpp to .c, the result is the same."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1434526978, "last_edit_date": 1434526978, "creation_date": 1434526656, "answer_id": 30885176, "question_id": 30884991, "link": "https://stackoverflow.com/questions/30884991/memory-layout-of-c-program-about-the-location-of-local-variable-and-global-vari/30885176#30885176", "title": "Memory layout of c program, about the location of local variable and global varible", "body": "<p>The memory layout of a c (or c++) program is not defined by the c (or c++) standard. Your books are lying out of ignorance or perhaps they've actually said that is a <strong>typical</strong> memory layout or a layout which is true for a program produced by <em>a particular</em> compiler on <em>a particular</em> platform which is not necessarily same as yours. Since the layout is not defined, different compilers on different platforms may use any memory layout they find practical.</p>\n\n<p>Your program is c++ rather than c though, so if such layout was defined for c, it wouldn't necessarily apply to your program.</p>\n"}, {"tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 1, "last_activity_date": 1434526982, "creation_date": 1434526982, "answer_id": 30885284, "question_id": 30884991, "link": "https://stackoverflow.com/questions/30884991/memory-layout-of-c-program-about-the-location-of-local-variable-and-global-vari/30885284#30885284", "title": "Memory layout of c program, about the location of local variable and global varible", "body": "<p>Neither the C nor C++ standard has ever specified where objects are to be placed in memory. They definitely don't say anything about where the memory segments are, relative to each other. (In fact, some architectures don't even store their code and data in the same memory space at all!)</p>\n\n<p>While your book's statement may be true for some OSes and architectures, it is by no means true for all of them. Modern address space randomization may further muddy the picture by placing the stack, program and heap addresses randomly.</p>\n"}], "owner": {"reputation": 131, "user_id": 398676, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9a1553c45365f2e8b8a247baebf69252?s=128&d=identicon&r=PG", "display_name": "wildpointercs", "link": "https://stackoverflow.com/users/398676/wildpointercs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434526982, "creation_date": 1434526154, "question_id": 30884991, "link": "https://stackoverflow.com/questions/30884991/memory-layout-of-c-program-about-the-location-of-local-variable-and-global-vari", "title": "Memory layout of c program, about the location of local variable and global varible", "body": "<p>Some books and web pages told me knowledge about memory layout of a C program. Such as stack locates at higher addresses than heap, global variables locate lower than stack. But I find this is not true:</p>\n\n<p>D:\\code>type testlayout.cpp</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint g;\n\n\nint main()\n{\n    int loc = 0;\n    printf(\"%p %p\\n\", &amp;g, &amp;loc);\n}\n</code></pre>\n\n<p>D:\\code>cl testlayout.cpp</p>\n\n<pre><code>Microsoft (R) C/C++ Optimizing Compiler Version 17.00.61030 for x64\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ntestlayout.cpp\nMicrosoft (R) Incremental Linker Version 11.00.61030.0\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\n/out:testlayout.exe\ntestlayout.obj\n</code></pre>\n\n<p>D:\\code>testlayout.exe</p>\n\n<pre><code>000000013F2222C0 000000000022FB20\n</code></pre>\n\n<p>D:\\code></p>\n\n<p>Can anyone explain why the address of the global variableis larger than the address of the local variable.</p>\n"}, {"tags": ["c", "matlab", "simulink"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1434525872, "post_id": 30884632, "comment_id": 49809918, "body": "First googled <a href=\"http://www.mathworks.com/matlabcentral/answers/86089-how-to-solve-this-error-as-mentioned-unable-to-locate-a-c-compiler-required-by-stateflow-and-matla\" rel=\"nofollow noreferrer\">HERE</a>"}, {"owner": {"reputation": 35987, "user_id": 2732801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YEZ8S.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2732801/daniel"}, "edited": false, "score": 1, "creation_date": 1434528675, "post_id": 30884632, "comment_id": 49811596, "body": "Did you try running <code>mex -setup</code>? Is a supported compiler installed? Which matlab version are you using?"}, {"owner": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434529610, "post_id": 30884632, "comment_id": 49812195, "body": "I have Matlab 2013. Also, I installed the matlab package. Up to now, I did not install other compilers."}, {"owner": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434609797, "post_id": 30884632, "comment_id": 49854278, "body": "Interesting, I installed MS Visual Studion 2012, and I used mex -setup successfully with [21] Microsoft Visual C++ 2012. However, when I run the simulink model, I still receive this error: Unable to locate a C-compiler required by Stateflow and MATLAB Function blocks. Use &#39;mex -setup&#39; to select a supported C-compiler."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434536484, "post_id": 30886451, "comment_id": 49817037, "body": "It is Matlab R2013a, and my OS is windows 8 x64. The problem is that I also do not know how to install the c compiler."}, {"owner": {"reputation": 13405, "user_id": 2257388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d05a9418dc1d8c385e0db42c1e8af7?s=128&d=identicon&r=PG", "display_name": "am304", "link": "https://stackoverflow.com/users/2257388/am304"}, "reply_to_user": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434536919, "post_id": 30886451, "comment_id": 49817297, "body": "Look at the link I provided for R2013a, MathWorks lists all supported compilers and point to where you can download them from and any installation notes that are not part of the standard installation. It&#39;s really very easy: download, install, run <code>mex-setup</code>. There&#39;s not much more to it than that."}, {"owner": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434539139, "post_id": 30886451, "comment_id": 49818752, "body": "Thanks, I downloaded and installed Microsoft SDK 7.1. However, when I run    mex-setup in matlab, it says: No supported SDK or compiler was found on this computer. For a list of supported compilers"}, {"owner": {"reputation": 13405, "user_id": 2257388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d05a9418dc1d8c385e0db42c1e8af7?s=128&d=identicon&r=PG", "display_name": "am304", "link": "https://stackoverflow.com/users/2257388/am304"}, "reply_to_user": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434546656, "post_id": 30886451, "comment_id": 49824413, "body": "Did the SDK installation finish wtihout error? Did you check you had the .NET Framework 4.0 installed or if not, installed it beforehand? Did you restart the PC afterwards?"}, {"owner": {"reputation": 13405, "user_id": 2257388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d05a9418dc1d8c385e0db42c1e8af7?s=128&d=identicon&r=PG", "display_name": "am304", "link": "https://stackoverflow.com/users/2257388/am304"}, "reply_to_user": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434546739, "post_id": 30886451, "comment_id": 49824491, "body": "See also <a href=\"http://www.mathworks.com/matlabcentral/answers/101105-how-do-i-install-microsoft-windows-sdk-7-1\" rel=\"nofollow noreferrer\">mathworks.com/matlabcentral/answers/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434562400, "post_id": 30886451, "comment_id": 49836006, "body": "No it did not, so I installed microsoft visual studio 2013. Now I need to locate the compiler for the     mex -setup command, and I cannot."}, {"owner": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434567002, "post_id": 30886451, "comment_id": 49838801, "body": "Interesting, I installed MS Visual Studion 2012, and I used mex -setup successfully with [21] Microsoft Visual C++ 2012. However, when I run the simulink model, I still receive this error: Unable to locate a C-compiler required by Stateflow and MATLAB Function blocks. Use &#39;mex -setup&#39; to select a supported C-compiler."}, {"owner": {"reputation": 13405, "user_id": 2257388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d05a9418dc1d8c385e0db42c1e8af7?s=128&d=identicon&r=PG", "display_name": "am304", "link": "https://stackoverflow.com/users/2257388/am304"}, "reply_to_user": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434719592, "post_id": 30886451, "comment_id": 49912896, "body": "Rather than try to install several compilers in succession, you should try and work out what went wrong when installing the SDK. Did you follow the steps in <a href=\"http://www.mathworks.com/matlabcentral/answers/101105-how-do-i-install-microsoft-windows-sdk-7-1\" rel=\"nofollow noreferrer\">mathworks.com/matlabcentral/answers/&hellip;</a>? There are specific instructions for Windows 8 users and if you already have some other compiler or .NET Framework installed. Check it out."}, {"owner": {"reputation": 13405, "user_id": 2257388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d05a9418dc1d8c385e0db42c1e8af7?s=128&d=identicon&r=PG", "display_name": "am304", "link": "https://stackoverflow.com/users/2257388/am304"}, "reply_to_user": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "edited": false, "score": 0, "creation_date": 1434719994, "post_id": 30886451, "comment_id": 49913154, "body": "Also, if you read the list of supported compilers I mentione din my answer, you&#39;d see that MSVS 2013 is <b>not</b> supported."}], "tags": [], "owner": {"reputation": 13405, "user_id": 2257388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d05a9418dc1d8c385e0db42c1e8af7?s=128&d=identicon&r=PG", "display_name": "am304", "link": "https://stackoverflow.com/users/2257388/am304"}, "is_accepted": false, "score": 1, "last_activity_date": 1434530431, "creation_date": 1434530431, "answer_id": 30886451, "question_id": 30884632, "link": "https://stackoverflow.com/questions/30884632/matlab-simulink-unable-to-locate-a-c-compiler-required-by-stateflow-and-matlab-f/30886451#30886451", "title": "Matlab simulink Unable to locate a C-compiler required by Stateflow and MATLAB Function blocks. Use &#39;mex -setup&#39; to select a supported C-compiler", "body": "<p>As suggested in the comments, you need to run <code>mex -setup</code> to set up a C compiler. For a list of supported C compilers for your MATLAB version (you don't say whether it is R2013a or R2013b, and which O/S you are running on), see <a href=\"http://uk.mathworks.com/support/compilers/R2013a/\" rel=\"nofollow\">Supported and Compatible Compilers \u2013 Release 2013a</a> and <a href=\"http://uk.mathworks.com/support/compilers/R2013b/\" rel=\"nofollow\">Supported and Compatible Compilers \u2013 Release 2013b</a> on the MathWorks web site.</p>\n"}], "owner": {"reputation": 11, "user_id": 4394231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405aa0c149999ee3fb94aab63145a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "Amir_Control", "link": "https://stackoverflow.com/users/4394231/amir-control"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1647, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1434530431, "creation_date": 1434525111, "question_id": 30884632, "link": "https://stackoverflow.com/questions/30884632/matlab-simulink-unable-to-locate-a-c-compiler-required-by-stateflow-and-matlab-f", "title": "Matlab simulink Unable to locate a C-compiler required by Stateflow and MATLAB Function blocks. Use &#39;mex -setup&#39; to select a supported C-compiler", "body": "<p>I have a model in matlab simulink. I have installed matlab in D drive. When I run my model I get the following error:</p>\n\n<pre><code>Unable to locate a C-compiler required by Stateflow and MATLAB Function blocks.\nUse 'mex -setup' to select a supported C-compiler.\n</code></pre>\n\n<p>This is not a syntax or semantics. How can I solve this? Thanks</p>\n"}, {"tags": ["c", "linux", "debugging", "gdb", "ps"], "comments": [{"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 2, "creation_date": 1434525321, "post_id": 30884627, "comment_id": 49809607, "body": "That <code>0xdeadbeef</code> in <code>rax</code> looks very suspicious..."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1434525546, "post_id": 30884627, "comment_id": 49809738, "body": "Can you provide /proc/[pid-of-ps]/maps output?"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1434578043, "post_id": 30884627, "comment_id": 49844972, "body": "Might be a bug in ps. What was the exact command line you used for ps?"}, {"owner": {"reputation": 493, "user_id": 1480969, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/EniOH.jpg?s=128&g=1", "display_name": "Guruswamy Basavaiah", "link": "https://stackoverflow.com/users/1480969/guruswamy-basavaiah"}, "edited": false, "score": 0, "creation_date": 1434616230, "post_id": 30884627, "comment_id": 49858074, "body": "Command line : &#39;ps 18422&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5018224, "user_type": "registered", "profile_image": "https://graph.facebook.com/847714395299337/picture?type=large", "display_name": "Karthik K Sridhar", "link": "https://stackoverflow.com/users/5018224/karthik-k-sridhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1434545346, "creation_date": 1434545346, "answer_id": 30892109, "question_id": 30884627, "link": "https://stackoverflow.com/questions/30884627/linux-ps-command-core-randomly/30892109#30892109", "title": "Linux ps command core randomly", "body": "<p>Please find the proc/map file contents below for the above segmentation fault: On behalf of Guruswamy Basavaiah</p>\n\n<pre><code>    00400000-00416000 r-xp 00000000 00:11 6116                               /bin/ps\n    00615000-00616000 rw-p 00015000 00:11 6116                               /bin/ps\n    00616000-00636000 rw-p 00000000 00:00 0\n    7ffe0258d000-7ffe026e1000 r-xp 00000000 00:11 8166                       /lib64/libc-2.11.1.so\n    7ffe026e1000-7ffe028e1000 ---p 00154000 00:11 8166                       /lib64/libc-2.11.1.so\n    7ffe028e1000-7ffe028e5000 r--p 00154000 00:11 8166                       /lib64/libc-2.11.1.so\n    7ffe028e5000-7ffe028e6000 rw-p 00158000 00:11 8166                       /lib64/libc-2.11.1.so\n    7ffe028e6000-7ffe028eb000 rw-p 00000000 00:00 0\n    7ffe028eb000-7ffe028ed000 r-xp 00000000 00:11 8175                       /lib64/libdl-2.11.1.so\n    7ffe028ed000-7ffe02aed000 ---p 00002000 00:11 8175                       /lib64/libdl-2.11.1.so\n    7ffe02aed000-7ffe02aee000 r--p 00002000 00:11 8175                       /lib64/libdl-2.11.1.so\n    7ffe02aee000-7ffe02aef000 rw-p 00003000 00:11 8175                       /lib64/libdl-2.11.1.so\n    7ffe02aef000-7ffe02afe000 r-xp 00000000 00:11 8213                       /lib64/libproc-3.2.8.so\n    7ffe02afe000-7ffe02cfe000 ---p 0000f000 00:11 8213                       /lib64/libproc-3.2.8.so\n    7ffe02cfe000-7ffe02cff000 rw-p 0000f000 00:11 8213                       /lib64/libproc-3.2.8.so\n    7ffe02cff000-7ffe02d13000 rw-p 00000000 00:00 0\n    7ffe02d14000-7ffe02d35000 rw-p 00000000 00:00 0                          [stack]\n    7ffe02d7f000-7ffe02d80000 r-xp 00000000 00:00 0                          [vdso]\n    7ffe02eaa000-7ffe02ec8000 r-xp 00000000 00:11 8156                       /lib64/ld-2.11.1.so\n    7ffe030b9000-7ffe030bc000 rw-p 00000000 00:00 0\n    7ffe030c6000-7ffe030c7000 rw-p 00000000 00:00 0\n    7ffe030c7000-7ffe030c8000 r--p 0001d000 00:11 8156                       /lib64/ld-2.11.1.so\n    7ffe030c8000-7ffe030c9000 rw-p 0001e000 00:11 8156                       /lib64/ld-2.11.1.so\n    7ffe030c9000-7ffe030ca000 rw-p 00000000 00:00 0\n    ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n</code></pre>\n"}], "owner": {"reputation": 493, "user_id": 1480969, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/EniOH.jpg?s=128&g=1", "display_name": "Guruswamy Basavaiah", "link": "https://stackoverflow.com/users/1480969/guruswamy-basavaiah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434545346, "creation_date": 1434525100, "last_edit_date": 1434526037, "question_id": 30884627, "link": "https://stackoverflow.com/questions/30884627/linux-ps-command-core-randomly", "title": "Linux ps command core randomly", "body": "<p>I am observing segmentation fault randomly when doing a ps of a particular process id. THe process to which the pid is pointing was up and running during the time ps {pid} was executed</p>\n\n<p>Backtrace :</p>\n\n<pre><code>(gdb) bt\n#0  reset_global () at ps/global.c:362\n#1  0x0000000000402456 in main (argc=2, argv=0x7ffe02d33fa8) at ps/display.c:578 (gdb)\n</code></pre>\n\n<blockquote>\n  <p>at ps/global.c:362 there is a call to look_up_our_self(&amp;p);</p>\n</blockquote>\n\n<pre><code>359         void reset_global(void){\n360           static proc_t p;\n361           reset_selection_list();\n362           look_up_our_self(&amp;p);\n363           set_screen_size();\n364           set_personality();\n365           int fd;\n366           char *buf[BUFFSIZE];\n</code></pre>\n\n<blockquote>\n  <p>disassemble out put.</p>\n</blockquote>\n\n<pre><code>gdb) disassemble\n\n0x000000000040315a &lt;+74&gt;:       callq  0x401930 &lt;free@plt&gt;\n   0x000000000040315f &lt;+79&gt;:    test   %rbp,%rbp\n   0x0000000000403162 &lt;+82&gt;:    jne    0x403148 &lt;reset_global+56&gt;\n   0x0000000000403164 &lt;+84&gt;:    lea    0x10(%rsp),%rbx\n   0x0000000000403169 &lt;+89&gt;:    mov    $0x635860,%edi\n   0x000000000040316e &lt;+94&gt;:    movq   $0x0,0x21253f(%rip)        # 0x6156b8 &lt;selection_list&gt;\n=&gt; 0x0000000000403179 &lt;+105&gt;:   callq  0x401a60 &lt;look_up_our_self@plt&gt;\n   0x000000000040317e &lt;+110&gt;:   xor    %eax,%eax\n   0x0000000000403180 &lt;+112&gt;:   mov    %rbx,%rdx\n   0x0000000000403183 &lt;+115&gt;:   mov    $0x5413,%esi\n   0x0000000000403188 &lt;+120&gt;:   mov    $0x1,%edi\n   0x000000000040318d &lt;+125&gt;:   callq  0x4017f0 &lt;ioctl@plt&gt;\n   0x0000000000403192 &lt;+130&gt;:   cmp    $0xffffffffffffffff,%eax\n</code></pre>\n\n<blockquote>\n  <p>Registers</p>\n</blockquote>\n\n<pre><code>(gdb) info registers\nrax            0xdeadbeef       3735928559\nrbx            0x7ffe02cb3d50   140728945294672\nrcx            0x0      0\nrdx            0x0      0\nrsi            0x7ffe02d33ce0   140728945818848\nrdi            0x635860 6510688\nrbp            0x7ffe02d33df0   0x7ffe02d33df0\nrsp            0x7ffe02cb3d40   0x7ffe02cb3d40\nr8             0x0      0\nr9             0x1      1\nr10            0x8      8\nr11            0x206    518\nr12            0x2      2\nr13            0x7ffe02d33fa8   140728945819560\nr14            0x0      0\nr15            0x0      0\nrip            0x403179 0x403179 &lt;reset_global+105&gt;\neflags         0x10246  [ PF ZF IF RF ]\ncs             0x33     51\nss             0x2b     43\nds             0x0      0\nes             0x0      0\nfs             0x0      0\ngs             0x0      0\n(gdb) \n</code></pre>\n\n<blockquote>\n  <p>update: maps output:</p>\n</blockquote>\n\n<pre><code>00400000-00416000 r-xp 00000000 00:11 6116\n/bin/ps 00615000-00616000 rw-p 00015000 00:11 6116\n/bin/ps 00616000-00636000 rw-p 00000000 00:00 0 7ffe0258d000-7ffe026e1000 r-xp 00000000 00:11 8166\n/lib64/libc-2.11.1.so 7ffe026e1000-7ffe028e1000 ---p 00154000 00:11 8166 /lib64/libc-2.11.1.so 7ffe028e1000-7ffe028e5000 r--p 00154000 00:11 8166\n/lib64/libc-2.11.1.so 7ffe028e5000-7ffe028e6000 rw-p 00158000 00:11 8166 /lib64/libc-2.11.1.so 7ffe028e6000-7ffe028eb000 rw-p 00000000 00:00 0 7ffe028eb000-7ffe028ed000 r-xp 00000000 00:11 8175\n/lib64/libdl-2.11.1.so 7ffe028ed000-7ffe02aed000 ---p 00002000 00:11 8175 /lib64/libdl-2.11.1.so 7ffe02aed000-7ffe02aee000 r--p 00002000 00:11 8175\n/lib64/libdl-2.11.1.so 7ffe02aee000-7ffe02aef000 rw-p 00003000 00:11 8175 /lib64/libdl-2.11.1.so 7ffe02aef000-7ffe02afe000 r-xp 00000000 00:11 8213\n/lib64/libproc-3.2.8.so 7ffe02afe000-7ffe02cfe000 ---p 0000f000 00:11 8213 /lib64/libproc-3.2.8.so 7ffe02cfe000-7ffe02cff000 rw-p 0000f000 00:11 8213\n/lib64/libproc-3.2.8.so 7ffe02cff000-7ffe02d13000 rw-p 00000000 00:00 0 7ffe02d14000-7ffe02d35000 rw-p 00000000 00:00 0\n[stack] 7ffe02d7f000-7ffe02d80000 r-xp 00000000 00:00 0\n[vdso] 7ffe02eaa000-7ffe02ec8000 r-xp 00000000 00:11 8156\n/lib64/ld-2.11.1.so 7ffe030b9000-7ffe030bc000 rw-p 00000000 00:00 0 7ffe030c6000-7ffe030c7000 rw-p 00000000 00:00 0 7ffe030c7000-7ffe030c8000 r--p 0001d000 00:11 8156\n/lib64/ld-2.11.1.so 7ffe030c8000-7ffe030c9000 rw-p 0001e000 00:11 8156 /lib64/ld-2.11.1.so 7ffe030c9000-7ffe030ca000 rw-p 00000000 00:00 0 ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0\n[vsyscall]\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "malloc", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1434529211, "post_id": 30884544, "comment_id": 49811913, "body": "Next time look into <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\"><code>valgrind</code></a> for any problem possibly related to memory allocation."}, {"owner": {"reputation": 57, "user_id": 3368605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079502179c37f5b94262d400541344b8?s=128&d=identicon&r=PG&f=1", "display_name": "wing", "link": "https://stackoverflow.com/users/3368605/wing"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1434534745, "post_id": 30884544, "comment_id": 49815857, "body": "@Jongware KILLER APP, thanks! There is something similar for windows too?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1434535923, "post_id": 30884544, "comment_id": 49816704, "body": "Sorry, I did not know it&#39;s for Mac/Linux only: &quot;Windows is not under consideration because porting to it would require so many changes it would almost be a separate project&quot; (<a href=\"http://valgrind.org/info/platforms.html\" rel=\"nofollow noreferrer\">valgrind/platforms</a>). But see <a href=\"http://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows\">Is there a good Valgrind substitute for Windows?</a> for a list of suggestions."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1434526890, "last_edit_date": 1434526890, "creation_date": 1434525022, "answer_id": 30884605, "question_id": 30884544, "link": "https://stackoverflow.com/questions/30884544/word-translator-program-based-on-string-comparison-heap-memory-assertion-fails/30884605#30884605", "title": "Word translator program based on string comparison - heap memory assertion fails", "body": "<p>In your code, <code>tok</code> is not pointing to dynamically allocated memory. You need not (and can not) <code>free()</code> it. Remove</p>\n\n<pre><code> free(tok);\n</code></pre>\n\n<p>from the code.</p>\n\n<p>From the <a href=\"http://linux.die.net/man/3/free\" rel=\"nofollow\">man page of <code>free()</code></a></p>\n\n<blockquote>\n  <p>The <code>free(ptr)</code> function frees the memory space pointed to by <code>ptr</code>, which must have been returned by a previous call to <code>malloc()</code>, <code>calloc()</code> or <code>realloc()</code>. Otherwise, or if <code>free(ptr)</code> has already been called before,  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.\n   occurs.</p>\n</blockquote>\n\n<p>That said, always check the return value of <code>fopen()</code> and <code>malloc()</code> (and possibly, all library functions) to ensure success before using the returned pointer.</p>\n"}], "owner": {"reputation": 57, "user_id": 3368605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079502179c37f5b94262d400541344b8?s=128&d=identicon&r=PG&f=1", "display_name": "wing", "link": "https://stackoverflow.com/users/3368605/wing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 30884605, "answer_count": 1, "score": 0, "last_activity_date": 1434526890, "creation_date": 1434524841, "last_edit_date": 1434526746, "question_id": 30884544, "link": "https://stackoverflow.com/questions/30884544/word-translator-program-based-on-string-comparison-heap-memory-assertion-fails", "title": "Word translator program based on string comparison - heap memory assertion fails", "body": "<p>I made a program that reads from file <code>english_dictionary.txt</code> the 200 most frequently used words in the English language, and in <code>foreign_dictionary.txt</code> I put the translations of the respective words in a foreign language.</p>\n\n<p>The content of the .txt files is placed in two <code>char *</code> type array of <code>200</code> elements.</p>\n\n<p>Then the program reads from file <code>text_to_translate.txt</code>, that containing a text in English, and would replace the strings(words) in English with foreign ones if it finds a match (this happens inside the <code>compute_text</code> function). But it does not work, i've the failure of assertion about heap memory, so i suppose i've wrong something with malloc or something like that, but i can't understand where i wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid foreign_dictionary(char **foreign, FILE *fp){\n\n    char *buffer = malloc(30 * sizeof(char));\n    char *tok;\n    int i;\n\n    for (i = 0; i &lt; 200; ++i){\n        fgets(buffer, 29, fp);\n        tok = strtok(buffer, \"\\n\");\n        foreign[i] = malloc(strlen(tok) + 1);\n        strcpy(foreign[i], tok);\n    }\n\n    free(tok);\n    free(buffer);\n}\n\nvoid dictionary(char **english, FILE *fp){\n\n    int i;\n    char *tok;\n\n    char *buffer = malloc(30 * sizeof(char));\n\n    for (i = 0; i &lt; 200; ++i){\n        fgets(buffer, 29, fp);\n        tok = strtok(buffer, \" \\n\");\n        english[i] = malloc(strlen(tok) + 1);\n        strcpy(english[i], tok);\n    }\n    free(buffer);\n    free(tok);\n}\n\nvoid compute_text(char **text,FILE *fp){\n\n    char *buffer;\n    int i, j, flag = 0, words_number = 0, cnt_letters_word = 0;\n\n    buffer = malloc(100 * sizeof(char));\n\n    while (fgets(buffer, 100, fp) != NULL){\n        for (i = 0; i &lt; 100; ++i){\n            if (buffer[i] == ' ' || buffer[i] == '\\0'){\n                text[words_number] = malloc((cnt_letters_word + 1)* sizeof(char));\n                for (j = 0; j &lt; cnt_letters_word; ++j){\n                    if (isupper(buffer[flag + j]))\n                        text[words_number][j] = tolower(buffer[flag + j]);\n                    else\n                        text[words_number][j] = buffer[flag + j];\n                }\n                text[words_number][cnt_letters_word] = '\\0';\n                flag = i + 1;\n                cnt_letters_word = 0;\n                ++words_number;\n            }\n            else if (buffer[i] == '\\n' || buffer[i] == ',' || buffer[i] == '.' || buffer[i] == ';' || buffer[i] == ':')\n                ;\n            else\n                ++cnt_letters_word;\n        }\n        flag = 0;\n        cnt_letters_word = 0;\n    }\n    free(buffer);\n}\n\nint main(void){\n\n    char *foreign[200], *english[200], *text[50];\n\n    FILE *fp = fopen(\"foreign_dictionary.txt\", \"r\");\n    foreign_dictionary(foreign, fp);\n    fclose(fp);\n    fp = fopen(\"english_dictionary.txt\", \"r\");\n    dictionary(english, fp);\n    fclose(fp);\n    fp = fopen(\"text_to_translate.txt\", \"r\");\n    compute_text(text, fp);\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "printf", "double", "fgets", "atof"], "comments": [{"owner": {"reputation": 5427, "user_id": 452210, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c10263904a524105c03e72cbaeaf2b5f?s=128&d=identicon&r=PG", "display_name": "javabrett", "link": "https://stackoverflow.com/users/452210/javabrett"}, "edited": false, "score": 0, "creation_date": 1434524771, "post_id": 30884478, "comment_id": 49809284, "body": "Did you mean to <code>printf</code> <code>tam1</code>, or <code>c</code>?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1434525712, "post_id": 30884478, "comment_id": 49809831, "body": "Try <code>fscanf(txt1, &quot;%lf&quot;, &amp;c)</code> instead."}, {"owner": {"reputation": 11, "user_id": 5018318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153476687103586/picture?type=large", "display_name": "Hugo Ure&#241;a", "link": "https://stackoverflow.com/users/5018318/hugo-ure%c3%b1a"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1434526132, "post_id": 30884478, "comment_id": 49810079, "body": "@nneonneo it didn&#39;t work"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1434526242, "post_id": 30884478, "comment_id": 49810150, "body": "I have no idea what&#39;s wrong. Your code looks basically right, unless your file contains some bizarre characters or something."}, {"owner": {"reputation": 11, "user_id": 5018318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153476687103586/picture?type=large", "display_name": "Hugo Ure&#241;a", "link": "https://stackoverflow.com/users/5018318/hugo-ure%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1434526411, "post_id": 30884478, "comment_id": 49810254, "body": "yeah it was something like that.. i fixed it thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5018318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153476687103586/picture?type=large", "display_name": "Hugo Ure&#241;a", "link": "https://stackoverflow.com/users/5018318/hugo-ure%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1434526094, "post_id": 30884832, "comment_id": 49810059, "body": "it still doesn&#39;t work"}, {"owner": {"reputation": 401, "user_id": 4377391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nk8IR.jpg?s=128&g=1", "display_name": "rabi shaw", "link": "https://stackoverflow.com/users/4377391/rabi-shaw"}, "reply_to_user": {"reputation": 11, "user_id": 5018318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153476687103586/picture?type=large", "display_name": "Hugo Ure&#241;a", "link": "https://stackoverflow.com/users/5018318/hugo-ure%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1434527909, "post_id": 30884832, "comment_id": 49811124, "body": "for me its working fine o/p is as expected."}, {"owner": {"reputation": 11, "user_id": 5018318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153476687103586/picture?type=large", "display_name": "Hugo Ure&#241;a", "link": "https://stackoverflow.com/users/5018318/hugo-ure%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1434540660, "post_id": 30884832, "comment_id": 49819777, "body": "now my problem is i need to get 0.00000056 but it convert it as 5.6"}, {"owner": {"reputation": 401, "user_id": 4377391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nk8IR.jpg?s=128&g=1", "display_name": "rabi shaw", "link": "https://stackoverflow.com/users/4377391/rabi-shaw"}, "reply_to_user": {"reputation": 11, "user_id": 5018318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153476687103586/picture?type=large", "display_name": "Hugo Ure&#241;a", "link": "https://stackoverflow.com/users/5018318/hugo-ure%c3%b1a"}, "edited": false, "score": 0, "creation_date": 1434541683, "post_id": 30884832, "comment_id": 49820453, "body": "double c = atof(tam1);         printf(&quot;%.8f&quot;,c);    o/p--&gt;rabi@rabi-VirtualBox:~/rabi/c$ ./a.out  0.00000056rabi@rabi-VirtualBox:~/rabi/c$"}], "tags": [], "owner": {"reputation": 401, "user_id": 4377391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nk8IR.jpg?s=128&g=1", "display_name": "rabi shaw", "link": "https://stackoverflow.com/users/4377391/rabi-shaw"}, "is_accepted": true, "score": 0, "last_activity_date": 1434525710, "creation_date": 1434525710, "answer_id": 30884832, "question_id": 30884478, "link": "https://stackoverflow.com/questions/30884478/convert-char-array-into-double/30884832#30884832", "title": "Convert char array into double", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main(int argc, char *argv[])\n{\n        FILE *txt1;\n        char tam[13];\n        char tam1[13];\n        char tam2[13];\n        txt1 = fopen(\"99.c\",\"r\");\n        if(txt1 == NULL)\n        {\n                printf(\"No se puede leer el archivo\");\n                return 0;\n        }\n        fgets(tam1,sizeof(tam1), txt1);\n        double c = atof(tam1);\n        printf(\"%f\",c);// change from c\n}\n\no/p:\nrabi@rabi-VirtualBox:~/rabi/c$ ./a.out \n3.141593rabi@rabi-VirtualBox:~/rabi/c$ vi 4.c\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5018318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153476687103586/picture?type=large", "display_name": "Hugo Ure&#241;a", "link": "https://stackoverflow.com/users/5018318/hugo-ure%c3%b1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 0, "closed_date": 1434527164, "accepted_answer_id": 30884832, "answer_count": 1, "score": 0, "last_activity_date": 1434525710, "creation_date": 1434524682, "last_edit_date": 1434525475, "question_id": 30884478, "link": "https://stackoverflow.com/questions/30884478/convert-char-array-into-double", "closed_reason": "Not suitable for this site", "title": "Convert char array into double", "body": "<p>I have tried this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[]) {\n\nFILE *txt1;\nchar tam[13];\nchar tam1[13];\nchar tam2[13];\n\ntxt1 = fopen(\"C:/Users/Hugo/Documents/C/in2.txt\",\"r\");\nif(txt1 == NULL)\n{\n    printf(\"No se puede leer el archivo\");\n    return 0;\n}\nfgets(tam1,sizeof(tam1), txt1);\ndouble c = atof(tam1);\nprintf(\"%f\",c);\n</code></pre>\n\n<p>when I debug: <code>tam1</code> is \"3.1415926535\" But it prints this: </p>\n\n<blockquote>\n  <p>0.000000</p>\n</blockquote>\n"}, {"tags": ["c", "arrays", "comparison"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 8, "creation_date": 1434524249, "post_id": 30884335, "comment_id": 49808987, "body": "Maybe, compiler optimization.... using same instance of <code>&quot;test&quot;</code> ...not sure though"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1434524302, "post_id": 30884335, "comment_id": 49809018, "body": "There is no requirement that two identical string literals refer to two different strings."}, {"owner": {"reputation": 1363, "user_id": 2773647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Hr6Z2.jpg?s=128&g=1", "display_name": "cybersoft", "link": "https://stackoverflow.com/users/2773647/cybersoft"}, "edited": false, "score": 1, "creation_date": 1434524383, "post_id": 30884335, "comment_id": 49809063, "body": "sorry, <code>malloc</code> and other stuff."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 1363, "user_id": 2773647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Hr6Z2.jpg?s=128&g=1", "display_name": "cybersoft", "link": "https://stackoverflow.com/users/2773647/cybersoft"}, "edited": false, "score": 1, "creation_date": 1434524415, "post_id": 30884335, "comment_id": 49809088, "body": "@cybersoft and how that is relevant to this question?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1434524508, "post_id": 30884335, "comment_id": 49809139, "body": "The addresses compare equal because of <a href=\"http://stackoverflow.com/questions/11399682/c-optimisation-of-string-literals\">string pooling</a>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1434524592, "post_id": 30884335, "comment_id": 49809198, "body": "@Lundin Thank you. First real <i>answer</i>. :-)"}, {"owner": {"reputation": 1363, "user_id": 2773647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Hr6Z2.jpg?s=128&g=1", "display_name": "cybersoft", "link": "https://stackoverflow.com/users/2773647/cybersoft"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1434524593, "post_id": 30884335, "comment_id": 49809200, "body": "@SouravGhosh memory allocation will give different pointers and then <code>==</code> will give false even for equal strings."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1434524631, "post_id": 30884372, "comment_id": 49809217, "body": "@haccks Because I had another answer before which was based on me not reading the question :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1434524636, "post_id": 30884372, "comment_id": 49809219, "body": "@haccks NMDV, but maybe because of the ninja edit. :-)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1434524699, "post_id": 30884372, "comment_id": 49809260, "body": "@JoachimPileborg; Oh. But, now its fine."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1434524313, "creation_date": 1434524313, "answer_id": 30884372, "question_id": 30884335, "link": "https://stackoverflow.com/questions/30884335/c-comparison-of-arrays-with-works-why/30884372#30884372", "title": "C - Comparison of Arrays with == works, why?", "body": "<p>String literals are often reused by optimizing compilers, so if you use the same string literals twice, both will be the exactly same string literals. And your function are comparing <em>pointers</em>, and as both string literals are the same then you are comparing the same pointers which of course will give you a \"true\" value.</p>\n"}, {"comments": [{"owner": {"reputation": 1363, "user_id": 2773647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Hr6Z2.jpg?s=128&g=1", "display_name": "cybersoft", "link": "https://stackoverflow.com/users/2773647/cybersoft"}, "edited": false, "score": 0, "creation_date": 1434525057, "post_id": 30884402, "comment_id": 49809449, "body": "But the idea is right."}], "tags": [], "owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "is_accepted": false, "score": 4, "last_activity_date": 1434524732, "last_edit_date": 1434524732, "creation_date": 1434524396, "answer_id": 30884402, "question_id": 30884335, "link": "https://stackoverflow.com/questions/30884335/c-comparison-of-arrays-with-works-why/30884402#30884402", "title": "C - Comparison of Arrays with == works, why?", "body": "<p>It is so because same strings are stored as one string in the string pool during compilation . Therefore both points to the same address as there is only one \"test\" string in the string pool.\n<img src=\"https://i.stack.imgur.com/Wlu0V.png\" alt=\"Memory heap\"></p>\n"}, {"tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 7, "last_activity_date": 1434524447, "creation_date": 1434524447, "answer_id": 30884417, "question_id": 30884335, "link": "https://stackoverflow.com/questions/30884335/c-comparison-of-arrays-with-works-why/30884417#30884417", "title": "C - Comparison of Arrays with == works, why?", "body": "<p>I'd say this is the result of a compiler optimisation using the same instance of the string. If you did something like this you'd prove <code>==</code> doesn't work as you suggest:</p>\n\n<pre><code>char s1[10];\nchar s2[10];\nstrcpy(s1, \"test\");\nstrcpy(s2, \"test\");\nprintf(\"%d\\n\", comp(s1, s2));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 749, "user_id": 4764839, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e66rj.jpg?s=128&g=1", "display_name": "Liger", "link": "https://stackoverflow.com/users/4764839/liger"}, "is_accepted": false, "score": 0, "last_activity_date": 1434525002, "creation_date": 1434525002, "answer_id": 30884598, "question_id": 30884335, "link": "https://stackoverflow.com/questions/30884335/c-comparison-of-arrays-with-works-why/30884598#30884598", "title": "C - Comparison of Arrays with == works, why?", "body": "<p>Read about the concept of mutabe and immutable string. String stored in stack when compared returns true but if one string in heap an other in stack it returns false.</p>\n\n<p>Second question is, are you using prpredefined functions to compare 2 string then the functions works as follows</p>\n\n<p>Compare(s1,s2) returns positive zero or negative according as s1 preced, equals or follows s2 in lexicographical ordering basednon unicide character.</p>\n\n<p>Regards.</p>\n"}], "owner": {"reputation": 761, "user_id": 3990094, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8f85dae089a6c11339f051c01387f9f3?s=128&d=identicon&r=PG&f=1", "display_name": "knowledge", "link": "https://stackoverflow.com/users/3990094/knowledge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1434524542, "answer_count": 4, "score": 2, "last_activity_date": 1434525002, "creation_date": 1434524187, "last_edit_date": 1434524511, "question_id": 30884335, "link": "https://stackoverflow.com/questions/30884335/c-comparison-of-arrays-with-works-why", "closed_reason": "Duplicate", "title": "C - Comparison of Arrays with == works, why?", "body": "<p>I'm a little bit confused. I have the following function:</p>\n\n<pre><code>int comp(char s1[], char s2[]) {\n   return s1 == s2;\n}\n</code></pre>\n\n<p>As far as I know this compares only the addresses of the first elements from char array <code>s1</code> and char array <code>s2</code>. </p>\n\n<p>But strange is if I compare (in Visual Studio) two equal char arrays like    </p>\n\n<pre><code> comp(\"test\",\"test\");\n</code></pre>\n\n<p>I got 1 (true) instead of 0 (false). But should the addresses not be different and therefore the result should be always 0?</p>\n"}]